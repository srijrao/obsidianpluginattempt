/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian5 = require("obsidian");

// src/types.ts
var DEFAULT_SETTINGS = {
  referenceCurrentNote: false,
  provider: "openai",
  openaiSettings: {
    apiKey: "",
    model: "gpt-4o-mini",
    availableModels: []
  },
  anthropicSettings: {
    apiKey: "",
    model: "claude-3-5-sonnet-latest",
    availableModels: []
  },
  geminiSettings: {
    apiKey: "",
    model: "gemini-pro",
    availableModels: []
  },
  ollamaSettings: {
    serverUrl: "http://localhost:11434",
    model: "llama2",
    availableModels: []
  },
  systemMessage: "You are a helpful assistant.",
  temperature: 0.7,
  maxTokens: 1e3,
  includeDateWithSystemMessage: false,
  includeTimeWithSystemMessage: false,
  enableStreaming: true,
  autoOpenModelSettings: true,
  enableObsidianLinks: true,
  chatSeparator: "----",
  chatStartString: void 0,
  chatEndString: void 0,
  enableContextNotes: false,
  contextNotes: "",
  maxSessions: 10,
  autoSaveSessions: true,
  sessions: [],
  activeSessionId: void 0
};

// providers/base.ts
var ProviderError = class extends Error {
  constructor(type, message, statusCode) {
    super(message);
    __publicField(this, "type");
    __publicField(this, "statusCode");
    this.type = type;
    this.statusCode = statusCode;
    this.name = "ProviderError";
  }
};
var BaseProvider = class {
  /**
   * Handle common HTTP errors
   */
  handleHttpError(error) {
    if (error instanceof Response) {
      const status2 = error.status;
      switch (status2) {
        case 401:
          throw new ProviderError(
            "invalid_api_key" /* InvalidApiKey */,
            "Invalid API key",
            status2
          );
        case 429:
          throw new ProviderError(
            "rate_limit" /* RateLimit */,
            "Rate limit exceeded",
            status2
          );
        case 400:
          throw new ProviderError(
            "invalid_request" /* InvalidRequest */,
            "Invalid request",
            status2
          );
        case 500:
        case 502:
        case 503:
        case 504:
          throw new ProviderError(
            "server_error" /* ServerError */,
            "Server error occurred",
            status2
          );
        default:
          throw new ProviderError(
            "server_error" /* ServerError */,
            `Unknown error occurred: ${status2}`,
            status2
          );
      }
    }
    if (!error.response) {
      throw new ProviderError(
        "network_error" /* NetworkError */,
        "Network error occurred"
      );
    }
    const status = error.response.status;
    switch (status) {
      case 401:
        throw new ProviderError(
          "invalid_api_key" /* InvalidApiKey */,
          "Invalid API key",
          status
        );
      case 429:
        throw new ProviderError(
          "rate_limit" /* RateLimit */,
          "Rate limit exceeded",
          status
        );
      case 400:
        throw new ProviderError(
          "invalid_request" /* InvalidRequest */,
          "Invalid request",
          status
        );
      case 500:
      case 502:
      case 503:
      case 504:
        throw new ProviderError(
          "server_error" /* ServerError */,
          "Server error occurred",
          status
        );
      default:
        throw new ProviderError(
          "server_error" /* ServerError */,
          `Unknown error occurred: ${status}`,
          status
        );
    }
  }
  /**
   * Format error message for connection test results
   */
  formatErrorMessage(error) {
    if (error instanceof ProviderError) {
      switch (error.type) {
        case "invalid_api_key" /* InvalidApiKey */:
          return "Invalid API key. Please check your credentials.";
        case "rate_limit" /* RateLimit */:
          return "Rate limit exceeded. Please try again later.";
        case "network_error" /* NetworkError */:
          return "Network error. Please check your internet connection.";
        default:
          return error.message;
      }
    }
    return error.message || "An unknown error occurred";
  }
  /**
   * Create a standard error response for connection tests
   */
  createErrorResponse(error) {
    return {
      success: false,
      message: this.formatErrorMessage(error)
    };
  }
};

// node_modules/@anthropic-ai/sdk/version.mjs
var VERSION = "0.36.3";

// node_modules/@anthropic-ai/sdk/_shims/registry.mjs
var auto = false;
var kind = void 0;
var fetch2 = void 0;
var Request2 = void 0;
var Response2 = void 0;
var Headers2 = void 0;
var FormData2 = void 0;
var Blob2 = void 0;
var File2 = void 0;
var ReadableStream2 = void 0;
var getMultipartRequestOptions = void 0;
var getDefaultAgent = void 0;
var fileFromPath = void 0;
var isFsReadStream = void 0;
function setShims(shims, options = { auto: false }) {
  if (auto) {
    throw new Error(`you must \`import '@anthropic-ai/sdk/shims/${shims.kind}'\` before importing anything else from @anthropic-ai/sdk`);
  }
  if (kind) {
    throw new Error(`can't \`import '@anthropic-ai/sdk/shims/${shims.kind}'\` after \`import '@anthropic-ai/sdk/shims/${kind}'\``);
  }
  auto = options.auto;
  kind = shims.kind;
  fetch2 = shims.fetch;
  Request2 = shims.Request;
  Response2 = shims.Response;
  Headers2 = shims.Headers;
  FormData2 = shims.FormData;
  Blob2 = shims.Blob;
  File2 = shims.File;
  ReadableStream2 = shims.ReadableStream;
  getMultipartRequestOptions = shims.getMultipartRequestOptions;
  getDefaultAgent = shims.getDefaultAgent;
  fileFromPath = shims.fileFromPath;
  isFsReadStream = shims.isFsReadStream;
}

// node_modules/@anthropic-ai/sdk/_shims/MultipartBody.mjs
var MultipartBody = class {
  constructor(body) {
    this.body = body;
  }
  get [Symbol.toStringTag]() {
    return "MultipartBody";
  }
};

// node_modules/@anthropic-ai/sdk/_shims/web-runtime.mjs
function getRuntime({ manuallyImported } = {}) {
  const recommendation = manuallyImported ? `You may need to use polyfills` : `Add one of these imports before your first \`import \u2026 from '@anthropic-ai/sdk'\`:
- \`import '@anthropic-ai/sdk/shims/node'\` (if you're running on Node)
- \`import '@anthropic-ai/sdk/shims/web'\` (otherwise)
`;
  let _fetch, _Request, _Response, _Headers;
  try {
    _fetch = fetch;
    _Request = Request;
    _Response = Response;
    _Headers = Headers;
  } catch (error) {
    throw new Error(`this environment is missing the following Web Fetch API type: ${error.message}. ${recommendation}`);
  }
  return {
    kind: "web",
    fetch: _fetch,
    Request: _Request,
    Response: _Response,
    Headers: _Headers,
    FormData: (
      // @ts-ignore
      typeof FormData !== "undefined" ? FormData : class FormData {
        // @ts-ignore
        constructor() {
          throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${recommendation}`);
        }
      }
    ),
    Blob: typeof Blob !== "undefined" ? Blob : class Blob {
      constructor() {
        throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${recommendation}`);
      }
    },
    File: (
      // @ts-ignore
      typeof File !== "undefined" ? File : class File {
        // @ts-ignore
        constructor() {
          throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${recommendation}`);
        }
      }
    ),
    ReadableStream: (
      // @ts-ignore
      typeof ReadableStream !== "undefined" ? ReadableStream : class ReadableStream {
        // @ts-ignore
        constructor() {
          throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${recommendation}`);
        }
      }
    ),
    getMultipartRequestOptions: async (form, opts) => ({
      ...opts,
      body: new MultipartBody(form)
    }),
    getDefaultAgent: (url) => void 0,
    fileFromPath: () => {
      throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/anthropics/anthropic-sdk-typescript#file-uploads");
    },
    isFsReadStream: (value) => false
  };
}

// node_modules/@anthropic-ai/sdk/_shims/index.mjs
if (!kind) setShims(getRuntime(), { auto: true });

// node_modules/@anthropic-ai/sdk/error.mjs
var AnthropicError = class extends Error {
};
var APIError = class _APIError extends AnthropicError {
  constructor(status, error, message, headers) {
    super(`${_APIError.makeMessage(status, error, message)}`);
    this.status = status;
    this.headers = headers;
    this.request_id = headers == null ? void 0 : headers["request-id"];
    this.error = error;
  }
  static makeMessage(status, error, message) {
    const msg = (error == null ? void 0 : error.message) ? typeof error.message === "string" ? error.message : JSON.stringify(error.message) : error ? JSON.stringify(error) : message;
    if (status && msg) {
      return `${status} ${msg}`;
    }
    if (status) {
      return `${status} status code (no body)`;
    }
    if (msg) {
      return msg;
    }
    return "(no status code or body)";
  }
  static generate(status, errorResponse, message, headers) {
    if (!status || !headers) {
      return new APIConnectionError({ message, cause: castToError(errorResponse) });
    }
    const error = errorResponse;
    if (status === 400) {
      return new BadRequestError(status, error, message, headers);
    }
    if (status === 401) {
      return new AuthenticationError(status, error, message, headers);
    }
    if (status === 403) {
      return new PermissionDeniedError(status, error, message, headers);
    }
    if (status === 404) {
      return new NotFoundError(status, error, message, headers);
    }
    if (status === 409) {
      return new ConflictError(status, error, message, headers);
    }
    if (status === 422) {
      return new UnprocessableEntityError(status, error, message, headers);
    }
    if (status === 429) {
      return new RateLimitError(status, error, message, headers);
    }
    if (status >= 500) {
      return new InternalServerError(status, error, message, headers);
    }
    return new _APIError(status, error, message, headers);
  }
};
var APIUserAbortError = class extends APIError {
  constructor({ message } = {}) {
    super(void 0, void 0, message || "Request was aborted.", void 0);
  }
};
var APIConnectionError = class extends APIError {
  constructor({ message, cause }) {
    super(void 0, void 0, message || "Connection error.", void 0);
    if (cause)
      this.cause = cause;
  }
};
var APIConnectionTimeoutError = class extends APIConnectionError {
  constructor({ message } = {}) {
    super({ message: message != null ? message : "Request timed out." });
  }
};
var BadRequestError = class extends APIError {
};
var AuthenticationError = class extends APIError {
};
var PermissionDeniedError = class extends APIError {
};
var NotFoundError = class extends APIError {
};
var ConflictError = class extends APIError {
};
var UnprocessableEntityError = class extends APIError {
};
var RateLimitError = class extends APIError {
};
var InternalServerError = class extends APIError {
};

// node_modules/@anthropic-ai/sdk/internal/decoders/line.mjs
var LineDecoder = class _LineDecoder {
  constructor() {
    this.buffer = [];
    this.trailingCR = false;
  }
  decode(chunk) {
    let text = this.decodeText(chunk);
    if (this.trailingCR) {
      text = "\r" + text;
      this.trailingCR = false;
    }
    if (text.endsWith("\r")) {
      this.trailingCR = true;
      text = text.slice(0, -1);
    }
    if (!text) {
      return [];
    }
    const trailingNewline = _LineDecoder.NEWLINE_CHARS.has(text[text.length - 1] || "");
    let lines = text.split(_LineDecoder.NEWLINE_REGEXP);
    if (trailingNewline) {
      lines.pop();
    }
    if (lines.length === 1 && !trailingNewline) {
      this.buffer.push(lines[0]);
      return [];
    }
    if (this.buffer.length > 0) {
      lines = [this.buffer.join("") + lines[0], ...lines.slice(1)];
      this.buffer = [];
    }
    if (!trailingNewline) {
      this.buffer = [lines.pop() || ""];
    }
    return lines;
  }
  decodeText(bytes) {
    var _a2;
    if (bytes == null)
      return "";
    if (typeof bytes === "string")
      return bytes;
    if (typeof Buffer !== "undefined") {
      if (bytes instanceof Buffer) {
        return bytes.toString();
      }
      if (bytes instanceof Uint8Array) {
        return Buffer.from(bytes).toString();
      }
      throw new AnthropicError(`Unexpected: received non-Uint8Array (${bytes.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`);
    }
    if (typeof TextDecoder !== "undefined") {
      if (bytes instanceof Uint8Array || bytes instanceof ArrayBuffer) {
        (_a2 = this.textDecoder) != null ? _a2 : this.textDecoder = new TextDecoder("utf8");
        return this.textDecoder.decode(bytes);
      }
      throw new AnthropicError(`Unexpected: received non-Uint8Array/ArrayBuffer (${bytes.constructor.name}) in a web platform. Please report this error.`);
    }
    throw new AnthropicError(`Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`);
  }
  flush() {
    if (!this.buffer.length && !this.trailingCR) {
      return [];
    }
    const lines = [this.buffer.join("")];
    this.buffer = [];
    this.trailingCR = false;
    return lines;
  }
};
LineDecoder.NEWLINE_CHARS = /* @__PURE__ */ new Set(["\n", "\r"]);
LineDecoder.NEWLINE_REGEXP = /\r\n|[\n\r]/g;

// node_modules/@anthropic-ai/sdk/internal/stream-utils.mjs
function ReadableStreamToAsyncIterable(stream) {
  if (stream[Symbol.asyncIterator])
    return stream;
  const reader = stream.getReader();
  return {
    async next() {
      try {
        const result = await reader.read();
        if (result == null ? void 0 : result.done)
          reader.releaseLock();
        return result;
      } catch (e) {
        reader.releaseLock();
        throw e;
      }
    },
    async return() {
      const cancelPromise = reader.cancel();
      reader.releaseLock();
      await cancelPromise;
      return { done: true, value: void 0 };
    },
    [Symbol.asyncIterator]() {
      return this;
    }
  };
}

// node_modules/@anthropic-ai/sdk/streaming.mjs
var Stream = class _Stream {
  constructor(iterator, controller) {
    this.iterator = iterator;
    this.controller = controller;
  }
  static fromSSEResponse(response, controller) {
    let consumed = false;
    async function* iterator() {
      if (consumed) {
        throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");
      }
      consumed = true;
      let done = false;
      try {
        for await (const sse of _iterSSEMessages(response, controller)) {
          if (sse.event === "completion") {
            try {
              yield JSON.parse(sse.data);
            } catch (e) {
              console.error(`Could not parse message into JSON:`, sse.data);
              console.error(`From chunk:`, sse.raw);
              throw e;
            }
          }
          if (sse.event === "message_start" || sse.event === "message_delta" || sse.event === "message_stop" || sse.event === "content_block_start" || sse.event === "content_block_delta" || sse.event === "content_block_stop") {
            try {
              yield JSON.parse(sse.data);
            } catch (e) {
              console.error(`Could not parse message into JSON:`, sse.data);
              console.error(`From chunk:`, sse.raw);
              throw e;
            }
          }
          if (sse.event === "ping") {
            continue;
          }
          if (sse.event === "error") {
            throw APIError.generate(void 0, `SSE Error: ${sse.data}`, sse.data, createResponseHeaders(response.headers));
          }
        }
        done = true;
      } catch (e) {
        if (e instanceof Error && e.name === "AbortError")
          return;
        throw e;
      } finally {
        if (!done)
          controller.abort();
      }
    }
    return new _Stream(iterator, controller);
  }
  /**
   * Generates a Stream from a newline-separated ReadableStream
   * where each item is a JSON value.
   */
  static fromReadableStream(readableStream, controller) {
    let consumed = false;
    async function* iterLines() {
      const lineDecoder = new LineDecoder();
      const iter = ReadableStreamToAsyncIterable(readableStream);
      for await (const chunk of iter) {
        for (const line of lineDecoder.decode(chunk)) {
          yield line;
        }
      }
      for (const line of lineDecoder.flush()) {
        yield line;
      }
    }
    async function* iterator() {
      if (consumed) {
        throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");
      }
      consumed = true;
      let done = false;
      try {
        for await (const line of iterLines()) {
          if (done)
            continue;
          if (line)
            yield JSON.parse(line);
        }
        done = true;
      } catch (e) {
        if (e instanceof Error && e.name === "AbortError")
          return;
        throw e;
      } finally {
        if (!done)
          controller.abort();
      }
    }
    return new _Stream(iterator, controller);
  }
  [Symbol.asyncIterator]() {
    return this.iterator();
  }
  /**
   * Splits the stream into two streams which can be
   * independently read from at different speeds.
   */
  tee() {
    const left = [];
    const right = [];
    const iterator = this.iterator();
    const teeIterator = (queue) => {
      return {
        next: () => {
          if (queue.length === 0) {
            const result = iterator.next();
            left.push(result);
            right.push(result);
          }
          return queue.shift();
        }
      };
    };
    return [
      new _Stream(() => teeIterator(left), this.controller),
      new _Stream(() => teeIterator(right), this.controller)
    ];
  }
  /**
   * Converts this stream to a newline-separated ReadableStream of
   * JSON stringified values in the stream
   * which can be turned back into a Stream with `Stream.fromReadableStream()`.
   */
  toReadableStream() {
    const self = this;
    let iter;
    const encoder = new TextEncoder();
    return new ReadableStream2({
      async start() {
        iter = self[Symbol.asyncIterator]();
      },
      async pull(ctrl) {
        try {
          const { value, done } = await iter.next();
          if (done)
            return ctrl.close();
          const bytes = encoder.encode(JSON.stringify(value) + "\n");
          ctrl.enqueue(bytes);
        } catch (err) {
          ctrl.error(err);
        }
      },
      async cancel() {
        var _a2;
        await ((_a2 = iter.return) == null ? void 0 : _a2.call(iter));
      }
    });
  }
};
async function* _iterSSEMessages(response, controller) {
  if (!response.body) {
    controller.abort();
    throw new AnthropicError(`Attempted to iterate over a response with no body`);
  }
  const sseDecoder = new SSEDecoder();
  const lineDecoder = new LineDecoder();
  const iter = ReadableStreamToAsyncIterable(response.body);
  for await (const sseChunk of iterSSEChunks(iter)) {
    for (const line of lineDecoder.decode(sseChunk)) {
      const sse = sseDecoder.decode(line);
      if (sse)
        yield sse;
    }
  }
  for (const line of lineDecoder.flush()) {
    const sse = sseDecoder.decode(line);
    if (sse)
      yield sse;
  }
}
async function* iterSSEChunks(iterator) {
  let data = new Uint8Array();
  for await (const chunk of iterator) {
    if (chunk == null) {
      continue;
    }
    const binaryChunk = chunk instanceof ArrayBuffer ? new Uint8Array(chunk) : typeof chunk === "string" ? new TextEncoder().encode(chunk) : chunk;
    let newData = new Uint8Array(data.length + binaryChunk.length);
    newData.set(data);
    newData.set(binaryChunk, data.length);
    data = newData;
    let patternIndex;
    while ((patternIndex = findDoubleNewlineIndex(data)) !== -1) {
      yield data.slice(0, patternIndex);
      data = data.slice(patternIndex);
    }
  }
  if (data.length > 0) {
    yield data;
  }
}
function findDoubleNewlineIndex(buffer) {
  const newline = 10;
  const carriage = 13;
  for (let i = 0; i < buffer.length - 2; i++) {
    if (buffer[i] === newline && buffer[i + 1] === newline) {
      return i + 2;
    }
    if (buffer[i] === carriage && buffer[i + 1] === carriage) {
      return i + 2;
    }
    if (buffer[i] === carriage && buffer[i + 1] === newline && i + 3 < buffer.length && buffer[i + 2] === carriage && buffer[i + 3] === newline) {
      return i + 4;
    }
  }
  return -1;
}
var SSEDecoder = class {
  constructor() {
    this.event = null;
    this.data = [];
    this.chunks = [];
  }
  decode(line) {
    if (line.endsWith("\r")) {
      line = line.substring(0, line.length - 1);
    }
    if (!line) {
      if (!this.event && !this.data.length)
        return null;
      const sse = {
        event: this.event,
        data: this.data.join("\n"),
        raw: this.chunks
      };
      this.event = null;
      this.data = [];
      this.chunks = [];
      return sse;
    }
    this.chunks.push(line);
    if (line.startsWith(":")) {
      return null;
    }
    let [fieldname, _, value] = partition(line, ":");
    if (value.startsWith(" ")) {
      value = value.substring(1);
    }
    if (fieldname === "event") {
      this.event = value;
    } else if (fieldname === "data") {
      this.data.push(value);
    }
    return null;
  }
};
function partition(str, delimiter) {
  const index = str.indexOf(delimiter);
  if (index !== -1) {
    return [str.substring(0, index), delimiter, str.substring(index + delimiter.length)];
  }
  return [str, "", ""];
}

// node_modules/@anthropic-ai/sdk/uploads.mjs
var isResponseLike = (value) => value != null && typeof value === "object" && typeof value.url === "string" && typeof value.blob === "function";
var isFileLike = (value) => value != null && typeof value === "object" && typeof value.name === "string" && typeof value.lastModified === "number" && isBlobLike(value);
var isBlobLike = (value) => value != null && typeof value === "object" && typeof value.size === "number" && typeof value.type === "string" && typeof value.text === "function" && typeof value.slice === "function" && typeof value.arrayBuffer === "function";
async function toFile(value, name, options) {
  var _a2, _b, _c;
  value = await value;
  if (isFileLike(value)) {
    return value;
  }
  if (isResponseLike(value)) {
    const blob = await value.blob();
    name || (name = (_a2 = new URL(value.url).pathname.split(/[\\/]/).pop()) != null ? _a2 : "unknown_file");
    const data = isBlobLike(blob) ? [await blob.arrayBuffer()] : [blob];
    return new File2(data, name, options);
  }
  const bits = await getBytes(value);
  name || (name = (_b = getName(value)) != null ? _b : "unknown_file");
  if (!(options == null ? void 0 : options.type)) {
    const type = (_c = bits[0]) == null ? void 0 : _c.type;
    if (typeof type === "string") {
      options = { ...options, type };
    }
  }
  return new File2(bits, name, options);
}
async function getBytes(value) {
  var _a2;
  let parts = [];
  if (typeof value === "string" || ArrayBuffer.isView(value) || // includes Uint8Array, Buffer, etc.
  value instanceof ArrayBuffer) {
    parts.push(value);
  } else if (isBlobLike(value)) {
    parts.push(await value.arrayBuffer());
  } else if (isAsyncIterableIterator(value)) {
    for await (const chunk of value) {
      parts.push(chunk);
    }
  } else {
    throw new Error(`Unexpected data type: ${typeof value}; constructor: ${(_a2 = value == null ? void 0 : value.constructor) == null ? void 0 : _a2.name}; props: ${propsForError(value)}`);
  }
  return parts;
}
function propsForError(value) {
  const props = Object.getOwnPropertyNames(value);
  return `[${props.map((p) => `"${p}"`).join(", ")}]`;
}
function getName(value) {
  var _a2;
  return getStringFromMaybeBuffer(value.name) || getStringFromMaybeBuffer(value.filename) || // For fs.ReadStream
  ((_a2 = getStringFromMaybeBuffer(value.path)) == null ? void 0 : _a2.split(/[\\/]/).pop());
}
var getStringFromMaybeBuffer = (x) => {
  if (typeof x === "string")
    return x;
  if (typeof Buffer !== "undefined" && x instanceof Buffer)
    return String(x);
  return void 0;
};
var isAsyncIterableIterator = (value) => value != null && typeof value === "object" && typeof value[Symbol.asyncIterator] === "function";
var isMultipartBody = (body) => body && typeof body === "object" && body.body && body[Symbol.toStringTag] === "MultipartBody";

// node_modules/@anthropic-ai/sdk/core.mjs
var __classPrivateFieldSet = function(receiver, state, value, kind2, f) {
  if (kind2 === "m") throw new TypeError("Private method is not writable");
  if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var __classPrivateFieldGet = function(receiver, state, kind2, f) {
  if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _AbstractPage_client;
async function defaultParseResponse(props) {
  const { response } = props;
  if (props.options.stream) {
    debug("response", response.status, response.url, response.headers, response.body);
    if (props.options.__streamClass) {
      return props.options.__streamClass.fromSSEResponse(response, props.controller);
    }
    return Stream.fromSSEResponse(response, props.controller);
  }
  if (response.status === 204) {
    return null;
  }
  if (props.options.__binaryResponse) {
    return response;
  }
  const contentType = response.headers.get("content-type");
  const isJSON = (contentType == null ? void 0 : contentType.includes("application/json")) || (contentType == null ? void 0 : contentType.includes("application/vnd.api+json"));
  if (isJSON) {
    const json = await response.json();
    debug("response", response.status, response.url, response.headers, json);
    return _addRequestID(json, response);
  }
  const text = await response.text();
  debug("response", response.status, response.url, response.headers, text);
  return text;
}
function _addRequestID(value, response) {
  if (!value || typeof value !== "object" || Array.isArray(value)) {
    return value;
  }
  return Object.defineProperty(value, "_request_id", {
    value: response.headers.get("request-id"),
    enumerable: false
  });
}
var APIPromise = class _APIPromise extends Promise {
  constructor(responsePromise, parseResponse = defaultParseResponse) {
    super((resolve) => {
      resolve(null);
    });
    this.responsePromise = responsePromise;
    this.parseResponse = parseResponse;
  }
  _thenUnwrap(transform) {
    return new _APIPromise(this.responsePromise, async (props) => _addRequestID(transform(await this.parseResponse(props), props), props.response));
  }
  /**
   * Gets the raw `Response` instance instead of parsing the response
   * data.
   *
   * If you want to parse the response body but still get the `Response`
   * instance, you can use {@link withResponse()}.
   *
   * ðŸ‘‹ Getting the wrong TypeScript type for `Response`?
   * Try setting `"moduleResolution": "NodeNext"` if you can,
   * or add one of these imports before your first `import â€¦ from '@anthropic-ai/sdk'`:
   * - `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)
   * - `import '@anthropic-ai/sdk/shims/web'` (otherwise)
   */
  asResponse() {
    return this.responsePromise.then((p) => p.response);
  }
  /**
   * Gets the parsed response data, the raw `Response` instance and the ID of the request,
   * returned vie the `request-id` header which is useful for debugging requests and resporting
   * issues to Anthropic.
   *
   * If you just want to get the raw `Response` instance without parsing it,
   * you can use {@link asResponse()}.
   *
   * ðŸ‘‹ Getting the wrong TypeScript type for `Response`?
   * Try setting `"moduleResolution": "NodeNext"` if you can,
   * or add one of these imports before your first `import â€¦ from '@anthropic-ai/sdk'`:
   * - `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)
   * - `import '@anthropic-ai/sdk/shims/web'` (otherwise)
   */
  async withResponse() {
    const [data, response] = await Promise.all([this.parse(), this.asResponse()]);
    return { data, response, request_id: response.headers.get("request-id") };
  }
  parse() {
    if (!this.parsedPromise) {
      this.parsedPromise = this.responsePromise.then(this.parseResponse);
    }
    return this.parsedPromise;
  }
  then(onfulfilled, onrejected) {
    return this.parse().then(onfulfilled, onrejected);
  }
  catch(onrejected) {
    return this.parse().catch(onrejected);
  }
  finally(onfinally) {
    return this.parse().finally(onfinally);
  }
};
var APIClient = class {
  constructor({
    baseURL,
    maxRetries = 2,
    timeout = 6e5,
    // 10 minutes
    httpAgent,
    fetch: overriddenFetch
  }) {
    this.baseURL = baseURL;
    this.maxRetries = validatePositiveInteger("maxRetries", maxRetries);
    this.timeout = validatePositiveInteger("timeout", timeout);
    this.httpAgent = httpAgent;
    this.fetch = overriddenFetch != null ? overriddenFetch : fetch2;
  }
  authHeaders(opts) {
    return {};
  }
  /**
   * Override this to add your own default headers, for example:
   *
   *  {
   *    ...super.defaultHeaders(),
   *    Authorization: 'Bearer 123',
   *  }
   */
  defaultHeaders(opts) {
    return {
      Accept: "application/json",
      "Content-Type": "application/json",
      "User-Agent": this.getUserAgent(),
      ...getPlatformHeaders(),
      ...this.authHeaders(opts)
    };
  }
  /**
   * Override this to add your own headers validation:
   */
  validateHeaders(headers, customHeaders) {
  }
  defaultIdempotencyKey() {
    return `stainless-node-retry-${uuid4()}`;
  }
  get(path, opts) {
    return this.methodRequest("get", path, opts);
  }
  post(path, opts) {
    return this.methodRequest("post", path, opts);
  }
  patch(path, opts) {
    return this.methodRequest("patch", path, opts);
  }
  put(path, opts) {
    return this.methodRequest("put", path, opts);
  }
  delete(path, opts) {
    return this.methodRequest("delete", path, opts);
  }
  methodRequest(method, path, opts) {
    return this.request(Promise.resolve(opts).then(async (opts2) => {
      const body = opts2 && isBlobLike(opts2 == null ? void 0 : opts2.body) ? new DataView(await opts2.body.arrayBuffer()) : (opts2 == null ? void 0 : opts2.body) instanceof DataView ? opts2.body : (opts2 == null ? void 0 : opts2.body) instanceof ArrayBuffer ? new DataView(opts2.body) : opts2 && ArrayBuffer.isView(opts2 == null ? void 0 : opts2.body) ? new DataView(opts2.body.buffer) : opts2 == null ? void 0 : opts2.body;
      return { method, path, ...opts2, body };
    }));
  }
  getAPIList(path, Page2, opts) {
    return this.requestAPIList(Page2, { method: "get", path, ...opts });
  }
  calculateContentLength(body) {
    if (typeof body === "string") {
      if (typeof Buffer !== "undefined") {
        return Buffer.byteLength(body, "utf8").toString();
      }
      if (typeof TextEncoder !== "undefined") {
        const encoder = new TextEncoder();
        const encoded = encoder.encode(body);
        return encoded.length.toString();
      }
    } else if (ArrayBuffer.isView(body)) {
      return body.byteLength.toString();
    }
    return null;
  }
  buildRequest(options, { retryCount = 0 } = {}) {
    var _a2, _b, _c, _d, _e, _f;
    const { method, path, query, headers = {} } = options;
    const body = ArrayBuffer.isView(options.body) || options.__binaryRequest && typeof options.body === "string" ? options.body : isMultipartBody(options.body) ? options.body.body : options.body ? JSON.stringify(options.body, null, 2) : null;
    const contentLength = this.calculateContentLength(body);
    const url = this.buildURL(path, query);
    if ("timeout" in options)
      validatePositiveInteger("timeout", options.timeout);
    const timeout = (_a2 = options.timeout) != null ? _a2 : this.timeout;
    const httpAgent = (_c = (_b = options.httpAgent) != null ? _b : this.httpAgent) != null ? _c : getDefaultAgent(url);
    const minAgentTimeout = timeout + 1e3;
    if (typeof ((_d = httpAgent == null ? void 0 : httpAgent.options) == null ? void 0 : _d.timeout) === "number" && minAgentTimeout > ((_e = httpAgent.options.timeout) != null ? _e : 0)) {
      httpAgent.options.timeout = minAgentTimeout;
    }
    if (this.idempotencyHeader && method !== "get") {
      if (!options.idempotencyKey)
        options.idempotencyKey = this.defaultIdempotencyKey();
      headers[this.idempotencyHeader] = options.idempotencyKey;
    }
    const reqHeaders = this.buildHeaders({ options, headers, contentLength, retryCount });
    const req = {
      method,
      ...body && { body },
      headers: reqHeaders,
      ...httpAgent && { agent: httpAgent },
      // @ts-ignore node-fetch uses a custom AbortSignal type that is
      // not compatible with standard web types
      signal: (_f = options.signal) != null ? _f : null
    };
    return { req, url, timeout };
  }
  buildHeaders({ options, headers, contentLength, retryCount }) {
    const reqHeaders = {};
    if (contentLength) {
      reqHeaders["content-length"] = contentLength;
    }
    const defaultHeaders = this.defaultHeaders(options);
    applyHeadersMut(reqHeaders, defaultHeaders);
    applyHeadersMut(reqHeaders, headers);
    if (isMultipartBody(options.body) && kind !== "node") {
      delete reqHeaders["content-type"];
    }
    if (getHeader(defaultHeaders, "x-stainless-retry-count") === void 0 && getHeader(headers, "x-stainless-retry-count") === void 0) {
      reqHeaders["x-stainless-retry-count"] = String(retryCount);
    }
    this.validateHeaders(reqHeaders, headers);
    return reqHeaders;
  }
  /**
   * Used as a callback for mutating the given `FinalRequestOptions` object.
   */
  async prepareOptions(options) {
  }
  /**
   * Used as a callback for mutating the given `RequestInit` object.
   *
   * This is useful for cases where you want to add certain headers based off of
   * the request properties, e.g. `method` or `url`.
   */
  async prepareRequest(request, { url, options }) {
  }
  parseHeaders(headers) {
    return !headers ? {} : Symbol.iterator in headers ? Object.fromEntries(Array.from(headers).map((header) => [...header])) : { ...headers };
  }
  makeStatusError(status, error, message, headers) {
    return APIError.generate(status, error, message, headers);
  }
  request(options, remainingRetries = null) {
    return new APIPromise(this.makeRequest(options, remainingRetries));
  }
  async makeRequest(optionsInput, retriesRemaining) {
    var _a2, _b, _c;
    const options = await optionsInput;
    const maxRetries = (_a2 = options.maxRetries) != null ? _a2 : this.maxRetries;
    if (retriesRemaining == null) {
      retriesRemaining = maxRetries;
    }
    await this.prepareOptions(options);
    const { req, url, timeout } = this.buildRequest(options, { retryCount: maxRetries - retriesRemaining });
    await this.prepareRequest(req, { url, options });
    debug("request", url, options, req.headers);
    if ((_b = options.signal) == null ? void 0 : _b.aborted) {
      throw new APIUserAbortError();
    }
    const controller = new AbortController();
    const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(castToError);
    if (response instanceof Error) {
      if ((_c = options.signal) == null ? void 0 : _c.aborted) {
        throw new APIUserAbortError();
      }
      if (retriesRemaining) {
        return this.retryRequest(options, retriesRemaining);
      }
      if (response.name === "AbortError") {
        throw new APIConnectionTimeoutError();
      }
      throw new APIConnectionError({ cause: response });
    }
    const responseHeaders = createResponseHeaders(response.headers);
    if (!response.ok) {
      if (retriesRemaining && this.shouldRetry(response)) {
        const retryMessage2 = `retrying, ${retriesRemaining} attempts remaining`;
        debug(`response (error; ${retryMessage2})`, response.status, url, responseHeaders);
        return this.retryRequest(options, retriesRemaining, responseHeaders);
      }
      const errText = await response.text().catch((e) => castToError(e).message);
      const errJSON = safeJSON(errText);
      const errMessage = errJSON ? void 0 : errText;
      const retryMessage = retriesRemaining ? `(error; no more retries left)` : `(error; not retryable)`;
      debug(`response (error; ${retryMessage})`, response.status, url, responseHeaders, errMessage);
      const err = this.makeStatusError(response.status, errJSON, errMessage, responseHeaders);
      throw err;
    }
    return { response, options, controller };
  }
  requestAPIList(Page2, options) {
    const request = this.makeRequest(options, null);
    return new PagePromise(this, request, Page2);
  }
  buildURL(path, query) {
    const url = isAbsoluteURL(path) ? new URL(path) : new URL(this.baseURL + (this.baseURL.endsWith("/") && path.startsWith("/") ? path.slice(1) : path));
    const defaultQuery = this.defaultQuery();
    if (!isEmptyObj(defaultQuery)) {
      query = { ...defaultQuery, ...query };
    }
    if (typeof query === "object" && query && !Array.isArray(query)) {
      url.search = this.stringifyQuery(query);
    }
    return url.toString();
  }
  stringifyQuery(query) {
    return Object.entries(query).filter(([_, value]) => typeof value !== "undefined").map(([key, value]) => {
      if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") {
        return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;
      }
      if (value === null) {
        return `${encodeURIComponent(key)}=`;
      }
      throw new AnthropicError(`Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`);
    }).join("&");
  }
  async fetchWithTimeout(url, init, ms, controller) {
    const { signal, ...options } = init || {};
    if (signal)
      signal.addEventListener("abort", () => controller.abort());
    const timeout = setTimeout(() => controller.abort(), ms);
    const fetchOptions = {
      signal: controller.signal,
      ...options
    };
    if (fetchOptions.method) {
      fetchOptions.method = fetchOptions.method.toUpperCase();
    }
    return (
      // use undefined this binding; fetch errors if bound to something else in browser/cloudflare
      this.fetch.call(void 0, url, fetchOptions).finally(() => {
        clearTimeout(timeout);
      })
    );
  }
  shouldRetry(response) {
    const shouldRetryHeader = response.headers.get("x-should-retry");
    if (shouldRetryHeader === "true")
      return true;
    if (shouldRetryHeader === "false")
      return false;
    if (response.status === 408)
      return true;
    if (response.status === 409)
      return true;
    if (response.status === 429)
      return true;
    if (response.status >= 500)
      return true;
    return false;
  }
  async retryRequest(options, retriesRemaining, responseHeaders) {
    var _a2;
    let timeoutMillis;
    const retryAfterMillisHeader = responseHeaders == null ? void 0 : responseHeaders["retry-after-ms"];
    if (retryAfterMillisHeader) {
      const timeoutMs = parseFloat(retryAfterMillisHeader);
      if (!Number.isNaN(timeoutMs)) {
        timeoutMillis = timeoutMs;
      }
    }
    const retryAfterHeader = responseHeaders == null ? void 0 : responseHeaders["retry-after"];
    if (retryAfterHeader && !timeoutMillis) {
      const timeoutSeconds = parseFloat(retryAfterHeader);
      if (!Number.isNaN(timeoutSeconds)) {
        timeoutMillis = timeoutSeconds * 1e3;
      } else {
        timeoutMillis = Date.parse(retryAfterHeader) - Date.now();
      }
    }
    if (!(timeoutMillis && 0 <= timeoutMillis && timeoutMillis < 60 * 1e3)) {
      const maxRetries = (_a2 = options.maxRetries) != null ? _a2 : this.maxRetries;
      timeoutMillis = this.calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries);
    }
    await sleep(timeoutMillis);
    return this.makeRequest(options, retriesRemaining - 1);
  }
  calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries) {
    const initialRetryDelay = 0.5;
    const maxRetryDelay = 8;
    const numRetries = maxRetries - retriesRemaining;
    const sleepSeconds = Math.min(initialRetryDelay * Math.pow(2, numRetries), maxRetryDelay);
    const jitter = 1 - Math.random() * 0.25;
    return sleepSeconds * jitter * 1e3;
  }
  getUserAgent() {
    return `${this.constructor.name}/JS ${VERSION}`;
  }
};
var AbstractPage = class {
  constructor(client, response, body, options) {
    _AbstractPage_client.set(this, void 0);
    __classPrivateFieldSet(this, _AbstractPage_client, client, "f");
    this.options = options;
    this.response = response;
    this.body = body;
  }
  hasNextPage() {
    const items = this.getPaginatedItems();
    if (!items.length)
      return false;
    return this.nextPageInfo() != null;
  }
  async getNextPage() {
    const nextInfo = this.nextPageInfo();
    if (!nextInfo) {
      throw new AnthropicError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");
    }
    const nextOptions = { ...this.options };
    if ("params" in nextInfo && typeof nextOptions.query === "object") {
      nextOptions.query = { ...nextOptions.query, ...nextInfo.params };
    } else if ("url" in nextInfo) {
      const params = [...Object.entries(nextOptions.query || {}), ...nextInfo.url.searchParams.entries()];
      for (const [key, value] of params) {
        nextInfo.url.searchParams.set(key, value);
      }
      nextOptions.query = void 0;
      nextOptions.path = nextInfo.url.toString();
    }
    return await __classPrivateFieldGet(this, _AbstractPage_client, "f").requestAPIList(this.constructor, nextOptions);
  }
  async *iterPages() {
    let page = this;
    yield page;
    while (page.hasNextPage()) {
      page = await page.getNextPage();
      yield page;
    }
  }
  async *[(_AbstractPage_client = /* @__PURE__ */ new WeakMap(), Symbol.asyncIterator)]() {
    for await (const page of this.iterPages()) {
      for (const item of page.getPaginatedItems()) {
        yield item;
      }
    }
  }
};
var PagePromise = class extends APIPromise {
  constructor(client, request, Page2) {
    super(request, async (props) => new Page2(client, props.response, await defaultParseResponse(props), props.options));
  }
  /**
   * Allow auto-paginating iteration on an unawaited list call, eg:
   *
   *    for await (const item of client.items.list()) {
   *      console.log(item)
   *    }
   */
  async *[Symbol.asyncIterator]() {
    const page = await this;
    for await (const item of page) {
      yield item;
    }
  }
};
var createResponseHeaders = (headers) => {
  return new Proxy(Object.fromEntries(
    // @ts-ignore
    headers.entries()
  ), {
    get(target, name) {
      const key = name.toString();
      return target[key.toLowerCase()] || target[key];
    }
  });
};
var requestOptionsKeys = {
  method: true,
  path: true,
  query: true,
  body: true,
  headers: true,
  maxRetries: true,
  stream: true,
  timeout: true,
  httpAgent: true,
  signal: true,
  idempotencyKey: true,
  __binaryRequest: true,
  __binaryResponse: true,
  __streamClass: true
};
var isRequestOptions = (obj) => {
  return typeof obj === "object" && obj !== null && !isEmptyObj(obj) && Object.keys(obj).every((k) => hasOwn(requestOptionsKeys, k));
};
var getPlatformProperties = () => {
  var _a2, _b;
  if (typeof Deno !== "undefined" && Deno.build != null) {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": normalizePlatform(Deno.build.os),
      "X-Stainless-Arch": normalizeArch(Deno.build.arch),
      "X-Stainless-Runtime": "deno",
      "X-Stainless-Runtime-Version": typeof Deno.version === "string" ? Deno.version : (_b = (_a2 = Deno.version) == null ? void 0 : _a2.deno) != null ? _b : "unknown"
    };
  }
  if (typeof EdgeRuntime !== "undefined") {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": "Unknown",
      "X-Stainless-Arch": `other:${EdgeRuntime}`,
      "X-Stainless-Runtime": "edge",
      "X-Stainless-Runtime-Version": process.version
    };
  }
  if (Object.prototype.toString.call(typeof process !== "undefined" ? process : 0) === "[object process]") {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": normalizePlatform(process.platform),
      "X-Stainless-Arch": normalizeArch(process.arch),
      "X-Stainless-Runtime": "node",
      "X-Stainless-Runtime-Version": process.version
    };
  }
  const browserInfo = getBrowserInfo();
  if (browserInfo) {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": "Unknown",
      "X-Stainless-Arch": "unknown",
      "X-Stainless-Runtime": `browser:${browserInfo.browser}`,
      "X-Stainless-Runtime-Version": browserInfo.version
    };
  }
  return {
    "X-Stainless-Lang": "js",
    "X-Stainless-Package-Version": VERSION,
    "X-Stainless-OS": "Unknown",
    "X-Stainless-Arch": "unknown",
    "X-Stainless-Runtime": "unknown",
    "X-Stainless-Runtime-Version": "unknown"
  };
};
function getBrowserInfo() {
  if (typeof navigator === "undefined" || !navigator) {
    return null;
  }
  const browserPatterns = [
    { key: "edge", pattern: /Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "chrome", pattern: /Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "firefox", pattern: /Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "safari", pattern: /(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/ }
  ];
  for (const { key, pattern } of browserPatterns) {
    const match = pattern.exec(navigator.userAgent);
    if (match) {
      const major = match[1] || 0;
      const minor = match[2] || 0;
      const patch = match[3] || 0;
      return { browser: key, version: `${major}.${minor}.${patch}` };
    }
  }
  return null;
}
var normalizeArch = (arch) => {
  if (arch === "x32")
    return "x32";
  if (arch === "x86_64" || arch === "x64")
    return "x64";
  if (arch === "arm")
    return "arm";
  if (arch === "aarch64" || arch === "arm64")
    return "arm64";
  if (arch)
    return `other:${arch}`;
  return "unknown";
};
var normalizePlatform = (platform) => {
  platform = platform.toLowerCase();
  if (platform.includes("ios"))
    return "iOS";
  if (platform === "android")
    return "Android";
  if (platform === "darwin")
    return "MacOS";
  if (platform === "win32")
    return "Windows";
  if (platform === "freebsd")
    return "FreeBSD";
  if (platform === "openbsd")
    return "OpenBSD";
  if (platform === "linux")
    return "Linux";
  if (platform)
    return `Other:${platform}`;
  return "Unknown";
};
var _platformHeaders;
var getPlatformHeaders = () => {
  return _platformHeaders != null ? _platformHeaders : _platformHeaders = getPlatformProperties();
};
var safeJSON = (text) => {
  try {
    return JSON.parse(text);
  } catch (err) {
    return void 0;
  }
};
var startsWithSchemeRegexp = /^[a-z][a-z0-9+.-]*:/i;
var isAbsoluteURL = (url) => {
  return startsWithSchemeRegexp.test(url);
};
var sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));
var validatePositiveInteger = (name, n) => {
  if (typeof n !== "number" || !Number.isInteger(n)) {
    throw new AnthropicError(`${name} must be an integer`);
  }
  if (n < 0) {
    throw new AnthropicError(`${name} must be a positive integer`);
  }
  return n;
};
var castToError = (err) => {
  if (err instanceof Error)
    return err;
  if (typeof err === "object" && err !== null) {
    try {
      return new Error(JSON.stringify(err));
    } catch (e) {
    }
  }
  return new Error(String(err));
};
var readEnv = (env) => {
  var _a2, _b, _c, _d, _e, _f;
  if (typeof process !== "undefined") {
    return (_c = (_b = (_a2 = process.env) == null ? void 0 : _a2[env]) == null ? void 0 : _b.trim()) != null ? _c : void 0;
  }
  if (typeof Deno !== "undefined") {
    return (_f = (_e = (_d = Deno.env) == null ? void 0 : _d.get) == null ? void 0 : _e.call(_d, env)) == null ? void 0 : _f.trim();
  }
  return void 0;
};
function isEmptyObj(obj) {
  if (!obj)
    return true;
  for (const _k in obj)
    return false;
  return true;
}
function hasOwn(obj, key) {
  return Object.prototype.hasOwnProperty.call(obj, key);
}
function applyHeadersMut(targetHeaders, newHeaders) {
  for (const k in newHeaders) {
    if (!hasOwn(newHeaders, k))
      continue;
    const lowerKey = k.toLowerCase();
    if (!lowerKey)
      continue;
    const val = newHeaders[k];
    if (val === null) {
      delete targetHeaders[lowerKey];
    } else if (val !== void 0) {
      targetHeaders[lowerKey] = val;
    }
  }
}
function debug(action, ...args) {
  var _a2;
  if (typeof process !== "undefined" && ((_a2 = process == null ? void 0 : process.env) == null ? void 0 : _a2["DEBUG"]) === "true") {
    console.log(`Anthropic:DEBUG:${action}`, ...args);
  }
}
var uuid4 = () => {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
    const r = Math.random() * 16 | 0;
    const v = c === "x" ? r : r & 3 | 8;
    return v.toString(16);
  });
};
var isRunningInBrowser = () => {
  return (
    // @ts-ignore
    typeof window !== "undefined" && // @ts-ignore
    typeof window.document !== "undefined" && // @ts-ignore
    typeof navigator !== "undefined"
  );
};
var isHeadersProtocol = (headers) => {
  return typeof (headers == null ? void 0 : headers.get) === "function";
};
var getHeader = (headers, header) => {
  var _a2;
  const lowerCasedHeader = header.toLowerCase();
  if (isHeadersProtocol(headers)) {
    const intercapsHeader = ((_a2 = header[0]) == null ? void 0 : _a2.toUpperCase()) + header.substring(1).replace(/([^\w])(\w)/g, (_m, g1, g2) => g1 + g2.toUpperCase());
    for (const key of [header, lowerCasedHeader, header.toUpperCase(), intercapsHeader]) {
      const value = headers.get(key);
      if (value) {
        return value;
      }
    }
  }
  for (const [key, value] of Object.entries(headers)) {
    if (key.toLowerCase() === lowerCasedHeader) {
      if (Array.isArray(value)) {
        if (value.length <= 1)
          return value[0];
        console.warn(`Received ${value.length} entries for the ${header} header, using the first entry.`);
        return value[0];
      }
      return value;
    }
  }
  return void 0;
};

// node_modules/@anthropic-ai/sdk/pagination.mjs
var Page = class extends AbstractPage {
  constructor(client, response, body, options) {
    super(client, response, body, options);
    this.data = body.data || [];
    this.has_more = body.has_more || false;
    this.first_id = body.first_id || null;
    this.last_id = body.last_id || null;
  }
  getPaginatedItems() {
    var _a2;
    return (_a2 = this.data) != null ? _a2 : [];
  }
  // @deprecated Please use `nextPageInfo()` instead
  nextPageParams() {
    const info = this.nextPageInfo();
    if (!info)
      return null;
    if ("params" in info)
      return info.params;
    const params = Object.fromEntries(info.url.searchParams);
    if (!Object.keys(params).length)
      return null;
    return params;
  }
  nextPageInfo() {
    var _a2;
    if ((_a2 = this.options.query) == null ? void 0 : _a2["before_id"]) {
      const firstId = this.first_id;
      if (!firstId) {
        return null;
      }
      return {
        params: {
          before_id: firstId
        }
      };
    }
    const cursor = this.last_id;
    if (!cursor) {
      return null;
    }
    return {
      params: {
        after_id: cursor
      }
    };
  }
};

// node_modules/@anthropic-ai/sdk/resource.mjs
var APIResource = class {
  constructor(client) {
    this._client = client;
  }
};

// node_modules/@anthropic-ai/sdk/resources/beta/models.mjs
var Models = class extends APIResource {
  /**
   * Get a specific model.
   *
   * The Models API response can be used to determine information about a specific
   * model or resolve a model alias to a model ID.
   */
  retrieve(modelId, options) {
    return this._client.get(`/v1/models/${modelId}?beta=true`, options);
  }
  list(query = {}, options) {
    if (isRequestOptions(query)) {
      return this.list({}, query);
    }
    return this._client.getAPIList("/v1/models?beta=true", BetaModelInfosPage, { query, ...options });
  }
};
var BetaModelInfosPage = class extends Page {
};
Models.BetaModelInfosPage = BetaModelInfosPage;

// node_modules/@anthropic-ai/sdk/internal/decoders/jsonl.mjs
var JSONLDecoder = class _JSONLDecoder {
  constructor(iterator, controller) {
    this.iterator = iterator;
    this.controller = controller;
  }
  async *decoder() {
    const lineDecoder = new LineDecoder();
    for await (const chunk of this.iterator) {
      for (const line of lineDecoder.decode(chunk)) {
        yield JSON.parse(line);
      }
    }
    for (const line of lineDecoder.flush()) {
      yield JSON.parse(line);
    }
  }
  [Symbol.asyncIterator]() {
    return this.decoder();
  }
  static fromResponse(response, controller) {
    if (!response.body) {
      controller.abort();
      throw new AnthropicError(`Attempted to iterate over a response with no body`);
    }
    return new _JSONLDecoder(ReadableStreamToAsyncIterable(response.body), controller);
  }
};

// node_modules/@anthropic-ai/sdk/resources/beta/messages/batches.mjs
var Batches = class extends APIResource {
  /**
   * Send a batch of Message creation requests.
   *
   * The Message Batches API can be used to process multiple Messages API requests at
   * once. Once a Message Batch is created, it begins processing immediately. Batches
   * can take up to 24 hours to complete.
   */
  create(params, options) {
    const { betas, ...body } = params;
    return this._client.post("/v1/messages/batches?beta=true", {
      body,
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
  retrieve(messageBatchId, params = {}, options) {
    if (isRequestOptions(params)) {
      return this.retrieve(messageBatchId, {}, params);
    }
    const { betas } = params;
    return this._client.get(`/v1/messages/batches/${messageBatchId}?beta=true`, {
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
  list(params = {}, options) {
    if (isRequestOptions(params)) {
      return this.list({}, params);
    }
    const { betas, ...query } = params;
    return this._client.getAPIList("/v1/messages/batches?beta=true", BetaMessageBatchesPage, {
      query,
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
  delete(messageBatchId, params = {}, options) {
    if (isRequestOptions(params)) {
      return this.delete(messageBatchId, {}, params);
    }
    const { betas } = params;
    return this._client.delete(`/v1/messages/batches/${messageBatchId}?beta=true`, {
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
  cancel(messageBatchId, params = {}, options) {
    if (isRequestOptions(params)) {
      return this.cancel(messageBatchId, {}, params);
    }
    const { betas } = params;
    return this._client.post(`/v1/messages/batches/${messageBatchId}/cancel?beta=true`, {
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
  async results(messageBatchId, params = {}, options) {
    if (isRequestOptions(params)) {
      return this.results(messageBatchId, {}, params);
    }
    const batch = await this.retrieve(messageBatchId);
    if (!batch.results_url) {
      throw new AnthropicError(`No batch \`results_url\`; Has it finished processing? ${batch.processing_status} - ${batch.id}`);
    }
    const { betas } = params;
    return this._client.get(batch.results_url, {
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        Accept: "application/binary",
        ...options == null ? void 0 : options.headers
      },
      __binaryResponse: true
    })._thenUnwrap((_, props) => JSONLDecoder.fromResponse(props.response, props.controller));
  }
};
var BetaMessageBatchesPage = class extends Page {
};
Batches.BetaMessageBatchesPage = BetaMessageBatchesPage;

// node_modules/@anthropic-ai/sdk/_vendor/partial-json-parser/parser.mjs
var tokenize = (input) => {
  let current = 0;
  let tokens = [];
  while (current < input.length) {
    let char = input[current];
    if (char === "\\") {
      current++;
      continue;
    }
    if (char === "{") {
      tokens.push({
        type: "brace",
        value: "{"
      });
      current++;
      continue;
    }
    if (char === "}") {
      tokens.push({
        type: "brace",
        value: "}"
      });
      current++;
      continue;
    }
    if (char === "[") {
      tokens.push({
        type: "paren",
        value: "["
      });
      current++;
      continue;
    }
    if (char === "]") {
      tokens.push({
        type: "paren",
        value: "]"
      });
      current++;
      continue;
    }
    if (char === ":") {
      tokens.push({
        type: "separator",
        value: ":"
      });
      current++;
      continue;
    }
    if (char === ",") {
      tokens.push({
        type: "delimiter",
        value: ","
      });
      current++;
      continue;
    }
    if (char === '"') {
      let value = "";
      let danglingQuote = false;
      char = input[++current];
      while (char !== '"') {
        if (current === input.length) {
          danglingQuote = true;
          break;
        }
        if (char === "\\") {
          current++;
          if (current === input.length) {
            danglingQuote = true;
            break;
          }
          value += char + input[current];
          char = input[++current];
        } else {
          value += char;
          char = input[++current];
        }
      }
      char = input[++current];
      if (!danglingQuote) {
        tokens.push({
          type: "string",
          value
        });
      }
      continue;
    }
    let WHITESPACE = /\s/;
    if (char && WHITESPACE.test(char)) {
      current++;
      continue;
    }
    let NUMBERS = /[0-9]/;
    if (char && NUMBERS.test(char) || char === "-" || char === ".") {
      let value = "";
      if (char === "-") {
        value += char;
        char = input[++current];
      }
      while (char && NUMBERS.test(char) || char === ".") {
        value += char;
        char = input[++current];
      }
      tokens.push({
        type: "number",
        value
      });
      continue;
    }
    let LETTERS = /[a-z]/i;
    if (char && LETTERS.test(char)) {
      let value = "";
      while (char && LETTERS.test(char)) {
        if (current === input.length) {
          break;
        }
        value += char;
        char = input[++current];
      }
      if (value == "true" || value == "false" || value === "null") {
        tokens.push({
          type: "name",
          value
        });
      } else {
        current++;
        continue;
      }
      continue;
    }
    current++;
  }
  return tokens;
};
var strip = (tokens) => {
  if (tokens.length === 0) {
    return tokens;
  }
  let lastToken = tokens[tokens.length - 1];
  switch (lastToken.type) {
    case "separator":
      tokens = tokens.slice(0, tokens.length - 1);
      return strip(tokens);
      break;
    case "number":
      let lastCharacterOfLastToken = lastToken.value[lastToken.value.length - 1];
      if (lastCharacterOfLastToken === "." || lastCharacterOfLastToken === "-") {
        tokens = tokens.slice(0, tokens.length - 1);
        return strip(tokens);
      }
    case "string":
      let tokenBeforeTheLastToken = tokens[tokens.length - 2];
      if ((tokenBeforeTheLastToken == null ? void 0 : tokenBeforeTheLastToken.type) === "delimiter") {
        tokens = tokens.slice(0, tokens.length - 1);
        return strip(tokens);
      } else if ((tokenBeforeTheLastToken == null ? void 0 : tokenBeforeTheLastToken.type) === "brace" && tokenBeforeTheLastToken.value === "{") {
        tokens = tokens.slice(0, tokens.length - 1);
        return strip(tokens);
      }
      break;
    case "delimiter":
      tokens = tokens.slice(0, tokens.length - 1);
      return strip(tokens);
      break;
  }
  return tokens;
};
var unstrip = (tokens) => {
  let tail = [];
  tokens.map((token) => {
    if (token.type === "brace") {
      if (token.value === "{") {
        tail.push("}");
      } else {
        tail.splice(tail.lastIndexOf("}"), 1);
      }
    }
    if (token.type === "paren") {
      if (token.value === "[") {
        tail.push("]");
      } else {
        tail.splice(tail.lastIndexOf("]"), 1);
      }
    }
  });
  if (tail.length > 0) {
    tail.reverse().map((item) => {
      if (item === "}") {
        tokens.push({
          type: "brace",
          value: "}"
        });
      } else if (item === "]") {
        tokens.push({
          type: "paren",
          value: "]"
        });
      }
    });
  }
  return tokens;
};
var generate = (tokens) => {
  let output = "";
  tokens.map((token) => {
    switch (token.type) {
      case "string":
        output += '"' + token.value + '"';
        break;
      default:
        output += token.value;
        break;
    }
  });
  return output;
};
var partialParse = (input) => JSON.parse(generate(unstrip(strip(tokenize(input)))));

// node_modules/@anthropic-ai/sdk/lib/BetaMessageStream.mjs
var __classPrivateFieldSet2 = function(receiver, state, value, kind2, f) {
  if (kind2 === "m") throw new TypeError("Private method is not writable");
  if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var __classPrivateFieldGet2 = function(receiver, state, kind2, f) {
  if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _BetaMessageStream_instances;
var _BetaMessageStream_currentMessageSnapshot;
var _BetaMessageStream_connectedPromise;
var _BetaMessageStream_resolveConnectedPromise;
var _BetaMessageStream_rejectConnectedPromise;
var _BetaMessageStream_endPromise;
var _BetaMessageStream_resolveEndPromise;
var _BetaMessageStream_rejectEndPromise;
var _BetaMessageStream_listeners;
var _BetaMessageStream_ended;
var _BetaMessageStream_errored;
var _BetaMessageStream_aborted;
var _BetaMessageStream_catchingPromiseCreated;
var _BetaMessageStream_response;
var _BetaMessageStream_request_id;
var _BetaMessageStream_getFinalMessage;
var _BetaMessageStream_getFinalText;
var _BetaMessageStream_handleError;
var _BetaMessageStream_beginRequest;
var _BetaMessageStream_addStreamEvent;
var _BetaMessageStream_endRequest;
var _BetaMessageStream_accumulateMessage;
var JSON_BUF_PROPERTY = "__json_buf";
var BetaMessageStream = class _BetaMessageStream {
  constructor() {
    _BetaMessageStream_instances.add(this);
    this.messages = [];
    this.receivedMessages = [];
    _BetaMessageStream_currentMessageSnapshot.set(this, void 0);
    this.controller = new AbortController();
    _BetaMessageStream_connectedPromise.set(this, void 0);
    _BetaMessageStream_resolveConnectedPromise.set(this, () => {
    });
    _BetaMessageStream_rejectConnectedPromise.set(this, () => {
    });
    _BetaMessageStream_endPromise.set(this, void 0);
    _BetaMessageStream_resolveEndPromise.set(this, () => {
    });
    _BetaMessageStream_rejectEndPromise.set(this, () => {
    });
    _BetaMessageStream_listeners.set(this, {});
    _BetaMessageStream_ended.set(this, false);
    _BetaMessageStream_errored.set(this, false);
    _BetaMessageStream_aborted.set(this, false);
    _BetaMessageStream_catchingPromiseCreated.set(this, false);
    _BetaMessageStream_response.set(this, void 0);
    _BetaMessageStream_request_id.set(this, void 0);
    _BetaMessageStream_handleError.set(this, (error) => {
      __classPrivateFieldSet2(this, _BetaMessageStream_errored, true, "f");
      if (error instanceof Error && error.name === "AbortError") {
        error = new APIUserAbortError();
      }
      if (error instanceof APIUserAbortError) {
        __classPrivateFieldSet2(this, _BetaMessageStream_aborted, true, "f");
        return this._emit("abort", error);
      }
      if (error instanceof AnthropicError) {
        return this._emit("error", error);
      }
      if (error instanceof Error) {
        const anthropicError = new AnthropicError(error.message);
        anthropicError.cause = error;
        return this._emit("error", anthropicError);
      }
      return this._emit("error", new AnthropicError(String(error)));
    });
    __classPrivateFieldSet2(this, _BetaMessageStream_connectedPromise, new Promise((resolve, reject) => {
      __classPrivateFieldSet2(this, _BetaMessageStream_resolveConnectedPromise, resolve, "f");
      __classPrivateFieldSet2(this, _BetaMessageStream_rejectConnectedPromise, reject, "f");
    }), "f");
    __classPrivateFieldSet2(this, _BetaMessageStream_endPromise, new Promise((resolve, reject) => {
      __classPrivateFieldSet2(this, _BetaMessageStream_resolveEndPromise, resolve, "f");
      __classPrivateFieldSet2(this, _BetaMessageStream_rejectEndPromise, reject, "f");
    }), "f");
    __classPrivateFieldGet2(this, _BetaMessageStream_connectedPromise, "f").catch(() => {
    });
    __classPrivateFieldGet2(this, _BetaMessageStream_endPromise, "f").catch(() => {
    });
  }
  get response() {
    return __classPrivateFieldGet2(this, _BetaMessageStream_response, "f");
  }
  get request_id() {
    return __classPrivateFieldGet2(this, _BetaMessageStream_request_id, "f");
  }
  /**
   * Returns the `MessageStream` data, the raw `Response` instance and the ID of the request,
   * returned vie the `request-id` header which is useful for debugging requests and resporting
   * issues to Anthropic.
   *
   * This is the same as the `APIPromise.withResponse()` method.
   *
   * This method will raise an error if you created the stream using `MessageStream.fromReadableStream`
   * as no `Response` is available.
   */
  async withResponse() {
    const response = await __classPrivateFieldGet2(this, _BetaMessageStream_connectedPromise, "f");
    if (!response) {
      throw new Error("Could not resolve a `Response` object");
    }
    return {
      data: this,
      response,
      request_id: response.headers.get("request-id")
    };
  }
  /**
   * Intended for use on the frontend, consuming a stream produced with
   * `.toReadableStream()` on the backend.
   *
   * Note that messages sent to the model do not appear in `.on('message')`
   * in this context.
   */
  static fromReadableStream(stream) {
    const runner = new _BetaMessageStream();
    runner._run(() => runner._fromReadableStream(stream));
    return runner;
  }
  static createMessage(messages, params, options) {
    const runner = new _BetaMessageStream();
    for (const message of params.messages) {
      runner._addMessageParam(message);
    }
    runner._run(() => runner._createMessage(messages, { ...params, stream: true }, { ...options, headers: { ...options == null ? void 0 : options.headers, "X-Stainless-Helper-Method": "stream" } }));
    return runner;
  }
  _run(executor) {
    executor().then(() => {
      this._emitFinal();
      this._emit("end");
    }, __classPrivateFieldGet2(this, _BetaMessageStream_handleError, "f"));
  }
  _addMessageParam(message) {
    this.messages.push(message);
  }
  _addMessage(message, emit = true) {
    this.receivedMessages.push(message);
    if (emit) {
      this._emit("message", message);
    }
  }
  async _createMessage(messages, params, options) {
    var _a2;
    const signal = options == null ? void 0 : options.signal;
    if (signal) {
      if (signal.aborted)
        this.controller.abort();
      signal.addEventListener("abort", () => this.controller.abort());
    }
    __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_beginRequest).call(this);
    const { response, data: stream } = await messages.create({ ...params, stream: true }, { ...options, signal: this.controller.signal }).withResponse();
    this._connected(response);
    for await (const event of stream) {
      __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_addStreamEvent).call(this, event);
    }
    if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
      throw new APIUserAbortError();
    }
    __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_endRequest).call(this);
  }
  _connected(response) {
    if (this.ended)
      return;
    __classPrivateFieldSet2(this, _BetaMessageStream_response, response, "f");
    __classPrivateFieldSet2(this, _BetaMessageStream_request_id, response == null ? void 0 : response.headers.get("request-id"), "f");
    __classPrivateFieldGet2(this, _BetaMessageStream_resolveConnectedPromise, "f").call(this, response);
    this._emit("connect");
  }
  get ended() {
    return __classPrivateFieldGet2(this, _BetaMessageStream_ended, "f");
  }
  get errored() {
    return __classPrivateFieldGet2(this, _BetaMessageStream_errored, "f");
  }
  get aborted() {
    return __classPrivateFieldGet2(this, _BetaMessageStream_aborted, "f");
  }
  abort() {
    this.controller.abort();
  }
  /**
   * Adds the listener function to the end of the listeners array for the event.
   * No checks are made to see if the listener has already been added. Multiple calls passing
   * the same combination of event and listener will result in the listener being added, and
   * called, multiple times.
   * @returns this MessageStream, so that calls can be chained
   */
  on(event, listener) {
    const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] || (__classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] = []);
    listeners.push({ listener });
    return this;
  }
  /**
   * Removes the specified listener from the listener array for the event.
   * off() will remove, at most, one instance of a listener from the listener array. If any single
   * listener has been added multiple times to the listener array for the specified event, then
   * off() must be called multiple times to remove each instance.
   * @returns this MessageStream, so that calls can be chained
   */
  off(event, listener) {
    const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event];
    if (!listeners)
      return this;
    const index = listeners.findIndex((l) => l.listener === listener);
    if (index >= 0)
      listeners.splice(index, 1);
    return this;
  }
  /**
   * Adds a one-time listener function for the event. The next time the event is triggered,
   * this listener is removed and then invoked.
   * @returns this MessageStream, so that calls can be chained
   */
  once(event, listener) {
    const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] || (__classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] = []);
    listeners.push({ listener, once: true });
    return this;
  }
  /**
   * This is similar to `.once()`, but returns a Promise that resolves the next time
   * the event is triggered, instead of calling a listener callback.
   * @returns a Promise that resolves the next time given event is triggered,
   * or rejects if an error is emitted.  (If you request the 'error' event,
   * returns a promise that resolves with the error).
   *
   * Example:
   *
   *   const message = await stream.emitted('message') // rejects if the stream errors
   */
  emitted(event) {
    return new Promise((resolve, reject) => {
      __classPrivateFieldSet2(this, _BetaMessageStream_catchingPromiseCreated, true, "f");
      if (event !== "error")
        this.once("error", reject);
      this.once(event, resolve);
    });
  }
  async done() {
    __classPrivateFieldSet2(this, _BetaMessageStream_catchingPromiseCreated, true, "f");
    await __classPrivateFieldGet2(this, _BetaMessageStream_endPromise, "f");
  }
  get currentMessage() {
    return __classPrivateFieldGet2(this, _BetaMessageStream_currentMessageSnapshot, "f");
  }
  /**
   * @returns a promise that resolves with the the final assistant Message response,
   * or rejects if an error occurred or the stream ended prematurely without producing a Message.
   */
  async finalMessage() {
    await this.done();
    return __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_getFinalMessage).call(this);
  }
  /**
   * @returns a promise that resolves with the the final assistant Message's text response, concatenated
   * together if there are more than one text blocks.
   * Rejects if an error occurred or the stream ended prematurely without producing a Message.
   */
  async finalText() {
    await this.done();
    return __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_getFinalText).call(this);
  }
  _emit(event, ...args) {
    if (__classPrivateFieldGet2(this, _BetaMessageStream_ended, "f"))
      return;
    if (event === "end") {
      __classPrivateFieldSet2(this, _BetaMessageStream_ended, true, "f");
      __classPrivateFieldGet2(this, _BetaMessageStream_resolveEndPromise, "f").call(this);
    }
    const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event];
    if (listeners) {
      __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] = listeners.filter((l) => !l.once);
      listeners.forEach(({ listener }) => listener(...args));
    }
    if (event === "abort") {
      const error = args[0];
      if (!__classPrivateFieldGet2(this, _BetaMessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
        Promise.reject(error);
      }
      __classPrivateFieldGet2(this, _BetaMessageStream_rejectConnectedPromise, "f").call(this, error);
      __classPrivateFieldGet2(this, _BetaMessageStream_rejectEndPromise, "f").call(this, error);
      this._emit("end");
      return;
    }
    if (event === "error") {
      const error = args[0];
      if (!__classPrivateFieldGet2(this, _BetaMessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
        Promise.reject(error);
      }
      __classPrivateFieldGet2(this, _BetaMessageStream_rejectConnectedPromise, "f").call(this, error);
      __classPrivateFieldGet2(this, _BetaMessageStream_rejectEndPromise, "f").call(this, error);
      this._emit("end");
    }
  }
  _emitFinal() {
    const finalMessage = this.receivedMessages.at(-1);
    if (finalMessage) {
      this._emit("finalMessage", __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_getFinalMessage).call(this));
    }
  }
  async _fromReadableStream(readableStream, options) {
    var _a2;
    const signal = options == null ? void 0 : options.signal;
    if (signal) {
      if (signal.aborted)
        this.controller.abort();
      signal.addEventListener("abort", () => this.controller.abort());
    }
    __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_beginRequest).call(this);
    this._connected(null);
    const stream = Stream.fromReadableStream(readableStream, this.controller);
    for await (const event of stream) {
      __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_addStreamEvent).call(this, event);
    }
    if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
      throw new APIUserAbortError();
    }
    __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_endRequest).call(this);
  }
  [(_BetaMessageStream_currentMessageSnapshot = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_connectedPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_resolveConnectedPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_rejectConnectedPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_endPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_resolveEndPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_rejectEndPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_listeners = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_ended = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_errored = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_aborted = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_catchingPromiseCreated = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_response = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_request_id = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_handleError = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_instances = /* @__PURE__ */ new WeakSet(), _BetaMessageStream_getFinalMessage = function _BetaMessageStream_getFinalMessage2() {
    if (this.receivedMessages.length === 0) {
      throw new AnthropicError("stream ended without producing a Message with role=assistant");
    }
    return this.receivedMessages.at(-1);
  }, _BetaMessageStream_getFinalText = function _BetaMessageStream_getFinalText2() {
    if (this.receivedMessages.length === 0) {
      throw new AnthropicError("stream ended without producing a Message with role=assistant");
    }
    const textBlocks = this.receivedMessages.at(-1).content.filter((block) => block.type === "text").map((block) => block.text);
    if (textBlocks.length === 0) {
      throw new AnthropicError("stream ended without producing a content block with type=text");
    }
    return textBlocks.join(" ");
  }, _BetaMessageStream_beginRequest = function _BetaMessageStream_beginRequest2() {
    if (this.ended)
      return;
    __classPrivateFieldSet2(this, _BetaMessageStream_currentMessageSnapshot, void 0, "f");
  }, _BetaMessageStream_addStreamEvent = function _BetaMessageStream_addStreamEvent2(event) {
    var _a2;
    if (this.ended)
      return;
    const messageSnapshot = __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_accumulateMessage).call(this, event);
    this._emit("streamEvent", event, messageSnapshot);
    switch (event.type) {
      case "content_block_delta": {
        const content = messageSnapshot.content.at(-1);
        switch (event.delta.type) {
          case "text_delta": {
            if (content.type === "text") {
              this._emit("text", event.delta.text, content.text || "");
            }
            break;
          }
          case "citations_delta": {
            if (content.type === "text") {
              this._emit("citation", event.delta.citation, (_a2 = content.citations) != null ? _a2 : []);
            }
            break;
          }
          case "input_json_delta": {
            if (content.type === "tool_use" && content.input) {
              this._emit("inputJson", event.delta.partial_json, content.input);
            }
            break;
          }
          default:
            checkNever(event.delta);
        }
        break;
      }
      case "message_stop": {
        this._addMessageParam(messageSnapshot);
        this._addMessage(messageSnapshot, true);
        break;
      }
      case "content_block_stop": {
        this._emit("contentBlock", messageSnapshot.content.at(-1));
        break;
      }
      case "message_start": {
        __classPrivateFieldSet2(this, _BetaMessageStream_currentMessageSnapshot, messageSnapshot, "f");
        break;
      }
      case "content_block_start":
      case "message_delta":
        break;
    }
  }, _BetaMessageStream_endRequest = function _BetaMessageStream_endRequest2() {
    if (this.ended) {
      throw new AnthropicError(`stream has ended, this shouldn't happen`);
    }
    const snapshot = __classPrivateFieldGet2(this, _BetaMessageStream_currentMessageSnapshot, "f");
    if (!snapshot) {
      throw new AnthropicError(`request ended without sending any chunks`);
    }
    __classPrivateFieldSet2(this, _BetaMessageStream_currentMessageSnapshot, void 0, "f");
    return snapshot;
  }, _BetaMessageStream_accumulateMessage = function _BetaMessageStream_accumulateMessage2(event) {
    var _a2;
    let snapshot = __classPrivateFieldGet2(this, _BetaMessageStream_currentMessageSnapshot, "f");
    if (event.type === "message_start") {
      if (snapshot) {
        throw new AnthropicError(`Unexpected event order, got ${event.type} before receiving "message_stop"`);
      }
      return event.message;
    }
    if (!snapshot) {
      throw new AnthropicError(`Unexpected event order, got ${event.type} before "message_start"`);
    }
    switch (event.type) {
      case "message_stop":
        return snapshot;
      case "message_delta":
        snapshot.stop_reason = event.delta.stop_reason;
        snapshot.stop_sequence = event.delta.stop_sequence;
        snapshot.usage.output_tokens = event.usage.output_tokens;
        return snapshot;
      case "content_block_start":
        snapshot.content.push(event.content_block);
        return snapshot;
      case "content_block_delta": {
        const snapshotContent = snapshot.content.at(event.index);
        switch (event.delta.type) {
          case "text_delta": {
            if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
              snapshotContent.text += event.delta.text;
            }
            break;
          }
          case "citations_delta": {
            if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
              (_a2 = snapshotContent.citations) != null ? _a2 : snapshotContent.citations = [];
              snapshotContent.citations.push(event.delta.citation);
            }
            break;
          }
          case "input_json_delta": {
            if ((snapshotContent == null ? void 0 : snapshotContent.type) === "tool_use") {
              let jsonBuf = snapshotContent[JSON_BUF_PROPERTY] || "";
              jsonBuf += event.delta.partial_json;
              Object.defineProperty(snapshotContent, JSON_BUF_PROPERTY, {
                value: jsonBuf,
                enumerable: false,
                writable: true
              });
              if (jsonBuf) {
                snapshotContent.input = partialParse(jsonBuf);
              }
            }
            break;
          }
          default:
            checkNever(event.delta);
        }
        return snapshot;
      }
      case "content_block_stop":
        return snapshot;
    }
  }, Symbol.asyncIterator)]() {
    const pushQueue = [];
    const readQueue = [];
    let done = false;
    this.on("streamEvent", (event) => {
      const reader = readQueue.shift();
      if (reader) {
        reader.resolve(event);
      } else {
        pushQueue.push(event);
      }
    });
    this.on("end", () => {
      done = true;
      for (const reader of readQueue) {
        reader.resolve(void 0);
      }
      readQueue.length = 0;
    });
    this.on("abort", (err) => {
      done = true;
      for (const reader of readQueue) {
        reader.reject(err);
      }
      readQueue.length = 0;
    });
    this.on("error", (err) => {
      done = true;
      for (const reader of readQueue) {
        reader.reject(err);
      }
      readQueue.length = 0;
    });
    return {
      next: async () => {
        if (!pushQueue.length) {
          if (done) {
            return { value: void 0, done: true };
          }
          return new Promise((resolve, reject) => readQueue.push({ resolve, reject })).then((chunk2) => chunk2 ? { value: chunk2, done: false } : { value: void 0, done: true });
        }
        const chunk = pushQueue.shift();
        return { value: chunk, done: false };
      },
      return: async () => {
        this.abort();
        return { value: void 0, done: true };
      }
    };
  }
  toReadableStream() {
    const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);
    return stream.toReadableStream();
  }
};
function checkNever(x) {
}

// node_modules/@anthropic-ai/sdk/resources/beta/messages/messages.mjs
var DEPRECATED_MODELS = {
  "claude-1.3": "November 6th, 2024",
  "claude-1.3-100k": "November 6th, 2024",
  "claude-instant-1.1": "November 6th, 2024",
  "claude-instant-1.1-100k": "November 6th, 2024",
  "claude-instant-1.2": "November 6th, 2024",
  "claude-3-sonnet-20240229": "July 21st, 2025",
  "claude-2.1": "July 21st, 2025",
  "claude-2.0": "July 21st, 2025"
};
var Messages = class extends APIResource {
  constructor() {
    super(...arguments);
    this.batches = new Batches(this._client);
  }
  create(params, options) {
    var _a2, _b;
    const { betas, ...body } = params;
    if (body.model in DEPRECATED_MODELS) {
      console.warn(`The model '${body.model}' is deprecated and will reach end-of-life on ${DEPRECATED_MODELS[body.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);
    }
    return this._client.post("/v1/messages?beta=true", {
      body,
      timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
      ...options,
      headers: {
        ...(betas == null ? void 0 : betas.toString()) != null ? { "anthropic-beta": betas == null ? void 0 : betas.toString() } : void 0,
        ...options == null ? void 0 : options.headers
      },
      stream: (_b = params.stream) != null ? _b : false
    });
  }
  /**
   * Create a Message stream
   */
  stream(body, options) {
    return BetaMessageStream.createMessage(this, body, options);
  }
  /**
   * Count the number of tokens in a Message.
   *
   * The Token Count API can be used to count the number of tokens in a Message,
   * including tools, images, and documents, without creating it.
   */
  countTokens(params, options) {
    const { betas, ...body } = params;
    return this._client.post("/v1/messages/count_tokens?beta=true", {
      body,
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "token-counting-2024-11-01"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
};
Messages.Batches = Batches;
Messages.BetaMessageBatchesPage = BetaMessageBatchesPage;

// node_modules/@anthropic-ai/sdk/resources/beta/beta.mjs
var Beta = class extends APIResource {
  constructor() {
    super(...arguments);
    this.models = new Models(this._client);
    this.messages = new Messages(this._client);
  }
};
Beta.Models = Models;
Beta.BetaModelInfosPage = BetaModelInfosPage;
Beta.Messages = Messages;

// node_modules/@anthropic-ai/sdk/resources/completions.mjs
var Completions = class extends APIResource {
  create(body, options) {
    var _a2, _b;
    return this._client.post("/v1/complete", {
      body,
      timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
      ...options,
      stream: (_b = body.stream) != null ? _b : false
    });
  }
};

// node_modules/@anthropic-ai/sdk/resources/messages/batches.mjs
var Batches2 = class extends APIResource {
  /**
   * Send a batch of Message creation requests.
   *
   * The Message Batches API can be used to process multiple Messages API requests at
   * once. Once a Message Batch is created, it begins processing immediately. Batches
   * can take up to 24 hours to complete.
   */
  create(body, options) {
    return this._client.post("/v1/messages/batches", { body, ...options });
  }
  /**
   * This endpoint is idempotent and can be used to poll for Message Batch
   * completion. To access the results of a Message Batch, make a request to the
   * `results_url` field in the response.
   */
  retrieve(messageBatchId, options) {
    return this._client.get(`/v1/messages/batches/${messageBatchId}`, options);
  }
  list(query = {}, options) {
    if (isRequestOptions(query)) {
      return this.list({}, query);
    }
    return this._client.getAPIList("/v1/messages/batches", MessageBatchesPage, { query, ...options });
  }
  /**
   * Delete a Message Batch.
   *
   * Message Batches can only be deleted once they've finished processing. If you'd
   * like to delete an in-progress batch, you must first cancel it.
   */
  delete(messageBatchId, options) {
    return this._client.delete(`/v1/messages/batches/${messageBatchId}`, options);
  }
  /**
   * Batches may be canceled any time before processing ends. Once cancellation is
   * initiated, the batch enters a `canceling` state, at which time the system may
   * complete any in-progress, non-interruptible requests before finalizing
   * cancellation.
   *
   * The number of canceled requests is specified in `request_counts`. To determine
   * which requests were canceled, check the individual results within the batch.
   * Note that cancellation may not result in any canceled requests if they were
   * non-interruptible.
   */
  cancel(messageBatchId, options) {
    return this._client.post(`/v1/messages/batches/${messageBatchId}/cancel`, options);
  }
  /**
   * Streams the results of a Message Batch as a `.jsonl` file.
   *
   * Each line in the file is a JSON object containing the result of a single request
   * in the Message Batch. Results are not guaranteed to be in the same order as
   * requests. Use the `custom_id` field to match results to requests.
   */
  async results(messageBatchId, options) {
    const batch = await this.retrieve(messageBatchId);
    if (!batch.results_url) {
      throw new AnthropicError(`No batch \`results_url\`; Has it finished processing? ${batch.processing_status} - ${batch.id}`);
    }
    return this._client.get(batch.results_url, {
      ...options,
      headers: {
        Accept: "application/binary",
        ...options == null ? void 0 : options.headers
      },
      __binaryResponse: true
    })._thenUnwrap((_, props) => JSONLDecoder.fromResponse(props.response, props.controller));
  }
};
var MessageBatchesPage = class extends Page {
};
Batches2.MessageBatchesPage = MessageBatchesPage;

// node_modules/@anthropic-ai/sdk/lib/MessageStream.mjs
var __classPrivateFieldSet3 = function(receiver, state, value, kind2, f) {
  if (kind2 === "m") throw new TypeError("Private method is not writable");
  if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var __classPrivateFieldGet3 = function(receiver, state, kind2, f) {
  if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _MessageStream_instances;
var _MessageStream_currentMessageSnapshot;
var _MessageStream_connectedPromise;
var _MessageStream_resolveConnectedPromise;
var _MessageStream_rejectConnectedPromise;
var _MessageStream_endPromise;
var _MessageStream_resolveEndPromise;
var _MessageStream_rejectEndPromise;
var _MessageStream_listeners;
var _MessageStream_ended;
var _MessageStream_errored;
var _MessageStream_aborted;
var _MessageStream_catchingPromiseCreated;
var _MessageStream_response;
var _MessageStream_request_id;
var _MessageStream_getFinalMessage;
var _MessageStream_getFinalText;
var _MessageStream_handleError;
var _MessageStream_beginRequest;
var _MessageStream_addStreamEvent;
var _MessageStream_endRequest;
var _MessageStream_accumulateMessage;
var JSON_BUF_PROPERTY2 = "__json_buf";
var MessageStream = class _MessageStream {
  constructor() {
    _MessageStream_instances.add(this);
    this.messages = [];
    this.receivedMessages = [];
    _MessageStream_currentMessageSnapshot.set(this, void 0);
    this.controller = new AbortController();
    _MessageStream_connectedPromise.set(this, void 0);
    _MessageStream_resolveConnectedPromise.set(this, () => {
    });
    _MessageStream_rejectConnectedPromise.set(this, () => {
    });
    _MessageStream_endPromise.set(this, void 0);
    _MessageStream_resolveEndPromise.set(this, () => {
    });
    _MessageStream_rejectEndPromise.set(this, () => {
    });
    _MessageStream_listeners.set(this, {});
    _MessageStream_ended.set(this, false);
    _MessageStream_errored.set(this, false);
    _MessageStream_aborted.set(this, false);
    _MessageStream_catchingPromiseCreated.set(this, false);
    _MessageStream_response.set(this, void 0);
    _MessageStream_request_id.set(this, void 0);
    _MessageStream_handleError.set(this, (error) => {
      __classPrivateFieldSet3(this, _MessageStream_errored, true, "f");
      if (error instanceof Error && error.name === "AbortError") {
        error = new APIUserAbortError();
      }
      if (error instanceof APIUserAbortError) {
        __classPrivateFieldSet3(this, _MessageStream_aborted, true, "f");
        return this._emit("abort", error);
      }
      if (error instanceof AnthropicError) {
        return this._emit("error", error);
      }
      if (error instanceof Error) {
        const anthropicError = new AnthropicError(error.message);
        anthropicError.cause = error;
        return this._emit("error", anthropicError);
      }
      return this._emit("error", new AnthropicError(String(error)));
    });
    __classPrivateFieldSet3(this, _MessageStream_connectedPromise, new Promise((resolve, reject) => {
      __classPrivateFieldSet3(this, _MessageStream_resolveConnectedPromise, resolve, "f");
      __classPrivateFieldSet3(this, _MessageStream_rejectConnectedPromise, reject, "f");
    }), "f");
    __classPrivateFieldSet3(this, _MessageStream_endPromise, new Promise((resolve, reject) => {
      __classPrivateFieldSet3(this, _MessageStream_resolveEndPromise, resolve, "f");
      __classPrivateFieldSet3(this, _MessageStream_rejectEndPromise, reject, "f");
    }), "f");
    __classPrivateFieldGet3(this, _MessageStream_connectedPromise, "f").catch(() => {
    });
    __classPrivateFieldGet3(this, _MessageStream_endPromise, "f").catch(() => {
    });
  }
  get response() {
    return __classPrivateFieldGet3(this, _MessageStream_response, "f");
  }
  get request_id() {
    return __classPrivateFieldGet3(this, _MessageStream_request_id, "f");
  }
  /**
   * Returns the `MessageStream` data, the raw `Response` instance and the ID of the request,
   * returned vie the `request-id` header which is useful for debugging requests and resporting
   * issues to Anthropic.
   *
   * This is the same as the `APIPromise.withResponse()` method.
   *
   * This method will raise an error if you created the stream using `MessageStream.fromReadableStream`
   * as no `Response` is available.
   */
  async withResponse() {
    const response = await __classPrivateFieldGet3(this, _MessageStream_connectedPromise, "f");
    if (!response) {
      throw new Error("Could not resolve a `Response` object");
    }
    return {
      data: this,
      response,
      request_id: response.headers.get("request-id")
    };
  }
  /**
   * Intended for use on the frontend, consuming a stream produced with
   * `.toReadableStream()` on the backend.
   *
   * Note that messages sent to the model do not appear in `.on('message')`
   * in this context.
   */
  static fromReadableStream(stream) {
    const runner = new _MessageStream();
    runner._run(() => runner._fromReadableStream(stream));
    return runner;
  }
  static createMessage(messages, params, options) {
    const runner = new _MessageStream();
    for (const message of params.messages) {
      runner._addMessageParam(message);
    }
    runner._run(() => runner._createMessage(messages, { ...params, stream: true }, { ...options, headers: { ...options == null ? void 0 : options.headers, "X-Stainless-Helper-Method": "stream" } }));
    return runner;
  }
  _run(executor) {
    executor().then(() => {
      this._emitFinal();
      this._emit("end");
    }, __classPrivateFieldGet3(this, _MessageStream_handleError, "f"));
  }
  _addMessageParam(message) {
    this.messages.push(message);
  }
  _addMessage(message, emit = true) {
    this.receivedMessages.push(message);
    if (emit) {
      this._emit("message", message);
    }
  }
  async _createMessage(messages, params, options) {
    var _a2;
    const signal = options == null ? void 0 : options.signal;
    if (signal) {
      if (signal.aborted)
        this.controller.abort();
      signal.addEventListener("abort", () => this.controller.abort());
    }
    __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_beginRequest).call(this);
    const { response, data: stream } = await messages.create({ ...params, stream: true }, { ...options, signal: this.controller.signal }).withResponse();
    this._connected(response);
    for await (const event of stream) {
      __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_addStreamEvent).call(this, event);
    }
    if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
      throw new APIUserAbortError();
    }
    __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_endRequest).call(this);
  }
  _connected(response) {
    if (this.ended)
      return;
    __classPrivateFieldSet3(this, _MessageStream_response, response, "f");
    __classPrivateFieldSet3(this, _MessageStream_request_id, response == null ? void 0 : response.headers.get("request-id"), "f");
    __classPrivateFieldGet3(this, _MessageStream_resolveConnectedPromise, "f").call(this, response);
    this._emit("connect");
  }
  get ended() {
    return __classPrivateFieldGet3(this, _MessageStream_ended, "f");
  }
  get errored() {
    return __classPrivateFieldGet3(this, _MessageStream_errored, "f");
  }
  get aborted() {
    return __classPrivateFieldGet3(this, _MessageStream_aborted, "f");
  }
  abort() {
    this.controller.abort();
  }
  /**
   * Adds the listener function to the end of the listeners array for the event.
   * No checks are made to see if the listener has already been added. Multiple calls passing
   * the same combination of event and listener will result in the listener being added, and
   * called, multiple times.
   * @returns this MessageStream, so that calls can be chained
   */
  on(event, listener) {
    const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] || (__classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = []);
    listeners.push({ listener });
    return this;
  }
  /**
   * Removes the specified listener from the listener array for the event.
   * off() will remove, at most, one instance of a listener from the listener array. If any single
   * listener has been added multiple times to the listener array for the specified event, then
   * off() must be called multiple times to remove each instance.
   * @returns this MessageStream, so that calls can be chained
   */
  off(event, listener) {
    const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event];
    if (!listeners)
      return this;
    const index = listeners.findIndex((l) => l.listener === listener);
    if (index >= 0)
      listeners.splice(index, 1);
    return this;
  }
  /**
   * Adds a one-time listener function for the event. The next time the event is triggered,
   * this listener is removed and then invoked.
   * @returns this MessageStream, so that calls can be chained
   */
  once(event, listener) {
    const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] || (__classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = []);
    listeners.push({ listener, once: true });
    return this;
  }
  /**
   * This is similar to `.once()`, but returns a Promise that resolves the next time
   * the event is triggered, instead of calling a listener callback.
   * @returns a Promise that resolves the next time given event is triggered,
   * or rejects if an error is emitted.  (If you request the 'error' event,
   * returns a promise that resolves with the error).
   *
   * Example:
   *
   *   const message = await stream.emitted('message') // rejects if the stream errors
   */
  emitted(event) {
    return new Promise((resolve, reject) => {
      __classPrivateFieldSet3(this, _MessageStream_catchingPromiseCreated, true, "f");
      if (event !== "error")
        this.once("error", reject);
      this.once(event, resolve);
    });
  }
  async done() {
    __classPrivateFieldSet3(this, _MessageStream_catchingPromiseCreated, true, "f");
    await __classPrivateFieldGet3(this, _MessageStream_endPromise, "f");
  }
  get currentMessage() {
    return __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
  }
  /**
   * @returns a promise that resolves with the the final assistant Message response,
   * or rejects if an error occurred or the stream ended prematurely without producing a Message.
   */
  async finalMessage() {
    await this.done();
    return __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalMessage).call(this);
  }
  /**
   * @returns a promise that resolves with the the final assistant Message's text response, concatenated
   * together if there are more than one text blocks.
   * Rejects if an error occurred or the stream ended prematurely without producing a Message.
   */
  async finalText() {
    await this.done();
    return __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalText).call(this);
  }
  _emit(event, ...args) {
    if (__classPrivateFieldGet3(this, _MessageStream_ended, "f"))
      return;
    if (event === "end") {
      __classPrivateFieldSet3(this, _MessageStream_ended, true, "f");
      __classPrivateFieldGet3(this, _MessageStream_resolveEndPromise, "f").call(this);
    }
    const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event];
    if (listeners) {
      __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = listeners.filter((l) => !l.once);
      listeners.forEach(({ listener }) => listener(...args));
    }
    if (event === "abort") {
      const error = args[0];
      if (!__classPrivateFieldGet3(this, _MessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
        Promise.reject(error);
      }
      __classPrivateFieldGet3(this, _MessageStream_rejectConnectedPromise, "f").call(this, error);
      __classPrivateFieldGet3(this, _MessageStream_rejectEndPromise, "f").call(this, error);
      this._emit("end");
      return;
    }
    if (event === "error") {
      const error = args[0];
      if (!__classPrivateFieldGet3(this, _MessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
        Promise.reject(error);
      }
      __classPrivateFieldGet3(this, _MessageStream_rejectConnectedPromise, "f").call(this, error);
      __classPrivateFieldGet3(this, _MessageStream_rejectEndPromise, "f").call(this, error);
      this._emit("end");
    }
  }
  _emitFinal() {
    const finalMessage = this.receivedMessages.at(-1);
    if (finalMessage) {
      this._emit("finalMessage", __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalMessage).call(this));
    }
  }
  async _fromReadableStream(readableStream, options) {
    var _a2;
    const signal = options == null ? void 0 : options.signal;
    if (signal) {
      if (signal.aborted)
        this.controller.abort();
      signal.addEventListener("abort", () => this.controller.abort());
    }
    __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_beginRequest).call(this);
    this._connected(null);
    const stream = Stream.fromReadableStream(readableStream, this.controller);
    for await (const event of stream) {
      __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_addStreamEvent).call(this, event);
    }
    if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
      throw new APIUserAbortError();
    }
    __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_endRequest).call(this);
  }
  [(_MessageStream_currentMessageSnapshot = /* @__PURE__ */ new WeakMap(), _MessageStream_connectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_resolveConnectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_rejectConnectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_endPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_resolveEndPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_rejectEndPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_listeners = /* @__PURE__ */ new WeakMap(), _MessageStream_ended = /* @__PURE__ */ new WeakMap(), _MessageStream_errored = /* @__PURE__ */ new WeakMap(), _MessageStream_aborted = /* @__PURE__ */ new WeakMap(), _MessageStream_catchingPromiseCreated = /* @__PURE__ */ new WeakMap(), _MessageStream_response = /* @__PURE__ */ new WeakMap(), _MessageStream_request_id = /* @__PURE__ */ new WeakMap(), _MessageStream_handleError = /* @__PURE__ */ new WeakMap(), _MessageStream_instances = /* @__PURE__ */ new WeakSet(), _MessageStream_getFinalMessage = function _MessageStream_getFinalMessage2() {
    if (this.receivedMessages.length === 0) {
      throw new AnthropicError("stream ended without producing a Message with role=assistant");
    }
    return this.receivedMessages.at(-1);
  }, _MessageStream_getFinalText = function _MessageStream_getFinalText2() {
    if (this.receivedMessages.length === 0) {
      throw new AnthropicError("stream ended without producing a Message with role=assistant");
    }
    const textBlocks = this.receivedMessages.at(-1).content.filter((block) => block.type === "text").map((block) => block.text);
    if (textBlocks.length === 0) {
      throw new AnthropicError("stream ended without producing a content block with type=text");
    }
    return textBlocks.join(" ");
  }, _MessageStream_beginRequest = function _MessageStream_beginRequest2() {
    if (this.ended)
      return;
    __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, void 0, "f");
  }, _MessageStream_addStreamEvent = function _MessageStream_addStreamEvent2(event) {
    var _a2;
    if (this.ended)
      return;
    const messageSnapshot = __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_accumulateMessage).call(this, event);
    this._emit("streamEvent", event, messageSnapshot);
    switch (event.type) {
      case "content_block_delta": {
        const content = messageSnapshot.content.at(-1);
        switch (event.delta.type) {
          case "text_delta": {
            if (content.type === "text") {
              this._emit("text", event.delta.text, content.text || "");
            }
            break;
          }
          case "citations_delta": {
            if (content.type === "text") {
              this._emit("citation", event.delta.citation, (_a2 = content.citations) != null ? _a2 : []);
            }
            break;
          }
          case "input_json_delta": {
            if (content.type === "tool_use" && content.input) {
              this._emit("inputJson", event.delta.partial_json, content.input);
            }
            break;
          }
          default:
            checkNever2(event.delta);
        }
        break;
      }
      case "message_stop": {
        this._addMessageParam(messageSnapshot);
        this._addMessage(messageSnapshot, true);
        break;
      }
      case "content_block_stop": {
        this._emit("contentBlock", messageSnapshot.content.at(-1));
        break;
      }
      case "message_start": {
        __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, messageSnapshot, "f");
        break;
      }
      case "content_block_start":
      case "message_delta":
        break;
    }
  }, _MessageStream_endRequest = function _MessageStream_endRequest2() {
    if (this.ended) {
      throw new AnthropicError(`stream has ended, this shouldn't happen`);
    }
    const snapshot = __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
    if (!snapshot) {
      throw new AnthropicError(`request ended without sending any chunks`);
    }
    __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, void 0, "f");
    return snapshot;
  }, _MessageStream_accumulateMessage = function _MessageStream_accumulateMessage2(event) {
    var _a2;
    let snapshot = __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
    if (event.type === "message_start") {
      if (snapshot) {
        throw new AnthropicError(`Unexpected event order, got ${event.type} before receiving "message_stop"`);
      }
      return event.message;
    }
    if (!snapshot) {
      throw new AnthropicError(`Unexpected event order, got ${event.type} before "message_start"`);
    }
    switch (event.type) {
      case "message_stop":
        return snapshot;
      case "message_delta":
        snapshot.stop_reason = event.delta.stop_reason;
        snapshot.stop_sequence = event.delta.stop_sequence;
        snapshot.usage.output_tokens = event.usage.output_tokens;
        return snapshot;
      case "content_block_start":
        snapshot.content.push(event.content_block);
        return snapshot;
      case "content_block_delta": {
        const snapshotContent = snapshot.content.at(event.index);
        switch (event.delta.type) {
          case "text_delta": {
            if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
              snapshotContent.text += event.delta.text;
            }
            break;
          }
          case "citations_delta": {
            if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
              (_a2 = snapshotContent.citations) != null ? _a2 : snapshotContent.citations = [];
              snapshotContent.citations.push(event.delta.citation);
            }
            break;
          }
          case "input_json_delta": {
            if ((snapshotContent == null ? void 0 : snapshotContent.type) === "tool_use") {
              let jsonBuf = snapshotContent[JSON_BUF_PROPERTY2] || "";
              jsonBuf += event.delta.partial_json;
              Object.defineProperty(snapshotContent, JSON_BUF_PROPERTY2, {
                value: jsonBuf,
                enumerable: false,
                writable: true
              });
              if (jsonBuf) {
                snapshotContent.input = partialParse(jsonBuf);
              }
            }
            break;
          }
          default:
            checkNever2(event.delta);
        }
        return snapshot;
      }
      case "content_block_stop":
        return snapshot;
    }
  }, Symbol.asyncIterator)]() {
    const pushQueue = [];
    const readQueue = [];
    let done = false;
    this.on("streamEvent", (event) => {
      const reader = readQueue.shift();
      if (reader) {
        reader.resolve(event);
      } else {
        pushQueue.push(event);
      }
    });
    this.on("end", () => {
      done = true;
      for (const reader of readQueue) {
        reader.resolve(void 0);
      }
      readQueue.length = 0;
    });
    this.on("abort", (err) => {
      done = true;
      for (const reader of readQueue) {
        reader.reject(err);
      }
      readQueue.length = 0;
    });
    this.on("error", (err) => {
      done = true;
      for (const reader of readQueue) {
        reader.reject(err);
      }
      readQueue.length = 0;
    });
    return {
      next: async () => {
        if (!pushQueue.length) {
          if (done) {
            return { value: void 0, done: true };
          }
          return new Promise((resolve, reject) => readQueue.push({ resolve, reject })).then((chunk2) => chunk2 ? { value: chunk2, done: false } : { value: void 0, done: true });
        }
        const chunk = pushQueue.shift();
        return { value: chunk, done: false };
      },
      return: async () => {
        this.abort();
        return { value: void 0, done: true };
      }
    };
  }
  toReadableStream() {
    const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);
    return stream.toReadableStream();
  }
};
function checkNever2(x) {
}

// node_modules/@anthropic-ai/sdk/resources/messages/messages.mjs
var Messages2 = class extends APIResource {
  constructor() {
    super(...arguments);
    this.batches = new Batches2(this._client);
  }
  create(body, options) {
    var _a2, _b;
    if (body.model in DEPRECATED_MODELS2) {
      console.warn(`The model '${body.model}' is deprecated and will reach end-of-life on ${DEPRECATED_MODELS2[body.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);
    }
    return this._client.post("/v1/messages", {
      body,
      timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
      ...options,
      stream: (_b = body.stream) != null ? _b : false
    });
  }
  /**
   * Create a Message stream
   */
  stream(body, options) {
    return MessageStream.createMessage(this, body, options);
  }
  /**
   * Count the number of tokens in a Message.
   *
   * The Token Count API can be used to count the number of tokens in a Message,
   * including tools, images, and documents, without creating it.
   */
  countTokens(body, options) {
    return this._client.post("/v1/messages/count_tokens", { body, ...options });
  }
};
var DEPRECATED_MODELS2 = {
  "claude-1.3": "November 6th, 2024",
  "claude-1.3-100k": "November 6th, 2024",
  "claude-instant-1.1": "November 6th, 2024",
  "claude-instant-1.1-100k": "November 6th, 2024",
  "claude-instant-1.2": "November 6th, 2024",
  "claude-3-sonnet-20240229": "July 21st, 2025",
  "claude-2.1": "July 21st, 2025",
  "claude-2.0": "July 21st, 2025"
};
Messages2.Batches = Batches2;
Messages2.MessageBatchesPage = MessageBatchesPage;

// node_modules/@anthropic-ai/sdk/resources/models.mjs
var Models2 = class extends APIResource {
  /**
   * Get a specific model.
   *
   * The Models API response can be used to determine information about a specific
   * model or resolve a model alias to a model ID.
   */
  retrieve(modelId, options) {
    return this._client.get(`/v1/models/${modelId}`, options);
  }
  list(query = {}, options) {
    if (isRequestOptions(query)) {
      return this.list({}, query);
    }
    return this._client.getAPIList("/v1/models", ModelInfosPage, { query, ...options });
  }
};
var ModelInfosPage = class extends Page {
};
Models2.ModelInfosPage = ModelInfosPage;

// node_modules/@anthropic-ai/sdk/index.mjs
var _a;
var Anthropic = class extends APIClient {
  /**
   * API Client for interfacing with the Anthropic API.
   *
   * @param {string | null | undefined} [opts.apiKey=process.env['ANTHROPIC_API_KEY'] ?? null]
   * @param {string | null | undefined} [opts.authToken=process.env['ANTHROPIC_AUTH_TOKEN'] ?? null]
   * @param {string} [opts.baseURL=process.env['ANTHROPIC_BASE_URL'] ?? https://api.anthropic.com] - Override the default base URL for the API.
   * @param {number} [opts.timeout=10 minutes] - The maximum amount of time (in milliseconds) the client will wait for a response before timing out.
   * @param {number} [opts.httpAgent] - An HTTP agent used to manage HTTP(s) connections.
   * @param {Core.Fetch} [opts.fetch] - Specify a custom `fetch` function implementation.
   * @param {number} [opts.maxRetries=2] - The maximum number of times the client will retry a request.
   * @param {Core.Headers} opts.defaultHeaders - Default headers to include with every request to the API.
   * @param {Core.DefaultQuery} opts.defaultQuery - Default query parameters to include with every request to the API.
   * @param {boolean} [opts.dangerouslyAllowBrowser=false] - By default, client-side use of this library is not allowed, as it risks exposing your secret API credentials to attackers.
   */
  constructor({ baseURL = readEnv("ANTHROPIC_BASE_URL"), apiKey = ((_a2) => (_a2 = readEnv("ANTHROPIC_API_KEY")) != null ? _a2 : null)(), authToken = ((_b) => (_b = readEnv("ANTHROPIC_AUTH_TOKEN")) != null ? _b : null)(), ...opts } = {}) {
    var _a3;
    const options = {
      apiKey,
      authToken,
      ...opts,
      baseURL: baseURL || `https://api.anthropic.com`
    };
    if (!options.dangerouslyAllowBrowser && isRunningInBrowser()) {
      throw new AnthropicError("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");
    }
    super({
      baseURL: options.baseURL,
      timeout: (_a3 = options.timeout) != null ? _a3 : 6e5,
      httpAgent: options.httpAgent,
      maxRetries: options.maxRetries,
      fetch: options.fetch
    });
    this.completions = new Completions(this);
    this.messages = new Messages2(this);
    this.models = new Models2(this);
    this.beta = new Beta(this);
    this._options = options;
    this.apiKey = apiKey;
    this.authToken = authToken;
  }
  defaultQuery() {
    return this._options.defaultQuery;
  }
  defaultHeaders(opts) {
    return {
      ...super.defaultHeaders(opts),
      ...this._options.dangerouslyAllowBrowser ? { "anthropic-dangerous-direct-browser-access": "true" } : void 0,
      "anthropic-version": "2023-06-01",
      ...this._options.defaultHeaders
    };
  }
  validateHeaders(headers, customHeaders) {
    if (this.apiKey && headers["x-api-key"]) {
      return;
    }
    if (customHeaders["x-api-key"] === null) {
      return;
    }
    if (this.authToken && headers["authorization"]) {
      return;
    }
    if (customHeaders["authorization"] === null) {
      return;
    }
    throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted');
  }
  authHeaders(opts) {
    const apiKeyAuth = this.apiKeyAuth(opts);
    const bearerAuth = this.bearerAuth(opts);
    if (apiKeyAuth != null && !isEmptyObj(apiKeyAuth)) {
      return apiKeyAuth;
    }
    if (bearerAuth != null && !isEmptyObj(bearerAuth)) {
      return bearerAuth;
    }
    return {};
  }
  apiKeyAuth(opts) {
    if (this.apiKey == null) {
      return {};
    }
    return { "X-Api-Key": this.apiKey };
  }
  bearerAuth(opts) {
    if (this.authToken == null) {
      return {};
    }
    return { Authorization: `Bearer ${this.authToken}` };
  }
};
_a = Anthropic;
Anthropic.Anthropic = _a;
Anthropic.HUMAN_PROMPT = "\n\nHuman:";
Anthropic.AI_PROMPT = "\n\nAssistant:";
Anthropic.DEFAULT_TIMEOUT = 6e5;
Anthropic.AnthropicError = AnthropicError;
Anthropic.APIError = APIError;
Anthropic.APIConnectionError = APIConnectionError;
Anthropic.APIConnectionTimeoutError = APIConnectionTimeoutError;
Anthropic.APIUserAbortError = APIUserAbortError;
Anthropic.NotFoundError = NotFoundError;
Anthropic.ConflictError = ConflictError;
Anthropic.RateLimitError = RateLimitError;
Anthropic.BadRequestError = BadRequestError;
Anthropic.AuthenticationError = AuthenticationError;
Anthropic.InternalServerError = InternalServerError;
Anthropic.PermissionDeniedError = PermissionDeniedError;
Anthropic.UnprocessableEntityError = UnprocessableEntityError;
Anthropic.toFile = toFile;
Anthropic.fileFromPath = fileFromPath;
Anthropic.Completions = Completions;
Anthropic.Messages = Messages2;
Anthropic.Models = Models2;
Anthropic.ModelInfosPage = ModelInfosPage;
Anthropic.Beta = Beta;
var { HUMAN_PROMPT, AI_PROMPT } = Anthropic;
var sdk_default = Anthropic;

// providers/anthropic.ts
var MODEL_CONTEXT_WINDOWS = {
  "claude-3-opus-20240229": 2e5,
  "claude-3-sonnet-20240229": 2e5,
  "claude-3-haiku-20240307": 2e5
};
function estimateTokenCount(messages) {
  const CHARS_PER_TOKEN = 4;
  const totalChars = messages.reduce((total, msg) => {
    return total + msg.content.length;
  }, 0);
  return Math.ceil(totalChars / CHARS_PER_TOKEN);
}
var AnthropicProvider = class extends BaseProvider {
  constructor(apiKey, model = "claude-3-sonnet-20240229") {
    super();
    __publicField(this, "apiKey");
    __publicField(this, "baseUrl", "https://api.anthropic.com/v1");
    __publicField(this, "model");
    __publicField(this, "client");
    this.apiKey = apiKey;
    this.model = model;
    this.client = new sdk_default({
      apiKey: this.apiKey,
      dangerouslyAllowBrowser: true
      // Required for browser environments
    });
  }
  /**
   * Get a completion from Anthropic
   * 
   * Sends the conversation to Anthropic and streams back the response
   * using the official SDK's streaming support.
   * 
   * Automatically adjusts max_tokens if the request would exceed the model's context window.
   * 
   * @param messages - The conversation history
   * @param options - Settings for this completion
   */
  async getCompletion(messages, options) {
    var _a2, _b, _c, _d;
    try {
      const contextWindow = (_a2 = MODEL_CONTEXT_WINDOWS[this.model]) != null ? _a2 : 2e5;
      const inputTokens = estimateTokenCount(messages);
      let maxTokens = (_b = options.maxTokens) != null ? _b : 1e3;
      if (inputTokens + maxTokens > contextWindow) {
        const adjustedMaxTokens = contextWindow - inputTokens;
        if (adjustedMaxTokens <= 0) {
          throw new ProviderError(
            "invalid_request" /* InvalidRequest */,
            `Input is too long for ${this.model}'s context window. Estimated input tokens: ${inputTokens}, context window: ${contextWindow}`
          );
        }
        console.log(
          `Adjusting max_tokens from ${maxTokens} to ${adjustedMaxTokens} to fit within ${this.model}'s context window`
        );
        maxTokens = adjustedMaxTokens;
      }
      const { systemPrompt, anthropicMessages } = this.formatMessages(messages);
      const requestParams = {
        model: this.model,
        messages: anthropicMessages,
        temperature: (_c = options.temperature) != null ? _c : 0.7,
        max_tokens: maxTokens,
        stream: true
      };
      if (systemPrompt) {
        requestParams.system = systemPrompt;
      }
      const stream = await this.client.messages.create(requestParams);
      try {
        if (stream && typeof stream === "object") {
          if (stream.on && typeof stream.on === "function") {
            await new Promise((resolve, reject) => {
              stream.on("content_block_delta", (chunk) => {
                var _a3;
                if (((_a3 = chunk.delta) == null ? void 0 : _a3.type) === "text_delta" && options.streamCallback) {
                  options.streamCallback(chunk.delta.text);
                }
              });
              stream.on("end", resolve);
              stream.on("error", reject);
            });
          } else if (Symbol.asyncIterator in stream) {
            for await (const chunk of stream) {
              if (chunk.type === "content_block_delta" && ((_d = chunk.delta) == null ? void 0 : _d.type) === "text_delta" && options.streamCallback) {
                options.streamCallback(chunk.delta.text);
              }
            }
          } else if (options.streamCallback) {
            console.warn("Anthropic response is not a stream, handling as regular response");
            if ("content" in stream && typeof stream.content === "string") {
              options.streamCallback(stream.content);
            }
          }
        }
      } catch (streamError) {
        console.error("Error processing Anthropic stream:", streamError);
        throw streamError;
      }
    } catch (error) {
      if (error instanceof ProviderError) {
        throw error;
      }
      if (error.name === "AbortError") {
        console.log("Anthropic stream was aborted");
      } else {
        console.error("Error calling Anthropic:", error);
        throw error;
      }
    }
  }
  /**
   * Get available Anthropic models
   * 
   * Returns the list of supported Claude models.
   * Note: Anthropic doesn't have a models endpoint, so we return known models.
   * This list is based on the models defined in MODEL_CONTEXT_WINDOWS.
   * 
   * @returns List of available model names
   */
  async getAvailableModels() {
    try {
      return Object.keys(MODEL_CONTEXT_WINDOWS);
    } catch (error) {
      console.error("Error getting Anthropic models:", error);
      throw error;
    }
  }
  /**
   * Format messages for Anthropic API
   * 
   * Converts from the plugin's Message format to Anthropic's expected format.
   * Handles system messages specially as Anthropic has a different format.
   * 
   * @param messages - Array of messages to format
   * @returns Formatted messages and system prompt for Anthropic API
   */
  formatMessages(messages) {
    const systemMessages = messages.filter((msg) => msg.role === "system");
    const nonSystemMessages = messages.filter((msg) => msg.role !== "system");
    const systemPrompt = systemMessages.length > 0 ? systemMessages.map((msg) => msg.content).join("\n\n") : void 0;
    const anthropicMessages = nonSystemMessages.map((msg) => {
      const role = msg.role === "user" || msg.role === "assistant" ? msg.role : "user";
      return { role, content: msg.content };
    });
    return { systemPrompt, anthropicMessages };
  }
  /**
   * Test connection to Anthropic
   * 
   * Verifies the API key works by attempting a simple completion.
   * 
   * @returns Test results including success/failure
   */
  async testConnection() {
    try {
      await this.client.messages.create({
        model: this.model,
        messages: [{ role: "user", content: "Hi" }],
        max_tokens: 1
      });
      const models = await this.getAvailableModels();
      return {
        success: true,
        message: "Successfully connected to Anthropic!",
        models
      };
    } catch (error) {
      return this.createErrorResponse(error);
    }
  }
};

// providers/openai.ts
var OpenAIProvider = class extends BaseProvider {
  constructor(apiKey, model = "gpt-4") {
    super();
    __publicField(this, "apiKey");
    __publicField(this, "baseUrl", "https://api.openai.com/v1");
    __publicField(this, "model");
    this.apiKey = apiKey;
    this.model = model;
  }
  /**
   * Get a completion from OpenAI
   * 
   * Sends the conversation to OpenAI and streams back the response.
   * 
   * @param messages - The conversation history
   * @param options - Settings for this completion
   */
  async getCompletion(messages, options) {
    var _a2, _b, _c, _d, _e, _f;
    try {
      const response = await fetch(`${this.baseUrl}/chat/completions`, {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${this.apiKey}`,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          model: this.model,
          messages,
          temperature: (_a2 = options.temperature) != null ? _a2 : 0.7,
          max_tokens: (_b = options.maxTokens) != null ? _b : 1e3,
          stream: true
        }),
        signal: (_c = options.abortController) == null ? void 0 : _c.signal
      });
      if (!response.ok) {
        throw this.handleHttpError(response);
      }
      const reader = (_d = response.body) == null ? void 0 : _d.getReader();
      const decoder = new TextDecoder("utf-8");
      let buffer = "";
      while (true) {
        const { done, value } = await (reader == null ? void 0 : reader.read()) || { done: true, value: void 0 };
        if (done) break;
        buffer += decoder.decode(value, { stream: true });
        const lines = buffer.split("\n");
        buffer = lines.pop() || "";
        for (const line of lines) {
          if (line.startsWith("data: ") && line !== "data: [DONE]") {
            try {
              const data = JSON.parse(line.slice(6));
              const content = (_f = (_e = data.choices[0]) == null ? void 0 : _e.delta) == null ? void 0 : _f.content;
              if (content && options.streamCallback) {
                options.streamCallback(content);
              }
            } catch (e) {
              console.warn("Error parsing OpenAI response chunk:", e);
            }
          }
        }
      }
    } catch (error) {
      if (error instanceof ProviderError) {
        throw error;
      }
      if (error.name === "AbortError") {
        console.log("OpenAI stream was aborted");
      } else {
        console.error("Error calling OpenAI:", error);
        throw error;
      }
    }
  }
  /**
   * Get available OpenAI models
   * 
   * Fetches the list of models from OpenAI's API.
   * Filters to only include chat models (GPT-3.5, GPT-4, etc.)
   * 
   * @returns List of available model names
   */
  async getAvailableModels() {
    try {
      const response = await fetch(`${this.baseUrl}/models`, {
        method: "GET",
        headers: {
          "Authorization": `Bearer ${this.apiKey}`,
          "Content-Type": "application/json"
        }
      });
      if (!response.ok) {
        throw this.handleHttpError(response);
      }
      const data = await response.json();
      return data.data.map((model) => model.id).filter((id) => id.startsWith("gpt-"));
    } catch (error) {
      console.error("Error fetching OpenAI models:", error);
      throw error;
    }
  }
  /**
   * Test connection to OpenAI
   * 
   * Verifies the API key works by attempting to list models.
   * 
   * @returns Test results including success/failure and available models
   */
  async testConnection() {
    try {
      const models = await this.getAvailableModels();
      return {
        success: true,
        message: `Successfully connected to OpenAI! Found ${models.length} available models.`,
        models
      };
    } catch (error) {
      return this.createErrorResponse(error);
    }
  }
};

// providers/gemini.ts
var GeminiProvider = class extends BaseProvider {
  constructor(apiKey, model = "gemini-pro") {
    super();
    __publicField(this, "apiKey");
    __publicField(this, "baseUrl", "https://generativelanguage.googleapis.com/v1");
    __publicField(this, "model");
    this.apiKey = apiKey;
    this.model = model;
  }
  /**
   * Get a completion from Google Gemini
   * 
   * Sends the conversation to Gemini and streams back the response.
   * 
   * @param messages - The conversation history
   * @param options - Settings for this completion
   */
  async getCompletion(messages, options) {
    var _a2, _b, _c, _d, _e, _f, _g, _h;
    try {
      const formattedMessages = this.formatMessages(messages);
      const url = `${this.baseUrl}/models/${this.model}:generateContent?key=${this.apiKey}`;
      const response = await fetch(url, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          contents: formattedMessages,
          generationConfig: {
            temperature: (_a2 = options.temperature) != null ? _a2 : 0.7,
            maxOutputTokens: (_b = options.maxTokens) != null ? _b : 1e3
          }
        }),
        signal: (_c = options.abortController) == null ? void 0 : _c.signal
      });
      if (!response.ok) {
        throw this.handleHttpError(response);
      }
      const data = await response.json();
      console.log("Gemini response:", JSON.stringify(data));
      const text = (_h = (_g = (_f = (_e = (_d = data.candidates) == null ? void 0 : _d[0]) == null ? void 0 : _e.content) == null ? void 0 : _f.parts) == null ? void 0 : _g[0]) == null ? void 0 : _h.text;
      if (text && options.streamCallback) {
        options.streamCallback(text);
      } else {
        console.warn("No text found in Gemini response:", JSON.stringify(data));
      }
    } catch (error) {
      if (error instanceof ProviderError) {
        throw error;
      }
      if (error.name === "AbortError") {
        console.log("Gemini request was aborted");
      } else {
        console.error("Error calling Gemini:", error);
        throw error;
      }
    }
  }
  /**
   * Get available Gemini models
   * 
   * Fetches the list of available models from Google's API.
   * Filters to only include Gemini models.
   * 
   * @returns List of available model names
   */
  async getAvailableModels() {
    try {
      const response = await fetch(`${this.baseUrl}/models?key=${this.apiKey}`, {
        method: "GET",
        headers: {
          "Content-Type": "application/json"
        }
      });
      if (!response.ok) {
        throw this.handleHttpError(response);
      }
      const data = await response.json();
      return data.models.map((model) => model.name.split("/").pop()).filter((id) => id.startsWith("gemini-"));
    } catch (error) {
      console.error("Error fetching Gemini models:", error);
      throw error;
    }
  }
  /**
   * Test connection to Gemini
   * 
   * Verifies the API key works by attempting to list models.
   * 
   * @returns Test results including success/failure and available models
   */
  async testConnection() {
    try {
      const models = await this.getAvailableModels();
      return {
        success: true,
        message: `Successfully connected to Google Gemini! Found ${models.length} available models.`,
        models
      };
    } catch (error) {
      return this.createErrorResponse(error);
    }
  }
  /**
   * Format messages for Gemini API
   * 
   * Converts from the plugin's Message format to Gemini's expected format.
   * 
   * @param messages - Array of messages to format
   * @returns Formatted messages for Gemini API
   */
  formatMessages(messages) {
    const geminiMessages = [];
    const systemMessages = messages.filter((msg) => msg.role === "system");
    const nonSystemMessages = messages.filter((msg) => msg.role !== "system");
    for (const message of systemMessages) {
      geminiMessages.push({
        role: "user",
        parts: [{ text: message.content }]
      });
    }
    for (const message of nonSystemMessages) {
      const role = message.role === "assistant" ? "model" : "user";
      geminiMessages.push({
        role,
        parts: [{ text: message.content }]
      });
    }
    return geminiMessages;
  }
};

// providers/ollama.ts
var OllamaProvider = class extends BaseProvider {
  constructor(serverUrl = "http://localhost:11434", model = "llama2") {
    super();
    __publicField(this, "apiKey", "");
    // Not used for Ollama
    __publicField(this, "baseUrl");
    __publicField(this, "model");
    this.baseUrl = serverUrl.replace(/\/$/, "");
    this.model = model;
  }
  /**
   * Convert messages to Ollama format
   * 
   * @param messages - Standard message format
   * @returns Prompt string in Ollama format
   */
  convertToOllamaFormat(messages) {
    return messages.map((msg) => {
      if (msg.role === "system") {
        return `System: ${msg.content}

`;
      }
      return `${msg.role === "user" ? "Human" : "Assistant"}: ${msg.content}

`;
    }).join("") + "Assistant:";
  }
  /**
   * Get a completion from Ollama
   * 
   * Sends the conversation to the local Ollama server and streams back the response.
   * 
   * @param messages - The conversation history
   * @param options - Settings for this completion
   */
  async getCompletion(messages, options) {
    var _a2, _b, _c, _d;
    try {
      const prompt = this.convertToOllamaFormat(messages);
      const response = await fetch(`${this.baseUrl}/api/generate`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          model: this.model,
          prompt,
          stream: true,
          options: {
            temperature: (_a2 = options.temperature) != null ? _a2 : 0.7,
            num_predict: (_b = options.maxTokens) != null ? _b : 1e3
          }
        }),
        signal: (_c = options.abortController) == null ? void 0 : _c.signal
      });
      if (!response.ok) {
        throw this.handleHttpError(response);
      }
      const reader = (_d = response.body) == null ? void 0 : _d.getReader();
      const decoder = new TextDecoder("utf-8");
      let buffer = "";
      while (true) {
        const { done, value } = await (reader == null ? void 0 : reader.read()) || { done: true, value: void 0 };
        if (done) break;
        buffer += decoder.decode(value, { stream: true });
        const lines = buffer.split("\n");
        buffer = lines.pop() || "";
        for (const line of lines) {
          if (line.trim()) {
            try {
              const data = JSON.parse(line);
              if (data.response && options.streamCallback) {
                options.streamCallback(data.response);
              }
            } catch (e) {
              console.warn("Error parsing Ollama response chunk:", e);
            }
          }
        }
      }
    } catch (error) {
      if (error instanceof ProviderError) {
        throw error;
      }
      if (error.name === "AbortError") {
        console.log("Ollama stream was aborted");
      } else {
        console.error("Error calling Ollama:", error);
        throw error;
      }
    }
  }
  /**
   * Get available Ollama models
   * 
   * Fetches the list of models installed on the local Ollama server.
   * 
   * @returns List of available model names
   */
  async getAvailableModels() {
    var _a2;
    try {
      const response = await fetch(`${this.baseUrl}/api/tags`);
      if (!response.ok) {
        throw this.handleHttpError(response);
      }
      const data = await response.json();
      return ((_a2 = data.models) == null ? void 0 : _a2.map((model) => model.name)) || [];
    } catch (error) {
      console.error("Error fetching Ollama models:", error);
      throw error;
    }
  }
  /**
   * Test connection to Ollama
   * 
   * Verifies the Ollama server is running and accessible.
   * Also checks if any models are installed.
   * 
   * @returns Test results including success/failure and available models
   */
  async testConnection() {
    try {
      const models = await this.getAvailableModels();
      if (models.length === 0) {
        return {
          success: false,
          message: 'Connected to Ollama server, but no models are installed. Use "ollama pull model-name" to install models.',
          models: []
        };
      }
      return {
        success: true,
        message: `Successfully connected to Ollama! Found ${models.length} installed models.`,
        models
      };
    } catch (error) {
      return this.createErrorResponse(error);
    }
  }
};

// providers/index.ts
function createProvider(settings) {
  switch (settings.provider) {
    case "openai":
      return new OpenAIProvider(
        settings.openaiSettings.apiKey,
        settings.openaiSettings.model
      );
    case "anthropic":
      return new AnthropicProvider(
        settings.anthropicSettings.apiKey,
        settings.anthropicSettings.model
      );
    case "gemini":
      return new GeminiProvider(
        settings.geminiSettings.apiKey,
        settings.geminiSettings.model
      );
    case "ollama":
      return new OllamaProvider(
        settings.ollamaSettings.serverUrl,
        settings.ollamaSettings.model
      );
    default:
      throw new Error(`Invalid provider type: ${settings.provider}`);
  }
}

// src/settings.ts
var import_obsidian = require("obsidian");
var MyPluginSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    __publicField(this, "plugin");
    this.plugin = plugin;
  }
  /**
   * Display the settings tab
   * 
   * Shows only the auto-open setting here since all other settings
   * are managed in the model settings view for better organization.
   */
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "AI Assistant Settings" });
    containerEl.createEl("h3", { text: "API Keys" });
    new import_obsidian.Setting(containerEl).setName("OpenAI API Key").setDesc("Enter your OpenAI API key").addText((text) => text.setPlaceholder("Enter your API key").setValue(this.plugin.settings.openaiSettings.apiKey).onChange(async (value) => {
      this.plugin.settings.openaiSettings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Anthropic API Key").setDesc("Enter your Anthropic API key").addText((text) => text.setPlaceholder("Enter your API key").setValue(this.plugin.settings.anthropicSettings.apiKey).onChange(async (value) => {
      this.plugin.settings.anthropicSettings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Google API Key").setDesc("Enter your Google API key").addText((text) => text.setPlaceholder("Enter your API key").setValue(this.plugin.settings.geminiSettings.apiKey).onChange(async (value) => {
      this.plugin.settings.geminiSettings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Ollama Server URL").setDesc("Enter your Ollama server URL (default: http://localhost:11434)").addText((text) => text.setPlaceholder("http://localhost:11434").setValue(this.plugin.settings.ollamaSettings.serverUrl).onChange(async (value) => {
      this.plugin.settings.ollamaSettings.serverUrl = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h3", { text: "Model Settings" });
    new import_obsidian.Setting(containerEl).setName("Auto-open Model Settings").setDesc("Automatically open model settings when Obsidian starts").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoOpenModelSettings).onChange(async (value) => {
      this.plugin.settings.autoOpenModelSettings = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Open Model Settings").setDesc("Open the model settings view").addButton((button) => button.setButtonText("Open").onClick(() => {
      this.plugin.activateView();
    }));
    new import_obsidian.Setting(containerEl).setName("Chat Separator").setDesc("The string used to separate chat messages.").addText((text) => {
      var _a2;
      text.setPlaceholder("----").setValue((_a2 = this.plugin.settings.chatSeparator) != null ? _a2 : "").onChange(async (value) => {
        this.plugin.settings.chatSeparator = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Chat Start String").setDesc("The string that indicates where to start taking the note for context.").addText((text) => {
      var _a2;
      text.setPlaceholder("===START===").setValue((_a2 = this.plugin.settings.chatStartString) != null ? _a2 : "").onChange(async (value) => {
        this.plugin.settings.chatStartString = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Chat End String").setDesc("The string that indicates where to end taking the note for context.").addText((text) => {
      var _a2;
      text.setPlaceholder("===END===").setValue((_a2 = this.plugin.settings.chatEndString) != null ? _a2 : "").onChange(async (value) => {
        this.plugin.settings.chatEndString = value;
        await this.plugin.saveSettings();
      });
    });
  }
};

// src/components/chat.ts
var import_obsidian2 = require("obsidian");
var VIEW_TYPE_CHAT = "chat-view";
var SettingsModal = class extends import_obsidian2.Modal {
  constructor(app, plugin) {
    super(app);
    __publicField(this, "plugin");
    this.plugin = plugin;
    this.titleEl.setText("AI Model Settings");
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("ai-settings-modal");
    contentEl.createEl("h3", { text: "Session Management" });
    new import_obsidian2.Setting(contentEl).setName("Auto-save Sessions").setDesc("Automatically save chat messages to sessions").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoSaveSessions).onChange(async (value) => {
      this.plugin.settings.autoSaveSessions = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Maximum Sessions").setDesc("Maximum number of chat sessions to keep (oldest will be removed)").addSlider((slider) => slider.setLimits(1, 50, 1).setValue(this.plugin.settings.maxSessions).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.maxSessions = value;
      if (this.plugin.settings.sessions.length > value) {
        this.plugin.settings.sessions = this.plugin.settings.sessions.sort((a, b) => b.lastUpdated - a.lastUpdated).slice(0, value);
      }
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("AI Provider").setDesc("Choose which AI provider to use").addDropdown((dropdown) => {
      dropdown.addOption("openai", "OpenAI (ChatGPT)").addOption("anthropic", "Anthropic (Claude)").addOption("gemini", "Google (Gemini)").addOption("ollama", "Ollama (Local AI)").setValue(this.plugin.settings.provider).onChange(async (value) => {
        this.plugin.settings.provider = value;
        await this.plugin.saveSettings();
        this.onOpen();
      });
    });
    new import_obsidian2.Setting(contentEl).setName("System Message").setDesc("Set the system message for the AI").addTextArea((text) => text.setPlaceholder("You are a helpful assistant.").setValue(this.plugin.settings.systemMessage).onChange(async (value) => {
      this.plugin.settings.systemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Include Date with System Message").setDesc("Add the current date to the system message").addToggle((toggle) => toggle.setValue(this.plugin.settings.includeDateWithSystemMessage).onChange(async (value) => {
      this.plugin.settings.includeDateWithSystemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Include Time with System Message").setDesc("Add the current time along with the date to the system message").addToggle((toggle) => toggle.setValue(this.plugin.settings.includeTimeWithSystemMessage).onChange(async (value) => {
      this.plugin.settings.includeTimeWithSystemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Enable Obsidian Links").setDesc("Read Obsidian links in messages using [[filename]] syntax").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableObsidianLinks).onChange(async (value) => {
      this.plugin.settings.enableObsidianLinks = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Enable Context Notes").setDesc("Attach specified note content to chat messages").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableContextNotes).onChange(async (value) => {
      this.plugin.settings.enableContextNotes = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Context Notes").setDesc("Notes to attach as context (supports [[filename]] and [[filename#header]] syntax)").addTextArea((text) => {
      text.setPlaceholder("[[Note Name]]\n[[Another Note#Header]]").setValue(this.plugin.settings.contextNotes || "").onChange(async (value) => {
        this.plugin.settings.contextNotes = value;
        await this.plugin.saveSettings();
      });
      text.inputEl.rows = 4;
    });
    new import_obsidian2.Setting(contentEl).setName("Enable Streaming").setDesc("Enable or disable streaming for completions").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableStreaming).onChange(async (value) => {
      this.plugin.settings.enableStreaming = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Temperature").setDesc("Set the randomness of the model's output (0-1)").addSlider((slider) => slider.setLimits(0, 1, 0.1).setValue(this.plugin.settings.temperature).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.temperature = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Max Tokens").setDesc("Set the maximum length of the model's output").addText((text) => text.setPlaceholder("4000").setValue(String(this.plugin.settings.maxTokens)).onChange(async (value) => {
      const numValue = Number(value);
      if (!isNaN(numValue)) {
        this.plugin.settings.maxTokens = numValue;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(contentEl).setName("Reference Current Note").setDesc("Include the content of the current note in the chat context.").addToggle((toggle) => toggle.setValue(this.plugin.settings.referenceCurrentNote).onChange(async (value) => {
      this.plugin.settings.referenceCurrentNote = value;
      await this.plugin.saveSettings();
    }));
    contentEl.createEl("h3", { text: `${this.plugin.settings.provider.toUpperCase()} Settings` });
    switch (this.plugin.settings.provider) {
      case "openai": {
        const settings = this.plugin.settings.openaiSettings;
        new import_obsidian2.Setting(contentEl).setName("Model").setDesc("Choose the OpenAI model to use").addDropdown((dropdown) => {
          for (const model of settings.availableModels) {
            dropdown.addOption(model, model);
          }
          dropdown.setValue(settings.model).onChange(async (value) => {
            settings.model = value;
            await this.plugin.saveSettings();
          });
        });
        break;
      }
      case "anthropic": {
        const settings = this.plugin.settings.anthropicSettings;
        new import_obsidian2.Setting(contentEl).setName("Model").setDesc("Choose the Anthropic model to use").addDropdown((dropdown) => {
          for (const model of settings.availableModels) {
            dropdown.addOption(model, model);
          }
          dropdown.setValue(settings.model).onChange(async (value) => {
            settings.model = value;
            await this.plugin.saveSettings();
          });
        });
        break;
      }
      case "gemini": {
        const settings = this.plugin.settings.geminiSettings;
        new import_obsidian2.Setting(contentEl).setName("Model").setDesc("Choose the Gemini model to use").addDropdown((dropdown) => {
          for (const model of settings.availableModels) {
            dropdown.addOption(model, model);
          }
          dropdown.setValue(settings.model).onChange(async (value) => {
            settings.model = value;
            await this.plugin.saveSettings();
          });
        });
        break;
      }
      case "ollama": {
        const settings = this.plugin.settings.ollamaSettings;
        new import_obsidian2.Setting(contentEl).setName("Model").setDesc("Choose the Ollama model to use").addDropdown((dropdown) => {
          for (const model of settings.availableModels) {
            dropdown.addOption(model, model);
          }
          dropdown.setValue(settings.model).onChange(async (value) => {
            settings.model = value;
            await this.plugin.saveSettings();
          });
        });
        break;
      }
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmationModal = class extends import_obsidian2.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    __publicField(this, "onConfirm");
    __publicField(this, "message");
    this.titleEl.setText(title);
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("p", { text: this.message });
    const buttonContainer = contentEl.createDiv("modal-button-container");
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.marginTop = "16px";
    buttonContainer.createEl("button", { text: "Cancel" }).addEventListener("click", () => {
      this.onConfirm(false);
      this.close();
    });
    const confirmButton = buttonContainer.createEl("button", {
      text: "Delete",
      cls: "mod-warning"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm(true);
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ChatView = class extends import_obsidian2.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    __publicField(this, "plugin");
    __publicField(this, "messagesContainer");
    __publicField(this, "inputContainer");
    __publicField(this, "activeStream", null);
    __publicField(this, "settingsContainer", null);
    this.plugin = plugin;
  }
  getViewType() {
    return VIEW_TYPE_CHAT;
  }
  getDisplayText() {
    return "AI Chat";
  }
  getIcon() {
    return "message-square";
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("ai-chat-view");
    const settingsButton = document.createElement("button");
    settingsButton.setText("Settings");
    settingsButton.setAttribute("aria-label", "Toggle model settings");
    this.messagesContainer = contentEl.createDiv("ai-chat-messages");
    this.messagesContainer.style.flex = "1";
    this.messagesContainer.style.overflow = "auto";
    this.messagesContainer.style.padding = "16px";
    this.inputContainer = contentEl.createDiv("ai-chat-input-container");
    this.inputContainer.style.borderTop = "1px solid var(--background-modifier-border)";
    this.inputContainer.style.padding = "16px";
    const textarea = this.inputContainer.createEl("textarea", {
      cls: "ai-chat-input",
      attr: {
        placeholder: "Type your message...",
        rows: "3"
      }
    });
    textarea.style.width = "100%";
    textarea.style.resize = "none";
    textarea.style.border = "1px solid var(--background-modifier-border)";
    textarea.style.borderRadius = "4px";
    textarea.style.padding = "8px";
    textarea.style.backgroundColor = "var(--background-primary)";
    textarea.style.color = "var(--text-normal)";
    const buttonContainer = this.inputContainer.createDiv("ai-chat-buttons");
    buttonContainer.style.marginTop = "8px";
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.justifyContent = "flex-end";
    const sendButton = buttonContainer.createEl("button", {
      text: "Send",
      cls: "mod-cta"
    });
    const stopButton = buttonContainer.createEl("button", {
      text: "Stop"
    });
    stopButton.style.display = "none";
    const copyAllButton = buttonContainer.createEl("button", {
      text: "Copy All"
    });
    copyAllButton.addEventListener("click", async () => {
      const messages = this.messagesContainer.querySelectorAll(".ai-chat-message");
      let chatContent = "";
      messages.forEach((el, index) => {
        var _a2;
        const content = ((_a2 = el.querySelector(".message-content")) == null ? void 0 : _a2.textContent) || "";
        chatContent += content;
        if (index < messages.length - 1) {
          chatContent += "\n\n" + this.plugin.settings.chatSeparator + "\n\n";
        }
      });
      await this.copyToClipboard(chatContent);
    });
    const clearButton = buttonContainer.createEl("button", {
      text: "Clear Chat"
    });
    const sendMessage = async () => {
      const content = textarea.value.trim();
      if (!content) return;
      textarea.disabled = true;
      sendButton.style.display = "none";
      stopButton.style.display = "block";
      this.addMessage("user", content);
      textarea.value = "";
      this.activeStream = new AbortController();
      try {
        const provider = createProvider(this.plugin.settings);
        let systemMessage = this.plugin.getSystemMessage();
        if (this.plugin.settings.enableContextNotes && this.plugin.settings.contextNotes) {
          const contextContent = await this.plugin.getContextNotesContent(this.plugin.settings.contextNotes);
          systemMessage += `

Context Notes:
${contextContent}`;
        }
        const messages = [
          { role: "system", content: systemMessage }
        ];
        if (this.plugin.settings.referenceCurrentNote) {
          const currentFile = this.app.workspace.getActiveFile();
          if (currentFile) {
            const currentNoteContent = await this.app.vault.cachedRead(currentFile);
            messages.push({
              role: "system",
              content: `Here is the content of the current note:

${currentNoteContent}`
            });
          }
        }
        const messageElements = this.messagesContainer.querySelectorAll(".ai-chat-message");
        messageElements.forEach((el) => {
          var _a2;
          const role = el.classList.contains("user") ? "user" : "assistant";
          const content2 = ((_a2 = el.querySelector(".message-content")) == null ? void 0 : _a2.textContent) || "";
          messages.push({ role, content: content2 });
        });
        const assistantContainer = this.createMessageElement("assistant", "");
        this.messagesContainer.appendChild(assistantContainer);
        this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
        let responseContent = "";
        await provider.getCompletion(
          messages,
          {
            temperature: this.plugin.settings.temperature,
            maxTokens: this.plugin.settings.maxTokens,
            streamCallback: async (chunk) => {
              responseContent += chunk;
              const contentEl2 = assistantContainer.querySelector(".message-content");
              if (contentEl2) {
                assistantContainer.dataset.rawContent = responseContent;
                contentEl2.empty();
                await import_obsidian2.MarkdownRenderer.render(
                  this.app,
                  responseContent,
                  contentEl2,
                  "",
                  this
                );
                this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
              }
            },
            abortController: this.activeStream
          }
        );
      } catch (error) {
        if (error.name !== "AbortError") {
          new import_obsidian2.Notice(`Error: ${error.message}`);
          this.addMessage("assistant", `Error: ${error.message}`);
        }
      } finally {
        textarea.disabled = false;
        textarea.focus();
        stopButton.style.display = "none";
        sendButton.style.display = "block";
        this.activeStream = null;
      }
    };
    textarea.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });
    sendButton.addEventListener("click", sendMessage);
    stopButton.addEventListener("click", () => {
      if (this.activeStream) {
        this.activeStream.abort();
        this.activeStream = null;
        textarea.disabled = false;
        textarea.focus();
        stopButton.style.display = "none";
        sendButton.style.display = "block";
      }
    });
    clearButton.addEventListener("click", () => {
      this.messagesContainer.empty();
    });
    buttonContainer.insertBefore(settingsButton, clearButton);
    settingsButton.addEventListener("click", () => {
      const settingsModal = new SettingsModal(this.app, this.plugin);
      settingsModal.open();
    });
    this.addMessage("assistant", "Hello! How can I help you today?");
  }
  createActionButton(label, tooltip, callback) {
    const button = document.createElement("button");
    button.addClass("ai-chat-action-button");
    button.setAttribute("aria-label", tooltip);
    const labelEl = document.createElement("span");
    labelEl.textContent = label;
    button.appendChild(labelEl);
    button.addEventListener("click", callback);
    return button;
  }
  async copyToClipboard(text) {
    try {
      await navigator.clipboard.writeText(text);
      new import_obsidian2.Notice("Copied to clipboard");
    } catch (error) {
      new import_obsidian2.Notice("Failed to copy to clipboard");
      console.error("Clipboard error:", error);
    }
  }
  createMessageElement(role, content) {
    const messageEl = document.createElement("div");
    messageEl.addClass("ai-chat-message", role);
    messageEl.style.marginBottom = "16px";
    messageEl.style.padding = "12px";
    messageEl.style.borderRadius = "8px";
    messageEl.style.backgroundColor = role === "user" ? "var(--background-modifier-hover)" : "var(--background-secondary)";
    const messageContainer = messageEl.createDiv("message-container");
    const contentEl = messageContainer.createDiv("message-content");
    contentEl.style.whiteSpace = "pre-wrap";
    messageEl.dataset.rawContent = content;
    import_obsidian2.MarkdownRenderer.render(
      this.app,
      content,
      contentEl,
      "",
      this
    ).catch((error) => {
      console.error("Markdown rendering error:", error);
      contentEl.textContent = content;
    });
    const actionsEl = messageContainer.createDiv("message-actions");
    actionsEl.style.display = "none";
    messageEl.addEventListener("mouseenter", () => {
      actionsEl.style.display = "flex";
    });
    messageEl.addEventListener("mouseleave", () => {
      actionsEl.style.display = "none";
    });
    actionsEl.style.flexWrap = "wrap";
    actionsEl.style.gap = "8px";
    actionsEl.style.marginTop = "8px";
    actionsEl.appendChild(this.createActionButton("Copy", "Copy message", () => {
      const currentContent = messageEl.dataset.rawContent || "";
      if (currentContent.trim() === "") {
        new import_obsidian2.Notice("No content to copy");
        return;
      }
      this.copyToClipboard(currentContent);
    }));
    actionsEl.appendChild(this.createActionButton("Edit", "Edit message", () => {
      const wasEditing = contentEl.hasClass("editing");
      if (!wasEditing) {
        const textarea = document.createElement("textarea");
        textarea.value = messageEl.dataset.rawContent || "";
        textarea.style.width = "100%";
        textarea.style.height = `${contentEl.offsetHeight}px`;
        textarea.style.minHeight = "100px";
        contentEl.empty();
        contentEl.appendChild(textarea);
        textarea.focus();
        contentEl.addClass("editing");
      } else {
        const textarea = contentEl.querySelector("textarea");
        if (textarea) {
          const oldContent = messageEl.dataset.rawContent;
          const newContent = textarea.value;
          messageEl.dataset.rawContent = newContent;
          contentEl.empty();
          import_obsidian2.MarkdownRenderer.render(this.app, newContent, contentEl, "", this).catch((error) => {
            console.error("Markdown rendering error:", error);
            contentEl.textContent = newContent;
          });
          contentEl.removeClass("editing");
        }
      }
    }));
    actionsEl.appendChild(this.createActionButton("Delete", "Delete message", () => {
      const modal = new ConfirmationModal(
        this.app,
        "Delete message",
        "Are you sure you want to delete this message?",
        async (confirmed) => {
          if (confirmed) {
            messageEl.remove();
          }
        }
      );
      modal.open();
    }));
    const regenerateLabel = role === "assistant" ? "Regenerate" : "Regenerate Response";
    const regenerateTooltip = role === "assistant" ? "Regenerate this response" : "Regenerate AI response";
    actionsEl.appendChild(this.createActionButton(regenerateLabel, regenerateTooltip, () => {
      this.regenerateResponse(messageEl);
    }));
    messageContainer.appendChild(actionsEl);
    return messageEl;
  }
  addMessage(role, content) {
    const messageEl = this.createMessageElement(role, content);
    this.messagesContainer.appendChild(messageEl);
    this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
  }
  async onClose() {
    if (this.activeStream) {
      this.activeStream.abort();
      this.activeStream = null;
    }
  }
  createSettingsPanel() {
    const container = document.createElement("div");
    container.addClass("ai-chat-settings-panel");
    container.createEl("h3", { text: "AI Model Settings" });
    const providerContainer = container.createDiv();
    providerContainer.createEl("label", { text: "AI Provider" });
    const providerSelect = providerContainer.createEl("select");
    providerSelect.createEl("option", { value: "openai", text: "OpenAI (ChatGPT)" });
    providerSelect.createEl("option", { value: "anthropic", text: "Anthropic (Claude)" });
    providerSelect.createEl("option", { value: "gemini", text: "Google (Gemini)" });
    providerSelect.createEl("option", { value: "ollama", text: "Ollama (Local AI)" });
    providerSelect.value = this.plugin.settings.provider;
    providerSelect.addEventListener("change", async () => {
      this.plugin.settings.provider = providerSelect.value;
      await this.plugin.saveSettings();
      if (this.settingsContainer) {
        this.settingsContainer.replaceWith(this.createSettingsPanel());
      }
    });
    const systemMessageContainer = container.createDiv();
    systemMessageContainer.createEl("label", { text: "System Message" });
    const systemMessageInput = systemMessageContainer.createEl("textarea");
    systemMessageInput.value = this.plugin.settings.systemMessage;
    systemMessageInput.addEventListener("change", async () => {
      this.plugin.settings.systemMessage = systemMessageInput.value;
      await this.plugin.saveSettings();
    });
    const temperatureContainer = container.createDiv();
    temperatureContainer.createEl("label", { text: "Temperature" });
    const temperatureInput = temperatureContainer.createEl("input", { type: "range" });
    temperatureInput.min = "0";
    temperatureInput.max = "1";
    temperatureInput.step = "0.1";
    temperatureInput.value = String(this.plugin.settings.temperature);
    const temperatureValue = temperatureContainer.createSpan();
    temperatureValue.textContent = String(this.plugin.settings.temperature);
    temperatureInput.addEventListener("input", async () => {
      const value = Number(temperatureInput.value);
      temperatureValue.textContent = String(value);
      this.plugin.settings.temperature = value;
      await this.plugin.saveSettings();
    });
    const maxTokensContainer = container.createDiv();
    maxTokensContainer.createEl("label", { text: "Max Tokens" });
    const maxTokensInput = maxTokensContainer.createEl("input", { type: "number" });
    maxTokensInput.value = String(this.plugin.settings.maxTokens);
    maxTokensInput.addEventListener("change", async () => {
      const value = Number(maxTokensInput.value);
      if (!isNaN(value)) {
        this.plugin.settings.maxTokens = value;
        await this.plugin.saveSettings();
      }
    });
    const providerSettings = container.createDiv();
    providerSettings.createEl("h4", { text: `${this.plugin.settings.provider.toUpperCase()} Settings` });
    switch (this.plugin.settings.provider) {
      case "openai": {
        const settings = this.plugin.settings.openaiSettings;
        const modelSelect = providerSettings.createEl("select");
        settings.availableModels.forEach((model) => {
          modelSelect.createEl("option", { value: model, text: model });
        });
        modelSelect.value = settings.model;
        modelSelect.addEventListener("change", async () => {
          settings.model = modelSelect.value;
          await this.plugin.saveSettings();
        });
        break;
      }
      case "anthropic": {
        const settings = this.plugin.settings.anthropicSettings;
        const modelSelect = providerSettings.createEl("select");
        settings.availableModels.forEach((model) => {
          modelSelect.createEl("option", { value: model, text: model });
        });
        modelSelect.value = settings.model;
        modelSelect.addEventListener("change", async () => {
          settings.model = modelSelect.value;
          await this.plugin.saveSettings();
        });
        break;
      }
      case "gemini": {
        const settings = this.plugin.settings.geminiSettings;
        const modelSelect = providerSettings.createEl("select");
        settings.availableModels.forEach((model) => {
          modelSelect.createEl("option", { value: model, text: model });
        });
        modelSelect.value = settings.model;
        modelSelect.addEventListener("change", async () => {
          settings.model = modelSelect.value;
          await this.plugin.saveSettings();
        });
        break;
      }
      case "ollama": {
        const settings = this.plugin.settings.ollamaSettings;
        const modelSelect = providerSettings.createEl("select");
        settings.availableModels.forEach((model) => {
          modelSelect.createEl("option", { value: model, text: model });
        });
        modelSelect.value = settings.model;
        modelSelect.addEventListener("change", async () => {
          settings.model = modelSelect.value;
          await this.plugin.saveSettings();
        });
        break;
      }
    }
    return container;
  }
  async regenerateResponse(messageEl) {
    const textarea = this.inputContainer.querySelector("textarea");
    if (textarea) textarea.disabled = true;
    const messages = [
      { role: "system", content: this.plugin.getSystemMessage() }
    ];
    if (this.plugin.settings.enableContextNotes && this.plugin.settings.contextNotes) {
      const contextContent = await this.plugin.getContextNotesContent(this.plugin.settings.contextNotes);
      messages[0].content += `

Context Notes:
${contextContent}`;
    }
    const allMessages = Array.from(this.messagesContainer.querySelectorAll(".ai-chat-message"));
    const currentIndex = allMessages.indexOf(messageEl);
    for (let i = 0; i <= currentIndex; i++) {
      const el = allMessages[i];
      const role = el.classList.contains("user") ? "user" : "assistant";
      const content = el.dataset.rawContent || "";
      messages.push({ role, content });
    }
    let messageToReplace;
    if (messageEl.classList.contains("assistant")) {
      messageToReplace = messageEl;
    } else {
      messageToReplace = messageEl.nextElementSibling;
      if (!(messageToReplace == null ? void 0 : messageToReplace.classList.contains("assistant"))) {
        return;
      }
    }
    messageToReplace.remove();
    const assistantContainer = this.createMessageElement("assistant", "");
    if (messageEl.classList.contains("assistant")) {
      this.messagesContainer.insertBefore(assistantContainer, messageEl.nextSibling);
    } else {
      this.messagesContainer.insertBefore(assistantContainer, (messageToReplace == null ? void 0 : messageToReplace.nextSibling) || null);
    }
    this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
    this.activeStream = new AbortController();
    let responseContent = "";
    try {
      const provider = createProvider(this.plugin.settings);
      await provider.getCompletion(
        messages,
        {
          temperature: this.plugin.settings.temperature,
          maxTokens: this.plugin.settings.maxTokens,
          streamCallback: async (chunk) => {
            responseContent += chunk;
            const contentEl = assistantContainer.querySelector(".message-content");
            if (contentEl) {
              assistantContainer.dataset.rawContent = responseContent;
              contentEl.empty();
              await import_obsidian2.MarkdownRenderer.render(
                this.app,
                responseContent,
                contentEl,
                "",
                this
              );
              this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
            }
          },
          abortController: this.activeStream
        }
      );
    } catch (error) {
      if (error.name !== "AbortError") {
        new import_obsidian2.Notice(`Error: ${error.message}`);
        assistantContainer.remove();
      }
    } finally {
      if (textarea) {
        textarea.disabled = false;
        textarea.focus();
      }
      this.activeStream = null;
    }
  }
};

// src/components/parseSelection.ts
function parseSelection(selection, chatSeparator, chatBoundaryString) {
  let insideChat = !chatBoundaryString;
  const lines = selection.split("\n");
  let messages = [];
  let currentRole = "user";
  let currentContent = "";
  for (const line of lines) {
    if (chatBoundaryString && line.trim() === chatBoundaryString) {
      if (!insideChat && currentContent.trim()) {
        messages.push({ role: currentRole, content: currentContent.trim() });
        currentContent = "";
      }
      insideChat = !insideChat;
      continue;
    }
    if (!insideChat) continue;
    if (line.trim() === chatSeparator) {
      if (currentContent.trim()) {
        messages.push({ role: currentRole, content: currentContent.trim() });
      }
      currentRole = currentRole === "user" ? "assistant" : "user";
      currentContent = "";
    } else {
      currentContent += line + "\n";
    }
  }
  if (currentContent.trim()) {
    messages.push({ role: currentRole, content: currentContent.trim() });
  }
  return messages;
}

// src/components/ModelSettingsView.ts
var import_obsidian3 = require("obsidian");
var VIEW_TYPE_MODEL_SETTINGS = "model-settings-view";
var ModelSettingsView = class extends import_obsidian3.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    __publicField(this, "plugin");
    this.plugin = plugin;
  }
  getViewType() {
    return VIEW_TYPE_MODEL_SETTINGS;
  }
  getDisplayText() {
    return "AI Model Settings";
  }
  getIcon() {
    return "file-sliders";
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "AI Model Settings" });
    new import_obsidian3.Setting(contentEl).setName("System Message").setDesc("Set the system message for the AI").addTextArea((text) => text.setPlaceholder("You are a helpful assistant.").setValue(this.plugin.settings.systemMessage).onChange(async (value) => {
      this.plugin.settings.systemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Enable Streaming").setDesc("Enable or disable streaming for completions").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableStreaming).onChange(async (value) => {
      this.plugin.settings.enableStreaming = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Temperature").setDesc("Set the randomness of the model's output (0-1)").addSlider((slider) => slider.setLimits(0, 1, 0.1).setValue(this.plugin.settings.temperature).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.temperature = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Max Tokens").setDesc("Set the maximum length of the model's output").addText((text) => text.setPlaceholder("4000").setValue(String(this.plugin.settings.maxTokens)).onChange(async (value) => {
      const numValue = Number(value);
      if (!isNaN(numValue)) {
        this.plugin.settings.maxTokens = numValue;
        await this.plugin.saveSettings();
      }
    }));
    contentEl.createEl("h4", { text: "Date Settings" });
    new import_obsidian3.Setting(contentEl).setName("Include Date with System Message").setDesc("Add the current date to the system message").addToggle((toggle) => toggle.setValue(this.plugin.settings.includeDateWithSystemMessage).onChange(async (value) => {
      this.plugin.settings.includeDateWithSystemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Include Time with System Message").setDesc("Add the current time along with the date to the system message").addToggle((toggle) => toggle.setValue(this.plugin.settings.includeTimeWithSystemMessage).onChange(async (value) => {
      this.plugin.settings.includeTimeWithSystemMessage = value;
      await this.plugin.saveSettings();
    }));
    contentEl.createEl("h4", { text: "Note Reference Settings" });
    new import_obsidian3.Setting(contentEl).setName("Enable Obsidian Links").setDesc("Read Obsidian links in messages using [[filename]] syntax").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableObsidianLinks).onChange(async (value) => {
      this.plugin.settings.enableObsidianLinks = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Enable Context Notes").setDesc("Attach specified note content to chat messages").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableContextNotes).onChange(async (value) => {
      this.plugin.settings.enableContextNotes = value;
      await this.plugin.saveSettings();
    }));
    const contextNotesContainer = contentEl.createDiv("context-notes-container");
    contextNotesContainer.style.marginBottom = "24px";
    new import_obsidian3.Setting(contextNotesContainer).setName("Context Notes").setDesc("Notes to attach as context (supports [[filename]] and [[filename#header]] syntax)").addTextArea((text) => {
      text.setPlaceholder("[[Note Name]]\n[[Another Note#Header]]").setValue(this.plugin.settings.contextNotes || "").onChange(async (value) => {
        this.plugin.settings.contextNotes = value;
        await this.plugin.saveSettings();
      });
      text.inputEl.rows = 4;
      text.inputEl.style.width = "100%";
    });
    contentEl.createEl("h2", { text: "Provider Settings" });
    new import_obsidian3.Setting(contentEl).setName("AI Provider").setDesc("Choose which AI provider to use").addDropdown((dropdown) => {
      dropdown.addOption("openai", "OpenAI (ChatGPT)").addOption("anthropic", "Anthropic (Claude)").addOption("gemini", "Google (Gemini)").addOption("ollama", "Ollama (Local AI)").setValue(this.plugin.settings.provider).onChange(async (value) => {
        this.plugin.settings.provider = value;
        await this.plugin.saveSettings();
        this.onOpen();
      });
    });
    switch (this.plugin.settings.provider) {
      case "openai":
        this.renderOpenAISettings(contentEl);
        break;
      case "anthropic":
        this.renderAnthropicSettings(contentEl);
        break;
      case "gemini":
        this.renderGeminiSettings(contentEl);
        break;
      case "ollama":
        this.renderOllamaSettings(contentEl);
        break;
    }
  }
  renderProviderSettings(containerEl, settings, providerName, testConnectionCallback) {
    new import_obsidian3.Setting(containerEl).setName("Test Connection").setDesc(`Verify your API key and fetch available models for ${providerName}`).addButton((button) => button.setButtonText("Test").onClick(async () => {
      button.setButtonText("Testing...");
      button.setDisabled(true);
      try {
        await testConnectionCallback();
      } catch (error) {
        new import_obsidian3.Notice(`Error: ${error.message}`);
      } finally {
        button.setButtonText("Test");
        button.setDisabled(false);
      }
    }));
    if (settings.lastTestResult) {
      const date = new Date(settings.lastTestResult.timestamp);
      containerEl.createEl("div", {
        text: `Last test: ${date.toLocaleString()} - ${settings.lastTestResult.message}`,
        cls: settings.lastTestResult.success ? "success" : "error"
      });
    }
    new import_obsidian3.Setting(containerEl).setName("Model").setDesc(`Choose the ${providerName} model to use`).addDropdown((dropdown) => {
      for (const model of settings.availableModels) {
        dropdown.addOption(model, model);
      }
      dropdown.setValue(settings.model).onChange(async (value) => {
        settings.model = value;
        await this.plugin.saveSettings();
      });
    });
  }
  renderOpenAISettings(containerEl) {
    this.renderProviderSettings(containerEl, this.plugin.settings.openaiSettings, "OpenAI", async () => {
      const provider = createProvider(this.plugin.settings);
      const result = await provider.testConnection();
      if (result.success && result.models) {
        this.plugin.settings.openaiSettings.availableModels = result.models;
        await this.plugin.saveSettings();
        this.plugin.settings.openaiSettings.lastTestResult = {
          timestamp: Date.now(),
          success: true,
          message: result.message
        };
        new import_obsidian3.Notice(result.message);
        this.onOpen();
      } else {
        this.plugin.settings.openaiSettings.lastTestResult = {
          timestamp: Date.now(),
          success: false,
          message: result.message
        };
        new import_obsidian3.Notice(result.message);
      }
    });
  }
  renderAnthropicSettings(containerEl) {
    this.renderProviderSettings(containerEl, this.plugin.settings.anthropicSettings, "Anthropic", async () => {
      const provider = createProvider(this.plugin.settings);
      const result = await provider.testConnection();
      if (result.success && result.models) {
        this.plugin.settings.anthropicSettings.availableModels = result.models;
        await this.plugin.saveSettings();
        this.plugin.settings.anthropicSettings.lastTestResult = {
          timestamp: Date.now(),
          success: true,
          message: result.message
        };
        new import_obsidian3.Notice(result.message);
        this.onOpen();
      } else {
        this.plugin.settings.anthropicSettings.lastTestResult = {
          timestamp: Date.now(),
          success: false,
          message: result.message
        };
        new import_obsidian3.Notice(result.message);
      }
    });
  }
  renderGeminiSettings(containerEl) {
    this.renderProviderSettings(containerEl, this.plugin.settings.geminiSettings, "Gemini", async () => {
      const provider = createProvider(this.plugin.settings);
      const result = await provider.testConnection();
      if (result.success && result.models) {
        this.plugin.settings.geminiSettings.availableModels = result.models;
        await this.plugin.saveSettings();
        this.plugin.settings.geminiSettings.lastTestResult = {
          timestamp: Date.now(),
          success: true,
          message: result.message
        };
        new import_obsidian3.Notice(result.message);
        this.onOpen();
      } else {
        this.plugin.settings.geminiSettings.lastTestResult = {
          timestamp: Date.now(),
          success: false,
          message: result.message
        };
        new import_obsidian3.Notice(result.message);
      }
    });
  }
  renderOllamaSettings(containerEl) {
    this.renderProviderSettings(containerEl, this.plugin.settings.ollamaSettings, "Ollama", async () => {
      const provider = createProvider(this.plugin.settings);
      const result = await provider.testConnection();
      if (result.success && result.models) {
        this.plugin.settings.ollamaSettings.availableModels = result.models;
        await this.plugin.saveSettings();
        this.plugin.settings.ollamaSettings.lastTestResult = {
          timestamp: Date.now(),
          success: true,
          message: result.message
        };
        new import_obsidian3.Notice(result.message);
        this.onOpen();
      } else {
        this.plugin.settings.ollamaSettings.lastTestResult = {
          timestamp: Date.now(),
          success: false,
          message: result.message
        };
        new import_obsidian3.Notice(result.message);
      }
    });
    containerEl.createEl("div", {
      cls: "setting-item-description",
      text: "To use Ollama:"
    });
    const steps = containerEl.createEl("ol");
    steps.createEl("li", { text: "Install Ollama from https://ollama.ai" });
    steps.createEl("li", { text: "Start the Ollama server" });
    steps.createEl("li", { text: 'Pull models using "ollama pull model-name"' });
    steps.createEl("li", { text: "Test connection to see available models" });
  }
  async onClose() {
  }
};

// src/components/noteUtils.ts
var import_obsidian4 = require("obsidian");
function extractContentUnderHeader(content, headerText) {
  const lines = content.split("\n");
  let foundHeader = false;
  let extractedContent = [];
  let headerLevel = 0;
  for (let i = 0; i < lines.length; i++) {
    const line = lines[i];
    const headerMatch = line.match(/^(#+)\s+(.*?)$/);
    if (headerMatch) {
      const currentHeaderLevel = headerMatch[1].length;
      const currentHeaderText = headerMatch[2].trim();
      if (foundHeader) {
        if (currentHeaderLevel <= headerLevel) {
          break;
        }
      } else if (currentHeaderText.toLowerCase() === headerText.toLowerCase()) {
        foundHeader = true;
        headerLevel = currentHeaderLevel;
        extractedContent.push(line);
        continue;
      }
    }
    if (foundHeader) {
      extractedContent.push(line);
    }
  }
  return extractedContent.join("\n");
}
async function processObsidianLinks(content, app, settings) {
  if (!settings.enableObsidianLinks) return content;
  const linkRegex = /\[\[(.*?)\]\]/g;
  let match;
  let processedContent = content;
  while ((match = linkRegex.exec(content)) !== null) {
    if (match && match[0] && match[1]) {
      const parts = match[1].split("|");
      const filePath = parts[0].trim();
      const displayText = parts.length > 1 ? parts[1].trim() : filePath;
      try {
        let file = app.vault.getAbstractFileByPath(filePath) || app.vault.getAbstractFileByPath(`${filePath}.md`);
        if (!file) {
          const allFiles = app.vault.getFiles();
          file = allFiles.find((f) => f.name === filePath || f.name === `${filePath}.md` || f.basename.toLowerCase() === filePath.toLowerCase() || f.path === filePath || f.path === `${filePath}.md`) || null;
        }
        const headerMatch = filePath.match(/(.*?)#(.*)/);
        let extractedContent = "";
        if (file && file instanceof import_obsidian4.TFile) {
          const noteContent = await app.vault.cachedRead(file);
          if (headerMatch) {
            extractedContent = extractContentUnderHeader(noteContent, headerMatch[2].trim());
          } else {
            extractedContent = noteContent;
          }
          processedContent = processedContent.replace(
            match[0],
            `${match[0]}

---
Note Name: ${filePath}
Content:
${extractedContent}
---
`
          );
        } else {
          new import_obsidian4.Notice(`File not found: ${filePath}. Ensure the file name and path are correct.`);
        }
      } catch (error) {
        new import_obsidian4.Notice(`Error processing link for ${filePath}: ${error.message}`);
      }
    }
  }
  return processedContent;
}
async function processContextNotes(contextNotesText, app) {
  const linkRegex = /\[\[(.*?)\]\]/g;
  let match;
  let contextContent = "";
  while ((match = linkRegex.exec(contextNotesText)) !== null) {
    if (match && match[1]) {
      const fileName = match[1].trim();
      try {
        const headerMatch = fileName.match(/(.*?)#(.*)/);
        const baseFileName = headerMatch ? headerMatch[1].trim() : fileName;
        const headerName = headerMatch ? headerMatch[2].trim() : null;
        let file = app.vault.getAbstractFileByPath(baseFileName) || app.vault.getAbstractFileByPath(`${baseFileName}.md`);
        if (!file) {
          const allFiles = app.vault.getFiles();
          file = allFiles.find(
            (f) => f.basename.toLowerCase() === baseFileName.toLowerCase() || f.name.toLowerCase() === `${baseFileName.toLowerCase()}.md`
          ) || null;
        }
        if (file && file instanceof import_obsidian4.TFile) {
          const noteContent = await app.vault.cachedRead(file);
          contextContent += `---
From note: ${file.basename}

`;
          if (headerName) {
            const headerContent = extractContentUnderHeader(noteContent, headerName);
            contextContent += headerContent;
          } else {
            contextContent += noteContent;
          }
          contextContent += "\n\n";
        } else {
          contextContent += `Note not found: ${fileName}

`;
        }
      } catch (error) {
        contextContent += `Error processing note ${fileName}: ${error.message}

`;
      }
    }
  }
  return contextContent;
}
async function processMessages(messages, app, settings) {
  const processedMessages = [];
  if (settings.enableContextNotes && settings.contextNotes) {
    const contextContent = await processContextNotes(settings.contextNotes, app);
    if (contextContent) {
      if (messages.length > 0 && messages[0].role === "system") {
        processedMessages.push({
          role: "system",
          content: `${messages[0].content}

Here is additional context:
${contextContent}`
        });
        messages = messages.slice(1);
      } else {
        processedMessages.push({
          role: "system",
          content: `Here is context for our conversation:
${contextContent}`
        });
      }
    }
  }
  for (const message of messages) {
    const processedContent = await processObsidianLinks(message.content, app, settings);
    processedMessages.push({
      role: message.role,
      content: processedContent
    });
  }
  return processedMessages;
}
async function getContextNotesContent(contextNotesText, app) {
  return processContextNotes(contextNotesText, app);
}

// src/components/systemMessage.ts
function getSystemMessage(settings) {
  let systemMessage = settings.systemMessage;
  if (settings.includeDateWithSystemMessage) {
    const currentDate = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
    systemMessage = `${systemMessage}

The current date is ${currentDate}.`;
  }
  if (settings.includeTimeWithSystemMessage) {
    const now = /* @__PURE__ */ new Date();
    const timeZoneOffset = now.getTimezoneOffset();
    const offsetHours = Math.abs(timeZoneOffset) / 60;
    const offsetMinutes = Math.abs(timeZoneOffset) % 60;
    const sign = timeZoneOffset > 0 ? "-" : "+";
    const currentTime = now.toLocaleTimeString();
    const timeZoneString = `UTC${sign}${offsetHours.toString().padStart(2, "0")}:${offsetMinutes.toString().padStart(2, "0")}`;
    systemMessage = `${systemMessage}

The current time is ${currentTime} ${timeZoneString}.`;
  }
  return systemMessage;
}

// src/main.ts
var VIEW_TYPE_MODEL_SETTINGS2 = "model-settings-view";
var MyPlugin = class extends import_obsidian5.Plugin {
  constructor() {
    super(...arguments);
    __publicField(this, "settings");
    __publicField(this, "modelSettingsView", null);
    __publicField(this, "activeStream", null);
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new MyPluginSettingTab(this.app, this));
    this.registerView(
      VIEW_TYPE_MODEL_SETTINGS2,
      (leaf) => new ModelSettingsView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_CHAT,
      (leaf) => new ChatView(leaf, this)
    );
    this.addRibbonIcon("file-sliders", "Open AI Settings", () => {
      this.activateView();
    });
    this.addRibbonIcon("message-square", "Open AI Chat", () => {
      this.activateChatView();
    });
    this.app.workspace.onLayoutReady(() => {
      if (this.settings.autoOpenModelSettings) {
        this.activateView();
      }
    });
    this.addCommand({
      id: "ai-completion",
      name: "Get AI Completion",
      editorCallback: async (editor) => {
        var _a2, _b, _c;
        let text;
        let insertPosition;
        if (editor.somethingSelected()) {
          text = editor.getSelection();
          insertPosition = editor.getCursor("to");
        } else {
          const currentLineNumber = editor.getCursor().line;
          let lines = [];
          for (let i = 0; i <= currentLineNumber; i++) {
            lines.push(editor.getLine(i));
          }
          const chatStartString = this.settings.chatStartString;
          if (chatStartString) {
            const startIdx = lines.findIndex((line) => line.trim() === chatStartString.trim());
            if (startIdx !== -1) {
              lines = lines.slice(startIdx + 1);
            }
          }
          text = lines.join("\n");
          insertPosition = { line: currentLineNumber + 1, ch: 0 };
        }
        console.log("Extracted text for completion:", text);
        const messages = parseSelection(text, this.settings.chatSeparator);
        if (messages.length === 0) {
          new import_obsidian5.Notice("No valid messages found in the selection.");
          return;
        }
        const lineContent = (_a2 = editor.getLine(insertPosition.line)) != null ? _a2 : "";
        let prefix = "";
        if (lineContent.trim() !== "") {
          prefix = "\n";
        }
        editor.replaceRange(`${prefix}
${this.settings.chatSeparator}
`, insertPosition);
        let currentPosition = {
          line: insertPosition.line + (prefix ? 1 : 0) + 2,
          ch: 0
        };
        this.activeStream = new AbortController();
        try {
          const provider = createProvider(this.settings);
          const processedMessages = await this.processMessages([
            { role: "system", content: this.getSystemMessage() },
            ...messages
          ]);
          let bufferedChunk = "";
          const flushBuffer = () => {
            if (bufferedChunk) {
              editor.replaceRange(bufferedChunk, currentPosition);
              currentPosition = editor.offsetToPos(
                editor.posToOffset(currentPosition) + bufferedChunk.length
              );
              bufferedChunk = "";
            }
          };
          await provider.getCompletion(
            processedMessages,
            {
              temperature: this.settings.temperature,
              maxTokens: this.settings.maxTokens,
              streamCallback: (chunk) => {
                bufferedChunk += chunk;
                setTimeout(flushBuffer, 100);
              },
              abortController: this.activeStream
            }
          );
          flushBuffer();
          const endLineContent = (_b = editor.getLine(currentPosition.line)) != null ? _b : "";
          let endPrefix = "";
          if (endLineContent.trim() !== "") {
            endPrefix = "\n";
          }
          editor.replaceRange(`${endPrefix}
${this.settings.chatSeparator}

`, currentPosition);
          const newCursorPos = editor.offsetToPos(
            editor.posToOffset(currentPosition) + (endPrefix ? 1 : 0) + 1 + this.settings.chatSeparator.length + 1
          );
          editor.setCursor(newCursorPos);
        } catch (error) {
          new import_obsidian5.Notice(`Error: ${error.message}`);
          const errLineContent = (_c = editor.getLine(currentPosition.line)) != null ? _c : "";
          let errPrefix = "";
          if (errLineContent.trim() !== "") {
            errPrefix = "\n";
          }
          editor.replaceRange(`Error: ${error.message}
${errPrefix}
${this.settings.chatSeparator}

`, currentPosition);
        } finally {
          this.activeStream = null;
        }
      }
    });
    this.addCommand({
      id: "end-ai-stream",
      name: "End AI Stream",
      callback: () => {
        if (this.activeStream) {
          this.activeStream.abort();
          this.activeStream = null;
          new import_obsidian5.Notice("AI stream ended");
        } else {
          new import_obsidian5.Notice("No active AI stream to end");
        }
      }
    });
    this.addCommand({
      id: "show-ai-settings",
      name: "Show AI Settings",
      callback: () => {
        this.activateView();
      }
    });
    this.addCommand({
      id: "show-ai-chat",
      name: "Show AI Chat",
      callback: () => {
        this.activateChatView();
      }
    });
    this.addCommand({
      id: "copy-active-note-name",
      name: "Copy Active Note Name",
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (activeFile) {
          const noteName = `[[${activeFile.basename}]]`;
          try {
            await navigator.clipboard.writeText(noteName);
            new import_obsidian5.Notice(`Copied to clipboard: ${noteName}`);
          } catch (error) {
            new import_obsidian5.Notice("Failed to copy to clipboard");
            console.error("Clipboard error:", error);
          }
        } else {
          new import_obsidian5.Notice("No active note found");
        }
      }
    });
    this.addCommand({
      id: "insert-chat-start-string",
      name: "Insert Chat Start String",
      editorCallback: (editor) => {
        var _a2;
        const chatStartString = (_a2 = this.settings.chatStartString) != null ? _a2 : "";
        if (!chatStartString) {
          new import_obsidian5.Notice("chatStartString is not set in settings.");
          return;
        }
        const cursor = editor.getCursor();
        editor.replaceRange(chatStartString, cursor);
        const lines = chatStartString.split("\n");
        if (lines.length === 1) {
          editor.setCursor({
            line: cursor.line,
            ch: cursor.ch + chatStartString.length
          });
        } else {
          editor.setCursor({
            line: cursor.line + lines.length - 1,
            ch: lines[lines.length - 1].length
          });
        }
      }
    });
  }
  getSystemMessage() {
    return getSystemMessage(this.settings);
  }
  async activateView(viewType = VIEW_TYPE_MODEL_SETTINGS2) {
    this.app.workspace.detachLeavesOfType(viewType);
    let leaf = this.app.workspace.getRightLeaf(false);
    if (leaf) {
      await leaf.setViewState({
        type: viewType,
        active: true
      });
      this.app.workspace.revealLeaf(leaf);
    } else {
      leaf = this.app.workspace.getLeaf(true);
      await leaf.setViewState({
        type: viewType,
        active: true
      });
    }
  }
  async activateChatView() {
    await this.activateView(VIEW_TYPE_CHAT);
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  async processMessages(messages) {
    return processMessages(messages, this.app, this.settings);
  }
  async getContextNotesContent(contextNotesText) {
    return getContextNotesContent(contextNotesText, this.app);
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL21haW4udHMiLCAic3JjL3R5cGVzLnRzIiwgInByb3ZpZGVycy9iYXNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvdmVyc2lvbi50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL19zaGltcy9yZWdpc3RyeS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL19zaGltcy9NdWx0aXBhcnRCb2R5LnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvX3NoaW1zL3dlYi1ydW50aW1lLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9fc2hpbXMvaW5kZXgubWpzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvZXJyb3IudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9pbnRlcm5hbC9kZWNvZGVycy9saW5lLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvaW50ZXJuYWwvc3RyZWFtLXV0aWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvc3RyZWFtaW5nLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvdXBsb2Fkcy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2NvcmUudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9wYWdpbmF0aW9uLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2UudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9yZXNvdXJjZXMvYmV0YS9tb2RlbHMudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9pbnRlcm5hbC9kZWNvZGVycy9qc29ubC50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9iZXRhL21lc3NhZ2VzL2JhdGNoZXMudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9fdmVuZG9yL3BhcnRpYWwtanNvbi1wYXJzZXIvcGFyc2VyLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvbGliL0JldGFNZXNzYWdlU3RyZWFtLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL2JldGEvbWVzc2FnZXMvbWVzc2FnZXMudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9yZXNvdXJjZXMvYmV0YS9iZXRhLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL2NvbXBsZXRpb25zLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL21lc3NhZ2VzL2JhdGNoZXMudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9saWIvTWVzc2FnZVN0cmVhbS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9tZXNzYWdlcy9tZXNzYWdlcy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9tb2RlbHMudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9pbmRleC50cyIsICJwcm92aWRlcnMvYW50aHJvcGljLnRzIiwgInByb3ZpZGVycy9vcGVuYWkudHMiLCAicHJvdmlkZXJzL2dlbWluaS50cyIsICJwcm92aWRlcnMvb2xsYW1hLnRzIiwgInByb3ZpZGVycy9pbmRleC50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL2NvbXBvbmVudHMvY2hhdC50cyIsICJzcmMvY29tcG9uZW50cy9wYXJzZVNlbGVjdGlvbi50cyIsICJzcmMvY29tcG9uZW50cy9Nb2RlbFNldHRpbmdzVmlldy50cyIsICJzcmMvY29tcG9uZW50cy9ub3RlVXRpbHMudHMiLCAic3JjL2NvbXBvbmVudHMvc3lzdGVtTWVzc2FnZS50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIFNldHRpbmcsIFdvcmtzcGFjZUxlYWYsIEl0ZW1WaWV3LCBOb3RpY2UsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBNeVBsdWdpblNldHRpbmdzLCBNZXNzYWdlLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyIH0gZnJvbSAnLi4vcHJvdmlkZXJzJztcclxuaW1wb3J0IHsgTXlQbHVnaW5TZXR0aW5nVGFiIH0gZnJvbSAnLi9zZXR0aW5ncyc7XHJcbmltcG9ydCB7IENoYXRWaWV3LCBWSUVXX1RZUEVfQ0hBVCB9IGZyb20gJy4vY29tcG9uZW50cy9jaGF0JztcclxuaW1wb3J0IHsgcGFyc2VTZWxlY3Rpb24gfSBmcm9tICcuL2NvbXBvbmVudHMvcGFyc2VTZWxlY3Rpb24nO1xyXG5pbXBvcnQgeyBNb2RlbFNldHRpbmdzVmlldyB9IGZyb20gJy4vY29tcG9uZW50cy9Nb2RlbFNldHRpbmdzVmlldyc7XHJcbmltcG9ydCB7IHByb2Nlc3NNZXNzYWdlcywgZ2V0Q29udGV4dE5vdGVzQ29udGVudCB9IGZyb20gJy4vY29tcG9uZW50cy9ub3RlVXRpbHMnO1xyXG5pbXBvcnQgeyBkZWJvdW5jZSB9IGZyb20gJy4vY29tcG9uZW50cy91dGlscyc7XHJcbmltcG9ydCB7IGdldFN5c3RlbU1lc3NhZ2UgfSBmcm9tICcuL2NvbXBvbmVudHMvc3lzdGVtTWVzc2FnZSc7XHJcblxyXG5jb25zdCBWSUVXX1RZUEVfTU9ERUxfU0VUVElOR1MgPSAnbW9kZWwtc2V0dGluZ3Mtdmlldyc7XHJcblxyXG4vKipcclxuICogQUkgQXNzaXN0YW50IFBsdWdpblxyXG4gKiBcclxuICogVGhpcyBwbHVnaW4gYWRkcyBBSSBjYXBhYmlsaXRpZXMgdG8gT2JzaWRpYW4sIHN1cHBvcnRpbmcgbXVsdGlwbGUgcHJvdmlkZXJzOlxyXG4gKiAtIE9wZW5BSSAoQ2hhdEdQVClcclxuICogLSBBbnRocm9waWMgKENsYXVkZSlcclxuICogLSBHb29nbGUgKEdlbWluaSlcclxuICogLSBPbGxhbWEgKExvY2FsIEFJKVxyXG4gKiBcclxuICogRmVhdHVyZXM6XHJcbiAqIC0gQ2hhdCB3aXRoIEFJIG1vZGVsc1xyXG4gKiAtIFN0cmVhbSByZXNwb25zZXMgaW4gcmVhbC10aW1lXHJcbiAqIC0gQ29uZmlndXJlIG1vZGVsIHNldHRpbmdzXHJcbiAqIC0gVGVzdCBBUEkgY29ubmVjdGlvbnNcclxuICogLSBVc2UgbG9jYWwgQUkgbW9kZWxzIHRocm91Z2ggT2xsYW1hXHJcbiAqL1xyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNeVBsdWdpbiBleHRlbmRzIFBsdWdpbiB7XHJcbiAgICBzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncztcclxuICAgIG1vZGVsU2V0dGluZ3NWaWV3OiBNb2RlbFNldHRpbmdzVmlldyB8IG51bGwgPSBudWxsO1xyXG4gICAgYWN0aXZlU3RyZWFtOiBBYm9ydENvbnRyb2xsZXIgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBhc3luYyBvbmxvYWQoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBNeVBsdWdpblNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gUmVnaXN0ZXIgdmlld3NcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhcclxuICAgICAgICAgICAgVklFV19UWVBFX01PREVMX1NFVFRJTkdTLFxyXG4gICAgICAgICAgICAobGVhZikgPT4gbmV3IE1vZGVsU2V0dGluZ3NWaWV3KGxlYWYsIHRoaXMpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclZpZXcoXHJcbiAgICAgICAgICAgIFZJRVdfVFlQRV9DSEFULFxyXG4gICAgICAgICAgICAobGVhZikgPT4gbmV3IENoYXRWaWV3KGxlYWYsIHRoaXMpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIHJpYmJvbiBpY29uc1xyXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignZmlsZS1zbGlkZXJzJywgJ09wZW4gQUkgU2V0dGluZ3MnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignbWVzc2FnZS1zcXVhcmUnLCAnT3BlbiBBSSBDaGF0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2YXRlQ2hhdFZpZXcoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hdXRvT3Blbk1vZGVsU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdhaS1jb21wbGV0aW9uJyxcclxuICAgICAgICAgICAgbmFtZTogJ0dldCBBSSBDb21wbGV0aW9uJyxcclxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3IpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0OiBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5zZXJ0UG9zaXRpb247XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVkaXRvci5zb21ldGhpbmdTZWxlY3RlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBzZWxlY3RlZCB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnNlcnRQb3NpdGlvbiA9IGVkaXRvci5nZXRDdXJzb3IoJ3RvJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgY3VycmVudCBjdXJzb3IgbGluZSBhcyB0aGUgcmVxdWVzdFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRMaW5lTnVtYmVyID0gZWRpdG9yLmdldEN1cnNvcigpLmxpbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IGFsbCBsaW5lcyBmcm9tIHRoZSB0b3Agb2YgdGhlIGZpbGUgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGUgY3VycmVudCBsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGN1cnJlbnRMaW5lTnVtYmVyOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZXMucHVzaChlZGl0b3IuZ2V0TGluZShpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgY2hhdFN0YXJ0U3RyaW5nIGluIHRoZSBsaW5lcyBhbmQgc2xpY2UgaWYgZm91bmRcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGF0U3RhcnRTdHJpbmcgPSB0aGlzLnNldHRpbmdzLmNoYXRTdGFydFN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhdFN0YXJ0U3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0SWR4ID0gbGluZXMuZmluZEluZGV4KGxpbmUgPT4gbGluZS50cmltKCkgPT09IGNoYXRTdGFydFN0cmluZy50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnRJZHggIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeGNsdWRlIHRoZSBjaGF0U3RhcnRTdHJpbmcgbGluZSBpdHNlbGYgZnJvbSB0aGUgY29udGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZXMgPSBsaW5lcy5zbGljZShzdGFydElkeCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gbGluZXMuam9pbignXFxuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCBpbnNlcnRpb24gcG9pbnQgdG8gYmUgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlIGN1cnJlbnQgbGluZVxyXG4gICAgICAgICAgICAgICAgICAgIGluc2VydFBvc2l0aW9uID0geyBsaW5lOiBjdXJyZW50TGluZU51bWJlciArIDEsIGNoOiAwIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRGVidWdnaW5nOiBMb2cgdGhlIGV4dHJhY3RlZCB0ZXh0XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXh0cmFjdGVkIHRleHQgZm9yIGNvbXBsZXRpb246JywgdGV4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUGFyc2UgdGhlIHNlbGVjdGlvbiBpbnRvIG1lc3NhZ2VzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IHBhcnNlU2VsZWN0aW9uKHRleHQsIHRoaXMuc2V0dGluZ3MuY2hhdFNlcGFyYXRvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRW5zdXJlIHRoZXJlIGFyZSBtZXNzYWdlcyB0byBzZW5kXHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gdmFsaWQgbWVzc2FnZXMgZm91bmQgaW4gdGhlIHNlbGVjdGlvbi4nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRW5zdXJlIHRoZXJlJ3MgYSBjbGVhciBzZXBhcmF0aW9uIGJldHdlZW4gdXNlciByZXF1ZXN0IGFuZCBBSSByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGNvbnRlbnQgb2YgdGhlIGxpbmUgd2hlcmUgd2Ugd2FudCB0byBpbnNlcnQgdGhlIHNlcGFyYXRvclxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUNvbnRlbnQgPSBlZGl0b3IuZ2V0TGluZShpbnNlcnRQb3NpdGlvbi5saW5lKSA/PyAnJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyB2YXJpYWJsZSB3aWxsIGhvbGQgYSBuZXdsaW5lIGNoYXJhY3RlciBpZiB3ZSBuZWVkIHRvIGFkZCBvbmUgYmVmb3JlIHRoZSBzZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgIGxldCBwcmVmaXggPSAnJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgbGluZSBpcyBub3QgZW1wdHkgKGhhcyB0ZXh0KSwgYWRkIGEgbmV3bGluZSBiZWZvcmUgdGhlIHNlcGFyYXRvclxyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmVDb250ZW50LnRyaW0oKSAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSAnXFxuJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBzZXBhcmF0b3Igd2l0aCBhIHNpbmdsZSBibGFuayBsaW5lIGJlZm9yZSBhbmQgYWZ0ZXJcclxuICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoYCR7cHJlZml4fVxcbiR7dGhpcy5zZXR0aW5ncy5jaGF0U2VwYXJhdG9yfVxcbmAsIGluc2VydFBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBuZXcgcG9zaXRpb24gZm9yIHRoZSBjdXJzb3IgYWZ0ZXIgaW5zZXJ0aW5nIHRoZSBzZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgIC8vIC0gSWYgd2UgYWRkZWQgYSBwcmVmaXgsIG1vdmUgZG93biBvbmUgbGluZVxyXG4gICAgICAgICAgICAgICAgLy8gLSBNb3ZlIGRvd24gb25lIGxpbmUgZm9yIHRoZSBuZXdsaW5lIGJlZm9yZSBzZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgIC8vIC0gTW92ZSBkb3duIG9uZSBsaW5lIGZvciB0aGUgc2VwYXJhdG9yIGl0c2VsZlxyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lOiBpbnNlcnRQb3NpdGlvbi5saW5lICsgKHByZWZpeCA/IDEgOiAwKSArIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2g6IDBcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVTdHJlYW0gPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IGNyZWF0ZVByb3ZpZGVyKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZE1lc3NhZ2VzID0gYXdhaXQgdGhpcy5wcm9jZXNzTWVzc2FnZXMoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiB0aGlzLmdldFN5c3RlbU1lc3NhZ2UoKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5tZXNzYWdlc1xyXG4gICAgICAgICAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgYnVmZmVyZWRDaHVuayA9ICcnOyAvLyBBY2N1bXVsYXRlIGNodW5rc1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZsdXNoQnVmZmVyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVmZmVyZWRDaHVuaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShidWZmZXJlZENodW5rLCBjdXJyZW50UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBvc2l0aW9uID0gZWRpdG9yLm9mZnNldFRvUG9zKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5wb3NUb09mZnNldChjdXJyZW50UG9zaXRpb24pICsgYnVmZmVyZWRDaHVuay5sZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJlZENodW5rID0gJyc7IC8vIENsZWFyIGJ1ZmZlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJvdmlkZXIuZ2V0Q29tcGxldGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkTWVzc2FnZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnNldHRpbmdzLnRlbXBlcmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4VG9rZW5zOiB0aGlzLnNldHRpbmdzLm1heFRva2VucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbUNhbGxiYWNrOiAoY2h1bms6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcmVkQ2h1bmsgKz0gY2h1bms7IC8vIEFjY3VtdWxhdGUgdGhlIGNodW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmx1c2ggYnVmZmVyIGV2ZXJ5IDEwMG1zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmbHVzaEJ1ZmZlciwgMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXI6IHRoaXMuYWN0aXZlU3RyZWFtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBGaW5hbCBmbHVzaCBhZnRlciBjb21wbGV0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgZmx1c2hCdWZmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBzZXBhcmF0b3IgYWZ0ZXIgdGhlIEFJIHJlc3BvbnNlIHdpdGggY29ycmVjdCBzcGFjaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kTGluZUNvbnRlbnQgPSBlZGl0b3IuZ2V0TGluZShjdXJyZW50UG9zaXRpb24ubGluZSkgPz8gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVuZFByZWZpeCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lQ29udGVudC50cmltKCkgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFByZWZpeCA9ICdcXG4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGAke2VuZFByZWZpeH1cXG4ke3RoaXMuc2V0dGluZ3MuY2hhdFNlcGFyYXRvcn1cXG5cXG5gLCBjdXJyZW50UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0N1cnNvclBvcyA9IGVkaXRvci5vZmZzZXRUb1BvcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnBvc1RvT2Zmc2V0KGN1cnJlbnRQb3NpdGlvbikgKyAoZW5kUHJlZml4ID8gMSA6IDApICsgMSArIHRoaXMuc2V0dGluZ3MuY2hhdFNlcGFyYXRvci5sZW5ndGggKyAxXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKG5ld0N1cnNvclBvcyk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5zZXJ0IGVycm9yIHdpdGggY29ycmVjdCBzcGFjaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyTGluZUNvbnRlbnQgPSBlZGl0b3IuZ2V0TGluZShjdXJyZW50UG9zaXRpb24ubGluZSkgPz8gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVyclByZWZpeCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJMaW5lQ29udGVudC50cmltKCkgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyclByZWZpeCA9ICdcXG4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfVxcbiR7ZXJyUHJlZml4fVxcbiR7dGhpcy5zZXR0aW5ncy5jaGF0U2VwYXJhdG9yfVxcblxcbmAsIGN1cnJlbnRQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ2VuZC1haS1zdHJlYW0nLFxyXG4gICAgICAgICAgICBuYW1lOiAnRW5kIEFJIFN0cmVhbScsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVTdHJlYW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbS5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdBSSBzdHJlYW0gZW5kZWQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIEFJIHN0cmVhbSB0byBlbmQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ3Nob3ctYWktc2V0dGluZ3MnLFxyXG4gICAgICAgICAgICBuYW1lOiAnU2hvdyBBSSBTZXR0aW5ncycsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnc2hvdy1haS1jaGF0JyxcclxuICAgICAgICAgICAgbmFtZTogJ1Nob3cgQUkgQ2hhdCcsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2YXRlQ2hhdFZpZXcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ2NvcHktYWN0aXZlLW5vdGUtbmFtZScsXHJcbiAgICAgICAgICAgIG5hbWU6ICdDb3B5IEFjdGl2ZSBOb3RlIE5hbWUnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlRmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGVOYW1lID0gYFtbJHthY3RpdmVGaWxlLmJhc2VuYW1lfV1dYDtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChub3RlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYENvcGllZCB0byBjbGlwYm9hcmQ6ICR7bm90ZU5hbWV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIGNvcHkgdG8gY2xpcGJvYXJkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NsaXBib2FyZCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgbm90ZSBmb3VuZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnaW5zZXJ0LWNoYXQtc3RhcnQtc3RyaW5nJyxcclxuICAgICAgICAgICAgbmFtZTogJ0luc2VydCBDaGF0IFN0YXJ0IFN0cmluZycsXHJcbiAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGF0U3RhcnRTdHJpbmcgPSB0aGlzLnNldHRpbmdzLmNoYXRTdGFydFN0cmluZyA/PyAnJztcclxuICAgICAgICAgICAgICAgIGlmICghY2hhdFN0YXJ0U3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnY2hhdFN0YXJ0U3RyaW5nIGlzIG5vdCBzZXQgaW4gc2V0dGluZ3MuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShjaGF0U3RhcnRTdHJpbmcsIGN1cnNvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTW92ZSBjdXJzb3IgdG8gdGhlIGVuZCBvZiB0aGUgaW5zZXJ0ZWQgY2hhdFN0YXJ0U3RyaW5nXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGNoYXRTdGFydFN0cmluZy5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGluZXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2luZ2xlIGxpbmUgaW5zZXJ0XHJcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmU6IGN1cnNvci5saW5lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaDogY3Vyc29yLmNoICsgY2hhdFN0YXJ0U3RyaW5nLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBNdWx0aS1saW5lIGluc2VydFxyXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lOiBjdXJzb3IubGluZSArIGxpbmVzLmxlbmd0aCAtIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoOiBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5sZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfSAgICBwdWJsaWMgZ2V0U3lzdGVtTWVzc2FnZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBnZXRTeXN0ZW1NZXNzYWdlKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGFjdGl2YXRlVmlldyh2aWV3VHlwZTogc3RyaW5nID0gVklFV19UWVBFX01PREVMX1NFVFRJTkdTKSB7XHJcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmRldGFjaExlYXZlc09mVHlwZSh2aWV3VHlwZSk7XHJcblxyXG4gICAgICAgIGxldCBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldFJpZ2h0TGVhZihmYWxzZSk7XHJcbiAgICAgICAgaWYgKGxlYWYpIHtcclxuICAgICAgICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogdmlld1R5cGUsXHJcbiAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWUsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBsZWFmID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYodHJ1ZSk7XHJcbiAgICAgICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IHZpZXdUeXBlLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYWN0aXZhdGVDaGF0VmlldygpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmFjdGl2YXRlVmlldyhWSUVXX1RZUEVfQ0hBVCk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgbG9hZFNldHRpbmdzKCkge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBhd2FpdCB0aGlzLmxvYWREYXRhKCkpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHNhdmVTZXR0aW5ncygpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVEYXRhKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgcHJvY2Vzc01lc3NhZ2VzKG1lc3NhZ2VzOiBNZXNzYWdlW10pOiBQcm9taXNlPE1lc3NhZ2VbXT4ge1xyXG4gICAgICAgIHJldHVybiBwcm9jZXNzTWVzc2FnZXMobWVzc2FnZXMsIHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgYXN5bmMgZ2V0Q29udGV4dE5vdGVzQ29udGVudChjb250ZXh0Tm90ZXNUZXh0OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIHJldHVybiBnZXRDb250ZXh0Tm90ZXNDb250ZW50KGNvbnRleHROb3Rlc1RleHQsIHRoaXMuYXBwKTtcclxuICAgIH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEFJIEFzc2lzdGFudCBQbHVnaW4gVHlwZXNcclxuICogXHJcbiAqIFRoaXMgZmlsZSBjb250YWlucyB0aGUgY29yZSB0eXBlcyBhbmQgaW50ZXJmYWNlcyB1c2VkIHRocm91Z2hvdXQgdGhlIHBsdWdpbi5cclxuICogVGhlc2UgZGVmaW5pdGlvbnMgZW5zdXJlIGNvbnNpc3RlbmN5IGFjcm9zcyBkaWZmZXJlbnQgQUkgcHJvdmlkZXJzIGFuZFxyXG4gKiBtYWtlIHRoZSBjb2RlIG1vcmUgbWFpbnRhaW5hYmxlIGFuZCB0eXBlLXNhZmUuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBjaGF0IG1lc3NhZ2UgaW4gYSBjb252ZXJzYXRpb25cclxuICogXHJcbiAqIEBwcm9wZXJ0eSByb2xlIC0gV2hvIHNlbnQgdGhlIG1lc3NhZ2UgKCdzeXN0ZW0nLCAndXNlcicsIG9yICdhc3Npc3RhbnQnKVxyXG4gKiBAcHJvcGVydHkgY29udGVudCAtIFRoZSBhY3R1YWwgdGV4dCBjb250ZW50IG9mIHRoZSBtZXNzYWdlXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2Uge1xyXG4gICAgcm9sZTogJ3N5c3RlbScgfCAndXNlcicgfCAnYXNzaXN0YW50JztcclxuICAgIGNvbnRlbnQ6IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIE9wdGlvbnMgZm9yIGdlbmVyYXRpbmcgQUkgY29tcGxldGlvbnNcclxuICogXHJcbiAqIFRoZXNlIHNldHRpbmdzIGNvbnRyb2wgaG93IHRoZSBBSSBnZW5lcmF0ZXMgaXRzIHJlc3BvbnNlLlxyXG4gKiBOb3QgYWxsIG9wdGlvbnMgYXJlIHN1cHBvcnRlZCBieSBhbGwgcHJvdmlkZXJzLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uT3B0aW9ucyB7XHJcbiAgICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcclxuICAgIG1heFRva2Vucz86IG51bWJlcjtcclxuICAgIHN0cmVhbUNhbGxiYWNrPzogKGNodW5rOiBzdHJpbmcpID0+IHZvaWQ7XHJcbiAgICBhYm9ydENvbnRyb2xsZXI/OiBBYm9ydENvbnRyb2xsZXI7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBSZXN1bHQgb2YgdGVzdGluZyBhbiBBSSBwcm92aWRlciBjb25uZWN0aW9uXHJcbiAqIFxyXG4gKiBAcHJvcGVydHkgc3VjY2VzcyAtIFdoZXRoZXIgdGhlIGNvbm5lY3Rpb24gdGVzdCBwYXNzZWRcclxuICogQHByb3BlcnR5IG1lc3NhZ2UgLSBIdW1hbi1yZWFkYWJsZSByZXN1bHQgbWVzc2FnZVxyXG4gKiBAcHJvcGVydHkgbW9kZWxzIC0gTGlzdCBvZiBhdmFpbGFibGUgbW9kZWxzIChpZiB0ZXN0IHN1Y2Nlc3NmdWwpXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbm5lY3Rpb25UZXN0UmVzdWx0IHtcclxuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICBtb2RlbHM/OiBzdHJpbmdbXTtcclxufVxyXG5cclxuLyoqXHJcbiAqIENvbW1vbiBpbnRlcmZhY2UgZm9yIGFsbCBBSSBwcm92aWRlcnNcclxuICogXHJcbiAqIFRoaXMgaW50ZXJmYWNlIGVuc3VyZXMgdGhhdCBhbGwgQUkgcHJvdmlkZXJzIChPcGVuQUksIEFudGhyb3BpYywgZXRjLilcclxuICogaW1wbGVtZW50IHRoZSBzYW1lIGJhc2ljIGZ1bmN0aW9uYWxpdHksIG1ha2luZyBpdCBlYXN5IHRvIHN3aXRjaCBiZXR3ZWVuIHRoZW0uXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIEFJUHJvdmlkZXIge1xyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSBjb21wbGV0aW9uIGZyb20gdGhlIEFJIG1vZGVsXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyAtIFRoZSBjb252ZXJzYXRpb24gaGlzdG9yeVxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBTZXR0aW5ncyBmb3IgdGhpcyBjb21wbGV0aW9uXHJcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgY29tcGxldGlvbiBpcyBmaW5pc2hlZFxyXG4gICAgICovXHJcbiAgICBnZXRDb21wbGV0aW9uKG1lc3NhZ2VzOiBNZXNzYWdlW10sIG9wdGlvbnM6IENvbXBsZXRpb25PcHRpb25zKTogUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgbGlzdCBvZiBhdmFpbGFibGUgbW9kZWxzIGZyb20gdGhpcyBwcm92aWRlclxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byBsaXN0IG9mIG1vZGVsIG5hbWVzXHJcbiAgICAgKi9cclxuICAgIGdldEF2YWlsYWJsZU1vZGVscygpOiBQcm9taXNlPHN0cmluZ1tdPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlc3QgdGhlIGNvbm5lY3Rpb24gdG8gdGhpcyBwcm92aWRlclxyXG4gICAgICogXHJcbiAgICAgKiBWZXJpZmllcyBBUEkga2V5cywgc2VydmVyIGNvbm5lY3Rpb25zLCBhbmQgcGVybWlzc2lvbnMuXHJcbiAgICAgKiBBbHNvIGZldGNoZXMgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIG1vZGVscyBpZiBzdWNjZXNzZnVsLlxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJucyBQcm9taXNlIHJlc29sdmluZyB0byB0ZXN0IHJlc3VsdHNcclxuICAgICAqL1xyXG4gICAgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxDb25uZWN0aW9uVGVzdFJlc3VsdD47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQbHVnaW4gU2V0dGluZ3NcclxuICogXHJcbiAqIFRoZXNlIHNldHRpbmdzIGNvbnRyb2wgaG93IHRoZSBBSSBBc3Npc3RhbnQgcGx1Z2luIHdvcmtzLlxyXG4gKiBUaGV5IGFyZSBzYXZlZCBiZXR3ZWVuIHNlc3Npb25zIGFuZCBjYW4gYmUgY29uZmlndXJlZCBpbiB0aGUgc2V0dGluZ3MgdGFiLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNeVBsdWdpblNldHRpbmdzIHtcclxuICAgIC8qKiBXaGljaCBBSSBwcm92aWRlciB0byB1c2UgKi9cclxuICAgIHByb3ZpZGVyOiAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHwgJ2dlbWluaScgfCAnb2xsYW1hJztcclxuICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlOiBib29sZWFuO1xyXG5cclxuICAgIC8qKiBPcGVuQUktc3BlY2lmaWMgc2V0dGluZ3MgKi9cclxuICAgIG9wZW5haVNldHRpbmdzOiB7XHJcbiAgICAgICAgYXBpS2V5OiBzdHJpbmc7XHJcbiAgICAgICAgbW9kZWw6IHN0cmluZztcclxuICAgICAgICBhdmFpbGFibGVNb2RlbHM6IHN0cmluZ1tdO1xyXG4gICAgICAgIGxhc3RUZXN0UmVzdWx0Pzoge1xyXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG51bWJlcjtcclxuICAgICAgICAgICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgICAgICAgICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiBBbnRocm9waWMtc3BlY2lmaWMgc2V0dGluZ3MgKi9cclxuICAgIGFudGhyb3BpY1NldHRpbmdzOiB7XHJcbiAgICAgICAgYXBpS2V5OiBzdHJpbmc7XHJcbiAgICAgICAgbW9kZWw6IHN0cmluZztcclxuICAgICAgICBhdmFpbGFibGVNb2RlbHM6IHN0cmluZ1tdO1xyXG4gICAgICAgIGxhc3RUZXN0UmVzdWx0Pzoge1xyXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG51bWJlcjtcclxuICAgICAgICAgICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgICAgICAgICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiBHb29nbGUgR2VtaW5pLXNwZWNpZmljIHNldHRpbmdzICovXHJcbiAgICBnZW1pbmlTZXR0aW5nczoge1xyXG4gICAgICAgIGFwaUtleTogc3RyaW5nO1xyXG4gICAgICAgIG1vZGVsOiBzdHJpbmc7XHJcbiAgICAgICAgYXZhaWxhYmxlTW9kZWxzOiBzdHJpbmdbXTtcclxuICAgICAgICBsYXN0VGVzdFJlc3VsdD86IHtcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBudW1iZXI7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiogT2xsYW1hLXNwZWNpZmljIHNldHRpbmdzICovXHJcbiAgICBvbGxhbWFTZXR0aW5nczoge1xyXG4gICAgICAgIHNlcnZlclVybDogc3RyaW5nO1xyXG4gICAgICAgIG1vZGVsOiBzdHJpbmc7XHJcbiAgICAgICAgYXZhaWxhYmxlTW9kZWxzOiBzdHJpbmdbXTtcclxuICAgICAgICBsYXN0VGVzdFJlc3VsdD86IHtcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBudW1iZXI7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiogU2V0dGluZ3MgdGhhdCBhcHBseSB0byBhbGwgcHJvdmlkZXJzICovXHJcbiAgICBzeXN0ZW1NZXNzYWdlOiBzdHJpbmc7XHJcbiAgICB0ZW1wZXJhdHVyZTogbnVtYmVyO1xyXG4gICAgbWF4VG9rZW5zOiBudW1iZXI7XHJcbiAgICBpbmNsdWRlRGF0ZVdpdGhTeXN0ZW1NZXNzYWdlOiBib29sZWFuO1xyXG4gICAgaW5jbHVkZVRpbWVXaXRoU3lzdGVtTWVzc2FnZTogYm9vbGVhbjtcclxuICAgIGVuYWJsZVN0cmVhbWluZzogYm9vbGVhbjtcclxuICAgIGF1dG9PcGVuTW9kZWxTZXR0aW5nczogYm9vbGVhbjtcclxuICAgIGVuYWJsZU9ic2lkaWFuTGlua3M6IGJvb2xlYW47XHJcbiAgICAvKiogVGhlIHN0cmluZyB0aGF0IHNlcGFyYXRlcyBjaGF0IG1lc3NhZ2VzICovXHJcbiAgICBjaGF0U2VwYXJhdG9yOiBzdHJpbmc7XHJcbiAgICAvKiogVGhlIHN0cmluZyB0aGF0IHN0YXJ0cyBjaGF0IG1lc3NhZ2VzIGluIGEgbm90ZSwgaWYgcHJlc2VudCAqL1xyXG4gICAgY2hhdFN0YXJ0U3RyaW5nPzogc3RyaW5nO1xyXG4gICAgLyoqIFRoZSBzdHJpbmcgdGhhdCBlbmRzIGNoYXQgbWVzc2FnZXMgaW4gYSBub3RlLCBpZiBwcmVzZW50ICovXHJcbiAgICBjaGF0RW5kU3RyaW5nPzogc3RyaW5nO1xyXG4gICAgZW5hYmxlQ29udGV4dE5vdGVzOiBib29sZWFuO1xyXG4gICAgY29udGV4dE5vdGVzOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqIENoYXQgaGlzdG9yeSBzZXR0aW5ncyAqL1xyXG4gICAgbWF4U2Vzc2lvbnM6IG51bWJlcjtcclxuICAgIGF1dG9TYXZlU2Vzc2lvbnM6IGJvb2xlYW47XHJcbiAgICBzZXNzaW9uczogQ2hhdFNlc3Npb25bXTtcclxuICAgIGFjdGl2ZVNlc3Npb25JZD86IHN0cmluZztcclxufVxyXG5cclxuLyoqXHJcbiAqIERlZmF1bHQgc2V0dGluZ3MgdXNlZCB3aGVuIGluaXRpYWxpemluZyB0aGUgcGx1Z2luXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTXlQbHVnaW5TZXR0aW5ncyA9IHtcclxuICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlOiBmYWxzZSxcclxuICAgIHByb3ZpZGVyOiAnb3BlbmFpJyxcclxuICAgIG9wZW5haVNldHRpbmdzOiB7XHJcbiAgICAgICAgYXBpS2V5OiAnJyxcclxuICAgICAgICBtb2RlbDogJ2dwdC00by1taW5pJyxcclxuICAgICAgICBhdmFpbGFibGVNb2RlbHM6IFtdXHJcbiAgICB9LFxyXG4gICAgYW50aHJvcGljU2V0dGluZ3M6IHtcclxuICAgICAgICBhcGlLZXk6ICcnLFxyXG4gICAgICAgIG1vZGVsOiAnY2xhdWRlLTMtNS1zb25uZXQtbGF0ZXN0JyxcclxuICAgICAgICBhdmFpbGFibGVNb2RlbHM6IFtdXHJcbiAgICB9LFxyXG4gICAgZ2VtaW5pU2V0dGluZ3M6IHtcclxuICAgICAgICBhcGlLZXk6ICcnLFxyXG4gICAgICAgIG1vZGVsOiAnZ2VtaW5pLXBybycsXHJcbiAgICAgICAgYXZhaWxhYmxlTW9kZWxzOiBbXVxyXG4gICAgfSxcclxuICAgIG9sbGFtYVNldHRpbmdzOiB7XHJcbiAgICAgICAgc2VydmVyVXJsOiAnaHR0cDovL2xvY2FsaG9zdDoxMTQzNCcsXHJcbiAgICAgICAgbW9kZWw6ICdsbGFtYTInLFxyXG4gICAgICAgIGF2YWlsYWJsZU1vZGVsczogW11cclxuICAgIH0sXHJcbiAgICBzeXN0ZW1NZXNzYWdlOiAnWW91IGFyZSBhIGhlbHBmdWwgYXNzaXN0YW50LicsXHJcbiAgICB0ZW1wZXJhdHVyZTogMC43LFxyXG4gICAgbWF4VG9rZW5zOiAxMDAwLFxyXG4gICAgaW5jbHVkZURhdGVXaXRoU3lzdGVtTWVzc2FnZTogZmFsc2UsXHJcbiAgICBpbmNsdWRlVGltZVdpdGhTeXN0ZW1NZXNzYWdlOiBmYWxzZSxcclxuICAgIGVuYWJsZVN0cmVhbWluZzogdHJ1ZSxcclxuICAgIGF1dG9PcGVuTW9kZWxTZXR0aW5nczogdHJ1ZSxcclxuICAgIGVuYWJsZU9ic2lkaWFuTGlua3M6IHRydWUsXHJcbiAgICBjaGF0U2VwYXJhdG9yOiAnLS0tLScsXHJcbiAgICBjaGF0U3RhcnRTdHJpbmc6IHVuZGVmaW5lZCxcclxuICAgIGNoYXRFbmRTdHJpbmc6IHVuZGVmaW5lZCxcclxuICAgIGVuYWJsZUNvbnRleHROb3RlczogZmFsc2UsXHJcbiAgICBjb250ZXh0Tm90ZXM6ICcnLFxyXG5cclxuICAgIG1heFNlc3Npb25zOiAxMCxcclxuICAgIGF1dG9TYXZlU2Vzc2lvbnM6IHRydWUsXHJcbiAgICBzZXNzaW9uczogW10sXHJcbiAgICBhY3RpdmVTZXNzaW9uSWQ6IHVuZGVmaW5lZFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBjaGF0IHNlc3Npb25cclxuICogXHJcbiAqIEBwcm9wZXJ0eSBpZCAtIFVuaXF1ZSBpZGVudGlmaWVyIGZvciB0aGUgc2Vzc2lvblxyXG4gKiBAcHJvcGVydHkgbmFtZSAtIEh1bWFuLXJlYWRhYmxlIG5hbWUgZm9yIHRoZSBzZXNzaW9uXHJcbiAqIEBwcm9wZXJ0eSBjcmVhdGVkIC0gVGltZXN0YW1wIHdoZW4gdGhlIHNlc3Npb24gd2FzIGNyZWF0ZWRcclxuICogQHByb3BlcnR5IGxhc3RVcGRhdGVkIC0gVGltZXN0YW1wIHdoZW4gdGhlIHNlc3Npb24gd2FzIGxhc3QgdXBkYXRlZFxyXG4gKiBAcHJvcGVydHkgbWVzc2FnZXMgLSBMaXN0IG9mIG1lc3NhZ2VzIGluIHRoZSBzZXNzaW9uXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENoYXRTZXNzaW9uIHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBjcmVhdGVkOiBudW1iZXI7XHJcbiAgICBsYXN0VXBkYXRlZDogbnVtYmVyO1xyXG4gICAgbWVzc2FnZXM6IE1lc3NhZ2VbXTtcclxufVxyXG4iLCAiLyoqXHJcbiAqIEJhc2UgQUkgUHJvdmlkZXIgSW1wbGVtZW50YXRpb25cclxuICogXHJcbiAqIFRoaXMgZmlsZSBjb250YWlucyB0aGUgYmFzZSBjbGFzcyBmb3IgQUkgcHJvdmlkZXJzIHdpdGggc2hhcmVkIGZ1bmN0aW9uYWxpdHlcclxuICogYW5kIGNvbW1vbiBlcnJvciBoYW5kbGluZyBwYXR0ZXJucy5cclxuICovXHJcblxyXG5pbXBvcnQgeyBBSVByb3ZpZGVyLCBNZXNzYWdlLCBDb21wbGV0aW9uT3B0aW9ucywgQ29ubmVjdGlvblRlc3RSZXN1bHQgfSBmcm9tICcuLi9zcmMvdHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIENvbW1vbiBlcnJvciB0eXBlcyBhY3Jvc3MgcHJvdmlkZXJzXHJcbiAqL1xyXG5leHBvcnQgZW51bSBQcm92aWRlckVycm9yVHlwZSB7XHJcbiAgICBJbnZhbGlkQXBpS2V5ID0gJ2ludmFsaWRfYXBpX2tleScsXHJcbiAgICBSYXRlTGltaXQgPSAncmF0ZV9saW1pdCcsXHJcbiAgICBJbnZhbGlkUmVxdWVzdCA9ICdpbnZhbGlkX3JlcXVlc3QnLFxyXG4gICAgU2VydmVyRXJyb3IgPSAnc2VydmVyX2Vycm9yJyxcclxuICAgIE5ldHdvcmtFcnJvciA9ICduZXR3b3JrX2Vycm9yJ1xyXG59XHJcblxyXG4vKipcclxuICogQmFzZSBlcnJvciBjbGFzcyBmb3IgcHJvdmlkZXItc3BlY2lmaWMgZXJyb3JzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUHJvdmlkZXJFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIHR5cGU6IFByb3ZpZGVyRXJyb3JUeXBlO1xyXG4gICAgc3RhdHVzQ29kZT86IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0eXBlOiBQcm92aWRlckVycm9yVHlwZSwgbWVzc2FnZTogc3RyaW5nLCBzdGF0dXNDb2RlPzogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xyXG4gICAgICAgIHRoaXMubmFtZSA9ICdQcm92aWRlckVycm9yJztcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEJhc2UgY2xhc3MgZm9yIEFJIHByb3ZpZGVycyBpbXBsZW1lbnRpbmcgY29tbW9uIGZ1bmN0aW9uYWxpdHlcclxuICovXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlUHJvdmlkZXIgaW1wbGVtZW50cyBBSVByb3ZpZGVyIHtcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBhcGlLZXk6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBiYXNlVXJsOiBzdHJpbmc7XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgbW9kZWw6IHN0cmluZztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIGNvbXBsZXRpb24gZnJvbSB0aGUgQUkgbW9kZWxcclxuICAgICAqL1xyXG4gICAgYWJzdHJhY3QgZ2V0Q29tcGxldGlvbihtZXNzYWdlczogTWVzc2FnZVtdLCBvcHRpb25zOiBDb21wbGV0aW9uT3B0aW9ucyk6IFByb21pc2U8dm9pZD47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYXZhaWxhYmxlIG1vZGVsc1xyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCBnZXRBdmFpbGFibGVNb2RlbHMoKTogUHJvbWlzZTxzdHJpbmdbXT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXN0IGNvbm5lY3Rpb24gdG8gdGhlIHByb3ZpZGVyXHJcbiAgICAgKi9cclxuICAgIGFic3RyYWN0IHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Q29ubmVjdGlvblRlc3RSZXN1bHQ+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIGNvbW1vbiBIVFRQIGVycm9yc1xyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgaGFuZGxlSHR0cEVycm9yKGVycm9yOiBhbnkpOiBuZXZlciB7XHJcbiAgICAgICAgLy8gSGFuZGxlIFJlc3BvbnNlIG9iamVjdHMgZnJvbSBmZXRjaCBBUElcclxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBSZXNwb25zZSkge1xyXG4gICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBlcnJvci5zdGF0dXM7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQwMTpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuSW52YWxpZEFwaUtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ0ludmFsaWQgQVBJIGtleScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQyOTpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuUmF0ZUxpbWl0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnUmF0ZSBsaW1pdCBleGNlZWRlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQwMDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuSW52YWxpZFJlcXVlc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdJbnZhbGlkIHJlcXVlc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1MDA6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDUwMjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNTAzOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA1MDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLlNlcnZlckVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnU2VydmVyIGVycm9yIG9jY3VycmVkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLlNlcnZlckVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgVW5rbm93biBlcnJvciBvY2N1cnJlZDogJHtzdGF0dXN9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIGVycm9yIG9iamVjdHMgd2l0aCByZXNwb25zZSBwcm9wZXJ0eSAobGlrZSBBeGlvcyBlcnJvcnMpXHJcbiAgICAgICAgaWYgKCFlcnJvci5yZXNwb25zZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLk5ldHdvcmtFcnJvcixcclxuICAgICAgICAgICAgICAgICdOZXR3b3JrIGVycm9yIG9jY3VycmVkJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gZXJyb3IucmVzcG9uc2Uuc3RhdHVzO1xyXG4gICAgICAgIHN3aXRjaCAoc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGNhc2UgNDAxOlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuSW52YWxpZEFwaUtleSxcclxuICAgICAgICAgICAgICAgICAgICAnSW52YWxpZCBBUEkga2V5JyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNhc2UgNDI5OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuUmF0ZUxpbWl0LFxyXG4gICAgICAgICAgICAgICAgICAgICdSYXRlIGxpbWl0IGV4Y2VlZGVkJyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNhc2UgNDAwOlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuSW52YWxpZFJlcXVlc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgJ0ludmFsaWQgcmVxdWVzdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjYXNlIDUwMDpcclxuICAgICAgICAgICAgY2FzZSA1MDI6XHJcbiAgICAgICAgICAgIGNhc2UgNTAzOlxyXG4gICAgICAgICAgICBjYXNlIDUwNDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLlNlcnZlckVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICdTZXJ2ZXIgZXJyb3Igb2NjdXJyZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLlNlcnZlckVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgIGBVbmtub3duIGVycm9yIG9jY3VycmVkOiAke3N0YXR1c31gLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGb3JtYXQgZXJyb3IgbWVzc2FnZSBmb3IgY29ubmVjdGlvbiB0ZXN0IHJlc3VsdHNcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGZvcm1hdEVycm9yTWVzc2FnZShlcnJvcjogYW55KTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQcm92aWRlckVycm9yKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyb3IudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBQcm92aWRlckVycm9yVHlwZS5JbnZhbGlkQXBpS2V5OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnSW52YWxpZCBBUEkga2V5LiBQbGVhc2UgY2hlY2sgeW91ciBjcmVkZW50aWFscy4nO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBQcm92aWRlckVycm9yVHlwZS5SYXRlTGltaXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdSYXRlIGxpbWl0IGV4Y2VlZGVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLic7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFByb3ZpZGVyRXJyb3JUeXBlLk5ldHdvcmtFcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ05ldHdvcmsgZXJyb3IuIFBsZWFzZSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24uJztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVycm9yLm1lc3NhZ2UgfHwgJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgc3RhbmRhcmQgZXJyb3IgcmVzcG9uc2UgZm9yIGNvbm5lY3Rpb24gdGVzdHNcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGNyZWF0ZUVycm9yUmVzcG9uc2UoZXJyb3I6IGFueSk6IENvbm5lY3Rpb25UZXN0UmVzdWx0IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5mb3JtYXRFcnJvck1lc3NhZ2UoZXJyb3IpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG4iLCAiZXhwb3J0IGNvbnN0IFZFUlNJT04gPSAnMC4zNi4zJzsgLy8geC1yZWxlYXNlLXBsZWFzZS12ZXJzaW9uXG4iLCAiLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICovXG5pbXBvcnQgeyB0eXBlIFJlcXVlc3RPcHRpb25zIH0gZnJvbSBcIi4uL2NvcmUuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTaGltcyB7XG4gIGtpbmQ6IHN0cmluZztcbiAgZmV0Y2g6IGFueTtcbiAgUmVxdWVzdDogYW55O1xuICBSZXNwb25zZTogYW55O1xuICBIZWFkZXJzOiBhbnk7XG4gIEZvcm1EYXRhOiBhbnk7XG4gIEJsb2I6IGFueTtcbiAgRmlsZTogYW55O1xuICBSZWFkYWJsZVN0cmVhbTogYW55O1xuICBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9uczogPFQgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oXG4gICAgZm9ybTogU2hpbXNbJ0Zvcm1EYXRhJ10sXG4gICAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4sXG4gICkgPT4gUHJvbWlzZTxSZXF1ZXN0T3B0aW9uczxUPj47XG4gIGdldERlZmF1bHRBZ2VudDogKHVybDogc3RyaW5nKSA9PiBhbnk7XG4gIGZpbGVGcm9tUGF0aDpcbiAgICB8ICgocGF0aDogc3RyaW5nLCBmaWxlbmFtZT86IHN0cmluZywgb3B0aW9ucz86IHt9KSA9PiBQcm9taXNlPFNoaW1zWydGaWxlJ10+KVxuICAgIHwgKChwYXRoOiBzdHJpbmcsIG9wdGlvbnM/OiB7fSkgPT4gUHJvbWlzZTxTaGltc1snRmlsZSddPik7XG4gIGlzRnNSZWFkU3RyZWFtOiAodmFsdWU6IGFueSkgPT4gYm9vbGVhbjtcbn1cblxuZXhwb3J0IGxldCBhdXRvID0gZmFsc2U7XG5leHBvcnQgbGV0IGtpbmQ6IFNoaW1zWydraW5kJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IGZldGNoOiBTaGltc1snZmV0Y2gnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgUmVxdWVzdDogU2hpbXNbJ1JlcXVlc3QnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgUmVzcG9uc2U6IFNoaW1zWydSZXNwb25zZSddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBIZWFkZXJzOiBTaGltc1snSGVhZGVycyddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBGb3JtRGF0YTogU2hpbXNbJ0Zvcm1EYXRhJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IEJsb2I6IFNoaW1zWydCbG9iJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IEZpbGU6IFNoaW1zWydGaWxlJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IFJlYWRhYmxlU3RyZWFtOiBTaGltc1snUmVhZGFibGVTdHJlYW0nXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnM6IFNoaW1zWydnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBnZXREZWZhdWx0QWdlbnQ6IFNoaW1zWydnZXREZWZhdWx0QWdlbnQnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgZmlsZUZyb21QYXRoOiBTaGltc1snZmlsZUZyb21QYXRoJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IGlzRnNSZWFkU3RyZWFtOiBTaGltc1snaXNGc1JlYWRTdHJlYW0nXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldFNoaW1zKHNoaW1zOiBTaGltcywgb3B0aW9uczogeyBhdXRvOiBib29sZWFuIH0gPSB7IGF1dG86IGZhbHNlIH0pIHtcbiAgaWYgKGF1dG8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgeW91IG11c3QgXFxgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy8ke3NoaW1zLmtpbmR9J1xcYCBiZWZvcmUgaW1wb3J0aW5nIGFueXRoaW5nIGVsc2UgZnJvbSBAYW50aHJvcGljLWFpL3Nka2AsXG4gICAgKTtcbiAgfVxuICBpZiAoa2luZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBjYW4ndCBcXGBpbXBvcnQgJ0BhbnRocm9waWMtYWkvc2RrL3NoaW1zLyR7c2hpbXMua2luZH0nXFxgIGFmdGVyIFxcYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvJHtraW5kfSdcXGBgLFxuICAgICk7XG4gIH1cbiAgYXV0byA9IG9wdGlvbnMuYXV0bztcbiAga2luZCA9IHNoaW1zLmtpbmQ7XG4gIGZldGNoID0gc2hpbXMuZmV0Y2g7XG4gIFJlcXVlc3QgPSBzaGltcy5SZXF1ZXN0O1xuICBSZXNwb25zZSA9IHNoaW1zLlJlc3BvbnNlO1xuICBIZWFkZXJzID0gc2hpbXMuSGVhZGVycztcbiAgRm9ybURhdGEgPSBzaGltcy5Gb3JtRGF0YTtcbiAgQmxvYiA9IHNoaW1zLkJsb2I7XG4gIEZpbGUgPSBzaGltcy5GaWxlO1xuICBSZWFkYWJsZVN0cmVhbSA9IHNoaW1zLlJlYWRhYmxlU3RyZWFtO1xuICBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyA9IHNoaW1zLmdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zO1xuICBnZXREZWZhdWx0QWdlbnQgPSBzaGltcy5nZXREZWZhdWx0QWdlbnQ7XG4gIGZpbGVGcm9tUGF0aCA9IHNoaW1zLmZpbGVGcm9tUGF0aDtcbiAgaXNGc1JlYWRTdHJlYW0gPSBzaGltcy5pc0ZzUmVhZFN0cmVhbTtcbn1cbiIsICIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBNdWx0aXBhcnRCb2R5IHtcbiAgY29uc3RydWN0b3IocHVibGljIGJvZHk6IGFueSkge31cbiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdNdWx0aXBhcnRCb2R5JztcbiAgfVxufVxuIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuaW1wb3J0IHsgTXVsdGlwYXJ0Qm9keSB9IGZyb20gXCIuL011bHRpcGFydEJvZHkuanNcIjtcbmltcG9ydCB7IHR5cGUgUmVxdWVzdE9wdGlvbnMgfSBmcm9tIFwiLi4vY29yZS5qc1wiO1xuaW1wb3J0IHsgdHlwZSBTaGltcyB9IGZyb20gXCIuL3JlZ2lzdHJ5LmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSdW50aW1lKHsgbWFudWFsbHlJbXBvcnRlZCB9OiB7IG1hbnVhbGx5SW1wb3J0ZWQ/OiBib29sZWFuIH0gPSB7fSk6IFNoaW1zIHtcbiAgY29uc3QgcmVjb21tZW5kYXRpb24gPVxuICAgIG1hbnVhbGx5SW1wb3J0ZWQgP1xuICAgICAgYFlvdSBtYXkgbmVlZCB0byB1c2UgcG9seWZpbGxzYFxuICAgIDogYEFkZCBvbmUgb2YgdGhlc2UgaW1wb3J0cyBiZWZvcmUgeW91ciBmaXJzdCBcXGBpbXBvcnQgXHUyMDI2IGZyb20gJ0BhbnRocm9waWMtYWkvc2RrJ1xcYDpcbi0gXFxgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy9ub2RlJ1xcYCAoaWYgeW91J3JlIHJ1bm5pbmcgb24gTm9kZSlcbi0gXFxgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy93ZWInXFxgIChvdGhlcndpc2UpXG5gO1xuXG4gIGxldCBfZmV0Y2gsIF9SZXF1ZXN0LCBfUmVzcG9uc2UsIF9IZWFkZXJzO1xuICB0cnkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBfZmV0Y2ggPSBmZXRjaDtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgX1JlcXVlc3QgPSBSZXF1ZXN0O1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBfUmVzcG9uc2UgPSBSZXNwb25zZTtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgX0hlYWRlcnMgPSBIZWFkZXJzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGB0aGlzIGVudmlyb25tZW50IGlzIG1pc3NpbmcgdGhlIGZvbGxvd2luZyBXZWIgRmV0Y2ggQVBJIHR5cGU6ICR7XG4gICAgICAgIChlcnJvciBhcyBhbnkpLm1lc3NhZ2VcbiAgICAgIH0uICR7cmVjb21tZW5kYXRpb259YCxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnd2ViJyxcbiAgICBmZXRjaDogX2ZldGNoLFxuICAgIFJlcXVlc3Q6IF9SZXF1ZXN0LFxuICAgIFJlc3BvbnNlOiBfUmVzcG9uc2UsXG4gICAgSGVhZGVyczogX0hlYWRlcnMsXG4gICAgRm9ybURhdGE6XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICB0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnID8gRm9ybURhdGEgOiAoXG4gICAgICAgIGNsYXNzIEZvcm1EYXRhIHtcbiAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIGBmaWxlIHVwbG9hZHMgYXJlbid0IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50IHlldCBhcyAnRm9ybURhdGEnIGlzIHVuZGVmaW5lZC4gJHtyZWNvbW1lbmRhdGlvbn1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgQmxvYjpcbiAgICAgIHR5cGVvZiBCbG9iICE9PSAndW5kZWZpbmVkJyA/IEJsb2IgOiAoXG4gICAgICAgIGNsYXNzIEJsb2Ige1xuICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgZmlsZSB1cGxvYWRzIGFyZW4ndCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCB5ZXQgYXMgJ0Jsb2InIGlzIHVuZGVmaW5lZC4gJHtyZWNvbW1lbmRhdGlvbn1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgRmlsZTpcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHR5cGVvZiBGaWxlICE9PSAndW5kZWZpbmVkJyA/IEZpbGUgOiAoXG4gICAgICAgIGNsYXNzIEZpbGUge1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYGZpbGUgdXBsb2FkcyBhcmVuJ3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQgeWV0IGFzICdGaWxlJyBpcyB1bmRlZmluZWQuICR7cmVjb21tZW5kYXRpb259YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApLFxuICAgIFJlYWRhYmxlU3RyZWFtOlxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgdHlwZW9mIFJlYWRhYmxlU3RyZWFtICE9PSAndW5kZWZpbmVkJyA/IFJlYWRhYmxlU3RyZWFtIDogKFxuICAgICAgICBjbGFzcyBSZWFkYWJsZVN0cmVhbSB7XG4gICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgc3RyZWFtaW5nIGlzbid0IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50IHlldCBhcyAnUmVhZGFibGVTdHJlYW0nIGlzIHVuZGVmaW5lZC4gJHtyZWNvbW1lbmRhdGlvbn1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnM6IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgZm9ybTogRm9ybURhdGEsXG4gICAgICBvcHRzOiBSZXF1ZXN0T3B0aW9uczxUPixcbiAgICApOiBQcm9taXNlPFJlcXVlc3RPcHRpb25zPFQ+PiA9PiAoe1xuICAgICAgLi4ub3B0cyxcbiAgICAgIGJvZHk6IG5ldyBNdWx0aXBhcnRCb2R5KGZvcm0pIGFzIGFueSxcbiAgICB9KSxcbiAgICBnZXREZWZhdWx0QWdlbnQ6ICh1cmw6IHN0cmluZykgPT4gdW5kZWZpbmVkLFxuICAgIGZpbGVGcm9tUGF0aDogKCkgPT4ge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVGhlIGBmaWxlRnJvbVBhdGhgIGZ1bmN0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIGluIE5vZGUuIFNlZSB0aGUgUkVBRE1FIGZvciBtb3JlIGRldGFpbHM6IGh0dHBzOi8vd3d3LmdpdGh1Yi5jb20vYW50aHJvcGljcy9hbnRocm9waWMtc2RrLXR5cGVzY3JpcHQjZmlsZS11cGxvYWRzJyxcbiAgICAgICk7XG4gICAgfSxcbiAgICBpc0ZzUmVhZFN0cmVhbTogKHZhbHVlOiBhbnkpID0+IGZhbHNlLFxuICB9O1xufVxuIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuaW1wb3J0ICogYXMgc2hpbXMgZnJvbSAnLi9yZWdpc3RyeS5tanMnO1xuaW1wb3J0ICogYXMgYXV0byBmcm9tICdAYW50aHJvcGljLWFpL3Nkay9fc2hpbXMvYXV0by9ydW50aW1lJztcbmlmICghc2hpbXMua2luZCkgc2hpbXMuc2V0U2hpbXMoYXV0by5nZXRSdW50aW1lKCksIHsgYXV0bzogdHJ1ZSB9KTtcbmV4cG9ydCAqIGZyb20gJy4vcmVnaXN0cnkubWpzJztcbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBjYXN0VG9FcnJvciwgSGVhZGVycyB9IGZyb20gXCIuL2NvcmUuanNcIjtcblxuZXhwb3J0IGNsYXNzIEFudGhyb3BpY0Vycm9yIGV4dGVuZHMgRXJyb3Ige31cblxuZXhwb3J0IGNsYXNzIEFQSUVycm9yPFxuICBUU3RhdHVzIGV4dGVuZHMgbnVtYmVyIHwgdW5kZWZpbmVkID0gbnVtYmVyIHwgdW5kZWZpbmVkLFxuICBUSGVhZGVycyBleHRlbmRzIEhlYWRlcnMgfCB1bmRlZmluZWQgPSBIZWFkZXJzIHwgdW5kZWZpbmVkLFxuICBURXJyb3IgZXh0ZW5kcyBPYmplY3QgfCB1bmRlZmluZWQgPSBPYmplY3QgfCB1bmRlZmluZWQsXG4+IGV4dGVuZHMgQW50aHJvcGljRXJyb3Ige1xuICAvKiogSFRUUCBzdGF0dXMgZm9yIHRoZSByZXNwb25zZSB0aGF0IGNhdXNlZCB0aGUgZXJyb3IgKi9cbiAgcmVhZG9ubHkgc3RhdHVzOiBUU3RhdHVzO1xuICAvKiogSFRUUCBoZWFkZXJzIGZvciB0aGUgcmVzcG9uc2UgdGhhdCBjYXVzZWQgdGhlIGVycm9yICovXG4gIHJlYWRvbmx5IGhlYWRlcnM6IFRIZWFkZXJzO1xuICAvKiogSlNPTiBib2R5IG9mIHRoZSByZXNwb25zZSB0aGF0IGNhdXNlZCB0aGUgZXJyb3IgKi9cbiAgcmVhZG9ubHkgZXJyb3I6IFRFcnJvcjtcblxuICByZWFkb25seSByZXF1ZXN0X2lkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKHN0YXR1czogVFN0YXR1cywgZXJyb3I6IFRFcnJvciwgbWVzc2FnZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBoZWFkZXJzOiBUSGVhZGVycykge1xuICAgIHN1cGVyKGAke0FQSUVycm9yLm1ha2VNZXNzYWdlKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UpfWApO1xuICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgdGhpcy5yZXF1ZXN0X2lkID0gaGVhZGVycz8uWydyZXF1ZXN0LWlkJ107XG4gICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgbWFrZU1lc3NhZ2Uoc3RhdHVzOiBudW1iZXIgfCB1bmRlZmluZWQsIGVycm9yOiBhbnksIG1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IG1zZyA9XG4gICAgICBlcnJvcj8ubWVzc2FnZSA/XG4gICAgICAgIHR5cGVvZiBlcnJvci5tZXNzYWdlID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgZXJyb3IubWVzc2FnZVxuICAgICAgICA6IEpTT04uc3RyaW5naWZ5KGVycm9yLm1lc3NhZ2UpXG4gICAgICA6IGVycm9yID8gSlNPTi5zdHJpbmdpZnkoZXJyb3IpXG4gICAgICA6IG1lc3NhZ2U7XG5cbiAgICBpZiAoc3RhdHVzICYmIG1zZykge1xuICAgICAgcmV0dXJuIGAke3N0YXR1c30gJHttc2d9YDtcbiAgICB9XG4gICAgaWYgKHN0YXR1cykge1xuICAgICAgcmV0dXJuIGAke3N0YXR1c30gc3RhdHVzIGNvZGUgKG5vIGJvZHkpYDtcbiAgICB9XG4gICAgaWYgKG1zZykge1xuICAgICAgcmV0dXJuIG1zZztcbiAgICB9XG4gICAgcmV0dXJuICcobm8gc3RhdHVzIGNvZGUgb3IgYm9keSknO1xuICB9XG5cbiAgc3RhdGljIGdlbmVyYXRlKFxuICAgIHN0YXR1czogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICAgIGVycm9yUmVzcG9uc2U6IE9iamVjdCB8IHVuZGVmaW5lZCxcbiAgICBtZXNzYWdlOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgaGVhZGVyczogSGVhZGVycyB8IHVuZGVmaW5lZCxcbiAgKTogQVBJRXJyb3Ige1xuICAgIGlmICghc3RhdHVzIHx8ICFoZWFkZXJzKSB7XG4gICAgICByZXR1cm4gbmV3IEFQSUNvbm5lY3Rpb25FcnJvcih7IG1lc3NhZ2UsIGNhdXNlOiBjYXN0VG9FcnJvcihlcnJvclJlc3BvbnNlKSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBlcnJvciA9IGVycm9yUmVzcG9uc2UgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcblxuICAgIGlmIChzdGF0dXMgPT09IDQwMCkge1xuICAgICAgcmV0dXJuIG5ldyBCYWRSZXF1ZXN0RXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICByZXR1cm4gbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICByZXR1cm4gbmV3IFBlcm1pc3Npb25EZW5pZWRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDQpIHtcbiAgICAgIHJldHVybiBuZXcgTm90Rm91bmRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDkpIHtcbiAgICAgIHJldHVybiBuZXcgQ29uZmxpY3RFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MjIpIHtcbiAgICAgIHJldHVybiBuZXcgVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQyOSkge1xuICAgICAgcmV0dXJuIG5ldyBSYXRlTGltaXRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID49IDUwMCkge1xuICAgICAgcmV0dXJuIG5ldyBJbnRlcm5hbFNlcnZlckVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgQVBJRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFQSVVzZXJBYm9ydEVycm9yIGV4dGVuZHMgQVBJRXJyb3I8dW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZD4ge1xuICBjb25zdHJ1Y3Rvcih7IG1lc3NhZ2UgfTogeyBtZXNzYWdlPzogc3RyaW5nIH0gPSB7fSkge1xuICAgIHN1cGVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBtZXNzYWdlIHx8ICdSZXF1ZXN0IHdhcyBhYm9ydGVkLicsIHVuZGVmaW5lZCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFQSUNvbm5lY3Rpb25FcnJvciBleHRlbmRzIEFQSUVycm9yPHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQ+IHtcbiAgY29uc3RydWN0b3IoeyBtZXNzYWdlLCBjYXVzZSB9OiB7IG1lc3NhZ2U/OiBzdHJpbmcgfCB1bmRlZmluZWQ7IGNhdXNlPzogRXJyb3IgfCB1bmRlZmluZWQgfSkge1xuICAgIHN1cGVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBtZXNzYWdlIHx8ICdDb25uZWN0aW9uIGVycm9yLicsIHVuZGVmaW5lZCk7XG4gICAgLy8gaW4gc29tZSBlbnZpcm9ubWVudHMgdGhlICdjYXVzZScgcHJvcGVydHkgaXMgYWxyZWFkeSBkZWNsYXJlZFxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAoY2F1c2UpIHRoaXMuY2F1c2UgPSBjYXVzZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvciBleHRlbmRzIEFQSUNvbm5lY3Rpb25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKHsgbWVzc2FnZSB9OiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSA9IHt9KSB7XG4gICAgc3VwZXIoeyBtZXNzYWdlOiBtZXNzYWdlID8/ICdSZXF1ZXN0IHRpbWVkIG91dC4nIH0pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCYWRSZXF1ZXN0RXJyb3IgZXh0ZW5kcyBBUElFcnJvcjw0MDAsIEhlYWRlcnM+IHt9XG5cbmV4cG9ydCBjbGFzcyBBdXRoZW50aWNhdGlvbkVycm9yIGV4dGVuZHMgQVBJRXJyb3I8NDAxLCBIZWFkZXJzPiB7fVxuXG5leHBvcnQgY2xhc3MgUGVybWlzc2lvbkRlbmllZEVycm9yIGV4dGVuZHMgQVBJRXJyb3I8NDAzLCBIZWFkZXJzPiB7fVxuXG5leHBvcnQgY2xhc3MgTm90Rm91bmRFcnJvciBleHRlbmRzIEFQSUVycm9yPDQwNCwgSGVhZGVycz4ge31cblxuZXhwb3J0IGNsYXNzIENvbmZsaWN0RXJyb3IgZXh0ZW5kcyBBUElFcnJvcjw0MDksIEhlYWRlcnM+IHt9XG5cbmV4cG9ydCBjbGFzcyBVbnByb2Nlc3NhYmxlRW50aXR5RXJyb3IgZXh0ZW5kcyBBUElFcnJvcjw0MjIsIEhlYWRlcnM+IHt9XG5cbmV4cG9ydCBjbGFzcyBSYXRlTGltaXRFcnJvciBleHRlbmRzIEFQSUVycm9yPDQyOSwgSGVhZGVycz4ge31cblxuZXhwb3J0IGNsYXNzIEludGVybmFsU2VydmVyRXJyb3IgZXh0ZW5kcyBBUElFcnJvcjxudW1iZXIsIEhlYWRlcnM+IHt9XG4iLCAiaW1wb3J0IHsgQW50aHJvcGljRXJyb3IgfSBmcm9tIFwiLi4vLi4vZXJyb3IuanNcIjtcblxuZXhwb3J0IHR5cGUgQnl0ZXMgPSBzdHJpbmcgfCBBcnJheUJ1ZmZlciB8IFVpbnQ4QXJyYXkgfCBCdWZmZXIgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4vKipcbiAqIEEgcmUtaW1wbGVtZW50YXRpb24gb2YgaHR0cHgncyBgTGluZURlY29kZXJgIGluIFB5dGhvbiB0aGF0IGhhbmRsZXMgaW5jcmVtZW50YWxseVxuICogcmVhZGluZyBsaW5lcyBmcm9tIHRleHQuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9odHRweC9ibG9iLzkyMDMzM2VhOTgxMThlOWNmNjE3ZjI0NjkwNWQ3YjIwMjUxMDk0MWMvaHR0cHgvX2RlY29kZXJzLnB5I0wyNThcbiAqL1xuZXhwb3J0IGNsYXNzIExpbmVEZWNvZGVyIHtcbiAgLy8gcHJldHRpZXItaWdub3JlXG4gIHN0YXRpYyBORVdMSU5FX0NIQVJTID0gbmV3IFNldChbJ1xcbicsICdcXHInXSk7XG4gIHN0YXRpYyBORVdMSU5FX1JFR0VYUCA9IC9cXHJcXG58W1xcblxccl0vZztcblxuICBidWZmZXI6IHN0cmluZ1tdO1xuICB0cmFpbGluZ0NSOiBib29sZWFuO1xuICB0ZXh0RGVjb2RlcjogYW55OyAvLyBUZXh0RGVjb2RlciBmb3VuZCBpbiBicm93c2Vyczsgbm90IHR5cGVkIHRvIGF2b2lkIHB1bGxpbmcgaW4gZWl0aGVyIFwiZG9tXCIgb3IgXCJub2RlXCIgdHlwZXMuXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB0aGlzLnRyYWlsaW5nQ1IgPSBmYWxzZTtcbiAgfVxuXG4gIGRlY29kZShjaHVuazogQnl0ZXMpOiBzdHJpbmdbXSB7XG4gICAgbGV0IHRleHQgPSB0aGlzLmRlY29kZVRleHQoY2h1bmspO1xuXG4gICAgaWYgKHRoaXMudHJhaWxpbmdDUikge1xuICAgICAgdGV4dCA9ICdcXHInICsgdGV4dDtcbiAgICAgIHRoaXMudHJhaWxpbmdDUiA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodGV4dC5lbmRzV2l0aCgnXFxyJykpIHtcbiAgICAgIHRoaXMudHJhaWxpbmdDUiA9IHRydWU7XG4gICAgICB0ZXh0ID0gdGV4dC5zbGljZSgwLCAtMSk7XG4gICAgfVxuXG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgdHJhaWxpbmdOZXdsaW5lID0gTGluZURlY29kZXIuTkVXTElORV9DSEFSUy5oYXModGV4dFt0ZXh0Lmxlbmd0aCAtIDFdIHx8ICcnKTtcbiAgICBsZXQgbGluZXMgPSB0ZXh0LnNwbGl0KExpbmVEZWNvZGVyLk5FV0xJTkVfUkVHRVhQKTtcblxuICAgIC8vIGlmIHRoZXJlIGlzIGEgdHJhaWxpbmcgbmV3IGxpbmUgdGhlbiB0aGUgbGFzdCBlbnRyeSB3aWxsIGJlIGFuIGVtcHR5XG4gICAgLy8gc3RyaW5nIHdoaWNoIHdlIGRvbid0IGNhcmUgYWJvdXRcbiAgICBpZiAodHJhaWxpbmdOZXdsaW5lKSB7XG4gICAgICBsaW5lcy5wb3AoKTtcbiAgICB9XG5cbiAgICBpZiAobGluZXMubGVuZ3RoID09PSAxICYmICF0cmFpbGluZ05ld2xpbmUpIHtcbiAgICAgIHRoaXMuYnVmZmVyLnB1c2gobGluZXNbMF0hKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgbGluZXMgPSBbdGhpcy5idWZmZXIuam9pbignJykgKyBsaW5lc1swXSwgLi4ubGluZXMuc2xpY2UoMSldO1xuICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB9XG5cbiAgICBpZiAoIXRyYWlsaW5nTmV3bGluZSkge1xuICAgICAgdGhpcy5idWZmZXIgPSBbbGluZXMucG9wKCkgfHwgJyddO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIGRlY29kZVRleHQoYnl0ZXM6IEJ5dGVzKTogc3RyaW5nIHtcbiAgICBpZiAoYnl0ZXMgPT0gbnVsbCkgcmV0dXJuICcnO1xuICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSByZXR1cm4gYnl0ZXM7XG5cbiAgICAvLyBOb2RlOlxuICAgIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGJ5dGVzIGluc3RhbmNlb2YgQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBieXRlcy50b1N0cmluZygpO1xuICAgICAgfVxuICAgICAgaWYgKGJ5dGVzIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20oYnl0ZXMpLnRvU3RyaW5nKCk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihcbiAgICAgICAgYFVuZXhwZWN0ZWQ6IHJlY2VpdmVkIG5vbi1VaW50OEFycmF5ICgke2J5dGVzLmNvbnN0cnVjdG9yLm5hbWV9KSBzdHJlYW0gY2h1bmsgaW4gYW4gZW52aXJvbm1lbnQgd2l0aCBhIGdsb2JhbCBcIkJ1ZmZlclwiIGRlZmluZWQsIHdoaWNoIHRoaXMgbGlicmFyeSBhc3N1bWVzIHRvIGJlIE5vZGUuIFBsZWFzZSByZXBvcnQgdGhpcyBlcnJvci5gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBCcm93c2VyXG4gICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChieXRlcyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgfHwgYnl0ZXMgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICB0aGlzLnRleHREZWNvZGVyID8/PSBuZXcgVGV4dERlY29kZXIoJ3V0ZjgnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dERlY29kZXIuZGVjb2RlKGJ5dGVzKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICBgVW5leHBlY3RlZDogcmVjZWl2ZWQgbm9uLVVpbnQ4QXJyYXkvQXJyYXlCdWZmZXIgKCR7XG4gICAgICAgICAgKGJ5dGVzIGFzIGFueSkuY29uc3RydWN0b3IubmFtZVxuICAgICAgICB9KSBpbiBhIHdlYiBwbGF0Zm9ybS4gUGxlYXNlIHJlcG9ydCB0aGlzIGVycm9yLmAsXG4gICAgICApO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihcbiAgICAgIGBVbmV4cGVjdGVkOiBuZWl0aGVyIEJ1ZmZlciBub3IgVGV4dERlY29kZXIgYXJlIGF2YWlsYWJsZSBhcyBnbG9iYWxzLiBQbGVhc2UgcmVwb3J0IHRoaXMgZXJyb3IuYCxcbiAgICApO1xuICB9XG5cbiAgZmx1c2goKTogc3RyaW5nW10ge1xuICAgIGlmICghdGhpcy5idWZmZXIubGVuZ3RoICYmICF0aGlzLnRyYWlsaW5nQ1IpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBsaW5lcyA9IFt0aGlzLmJ1ZmZlci5qb2luKCcnKV07XG4gICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB0aGlzLnRyYWlsaW5nQ1IgPSBmYWxzZTtcbiAgICByZXR1cm4gbGluZXM7XG4gIH1cbn1cbiIsICIvKipcbiAqIE1vc3QgYnJvd3NlcnMgZG9uJ3QgeWV0IGhhdmUgYXN5bmMgaXRlcmFibGUgc3VwcG9ydCBmb3IgUmVhZGFibGVTdHJlYW0sXG4gKiBhbmQgTm9kZSBoYXMgYSB2ZXJ5IGRpZmZlcmVudCB3YXkgb2YgcmVhZGluZyBieXRlcyBmcm9tIGl0cyBcIlJlYWRhYmxlU3RyZWFtXCIuXG4gKlxuICogVGhpcyBwb2x5ZmlsbCB3YXMgcHVsbGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL01hdHRpYXNCdWVsZW5zL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3B1bGwvMTIyI2lzc3VlY29tbWVudC0xNjI3MzU0NDkwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbVRvQXN5bmNJdGVyYWJsZTxUPihzdHJlYW06IGFueSk6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxUPiB7XG4gIGlmIChzdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKSByZXR1cm4gc3RyZWFtO1xuXG4gIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgcmV0dXJuIHtcbiAgICBhc3luYyBuZXh0KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgaWYgKHJlc3VsdD8uZG9uZSkgcmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayB3aGVuIHN0cmVhbSBiZWNvbWVzIGNsb3NlZFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIHdoZW4gc3RyZWFtIGJlY29tZXMgZXJyb3JlZFxuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH0sXG4gICAgYXN5bmMgcmV0dXJuKCkge1xuICAgICAgY29uc3QgY2FuY2VsUHJvbWlzZSA9IHJlYWRlci5jYW5jZWwoKTtcbiAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpO1xuICAgICAgYXdhaXQgY2FuY2VsUHJvbWlzZTtcbiAgICAgIHJldHVybiB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcbiAgICB9LFxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICB9O1xufVxuIiwgImltcG9ydCB7IFJlYWRhYmxlU3RyZWFtLCB0eXBlIFJlc3BvbnNlIH0gZnJvbSBcIi4vX3NoaW1zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBBbnRocm9waWNFcnJvciB9IGZyb20gXCIuL2Vycm9yLmpzXCI7XG5pbXBvcnQgeyBMaW5lRGVjb2RlciB9IGZyb20gXCIuL2ludGVybmFsL2RlY29kZXJzL2xpbmUuanNcIjtcbmltcG9ydCB7IFJlYWRhYmxlU3RyZWFtVG9Bc3luY0l0ZXJhYmxlIH0gZnJvbSBcIi4vaW50ZXJuYWwvc3RyZWFtLXV0aWxzLmpzXCI7XG5cbmltcG9ydCB7IGNyZWF0ZVJlc3BvbnNlSGVhZGVycyB9IGZyb20gXCIuL2NvcmUuanNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcIi4vZXJyb3IuanNcIjtcblxudHlwZSBCeXRlcyA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgVWludDhBcnJheSB8IEJ1ZmZlciB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbmV4cG9ydCB0eXBlIFNlcnZlclNlbnRFdmVudCA9IHtcbiAgZXZlbnQ6IHN0cmluZyB8IG51bGw7XG4gIGRhdGE6IHN0cmluZztcbiAgcmF3OiBzdHJpbmdbXTtcbn07XG5cbmV4cG9ydCBjbGFzcyBTdHJlYW08SXRlbT4gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPEl0ZW0+IHtcbiAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgaXRlcmF0b3I6ICgpID0+IEFzeW5jSXRlcmF0b3I8SXRlbT4sXG4gICAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyLFxuICApIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICB9XG5cbiAgc3RhdGljIGZyb21TU0VSZXNwb25zZTxJdGVtPihyZXNwb25zZTogUmVzcG9uc2UsIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcik6IFN0cmVhbTxJdGVtPiB7XG4gICAgbGV0IGNvbnN1bWVkID0gZmFsc2U7XG5cbiAgICBhc3luYyBmdW5jdGlvbiogaXRlcmF0b3IoKTogQXN5bmNJdGVyYXRvcjxJdGVtLCBhbnksIHVuZGVmaW5lZD4ge1xuICAgICAgaWYgKGNvbnN1bWVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGl0ZXJhdGUgb3ZlciBhIGNvbnN1bWVkIHN0cmVhbSwgdXNlIGAudGVlKClgIHRvIHNwbGl0IHRoZSBzdHJlYW0uJyk7XG4gICAgICB9XG4gICAgICBjb25zdW1lZCA9IHRydWU7XG4gICAgICBsZXQgZG9uZSA9IGZhbHNlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBzc2Ugb2YgX2l0ZXJTU0VNZXNzYWdlcyhyZXNwb25zZSwgY29udHJvbGxlcikpIHtcbiAgICAgICAgICBpZiAoc3NlLmV2ZW50ID09PSAnY29tcGxldGlvbicpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHlpZWxkIEpTT04ucGFyc2Uoc3NlLmRhdGEpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDb3VsZCBub3QgcGFyc2UgbWVzc2FnZSBpbnRvIEpTT046YCwgc3NlLmRhdGEpO1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGcm9tIGNodW5rOmAsIHNzZS5yYXcpO1xuICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHNzZS5ldmVudCA9PT0gJ21lc3NhZ2Vfc3RhcnQnIHx8XG4gICAgICAgICAgICBzc2UuZXZlbnQgPT09ICdtZXNzYWdlX2RlbHRhJyB8fFxuICAgICAgICAgICAgc3NlLmV2ZW50ID09PSAnbWVzc2FnZV9zdG9wJyB8fFxuICAgICAgICAgICAgc3NlLmV2ZW50ID09PSAnY29udGVudF9ibG9ja19zdGFydCcgfHxcbiAgICAgICAgICAgIHNzZS5ldmVudCA9PT0gJ2NvbnRlbnRfYmxvY2tfZGVsdGEnIHx8XG4gICAgICAgICAgICBzc2UuZXZlbnQgPT09ICdjb250ZW50X2Jsb2NrX3N0b3AnXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB5aWVsZCBKU09OLnBhcnNlKHNzZS5kYXRhKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQ291bGQgbm90IHBhcnNlIG1lc3NhZ2UgaW50byBKU09OOmAsIHNzZS5kYXRhKTtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRnJvbSBjaHVuazpgLCBzc2UucmF3KTtcbiAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc3NlLmV2ZW50ID09PSAncGluZycpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzc2UuZXZlbnQgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgIHRocm93IEFQSUVycm9yLmdlbmVyYXRlKFxuICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIGBTU0UgRXJyb3I6ICR7c3NlLmRhdGF9YCxcbiAgICAgICAgICAgICAgc3NlLmRhdGEsXG4gICAgICAgICAgICAgIGNyZWF0ZVJlc3BvbnNlSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZiB0aGUgdXNlciBjYWxscyBgc3RyZWFtLmNvbnRyb2xsZXIuYWJvcnQoKWAsIHdlIHNob3VsZCBleGl0IHdpdGhvdXQgdGhyb3dpbmcuXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5uYW1lID09PSAnQWJvcnRFcnJvcicpIHJldHVybjtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIElmIHRoZSB1c2VyIGBicmVha2BzLCBhYm9ydCB0aGUgb25nb2luZyByZXF1ZXN0LlxuICAgICAgICBpZiAoIWRvbmUpIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFN0cmVhbShpdGVyYXRvciwgY29udHJvbGxlcik7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGEgU3RyZWFtIGZyb20gYSBuZXdsaW5lLXNlcGFyYXRlZCBSZWFkYWJsZVN0cmVhbVxuICAgKiB3aGVyZSBlYWNoIGl0ZW0gaXMgYSBKU09OIHZhbHVlLlxuICAgKi9cbiAgc3RhdGljIGZyb21SZWFkYWJsZVN0cmVhbTxJdGVtPihyZWFkYWJsZVN0cmVhbTogUmVhZGFibGVTdHJlYW0sIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcik6IFN0cmVhbTxJdGVtPiB7XG4gICAgbGV0IGNvbnN1bWVkID0gZmFsc2U7XG5cbiAgICBhc3luYyBmdW5jdGlvbiogaXRlckxpbmVzKCk6IEFzeW5jR2VuZXJhdG9yPHN0cmluZywgdm9pZCwgdW5rbm93bj4ge1xuICAgICAgY29uc3QgbGluZURlY29kZXIgPSBuZXcgTGluZURlY29kZXIoKTtcblxuICAgICAgY29uc3QgaXRlciA9IFJlYWRhYmxlU3RyZWFtVG9Bc3luY0l0ZXJhYmxlPEJ5dGVzPihyZWFkYWJsZVN0cmVhbSk7XG4gICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGl0ZXIpIHtcbiAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVEZWNvZGVyLmRlY29kZShjaHVuaykpIHtcbiAgICAgICAgICB5aWVsZCBsaW5lO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lRGVjb2Rlci5mbHVzaCgpKSB7XG4gICAgICAgIHlpZWxkIGxpbmU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24qIGl0ZXJhdG9yKCk6IEFzeW5jSXRlcmF0b3I8SXRlbSwgYW55LCB1bmRlZmluZWQ+IHtcbiAgICAgIGlmIChjb25zdW1lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBpdGVyYXRlIG92ZXIgYSBjb25zdW1lZCBzdHJlYW0sIHVzZSBgLnRlZSgpYCB0byBzcGxpdCB0aGUgc3RyZWFtLicpO1xuICAgICAgfVxuICAgICAgY29uc3VtZWQgPSB0cnVlO1xuICAgICAgbGV0IGRvbmUgPSBmYWxzZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgbGluZSBvZiBpdGVyTGluZXMoKSkge1xuICAgICAgICAgIGlmIChkb25lKSBjb250aW51ZTtcbiAgICAgICAgICBpZiAobGluZSkgeWllbGQgSlNPTi5wYXJzZShsaW5lKTtcbiAgICAgICAgfVxuICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgY2FsbHMgYHN0cmVhbS5jb250cm9sbGVyLmFib3J0KClgLCB3ZSBzaG91bGQgZXhpdCB3aXRob3V0IHRocm93aW5nLlxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSByZXR1cm47XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICAvLyBJZiB0aGUgdXNlciBgYnJlYWtgcywgYWJvcnQgdGhlIG9uZ29pbmcgcmVxdWVzdC5cbiAgICAgICAgaWYgKCFkb25lKSBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBTdHJlYW0oaXRlcmF0b3IsIGNvbnRyb2xsZXIpO1xuICB9XG5cbiAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0l0ZXJhdG9yPEl0ZW0+IHtcbiAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwbGl0cyB0aGUgc3RyZWFtIGludG8gdHdvIHN0cmVhbXMgd2hpY2ggY2FuIGJlXG4gICAqIGluZGVwZW5kZW50bHkgcmVhZCBmcm9tIGF0IGRpZmZlcmVudCBzcGVlZHMuXG4gICAqL1xuICB0ZWUoKTogW1N0cmVhbTxJdGVtPiwgU3RyZWFtPEl0ZW0+XSB7XG4gICAgY29uc3QgbGVmdDogQXJyYXk8UHJvbWlzZTxJdGVyYXRvclJlc3VsdDxJdGVtPj4+ID0gW107XG4gICAgY29uc3QgcmlnaHQ6IEFycmF5PFByb21pc2U8SXRlcmF0b3JSZXN1bHQ8SXRlbT4+PiA9IFtdO1xuICAgIGNvbnN0IGl0ZXJhdG9yID0gdGhpcy5pdGVyYXRvcigpO1xuXG4gICAgY29uc3QgdGVlSXRlcmF0b3IgPSAocXVldWU6IEFycmF5PFByb21pc2U8SXRlcmF0b3JSZXN1bHQ8SXRlbT4+Pik6IEFzeW5jSXRlcmF0b3I8SXRlbT4gPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmV4dDogKCkgPT4ge1xuICAgICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgIGxlZnQucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgcmlnaHQucHVzaChyZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcXVldWUuc2hpZnQoKSE7XG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH07XG5cbiAgICByZXR1cm4gW1xuICAgICAgbmV3IFN0cmVhbSgoKSA9PiB0ZWVJdGVyYXRvcihsZWZ0KSwgdGhpcy5jb250cm9sbGVyKSxcbiAgICAgIG5ldyBTdHJlYW0oKCkgPT4gdGVlSXRlcmF0b3IocmlnaHQpLCB0aGlzLmNvbnRyb2xsZXIpLFxuICAgIF07XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgdGhpcyBzdHJlYW0gdG8gYSBuZXdsaW5lLXNlcGFyYXRlZCBSZWFkYWJsZVN0cmVhbSBvZlxuICAgKiBKU09OIHN0cmluZ2lmaWVkIHZhbHVlcyBpbiB0aGUgc3RyZWFtXG4gICAqIHdoaWNoIGNhbiBiZSB0dXJuZWQgYmFjayBpbnRvIGEgU3RyZWFtIHdpdGggYFN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW0oKWAuXG4gICAqL1xuICB0b1JlYWRhYmxlU3RyZWFtKCk6IFJlYWRhYmxlU3RyZWFtIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBsZXQgaXRlcjogQXN5bmNJdGVyYXRvcjxJdGVtPjtcbiAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5cbiAgICByZXR1cm4gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICBpdGVyID0gc2VsZltTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBwdWxsKGN0cmw6IGFueSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IGl0ZXIubmV4dCgpO1xuICAgICAgICAgIGlmIChkb25lKSByZXR1cm4gY3RybC5jbG9zZSgpO1xuXG4gICAgICAgICAgY29uc3QgYnl0ZXMgPSBlbmNvZGVyLmVuY29kZShKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAnXFxuJyk7XG5cbiAgICAgICAgICBjdHJsLmVucXVldWUoYnl0ZXMpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjdHJsLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhc3luYyBjYW5jZWwoKSB7XG4gICAgICAgIGF3YWl0IGl0ZXIucmV0dXJuPy4oKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uKiBfaXRlclNTRU1lc3NhZ2VzKFxuICByZXNwb25zZTogUmVzcG9uc2UsXG4gIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcixcbik6IEFzeW5jR2VuZXJhdG9yPFNlcnZlclNlbnRFdmVudCwgdm9pZCwgdW5rbm93bj4ge1xuICBpZiAoIXJlc3BvbnNlLmJvZHkpIHtcbiAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBBdHRlbXB0ZWQgdG8gaXRlcmF0ZSBvdmVyIGEgcmVzcG9uc2Ugd2l0aCBubyBib2R5YCk7XG4gIH1cblxuICBjb25zdCBzc2VEZWNvZGVyID0gbmV3IFNTRURlY29kZXIoKTtcbiAgY29uc3QgbGluZURlY29kZXIgPSBuZXcgTGluZURlY29kZXIoKTtcblxuICBjb25zdCBpdGVyID0gUmVhZGFibGVTdHJlYW1Ub0FzeW5jSXRlcmFibGU8Qnl0ZXM+KHJlc3BvbnNlLmJvZHkpO1xuICBmb3IgYXdhaXQgKGNvbnN0IHNzZUNodW5rIG9mIGl0ZXJTU0VDaHVua3MoaXRlcikpIHtcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZURlY29kZXIuZGVjb2RlKHNzZUNodW5rKSkge1xuICAgICAgY29uc3Qgc3NlID0gc3NlRGVjb2Rlci5kZWNvZGUobGluZSk7XG4gICAgICBpZiAoc3NlKSB5aWVsZCBzc2U7XG4gICAgfVxuICB9XG5cbiAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVEZWNvZGVyLmZsdXNoKCkpIHtcbiAgICBjb25zdCBzc2UgPSBzc2VEZWNvZGVyLmRlY29kZShsaW5lKTtcbiAgICBpZiAoc3NlKSB5aWVsZCBzc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBHaXZlbiBhbiBhc3luYyBpdGVyYWJsZSBpdGVyYXRvciwgaXRlcmF0ZXMgb3ZlciBpdCBhbmQgeWllbGRzIGZ1bGxcbiAqIFNTRSBjaHVua3MsIGkuZS4geWllbGRzIHdoZW4gYSBkb3VibGUgbmV3LWxpbmUgaXMgZW5jb3VudGVyZWQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uKiBpdGVyU1NFQ2h1bmtzKGl0ZXJhdG9yOiBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8Qnl0ZXM+KTogQXN5bmNHZW5lcmF0b3I8VWludDhBcnJheT4ge1xuICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KCk7XG5cbiAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBpdGVyYXRvcikge1xuICAgIGlmIChjaHVuayA9PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjb25zdCBiaW5hcnlDaHVuayA9XG4gICAgICBjaHVuayBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gbmV3IFVpbnQ4QXJyYXkoY2h1bmspXG4gICAgICA6IHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycgPyBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoY2h1bmspXG4gICAgICA6IGNodW5rO1xuXG4gICAgbGV0IG5ld0RhdGEgPSBuZXcgVWludDhBcnJheShkYXRhLmxlbmd0aCArIGJpbmFyeUNodW5rLmxlbmd0aCk7XG4gICAgbmV3RGF0YS5zZXQoZGF0YSk7XG4gICAgbmV3RGF0YS5zZXQoYmluYXJ5Q2h1bmssIGRhdGEubGVuZ3RoKTtcbiAgICBkYXRhID0gbmV3RGF0YTtcblxuICAgIGxldCBwYXR0ZXJuSW5kZXg7XG4gICAgd2hpbGUgKChwYXR0ZXJuSW5kZXggPSBmaW5kRG91YmxlTmV3bGluZUluZGV4KGRhdGEpKSAhPT0gLTEpIHtcbiAgICAgIHlpZWxkIGRhdGEuc2xpY2UoMCwgcGF0dGVybkluZGV4KTtcbiAgICAgIGRhdGEgPSBkYXRhLnNsaWNlKHBhdHRlcm5JbmRleCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRhdGEubGVuZ3RoID4gMCkge1xuICAgIHlpZWxkIGRhdGE7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZERvdWJsZU5ld2xpbmVJbmRleChidWZmZXI6IFVpbnQ4QXJyYXkpOiBudW1iZXIge1xuICAvLyBUaGlzIGZ1bmN0aW9uIHNlYXJjaGVzIHRoZSBidWZmZXIgZm9yIHRoZSBlbmQgcGF0dGVybnMgKFxcclxcciwgXFxuXFxuLCBcXHJcXG5cXHJcXG4pXG4gIC8vIGFuZCByZXR1cm5zIHRoZSBpbmRleCByaWdodCBhZnRlciB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbnkgcGF0dGVybixcbiAgLy8gb3IgLTEgaWYgbm9uZSBvZiB0aGUgcGF0dGVybnMgYXJlIGZvdW5kLlxuICBjb25zdCBuZXdsaW5lID0gMHgwYTsgLy8gXFxuXG4gIGNvbnN0IGNhcnJpYWdlID0gMHgwZDsgLy8gXFxyXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoIC0gMjsgaSsrKSB7XG4gICAgaWYgKGJ1ZmZlcltpXSA9PT0gbmV3bGluZSAmJiBidWZmZXJbaSArIDFdID09PSBuZXdsaW5lKSB7XG4gICAgICAvLyBcXG5cXG5cbiAgICAgIHJldHVybiBpICsgMjtcbiAgICB9XG4gICAgaWYgKGJ1ZmZlcltpXSA9PT0gY2FycmlhZ2UgJiYgYnVmZmVyW2kgKyAxXSA9PT0gY2FycmlhZ2UpIHtcbiAgICAgIC8vIFxcclxcclxuICAgICAgcmV0dXJuIGkgKyAyO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBidWZmZXJbaV0gPT09IGNhcnJpYWdlICYmXG4gICAgICBidWZmZXJbaSArIDFdID09PSBuZXdsaW5lICYmXG4gICAgICBpICsgMyA8IGJ1ZmZlci5sZW5ndGggJiZcbiAgICAgIGJ1ZmZlcltpICsgMl0gPT09IGNhcnJpYWdlICYmXG4gICAgICBidWZmZXJbaSArIDNdID09PSBuZXdsaW5lXG4gICAgKSB7XG4gICAgICAvLyBcXHJcXG5cXHJcXG5cbiAgICAgIHJldHVybiBpICsgNDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gLTE7XG59XG5cbmNsYXNzIFNTRURlY29kZXIge1xuICBwcml2YXRlIGRhdGE6IHN0cmluZ1tdO1xuICBwcml2YXRlIGV2ZW50OiBzdHJpbmcgfCBudWxsO1xuICBwcml2YXRlIGNodW5rczogc3RyaW5nW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5ldmVudCA9IG51bGw7XG4gICAgdGhpcy5kYXRhID0gW107XG4gICAgdGhpcy5jaHVua3MgPSBbXTtcbiAgfVxuXG4gIGRlY29kZShsaW5lOiBzdHJpbmcpIHtcbiAgICBpZiAobGluZS5lbmRzV2l0aCgnXFxyJykpIHtcbiAgICAgIGxpbmUgPSBsaW5lLnN1YnN0cmluZygwLCBsaW5lLmxlbmd0aCAtIDEpO1xuICAgIH1cblxuICAgIGlmICghbGluZSkge1xuICAgICAgLy8gZW1wdHkgbGluZSBhbmQgd2UgZGlkbid0IHByZXZpb3VzbHkgZW5jb3VudGVyIGFueSBtZXNzYWdlc1xuICAgICAgaWYgKCF0aGlzLmV2ZW50ICYmICF0aGlzLmRhdGEubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3Qgc3NlOiBTZXJ2ZXJTZW50RXZlbnQgPSB7XG4gICAgICAgIGV2ZW50OiB0aGlzLmV2ZW50LFxuICAgICAgICBkYXRhOiB0aGlzLmRhdGEuam9pbignXFxuJyksXG4gICAgICAgIHJhdzogdGhpcy5jaHVua3MsXG4gICAgICB9O1xuXG4gICAgICB0aGlzLmV2ZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgICAgdGhpcy5jaHVua3MgPSBbXTtcblxuICAgICAgcmV0dXJuIHNzZTtcbiAgICB9XG5cbiAgICB0aGlzLmNodW5rcy5wdXNoKGxpbmUpO1xuXG4gICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnOicpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgW2ZpZWxkbmFtZSwgXywgdmFsdWVdID0gcGFydGl0aW9uKGxpbmUsICc6Jyk7XG5cbiAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnICcpKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygxKTtcbiAgICB9XG5cbiAgICBpZiAoZmllbGRuYW1lID09PSAnZXZlbnQnKSB7XG4gICAgICB0aGlzLmV2ZW50ID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChmaWVsZG5hbWUgPT09ICdkYXRhJykge1xuICAgICAgdGhpcy5kYXRhLnB1c2godmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKiBUaGlzIGlzIGFuIGludGVybmFsIGhlbHBlciBmdW5jdGlvbiB0aGF0J3MganVzdCB1c2VkIGZvciB0ZXN0aW5nICovXG5leHBvcnQgZnVuY3Rpb24gX2RlY29kZUNodW5rcyhjaHVua3M6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICBjb25zdCBkZWNvZGVyID0gbmV3IExpbmVEZWNvZGVyKCk7XG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBmb3IgKGNvbnN0IGNodW5rIG9mIGNodW5rcykge1xuICAgIGxpbmVzLnB1c2goLi4uZGVjb2Rlci5kZWNvZGUoY2h1bmspKTtcbiAgfVxuXG4gIHJldHVybiBsaW5lcztcbn1cblxuZnVuY3Rpb24gcGFydGl0aW9uKHN0cjogc3RyaW5nLCBkZWxpbWl0ZXI6IHN0cmluZyk6IFtzdHJpbmcsIHN0cmluZywgc3RyaW5nXSB7XG4gIGNvbnN0IGluZGV4ID0gc3RyLmluZGV4T2YoZGVsaW1pdGVyKTtcbiAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgIHJldHVybiBbc3RyLnN1YnN0cmluZygwLCBpbmRleCksIGRlbGltaXRlciwgc3RyLnN1YnN0cmluZyhpbmRleCArIGRlbGltaXRlci5sZW5ndGgpXTtcbiAgfVxuXG4gIHJldHVybiBbc3RyLCAnJywgJyddO1xufVxuIiwgImltcG9ydCB7IHR5cGUgUmVxdWVzdE9wdGlvbnMgfSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5pbXBvcnQge1xuICBGb3JtRGF0YSxcbiAgRmlsZSxcbiAgdHlwZSBCbG9iLFxuICB0eXBlIEZpbGVQcm9wZXJ0eUJhZyxcbiAgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMsXG4gIHR5cGUgRnNSZWFkU3RyZWFtLFxuICBpc0ZzUmVhZFN0cmVhbSxcbn0gZnJvbSBcIi4vX3NoaW1zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBNdWx0aXBhcnRCb2R5IH0gZnJvbSBcIi4vX3NoaW1zL011bHRpcGFydEJvZHkuanNcIjtcbmV4cG9ydCB7IGZpbGVGcm9tUGF0aCB9IGZyb20gXCIuL19zaGltcy9pbmRleC5qc1wiO1xuXG50eXBlIEJsb2JMaWtlUGFydCA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgQXJyYXlCdWZmZXJWaWV3IHwgQmxvYkxpa2UgfCBVaW50OEFycmF5IHwgRGF0YVZpZXc7XG5leHBvcnQgdHlwZSBCbG9iUGFydCA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgQXJyYXlCdWZmZXJWaWV3IHwgQmxvYiB8IFVpbnQ4QXJyYXkgfCBEYXRhVmlldztcblxuLyoqXG4gKiBUeXBpY2FsbHksIHRoaXMgaXMgYSBuYXRpdmUgXCJGaWxlXCIgY2xhc3MuXG4gKlxuICogV2UgcHJvdmlkZSB0aGUge0BsaW5rIHRvRmlsZX0gdXRpbGl0eSB0byBjb252ZXJ0IGEgdmFyaWV0eSBvZiBvYmplY3RzXG4gKiBpbnRvIHRoZSBGaWxlIGNsYXNzLlxuICpcbiAqIEZvciBjb252ZW5pZW5jZSwgeW91IGNhbiBhbHNvIHBhc3MgYSBmZXRjaCBSZXNwb25zZSwgb3IgaW4gTm9kZSxcbiAqIHRoZSByZXN1bHQgb2YgZnMuY3JlYXRlUmVhZFN0cmVhbSgpLlxuICovXG5leHBvcnQgdHlwZSBVcGxvYWRhYmxlID0gRmlsZUxpa2UgfCBSZXNwb25zZUxpa2UgfCBGc1JlYWRTdHJlYW07XG5cbi8qKlxuICogSW50ZW5kZWQgdG8gbWF0Y2ggd2ViLkJsb2IsIG5vZGUuQmxvYiwgbm9kZS1mZXRjaC5CbG9iLCBldGMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmxvYkxpa2Uge1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9CbG9iL3NpemUpICovXG4gIHJlYWRvbmx5IHNpemU6IG51bWJlcjtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYi90eXBlKSAqL1xuICByZWFkb25seSB0eXBlOiBzdHJpbmc7XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2IvdGV4dCkgKi9cbiAgdGV4dCgpOiBQcm9taXNlPHN0cmluZz47XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2Ivc2xpY2UpICovXG4gIHNsaWNlKHN0YXJ0PzogbnVtYmVyLCBlbmQ/OiBudW1iZXIpOiBCbG9iTGlrZTtcbiAgLy8gdW5mb3J0dW5hdGVseSBAdHlwZXMvbm9kZS1mZXRjaEBeMi42LjQgZG9lc24ndCB0eXBlIHRoZSBhcnJheUJ1ZmZlciBtZXRob2Rcbn1cblxuLyoqXG4gKiBJbnRlbmRlZCB0byBtYXRjaCB3ZWIuRmlsZSwgbm9kZS5GaWxlLCBub2RlLWZldGNoLkZpbGUsIGV0Yy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaWxlTGlrZSBleHRlbmRzIEJsb2JMaWtlIHtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvRmlsZS9sYXN0TW9kaWZpZWQpICovXG4gIHJlYWRvbmx5IGxhc3RNb2RpZmllZDogbnVtYmVyO1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9GaWxlL25hbWUpICovXG4gIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcbn1cblxuLyoqXG4gKiBJbnRlbmRlZCB0byBtYXRjaCB3ZWIuUmVzcG9uc2UsIG5vZGUuUmVzcG9uc2UsIG5vZGUtZmV0Y2guUmVzcG9uc2UsIGV0Yy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXNwb25zZUxpa2Uge1xuICB1cmw6IHN0cmluZztcbiAgYmxvYigpOiBQcm9taXNlPEJsb2JMaWtlPjtcbn1cblxuZXhwb3J0IGNvbnN0IGlzUmVzcG9uc2VMaWtlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBSZXNwb25zZUxpa2UgPT5cbiAgdmFsdWUgIT0gbnVsbCAmJlxuICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gIHR5cGVvZiB2YWx1ZS51cmwgPT09ICdzdHJpbmcnICYmXG4gIHR5cGVvZiB2YWx1ZS5ibG9iID09PSAnZnVuY3Rpb24nO1xuXG5leHBvcnQgY29uc3QgaXNGaWxlTGlrZSA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgRmlsZUxpa2UgPT5cbiAgdmFsdWUgIT0gbnVsbCAmJlxuICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gIHR5cGVvZiB2YWx1ZS5uYW1lID09PSAnc3RyaW5nJyAmJlxuICB0eXBlb2YgdmFsdWUubGFzdE1vZGlmaWVkID09PSAnbnVtYmVyJyAmJlxuICBpc0Jsb2JMaWtlKHZhbHVlKTtcblxuLyoqXG4gKiBUaGUgQmxvYkxpa2UgdHlwZSBvbWl0cyBhcnJheUJ1ZmZlcigpIGJlY2F1c2UgQHR5cGVzL25vZGUtZmV0Y2hAXjIuNi40IGxhY2tzIGl0OyBidXQgdGhpcyBjaGVja1xuICogYWRkcyB0aGUgYXJyYXlCdWZmZXIoKSBtZXRob2QgdHlwZSBiZWNhdXNlIGl0IGlzIGF2YWlsYWJsZSBhbmQgdXNlZCBhdCBydW50aW1lXG4gKi9cbmV4cG9ydCBjb25zdCBpc0Jsb2JMaWtlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBCbG9iTGlrZSAmIHsgYXJyYXlCdWZmZXIoKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4gfSA9PlxuICB2YWx1ZSAhPSBudWxsICYmXG4gIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgdHlwZW9mIHZhbHVlLnNpemUgPT09ICdudW1iZXInICYmXG4gIHR5cGVvZiB2YWx1ZS50eXBlID09PSAnc3RyaW5nJyAmJlxuICB0eXBlb2YgdmFsdWUudGV4dCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICB0eXBlb2YgdmFsdWUuc2xpY2UgPT09ICdmdW5jdGlvbicgJiZcbiAgdHlwZW9mIHZhbHVlLmFycmF5QnVmZmVyID09PSAnZnVuY3Rpb24nO1xuXG5leHBvcnQgY29uc3QgaXNVcGxvYWRhYmxlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBVcGxvYWRhYmxlID0+IHtcbiAgcmV0dXJuIGlzRmlsZUxpa2UodmFsdWUpIHx8IGlzUmVzcG9uc2VMaWtlKHZhbHVlKSB8fCBpc0ZzUmVhZFN0cmVhbSh2YWx1ZSk7XG59O1xuXG5leHBvcnQgdHlwZSBUb0ZpbGVJbnB1dCA9IFVwbG9hZGFibGUgfCBFeGNsdWRlPEJsb2JMaWtlUGFydCwgc3RyaW5nPiB8IEFzeW5jSXRlcmFibGU8QmxvYkxpa2VQYXJ0PjtcblxuLyoqXG4gKiBIZWxwZXIgZm9yIGNyZWF0aW5nIGEge0BsaW5rIEZpbGV9IHRvIHBhc3MgdG8gYW4gU0RLIHVwbG9hZCBtZXRob2QgZnJvbSBhIHZhcmlldHkgb2YgZGlmZmVyZW50IGRhdGEgZm9ybWF0c1xuICogQHBhcmFtIHZhbHVlIHRoZSByYXcgY29udGVudCBvZiB0aGUgZmlsZS4gIENhbiBiZSBhbiB7QGxpbmsgVXBsb2FkYWJsZX0sIHtAbGluayBCbG9iTGlrZVBhcnR9LCBvciB7QGxpbmsgQXN5bmNJdGVyYWJsZX0gb2Yge0BsaW5rIEJsb2JMaWtlUGFydH1zXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgdGhlIG5hbWUgb2YgdGhlIGZpbGUuIElmIG9taXR0ZWQsIHRvRmlsZSB3aWxsIHRyeSB0byBkZXRlcm1pbmUgYSBmaWxlIG5hbWUgZnJvbSBiaXRzIGlmIHBvc3NpYmxlXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnMgYWRkaXRpb25hbCBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdGlvbnMudHlwZSB0aGUgTUlNRSB0eXBlIG9mIHRoZSBjb250ZW50XG4gKiBAcGFyYW0ge251bWJlcj19IG9wdGlvbnMubGFzdE1vZGlmaWVkIHRoZSBsYXN0IG1vZGlmaWVkIHRpbWVzdGFtcFxuICogQHJldHVybnMgYSB7QGxpbmsgRmlsZX0gd2l0aCB0aGUgZ2l2ZW4gcHJvcGVydGllc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdG9GaWxlKFxuICB2YWx1ZTogVG9GaWxlSW5wdXQgfCBQcm9taXNlTGlrZTxUb0ZpbGVJbnB1dD4sXG4gIG5hbWU/OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBvcHRpb25zPzogRmlsZVByb3BlcnR5QmFnIHwgdW5kZWZpbmVkLFxuKTogUHJvbWlzZTxGaWxlTGlrZT4ge1xuICAvLyBJZiBpdCdzIGEgcHJvbWlzZSwgcmVzb2x2ZSBpdC5cbiAgdmFsdWUgPSBhd2FpdCB2YWx1ZTtcblxuICAvLyBJZiB3ZSd2ZSBiZWVuIGdpdmVuIGEgYEZpbGVgIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmdcbiAgaWYgKGlzRmlsZUxpa2UodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgaWYgKGlzUmVzcG9uc2VMaWtlKHZhbHVlKSkge1xuICAgIGNvbnN0IGJsb2IgPSBhd2FpdCB2YWx1ZS5ibG9iKCk7XG4gICAgbmFtZSB8fD0gbmV3IFVSTCh2YWx1ZS51cmwpLnBhdGhuYW1lLnNwbGl0KC9bXFxcXC9dLykucG9wKCkgPz8gJ3Vua25vd25fZmlsZSc7XG5cbiAgICAvLyB3ZSBuZWVkIHRvIGNvbnZlcnQgdGhlIGBCbG9iYCBpbnRvIGFuIGFycmF5IGJ1ZmZlciBiZWNhdXNlIHRoZSBgQmxvYmAgY2xhc3NcbiAgICAvLyB0aGF0IGBub2RlLWZldGNoYCBkZWZpbmVzIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSB3ZWIgc3RhbmRhcmQgd2hpY2ggcmVzdWx0c1xuICAgIC8vIGluIGBuZXcgRmlsZWAgaW50ZXJwcmV0aW5nIGl0IGFzIGEgc3RyaW5nIGluc3RlYWQgb2YgYmluYXJ5IGRhdGEuXG4gICAgY29uc3QgZGF0YSA9IGlzQmxvYkxpa2UoYmxvYikgPyBbKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSkgYXMgYW55XSA6IFtibG9iXTtcblxuICAgIHJldHVybiBuZXcgRmlsZShkYXRhLCBuYW1lLCBvcHRpb25zKTtcbiAgfVxuXG4gIGNvbnN0IGJpdHMgPSBhd2FpdCBnZXRCeXRlcyh2YWx1ZSk7XG5cbiAgbmFtZSB8fD0gZ2V0TmFtZSh2YWx1ZSkgPz8gJ3Vua25vd25fZmlsZSc7XG5cbiAgaWYgKCFvcHRpb25zPy50eXBlKSB7XG4gICAgY29uc3QgdHlwZSA9IChiaXRzWzBdIGFzIGFueSk/LnR5cGU7XG4gICAgaWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgb3B0aW9ucyA9IHsgLi4ub3B0aW9ucywgdHlwZSB9O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgRmlsZShiaXRzLCBuYW1lLCBvcHRpb25zKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0Qnl0ZXModmFsdWU6IFRvRmlsZUlucHV0KTogUHJvbWlzZTxBcnJheTxCbG9iUGFydD4+IHtcbiAgbGV0IHBhcnRzOiBBcnJheTxCbG9iUGFydD4gPSBbXTtcbiAgaWYgKFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHxcbiAgICBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsdWUpIHx8IC8vIGluY2x1ZGVzIFVpbnQ4QXJyYXksIEJ1ZmZlciwgZXRjLlxuICAgIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXJcbiAgKSB7XG4gICAgcGFydHMucHVzaCh2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoaXNCbG9iTGlrZSh2YWx1ZSkpIHtcbiAgICBwYXJ0cy5wdXNoKGF3YWl0IHZhbHVlLmFycmF5QnVmZmVyKCkpO1xuICB9IGVsc2UgaWYgKFxuICAgIGlzQXN5bmNJdGVyYWJsZUl0ZXJhdG9yKHZhbHVlKSAvLyBpbmNsdWRlcyBSZWFkYWJsZSwgUmVhZGFibGVTdHJlYW0sIGV0Yy5cbiAgKSB7XG4gICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiB2YWx1ZSkge1xuICAgICAgcGFydHMucHVzaChjaHVuayBhcyBCbG9iUGFydCk7IC8vIFRPRE8sIGNvbnNpZGVyIHZhbGlkYXRpbmc/XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBVbmV4cGVjdGVkIGRhdGEgdHlwZTogJHt0eXBlb2YgdmFsdWV9OyBjb25zdHJ1Y3RvcjogJHt2YWx1ZT8uY29uc3RydWN0b3JcbiAgICAgICAgPy5uYW1lfTsgcHJvcHM6ICR7cHJvcHNGb3JFcnJvcih2YWx1ZSl9YCxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHBhcnRzO1xufVxuXG5mdW5jdGlvbiBwcm9wc0ZvckVycm9yKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBwcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKTtcbiAgcmV0dXJuIGBbJHtwcm9wcy5tYXAoKHApID0+IGBcIiR7cH1cImApLmpvaW4oJywgJyl9XWA7XG59XG5cbmZ1bmN0aW9uIGdldE5hbWUodmFsdWU6IGFueSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiAoXG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLm5hbWUpIHx8XG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLmZpbGVuYW1lKSB8fFxuICAgIC8vIEZvciBmcy5SZWFkU3RyZWFtXG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLnBhdGgpPy5zcGxpdCgvW1xcXFwvXS8pLnBvcCgpXG4gICk7XG59XG5cbmNvbnN0IGdldFN0cmluZ0Zyb21NYXliZUJ1ZmZlciA9ICh4OiBzdHJpbmcgfCBCdWZmZXIgfCB1bmtub3duKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgcmV0dXJuIHg7XG4gIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB4IGluc3RhbmNlb2YgQnVmZmVyKSByZXR1cm4gU3RyaW5nKHgpO1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuY29uc3QgaXNBc3luY0l0ZXJhYmxlSXRlcmF0b3IgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEFzeW5jSXRlcmFibGVJdGVyYXRvcjx1bmtub3duPiA9PlxuICB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJztcblxuZXhwb3J0IGNvbnN0IGlzTXVsdGlwYXJ0Qm9keSA9IChib2R5OiBhbnkpOiBib2R5IGlzIE11bHRpcGFydEJvZHkgPT5cbiAgYm9keSAmJiB0eXBlb2YgYm9keSA9PT0gJ29iamVjdCcgJiYgYm9keS5ib2R5ICYmIGJvZHlbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ011bHRpcGFydEJvZHknO1xuXG4vKipcbiAqIFJldHVybnMgYSBtdWx0aXBhcnQvZm9ybS1kYXRhIHJlcXVlc3QgaWYgYW55IHBhcnQgb2YgdGhlIGdpdmVuIHJlcXVlc3QgYm9keSBjb250YWlucyBhIEZpbGUgLyBCbG9iIHZhbHVlLlxuICogT3RoZXJ3aXNlIHJldHVybnMgdGhlIHJlcXVlc3QgYXMgaXMuXG4gKi9cbmV4cG9ydCBjb25zdCBtYXliZU11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyA9IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBvcHRzOiBSZXF1ZXN0T3B0aW9uczxUPixcbik6IFByb21pc2U8UmVxdWVzdE9wdGlvbnM8VCB8IE11bHRpcGFydEJvZHk+PiA9PiB7XG4gIGlmICghaGFzVXBsb2FkYWJsZVZhbHVlKG9wdHMuYm9keSkpIHJldHVybiBvcHRzO1xuXG4gIGNvbnN0IGZvcm0gPSBhd2FpdCBjcmVhdGVGb3JtKG9wdHMuYm9keSk7XG4gIHJldHVybiBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyhmb3JtLCBvcHRzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgPSBhc3luYyA8VCA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4sXG4pOiBQcm9taXNlPFJlcXVlc3RPcHRpb25zPFQgfCBNdWx0aXBhcnRCb2R5Pj4gPT4ge1xuICBjb25zdCBmb3JtID0gYXdhaXQgY3JlYXRlRm9ybShvcHRzLmJvZHkpO1xuICByZXR1cm4gZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMoZm9ybSwgb3B0cyk7XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRm9ybSA9IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KGJvZHk6IFQgfCB1bmRlZmluZWQpOiBQcm9taXNlPEZvcm1EYXRhPiA9PiB7XG4gIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcbiAgYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LmVudHJpZXMoYm9keSB8fCB7fSkubWFwKChba2V5LCB2YWx1ZV0pID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBrZXksIHZhbHVlKSkpO1xuICByZXR1cm4gZm9ybTtcbn07XG5cbmNvbnN0IGhhc1VwbG9hZGFibGVWYWx1ZSA9ICh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4gPT4ge1xuICBpZiAoaXNVcGxvYWRhYmxlKHZhbHVlKSkgcmV0dXJuIHRydWU7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIHZhbHVlLnNvbWUoaGFzVXBsb2FkYWJsZVZhbHVlKTtcbiAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICBmb3IgKGNvbnN0IGsgaW4gdmFsdWUpIHtcbiAgICAgIGlmIChoYXNVcGxvYWRhYmxlVmFsdWUoKHZhbHVlIGFzIGFueSlba10pKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgYWRkRm9ybVZhbHVlID0gYXN5bmMgKGZvcm06IEZvcm1EYXRhLCBrZXk6IHN0cmluZywgdmFsdWU6IHVua25vd24pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYFJlY2VpdmVkIG51bGwgZm9yIFwiJHtrZXl9XCI7IHRvIHBhc3MgbnVsbCBpbiBGb3JtRGF0YSwgeW91IG11c3QgdXNlIHRoZSBzdHJpbmcgJ251bGwnYCxcbiAgICApO1xuICB9XG5cbiAgLy8gVE9ETzogbWFrZSBuZXN0ZWQgZm9ybWF0cyBjb25maWd1cmFibGVcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgIGZvcm0uYXBwZW5kKGtleSwgU3RyaW5nKHZhbHVlKSk7XG4gIH0gZWxzZSBpZiAoaXNVcGxvYWRhYmxlKHZhbHVlKSkge1xuICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0b0ZpbGUodmFsdWUpO1xuICAgIGZvcm0uYXBwZW5kKGtleSwgZmlsZSBhcyBGaWxlKTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHZhbHVlLm1hcCgoZW50cnkpID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBrZXkgKyAnW10nLCBlbnRyeSkpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBPYmplY3QuZW50cmllcyh2YWx1ZSkubWFwKChbbmFtZSwgcHJvcF0pID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBgJHtrZXl9WyR7bmFtZX1dYCwgcHJvcCkpLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIGBJbnZhbGlkIHZhbHVlIGdpdmVuIHRvIGZvcm0sIGV4cGVjdGVkIGEgc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9iamVjdCwgQXJyYXksIEZpbGUgb3IgQmxvYiBidXQgZ290ICR7dmFsdWV9IGluc3RlYWRgLFxuICAgICk7XG4gIH1cbn07XG4iLCAiaW1wb3J0IHsgVkVSU0lPTiB9IGZyb20gXCIuL3ZlcnNpb24uanNcIjtcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuL3N0cmVhbWluZy5qc1wiO1xuaW1wb3J0IHtcbiAgQW50aHJvcGljRXJyb3IsXG4gIEFQSUVycm9yLFxuICBBUElDb25uZWN0aW9uRXJyb3IsXG4gIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IsXG4gIEFQSVVzZXJBYm9ydEVycm9yLFxufSBmcm9tIFwiLi9lcnJvci5qc1wiO1xuaW1wb3J0IHtcbiAga2luZCBhcyBzaGltc0tpbmQsXG4gIHR5cGUgUmVhZGFibGUsXG4gIGdldERlZmF1bHRBZ2VudCxcbiAgdHlwZSBBZ2VudCxcbiAgZmV0Y2gsXG4gIHR5cGUgUmVxdWVzdEluZm8sXG4gIHR5cGUgUmVxdWVzdEluaXQsXG4gIHR5cGUgUmVzcG9uc2UsXG4gIHR5cGUgSGVhZGVyc0luaXQsXG59IGZyb20gXCIuL19zaGltcy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgdHlwZSBSZXNwb25zZSB9O1xuaW1wb3J0IHsgQmxvYkxpa2UsIGlzQmxvYkxpa2UsIGlzTXVsdGlwYXJ0Qm9keSB9IGZyb20gXCIuL3VwbG9hZHMuanNcIjtcbmV4cG9ydCB7XG4gIG1heWJlTXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zLFxuICBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMsXG4gIGNyZWF0ZUZvcm0sXG4gIHR5cGUgVXBsb2FkYWJsZSxcbn0gZnJvbSBcIi4vdXBsb2Fkcy5qc1wiO1xuXG5leHBvcnQgdHlwZSBGZXRjaCA9ICh1cmw6IFJlcXVlc3RJbmZvLCBpbml0PzogUmVxdWVzdEluaXQpID0+IFByb21pc2U8UmVzcG9uc2U+O1xuXG50eXBlIFByb21pc2VPclZhbHVlPFQ+ID0gVCB8IFByb21pc2U8VD47XG5cbnR5cGUgQVBJUmVzcG9uc2VQcm9wcyA9IHtcbiAgcmVzcG9uc2U6IFJlc3BvbnNlO1xuICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zO1xuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXI7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBkZWZhdWx0UGFyc2VSZXNwb25zZTxUPihwcm9wczogQVBJUmVzcG9uc2VQcm9wcyk6IFByb21pc2U8V2l0aFJlcXVlc3RJRDxUPj4ge1xuICBjb25zdCB7IHJlc3BvbnNlIH0gPSBwcm9wcztcbiAgaWYgKHByb3BzLm9wdGlvbnMuc3RyZWFtKSB7XG4gICAgZGVidWcoJ3Jlc3BvbnNlJywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS51cmwsIHJlc3BvbnNlLmhlYWRlcnMsIHJlc3BvbnNlLmJvZHkpO1xuXG4gICAgLy8gTm90ZTogdGhlcmUgaXMgYW4gaW52YXJpYW50IGhlcmUgdGhhdCBpc24ndCByZXByZXNlbnRlZCBpbiB0aGUgdHlwZSBzeXN0ZW1cbiAgICAvLyB0aGF0IGlmIHlvdSBzZXQgYHN0cmVhbTogdHJ1ZWAgdGhlIHJlc3BvbnNlIHR5cGUgbXVzdCBhbHNvIGJlIGBTdHJlYW08VD5gXG5cbiAgICBpZiAocHJvcHMub3B0aW9ucy5fX3N0cmVhbUNsYXNzKSB7XG4gICAgICByZXR1cm4gcHJvcHMub3B0aW9ucy5fX3N0cmVhbUNsYXNzLmZyb21TU0VSZXNwb25zZShyZXNwb25zZSwgcHJvcHMuY29udHJvbGxlcikgYXMgYW55O1xuICAgIH1cblxuICAgIHJldHVybiBTdHJlYW0uZnJvbVNTRVJlc3BvbnNlKHJlc3BvbnNlLCBwcm9wcy5jb250cm9sbGVyKSBhcyBhbnk7XG4gIH1cblxuICAvLyBmZXRjaCByZWZ1c2VzIHRvIHJlYWQgdGhlIGJvZHkgd2hlbiB0aGUgc3RhdHVzIGNvZGUgaXMgMjA0LlxuICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpIHtcbiAgICByZXR1cm4gbnVsbCBhcyBXaXRoUmVxdWVzdElEPFQ+O1xuICB9XG5cbiAgaWYgKHByb3BzLm9wdGlvbnMuX19iaW5hcnlSZXNwb25zZSkge1xuICAgIHJldHVybiByZXNwb25zZSBhcyB1bmtub3duIGFzIFdpdGhSZXF1ZXN0SUQ8VD47XG4gIH1cblxuICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgY29uc3QgaXNKU09OID1cbiAgICBjb250ZW50VHlwZT8uaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL2pzb24nKSB8fCBjb250ZW50VHlwZT8uaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL3ZuZC5hcGkranNvbicpO1xuICBpZiAoaXNKU09OKSB7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGRlYnVnKCdyZXNwb25zZScsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UudXJsLCByZXNwb25zZS5oZWFkZXJzLCBqc29uKTtcblxuICAgIHJldHVybiBfYWRkUmVxdWVzdElEKGpzb24gYXMgVCwgcmVzcG9uc2UpO1xuICB9XG5cbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgZGVidWcoJ3Jlc3BvbnNlJywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS51cmwsIHJlc3BvbnNlLmhlYWRlcnMsIHRleHQpO1xuXG4gIC8vIFRPRE8gaGFuZGxlIGJsb2IsIGFycmF5YnVmZmVyLCBvdGhlciBjb250ZW50IHR5cGVzLCBldGMuXG4gIHJldHVybiB0ZXh0IGFzIHVua25vd24gYXMgV2l0aFJlcXVlc3RJRDxUPjtcbn1cblxudHlwZSBXaXRoUmVxdWVzdElEPFQ+ID1cbiAgVCBleHRlbmRzIEFycmF5PGFueT4gfCBSZXNwb25zZSB8IEFic3RyYWN0UGFnZTxhbnk+ID8gVFxuICA6IFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+ID8gVCAmIHsgX3JlcXVlc3RfaWQ/OiBzdHJpbmcgfCBudWxsIH1cbiAgOiBUO1xuXG5mdW5jdGlvbiBfYWRkUmVxdWVzdElEPFQ+KHZhbHVlOiBULCByZXNwb25zZTogUmVzcG9uc2UpOiBXaXRoUmVxdWVzdElEPFQ+IHtcbiAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlIGFzIFdpdGhSZXF1ZXN0SUQ8VD47XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHZhbHVlLCAnX3JlcXVlc3RfaWQnLCB7XG4gICAgdmFsdWU6IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdyZXF1ZXN0LWlkJyksXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gIH0pIGFzIFdpdGhSZXF1ZXN0SUQ8VD47XG59XG5cbi8qKlxuICogQSBzdWJjbGFzcyBvZiBgUHJvbWlzZWAgcHJvdmlkaW5nIGFkZGl0aW9uYWwgaGVscGVyIG1ldGhvZHNcbiAqIGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBTREsuXG4gKi9cbmV4cG9ydCBjbGFzcyBBUElQcm9taXNlPFQ+IGV4dGVuZHMgUHJvbWlzZTxXaXRoUmVxdWVzdElEPFQ+PiB7XG4gIHByaXZhdGUgcGFyc2VkUHJvbWlzZTogUHJvbWlzZTxXaXRoUmVxdWVzdElEPFQ+PiB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlc3BvbnNlUHJvbWlzZTogUHJvbWlzZTxBUElSZXNwb25zZVByb3BzPixcbiAgICBwcml2YXRlIHBhcnNlUmVzcG9uc2U6IChcbiAgICAgIHByb3BzOiBBUElSZXNwb25zZVByb3BzLFxuICAgICkgPT4gUHJvbWlzZU9yVmFsdWU8V2l0aFJlcXVlc3RJRDxUPj4gPSBkZWZhdWx0UGFyc2VSZXNwb25zZSxcbiAgKSB7XG4gICAgc3VwZXIoKHJlc29sdmUpID0+IHtcbiAgICAgIC8vIHRoaXMgaXMgbWF5YmUgYSBiaXQgd2VpcmQgYnV0IHRoaXMgaGFzIHRvIGJlIGEgbm8tb3AgdG8gbm90IGltcGxpY2l0bHlcbiAgICAgIC8vIHBhcnNlIHRoZSByZXNwb25zZSBib2R5OyBpbnN0ZWFkIC50aGVuLCAuY2F0Y2gsIC5maW5hbGx5IGFyZSBvdmVycmlkZGVuXG4gICAgICAvLyB0byBwYXJzZSB0aGUgcmVzcG9uc2VcbiAgICAgIHJlc29sdmUobnVsbCBhcyBhbnkpO1xuICAgIH0pO1xuICB9XG5cbiAgX3RoZW5VbndyYXA8VT4odHJhbnNmb3JtOiAoZGF0YTogVCwgcHJvcHM6IEFQSVJlc3BvbnNlUHJvcHMpID0+IFUpOiBBUElQcm9taXNlPFU+IHtcbiAgICByZXR1cm4gbmV3IEFQSVByb21pc2UodGhpcy5yZXNwb25zZVByb21pc2UsIGFzeW5jIChwcm9wcykgPT5cbiAgICAgIF9hZGRSZXF1ZXN0SUQodHJhbnNmb3JtKGF3YWl0IHRoaXMucGFyc2VSZXNwb25zZShwcm9wcyksIHByb3BzKSwgcHJvcHMucmVzcG9uc2UpLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcmF3IGBSZXNwb25zZWAgaW5zdGFuY2UgaW5zdGVhZCBvZiBwYXJzaW5nIHRoZSByZXNwb25zZVxuICAgKiBkYXRhLlxuICAgKlxuICAgKiBJZiB5b3Ugd2FudCB0byBwYXJzZSB0aGUgcmVzcG9uc2UgYm9keSBidXQgc3RpbGwgZ2V0IHRoZSBgUmVzcG9uc2VgXG4gICAqIGluc3RhbmNlLCB5b3UgY2FuIHVzZSB7QGxpbmsgd2l0aFJlc3BvbnNlKCl9LlxuICAgKlxuICAgKiBcdUQ4M0RcdURDNEIgR2V0dGluZyB0aGUgd3JvbmcgVHlwZVNjcmlwdCB0eXBlIGZvciBgUmVzcG9uc2VgP1xuICAgKiBUcnkgc2V0dGluZyBgXCJtb2R1bGVSZXNvbHV0aW9uXCI6IFwiTm9kZU5leHRcImAgaWYgeW91IGNhbixcbiAgICogb3IgYWRkIG9uZSBvZiB0aGVzZSBpbXBvcnRzIGJlZm9yZSB5b3VyIGZpcnN0IGBpbXBvcnQgXHUyMDI2IGZyb20gJ0BhbnRocm9waWMtYWkvc2RrJ2A6XG4gICAqIC0gYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvbm9kZSdgIChpZiB5b3UncmUgcnVubmluZyBvbiBOb2RlKVxuICAgKiAtIGBpbXBvcnQgJ0BhbnRocm9waWMtYWkvc2RrL3NoaW1zL3dlYidgIChvdGhlcndpc2UpXG4gICAqL1xuICBhc1Jlc3BvbnNlKCk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5yZXNwb25zZVByb21pc2UudGhlbigocCkgPT4gcC5yZXNwb25zZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcGFyc2VkIHJlc3BvbnNlIGRhdGEsIHRoZSByYXcgYFJlc3BvbnNlYCBpbnN0YW5jZSBhbmQgdGhlIElEIG9mIHRoZSByZXF1ZXN0LFxuICAgKiByZXR1cm5lZCB2aWUgdGhlIGByZXF1ZXN0LWlkYCBoZWFkZXIgd2hpY2ggaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmcgcmVxdWVzdHMgYW5kIHJlc3BvcnRpbmdcbiAgICogaXNzdWVzIHRvIEFudGhyb3BpYy5cbiAgICpcbiAgICogSWYgeW91IGp1c3Qgd2FudCB0byBnZXQgdGhlIHJhdyBgUmVzcG9uc2VgIGluc3RhbmNlIHdpdGhvdXQgcGFyc2luZyBpdCxcbiAgICogeW91IGNhbiB1c2Uge0BsaW5rIGFzUmVzcG9uc2UoKX0uXG4gICAqXG4gICAqIFx1RDgzRFx1REM0QiBHZXR0aW5nIHRoZSB3cm9uZyBUeXBlU2NyaXB0IHR5cGUgZm9yIGBSZXNwb25zZWA/XG4gICAqIFRyeSBzZXR0aW5nIGBcIm1vZHVsZVJlc29sdXRpb25cIjogXCJOb2RlTmV4dFwiYCBpZiB5b3UgY2FuLFxuICAgKiBvciBhZGQgb25lIG9mIHRoZXNlIGltcG9ydHMgYmVmb3JlIHlvdXIgZmlyc3QgYGltcG9ydCBcdTIwMjYgZnJvbSAnQGFudGhyb3BpYy1haS9zZGsnYDpcbiAgICogLSBgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy9ub2RlJ2AgKGlmIHlvdSdyZSBydW5uaW5nIG9uIE5vZGUpXG4gICAqIC0gYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvd2ViJ2AgKG90aGVyd2lzZSlcbiAgICovXG4gIGFzeW5jIHdpdGhSZXNwb25zZSgpOiBQcm9taXNlPHsgZGF0YTogVDsgcmVzcG9uc2U6IFJlc3BvbnNlOyByZXF1ZXN0X2lkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkIH0+IHtcbiAgICBjb25zdCBbZGF0YSwgcmVzcG9uc2VdID0gYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMucGFyc2UoKSwgdGhpcy5hc1Jlc3BvbnNlKCldKTtcbiAgICByZXR1cm4geyBkYXRhLCByZXNwb25zZSwgcmVxdWVzdF9pZDogcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3JlcXVlc3QtaWQnKSB9O1xuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZSgpOiBQcm9taXNlPFdpdGhSZXF1ZXN0SUQ8VD4+IHtcbiAgICBpZiAoIXRoaXMucGFyc2VkUHJvbWlzZSkge1xuICAgICAgdGhpcy5wYXJzZWRQcm9taXNlID0gdGhpcy5yZXNwb25zZVByb21pc2UudGhlbih0aGlzLnBhcnNlUmVzcG9uc2UpIGFzIGFueSBhcyBQcm9taXNlPFdpdGhSZXF1ZXN0SUQ8VD4+O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wYXJzZWRQcm9taXNlO1xuICB9XG5cbiAgb3ZlcnJpZGUgdGhlbjxUUmVzdWx0MSA9IFdpdGhSZXF1ZXN0SUQ8VD4sIFRSZXN1bHQyID0gbmV2ZXI+KFxuICAgIG9uZnVsZmlsbGVkPzogKCh2YWx1ZTogV2l0aFJlcXVlc3RJRDxUPikgPT4gVFJlc3VsdDEgfCBQcm9taXNlTGlrZTxUUmVzdWx0MT4pIHwgdW5kZWZpbmVkIHwgbnVsbCxcbiAgICBvbnJlamVjdGVkPzogKChyZWFzb246IGFueSkgPT4gVFJlc3VsdDIgfCBQcm9taXNlTGlrZTxUUmVzdWx0Mj4pIHwgdW5kZWZpbmVkIHwgbnVsbCxcbiAgKTogUHJvbWlzZTxUUmVzdWx0MSB8IFRSZXN1bHQyPiB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UoKS50aGVuKG9uZnVsZmlsbGVkLCBvbnJlamVjdGVkKTtcbiAgfVxuXG4gIG92ZXJyaWRlIGNhdGNoPFRSZXN1bHQgPSBuZXZlcj4oXG4gICAgb25yZWplY3RlZD86ICgocmVhc29uOiBhbnkpID0+IFRSZXN1bHQgfCBQcm9taXNlTGlrZTxUUmVzdWx0PikgfCB1bmRlZmluZWQgfCBudWxsLFxuICApOiBQcm9taXNlPFdpdGhSZXF1ZXN0SUQ8VD4gfCBUUmVzdWx0PiB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UoKS5jYXRjaChvbnJlamVjdGVkKTtcbiAgfVxuXG4gIG92ZXJyaWRlIGZpbmFsbHkob25maW5hbGx5PzogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkIHwgbnVsbCk6IFByb21pc2U8V2l0aFJlcXVlc3RJRDxUPj4ge1xuICAgIHJldHVybiB0aGlzLnBhcnNlKCkuZmluYWxseShvbmZpbmFsbHkpO1xuICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBUElDbGllbnQge1xuICBiYXNlVVJMOiBzdHJpbmc7XG4gIG1heFJldHJpZXM6IG51bWJlcjtcbiAgdGltZW91dDogbnVtYmVyO1xuICBodHRwQWdlbnQ6IEFnZW50IHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgZmV0Y2g6IEZldGNoO1xuICBwcm90ZWN0ZWQgaWRlbXBvdGVuY3lIZWFkZXI/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIGJhc2VVUkwsXG4gICAgbWF4UmV0cmllcyA9IDIsXG4gICAgdGltZW91dCA9IDYwMDAwMCwgLy8gMTAgbWludXRlc1xuICAgIGh0dHBBZ2VudCxcbiAgICBmZXRjaDogb3ZlcnJpZGRlbkZldGNoLFxuICB9OiB7XG4gICAgYmFzZVVSTDogc3RyaW5nO1xuICAgIG1heFJldHJpZXM/OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIGh0dHBBZ2VudDogQWdlbnQgfCB1bmRlZmluZWQ7XG4gICAgZmV0Y2g6IEZldGNoIHwgdW5kZWZpbmVkO1xuICB9KSB7XG4gICAgdGhpcy5iYXNlVVJMID0gYmFzZVVSTDtcbiAgICB0aGlzLm1heFJldHJpZXMgPSB2YWxpZGF0ZVBvc2l0aXZlSW50ZWdlcignbWF4UmV0cmllcycsIG1heFJldHJpZXMpO1xuICAgIHRoaXMudGltZW91dCA9IHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKCd0aW1lb3V0JywgdGltZW91dCk7XG4gICAgdGhpcy5odHRwQWdlbnQgPSBodHRwQWdlbnQ7XG5cbiAgICB0aGlzLmZldGNoID0gb3ZlcnJpZGRlbkZldGNoID8/IGZldGNoO1xuICB9XG5cbiAgcHJvdGVjdGVkIGF1dGhIZWFkZXJzKG9wdHM6IEZpbmFsUmVxdWVzdE9wdGlvbnMpOiBIZWFkZXJzIHtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhpcyB0byBhZGQgeW91ciBvd24gZGVmYXVsdCBoZWFkZXJzLCBmb3IgZXhhbXBsZTpcbiAgICpcbiAgICogIHtcbiAgICogICAgLi4uc3VwZXIuZGVmYXVsdEhlYWRlcnMoKSxcbiAgICogICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAxMjMnLFxuICAgKiAgfVxuICAgKi9cbiAgcHJvdGVjdGVkIGRlZmF1bHRIZWFkZXJzKG9wdHM6IEZpbmFsUmVxdWVzdE9wdGlvbnMpOiBIZWFkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ1VzZXItQWdlbnQnOiB0aGlzLmdldFVzZXJBZ2VudCgpLFxuICAgICAgLi4uZ2V0UGxhdGZvcm1IZWFkZXJzKCksXG4gICAgICAuLi50aGlzLmF1dGhIZWFkZXJzKG9wdHMpLFxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZGVmYXVsdFF1ZXJ5KCk6IERlZmF1bHRRdWVyeSB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhpcyB0byBhZGQgeW91ciBvd24gaGVhZGVycyB2YWxpZGF0aW9uOlxuICAgKi9cbiAgcHJvdGVjdGVkIHZhbGlkYXRlSGVhZGVycyhoZWFkZXJzOiBIZWFkZXJzLCBjdXN0b21IZWFkZXJzOiBIZWFkZXJzKSB7fVxuXG4gIHByb3RlY3RlZCBkZWZhdWx0SWRlbXBvdGVuY3lLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYHN0YWlubGVzcy1ub2RlLXJldHJ5LSR7dXVpZDQoKX1gO1xuICB9XG5cbiAgZ2V0PFJlcSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgnZ2V0JywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBwb3N0PFJlcSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgncG9zdCcsIHBhdGgsIG9wdHMpO1xuICB9XG5cbiAgcGF0Y2g8UmVxLCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdwYXRjaCcsIHBhdGgsIG9wdHMpO1xuICB9XG5cbiAgcHV0PFJlcSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgncHV0JywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBkZWxldGU8UmVxLCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdkZWxldGUnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIHByaXZhdGUgbWV0aG9kUmVxdWVzdDxSZXEsIFJzcD4oXG4gICAgbWV0aG9kOiBIVFRQTWV0aG9kLFxuICAgIHBhdGg6IHN0cmluZyxcbiAgICBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4sXG4gICk6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChcbiAgICAgIFByb21pc2UucmVzb2x2ZShvcHRzKS50aGVuKGFzeW5jIChvcHRzKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvZHkgPVxuICAgICAgICAgIG9wdHMgJiYgaXNCbG9iTGlrZShvcHRzPy5ib2R5KSA/IG5ldyBEYXRhVmlldyhhd2FpdCBvcHRzLmJvZHkuYXJyYXlCdWZmZXIoKSlcbiAgICAgICAgICA6IG9wdHM/LmJvZHkgaW5zdGFuY2VvZiBEYXRhVmlldyA/IG9wdHMuYm9keVxuICAgICAgICAgIDogb3B0cz8uYm9keSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gbmV3IERhdGFWaWV3KG9wdHMuYm9keSlcbiAgICAgICAgICA6IG9wdHMgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KG9wdHM/LmJvZHkpID8gbmV3IERhdGFWaWV3KG9wdHMuYm9keS5idWZmZXIpXG4gICAgICAgICAgOiBvcHRzPy5ib2R5O1xuICAgICAgICByZXR1cm4geyBtZXRob2QsIHBhdGgsIC4uLm9wdHMsIGJvZHkgfTtcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cblxuICBnZXRBUElMaXN0PEl0ZW0sIFBhZ2VDbGFzcyBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPiA9IEFic3RyYWN0UGFnZTxJdGVtPj4oXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIFBhZ2U6IG5ldyAoLi4uYXJnczogYW55W10pID0+IFBhZ2VDbGFzcyxcbiAgICBvcHRzPzogUmVxdWVzdE9wdGlvbnM8YW55PixcbiAgKTogUGFnZVByb21pc2U8UGFnZUNsYXNzLCBJdGVtPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdEFQSUxpc3QoUGFnZSwgeyBtZXRob2Q6ICdnZXQnLCBwYXRoLCAuLi5vcHRzIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVDb250ZW50TGVuZ3RoKGJvZHk6IHVua25vd24pOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5ieXRlTGVuZ3RoKGJvZHksICd1dGY4JykudG9TdHJpbmcoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBUZXh0RW5jb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICBjb25zdCBlbmNvZGVkID0gZW5jb2Rlci5lbmNvZGUoYm9keSk7XG4gICAgICAgIHJldHVybiBlbmNvZGVkLmxlbmd0aC50b1N0cmluZygpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KGJvZHkpKSB7XG4gICAgICByZXR1cm4gYm9keS5ieXRlTGVuZ3RoLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBidWlsZFJlcXVlc3Q8UmVxPihcbiAgICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zPFJlcT4sXG4gICAgeyByZXRyeUNvdW50ID0gMCB9OiB7IHJldHJ5Q291bnQ/OiBudW1iZXIgfSA9IHt9LFxuICApOiB7IHJlcTogUmVxdWVzdEluaXQ7IHVybDogc3RyaW5nOyB0aW1lb3V0OiBudW1iZXIgfSB7XG4gICAgY29uc3QgeyBtZXRob2QsIHBhdGgsIHF1ZXJ5LCBoZWFkZXJzOiBoZWFkZXJzID0ge30gfSA9IG9wdGlvbnM7XG5cbiAgICBjb25zdCBib2R5ID1cbiAgICAgIEFycmF5QnVmZmVyLmlzVmlldyhvcHRpb25zLmJvZHkpIHx8IChvcHRpb25zLl9fYmluYXJ5UmVxdWVzdCAmJiB0eXBlb2Ygb3B0aW9ucy5ib2R5ID09PSAnc3RyaW5nJykgP1xuICAgICAgICBvcHRpb25zLmJvZHlcbiAgICAgIDogaXNNdWx0aXBhcnRCb2R5KG9wdGlvbnMuYm9keSkgPyBvcHRpb25zLmJvZHkuYm9keVxuICAgICAgOiBvcHRpb25zLmJvZHkgPyBKU09OLnN0cmluZ2lmeShvcHRpb25zLmJvZHksIG51bGwsIDIpXG4gICAgICA6IG51bGw7XG4gICAgY29uc3QgY29udGVudExlbmd0aCA9IHRoaXMuY2FsY3VsYXRlQ29udGVudExlbmd0aChib2R5KTtcblxuICAgIGNvbnN0IHVybCA9IHRoaXMuYnVpbGRVUkwocGF0aCEsIHF1ZXJ5KTtcbiAgICBpZiAoJ3RpbWVvdXQnIGluIG9wdGlvbnMpIHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKCd0aW1lb3V0Jywgb3B0aW9ucy50aW1lb3V0KTtcbiAgICBjb25zdCB0aW1lb3V0ID0gb3B0aW9ucy50aW1lb3V0ID8/IHRoaXMudGltZW91dDtcbiAgICBjb25zdCBodHRwQWdlbnQgPSBvcHRpb25zLmh0dHBBZ2VudCA/PyB0aGlzLmh0dHBBZ2VudCA/PyBnZXREZWZhdWx0QWdlbnQodXJsKTtcbiAgICBjb25zdCBtaW5BZ2VudFRpbWVvdXQgPSB0aW1lb3V0ICsgMTAwMDtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgKGh0dHBBZ2VudCBhcyBhbnkpPy5vcHRpb25zPy50aW1lb3V0ID09PSAnbnVtYmVyJyAmJlxuICAgICAgbWluQWdlbnRUaW1lb3V0ID4gKChodHRwQWdlbnQgYXMgYW55KS5vcHRpb25zLnRpbWVvdXQgPz8gMClcbiAgICApIHtcbiAgICAgIC8vIEFsbG93IGFueSBnaXZlbiByZXF1ZXN0IHRvIGJ1bXAgb3VyIGFnZW50IGFjdGl2ZSBzb2NrZXQgdGltZW91dC5cbiAgICAgIC8vIFRoaXMgbWF5IHNlZW0gc3RyYW5nZSwgYnV0IGxlYWtpbmcgYWN0aXZlIHNvY2tldHMgc2hvdWxkIGJlIHJhcmUgYW5kIG5vdCBwYXJ0aWN1bGFybHkgcHJvYmxlbWF0aWMsXG4gICAgICAvLyBhbmQgd2l0aG91dCBtdXRhdGluZyBhZ2VudCB3ZSB3b3VsZCBuZWVkIHRvIGNyZWF0ZSBtb3JlIG9mIHRoZW0uXG4gICAgICAvLyBUaGlzIHRyYWRlb2ZmIG9wdGltaXplcyBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICAoaHR0cEFnZW50IGFzIGFueSkub3B0aW9ucy50aW1lb3V0ID0gbWluQWdlbnRUaW1lb3V0O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlkZW1wb3RlbmN5SGVhZGVyICYmIG1ldGhvZCAhPT0gJ2dldCcpIHtcbiAgICAgIGlmICghb3B0aW9ucy5pZGVtcG90ZW5jeUtleSkgb3B0aW9ucy5pZGVtcG90ZW5jeUtleSA9IHRoaXMuZGVmYXVsdElkZW1wb3RlbmN5S2V5KCk7XG4gICAgICBoZWFkZXJzW3RoaXMuaWRlbXBvdGVuY3lIZWFkZXJdID0gb3B0aW9ucy5pZGVtcG90ZW5jeUtleTtcbiAgICB9XG5cbiAgICBjb25zdCByZXFIZWFkZXJzID0gdGhpcy5idWlsZEhlYWRlcnMoeyBvcHRpb25zLCBoZWFkZXJzLCBjb250ZW50TGVuZ3RoLCByZXRyeUNvdW50IH0pO1xuXG4gICAgY29uc3QgcmVxOiBSZXF1ZXN0SW5pdCA9IHtcbiAgICAgIG1ldGhvZCxcbiAgICAgIC4uLihib2R5ICYmIHsgYm9keTogYm9keSBhcyBhbnkgfSksXG4gICAgICBoZWFkZXJzOiByZXFIZWFkZXJzLFxuICAgICAgLi4uKGh0dHBBZ2VudCAmJiB7IGFnZW50OiBodHRwQWdlbnQgfSksXG4gICAgICAvLyBAdHMtaWdub3JlIG5vZGUtZmV0Y2ggdXNlcyBhIGN1c3RvbSBBYm9ydFNpZ25hbCB0eXBlIHRoYXQgaXNcbiAgICAgIC8vIG5vdCBjb21wYXRpYmxlIHdpdGggc3RhbmRhcmQgd2ViIHR5cGVzXG4gICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsID8/IG51bGwsXG4gICAgfTtcblxuICAgIHJldHVybiB7IHJlcSwgdXJsLCB0aW1lb3V0IH07XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkSGVhZGVycyh7XG4gICAgb3B0aW9ucyxcbiAgICBoZWFkZXJzLFxuICAgIGNvbnRlbnRMZW5ndGgsXG4gICAgcmV0cnlDb3VudCxcbiAgfToge1xuICAgIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnM7XG4gICAgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZD47XG4gICAgY29udGVudExlbmd0aDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgICByZXRyeUNvdW50OiBudW1iZXI7XG4gIH0pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICBjb25zdCByZXFIZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gICAgaWYgKGNvbnRlbnRMZW5ndGgpIHtcbiAgICAgIHJlcUhlYWRlcnNbJ2NvbnRlbnQtbGVuZ3RoJ10gPSBjb250ZW50TGVuZ3RoO1xuICAgIH1cblxuICAgIGNvbnN0IGRlZmF1bHRIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycyhvcHRpb25zKTtcbiAgICBhcHBseUhlYWRlcnNNdXQocmVxSGVhZGVycywgZGVmYXVsdEhlYWRlcnMpO1xuICAgIGFwcGx5SGVhZGVyc011dChyZXFIZWFkZXJzLCBoZWFkZXJzKTtcblxuICAgIC8vIGxldCBidWlsdGluIGZldGNoIHNldCB0aGUgQ29udGVudC1UeXBlIGZvciBtdWx0aXBhcnQgYm9kaWVzXG4gICAgaWYgKGlzTXVsdGlwYXJ0Qm9keShvcHRpb25zLmJvZHkpICYmIHNoaW1zS2luZCAhPT0gJ25vZGUnKSB7XG4gICAgICBkZWxldGUgcmVxSGVhZGVyc1snY29udGVudC10eXBlJ107XG4gICAgfVxuXG4gICAgLy8gRG9uJ3Qgc2V0IHRoZSByZXRyeSBjb3VudCBoZWFkZXIgaWYgaXQgd2FzIGFscmVhZHkgc2V0IG9yIHJlbW92ZWQgdGhyb3VnaCBkZWZhdWx0IGhlYWRlcnMgb3IgYnkgdGhlXG4gICAgLy8gY2FsbGVyLiBXZSBjaGVjayBgZGVmYXVsdEhlYWRlcnNgIGFuZCBgaGVhZGVyc2AsIHdoaWNoIGNhbiBjb250YWluIG51bGxzLCBpbnN0ZWFkIG9mIGByZXFIZWFkZXJzYCB0b1xuICAgIC8vIGFjY291bnQgZm9yIHRoZSByZW1vdmFsIGNhc2UuXG4gICAgaWYgKFxuICAgICAgZ2V0SGVhZGVyKGRlZmF1bHRIZWFkZXJzLCAneC1zdGFpbmxlc3MtcmV0cnktY291bnQnKSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICBnZXRIZWFkZXIoaGVhZGVycywgJ3gtc3RhaW5sZXNzLXJldHJ5LWNvdW50JykgPT09IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgcmVxSGVhZGVyc1sneC1zdGFpbmxlc3MtcmV0cnktY291bnQnXSA9IFN0cmluZyhyZXRyeUNvdW50KTtcbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlSGVhZGVycyhyZXFIZWFkZXJzLCBoZWFkZXJzKTtcblxuICAgIHJldHVybiByZXFIZWFkZXJzO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYXMgYSBjYWxsYmFjayBmb3IgbXV0YXRpbmcgdGhlIGdpdmVuIGBGaW5hbFJlcXVlc3RPcHRpb25zYCBvYmplY3QuXG4gICAqL1xuICBwcm90ZWN0ZWQgYXN5bmMgcHJlcGFyZU9wdGlvbnMob3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge31cblxuICAvKipcbiAgICogVXNlZCBhcyBhIGNhbGxiYWNrIGZvciBtdXRhdGluZyB0aGUgZ2l2ZW4gYFJlcXVlc3RJbml0YCBvYmplY3QuXG4gICAqXG4gICAqIFRoaXMgaXMgdXNlZnVsIGZvciBjYXNlcyB3aGVyZSB5b3Ugd2FudCB0byBhZGQgY2VydGFpbiBoZWFkZXJzIGJhc2VkIG9mZiBvZlxuICAgKiB0aGUgcmVxdWVzdCBwcm9wZXJ0aWVzLCBlLmcuIGBtZXRob2RgIG9yIGB1cmxgLlxuICAgKi9cbiAgcHJvdGVjdGVkIGFzeW5jIHByZXBhcmVSZXF1ZXN0KFxuICAgIHJlcXVlc3Q6IFJlcXVlc3RJbml0LFxuICAgIHsgdXJsLCBvcHRpb25zIH06IHsgdXJsOiBzdHJpbmc7IG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnMgfSxcbiAgKTogUHJvbWlzZTx2b2lkPiB7fVxuXG4gIHByb3RlY3RlZCBwYXJzZUhlYWRlcnMoaGVhZGVyczogSGVhZGVyc0luaXQgfCBudWxsIHwgdW5kZWZpbmVkKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgcmV0dXJuIChcbiAgICAgICFoZWFkZXJzID8ge31cbiAgICAgIDogU3ltYm9sLml0ZXJhdG9yIGluIGhlYWRlcnMgP1xuICAgICAgICBPYmplY3QuZnJvbUVudHJpZXMoQXJyYXkuZnJvbShoZWFkZXJzIGFzIEl0ZXJhYmxlPHN0cmluZ1tdPikubWFwKChoZWFkZXIpID0+IFsuLi5oZWFkZXJdKSlcbiAgICAgIDogeyAuLi5oZWFkZXJzIH1cbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIG1ha2VTdGF0dXNFcnJvcihcbiAgICBzdGF0dXM6IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgICBlcnJvcjogT2JqZWN0IHwgdW5kZWZpbmVkLFxuICAgIG1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBoZWFkZXJzOiBIZWFkZXJzIHwgdW5kZWZpbmVkLFxuICApOiBBUElFcnJvciB7XG4gICAgcmV0dXJuIEFQSUVycm9yLmdlbmVyYXRlKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICB9XG5cbiAgcmVxdWVzdDxSZXEsIFJzcD4oXG4gICAgb3B0aW9uczogUHJvbWlzZU9yVmFsdWU8RmluYWxSZXF1ZXN0T3B0aW9uczxSZXE+PixcbiAgICByZW1haW5pbmdSZXRyaWVzOiBudW1iZXIgfCBudWxsID0gbnVsbCxcbiAgKTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gbmV3IEFQSVByb21pc2UodGhpcy5tYWtlUmVxdWVzdChvcHRpb25zLCByZW1haW5pbmdSZXRyaWVzKSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0PFJlcT4oXG4gICAgb3B0aW9uc0lucHV0OiBQcm9taXNlT3JWYWx1ZTxGaW5hbFJlcXVlc3RPcHRpb25zPFJlcT4+LFxuICAgIHJldHJpZXNSZW1haW5pbmc6IG51bWJlciB8IG51bGwsXG4gICk6IFByb21pc2U8QVBJUmVzcG9uc2VQcm9wcz4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBvcHRpb25zSW5wdXQ7XG4gICAgY29uc3QgbWF4UmV0cmllcyA9IG9wdGlvbnMubWF4UmV0cmllcyA/PyB0aGlzLm1heFJldHJpZXM7XG4gICAgaWYgKHJldHJpZXNSZW1haW5pbmcgPT0gbnVsbCkge1xuICAgICAgcmV0cmllc1JlbWFpbmluZyA9IG1heFJldHJpZXM7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5wcmVwYXJlT3B0aW9ucyhvcHRpb25zKTtcblxuICAgIGNvbnN0IHsgcmVxLCB1cmwsIHRpbWVvdXQgfSA9IHRoaXMuYnVpbGRSZXF1ZXN0KG9wdGlvbnMsIHsgcmV0cnlDb3VudDogbWF4UmV0cmllcyAtIHJldHJpZXNSZW1haW5pbmcgfSk7XG5cbiAgICBhd2FpdCB0aGlzLnByZXBhcmVSZXF1ZXN0KHJlcSwgeyB1cmwsIG9wdGlvbnMgfSk7XG5cbiAgICBkZWJ1ZygncmVxdWVzdCcsIHVybCwgb3B0aW9ucywgcmVxLmhlYWRlcnMpO1xuXG4gICAgaWYgKG9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJVXNlckFib3J0RXJyb3IoKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaFdpdGhUaW1lb3V0KHVybCwgcmVxLCB0aW1lb3V0LCBjb250cm9sbGVyKS5jYXRjaChjYXN0VG9FcnJvcik7XG5cbiAgICBpZiAocmVzcG9uc2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgaWYgKG9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgICAgfVxuICAgICAgaWYgKHJldHJpZXNSZW1haW5pbmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmV0cnlSZXF1ZXN0KG9wdGlvbnMsIHJldHJpZXNSZW1haW5pbmcpO1xuICAgICAgfVxuICAgICAgaWYgKHJlc3BvbnNlLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICB0aHJvdyBuZXcgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcigpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEFQSUNvbm5lY3Rpb25FcnJvcih7IGNhdXNlOiByZXNwb25zZSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSBjcmVhdGVSZXNwb25zZUhlYWRlcnMocmVzcG9uc2UuaGVhZGVycyk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBpZiAocmV0cmllc1JlbWFpbmluZyAmJiB0aGlzLnNob3VsZFJldHJ5KHJlc3BvbnNlKSkge1xuICAgICAgICBjb25zdCByZXRyeU1lc3NhZ2UgPSBgcmV0cnlpbmcsICR7cmV0cmllc1JlbWFpbmluZ30gYXR0ZW1wdHMgcmVtYWluaW5nYDtcbiAgICAgICAgZGVidWcoYHJlc3BvbnNlIChlcnJvcjsgJHtyZXRyeU1lc3NhZ2V9KWAsIHJlc3BvbnNlLnN0YXR1cywgdXJsLCByZXNwb25zZUhlYWRlcnMpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZXRyeVJlcXVlc3Qob3B0aW9ucywgcmV0cmllc1JlbWFpbmluZywgcmVzcG9uc2VIZWFkZXJzKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZXJyVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoZSkgPT4gY2FzdFRvRXJyb3IoZSkubWVzc2FnZSk7XG4gICAgICBjb25zdCBlcnJKU09OID0gc2FmZUpTT04oZXJyVGV4dCk7XG4gICAgICBjb25zdCBlcnJNZXNzYWdlID0gZXJySlNPTiA/IHVuZGVmaW5lZCA6IGVyclRleHQ7XG4gICAgICBjb25zdCByZXRyeU1lc3NhZ2UgPSByZXRyaWVzUmVtYWluaW5nID8gYChlcnJvcjsgbm8gbW9yZSByZXRyaWVzIGxlZnQpYCA6IGAoZXJyb3I7IG5vdCByZXRyeWFibGUpYDtcblxuICAgICAgZGVidWcoYHJlc3BvbnNlIChlcnJvcjsgJHtyZXRyeU1lc3NhZ2V9KWAsIHJlc3BvbnNlLnN0YXR1cywgdXJsLCByZXNwb25zZUhlYWRlcnMsIGVyck1lc3NhZ2UpO1xuXG4gICAgICBjb25zdCBlcnIgPSB0aGlzLm1ha2VTdGF0dXNFcnJvcihyZXNwb25zZS5zdGF0dXMsIGVyckpTT04sIGVyck1lc3NhZ2UsIHJlc3BvbnNlSGVhZGVycyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgcmVzcG9uc2UsIG9wdGlvbnMsIGNvbnRyb2xsZXIgfTtcbiAgfVxuXG4gIHJlcXVlc3RBUElMaXN0PEl0ZW0gPSB1bmtub3duLCBQYWdlQ2xhc3MgZXh0ZW5kcyBBYnN0cmFjdFBhZ2U8SXRlbT4gPSBBYnN0cmFjdFBhZ2U8SXRlbT4+KFxuICAgIFBhZ2U6IG5ldyAoLi4uYXJnczogQ29uc3RydWN0b3JQYXJhbWV0ZXJzPHR5cGVvZiBBYnN0cmFjdFBhZ2U+KSA9PiBQYWdlQ2xhc3MsXG4gICAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyxcbiAgKTogUGFnZVByb21pc2U8UGFnZUNsYXNzLCBJdGVtPiB7XG4gICAgY29uc3QgcmVxdWVzdCA9IHRoaXMubWFrZVJlcXVlc3Qob3B0aW9ucywgbnVsbCk7XG4gICAgcmV0dXJuIG5ldyBQYWdlUHJvbWlzZTxQYWdlQ2xhc3MsIEl0ZW0+KHRoaXMsIHJlcXVlc3QsIFBhZ2UpO1xuICB9XG5cbiAgYnVpbGRVUkw8UmVxPihwYXRoOiBzdHJpbmcsIHF1ZXJ5OiBSZXEgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcbiAgICBjb25zdCB1cmwgPVxuICAgICAgaXNBYnNvbHV0ZVVSTChwYXRoKSA/XG4gICAgICAgIG5ldyBVUkwocGF0aClcbiAgICAgIDogbmV3IFVSTCh0aGlzLmJhc2VVUkwgKyAodGhpcy5iYXNlVVJMLmVuZHNXaXRoKCcvJykgJiYgcGF0aC5zdGFydHNXaXRoKCcvJykgPyBwYXRoLnNsaWNlKDEpIDogcGF0aCkpO1xuXG4gICAgY29uc3QgZGVmYXVsdFF1ZXJ5ID0gdGhpcy5kZWZhdWx0UXVlcnkoKTtcbiAgICBpZiAoIWlzRW1wdHlPYmooZGVmYXVsdFF1ZXJ5KSkge1xuICAgICAgcXVlcnkgPSB7IC4uLmRlZmF1bHRRdWVyeSwgLi4ucXVlcnkgfSBhcyBSZXE7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBxdWVyeSA9PT0gJ29iamVjdCcgJiYgcXVlcnkgJiYgIUFycmF5LmlzQXJyYXkocXVlcnkpKSB7XG4gICAgICB1cmwuc2VhcmNoID0gdGhpcy5zdHJpbmdpZnlRdWVyeShxdWVyeSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN0cmluZ2lmeVF1ZXJ5KHF1ZXJ5OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHN0cmluZyB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KVxuICAgICAgLmZpbHRlcigoW18sIHZhbHVlXSkgPT4gdHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJylcbiAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICAgIGBDYW5ub3Qgc3RyaW5naWZ5IHR5cGUgJHt0eXBlb2YgdmFsdWV9OyBFeHBlY3RlZCBzdHJpbmcsIG51bWJlciwgYm9vbGVhbiwgb3IgbnVsbC4gSWYgeW91IG5lZWQgdG8gcGFzcyBuZXN0ZWQgcXVlcnkgcGFyYW1ldGVycywgeW91IGNhbiBtYW51YWxseSBlbmNvZGUgdGhlbSwgZS5nLiB7IHF1ZXJ5OiB7ICdmb29ba2V5MV0nOiB2YWx1ZTEsICdmb29ba2V5Ml0nOiB2YWx1ZTIgfSB9LCBhbmQgcGxlYXNlIG9wZW4gYSBHaXRIdWIgaXNzdWUgcmVxdWVzdGluZyBiZXR0ZXIgc3VwcG9ydCBmb3IgeW91ciB1c2UgY2FzZS5gLFxuICAgICAgICApO1xuICAgICAgfSlcbiAgICAgIC5qb2luKCcmJyk7XG4gIH1cblxuICBhc3luYyBmZXRjaFdpdGhUaW1lb3V0KFxuICAgIHVybDogUmVxdWVzdEluZm8sXG4gICAgaW5pdDogUmVxdWVzdEluaXQgfCB1bmRlZmluZWQsXG4gICAgbXM6IG51bWJlcixcbiAgICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIsXG4gICk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICBjb25zdCB7IHNpZ25hbCwgLi4ub3B0aW9ucyB9ID0gaW5pdCB8fCB7fTtcbiAgICBpZiAoc2lnbmFsKSBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiBjb250cm9sbGVyLmFib3J0KCkpO1xuXG4gICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCBtcyk7XG5cbiAgICBjb25zdCBmZXRjaE9wdGlvbnMgPSB7XG4gICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsIGFzIGFueSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfTtcbiAgICBpZiAoZmV0Y2hPcHRpb25zLm1ldGhvZCkge1xuICAgICAgLy8gQ3VzdG9tIG1ldGhvZHMgbGlrZSAncGF0Y2gnIG5lZWQgdG8gYmUgdXBwZXJjYXNlZFxuICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMvdW5kaWNpL2lzc3Vlcy8yMjk0XG4gICAgICBmZXRjaE9wdGlvbnMubWV0aG9kID0gZmV0Y2hPcHRpb25zLm1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAvLyB1c2UgdW5kZWZpbmVkIHRoaXMgYmluZGluZzsgZmV0Y2ggZXJyb3JzIGlmIGJvdW5kIHRvIHNvbWV0aGluZyBlbHNlIGluIGJyb3dzZXIvY2xvdWRmbGFyZVxuICAgICAgdGhpcy5mZXRjaC5jYWxsKHVuZGVmaW5lZCwgdXJsLCBmZXRjaE9wdGlvbnMpLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHNob3VsZFJldHJ5KHJlc3BvbnNlOiBSZXNwb25zZSk6IGJvb2xlYW4ge1xuICAgIC8vIE5vdGUgdGhpcyBpcyBub3QgYSBzdGFuZGFyZCBoZWFkZXIuXG4gICAgY29uc3Qgc2hvdWxkUmV0cnlIZWFkZXIgPSByZXNwb25zZS5oZWFkZXJzLmdldCgneC1zaG91bGQtcmV0cnknKTtcblxuICAgIC8vIElmIHRoZSBzZXJ2ZXIgZXhwbGljaXRseSBzYXlzIHdoZXRoZXIgb3Igbm90IHRvIHJldHJ5LCBvYmV5LlxuICAgIGlmIChzaG91bGRSZXRyeUhlYWRlciA9PT0gJ3RydWUnKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoc2hvdWxkUmV0cnlIZWFkZXIgPT09ICdmYWxzZScpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFJldHJ5IG9uIHJlcXVlc3QgdGltZW91dHMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA4KSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFJldHJ5IG9uIGxvY2sgdGltZW91dHMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFJldHJ5IG9uIHJhdGUgbGltaXRzLlxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQyOSkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBSZXRyeSBpbnRlcm5hbCBlcnJvcnMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA1MDApIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZXRyeVJlcXVlc3QoXG4gICAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyxcbiAgICByZXRyaWVzUmVtYWluaW5nOiBudW1iZXIsXG4gICAgcmVzcG9uc2VIZWFkZXJzPzogSGVhZGVycyB8IHVuZGVmaW5lZCxcbiAgKTogUHJvbWlzZTxBUElSZXNwb25zZVByb3BzPiB7XG4gICAgbGV0IHRpbWVvdXRNaWxsaXM6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAgIC8vIE5vdGUgdGhlIGByZXRyeS1hZnRlci1tc2AgaGVhZGVyIG1heSBub3QgYmUgc3RhbmRhcmQsIGJ1dCBpcyBhIGdvb2QgaWRlYSBhbmQgd2UnZCBsaWtlIHByb2FjdGl2ZSBzdXBwb3J0IGZvciBpdC5cbiAgICBjb25zdCByZXRyeUFmdGVyTWlsbGlzSGVhZGVyID0gcmVzcG9uc2VIZWFkZXJzPy5bJ3JldHJ5LWFmdGVyLW1zJ107XG4gICAgaWYgKHJldHJ5QWZ0ZXJNaWxsaXNIZWFkZXIpIHtcbiAgICAgIGNvbnN0IHRpbWVvdXRNcyA9IHBhcnNlRmxvYXQocmV0cnlBZnRlck1pbGxpc0hlYWRlcik7XG4gICAgICBpZiAoIU51bWJlci5pc05hTih0aW1lb3V0TXMpKSB7XG4gICAgICAgIHRpbWVvdXRNaWxsaXMgPSB0aW1lb3V0TXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWJvdXQgdGhlIFJldHJ5LUFmdGVyIGhlYWRlcjogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRUUC9IZWFkZXJzL1JldHJ5LUFmdGVyXG4gICAgY29uc3QgcmV0cnlBZnRlckhlYWRlciA9IHJlc3BvbnNlSGVhZGVycz8uWydyZXRyeS1hZnRlciddO1xuICAgIGlmIChyZXRyeUFmdGVySGVhZGVyICYmICF0aW1lb3V0TWlsbGlzKSB7XG4gICAgICBjb25zdCB0aW1lb3V0U2Vjb25kcyA9IHBhcnNlRmxvYXQocmV0cnlBZnRlckhlYWRlcik7XG4gICAgICBpZiAoIU51bWJlci5pc05hTih0aW1lb3V0U2Vjb25kcykpIHtcbiAgICAgICAgdGltZW91dE1pbGxpcyA9IHRpbWVvdXRTZWNvbmRzICogMTAwMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVvdXRNaWxsaXMgPSBEYXRlLnBhcnNlKHJldHJ5QWZ0ZXJIZWFkZXIpIC0gRGF0ZS5ub3coKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgQVBJIGFza3MgdXMgdG8gd2FpdCBhIGNlcnRhaW4gYW1vdW50IG9mIHRpbWUgKGFuZCBpdCdzIGEgcmVhc29uYWJsZSBhbW91bnQpLFxuICAgIC8vIGp1c3QgZG8gd2hhdCBpdCBzYXlzLCBidXQgb3RoZXJ3aXNlIGNhbGN1bGF0ZSBhIGRlZmF1bHRcbiAgICBpZiAoISh0aW1lb3V0TWlsbGlzICYmIDAgPD0gdGltZW91dE1pbGxpcyAmJiB0aW1lb3V0TWlsbGlzIDwgNjAgKiAxMDAwKSkge1xuICAgICAgY29uc3QgbWF4UmV0cmllcyA9IG9wdGlvbnMubWF4UmV0cmllcyA/PyB0aGlzLm1heFJldHJpZXM7XG4gICAgICB0aW1lb3V0TWlsbGlzID0gdGhpcy5jYWxjdWxhdGVEZWZhdWx0UmV0cnlUaW1lb3V0TWlsbGlzKHJldHJpZXNSZW1haW5pbmcsIG1heFJldHJpZXMpO1xuICAgIH1cbiAgICBhd2FpdCBzbGVlcCh0aW1lb3V0TWlsbGlzKTtcblxuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KG9wdGlvbnMsIHJldHJpZXNSZW1haW5pbmcgLSAxKTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlRGVmYXVsdFJldHJ5VGltZW91dE1pbGxpcyhyZXRyaWVzUmVtYWluaW5nOiBudW1iZXIsIG1heFJldHJpZXM6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgaW5pdGlhbFJldHJ5RGVsYXkgPSAwLjU7XG4gICAgY29uc3QgbWF4UmV0cnlEZWxheSA9IDguMDtcblxuICAgIGNvbnN0IG51bVJldHJpZXMgPSBtYXhSZXRyaWVzIC0gcmV0cmllc1JlbWFpbmluZztcblxuICAgIC8vIEFwcGx5IGV4cG9uZW50aWFsIGJhY2tvZmYsIGJ1dCBub3QgbW9yZSB0aGFuIHRoZSBtYXguXG4gICAgY29uc3Qgc2xlZXBTZWNvbmRzID0gTWF0aC5taW4oaW5pdGlhbFJldHJ5RGVsYXkgKiBNYXRoLnBvdygyLCBudW1SZXRyaWVzKSwgbWF4UmV0cnlEZWxheSk7XG5cbiAgICAvLyBBcHBseSBzb21lIGppdHRlciwgdGFrZSB1cCB0byBhdCBtb3N0IDI1IHBlcmNlbnQgb2YgdGhlIHJldHJ5IHRpbWUuXG4gICAgY29uc3Qgaml0dGVyID0gMSAtIE1hdGgucmFuZG9tKCkgKiAwLjI1O1xuXG4gICAgcmV0dXJuIHNsZWVwU2Vjb25kcyAqIGppdHRlciAqIDEwMDA7XG4gIH1cblxuICBwcml2YXRlIGdldFVzZXJBZ2VudCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9L0pTICR7VkVSU0lPTn1gO1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIFBhZ2VJbmZvID0geyB1cmw6IFVSTCB9IHwgeyBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbCB9O1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RQYWdlPEl0ZW0+IGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZTxJdGVtPiB7XG4gICNjbGllbnQ6IEFQSUNsaWVudDtcbiAgcHJvdGVjdGVkIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnM7XG5cbiAgcHJvdGVjdGVkIHJlc3BvbnNlOiBSZXNwb25zZTtcbiAgcHJvdGVjdGVkIGJvZHk6IHVua25vd247XG5cbiAgY29uc3RydWN0b3IoY2xpZW50OiBBUElDbGllbnQsIHJlc3BvbnNlOiBSZXNwb25zZSwgYm9keTogdW5rbm93biwgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucykge1xuICAgIHRoaXMuI2NsaWVudCA9IGNsaWVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLmJvZHkgPSBib2R5O1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIFVzZSBuZXh0UGFnZUluZm8gaW5zdGVhZFxuICAgKi9cbiAgYWJzdHJhY3QgbmV4dFBhZ2VQYXJhbXMoKTogUGFydGlhbDxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4gfCBudWxsO1xuICBhYnN0cmFjdCBuZXh0UGFnZUluZm8oKTogUGFnZUluZm8gfCBudWxsO1xuXG4gIGFic3RyYWN0IGdldFBhZ2luYXRlZEl0ZW1zKCk6IEl0ZW1bXTtcblxuICBoYXNOZXh0UGFnZSgpOiBib29sZWFuIHtcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuZ2V0UGFnaW5hdGVkSXRlbXMoKTtcbiAgICBpZiAoIWl0ZW1zLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLm5leHRQYWdlSW5mbygpICE9IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXROZXh0UGFnZSgpOiBQcm9taXNlPHRoaXM+IHtcbiAgICBjb25zdCBuZXh0SW5mbyA9IHRoaXMubmV4dFBhZ2VJbmZvKCk7XG4gICAgaWYgKCFuZXh0SW5mbykge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICAnTm8gbmV4dCBwYWdlIGV4cGVjdGVkOyBwbGVhc2UgY2hlY2sgYC5oYXNOZXh0UGFnZSgpYCBiZWZvcmUgY2FsbGluZyBgLmdldE5leHRQYWdlKClgLicsXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBuZXh0T3B0aW9ucyA9IHsgLi4udGhpcy5vcHRpb25zIH07XG4gICAgaWYgKCdwYXJhbXMnIGluIG5leHRJbmZvICYmIHR5cGVvZiBuZXh0T3B0aW9ucy5xdWVyeSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG5leHRPcHRpb25zLnF1ZXJ5ID0geyAuLi5uZXh0T3B0aW9ucy5xdWVyeSwgLi4ubmV4dEluZm8ucGFyYW1zIH07XG4gICAgfSBlbHNlIGlmICgndXJsJyBpbiBuZXh0SW5mbykge1xuICAgICAgY29uc3QgcGFyYW1zID0gWy4uLk9iamVjdC5lbnRyaWVzKG5leHRPcHRpb25zLnF1ZXJ5IHx8IHt9KSwgLi4ubmV4dEluZm8udXJsLnNlYXJjaFBhcmFtcy5lbnRyaWVzKCldO1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgcGFyYW1zKSB7XG4gICAgICAgIG5leHRJbmZvLnVybC5zZWFyY2hQYXJhbXMuc2V0KGtleSwgdmFsdWUgYXMgYW55KTtcbiAgICAgIH1cbiAgICAgIG5leHRPcHRpb25zLnF1ZXJ5ID0gdW5kZWZpbmVkO1xuICAgICAgbmV4dE9wdGlvbnMucGF0aCA9IG5leHRJbmZvLnVybC50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy4jY2xpZW50LnJlcXVlc3RBUElMaXN0KHRoaXMuY29uc3RydWN0b3IgYXMgYW55LCBuZXh0T3B0aW9ucyk7XG4gIH1cblxuICBhc3luYyAqaXRlclBhZ2VzKCk6IEFzeW5jR2VuZXJhdG9yPHRoaXM+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICBsZXQgcGFnZTogdGhpcyA9IHRoaXM7XG4gICAgeWllbGQgcGFnZTtcbiAgICB3aGlsZSAocGFnZS5oYXNOZXh0UGFnZSgpKSB7XG4gICAgICBwYWdlID0gYXdhaXQgcGFnZS5nZXROZXh0UGFnZSgpO1xuICAgICAgeWllbGQgcGFnZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0dlbmVyYXRvcjxJdGVtPiB7XG4gICAgZm9yIGF3YWl0IChjb25zdCBwYWdlIG9mIHRoaXMuaXRlclBhZ2VzKCkpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBwYWdlLmdldFBhZ2luYXRlZEl0ZW1zKCkpIHtcbiAgICAgICAgeWllbGQgaXRlbTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHN1YmNsYXNzIG9mIFByb21pc2Ugd2lsbCByZXNvbHZlIHRvIGFuIGluc3RhbnRpYXRlZCBQYWdlIG9uY2UgdGhlIHJlcXVlc3QgY29tcGxldGVzLlxuICpcbiAqIEl0IGFsc28gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlIHRvIGFsbG93IGF1dG8tcGFnaW5hdGluZyBpdGVyYXRpb24gb24gYW4gdW5hd2FpdGVkIGxpc3QgY2FsbCwgZWc6XG4gKlxuICogICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGNsaWVudC5pdGVtcy5saXN0KCkpIHtcbiAqICAgICAgY29uc29sZS5sb2coaXRlbSlcbiAqICAgIH1cbiAqL1xuZXhwb3J0IGNsYXNzIFBhZ2VQcm9taXNlPFxuICAgIFBhZ2VDbGFzcyBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPixcbiAgICBJdGVtID0gUmV0dXJuVHlwZTxQYWdlQ2xhc3NbJ2dldFBhZ2luYXRlZEl0ZW1zJ10+W251bWJlcl0sXG4gID5cbiAgZXh0ZW5kcyBBUElQcm9taXNlPFBhZ2VDbGFzcz5cbiAgaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPEl0ZW0+XG57XG4gIGNvbnN0cnVjdG9yKFxuICAgIGNsaWVudDogQVBJQ2xpZW50LFxuICAgIHJlcXVlc3Q6IFByb21pc2U8QVBJUmVzcG9uc2VQcm9wcz4sXG4gICAgUGFnZTogbmV3ICguLi5hcmdzOiBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8dHlwZW9mIEFic3RyYWN0UGFnZT4pID0+IFBhZ2VDbGFzcyxcbiAgKSB7XG4gICAgc3VwZXIoXG4gICAgICByZXF1ZXN0LFxuICAgICAgYXN5bmMgKHByb3BzKSA9PlxuICAgICAgICBuZXcgUGFnZShcbiAgICAgICAgICBjbGllbnQsXG4gICAgICAgICAgcHJvcHMucmVzcG9uc2UsXG4gICAgICAgICAgYXdhaXQgZGVmYXVsdFBhcnNlUmVzcG9uc2UocHJvcHMpLFxuICAgICAgICAgIHByb3BzLm9wdGlvbnMsXG4gICAgICAgICkgYXMgV2l0aFJlcXVlc3RJRDxQYWdlQ2xhc3M+LFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQWxsb3cgYXV0by1wYWdpbmF0aW5nIGl0ZXJhdGlvbiBvbiBhbiB1bmF3YWl0ZWQgbGlzdCBjYWxsLCBlZzpcbiAgICpcbiAgICogICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGNsaWVudC5pdGVtcy5saXN0KCkpIHtcbiAgICogICAgICBjb25zb2xlLmxvZyhpdGVtKVxuICAgKiAgICB9XG4gICAqL1xuICBhc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0dlbmVyYXRvcjxJdGVtPiB7XG4gICAgY29uc3QgcGFnZSA9IGF3YWl0IHRoaXM7XG4gICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIHBhZ2UpIHtcbiAgICAgIHlpZWxkIGl0ZW07XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVSZXNwb25zZUhlYWRlcnMgPSAoXG4gIGhlYWRlcnM6IEF3YWl0ZWQ8UmV0dXJuVHlwZTxGZXRjaD4+WydoZWFkZXJzJ10sXG4pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm94eShcbiAgICBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBoZWFkZXJzLmVudHJpZXMoKSxcbiAgICApLFxuICAgIHtcbiAgICAgIGdldCh0YXJnZXQsIG5hbWUpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gbmFtZS50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gdGFyZ2V0W2tleS50b0xvd2VyQ2FzZSgpXSB8fCB0YXJnZXRba2V5XTtcbiAgICAgIH0sXG4gICAgfSxcbiAgKTtcbn07XG5cbnR5cGUgSFRUUE1ldGhvZCA9ICdnZXQnIHwgJ3Bvc3QnIHwgJ3B1dCcgfCAncGF0Y2gnIHwgJ2RlbGV0ZSc7XG5cbmV4cG9ydCB0eXBlIFJlcXVlc3RDbGllbnQgPSB7IGZldGNoOiBGZXRjaCB9O1xuZXhwb3J0IHR5cGUgSGVhZGVycyA9IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ+O1xuZXhwb3J0IHR5cGUgRGVmYXVsdFF1ZXJ5ID0gUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPjtcbmV4cG9ydCB0eXBlIEtleXNFbnVtPFQ+ID0geyBbUCBpbiBrZXlvZiBSZXF1aXJlZDxUPl06IHRydWUgfTtcblxuZXhwb3J0IHR5cGUgUmVxdWVzdE9wdGlvbnM8XG4gIFJlcSA9IHVua25vd24gfCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IFJlYWRhYmxlIHwgQmxvYkxpa2UgfCBBcnJheUJ1ZmZlclZpZXcgfCBBcnJheUJ1ZmZlcixcbj4gPSB7XG4gIG1ldGhvZD86IEhUVFBNZXRob2Q7XG4gIHBhdGg/OiBzdHJpbmc7XG4gIHF1ZXJ5PzogUmVxIHwgdW5kZWZpbmVkO1xuICBib2R5PzogUmVxIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgaGVhZGVycz86IEhlYWRlcnMgfCB1bmRlZmluZWQ7XG5cbiAgbWF4UmV0cmllcz86IG51bWJlcjtcbiAgc3RyZWFtPzogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbiAgdGltZW91dD86IG51bWJlcjtcbiAgaHR0cEFnZW50PzogQWdlbnQ7XG4gIHNpZ25hbD86IEFib3J0U2lnbmFsIHwgdW5kZWZpbmVkIHwgbnVsbDtcbiAgaWRlbXBvdGVuY3lLZXk/OiBzdHJpbmc7XG5cbiAgX19iaW5hcnlSZXF1ZXN0PzogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbiAgX19iaW5hcnlSZXNwb25zZT86IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG4gIF9fc3RyZWFtQ2xhc3M/OiB0eXBlb2YgU3RyZWFtO1xufTtcblxuLy8gVGhpcyBpcyByZXF1aXJlZCBzbyB0aGF0IHdlIGNhbiBkZXRlcm1pbmUgaWYgYSBnaXZlbiBvYmplY3QgbWF0Y2hlcyB0aGUgUmVxdWVzdE9wdGlvbnNcbi8vIHR5cGUgYXQgcnVudGltZS4gV2hpbGUgdGhpcyByZXF1aXJlcyBkdXBsaWNhdGlvbiwgaXQgaXMgZW5mb3JjZWQgYnkgdGhlIFR5cGVTY3JpcHRcbi8vIGNvbXBpbGVyIHN1Y2ggdGhhdCBhbnkgbWlzc2luZyAvIGV4dHJhbmVvdXMga2V5cyB3aWxsIGNhdXNlIGFuIGVycm9yLlxuY29uc3QgcmVxdWVzdE9wdGlvbnNLZXlzOiBLZXlzRW51bTxSZXF1ZXN0T3B0aW9ucz4gPSB7XG4gIG1ldGhvZDogdHJ1ZSxcbiAgcGF0aDogdHJ1ZSxcbiAgcXVlcnk6IHRydWUsXG4gIGJvZHk6IHRydWUsXG4gIGhlYWRlcnM6IHRydWUsXG5cbiAgbWF4UmV0cmllczogdHJ1ZSxcbiAgc3RyZWFtOiB0cnVlLFxuICB0aW1lb3V0OiB0cnVlLFxuICBodHRwQWdlbnQ6IHRydWUsXG4gIHNpZ25hbDogdHJ1ZSxcbiAgaWRlbXBvdGVuY3lLZXk6IHRydWUsXG5cbiAgX19iaW5hcnlSZXF1ZXN0OiB0cnVlLFxuICBfX2JpbmFyeVJlc3BvbnNlOiB0cnVlLFxuICBfX3N0cmVhbUNsYXNzOiB0cnVlLFxufTtcblxuZXhwb3J0IGNvbnN0IGlzUmVxdWVzdE9wdGlvbnMgPSAob2JqOiB1bmtub3duKTogb2JqIGlzIFJlcXVlc3RPcHRpb25zID0+IHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJlxuICAgIG9iaiAhPT0gbnVsbCAmJlxuICAgICFpc0VtcHR5T2JqKG9iaikgJiZcbiAgICBPYmplY3Qua2V5cyhvYmopLmV2ZXJ5KChrKSA9PiBoYXNPd24ocmVxdWVzdE9wdGlvbnNLZXlzLCBrKSlcbiAgKTtcbn07XG5cbmV4cG9ydCB0eXBlIEZpbmFsUmVxdWVzdE9wdGlvbnM8UmVxID0gdW5rbm93biB8IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgUmVhZGFibGUgfCBEYXRhVmlldz4gPVxuICBSZXF1ZXN0T3B0aW9uczxSZXE+ICYge1xuICAgIG1ldGhvZDogSFRUUE1ldGhvZDtcbiAgICBwYXRoOiBzdHJpbmc7XG4gIH07XG5cbmRlY2xhcmUgY29uc3QgRGVubzogYW55O1xuZGVjbGFyZSBjb25zdCBFZGdlUnVudGltZTogYW55O1xudHlwZSBBcmNoID0gJ3gzMicgfCAneDY0JyB8ICdhcm0nIHwgJ2FybTY0JyB8IGBvdGhlcjoke3N0cmluZ31gIHwgJ3Vua25vd24nO1xudHlwZSBQbGF0Zm9ybU5hbWUgPVxuICB8ICdNYWNPUydcbiAgfCAnTGludXgnXG4gIHwgJ1dpbmRvd3MnXG4gIHwgJ0ZyZWVCU0QnXG4gIHwgJ09wZW5CU0QnXG4gIHwgJ2lPUydcbiAgfCAnQW5kcm9pZCdcbiAgfCBgT3RoZXI6JHtzdHJpbmd9YFxuICB8ICdVbmtub3duJztcbnR5cGUgQnJvd3NlciA9ICdpZScgfCAnZWRnZScgfCAnY2hyb21lJyB8ICdmaXJlZm94JyB8ICdzYWZhcmknO1xudHlwZSBQbGF0Zm9ybVByb3BlcnRpZXMgPSB7XG4gICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJztcbiAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IHN0cmluZztcbiAgJ1gtU3RhaW5sZXNzLU9TJzogUGxhdGZvcm1OYW1lO1xuICAnWC1TdGFpbmxlc3MtQXJjaCc6IEFyY2g7XG4gICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ25vZGUnIHwgJ2Rlbm8nIHwgJ2VkZ2UnIHwgYGJyb3dzZXI6JHtCcm93c2VyfWAgfCAndW5rbm93bic7XG4gICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBzdHJpbmc7XG59O1xuY29uc3QgZ2V0UGxhdGZvcm1Qcm9wZXJ0aWVzID0gKCk6IFBsYXRmb3JtUHJvcGVydGllcyA9PiB7XG4gIGlmICh0eXBlb2YgRGVubyAhPT0gJ3VuZGVmaW5lZCcgJiYgRGVuby5idWlsZCAhPSBudWxsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICAgJ1gtU3RhaW5sZXNzLU9TJzogbm9ybWFsaXplUGxhdGZvcm0oRGVuby5idWlsZC5vcyksXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6IG5vcm1hbGl6ZUFyY2goRGVuby5idWlsZC5hcmNoKSxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ2Rlbm8nLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6XG4gICAgICAgIHR5cGVvZiBEZW5vLnZlcnNpb24gPT09ICdzdHJpbmcnID8gRGVuby52ZXJzaW9uIDogRGVuby52ZXJzaW9uPy5kZW5vID8/ICd1bmtub3duJyxcbiAgICB9O1xuICB9XG4gIGlmICh0eXBlb2YgRWRnZVJ1bnRpbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICAgJ1gtU3RhaW5sZXNzLU9TJzogJ1Vua25vd24nLFxuICAgICAgJ1gtU3RhaW5sZXNzLUFyY2gnOiBgb3RoZXI6JHtFZGdlUnVudGltZX1gLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnZWRnZScsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogcHJvY2Vzcy52ZXJzaW9uLFxuICAgIH07XG4gIH1cbiAgLy8gQ2hlY2sgaWYgTm9kZS5qc1xuICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyA/IHByb2Nlc3MgOiAwKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICAgJ1gtU3RhaW5sZXNzLU9TJzogbm9ybWFsaXplUGxhdGZvcm0ocHJvY2Vzcy5wbGF0Zm9ybSksXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6IG5vcm1hbGl6ZUFyY2gocHJvY2Vzcy5hcmNoKSxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ25vZGUnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6IHByb2Nlc3MudmVyc2lvbixcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgYnJvd3NlckluZm8gPSBnZXRCcm93c2VySW5mbygpO1xuICBpZiAoYnJvd3NlckluZm8pIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiAnVW5rbm93bicsXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6ICd1bmtub3duJyxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogYGJyb3dzZXI6JHticm93c2VySW5mby5icm93c2VyfWAsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogYnJvd3NlckluZm8udmVyc2lvbixcbiAgICB9O1xuICB9XG5cbiAgLy8gVE9ETyBhZGQgc3VwcG9ydCBmb3IgQ2xvdWRmbGFyZSB3b3JrZXJzLCBldGMuXG4gIHJldHVybiB7XG4gICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICdYLVN0YWlubGVzcy1PUyc6ICdVbmtub3duJyxcbiAgICAnWC1TdGFpbmxlc3MtQXJjaCc6ICd1bmtub3duJyxcbiAgICAnWC1TdGFpbmxlc3MtUnVudGltZSc6ICd1bmtub3duJyxcbiAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogJ3Vua25vd24nLFxuICB9O1xufTtcblxudHlwZSBCcm93c2VySW5mbyA9IHtcbiAgYnJvd3NlcjogQnJvd3NlcjtcbiAgdmVyc2lvbjogc3RyaW5nO1xufTtcblxuZGVjbGFyZSBjb25zdCBuYXZpZ2F0b3I6IHsgdXNlckFnZW50OiBzdHJpbmcgfSB8IHVuZGVmaW5lZDtcblxuLy8gTm90ZTogbW9kaWZpZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vSlMtRGV2VG9vbHMvaG9zdC1lbnZpcm9ubWVudC9ibG9iL2IxYWI3OWVjZGUzN2RiNWQ2ZTE2M2MwNTBlNTRmZTdkMjg3ZDdjOTIvc3JjL2lzb21vcnBoaWMuYnJvd3Nlci50c1xuZnVuY3Rpb24gZ2V0QnJvd3NlckluZm8oKTogQnJvd3NlckluZm8gfCBudWxsIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIE5PVEU6IFRoZSBvcmRlciBtYXR0ZXJzIGhlcmUhXG4gIGNvbnN0IGJyb3dzZXJQYXR0ZXJucyA9IFtcbiAgICB7IGtleTogJ2VkZ2UnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvRWRnZSg/OlxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnaWUnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvTVNJRSg/OlxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnaWUnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvVHJpZGVudCg/Oi4qcnZcXDooXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnY2hyb21lJyBhcyBjb25zdCwgcGF0dGVybjogL0Nocm9tZSg/OlxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnZmlyZWZveCcgYXMgY29uc3QsIHBhdHRlcm46IC9GaXJlZm94KD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdzYWZhcmknIGFzIGNvbnN0LCBwYXR0ZXJuOiAvKD86VmVyc2lvblxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/KD86XFxXK01vYmlsZVxcUyopP1xcVytTYWZhcmkvIH0sXG4gIF07XG5cbiAgLy8gRmluZCB0aGUgRklSU1QgbWF0Y2hpbmcgYnJvd3NlclxuICBmb3IgKGNvbnN0IHsga2V5LCBwYXR0ZXJuIH0gb2YgYnJvd3NlclBhdHRlcm5zKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBwYXR0ZXJuLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBjb25zdCBtYWpvciA9IG1hdGNoWzFdIHx8IDA7XG4gICAgICBjb25zdCBtaW5vciA9IG1hdGNoWzJdIHx8IDA7XG4gICAgICBjb25zdCBwYXRjaCA9IG1hdGNoWzNdIHx8IDA7XG5cbiAgICAgIHJldHVybiB7IGJyb3dzZXI6IGtleSwgdmVyc2lvbjogYCR7bWFqb3J9LiR7bWlub3J9LiR7cGF0Y2h9YCB9O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5jb25zdCBub3JtYWxpemVBcmNoID0gKGFyY2g6IHN0cmluZyk6IEFyY2ggPT4ge1xuICAvLyBOb2RlIGRvY3M6XG4gIC8vIC0gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9wcm9jZXNzLmh0bWwjcHJvY2Vzc2FyY2hcbiAgLy8gRGVubyBkb2NzOlxuICAvLyAtIGh0dHBzOi8vZG9jLmRlbm8ubGFuZC9kZW5vL3N0YWJsZS9+L0Rlbm8uYnVpbGRcbiAgaWYgKGFyY2ggPT09ICd4MzInKSByZXR1cm4gJ3gzMic7XG4gIGlmIChhcmNoID09PSAneDg2XzY0JyB8fCBhcmNoID09PSAneDY0JykgcmV0dXJuICd4NjQnO1xuICBpZiAoYXJjaCA9PT0gJ2FybScpIHJldHVybiAnYXJtJztcbiAgaWYgKGFyY2ggPT09ICdhYXJjaDY0JyB8fCBhcmNoID09PSAnYXJtNjQnKSByZXR1cm4gJ2FybTY0JztcbiAgaWYgKGFyY2gpIHJldHVybiBgb3RoZXI6JHthcmNofWA7XG4gIHJldHVybiAndW5rbm93bic7XG59O1xuXG5jb25zdCBub3JtYWxpemVQbGF0Zm9ybSA9IChwbGF0Zm9ybTogc3RyaW5nKTogUGxhdGZvcm1OYW1lID0+IHtcbiAgLy8gTm9kZSBwbGF0Zm9ybXM6XG4gIC8vIC0gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9wcm9jZXNzLmh0bWwjcHJvY2Vzc3BsYXRmb3JtXG4gIC8vIERlbm8gcGxhdGZvcm1zOlxuICAvLyAtIGh0dHBzOi8vZG9jLmRlbm8ubGFuZC9kZW5vL3N0YWJsZS9+L0Rlbm8uYnVpbGRcbiAgLy8gLSBodHRwczovL2dpdGh1Yi5jb20vZGVub2xhbmQvZGVuby9pc3N1ZXMvMTQ3OTlcblxuICBwbGF0Zm9ybSA9IHBsYXRmb3JtLnRvTG93ZXJDYXNlKCk7XG5cbiAgLy8gTk9URTogdGhpcyBpT1MgY2hlY2sgaXMgdW50ZXN0ZWQgYW5kIG1heSBub3Qgd29ya1xuICAvLyBOb2RlIGRvZXMgbm90IHdvcmsgbmF0aXZlbHkgb24gSU9TLCB0aGVyZSBpcyBhIGZvcmsgYXRcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy1tb2JpbGUvbm9kZWpzLW1vYmlsZVxuICAvLyBob3dldmVyIGl0IGlzIHVua25vd24gYXQgdGhlIHRpbWUgb2Ygd3JpdGluZyBob3cgdG8gZGV0ZWN0IGlmIGl0IGlzIHJ1bm5pbmdcbiAgaWYgKHBsYXRmb3JtLmluY2x1ZGVzKCdpb3MnKSkgcmV0dXJuICdpT1MnO1xuICBpZiAocGxhdGZvcm0gPT09ICdhbmRyb2lkJykgcmV0dXJuICdBbmRyb2lkJztcbiAgaWYgKHBsYXRmb3JtID09PSAnZGFyd2luJykgcmV0dXJuICdNYWNPUyc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ3dpbjMyJykgcmV0dXJuICdXaW5kb3dzJztcbiAgaWYgKHBsYXRmb3JtID09PSAnZnJlZWJzZCcpIHJldHVybiAnRnJlZUJTRCc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ29wZW5ic2QnKSByZXR1cm4gJ09wZW5CU0QnO1xuICBpZiAocGxhdGZvcm0gPT09ICdsaW51eCcpIHJldHVybiAnTGludXgnO1xuICBpZiAocGxhdGZvcm0pIHJldHVybiBgT3RoZXI6JHtwbGF0Zm9ybX1gO1xuICByZXR1cm4gJ1Vua25vd24nO1xufTtcblxubGV0IF9wbGF0Zm9ybUhlYWRlcnM6IFBsYXRmb3JtUHJvcGVydGllcztcbmNvbnN0IGdldFBsYXRmb3JtSGVhZGVycyA9ICgpID0+IHtcbiAgcmV0dXJuIChfcGxhdGZvcm1IZWFkZXJzID8/PSBnZXRQbGF0Zm9ybVByb3BlcnRpZXMoKSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2FmZUpTT04gPSAodGV4dDogc3RyaW5nKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGV4dCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn07XG5cbi8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsLXNjaGVtZS1zdHJpbmdcbmNvbnN0IHN0YXJ0c1dpdGhTY2hlbWVSZWdleHAgPSAvXlthLXpdW2EtejAtOSsuLV0qOi9pO1xuY29uc3QgaXNBYnNvbHV0ZVVSTCA9ICh1cmw6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gc3RhcnRzV2l0aFNjaGVtZVJlZ2V4cC50ZXN0KHVybCk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2xlZXAgPSAobXM6IG51bWJlcikgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcblxuY29uc3QgdmFsaWRhdGVQb3NpdGl2ZUludGVnZXIgPSAobmFtZTogc3RyaW5nLCBuOiB1bmtub3duKTogbnVtYmVyID0+IHtcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCAhTnVtYmVyLmlzSW50ZWdlcihuKSkge1xuICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgJHtuYW1lfSBtdXN0IGJlIGFuIGludGVnZXJgKTtcbiAgfVxuICBpZiAobiA8IDApIHtcbiAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYCR7bmFtZX0gbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXJgKTtcbiAgfVxuICByZXR1cm4gbjtcbn07XG5cbmV4cG9ydCBjb25zdCBjYXN0VG9FcnJvciA9IChlcnI6IGFueSk6IEVycm9yID0+IHtcbiAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4gZXJyO1xuICBpZiAodHlwZW9mIGVyciA9PT0gJ29iamVjdCcgJiYgZXJyICE9PSBudWxsKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkoZXJyKSk7XG4gICAgfSBjYXRjaCB7fVxuICB9XG4gIHJldHVybiBuZXcgRXJyb3IoU3RyaW5nKGVycikpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVuc3VyZVByZXNlbnQgPSA8VD4odmFsdWU6IFQgfCBudWxsIHwgdW5kZWZpbmVkKTogVCA9PiB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYEV4cGVjdGVkIGEgdmFsdWUgdG8gYmUgZ2l2ZW4gYnV0IHJlY2VpdmVkICR7dmFsdWV9IGluc3RlYWQuYCk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbi8qKlxuICogUmVhZCBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZS5cbiAqXG4gKiBUcmltcyBiZWdpbm5pbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuXG4gKlxuICogV2lsbCByZXR1cm4gdW5kZWZpbmVkIGlmIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBkb2Vzbid0IGV4aXN0IG9yIGNhbm5vdCBiZSBhY2Nlc3NlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlYWRFbnYgPSAoZW52OiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52Py5bZW52XT8udHJpbSgpID8/IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAodHlwZW9mIERlbm8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIERlbm8uZW52Py5nZXQ/LihlbnYpPy50cmltKCk7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbmV4cG9ydCBjb25zdCBjb2VyY2VJbnRlZ2VyID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHJldHVybiBwYXJzZUludCh2YWx1ZSwgMTApO1xuXG4gIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgQ291bGQgbm90IGNvZXJjZSAke3ZhbHVlfSAodHlwZTogJHt0eXBlb2YgdmFsdWV9KSBpbnRvIGEgbnVtYmVyYCk7XG59O1xuXG5leHBvcnQgY29uc3QgY29lcmNlRmxvYXQgPSAodmFsdWU6IHVua25vd24pOiBudW1iZXIgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykgcmV0dXJuIHZhbHVlO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xuXG4gIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgQ291bGQgbm90IGNvZXJjZSAke3ZhbHVlfSAodHlwZTogJHt0eXBlb2YgdmFsdWV9KSBpbnRvIGEgbnVtYmVyYCk7XG59O1xuXG5leHBvcnQgY29uc3QgY29lcmNlQm9vbGVhbiA9ICh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4gPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHJldHVybiB2YWx1ZTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHJldHVybiB2YWx1ZSA9PT0gJ3RydWUnO1xuICByZXR1cm4gQm9vbGVhbih2YWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgbWF5YmVDb2VyY2VJbnRlZ2VyID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBjb2VyY2VJbnRlZ2VyKHZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtYXliZUNvZXJjZUZsb2F0ID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBjb2VyY2VGbG9hdCh2YWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgbWF5YmVDb2VyY2VCb29sZWFuID0gKHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gY29lcmNlQm9vbGVhbih2YWx1ZSk7XG59O1xuXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzQ0OTEyODdcbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5T2JqKG9iajogT2JqZWN0IHwgbnVsbCB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xuICBpZiAoIW9iaikgcmV0dXJuIHRydWU7XG4gIGZvciAoY29uc3QgX2sgaW4gb2JqKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyBodHRwczovL2VzbGludC5vcmcvZG9jcy9sYXRlc3QvcnVsZXMvbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG5leHBvcnQgZnVuY3Rpb24gaGFzT3duKG9iajogT2JqZWN0LCBrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cblxuLyoqXG4gKiBDb3BpZXMgaGVhZGVycyBmcm9tIFwibmV3SGVhZGVyc1wiIG9udG8gXCJ0YXJnZXRIZWFkZXJzXCIsXG4gKiB1c2luZyBsb3dlci1jYXNlIGZvciBhbGwgcHJvcGVydGllcyxcbiAqIGlnbm9yaW5nIGFueSBrZXlzIHdpdGggdW5kZWZpbmVkIHZhbHVlcyxcbiAqIGFuZCBkZWxldGluZyBhbnkga2V5cyB3aXRoIG51bGwgdmFsdWVzLlxuICovXG5mdW5jdGlvbiBhcHBseUhlYWRlcnNNdXQodGFyZ2V0SGVhZGVyczogSGVhZGVycywgbmV3SGVhZGVyczogSGVhZGVycyk6IHZvaWQge1xuICBmb3IgKGNvbnN0IGsgaW4gbmV3SGVhZGVycykge1xuICAgIGlmICghaGFzT3duKG5ld0hlYWRlcnMsIGspKSBjb250aW51ZTtcbiAgICBjb25zdCBsb3dlcktleSA9IGsudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoIWxvd2VyS2V5KSBjb250aW51ZTtcblxuICAgIGNvbnN0IHZhbCA9IG5ld0hlYWRlcnNba107XG5cbiAgICBpZiAodmFsID09PSBudWxsKSB7XG4gICAgICBkZWxldGUgdGFyZ2V0SGVhZGVyc1tsb3dlcktleV07XG4gICAgfSBlbHNlIGlmICh2YWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGFyZ2V0SGVhZGVyc1tsb3dlcktleV0gPSB2YWw7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWJ1ZyhhY3Rpb246IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzPy5lbnY/LlsnREVCVUcnXSA9PT0gJ3RydWUnKSB7XG4gICAgY29uc29sZS5sb2coYEFudGhyb3BpYzpERUJVRzoke2FjdGlvbn1gLCAuLi5hcmdzKTtcbiAgfVxufVxuXG4vKipcbiAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXG4gKi9cbmNvbnN0IHV1aWQ0ID0gKCkgPT4ge1xuICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCAoYykgPT4ge1xuICAgIGNvbnN0IHIgPSAoTWF0aC5yYW5kb20oKSAqIDE2KSB8IDA7XG4gICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBpc1J1bm5pbmdJbkJyb3dzZXIgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnXG4gICk7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEhlYWRlcnNQcm90b2NvbCB7XG4gIGdldDogKGhlYWRlcjogc3RyaW5nKSA9PiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xufVxuZXhwb3J0IHR5cGUgSGVhZGVyc0xpa2UgPSBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXSB8IHVuZGVmaW5lZD4gfCBIZWFkZXJzUHJvdG9jb2w7XG5cbmV4cG9ydCBjb25zdCBpc0hlYWRlcnNQcm90b2NvbCA9IChoZWFkZXJzOiBhbnkpOiBoZWFkZXJzIGlzIEhlYWRlcnNQcm90b2NvbCA9PiB7XG4gIHJldHVybiB0eXBlb2YgaGVhZGVycz8uZ2V0ID09PSAnZnVuY3Rpb24nO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFJlcXVpcmVkSGVhZGVyID0gKGhlYWRlcnM6IEhlYWRlcnNMaWtlIHwgSGVhZGVycywgaGVhZGVyOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBmb3VuZEhlYWRlciA9IGdldEhlYWRlcihoZWFkZXJzLCBoZWFkZXIpO1xuICBpZiAoZm91bmRIZWFkZXIgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgJHtoZWFkZXJ9IGhlYWRlcmApO1xuICB9XG4gIHJldHVybiBmb3VuZEhlYWRlcjtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRIZWFkZXIgPSAoaGVhZGVyczogSGVhZGVyc0xpa2UgfCBIZWFkZXJzLCBoZWFkZXI6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IGxvd2VyQ2FzZWRIZWFkZXIgPSBoZWFkZXIudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGlzSGVhZGVyc1Byb3RvY29sKGhlYWRlcnMpKSB7XG4gICAgLy8gdG8gZGVhbCB3aXRoIHRoZSBjYXNlIHdoZXJlIHRoZSBoZWFkZXIgbG9va3MgbGlrZSBTdGFpbmxlc3MtRXZlbnQtSWRcbiAgICBjb25zdCBpbnRlcmNhcHNIZWFkZXIgPVxuICAgICAgaGVhZGVyWzBdPy50b1VwcGVyQ2FzZSgpICtcbiAgICAgIGhlYWRlci5zdWJzdHJpbmcoMSkucmVwbGFjZSgvKFteXFx3XSkoXFx3KS9nLCAoX20sIGcxLCBnMikgPT4gZzEgKyBnMi50b1VwcGVyQ2FzZSgpKTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbaGVhZGVyLCBsb3dlckNhc2VkSGVhZGVyLCBoZWFkZXIudG9VcHBlckNhc2UoKSwgaW50ZXJjYXBzSGVhZGVyXSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBoZWFkZXJzLmdldChrZXkpO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhoZWFkZXJzKSkge1xuICAgIGlmIChrZXkudG9Mb3dlckNhc2UoKSA9PT0gbG93ZXJDYXNlZEhlYWRlcikge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPD0gMSkgcmV0dXJuIHZhbHVlWzBdO1xuICAgICAgICBjb25zb2xlLndhcm4oYFJlY2VpdmVkICR7dmFsdWUubGVuZ3RofSBlbnRyaWVzIGZvciB0aGUgJHtoZWFkZXJ9IGhlYWRlciwgdXNpbmcgdGhlIGZpcnN0IGVudHJ5LmApO1xuICAgICAgICByZXR1cm4gdmFsdWVbMF07XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbi8qKlxuICogRW5jb2RlcyBhIHN0cmluZyB0byBCYXNlNjQgZm9ybWF0LlxuICovXG5leHBvcnQgY29uc3QgdG9CYXNlNjQgPSAoc3RyOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nID0+IHtcbiAgaWYgKCFzdHIpIHJldHVybiAnJztcbiAgaWYgKHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHN0cikudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBidG9hICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBidG9hKHN0cik7XG4gIH1cblxuICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoJ0Nhbm5vdCBnZW5lcmF0ZSBiNjQgc3RyaW5nOyBFeHBlY3RlZCBgQnVmZmVyYCBvciBgYnRvYWAgdG8gYmUgZGVmaW5lZCcpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqKG9iajogdW5rbm93bik6IG9iaiBpcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIHJldHVybiBvYmogIT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShvYmopO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IEFic3RyYWN0UGFnZSwgUmVzcG9uc2UsIEFQSUNsaWVudCwgRmluYWxSZXF1ZXN0T3B0aW9ucywgUGFnZUluZm8gfSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFnZVJlc3BvbnNlPEl0ZW0+IHtcbiAgZGF0YTogQXJyYXk8SXRlbT47XG5cbiAgaGFzX21vcmU6IGJvb2xlYW47XG5cbiAgZmlyc3RfaWQ6IHN0cmluZyB8IG51bGw7XG5cbiAgbGFzdF9pZDogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYWdlUGFyYW1zIHtcbiAgLyoqXG4gICAqIE51bWJlciBvZiBpdGVtcyBwZXIgcGFnZS5cbiAgICovXG4gIGxpbWl0PzogbnVtYmVyO1xuXG4gIGJlZm9yZV9pZD86IHN0cmluZztcblxuICBhZnRlcl9pZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFBhZ2U8SXRlbT4gZXh0ZW5kcyBBYnN0cmFjdFBhZ2U8SXRlbT4gaW1wbGVtZW50cyBQYWdlUmVzcG9uc2U8SXRlbT4ge1xuICBkYXRhOiBBcnJheTxJdGVtPjtcblxuICBoYXNfbW9yZTogYm9vbGVhbjtcblxuICBmaXJzdF9pZDogc3RyaW5nIHwgbnVsbDtcblxuICBsYXN0X2lkOiBzdHJpbmcgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKGNsaWVudDogQVBJQ2xpZW50LCByZXNwb25zZTogUmVzcG9uc2UsIGJvZHk6IFBhZ2VSZXNwb25zZTxJdGVtPiwgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucykge1xuICAgIHN1cGVyKGNsaWVudCwgcmVzcG9uc2UsIGJvZHksIG9wdGlvbnMpO1xuXG4gICAgdGhpcy5kYXRhID0gYm9keS5kYXRhIHx8IFtdO1xuICAgIHRoaXMuaGFzX21vcmUgPSBib2R5Lmhhc19tb3JlIHx8IGZhbHNlO1xuICAgIHRoaXMuZmlyc3RfaWQgPSBib2R5LmZpcnN0X2lkIHx8IG51bGw7XG4gICAgdGhpcy5sYXN0X2lkID0gYm9keS5sYXN0X2lkIHx8IG51bGw7XG4gIH1cblxuICBnZXRQYWdpbmF0ZWRJdGVtcygpOiBJdGVtW10ge1xuICAgIHJldHVybiB0aGlzLmRhdGEgPz8gW107XG4gIH1cblxuICAvLyBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBuZXh0UGFnZUluZm8oKWAgaW5zdGVhZFxuICBuZXh0UGFnZVBhcmFtcygpOiBQYXJ0aWFsPFBhZ2VQYXJhbXM+IHwgbnVsbCB7XG4gICAgY29uc3QgaW5mbyA9IHRoaXMubmV4dFBhZ2VJbmZvKCk7XG4gICAgaWYgKCFpbmZvKSByZXR1cm4gbnVsbDtcbiAgICBpZiAoJ3BhcmFtcycgaW4gaW5mbykgcmV0dXJuIGluZm8ucGFyYW1zO1xuICAgIGNvbnN0IHBhcmFtcyA9IE9iamVjdC5mcm9tRW50cmllcyhpbmZvLnVybC5zZWFyY2hQYXJhbXMpO1xuICAgIGlmICghT2JqZWN0LmtleXMocGFyYW1zKS5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBwYXJhbXM7XG4gIH1cblxuICBuZXh0UGFnZUluZm8oKTogUGFnZUluZm8gfCBudWxsIHtcbiAgICBpZiAoKHRoaXMub3B0aW9ucy5xdWVyeSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik/LlsnYmVmb3JlX2lkJ10pIHtcbiAgICAgIC8vIGluIHJldmVyc2VcbiAgICAgIGNvbnN0IGZpcnN0SWQgPSB0aGlzLmZpcnN0X2lkO1xuICAgICAgaWYgKCFmaXJzdElkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBiZWZvcmVfaWQ6IGZpcnN0SWQsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnNvciA9IHRoaXMubGFzdF9pZDtcbiAgICBpZiAoIWN1cnNvcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhcmFtczoge1xuICAgICAgICBhZnRlcl9pZDogY3Vyc29yLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBBUElSZXNvdXJjZSB7XG4gIHByb3RlY3RlZCBfY2xpZW50OiBDb3JlLkFQSUNsaWVudDtcblxuICBjb25zdHJ1Y3RvcihjbGllbnQ6IENvcmUuQVBJQ2xpZW50KSB7XG4gICAgdGhpcy5fY2xpZW50ID0gY2xpZW50O1xuICB9XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCB7IGlzUmVxdWVzdE9wdGlvbnMgfSBmcm9tIFwiLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0IHsgUGFnZSwgdHlwZSBQYWdlUGFyYW1zIH0gZnJvbSBcIi4uLy4uL3BhZ2luYXRpb24uanNcIjtcblxuZXhwb3J0IGNsYXNzIE1vZGVscyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIEdldCBhIHNwZWNpZmljIG1vZGVsLlxuICAgKlxuICAgKiBUaGUgTW9kZWxzIEFQSSByZXNwb25zZSBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgaW5mb3JtYXRpb24gYWJvdXQgYSBzcGVjaWZpY1xuICAgKiBtb2RlbCBvciByZXNvbHZlIGEgbW9kZWwgYWxpYXMgdG8gYSBtb2RlbCBJRC5cbiAgICovXG4gIHJldHJpZXZlKG1vZGVsSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8QmV0YU1vZGVsSW5mbz4ge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZ2V0KGAvdjEvbW9kZWxzLyR7bW9kZWxJZH0/YmV0YT10cnVlYCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdCBhdmFpbGFibGUgbW9kZWxzLlxuICAgKlxuICAgKiBUaGUgTW9kZWxzIEFQSSByZXNwb25zZSBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgd2hpY2ggbW9kZWxzIGFyZSBhdmFpbGFibGUgZm9yXG4gICAqIHVzZSBpbiB0aGUgQVBJLiBNb3JlIHJlY2VudGx5IHJlbGVhc2VkIG1vZGVscyBhcmUgbGlzdGVkIGZpcnN0LlxuICAgKi9cbiAgbGlzdChcbiAgICBxdWVyeT86IE1vZGVsTGlzdFBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxCZXRhTW9kZWxJbmZvc1BhZ2UsIEJldGFNb2RlbEluZm8+O1xuICBsaXN0KG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5QYWdlUHJvbWlzZTxCZXRhTW9kZWxJbmZvc1BhZ2UsIEJldGFNb2RlbEluZm8+O1xuICBsaXN0KFxuICAgIHF1ZXJ5OiBNb2RlbExpc3RQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8QmV0YU1vZGVsSW5mb3NQYWdlLCBCZXRhTW9kZWxJbmZvPiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocXVlcnkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5saXN0KHt9LCBxdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZ2V0QVBJTGlzdCgnL3YxL21vZGVscz9iZXRhPXRydWUnLCBCZXRhTW9kZWxJbmZvc1BhZ2UsIHsgcXVlcnksIC4uLm9wdGlvbnMgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJldGFNb2RlbEluZm9zUGFnZSBleHRlbmRzIFBhZ2U8QmV0YU1vZGVsSW5mbz4ge31cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTW9kZWxJbmZvIHtcbiAgLyoqXG4gICAqIFVuaXF1ZSBtb2RlbCBpZGVudGlmaWVyLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCB0aGUgbW9kZWwgd2FzIHJlbGVhc2VkLlxuICAgKiBNYXkgYmUgc2V0IHRvIGFuIGVwb2NoIHZhbHVlIGlmIHRoZSByZWxlYXNlIGRhdGUgaXMgdW5rbm93bi5cbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcblxuICAvKipcbiAgICogQSBodW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgbW9kZWwuXG4gICAqL1xuICBkaXNwbGF5X25hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogT2JqZWN0IHR5cGUuXG4gICAqXG4gICAqIEZvciBNb2RlbHMsIHRoaXMgaXMgYWx3YXlzIGBcIm1vZGVsXCJgLlxuICAgKi9cbiAgdHlwZTogJ21vZGVsJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbExpc3RQYXJhbXMgZXh0ZW5kcyBQYWdlUGFyYW1zIHt9XG5cbk1vZGVscy5CZXRhTW9kZWxJbmZvc1BhZ2UgPSBCZXRhTW9kZWxJbmZvc1BhZ2U7XG5cbmV4cG9ydCBkZWNsYXJlIG5hbWVzcGFjZSBNb2RlbHMge1xuICBleHBvcnQge1xuICAgIHR5cGUgQmV0YU1vZGVsSW5mbyBhcyBCZXRhTW9kZWxJbmZvLFxuICAgIEJldGFNb2RlbEluZm9zUGFnZSBhcyBCZXRhTW9kZWxJbmZvc1BhZ2UsXG4gICAgdHlwZSBNb2RlbExpc3RQYXJhbXMgYXMgTW9kZWxMaXN0UGFyYW1zLFxuICB9O1xufVxuIiwgImltcG9ydCB7IEFudGhyb3BpY0Vycm9yIH0gZnJvbSBcIi4uLy4uL2Vycm9yLmpzXCI7XG5pbXBvcnQgeyBSZWFkYWJsZVN0cmVhbVRvQXN5bmNJdGVyYWJsZSB9IGZyb20gXCIuLi9zdHJlYW0tdXRpbHMuanNcIjtcbmltcG9ydCB7IHR5cGUgUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vX3NoaW1zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBMaW5lRGVjb2RlciwgdHlwZSBCeXRlcyB9IGZyb20gXCIuL2xpbmUuanNcIjtcblxuZXhwb3J0IGNsYXNzIEpTT05MRGVjb2RlcjxUPiB7XG4gIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGl0ZXJhdG9yOiBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8Qnl0ZXM+LFxuICAgIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcixcbiAgKSB7XG4gICAgdGhpcy5jb250cm9sbGVyID0gY29udHJvbGxlcjtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgKmRlY29kZXIoKTogQXN5bmNJdGVyYXRvcjxULCBhbnksIHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGxpbmVEZWNvZGVyID0gbmV3IExpbmVEZWNvZGVyKCk7XG4gICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiB0aGlzLml0ZXJhdG9yKSB7XG4gICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZURlY29kZXIuZGVjb2RlKGNodW5rKSkge1xuICAgICAgICB5aWVsZCBKU09OLnBhcnNlKGxpbmUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lRGVjb2Rlci5mbHVzaCgpKSB7XG4gICAgICB5aWVsZCBKU09OLnBhcnNlKGxpbmUpO1xuICAgIH1cbiAgfVxuXG4gIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTogQXN5bmNJdGVyYXRvcjxUPiB7XG4gICAgcmV0dXJuIHRoaXMuZGVjb2RlcigpO1xuICB9XG5cbiAgc3RhdGljIGZyb21SZXNwb25zZTxUPihyZXNwb25zZTogUmVzcG9uc2UsIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcik6IEpTT05MRGVjb2RlcjxUPiB7XG4gICAgaWYgKCFyZXNwb25zZS5ib2R5KSB7XG4gICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYEF0dGVtcHRlZCB0byBpdGVyYXRlIG92ZXIgYSByZXNwb25zZSB3aXRoIG5vIGJvZHlgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IEpTT05MRGVjb2RlcihSZWFkYWJsZVN0cmVhbVRvQXN5bmNJdGVyYWJsZTxCeXRlcz4ocmVzcG9uc2UuYm9keSksIGNvbnRyb2xsZXIpO1xuICB9XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vLi4vLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCB7IGlzUmVxdWVzdE9wdGlvbnMgfSBmcm9tIFwiLi4vLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQmV0YUFQSSBmcm9tIFwiLi4vYmV0YS5qc1wiO1xuaW1wb3J0ICogYXMgQmV0YU1lc3NhZ2VzQVBJIGZyb20gXCIuL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgeyBQYWdlLCB0eXBlIFBhZ2VQYXJhbXMgfSBmcm9tIFwiLi4vLi4vLi4vcGFnaW5hdGlvbi5qc1wiO1xuaW1wb3J0IHsgSlNPTkxEZWNvZGVyIH0gZnJvbSBcIi4uLy4uLy4uL2ludGVybmFsL2RlY29kZXJzL2pzb25sLmpzXCI7XG5pbXBvcnQgeyBBbnRocm9waWNFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9lcnJvci5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQmF0Y2hlcyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFNlbmQgYSBiYXRjaCBvZiBNZXNzYWdlIGNyZWF0aW9uIHJlcXVlc3RzLlxuICAgKlxuICAgKiBUaGUgTWVzc2FnZSBCYXRjaGVzIEFQSSBjYW4gYmUgdXNlZCB0byBwcm9jZXNzIG11bHRpcGxlIE1lc3NhZ2VzIEFQSSByZXF1ZXN0cyBhdFxuICAgKiBvbmNlLiBPbmNlIGEgTWVzc2FnZSBCYXRjaCBpcyBjcmVhdGVkLCBpdCBiZWdpbnMgcHJvY2Vzc2luZyBpbW1lZGlhdGVseS4gQmF0Y2hlc1xuICAgKiBjYW4gdGFrZSB1cCB0byAyNCBob3VycyB0byBjb21wbGV0ZS5cbiAgICovXG4gIGNyZWF0ZShwYXJhbXM6IEJhdGNoQ3JlYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoPiB7XG4gICAgY29uc3QgeyBiZXRhcywgLi4uYm9keSB9ID0gcGFyYW1zO1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQucG9zdCgnL3YxL21lc3NhZ2VzL2JhdGNoZXM/YmV0YT10cnVlJywge1xuICAgICAgYm9keSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhbnRocm9waWMtYmV0YSc6IFsuLi4oYmV0YXMgPz8gW10pLCAnbWVzc2FnZS1iYXRjaGVzLTIwMjQtMDktMjQnXS50b1N0cmluZygpLFxuICAgICAgICAuLi5vcHRpb25zPy5oZWFkZXJzLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGVuZHBvaW50IGlzIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSB1c2VkIHRvIHBvbGwgZm9yIE1lc3NhZ2UgQmF0Y2hcbiAgICogY29tcGxldGlvbi4gVG8gYWNjZXNzIHRoZSByZXN1bHRzIG9mIGEgTWVzc2FnZSBCYXRjaCwgbWFrZSBhIHJlcXVlc3QgdG8gdGhlXG4gICAqIGByZXN1bHRzX3VybGAgZmllbGQgaW4gdGhlIHJlc3BvbnNlLlxuICAgKi9cbiAgcmV0cmlldmUoXG4gICAgbWVzc2FnZUJhdGNoSWQ6IHN0cmluZyxcbiAgICBwYXJhbXM/OiBCYXRjaFJldHJpZXZlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaD47XG4gIHJldHJpZXZlKG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2g+O1xuICByZXRyaWV2ZShcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtczogQmF0Y2hSZXRyaWV2ZVBhcmFtcyB8IENvcmUuUmVxdWVzdE9wdGlvbnMgPSB7fSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2g+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhwYXJhbXMpKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXRyaWV2ZShtZXNzYWdlQmF0Y2hJZCwge30sIHBhcmFtcyk7XG4gICAgfVxuICAgIGNvbnN0IHsgYmV0YXMgfSA9IHBhcmFtcztcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmdldChgL3YxL21lc3NhZ2VzL2JhdGNoZXMvJHttZXNzYWdlQmF0Y2hJZH0/YmV0YT10cnVlYCwge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FudGhyb3BpYy1iZXRhJzogWy4uLihiZXRhcyA/PyBbXSksICdtZXNzYWdlLWJhdGNoZXMtMjAyNC0wOS0yNCddLnRvU3RyaW5nKCksXG4gICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3QgYWxsIE1lc3NhZ2UgQmF0Y2hlcyB3aXRoaW4gYSBXb3Jrc3BhY2UuIE1vc3QgcmVjZW50bHkgY3JlYXRlZCBiYXRjaGVzIGFyZVxuICAgKiByZXR1cm5lZCBmaXJzdC5cbiAgICovXG4gIGxpc3QoXG4gICAgcGFyYW1zPzogQmF0Y2hMaXN0UGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UsIEJldGFNZXNzYWdlQmF0Y2g+O1xuICBsaXN0KG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5QYWdlUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoZXNQYWdlLCBCZXRhTWVzc2FnZUJhdGNoPjtcbiAgbGlzdChcbiAgICBwYXJhbXM6IEJhdGNoTGlzdFBhcmFtcyB8IENvcmUuUmVxdWVzdE9wdGlvbnMgPSB7fSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoZXNQYWdlLCBCZXRhTWVzc2FnZUJhdGNoPiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocGFyYW1zKSkge1xuICAgICAgcmV0dXJuIHRoaXMubGlzdCh7fSwgcGFyYW1zKTtcbiAgICB9XG4gICAgY29uc3QgeyBiZXRhcywgLi4ucXVlcnkgfSA9IHBhcmFtcztcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmdldEFQSUxpc3QoJy92MS9tZXNzYWdlcy9iYXRjaGVzP2JldGE9dHJ1ZScsIEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UsIHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FudGhyb3BpYy1iZXRhJzogWy4uLihiZXRhcyA/PyBbXSksICdtZXNzYWdlLWJhdGNoZXMtMjAyNC0wOS0yNCddLnRvU3RyaW5nKCksXG4gICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIE1lc3NhZ2UgQmF0Y2guXG4gICAqXG4gICAqIE1lc3NhZ2UgQmF0Y2hlcyBjYW4gb25seSBiZSBkZWxldGVkIG9uY2UgdGhleSd2ZSBmaW5pc2hlZCBwcm9jZXNzaW5nLiBJZiB5b3UnZFxuICAgKiBsaWtlIHRvIGRlbGV0ZSBhbiBpbi1wcm9ncmVzcyBiYXRjaCwgeW91IG11c3QgZmlyc3QgY2FuY2VsIGl0LlxuICAgKi9cbiAgZGVsZXRlKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgcGFyYW1zPzogQmF0Y2hEZWxldGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxCZXRhRGVsZXRlZE1lc3NhZ2VCYXRjaD47XG4gIGRlbGV0ZShtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxCZXRhRGVsZXRlZE1lc3NhZ2VCYXRjaD47XG4gIGRlbGV0ZShcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtczogQmF0Y2hEZWxldGVQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxCZXRhRGVsZXRlZE1lc3NhZ2VCYXRjaD4ge1xuICAgIGlmIChpc1JlcXVlc3RPcHRpb25zKHBhcmFtcykpIHtcbiAgICAgIHJldHVybiB0aGlzLmRlbGV0ZShtZXNzYWdlQmF0Y2hJZCwge30sIHBhcmFtcyk7XG4gICAgfVxuICAgIGNvbnN0IHsgYmV0YXMgfSA9IHBhcmFtcztcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmRlbGV0ZShgL3YxL21lc3NhZ2VzL2JhdGNoZXMvJHttZXNzYWdlQmF0Y2hJZH0/YmV0YT10cnVlYCwge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FudGhyb3BpYy1iZXRhJzogWy4uLihiZXRhcyA/PyBbXSksICdtZXNzYWdlLWJhdGNoZXMtMjAyNC0wOS0yNCddLnRvU3RyaW5nKCksXG4gICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEJhdGNoZXMgbWF5IGJlIGNhbmNlbGVkIGFueSB0aW1lIGJlZm9yZSBwcm9jZXNzaW5nIGVuZHMuIE9uY2UgY2FuY2VsbGF0aW9uIGlzXG4gICAqIGluaXRpYXRlZCwgdGhlIGJhdGNoIGVudGVycyBhIGBjYW5jZWxpbmdgIHN0YXRlLCBhdCB3aGljaCB0aW1lIHRoZSBzeXN0ZW0gbWF5XG4gICAqIGNvbXBsZXRlIGFueSBpbi1wcm9ncmVzcywgbm9uLWludGVycnVwdGlibGUgcmVxdWVzdHMgYmVmb3JlIGZpbmFsaXppbmdcbiAgICogY2FuY2VsbGF0aW9uLlxuICAgKlxuICAgKiBUaGUgbnVtYmVyIG9mIGNhbmNlbGVkIHJlcXVlc3RzIGlzIHNwZWNpZmllZCBpbiBgcmVxdWVzdF9jb3VudHNgLiBUbyBkZXRlcm1pbmVcbiAgICogd2hpY2ggcmVxdWVzdHMgd2VyZSBjYW5jZWxlZCwgY2hlY2sgdGhlIGluZGl2aWR1YWwgcmVzdWx0cyB3aXRoaW4gdGhlIGJhdGNoLlxuICAgKiBOb3RlIHRoYXQgY2FuY2VsbGF0aW9uIG1heSBub3QgcmVzdWx0IGluIGFueSBjYW5jZWxlZCByZXF1ZXN0cyBpZiB0aGV5IHdlcmVcbiAgICogbm9uLWludGVycnVwdGlibGUuXG4gICAqL1xuICBjYW5jZWwoXG4gICAgbWVzc2FnZUJhdGNoSWQ6IHN0cmluZyxcbiAgICBwYXJhbXM/OiBCYXRjaENhbmNlbFBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2g+O1xuICBjYW5jZWwobWVzc2FnZUJhdGNoSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaD47XG4gIGNhbmNlbChcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtczogQmF0Y2hDYW5jZWxQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoPiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocGFyYW1zKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsKG1lc3NhZ2VCYXRjaElkLCB7fSwgcGFyYW1zKTtcbiAgICB9XG4gICAgY29uc3QgeyBiZXRhcyB9ID0gcGFyYW1zO1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQucG9zdChgL3YxL21lc3NhZ2VzL2JhdGNoZXMvJHttZXNzYWdlQmF0Y2hJZH0vY2FuY2VsP2JldGE9dHJ1ZWAsIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhbnRocm9waWMtYmV0YSc6IFsuLi4oYmV0YXMgPz8gW10pLCAnbWVzc2FnZS1iYXRjaGVzLTIwMjQtMDktMjQnXS50b1N0cmluZygpLFxuICAgICAgICAuLi5vcHRpb25zPy5oZWFkZXJzLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdHJlYW1zIHRoZSByZXN1bHRzIG9mIGEgTWVzc2FnZSBCYXRjaCBhcyBhIGAuanNvbmxgIGZpbGUuXG4gICAqXG4gICAqIEVhY2ggbGluZSBpbiB0aGUgZmlsZSBpcyBhIEpTT04gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBhIHNpbmdsZSByZXF1ZXN0XG4gICAqIGluIHRoZSBNZXNzYWdlIEJhdGNoLiBSZXN1bHRzIGFyZSBub3QgZ3VhcmFudGVlZCB0byBiZSBpbiB0aGUgc2FtZSBvcmRlciBhc1xuICAgKiByZXF1ZXN0cy4gVXNlIHRoZSBgY3VzdG9tX2lkYCBmaWVsZCB0byBtYXRjaCByZXN1bHRzIHRvIHJlcXVlc3RzLlxuICAgKi9cbiAgYXN5bmMgcmVzdWx0cyhcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtcz86IEJhdGNoUmVzdWx0c1BhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogUHJvbWlzZTxKU09OTERlY29kZXI8QmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZT4+O1xuICBhc3luYyByZXN1bHRzKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IFByb21pc2U8SlNPTkxEZWNvZGVyPEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2U+PjtcbiAgYXN5bmMgcmVzdWx0cyhcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtczogQmF0Y2hSZXN1bHRzUGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBQcm9taXNlPEpTT05MRGVjb2RlcjxCZXRhTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlPj4ge1xuICAgIGlmIChpc1JlcXVlc3RPcHRpb25zKHBhcmFtcykpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlc3VsdHMobWVzc2FnZUJhdGNoSWQsIHt9LCBwYXJhbXMpO1xuICAgIH1cblxuICAgIGNvbnN0IGJhdGNoID0gYXdhaXQgdGhpcy5yZXRyaWV2ZShtZXNzYWdlQmF0Y2hJZCk7XG4gICAgaWYgKCFiYXRjaC5yZXN1bHRzX3VybCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICBgTm8gYmF0Y2ggXFxgcmVzdWx0c191cmxcXGA7IEhhcyBpdCBmaW5pc2hlZCBwcm9jZXNzaW5nPyAke2JhdGNoLnByb2Nlc3Npbmdfc3RhdHVzfSAtICR7YmF0Y2guaWR9YCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBiZXRhcyB9ID0gcGFyYW1zO1xuICAgIHJldHVybiB0aGlzLl9jbGllbnRcbiAgICAgIC5nZXQoYmF0Y2gucmVzdWx0c191cmwsIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdhbnRocm9waWMtYmV0YSc6IFsuLi4oYmV0YXMgPz8gW10pLCAnbWVzc2FnZS1iYXRjaGVzLTIwMjQtMDktMjQnXS50b1N0cmluZygpLFxuICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2JpbmFyeScsXG4gICAgICAgICAgLi4ub3B0aW9ucz8uaGVhZGVycyxcbiAgICAgICAgfSxcbiAgICAgICAgX19iaW5hcnlSZXNwb25zZTogdHJ1ZSxcbiAgICAgIH0pXG4gICAgICAuX3RoZW5VbndyYXAoKF8sIHByb3BzKSA9PiBKU09OTERlY29kZXIuZnJvbVJlc3BvbnNlKHByb3BzLnJlc3BvbnNlLCBwcm9wcy5jb250cm9sbGVyKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UgZXh0ZW5kcyBQYWdlPEJldGFNZXNzYWdlQmF0Y2g+IHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YURlbGV0ZWRNZXNzYWdlQmF0Y2gge1xuICAvKipcbiAgICogSUQgb2YgdGhlIE1lc3NhZ2UgQmF0Y2guXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBEZWxldGVkIG9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgTWVzc2FnZSBCYXRjaGVzLCB0aGlzIGlzIGFsd2F5cyBgXCJtZXNzYWdlX2JhdGNoX2RlbGV0ZWRcImAuXG4gICAqL1xuICB0eXBlOiAnbWVzc2FnZV9iYXRjaF9kZWxldGVkJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZUJhdGNoIHtcbiAgLyoqXG4gICAqIFVuaXF1ZSBvYmplY3QgaWRlbnRpZmllci5cbiAgICpcbiAgICogVGhlIGZvcm1hdCBhbmQgbGVuZ3RoIG9mIElEcyBtYXkgY2hhbmdlIG92ZXIgdGltZS5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggdGhlIE1lc3NhZ2UgQmF0Y2ggd2FzXG4gICAqIGFyY2hpdmVkIGFuZCBpdHMgcmVzdWx0cyBiZWNhbWUgdW5hdmFpbGFibGUuXG4gICAqL1xuICBhcmNoaXZlZF9hdDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCBjYW5jZWxsYXRpb24gd2FzXG4gICAqIGluaXRpYXRlZCBmb3IgdGhlIE1lc3NhZ2UgQmF0Y2guIFNwZWNpZmllZCBvbmx5IGlmIGNhbmNlbGxhdGlvbiB3YXMgaW5pdGlhdGVkLlxuICAgKi9cbiAgY2FuY2VsX2luaXRpYXRlZF9hdDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCB0aGUgTWVzc2FnZSBCYXRjaCB3YXNcbiAgICogY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCBwcm9jZXNzaW5nIGZvciB0aGVcbiAgICogTWVzc2FnZSBCYXRjaCBlbmRlZC4gU3BlY2lmaWVkIG9ubHkgb25jZSBwcm9jZXNzaW5nIGVuZHMuXG4gICAqXG4gICAqIFByb2Nlc3NpbmcgZW5kcyB3aGVuIGV2ZXJ5IHJlcXVlc3QgaW4gYSBNZXNzYWdlIEJhdGNoIGhhcyBlaXRoZXIgc3VjY2VlZGVkLFxuICAgKiBlcnJvcmVkLCBjYW5jZWxlZCwgb3IgZXhwaXJlZC5cbiAgICovXG4gIGVuZGVkX2F0OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIHRoZSBNZXNzYWdlIEJhdGNoIHdpbGxcbiAgICogZXhwaXJlIGFuZCBlbmQgcHJvY2Vzc2luZywgd2hpY2ggaXMgMjQgaG91cnMgYWZ0ZXIgY3JlYXRpb24uXG4gICAqL1xuICBleHBpcmVzX2F0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFByb2Nlc3Npbmcgc3RhdHVzIG9mIHRoZSBNZXNzYWdlIEJhdGNoLlxuICAgKi9cbiAgcHJvY2Vzc2luZ19zdGF0dXM6ICdpbl9wcm9ncmVzcycgfCAnY2FuY2VsaW5nJyB8ICdlbmRlZCc7XG5cbiAgLyoqXG4gICAqIFRhbGxpZXMgcmVxdWVzdHMgd2l0aGluIHRoZSBNZXNzYWdlIEJhdGNoLCBjYXRlZ29yaXplZCBieSB0aGVpciBzdGF0dXMuXG4gICAqXG4gICAqIFJlcXVlc3RzIHN0YXJ0IGFzIGBwcm9jZXNzaW5nYCBhbmQgbW92ZSB0byBvbmUgb2YgdGhlIG90aGVyIHN0YXR1c2VzIG9ubHkgb25jZVxuICAgKiBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgYmF0Y2ggZW5kcy4gVGhlIHN1bSBvZiBhbGwgdmFsdWVzIGFsd2F5cyBtYXRjaGVzIHRoZVxuICAgKiB0b3RhbCBudW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIGJhdGNoLlxuICAgKi9cbiAgcmVxdWVzdF9jb3VudHM6IEJldGFNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzO1xuXG4gIC8qKlxuICAgKiBVUkwgdG8gYSBgLmpzb25sYCBmaWxlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdHMgb2YgdGhlIE1lc3NhZ2UgQmF0Y2ggcmVxdWVzdHMuXG4gICAqIFNwZWNpZmllZCBvbmx5IG9uY2UgcHJvY2Vzc2luZyBlbmRzLlxuICAgKlxuICAgKiBSZXN1bHRzIGluIHRoZSBmaWxlIGFyZSBub3QgZ3VhcmFudGVlZCB0byBiZSBpbiB0aGUgc2FtZSBvcmRlciBhcyByZXF1ZXN0cy4gVXNlXG4gICAqIHRoZSBgY3VzdG9tX2lkYCBmaWVsZCB0byBtYXRjaCByZXN1bHRzIHRvIHJlcXVlc3RzLlxuICAgKi9cbiAgcmVzdWx0c191cmw6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgTWVzc2FnZSBCYXRjaGVzLCB0aGlzIGlzIGFsd2F5cyBgXCJtZXNzYWdlX2JhdGNoXCJgLlxuICAgKi9cbiAgdHlwZTogJ21lc3NhZ2VfYmF0Y2gnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCB7XG4gIHR5cGU6ICdjYW5jZWxlZCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQge1xuICBlcnJvcjogQmV0YUFQSS5CZXRhRXJyb3JSZXNwb25zZTtcblxuICB0eXBlOiAnZXJyb3JlZCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQge1xuICB0eXBlOiAnZXhwaXJlZCc7XG59XG5cbi8qKlxuICogVGhpcyBpcyBhIHNpbmdsZSBsaW5lIGluIHRoZSByZXNwb25zZSBgLmpzb25sYCBmaWxlIGFuZCBkb2VzIG5vdCByZXByZXNlbnQgdGhlXG4gKiByZXNwb25zZSBhcyBhIHdob2xlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2Uge1xuICAvKipcbiAgICogRGV2ZWxvcGVyLXByb3ZpZGVkIElEIGNyZWF0ZWQgZm9yIGVhY2ggcmVxdWVzdCBpbiBhIE1lc3NhZ2UgQmF0Y2guIFVzZWZ1bCBmb3JcbiAgICogbWF0Y2hpbmcgcmVzdWx0cyB0byByZXF1ZXN0cywgYXMgcmVzdWx0cyBtYXkgYmUgZ2l2ZW4gb3V0IG9mIHJlcXVlc3Qgb3JkZXIuXG4gICAqXG4gICAqIE11c3QgYmUgdW5pcXVlIGZvciBlYWNoIHJlcXVlc3Qgd2l0aGluIHRoZSBNZXNzYWdlIEJhdGNoLlxuICAgKi9cbiAgY3VzdG9tX2lkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFByb2Nlc3NpbmcgcmVzdWx0IGZvciB0aGlzIHJlcXVlc3QuXG4gICAqXG4gICAqIENvbnRhaW5zIGEgTWVzc2FnZSBvdXRwdXQgaWYgcHJvY2Vzc2luZyB3YXMgc3VjY2Vzc2Z1bCwgYW4gZXJyb3IgcmVzcG9uc2UgaWZcbiAgICogcHJvY2Vzc2luZyBmYWlsZWQsIG9yIHRoZSByZWFzb24gd2h5IHByb2Nlc3Npbmcgd2FzIG5vdCBhdHRlbXB0ZWQsIHN1Y2ggYXNcbiAgICogY2FuY2VsbGF0aW9uIG9yIGV4cGlyYXRpb24uXG4gICAqL1xuICByZXN1bHQ6IEJldGFNZXNzYWdlQmF0Y2hSZXN1bHQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMge1xuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgaGF2ZSBiZWVuIGNhbmNlbGVkLlxuICAgKlxuICAgKiBUaGlzIGlzIHplcm8gdW50aWwgcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIE1lc3NhZ2UgQmF0Y2ggaGFzIGVuZGVkLlxuICAgKi9cbiAgY2FuY2VsZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgZW5jb3VudGVyZWQgYW4gZXJyb3IuXG4gICAqXG4gICAqIFRoaXMgaXMgemVybyB1bnRpbCBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgTWVzc2FnZSBCYXRjaCBoYXMgZW5kZWQuXG4gICAqL1xuICBlcnJvcmVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGhhdmUgZXhwaXJlZC5cbiAgICpcbiAgICogVGhpcyBpcyB6ZXJvIHVudGlsIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBNZXNzYWdlIEJhdGNoIGhhcyBlbmRlZC5cbiAgICovXG4gIGV4cGlyZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgYXJlIHByb2Nlc3NpbmcuXG4gICAqL1xuICBwcm9jZXNzaW5nOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGhhdmUgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS5cbiAgICpcbiAgICogVGhpcyBpcyB6ZXJvIHVudGlsIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBNZXNzYWdlIEJhdGNoIGhhcyBlbmRlZC5cbiAgICovXG4gIHN1Y2NlZWRlZDogbnVtYmVyO1xufVxuXG4vKipcbiAqIFByb2Nlc3NpbmcgcmVzdWx0IGZvciB0aGlzIHJlcXVlc3QuXG4gKlxuICogQ29udGFpbnMgYSBNZXNzYWdlIG91dHB1dCBpZiBwcm9jZXNzaW5nIHdhcyBzdWNjZXNzZnVsLCBhbiBlcnJvciByZXNwb25zZSBpZlxuICogcHJvY2Vzc2luZyBmYWlsZWQsIG9yIHRoZSByZWFzb24gd2h5IHByb2Nlc3Npbmcgd2FzIG5vdCBhdHRlbXB0ZWQsIHN1Y2ggYXNcbiAqIGNhbmNlbGxhdGlvbiBvciBleHBpcmF0aW9uLlxuICovXG5leHBvcnQgdHlwZSBCZXRhTWVzc2FnZUJhdGNoUmVzdWx0ID1cbiAgfCBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0XG4gIHwgQmV0YU1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHRcbiAgfCBCZXRhTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHRcbiAgfCBCZXRhTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdDtcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0IHtcbiAgbWVzc2FnZTogQmV0YU1lc3NhZ2VzQVBJLkJldGFNZXNzYWdlO1xuXG4gIHR5cGU6ICdzdWNjZWVkZWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IExpc3Qgb2YgcmVxdWVzdHMgZm9yIHByb21wdCBjb21wbGV0aW9uLiBFYWNoIGlzIGFuIGluZGl2aWR1YWxcbiAgICogcmVxdWVzdCB0byBjcmVhdGUgYSBNZXNzYWdlLlxuICAgKi9cbiAgcmVxdWVzdHM6IEFycmF5PEJhdGNoQ3JlYXRlUGFyYW1zLlJlcXVlc3Q+O1xuXG4gIC8qKlxuICAgKiBIZWFkZXIgcGFyYW06IE9wdGlvbmFsIGhlYWRlciB0byBzcGVjaWZ5IHRoZSBiZXRhIHZlcnNpb24ocykgeW91IHdhbnQgdG8gdXNlLlxuICAgKi9cbiAgYmV0YXM/OiBBcnJheTxCZXRhQVBJLkFudGhyb3BpY0JldGE+O1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEJhdGNoQ3JlYXRlUGFyYW1zIHtcbiAgZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0IHtcbiAgICAvKipcbiAgICAgKiBEZXZlbG9wZXItcHJvdmlkZWQgSUQgY3JlYXRlZCBmb3IgZWFjaCByZXF1ZXN0IGluIGEgTWVzc2FnZSBCYXRjaC4gVXNlZnVsIGZvclxuICAgICAqIG1hdGNoaW5nIHJlc3VsdHMgdG8gcmVxdWVzdHMsIGFzIHJlc3VsdHMgbWF5IGJlIGdpdmVuIG91dCBvZiByZXF1ZXN0IG9yZGVyLlxuICAgICAqXG4gICAgICogTXVzdCBiZSB1bmlxdWUgZm9yIGVhY2ggcmVxdWVzdCB3aXRoaW4gdGhlIE1lc3NhZ2UgQmF0Y2guXG4gICAgICovXG4gICAgY3VzdG9tX2lkOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBNZXNzYWdlcyBBUEkgY3JlYXRpb24gcGFyYW1ldGVycyBmb3IgdGhlIGluZGl2aWR1YWwgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFNlZSB0aGUgW01lc3NhZ2VzIEFQSSByZWZlcmVuY2VdKC9lbi9hcGkvbWVzc2FnZXMpIGZvciBmdWxsIGRvY3VtZW50YXRpb24gb25cbiAgICAgKiBhdmFpbGFibGUgcGFyYW1ldGVycy5cbiAgICAgKi9cbiAgICBwYXJhbXM6IE9taXQ8QmV0YU1lc3NhZ2VzQVBJLk1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsICdiZXRhcyc+O1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hSZXRyaWV2ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBPcHRpb25hbCBoZWFkZXIgdG8gc3BlY2lmeSB0aGUgYmV0YSB2ZXJzaW9uKHMpIHlvdSB3YW50IHRvIHVzZS5cbiAgICovXG4gIGJldGFzPzogQXJyYXk8QmV0YUFQSS5BbnRocm9waWNCZXRhPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXRjaExpc3RQYXJhbXMgZXh0ZW5kcyBQYWdlUGFyYW1zIHtcbiAgLyoqXG4gICAqIEhlYWRlciBwYXJhbTogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hEZWxldGVQYXJhbXMge1xuICAvKipcbiAgICogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hDYW5jZWxQYXJhbXMge1xuICAvKipcbiAgICogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hSZXN1bHRzUGFyYW1zIHtcbiAgLyoqXG4gICAqIE9wdGlvbmFsIGhlYWRlciB0byBzcGVjaWZ5IHRoZSBiZXRhIHZlcnNpb24ocykgeW91IHdhbnQgdG8gdXNlLlxuICAgKi9cbiAgYmV0YXM/OiBBcnJheTxCZXRhQVBJLkFudGhyb3BpY0JldGE+O1xufVxuXG5CYXRjaGVzLkJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UgPSBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgQmF0Y2hlcyB7XG4gIGV4cG9ydCB7XG4gICAgdHlwZSBCZXRhRGVsZXRlZE1lc3NhZ2VCYXRjaCBhcyBCZXRhRGVsZXRlZE1lc3NhZ2VCYXRjaCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2ggYXMgQmV0YU1lc3NhZ2VCYXRjaCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0LFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSBhcyBCZXRhTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMgYXMgQmV0YU1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hSZXN1bHQsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQsXG4gICAgQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSBhcyBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlLFxuICAgIHR5cGUgQmF0Y2hDcmVhdGVQYXJhbXMgYXMgQmF0Y2hDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBCYXRjaFJldHJpZXZlUGFyYW1zIGFzIEJhdGNoUmV0cmlldmVQYXJhbXMsXG4gICAgdHlwZSBCYXRjaExpc3RQYXJhbXMgYXMgQmF0Y2hMaXN0UGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hEZWxldGVQYXJhbXMgYXMgQmF0Y2hEZWxldGVQYXJhbXMsXG4gICAgdHlwZSBCYXRjaENhbmNlbFBhcmFtcyBhcyBCYXRjaENhbmNlbFBhcmFtcyxcbiAgICB0eXBlIEJhdGNoUmVzdWx0c1BhcmFtcyBhcyBCYXRjaFJlc3VsdHNQYXJhbXMsXG4gIH07XG59XG4iLCAidHlwZSBUb2tlbiA9IHtcbiAgdHlwZTogc3RyaW5nO1xuICB2YWx1ZTogc3RyaW5nO1xufTtcblxuY29uc3QgdG9rZW5pemUgPSAoaW5wdXQ6IHN0cmluZyk6IFRva2VuW10gPT4ge1xuICAgIGxldCBjdXJyZW50ID0gMDtcbiAgICBsZXQgdG9rZW5zOiBUb2tlbltdID0gW107XG5cbiAgICB3aGlsZSAoY3VycmVudCA8IGlucHV0Lmxlbmd0aCkge1xuICAgICAgbGV0IGNoYXIgPSBpbnB1dFtjdXJyZW50XTtcblxuICAgICAgaWYgKGNoYXIgPT09ICdcXFxcJykge1xuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PT0gJ3snKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnYnJhY2UnLFxuICAgICAgICAgIHZhbHVlOiAneycsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAnfScpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdicmFjZScsXG4gICAgICAgICAgdmFsdWU6ICd9JyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY3VycmVudCsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXIgPT09ICdbJykge1xuICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgdHlwZTogJ3BhcmVuJyxcbiAgICAgICAgICB2YWx1ZTogJ1snLFxuICAgICAgICB9KTtcblxuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PT0gJ10nKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAncGFyZW4nLFxuICAgICAgICAgIHZhbHVlOiAnXScsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAnOicpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdzZXBhcmF0b3InLFxuICAgICAgICAgIHZhbHVlOiAnOicsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAnLCcpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdkZWxpbWl0ZXInLFxuICAgICAgICAgIHZhbHVlOiAnLCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAnXCInKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuICAgICAgICBsZXQgZGFuZ2xpbmdRdW90ZSA9IGZhbHNlO1xuXG4gICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuXG4gICAgICAgIHdoaWxlIChjaGFyICE9PSAnXCInKSB7XG4gICAgICAgICAgaWYgKGN1cnJlbnQgPT09IGlucHV0Lmxlbmd0aCkge1xuICAgICAgICAgICAgZGFuZ2xpbmdRdW90ZSA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoY2hhciA9PT0gJ1xcXFwnKSB7XG4gICAgICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGRhbmdsaW5nUXVvdGUgPSB0cnVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlICs9IGNoYXIgKyBpbnB1dFtjdXJyZW50XTtcbiAgICAgICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZSArPSBjaGFyO1xuICAgICAgICAgICAgY2hhciA9IGlucHV0WysrY3VycmVudF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2hhciA9IGlucHV0WysrY3VycmVudF07XG5cbiAgICAgICAgaWYgKCFkYW5nbGluZ1F1b3RlKSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IFdISVRFU1BBQ0UgPSAvXFxzLztcbiAgICAgIGlmIChjaGFyICYmIFdISVRFU1BBQ0UudGVzdChjaGFyKSkge1xuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgTlVNQkVSUyA9IC9bMC05XS87XG4gICAgICBpZiAoKGNoYXIgJiYgTlVNQkVSUy50ZXN0KGNoYXIpKSB8fCBjaGFyID09PSAnLScgfHwgY2hhciA9PT0gJy4nKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuXG4gICAgICAgIGlmIChjaGFyID09PSAnLScpIHtcbiAgICAgICAgICB2YWx1ZSArPSBjaGFyO1xuICAgICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKChjaGFyICYmIE5VTUJFUlMudGVzdChjaGFyKSkgfHwgY2hhciA9PT0gJy4nKSB7XG4gICAgICAgICAgdmFsdWUgKz0gY2hhcjtcbiAgICAgICAgICBjaGFyID0gaW5wdXRbKytjdXJyZW50XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgTEVUVEVSUyA9IC9bYS16XS9pO1xuICAgICAgaWYgKGNoYXIgJiYgTEVUVEVSUy50ZXN0KGNoYXIpKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuXG4gICAgICAgIHdoaWxlIChjaGFyICYmIExFVFRFUlMudGVzdChjaGFyKSkge1xuICAgICAgICAgIGlmIChjdXJyZW50ID09PSBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSArPSBjaGFyO1xuICAgICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlID09ICd0cnVlJyB8fCB2YWx1ZSA9PSAnZmFsc2UnIHx8IHZhbHVlID09PSAnbnVsbCcpIHtcbiAgICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiAnbmFtZScsXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB1bmtub3duIHRva2VuLCBlLmcuIGBudWxgIHdoaWNoIGlzbid0IHF1aXRlIGBudWxsYFxuICAgICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY3VycmVudCsrO1xuICAgIH1cblxuICAgIHJldHVybiB0b2tlbnM7XG4gIH0sXG4gIHN0cmlwID0gKHRva2VuczogVG9rZW5bXSk6IFRva2VuW10gPT4ge1xuICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdG9rZW5zO1xuICAgIH1cblxuICAgIGxldCBsYXN0VG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdITtcblxuICAgIHN3aXRjaCAobGFzdFRva2VuLnR5cGUpIHtcbiAgICAgIGNhc2UgJ3NlcGFyYXRvcic6XG4gICAgICAgIHRva2VucyA9IHRva2Vucy5zbGljZSgwLCB0b2tlbnMubGVuZ3RoIC0gMSk7XG4gICAgICAgIHJldHVybiBzdHJpcCh0b2tlbnMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgIGxldCBsYXN0Q2hhcmFjdGVyT2ZMYXN0VG9rZW4gPSBsYXN0VG9rZW4udmFsdWVbbGFzdFRva2VuLnZhbHVlLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAobGFzdENoYXJhY3Rlck9mTGFzdFRva2VuID09PSAnLicgfHwgbGFzdENoYXJhY3Rlck9mTGFzdFRva2VuID09PSAnLScpIHtcbiAgICAgICAgICB0b2tlbnMgPSB0b2tlbnMuc2xpY2UoMCwgdG9rZW5zLmxlbmd0aCAtIDEpO1xuICAgICAgICAgIHJldHVybiBzdHJpcCh0b2tlbnMpO1xuICAgICAgICB9XG4gICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICBsZXQgdG9rZW5CZWZvcmVUaGVMYXN0VG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDJdO1xuICAgICAgICBpZiAodG9rZW5CZWZvcmVUaGVMYXN0VG9rZW4/LnR5cGUgPT09ICdkZWxpbWl0ZXInKSB7XG4gICAgICAgICAgdG9rZW5zID0gdG9rZW5zLnNsaWNlKDAsIHRva2Vucy5sZW5ndGggLSAxKTtcbiAgICAgICAgICByZXR1cm4gc3RyaXAodG9rZW5zKTtcbiAgICAgICAgfSBlbHNlIGlmICh0b2tlbkJlZm9yZVRoZUxhc3RUb2tlbj8udHlwZSA9PT0gJ2JyYWNlJyAmJiB0b2tlbkJlZm9yZVRoZUxhc3RUb2tlbi52YWx1ZSA9PT0gJ3snKSB7XG4gICAgICAgICAgdG9rZW5zID0gdG9rZW5zLnNsaWNlKDAsIHRva2Vucy5sZW5ndGggLSAxKTtcbiAgICAgICAgICByZXR1cm4gc3RyaXAodG9rZW5zKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2RlbGltaXRlcic6XG4gICAgICAgIHRva2VucyA9IHRva2Vucy5zbGljZSgwLCB0b2tlbnMubGVuZ3RoIC0gMSk7XG4gICAgICAgIHJldHVybiBzdHJpcCh0b2tlbnMpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gdG9rZW5zO1xuICB9LFxuICB1bnN0cmlwID0gKHRva2VuczogVG9rZW5bXSk6IFRva2VuW10gPT4ge1xuICAgIGxldCB0YWlsOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgdG9rZW5zLm1hcCgodG9rZW4pID0+IHtcbiAgICAgIGlmICh0b2tlbi50eXBlID09PSAnYnJhY2UnKSB7XG4gICAgICAgIGlmICh0b2tlbi52YWx1ZSA9PT0gJ3snKSB7XG4gICAgICAgICAgdGFpbC5wdXNoKCd9Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFpbC5zcGxpY2UodGFpbC5sYXN0SW5kZXhPZignfScpLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICdwYXJlbicpIHtcbiAgICAgICAgaWYgKHRva2VuLnZhbHVlID09PSAnWycpIHtcbiAgICAgICAgICB0YWlsLnB1c2goJ10nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YWlsLnNwbGljZSh0YWlsLmxhc3RJbmRleE9mKCddJyksIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodGFpbC5sZW5ndGggPiAwKSB7XG4gICAgICB0YWlsLnJldmVyc2UoKS5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKGl0ZW0gPT09ICd9Jykge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdicmFjZScsXG4gICAgICAgICAgICB2YWx1ZTogJ30nLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0gPT09ICddJykge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdwYXJlbicsXG4gICAgICAgICAgICB2YWx1ZTogJ10nLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdG9rZW5zO1xuICB9LFxuICBnZW5lcmF0ZSA9ICh0b2tlbnM6IFRva2VuW10pOiBzdHJpbmcgPT4ge1xuICAgIGxldCBvdXRwdXQgPSAnJztcblxuICAgIHRva2Vucy5tYXAoKHRva2VuKSA9PiB7XG4gICAgICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICBvdXRwdXQgKz0gJ1wiJyArIHRva2VuLnZhbHVlICsgJ1wiJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBvdXRwdXQgKz0gdG9rZW4udmFsdWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9LFxuICBwYXJ0aWFsUGFyc2UgPSAoaW5wdXQ6IHN0cmluZyk6IHVua25vd24gPT4gSlNPTi5wYXJzZShnZW5lcmF0ZSh1bnN0cmlwKHN0cmlwKHRva2VuaXplKGlucHV0KSkpKSk7XG5cbmV4cG9ydCB7IHBhcnRpYWxQYXJzZSB9O1xuIiwgImltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4uL2NvcmUuanNcIjtcbmltcG9ydCB7IEFudGhyb3BpY0Vycm9yLCBBUElVc2VyQWJvcnRFcnJvciB9IGZyb20gXCIuLi9lcnJvci5qc1wiO1xuaW1wb3J0IHtcbiAgdHlwZSBCZXRhQ29udGVudEJsb2NrLFxuICBNZXNzYWdlcyBhcyBCZXRhTWVzc2FnZXMsXG4gIHR5cGUgQmV0YU1lc3NhZ2UsXG4gIHR5cGUgQmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudCBhcyBCZXRhTWVzc2FnZVN0cmVhbUV2ZW50LFxuICB0eXBlIEJldGFNZXNzYWdlUGFyYW0sXG4gIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtcyBhcyBCZXRhTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSBhcyBCZXRhTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2UsXG4gIHR5cGUgQmV0YVRleHRCbG9jayxcbiAgdHlwZSBCZXRhVGV4dENpdGF0aW9uLFxufSBmcm9tIFwiLi4vcmVzb3VyY2VzL2JldGEvbWVzc2FnZXMvbWVzc2FnZXMuanNcIjtcbmltcG9ydCB7IHR5cGUgUmVhZGFibGVTdHJlYW0sIHR5cGUgUmVzcG9uc2UgfSBmcm9tIFwiLi4vX3NoaW1zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tIFwiLi4vc3RyZWFtaW5nLmpzXCI7XG5pbXBvcnQgeyBwYXJ0aWFsUGFyc2UgfSBmcm9tIFwiLi4vX3ZlbmRvci9wYXJ0aWFsLWpzb24tcGFyc2VyL3BhcnNlci5qc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VTdHJlYW1FdmVudHMge1xuICBjb25uZWN0OiAoKSA9PiB2b2lkO1xuICBzdHJlYW1FdmVudDogKGV2ZW50OiBCZXRhTWVzc2FnZVN0cmVhbUV2ZW50LCBzbmFwc2hvdDogQmV0YU1lc3NhZ2UpID0+IHZvaWQ7XG4gIHRleHQ6ICh0ZXh0RGVsdGE6IHN0cmluZywgdGV4dFNuYXBzaG90OiBzdHJpbmcpID0+IHZvaWQ7XG4gIGNpdGF0aW9uOiAoY2l0YXRpb246IEJldGFUZXh0Q2l0YXRpb24sIGNpdGF0aW9uc1NuYXBzaG90OiBCZXRhVGV4dENpdGF0aW9uW10pID0+IHZvaWQ7XG4gIGlucHV0SnNvbjogKHBhcnRpYWxKc29uOiBzdHJpbmcsIGpzb25TbmFwc2hvdDogdW5rbm93bikgPT4gdm9pZDtcbiAgbWVzc2FnZTogKG1lc3NhZ2U6IEJldGFNZXNzYWdlKSA9PiB2b2lkO1xuICBjb250ZW50QmxvY2s6IChjb250ZW50OiBCZXRhQ29udGVudEJsb2NrKSA9PiB2b2lkO1xuICBmaW5hbE1lc3NhZ2U6IChtZXNzYWdlOiBCZXRhTWVzc2FnZSkgPT4gdm9pZDtcbiAgZXJyb3I6IChlcnJvcjogQW50aHJvcGljRXJyb3IpID0+IHZvaWQ7XG4gIGFib3J0OiAoZXJyb3I6IEFQSVVzZXJBYm9ydEVycm9yKSA9PiB2b2lkO1xuICBlbmQ6ICgpID0+IHZvaWQ7XG59XG5cbnR5cGUgTWVzc2FnZVN0cmVhbUV2ZW50TGlzdGVuZXJzPEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4gPSB7XG4gIGxpc3RlbmVyOiBNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XTtcbiAgb25jZT86IGJvb2xlYW47XG59W107XG5cbmNvbnN0IEpTT05fQlVGX1BST1BFUlRZID0gJ19fanNvbl9idWYnO1xuXG5leHBvcnQgY2xhc3MgQmV0YU1lc3NhZ2VTdHJlYW0gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPEJldGFNZXNzYWdlU3RyZWFtRXZlbnQ+IHtcbiAgbWVzc2FnZXM6IEJldGFNZXNzYWdlUGFyYW1bXSA9IFtdO1xuICByZWNlaXZlZE1lc3NhZ2VzOiBCZXRhTWVzc2FnZVtdID0gW107XG4gICNjdXJyZW50TWVzc2FnZVNuYXBzaG90OiBCZXRhTWVzc2FnZSB8IHVuZGVmaW5lZDtcblxuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cbiAgI2Nvbm5lY3RlZFByb21pc2U6IFByb21pc2U8UmVzcG9uc2UgfCBudWxsPjtcbiAgI3Jlc29sdmVDb25uZWN0ZWRQcm9taXNlOiAocmVzcG9uc2U6IFJlc3BvbnNlIHwgbnVsbCkgPT4gdm9pZCA9ICgpID0+IHt9O1xuICAjcmVqZWN0Q29ubmVjdGVkUHJvbWlzZTogKGVycm9yOiBBbnRocm9waWNFcnJvcikgPT4gdm9pZCA9ICgpID0+IHt9O1xuXG4gICNlbmRQcm9taXNlOiBQcm9taXNlPHZvaWQ+O1xuICAjcmVzb2x2ZUVuZFByb21pc2U6ICgpID0+IHZvaWQgPSAoKSA9PiB7fTtcbiAgI3JlamVjdEVuZFByb21pc2U6IChlcnJvcjogQW50aHJvcGljRXJyb3IpID0+IHZvaWQgPSAoKSA9PiB7fTtcblxuICAjbGlzdGVuZXJzOiB7IFtFdmVudCBpbiBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzXT86IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gfSA9IHt9O1xuXG4gICNlbmRlZCA9IGZhbHNlO1xuICAjZXJyb3JlZCA9IGZhbHNlO1xuICAjYWJvcnRlZCA9IGZhbHNlO1xuICAjY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCA9IGZhbHNlO1xuICAjcmVzcG9uc2U6IFJlc3BvbnNlIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgI3JlcXVlc3RfaWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy4jY29ubmVjdGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlPFJlc3BvbnNlIHwgbnVsbD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy4jcmVzb2x2ZUNvbm5lY3RlZFByb21pc2UgPSByZXNvbHZlO1xuICAgICAgdGhpcy4jcmVqZWN0Q29ubmVjdGVkUHJvbWlzZSA9IHJlamVjdDtcbiAgICB9KTtcblxuICAgIHRoaXMuI2VuZFByb21pc2UgPSBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLiNyZXNvbHZlRW5kUHJvbWlzZSA9IHJlc29sdmU7XG4gICAgICB0aGlzLiNyZWplY3RFbmRQcm9taXNlID0gcmVqZWN0O1xuICAgIH0pO1xuXG4gICAgLy8gRG9uJ3QgbGV0IHRoZXNlIHByb21pc2VzIGNhdXNlIHVuaGFuZGxlZCByZWplY3Rpb24gZXJyb3JzLlxuICAgIC8vIHdlIHdpbGwgbWFudWFsbHkgY2F1c2UgYW4gdW5oYW5kbGVkIHJlamVjdGlvbiBlcnJvciBsYXRlclxuICAgIC8vIGlmIHRoZSB1c2VyIGhhc24ndCByZWdpc3RlcmVkIGFueSBlcnJvciBsaXN0ZW5lciBvciBjYWxsZWRcbiAgICAvLyBhbnkgcHJvbWlzZS1yZXR1cm5pbmcgbWV0aG9kLlxuICAgIHRoaXMuI2Nvbm5lY3RlZFByb21pc2UuY2F0Y2goKCkgPT4ge30pO1xuICAgIHRoaXMuI2VuZFByb21pc2UuY2F0Y2goKCkgPT4ge30pO1xuICB9XG5cbiAgZ2V0IHJlc3BvbnNlKCk6IFJlc3BvbnNlIHwgbnVsbCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuI3Jlc3BvbnNlO1xuICB9XG5cbiAgZ2V0IHJlcXVlc3RfaWQoKTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuI3JlcXVlc3RfaWQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYE1lc3NhZ2VTdHJlYW1gIGRhdGEsIHRoZSByYXcgYFJlc3BvbnNlYCBpbnN0YW5jZSBhbmQgdGhlIElEIG9mIHRoZSByZXF1ZXN0LFxuICAgKiByZXR1cm5lZCB2aWUgdGhlIGByZXF1ZXN0LWlkYCBoZWFkZXIgd2hpY2ggaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmcgcmVxdWVzdHMgYW5kIHJlc3BvcnRpbmdcbiAgICogaXNzdWVzIHRvIEFudGhyb3BpYy5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgc2FtZSBhcyB0aGUgYEFQSVByb21pc2Uud2l0aFJlc3BvbnNlKClgIG1ldGhvZC5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgd2lsbCByYWlzZSBhbiBlcnJvciBpZiB5b3UgY3JlYXRlZCB0aGUgc3RyZWFtIHVzaW5nIGBNZXNzYWdlU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbWBcbiAgICogYXMgbm8gYFJlc3BvbnNlYCBpcyBhdmFpbGFibGUuXG4gICAqL1xuICBhc3luYyB3aXRoUmVzcG9uc2UoKTogUHJvbWlzZTx7XG4gICAgZGF0YTogQmV0YU1lc3NhZ2VTdHJlYW07XG4gICAgcmVzcG9uc2U6IFJlc3BvbnNlO1xuICAgIHJlcXVlc3RfaWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG4gIH0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuI2Nvbm5lY3RlZFByb21pc2U7XG4gICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgcmVzb2x2ZSBhIGBSZXNwb25zZWAgb2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IHRoaXMsXG4gICAgICByZXNwb25zZSxcbiAgICAgIHJlcXVlc3RfaWQ6IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdyZXF1ZXN0LWlkJyksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnRlbmRlZCBmb3IgdXNlIG9uIHRoZSBmcm9udGVuZCwgY29uc3VtaW5nIGEgc3RyZWFtIHByb2R1Y2VkIHdpdGhcbiAgICogYC50b1JlYWRhYmxlU3RyZWFtKClgIG9uIHRoZSBiYWNrZW5kLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgbWVzc2FnZXMgc2VudCB0byB0aGUgbW9kZWwgZG8gbm90IGFwcGVhciBpbiBgLm9uKCdtZXNzYWdlJylgXG4gICAqIGluIHRoaXMgY29udGV4dC5cbiAgICovXG4gIHN0YXRpYyBmcm9tUmVhZGFibGVTdHJlYW0oc3RyZWFtOiBSZWFkYWJsZVN0cmVhbSk6IEJldGFNZXNzYWdlU3RyZWFtIHtcbiAgICBjb25zdCBydW5uZXIgPSBuZXcgQmV0YU1lc3NhZ2VTdHJlYW0oKTtcbiAgICBydW5uZXIuX3J1bigoKSA9PiBydW5uZXIuX2Zyb21SZWFkYWJsZVN0cmVhbShzdHJlYW0pKTtcbiAgICByZXR1cm4gcnVubmVyO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZU1lc3NhZ2UoXG4gICAgbWVzc2FnZXM6IEJldGFNZXNzYWdlcyxcbiAgICBwYXJhbXM6IEJldGFNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQmV0YU1lc3NhZ2VTdHJlYW0ge1xuICAgIGNvbnN0IHJ1bm5lciA9IG5ldyBCZXRhTWVzc2FnZVN0cmVhbSgpO1xuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBwYXJhbXMubWVzc2FnZXMpIHtcbiAgICAgIHJ1bm5lci5fYWRkTWVzc2FnZVBhcmFtKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBydW5uZXIuX3J1bigoKSA9PlxuICAgICAgcnVubmVyLl9jcmVhdGVNZXNzYWdlKFxuICAgICAgICBtZXNzYWdlcyxcbiAgICAgICAgeyAuLi5wYXJhbXMsIHN0cmVhbTogdHJ1ZSB9LFxuICAgICAgICB7IC4uLm9wdGlvbnMsIGhlYWRlcnM6IHsgLi4ub3B0aW9ucz8uaGVhZGVycywgJ1gtU3RhaW5sZXNzLUhlbHBlci1NZXRob2QnOiAnc3RyZWFtJyB9IH0sXG4gICAgICApLFxuICAgICk7XG4gICAgcmV0dXJuIHJ1bm5lcjtcbiAgfVxuXG4gIHByb3RlY3RlZCBfcnVuKGV4ZWN1dG9yOiAoKSA9PiBQcm9taXNlPGFueT4pIHtcbiAgICBleGVjdXRvcigpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5fZW1pdEZpbmFsKCk7XG4gICAgICB0aGlzLl9lbWl0KCdlbmQnKTtcbiAgICB9LCB0aGlzLiNoYW5kbGVFcnJvcik7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2FkZE1lc3NhZ2VQYXJhbShtZXNzYWdlOiBCZXRhTWVzc2FnZVBhcmFtKSB7XG4gICAgdGhpcy5tZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9hZGRNZXNzYWdlKG1lc3NhZ2U6IEJldGFNZXNzYWdlLCBlbWl0ID0gdHJ1ZSkge1xuICAgIHRoaXMucmVjZWl2ZWRNZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICAgIGlmIChlbWl0KSB7XG4gICAgICB0aGlzLl9lbWl0KCdtZXNzYWdlJywgbWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIF9jcmVhdGVNZXNzYWdlKFxuICAgIG1lc3NhZ2VzOiBCZXRhTWVzc2FnZXMsXG4gICAgcGFyYW1zOiBCZXRhTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc2lnbmFsID0gb3B0aW9ucz8uc2lnbmFsO1xuICAgIGlmIChzaWduYWwpIHtcbiAgICAgIGlmIChzaWduYWwuYWJvcnRlZCkgdGhpcy5jb250cm9sbGVyLmFib3J0KCk7XG4gICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKSk7XG4gICAgfVxuICAgIHRoaXMuI2JlZ2luUmVxdWVzdCgpO1xuICAgIGNvbnN0IHsgcmVzcG9uc2UsIGRhdGE6IHN0cmVhbSB9ID0gYXdhaXQgbWVzc2FnZXNcbiAgICAgIC5jcmVhdGUoeyAuLi5wYXJhbXMsIHN0cmVhbTogdHJ1ZSB9LCB7IC4uLm9wdGlvbnMsIHNpZ25hbDogdGhpcy5jb250cm9sbGVyLnNpZ25hbCB9KVxuICAgICAgLndpdGhSZXNwb25zZSgpO1xuICAgIHRoaXMuX2Nvbm5lY3RlZChyZXNwb25zZSk7XG4gICAgZm9yIGF3YWl0IChjb25zdCBldmVudCBvZiBzdHJlYW0pIHtcbiAgICAgIHRoaXMuI2FkZFN0cmVhbUV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgaWYgKHN0cmVhbS5jb250cm9sbGVyLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgdGhyb3cgbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuICAgIHRoaXMuI2VuZFJlcXVlc3QoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfY29ubmVjdGVkKHJlc3BvbnNlOiBSZXNwb25zZSB8IG51bGwpIHtcbiAgICBpZiAodGhpcy5lbmRlZCkgcmV0dXJuO1xuICAgIHRoaXMuI3Jlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgdGhpcy4jcmVxdWVzdF9pZCA9IHJlc3BvbnNlPy5oZWFkZXJzLmdldCgncmVxdWVzdC1pZCcpO1xuICAgIHRoaXMuI3Jlc29sdmVDb25uZWN0ZWRQcm9taXNlKHJlc3BvbnNlKTtcbiAgICB0aGlzLl9lbWl0KCdjb25uZWN0Jyk7XG4gIH1cblxuICBnZXQgZW5kZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2VuZGVkO1xuICB9XG5cbiAgZ2V0IGVycm9yZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2Vycm9yZWQ7XG4gIH1cblxuICBnZXQgYWJvcnRlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4jYWJvcnRlZDtcbiAgfVxuXG4gIGFib3J0KCkge1xuICAgIHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIGxpc3RlbmVyIGZ1bmN0aW9uIHRvIHRoZSBlbmQgb2YgdGhlIGxpc3RlbmVycyBhcnJheSBmb3IgdGhlIGV2ZW50LlxuICAgKiBObyBjaGVja3MgYXJlIG1hZGUgdG8gc2VlIGlmIHRoZSBsaXN0ZW5lciBoYXMgYWxyZWFkeSBiZWVuIGFkZGVkLiBNdWx0aXBsZSBjYWxscyBwYXNzaW5nXG4gICAqIHRoZSBzYW1lIGNvbWJpbmF0aW9uIG9mIGV2ZW50IGFuZCBsaXN0ZW5lciB3aWxsIHJlc3VsdCBpbiB0aGUgbGlzdGVuZXIgYmVpbmcgYWRkZWQsIGFuZFxuICAgKiBjYWxsZWQsIG11bHRpcGxlIHRpbWVzLlxuICAgKiBAcmV0dXJucyB0aGlzIE1lc3NhZ2VTdHJlYW0sIHNvIHRoYXQgY2FsbHMgY2FuIGJlIGNoYWluZWRcbiAgICovXG4gIG9uPEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oZXZlbnQ6IEV2ZW50LCBsaXN0ZW5lcjogTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0pOiB0aGlzIHtcbiAgICBjb25zdCBsaXN0ZW5lcnM6IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gPVxuICAgICAgdGhpcy4jbGlzdGVuZXJzW2V2ZW50XSB8fCAodGhpcy4jbGlzdGVuZXJzW2V2ZW50XSA9IFtdKTtcbiAgICBsaXN0ZW5lcnMucHVzaCh7IGxpc3RlbmVyIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBsaXN0ZW5lciBmcm9tIHRoZSBsaXN0ZW5lciBhcnJheSBmb3IgdGhlIGV2ZW50LlxuICAgKiBvZmYoKSB3aWxsIHJlbW92ZSwgYXQgbW9zdCwgb25lIGluc3RhbmNlIG9mIGEgbGlzdGVuZXIgZnJvbSB0aGUgbGlzdGVuZXIgYXJyYXkuIElmIGFueSBzaW5nbGVcbiAgICogbGlzdGVuZXIgaGFzIGJlZW4gYWRkZWQgbXVsdGlwbGUgdGltZXMgdG8gdGhlIGxpc3RlbmVyIGFycmF5IGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50LCB0aGVuXG4gICAqIG9mZigpIG11c3QgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzIHRvIHJlbW92ZSBlYWNoIGluc3RhbmNlLlxuICAgKiBAcmV0dXJucyB0aGlzIE1lc3NhZ2VTdHJlYW0sIHNvIHRoYXQgY2FsbHMgY2FuIGJlIGNoYWluZWRcbiAgICovXG4gIG9mZjxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+KGV2ZW50OiBFdmVudCwgbGlzdGVuZXI6IE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdKTogdGhpcyB7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy4jbGlzdGVuZXJzW2V2ZW50XTtcbiAgICBpZiAoIWxpc3RlbmVycykgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuZmluZEluZGV4KChsKSA9PiBsLmxpc3RlbmVyID09PSBsaXN0ZW5lcik7XG4gICAgaWYgKGluZGV4ID49IDApIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBvbmUtdGltZSBsaXN0ZW5lciBmdW5jdGlvbiBmb3IgdGhlIGV2ZW50LiBUaGUgbmV4dCB0aW1lIHRoZSBldmVudCBpcyB0cmlnZ2VyZWQsXG4gICAqIHRoaXMgbGlzdGVuZXIgaXMgcmVtb3ZlZCBhbmQgdGhlbiBpbnZva2VkLlxuICAgKiBAcmV0dXJucyB0aGlzIE1lc3NhZ2VTdHJlYW0sIHNvIHRoYXQgY2FsbHMgY2FuIGJlIGNoYWluZWRcbiAgICovXG4gIG9uY2U8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihldmVudDogRXZlbnQsIGxpc3RlbmVyOiBNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XSk6IHRoaXMge1xuICAgIGNvbnN0IGxpc3RlbmVyczogTWVzc2FnZVN0cmVhbUV2ZW50TGlzdGVuZXJzPEV2ZW50PiA9XG4gICAgICB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdIHx8ICh0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdID0gW10pO1xuICAgIGxpc3RlbmVycy5wdXNoKHsgbGlzdGVuZXIsIG9uY2U6IHRydWUgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyBzaW1pbGFyIHRvIGAub25jZSgpYCwgYnV0IHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdGhlIG5leHQgdGltZVxuICAgKiB0aGUgZXZlbnQgaXMgdHJpZ2dlcmVkLCBpbnN0ZWFkIG9mIGNhbGxpbmcgYSBsaXN0ZW5lciBjYWxsYmFjay5cbiAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdGhlIG5leHQgdGltZSBnaXZlbiBldmVudCBpcyB0cmlnZ2VyZWQsXG4gICAqIG9yIHJlamVjdHMgaWYgYW4gZXJyb3IgaXMgZW1pdHRlZC4gIChJZiB5b3UgcmVxdWVzdCB0aGUgJ2Vycm9yJyBldmVudCxcbiAgICogcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBlcnJvcikuXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqXG4gICAqICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHN0cmVhbS5lbWl0dGVkKCdtZXNzYWdlJykgLy8gcmVqZWN0cyBpZiB0aGUgc3RyZWFtIGVycm9yc1xuICAgKi9cbiAgZW1pdHRlZDxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+KFxuICAgIGV2ZW50OiBFdmVudCxcbiAgKTogUHJvbWlzZTxcbiAgICBQYXJhbWV0ZXJzPE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdPiBleHRlbmRzIFtpbmZlciBQYXJhbV0gPyBQYXJhbVxuICAgIDogUGFyYW1ldGVyczxNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XT4gZXh0ZW5kcyBbXSA/IHZvaWRcbiAgICA6IFBhcmFtZXRlcnM8TWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+XG4gID4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLiNjYXRjaGluZ1Byb21pc2VDcmVhdGVkID0gdHJ1ZTtcbiAgICAgIGlmIChldmVudCAhPT0gJ2Vycm9yJykgdGhpcy5vbmNlKCdlcnJvcicsIHJlamVjdCk7XG4gICAgICB0aGlzLm9uY2UoZXZlbnQsIHJlc29sdmUgYXMgYW55KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGRvbmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCA9IHRydWU7XG4gICAgYXdhaXQgdGhpcy4jZW5kUHJvbWlzZTtcbiAgfVxuXG4gIGdldCBjdXJyZW50TWVzc2FnZSgpOiBCZXRhTWVzc2FnZSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3Q7XG4gIH1cblxuICAjZ2V0RmluYWxNZXNzYWdlKCk6IEJldGFNZXNzYWdlIHtcbiAgICBpZiAodGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKCdzdHJlYW0gZW5kZWQgd2l0aG91dCBwcm9kdWNpbmcgYSBNZXNzYWdlIHdpdGggcm9sZT1hc3Npc3RhbnQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVjZWl2ZWRNZXNzYWdlcy5hdCgtMSkhO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHRoZSBmaW5hbCBhc3Npc3RhbnQgTWVzc2FnZSByZXNwb25zZSxcbiAgICogb3IgcmVqZWN0cyBpZiBhbiBlcnJvciBvY2N1cnJlZCBvciB0aGUgc3RyZWFtIGVuZGVkIHByZW1hdHVyZWx5IHdpdGhvdXQgcHJvZHVjaW5nIGEgTWVzc2FnZS5cbiAgICovXG4gIGFzeW5jIGZpbmFsTWVzc2FnZSgpOiBQcm9taXNlPEJldGFNZXNzYWdlPiB7XG4gICAgYXdhaXQgdGhpcy5kb25lKCk7XG4gICAgcmV0dXJuIHRoaXMuI2dldEZpbmFsTWVzc2FnZSgpO1xuICB9XG5cbiAgI2dldEZpbmFsVGV4dCgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLnJlY2VpdmVkTWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoJ3N0cmVhbSBlbmRlZCB3aXRob3V0IHByb2R1Y2luZyBhIE1lc3NhZ2Ugd2l0aCByb2xlPWFzc2lzdGFudCcpO1xuICAgIH1cbiAgICBjb25zdCB0ZXh0QmxvY2tzID0gdGhpcy5yZWNlaXZlZE1lc3NhZ2VzXG4gICAgICAuYXQoLTEpIVxuICAgICAgLmNvbnRlbnQuZmlsdGVyKChibG9jayk6IGJsb2NrIGlzIEJldGFUZXh0QmxvY2sgPT4gYmxvY2sudHlwZSA9PT0gJ3RleHQnKVxuICAgICAgLm1hcCgoYmxvY2spID0+IGJsb2NrLnRleHQpO1xuICAgIGlmICh0ZXh0QmxvY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKCdzdHJlYW0gZW5kZWQgd2l0aG91dCBwcm9kdWNpbmcgYSBjb250ZW50IGJsb2NrIHdpdGggdHlwZT10ZXh0Jyk7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0QmxvY2tzLmpvaW4oJyAnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSB0aGUgZmluYWwgYXNzaXN0YW50IE1lc3NhZ2UncyB0ZXh0IHJlc3BvbnNlLCBjb25jYXRlbmF0ZWRcbiAgICogdG9nZXRoZXIgaWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgdGV4dCBibG9ja3MuXG4gICAqIFJlamVjdHMgaWYgYW4gZXJyb3Igb2NjdXJyZWQgb3IgdGhlIHN0cmVhbSBlbmRlZCBwcmVtYXR1cmVseSB3aXRob3V0IHByb2R1Y2luZyBhIE1lc3NhZ2UuXG4gICAqL1xuICBhc3luYyBmaW5hbFRleHQoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBhd2FpdCB0aGlzLmRvbmUoKTtcbiAgICByZXR1cm4gdGhpcy4jZ2V0RmluYWxUZXh0KCk7XG4gIH1cblxuICAjaGFuZGxlRXJyb3IgPSAoZXJyb3I6IHVua25vd24pID0+IHtcbiAgICB0aGlzLiNlcnJvcmVkID0gdHJ1ZTtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgIGVycm9yID0gbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEFQSVVzZXJBYm9ydEVycm9yKSB7XG4gICAgICB0aGlzLiNhYm9ydGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0aGlzLl9lbWl0KCdhYm9ydCcsIGVycm9yKTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQW50aHJvcGljRXJyb3IpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbnN0IGFudGhyb3BpY0Vycm9yOiBBbnRocm9waWNFcnJvciA9IG5ldyBBbnRocm9waWNFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGFudGhyb3BpY0Vycm9yLmNhdXNlID0gZXJyb3I7XG4gICAgICByZXR1cm4gdGhpcy5fZW1pdCgnZXJyb3InLCBhbnRocm9waWNFcnJvcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9lbWl0KCdlcnJvcicsIG5ldyBBbnRocm9waWNFcnJvcihTdHJpbmcoZXJyb3IpKSk7XG4gIH07XG5cbiAgcHJvdGVjdGVkIF9lbWl0PEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oXG4gICAgZXZlbnQ6IEV2ZW50LFxuICAgIC4uLmFyZ3M6IFBhcmFtZXRlcnM8TWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+XG4gICkge1xuICAgIC8vIG1ha2Ugc3VyZSB3ZSBkb24ndCBlbWl0IGFueSBNZXNzYWdlU3RyZWFtRXZlbnRzIGFmdGVyIGVuZFxuICAgIGlmICh0aGlzLiNlbmRlZCkgcmV0dXJuO1xuXG4gICAgaWYgKGV2ZW50ID09PSAnZW5kJykge1xuICAgICAgdGhpcy4jZW5kZWQgPSB0cnVlO1xuICAgICAgdGhpcy4jcmVzb2x2ZUVuZFByb21pc2UoKTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnM6IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gfCB1bmRlZmluZWQgPSB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIHRoaXMuI2xpc3RlbmVyc1tldmVudF0gPSBsaXN0ZW5lcnMuZmlsdGVyKChsKSA9PiAhbC5vbmNlKSBhcyBhbnk7XG4gICAgICBsaXN0ZW5lcnMuZm9yRWFjaCgoeyBsaXN0ZW5lciB9OiBhbnkpID0+IGxpc3RlbmVyKC4uLmFyZ3MpKTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQgPT09ICdhYm9ydCcpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gYXJnc1swXSBhcyBBUElVc2VyQWJvcnRFcnJvcjtcbiAgICAgIGlmICghdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCAmJiAhbGlzdGVuZXJzPy5sZW5ndGgpIHtcbiAgICAgICAgUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgICAgdGhpcy4jcmVqZWN0Q29ubmVjdGVkUHJvbWlzZShlcnJvcik7XG4gICAgICB0aGlzLiNyZWplY3RFbmRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuX2VtaXQoJ2VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudCA9PT0gJ2Vycm9yJykge1xuICAgICAgLy8gTk9URTogX2VtaXQoJ2Vycm9yJywgZXJyb3IpIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmcm9tICNoYW5kbGVFcnJvcigpLlxuXG4gICAgICBjb25zdCBlcnJvciA9IGFyZ3NbMF0gYXMgQW50aHJvcGljRXJyb3I7XG4gICAgICBpZiAoIXRoaXMuI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgJiYgIWxpc3RlbmVycz8ubGVuZ3RoKSB7XG4gICAgICAgIC8vIFRyaWdnZXIgYW4gdW5oYW5kbGVkIHJlamVjdGlvbiBpZiB0aGUgdXNlciBoYXNuJ3QgcmVnaXN0ZXJlZCBhbnkgZXJyb3IgaGFuZGxlcnMuXG4gICAgICAgIC8vIElmIHlvdSBhcmUgc2VlaW5nIHN0YWNrIHRyYWNlcyBoZXJlLCBtYWtlIHN1cmUgdG8gaGFuZGxlIGVycm9ycyB2aWEgZWl0aGVyOlxuICAgICAgICAvLyAtIHJ1bm5lci5vbignZXJyb3InLCAoKSA9PiAuLi4pXG4gICAgICAgIC8vIC0gYXdhaXQgcnVubmVyLmRvbmUoKVxuICAgICAgICAvLyAtIGF3YWl0IHJ1bm5lci5maW5hbC4uLigpXG4gICAgICAgIC8vIC0gZXRjLlxuICAgICAgICBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgICB0aGlzLiNyZWplY3RDb25uZWN0ZWRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuI3JlamVjdEVuZFByb21pc2UoZXJyb3IpO1xuICAgICAgdGhpcy5fZW1pdCgnZW5kJyk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIF9lbWl0RmluYWwoKSB7XG4gICAgY29uc3QgZmluYWxNZXNzYWdlID0gdGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmF0KC0xKTtcbiAgICBpZiAoZmluYWxNZXNzYWdlKSB7XG4gICAgICB0aGlzLl9lbWl0KCdmaW5hbE1lc3NhZ2UnLCB0aGlzLiNnZXRGaW5hbE1lc3NhZ2UoKSk7XG4gICAgfVxuICB9XG5cbiAgI2JlZ2luUmVxdWVzdCgpIHtcbiAgICBpZiAodGhpcy5lbmRlZCkgcmV0dXJuO1xuICAgIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3QgPSB1bmRlZmluZWQ7XG4gIH1cbiAgI2FkZFN0cmVhbUV2ZW50KGV2ZW50OiBCZXRhTWVzc2FnZVN0cmVhbUV2ZW50KSB7XG4gICAgaWYgKHRoaXMuZW5kZWQpIHJldHVybjtcbiAgICBjb25zdCBtZXNzYWdlU25hcHNob3QgPSB0aGlzLiNhY2N1bXVsYXRlTWVzc2FnZShldmVudCk7XG4gICAgdGhpcy5fZW1pdCgnc3RyZWFtRXZlbnQnLCBldmVudCwgbWVzc2FnZVNuYXBzaG90KTtcblxuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19kZWx0YSc6IHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IG1lc3NhZ2VTbmFwc2hvdC5jb250ZW50LmF0KC0xKSE7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQuZGVsdGEudHlwZSkge1xuICAgICAgICAgIGNhc2UgJ3RleHRfZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZW1pdCgndGV4dCcsIGV2ZW50LmRlbHRhLnRleHQsIGNvbnRlbnQudGV4dCB8fCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSAnY2l0YXRpb25zX2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2VtaXQoJ2NpdGF0aW9uJywgZXZlbnQuZGVsdGEuY2l0YXRpb24sIGNvbnRlbnQuY2l0YXRpb25zID8/IFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlICdpbnB1dF9qc29uX2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ3Rvb2xfdXNlJyAmJiBjb250ZW50LmlucHV0KSB7XG4gICAgICAgICAgICAgIHRoaXMuX2VtaXQoJ2lucHV0SnNvbicsIGV2ZW50LmRlbHRhLnBhcnRpYWxfanNvbiwgY29udGVudC5pbnB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNoZWNrTmV2ZXIoZXZlbnQuZGVsdGEpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnbWVzc2FnZV9zdG9wJzoge1xuICAgICAgICB0aGlzLl9hZGRNZXNzYWdlUGFyYW0obWVzc2FnZVNuYXBzaG90KTtcbiAgICAgICAgdGhpcy5fYWRkTWVzc2FnZShtZXNzYWdlU25hcHNob3QsIHRydWUpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RvcCc6IHtcbiAgICAgICAgdGhpcy5fZW1pdCgnY29udGVudEJsb2NrJywgbWVzc2FnZVNuYXBzaG90LmNvbnRlbnQuYXQoLTEpISk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnbWVzc2FnZV9zdGFydCc6IHtcbiAgICAgICAgdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdCA9IG1lc3NhZ2VTbmFwc2hvdDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX3N0YXJ0JzpcbiAgICAgIGNhc2UgJ21lc3NhZ2VfZGVsdGEnOlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgI2VuZFJlcXVlc3QoKTogQmV0YU1lc3NhZ2Uge1xuICAgIGlmICh0aGlzLmVuZGVkKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYHN0cmVhbSBoYXMgZW5kZWQsIHRoaXMgc2hvdWxkbid0IGhhcHBlbmApO1xuICAgIH1cbiAgICBjb25zdCBzbmFwc2hvdCA9IHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3Q7XG4gICAgaWYgKCFzbmFwc2hvdCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGByZXF1ZXN0IGVuZGVkIHdpdGhvdXQgc2VuZGluZyBhbnkgY2h1bmtzYCk7XG4gICAgfVxuICAgIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3QgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHNuYXBzaG90O1xuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIF9mcm9tUmVhZGFibGVTdHJlYW0oXG4gICAgcmVhZGFibGVTdHJlYW06IFJlYWRhYmxlU3RyZWFtLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzaWduYWwgPSBvcHRpb25zPy5zaWduYWw7XG4gICAgaWYgKHNpZ25hbCkge1xuICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+IHRoaXMuY29udHJvbGxlci5hYm9ydCgpKTtcbiAgICB9XG4gICAgdGhpcy4jYmVnaW5SZXF1ZXN0KCk7XG4gICAgdGhpcy5fY29ubmVjdGVkKG51bGwpO1xuICAgIGNvbnN0IHN0cmVhbSA9IFN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW08QmV0YU1lc3NhZ2VTdHJlYW1FdmVudD4ocmVhZGFibGVTdHJlYW0sIHRoaXMuY29udHJvbGxlcik7XG4gICAgZm9yIGF3YWl0IChjb25zdCBldmVudCBvZiBzdHJlYW0pIHtcbiAgICAgIHRoaXMuI2FkZFN0cmVhbUV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgaWYgKHN0cmVhbS5jb250cm9sbGVyLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgdGhyb3cgbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuICAgIHRoaXMuI2VuZFJlcXVlc3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNdXRhdGVzIHRoaXMuI2N1cnJlbnRNZXNzYWdlIHdpdGggdGhlIGN1cnJlbnQgZXZlbnQuIEhhbmRsaW5nIHRoZSBhY2N1bXVsYXRpb24gb2YgbXVsdGlwbGUgbWVzc2FnZXNcbiAgICogd2lsbCBiZSBuZWVkZWQgdG8gYmUgaGFuZGxlZCBieSB0aGUgY2FsbGVyLCB0aGlzIG1ldGhvZCB3aWxsIHRocm93IGlmIHlvdSB0cnkgdG8gYWNjdW11bGF0ZSBmb3IgbXVsdGlwbGVcbiAgICogbWVzc2FnZXMuXG4gICAqL1xuICAjYWNjdW11bGF0ZU1lc3NhZ2UoZXZlbnQ6IEJldGFNZXNzYWdlU3RyZWFtRXZlbnQpOiBCZXRhTWVzc2FnZSB7XG4gICAgbGV0IHNuYXBzaG90ID0gdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdDtcblxuICAgIGlmIChldmVudC50eXBlID09PSAnbWVzc2FnZV9zdGFydCcpIHtcbiAgICAgIGlmIChzbmFwc2hvdCkge1xuICAgICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYFVuZXhwZWN0ZWQgZXZlbnQgb3JkZXIsIGdvdCAke2V2ZW50LnR5cGV9IGJlZm9yZSByZWNlaXZpbmcgXCJtZXNzYWdlX3N0b3BcImApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGV2ZW50Lm1lc3NhZ2U7XG4gICAgfVxuXG4gICAgaWYgKCFzbmFwc2hvdCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBVbmV4cGVjdGVkIGV2ZW50IG9yZGVyLCBnb3QgJHtldmVudC50eXBlfSBiZWZvcmUgXCJtZXNzYWdlX3N0YXJ0XCJgKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgJ21lc3NhZ2Vfc3RvcCc6XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIGNhc2UgJ21lc3NhZ2VfZGVsdGEnOlxuICAgICAgICBzbmFwc2hvdC5zdG9wX3JlYXNvbiA9IGV2ZW50LmRlbHRhLnN0b3BfcmVhc29uO1xuICAgICAgICBzbmFwc2hvdC5zdG9wX3NlcXVlbmNlID0gZXZlbnQuZGVsdGEuc3RvcF9zZXF1ZW5jZTtcbiAgICAgICAgc25hcHNob3QudXNhZ2Uub3V0cHV0X3Rva2VucyA9IGV2ZW50LnVzYWdlLm91dHB1dF90b2tlbnM7XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RhcnQnOlxuICAgICAgICBzbmFwc2hvdC5jb250ZW50LnB1c2goZXZlbnQuY29udGVudF9ibG9jayk7XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfZGVsdGEnOiB7XG4gICAgICAgIGNvbnN0IHNuYXBzaG90Q29udGVudCA9IHNuYXBzaG90LmNvbnRlbnQuYXQoZXZlbnQuaW5kZXgpO1xuXG4gICAgICAgIHN3aXRjaCAoZXZlbnQuZGVsdGEudHlwZSkge1xuICAgICAgICAgIGNhc2UgJ3RleHRfZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoc25hcHNob3RDb250ZW50Py50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgc25hcHNob3RDb250ZW50LnRleHQgKz0gZXZlbnQuZGVsdGEudGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlICdjaXRhdGlvbnNfZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoc25hcHNob3RDb250ZW50Py50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgc25hcHNob3RDb250ZW50LmNpdGF0aW9ucyA/Pz0gW107XG4gICAgICAgICAgICAgIHNuYXBzaG90Q29udGVudC5jaXRhdGlvbnMucHVzaChldmVudC5kZWx0YS5jaXRhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSAnaW5wdXRfanNvbl9kZWx0YSc6IHtcbiAgICAgICAgICAgIGlmIChzbmFwc2hvdENvbnRlbnQ/LnR5cGUgPT09ICd0b29sX3VzZScpIHtcbiAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHRoZSByYXcgSlNPTiBzdHJpbmcgYXMgd2VsbCBzbyB0aGF0IHdlIGNhblxuICAgICAgICAgICAgICAvLyByZS1wYXJzZSBpdCBmb3IgZWFjaCBkZWx0YSwgZm9yIG5vdyB3ZSBqdXN0IHN0b3JlIGl0IGFzIGFuIHVudHlwZWRcbiAgICAgICAgICAgICAgLy8gbm9uLWVudW1lcmFibGUgcHJvcGVydHkgb24gdGhlIHNuYXBzaG90XG4gICAgICAgICAgICAgIGxldCBqc29uQnVmID0gKHNuYXBzaG90Q29udGVudCBhcyBhbnkpW0pTT05fQlVGX1BST1BFUlRZXSB8fCAnJztcbiAgICAgICAgICAgICAganNvbkJ1ZiArPSBldmVudC5kZWx0YS5wYXJ0aWFsX2pzb247XG5cbiAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNuYXBzaG90Q29udGVudCwgSlNPTl9CVUZfUFJPUEVSVFksIHtcbiAgICAgICAgICAgICAgICB2YWx1ZToganNvbkJ1ZixcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgaWYgKGpzb25CdWYpIHtcbiAgICAgICAgICAgICAgICBzbmFwc2hvdENvbnRlbnQuaW5wdXQgPSBwYXJ0aWFsUGFyc2UoanNvbkJ1Zik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2hlY2tOZXZlcihldmVudC5kZWx0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgICAgfVxuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19zdG9wJzpcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgIH1cbiAgfVxuXG4gIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTogQXN5bmNJdGVyYXRvcjxCZXRhTWVzc2FnZVN0cmVhbUV2ZW50PiB7XG4gICAgY29uc3QgcHVzaFF1ZXVlOiBCZXRhTWVzc2FnZVN0cmVhbUV2ZW50W10gPSBbXTtcbiAgICBjb25zdCByZWFkUXVldWU6IHtcbiAgICAgIHJlc29sdmU6IChjaHVuazogQmV0YU1lc3NhZ2VTdHJlYW1FdmVudCB8IHVuZGVmaW5lZCkgPT4gdm9pZDtcbiAgICAgIHJlamVjdDogKGVycm9yOiB1bmtub3duKSA9PiB2b2lkO1xuICAgIH1bXSA9IFtdO1xuICAgIGxldCBkb25lID0gZmFsc2U7XG5cbiAgICB0aGlzLm9uKCdzdHJlYW1FdmVudCcsIChldmVudCkgPT4ge1xuICAgICAgY29uc3QgcmVhZGVyID0gcmVhZFF1ZXVlLnNoaWZ0KCk7XG4gICAgICBpZiAocmVhZGVyKSB7XG4gICAgICAgIHJlYWRlci5yZXNvbHZlKGV2ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHB1c2hRdWV1ZS5wdXNoKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMub24oJ2VuZCcsICgpID0+IHtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgZm9yIChjb25zdCByZWFkZXIgb2YgcmVhZFF1ZXVlKSB7XG4gICAgICAgIHJlYWRlci5yZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgICByZWFkUXVldWUubGVuZ3RoID0gMDtcbiAgICB9KTtcblxuICAgIHRoaXMub24oJ2Fib3J0JywgKGVycikgPT4ge1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICBmb3IgKGNvbnN0IHJlYWRlciBvZiByZWFkUXVldWUpIHtcbiAgICAgICAgcmVhZGVyLnJlamVjdChlcnIpO1xuICAgICAgfVxuICAgICAgcmVhZFF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgZm9yIChjb25zdCByZWFkZXIgb2YgcmVhZFF1ZXVlKSB7XG4gICAgICAgIHJlYWRlci5yZWplY3QoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJlYWRRdWV1ZS5sZW5ndGggPSAwO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHQ6IGFzeW5jICgpOiBQcm9taXNlPEl0ZXJhdG9yUmVzdWx0PEJldGFNZXNzYWdlU3RyZWFtRXZlbnQ+PiA9PiB7XG4gICAgICAgIGlmICghcHVzaFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxCZXRhTWVzc2FnZVN0cmVhbUV2ZW50IHwgdW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PlxuICAgICAgICAgICAgcmVhZFF1ZXVlLnB1c2goeyByZXNvbHZlLCByZWplY3QgfSksXG4gICAgICAgICAgKS50aGVuKChjaHVuaykgPT4gKGNodW5rID8geyB2YWx1ZTogY2h1bmssIGRvbmU6IGZhbHNlIH0gOiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNodW5rID0gcHVzaFF1ZXVlLnNoaWZ0KCkhO1xuICAgICAgICByZXR1cm4geyB2YWx1ZTogY2h1bmssIGRvbmU6IGZhbHNlIH07XG4gICAgICB9LFxuICAgICAgcmV0dXJuOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMuYWJvcnQoKTtcbiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgdG9SZWFkYWJsZVN0cmVhbSgpOiBSZWFkYWJsZVN0cmVhbSB7XG4gICAgY29uc3Qgc3RyZWFtID0gbmV3IFN0cmVhbSh0aGlzW1N5bWJvbC5hc3luY0l0ZXJhdG9yXS5iaW5kKHRoaXMpLCB0aGlzLmNvbnRyb2xsZXIpO1xuICAgIHJldHVybiBzdHJlYW0udG9SZWFkYWJsZVN0cmVhbSgpO1xuICB9XG59XG5cbi8vIHVzZWQgdG8gZW5zdXJlIGV4aGF1c3RpdmUgY2FzZSBtYXRjaGluZyB3aXRob3V0IHRocm93aW5nIGEgcnVudGltZSBlcnJvclxuZnVuY3Rpb24gY2hlY2tOZXZlcih4OiBuZXZlcikge31cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gXCIuLi8uLi8uLi9yZXNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgQVBJUHJvbWlzZSB9IGZyb20gXCIuLi8uLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuLi8uLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBNZXNzYWdlc01lc3NhZ2VzQVBJIGZyb20gXCIuL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgKiBhcyBCZXRhQVBJIGZyb20gXCIuLi9iZXRhLmpzXCI7XG5pbXBvcnQgKiBhcyBNZXNzYWdlc0FQSSBmcm9tIFwiLi4vLi4vbWVzc2FnZXMvbWVzc2FnZXMuanNcIjtcbmltcG9ydCAqIGFzIEJhdGNoZXNBUEkgZnJvbSBcIi4vYmF0Y2hlcy5qc1wiO1xuaW1wb3J0IHtcbiAgQmF0Y2hDYW5jZWxQYXJhbXMsXG4gIEJhdGNoQ3JlYXRlUGFyYW1zLFxuICBCYXRjaERlbGV0ZVBhcmFtcyxcbiAgQmF0Y2hMaXN0UGFyYW1zLFxuICBCYXRjaFJlc3VsdHNQYXJhbXMsXG4gIEJhdGNoUmV0cmlldmVQYXJhbXMsXG4gIEJhdGNoZXMsXG4gIEJldGFEZWxldGVkTWVzc2FnZUJhdGNoLFxuICBCZXRhTWVzc2FnZUJhdGNoLFxuICBCZXRhTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQsXG4gIEJldGFNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0LFxuICBCZXRhTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCxcbiAgQmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSxcbiAgQmV0YU1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMsXG4gIEJldGFNZXNzYWdlQmF0Y2hSZXN1bHQsXG4gIEJldGFNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQsXG4gIEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UsXG59IGZyb20gXCIuL2JhdGNoZXMuanNcIjtcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuLi8uLi8uLi9zdHJlYW1pbmcuanNcIjtcbmltcG9ydCB7IEJldGFNZXNzYWdlU3RyZWFtIH0gZnJvbSBcIi4uLy4uLy4uL2xpYi9CZXRhTWVzc2FnZVN0cmVhbS5qc1wiO1xuaW1wb3J0IHR5cGUgeyBNb2RlbCB9IGZyb20gXCIuLi8uLi9tZXNzYWdlcy9tZXNzYWdlcy5qc1wiO1xuXG5jb25zdCBERVBSRUNBVEVEX01PREVMUzoge1xuICBbSyBpbiBNb2RlbF0/OiBzdHJpbmc7XG59ID0ge1xuICAnY2xhdWRlLTEuMyc6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLTEuMy0xMDBrJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG4gICdjbGF1ZGUtaW5zdGFudC0xLjEnOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS1pbnN0YW50LTEuMS0xMDBrJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG4gICdjbGF1ZGUtaW5zdGFudC0xLjInOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS0zLXNvbm5ldC0yMDI0MDIyOSc6ICdKdWx5IDIxc3QsIDIwMjUnLFxuICAnY2xhdWRlLTIuMSc6ICdKdWx5IDIxc3QsIDIwMjUnLFxuICAnY2xhdWRlLTIuMCc6ICdKdWx5IDIxc3QsIDIwMjUnLFxufTtcblxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICBiYXRjaGVzOiBCYXRjaGVzQVBJLkJhdGNoZXMgPSBuZXcgQmF0Y2hlc0FQSS5CYXRjaGVzKHRoaXMuX2NsaWVudCk7XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBzdHJ1Y3R1cmVkIGxpc3Qgb2YgaW5wdXQgbWVzc2FnZXMgd2l0aCB0ZXh0IGFuZC9vciBpbWFnZSBjb250ZW50LCBhbmQgdGhlXG4gICAqIG1vZGVsIHdpbGwgZ2VuZXJhdGUgdGhlIG5leHQgbWVzc2FnZSBpbiB0aGUgY29udmVyc2F0aW9uLlxuICAgKlxuICAgKiBUaGUgTWVzc2FnZXMgQVBJIGNhbiBiZSB1c2VkIGZvciBlaXRoZXIgc2luZ2xlIHF1ZXJpZXMgb3Igc3RhdGVsZXNzIG11bHRpLXR1cm5cbiAgICogY29udmVyc2F0aW9ucy5cbiAgICovXG4gIGNyZWF0ZShwYXJhbXM6IE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQVBJUHJvbWlzZTxCZXRhTWVzc2FnZT47XG4gIGNyZWF0ZShcbiAgICBwYXJhbXM6IE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQ+PjtcbiAgY3JlYXRlKFxuICAgIHBhcmFtczogTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2UsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQ+IHwgQmV0YU1lc3NhZ2U+O1xuICBjcmVhdGUoXG4gICAgcGFyYW1zOiBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPEJldGFNZXNzYWdlPiB8IEFQSVByb21pc2U8U3RyZWFtPEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQ+PiB7XG4gICAgY29uc3QgeyBiZXRhcywgLi4uYm9keSB9ID0gcGFyYW1zO1xuXG4gICAgaWYgKGJvZHkubW9kZWwgaW4gREVQUkVDQVRFRF9NT0RFTFMpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFRoZSBtb2RlbCAnJHtib2R5Lm1vZGVsfScgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCByZWFjaCBlbmQtb2YtbGlmZSBvbiAke1xuICAgICAgICAgIERFUFJFQ0FURURfTU9ERUxTW2JvZHkubW9kZWxdXG4gICAgICAgIH1cXG5QbGVhc2UgbWlncmF0ZSB0byBhIG5ld2VyIG1vZGVsLiBWaXNpdCBodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3Jlc291cmNlcy9tb2RlbC1kZXByZWNhdGlvbnMgZm9yIG1vcmUgaW5mb3JtYXRpb24uYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5wb3N0KCcvdjEvbWVzc2FnZXM/YmV0YT10cnVlJywge1xuICAgICAgYm9keSxcbiAgICAgIHRpbWVvdXQ6ICh0aGlzLl9jbGllbnQgYXMgYW55KS5fb3B0aW9ucy50aW1lb3V0ID8/IDYwMDAwMCxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIC4uLihiZXRhcz8udG9TdHJpbmcoKSAhPSBudWxsID8geyAnYW50aHJvcGljLWJldGEnOiBiZXRhcz8udG9TdHJpbmcoKSB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgLi4ub3B0aW9ucz8uaGVhZGVycyxcbiAgICAgIH0sXG4gICAgICBzdHJlYW06IHBhcmFtcy5zdHJlYW0gPz8gZmFsc2UsXG4gICAgfSkgYXMgQVBJUHJvbWlzZTxCZXRhTWVzc2FnZT4gfCBBUElQcm9taXNlPFN0cmVhbTxCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50Pj47XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgTWVzc2FnZSBzdHJlYW1cbiAgICovXG4gIHN0cmVhbShib2R5OiBCZXRhTWVzc2FnZVN0cmVhbVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBCZXRhTWVzc2FnZVN0cmVhbSB7XG4gICAgcmV0dXJuIEJldGFNZXNzYWdlU3RyZWFtLmNyZWF0ZU1lc3NhZ2UodGhpcywgYm9keSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogQ291bnQgdGhlIG51bWJlciBvZiB0b2tlbnMgaW4gYSBNZXNzYWdlLlxuICAgKlxuICAgKiBUaGUgVG9rZW4gQ291bnQgQVBJIGNhbiBiZSB1c2VkIHRvIGNvdW50IHRoZSBudW1iZXIgb2YgdG9rZW5zIGluIGEgTWVzc2FnZSxcbiAgICogaW5jbHVkaW5nIHRvb2xzLCBpbWFnZXMsIGFuZCBkb2N1bWVudHMsIHdpdGhvdXQgY3JlYXRpbmcgaXQuXG4gICAqL1xuICBjb3VudFRva2VucyhcbiAgICBwYXJhbXM6IE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPEJldGFNZXNzYWdlVG9rZW5zQ291bnQ+IHtcbiAgICBjb25zdCB7IGJldGFzLCAuLi5ib2R5IH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5wb3N0KCcvdjEvbWVzc2FnZXMvY291bnRfdG9rZW5zP2JldGE9dHJ1ZScsIHtcbiAgICAgIGJvZHksXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYW50aHJvcGljLWJldGEnOiBbLi4uKGJldGFzID8/IFtdKSwgJ3Rva2VuLWNvdW50aW5nLTIwMjQtMTEtMDEnXS50b1N0cmluZygpLFxuICAgICAgICAuLi5vcHRpb25zPy5oZWFkZXJzLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBCZXRhTWVzc2FnZVN0cmVhbVBhcmFtcyA9IE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFCYXNlNjRQREZCbG9jayB7XG4gIHNvdXJjZTogQmV0YUJhc2U2NFBERlNvdXJjZSB8IEJldGFQbGFpblRleHRTb3VyY2UgfCBCZXRhQ29udGVudEJsb2NrU291cmNlO1xuXG4gIHR5cGU6ICdkb2N1bWVudCc7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIGNpdGF0aW9ucz86IEJldGFDaXRhdGlvbnNDb25maWdQYXJhbTtcblxuICBjb250ZXh0Pzogc3RyaW5nIHwgbnVsbDtcblxuICB0aXRsZT86IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUJhc2U2NFBERlNvdXJjZSB7XG4gIGRhdGE6IHN0cmluZztcblxuICBtZWRpYV90eXBlOiAnYXBwbGljYXRpb24vcGRmJztcblxuICB0eXBlOiAnYmFzZTY0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHtcbiAgdHlwZTogJ2VwaGVtZXJhbCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX2NoYXJfaW5kZXg6IG51bWJlcjtcblxuICBzdGFydF9jaGFyX2luZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NoYXJfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX2NoYXJfaW5kZXg6IG51bWJlcjtcblxuICBzdGFydF9jaGFyX2luZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NoYXJfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX2Jsb2NrX2luZGV4OiBudW1iZXI7XG5cbiAgc3RhcnRfYmxvY2tfaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9ibG9ja19pbmRleDogbnVtYmVyO1xuXG4gIHN0YXJ0X2Jsb2NrX2luZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NvbnRlbnRfYmxvY2tfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvbiB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9wYWdlX251bWJlcjogbnVtYmVyO1xuXG4gIHN0YXJ0X3BhZ2VfbnVtYmVyOiBudW1iZXI7XG5cbiAgdHlwZTogJ3BhZ2VfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX3BhZ2VfbnVtYmVyOiBudW1iZXI7XG5cbiAgc3RhcnRfcGFnZV9udW1iZXI6IG51bWJlcjtcblxuICB0eXBlOiAncGFnZV9sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNpdGF0aW9uc0NvbmZpZ1BhcmFtIHtcbiAgZW5hYmxlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNpdGF0aW9uc0RlbHRhIHtcbiAgY2l0YXRpb246IEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvbiB8IEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvbiB8IEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uO1xuXG4gIHR5cGU6ICdjaXRhdGlvbnNfZGVsdGEnO1xufVxuXG5leHBvcnQgdHlwZSBCZXRhQ29udGVudEJsb2NrID0gQmV0YVRleHRCbG9jayB8IEJldGFUb29sVXNlQmxvY2s7XG5cbmV4cG9ydCB0eXBlIEJldGFDb250ZW50QmxvY2tQYXJhbSA9XG4gIHwgQmV0YVRleHRCbG9ja1BhcmFtXG4gIHwgQmV0YUltYWdlQmxvY2tQYXJhbVxuICB8IEJldGFUb29sVXNlQmxvY2tQYXJhbVxuICB8IEJldGFUb29sUmVzdWx0QmxvY2tQYXJhbVxuICB8IEJldGFCYXNlNjRQREZCbG9jaztcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQ29udGVudEJsb2NrU291cmNlIHtcbiAgY29udGVudDogc3RyaW5nIHwgQXJyYXk8QmV0YUNvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQ+O1xuXG4gIHR5cGU6ICdjb250ZW50Jztcbn1cblxuZXhwb3J0IHR5cGUgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQgPSBCZXRhVGV4dEJsb2NrUGFyYW0gfCBCZXRhSW1hZ2VCbG9ja1BhcmFtO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFJbWFnZUJsb2NrUGFyYW0ge1xuICBzb3VyY2U6IEJldGFJbWFnZUJsb2NrUGFyYW0uU291cmNlO1xuXG4gIHR5cGU6ICdpbWFnZSc7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEJldGFJbWFnZUJsb2NrUGFyYW0ge1xuICBleHBvcnQgaW50ZXJmYWNlIFNvdXJjZSB7XG4gICAgZGF0YTogc3RyaW5nO1xuXG4gICAgbWVkaWFfdHlwZTogJ2ltYWdlL2pwZWcnIHwgJ2ltYWdlL3BuZycgfCAnaW1hZ2UvZ2lmJyB8ICdpbWFnZS93ZWJwJztcblxuICAgIHR5cGU6ICdiYXNlNjQnO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUlucHV0SlNPTkRlbHRhIHtcbiAgcGFydGlhbF9qc29uOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2lucHV0X2pzb25fZGVsdGEnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlIHtcbiAgLyoqXG4gICAqIFVuaXF1ZSBvYmplY3QgaWRlbnRpZmllci5cbiAgICpcbiAgICogVGhlIGZvcm1hdCBhbmQgbGVuZ3RoIG9mIElEcyBtYXkgY2hhbmdlIG92ZXIgdGltZS5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIENvbnRlbnQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbC5cbiAgICpcbiAgICogVGhpcyBpcyBhbiBhcnJheSBvZiBjb250ZW50IGJsb2NrcywgZWFjaCBvZiB3aGljaCBoYXMgYSBgdHlwZWAgdGhhdCBkZXRlcm1pbmVzXG4gICAqIGl0cyBzaGFwZS5cbiAgICpcbiAgICogRXhhbXBsZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIkhpLCBJJ20gQ2xhdWRlLlwiIH1dXG4gICAqIGBgYFxuICAgKlxuICAgKiBJZiB0aGUgcmVxdWVzdCBpbnB1dCBgbWVzc2FnZXNgIGVuZGVkIHdpdGggYW4gYGFzc2lzdGFudGAgdHVybiwgdGhlbiB0aGVcbiAgICogcmVzcG9uc2UgYGNvbnRlbnRgIHdpbGwgY29udGludWUgZGlyZWN0bHkgZnJvbSB0aGF0IGxhc3QgdHVybi4gWW91IGNhbiB1c2UgdGhpc1xuICAgKiB0byBjb25zdHJhaW4gdGhlIG1vZGVsJ3Mgb3V0cHV0LlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgdGhlIGlucHV0IGBtZXNzYWdlc2Agd2VyZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiV2hhdCdzIHRoZSBHcmVlayBuYW1lIGZvciBTdW4/IChBKSBTb2wgKEIpIEhlbGlvcyAoQykgU3VuXCJcbiAgICogICB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIlRoZSBiZXN0IGFuc3dlciBpcyAoXCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBUaGVuIHRoZSByZXNwb25zZSBgY29udGVudGAgbWlnaHQgYmU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW3sgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJCKVwiIH1dXG4gICAqIGBgYFxuICAgKi9cbiAgY29udGVudDogQXJyYXk8QmV0YUNvbnRlbnRCbG9jaz47XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1lc3NhZ2VzQVBJLk1vZGVsO1xuXG4gIC8qKlxuICAgKiBDb252ZXJzYXRpb25hbCByb2xlIG9mIHRoZSBnZW5lcmF0ZWQgbWVzc2FnZS5cbiAgICpcbiAgICogVGhpcyB3aWxsIGFsd2F5cyBiZSBgXCJhc3Npc3RhbnRcImAuXG4gICAqL1xuICByb2xlOiAnYXNzaXN0YW50JztcblxuICAvKipcbiAgICogVGhlIHJlYXNvbiB0aGF0IHdlIHN0b3BwZWQuXG4gICAqXG4gICAqIFRoaXMgbWF5IGJlIG9uZSB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAgICpcbiAgICogLSBgXCJlbmRfdHVyblwiYDogdGhlIG1vZGVsIHJlYWNoZWQgYSBuYXR1cmFsIHN0b3BwaW5nIHBvaW50XG4gICAqIC0gYFwibWF4X3Rva2Vuc1wiYDogd2UgZXhjZWVkZWQgdGhlIHJlcXVlc3RlZCBgbWF4X3Rva2Vuc2Agb3IgdGhlIG1vZGVsJ3MgbWF4aW11bVxuICAgKiAtIGBcInN0b3Bfc2VxdWVuY2VcImA6IG9uZSBvZiB5b3VyIHByb3ZpZGVkIGN1c3RvbSBgc3RvcF9zZXF1ZW5jZXNgIHdhcyBnZW5lcmF0ZWRcbiAgICogLSBgXCJ0b29sX3VzZVwiYDogdGhlIG1vZGVsIGludm9rZWQgb25lIG9yIG1vcmUgdG9vbHNcbiAgICpcbiAgICogSW4gbm9uLXN0cmVhbWluZyBtb2RlIHRoaXMgdmFsdWUgaXMgYWx3YXlzIG5vbi1udWxsLiBJbiBzdHJlYW1pbmcgbW9kZSwgaXQgaXNcbiAgICogbnVsbCBpbiB0aGUgYG1lc3NhZ2Vfc3RhcnRgIGV2ZW50IGFuZCBub24tbnVsbCBvdGhlcndpc2UuXG4gICAqL1xuICBzdG9wX3JlYXNvbjogJ2VuZF90dXJuJyB8ICdtYXhfdG9rZW5zJyB8ICdzdG9wX3NlcXVlbmNlJyB8ICd0b29sX3VzZScgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBXaGljaCBjdXN0b20gc3RvcCBzZXF1ZW5jZSB3YXMgZ2VuZXJhdGVkLCBpZiBhbnkuXG4gICAqXG4gICAqIFRoaXMgdmFsdWUgd2lsbCBiZSBhIG5vbi1udWxsIHN0cmluZyBpZiBvbmUgb2YgeW91ciBjdXN0b20gc3RvcCBzZXF1ZW5jZXMgd2FzXG4gICAqIGdlbmVyYXRlZC5cbiAgICovXG4gIHN0b3Bfc2VxdWVuY2U6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgTWVzc2FnZXMsIHRoaXMgaXMgYWx3YXlzIGBcIm1lc3NhZ2VcImAuXG4gICAqL1xuICB0eXBlOiAnbWVzc2FnZSc7XG5cbiAgLyoqXG4gICAqIEJpbGxpbmcgYW5kIHJhdGUtbGltaXQgdXNhZ2UuXG4gICAqXG4gICAqIEFudGhyb3BpYydzIEFQSSBiaWxscyBhbmQgcmF0ZS1saW1pdHMgYnkgdG9rZW4gY291bnRzLCBhcyB0b2tlbnMgcmVwcmVzZW50IHRoZVxuICAgKiB1bmRlcmx5aW5nIGNvc3QgdG8gb3VyIHN5c3RlbXMuXG4gICAqXG4gICAqIFVuZGVyIHRoZSBob29kLCB0aGUgQVBJIHRyYW5zZm9ybXMgcmVxdWVzdHMgaW50byBhIGZvcm1hdCBzdWl0YWJsZSBmb3IgdGhlXG4gICAqIG1vZGVsLiBUaGUgbW9kZWwncyBvdXRwdXQgdGhlbiBnb2VzIHRocm91Z2ggYSBwYXJzaW5nIHN0YWdlIGJlZm9yZSBiZWNvbWluZyBhblxuICAgKiBBUEkgcmVzcG9uc2UuIEFzIGEgcmVzdWx0LCB0aGUgdG9rZW4gY291bnRzIGluIGB1c2FnZWAgd2lsbCBub3QgbWF0Y2ggb25lLXRvLW9uZVxuICAgKiB3aXRoIHRoZSBleGFjdCB2aXNpYmxlIGNvbnRlbnQgb2YgYW4gQVBJIHJlcXVlc3Qgb3IgcmVzcG9uc2UuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBgb3V0cHV0X3Rva2Vuc2Agd2lsbCBiZSBub24temVybywgZXZlbiBmb3IgYW4gZW1wdHkgc3RyaW5nIHJlc3BvbnNlXG4gICAqIGZyb20gQ2xhdWRlLlxuICAgKi9cbiAgdXNhZ2U6IEJldGFVc2FnZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZURlbHRhVXNhZ2Uge1xuICAvKipcbiAgICogVGhlIGN1bXVsYXRpdmUgbnVtYmVyIG9mIG91dHB1dCB0b2tlbnMgd2hpY2ggd2VyZSB1c2VkLlxuICAgKi9cbiAgb3V0cHV0X3Rva2VuczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlUGFyYW0ge1xuICBjb250ZW50OiBzdHJpbmcgfCBBcnJheTxCZXRhQ29udGVudEJsb2NrUGFyYW0+O1xuXG4gIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlVG9rZW5zQ291bnQge1xuICAvKipcbiAgICogVGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgYWNyb3NzIHRoZSBwcm92aWRlZCBsaXN0IG9mIG1lc3NhZ2VzLCBzeXN0ZW0gcHJvbXB0LFxuICAgKiBhbmQgdG9vbHMuXG4gICAqL1xuICBpbnB1dF90b2tlbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWV0YWRhdGEge1xuICAvKipcbiAgICogQW4gZXh0ZXJuYWwgaWRlbnRpZmllciBmb3IgdGhlIHVzZXIgd2hvIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVxdWVzdC5cbiAgICpcbiAgICogVGhpcyBzaG91bGQgYmUgYSB1dWlkLCBoYXNoIHZhbHVlLCBvciBvdGhlciBvcGFxdWUgaWRlbnRpZmllci4gQW50aHJvcGljIG1heSB1c2VcbiAgICogdGhpcyBpZCB0byBoZWxwIGRldGVjdCBhYnVzZS4gRG8gbm90IGluY2x1ZGUgYW55IGlkZW50aWZ5aW5nIGluZm9ybWF0aW9uIHN1Y2ggYXNcbiAgICogbmFtZSwgZW1haWwgYWRkcmVzcywgb3IgcGhvbmUgbnVtYmVyLlxuICAgKi9cbiAgdXNlcl9pZD86IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVBsYWluVGV4dFNvdXJjZSB7XG4gIGRhdGE6IHN0cmluZztcblxuICBtZWRpYV90eXBlOiAndGV4dC9wbGFpbic7XG5cbiAgdHlwZTogJ3RleHQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50IHtcbiAgZGVsdGE6IEJldGFUZXh0RGVsdGEgfCBCZXRhSW5wdXRKU09ORGVsdGEgfCBCZXRhQ2l0YXRpb25zRGVsdGE7XG5cbiAgaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19kZWx0YSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQge1xuICBjb250ZW50X2Jsb2NrOiBCZXRhVGV4dEJsb2NrIHwgQmV0YVRvb2xVc2VCbG9jaztcblxuICBpbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX3N0YXJ0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50IHtcbiAgaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19zdG9wJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnQge1xuICBkZWx0YTogQmV0YVJhd01lc3NhZ2VEZWx0YUV2ZW50LkRlbHRhO1xuXG4gIHR5cGU6ICdtZXNzYWdlX2RlbHRhJztcblxuICAvKipcbiAgICogQmlsbGluZyBhbmQgcmF0ZS1saW1pdCB1c2FnZS5cbiAgICpcbiAgICogQW50aHJvcGljJ3MgQVBJIGJpbGxzIGFuZCByYXRlLWxpbWl0cyBieSB0b2tlbiBjb3VudHMsIGFzIHRva2VucyByZXByZXNlbnQgdGhlXG4gICAqIHVuZGVybHlpbmcgY29zdCB0byBvdXIgc3lzdGVtcy5cbiAgICpcbiAgICogVW5kZXIgdGhlIGhvb2QsIHRoZSBBUEkgdHJhbnNmb3JtcyByZXF1ZXN0cyBpbnRvIGEgZm9ybWF0IHN1aXRhYmxlIGZvciB0aGVcbiAgICogbW9kZWwuIFRoZSBtb2RlbCdzIG91dHB1dCB0aGVuIGdvZXMgdGhyb3VnaCBhIHBhcnNpbmcgc3RhZ2UgYmVmb3JlIGJlY29taW5nIGFuXG4gICAqIEFQSSByZXNwb25zZS4gQXMgYSByZXN1bHQsIHRoZSB0b2tlbiBjb3VudHMgaW4gYHVzYWdlYCB3aWxsIG5vdCBtYXRjaCBvbmUtdG8tb25lXG4gICAqIHdpdGggdGhlIGV4YWN0IHZpc2libGUgY29udGVudCBvZiBhbiBBUEkgcmVxdWVzdCBvciByZXNwb25zZS5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGBvdXRwdXRfdG9rZW5zYCB3aWxsIGJlIG5vbi16ZXJvLCBldmVuIGZvciBhbiBlbXB0eSBzdHJpbmcgcmVzcG9uc2VcbiAgICogZnJvbSBDbGF1ZGUuXG4gICAqL1xuICB1c2FnZTogQmV0YU1lc3NhZ2VEZWx0YVVzYWdlO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudCB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgRGVsdGEge1xuICAgIHN0b3BfcmVhc29uOiAnZW5kX3R1cm4nIHwgJ21heF90b2tlbnMnIHwgJ3N0b3Bfc2VxdWVuY2UnIHwgJ3Rvb2xfdXNlJyB8IG51bGw7XG5cbiAgICBzdG9wX3NlcXVlbmNlOiBzdHJpbmcgfCBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVJhd01lc3NhZ2VTdGFydEV2ZW50IHtcbiAgbWVzc2FnZTogQmV0YU1lc3NhZ2U7XG5cbiAgdHlwZTogJ21lc3NhZ2Vfc3RhcnQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50IHtcbiAgdHlwZTogJ21lc3NhZ2Vfc3RvcCc7XG59XG5cbmV4cG9ydCB0eXBlIEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQgPVxuICB8IEJldGFSYXdNZXNzYWdlU3RhcnRFdmVudFxuICB8IEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudFxuICB8IEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50XG4gIHwgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnRcbiAgfCBCZXRhUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudFxuICB8IEJldGFSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRleHRCbG9jayB7XG4gIC8qKlxuICAgKiBDaXRhdGlvbnMgc3VwcG9ydGluZyB0aGUgdGV4dCBibG9jay5cbiAgICpcbiAgICogVGhlIHR5cGUgb2YgY2l0YXRpb24gcmV0dXJuZWQgd2lsbCBkZXBlbmQgb24gdGhlIHR5cGUgb2YgZG9jdW1lbnQgYmVpbmcgY2l0ZWQuXG4gICAqIENpdGluZyBhIFBERiByZXN1bHRzIGluIGBwYWdlX2xvY2F0aW9uYCwgcGxhaW4gdGV4dCByZXN1bHRzIGluIGBjaGFyX2xvY2F0aW9uYCxcbiAgICogYW5kIGNvbnRlbnQgZG9jdW1lbnQgcmVzdWx0cyBpbiBgY29udGVudF9ibG9ja19sb2NhdGlvbmAuXG4gICAqL1xuICBjaXRhdGlvbnM6IEFycmF5PEJldGFUZXh0Q2l0YXRpb24+IHwgbnVsbDtcblxuICB0ZXh0OiBzdHJpbmc7XG5cbiAgdHlwZTogJ3RleHQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUZXh0QmxvY2tQYXJhbSB7XG4gIHRleHQ6IHN0cmluZztcblxuICB0eXBlOiAndGV4dCc7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIGNpdGF0aW9ucz86IEFycmF5PEJldGFUZXh0Q2l0YXRpb25QYXJhbT4gfCBudWxsO1xufVxuXG5leHBvcnQgdHlwZSBCZXRhVGV4dENpdGF0aW9uID1cbiAgfCBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb25cbiAgfCBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb25cbiAgfCBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbjtcblxuZXhwb3J0IHR5cGUgQmV0YVRleHRDaXRhdGlvblBhcmFtID1cbiAgfCBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbVxuICB8IEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtXG4gIHwgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbTtcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVGV4dERlbHRhIHtcbiAgdGV4dDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0ZXh0X2RlbHRhJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbCB7XG4gIC8qKlxuICAgKiBbSlNPTiBzY2hlbWFdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnLykgZm9yIHRoaXMgdG9vbCdzIGlucHV0LlxuICAgKlxuICAgKiBUaGlzIGRlZmluZXMgdGhlIHNoYXBlIG9mIHRoZSBgaW5wdXRgIHRoYXQgeW91ciB0b29sIGFjY2VwdHMgYW5kIHRoYXQgdGhlIG1vZGVsXG4gICAqIHdpbGwgcHJvZHVjZS5cbiAgICovXG4gIGlucHV0X3NjaGVtYTogQmV0YVRvb2wuSW5wdXRTY2hlbWE7XG5cbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqXG4gICAqIFRoaXMgaXMgaG93IHRoZSB0b29sIHdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBtb2RlbCBhbmQgaW4gdG9vbF91c2UgYmxvY2tzLlxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcblxuICAvKipcbiAgICogRGVzY3JpcHRpb24gb2Ygd2hhdCB0aGlzIHRvb2wgZG9lcy5cbiAgICpcbiAgICogVG9vbCBkZXNjcmlwdGlvbnMgc2hvdWxkIGJlIGFzIGRldGFpbGVkIGFzIHBvc3NpYmxlLiBUaGUgbW9yZSBpbmZvcm1hdGlvbiB0aGF0XG4gICAqIHRoZSBtb2RlbCBoYXMgYWJvdXQgd2hhdCB0aGUgdG9vbCBpcyBhbmQgaG93IHRvIHVzZSBpdCwgdGhlIGJldHRlciBpdCB3aWxsXG4gICAqIHBlcmZvcm0uIFlvdSBjYW4gdXNlIG5hdHVyYWwgbGFuZ3VhZ2UgZGVzY3JpcHRpb25zIHRvIHJlaW5mb3JjZSBpbXBvcnRhbnRcbiAgICogYXNwZWN0cyBvZiB0aGUgdG9vbCBpbnB1dCBKU09OIHNjaGVtYS5cbiAgICovXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuXG4gIHR5cGU/OiAnY3VzdG9tJyB8IG51bGw7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQmV0YVRvb2wge1xuICAvKipcbiAgICogW0pTT04gc2NoZW1hXShodHRwczovL2pzb24tc2NoZW1hLm9yZy8pIGZvciB0aGlzIHRvb2wncyBpbnB1dC5cbiAgICpcbiAgICogVGhpcyBkZWZpbmVzIHRoZSBzaGFwZSBvZiB0aGUgYGlucHV0YCB0aGF0IHlvdXIgdG9vbCBhY2NlcHRzIGFuZCB0aGF0IHRoZSBtb2RlbFxuICAgKiB3aWxsIHByb2R1Y2UuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIElucHV0U2NoZW1hIHtcbiAgICB0eXBlOiAnb2JqZWN0JztcblxuICAgIHByb3BlcnRpZXM/OiB1bmtub3duIHwgbnVsbDtcbiAgICBbazogc3RyaW5nXTogdW5rbm93bjtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sQmFzaDIwMjQxMDIyIHtcbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqXG4gICAqIFRoaXMgaXMgaG93IHRoZSB0b29sIHdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBtb2RlbCBhbmQgaW4gdG9vbF91c2UgYmxvY2tzLlxuICAgKi9cbiAgbmFtZTogJ2Jhc2gnO1xuXG4gIHR5cGU6ICdiYXNoXzIwMjQxMDIyJztcblxuICBjYWNoZV9jb250cm9sPzogQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG59XG5cbi8qKlxuICogSG93IHRoZSBtb2RlbCBzaG91bGQgdXNlIHRoZSBwcm92aWRlZCB0b29scy4gVGhlIG1vZGVsIGNhbiB1c2UgYSBzcGVjaWZpYyB0b29sLFxuICogYW55IGF2YWlsYWJsZSB0b29sLCBvciBkZWNpZGUgYnkgaXRzZWxmLlxuICovXG5leHBvcnQgdHlwZSBCZXRhVG9vbENob2ljZSA9IEJldGFUb29sQ2hvaWNlQXV0byB8IEJldGFUb29sQ2hvaWNlQW55IHwgQmV0YVRvb2xDaG9pY2VUb29sO1xuXG4vKipcbiAqIFRoZSBtb2RlbCB3aWxsIHVzZSBhbnkgYXZhaWxhYmxlIHRvb2xzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sQ2hvaWNlQW55IHtcbiAgdHlwZTogJ2FueSc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZGlzYWJsZSBwYXJhbGxlbCB0b29sIHVzZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC4gSWYgc2V0IHRvIGB0cnVlYCwgdGhlIG1vZGVsIHdpbGwgb3V0cHV0IGV4YWN0bHkgb25lIHRvb2xcbiAgICogdXNlLlxuICAgKi9cbiAgZGlzYWJsZV9wYXJhbGxlbF90b29sX3VzZT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVGhlIG1vZGVsIHdpbGwgYXV0b21hdGljYWxseSBkZWNpZGUgd2hldGhlciB0byB1c2UgdG9vbHMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2xDaG9pY2VBdXRvIHtcbiAgdHlwZTogJ2F1dG8nO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGRpc2FibGUgcGFyYWxsZWwgdG9vbCB1c2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGBmYWxzZWAuIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBtb2RlbCB3aWxsIG91dHB1dCBhdCBtb3N0IG9uZSB0b29sXG4gICAqIHVzZS5cbiAgICovXG4gIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRoZSBtb2RlbCB3aWxsIHVzZSB0aGUgc3BlY2lmaWVkIHRvb2wgd2l0aCBgdG9vbF9jaG9pY2UubmFtZWAuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2xDaG9pY2VUb29sIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSB0b29sIHRvIHVzZS5cbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICB0eXBlOiAndG9vbCc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZGlzYWJsZSBwYXJhbGxlbCB0b29sIHVzZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC4gSWYgc2V0IHRvIGB0cnVlYCwgdGhlIG1vZGVsIHdpbGwgb3V0cHV0IGV4YWN0bHkgb25lIHRvb2xcbiAgICogdXNlLlxuICAgKi9cbiAgZGlzYWJsZV9wYXJhbGxlbF90b29sX3VzZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyIHtcbiAgLyoqXG4gICAqIFRoZSBoZWlnaHQgb2YgdGhlIGRpc3BsYXkgaW4gcGl4ZWxzLlxuICAgKi9cbiAgZGlzcGxheV9oZWlnaHRfcHg6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIHdpZHRoIG9mIHRoZSBkaXNwbGF5IGluIHBpeGVscy5cbiAgICovXG4gIGRpc3BsYXlfd2lkdGhfcHg6IG51bWJlcjtcblxuICAvKipcbiAgICogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICpcbiAgICogVGhpcyBpcyBob3cgdGhlIHRvb2wgd2lsbCBiZSBjYWxsZWQgYnkgdGhlIG1vZGVsIGFuZCBpbiB0b29sX3VzZSBibG9ja3MuXG4gICAqL1xuICBuYW1lOiAnY29tcHV0ZXInO1xuXG4gIHR5cGU6ICdjb21wdXRlcl8yMDI0MTAyMic7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgWDExIGRpc3BsYXkgbnVtYmVyIChlLmcuIDAsIDEpIGZvciB0aGUgZGlzcGxheS5cbiAgICovXG4gIGRpc3BsYXlfbnVtYmVyPzogbnVtYmVyIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbFJlc3VsdEJsb2NrUGFyYW0ge1xuICB0b29sX3VzZV9pZDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0b29sX3Jlc3VsdCc7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIGNvbnRlbnQ/OiBzdHJpbmcgfCBBcnJheTxCZXRhVGV4dEJsb2NrUGFyYW0gfCBCZXRhSW1hZ2VCbG9ja1BhcmFtPjtcblxuICBpc19lcnJvcj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2xUZXh0RWRpdG9yMjAyNDEwMjIge1xuICAvKipcbiAgICogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICpcbiAgICogVGhpcyBpcyBob3cgdGhlIHRvb2wgd2lsbCBiZSBjYWxsZWQgYnkgdGhlIG1vZGVsIGFuZCBpbiB0b29sX3VzZSBibG9ja3MuXG4gICAqL1xuICBuYW1lOiAnc3RyX3JlcGxhY2VfZWRpdG9yJztcblxuICB0eXBlOiAndGV4dF9lZGl0b3JfMjAyNDEwMjInO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcbn1cblxuZXhwb3J0IHR5cGUgQmV0YVRvb2xVbmlvbiA9XG4gIHwgQmV0YVRvb2xcbiAgfCBCZXRhVG9vbENvbXB1dGVyVXNlMjAyNDEwMjJcbiAgfCBCZXRhVG9vbEJhc2gyMDI0MTAyMlxuICB8IEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sVXNlQmxvY2sge1xuICBpZDogc3RyaW5nO1xuXG4gIGlucHV0OiB1bmtub3duO1xuXG4gIG5hbWU6IHN0cmluZztcblxuICB0eXBlOiAndG9vbF91c2UnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sVXNlQmxvY2tQYXJhbSB7XG4gIGlkOiBzdHJpbmc7XG5cbiAgaW5wdXQ6IHVua25vd247XG5cbiAgbmFtZTogc3RyaW5nO1xuXG4gIHR5cGU6ICd0b29sX3VzZSc7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFVc2FnZSB7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyB1c2VkIHRvIGNyZWF0ZSB0aGUgY2FjaGUgZW50cnkuXG4gICAqL1xuICBjYWNoZV9jcmVhdGlvbl9pbnB1dF90b2tlbnM6IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHJlYWQgZnJvbSB0aGUgY2FjaGUuXG4gICAqL1xuICBjYWNoZV9yZWFkX2lucHV0X3Rva2VuczogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgd2hpY2ggd2VyZSB1c2VkLlxuICAgKi9cbiAgaW5wdXRfdG9rZW5zOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2Ygb3V0cHV0IHRva2VucyB3aGljaCB3ZXJlIHVzZWQuXG4gICAqL1xuICBvdXRwdXRfdG9rZW5zOiBudW1iZXI7XG59XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMgPSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIHwgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZztcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGdlbmVyYXRlIGJlZm9yZSBzdG9wcGluZy5cbiAgICpcbiAgICogTm90ZSB0aGF0IG91ciBtb2RlbHMgbWF5IHN0b3AgX2JlZm9yZV8gcmVhY2hpbmcgdGhpcyBtYXhpbXVtLiBUaGlzIHBhcmFtZXRlclxuICAgKiBvbmx5IHNwZWNpZmllcyB0aGUgYWJzb2x1dGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGdlbmVyYXRlLlxuICAgKlxuICAgKiBEaWZmZXJlbnQgbW9kZWxzIGhhdmUgZGlmZmVyZW50IG1heGltdW0gdmFsdWVzIGZvciB0aGlzIHBhcmFtZXRlci4gU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgZGV0YWlscy5cbiAgICovXG4gIG1heF90b2tlbnM6IG51bWJlcjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogSW5wdXQgbWVzc2FnZXMuXG4gICAqXG4gICAqIE91ciBtb2RlbHMgYXJlIHRyYWluZWQgdG8gb3BlcmF0ZSBvbiBhbHRlcm5hdGluZyBgdXNlcmAgYW5kIGBhc3Npc3RhbnRgXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zLiBXaGVuIGNyZWF0aW5nIGEgbmV3IGBNZXNzYWdlYCwgeW91IHNwZWNpZnkgdGhlIHByaW9yXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zIHdpdGggdGhlIGBtZXNzYWdlc2AgcGFyYW1ldGVyLCBhbmQgdGhlIG1vZGVsIHRoZW4gZ2VuZXJhdGVzXG4gICAqIHRoZSBuZXh0IGBNZXNzYWdlYCBpbiB0aGUgY29udmVyc2F0aW9uLiBDb25zZWN1dGl2ZSBgdXNlcmAgb3IgYGFzc2lzdGFudGAgdHVybnNcbiAgICogaW4geW91ciByZXF1ZXN0IHdpbGwgYmUgY29tYmluZWQgaW50byBhIHNpbmdsZSB0dXJuLlxuICAgKlxuICAgKiBFYWNoIGlucHV0IG1lc3NhZ2UgbXVzdCBiZSBhbiBvYmplY3Qgd2l0aCBhIGByb2xlYCBhbmQgYGNvbnRlbnRgLiBZb3UgY2FuXG4gICAqIHNwZWNpZnkgYSBzaW5nbGUgYHVzZXJgLXJvbGUgbWVzc2FnZSwgb3IgeW91IGNhbiBpbmNsdWRlIG11bHRpcGxlIGB1c2VyYCBhbmRcbiAgICogYGFzc2lzdGFudGAgbWVzc2FnZXMuXG4gICAqXG4gICAqIElmIHRoZSBmaW5hbCBtZXNzYWdlIHVzZXMgdGhlIGBhc3Npc3RhbnRgIHJvbGUsIHRoZSByZXNwb25zZSBjb250ZW50IHdpbGxcbiAgICogY29udGludWUgaW1tZWRpYXRlbHkgZnJvbSB0aGUgY29udGVudCBpbiB0aGF0IG1lc3NhZ2UuIFRoaXMgY2FuIGJlIHVzZWQgdG9cbiAgICogY29uc3RyYWluIHBhcnQgb2YgdGhlIG1vZGVsJ3MgcmVzcG9uc2UuXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHNpbmdsZSBgdXNlcmAgbWVzc2FnZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XVxuICAgKiBgYGBcbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIG11bHRpcGxlIGNvbnZlcnNhdGlvbmFsIHR1cm5zOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8gdGhlcmUuXCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJIaSwgSSdtIENsYXVkZS4gSG93IGNhbiBJIGhlbHAgeW91P1wiIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkNhbiB5b3UgZXhwbGFpbiBMTE1zIGluIHBsYWluIEVuZ2xpc2g/XCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggYSBwYXJ0aWFsbHktZmlsbGVkIHJlc3BvbnNlIGZyb20gQ2xhdWRlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCJXaGF0J3MgdGhlIEdyZWVrIG5hbWUgZm9yIFN1bj8gKEEpIFNvbCAoQikgSGVsaW9zIChDKSBTdW5cIlxuICAgKiAgIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiVGhlIGJlc3QgYW5zd2VyIGlzIChcIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBgY29udGVudGAgbWF5IGJlIGVpdGhlciBhIHNpbmdsZSBgc3RyaW5nYCBvciBhbiBhcnJheSBvZlxuICAgKiBjb250ZW50IGJsb2Nrcywgd2hlcmUgZWFjaCBibG9jayBoYXMgYSBzcGVjaWZpYyBgdHlwZWAuIFVzaW5nIGEgYHN0cmluZ2AgZm9yXG4gICAqIGBjb250ZW50YCBpcyBzaG9ydGhhbmQgZm9yIGFuIGFycmF5IG9mIG9uZSBjb250ZW50IGJsb2NrIG9mIHR5cGUgYFwidGV4dFwiYC4gVGhlXG4gICAqIGZvbGxvd2luZyBpbnB1dCBtZXNzYWdlcyBhcmUgZXF1aXZhbGVudDpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1cbiAgICogYGBgXG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBbeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XSB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBTdGFydGluZyB3aXRoIENsYXVkZSAzIG1vZGVscywgeW91IGNhbiBhbHNvIHNlbmQgaW1hZ2UgY29udGVudCBibG9ja3M6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICoge1xuICAgKiAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICBcImNvbnRlbnRcIjogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBcInR5cGVcIjogXCJpbWFnZVwiLFxuICAgKiAgICAgICBcInNvdXJjZVwiOiB7XG4gICAqICAgICAgICAgXCJ0eXBlXCI6IFwiYmFzZTY0XCIsXG4gICAqICAgICAgICAgXCJtZWRpYV90eXBlXCI6IFwiaW1hZ2UvanBlZ1wiLFxuICAgKiAgICAgICAgIFwiZGF0YVwiOiBcIi85ai80QUFRU2taSlJnLi4uXCJcbiAgICogICAgICAgfVxuICAgKiAgICAgfSxcbiAgICogICAgIHsgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJXaGF0IGlzIGluIHRoaXMgaW1hZ2U/XCIgfVxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogV2UgY3VycmVudGx5IHN1cHBvcnQgdGhlIGBiYXNlNjRgIHNvdXJjZSB0eXBlIGZvciBpbWFnZXMsIGFuZCB0aGUgYGltYWdlL2pwZWdgLFxuICAgKiBgaW1hZ2UvcG5nYCwgYGltYWdlL2dpZmAsIGFuZCBgaW1hZ2Uvd2VicGAgbWVkaWEgdHlwZXMuXG4gICAqXG4gICAqIFNlZSBbZXhhbXBsZXNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1leGFtcGxlcyN2aXNpb24pIGZvclxuICAgKiBtb3JlIGlucHV0IGV4YW1wbGVzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgaWYgeW91IHdhbnQgdG8gaW5jbHVkZSBhXG4gICAqIFtzeXN0ZW0gcHJvbXB0XShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3N5c3RlbS1wcm9tcHRzKSwgeW91IGNhbiB1c2VcbiAgICogdGhlIHRvcC1sZXZlbCBgc3lzdGVtYCBwYXJhbWV0ZXIgXHUyMDE0IHRoZXJlIGlzIG5vIGBcInN5c3RlbVwiYCByb2xlIGZvciBpbnB1dFxuICAgKiBtZXNzYWdlcyBpbiB0aGUgTWVzc2FnZXMgQVBJLlxuICAgKi9cbiAgbWVzc2FnZXM6IEFycmF5PEJldGFNZXNzYWdlUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBUaGUgbW9kZWwgdGhhdCB3aWxsIGNvbXBsZXRlIHlvdXIgcHJvbXB0LlxcblxcblNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGFkZGl0aW9uYWxcbiAgICogZGV0YWlscyBhbmQgb3B0aW9ucy5cbiAgICovXG4gIG1vZGVsOiBNZXNzYWdlc0FQSS5Nb2RlbDtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogQW4gb2JqZWN0IGRlc2NyaWJpbmcgbWV0YWRhdGEgYWJvdXQgdGhlIHJlcXVlc3QuXG4gICAqL1xuICBtZXRhZGF0YT86IEJldGFNZXRhZGF0YTtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogQ3VzdG9tIHRleHQgc2VxdWVuY2VzIHRoYXQgd2lsbCBjYXVzZSB0aGUgbW9kZWwgdG8gc3RvcCBnZW5lcmF0aW5nLlxuICAgKlxuICAgKiBPdXIgbW9kZWxzIHdpbGwgbm9ybWFsbHkgc3RvcCB3aGVuIHRoZXkgaGF2ZSBuYXR1cmFsbHkgY29tcGxldGVkIHRoZWlyIHR1cm4sXG4gICAqIHdoaWNoIHdpbGwgcmVzdWx0IGluIGEgcmVzcG9uc2UgYHN0b3BfcmVhc29uYCBvZiBgXCJlbmRfdHVyblwiYC5cbiAgICpcbiAgICogSWYgeW91IHdhbnQgdGhlIG1vZGVsIHRvIHN0b3AgZ2VuZXJhdGluZyB3aGVuIGl0IGVuY291bnRlcnMgY3VzdG9tIHN0cmluZ3Mgb2ZcbiAgICogdGV4dCwgeW91IGNhbiB1c2UgdGhlIGBzdG9wX3NlcXVlbmNlc2AgcGFyYW1ldGVyLiBJZiB0aGUgbW9kZWwgZW5jb3VudGVycyBvbmUgb2ZcbiAgICogdGhlIGN1c3RvbSBzZXF1ZW5jZXMsIHRoZSByZXNwb25zZSBgc3RvcF9yZWFzb25gIHZhbHVlIHdpbGwgYmUgYFwic3RvcF9zZXF1ZW5jZVwiYFxuICAgKiBhbmQgdGhlIHJlc3BvbnNlIGBzdG9wX3NlcXVlbmNlYCB2YWx1ZSB3aWxsIGNvbnRhaW4gdGhlIG1hdGNoZWQgc3RvcCBzZXF1ZW5jZS5cbiAgICovXG4gIHN0b3Bfc2VxdWVuY2VzPzogQXJyYXk8c3RyaW5nPjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnRcbiAgICogZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLXN0cmVhbWluZykgZm9yXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW0/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBTeXN0ZW0gcHJvbXB0LlxuICAgKlxuICAgKiBBIHN5c3RlbSBwcm9tcHQgaXMgYSB3YXkgb2YgcHJvdmlkaW5nIGNvbnRleHQgYW5kIGluc3RydWN0aW9ucyB0byBDbGF1ZGUsIHN1Y2hcbiAgICogYXMgc3BlY2lmeWluZyBhIHBhcnRpY3VsYXIgZ29hbCBvciByb2xlLiBTZWUgb3VyXG4gICAqIFtndWlkZSB0byBzeXN0ZW0gcHJvbXB0c10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9zeXN0ZW0tcHJvbXB0cykuXG4gICAqL1xuICBzeXN0ZW0/OiBzdHJpbmcgfCBBcnJheTxCZXRhVGV4dEJsb2NrUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBBbW91bnQgb2YgcmFuZG9tbmVzcyBpbmplY3RlZCBpbnRvIHRoZSByZXNwb25zZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYDEuMGAuIFJhbmdlcyBmcm9tIGAwLjBgIHRvIGAxLjBgLiBVc2UgYHRlbXBlcmF0dXJlYCBjbG9zZXIgdG8gYDAuMGBcbiAgICogZm9yIGFuYWx5dGljYWwgLyBtdWx0aXBsZSBjaG9pY2UsIGFuZCBjbG9zZXIgdG8gYDEuMGAgZm9yIGNyZWF0aXZlIGFuZFxuICAgKiBnZW5lcmF0aXZlIHRhc2tzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgZXZlbiB3aXRoIGB0ZW1wZXJhdHVyZWAgb2YgYDAuMGAsIHRoZSByZXN1bHRzIHdpbGwgbm90IGJlIGZ1bGx5XG4gICAqIGRldGVybWluaXN0aWMuXG4gICAqL1xuICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogSG93IHRoZSBtb2RlbCBzaG91bGQgdXNlIHRoZSBwcm92aWRlZCB0b29scy4gVGhlIG1vZGVsIGNhbiB1c2UgYVxuICAgKiBzcGVjaWZpYyB0b29sLCBhbnkgYXZhaWxhYmxlIHRvb2wsIG9yIGRlY2lkZSBieSBpdHNlbGYuXG4gICAqL1xuICB0b29sX2Nob2ljZT86IEJldGFUb29sQ2hvaWNlO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBEZWZpbml0aW9ucyBvZiB0b29scyB0aGF0IHRoZSBtb2RlbCBtYXkgdXNlLlxuICAgKlxuICAgKiBJZiB5b3UgaW5jbHVkZSBgdG9vbHNgIGluIHlvdXIgQVBJIHJlcXVlc3QsIHRoZSBtb2RlbCBtYXkgcmV0dXJuIGB0b29sX3VzZWBcbiAgICogY29udGVudCBibG9ja3MgdGhhdCByZXByZXNlbnQgdGhlIG1vZGVsJ3MgdXNlIG9mIHRob3NlIHRvb2xzLiBZb3UgY2FuIHRoZW4gcnVuXG4gICAqIHRob3NlIHRvb2xzIHVzaW5nIHRoZSB0b29sIGlucHV0IGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgYW5kIHRoZW4gb3B0aW9uYWxseVxuICAgKiByZXR1cm4gcmVzdWx0cyBiYWNrIHRvIHRoZSBtb2RlbCB1c2luZyBgdG9vbF9yZXN1bHRgIGNvbnRlbnQgYmxvY2tzLlxuICAgKlxuICAgKiBFYWNoIHRvb2wgZGVmaW5pdGlvbiBpbmNsdWRlczpcbiAgICpcbiAgICogLSBgbmFtZWA6IE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqIC0gYGRlc2NyaXB0aW9uYDogT3B0aW9uYWwsIGJ1dCBzdHJvbmdseS1yZWNvbW1lbmRlZCBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbC5cbiAgICogLSBgaW5wdXRfc2NoZW1hYDogW0pTT04gc2NoZW1hXShodHRwczovL2pzb24tc2NoZW1hLm9yZy8pIGZvciB0aGUgdG9vbCBgaW5wdXRgXG4gICAqICAgc2hhcGUgdGhhdCB0aGUgbW9kZWwgd2lsbCBwcm9kdWNlIGluIGB0b29sX3VzZWAgb3V0cHV0IGNvbnRlbnQgYmxvY2tzLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgeW91IGRlZmluZWQgYHRvb2xzYCBhczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJuYW1lXCI6IFwiZ2V0X3N0b2NrX3ByaWNlXCIsXG4gICAqICAgICBcImRlc2NyaXB0aW9uXCI6IFwiR2V0IHRoZSBjdXJyZW50IHN0b2NrIHByaWNlIGZvciBhIGdpdmVuIHRpY2tlciBzeW1ib2wuXCIsXG4gICAqICAgICBcImlucHV0X3NjaGVtYVwiOiB7XG4gICAqICAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiLFxuICAgKiAgICAgICBcInByb3BlcnRpZXNcIjoge1xuICAgKiAgICAgICAgIFwidGlja2VyXCI6IHtcbiAgICogICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxuICAgKiAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSBzdG9jayB0aWNrZXIgc3ltYm9sLCBlLmcuIEFBUEwgZm9yIEFwcGxlIEluYy5cIlxuICAgKiAgICAgICAgIH1cbiAgICogICAgICAgfSxcbiAgICogICAgICAgXCJyZXF1aXJlZFwiOiBbXCJ0aWNrZXJcIl1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEFuZCB0aGVuIGFza2VkIHRoZSBtb2RlbCBcIldoYXQncyB0aGUgUyZQIDUwMCBhdCB0b2RheT9cIiwgdGhlIG1vZGVsIG1pZ2h0IHByb2R1Y2VcbiAgICogYHRvb2xfdXNlYCBjb250ZW50IGJsb2NrcyBpbiB0aGUgcmVzcG9uc2UgbGlrZSB0aGlzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInR5cGVcIjogXCJ0b29sX3VzZVwiLFxuICAgKiAgICAgXCJpZFwiOiBcInRvb2x1XzAxRDdGTHJmaDRHWXE3eVQxVUxGZXlNVlwiLFxuICAgKiAgICAgXCJuYW1lXCI6IFwiZ2V0X3N0b2NrX3ByaWNlXCIsXG4gICAqICAgICBcImlucHV0XCI6IHsgXCJ0aWNrZXJcIjogXCJeR1NQQ1wiIH1cbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFlvdSBtaWdodCB0aGVuIHJ1biB5b3VyIGBnZXRfc3RvY2tfcHJpY2VgIHRvb2wgd2l0aCBge1widGlja2VyXCI6IFwiXkdTUENcIn1gIGFzIGFuXG4gICAqIGlucHV0LCBhbmQgcmV0dXJuIHRoZSBmb2xsb3dpbmcgYmFjayB0byB0aGUgbW9kZWwgaW4gYSBzdWJzZXF1ZW50IGB1c2VyYFxuICAgKiBtZXNzYWdlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInR5cGVcIjogXCJ0b29sX3Jlc3VsdFwiLFxuICAgKiAgICAgXCJ0b29sX3VzZV9pZFwiOiBcInRvb2x1XzAxRDdGTHJmaDRHWXE3eVQxVUxGZXlNVlwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiMjU5Ljc1IFVTRFwiXG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBUb29scyBjYW4gYmUgdXNlZCBmb3Igd29ya2Zsb3dzIHRoYXQgaW5jbHVkZSBydW5uaW5nIGNsaWVudC1zaWRlIHRvb2xzIGFuZFxuICAgKiBmdW5jdGlvbnMsIG9yIG1vcmUgZ2VuZXJhbGx5IHdoZW5ldmVyIHlvdSB3YW50IHRoZSBtb2RlbCB0byBwcm9kdWNlIGEgcGFydGljdWxhclxuICAgKiBKU09OIHN0cnVjdHVyZSBvZiBvdXRwdXQuXG4gICAqXG4gICAqIFNlZSBvdXIgW2d1aWRlXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3Rvb2wtdXNlKSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgdG9vbHM/OiBBcnJheTxCZXRhVG9vbFVuaW9uPjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogT25seSBzYW1wbGUgZnJvbSB0aGUgdG9wIEsgb3B0aW9ucyBmb3IgZWFjaCBzdWJzZXF1ZW50IHRva2VuLlxuICAgKlxuICAgKiBVc2VkIHRvIHJlbW92ZSBcImxvbmcgdGFpbFwiIGxvdyBwcm9iYWJpbGl0eSByZXNwb25zZXMuXG4gICAqIFtMZWFybiBtb3JlIHRlY2huaWNhbCBkZXRhaWxzIGhlcmVdKGh0dHBzOi8vdG93YXJkc2RhdGFzY2llbmNlLmNvbS9ob3ctdG8tc2FtcGxlLWZyb20tbGFuZ3VhZ2UtbW9kZWxzLTY4MmJjZWI5NzI3NykuXG4gICAqXG4gICAqIFJlY29tbWVuZGVkIGZvciBhZHZhbmNlZCB1c2UgY2FzZXMgb25seS4gWW91IHVzdWFsbHkgb25seSBuZWVkIHRvIHVzZVxuICAgKiBgdGVtcGVyYXR1cmVgLlxuICAgKi9cbiAgdG9wX2s/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IFVzZSBudWNsZXVzIHNhbXBsaW5nLlxuICAgKlxuICAgKiBJbiBudWNsZXVzIHNhbXBsaW5nLCB3ZSBjb21wdXRlIHRoZSBjdW11bGF0aXZlIGRpc3RyaWJ1dGlvbiBvdmVyIGFsbCB0aGUgb3B0aW9uc1xuICAgKiBmb3IgZWFjaCBzdWJzZXF1ZW50IHRva2VuIGluIGRlY3JlYXNpbmcgcHJvYmFiaWxpdHkgb3JkZXIgYW5kIGN1dCBpdCBvZmYgb25jZSBpdFxuICAgKiByZWFjaGVzIGEgcGFydGljdWxhciBwcm9iYWJpbGl0eSBzcGVjaWZpZWQgYnkgYHRvcF9wYC4gWW91IHNob3VsZCBlaXRoZXIgYWx0ZXJcbiAgICogYHRlbXBlcmF0dXJlYCBvciBgdG9wX3BgLCBidXQgbm90IGJvdGguXG4gICAqXG4gICAqIFJlY29tbWVuZGVkIGZvciBhZHZhbmNlZCB1c2UgY2FzZXMgb25seS4gWW91IHVzdWFsbHkgb25seSBuZWVkIHRvIHVzZVxuICAgKiBgdGVtcGVyYXR1cmVgLlxuICAgKi9cbiAgdG9wX3A/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEhlYWRlciBwYXJhbTogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgTWVzc2FnZUNyZWF0ZVBhcmFtcyB7XG4gIGV4cG9ydCB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBNZXNzYWdlc01lc3NhZ2VzQVBJLk1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBNZXNzYWdlc01lc3NhZ2VzQVBJLk1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBleHRlbmRzIE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50XG4gICAqIGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1zdHJlYW1pbmcpIGZvclxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtPzogZmFsc2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyBleHRlbmRzIE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50XG4gICAqIGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1zdHJlYW1pbmcpIGZvclxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtOiB0cnVlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyB7XG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBJbnB1dCBtZXNzYWdlcy5cbiAgICpcbiAgICogT3VyIG1vZGVscyBhcmUgdHJhaW5lZCB0byBvcGVyYXRlIG9uIGFsdGVybmF0aW5nIGB1c2VyYCBhbmQgYGFzc2lzdGFudGBcbiAgICogY29udmVyc2F0aW9uYWwgdHVybnMuIFdoZW4gY3JlYXRpbmcgYSBuZXcgYE1lc3NhZ2VgLCB5b3Ugc3BlY2lmeSB0aGUgcHJpb3JcbiAgICogY29udmVyc2F0aW9uYWwgdHVybnMgd2l0aCB0aGUgYG1lc3NhZ2VzYCBwYXJhbWV0ZXIsIGFuZCB0aGUgbW9kZWwgdGhlbiBnZW5lcmF0ZXNcbiAgICogdGhlIG5leHQgYE1lc3NhZ2VgIGluIHRoZSBjb252ZXJzYXRpb24uIENvbnNlY3V0aXZlIGB1c2VyYCBvciBgYXNzaXN0YW50YCB0dXJuc1xuICAgKiBpbiB5b3VyIHJlcXVlc3Qgd2lsbCBiZSBjb21iaW5lZCBpbnRvIGEgc2luZ2xlIHR1cm4uXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBtdXN0IGJlIGFuIG9iamVjdCB3aXRoIGEgYHJvbGVgIGFuZCBgY29udGVudGAuIFlvdSBjYW5cbiAgICogc3BlY2lmeSBhIHNpbmdsZSBgdXNlcmAtcm9sZSBtZXNzYWdlLCBvciB5b3UgY2FuIGluY2x1ZGUgbXVsdGlwbGUgYHVzZXJgIGFuZFxuICAgKiBgYXNzaXN0YW50YCBtZXNzYWdlcy5cbiAgICpcbiAgICogSWYgdGhlIGZpbmFsIG1lc3NhZ2UgdXNlcyB0aGUgYGFzc2lzdGFudGAgcm9sZSwgdGhlIHJlc3BvbnNlIGNvbnRlbnQgd2lsbFxuICAgKiBjb250aW51ZSBpbW1lZGlhdGVseSBmcm9tIHRoZSBjb250ZW50IGluIHRoYXQgbWVzc2FnZS4gVGhpcyBjYW4gYmUgdXNlZCB0b1xuICAgKiBjb25zdHJhaW4gcGFydCBvZiB0aGUgbW9kZWwncyByZXNwb25zZS5cbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIGEgc2luZ2xlIGB1c2VyYCBtZXNzYWdlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1dXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggbXVsdGlwbGUgY29udmVyc2F0aW9uYWwgdHVybnM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbyB0aGVyZS5cIiB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIkhpLCBJJ20gQ2xhdWRlLiBIb3cgY2FuIEkgaGVscCB5b3U/XCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiQ2FuIHlvdSBleHBsYWluIExMTXMgaW4gcGxhaW4gRW5nbGlzaD9cIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHBhcnRpYWxseS1maWxsZWQgcmVzcG9uc2UgZnJvbSBDbGF1ZGU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIldoYXQncyB0aGUgR3JlZWsgbmFtZSBmb3IgU3VuPyAoQSkgU29sIChCKSBIZWxpb3MgKEMpIFN1blwiXG4gICAqICAgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJUaGUgYmVzdCBhbnN3ZXIgaXMgKFwiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogRWFjaCBpbnB1dCBtZXNzYWdlIGBjb250ZW50YCBtYXkgYmUgZWl0aGVyIGEgc2luZ2xlIGBzdHJpbmdgIG9yIGFuIGFycmF5IG9mXG4gICAqIGNvbnRlbnQgYmxvY2tzLCB3aGVyZSBlYWNoIGJsb2NrIGhhcyBhIHNwZWNpZmljIGB0eXBlYC4gVXNpbmcgYSBgc3RyaW5nYCBmb3JcbiAgICogYGNvbnRlbnRgIGlzIHNob3J0aGFuZCBmb3IgYW4gYXJyYXkgb2Ygb25lIGNvbnRlbnQgYmxvY2sgb2YgdHlwZSBgXCJ0ZXh0XCJgLiBUaGVcbiAgICogZm9sbG93aW5nIGlucHV0IG1lc3NhZ2VzIGFyZSBlcXVpdmFsZW50OlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfVxuICAgKiBgYGBcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1dIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFN0YXJ0aW5nIHdpdGggQ2xhdWRlIDMgbW9kZWxzLCB5b3UgY2FuIGFsc28gc2VuZCBpbWFnZSBjb250ZW50IGJsb2NrczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7XG4gICAqICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgIFwiY29udGVudFwiOiBbXG4gICAqICAgICB7XG4gICAqICAgICAgIFwidHlwZVwiOiBcImltYWdlXCIsXG4gICAqICAgICAgIFwic291cmNlXCI6IHtcbiAgICogICAgICAgICBcInR5cGVcIjogXCJiYXNlNjRcIixcbiAgICogICAgICAgICBcIm1lZGlhX3R5cGVcIjogXCJpbWFnZS9qcGVnXCIsXG4gICAqICAgICAgICAgXCJkYXRhXCI6IFwiLzlqLzRBQVFTa1pKUmcuLi5cIlxuICAgKiAgICAgICB9XG4gICAqICAgICB9LFxuICAgKiAgICAgeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIldoYXQgaXMgaW4gdGhpcyBpbWFnZT9cIiB9XG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBXZSBjdXJyZW50bHkgc3VwcG9ydCB0aGUgYGJhc2U2NGAgc291cmNlIHR5cGUgZm9yIGltYWdlcywgYW5kIHRoZSBgaW1hZ2UvanBlZ2AsXG4gICAqIGBpbWFnZS9wbmdgLCBgaW1hZ2UvZ2lmYCwgYW5kIGBpbWFnZS93ZWJwYCBtZWRpYSB0eXBlcy5cbiAgICpcbiAgICogU2VlIFtleGFtcGxlc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLWV4YW1wbGVzI3Zpc2lvbikgZm9yXG4gICAqIG1vcmUgaW5wdXQgZXhhbXBsZXMuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBpZiB5b3Ugd2FudCB0byBpbmNsdWRlIGFcbiAgICogW3N5c3RlbSBwcm9tcHRdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3Mvc3lzdGVtLXByb21wdHMpLCB5b3UgY2FuIHVzZVxuICAgKiB0aGUgdG9wLWxldmVsIGBzeXN0ZW1gIHBhcmFtZXRlciBcdTIwMTQgdGhlcmUgaXMgbm8gYFwic3lzdGVtXCJgIHJvbGUgZm9yIGlucHV0XG4gICAqIG1lc3NhZ2VzIGluIHRoZSBNZXNzYWdlcyBBUEkuXG4gICAqL1xuICBtZXNzYWdlczogQXJyYXk8QmV0YU1lc3NhZ2VQYXJhbT47XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1lc3NhZ2VzQVBJLk1vZGVsO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBTeXN0ZW0gcHJvbXB0LlxuICAgKlxuICAgKiBBIHN5c3RlbSBwcm9tcHQgaXMgYSB3YXkgb2YgcHJvdmlkaW5nIGNvbnRleHQgYW5kIGluc3RydWN0aW9ucyB0byBDbGF1ZGUsIHN1Y2hcbiAgICogYXMgc3BlY2lmeWluZyBhIHBhcnRpY3VsYXIgZ29hbCBvciByb2xlLiBTZWUgb3VyXG4gICAqIFtndWlkZSB0byBzeXN0ZW0gcHJvbXB0c10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9zeXN0ZW0tcHJvbXB0cykuXG4gICAqL1xuICBzeXN0ZW0/OiBzdHJpbmcgfCBBcnJheTxCZXRhVGV4dEJsb2NrUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBIb3cgdGhlIG1vZGVsIHNob3VsZCB1c2UgdGhlIHByb3ZpZGVkIHRvb2xzLiBUaGUgbW9kZWwgY2FuIHVzZSBhXG4gICAqIHNwZWNpZmljIHRvb2wsIGFueSBhdmFpbGFibGUgdG9vbCwgb3IgZGVjaWRlIGJ5IGl0c2VsZi5cbiAgICovXG4gIHRvb2xfY2hvaWNlPzogQmV0YVRvb2xDaG9pY2U7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IERlZmluaXRpb25zIG9mIHRvb2xzIHRoYXQgdGhlIG1vZGVsIG1heSB1c2UuXG4gICAqXG4gICAqIElmIHlvdSBpbmNsdWRlIGB0b29sc2AgaW4geW91ciBBUEkgcmVxdWVzdCwgdGhlIG1vZGVsIG1heSByZXR1cm4gYHRvb2xfdXNlYFxuICAgKiBjb250ZW50IGJsb2NrcyB0aGF0IHJlcHJlc2VudCB0aGUgbW9kZWwncyB1c2Ugb2YgdGhvc2UgdG9vbHMuIFlvdSBjYW4gdGhlbiBydW5cbiAgICogdGhvc2UgdG9vbHMgdXNpbmcgdGhlIHRvb2wgaW5wdXQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBhbmQgdGhlbiBvcHRpb25hbGx5XG4gICAqIHJldHVybiByZXN1bHRzIGJhY2sgdG8gdGhlIG1vZGVsIHVzaW5nIGB0b29sX3Jlc3VsdGAgY29udGVudCBibG9ja3MuXG4gICAqXG4gICAqIEVhY2ggdG9vbCBkZWZpbml0aW9uIGluY2x1ZGVzOlxuICAgKlxuICAgKiAtIGBuYW1lYDogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICogLSBgZGVzY3JpcHRpb25gOiBPcHRpb25hbCwgYnV0IHN0cm9uZ2x5LXJlY29tbWVuZGVkIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sLlxuICAgKiAtIGBpbnB1dF9zY2hlbWFgOiBbSlNPTiBzY2hlbWFdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnLykgZm9yIHRoZSB0b29sIGBpbnB1dGBcbiAgICogICBzaGFwZSB0aGF0IHRoZSBtb2RlbCB3aWxsIHByb2R1Y2UgaW4gYHRvb2xfdXNlYCBvdXRwdXQgY29udGVudCBibG9ja3MuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBpZiB5b3UgZGVmaW5lZCBgdG9vbHNgIGFzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcIm5hbWVcIjogXCJnZXRfc3RvY2tfcHJpY2VcIixcbiAgICogICAgIFwiZGVzY3JpcHRpb25cIjogXCJHZXQgdGhlIGN1cnJlbnQgc3RvY2sgcHJpY2UgZm9yIGEgZ2l2ZW4gdGlja2VyIHN5bWJvbC5cIixcbiAgICogICAgIFwiaW5wdXRfc2NoZW1hXCI6IHtcbiAgICogICAgICAgXCJ0eXBlXCI6IFwib2JqZWN0XCIsXG4gICAqICAgICAgIFwicHJvcGVydGllc1wiOiB7XG4gICAqICAgICAgICAgXCJ0aWNrZXJcIjoge1xuICAgKiAgICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXG4gICAqICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIHN0b2NrIHRpY2tlciBzeW1ib2wsIGUuZy4gQUFQTCBmb3IgQXBwbGUgSW5jLlwiXG4gICAqICAgICAgICAgfVxuICAgKiAgICAgICB9LFxuICAgKiAgICAgICBcInJlcXVpcmVkXCI6IFtcInRpY2tlclwiXVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogQW5kIHRoZW4gYXNrZWQgdGhlIG1vZGVsIFwiV2hhdCdzIHRoZSBTJlAgNTAwIGF0IHRvZGF5P1wiLCB0aGUgbW9kZWwgbWlnaHQgcHJvZHVjZVxuICAgKiBgdG9vbF91c2VgIGNvbnRlbnQgYmxvY2tzIGluIHRoZSByZXNwb25zZSBsaWtlIHRoaXM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwidHlwZVwiOiBcInRvb2xfdXNlXCIsXG4gICAqICAgICBcImlkXCI6IFwidG9vbHVfMDFEN0ZMcmZoNEdZcTd5VDFVTEZleU1WXCIsXG4gICAqICAgICBcIm5hbWVcIjogXCJnZXRfc3RvY2tfcHJpY2VcIixcbiAgICogICAgIFwiaW5wdXRcIjogeyBcInRpY2tlclwiOiBcIl5HU1BDXCIgfVxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogWW91IG1pZ2h0IHRoZW4gcnVuIHlvdXIgYGdldF9zdG9ja19wcmljZWAgdG9vbCB3aXRoIGB7XCJ0aWNrZXJcIjogXCJeR1NQQ1wifWAgYXMgYW5cbiAgICogaW5wdXQsIGFuZCByZXR1cm4gdGhlIGZvbGxvd2luZyBiYWNrIHRvIHRoZSBtb2RlbCBpbiBhIHN1YnNlcXVlbnQgYHVzZXJgXG4gICAqIG1lc3NhZ2U6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwidHlwZVwiOiBcInRvb2xfcmVzdWx0XCIsXG4gICAqICAgICBcInRvb2xfdXNlX2lkXCI6IFwidG9vbHVfMDFEN0ZMcmZoNEdZcTd5VDFVTEZleU1WXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCIyNTkuNzUgVVNEXCJcbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFRvb2xzIGNhbiBiZSB1c2VkIGZvciB3b3JrZmxvd3MgdGhhdCBpbmNsdWRlIHJ1bm5pbmcgY2xpZW50LXNpZGUgdG9vbHMgYW5kXG4gICAqIGZ1bmN0aW9ucywgb3IgbW9yZSBnZW5lcmFsbHkgd2hlbmV2ZXIgeW91IHdhbnQgdGhlIG1vZGVsIHRvIHByb2R1Y2UgYSBwYXJ0aWN1bGFyXG4gICAqIEpTT04gc3RydWN0dXJlIG9mIG91dHB1dC5cbiAgICpcbiAgICogU2VlIG91ciBbZ3VpZGVdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvdG9vbC11c2UpIGZvciBtb3JlIGRldGFpbHMuXG4gICAqL1xuICB0b29scz86IEFycmF5PEJldGFUb29sIHwgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyIHwgQmV0YVRvb2xCYXNoMjAyNDEwMjIgfCBCZXRhVG9vbFRleHRFZGl0b3IyMDI0MTAyMj47XG5cbiAgLyoqXG4gICAqIEhlYWRlciBwYXJhbTogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbk1lc3NhZ2VzLkJhdGNoZXMgPSBCYXRjaGVzO1xuTWVzc2FnZXMuQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSA9IEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2U7XG5cbmV4cG9ydCBkZWNsYXJlIG5hbWVzcGFjZSBNZXNzYWdlcyB7XG4gIGV4cG9ydCB7XG4gICAgdHlwZSBCZXRhQmFzZTY0UERGQmxvY2sgYXMgQmV0YUJhc2U2NFBERkJsb2NrLFxuICAgIHR5cGUgQmV0YUJhc2U2NFBERlNvdXJjZSBhcyBCZXRhQmFzZTY0UERGU291cmNlLFxuICAgIHR5cGUgQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCBhcyBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uIGFzIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvbixcbiAgICB0eXBlIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtIGFzIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24gYXMgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtIGFzIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb24gYXMgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0gYXMgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25zQ29uZmlnUGFyYW0gYXMgQmV0YUNpdGF0aW9uc0NvbmZpZ1BhcmFtLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uc0RlbHRhIGFzIEJldGFDaXRhdGlvbnNEZWx0YSxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2sgYXMgQmV0YUNvbnRlbnRCbG9jayxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2tQYXJhbSBhcyBCZXRhQ29udGVudEJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhQ29udGVudEJsb2NrU291cmNlIGFzIEJldGFDb250ZW50QmxvY2tTb3VyY2UsXG4gICAgdHlwZSBCZXRhQ29udGVudEJsb2NrU291cmNlQ29udGVudCBhcyBCZXRhQ29udGVudEJsb2NrU291cmNlQ29udGVudCxcbiAgICB0eXBlIEJldGFJbWFnZUJsb2NrUGFyYW0gYXMgQmV0YUltYWdlQmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFJbnB1dEpTT05EZWx0YSBhcyBCZXRhSW5wdXRKU09ORGVsdGEsXG4gICAgdHlwZSBCZXRhTWVzc2FnZSBhcyBCZXRhTWVzc2FnZSxcbiAgICB0eXBlIEJldGFNZXNzYWdlRGVsdGFVc2FnZSBhcyBCZXRhTWVzc2FnZURlbHRhVXNhZ2UsXG4gICAgdHlwZSBCZXRhTWVzc2FnZVBhcmFtIGFzIEJldGFNZXNzYWdlUGFyYW0sXG4gICAgdHlwZSBCZXRhTWVzc2FnZVRva2Vuc0NvdW50IGFzIEJldGFNZXNzYWdlVG9rZW5zQ291bnQsXG4gICAgdHlwZSBCZXRhTWV0YWRhdGEgYXMgQmV0YU1ldGFkYXRhLFxuICAgIHR5cGUgQmV0YVBsYWluVGV4dFNvdXJjZSBhcyBCZXRhUGxhaW5UZXh0U291cmNlLFxuICAgIHR5cGUgQmV0YVJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQgYXMgQmV0YVJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCBhcyBCZXRhUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgICB0eXBlIEJldGFSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQgYXMgQmV0YVJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCxcbiAgICB0eXBlIEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudCBhcyBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3TWVzc2FnZVN0YXJ0RXZlbnQgYXMgQmV0YVJhd01lc3NhZ2VTdGFydEV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd01lc3NhZ2VTdG9wRXZlbnQgYXMgQmV0YVJhd01lc3NhZ2VTdG9wRXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50IGFzIEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQsXG4gICAgdHlwZSBCZXRhVGV4dEJsb2NrIGFzIEJldGFUZXh0QmxvY2ssXG4gICAgdHlwZSBCZXRhVGV4dEJsb2NrUGFyYW0gYXMgQmV0YVRleHRCbG9ja1BhcmFtLFxuICAgIHR5cGUgQmV0YVRleHRDaXRhdGlvbiBhcyBCZXRhVGV4dENpdGF0aW9uLFxuICAgIHR5cGUgQmV0YVRleHRDaXRhdGlvblBhcmFtIGFzIEJldGFUZXh0Q2l0YXRpb25QYXJhbSxcbiAgICB0eXBlIEJldGFUZXh0RGVsdGEgYXMgQmV0YVRleHREZWx0YSxcbiAgICB0eXBlIEJldGFUb29sIGFzIEJldGFUb29sLFxuICAgIHR5cGUgQmV0YVRvb2xCYXNoMjAyNDEwMjIgYXMgQmV0YVRvb2xCYXNoMjAyNDEwMjIsXG4gICAgdHlwZSBCZXRhVG9vbENob2ljZSBhcyBCZXRhVG9vbENob2ljZSxcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlQW55IGFzIEJldGFUb29sQ2hvaWNlQW55LFxuICAgIHR5cGUgQmV0YVRvb2xDaG9pY2VBdXRvIGFzIEJldGFUb29sQ2hvaWNlQXV0byxcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlVG9vbCBhcyBCZXRhVG9vbENob2ljZVRvb2wsXG4gICAgdHlwZSBCZXRhVG9vbENvbXB1dGVyVXNlMjAyNDEwMjIgYXMgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyLFxuICAgIHR5cGUgQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtIGFzIEJldGFUb29sUmVzdWx0QmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyIGFzIEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyLFxuICAgIHR5cGUgQmV0YVRvb2xVbmlvbiBhcyBCZXRhVG9vbFVuaW9uLFxuICAgIHR5cGUgQmV0YVRvb2xVc2VCbG9jayBhcyBCZXRhVG9vbFVzZUJsb2NrLFxuICAgIHR5cGUgQmV0YVRvb2xVc2VCbG9ja1BhcmFtIGFzIEJldGFUb29sVXNlQmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFVc2FnZSBhcyBCZXRhVXNhZ2UsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMgYXMgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICB9O1xuXG4gIGV4cG9ydCB7XG4gICAgQmF0Y2hlcyBhcyBCYXRjaGVzLFxuICAgIHR5cGUgQmV0YURlbGV0ZWRNZXNzYWdlQmF0Y2ggYXMgQmV0YURlbGV0ZWRNZXNzYWdlQmF0Y2gsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoIGFzIEJldGFNZXNzYWdlQmF0Y2gsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0LFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UgYXMgQmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzIGFzIEJldGFNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoUmVzdWx0LFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0LFxuICAgIEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UgYXMgQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSxcbiAgICB0eXBlIEJhdGNoQ3JlYXRlUGFyYW1zIGFzIEJhdGNoQ3JlYXRlUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hSZXRyaWV2ZVBhcmFtcyBhcyBCYXRjaFJldHJpZXZlUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hMaXN0UGFyYW1zIGFzIEJhdGNoTGlzdFBhcmFtcyxcbiAgICB0eXBlIEJhdGNoRGVsZXRlUGFyYW1zIGFzIEJhdGNoRGVsZXRlUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hDYW5jZWxQYXJhbXMgYXMgQmF0Y2hDYW5jZWxQYXJhbXMsXG4gICAgdHlwZSBCYXRjaFJlc3VsdHNQYXJhbXMgYXMgQmF0Y2hSZXN1bHRzUGFyYW1zLFxuICB9O1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSBcIi4uLy4uL3Jlc291cmNlLmpzXCI7XG5pbXBvcnQgKiBhcyBNb2RlbHNBUEkgZnJvbSBcIi4vbW9kZWxzLmpzXCI7XG5pbXBvcnQgeyBCZXRhTW9kZWxJbmZvLCBCZXRhTW9kZWxJbmZvc1BhZ2UsIE1vZGVsTGlzdFBhcmFtcywgTW9kZWxzIH0gZnJvbSBcIi4vbW9kZWxzLmpzXCI7XG5pbXBvcnQgKiBhcyBNZXNzYWdlc0FQSSBmcm9tIFwiLi9tZXNzYWdlcy9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHtcbiAgQmV0YUJhc2U2NFBERkJsb2NrLFxuICBCZXRhQmFzZTY0UERGU291cmNlLFxuICBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsLFxuICBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb24sXG4gIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtLFxuICBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbixcbiAgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSxcbiAgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uLFxuICBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbSxcbiAgQmV0YUNpdGF0aW9uc0NvbmZpZ1BhcmFtLFxuICBCZXRhQ2l0YXRpb25zRGVsdGEsXG4gIEJldGFDb250ZW50QmxvY2ssXG4gIEJldGFDb250ZW50QmxvY2tQYXJhbSxcbiAgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZSxcbiAgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQsXG4gIEJldGFJbWFnZUJsb2NrUGFyYW0sXG4gIEJldGFJbnB1dEpTT05EZWx0YSxcbiAgQmV0YU1lc3NhZ2UsXG4gIEJldGFNZXNzYWdlRGVsdGFVc2FnZSxcbiAgQmV0YU1lc3NhZ2VQYXJhbSxcbiAgQmV0YU1lc3NhZ2VUb2tlbnNDb3VudCxcbiAgQmV0YU1ldGFkYXRhLFxuICBCZXRhUGxhaW5UZXh0U291cmNlLFxuICBCZXRhUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gIEJldGFSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gIEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudCxcbiAgQmV0YVJhd01lc3NhZ2VTdGFydEV2ZW50LFxuICBCZXRhUmF3TWVzc2FnZVN0b3BFdmVudCxcbiAgQmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudCxcbiAgQmV0YVRleHRCbG9jayxcbiAgQmV0YVRleHRCbG9ja1BhcmFtLFxuICBCZXRhVGV4dENpdGF0aW9uLFxuICBCZXRhVGV4dENpdGF0aW9uUGFyYW0sXG4gIEJldGFUZXh0RGVsdGEsXG4gIEJldGFUb29sLFxuICBCZXRhVG9vbEJhc2gyMDI0MTAyMixcbiAgQmV0YVRvb2xDaG9pY2UsXG4gIEJldGFUb29sQ2hvaWNlQW55LFxuICBCZXRhVG9vbENob2ljZUF1dG8sXG4gIEJldGFUb29sQ2hvaWNlVG9vbCxcbiAgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyLFxuICBCZXRhVG9vbFJlc3VsdEJsb2NrUGFyYW0sXG4gIEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyLFxuICBCZXRhVG9vbFVuaW9uLFxuICBCZXRhVG9vbFVzZUJsb2NrLFxuICBCZXRhVG9vbFVzZUJsb2NrUGFyYW0sXG4gIEJldGFVc2FnZSxcbiAgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICBNZXNzYWdlcyxcbn0gZnJvbSBcIi4vbWVzc2FnZXMvbWVzc2FnZXMuanNcIjtcblxuZXhwb3J0IGNsYXNzIEJldGEgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIG1vZGVsczogTW9kZWxzQVBJLk1vZGVscyA9IG5ldyBNb2RlbHNBUEkuTW9kZWxzKHRoaXMuX2NsaWVudCk7XG4gIG1lc3NhZ2VzOiBNZXNzYWdlc0FQSS5NZXNzYWdlcyA9IG5ldyBNZXNzYWdlc0FQSS5NZXNzYWdlcyh0aGlzLl9jbGllbnQpO1xufVxuXG5leHBvcnQgdHlwZSBBbnRocm9waWNCZXRhID1cbiAgfCAoc3RyaW5nICYge30pXG4gIHwgJ21lc3NhZ2UtYmF0Y2hlcy0yMDI0LTA5LTI0J1xuICB8ICdwcm9tcHQtY2FjaGluZy0yMDI0LTA3LTMxJ1xuICB8ICdjb21wdXRlci11c2UtMjAyNC0xMC0yMidcbiAgfCAncGRmcy0yMDI0LTA5LTI1J1xuICB8ICd0b2tlbi1jb3VudGluZy0yMDI0LTExLTAxJztcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQVBJRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2FwaV9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUF1dGhlbnRpY2F0aW9uRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2F1dGhlbnRpY2F0aW9uX2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQmlsbGluZ0Vycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdiaWxsaW5nX2Vycm9yJztcbn1cblxuZXhwb3J0IHR5cGUgQmV0YUVycm9yID1cbiAgfCBCZXRhSW52YWxpZFJlcXVlc3RFcnJvclxuICB8IEJldGFBdXRoZW50aWNhdGlvbkVycm9yXG4gIHwgQmV0YUJpbGxpbmdFcnJvclxuICB8IEJldGFQZXJtaXNzaW9uRXJyb3JcbiAgfCBCZXRhTm90Rm91bmRFcnJvclxuICB8IEJldGFSYXRlTGltaXRFcnJvclxuICB8IEJldGFHYXRld2F5VGltZW91dEVycm9yXG4gIHwgQmV0YUFQSUVycm9yXG4gIHwgQmV0YU92ZXJsb2FkZWRFcnJvcjtcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhRXJyb3JSZXNwb25zZSB7XG4gIGVycm9yOiBCZXRhRXJyb3I7XG5cbiAgdHlwZTogJ2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhR2F0ZXdheVRpbWVvdXRFcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAndGltZW91dF9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUludmFsaWRSZXF1ZXN0RXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2ludmFsaWRfcmVxdWVzdF9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU5vdEZvdW5kRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ25vdF9mb3VuZF9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU92ZXJsb2FkZWRFcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAnb3ZlcmxvYWRlZF9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVBlcm1pc3Npb25FcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAncGVybWlzc2lvbl9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVJhdGVMaW1pdEVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdyYXRlX2xpbWl0X2Vycm9yJztcbn1cblxuQmV0YS5Nb2RlbHMgPSBNb2RlbHM7XG5CZXRhLkJldGFNb2RlbEluZm9zUGFnZSA9IEJldGFNb2RlbEluZm9zUGFnZTtcbkJldGEuTWVzc2FnZXMgPSBNZXNzYWdlcztcblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIEJldGEge1xuICBleHBvcnQge1xuICAgIHR5cGUgQW50aHJvcGljQmV0YSBhcyBBbnRocm9waWNCZXRhLFxuICAgIHR5cGUgQmV0YUFQSUVycm9yIGFzIEJldGFBUElFcnJvcixcbiAgICB0eXBlIEJldGFBdXRoZW50aWNhdGlvbkVycm9yIGFzIEJldGFBdXRoZW50aWNhdGlvbkVycm9yLFxuICAgIHR5cGUgQmV0YUJpbGxpbmdFcnJvciBhcyBCZXRhQmlsbGluZ0Vycm9yLFxuICAgIHR5cGUgQmV0YUVycm9yIGFzIEJldGFFcnJvcixcbiAgICB0eXBlIEJldGFFcnJvclJlc3BvbnNlIGFzIEJldGFFcnJvclJlc3BvbnNlLFxuICAgIHR5cGUgQmV0YUdhdGV3YXlUaW1lb3V0RXJyb3IgYXMgQmV0YUdhdGV3YXlUaW1lb3V0RXJyb3IsXG4gICAgdHlwZSBCZXRhSW52YWxpZFJlcXVlc3RFcnJvciBhcyBCZXRhSW52YWxpZFJlcXVlc3RFcnJvcixcbiAgICB0eXBlIEJldGFOb3RGb3VuZEVycm9yIGFzIEJldGFOb3RGb3VuZEVycm9yLFxuICAgIHR5cGUgQmV0YU92ZXJsb2FkZWRFcnJvciBhcyBCZXRhT3ZlcmxvYWRlZEVycm9yLFxuICAgIHR5cGUgQmV0YVBlcm1pc3Npb25FcnJvciBhcyBCZXRhUGVybWlzc2lvbkVycm9yLFxuICAgIHR5cGUgQmV0YVJhdGVMaW1pdEVycm9yIGFzIEJldGFSYXRlTGltaXRFcnJvcixcbiAgfTtcblxuICBleHBvcnQge1xuICAgIE1vZGVscyBhcyBNb2RlbHMsXG4gICAgdHlwZSBCZXRhTW9kZWxJbmZvIGFzIEJldGFNb2RlbEluZm8sXG4gICAgQmV0YU1vZGVsSW5mb3NQYWdlIGFzIEJldGFNb2RlbEluZm9zUGFnZSxcbiAgICB0eXBlIE1vZGVsTGlzdFBhcmFtcyBhcyBNb2RlbExpc3RQYXJhbXMsXG4gIH07XG5cbiAgZXhwb3J0IHtcbiAgICBNZXNzYWdlcyBhcyBNZXNzYWdlcyxcbiAgICB0eXBlIEJldGFCYXNlNjRQREZCbG9jayBhcyBCZXRhQmFzZTY0UERGQmxvY2ssXG4gICAgdHlwZSBCZXRhQmFzZTY0UERGU291cmNlIGFzIEJldGFCYXNlNjRQREZTb3VyY2UsXG4gICAgdHlwZSBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIGFzIEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwsXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb24gYXMgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0gYXMgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbiBhcyBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbixcbiAgICB0eXBlIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0gYXMgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSxcbiAgICB0eXBlIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvbiBhcyBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb24sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbSBhcyBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbSxcbiAgICB0eXBlIEJldGFDaXRhdGlvbnNDb25maWdQYXJhbSBhcyBCZXRhQ2l0YXRpb25zQ29uZmlnUGFyYW0sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25zRGVsdGEgYXMgQmV0YUNpdGF0aW9uc0RlbHRhLFxuICAgIHR5cGUgQmV0YUNvbnRlbnRCbG9jayBhcyBCZXRhQ29udGVudEJsb2NrLFxuICAgIHR5cGUgQmV0YUNvbnRlbnRCbG9ja1BhcmFtIGFzIEJldGFDb250ZW50QmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2tTb3VyY2UgYXMgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZSxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2tTb3VyY2VDb250ZW50IGFzIEJldGFDb250ZW50QmxvY2tTb3VyY2VDb250ZW50LFxuICAgIHR5cGUgQmV0YUltYWdlQmxvY2tQYXJhbSBhcyBCZXRhSW1hZ2VCbG9ja1BhcmFtLFxuICAgIHR5cGUgQmV0YUlucHV0SlNPTkRlbHRhIGFzIEJldGFJbnB1dEpTT05EZWx0YSxcbiAgICB0eXBlIEJldGFNZXNzYWdlIGFzIEJldGFNZXNzYWdlLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VEZWx0YVVzYWdlIGFzIEJldGFNZXNzYWdlRGVsdGFVc2FnZSxcbiAgICB0eXBlIEJldGFNZXNzYWdlUGFyYW0gYXMgQmV0YU1lc3NhZ2VQYXJhbSxcbiAgICB0eXBlIEJldGFNZXNzYWdlVG9rZW5zQ291bnQgYXMgQmV0YU1lc3NhZ2VUb2tlbnNDb3VudCxcbiAgICB0eXBlIEJldGFNZXRhZGF0YSBhcyBCZXRhTWV0YWRhdGEsXG4gICAgdHlwZSBCZXRhUGxhaW5UZXh0U291cmNlIGFzIEJldGFQbGFpblRleHRTb3VyY2UsXG4gICAgdHlwZSBCZXRhUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCBhcyBCZXRhUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgICB0eXBlIEJldGFSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50IGFzIEJldGFSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCBhcyBCZXRhUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd01lc3NhZ2VEZWx0YUV2ZW50IGFzIEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudCxcbiAgICB0eXBlIEJldGFSYXdNZXNzYWdlU3RhcnRFdmVudCBhcyBCZXRhUmF3TWVzc2FnZVN0YXJ0RXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3TWVzc2FnZVN0b3BFdmVudCBhcyBCZXRhUmF3TWVzc2FnZVN0b3BFdmVudCxcbiAgICB0eXBlIEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQgYXMgQmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudCxcbiAgICB0eXBlIEJldGFUZXh0QmxvY2sgYXMgQmV0YVRleHRCbG9jayxcbiAgICB0eXBlIEJldGFUZXh0QmxvY2tQYXJhbSBhcyBCZXRhVGV4dEJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhVGV4dENpdGF0aW9uIGFzIEJldGFUZXh0Q2l0YXRpb24sXG4gICAgdHlwZSBCZXRhVGV4dENpdGF0aW9uUGFyYW0gYXMgQmV0YVRleHRDaXRhdGlvblBhcmFtLFxuICAgIHR5cGUgQmV0YVRleHREZWx0YSBhcyBCZXRhVGV4dERlbHRhLFxuICAgIHR5cGUgQmV0YVRvb2wgYXMgQmV0YVRvb2wsXG4gICAgdHlwZSBCZXRhVG9vbEJhc2gyMDI0MTAyMiBhcyBCZXRhVG9vbEJhc2gyMDI0MTAyMixcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlIGFzIEJldGFUb29sQ2hvaWNlLFxuICAgIHR5cGUgQmV0YVRvb2xDaG9pY2VBbnkgYXMgQmV0YVRvb2xDaG9pY2VBbnksXG4gICAgdHlwZSBCZXRhVG9vbENob2ljZUF1dG8gYXMgQmV0YVRvb2xDaG9pY2VBdXRvLFxuICAgIHR5cGUgQmV0YVRvb2xDaG9pY2VUb29sIGFzIEJldGFUb29sQ2hvaWNlVG9vbCxcbiAgICB0eXBlIEJldGFUb29sQ29tcHV0ZXJVc2UyMDI0MTAyMiBhcyBCZXRhVG9vbENvbXB1dGVyVXNlMjAyNDEwMjIsXG4gICAgdHlwZSBCZXRhVG9vbFJlc3VsdEJsb2NrUGFyYW0gYXMgQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtLFxuICAgIHR5cGUgQmV0YVRvb2xUZXh0RWRpdG9yMjAyNDEwMjIgYXMgQmV0YVRvb2xUZXh0RWRpdG9yMjAyNDEwMjIsXG4gICAgdHlwZSBCZXRhVG9vbFVuaW9uIGFzIEJldGFUb29sVW5pb24sXG4gICAgdHlwZSBCZXRhVG9vbFVzZUJsb2NrIGFzIEJldGFUb29sVXNlQmxvY2ssXG4gICAgdHlwZSBCZXRhVG9vbFVzZUJsb2NrUGFyYW0gYXMgQmV0YVRvb2xVc2VCbG9ja1BhcmFtLFxuICAgIHR5cGUgQmV0YVVzYWdlIGFzIEJldGFVc2FnZSxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICB0eXBlIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyBhcyBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMsXG4gIH07XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCB7IEFQSVByb21pc2UgfSBmcm9tIFwiLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29tcGxldGlvbnNBUEkgZnJvbSBcIi4vY29tcGxldGlvbnMuanNcIjtcbmltcG9ydCAqIGFzIE1lc3NhZ2VzQVBJIGZyb20gXCIuL21lc3NhZ2VzL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tIFwiLi4vc3RyZWFtaW5nLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBDb21wbGV0aW9ucyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFtMZWdhY3ldIENyZWF0ZSBhIFRleHQgQ29tcGxldGlvbi5cbiAgICpcbiAgICogVGhlIFRleHQgQ29tcGxldGlvbnMgQVBJIGlzIGEgbGVnYWN5IEFQSS4gV2UgcmVjb21tZW5kIHVzaW5nIHRoZVxuICAgKiBbTWVzc2FnZXMgQVBJXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMpIGdvaW5nIGZvcndhcmQuXG4gICAqXG4gICAqIEZ1dHVyZSBtb2RlbHMgYW5kIGZlYXR1cmVzIHdpbGwgbm90IGJlIGNvbXBhdGlibGUgd2l0aCBUZXh0IENvbXBsZXRpb25zLiBTZWUgb3VyXG4gICAqIFttaWdyYXRpb24gZ3VpZGVdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9taWdyYXRpbmctZnJvbS10ZXh0LWNvbXBsZXRpb25zLXRvLW1lc3NhZ2VzKVxuICAgKiBmb3IgZ3VpZGFuY2UgaW4gbWlncmF0aW5nIGZyb20gVGV4dCBDb21wbGV0aW9ucyB0byBNZXNzYWdlcy5cbiAgICovXG4gIGNyZWF0ZShib2R5OiBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IEFQSVByb21pc2U8Q29tcGxldGlvbj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxDb21wbGV0aW9uPj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08Q29tcGxldGlvbj4gfCBDb21wbGV0aW9uPjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8Q29tcGxldGlvbj4gfCBBUElQcm9taXNlPFN0cmVhbTxDb21wbGV0aW9uPj4ge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQucG9zdCgnL3YxL2NvbXBsZXRlJywge1xuICAgICAgYm9keSxcbiAgICAgIHRpbWVvdXQ6ICh0aGlzLl9jbGllbnQgYXMgYW55KS5fb3B0aW9ucy50aW1lb3V0ID8/IDYwMDAwMCxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBzdHJlYW06IGJvZHkuc3RyZWFtID8/IGZhbHNlLFxuICAgIH0pIGFzIEFQSVByb21pc2U8Q29tcGxldGlvbj4gfCBBUElQcm9taXNlPFN0cmVhbTxDb21wbGV0aW9uPj47XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uIHtcbiAgLyoqXG4gICAqIFVuaXF1ZSBvYmplY3QgaWRlbnRpZmllci5cbiAgICpcbiAgICogVGhlIGZvcm1hdCBhbmQgbGVuZ3RoIG9mIElEcyBtYXkgY2hhbmdlIG92ZXIgdGltZS5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSByZXN1bHRpbmcgY29tcGxldGlvbiB1cCB0byBhbmQgZXhjbHVkaW5nIHRoZSBzdG9wIHNlcXVlbmNlcy5cbiAgICovXG4gIGNvbXBsZXRpb246IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gICAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gICAqL1xuICBtb2RlbDogTWVzc2FnZXNBUEkuTW9kZWw7XG5cbiAgLyoqXG4gICAqIFRoZSByZWFzb24gdGhhdCB3ZSBzdG9wcGVkLlxuICAgKlxuICAgKiBUaGlzIG1heSBiZSBvbmUgdGhlIGZvbGxvd2luZyB2YWx1ZXM6XG4gICAqXG4gICAqIC0gYFwic3RvcF9zZXF1ZW5jZVwiYDogd2UgcmVhY2hlZCBhIHN0b3Agc2VxdWVuY2UgXHUyMDE0IGVpdGhlciBwcm92aWRlZCBieSB5b3UgdmlhIHRoZVxuICAgKiAgIGBzdG9wX3NlcXVlbmNlc2AgcGFyYW1ldGVyLCBvciBhIHN0b3Agc2VxdWVuY2UgYnVpbHQgaW50byB0aGUgbW9kZWxcbiAgICogLSBgXCJtYXhfdG9rZW5zXCJgOiB3ZSBleGNlZWRlZCBgbWF4X3Rva2Vuc190b19zYW1wbGVgIG9yIHRoZSBtb2RlbCdzIG1heGltdW1cbiAgICovXG4gIHN0b3BfcmVhc29uOiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBPYmplY3QgdHlwZS5cbiAgICpcbiAgICogRm9yIFRleHQgQ29tcGxldGlvbnMsIHRoaXMgaXMgYWx3YXlzIGBcImNvbXBsZXRpb25cImAuXG4gICAqL1xuICB0eXBlOiAnY29tcGxldGlvbic7XG59XG5cbmV4cG9ydCB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIHwgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGdlbmVyYXRlIGJlZm9yZSBzdG9wcGluZy5cbiAgICpcbiAgICogTm90ZSB0aGF0IG91ciBtb2RlbHMgbWF5IHN0b3AgX2JlZm9yZV8gcmVhY2hpbmcgdGhpcyBtYXhpbXVtLiBUaGlzIHBhcmFtZXRlclxuICAgKiBvbmx5IHNwZWNpZmllcyB0aGUgYWJzb2x1dGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGdlbmVyYXRlLlxuICAgKi9cbiAgbWF4X3Rva2Vuc190b19zYW1wbGU6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gICAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gICAqL1xuICBtb2RlbDogTWVzc2FnZXNBUEkuTW9kZWw7XG5cbiAgLyoqXG4gICAqIFRoZSBwcm9tcHQgdGhhdCB5b3Ugd2FudCBDbGF1ZGUgdG8gY29tcGxldGUuXG4gICAqXG4gICAqIEZvciBwcm9wZXIgcmVzcG9uc2UgZ2VuZXJhdGlvbiB5b3Ugd2lsbCBuZWVkIHRvIGZvcm1hdCB5b3VyIHByb21wdCB1c2luZ1xuICAgKiBhbHRlcm5hdGluZyBgXFxuXFxuSHVtYW46YCBhbmQgYFxcblxcbkFzc2lzdGFudDpgIGNvbnZlcnNhdGlvbmFsIHR1cm5zLiBGb3IgZXhhbXBsZTpcbiAgICpcbiAgICogYGBgXG4gICAqIFwiXFxuXFxuSHVtYW46IHt1c2VyUXVlc3Rpb259XFxuXFxuQXNzaXN0YW50OlwiXG4gICAqIGBgYFxuICAgKlxuICAgKiBTZWUgW3Byb21wdCB2YWxpZGF0aW9uXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvcHJvbXB0LXZhbGlkYXRpb24pIGFuZFxuICAgKiBvdXIgZ3VpZGUgdG9cbiAgICogW3Byb21wdCBkZXNpZ25dKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvaW50cm8tdG8tcHJvbXB0aW5nKSBmb3IgbW9yZVxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgcHJvbXB0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBkZXNjcmliaW5nIG1ldGFkYXRhIGFib3V0IHRoZSByZXF1ZXN0LlxuICAgKi9cbiAgbWV0YWRhdGE/OiBNZXNzYWdlc0FQSS5NZXRhZGF0YTtcblxuICAvKipcbiAgICogU2VxdWVuY2VzIHRoYXQgd2lsbCBjYXVzZSB0aGUgbW9kZWwgdG8gc3RvcCBnZW5lcmF0aW5nLlxuICAgKlxuICAgKiBPdXIgbW9kZWxzIHN0b3Agb24gYFwiXFxuXFxuSHVtYW46XCJgLCBhbmQgbWF5IGluY2x1ZGUgYWRkaXRpb25hbCBidWlsdC1pbiBzdG9wXG4gICAqIHNlcXVlbmNlcyBpbiB0aGUgZnV0dXJlLiBCeSBwcm92aWRpbmcgdGhlIHN0b3Bfc2VxdWVuY2VzIHBhcmFtZXRlciwgeW91IG1heVxuICAgKiBpbmNsdWRlIGFkZGl0aW9uYWwgc3RyaW5ncyB0aGF0IHdpbGwgY2F1c2UgdGhlIG1vZGVsIHRvIHN0b3AgZ2VuZXJhdGluZy5cbiAgICovXG4gIHN0b3Bfc2VxdWVuY2VzPzogQXJyYXk8c3RyaW5nPjtcblxuICAvKipcbiAgICogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnQgZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL3N0cmVhbWluZykgZm9yIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW0/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBBbW91bnQgb2YgcmFuZG9tbmVzcyBpbmplY3RlZCBpbnRvIHRoZSByZXNwb25zZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYDEuMGAuIFJhbmdlcyBmcm9tIGAwLjBgIHRvIGAxLjBgLiBVc2UgYHRlbXBlcmF0dXJlYCBjbG9zZXIgdG8gYDAuMGBcbiAgICogZm9yIGFuYWx5dGljYWwgLyBtdWx0aXBsZSBjaG9pY2UsIGFuZCBjbG9zZXIgdG8gYDEuMGAgZm9yIGNyZWF0aXZlIGFuZFxuICAgKiBnZW5lcmF0aXZlIHRhc2tzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgZXZlbiB3aXRoIGB0ZW1wZXJhdHVyZWAgb2YgYDAuMGAsIHRoZSByZXN1bHRzIHdpbGwgbm90IGJlIGZ1bGx5XG4gICAqIGRldGVybWluaXN0aWMuXG4gICAqL1xuICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcblxuICAvKipcbiAgICogT25seSBzYW1wbGUgZnJvbSB0aGUgdG9wIEsgb3B0aW9ucyBmb3IgZWFjaCBzdWJzZXF1ZW50IHRva2VuLlxuICAgKlxuICAgKiBVc2VkIHRvIHJlbW92ZSBcImxvbmcgdGFpbFwiIGxvdyBwcm9iYWJpbGl0eSByZXNwb25zZXMuXG4gICAqIFtMZWFybiBtb3JlIHRlY2huaWNhbCBkZXRhaWxzIGhlcmVdKGh0dHBzOi8vdG93YXJkc2RhdGFzY2llbmNlLmNvbS9ob3ctdG8tc2FtcGxlLWZyb20tbGFuZ3VhZ2UtbW9kZWxzLTY4MmJjZWI5NzI3NykuXG4gICAqXG4gICAqIFJlY29tbWVuZGVkIGZvciBhZHZhbmNlZCB1c2UgY2FzZXMgb25seS4gWW91IHVzdWFsbHkgb25seSBuZWVkIHRvIHVzZVxuICAgKiBgdGVtcGVyYXR1cmVgLlxuICAgKi9cbiAgdG9wX2s/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFVzZSBudWNsZXVzIHNhbXBsaW5nLlxuICAgKlxuICAgKiBJbiBudWNsZXVzIHNhbXBsaW5nLCB3ZSBjb21wdXRlIHRoZSBjdW11bGF0aXZlIGRpc3RyaWJ1dGlvbiBvdmVyIGFsbCB0aGUgb3B0aW9uc1xuICAgKiBmb3IgZWFjaCBzdWJzZXF1ZW50IHRva2VuIGluIGRlY3JlYXNpbmcgcHJvYmFiaWxpdHkgb3JkZXIgYW5kIGN1dCBpdCBvZmYgb25jZSBpdFxuICAgKiByZWFjaGVzIGEgcGFydGljdWxhciBwcm9iYWJpbGl0eSBzcGVjaWZpZWQgYnkgYHRvcF9wYC4gWW91IHNob3VsZCBlaXRoZXIgYWx0ZXJcbiAgICogYHRlbXBlcmF0dXJlYCBvciBgdG9wX3BgLCBidXQgbm90IGJvdGguXG4gICAqXG4gICAqIFJlY29tbWVuZGVkIGZvciBhZHZhbmNlZCB1c2UgY2FzZXMgb25seS4gWW91IHVzdWFsbHkgb25seSBuZWVkIHRvIHVzZVxuICAgKiBgdGVtcGVyYXR1cmVgLlxuICAgKi9cbiAgdG9wX3A/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCB1c2UgYEFudGhyb3BpYy5NZXNzYWdlcy5NZXRhZGF0YWAgaW5zdGVhZFxuICAgKi9cbiAgZXhwb3J0IHR5cGUgTWV0YWRhdGEgPSBNZXNzYWdlc0FQSS5NZXRhZGF0YTtcblxuICBleHBvcnQgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gQ29tcGxldGlvbnNBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IENvbXBsZXRpb25zQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBleHRlbmRzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50IGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9zdHJlYW1pbmcpIGZvciBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtPzogZmFsc2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyBleHRlbmRzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50IGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9zdHJlYW1pbmcpIGZvciBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtOiB0cnVlO1xufVxuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgQ29tcGxldGlvbnMge1xuICBleHBvcnQge1xuICAgIHR5cGUgQ29tcGxldGlvbiBhcyBDb21wbGV0aW9uLFxuICAgIHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyBhcyBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zLFxuICAgIHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBhcyBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICAgIHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyBhcyBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICB9O1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSBcIi4uLy4uL3Jlc291cmNlLmpzXCI7XG5pbXBvcnQgeyBpc1JlcXVlc3RPcHRpb25zIH0gZnJvbSBcIi4uLy4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4uLy4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIFNoYXJlZCBmcm9tIFwiLi4vc2hhcmVkLmpzXCI7XG5pbXBvcnQgKiBhcyBNZXNzYWdlc0FQSSBmcm9tIFwiLi9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHsgUGFnZSwgdHlwZSBQYWdlUGFyYW1zIH0gZnJvbSBcIi4uLy4uL3BhZ2luYXRpb24uanNcIjtcbmltcG9ydCB7IEpTT05MRGVjb2RlciB9IGZyb20gXCIuLi8uLi9pbnRlcm5hbC9kZWNvZGVycy9qc29ubC5qc1wiO1xuaW1wb3J0IHsgQW50aHJvcGljRXJyb3IgfSBmcm9tIFwiLi4vLi4vZXJyb3IuanNcIjtcblxuZXhwb3J0IGNsYXNzIEJhdGNoZXMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBTZW5kIGEgYmF0Y2ggb2YgTWVzc2FnZSBjcmVhdGlvbiByZXF1ZXN0cy5cbiAgICpcbiAgICogVGhlIE1lc3NhZ2UgQmF0Y2hlcyBBUEkgY2FuIGJlIHVzZWQgdG8gcHJvY2VzcyBtdWx0aXBsZSBNZXNzYWdlcyBBUEkgcmVxdWVzdHMgYXRcbiAgICogb25jZS4gT25jZSBhIE1lc3NhZ2UgQmF0Y2ggaXMgY3JlYXRlZCwgaXQgYmVnaW5zIHByb2Nlc3NpbmcgaW1tZWRpYXRlbHkuIEJhdGNoZXNcbiAgICogY2FuIHRha2UgdXAgdG8gMjQgaG91cnMgdG8gY29tcGxldGUuXG4gICAqL1xuICBjcmVhdGUoYm9keTogQmF0Y2hDcmVhdGVQYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPE1lc3NhZ2VCYXRjaD4ge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQucG9zdCgnL3YxL21lc3NhZ2VzL2JhdGNoZXMnLCB7IGJvZHksIC4uLm9wdGlvbnMgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBlbmRwb2ludCBpcyBpZGVtcG90ZW50IGFuZCBjYW4gYmUgdXNlZCB0byBwb2xsIGZvciBNZXNzYWdlIEJhdGNoXG4gICAqIGNvbXBsZXRpb24uIFRvIGFjY2VzcyB0aGUgcmVzdWx0cyBvZiBhIE1lc3NhZ2UgQmF0Y2gsIG1ha2UgYSByZXF1ZXN0IHRvIHRoZVxuICAgKiBgcmVzdWx0c191cmxgIGZpZWxkIGluIHRoZSByZXNwb25zZS5cbiAgICovXG4gIHJldHJpZXZlKG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPE1lc3NhZ2VCYXRjaD4ge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZ2V0KGAvdjEvbWVzc2FnZXMvYmF0Y2hlcy8ke21lc3NhZ2VCYXRjaElkfWAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3QgYWxsIE1lc3NhZ2UgQmF0Y2hlcyB3aXRoaW4gYSBXb3Jrc3BhY2UuIE1vc3QgcmVjZW50bHkgY3JlYXRlZCBiYXRjaGVzIGFyZVxuICAgKiByZXR1cm5lZCBmaXJzdC5cbiAgICovXG4gIGxpc3QoXG4gICAgcXVlcnk/OiBCYXRjaExpc3RQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8TWVzc2FnZUJhdGNoZXNQYWdlLCBNZXNzYWdlQmF0Y2g+O1xuICBsaXN0KG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5QYWdlUHJvbWlzZTxNZXNzYWdlQmF0Y2hlc1BhZ2UsIE1lc3NhZ2VCYXRjaD47XG4gIGxpc3QoXG4gICAgcXVlcnk6IEJhdGNoTGlzdFBhcmFtcyB8IENvcmUuUmVxdWVzdE9wdGlvbnMgPSB7fSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxNZXNzYWdlQmF0Y2hlc1BhZ2UsIE1lc3NhZ2VCYXRjaD4ge1xuICAgIGlmIChpc1JlcXVlc3RPcHRpb25zKHF1ZXJ5KSkge1xuICAgICAgcmV0dXJuIHRoaXMubGlzdCh7fSwgcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmdldEFQSUxpc3QoJy92MS9tZXNzYWdlcy9iYXRjaGVzJywgTWVzc2FnZUJhdGNoZXNQYWdlLCB7IHF1ZXJ5LCAuLi5vcHRpb25zIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIE1lc3NhZ2UgQmF0Y2guXG4gICAqXG4gICAqIE1lc3NhZ2UgQmF0Y2hlcyBjYW4gb25seSBiZSBkZWxldGVkIG9uY2UgdGhleSd2ZSBmaW5pc2hlZCBwcm9jZXNzaW5nLiBJZiB5b3UnZFxuICAgKiBsaWtlIHRvIGRlbGV0ZSBhbiBpbi1wcm9ncmVzcyBiYXRjaCwgeW91IG11c3QgZmlyc3QgY2FuY2VsIGl0LlxuICAgKi9cbiAgZGVsZXRlKG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPERlbGV0ZWRNZXNzYWdlQmF0Y2g+IHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmRlbGV0ZShgL3YxL21lc3NhZ2VzL2JhdGNoZXMvJHttZXNzYWdlQmF0Y2hJZH1gLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCYXRjaGVzIG1heSBiZSBjYW5jZWxlZCBhbnkgdGltZSBiZWZvcmUgcHJvY2Vzc2luZyBlbmRzLiBPbmNlIGNhbmNlbGxhdGlvbiBpc1xuICAgKiBpbml0aWF0ZWQsIHRoZSBiYXRjaCBlbnRlcnMgYSBgY2FuY2VsaW5nYCBzdGF0ZSwgYXQgd2hpY2ggdGltZSB0aGUgc3lzdGVtIG1heVxuICAgKiBjb21wbGV0ZSBhbnkgaW4tcHJvZ3Jlc3MsIG5vbi1pbnRlcnJ1cHRpYmxlIHJlcXVlc3RzIGJlZm9yZSBmaW5hbGl6aW5nXG4gICAqIGNhbmNlbGxhdGlvbi5cbiAgICpcbiAgICogVGhlIG51bWJlciBvZiBjYW5jZWxlZCByZXF1ZXN0cyBpcyBzcGVjaWZpZWQgaW4gYHJlcXVlc3RfY291bnRzYC4gVG8gZGV0ZXJtaW5lXG4gICAqIHdoaWNoIHJlcXVlc3RzIHdlcmUgY2FuY2VsZWQsIGNoZWNrIHRoZSBpbmRpdmlkdWFsIHJlc3VsdHMgd2l0aGluIHRoZSBiYXRjaC5cbiAgICogTm90ZSB0aGF0IGNhbmNlbGxhdGlvbiBtYXkgbm90IHJlc3VsdCBpbiBhbnkgY2FuY2VsZWQgcmVxdWVzdHMgaWYgdGhleSB3ZXJlXG4gICAqIG5vbi1pbnRlcnJ1cHRpYmxlLlxuICAgKi9cbiAgY2FuY2VsKG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPE1lc3NhZ2VCYXRjaD4ge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQucG9zdChgL3YxL21lc3NhZ2VzL2JhdGNoZXMvJHttZXNzYWdlQmF0Y2hJZH0vY2FuY2VsYCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogU3RyZWFtcyB0aGUgcmVzdWx0cyBvZiBhIE1lc3NhZ2UgQmF0Y2ggYXMgYSBgLmpzb25sYCBmaWxlLlxuICAgKlxuICAgKiBFYWNoIGxpbmUgaW4gdGhlIGZpbGUgaXMgYSBKU09OIG9iamVjdCBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgYSBzaW5nbGUgcmVxdWVzdFxuICAgKiBpbiB0aGUgTWVzc2FnZSBCYXRjaC4gUmVzdWx0cyBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgaW4gdGhlIHNhbWUgb3JkZXIgYXNcbiAgICogcmVxdWVzdHMuIFVzZSB0aGUgYGN1c3RvbV9pZGAgZmllbGQgdG8gbWF0Y2ggcmVzdWx0cyB0byByZXF1ZXN0cy5cbiAgICovXG4gIGFzeW5jIHJlc3VsdHMoXG4gICAgbWVzc2FnZUJhdGNoSWQ6IHN0cmluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogUHJvbWlzZTxKU09OTERlY29kZXI8TWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlPj4ge1xuICAgIGNvbnN0IGJhdGNoID0gYXdhaXQgdGhpcy5yZXRyaWV2ZShtZXNzYWdlQmF0Y2hJZCk7XG4gICAgaWYgKCFiYXRjaC5yZXN1bHRzX3VybCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICBgTm8gYmF0Y2ggXFxgcmVzdWx0c191cmxcXGA7IEhhcyBpdCBmaW5pc2hlZCBwcm9jZXNzaW5nPyAke2JhdGNoLnByb2Nlc3Npbmdfc3RhdHVzfSAtICR7YmF0Y2guaWR9YCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudFxuICAgICAgLmdldChiYXRjaC5yZXN1bHRzX3VybCwge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vYmluYXJ5JyxcbiAgICAgICAgICAuLi5vcHRpb25zPy5oZWFkZXJzLFxuICAgICAgICB9LFxuICAgICAgICBfX2JpbmFyeVJlc3BvbnNlOiB0cnVlLFxuICAgICAgfSlcbiAgICAgIC5fdGhlblVud3JhcCgoXywgcHJvcHMpID0+IEpTT05MRGVjb2Rlci5mcm9tUmVzcG9uc2UocHJvcHMucmVzcG9uc2UsIHByb3BzLmNvbnRyb2xsZXIpKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTWVzc2FnZUJhdGNoZXNQYWdlIGV4dGVuZHMgUGFnZTxNZXNzYWdlQmF0Y2g+IHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVsZXRlZE1lc3NhZ2VCYXRjaCB7XG4gIC8qKlxuICAgKiBJRCBvZiB0aGUgTWVzc2FnZSBCYXRjaC5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIERlbGV0ZWQgb2JqZWN0IHR5cGUuXG4gICAqXG4gICAqIEZvciBNZXNzYWdlIEJhdGNoZXMsIHRoaXMgaXMgYWx3YXlzIGBcIm1lc3NhZ2VfYmF0Y2hfZGVsZXRlZFwiYC5cbiAgICovXG4gIHR5cGU6ICdtZXNzYWdlX2JhdGNoX2RlbGV0ZWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VCYXRjaCB7XG4gIC8qKlxuICAgKiBVbmlxdWUgb2JqZWN0IGlkZW50aWZpZXIuXG4gICAqXG4gICAqIFRoZSBmb3JtYXQgYW5kIGxlbmd0aCBvZiBJRHMgbWF5IGNoYW5nZSBvdmVyIHRpbWUuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIHRoZSBNZXNzYWdlIEJhdGNoIHdhc1xuICAgKiBhcmNoaXZlZCBhbmQgaXRzIHJlc3VsdHMgYmVjYW1lIHVuYXZhaWxhYmxlLlxuICAgKi9cbiAgYXJjaGl2ZWRfYXQ6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggY2FuY2VsbGF0aW9uIHdhc1xuICAgKiBpbml0aWF0ZWQgZm9yIHRoZSBNZXNzYWdlIEJhdGNoLiBTcGVjaWZpZWQgb25seSBpZiBjYW5jZWxsYXRpb24gd2FzIGluaXRpYXRlZC5cbiAgICovXG4gIGNhbmNlbF9pbml0aWF0ZWRfYXQ6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggdGhlIE1lc3NhZ2UgQmF0Y2ggd2FzXG4gICAqIGNyZWF0ZWQuXG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggcHJvY2Vzc2luZyBmb3IgdGhlXG4gICAqIE1lc3NhZ2UgQmF0Y2ggZW5kZWQuIFNwZWNpZmllZCBvbmx5IG9uY2UgcHJvY2Vzc2luZyBlbmRzLlxuICAgKlxuICAgKiBQcm9jZXNzaW5nIGVuZHMgd2hlbiBldmVyeSByZXF1ZXN0IGluIGEgTWVzc2FnZSBCYXRjaCBoYXMgZWl0aGVyIHN1Y2NlZWRlZCxcbiAgICogZXJyb3JlZCwgY2FuY2VsZWQsIG9yIGV4cGlyZWQuXG4gICAqL1xuICBlbmRlZF9hdDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCB0aGUgTWVzc2FnZSBCYXRjaCB3aWxsXG4gICAqIGV4cGlyZSBhbmQgZW5kIHByb2Nlc3NpbmcsIHdoaWNoIGlzIDI0IGhvdXJzIGFmdGVyIGNyZWF0aW9uLlxuICAgKi9cbiAgZXhwaXJlc19hdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBQcm9jZXNzaW5nIHN0YXR1cyBvZiB0aGUgTWVzc2FnZSBCYXRjaC5cbiAgICovXG4gIHByb2Nlc3Npbmdfc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnIHwgJ2NhbmNlbGluZycgfCAnZW5kZWQnO1xuXG4gIC8qKlxuICAgKiBUYWxsaWVzIHJlcXVlc3RzIHdpdGhpbiB0aGUgTWVzc2FnZSBCYXRjaCwgY2F0ZWdvcml6ZWQgYnkgdGhlaXIgc3RhdHVzLlxuICAgKlxuICAgKiBSZXF1ZXN0cyBzdGFydCBhcyBgcHJvY2Vzc2luZ2AgYW5kIG1vdmUgdG8gb25lIG9mIHRoZSBvdGhlciBzdGF0dXNlcyBvbmx5IG9uY2VcbiAgICogcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIGJhdGNoIGVuZHMuIFRoZSBzdW0gb2YgYWxsIHZhbHVlcyBhbHdheXMgbWF0Y2hlcyB0aGVcbiAgICogdG90YWwgbnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBiYXRjaC5cbiAgICovXG4gIHJlcXVlc3RfY291bnRzOiBNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzO1xuXG4gIC8qKlxuICAgKiBVUkwgdG8gYSBgLmpzb25sYCBmaWxlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdHMgb2YgdGhlIE1lc3NhZ2UgQmF0Y2ggcmVxdWVzdHMuXG4gICAqIFNwZWNpZmllZCBvbmx5IG9uY2UgcHJvY2Vzc2luZyBlbmRzLlxuICAgKlxuICAgKiBSZXN1bHRzIGluIHRoZSBmaWxlIGFyZSBub3QgZ3VhcmFudGVlZCB0byBiZSBpbiB0aGUgc2FtZSBvcmRlciBhcyByZXF1ZXN0cy4gVXNlXG4gICAqIHRoZSBgY3VzdG9tX2lkYCBmaWVsZCB0byBtYXRjaCByZXN1bHRzIHRvIHJlcXVlc3RzLlxuICAgKi9cbiAgcmVzdWx0c191cmw6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgTWVzc2FnZSBCYXRjaGVzLCB0aGlzIGlzIGFsd2F5cyBgXCJtZXNzYWdlX2JhdGNoXCJgLlxuICAgKi9cbiAgdHlwZTogJ21lc3NhZ2VfYmF0Y2gnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0IHtcbiAgdHlwZTogJ2NhbmNlbGVkJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0IHtcbiAgZXJyb3I6IFNoYXJlZC5FcnJvclJlc3BvbnNlO1xuXG4gIHR5cGU6ICdlcnJvcmVkJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0IHtcbiAgdHlwZTogJ2V4cGlyZWQnO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSBzaW5nbGUgbGluZSBpbiB0aGUgcmVzcG9uc2UgYC5qc29ubGAgZmlsZSBhbmQgZG9lcyBub3QgcmVwcmVzZW50IHRoZVxuICogcmVzcG9uc2UgYXMgYSB3aG9sZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2Uge1xuICAvKipcbiAgICogRGV2ZWxvcGVyLXByb3ZpZGVkIElEIGNyZWF0ZWQgZm9yIGVhY2ggcmVxdWVzdCBpbiBhIE1lc3NhZ2UgQmF0Y2guIFVzZWZ1bCBmb3JcbiAgICogbWF0Y2hpbmcgcmVzdWx0cyB0byByZXF1ZXN0cywgYXMgcmVzdWx0cyBtYXkgYmUgZ2l2ZW4gb3V0IG9mIHJlcXVlc3Qgb3JkZXIuXG4gICAqXG4gICAqIE11c3QgYmUgdW5pcXVlIGZvciBlYWNoIHJlcXVlc3Qgd2l0aGluIHRoZSBNZXNzYWdlIEJhdGNoLlxuICAgKi9cbiAgY3VzdG9tX2lkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFByb2Nlc3NpbmcgcmVzdWx0IGZvciB0aGlzIHJlcXVlc3QuXG4gICAqXG4gICAqIENvbnRhaW5zIGEgTWVzc2FnZSBvdXRwdXQgaWYgcHJvY2Vzc2luZyB3YXMgc3VjY2Vzc2Z1bCwgYW4gZXJyb3IgcmVzcG9uc2UgaWZcbiAgICogcHJvY2Vzc2luZyBmYWlsZWQsIG9yIHRoZSByZWFzb24gd2h5IHByb2Nlc3Npbmcgd2FzIG5vdCBhdHRlbXB0ZWQsIHN1Y2ggYXNcbiAgICogY2FuY2VsbGF0aW9uIG9yIGV4cGlyYXRpb24uXG4gICAqL1xuICByZXN1bHQ6IE1lc3NhZ2VCYXRjaFJlc3VsdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzIHtcbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGhhdmUgYmVlbiBjYW5jZWxlZC5cbiAgICpcbiAgICogVGhpcyBpcyB6ZXJvIHVudGlsIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBNZXNzYWdlIEJhdGNoIGhhcyBlbmRlZC5cbiAgICovXG4gIGNhbmNlbGVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGVuY291bnRlcmVkIGFuIGVycm9yLlxuICAgKlxuICAgKiBUaGlzIGlzIHplcm8gdW50aWwgcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIE1lc3NhZ2UgQmF0Y2ggaGFzIGVuZGVkLlxuICAgKi9cbiAgZXJyb3JlZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIE1lc3NhZ2UgQmF0Y2ggdGhhdCBoYXZlIGV4cGlyZWQuXG4gICAqXG4gICAqIFRoaXMgaXMgemVybyB1bnRpbCBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgTWVzc2FnZSBCYXRjaCBoYXMgZW5kZWQuXG4gICAqL1xuICBleHBpcmVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGFyZSBwcm9jZXNzaW5nLlxuICAgKi9cbiAgcHJvY2Vzc2luZzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIE1lc3NhZ2UgQmF0Y2ggdGhhdCBoYXZlIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuXG4gICAqXG4gICAqIFRoaXMgaXMgemVybyB1bnRpbCBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgTWVzc2FnZSBCYXRjaCBoYXMgZW5kZWQuXG4gICAqL1xuICBzdWNjZWVkZWQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBQcm9jZXNzaW5nIHJlc3VsdCBmb3IgdGhpcyByZXF1ZXN0LlxuICpcbiAqIENvbnRhaW5zIGEgTWVzc2FnZSBvdXRwdXQgaWYgcHJvY2Vzc2luZyB3YXMgc3VjY2Vzc2Z1bCwgYW4gZXJyb3IgcmVzcG9uc2UgaWZcbiAqIHByb2Nlc3NpbmcgZmFpbGVkLCBvciB0aGUgcmVhc29uIHdoeSBwcm9jZXNzaW5nIHdhcyBub3QgYXR0ZW1wdGVkLCBzdWNoIGFzXG4gKiBjYW5jZWxsYXRpb24gb3IgZXhwaXJhdGlvbi5cbiAqL1xuZXhwb3J0IHR5cGUgTWVzc2FnZUJhdGNoUmVzdWx0ID1cbiAgfCBNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHRcbiAgfCBNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0XG4gIHwgTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHRcbiAgfCBNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0O1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCB7XG4gIG1lc3NhZ2U6IE1lc3NhZ2VzQVBJLk1lc3NhZ2U7XG5cbiAgdHlwZTogJ3N1Y2NlZWRlZCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogTGlzdCBvZiByZXF1ZXN0cyBmb3IgcHJvbXB0IGNvbXBsZXRpb24uIEVhY2ggaXMgYW4gaW5kaXZpZHVhbCByZXF1ZXN0IHRvIGNyZWF0ZVxuICAgKiBhIE1lc3NhZ2UuXG4gICAqL1xuICByZXF1ZXN0czogQXJyYXk8QmF0Y2hDcmVhdGVQYXJhbXMuUmVxdWVzdD47XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQmF0Y2hDcmVhdGVQYXJhbXMge1xuICBleHBvcnQgaW50ZXJmYWNlIFJlcXVlc3Qge1xuICAgIC8qKlxuICAgICAqIERldmVsb3Blci1wcm92aWRlZCBJRCBjcmVhdGVkIGZvciBlYWNoIHJlcXVlc3QgaW4gYSBNZXNzYWdlIEJhdGNoLiBVc2VmdWwgZm9yXG4gICAgICogbWF0Y2hpbmcgcmVzdWx0cyB0byByZXF1ZXN0cywgYXMgcmVzdWx0cyBtYXkgYmUgZ2l2ZW4gb3V0IG9mIHJlcXVlc3Qgb3JkZXIuXG4gICAgICpcbiAgICAgKiBNdXN0IGJlIHVuaXF1ZSBmb3IgZWFjaCByZXF1ZXN0IHdpdGhpbiB0aGUgTWVzc2FnZSBCYXRjaC5cbiAgICAgKi9cbiAgICBjdXN0b21faWQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIE1lc3NhZ2VzIEFQSSBjcmVhdGlvbiBwYXJhbWV0ZXJzIGZvciB0aGUgaW5kaXZpZHVhbCByZXF1ZXN0LlxuICAgICAqXG4gICAgICogU2VlIHRoZSBbTWVzc2FnZXMgQVBJIHJlZmVyZW5jZV0oL2VuL2FwaS9tZXNzYWdlcykgZm9yIGZ1bGwgZG9jdW1lbnRhdGlvbiBvblxuICAgICAqIGF2YWlsYWJsZSBwYXJhbWV0ZXJzLlxuICAgICAqL1xuICAgIHBhcmFtczogTWVzc2FnZXNBUEkuTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoTGlzdFBhcmFtcyBleHRlbmRzIFBhZ2VQYXJhbXMge31cblxuQmF0Y2hlcy5NZXNzYWdlQmF0Y2hlc1BhZ2UgPSBNZXNzYWdlQmF0Y2hlc1BhZ2U7XG5cbmV4cG9ydCBkZWNsYXJlIG5hbWVzcGFjZSBCYXRjaGVzIHtcbiAgZXhwb3J0IHtcbiAgICB0eXBlIERlbGV0ZWRNZXNzYWdlQmF0Y2ggYXMgRGVsZXRlZE1lc3NhZ2VCYXRjaCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaCBhcyBNZXNzYWdlQmF0Y2gsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCBhcyBNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQgYXMgTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQgYXMgTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSBhcyBNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzIGFzIE1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hSZXN1bHQgYXMgTWVzc2FnZUJhdGNoUmVzdWx0LFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0IGFzIE1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCxcbiAgICBNZXNzYWdlQmF0Y2hlc1BhZ2UgYXMgTWVzc2FnZUJhdGNoZXNQYWdlLFxuICAgIHR5cGUgQmF0Y2hDcmVhdGVQYXJhbXMgYXMgQmF0Y2hDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBCYXRjaExpc3RQYXJhbXMgYXMgQmF0Y2hMaXN0UGFyYW1zLFxuICB9O1xufVxuIiwgImltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4uL2NvcmUuanNcIjtcbmltcG9ydCB7IEFudGhyb3BpY0Vycm9yLCBBUElVc2VyQWJvcnRFcnJvciB9IGZyb20gXCIuLi9lcnJvci5qc1wiO1xuaW1wb3J0IHtcbiAgdHlwZSBDb250ZW50QmxvY2ssXG4gIE1lc3NhZ2VzLFxuICB0eXBlIE1lc3NhZ2UsXG4gIHR5cGUgTWVzc2FnZVN0cmVhbUV2ZW50LFxuICB0eXBlIE1lc3NhZ2VQYXJhbSxcbiAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlLFxuICB0eXBlIFRleHRCbG9jayxcbiAgdHlwZSBUZXh0Q2l0YXRpb24sXG59IGZyb20gXCIuLi9yZXNvdXJjZXMvbWVzc2FnZXMuanNcIjtcbmltcG9ydCB7IHR5cGUgUmVhZGFibGVTdHJlYW0sIHR5cGUgUmVzcG9uc2UgfSBmcm9tIFwiLi4vX3NoaW1zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tIFwiLi4vc3RyZWFtaW5nLmpzXCI7XG5pbXBvcnQgeyBwYXJ0aWFsUGFyc2UgfSBmcm9tIFwiLi4vX3ZlbmRvci9wYXJ0aWFsLWpzb24tcGFyc2VyL3BhcnNlci5qc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VTdHJlYW1FdmVudHMge1xuICBjb25uZWN0OiAoKSA9PiB2b2lkO1xuICBzdHJlYW1FdmVudDogKGV2ZW50OiBNZXNzYWdlU3RyZWFtRXZlbnQsIHNuYXBzaG90OiBNZXNzYWdlKSA9PiB2b2lkO1xuICB0ZXh0OiAodGV4dERlbHRhOiBzdHJpbmcsIHRleHRTbmFwc2hvdDogc3RyaW5nKSA9PiB2b2lkO1xuICBjaXRhdGlvbjogKGNpdGF0aW9uOiBUZXh0Q2l0YXRpb24sIGNpdGF0aW9uc1NuYXBzaG90OiBUZXh0Q2l0YXRpb25bXSkgPT4gdm9pZDtcbiAgaW5wdXRKc29uOiAocGFydGlhbEpzb246IHN0cmluZywganNvblNuYXBzaG90OiB1bmtub3duKSA9PiB2b2lkO1xuICBtZXNzYWdlOiAobWVzc2FnZTogTWVzc2FnZSkgPT4gdm9pZDtcbiAgY29udGVudEJsb2NrOiAoY29udGVudDogQ29udGVudEJsb2NrKSA9PiB2b2lkO1xuICBmaW5hbE1lc3NhZ2U6IChtZXNzYWdlOiBNZXNzYWdlKSA9PiB2b2lkO1xuICBlcnJvcjogKGVycm9yOiBBbnRocm9waWNFcnJvcikgPT4gdm9pZDtcbiAgYWJvcnQ6IChlcnJvcjogQVBJVXNlckFib3J0RXJyb3IpID0+IHZvaWQ7XG4gIGVuZDogKCkgPT4gdm9pZDtcbn1cblxudHlwZSBNZXNzYWdlU3RyZWFtRXZlbnRMaXN0ZW5lcnM8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPiA9IHtcbiAgbGlzdGVuZXI6IE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdO1xuICBvbmNlPzogYm9vbGVhbjtcbn1bXTtcblxuY29uc3QgSlNPTl9CVUZfUFJPUEVSVFkgPSAnX19qc29uX2J1Zic7XG5cbmV4cG9ydCBjbGFzcyBNZXNzYWdlU3RyZWFtIGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZTxNZXNzYWdlU3RyZWFtRXZlbnQ+IHtcbiAgbWVzc2FnZXM6IE1lc3NhZ2VQYXJhbVtdID0gW107XG4gIHJlY2VpdmVkTWVzc2FnZXM6IE1lc3NhZ2VbXSA9IFtdO1xuICAjY3VycmVudE1lc3NhZ2VTbmFwc2hvdDogTWVzc2FnZSB8IHVuZGVmaW5lZDtcblxuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cbiAgI2Nvbm5lY3RlZFByb21pc2U6IFByb21pc2U8UmVzcG9uc2UgfCBudWxsPjtcbiAgI3Jlc29sdmVDb25uZWN0ZWRQcm9taXNlOiAocmVzcG9uc2U6IFJlc3BvbnNlIHwgbnVsbCkgPT4gdm9pZCA9ICgpID0+IHt9O1xuICAjcmVqZWN0Q29ubmVjdGVkUHJvbWlzZTogKGVycm9yOiBBbnRocm9waWNFcnJvcikgPT4gdm9pZCA9ICgpID0+IHt9O1xuXG4gICNlbmRQcm9taXNlOiBQcm9taXNlPHZvaWQ+O1xuICAjcmVzb2x2ZUVuZFByb21pc2U6ICgpID0+IHZvaWQgPSAoKSA9PiB7fTtcbiAgI3JlamVjdEVuZFByb21pc2U6IChlcnJvcjogQW50aHJvcGljRXJyb3IpID0+IHZvaWQgPSAoKSA9PiB7fTtcblxuICAjbGlzdGVuZXJzOiB7IFtFdmVudCBpbiBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzXT86IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gfSA9IHt9O1xuXG4gICNlbmRlZCA9IGZhbHNlO1xuICAjZXJyb3JlZCA9IGZhbHNlO1xuICAjYWJvcnRlZCA9IGZhbHNlO1xuICAjY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCA9IGZhbHNlO1xuICAjcmVzcG9uc2U6IFJlc3BvbnNlIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgI3JlcXVlc3RfaWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy4jY29ubmVjdGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlPFJlc3BvbnNlIHwgbnVsbD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy4jcmVzb2x2ZUNvbm5lY3RlZFByb21pc2UgPSByZXNvbHZlO1xuICAgICAgdGhpcy4jcmVqZWN0Q29ubmVjdGVkUHJvbWlzZSA9IHJlamVjdDtcbiAgICB9KTtcblxuICAgIHRoaXMuI2VuZFByb21pc2UgPSBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLiNyZXNvbHZlRW5kUHJvbWlzZSA9IHJlc29sdmU7XG4gICAgICB0aGlzLiNyZWplY3RFbmRQcm9taXNlID0gcmVqZWN0O1xuICAgIH0pO1xuXG4gICAgLy8gRG9uJ3QgbGV0IHRoZXNlIHByb21pc2VzIGNhdXNlIHVuaGFuZGxlZCByZWplY3Rpb24gZXJyb3JzLlxuICAgIC8vIHdlIHdpbGwgbWFudWFsbHkgY2F1c2UgYW4gdW5oYW5kbGVkIHJlamVjdGlvbiBlcnJvciBsYXRlclxuICAgIC8vIGlmIHRoZSB1c2VyIGhhc24ndCByZWdpc3RlcmVkIGFueSBlcnJvciBsaXN0ZW5lciBvciBjYWxsZWRcbiAgICAvLyBhbnkgcHJvbWlzZS1yZXR1cm5pbmcgbWV0aG9kLlxuICAgIHRoaXMuI2Nvbm5lY3RlZFByb21pc2UuY2F0Y2goKCkgPT4ge30pO1xuICAgIHRoaXMuI2VuZFByb21pc2UuY2F0Y2goKCkgPT4ge30pO1xuICB9XG5cbiAgZ2V0IHJlc3BvbnNlKCk6IFJlc3BvbnNlIHwgbnVsbCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuI3Jlc3BvbnNlO1xuICB9XG5cbiAgZ2V0IHJlcXVlc3RfaWQoKTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuI3JlcXVlc3RfaWQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYE1lc3NhZ2VTdHJlYW1gIGRhdGEsIHRoZSByYXcgYFJlc3BvbnNlYCBpbnN0YW5jZSBhbmQgdGhlIElEIG9mIHRoZSByZXF1ZXN0LFxuICAgKiByZXR1cm5lZCB2aWUgdGhlIGByZXF1ZXN0LWlkYCBoZWFkZXIgd2hpY2ggaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmcgcmVxdWVzdHMgYW5kIHJlc3BvcnRpbmdcbiAgICogaXNzdWVzIHRvIEFudGhyb3BpYy5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgc2FtZSBhcyB0aGUgYEFQSVByb21pc2Uud2l0aFJlc3BvbnNlKClgIG1ldGhvZC5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgd2lsbCByYWlzZSBhbiBlcnJvciBpZiB5b3UgY3JlYXRlZCB0aGUgc3RyZWFtIHVzaW5nIGBNZXNzYWdlU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbWBcbiAgICogYXMgbm8gYFJlc3BvbnNlYCBpcyBhdmFpbGFibGUuXG4gICAqL1xuICBhc3luYyB3aXRoUmVzcG9uc2UoKTogUHJvbWlzZTx7XG4gICAgZGF0YTogTWVzc2FnZVN0cmVhbTtcbiAgICByZXNwb25zZTogUmVzcG9uc2U7XG4gICAgcmVxdWVzdF9pZDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgfT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy4jY29ubmVjdGVkUHJvbWlzZTtcbiAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCByZXNvbHZlIGEgYFJlc3BvbnNlYCBvYmplY3QnKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGF0YTogdGhpcyxcbiAgICAgIHJlc3BvbnNlLFxuICAgICAgcmVxdWVzdF9pZDogcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3JlcXVlc3QtaWQnKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEludGVuZGVkIGZvciB1c2Ugb24gdGhlIGZyb250ZW5kLCBjb25zdW1pbmcgYSBzdHJlYW0gcHJvZHVjZWQgd2l0aFxuICAgKiBgLnRvUmVhZGFibGVTdHJlYW0oKWAgb24gdGhlIGJhY2tlbmQuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBtZXNzYWdlcyBzZW50IHRvIHRoZSBtb2RlbCBkbyBub3QgYXBwZWFyIGluIGAub24oJ21lc3NhZ2UnKWBcbiAgICogaW4gdGhpcyBjb250ZXh0LlxuICAgKi9cbiAgc3RhdGljIGZyb21SZWFkYWJsZVN0cmVhbShzdHJlYW06IFJlYWRhYmxlU3RyZWFtKTogTWVzc2FnZVN0cmVhbSB7XG4gICAgY29uc3QgcnVubmVyID0gbmV3IE1lc3NhZ2VTdHJlYW0oKTtcbiAgICBydW5uZXIuX3J1bigoKSA9PiBydW5uZXIuX2Zyb21SZWFkYWJsZVN0cmVhbShzdHJlYW0pKTtcbiAgICByZXR1cm4gcnVubmVyO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZU1lc3NhZ2UoXG4gICAgbWVzc2FnZXM6IE1lc3NhZ2VzLFxuICAgIHBhcmFtczogTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2UsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IE1lc3NhZ2VTdHJlYW0ge1xuICAgIGNvbnN0IHJ1bm5lciA9IG5ldyBNZXNzYWdlU3RyZWFtKCk7XG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIHBhcmFtcy5tZXNzYWdlcykge1xuICAgICAgcnVubmVyLl9hZGRNZXNzYWdlUGFyYW0obWVzc2FnZSk7XG4gICAgfVxuICAgIHJ1bm5lci5fcnVuKCgpID0+XG4gICAgICBydW5uZXIuX2NyZWF0ZU1lc3NhZ2UoXG4gICAgICAgIG1lc3NhZ2VzLFxuICAgICAgICB7IC4uLnBhcmFtcywgc3RyZWFtOiB0cnVlIH0sXG4gICAgICAgIHsgLi4ub3B0aW9ucywgaGVhZGVyczogeyAuLi5vcHRpb25zPy5oZWFkZXJzLCAnWC1TdGFpbmxlc3MtSGVscGVyLU1ldGhvZCc6ICdzdHJlYW0nIH0gfSxcbiAgICAgICksXG4gICAgKTtcbiAgICByZXR1cm4gcnVubmVyO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9ydW4oZXhlY3V0b3I6ICgpID0+IFByb21pc2U8YW55Pikge1xuICAgIGV4ZWN1dG9yKCkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLl9lbWl0RmluYWwoKTtcbiAgICAgIHRoaXMuX2VtaXQoJ2VuZCcpO1xuICAgIH0sIHRoaXMuI2hhbmRsZUVycm9yKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfYWRkTWVzc2FnZVBhcmFtKG1lc3NhZ2U6IE1lc3NhZ2VQYXJhbSkge1xuICAgIHRoaXMubWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfYWRkTWVzc2FnZShtZXNzYWdlOiBNZXNzYWdlLCBlbWl0ID0gdHJ1ZSkge1xuICAgIHRoaXMucmVjZWl2ZWRNZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICAgIGlmIChlbWl0KSB7XG4gICAgICB0aGlzLl9lbWl0KCdtZXNzYWdlJywgbWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIF9jcmVhdGVNZXNzYWdlKFxuICAgIG1lc3NhZ2VzOiBNZXNzYWdlcyxcbiAgICBwYXJhbXM6IE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHNpZ25hbCA9IG9wdGlvbnM/LnNpZ25hbDtcbiAgICBpZiAoc2lnbmFsKSB7XG4gICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT4gdGhpcy5jb250cm9sbGVyLmFib3J0KCkpO1xuICAgIH1cbiAgICB0aGlzLiNiZWdpblJlcXVlc3QoKTtcbiAgICBjb25zdCB7IHJlc3BvbnNlLCBkYXRhOiBzdHJlYW0gfSA9IGF3YWl0IG1lc3NhZ2VzXG4gICAgICAuY3JlYXRlKHsgLi4ucGFyYW1zLCBzdHJlYW06IHRydWUgfSwgeyAuLi5vcHRpb25zLCBzaWduYWw6IHRoaXMuY29udHJvbGxlci5zaWduYWwgfSlcbiAgICAgIC53aXRoUmVzcG9uc2UoKTtcbiAgICB0aGlzLl9jb25uZWN0ZWQocmVzcG9uc2UpO1xuICAgIGZvciBhd2FpdCAoY29uc3QgZXZlbnQgb2Ygc3RyZWFtKSB7XG4gICAgICB0aGlzLiNhZGRTdHJlYW1FdmVudChldmVudCk7XG4gICAgfVxuICAgIGlmIChzdHJlYW0uY29udHJvbGxlci5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgIH1cbiAgICB0aGlzLiNlbmRSZXF1ZXN0KCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2Nvbm5lY3RlZChyZXNwb25zZTogUmVzcG9uc2UgfCBudWxsKSB7XG4gICAgaWYgKHRoaXMuZW5kZWQpIHJldHVybjtcbiAgICB0aGlzLiNyZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgIHRoaXMuI3JlcXVlc3RfaWQgPSByZXNwb25zZT8uaGVhZGVycy5nZXQoJ3JlcXVlc3QtaWQnKTtcbiAgICB0aGlzLiNyZXNvbHZlQ29ubmVjdGVkUHJvbWlzZShyZXNwb25zZSk7XG4gICAgdGhpcy5fZW1pdCgnY29ubmVjdCcpO1xuICB9XG5cbiAgZ2V0IGVuZGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLiNlbmRlZDtcbiAgfVxuXG4gIGdldCBlcnJvcmVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLiNlcnJvcmVkO1xuICB9XG5cbiAgZ2V0IGFib3J0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2Fib3J0ZWQ7XG4gIH1cblxuICBhYm9ydCgpIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHRoZSBsaXN0ZW5lciBmdW5jdGlvbiB0byB0aGUgZW5kIG9mIHRoZSBsaXN0ZW5lcnMgYXJyYXkgZm9yIHRoZSBldmVudC5cbiAgICogTm8gY2hlY2tzIGFyZSBtYWRlIHRvIHNlZSBpZiB0aGUgbGlzdGVuZXIgaGFzIGFscmVhZHkgYmVlbiBhZGRlZC4gTXVsdGlwbGUgY2FsbHMgcGFzc2luZ1xuICAgKiB0aGUgc2FtZSBjb21iaW5hdGlvbiBvZiBldmVudCBhbmQgbGlzdGVuZXIgd2lsbCByZXN1bHQgaW4gdGhlIGxpc3RlbmVyIGJlaW5nIGFkZGVkLCBhbmRcbiAgICogY2FsbGVkLCBtdWx0aXBsZSB0aW1lcy5cbiAgICogQHJldHVybnMgdGhpcyBNZXNzYWdlU3RyZWFtLCBzbyB0aGF0IGNhbGxzIGNhbiBiZSBjaGFpbmVkXG4gICAqL1xuICBvbjxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+KGV2ZW50OiBFdmVudCwgbGlzdGVuZXI6IE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdKTogdGhpcyB7XG4gICAgY29uc3QgbGlzdGVuZXJzOiBNZXNzYWdlU3RyZWFtRXZlbnRMaXN0ZW5lcnM8RXZlbnQ+ID1cbiAgICAgIHRoaXMuI2xpc3RlbmVyc1tldmVudF0gfHwgKHRoaXMuI2xpc3RlbmVyc1tldmVudF0gPSBbXSk7XG4gICAgbGlzdGVuZXJzLnB1c2goeyBsaXN0ZW5lciB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgbGlzdGVuZXIgZnJvbSB0aGUgbGlzdGVuZXIgYXJyYXkgZm9yIHRoZSBldmVudC5cbiAgICogb2ZmKCkgd2lsbCByZW1vdmUsIGF0IG1vc3QsIG9uZSBpbnN0YW5jZSBvZiBhIGxpc3RlbmVyIGZyb20gdGhlIGxpc3RlbmVyIGFycmF5LiBJZiBhbnkgc2luZ2xlXG4gICAqIGxpc3RlbmVyIGhhcyBiZWVuIGFkZGVkIG11bHRpcGxlIHRpbWVzIHRvIHRoZSBsaXN0ZW5lciBhcnJheSBmb3IgdGhlIHNwZWNpZmllZCBldmVudCwgdGhlblxuICAgKiBvZmYoKSBtdXN0IGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyB0byByZW1vdmUgZWFjaCBpbnN0YW5jZS5cbiAgICogQHJldHVybnMgdGhpcyBNZXNzYWdlU3RyZWFtLCBzbyB0aGF0IGNhbGxzIGNhbiBiZSBjaGFpbmVkXG4gICAqL1xuICBvZmY8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihldmVudDogRXZlbnQsIGxpc3RlbmVyOiBNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XSk6IHRoaXMge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuI2xpc3RlbmVyc1tldmVudF07XG4gICAgaWYgKCFsaXN0ZW5lcnMpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmZpbmRJbmRleCgobCkgPT4gbC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpO1xuICAgIGlmIChpbmRleCA+PSAwKSBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgb25lLXRpbWUgbGlzdGVuZXIgZnVuY3Rpb24gZm9yIHRoZSBldmVudC4gVGhlIG5leHQgdGltZSB0aGUgZXZlbnQgaXMgdHJpZ2dlcmVkLFxuICAgKiB0aGlzIGxpc3RlbmVyIGlzIHJlbW92ZWQgYW5kIHRoZW4gaW52b2tlZC5cbiAgICogQHJldHVybnMgdGhpcyBNZXNzYWdlU3RyZWFtLCBzbyB0aGF0IGNhbGxzIGNhbiBiZSBjaGFpbmVkXG4gICAqL1xuICBvbmNlPEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oZXZlbnQ6IEV2ZW50LCBsaXN0ZW5lcjogTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0pOiB0aGlzIHtcbiAgICBjb25zdCBsaXN0ZW5lcnM6IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gPVxuICAgICAgdGhpcy4jbGlzdGVuZXJzW2V2ZW50XSB8fCAodGhpcy4jbGlzdGVuZXJzW2V2ZW50XSA9IFtdKTtcbiAgICBsaXN0ZW5lcnMucHVzaCh7IGxpc3RlbmVyLCBvbmNlOiB0cnVlIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgc2ltaWxhciB0byBgLm9uY2UoKWAsIGJ1dCByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRoZSBuZXh0IHRpbWVcbiAgICogdGhlIGV2ZW50IGlzIHRyaWdnZXJlZCwgaW5zdGVhZCBvZiBjYWxsaW5nIGEgbGlzdGVuZXIgY2FsbGJhY2suXG4gICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRoZSBuZXh0IHRpbWUgZ2l2ZW4gZXZlbnQgaXMgdHJpZ2dlcmVkLFxuICAgKiBvciByZWplY3RzIGlmIGFuIGVycm9yIGlzIGVtaXR0ZWQuICAoSWYgeW91IHJlcXVlc3QgdGhlICdlcnJvcicgZXZlbnQsXG4gICAqIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZXJyb3IpLlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKlxuICAgKiAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBzdHJlYW0uZW1pdHRlZCgnbWVzc2FnZScpIC8vIHJlamVjdHMgaWYgdGhlIHN0cmVhbSBlcnJvcnNcbiAgICovXG4gIGVtaXR0ZWQ8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihcbiAgICBldmVudDogRXZlbnQsXG4gICk6IFByb21pc2U8XG4gICAgUGFyYW1ldGVyczxNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XT4gZXh0ZW5kcyBbaW5mZXIgUGFyYW1dID8gUGFyYW1cbiAgICA6IFBhcmFtZXRlcnM8TWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+IGV4dGVuZHMgW10gPyB2b2lkXG4gICAgOiBQYXJhbWV0ZXJzPE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdPlxuICA+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCA9IHRydWU7XG4gICAgICBpZiAoZXZlbnQgIT09ICdlcnJvcicpIHRoaXMub25jZSgnZXJyb3InLCByZWplY3QpO1xuICAgICAgdGhpcy5vbmNlKGV2ZW50LCByZXNvbHZlIGFzIGFueSk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkb25lKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgPSB0cnVlO1xuICAgIGF3YWl0IHRoaXMuI2VuZFByb21pc2U7XG4gIH1cblxuICBnZXQgY3VycmVudE1lc3NhZ2UoKTogTWVzc2FnZSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3Q7XG4gIH1cblxuICAjZ2V0RmluYWxNZXNzYWdlKCk6IE1lc3NhZ2Uge1xuICAgIGlmICh0aGlzLnJlY2VpdmVkTWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoJ3N0cmVhbSBlbmRlZCB3aXRob3V0IHByb2R1Y2luZyBhIE1lc3NhZ2Ugd2l0aCByb2xlPWFzc2lzdGFudCcpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmF0KC0xKSE7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgdGhlIGZpbmFsIGFzc2lzdGFudCBNZXNzYWdlIHJlc3BvbnNlLFxuICAgKiBvciByZWplY3RzIGlmIGFuIGVycm9yIG9jY3VycmVkIG9yIHRoZSBzdHJlYW0gZW5kZWQgcHJlbWF0dXJlbHkgd2l0aG91dCBwcm9kdWNpbmcgYSBNZXNzYWdlLlxuICAgKi9cbiAgYXN5bmMgZmluYWxNZXNzYWdlKCk6IFByb21pc2U8TWVzc2FnZT4ge1xuICAgIGF3YWl0IHRoaXMuZG9uZSgpO1xuICAgIHJldHVybiB0aGlzLiNnZXRGaW5hbE1lc3NhZ2UoKTtcbiAgfVxuXG4gICNnZXRGaW5hbFRleHQoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKCdzdHJlYW0gZW5kZWQgd2l0aG91dCBwcm9kdWNpbmcgYSBNZXNzYWdlIHdpdGggcm9sZT1hc3Npc3RhbnQnKTtcbiAgICB9XG4gICAgY29uc3QgdGV4dEJsb2NrcyA9IHRoaXMucmVjZWl2ZWRNZXNzYWdlc1xuICAgICAgLmF0KC0xKSFcbiAgICAgIC5jb250ZW50LmZpbHRlcigoYmxvY2spOiBibG9jayBpcyBUZXh0QmxvY2sgPT4gYmxvY2sudHlwZSA9PT0gJ3RleHQnKVxuICAgICAgLm1hcCgoYmxvY2spID0+IGJsb2NrLnRleHQpO1xuICAgIGlmICh0ZXh0QmxvY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKCdzdHJlYW0gZW5kZWQgd2l0aG91dCBwcm9kdWNpbmcgYSBjb250ZW50IGJsb2NrIHdpdGggdHlwZT10ZXh0Jyk7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0QmxvY2tzLmpvaW4oJyAnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSB0aGUgZmluYWwgYXNzaXN0YW50IE1lc3NhZ2UncyB0ZXh0IHJlc3BvbnNlLCBjb25jYXRlbmF0ZWRcbiAgICogdG9nZXRoZXIgaWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgdGV4dCBibG9ja3MuXG4gICAqIFJlamVjdHMgaWYgYW4gZXJyb3Igb2NjdXJyZWQgb3IgdGhlIHN0cmVhbSBlbmRlZCBwcmVtYXR1cmVseSB3aXRob3V0IHByb2R1Y2luZyBhIE1lc3NhZ2UuXG4gICAqL1xuICBhc3luYyBmaW5hbFRleHQoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBhd2FpdCB0aGlzLmRvbmUoKTtcbiAgICByZXR1cm4gdGhpcy4jZ2V0RmluYWxUZXh0KCk7XG4gIH1cblxuICAjaGFuZGxlRXJyb3IgPSAoZXJyb3I6IHVua25vd24pID0+IHtcbiAgICB0aGlzLiNlcnJvcmVkID0gdHJ1ZTtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgIGVycm9yID0gbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEFQSVVzZXJBYm9ydEVycm9yKSB7XG4gICAgICB0aGlzLiNhYm9ydGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0aGlzLl9lbWl0KCdhYm9ydCcsIGVycm9yKTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQW50aHJvcGljRXJyb3IpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbnN0IGFudGhyb3BpY0Vycm9yOiBBbnRocm9waWNFcnJvciA9IG5ldyBBbnRocm9waWNFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGFudGhyb3BpY0Vycm9yLmNhdXNlID0gZXJyb3I7XG4gICAgICByZXR1cm4gdGhpcy5fZW1pdCgnZXJyb3InLCBhbnRocm9waWNFcnJvcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9lbWl0KCdlcnJvcicsIG5ldyBBbnRocm9waWNFcnJvcihTdHJpbmcoZXJyb3IpKSk7XG4gIH07XG5cbiAgcHJvdGVjdGVkIF9lbWl0PEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oXG4gICAgZXZlbnQ6IEV2ZW50LFxuICAgIC4uLmFyZ3M6IFBhcmFtZXRlcnM8TWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+XG4gICkge1xuICAgIC8vIG1ha2Ugc3VyZSB3ZSBkb24ndCBlbWl0IGFueSBNZXNzYWdlU3RyZWFtRXZlbnRzIGFmdGVyIGVuZFxuICAgIGlmICh0aGlzLiNlbmRlZCkgcmV0dXJuO1xuXG4gICAgaWYgKGV2ZW50ID09PSAnZW5kJykge1xuICAgICAgdGhpcy4jZW5kZWQgPSB0cnVlO1xuICAgICAgdGhpcy4jcmVzb2x2ZUVuZFByb21pc2UoKTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnM6IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gfCB1bmRlZmluZWQgPSB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIHRoaXMuI2xpc3RlbmVyc1tldmVudF0gPSBsaXN0ZW5lcnMuZmlsdGVyKChsKSA9PiAhbC5vbmNlKSBhcyBhbnk7XG4gICAgICBsaXN0ZW5lcnMuZm9yRWFjaCgoeyBsaXN0ZW5lciB9OiBhbnkpID0+IGxpc3RlbmVyKC4uLmFyZ3MpKTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQgPT09ICdhYm9ydCcpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gYXJnc1swXSBhcyBBUElVc2VyQWJvcnRFcnJvcjtcbiAgICAgIGlmICghdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCAmJiAhbGlzdGVuZXJzPy5sZW5ndGgpIHtcbiAgICAgICAgUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgICAgdGhpcy4jcmVqZWN0Q29ubmVjdGVkUHJvbWlzZShlcnJvcik7XG4gICAgICB0aGlzLiNyZWplY3RFbmRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuX2VtaXQoJ2VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudCA9PT0gJ2Vycm9yJykge1xuICAgICAgLy8gTk9URTogX2VtaXQoJ2Vycm9yJywgZXJyb3IpIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmcm9tICNoYW5kbGVFcnJvcigpLlxuXG4gICAgICBjb25zdCBlcnJvciA9IGFyZ3NbMF0gYXMgQW50aHJvcGljRXJyb3I7XG4gICAgICBpZiAoIXRoaXMuI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgJiYgIWxpc3RlbmVycz8ubGVuZ3RoKSB7XG4gICAgICAgIC8vIFRyaWdnZXIgYW4gdW5oYW5kbGVkIHJlamVjdGlvbiBpZiB0aGUgdXNlciBoYXNuJ3QgcmVnaXN0ZXJlZCBhbnkgZXJyb3IgaGFuZGxlcnMuXG4gICAgICAgIC8vIElmIHlvdSBhcmUgc2VlaW5nIHN0YWNrIHRyYWNlcyBoZXJlLCBtYWtlIHN1cmUgdG8gaGFuZGxlIGVycm9ycyB2aWEgZWl0aGVyOlxuICAgICAgICAvLyAtIHJ1bm5lci5vbignZXJyb3InLCAoKSA9PiAuLi4pXG4gICAgICAgIC8vIC0gYXdhaXQgcnVubmVyLmRvbmUoKVxuICAgICAgICAvLyAtIGF3YWl0IHJ1bm5lci5maW5hbC4uLigpXG4gICAgICAgIC8vIC0gZXRjLlxuICAgICAgICBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgICB0aGlzLiNyZWplY3RDb25uZWN0ZWRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuI3JlamVjdEVuZFByb21pc2UoZXJyb3IpO1xuICAgICAgdGhpcy5fZW1pdCgnZW5kJyk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIF9lbWl0RmluYWwoKSB7XG4gICAgY29uc3QgZmluYWxNZXNzYWdlID0gdGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmF0KC0xKTtcbiAgICBpZiAoZmluYWxNZXNzYWdlKSB7XG4gICAgICB0aGlzLl9lbWl0KCdmaW5hbE1lc3NhZ2UnLCB0aGlzLiNnZXRGaW5hbE1lc3NhZ2UoKSk7XG4gICAgfVxuICB9XG5cbiAgI2JlZ2luUmVxdWVzdCgpIHtcbiAgICBpZiAodGhpcy5lbmRlZCkgcmV0dXJuO1xuICAgIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3QgPSB1bmRlZmluZWQ7XG4gIH1cbiAgI2FkZFN0cmVhbUV2ZW50KGV2ZW50OiBNZXNzYWdlU3RyZWFtRXZlbnQpIHtcbiAgICBpZiAodGhpcy5lbmRlZCkgcmV0dXJuO1xuICAgIGNvbnN0IG1lc3NhZ2VTbmFwc2hvdCA9IHRoaXMuI2FjY3VtdWxhdGVNZXNzYWdlKGV2ZW50KTtcbiAgICB0aGlzLl9lbWl0KCdzdHJlYW1FdmVudCcsIGV2ZW50LCBtZXNzYWdlU25hcHNob3QpO1xuXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX2RlbHRhJzoge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gbWVzc2FnZVNuYXBzaG90LmNvbnRlbnQuYXQoLTEpITtcbiAgICAgICAgc3dpdGNoIChldmVudC5kZWx0YS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAndGV4dF9kZWx0YSc6IHtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICB0aGlzLl9lbWl0KCd0ZXh0JywgZXZlbnQuZGVsdGEudGV4dCwgY29udGVudC50ZXh0IHx8ICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlICdjaXRhdGlvbnNfZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZW1pdCgnY2l0YXRpb24nLCBldmVudC5kZWx0YS5jaXRhdGlvbiwgY29udGVudC5jaXRhdGlvbnMgPz8gW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgJ2lucHV0X2pzb25fZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAndG9vbF91c2UnICYmIGNvbnRlbnQuaW5wdXQpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZW1pdCgnaW5wdXRKc29uJywgZXZlbnQuZGVsdGEucGFydGlhbF9qc29uLCBjb250ZW50LmlucHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2hlY2tOZXZlcihldmVudC5kZWx0YSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdtZXNzYWdlX3N0b3AnOiB7XG4gICAgICAgIHRoaXMuX2FkZE1lc3NhZ2VQYXJhbShtZXNzYWdlU25hcHNob3QpO1xuICAgICAgICB0aGlzLl9hZGRNZXNzYWdlKG1lc3NhZ2VTbmFwc2hvdCwgdHJ1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19zdG9wJzoge1xuICAgICAgICB0aGlzLl9lbWl0KCdjb250ZW50QmxvY2snLCBtZXNzYWdlU25hcHNob3QuY29udGVudC5hdCgtMSkhKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdtZXNzYWdlX3N0YXJ0Jzoge1xuICAgICAgICB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90ID0gbWVzc2FnZVNuYXBzaG90O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RhcnQnOlxuICAgICAgY2FzZSAnbWVzc2FnZV9kZWx0YSc6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICAjZW5kUmVxdWVzdCgpOiBNZXNzYWdlIHtcbiAgICBpZiAodGhpcy5lbmRlZCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBzdHJlYW0gaGFzIGVuZGVkLCB0aGlzIHNob3VsZG4ndCBoYXBwZW5gKTtcbiAgICB9XG4gICAgY29uc3Qgc25hcHNob3QgPSB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90O1xuICAgIGlmICghc25hcHNob3QpIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgcmVxdWVzdCBlbmRlZCB3aXRob3V0IHNlbmRpbmcgYW55IGNodW5rc2ApO1xuICAgIH1cbiAgICB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90ID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiBzbmFwc2hvdDtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBfZnJvbVJlYWRhYmxlU3RyZWFtKFxuICAgIHJlYWRhYmxlU3RyZWFtOiBSZWFkYWJsZVN0cmVhbSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc2lnbmFsID0gb3B0aW9ucz8uc2lnbmFsO1xuICAgIGlmIChzaWduYWwpIHtcbiAgICAgIGlmIChzaWduYWwuYWJvcnRlZCkgdGhpcy5jb250cm9sbGVyLmFib3J0KCk7XG4gICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKSk7XG4gICAgfVxuICAgIHRoaXMuI2JlZ2luUmVxdWVzdCgpO1xuICAgIHRoaXMuX2Nvbm5lY3RlZChudWxsKTtcbiAgICBjb25zdCBzdHJlYW0gPSBTdHJlYW0uZnJvbVJlYWRhYmxlU3RyZWFtPE1lc3NhZ2VTdHJlYW1FdmVudD4ocmVhZGFibGVTdHJlYW0sIHRoaXMuY29udHJvbGxlcik7XG4gICAgZm9yIGF3YWl0IChjb25zdCBldmVudCBvZiBzdHJlYW0pIHtcbiAgICAgIHRoaXMuI2FkZFN0cmVhbUV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgaWYgKHN0cmVhbS5jb250cm9sbGVyLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgdGhyb3cgbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuICAgIHRoaXMuI2VuZFJlcXVlc3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNdXRhdGVzIHRoaXMuI2N1cnJlbnRNZXNzYWdlIHdpdGggdGhlIGN1cnJlbnQgZXZlbnQuIEhhbmRsaW5nIHRoZSBhY2N1bXVsYXRpb24gb2YgbXVsdGlwbGUgbWVzc2FnZXNcbiAgICogd2lsbCBiZSBuZWVkZWQgdG8gYmUgaGFuZGxlZCBieSB0aGUgY2FsbGVyLCB0aGlzIG1ldGhvZCB3aWxsIHRocm93IGlmIHlvdSB0cnkgdG8gYWNjdW11bGF0ZSBmb3IgbXVsdGlwbGVcbiAgICogbWVzc2FnZXMuXG4gICAqL1xuICAjYWNjdW11bGF0ZU1lc3NhZ2UoZXZlbnQ6IE1lc3NhZ2VTdHJlYW1FdmVudCk6IE1lc3NhZ2Uge1xuICAgIGxldCBzbmFwc2hvdCA9IHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3Q7XG5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ21lc3NhZ2Vfc3RhcnQnKSB7XG4gICAgICBpZiAoc25hcHNob3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBVbmV4cGVjdGVkIGV2ZW50IG9yZGVyLCBnb3QgJHtldmVudC50eXBlfSBiZWZvcmUgcmVjZWl2aW5nIFwibWVzc2FnZV9zdG9wXCJgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBldmVudC5tZXNzYWdlO1xuICAgIH1cblxuICAgIGlmICghc25hcHNob3QpIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgVW5leHBlY3RlZCBldmVudCBvcmRlciwgZ290ICR7ZXZlbnQudHlwZX0gYmVmb3JlIFwibWVzc2FnZV9zdGFydFwiYCk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICBjYXNlICdtZXNzYWdlX3N0b3AnOlxuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgICBjYXNlICdtZXNzYWdlX2RlbHRhJzpcbiAgICAgICAgc25hcHNob3Quc3RvcF9yZWFzb24gPSBldmVudC5kZWx0YS5zdG9wX3JlYXNvbjtcbiAgICAgICAgc25hcHNob3Quc3RvcF9zZXF1ZW5jZSA9IGV2ZW50LmRlbHRhLnN0b3Bfc2VxdWVuY2U7XG4gICAgICAgIHNuYXBzaG90LnVzYWdlLm91dHB1dF90b2tlbnMgPSBldmVudC51c2FnZS5vdXRwdXRfdG9rZW5zO1xuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX3N0YXJ0JzpcbiAgICAgICAgc25hcHNob3QuY29udGVudC5wdXNoKGV2ZW50LmNvbnRlbnRfYmxvY2spO1xuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX2RlbHRhJzoge1xuICAgICAgICBjb25zdCBzbmFwc2hvdENvbnRlbnQgPSBzbmFwc2hvdC5jb250ZW50LmF0KGV2ZW50LmluZGV4KTtcblxuICAgICAgICBzd2l0Y2ggKGV2ZW50LmRlbHRhLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICd0ZXh0X2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKHNuYXBzaG90Q29udGVudD8udHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgIHNuYXBzaG90Q29udGVudC50ZXh0ICs9IGV2ZW50LmRlbHRhLnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSAnY2l0YXRpb25zX2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKHNuYXBzaG90Q29udGVudD8udHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgIHNuYXBzaG90Q29udGVudC5jaXRhdGlvbnMgPz89IFtdO1xuICAgICAgICAgICAgICBzbmFwc2hvdENvbnRlbnQuY2l0YXRpb25zLnB1c2goZXZlbnQuZGVsdGEuY2l0YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgJ2lucHV0X2pzb25fZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoc25hcHNob3RDb250ZW50Py50eXBlID09PSAndG9vbF91c2UnKSB7XG4gICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiB0aGUgcmF3IEpTT04gc3RyaW5nIGFzIHdlbGwgc28gdGhhdCB3ZSBjYW5cbiAgICAgICAgICAgICAgLy8gcmUtcGFyc2UgaXQgZm9yIGVhY2ggZGVsdGEsIGZvciBub3cgd2UganVzdCBzdG9yZSBpdCBhcyBhbiB1bnR5cGVkXG4gICAgICAgICAgICAgIC8vIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5IG9uIHRoZSBzbmFwc2hvdFxuICAgICAgICAgICAgICBsZXQganNvbkJ1ZiA9IChzbmFwc2hvdENvbnRlbnQgYXMgYW55KVtKU09OX0JVRl9QUk9QRVJUWV0gfHwgJyc7XG4gICAgICAgICAgICAgIGpzb25CdWYgKz0gZXZlbnQuZGVsdGEucGFydGlhbF9qc29uO1xuXG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzbmFwc2hvdENvbnRlbnQsIEpTT05fQlVGX1BST1BFUlRZLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGpzb25CdWYsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGlmIChqc29uQnVmKSB7XG4gICAgICAgICAgICAgICAgc25hcHNob3RDb250ZW50LmlucHV0ID0gcGFydGlhbFBhcnNlKGpzb25CdWYpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNoZWNrTmV2ZXIoZXZlbnQuZGVsdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgICAgfVxuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19zdG9wJzpcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgIH1cbiAgfVxuXG4gIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTogQXN5bmNJdGVyYXRvcjxNZXNzYWdlU3RyZWFtRXZlbnQ+IHtcbiAgICBjb25zdCBwdXNoUXVldWU6IE1lc3NhZ2VTdHJlYW1FdmVudFtdID0gW107XG4gICAgY29uc3QgcmVhZFF1ZXVlOiB7XG4gICAgICByZXNvbHZlOiAoY2h1bms6IE1lc3NhZ2VTdHJlYW1FdmVudCB8IHVuZGVmaW5lZCkgPT4gdm9pZDtcbiAgICAgIHJlamVjdDogKGVycm9yOiB1bmtub3duKSA9PiB2b2lkO1xuICAgIH1bXSA9IFtdO1xuICAgIGxldCBkb25lID0gZmFsc2U7XG5cbiAgICB0aGlzLm9uKCdzdHJlYW1FdmVudCcsIChldmVudCkgPT4ge1xuICAgICAgY29uc3QgcmVhZGVyID0gcmVhZFF1ZXVlLnNoaWZ0KCk7XG4gICAgICBpZiAocmVhZGVyKSB7XG4gICAgICAgIHJlYWRlci5yZXNvbHZlKGV2ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHB1c2hRdWV1ZS5wdXNoKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMub24oJ2VuZCcsICgpID0+IHtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgZm9yIChjb25zdCByZWFkZXIgb2YgcmVhZFF1ZXVlKSB7XG4gICAgICAgIHJlYWRlci5yZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgICByZWFkUXVldWUubGVuZ3RoID0gMDtcbiAgICB9KTtcblxuICAgIHRoaXMub24oJ2Fib3J0JywgKGVycikgPT4ge1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICBmb3IgKGNvbnN0IHJlYWRlciBvZiByZWFkUXVldWUpIHtcbiAgICAgICAgcmVhZGVyLnJlamVjdChlcnIpO1xuICAgICAgfVxuICAgICAgcmVhZFF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgZm9yIChjb25zdCByZWFkZXIgb2YgcmVhZFF1ZXVlKSB7XG4gICAgICAgIHJlYWRlci5yZWplY3QoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJlYWRRdWV1ZS5sZW5ndGggPSAwO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHQ6IGFzeW5jICgpOiBQcm9taXNlPEl0ZXJhdG9yUmVzdWx0PE1lc3NhZ2VTdHJlYW1FdmVudD4+ID0+IHtcbiAgICAgICAgaWYgKCFwdXNoUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPE1lc3NhZ2VTdHJlYW1FdmVudCB8IHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT5cbiAgICAgICAgICAgIHJlYWRRdWV1ZS5wdXNoKHsgcmVzb2x2ZSwgcmVqZWN0IH0pLFxuICAgICAgICAgICkudGhlbigoY2h1bmspID0+IChjaHVuayA/IHsgdmFsdWU6IGNodW5rLCBkb25lOiBmYWxzZSB9IDogeyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaHVuayA9IHB1c2hRdWV1ZS5zaGlmdCgpITtcbiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IGNodW5rLCBkb25lOiBmYWxzZSB9O1xuICAgICAgfSxcbiAgICAgIHJldHVybjogYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aGlzLmFib3J0KCk7XG4gICAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHRvUmVhZGFibGVTdHJlYW0oKTogUmVhZGFibGVTdHJlYW0ge1xuICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBTdHJlYW0odGhpc1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0uYmluZCh0aGlzKSwgdGhpcy5jb250cm9sbGVyKTtcbiAgICByZXR1cm4gc3RyZWFtLnRvUmVhZGFibGVTdHJlYW0oKTtcbiAgfVxufVxuXG4vLyB1c2VkIHRvIGVuc3VyZSBleGhhdXN0aXZlIGNhc2UgbWF0Y2hpbmcgd2l0aG91dCB0aHJvd2luZyBhIHJ1bnRpbWUgZXJyb3JcbmZ1bmN0aW9uIGNoZWNrTmV2ZXIoeDogbmV2ZXIpIHt9XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCB7IEFQSVByb21pc2UgfSBmcm9tIFwiLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgTWVzc2FnZXNBUEkgZnJvbSBcIi4vbWVzc2FnZXMuanNcIjtcbmltcG9ydCAqIGFzIEJhdGNoZXNBUEkgZnJvbSBcIi4vYmF0Y2hlcy5qc1wiO1xuaW1wb3J0IHtcbiAgQmF0Y2hDcmVhdGVQYXJhbXMsXG4gIEJhdGNoTGlzdFBhcmFtcyxcbiAgQmF0Y2hlcyxcbiAgRGVsZXRlZE1lc3NhZ2VCYXRjaCxcbiAgTWVzc2FnZUJhdGNoLFxuICBNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCxcbiAgTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCxcbiAgTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCxcbiAgTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlLFxuICBNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzLFxuICBNZXNzYWdlQmF0Y2hSZXN1bHQsXG4gIE1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCxcbiAgTWVzc2FnZUJhdGNoZXNQYWdlLFxufSBmcm9tIFwiLi9iYXRjaGVzLmpzXCI7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tIFwiLi4vLi4vc3RyZWFtaW5nLmpzXCI7XG5pbXBvcnQgeyBNZXNzYWdlU3RyZWFtIH0gZnJvbSBcIi4uLy4uL2xpYi9NZXNzYWdlU3RyZWFtLmpzXCI7XG5cbmV4cG9ydCB7IE1lc3NhZ2VTdHJlYW0gfSBmcm9tIFwiLi4vLi4vbGliL01lc3NhZ2VTdHJlYW0uanNcIjtcblxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICBiYXRjaGVzOiBCYXRjaGVzQVBJLkJhdGNoZXMgPSBuZXcgQmF0Y2hlc0FQSS5CYXRjaGVzKHRoaXMuX2NsaWVudCk7XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBzdHJ1Y3R1cmVkIGxpc3Qgb2YgaW5wdXQgbWVzc2FnZXMgd2l0aCB0ZXh0IGFuZC9vciBpbWFnZSBjb250ZW50LCBhbmQgdGhlXG4gICAqIG1vZGVsIHdpbGwgZ2VuZXJhdGUgdGhlIG5leHQgbWVzc2FnZSBpbiB0aGUgY29udmVyc2F0aW9uLlxuICAgKlxuICAgKiBUaGUgTWVzc2FnZXMgQVBJIGNhbiBiZSB1c2VkIGZvciBlaXRoZXIgc2luZ2xlIHF1ZXJpZXMgb3Igc3RhdGVsZXNzIG11bHRpLXR1cm5cbiAgICogY29udmVyc2F0aW9ucy5cbiAgICovXG4gIGNyZWF0ZShib2R5OiBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IEFQSVByb21pc2U8TWVzc2FnZT47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxSYXdNZXNzYWdlU3RyZWFtRXZlbnQ+PjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxSYXdNZXNzYWdlU3RyZWFtRXZlbnQ+IHwgTWVzc2FnZT47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPE1lc3NhZ2U+IHwgQVBJUHJvbWlzZTxTdHJlYW08UmF3TWVzc2FnZVN0cmVhbUV2ZW50Pj4ge1xuICAgIGlmIChib2R5Lm1vZGVsIGluIERFUFJFQ0FURURfTU9ERUxTKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBUaGUgbW9kZWwgJyR7Ym9keS5tb2RlbH0nIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgcmVhY2ggZW5kLW9mLWxpZmUgb24gJHtcbiAgICAgICAgICBERVBSRUNBVEVEX01PREVMU1tib2R5Lm1vZGVsXVxuICAgICAgICB9XFxuUGxlYXNlIG1pZ3JhdGUgdG8gYSBuZXdlciBtb2RlbC4gVmlzaXQgaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9yZXNvdXJjZXMvbW9kZWwtZGVwcmVjYXRpb25zIGZvciBtb3JlIGluZm9ybWF0aW9uLmAsXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoJy92MS9tZXNzYWdlcycsIHtcbiAgICAgIGJvZHksXG4gICAgICB0aW1lb3V0OiAodGhpcy5fY2xpZW50IGFzIGFueSkuX29wdGlvbnMudGltZW91dCA/PyA2MDAwMDAsXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgc3RyZWFtOiBib2R5LnN0cmVhbSA/PyBmYWxzZSxcbiAgICB9KSBhcyBBUElQcm9taXNlPE1lc3NhZ2U+IHwgQVBJUHJvbWlzZTxTdHJlYW08UmF3TWVzc2FnZVN0cmVhbUV2ZW50Pj47XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgTWVzc2FnZSBzdHJlYW1cbiAgICovXG4gIHN0cmVhbShib2R5OiBNZXNzYWdlU3RyZWFtUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IE1lc3NhZ2VTdHJlYW0ge1xuICAgIHJldHVybiBNZXNzYWdlU3RyZWFtLmNyZWF0ZU1lc3NhZ2UodGhpcywgYm9keSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogQ291bnQgdGhlIG51bWJlciBvZiB0b2tlbnMgaW4gYSBNZXNzYWdlLlxuICAgKlxuICAgKiBUaGUgVG9rZW4gQ291bnQgQVBJIGNhbiBiZSB1c2VkIHRvIGNvdW50IHRoZSBudW1iZXIgb2YgdG9rZW5zIGluIGEgTWVzc2FnZSxcbiAgICogaW5jbHVkaW5nIHRvb2xzLCBpbWFnZXMsIGFuZCBkb2N1bWVudHMsIHdpdGhvdXQgY3JlYXRpbmcgaXQuXG4gICAqL1xuICBjb3VudFRva2VucyhcbiAgICBib2R5OiBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxNZXNzYWdlVG9rZW5zQ291bnQ+IHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoJy92MS9tZXNzYWdlcy9jb3VudF90b2tlbnMnLCB7IGJvZHksIC4uLm9wdGlvbnMgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXNlNjRQREZTb3VyY2Uge1xuICBkYXRhOiBzdHJpbmc7XG5cbiAgbWVkaWFfdHlwZTogJ2FwcGxpY2F0aW9uL3BkZic7XG5cbiAgdHlwZTogJ2Jhc2U2NCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FjaGVDb250cm9sRXBoZW1lcmFsIHtcbiAgdHlwZTogJ2VwaGVtZXJhbCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2l0YXRpb25DaGFyTG9jYXRpb24ge1xuICBjaXRlZF90ZXh0OiBzdHJpbmc7XG5cbiAgZG9jdW1lbnRfaW5kZXg6IG51bWJlcjtcblxuICBkb2N1bWVudF90aXRsZTogc3RyaW5nIHwgbnVsbDtcblxuICBlbmRfY2hhcl9pbmRleDogbnVtYmVyO1xuXG4gIHN0YXJ0X2NoYXJfaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY2hhcl9sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbSB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9jaGFyX2luZGV4OiBudW1iZXI7XG5cbiAgc3RhcnRfY2hhcl9pbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjaGFyX2xvY2F0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX2Jsb2NrX2luZGV4OiBudW1iZXI7XG5cbiAgc3RhcnRfYmxvY2tfaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX2Jsb2NrX2luZGV4OiBudW1iZXI7XG5cbiAgc3RhcnRfYmxvY2tfaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2l0YXRpb25QYWdlTG9jYXRpb24ge1xuICBjaXRlZF90ZXh0OiBzdHJpbmc7XG5cbiAgZG9jdW1lbnRfaW5kZXg6IG51bWJlcjtcblxuICBkb2N1bWVudF90aXRsZTogc3RyaW5nIHwgbnVsbDtcblxuICBlbmRfcGFnZV9udW1iZXI6IG51bWJlcjtcblxuICBzdGFydF9wYWdlX251bWJlcjogbnVtYmVyO1xuXG4gIHR5cGU6ICdwYWdlX2xvY2F0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX3BhZ2VfbnVtYmVyOiBudW1iZXI7XG5cbiAgc3RhcnRfcGFnZV9udW1iZXI6IG51bWJlcjtcblxuICB0eXBlOiAncGFnZV9sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2l0YXRpb25zQ29uZmlnUGFyYW0ge1xuICBlbmFibGVkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaXRhdGlvbnNEZWx0YSB7XG4gIGNpdGF0aW9uOiBDaXRhdGlvbkNoYXJMb2NhdGlvbiB8IENpdGF0aW9uUGFnZUxvY2F0aW9uIHwgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbjtcblxuICB0eXBlOiAnY2l0YXRpb25zX2RlbHRhJztcbn1cblxuZXhwb3J0IHR5cGUgQ29udGVudEJsb2NrID0gVGV4dEJsb2NrIHwgVG9vbFVzZUJsb2NrO1xuXG5leHBvcnQgdHlwZSBDb250ZW50QmxvY2tEZWx0YUV2ZW50ID0gUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudDtcblxuZXhwb3J0IHR5cGUgQ29udGVudEJsb2NrUGFyYW0gPVxuICB8IFRleHRCbG9ja1BhcmFtXG4gIHwgSW1hZ2VCbG9ja1BhcmFtXG4gIHwgVG9vbFVzZUJsb2NrUGFyYW1cbiAgfCBUb29sUmVzdWx0QmxvY2tQYXJhbVxuICB8IERvY3VtZW50QmxvY2tQYXJhbTtcblxuZXhwb3J0IGludGVyZmFjZSBDb250ZW50QmxvY2tTb3VyY2Uge1xuICBjb250ZW50OiBzdHJpbmcgfCBBcnJheTxDb250ZW50QmxvY2tTb3VyY2VDb250ZW50PjtcblxuICB0eXBlOiAnY29udGVudCc7XG59XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQgPSBUZXh0QmxvY2tQYXJhbSB8IEltYWdlQmxvY2tQYXJhbTtcblxuZXhwb3J0IHR5cGUgQ29udGVudEJsb2NrU3RhcnRFdmVudCA9IFJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQ7XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRCbG9ja1N0b3BFdmVudCA9IFJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudDtcblxuZXhwb3J0IGludGVyZmFjZSBEb2N1bWVudEJsb2NrUGFyYW0ge1xuICBzb3VyY2U6IEJhc2U2NFBERlNvdXJjZSB8IFBsYWluVGV4dFNvdXJjZSB8IENvbnRlbnRCbG9ja1NvdXJjZTtcblxuICB0eXBlOiAnZG9jdW1lbnQnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIGNpdGF0aW9ucz86IENpdGF0aW9uc0NvbmZpZ1BhcmFtO1xuXG4gIGNvbnRleHQ/OiBzdHJpbmcgfCBudWxsO1xuXG4gIHRpdGxlPzogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbWFnZUJsb2NrUGFyYW0ge1xuICBzb3VyY2U6IEltYWdlQmxvY2tQYXJhbS5Tb3VyY2U7XG5cbiAgdHlwZTogJ2ltYWdlJztcblxuICBjYWNoZV9jb250cm9sPzogQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBJbWFnZUJsb2NrUGFyYW0ge1xuICBleHBvcnQgaW50ZXJmYWNlIFNvdXJjZSB7XG4gICAgZGF0YTogc3RyaW5nO1xuXG4gICAgbWVkaWFfdHlwZTogJ2ltYWdlL2pwZWcnIHwgJ2ltYWdlL3BuZycgfCAnaW1hZ2UvZ2lmJyB8ICdpbWFnZS93ZWJwJztcblxuICAgIHR5cGU6ICdiYXNlNjQnO1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIElucHV0SnNvbkRlbHRhID0gSW5wdXRKU09ORGVsdGE7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5wdXRKU09ORGVsdGEge1xuICBwYXJ0aWFsX2pzb246IHN0cmluZztcblxuICB0eXBlOiAnaW5wdXRfanNvbl9kZWx0YSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBVbmlxdWUgb2JqZWN0IGlkZW50aWZpZXIuXG4gICAqXG4gICAqIFRoZSBmb3JtYXQgYW5kIGxlbmd0aCBvZiBJRHMgbWF5IGNoYW5nZSBvdmVyIHRpbWUuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBDb250ZW50IGdlbmVyYXRlZCBieSB0aGUgbW9kZWwuXG4gICAqXG4gICAqIFRoaXMgaXMgYW4gYXJyYXkgb2YgY29udGVudCBibG9ja3MsIGVhY2ggb2Ygd2hpY2ggaGFzIGEgYHR5cGVgIHRoYXQgZGV0ZXJtaW5lc1xuICAgKiBpdHMgc2hhcGUuXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW3sgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJIaSwgSSdtIENsYXVkZS5cIiB9XVxuICAgKiBgYGBcbiAgICpcbiAgICogSWYgdGhlIHJlcXVlc3QgaW5wdXQgYG1lc3NhZ2VzYCBlbmRlZCB3aXRoIGFuIGBhc3Npc3RhbnRgIHR1cm4sIHRoZW4gdGhlXG4gICAqIHJlc3BvbnNlIGBjb250ZW50YCB3aWxsIGNvbnRpbnVlIGRpcmVjdGx5IGZyb20gdGhhdCBsYXN0IHR1cm4uIFlvdSBjYW4gdXNlIHRoaXNcbiAgICogdG8gY29uc3RyYWluIHRoZSBtb2RlbCdzIG91dHB1dC5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGlmIHRoZSBpbnB1dCBgbWVzc2FnZXNgIHdlcmU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIldoYXQncyB0aGUgR3JlZWsgbmFtZSBmb3IgU3VuPyAoQSkgU29sIChCKSBIZWxpb3MgKEMpIFN1blwiXG4gICAqICAgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJUaGUgYmVzdCBhbnN3ZXIgaXMgKFwiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogVGhlbiB0aGUgcmVzcG9uc2UgYGNvbnRlbnRgIG1pZ2h0IGJlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiQilcIiB9XVxuICAgKiBgYGBcbiAgICovXG4gIGNvbnRlbnQ6IEFycmF5PENvbnRlbnRCbG9jaz47XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1vZGVsO1xuXG4gIC8qKlxuICAgKiBDb252ZXJzYXRpb25hbCByb2xlIG9mIHRoZSBnZW5lcmF0ZWQgbWVzc2FnZS5cbiAgICpcbiAgICogVGhpcyB3aWxsIGFsd2F5cyBiZSBgXCJhc3Npc3RhbnRcImAuXG4gICAqL1xuICByb2xlOiAnYXNzaXN0YW50JztcblxuICAvKipcbiAgICogVGhlIHJlYXNvbiB0aGF0IHdlIHN0b3BwZWQuXG4gICAqXG4gICAqIFRoaXMgbWF5IGJlIG9uZSB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAgICpcbiAgICogLSBgXCJlbmRfdHVyblwiYDogdGhlIG1vZGVsIHJlYWNoZWQgYSBuYXR1cmFsIHN0b3BwaW5nIHBvaW50XG4gICAqIC0gYFwibWF4X3Rva2Vuc1wiYDogd2UgZXhjZWVkZWQgdGhlIHJlcXVlc3RlZCBgbWF4X3Rva2Vuc2Agb3IgdGhlIG1vZGVsJ3MgbWF4aW11bVxuICAgKiAtIGBcInN0b3Bfc2VxdWVuY2VcImA6IG9uZSBvZiB5b3VyIHByb3ZpZGVkIGN1c3RvbSBgc3RvcF9zZXF1ZW5jZXNgIHdhcyBnZW5lcmF0ZWRcbiAgICogLSBgXCJ0b29sX3VzZVwiYDogdGhlIG1vZGVsIGludm9rZWQgb25lIG9yIG1vcmUgdG9vbHNcbiAgICpcbiAgICogSW4gbm9uLXN0cmVhbWluZyBtb2RlIHRoaXMgdmFsdWUgaXMgYWx3YXlzIG5vbi1udWxsLiBJbiBzdHJlYW1pbmcgbW9kZSwgaXQgaXNcbiAgICogbnVsbCBpbiB0aGUgYG1lc3NhZ2Vfc3RhcnRgIGV2ZW50IGFuZCBub24tbnVsbCBvdGhlcndpc2UuXG4gICAqL1xuICBzdG9wX3JlYXNvbjogJ2VuZF90dXJuJyB8ICdtYXhfdG9rZW5zJyB8ICdzdG9wX3NlcXVlbmNlJyB8ICd0b29sX3VzZScgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBXaGljaCBjdXN0b20gc3RvcCBzZXF1ZW5jZSB3YXMgZ2VuZXJhdGVkLCBpZiBhbnkuXG4gICAqXG4gICAqIFRoaXMgdmFsdWUgd2lsbCBiZSBhIG5vbi1udWxsIHN0cmluZyBpZiBvbmUgb2YgeW91ciBjdXN0b20gc3RvcCBzZXF1ZW5jZXMgd2FzXG4gICAqIGdlbmVyYXRlZC5cbiAgICovXG4gIHN0b3Bfc2VxdWVuY2U6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgTWVzc2FnZXMsIHRoaXMgaXMgYWx3YXlzIGBcIm1lc3NhZ2VcImAuXG4gICAqL1xuICB0eXBlOiAnbWVzc2FnZSc7XG5cbiAgLyoqXG4gICAqIEJpbGxpbmcgYW5kIHJhdGUtbGltaXQgdXNhZ2UuXG4gICAqXG4gICAqIEFudGhyb3BpYydzIEFQSSBiaWxscyBhbmQgcmF0ZS1saW1pdHMgYnkgdG9rZW4gY291bnRzLCBhcyB0b2tlbnMgcmVwcmVzZW50IHRoZVxuICAgKiB1bmRlcmx5aW5nIGNvc3QgdG8gb3VyIHN5c3RlbXMuXG4gICAqXG4gICAqIFVuZGVyIHRoZSBob29kLCB0aGUgQVBJIHRyYW5zZm9ybXMgcmVxdWVzdHMgaW50byBhIGZvcm1hdCBzdWl0YWJsZSBmb3IgdGhlXG4gICAqIG1vZGVsLiBUaGUgbW9kZWwncyBvdXRwdXQgdGhlbiBnb2VzIHRocm91Z2ggYSBwYXJzaW5nIHN0YWdlIGJlZm9yZSBiZWNvbWluZyBhblxuICAgKiBBUEkgcmVzcG9uc2UuIEFzIGEgcmVzdWx0LCB0aGUgdG9rZW4gY291bnRzIGluIGB1c2FnZWAgd2lsbCBub3QgbWF0Y2ggb25lLXRvLW9uZVxuICAgKiB3aXRoIHRoZSBleGFjdCB2aXNpYmxlIGNvbnRlbnQgb2YgYW4gQVBJIHJlcXVlc3Qgb3IgcmVzcG9uc2UuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBgb3V0cHV0X3Rva2Vuc2Agd2lsbCBiZSBub24temVybywgZXZlbiBmb3IgYW4gZW1wdHkgc3RyaW5nIHJlc3BvbnNlXG4gICAqIGZyb20gQ2xhdWRlLlxuICAgKi9cbiAgdXNhZ2U6IFVzYWdlO1xufVxuXG5leHBvcnQgdHlwZSBNZXNzYWdlRGVsdGFFdmVudCA9IFJhd01lc3NhZ2VEZWx0YUV2ZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VEZWx0YVVzYWdlIHtcbiAgLyoqXG4gICAqIFRoZSBjdW11bGF0aXZlIG51bWJlciBvZiBvdXRwdXQgdG9rZW5zIHdoaWNoIHdlcmUgdXNlZC5cbiAgICovXG4gIG91dHB1dF90b2tlbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlUGFyYW0ge1xuICBjb250ZW50OiBzdHJpbmcgfCBBcnJheTxDb250ZW50QmxvY2tQYXJhbT47XG5cbiAgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCc7XG59XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VTdGFydEV2ZW50ID0gUmF3TWVzc2FnZVN0YXJ0RXZlbnQ7XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VTdG9wRXZlbnQgPSBSYXdNZXNzYWdlU3RvcEV2ZW50O1xuXG5leHBvcnQgdHlwZSBNZXNzYWdlU3RyZWFtRXZlbnQgPSBSYXdNZXNzYWdlU3RyZWFtRXZlbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZVRva2Vuc0NvdW50IHtcbiAgLyoqXG4gICAqIFRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIGFjcm9zcyB0aGUgcHJvdmlkZWQgbGlzdCBvZiBtZXNzYWdlcywgc3lzdGVtIHByb21wdCxcbiAgICogYW5kIHRvb2xzLlxuICAgKi9cbiAgaW5wdXRfdG9rZW5zOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWV0YWRhdGEge1xuICAvKipcbiAgICogQW4gZXh0ZXJuYWwgaWRlbnRpZmllciBmb3IgdGhlIHVzZXIgd2hvIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVxdWVzdC5cbiAgICpcbiAgICogVGhpcyBzaG91bGQgYmUgYSB1dWlkLCBoYXNoIHZhbHVlLCBvciBvdGhlciBvcGFxdWUgaWRlbnRpZmllci4gQW50aHJvcGljIG1heSB1c2VcbiAgICogdGhpcyBpZCB0byBoZWxwIGRldGVjdCBhYnVzZS4gRG8gbm90IGluY2x1ZGUgYW55IGlkZW50aWZ5aW5nIGluZm9ybWF0aW9uIHN1Y2ggYXNcbiAgICogbmFtZSwgZW1haWwgYWRkcmVzcywgb3IgcGhvbmUgbnVtYmVyLlxuICAgKi9cbiAgdXNlcl9pZD86IHN0cmluZyB8IG51bGw7XG59XG5cbi8qKlxuICogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICogZGV0YWlscyBhbmQgb3B0aW9ucy5cbiAqL1xuZXhwb3J0IHR5cGUgTW9kZWwgPVxuICB8IChzdHJpbmcgJiB7fSlcbiAgfCAnY2xhdWRlLTMtNS1oYWlrdS1sYXRlc3QnXG4gIHwgJ2NsYXVkZS0zLTUtaGFpa3UtMjAyNDEwMjInXG4gIHwgJ2NsYXVkZS0zLTUtc29ubmV0LWxhdGVzdCdcbiAgfCAnY2xhdWRlLTMtNS1zb25uZXQtMjAyNDEwMjInXG4gIHwgJ2NsYXVkZS0zLTUtc29ubmV0LTIwMjQwNjIwJ1xuICB8ICdjbGF1ZGUtMy1vcHVzLWxhdGVzdCdcbiAgfCAnY2xhdWRlLTMtb3B1cy0yMDI0MDIyOSdcbiAgfCAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5J1xuICB8ICdjbGF1ZGUtMy1oYWlrdS0yMDI0MDMwNydcbiAgfCAnY2xhdWRlLTIuMSdcbiAgfCAnY2xhdWRlLTIuMCc7XG5cbmNvbnN0IERFUFJFQ0FURURfTU9ERUxTOiB7XG4gIFtLIGluIE1vZGVsXT86IHN0cmluZztcbn0gPSB7XG4gICdjbGF1ZGUtMS4zJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG4gICdjbGF1ZGUtMS4zLTEwMGsnOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS1pbnN0YW50LTEuMSc6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLWluc3RhbnQtMS4xLTEwMGsnOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS1pbnN0YW50LTEuMic6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5JzogJ0p1bHkgMjFzdCwgMjAyNScsXG4gICdjbGF1ZGUtMi4xJzogJ0p1bHkgMjFzdCwgMjAyNScsXG4gICdjbGF1ZGUtMi4wJzogJ0p1bHkgMjFzdCwgMjAyNScsXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIFBsYWluVGV4dFNvdXJjZSB7XG4gIGRhdGE6IHN0cmluZztcblxuICBtZWRpYV90eXBlOiAndGV4dC9wbGFpbic7XG5cbiAgdHlwZTogJ3RleHQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQge1xuICBkZWx0YTogVGV4dERlbHRhIHwgSW5wdXRKU09ORGVsdGEgfCBDaXRhdGlvbnNEZWx0YTtcblxuICBpbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX2RlbHRhJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50IHtcbiAgY29udGVudF9ibG9jazogVGV4dEJsb2NrIHwgVG9vbFVzZUJsb2NrO1xuXG4gIGluZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NvbnRlbnRfYmxvY2tfc3RhcnQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCB7XG4gIGluZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NvbnRlbnRfYmxvY2tfc3RvcCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF3TWVzc2FnZURlbHRhRXZlbnQge1xuICBkZWx0YTogUmF3TWVzc2FnZURlbHRhRXZlbnQuRGVsdGE7XG5cbiAgdHlwZTogJ21lc3NhZ2VfZGVsdGEnO1xuXG4gIC8qKlxuICAgKiBCaWxsaW5nIGFuZCByYXRlLWxpbWl0IHVzYWdlLlxuICAgKlxuICAgKiBBbnRocm9waWMncyBBUEkgYmlsbHMgYW5kIHJhdGUtbGltaXRzIGJ5IHRva2VuIGNvdW50cywgYXMgdG9rZW5zIHJlcHJlc2VudCB0aGVcbiAgICogdW5kZXJseWluZyBjb3N0IHRvIG91ciBzeXN0ZW1zLlxuICAgKlxuICAgKiBVbmRlciB0aGUgaG9vZCwgdGhlIEFQSSB0cmFuc2Zvcm1zIHJlcXVlc3RzIGludG8gYSBmb3JtYXQgc3VpdGFibGUgZm9yIHRoZVxuICAgKiBtb2RlbC4gVGhlIG1vZGVsJ3Mgb3V0cHV0IHRoZW4gZ29lcyB0aHJvdWdoIGEgcGFyc2luZyBzdGFnZSBiZWZvcmUgYmVjb21pbmcgYW5cbiAgICogQVBJIHJlc3BvbnNlLiBBcyBhIHJlc3VsdCwgdGhlIHRva2VuIGNvdW50cyBpbiBgdXNhZ2VgIHdpbGwgbm90IG1hdGNoIG9uZS10by1vbmVcbiAgICogd2l0aCB0aGUgZXhhY3QgdmlzaWJsZSBjb250ZW50IG9mIGFuIEFQSSByZXF1ZXN0IG9yIHJlc3BvbnNlLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgYG91dHB1dF90b2tlbnNgIHdpbGwgYmUgbm9uLXplcm8sIGV2ZW4gZm9yIGFuIGVtcHR5IHN0cmluZyByZXNwb25zZVxuICAgKiBmcm9tIENsYXVkZS5cbiAgICovXG4gIHVzYWdlOiBNZXNzYWdlRGVsdGFVc2FnZTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBSYXdNZXNzYWdlRGVsdGFFdmVudCB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgRGVsdGEge1xuICAgIHN0b3BfcmVhc29uOiAnZW5kX3R1cm4nIHwgJ21heF90b2tlbnMnIHwgJ3N0b3Bfc2VxdWVuY2UnIHwgJ3Rvb2xfdXNlJyB8IG51bGw7XG5cbiAgICBzdG9wX3NlcXVlbmNlOiBzdHJpbmcgfCBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF3TWVzc2FnZVN0YXJ0RXZlbnQge1xuICBtZXNzYWdlOiBNZXNzYWdlO1xuXG4gIHR5cGU6ICdtZXNzYWdlX3N0YXJ0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSYXdNZXNzYWdlU3RvcEV2ZW50IHtcbiAgdHlwZTogJ21lc3NhZ2Vfc3RvcCc7XG59XG5cbmV4cG9ydCB0eXBlIFJhd01lc3NhZ2VTdHJlYW1FdmVudCA9XG4gIHwgUmF3TWVzc2FnZVN0YXJ0RXZlbnRcbiAgfCBSYXdNZXNzYWdlRGVsdGFFdmVudFxuICB8IFJhd01lc3NhZ2VTdG9wRXZlbnRcbiAgfCBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50XG4gIHwgUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudFxuICB8IFJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudDtcblxuZXhwb3J0IGludGVyZmFjZSBUZXh0QmxvY2sge1xuICAvKipcbiAgICogQ2l0YXRpb25zIHN1cHBvcnRpbmcgdGhlIHRleHQgYmxvY2suXG4gICAqXG4gICAqIFRoZSB0eXBlIG9mIGNpdGF0aW9uIHJldHVybmVkIHdpbGwgZGVwZW5kIG9uIHRoZSB0eXBlIG9mIGRvY3VtZW50IGJlaW5nIGNpdGVkLlxuICAgKiBDaXRpbmcgYSBQREYgcmVzdWx0cyBpbiBgcGFnZV9sb2NhdGlvbmAsIHBsYWluIHRleHQgcmVzdWx0cyBpbiBgY2hhcl9sb2NhdGlvbmAsXG4gICAqIGFuZCBjb250ZW50IGRvY3VtZW50IHJlc3VsdHMgaW4gYGNvbnRlbnRfYmxvY2tfbG9jYXRpb25gLlxuICAgKi9cbiAgY2l0YXRpb25zOiBBcnJheTxUZXh0Q2l0YXRpb24+IHwgbnVsbDtcblxuICB0ZXh0OiBzdHJpbmc7XG5cbiAgdHlwZTogJ3RleHQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRleHRCbG9ja1BhcmFtIHtcbiAgdGV4dDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0ZXh0JztcblxuICBjYWNoZV9jb250cm9sPzogQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcblxuICBjaXRhdGlvbnM/OiBBcnJheTxUZXh0Q2l0YXRpb25QYXJhbT4gfCBudWxsO1xufVxuXG5leHBvcnQgdHlwZSBUZXh0Q2l0YXRpb24gPSBDaXRhdGlvbkNoYXJMb2NhdGlvbiB8IENpdGF0aW9uUGFnZUxvY2F0aW9uIHwgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbjtcblxuZXhwb3J0IHR5cGUgVGV4dENpdGF0aW9uUGFyYW0gPVxuICB8IENpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW1cbiAgfCBDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtXG4gIHwgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRleHREZWx0YSB7XG4gIHRleHQ6IHN0cmluZztcblxuICB0eXBlOiAndGV4dF9kZWx0YSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbCB7XG4gIC8qKlxuICAgKiBbSlNPTiBzY2hlbWFdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnLykgZm9yIHRoaXMgdG9vbCdzIGlucHV0LlxuICAgKlxuICAgKiBUaGlzIGRlZmluZXMgdGhlIHNoYXBlIG9mIHRoZSBgaW5wdXRgIHRoYXQgeW91ciB0b29sIGFjY2VwdHMgYW5kIHRoYXQgdGhlIG1vZGVsXG4gICAqIHdpbGwgcHJvZHVjZS5cbiAgICovXG4gIGlucHV0X3NjaGVtYTogVG9vbC5JbnB1dFNjaGVtYTtcblxuICAvKipcbiAgICogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICpcbiAgICogVGhpcyBpcyBob3cgdGhlIHRvb2wgd2lsbCBiZSBjYWxsZWQgYnkgdGhlIG1vZGVsIGFuZCBpbiB0b29sX3VzZSBibG9ja3MuXG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG5cbiAgY2FjaGVfY29udHJvbD86IENhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG5cbiAgLyoqXG4gICAqIERlc2NyaXB0aW9uIG9mIHdoYXQgdGhpcyB0b29sIGRvZXMuXG4gICAqXG4gICAqIFRvb2wgZGVzY3JpcHRpb25zIHNob3VsZCBiZSBhcyBkZXRhaWxlZCBhcyBwb3NzaWJsZS4gVGhlIG1vcmUgaW5mb3JtYXRpb24gdGhhdFxuICAgKiB0aGUgbW9kZWwgaGFzIGFib3V0IHdoYXQgdGhlIHRvb2wgaXMgYW5kIGhvdyB0byB1c2UgaXQsIHRoZSBiZXR0ZXIgaXQgd2lsbFxuICAgKiBwZXJmb3JtLiBZb3UgY2FuIHVzZSBuYXR1cmFsIGxhbmd1YWdlIGRlc2NyaXB0aW9ucyB0byByZWluZm9yY2UgaW1wb3J0YW50XG4gICAqIGFzcGVjdHMgb2YgdGhlIHRvb2wgaW5wdXQgSlNPTiBzY2hlbWEuXG4gICAqL1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBUb29sIHtcbiAgLyoqXG4gICAqIFtKU09OIHNjaGVtYV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvKSBmb3IgdGhpcyB0b29sJ3MgaW5wdXQuXG4gICAqXG4gICAqIFRoaXMgZGVmaW5lcyB0aGUgc2hhcGUgb2YgdGhlIGBpbnB1dGAgdGhhdCB5b3VyIHRvb2wgYWNjZXB0cyBhbmQgdGhhdCB0aGUgbW9kZWxcbiAgICogd2lsbCBwcm9kdWNlLlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBJbnB1dFNjaGVtYSB7XG4gICAgdHlwZTogJ29iamVjdCc7XG5cbiAgICBwcm9wZXJ0aWVzPzogdW5rbm93biB8IG51bGw7XG4gICAgW2s6IHN0cmluZ106IHVua25vd247XG4gIH1cbn1cblxuLyoqXG4gKiBIb3cgdGhlIG1vZGVsIHNob3VsZCB1c2UgdGhlIHByb3ZpZGVkIHRvb2xzLiBUaGUgbW9kZWwgY2FuIHVzZSBhIHNwZWNpZmljIHRvb2wsXG4gKiBhbnkgYXZhaWxhYmxlIHRvb2wsIG9yIGRlY2lkZSBieSBpdHNlbGYuXG4gKi9cbmV4cG9ydCB0eXBlIFRvb2xDaG9pY2UgPSBUb29sQ2hvaWNlQXV0byB8IFRvb2xDaG9pY2VBbnkgfCBUb29sQ2hvaWNlVG9vbDtcblxuLyoqXG4gKiBUaGUgbW9kZWwgd2lsbCB1c2UgYW55IGF2YWlsYWJsZSB0b29scy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUb29sQ2hvaWNlQW55IHtcbiAgdHlwZTogJ2FueSc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZGlzYWJsZSBwYXJhbGxlbCB0b29sIHVzZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC4gSWYgc2V0IHRvIGB0cnVlYCwgdGhlIG1vZGVsIHdpbGwgb3V0cHV0IGV4YWN0bHkgb25lIHRvb2xcbiAgICogdXNlLlxuICAgKi9cbiAgZGlzYWJsZV9wYXJhbGxlbF90b29sX3VzZT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVGhlIG1vZGVsIHdpbGwgYXV0b21hdGljYWxseSBkZWNpZGUgd2hldGhlciB0byB1c2UgdG9vbHMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbENob2ljZUF1dG8ge1xuICB0eXBlOiAnYXV0byc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZGlzYWJsZSBwYXJhbGxlbCB0b29sIHVzZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC4gSWYgc2V0IHRvIGB0cnVlYCwgdGhlIG1vZGVsIHdpbGwgb3V0cHV0IGF0IG1vc3Qgb25lIHRvb2xcbiAgICogdXNlLlxuICAgKi9cbiAgZGlzYWJsZV9wYXJhbGxlbF90b29sX3VzZT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVGhlIG1vZGVsIHdpbGwgdXNlIHRoZSBzcGVjaWZpZWQgdG9vbCB3aXRoIGB0b29sX2Nob2ljZS5uYW1lYC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUb29sQ2hvaWNlVG9vbCB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0byB1c2UuXG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3Rvb2wnO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGRpc2FibGUgcGFyYWxsZWwgdG9vbCB1c2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGBmYWxzZWAuIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBtb2RlbCB3aWxsIG91dHB1dCBleGFjdGx5IG9uZSB0b29sXG4gICAqIHVzZS5cbiAgICovXG4gIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xSZXN1bHRCbG9ja1BhcmFtIHtcbiAgdG9vbF91c2VfaWQ6IHN0cmluZztcblxuICB0eXBlOiAndG9vbF9yZXN1bHQnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIGNvbnRlbnQ/OiBzdHJpbmcgfCBBcnJheTxUZXh0QmxvY2tQYXJhbSB8IEltYWdlQmxvY2tQYXJhbT47XG5cbiAgaXNfZXJyb3I/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xVc2VCbG9jayB7XG4gIGlkOiBzdHJpbmc7XG5cbiAgaW5wdXQ6IHVua25vd247XG5cbiAgbmFtZTogc3RyaW5nO1xuXG4gIHR5cGU6ICd0b29sX3VzZSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbFVzZUJsb2NrUGFyYW0ge1xuICBpZDogc3RyaW5nO1xuXG4gIGlucHV0OiB1bmtub3duO1xuXG4gIG5hbWU6IHN0cmluZztcblxuICB0eXBlOiAndG9vbF91c2UnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzYWdlIHtcbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHVzZWQgdG8gY3JlYXRlIHRoZSBjYWNoZSBlbnRyeS5cbiAgICovXG4gIGNhY2hlX2NyZWF0aW9uX2lucHV0X3Rva2VuczogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgcmVhZCBmcm9tIHRoZSBjYWNoZS5cbiAgICovXG4gIGNhY2hlX3JlYWRfaW5wdXRfdG9rZW5zOiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyB3aGljaCB3ZXJlIHVzZWQuXG4gICAqL1xuICBpbnB1dF90b2tlbnM6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBvdXRwdXQgdG9rZW5zIHdoaWNoIHdlcmUgdXNlZC5cbiAgICovXG4gIG91dHB1dF90b2tlbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtcyA9IE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgfCBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnMgdG8gZ2VuZXJhdGUgYmVmb3JlIHN0b3BwaW5nLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgb3VyIG1vZGVscyBtYXkgc3RvcCBfYmVmb3JlXyByZWFjaGluZyB0aGlzIG1heGltdW0uIFRoaXMgcGFyYW1ldGVyXG4gICAqIG9ubHkgc3BlY2lmaWVzIHRoZSBhYnNvbHV0ZSBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnMgdG8gZ2VuZXJhdGUuXG4gICAqXG4gICAqIERpZmZlcmVudCBtb2RlbHMgaGF2ZSBkaWZmZXJlbnQgbWF4aW11bSB2YWx1ZXMgZm9yIHRoaXMgcGFyYW1ldGVyLiBTZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBkZXRhaWxzLlxuICAgKi9cbiAgbWF4X3Rva2VuczogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBJbnB1dCBtZXNzYWdlcy5cbiAgICpcbiAgICogT3VyIG1vZGVscyBhcmUgdHJhaW5lZCB0byBvcGVyYXRlIG9uIGFsdGVybmF0aW5nIGB1c2VyYCBhbmQgYGFzc2lzdGFudGBcbiAgICogY29udmVyc2F0aW9uYWwgdHVybnMuIFdoZW4gY3JlYXRpbmcgYSBuZXcgYE1lc3NhZ2VgLCB5b3Ugc3BlY2lmeSB0aGUgcHJpb3JcbiAgICogY29udmVyc2F0aW9uYWwgdHVybnMgd2l0aCB0aGUgYG1lc3NhZ2VzYCBwYXJhbWV0ZXIsIGFuZCB0aGUgbW9kZWwgdGhlbiBnZW5lcmF0ZXNcbiAgICogdGhlIG5leHQgYE1lc3NhZ2VgIGluIHRoZSBjb252ZXJzYXRpb24uIENvbnNlY3V0aXZlIGB1c2VyYCBvciBgYXNzaXN0YW50YCB0dXJuc1xuICAgKiBpbiB5b3VyIHJlcXVlc3Qgd2lsbCBiZSBjb21iaW5lZCBpbnRvIGEgc2luZ2xlIHR1cm4uXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBtdXN0IGJlIGFuIG9iamVjdCB3aXRoIGEgYHJvbGVgIGFuZCBgY29udGVudGAuIFlvdSBjYW5cbiAgICogc3BlY2lmeSBhIHNpbmdsZSBgdXNlcmAtcm9sZSBtZXNzYWdlLCBvciB5b3UgY2FuIGluY2x1ZGUgbXVsdGlwbGUgYHVzZXJgIGFuZFxuICAgKiBgYXNzaXN0YW50YCBtZXNzYWdlcy5cbiAgICpcbiAgICogSWYgdGhlIGZpbmFsIG1lc3NhZ2UgdXNlcyB0aGUgYGFzc2lzdGFudGAgcm9sZSwgdGhlIHJlc3BvbnNlIGNvbnRlbnQgd2lsbFxuICAgKiBjb250aW51ZSBpbW1lZGlhdGVseSBmcm9tIHRoZSBjb250ZW50IGluIHRoYXQgbWVzc2FnZS4gVGhpcyBjYW4gYmUgdXNlZCB0b1xuICAgKiBjb25zdHJhaW4gcGFydCBvZiB0aGUgbW9kZWwncyByZXNwb25zZS5cbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIGEgc2luZ2xlIGB1c2VyYCBtZXNzYWdlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1dXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggbXVsdGlwbGUgY29udmVyc2F0aW9uYWwgdHVybnM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbyB0aGVyZS5cIiB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIkhpLCBJJ20gQ2xhdWRlLiBIb3cgY2FuIEkgaGVscCB5b3U/XCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiQ2FuIHlvdSBleHBsYWluIExMTXMgaW4gcGxhaW4gRW5nbGlzaD9cIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHBhcnRpYWxseS1maWxsZWQgcmVzcG9uc2UgZnJvbSBDbGF1ZGU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIldoYXQncyB0aGUgR3JlZWsgbmFtZSBmb3IgU3VuPyAoQSkgU29sIChCKSBIZWxpb3MgKEMpIFN1blwiXG4gICAqICAgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJUaGUgYmVzdCBhbnN3ZXIgaXMgKFwiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogRWFjaCBpbnB1dCBtZXNzYWdlIGBjb250ZW50YCBtYXkgYmUgZWl0aGVyIGEgc2luZ2xlIGBzdHJpbmdgIG9yIGFuIGFycmF5IG9mXG4gICAqIGNvbnRlbnQgYmxvY2tzLCB3aGVyZSBlYWNoIGJsb2NrIGhhcyBhIHNwZWNpZmljIGB0eXBlYC4gVXNpbmcgYSBgc3RyaW5nYCBmb3JcbiAgICogYGNvbnRlbnRgIGlzIHNob3J0aGFuZCBmb3IgYW4gYXJyYXkgb2Ygb25lIGNvbnRlbnQgYmxvY2sgb2YgdHlwZSBgXCJ0ZXh0XCJgLiBUaGVcbiAgICogZm9sbG93aW5nIGlucHV0IG1lc3NhZ2VzIGFyZSBlcXVpdmFsZW50OlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfVxuICAgKiBgYGBcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1dIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFN0YXJ0aW5nIHdpdGggQ2xhdWRlIDMgbW9kZWxzLCB5b3UgY2FuIGFsc28gc2VuZCBpbWFnZSBjb250ZW50IGJsb2NrczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7XG4gICAqICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgIFwiY29udGVudFwiOiBbXG4gICAqICAgICB7XG4gICAqICAgICAgIFwidHlwZVwiOiBcImltYWdlXCIsXG4gICAqICAgICAgIFwic291cmNlXCI6IHtcbiAgICogICAgICAgICBcInR5cGVcIjogXCJiYXNlNjRcIixcbiAgICogICAgICAgICBcIm1lZGlhX3R5cGVcIjogXCJpbWFnZS9qcGVnXCIsXG4gICAqICAgICAgICAgXCJkYXRhXCI6IFwiLzlqLzRBQVFTa1pKUmcuLi5cIlxuICAgKiAgICAgICB9XG4gICAqICAgICB9LFxuICAgKiAgICAgeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIldoYXQgaXMgaW4gdGhpcyBpbWFnZT9cIiB9XG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBXZSBjdXJyZW50bHkgc3VwcG9ydCB0aGUgYGJhc2U2NGAgc291cmNlIHR5cGUgZm9yIGltYWdlcywgYW5kIHRoZSBgaW1hZ2UvanBlZ2AsXG4gICAqIGBpbWFnZS9wbmdgLCBgaW1hZ2UvZ2lmYCwgYW5kIGBpbWFnZS93ZWJwYCBtZWRpYSB0eXBlcy5cbiAgICpcbiAgICogU2VlIFtleGFtcGxlc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLWV4YW1wbGVzI3Zpc2lvbikgZm9yXG4gICAqIG1vcmUgaW5wdXQgZXhhbXBsZXMuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBpZiB5b3Ugd2FudCB0byBpbmNsdWRlIGFcbiAgICogW3N5c3RlbSBwcm9tcHRdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3Mvc3lzdGVtLXByb21wdHMpLCB5b3UgY2FuIHVzZVxuICAgKiB0aGUgdG9wLWxldmVsIGBzeXN0ZW1gIHBhcmFtZXRlciBcdTIwMTQgdGhlcmUgaXMgbm8gYFwic3lzdGVtXCJgIHJvbGUgZm9yIGlucHV0XG4gICAqIG1lc3NhZ2VzIGluIHRoZSBNZXNzYWdlcyBBUEkuXG4gICAqL1xuICBtZXNzYWdlczogQXJyYXk8TWVzc2FnZVBhcmFtPjtcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gICAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gICAqL1xuICBtb2RlbDogTW9kZWw7XG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBkZXNjcmliaW5nIG1ldGFkYXRhIGFib3V0IHRoZSByZXF1ZXN0LlxuICAgKi9cbiAgbWV0YWRhdGE/OiBNZXRhZGF0YTtcblxuICAvKipcbiAgICogQ3VzdG9tIHRleHQgc2VxdWVuY2VzIHRoYXQgd2lsbCBjYXVzZSB0aGUgbW9kZWwgdG8gc3RvcCBnZW5lcmF0aW5nLlxuICAgKlxuICAgKiBPdXIgbW9kZWxzIHdpbGwgbm9ybWFsbHkgc3RvcCB3aGVuIHRoZXkgaGF2ZSBuYXR1cmFsbHkgY29tcGxldGVkIHRoZWlyIHR1cm4sXG4gICAqIHdoaWNoIHdpbGwgcmVzdWx0IGluIGEgcmVzcG9uc2UgYHN0b3BfcmVhc29uYCBvZiBgXCJlbmRfdHVyblwiYC5cbiAgICpcbiAgICogSWYgeW91IHdhbnQgdGhlIG1vZGVsIHRvIHN0b3AgZ2VuZXJhdGluZyB3aGVuIGl0IGVuY291bnRlcnMgY3VzdG9tIHN0cmluZ3Mgb2ZcbiAgICogdGV4dCwgeW91IGNhbiB1c2UgdGhlIGBzdG9wX3NlcXVlbmNlc2AgcGFyYW1ldGVyLiBJZiB0aGUgbW9kZWwgZW5jb3VudGVycyBvbmUgb2ZcbiAgICogdGhlIGN1c3RvbSBzZXF1ZW5jZXMsIHRoZSByZXNwb25zZSBgc3RvcF9yZWFzb25gIHZhbHVlIHdpbGwgYmUgYFwic3RvcF9zZXF1ZW5jZVwiYFxuICAgKiBhbmQgdGhlIHJlc3BvbnNlIGBzdG9wX3NlcXVlbmNlYCB2YWx1ZSB3aWxsIGNvbnRhaW4gdGhlIG1hdGNoZWQgc3RvcCBzZXF1ZW5jZS5cbiAgICovXG4gIHN0b3Bfc2VxdWVuY2VzPzogQXJyYXk8c3RyaW5nPjtcblxuICAvKipcbiAgICogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnQgZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLXN0cmVhbWluZykgZm9yXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW0/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBTeXN0ZW0gcHJvbXB0LlxuICAgKlxuICAgKiBBIHN5c3RlbSBwcm9tcHQgaXMgYSB3YXkgb2YgcHJvdmlkaW5nIGNvbnRleHQgYW5kIGluc3RydWN0aW9ucyB0byBDbGF1ZGUsIHN1Y2hcbiAgICogYXMgc3BlY2lmeWluZyBhIHBhcnRpY3VsYXIgZ29hbCBvciByb2xlLiBTZWUgb3VyXG4gICAqIFtndWlkZSB0byBzeXN0ZW0gcHJvbXB0c10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9zeXN0ZW0tcHJvbXB0cykuXG4gICAqL1xuICBzeXN0ZW0/OiBzdHJpbmcgfCBBcnJheTxUZXh0QmxvY2tQYXJhbT47XG5cbiAgLyoqXG4gICAqIEFtb3VudCBvZiByYW5kb21uZXNzIGluamVjdGVkIGludG8gdGhlIHJlc3BvbnNlLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgMS4wYC4gUmFuZ2VzIGZyb20gYDAuMGAgdG8gYDEuMGAuIFVzZSBgdGVtcGVyYXR1cmVgIGNsb3NlciB0byBgMC4wYFxuICAgKiBmb3IgYW5hbHl0aWNhbCAvIG11bHRpcGxlIGNob2ljZSwgYW5kIGNsb3NlciB0byBgMS4wYCBmb3IgY3JlYXRpdmUgYW5kXG4gICAqIGdlbmVyYXRpdmUgdGFza3MuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBldmVuIHdpdGggYHRlbXBlcmF0dXJlYCBvZiBgMC4wYCwgdGhlIHJlc3VsdHMgd2lsbCBub3QgYmUgZnVsbHlcbiAgICogZGV0ZXJtaW5pc3RpYy5cbiAgICovXG4gIHRlbXBlcmF0dXJlPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBIb3cgdGhlIG1vZGVsIHNob3VsZCB1c2UgdGhlIHByb3ZpZGVkIHRvb2xzLiBUaGUgbW9kZWwgY2FuIHVzZSBhIHNwZWNpZmljIHRvb2wsXG4gICAqIGFueSBhdmFpbGFibGUgdG9vbCwgb3IgZGVjaWRlIGJ5IGl0c2VsZi5cbiAgICovXG4gIHRvb2xfY2hvaWNlPzogVG9vbENob2ljZTtcblxuICAvKipcbiAgICogRGVmaW5pdGlvbnMgb2YgdG9vbHMgdGhhdCB0aGUgbW9kZWwgbWF5IHVzZS5cbiAgICpcbiAgICogSWYgeW91IGluY2x1ZGUgYHRvb2xzYCBpbiB5b3VyIEFQSSByZXF1ZXN0LCB0aGUgbW9kZWwgbWF5IHJldHVybiBgdG9vbF91c2VgXG4gICAqIGNvbnRlbnQgYmxvY2tzIHRoYXQgcmVwcmVzZW50IHRoZSBtb2RlbCdzIHVzZSBvZiB0aG9zZSB0b29scy4gWW91IGNhbiB0aGVuIHJ1blxuICAgKiB0aG9zZSB0b29scyB1c2luZyB0aGUgdG9vbCBpbnB1dCBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGFuZCB0aGVuIG9wdGlvbmFsbHlcbiAgICogcmV0dXJuIHJlc3VsdHMgYmFjayB0byB0aGUgbW9kZWwgdXNpbmcgYHRvb2xfcmVzdWx0YCBjb250ZW50IGJsb2Nrcy5cbiAgICpcbiAgICogRWFjaCB0b29sIGRlZmluaXRpb24gaW5jbHVkZXM6XG4gICAqXG4gICAqIC0gYG5hbWVgOiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKiAtIGBkZXNjcmlwdGlvbmA6IE9wdGlvbmFsLCBidXQgc3Ryb25nbHktcmVjb21tZW5kZWQgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wuXG4gICAqIC0gYGlucHV0X3NjaGVtYWA6IFtKU09OIHNjaGVtYV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvKSBmb3IgdGhlIHRvb2wgYGlucHV0YFxuICAgKiAgIHNoYXBlIHRoYXQgdGhlIG1vZGVsIHdpbGwgcHJvZHVjZSBpbiBgdG9vbF91c2VgIG91dHB1dCBjb250ZW50IGJsb2Nrcy5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGlmIHlvdSBkZWZpbmVkIGB0b29sc2AgYXM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwibmFtZVwiOiBcImdldF9zdG9ja19wcmljZVwiLFxuICAgKiAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkdldCB0aGUgY3VycmVudCBzdG9jayBwcmljZSBmb3IgYSBnaXZlbiB0aWNrZXIgc3ltYm9sLlwiLFxuICAgKiAgICAgXCJpbnB1dF9zY2hlbWFcIjoge1xuICAgKiAgICAgICBcInR5cGVcIjogXCJvYmplY3RcIixcbiAgICogICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcbiAgICogICAgICAgICBcInRpY2tlclwiOiB7XG4gICAqICAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcbiAgICogICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgc3RvY2sgdGlja2VyIHN5bWJvbCwgZS5nLiBBQVBMIGZvciBBcHBsZSBJbmMuXCJcbiAgICogICAgICAgICB9XG4gICAqICAgICAgIH0sXG4gICAqICAgICAgIFwicmVxdWlyZWRcIjogW1widGlja2VyXCJdXG4gICAqICAgICB9XG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBBbmQgdGhlbiBhc2tlZCB0aGUgbW9kZWwgXCJXaGF0J3MgdGhlIFMmUCA1MDAgYXQgdG9kYXk/XCIsIHRoZSBtb2RlbCBtaWdodCBwcm9kdWNlXG4gICAqIGB0b29sX3VzZWAgY29udGVudCBibG9ja3MgaW4gdGhlIHJlc3BvbnNlIGxpa2UgdGhpczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJ0eXBlXCI6IFwidG9vbF91c2VcIixcbiAgICogICAgIFwiaWRcIjogXCJ0b29sdV8wMUQ3RkxyZmg0R1lxN3lUMVVMRmV5TVZcIixcbiAgICogICAgIFwibmFtZVwiOiBcImdldF9zdG9ja19wcmljZVwiLFxuICAgKiAgICAgXCJpbnB1dFwiOiB7IFwidGlja2VyXCI6IFwiXkdTUENcIiB9XG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBZb3UgbWlnaHQgdGhlbiBydW4geW91ciBgZ2V0X3N0b2NrX3ByaWNlYCB0b29sIHdpdGggYHtcInRpY2tlclwiOiBcIl5HU1BDXCJ9YCBhcyBhblxuICAgKiBpbnB1dCwgYW5kIHJldHVybiB0aGUgZm9sbG93aW5nIGJhY2sgdG8gdGhlIG1vZGVsIGluIGEgc3Vic2VxdWVudCBgdXNlcmBcbiAgICogbWVzc2FnZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJ0eXBlXCI6IFwidG9vbF9yZXN1bHRcIixcbiAgICogICAgIFwidG9vbF91c2VfaWRcIjogXCJ0b29sdV8wMUQ3RkxyZmg0R1lxN3lUMVVMRmV5TVZcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIjI1OS43NSBVU0RcIlxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogVG9vbHMgY2FuIGJlIHVzZWQgZm9yIHdvcmtmbG93cyB0aGF0IGluY2x1ZGUgcnVubmluZyBjbGllbnQtc2lkZSB0b29scyBhbmRcbiAgICogZnVuY3Rpb25zLCBvciBtb3JlIGdlbmVyYWxseSB3aGVuZXZlciB5b3Ugd2FudCB0aGUgbW9kZWwgdG8gcHJvZHVjZSBhIHBhcnRpY3VsYXJcbiAgICogSlNPTiBzdHJ1Y3R1cmUgb2Ygb3V0cHV0LlxuICAgKlxuICAgKiBTZWUgb3VyIFtndWlkZV0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy90b29sLXVzZSkgZm9yIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIHRvb2xzPzogQXJyYXk8VG9vbD47XG5cbiAgLyoqXG4gICAqIE9ubHkgc2FtcGxlIGZyb20gdGhlIHRvcCBLIG9wdGlvbnMgZm9yIGVhY2ggc3Vic2VxdWVudCB0b2tlbi5cbiAgICpcbiAgICogVXNlZCB0byByZW1vdmUgXCJsb25nIHRhaWxcIiBsb3cgcHJvYmFiaWxpdHkgcmVzcG9uc2VzLlxuICAgKiBbTGVhcm4gbW9yZSB0ZWNobmljYWwgZGV0YWlscyBoZXJlXShodHRwczovL3Rvd2FyZHNkYXRhc2NpZW5jZS5jb20vaG93LXRvLXNhbXBsZS1mcm9tLWxhbmd1YWdlLW1vZGVscy02ODJiY2ViOTcyNzcpLlxuICAgKlxuICAgKiBSZWNvbW1lbmRlZCBmb3IgYWR2YW5jZWQgdXNlIGNhc2VzIG9ubHkuIFlvdSB1c3VhbGx5IG9ubHkgbmVlZCB0byB1c2VcbiAgICogYHRlbXBlcmF0dXJlYC5cbiAgICovXG4gIHRvcF9rPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBVc2UgbnVjbGV1cyBzYW1wbGluZy5cbiAgICpcbiAgICogSW4gbnVjbGV1cyBzYW1wbGluZywgd2UgY29tcHV0ZSB0aGUgY3VtdWxhdGl2ZSBkaXN0cmlidXRpb24gb3ZlciBhbGwgdGhlIG9wdGlvbnNcbiAgICogZm9yIGVhY2ggc3Vic2VxdWVudCB0b2tlbiBpbiBkZWNyZWFzaW5nIHByb2JhYmlsaXR5IG9yZGVyIGFuZCBjdXQgaXQgb2ZmIG9uY2UgaXRcbiAgICogcmVhY2hlcyBhIHBhcnRpY3VsYXIgcHJvYmFiaWxpdHkgc3BlY2lmaWVkIGJ5IGB0b3BfcGAuIFlvdSBzaG91bGQgZWl0aGVyIGFsdGVyXG4gICAqIGB0ZW1wZXJhdHVyZWAgb3IgYHRvcF9wYCwgYnV0IG5vdCBib3RoLlxuICAgKlxuICAgKiBSZWNvbW1lbmRlZCBmb3IgYWR2YW5jZWQgdXNlIGNhc2VzIG9ubHkuIFlvdSB1c3VhbGx5IG9ubHkgbmVlZCB0byB1c2VcbiAgICogYHRlbXBlcmF0dXJlYC5cbiAgICovXG4gIHRvcF9wPzogbnVtYmVyO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGBBbnRocm9waWMuTWVzc2FnZXMuVG9vbENob2ljZUF1dG9gIGluc3RlYWRcbiAgICovXG4gIGV4cG9ydCB0eXBlIE1ldGFkYXRhID0gTWVzc2FnZXNBUEkuTWV0YWRhdGE7XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBgQW50aHJvcGljLk1lc3NhZ2VzLlRvb2xDaG9pY2VBdXRvYCBpbnN0ZWFkXG4gICAqL1xuICBleHBvcnQgdHlwZSBUb29sQ2hvaWNlQXV0byA9IE1lc3NhZ2VzQVBJLlRvb2xDaG9pY2VBdXRvO1xuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCB1c2UgYEFudGhyb3BpYy5NZXNzYWdlcy5Ub29sQ2hvaWNlQW55YCBpbnN0ZWFkXG4gICAqL1xuICBleHBvcnQgdHlwZSBUb29sQ2hvaWNlQW55ID0gTWVzc2FnZXNBUEkuVG9vbENob2ljZUFueTtcblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGBBbnRocm9waWMuTWVzc2FnZXMuVG9vbENob2ljZVRvb2xgIGluc3RlYWRcbiAgICovXG4gIGV4cG9ydCB0eXBlIFRvb2xDaG9pY2VUb29sID0gTWVzc2FnZXNBUEkuVG9vbENob2ljZVRvb2w7XG5cbiAgZXhwb3J0IHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IE1lc3NhZ2VzQVBJLk1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBNZXNzYWdlc0FQSS5NZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgZXh0ZW5kcyBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudCBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtc3RyZWFtaW5nKSBmb3JcbiAgICogZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbT86IGZhbHNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgZXh0ZW5kcyBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudCBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtc3RyZWFtaW5nKSBmb3JcbiAgICogZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbTogdHJ1ZTtcbn1cblxuZXhwb3J0IHR5cGUgTWVzc2FnZVN0cmVhbVBhcmFtcyA9IE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyB7XG4gIC8qKlxuICAgKiBJbnB1dCBtZXNzYWdlcy5cbiAgICpcbiAgICogT3VyIG1vZGVscyBhcmUgdHJhaW5lZCB0byBvcGVyYXRlIG9uIGFsdGVybmF0aW5nIGB1c2VyYCBhbmQgYGFzc2lzdGFudGBcbiAgICogY29udmVyc2F0aW9uYWwgdHVybnMuIFdoZW4gY3JlYXRpbmcgYSBuZXcgYE1lc3NhZ2VgLCB5b3Ugc3BlY2lmeSB0aGUgcHJpb3JcbiAgICogY29udmVyc2F0aW9uYWwgdHVybnMgd2l0aCB0aGUgYG1lc3NhZ2VzYCBwYXJhbWV0ZXIsIGFuZCB0aGUgbW9kZWwgdGhlbiBnZW5lcmF0ZXNcbiAgICogdGhlIG5leHQgYE1lc3NhZ2VgIGluIHRoZSBjb252ZXJzYXRpb24uIENvbnNlY3V0aXZlIGB1c2VyYCBvciBgYXNzaXN0YW50YCB0dXJuc1xuICAgKiBpbiB5b3VyIHJlcXVlc3Qgd2lsbCBiZSBjb21iaW5lZCBpbnRvIGEgc2luZ2xlIHR1cm4uXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBtdXN0IGJlIGFuIG9iamVjdCB3aXRoIGEgYHJvbGVgIGFuZCBgY29udGVudGAuIFlvdSBjYW5cbiAgICogc3BlY2lmeSBhIHNpbmdsZSBgdXNlcmAtcm9sZSBtZXNzYWdlLCBvciB5b3UgY2FuIGluY2x1ZGUgbXVsdGlwbGUgYHVzZXJgIGFuZFxuICAgKiBgYXNzaXN0YW50YCBtZXNzYWdlcy5cbiAgICpcbiAgICogSWYgdGhlIGZpbmFsIG1lc3NhZ2UgdXNlcyB0aGUgYGFzc2lzdGFudGAgcm9sZSwgdGhlIHJlc3BvbnNlIGNvbnRlbnQgd2lsbFxuICAgKiBjb250aW51ZSBpbW1lZGlhdGVseSBmcm9tIHRoZSBjb250ZW50IGluIHRoYXQgbWVzc2FnZS4gVGhpcyBjYW4gYmUgdXNlZCB0b1xuICAgKiBjb25zdHJhaW4gcGFydCBvZiB0aGUgbW9kZWwncyByZXNwb25zZS5cbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIGEgc2luZ2xlIGB1c2VyYCBtZXNzYWdlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1dXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggbXVsdGlwbGUgY29udmVyc2F0aW9uYWwgdHVybnM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbyB0aGVyZS5cIiB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIkhpLCBJJ20gQ2xhdWRlLiBIb3cgY2FuIEkgaGVscCB5b3U/XCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiQ2FuIHlvdSBleHBsYWluIExMTXMgaW4gcGxhaW4gRW5nbGlzaD9cIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHBhcnRpYWxseS1maWxsZWQgcmVzcG9uc2UgZnJvbSBDbGF1ZGU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIldoYXQncyB0aGUgR3JlZWsgbmFtZSBmb3IgU3VuPyAoQSkgU29sIChCKSBIZWxpb3MgKEMpIFN1blwiXG4gICAqICAgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJUaGUgYmVzdCBhbnN3ZXIgaXMgKFwiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogRWFjaCBpbnB1dCBtZXNzYWdlIGBjb250ZW50YCBtYXkgYmUgZWl0aGVyIGEgc2luZ2xlIGBzdHJpbmdgIG9yIGFuIGFycmF5IG9mXG4gICAqIGNvbnRlbnQgYmxvY2tzLCB3aGVyZSBlYWNoIGJsb2NrIGhhcyBhIHNwZWNpZmljIGB0eXBlYC4gVXNpbmcgYSBgc3RyaW5nYCBmb3JcbiAgICogYGNvbnRlbnRgIGlzIHNob3J0aGFuZCBmb3IgYW4gYXJyYXkgb2Ygb25lIGNvbnRlbnQgYmxvY2sgb2YgdHlwZSBgXCJ0ZXh0XCJgLiBUaGVcbiAgICogZm9sbG93aW5nIGlucHV0IG1lc3NhZ2VzIGFyZSBlcXVpdmFsZW50OlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfVxuICAgKiBgYGBcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1dIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFN0YXJ0aW5nIHdpdGggQ2xhdWRlIDMgbW9kZWxzLCB5b3UgY2FuIGFsc28gc2VuZCBpbWFnZSBjb250ZW50IGJsb2NrczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7XG4gICAqICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgIFwiY29udGVudFwiOiBbXG4gICAqICAgICB7XG4gICAqICAgICAgIFwidHlwZVwiOiBcImltYWdlXCIsXG4gICAqICAgICAgIFwic291cmNlXCI6IHtcbiAgICogICAgICAgICBcInR5cGVcIjogXCJiYXNlNjRcIixcbiAgICogICAgICAgICBcIm1lZGlhX3R5cGVcIjogXCJpbWFnZS9qcGVnXCIsXG4gICAqICAgICAgICAgXCJkYXRhXCI6IFwiLzlqLzRBQVFTa1pKUmcuLi5cIlxuICAgKiAgICAgICB9XG4gICAqICAgICB9LFxuICAgKiAgICAgeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIldoYXQgaXMgaW4gdGhpcyBpbWFnZT9cIiB9XG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBXZSBjdXJyZW50bHkgc3VwcG9ydCB0aGUgYGJhc2U2NGAgc291cmNlIHR5cGUgZm9yIGltYWdlcywgYW5kIHRoZSBgaW1hZ2UvanBlZ2AsXG4gICAqIGBpbWFnZS9wbmdgLCBgaW1hZ2UvZ2lmYCwgYW5kIGBpbWFnZS93ZWJwYCBtZWRpYSB0eXBlcy5cbiAgICpcbiAgICogU2VlIFtleGFtcGxlc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLWV4YW1wbGVzI3Zpc2lvbikgZm9yXG4gICAqIG1vcmUgaW5wdXQgZXhhbXBsZXMuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBpZiB5b3Ugd2FudCB0byBpbmNsdWRlIGFcbiAgICogW3N5c3RlbSBwcm9tcHRdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3Mvc3lzdGVtLXByb21wdHMpLCB5b3UgY2FuIHVzZVxuICAgKiB0aGUgdG9wLWxldmVsIGBzeXN0ZW1gIHBhcmFtZXRlciBcdTIwMTQgdGhlcmUgaXMgbm8gYFwic3lzdGVtXCJgIHJvbGUgZm9yIGlucHV0XG4gICAqIG1lc3NhZ2VzIGluIHRoZSBNZXNzYWdlcyBBUEkuXG4gICAqL1xuICBtZXNzYWdlczogQXJyYXk8TWVzc2FnZVBhcmFtPjtcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gICAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gICAqL1xuICBtb2RlbDogTW9kZWw7XG5cbiAgLyoqXG4gICAqIFN5c3RlbSBwcm9tcHQuXG4gICAqXG4gICAqIEEgc3lzdGVtIHByb21wdCBpcyBhIHdheSBvZiBwcm92aWRpbmcgY29udGV4dCBhbmQgaW5zdHJ1Y3Rpb25zIHRvIENsYXVkZSwgc3VjaFxuICAgKiBhcyBzcGVjaWZ5aW5nIGEgcGFydGljdWxhciBnb2FsIG9yIHJvbGUuIFNlZSBvdXJcbiAgICogW2d1aWRlIHRvIHN5c3RlbSBwcm9tcHRzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3N5c3RlbS1wcm9tcHRzKS5cbiAgICovXG4gIHN5c3RlbT86IHN0cmluZyB8IEFycmF5PFRleHRCbG9ja1BhcmFtPjtcblxuICAvKipcbiAgICogSG93IHRoZSBtb2RlbCBzaG91bGQgdXNlIHRoZSBwcm92aWRlZCB0b29scy4gVGhlIG1vZGVsIGNhbiB1c2UgYSBzcGVjaWZpYyB0b29sLFxuICAgKiBhbnkgYXZhaWxhYmxlIHRvb2wsIG9yIGRlY2lkZSBieSBpdHNlbGYuXG4gICAqL1xuICB0b29sX2Nob2ljZT86IFRvb2xDaG9pY2U7XG5cbiAgLyoqXG4gICAqIERlZmluaXRpb25zIG9mIHRvb2xzIHRoYXQgdGhlIG1vZGVsIG1heSB1c2UuXG4gICAqXG4gICAqIElmIHlvdSBpbmNsdWRlIGB0b29sc2AgaW4geW91ciBBUEkgcmVxdWVzdCwgdGhlIG1vZGVsIG1heSByZXR1cm4gYHRvb2xfdXNlYFxuICAgKiBjb250ZW50IGJsb2NrcyB0aGF0IHJlcHJlc2VudCB0aGUgbW9kZWwncyB1c2Ugb2YgdGhvc2UgdG9vbHMuIFlvdSBjYW4gdGhlbiBydW5cbiAgICogdGhvc2UgdG9vbHMgdXNpbmcgdGhlIHRvb2wgaW5wdXQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBhbmQgdGhlbiBvcHRpb25hbGx5XG4gICAqIHJldHVybiByZXN1bHRzIGJhY2sgdG8gdGhlIG1vZGVsIHVzaW5nIGB0b29sX3Jlc3VsdGAgY29udGVudCBibG9ja3MuXG4gICAqXG4gICAqIEVhY2ggdG9vbCBkZWZpbml0aW9uIGluY2x1ZGVzOlxuICAgKlxuICAgKiAtIGBuYW1lYDogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICogLSBgZGVzY3JpcHRpb25gOiBPcHRpb25hbCwgYnV0IHN0cm9uZ2x5LXJlY29tbWVuZGVkIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sLlxuICAgKiAtIGBpbnB1dF9zY2hlbWFgOiBbSlNPTiBzY2hlbWFdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnLykgZm9yIHRoZSB0b29sIGBpbnB1dGBcbiAgICogICBzaGFwZSB0aGF0IHRoZSBtb2RlbCB3aWxsIHByb2R1Y2UgaW4gYHRvb2xfdXNlYCBvdXRwdXQgY29udGVudCBibG9ja3MuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBpZiB5b3UgZGVmaW5lZCBgdG9vbHNgIGFzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcIm5hbWVcIjogXCJnZXRfc3RvY2tfcHJpY2VcIixcbiAgICogICAgIFwiZGVzY3JpcHRpb25cIjogXCJHZXQgdGhlIGN1cnJlbnQgc3RvY2sgcHJpY2UgZm9yIGEgZ2l2ZW4gdGlja2VyIHN5bWJvbC5cIixcbiAgICogICAgIFwiaW5wdXRfc2NoZW1hXCI6IHtcbiAgICogICAgICAgXCJ0eXBlXCI6IFwib2JqZWN0XCIsXG4gICAqICAgICAgIFwicHJvcGVydGllc1wiOiB7XG4gICAqICAgICAgICAgXCJ0aWNrZXJcIjoge1xuICAgKiAgICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXG4gICAqICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIHN0b2NrIHRpY2tlciBzeW1ib2wsIGUuZy4gQUFQTCBmb3IgQXBwbGUgSW5jLlwiXG4gICAqICAgICAgICAgfVxuICAgKiAgICAgICB9LFxuICAgKiAgICAgICBcInJlcXVpcmVkXCI6IFtcInRpY2tlclwiXVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogQW5kIHRoZW4gYXNrZWQgdGhlIG1vZGVsIFwiV2hhdCdzIHRoZSBTJlAgNTAwIGF0IHRvZGF5P1wiLCB0aGUgbW9kZWwgbWlnaHQgcHJvZHVjZVxuICAgKiBgdG9vbF91c2VgIGNvbnRlbnQgYmxvY2tzIGluIHRoZSByZXNwb25zZSBsaWtlIHRoaXM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwidHlwZVwiOiBcInRvb2xfdXNlXCIsXG4gICAqICAgICBcImlkXCI6IFwidG9vbHVfMDFEN0ZMcmZoNEdZcTd5VDFVTEZleU1WXCIsXG4gICAqICAgICBcIm5hbWVcIjogXCJnZXRfc3RvY2tfcHJpY2VcIixcbiAgICogICAgIFwiaW5wdXRcIjogeyBcInRpY2tlclwiOiBcIl5HU1BDXCIgfVxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogWW91IG1pZ2h0IHRoZW4gcnVuIHlvdXIgYGdldF9zdG9ja19wcmljZWAgdG9vbCB3aXRoIGB7XCJ0aWNrZXJcIjogXCJeR1NQQ1wifWAgYXMgYW5cbiAgICogaW5wdXQsIGFuZCByZXR1cm4gdGhlIGZvbGxvd2luZyBiYWNrIHRvIHRoZSBtb2RlbCBpbiBhIHN1YnNlcXVlbnQgYHVzZXJgXG4gICAqIG1lc3NhZ2U6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwidHlwZVwiOiBcInRvb2xfcmVzdWx0XCIsXG4gICAqICAgICBcInRvb2xfdXNlX2lkXCI6IFwidG9vbHVfMDFEN0ZMcmZoNEdZcTd5VDFVTEZleU1WXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCIyNTkuNzUgVVNEXCJcbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFRvb2xzIGNhbiBiZSB1c2VkIGZvciB3b3JrZmxvd3MgdGhhdCBpbmNsdWRlIHJ1bm5pbmcgY2xpZW50LXNpZGUgdG9vbHMgYW5kXG4gICAqIGZ1bmN0aW9ucywgb3IgbW9yZSBnZW5lcmFsbHkgd2hlbmV2ZXIgeW91IHdhbnQgdGhlIG1vZGVsIHRvIHByb2R1Y2UgYSBwYXJ0aWN1bGFyXG4gICAqIEpTT04gc3RydWN0dXJlIG9mIG91dHB1dC5cbiAgICpcbiAgICogU2VlIG91ciBbZ3VpZGVdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvdG9vbC11c2UpIGZvciBtb3JlIGRldGFpbHMuXG4gICAqL1xuICB0b29scz86IEFycmF5PFRvb2w+O1xufVxuXG5NZXNzYWdlcy5CYXRjaGVzID0gQmF0Y2hlcztcbk1lc3NhZ2VzLk1lc3NhZ2VCYXRjaGVzUGFnZSA9IE1lc3NhZ2VCYXRjaGVzUGFnZTtcblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIE1lc3NhZ2VzIHtcbiAgZXhwb3J0IHtcbiAgICB0eXBlIEJhc2U2NFBERlNvdXJjZSBhcyBCYXNlNjRQREZTb3VyY2UsXG4gICAgdHlwZSBDYWNoZUNvbnRyb2xFcGhlbWVyYWwgYXMgQ2FjaGVDb250cm9sRXBoZW1lcmFsLFxuICAgIHR5cGUgQ2l0YXRpb25DaGFyTG9jYXRpb24gYXMgQ2l0YXRpb25DaGFyTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtIGFzIENpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uIGFzIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0gYXMgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtLFxuICAgIHR5cGUgQ2l0YXRpb25QYWdlTG9jYXRpb24gYXMgQ2l0YXRpb25QYWdlTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtIGFzIENpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBDaXRhdGlvbnNDb25maWdQYXJhbSBhcyBDaXRhdGlvbnNDb25maWdQYXJhbSxcbiAgICB0eXBlIENpdGF0aW9uc0RlbHRhIGFzIENpdGF0aW9uc0RlbHRhLFxuICAgIHR5cGUgQ29udGVudEJsb2NrIGFzIENvbnRlbnRCbG9jayxcbiAgICB0eXBlIENvbnRlbnRCbG9ja0RlbHRhRXZlbnQgYXMgQ29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1BhcmFtIGFzIENvbnRlbnRCbG9ja1BhcmFtLFxuICAgIHR5cGUgQ29udGVudEJsb2NrU291cmNlIGFzIENvbnRlbnRCbG9ja1NvdXJjZSxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQgYXMgQ29udGVudEJsb2NrU291cmNlQ29udGVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1N0YXJ0RXZlbnQgYXMgQ29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1N0b3BFdmVudCBhcyBDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gICAgdHlwZSBEb2N1bWVudEJsb2NrUGFyYW0gYXMgRG9jdW1lbnRCbG9ja1BhcmFtLFxuICAgIHR5cGUgSW1hZ2VCbG9ja1BhcmFtIGFzIEltYWdlQmxvY2tQYXJhbSxcbiAgICB0eXBlIElucHV0SnNvbkRlbHRhIGFzIElucHV0SnNvbkRlbHRhLFxuICAgIHR5cGUgSW5wdXRKU09ORGVsdGEgYXMgSW5wdXRKU09ORGVsdGEsXG4gICAgdHlwZSBNZXNzYWdlIGFzIE1lc3NhZ2UsXG4gICAgdHlwZSBNZXNzYWdlRGVsdGFFdmVudCBhcyBNZXNzYWdlRGVsdGFFdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VEZWx0YVVzYWdlIGFzIE1lc3NhZ2VEZWx0YVVzYWdlLFxuICAgIHR5cGUgTWVzc2FnZVBhcmFtIGFzIE1lc3NhZ2VQYXJhbSxcbiAgICB0eXBlIE1lc3NhZ2VTdGFydEV2ZW50IGFzIE1lc3NhZ2VTdGFydEV2ZW50LFxuICAgIHR5cGUgTWVzc2FnZVN0b3BFdmVudCBhcyBNZXNzYWdlU3RvcEV2ZW50LFxuICAgIHR5cGUgTWVzc2FnZVN0cmVhbUV2ZW50IGFzIE1lc3NhZ2VTdHJlYW1FdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VUb2tlbnNDb3VudCBhcyBNZXNzYWdlVG9rZW5zQ291bnQsXG4gICAgdHlwZSBNZXRhZGF0YSBhcyBNZXRhZGF0YSxcbiAgICB0eXBlIE1vZGVsIGFzIE1vZGVsLFxuICAgIHR5cGUgUGxhaW5UZXh0U291cmNlIGFzIFBsYWluVGV4dFNvdXJjZSxcbiAgICB0eXBlIFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQgYXMgUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgICB0eXBlIFJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQgYXMgUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgICB0eXBlIFJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCBhcyBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gICAgdHlwZSBSYXdNZXNzYWdlRGVsdGFFdmVudCBhcyBSYXdNZXNzYWdlRGVsdGFFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VTdGFydEV2ZW50IGFzIFJhd01lc3NhZ2VTdGFydEV2ZW50LFxuICAgIHR5cGUgUmF3TWVzc2FnZVN0b3BFdmVudCBhcyBSYXdNZXNzYWdlU3RvcEV2ZW50LFxuICAgIHR5cGUgUmF3TWVzc2FnZVN0cmVhbUV2ZW50IGFzIFJhd01lc3NhZ2VTdHJlYW1FdmVudCxcbiAgICB0eXBlIFRleHRCbG9jayBhcyBUZXh0QmxvY2ssXG4gICAgdHlwZSBUZXh0QmxvY2tQYXJhbSBhcyBUZXh0QmxvY2tQYXJhbSxcbiAgICB0eXBlIFRleHRDaXRhdGlvbiBhcyBUZXh0Q2l0YXRpb24sXG4gICAgdHlwZSBUZXh0Q2l0YXRpb25QYXJhbSBhcyBUZXh0Q2l0YXRpb25QYXJhbSxcbiAgICB0eXBlIFRleHREZWx0YSBhcyBUZXh0RGVsdGEsXG4gICAgdHlwZSBUb29sIGFzIFRvb2wsXG4gICAgdHlwZSBUb29sQ2hvaWNlIGFzIFRvb2xDaG9pY2UsXG4gICAgdHlwZSBUb29sQ2hvaWNlQW55IGFzIFRvb2xDaG9pY2VBbnksXG4gICAgdHlwZSBUb29sQ2hvaWNlQXV0byBhcyBUb29sQ2hvaWNlQXV0byxcbiAgICB0eXBlIFRvb2xDaG9pY2VUb29sIGFzIFRvb2xDaG9pY2VUb29sLFxuICAgIHR5cGUgVG9vbFJlc3VsdEJsb2NrUGFyYW0gYXMgVG9vbFJlc3VsdEJsb2NrUGFyYW0sXG4gICAgdHlwZSBUb29sVXNlQmxvY2sgYXMgVG9vbFVzZUJsb2NrLFxuICAgIHR5cGUgVG9vbFVzZUJsb2NrUGFyYW0gYXMgVG9vbFVzZUJsb2NrUGFyYW0sXG4gICAgdHlwZSBVc2FnZSBhcyBVc2FnZSxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICB0eXBlIE1lc3NhZ2VTdHJlYW1QYXJhbXMgYXMgTWVzc2FnZVN0cmVhbVBhcmFtcyxcbiAgICB0eXBlIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyBhcyBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMsXG4gIH07XG5cbiAgZXhwb3J0IHtcbiAgICBCYXRjaGVzIGFzIEJhdGNoZXMsXG4gICAgdHlwZSBEZWxldGVkTWVzc2FnZUJhdGNoIGFzIERlbGV0ZWRNZXNzYWdlQmF0Y2gsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2ggYXMgTWVzc2FnZUJhdGNoLFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQgYXMgTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0IGFzIE1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0IGFzIE1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UgYXMgTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlLFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyBhcyBNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzLFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoUmVzdWx0IGFzIE1lc3NhZ2VCYXRjaFJlc3VsdCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCBhcyBNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQsXG4gICAgTWVzc2FnZUJhdGNoZXNQYWdlIGFzIE1lc3NhZ2VCYXRjaGVzUGFnZSxcbiAgICB0eXBlIEJhdGNoQ3JlYXRlUGFyYW1zIGFzIEJhdGNoQ3JlYXRlUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hMaXN0UGFyYW1zIGFzIEJhdGNoTGlzdFBhcmFtcyxcbiAgfTtcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gXCIuLi9yZXNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgaXNSZXF1ZXN0T3B0aW9ucyB9IGZyb20gXCIuLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuLi9jb3JlLmpzXCI7XG5pbXBvcnQgeyBQYWdlLCB0eXBlIFBhZ2VQYXJhbXMgfSBmcm9tIFwiLi4vcGFnaW5hdGlvbi5qc1wiO1xuXG5leHBvcnQgY2xhc3MgTW9kZWxzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogR2V0IGEgc3BlY2lmaWMgbW9kZWwuXG4gICAqXG4gICAqIFRoZSBNb2RlbHMgQVBJIHJlc3BvbnNlIGNhbiBiZSB1c2VkIHRvIGRldGVybWluZSBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljXG4gICAqIG1vZGVsIG9yIHJlc29sdmUgYSBtb2RlbCBhbGlhcyB0byBhIG1vZGVsIElELlxuICAgKi9cbiAgcmV0cmlldmUobW9kZWxJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxNb2RlbEluZm8+IHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmdldChgL3YxL21vZGVscy8ke21vZGVsSWR9YCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdCBhdmFpbGFibGUgbW9kZWxzLlxuICAgKlxuICAgKiBUaGUgTW9kZWxzIEFQSSByZXNwb25zZSBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgd2hpY2ggbW9kZWxzIGFyZSBhdmFpbGFibGUgZm9yXG4gICAqIHVzZSBpbiB0aGUgQVBJLiBNb3JlIHJlY2VudGx5IHJlbGVhc2VkIG1vZGVscyBhcmUgbGlzdGVkIGZpcnN0LlxuICAgKi9cbiAgbGlzdChxdWVyeT86IE1vZGVsTGlzdFBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLlBhZ2VQcm9taXNlPE1vZGVsSW5mb3NQYWdlLCBNb2RlbEluZm8+O1xuICBsaXN0KG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5QYWdlUHJvbWlzZTxNb2RlbEluZm9zUGFnZSwgTW9kZWxJbmZvPjtcbiAgbGlzdChcbiAgICBxdWVyeTogTW9kZWxMaXN0UGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPE1vZGVsSW5mb3NQYWdlLCBNb2RlbEluZm8+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhxdWVyeSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmxpc3Qoe30sIHF1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5nZXRBUElMaXN0KCcvdjEvbW9kZWxzJywgTW9kZWxJbmZvc1BhZ2UsIHsgcXVlcnksIC4uLm9wdGlvbnMgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vZGVsSW5mb3NQYWdlIGV4dGVuZHMgUGFnZTxNb2RlbEluZm8+IHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxJbmZvIHtcbiAgLyoqXG4gICAqIFVuaXF1ZSBtb2RlbCBpZGVudGlmaWVyLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCB0aGUgbW9kZWwgd2FzIHJlbGVhc2VkLlxuICAgKiBNYXkgYmUgc2V0IHRvIGFuIGVwb2NoIHZhbHVlIGlmIHRoZSByZWxlYXNlIGRhdGUgaXMgdW5rbm93bi5cbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcblxuICAvKipcbiAgICogQSBodW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgbW9kZWwuXG4gICAqL1xuICBkaXNwbGF5X25hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogT2JqZWN0IHR5cGUuXG4gICAqXG4gICAqIEZvciBNb2RlbHMsIHRoaXMgaXMgYWx3YXlzIGBcIm1vZGVsXCJgLlxuICAgKi9cbiAgdHlwZTogJ21vZGVsJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbExpc3RQYXJhbXMgZXh0ZW5kcyBQYWdlUGFyYW1zIHt9XG5cbk1vZGVscy5Nb2RlbEluZm9zUGFnZSA9IE1vZGVsSW5mb3NQYWdlO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgTW9kZWxzIHtcbiAgZXhwb3J0IHtcbiAgICB0eXBlIE1vZGVsSW5mbyBhcyBNb2RlbEluZm8sXG4gICAgTW9kZWxJbmZvc1BhZ2UgYXMgTW9kZWxJbmZvc1BhZ2UsXG4gICAgdHlwZSBNb2RlbExpc3RQYXJhbXMgYXMgTW9kZWxMaXN0UGFyYW1zLFxuICB9O1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IHR5cGUgQWdlbnQgfSBmcm9tIFwiLi9fc2hpbXMvaW5kZXguanNcIjtcbmltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgRXJyb3JzIGZyb20gXCIuL2Vycm9yLmpzXCI7XG5pbXBvcnQgKiBhcyBQYWdpbmF0aW9uIGZyb20gXCIuL3BhZ2luYXRpb24uanNcIjtcbmltcG9ydCB7IHR5cGUgUGFnZVBhcmFtcywgUGFnZVJlc3BvbnNlIH0gZnJvbSBcIi4vcGFnaW5hdGlvbi5qc1wiO1xuaW1wb3J0ICogYXMgVXBsb2FkcyBmcm9tIFwiLi91cGxvYWRzLmpzXCI7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSBcIi4vcmVzb3VyY2VzL2luZGV4LmpzXCI7XG5pbXBvcnQge1xuICBDb21wbGV0aW9uLFxuICBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zLFxuICBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICBDb21wbGV0aW9ucyxcbn0gZnJvbSBcIi4vcmVzb3VyY2VzL2NvbXBsZXRpb25zLmpzXCI7XG5pbXBvcnQgeyBNb2RlbEluZm8sIE1vZGVsSW5mb3NQYWdlLCBNb2RlbExpc3RQYXJhbXMsIE1vZGVscyB9IGZyb20gXCIuL3Jlc291cmNlcy9tb2RlbHMuanNcIjtcbmltcG9ydCB7XG4gIEFudGhyb3BpY0JldGEsXG4gIEJldGEsXG4gIEJldGFBUElFcnJvcixcbiAgQmV0YUF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gIEJldGFCaWxsaW5nRXJyb3IsXG4gIEJldGFFcnJvcixcbiAgQmV0YUVycm9yUmVzcG9uc2UsXG4gIEJldGFHYXRld2F5VGltZW91dEVycm9yLFxuICBCZXRhSW52YWxpZFJlcXVlc3RFcnJvcixcbiAgQmV0YU5vdEZvdW5kRXJyb3IsXG4gIEJldGFPdmVybG9hZGVkRXJyb3IsXG4gIEJldGFQZXJtaXNzaW9uRXJyb3IsXG4gIEJldGFSYXRlTGltaXRFcnJvcixcbn0gZnJvbSBcIi4vcmVzb3VyY2VzL2JldGEvYmV0YS5qc1wiO1xuaW1wb3J0IHtcbiAgQmFzZTY0UERGU291cmNlLFxuICBDYWNoZUNvbnRyb2xFcGhlbWVyYWwsXG4gIENpdGF0aW9uQ2hhckxvY2F0aW9uLFxuICBDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtLFxuICBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uLFxuICBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0sXG4gIENpdGF0aW9uUGFnZUxvY2F0aW9uLFxuICBDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtLFxuICBDaXRhdGlvbnNDb25maWdQYXJhbSxcbiAgQ2l0YXRpb25zRGVsdGEsXG4gIENvbnRlbnRCbG9jayxcbiAgQ29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgQ29udGVudEJsb2NrUGFyYW0sXG4gIENvbnRlbnRCbG9ja1NvdXJjZSxcbiAgQ29udGVudEJsb2NrU291cmNlQ29udGVudCxcbiAgQ29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgQ29udGVudEJsb2NrU3RvcEV2ZW50LFxuICBEb2N1bWVudEJsb2NrUGFyYW0sXG4gIEltYWdlQmxvY2tQYXJhbSxcbiAgSW5wdXRKU09ORGVsdGEsXG4gIE1lc3NhZ2UsXG4gIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyxcbiAgTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgTWVzc2FnZURlbHRhRXZlbnQsXG4gIE1lc3NhZ2VEZWx0YVVzYWdlLFxuICBNZXNzYWdlUGFyYW0sXG4gIE1lc3NhZ2VTdGFydEV2ZW50LFxuICBNZXNzYWdlU3RvcEV2ZW50LFxuICBNZXNzYWdlU3RyZWFtRXZlbnQsXG4gIE1lc3NhZ2VTdHJlYW1QYXJhbXMsXG4gIE1lc3NhZ2VUb2tlbnNDb3VudCxcbiAgTWVzc2FnZXMsXG4gIE1ldGFkYXRhLFxuICBNb2RlbCxcbiAgUGxhaW5UZXh0U291cmNlLFxuICBSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50LFxuICBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50LFxuICBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gIFJhd01lc3NhZ2VEZWx0YUV2ZW50LFxuICBSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgUmF3TWVzc2FnZVN0b3BFdmVudCxcbiAgUmF3TWVzc2FnZVN0cmVhbUV2ZW50LFxuICBUZXh0QmxvY2ssXG4gIFRleHRCbG9ja1BhcmFtLFxuICBUZXh0Q2l0YXRpb24sXG4gIFRleHRDaXRhdGlvblBhcmFtLFxuICBUZXh0RGVsdGEsXG4gIFRvb2wsXG4gIFRvb2xDaG9pY2UsXG4gIFRvb2xDaG9pY2VBbnksXG4gIFRvb2xDaG9pY2VBdXRvLFxuICBUb29sQ2hvaWNlVG9vbCxcbiAgVG9vbFJlc3VsdEJsb2NrUGFyYW0sXG4gIFRvb2xVc2VCbG9jayxcbiAgVG9vbFVzZUJsb2NrUGFyYW0sXG4gIFVzYWdlLFxufSBmcm9tIFwiLi9yZXNvdXJjZXMvbWVzc2FnZXMvbWVzc2FnZXMuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDbGllbnRPcHRpb25zIHtcbiAgLyoqXG4gICAqIERlZmF1bHRzIHRvIHByb2Nlc3MuZW52WydBTlRIUk9QSUNfQVBJX0tFWSddLlxuICAgKi9cbiAgYXBpS2V5Pzogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogRGVmYXVsdHMgdG8gcHJvY2Vzcy5lbnZbJ0FOVEhST1BJQ19BVVRIX1RPS0VOJ10uXG4gICAqL1xuICBhdXRoVG9rZW4/OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgZGVmYXVsdCBiYXNlIFVSTCBmb3IgdGhlIEFQSSwgZS5nLiwgXCJodHRwczovL2FwaS5leGFtcGxlLmNvbS92Mi9cIlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBwcm9jZXNzLmVudlsnQU5USFJPUElDX0JBU0VfVVJMJ10uXG4gICAqL1xuICBiYXNlVVJMPzogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gYW1vdW50IG9mIHRpbWUgKGluIG1pbGxpc2Vjb25kcykgdGhhdCB0aGUgY2xpZW50IHNob3VsZCB3YWl0IGZvciBhIHJlc3BvbnNlXG4gICAqIGZyb20gdGhlIHNlcnZlciBiZWZvcmUgdGltaW5nIG91dCBhIHNpbmdsZSByZXF1ZXN0LlxuICAgKlxuICAgKiBOb3RlIHRoYXQgcmVxdWVzdCB0aW1lb3V0cyBhcmUgcmV0cmllZCBieSBkZWZhdWx0LCBzbyBpbiBhIHdvcnN0LWNhc2Ugc2NlbmFyaW8geW91IG1heSB3YWl0XG4gICAqIG11Y2ggbG9uZ2VyIHRoYW4gdGhpcyB0aW1lb3V0IGJlZm9yZSB0aGUgcHJvbWlzZSBzdWNjZWVkcyBvciBmYWlscy5cbiAgICovXG4gIHRpbWVvdXQ/OiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIEFuIEhUVFAgYWdlbnQgdXNlZCB0byBtYW5hZ2UgSFRUUChTKSBjb25uZWN0aW9ucy5cbiAgICpcbiAgICogSWYgbm90IHByb3ZpZGVkLCBhbiBhZ2VudCB3aWxsIGJlIGNvbnN0cnVjdGVkIGJ5IGRlZmF1bHQgaW4gdGhlIE5vZGUuanMgZW52aXJvbm1lbnQsXG4gICAqIG90aGVyd2lzZSBubyBhZ2VudCBpcyB1c2VkLlxuICAgKi9cbiAgaHR0cEFnZW50PzogQWdlbnQgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFNwZWNpZnkgYSBjdXN0b20gYGZldGNoYCBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICpcbiAgICogSWYgbm90IHByb3ZpZGVkLCB3ZSB1c2UgYG5vZGUtZmV0Y2hgIG9uIE5vZGUuanMgYW5kIG90aGVyd2lzZSBleHBlY3QgdGhhdCBgZmV0Y2hgIGlzXG4gICAqIGRlZmluZWQgZ2xvYmFsbHkuXG4gICAqL1xuICBmZXRjaD86IENvcmUuRmV0Y2ggfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0aW1lcyB0aGF0IHRoZSBjbGllbnQgd2lsbCByZXRyeSBhIHJlcXVlc3QgaW4gY2FzZSBvZiBhXG4gICAqIHRlbXBvcmFyeSBmYWlsdXJlLCBsaWtlIGEgbmV0d29yayBlcnJvciBvciBhIDVYWCBlcnJvciBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAqXG4gICAqIEBkZWZhdWx0IDJcbiAgICovXG4gIG1heFJldHJpZXM/OiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIERlZmF1bHQgaGVhZGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKlxuICAgKiBUaGVzZSBjYW4gYmUgcmVtb3ZlZCBpbiBpbmRpdmlkdWFsIHJlcXVlc3RzIGJ5IGV4cGxpY2l0bHkgc2V0dGluZyB0aGVcbiAgICogaGVhZGVyIHRvIGB1bmRlZmluZWRgIG9yIGBudWxsYCBpbiByZXF1ZXN0IG9wdGlvbnMuXG4gICAqL1xuICBkZWZhdWx0SGVhZGVycz86IENvcmUuSGVhZGVycyB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogRGVmYXVsdCBxdWVyeSBwYXJhbWV0ZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqXG4gICAqIFRoZXNlIGNhbiBiZSByZW1vdmVkIGluIGluZGl2aWR1YWwgcmVxdWVzdHMgYnkgZXhwbGljaXRseSBzZXR0aW5nIHRoZVxuICAgKiBwYXJhbSB0byBgdW5kZWZpbmVkYCBpbiByZXF1ZXN0IG9wdGlvbnMuXG4gICAqL1xuICBkZWZhdWx0UXVlcnk/OiBDb3JlLkRlZmF1bHRRdWVyeSB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogQnkgZGVmYXVsdCwgY2xpZW50LXNpZGUgdXNlIG9mIHRoaXMgbGlicmFyeSBpcyBub3QgYWxsb3dlZCwgYXMgaXQgcmlza3MgZXhwb3NpbmcgeW91ciBzZWNyZXQgQVBJIGNyZWRlbnRpYWxzIHRvIGF0dGFja2Vycy5cbiAgICogT25seSBzZXQgdGhpcyBvcHRpb24gdG8gYHRydWVgIGlmIHlvdSB1bmRlcnN0YW5kIHRoZSByaXNrcyBhbmQgaGF2ZSBhcHByb3ByaWF0ZSBtaXRpZ2F0aW9ucyBpbiBwbGFjZS5cbiAgICovXG4gIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyPzogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBBUEkgQ2xpZW50IGZvciBpbnRlcmZhY2luZyB3aXRoIHRoZSBBbnRocm9waWMgQVBJLlxuICovXG5leHBvcnQgY2xhc3MgQW50aHJvcGljIGV4dGVuZHMgQ29yZS5BUElDbGllbnQge1xuICBhcGlLZXk6IHN0cmluZyB8IG51bGw7XG4gIGF1dGhUb2tlbjogc3RyaW5nIHwgbnVsbDtcblxuICBwcml2YXRlIF9vcHRpb25zOiBDbGllbnRPcHRpb25zO1xuXG4gIC8qKlxuICAgKiBBUEkgQ2xpZW50IGZvciBpbnRlcmZhY2luZyB3aXRoIHRoZSBBbnRocm9waWMgQVBJLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bGwgfCB1bmRlZmluZWR9IFtvcHRzLmFwaUtleT1wcm9jZXNzLmVudlsnQU5USFJPUElDX0FQSV9LRVknXSA/PyBudWxsXVxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bGwgfCB1bmRlZmluZWR9IFtvcHRzLmF1dGhUb2tlbj1wcm9jZXNzLmVudlsnQU5USFJPUElDX0FVVEhfVE9LRU4nXSA/PyBudWxsXVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuYmFzZVVSTD1wcm9jZXNzLmVudlsnQU5USFJPUElDX0JBU0VfVVJMJ10gPz8gaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbV0gLSBPdmVycmlkZSB0aGUgZGVmYXVsdCBiYXNlIFVSTCBmb3IgdGhlIEFQSS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnRpbWVvdXQ9MTAgbWludXRlc10gLSBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSAoaW4gbWlsbGlzZWNvbmRzKSB0aGUgY2xpZW50IHdpbGwgd2FpdCBmb3IgYSByZXNwb25zZSBiZWZvcmUgdGltaW5nIG91dC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmh0dHBBZ2VudF0gLSBBbiBIVFRQIGFnZW50IHVzZWQgdG8gbWFuYWdlIEhUVFAocykgY29ubmVjdGlvbnMuXG4gICAqIEBwYXJhbSB7Q29yZS5GZXRjaH0gW29wdHMuZmV0Y2hdIC0gU3BlY2lmeSBhIGN1c3RvbSBgZmV0Y2hgIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMubWF4UmV0cmllcz0yXSAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0aW1lcyB0aGUgY2xpZW50IHdpbGwgcmV0cnkgYSByZXF1ZXN0LlxuICAgKiBAcGFyYW0ge0NvcmUuSGVhZGVyc30gb3B0cy5kZWZhdWx0SGVhZGVycyAtIERlZmF1bHQgaGVhZGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge0NvcmUuRGVmYXVsdFF1ZXJ5fSBvcHRzLmRlZmF1bHRRdWVyeSAtIERlZmF1bHQgcXVlcnkgcGFyYW1ldGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmRhbmdlcm91c2x5QWxsb3dCcm93c2VyPWZhbHNlXSAtIEJ5IGRlZmF1bHQsIGNsaWVudC1zaWRlIHVzZSBvZiB0aGlzIGxpYnJhcnkgaXMgbm90IGFsbG93ZWQsIGFzIGl0IHJpc2tzIGV4cG9zaW5nIHlvdXIgc2VjcmV0IEFQSSBjcmVkZW50aWFscyB0byBhdHRhY2tlcnMuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgYmFzZVVSTCA9IENvcmUucmVhZEVudignQU5USFJPUElDX0JBU0VfVVJMJyksXG4gICAgYXBpS2V5ID0gQ29yZS5yZWFkRW52KCdBTlRIUk9QSUNfQVBJX0tFWScpID8/IG51bGwsXG4gICAgYXV0aFRva2VuID0gQ29yZS5yZWFkRW52KCdBTlRIUk9QSUNfQVVUSF9UT0tFTicpID8/IG51bGwsXG4gICAgLi4ub3B0c1xuICB9OiBDbGllbnRPcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBvcHRpb25zOiBDbGllbnRPcHRpb25zID0ge1xuICAgICAgYXBpS2V5LFxuICAgICAgYXV0aFRva2VuLFxuICAgICAgLi4ub3B0cyxcbiAgICAgIGJhc2VVUkw6IGJhc2VVUkwgfHwgYGh0dHBzOi8vYXBpLmFudGhyb3BpYy5jb21gLFxuICAgIH07XG5cbiAgICBpZiAoIW9wdGlvbnMuZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXIgJiYgQ29yZS5pc1J1bm5pbmdJbkJyb3dzZXIoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9ycy5BbnRocm9waWNFcnJvcihcbiAgICAgICAgXCJJdCBsb29rcyBsaWtlIHlvdSdyZSBydW5uaW5nIGluIGEgYnJvd3Nlci1saWtlIGVudmlyb25tZW50LlxcblxcblRoaXMgaXMgZGlzYWJsZWQgYnkgZGVmYXVsdCwgYXMgaXQgcmlza3MgZXhwb3NpbmcgeW91ciBzZWNyZXQgQVBJIGNyZWRlbnRpYWxzIHRvIGF0dGFja2Vycy5cXG5JZiB5b3UgdW5kZXJzdGFuZCB0aGUgcmlza3MgYW5kIGhhdmUgYXBwcm9wcmlhdGUgbWl0aWdhdGlvbnMgaW4gcGxhY2UsXFxueW91IGNhbiBzZXQgdGhlIGBkYW5nZXJvdXNseUFsbG93QnJvd3NlcmAgb3B0aW9uIHRvIGB0cnVlYCwgZS5nLixcXG5cXG5uZXcgQW50aHJvcGljKHsgYXBpS2V5LCBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZSB9KTtcXG5cIixcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3VwZXIoe1xuICAgICAgYmFzZVVSTDogb3B0aW9ucy5iYXNlVVJMISxcbiAgICAgIHRpbWVvdXQ6IG9wdGlvbnMudGltZW91dCA/PyA2MDAwMDAgLyogMTAgbWludXRlcyAqLyxcbiAgICAgIGh0dHBBZ2VudDogb3B0aW9ucy5odHRwQWdlbnQsXG4gICAgICBtYXhSZXRyaWVzOiBvcHRpb25zLm1heFJldHJpZXMsXG4gICAgICBmZXRjaDogb3B0aW9ucy5mZXRjaCxcbiAgICB9KTtcblxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gICAgdGhpcy5hdXRoVG9rZW4gPSBhdXRoVG9rZW47XG4gIH1cblxuICBjb21wbGV0aW9uczogQVBJLkNvbXBsZXRpb25zID0gbmV3IEFQSS5Db21wbGV0aW9ucyh0aGlzKTtcbiAgbWVzc2FnZXM6IEFQSS5NZXNzYWdlcyA9IG5ldyBBUEkuTWVzc2FnZXModGhpcyk7XG4gIG1vZGVsczogQVBJLk1vZGVscyA9IG5ldyBBUEkuTW9kZWxzKHRoaXMpO1xuICBiZXRhOiBBUEkuQmV0YSA9IG5ldyBBUEkuQmV0YSh0aGlzKTtcblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgZGVmYXVsdFF1ZXJ5KCk6IENvcmUuRGVmYXVsdFF1ZXJ5IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5kZWZhdWx0UXVlcnk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgZGVmYXVsdEhlYWRlcnMob3B0czogQ29yZS5GaW5hbFJlcXVlc3RPcHRpb25zKTogQ29yZS5IZWFkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3VwZXIuZGVmYXVsdEhlYWRlcnMob3B0cyksXG4gICAgICAuLi4odGhpcy5fb3B0aW9ucy5kYW5nZXJvdXNseUFsbG93QnJvd3NlciA/XG4gICAgICAgIHsgJ2FudGhyb3BpYy1kYW5nZXJvdXMtZGlyZWN0LWJyb3dzZXItYWNjZXNzJzogJ3RydWUnIH1cbiAgICAgIDogdW5kZWZpbmVkKSxcbiAgICAgICdhbnRocm9waWMtdmVyc2lvbic6ICcyMDIzLTA2LTAxJyxcbiAgICAgIC4uLnRoaXMuX29wdGlvbnMuZGVmYXVsdEhlYWRlcnMsXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvdmVycmlkZSB2YWxpZGF0ZUhlYWRlcnMoaGVhZGVyczogQ29yZS5IZWFkZXJzLCBjdXN0b21IZWFkZXJzOiBDb3JlLkhlYWRlcnMpIHtcbiAgICBpZiAodGhpcy5hcGlLZXkgJiYgaGVhZGVyc1sneC1hcGkta2V5J10pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGN1c3RvbUhlYWRlcnNbJ3gtYXBpLWtleSddID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYXV0aFRva2VuICYmIGhlYWRlcnNbJ2F1dGhvcml6YXRpb24nXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY3VzdG9tSGVhZGVyc1snYXV0aG9yaXphdGlvbiddID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0NvdWxkIG5vdCByZXNvbHZlIGF1dGhlbnRpY2F0aW9uIG1ldGhvZC4gRXhwZWN0ZWQgZWl0aGVyIGFwaUtleSBvciBhdXRoVG9rZW4gdG8gYmUgc2V0LiBPciBmb3Igb25lIG9mIHRoZSBcIlgtQXBpLUtleVwiIG9yIFwiQXV0aG9yaXphdGlvblwiIGhlYWRlcnMgdG8gYmUgZXhwbGljaXRseSBvbWl0dGVkJyxcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIGF1dGhIZWFkZXJzKG9wdHM6IENvcmUuRmluYWxSZXF1ZXN0T3B0aW9ucyk6IENvcmUuSGVhZGVycyB7XG4gICAgY29uc3QgYXBpS2V5QXV0aCA9IHRoaXMuYXBpS2V5QXV0aChvcHRzKTtcbiAgICBjb25zdCBiZWFyZXJBdXRoID0gdGhpcy5iZWFyZXJBdXRoKG9wdHMpO1xuXG4gICAgaWYgKGFwaUtleUF1dGggIT0gbnVsbCAmJiAhQ29yZS5pc0VtcHR5T2JqKGFwaUtleUF1dGgpKSB7XG4gICAgICByZXR1cm4gYXBpS2V5QXV0aDtcbiAgICB9XG5cbiAgICBpZiAoYmVhcmVyQXV0aCAhPSBudWxsICYmICFDb3JlLmlzRW1wdHlPYmooYmVhcmVyQXV0aCkpIHtcbiAgICAgIHJldHVybiBiZWFyZXJBdXRoO1xuICAgIH1cbiAgICByZXR1cm4ge307XG4gIH1cblxuICBwcm90ZWN0ZWQgYXBpS2V5QXV0aChvcHRzOiBDb3JlLkZpbmFsUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkhlYWRlcnMge1xuICAgIGlmICh0aGlzLmFwaUtleSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHJldHVybiB7ICdYLUFwaS1LZXknOiB0aGlzLmFwaUtleSB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIGJlYXJlckF1dGgob3B0czogQ29yZS5GaW5hbFJlcXVlc3RPcHRpb25zKTogQ29yZS5IZWFkZXJzIHtcbiAgICBpZiAodGhpcy5hdXRoVG9rZW4gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICByZXR1cm4geyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5hdXRoVG9rZW59YCB9O1xuICB9XG5cbiAgc3RhdGljIEFudGhyb3BpYyA9IHRoaXM7XG4gIHN0YXRpYyBIVU1BTl9QUk9NUFQgPSAnXFxuXFxuSHVtYW46JztcbiAgc3RhdGljIEFJX1BST01QVCA9ICdcXG5cXG5Bc3Npc3RhbnQ6JztcbiAgc3RhdGljIERFRkFVTFRfVElNRU9VVCA9IDYwMDAwMDsgLy8gMTAgbWludXRlc1xuXG4gIHN0YXRpYyBBbnRocm9waWNFcnJvciA9IEVycm9ycy5BbnRocm9waWNFcnJvcjtcbiAgc3RhdGljIEFQSUVycm9yID0gRXJyb3JzLkFQSUVycm9yO1xuICBzdGF0aWMgQVBJQ29ubmVjdGlvbkVycm9yID0gRXJyb3JzLkFQSUNvbm5lY3Rpb25FcnJvcjtcbiAgc3RhdGljIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IgPSBFcnJvcnMuQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcjtcbiAgc3RhdGljIEFQSVVzZXJBYm9ydEVycm9yID0gRXJyb3JzLkFQSVVzZXJBYm9ydEVycm9yO1xuICBzdGF0aWMgTm90Rm91bmRFcnJvciA9IEVycm9ycy5Ob3RGb3VuZEVycm9yO1xuICBzdGF0aWMgQ29uZmxpY3RFcnJvciA9IEVycm9ycy5Db25mbGljdEVycm9yO1xuICBzdGF0aWMgUmF0ZUxpbWl0RXJyb3IgPSBFcnJvcnMuUmF0ZUxpbWl0RXJyb3I7XG4gIHN0YXRpYyBCYWRSZXF1ZXN0RXJyb3IgPSBFcnJvcnMuQmFkUmVxdWVzdEVycm9yO1xuICBzdGF0aWMgQXV0aGVudGljYXRpb25FcnJvciA9IEVycm9ycy5BdXRoZW50aWNhdGlvbkVycm9yO1xuICBzdGF0aWMgSW50ZXJuYWxTZXJ2ZXJFcnJvciA9IEVycm9ycy5JbnRlcm5hbFNlcnZlckVycm9yO1xuICBzdGF0aWMgUGVybWlzc2lvbkRlbmllZEVycm9yID0gRXJyb3JzLlBlcm1pc3Npb25EZW5pZWRFcnJvcjtcbiAgc3RhdGljIFVucHJvY2Vzc2FibGVFbnRpdHlFcnJvciA9IEVycm9ycy5VbnByb2Nlc3NhYmxlRW50aXR5RXJyb3I7XG5cbiAgc3RhdGljIHRvRmlsZSA9IFVwbG9hZHMudG9GaWxlO1xuICBzdGF0aWMgZmlsZUZyb21QYXRoID0gVXBsb2Fkcy5maWxlRnJvbVBhdGg7XG59XG5cbkFudGhyb3BpYy5Db21wbGV0aW9ucyA9IENvbXBsZXRpb25zO1xuQW50aHJvcGljLk1lc3NhZ2VzID0gTWVzc2FnZXM7XG5BbnRocm9waWMuTW9kZWxzID0gTW9kZWxzO1xuQW50aHJvcGljLk1vZGVsSW5mb3NQYWdlID0gTW9kZWxJbmZvc1BhZ2U7XG5BbnRocm9waWMuQmV0YSA9IEJldGE7XG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgQW50aHJvcGljIHtcbiAgZXhwb3J0IHR5cGUgUmVxdWVzdE9wdGlvbnMgPSBDb3JlLlJlcXVlc3RPcHRpb25zO1xuXG4gIGV4cG9ydCBpbXBvcnQgUGFnZSA9IFBhZ2luYXRpb24uUGFnZTtcbiAgZXhwb3J0IHsgdHlwZSBQYWdlUGFyYW1zIGFzIFBhZ2VQYXJhbXMsIHR5cGUgUGFnZVJlc3BvbnNlIGFzIFBhZ2VSZXNwb25zZSB9O1xuXG4gIGV4cG9ydCB7XG4gICAgQ29tcGxldGlvbnMgYXMgQ29tcGxldGlvbnMsXG4gICAgdHlwZSBDb21wbGV0aW9uIGFzIENvbXBsZXRpb24sXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gIH07XG5cbiAgZXhwb3J0IHtcbiAgICBNZXNzYWdlcyBhcyBNZXNzYWdlcyxcbiAgICB0eXBlIEJhc2U2NFBERlNvdXJjZSBhcyBCYXNlNjRQREZTb3VyY2UsXG4gICAgdHlwZSBDYWNoZUNvbnRyb2xFcGhlbWVyYWwgYXMgQ2FjaGVDb250cm9sRXBoZW1lcmFsLFxuICAgIHR5cGUgQ2l0YXRpb25DaGFyTG9jYXRpb24gYXMgQ2l0YXRpb25DaGFyTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtIGFzIENpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uIGFzIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0gYXMgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtLFxuICAgIHR5cGUgQ2l0YXRpb25QYWdlTG9jYXRpb24gYXMgQ2l0YXRpb25QYWdlTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtIGFzIENpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBDaXRhdGlvbnNDb25maWdQYXJhbSBhcyBDaXRhdGlvbnNDb25maWdQYXJhbSxcbiAgICB0eXBlIENpdGF0aW9uc0RlbHRhIGFzIENpdGF0aW9uc0RlbHRhLFxuICAgIHR5cGUgQ29udGVudEJsb2NrIGFzIENvbnRlbnRCbG9jayxcbiAgICB0eXBlIENvbnRlbnRCbG9ja0RlbHRhRXZlbnQgYXMgQ29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1BhcmFtIGFzIENvbnRlbnRCbG9ja1BhcmFtLFxuICAgIHR5cGUgQ29udGVudEJsb2NrU291cmNlIGFzIENvbnRlbnRCbG9ja1NvdXJjZSxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQgYXMgQ29udGVudEJsb2NrU291cmNlQ29udGVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1N0YXJ0RXZlbnQgYXMgQ29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1N0b3BFdmVudCBhcyBDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gICAgdHlwZSBEb2N1bWVudEJsb2NrUGFyYW0gYXMgRG9jdW1lbnRCbG9ja1BhcmFtLFxuICAgIHR5cGUgSW1hZ2VCbG9ja1BhcmFtIGFzIEltYWdlQmxvY2tQYXJhbSxcbiAgICB0eXBlIElucHV0SlNPTkRlbHRhIGFzIElucHV0SlNPTkRlbHRhLFxuICAgIHR5cGUgTWVzc2FnZSBhcyBNZXNzYWdlLFxuICAgIHR5cGUgTWVzc2FnZURlbHRhRXZlbnQgYXMgTWVzc2FnZURlbHRhRXZlbnQsXG4gICAgdHlwZSBNZXNzYWdlRGVsdGFVc2FnZSBhcyBNZXNzYWdlRGVsdGFVc2FnZSxcbiAgICB0eXBlIE1lc3NhZ2VQYXJhbSBhcyBNZXNzYWdlUGFyYW0sXG4gICAgdHlwZSBNZXNzYWdlU3RhcnRFdmVudCBhcyBNZXNzYWdlU3RhcnRFdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VTdG9wRXZlbnQgYXMgTWVzc2FnZVN0b3BFdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VTdHJlYW1FdmVudCBhcyBNZXNzYWdlU3RyZWFtRXZlbnQsXG4gICAgdHlwZSBNZXNzYWdlVG9rZW5zQ291bnQgYXMgTWVzc2FnZVRva2Vuc0NvdW50LFxuICAgIHR5cGUgTWV0YWRhdGEgYXMgTWV0YWRhdGEsXG4gICAgdHlwZSBNb2RlbCBhcyBNb2RlbCxcbiAgICB0eXBlIFBsYWluVGV4dFNvdXJjZSBhcyBQbGFpblRleHRTb3VyY2UsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50IGFzIFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50IGFzIFJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQgYXMgUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50LFxuICAgIHR5cGUgUmF3TWVzc2FnZURlbHRhRXZlbnQgYXMgUmF3TWVzc2FnZURlbHRhRXZlbnQsXG4gICAgdHlwZSBSYXdNZXNzYWdlU3RhcnRFdmVudCBhcyBSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VTdG9wRXZlbnQgYXMgUmF3TWVzc2FnZVN0b3BFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VTdHJlYW1FdmVudCBhcyBSYXdNZXNzYWdlU3RyZWFtRXZlbnQsXG4gICAgdHlwZSBUZXh0QmxvY2sgYXMgVGV4dEJsb2NrLFxuICAgIHR5cGUgVGV4dEJsb2NrUGFyYW0gYXMgVGV4dEJsb2NrUGFyYW0sXG4gICAgdHlwZSBUZXh0Q2l0YXRpb24gYXMgVGV4dENpdGF0aW9uLFxuICAgIHR5cGUgVGV4dENpdGF0aW9uUGFyYW0gYXMgVGV4dENpdGF0aW9uUGFyYW0sXG4gICAgdHlwZSBUZXh0RGVsdGEgYXMgVGV4dERlbHRhLFxuICAgIHR5cGUgVG9vbCBhcyBUb29sLFxuICAgIHR5cGUgVG9vbENob2ljZSBhcyBUb29sQ2hvaWNlLFxuICAgIHR5cGUgVG9vbENob2ljZUFueSBhcyBUb29sQ2hvaWNlQW55LFxuICAgIHR5cGUgVG9vbENob2ljZUF1dG8gYXMgVG9vbENob2ljZUF1dG8sXG4gICAgdHlwZSBUb29sQ2hvaWNlVG9vbCBhcyBUb29sQ2hvaWNlVG9vbCxcbiAgICB0eXBlIFRvb2xSZXN1bHRCbG9ja1BhcmFtIGFzIFRvb2xSZXN1bHRCbG9ja1BhcmFtLFxuICAgIHR5cGUgVG9vbFVzZUJsb2NrIGFzIFRvb2xVc2VCbG9jayxcbiAgICB0eXBlIFRvb2xVc2VCbG9ja1BhcmFtIGFzIFRvb2xVc2VCbG9ja1BhcmFtLFxuICAgIHR5cGUgVXNhZ2UgYXMgVXNhZ2UsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlU3RyZWFtUGFyYW1zIGFzIE1lc3NhZ2VTdHJlYW1QYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMgYXMgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICB9O1xuXG4gIGV4cG9ydCB7XG4gICAgTW9kZWxzIGFzIE1vZGVscyxcbiAgICB0eXBlIE1vZGVsSW5mbyBhcyBNb2RlbEluZm8sXG4gICAgTW9kZWxJbmZvc1BhZ2UgYXMgTW9kZWxJbmZvc1BhZ2UsXG4gICAgdHlwZSBNb2RlbExpc3RQYXJhbXMgYXMgTW9kZWxMaXN0UGFyYW1zLFxuICB9O1xuXG4gIGV4cG9ydCB7XG4gICAgQmV0YSBhcyBCZXRhLFxuICAgIHR5cGUgQW50aHJvcGljQmV0YSBhcyBBbnRocm9waWNCZXRhLFxuICAgIHR5cGUgQmV0YUFQSUVycm9yIGFzIEJldGFBUElFcnJvcixcbiAgICB0eXBlIEJldGFBdXRoZW50aWNhdGlvbkVycm9yIGFzIEJldGFBdXRoZW50aWNhdGlvbkVycm9yLFxuICAgIHR5cGUgQmV0YUJpbGxpbmdFcnJvciBhcyBCZXRhQmlsbGluZ0Vycm9yLFxuICAgIHR5cGUgQmV0YUVycm9yIGFzIEJldGFFcnJvcixcbiAgICB0eXBlIEJldGFFcnJvclJlc3BvbnNlIGFzIEJldGFFcnJvclJlc3BvbnNlLFxuICAgIHR5cGUgQmV0YUdhdGV3YXlUaW1lb3V0RXJyb3IgYXMgQmV0YUdhdGV3YXlUaW1lb3V0RXJyb3IsXG4gICAgdHlwZSBCZXRhSW52YWxpZFJlcXVlc3RFcnJvciBhcyBCZXRhSW52YWxpZFJlcXVlc3RFcnJvcixcbiAgICB0eXBlIEJldGFOb3RGb3VuZEVycm9yIGFzIEJldGFOb3RGb3VuZEVycm9yLFxuICAgIHR5cGUgQmV0YU92ZXJsb2FkZWRFcnJvciBhcyBCZXRhT3ZlcmxvYWRlZEVycm9yLFxuICAgIHR5cGUgQmV0YVBlcm1pc3Npb25FcnJvciBhcyBCZXRhUGVybWlzc2lvbkVycm9yLFxuICAgIHR5cGUgQmV0YVJhdGVMaW1pdEVycm9yIGFzIEJldGFSYXRlTGltaXRFcnJvcixcbiAgfTtcblxuICBleHBvcnQgdHlwZSBBUElFcnJvck9iamVjdCA9IEFQSS5BUElFcnJvck9iamVjdDtcbiAgZXhwb3J0IHR5cGUgQXV0aGVudGljYXRpb25FcnJvciA9IEFQSS5BdXRoZW50aWNhdGlvbkVycm9yO1xuICBleHBvcnQgdHlwZSBCaWxsaW5nRXJyb3IgPSBBUEkuQmlsbGluZ0Vycm9yO1xuICBleHBvcnQgdHlwZSBFcnJvck9iamVjdCA9IEFQSS5FcnJvck9iamVjdDtcbiAgZXhwb3J0IHR5cGUgRXJyb3JSZXNwb25zZSA9IEFQSS5FcnJvclJlc3BvbnNlO1xuICBleHBvcnQgdHlwZSBHYXRld2F5VGltZW91dEVycm9yID0gQVBJLkdhdGV3YXlUaW1lb3V0RXJyb3I7XG4gIGV4cG9ydCB0eXBlIEludmFsaWRSZXF1ZXN0RXJyb3IgPSBBUEkuSW52YWxpZFJlcXVlc3RFcnJvcjtcbiAgZXhwb3J0IHR5cGUgTm90Rm91bmRFcnJvciA9IEFQSS5Ob3RGb3VuZEVycm9yO1xuICBleHBvcnQgdHlwZSBPdmVybG9hZGVkRXJyb3IgPSBBUEkuT3ZlcmxvYWRlZEVycm9yO1xuICBleHBvcnQgdHlwZSBQZXJtaXNzaW9uRXJyb3IgPSBBUEkuUGVybWlzc2lvbkVycm9yO1xuICBleHBvcnQgdHlwZSBSYXRlTGltaXRFcnJvciA9IEFQSS5SYXRlTGltaXRFcnJvcjtcbn1cbmV4cG9ydCBjb25zdCB7IEhVTUFOX1BST01QVCwgQUlfUFJPTVBUIH0gPSBBbnRocm9waWM7XG5cbmV4cG9ydCB7IHRvRmlsZSwgZmlsZUZyb21QYXRoIH0gZnJvbSBcIi4vdXBsb2Fkcy5qc1wiO1xuZXhwb3J0IHtcbiAgQW50aHJvcGljRXJyb3IsXG4gIEFQSUVycm9yLFxuICBBUElDb25uZWN0aW9uRXJyb3IsXG4gIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IsXG4gIEFQSVVzZXJBYm9ydEVycm9yLFxuICBOb3RGb3VuZEVycm9yLFxuICBDb25mbGljdEVycm9yLFxuICBSYXRlTGltaXRFcnJvcixcbiAgQmFkUmVxdWVzdEVycm9yLFxuICBBdXRoZW50aWNhdGlvbkVycm9yLFxuICBJbnRlcm5hbFNlcnZlckVycm9yLFxuICBQZXJtaXNzaW9uRGVuaWVkRXJyb3IsXG4gIFVucHJvY2Vzc2FibGVFbnRpdHlFcnJvcixcbn0gZnJvbSBcIi4vZXJyb3IuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgQW50aHJvcGljO1xuIiwgIi8qKlxyXG4gKiBBbnRocm9waWMgUHJvdmlkZXIgSW1wbGVtZW50YXRpb25cclxuICogXHJcbiAqIFRoaXMgZmlsZSBjb250YWlucyB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIEFudGhyb3BpYyBwcm92aWRlcixcclxuICogd2hpY2ggYWxsb3dzIHRoZSBwbHVnaW4gdG8gaW50ZXJhY3Qgd2l0aCBBbnRocm9waWMncyBBUEkgKENsYXVkZSBtb2RlbHMpXHJcbiAqIHVzaW5nIHRoZSBvZmZpY2lhbCBBbnRocm9waWMgVHlwZVNjcmlwdCBTREsuXHJcbiAqIFxyXG4gKiBDbGF1ZGUgbW9kZWxzIGhhdmUgbGFyZ2UgY29udGV4dCB3aW5kb3dzIGFuZCBzdHJvbmcgcmVhc29uaW5nIGNhcGFiaWxpdGllcy5cclxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBoYW5kbGVzIHRva2VuIGNvdW50aW5nIGFuZCBjb250ZXh0IHdpbmRvdyBtYW5hZ2VtZW50LlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IE1lc3NhZ2UsIENvbXBsZXRpb25PcHRpb25zLCBDb25uZWN0aW9uVGVzdFJlc3VsdCB9IGZyb20gJy4uL3NyYy90eXBlcyc7XHJcbmltcG9ydCB7IEJhc2VQcm92aWRlciwgUHJvdmlkZXJFcnJvciwgUHJvdmlkZXJFcnJvclR5cGUgfSBmcm9tICcuL2Jhc2UnO1xyXG5pbXBvcnQgQW50aHJvcGljIGZyb20gJ0BhbnRocm9waWMtYWkvc2RrJztcclxuXHJcbi8qKlxyXG4gKiBBbnRocm9waWMgQVBJIHJlc3BvbnNlIHR5cGVzXHJcbiAqIFRoZXNlIGFyZSBzaW1wbGlmaWVkIHZlcnNpb25zIG9mIHRoZSBhY3R1YWwgcmVzcG9uc2UgdHlwZXNcclxuICovXHJcbmludGVyZmFjZSBBbnRocm9waWNNZXNzYWdlIHtcclxuICAgIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnO1xyXG4gICAgY29udGVudDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQW50aHJvcGljU3RyZWFtRXZlbnQge1xyXG4gICAgdHlwZTogc3RyaW5nO1xyXG4gICAgZGVsdGE/OiB7XHJcbiAgICAgICAgdHlwZTogc3RyaW5nO1xyXG4gICAgICAgIHRleHQ6IHN0cmluZztcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNYXhpbXVtIGNvbnRleHQgd2luZG93IHNpemVzIGZvciBBbnRocm9waWMgbW9kZWxzIChpbiB0b2tlbnMpXHJcbiAqIFRoZXNlIHZhbHVlcyByZXByZXNlbnQgdGhlIHRvdGFsIHRva2VucyAoaW5wdXQgKyBvdXRwdXQpIHRoYXQgZWFjaCBtb2RlbCBjYW4gaGFuZGxlXHJcbiAqL1xyXG5jb25zdCBNT0RFTF9DT05URVhUX1dJTkRPV1M6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XHJcbiAgICAnY2xhdWRlLTMtb3B1cy0yMDI0MDIyOSc6IDIwMDAwMCxcclxuICAgICdjbGF1ZGUtMy1zb25uZXQtMjAyNDAyMjknOiAyMDAwMDAsXHJcbiAgICAnY2xhdWRlLTMtaGFpa3UtMjAyNDAzMDcnOiAyMDAwMDAsXHJcbn07XHJcblxyXG4vKipcclxuICogQXBwcm94aW1hdGUgdG9rZW4gY291bnQgZm9yIG1lc3NhZ2VzXHJcbiAqIFxyXG4gKiBUaGlzIGlzIGEgc2ltcGxlIGFwcHJveGltYXRpb24gYmFzZWQgb24gY2hhcmFjdGVyIGNvdW50LlxyXG4gKiBDbGF1ZGUgbW9kZWxzIHVzZSB+My41IGNoYXJzIHBlciB0b2tlbiBvbiBhdmVyYWdlLCBidXQgd2UgdXNlIDQgZm9yIHNhZmV0eS5cclxuICogXHJcbiAqIEBwYXJhbSBtZXNzYWdlcyAtIFRoZSBtZXNzYWdlcyB0byBjb3VudCB0b2tlbnMgZm9yXHJcbiAqIEByZXR1cm5zIEFwcHJveGltYXRlIHRva2VuIGNvdW50XHJcbiAqL1xyXG5mdW5jdGlvbiBlc3RpbWF0ZVRva2VuQ291bnQobWVzc2FnZXM6IE1lc3NhZ2VbXSk6IG51bWJlciB7XHJcbiAgICAvLyBTaW1wbGUgYXBwcm94aW1hdGlvbjogMSB0b2tlbiBcdTIyNDggNCBjaGFyYWN0ZXJzXHJcbiAgICBjb25zdCBDSEFSU19QRVJfVE9LRU4gPSA0O1xyXG4gICAgXHJcbiAgICAvLyBDYWxjdWxhdGUgdG90YWwgY2hhcmFjdGVycyBpbiBhbGwgbWVzc2FnZXNcclxuICAgIGNvbnN0IHRvdGFsQ2hhcnMgPSBtZXNzYWdlcy5yZWR1Y2UoKHRvdGFsLCBtc2cpID0+IHtcclxuICAgICAgICByZXR1cm4gdG90YWwgKyBtc2cuY29udGVudC5sZW5ndGg7XHJcbiAgICB9LCAwKTtcclxuICAgIFxyXG4gICAgLy8gQ29udmVydCB0byB0b2tlbnNcclxuICAgIHJldHVybiBNYXRoLmNlaWwodG90YWxDaGFycyAvIENIQVJTX1BFUl9UT0tFTik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbXBsZW1lbnRzIHRoZSBBbnRocm9waWMgcHJvdmlkZXIgZnVuY3Rpb25hbGl0eVxyXG4gKiBcclxuICogSGFuZGxlcyBjb21tdW5pY2F0aW9uIHdpdGggQW50aHJvcGljJ3MgQVBJLCBpbmNsdWRpbmc6XHJcbiAqIC0gQ2hhdCBjb21wbGV0aW9uc1xyXG4gKiAtIE1vZGVsIGxpc3RpbmdcclxuICogLSBDb25uZWN0aW9uIHRlc3RpbmdcclxuICogLSBTdHJlYW1pbmcgcmVzcG9uc2VzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQW50aHJvcGljUHJvdmlkZXIgZXh0ZW5kcyBCYXNlUHJvdmlkZXIge1xyXG4gICAgcHJvdGVjdGVkIGFwaUtleTogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIGJhc2VVcmwgPSAnaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbS92MSc7XHJcbiAgICBwcm90ZWN0ZWQgbW9kZWw6IHN0cmluZztcclxuICAgIHByaXZhdGUgY2xpZW50OiBBbnRocm9waWM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBpS2V5OiBzdHJpbmcsIG1vZGVsOiBzdHJpbmcgPSAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5Jykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xyXG4gICAgICAgIHRoaXMuY2xpZW50ID0gbmV3IEFudGhyb3BpYyh7XHJcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5hcGlLZXksXHJcbiAgICAgICAgICAgIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyOiB0cnVlIC8vIFJlcXVpcmVkIGZvciBicm93c2VyIGVudmlyb25tZW50c1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgY29tcGxldGlvbiBmcm9tIEFudGhyb3BpY1xyXG4gICAgICogXHJcbiAgICAgKiBTZW5kcyB0aGUgY29udmVyc2F0aW9uIHRvIEFudGhyb3BpYyBhbmQgc3RyZWFtcyBiYWNrIHRoZSByZXNwb25zZVxyXG4gICAgICogdXNpbmcgdGhlIG9mZmljaWFsIFNESydzIHN0cmVhbWluZyBzdXBwb3J0LlxyXG4gICAgICogXHJcbiAgICAgKiBBdXRvbWF0aWNhbGx5IGFkanVzdHMgbWF4X3Rva2VucyBpZiB0aGUgcmVxdWVzdCB3b3VsZCBleGNlZWQgdGhlIG1vZGVsJ3MgY29udGV4dCB3aW5kb3cuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyAtIFRoZSBjb252ZXJzYXRpb24gaGlzdG9yeVxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBTZXR0aW5ncyBmb3IgdGhpcyBjb21wbGV0aW9uXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldENvbXBsZXRpb24obWVzc2FnZXM6IE1lc3NhZ2VbXSwgb3B0aW9uczogQ29tcGxldGlvbk9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGNvbnRleHQgd2luZG93IHNpemUgZm9yIHRoZSBjdXJyZW50IG1vZGVsXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHRXaW5kb3cgPSBNT0RFTF9DT05URVhUX1dJTkRPV1NbdGhpcy5tb2RlbF0gPz8gMjAwMDAwO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gRXN0aW1hdGUgdG9rZW4gY291bnQgZm9yIGlucHV0IG1lc3NhZ2VzXHJcbiAgICAgICAgICAgIGNvbnN0IGlucHV0VG9rZW5zID0gZXN0aW1hdGVUb2tlbkNvdW50KG1lc3NhZ2VzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENhbGN1bGF0ZSBzYWZlIG1heF90b2tlbnMgdmFsdWVcclxuICAgICAgICAgICAgbGV0IG1heFRva2VucyA9IG9wdGlvbnMubWF4VG9rZW5zID8/IDEwMDA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBJZiB0aGUgY29tYmluZWQgaW5wdXQgKyBvdXRwdXQgdG9rZW5zIHdvdWxkIGV4Y2VlZCB0aGUgY29udGV4dCB3aW5kb3csXHJcbiAgICAgICAgICAgIC8vIGF1dG9tYXRpY2FsbHkgYWRqdXN0IG1heF90b2tlbnMgdG8gZml0XHJcbiAgICAgICAgICAgIGlmIChpbnB1dFRva2VucyArIG1heFRva2VucyA+IGNvbnRleHRXaW5kb3cpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFkanVzdGVkTWF4VG9rZW5zID0gY29udGV4dFdpbmRvdyAtIGlucHV0VG9rZW5zO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpZiAoYWRqdXN0ZWRNYXhUb2tlbnMgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm92aWRlckVycm9yVHlwZS5JbnZhbGlkUmVxdWVzdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYElucHV0IGlzIHRvbyBsb25nIGZvciAke3RoaXMubW9kZWx9J3MgY29udGV4dCB3aW5kb3cuIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgRXN0aW1hdGVkIGlucHV0IHRva2VuczogJHtpbnB1dFRva2Vuc30sIGNvbnRleHQgd2luZG93OiAke2NvbnRleHRXaW5kb3d9YFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgICAgICAgICAgIGBBZGp1c3RpbmcgbWF4X3Rva2VucyBmcm9tICR7bWF4VG9rZW5zfSB0byAke2FkanVzdGVkTWF4VG9rZW5zfSBgICtcclxuICAgICAgICAgICAgICAgICAgICBgdG8gZml0IHdpdGhpbiAke3RoaXMubW9kZWx9J3MgY29udGV4dCB3aW5kb3dgXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBtYXhUb2tlbnMgPSBhZGp1c3RlZE1heFRva2VucztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gRm9ybWF0IG1lc3NhZ2VzIGZvciBBbnRocm9waWMgQVBJXHJcbiAgICAgICAgICAgIGNvbnN0IHsgc3lzdGVtUHJvbXB0LCBhbnRocm9waWNNZXNzYWdlcyB9ID0gdGhpcy5mb3JtYXRNZXNzYWdlcyhtZXNzYWdlcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHJlcXVlc3QgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0UGFyYW1zOiBhbnkgPSB7XHJcbiAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBhbnRocm9waWNNZXNzYWdlcyxcclxuICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBvcHRpb25zLnRlbXBlcmF0dXJlID8/IDAuNyxcclxuICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IG1heFRva2VucyxcclxuICAgICAgICAgICAgICAgIHN0cmVhbTogdHJ1ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQWRkIHN5c3RlbSBwcm9tcHQgaWYgcHJlc2VudFxyXG4gICAgICAgICAgICBpZiAoc3lzdGVtUHJvbXB0KSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0UGFyYW1zLnN5c3RlbSA9IHN5c3RlbVByb21wdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBzdHJlYW0gd2l0aCBwcm9wZXIgbWVzc2FnZSBmb3JtYXRcclxuICAgICAgICAgICAgLy8gVXNlIHR5cGUgYXNzZXJ0aW9uIHRvIGJ5cGFzcyBUeXBlU2NyaXB0IGVycm9yc1xyXG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLmNsaWVudC5tZXNzYWdlcy5jcmVhdGUocmVxdWVzdFBhcmFtcykgYXMgYW55O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gUHJvY2VzcyB0aGUgc3RyZWFtIHVzaW5nIGEgdHJ5LWNhdGNoIHRvIGhhbmRsZSBhbnkgc3RyZWFtaW5nIGVycm9yc1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIHRoZSBzdHJlYW0gYmFzZWQgb24gdGhlIEFudGhyb3BpYyBTREsncyBzdHJlYW1pbmcgaW1wbGVtZW50YXRpb25cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzaW1wbGlmaWVkIGFwcHJvYWNoIHRoYXQgc2hvdWxkIHdvcmsgd2l0aCBtb3N0IHZlcnNpb25zIG9mIHRoZSBTREtcclxuICAgICAgICAgICAgICAgIGlmIChzdHJlYW0gJiYgdHlwZW9mIHN0cmVhbSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFtLm9uICYmIHR5cGVvZiBzdHJlYW0ub24gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXZlbnQtYmFzZWQgQVBJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5vbignY29udGVudF9ibG9ja19kZWx0YScsIChjaHVuazogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rLmRlbHRhPy50eXBlID09PSAndGV4dF9kZWx0YScgJiYgb3B0aW9ucy5zdHJlYW1DYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN0cmVhbUNhbGxiYWNrKGNodW5rLmRlbHRhLnRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLm9uKCdlbmQnLCByZXNvbHZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5vbignZXJyb3InLCByZWplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFN5bWJvbC5hc3luY0l0ZXJhdG9yIGluIHN0cmVhbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBc3luYyBpdGVyYXRvciBBUElcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaHVuay50eXBlID09PSAnY29udGVudF9ibG9ja19kZWx0YScgJiYgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuZGVsdGE/LnR5cGUgPT09ICd0ZXh0X2RlbHRhJyAmJiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN0cmVhbUNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zdHJlYW1DYWxsYmFjayhjaHVuay5kZWx0YS50ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5zdHJlYW1DYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb24tc3RyZWFtaW5nIHJlc3BvbnNlIChmYWxsYmFjaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdBbnRocm9waWMgcmVzcG9uc2UgaXMgbm90IGEgc3RyZWFtLCBoYW5kbGluZyBhcyByZWd1bGFyIHJlc3BvbnNlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnY29udGVudCcgaW4gc3RyZWFtICYmIHR5cGVvZiBzdHJlYW0uY29udGVudCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2soc3RyZWFtLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChzdHJlYW1FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBBbnRocm9waWMgc3RyZWFtOicsIHN0cmVhbUVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRocm93IHN0cmVhbUVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUHJvdmlkZXJFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FudGhyb3BpYyBzdHJlYW0gd2FzIGFib3J0ZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhbGxpbmcgQW50aHJvcGljOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGF2YWlsYWJsZSBBbnRocm9waWMgbW9kZWxzXHJcbiAgICAgKiBcclxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIENsYXVkZSBtb2RlbHMuXHJcbiAgICAgKiBOb3RlOiBBbnRocm9waWMgZG9lc24ndCBoYXZlIGEgbW9kZWxzIGVuZHBvaW50LCBzbyB3ZSByZXR1cm4ga25vd24gbW9kZWxzLlxyXG4gICAgICogVGhpcyBsaXN0IGlzIGJhc2VkIG9uIHRoZSBtb2RlbHMgZGVmaW5lZCBpbiBNT0RFTF9DT05URVhUX1dJTkRPV1MuXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIExpc3Qgb2YgYXZhaWxhYmxlIG1vZGVsIG5hbWVzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEF2YWlsYWJsZU1vZGVscygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBrZXlzIGZyb20gb3VyIE1PREVMX0NPTlRFWFRfV0lORE9XUyBvYmplY3RcclxuICAgICAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoZSBtb2RlbCBsaXN0IGlzIHN5bmNocm9uaXplZCB3aXRoIG91ciBjb250ZXh0IHdpbmRvdyBkZWZpbml0aW9uc1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoTU9ERUxfQ09OVEVYVF9XSU5ET1dTKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIEFudGhyb3BpYyBtb2RlbHM6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogRm9ybWF0IG1lc3NhZ2VzIGZvciBBbnRocm9waWMgQVBJXHJcbiAgICAgKiBcclxuICAgICAqIENvbnZlcnRzIGZyb20gdGhlIHBsdWdpbidzIE1lc3NhZ2UgZm9ybWF0IHRvIEFudGhyb3BpYydzIGV4cGVjdGVkIGZvcm1hdC5cclxuICAgICAqIEhhbmRsZXMgc3lzdGVtIG1lc3NhZ2VzIHNwZWNpYWxseSBhcyBBbnRocm9waWMgaGFzIGEgZGlmZmVyZW50IGZvcm1hdC5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIC0gQXJyYXkgb2YgbWVzc2FnZXMgdG8gZm9ybWF0XHJcbiAgICAgKiBAcmV0dXJucyBGb3JtYXR0ZWQgbWVzc2FnZXMgYW5kIHN5c3RlbSBwcm9tcHQgZm9yIEFudGhyb3BpYyBBUElcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBmb3JtYXRNZXNzYWdlcyhtZXNzYWdlczogTWVzc2FnZVtdKTogeyBcclxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6IHN0cmluZyB8IHVuZGVmaW5lZCwgXHJcbiAgICAgICAgYW50aHJvcGljTWVzc2FnZXM6IEFudGhyb3BpY01lc3NhZ2VbXSBcclxuICAgIH0ge1xyXG4gICAgICAgIC8vIEhhbmRsZSBzeXN0ZW0gbWVzc2FnZXMgc3BlY2lhbGx5IGFzIEFudGhyb3BpYyBoYXMgYSBkaWZmZXJlbnQgZm9ybWF0XHJcbiAgICAgICAgY29uc3Qgc3lzdGVtTWVzc2FnZXMgPSBtZXNzYWdlcy5maWx0ZXIobXNnID0+IG1zZy5yb2xlID09PSAnc3lzdGVtJyk7XHJcbiAgICAgICAgY29uc3Qgbm9uU3lzdGVtTWVzc2FnZXMgPSBtZXNzYWdlcy5maWx0ZXIobXNnID0+IG1zZy5yb2xlICE9PSAnc3lzdGVtJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRXh0cmFjdCBzeXN0ZW0gbWVzc2FnZSBpZiBwcmVzZW50XHJcbiAgICAgICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gc3lzdGVtTWVzc2FnZXMubGVuZ3RoID4gMCBcclxuICAgICAgICAgICAgPyBzeXN0ZW1NZXNzYWdlcy5tYXAobXNnID0+IG1zZy5jb250ZW50KS5qb2luKCdcXG5cXG4nKVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDb252ZXJ0IG1lc3NhZ2VzIHRvIEFudGhyb3BpYyBmb3JtYXRcclxuICAgICAgICAvLyBGaXJzdCwgcHJlcGFyZSBhIGNsZWFuIGFycmF5IG9mIG1lc3NhZ2VzIHdpdGggcHJvcGVyIHJvbGVzXHJcbiAgICAgICAgY29uc3QgYW50aHJvcGljTWVzc2FnZXMgPSBub25TeXN0ZW1NZXNzYWdlcy5tYXAobXNnID0+IHtcclxuICAgICAgICAgICAgLy8gRW5zdXJlIHJvbGUgaXMgZWl0aGVyICd1c2VyJyBvciAnYXNzaXN0YW50J1xyXG4gICAgICAgICAgICBjb25zdCByb2xlID0gKG1zZy5yb2xlID09PSAndXNlcicgfHwgbXNnLnJvbGUgPT09ICdhc3Npc3RhbnQnKSBcclxuICAgICAgICAgICAgICAgID8gbXNnLnJvbGUgYXMgJ3VzZXInIHwgJ2Fzc2lzdGFudCcgIC8vIFR5cGUgYXNzZXJ0aW9uIHRvIGhlbHAgVHlwZVNjcmlwdFxyXG4gICAgICAgICAgICAgICAgOiAndXNlcicgYXMgY29uc3Q7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4geyByb2xlLCBjb250ZW50OiBtc2cuY29udGVudCB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7IHN5c3RlbVByb21wdCwgYW50aHJvcGljTWVzc2FnZXMgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlc3QgY29ubmVjdGlvbiB0byBBbnRocm9waWNcclxuICAgICAqIFxyXG4gICAgICogVmVyaWZpZXMgdGhlIEFQSSBrZXkgd29ya3MgYnkgYXR0ZW1wdGluZyBhIHNpbXBsZSBjb21wbGV0aW9uLlxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJucyBUZXN0IHJlc3VsdHMgaW5jbHVkaW5nIHN1Y2Nlc3MvZmFpbHVyZVxyXG4gICAgICovXHJcbiAgICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPENvbm5lY3Rpb25UZXN0UmVzdWx0PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gVGVzdCB0aGUgY29ubmVjdGlvbiBieSBzZW5kaW5nIGEgbWluaW1hbCBtZXNzYWdlXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xpZW50Lm1lc3NhZ2VzLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbeyByb2xlOiAndXNlcicgYXMgY29uc3QsIGNvbnRlbnQ6ICdIaScgfV0sXHJcbiAgICAgICAgICAgICAgICBtYXhfdG9rZW5zOiAxXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9kZWxzID0gYXdhaXQgdGhpcy5nZXRBdmFpbGFibGVNb2RlbHMoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byBBbnRocm9waWMhJyxcclxuICAgICAgICAgICAgICAgIG1vZGVsc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVycm9yUmVzcG9uc2UoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIE9wZW5BSSBQcm92aWRlciBJbXBsZW1lbnRhdGlvblxyXG4gKiBcclxuICogVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgT3BlbkFJIHByb3ZpZGVyLFxyXG4gKiB3aGljaCBhbGxvd3MgdGhlIHBsdWdpbiB0byBpbnRlcmFjdCB3aXRoIE9wZW5BSSdzIEFQSSAoR1BULTMuNSwgR1BULTQsIGV0Yy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTWVzc2FnZSwgQ29tcGxldGlvbk9wdGlvbnMsIENvbm5lY3Rpb25UZXN0UmVzdWx0IH0gZnJvbSAnLi4vc3JjL3R5cGVzJztcclxuaW1wb3J0IHsgQmFzZVByb3ZpZGVyLCBQcm92aWRlckVycm9yLCBQcm92aWRlckVycm9yVHlwZSB9IGZyb20gJy4vYmFzZSc7XHJcblxyXG5pbnRlcmZhY2UgT3BlbkFJUmVzcG9uc2Uge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIG9iamVjdDogc3RyaW5nO1xyXG4gICAgY3JlYXRlZDogbnVtYmVyO1xyXG4gICAgbW9kZWw6IHN0cmluZztcclxuICAgIHN5c3RlbV9maW5nZXJwcmludDogc3RyaW5nO1xyXG4gICAgY2hvaWNlczogQXJyYXk8e1xyXG4gICAgICAgIGluZGV4OiBudW1iZXI7XHJcbiAgICAgICAgbWVzc2FnZToge1xyXG4gICAgICAgICAgICByb2xlOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHN0cmluZztcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZpbmlzaF9yZWFzb246IHN0cmluZztcclxuICAgIH0+O1xyXG4gICAgdXNhZ2U6IHtcclxuICAgICAgICBwcm9tcHRfdG9rZW5zOiBudW1iZXI7XHJcbiAgICAgICAgY29tcGxldGlvbl90b2tlbnM6IG51bWJlcjtcclxuICAgICAgICB0b3RhbF90b2tlbnM6IG51bWJlcjtcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbXBsZW1lbnRzIHRoZSBPcGVuQUkgcHJvdmlkZXIgZnVuY3Rpb25hbGl0eVxyXG4gKiBcclxuICogSGFuZGxlcyBjb21tdW5pY2F0aW9uIHdpdGggT3BlbkFJJ3MgQVBJLCBpbmNsdWRpbmc6XHJcbiAqIC0gQ2hhdCBjb21wbGV0aW9uc1xyXG4gKiAtIE1vZGVsIGxpc3RpbmdcclxuICogLSBDb25uZWN0aW9uIHRlc3RpbmdcclxuICogLSBTdHJlYW1pbmcgcmVzcG9uc2VzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT3BlbkFJUHJvdmlkZXIgZXh0ZW5kcyBCYXNlUHJvdmlkZXIge1xyXG4gICAgcHJvdGVjdGVkIGFwaUtleTogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIGJhc2VVcmwgPSAnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MSc7XHJcbiAgICBwcm90ZWN0ZWQgbW9kZWw6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcGlLZXk6IHN0cmluZywgbW9kZWw6IHN0cmluZyA9ICdncHQtNCcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xyXG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIGNvbXBsZXRpb24gZnJvbSBPcGVuQUlcclxuICAgICAqIFxyXG4gICAgICogU2VuZHMgdGhlIGNvbnZlcnNhdGlvbiB0byBPcGVuQUkgYW5kIHN0cmVhbXMgYmFjayB0aGUgcmVzcG9uc2UuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyAtIFRoZSBjb252ZXJzYXRpb24gaGlzdG9yeVxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBTZXR0aW5ncyBmb3IgdGhpcyBjb21wbGV0aW9uXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldENvbXBsZXRpb24obWVzc2FnZXM6IE1lc3NhZ2VbXSwgb3B0aW9uczogQ29tcGxldGlvbk9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2hhdC9jb21wbGV0aW9uc2AsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAsXHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlcyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogb3B0aW9ucy50ZW1wZXJhdHVyZSA/PyAwLjcsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4X3Rva2Vuczogb3B0aW9ucy5tYXhUb2tlbnMgPz8gMTAwMCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHRydWVcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLmFib3J0Q29udHJvbGxlcj8uc2lnbmFsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVIdHRwRXJyb3IocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZWFkZXIgPSByZXNwb25zZS5ib2R5Py5nZXRSZWFkZXIoKTtcclxuICAgICAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTtcclxuICAgICAgICAgICAgbGV0IGJ1ZmZlciA9ICcnO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlcj8ucmVhZCgpIHx8IHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKGRvbmUpIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ1ZmZlciArPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGJ1ZmZlci5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICBidWZmZXIgPSBsaW5lcy5wb3AoKSB8fCAnJztcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGluZS5zdGFydHNXaXRoKCdkYXRhOiAnKSAmJiBsaW5lICE9PSAnZGF0YTogW0RPTkVdJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UobGluZS5zbGljZSg2KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZGF0YS5jaG9pY2VzWzBdPy5kZWx0YT8uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50ICYmIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN0cmVhbUNhbGxiYWNrKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIHBhcnNpbmcgT3BlbkFJIHJlc3BvbnNlIGNodW5rOicsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUHJvdmlkZXJFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ09wZW5BSSBzdHJlYW0gd2FzIGFib3J0ZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhbGxpbmcgT3BlbkFJOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGF2YWlsYWJsZSBPcGVuQUkgbW9kZWxzXHJcbiAgICAgKiBcclxuICAgICAqIEZldGNoZXMgdGhlIGxpc3Qgb2YgbW9kZWxzIGZyb20gT3BlbkFJJ3MgQVBJLlxyXG4gICAgICogRmlsdGVycyB0byBvbmx5IGluY2x1ZGUgY2hhdCBtb2RlbHMgKEdQVC0zLjUsIEdQVC00LCBldGMuKVxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJucyBMaXN0IG9mIGF2YWlsYWJsZSBtb2RlbCBuYW1lc1xyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRBdmFpbGFibGVNb2RlbHMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9tb2RlbHNgLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAsXHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlSHR0cEVycm9yKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEuZGF0YVxyXG4gICAgICAgICAgICAgICAgLm1hcCgobW9kZWw6IGFueSkgPT4gbW9kZWwuaWQpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChpZDogc3RyaW5nKSA9PiBpZC5zdGFydHNXaXRoKCdncHQtJykpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIE9wZW5BSSBtb2RlbHM6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXN0IGNvbm5lY3Rpb24gdG8gT3BlbkFJXHJcbiAgICAgKiBcclxuICAgICAqIFZlcmlmaWVzIHRoZSBBUEkga2V5IHdvcmtzIGJ5IGF0dGVtcHRpbmcgdG8gbGlzdCBtb2RlbHMuXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIFRlc3QgcmVzdWx0cyBpbmNsdWRpbmcgc3VjY2Vzcy9mYWlsdXJlIGFuZCBhdmFpbGFibGUgbW9kZWxzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Q29ubmVjdGlvblRlc3RSZXN1bHQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBtb2RlbHMgPSBhd2FpdCB0aGlzLmdldEF2YWlsYWJsZU1vZGVscygpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIE9wZW5BSSEgRm91bmQgJHttb2RlbHMubGVuZ3RofSBhdmFpbGFibGUgbW9kZWxzLmAsXHJcbiAgICAgICAgICAgICAgICBtb2RlbHNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFcnJvclJlc3BvbnNlKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBHb29nbGUgR2VtaW5pIFByb3ZpZGVyIEltcGxlbWVudGF0aW9uXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBHb29nbGUgR2VtaW5pIHByb3ZpZGVyLFxyXG4gKiB3aGljaCBhbGxvd3MgdGhlIHBsdWdpbiB0byBpbnRlcmFjdCB3aXRoIEdvb2dsZSdzIEdlbWluaSBBUEkuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTWVzc2FnZSwgQ29tcGxldGlvbk9wdGlvbnMsIENvbm5lY3Rpb25UZXN0UmVzdWx0IH0gZnJvbSAnLi4vc3JjL3R5cGVzJztcclxuaW1wb3J0IHsgQmFzZVByb3ZpZGVyLCBQcm92aWRlckVycm9yLCBQcm92aWRlckVycm9yVHlwZSB9IGZyb20gJy4vYmFzZSc7XHJcblxyXG5pbnRlcmZhY2UgR2VtaW5pUmVzcG9uc2Uge1xyXG4gICAgY2FuZGlkYXRlczogQXJyYXk8e1xyXG4gICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgcGFydHM6IEFycmF5PHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IHN0cmluZztcclxuICAgICAgICAgICAgfT47XHJcbiAgICAgICAgICAgIHJvbGU6IHN0cmluZztcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZpbmlzaFJlYXNvbjogc3RyaW5nO1xyXG4gICAgICAgIGluZGV4OiBudW1iZXI7XHJcbiAgICAgICAgc2FmZXR5UmF0aW5nczogQXJyYXk8YW55PjtcclxuICAgIH0+O1xyXG4gICAgcHJvbXB0RmVlZGJhY2s6IHtcclxuICAgICAgICBzYWZldHlSYXRpbmdzOiBBcnJheTxhbnk+O1xyXG4gICAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEltcGxlbWVudHMgdGhlIEdvb2dsZSBHZW1pbmkgcHJvdmlkZXIgZnVuY3Rpb25hbGl0eVxyXG4gKiBcclxuICogSGFuZGxlcyBjb21tdW5pY2F0aW9uIHdpdGggR29vZ2xlJ3MgR2VtaW5pIEFQSSwgaW5jbHVkaW5nOlxyXG4gKiAtIENoYXQgY29tcGxldGlvbnNcclxuICogLSBNb2RlbCBsaXN0aW5nXHJcbiAqIC0gQ29ubmVjdGlvbiB0ZXN0aW5nXHJcbiAqIC0gU3RyZWFtaW5nIHJlc3BvbnNlc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEdlbWluaVByb3ZpZGVyIGV4dGVuZHMgQmFzZVByb3ZpZGVyIHtcclxuICAgIHByb3RlY3RlZCBhcGlLZXk6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBiYXNlVXJsID0gJ2h0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxJztcclxuICAgIHByb3RlY3RlZCBtb2RlbDogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwaUtleTogc3RyaW5nLCBtb2RlbDogc3RyaW5nID0gJ2dlbWluaS1wcm8nKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcclxuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSBjb21wbGV0aW9uIGZyb20gR29vZ2xlIEdlbWluaVxyXG4gICAgICogXHJcbiAgICAgKiBTZW5kcyB0aGUgY29udmVyc2F0aW9uIHRvIEdlbWluaSBhbmQgc3RyZWFtcyBiYWNrIHRoZSByZXNwb25zZS5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIC0gVGhlIGNvbnZlcnNhdGlvbiBoaXN0b3J5XHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFNldHRpbmdzIGZvciB0aGlzIGNvbXBsZXRpb25cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0Q29tcGxldGlvbihtZXNzYWdlczogTWVzc2FnZVtdLCBvcHRpb25zOiBDb21wbGV0aW9uT3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIEZvcm1hdCBtZXNzYWdlcyBmb3IgR2VtaW5pIEFQSVxyXG4gICAgICAgICAgICBjb25zdCBmb3JtYXR0ZWRNZXNzYWdlcyA9IHRoaXMuZm9ybWF0TWVzc2FnZXMobWVzc2FnZXMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gRm9yIGNoYXQgbW9kZWxzLCB3ZSBzaG91bGQgdXNlIHRoZSBnZW5lcmF0ZUNvbnRlbnQgZW5kcG9pbnRcclxuICAgICAgICAgICAgY29uc3QgdXJsID0gYCR7dGhpcy5iYXNlVXJsfS9tb2RlbHMvJHt0aGlzLm1vZGVsfTpnZW5lcmF0ZUNvbnRlbnQ/a2V5PSR7dGhpcy5hcGlLZXl9YDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFVzZSBub24tc3RyZWFtaW5nIHZlcnNpb24gZm9yIGNoYXQgY29tcGxldGlvbnNcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudHM6IGZvcm1hdHRlZE1lc3NhZ2VzLFxyXG4gICAgICAgICAgICAgICAgICAgIGdlbmVyYXRpb25Db25maWc6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IG9wdGlvbnMudGVtcGVyYXR1cmUgPz8gMC43LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhPdXRwdXRUb2tlbnM6IG9wdGlvbnMubWF4VG9rZW5zID8/IDEwMDBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5hYm9ydENvbnRyb2xsZXI/LnNpZ25hbFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlSHR0cEVycm9yKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gRm9yIG5vbi1zdHJlYW1pbmcgcmVzcG9uc2UsIHBhcnNlIHRoZSBKU09OIGRpcmVjdGx5XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHZW1pbmkgcmVzcG9uc2U6JywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gRXh0cmFjdCB0aGUgdGV4dCBmcm9tIHRoZSByZXNwb25zZVxyXG4gICAgICAgICAgICBjb25zdCB0ZXh0ID0gZGF0YS5jYW5kaWRhdGVzPy5bMF0/LmNvbnRlbnQ/LnBhcnRzPy5bMF0/LnRleHQ7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodGV4dCAmJiBvcHRpb25zLnN0cmVhbUNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBFdmVuIHRob3VnaCBpdCdzIG5vdCBzdHJlYW1pbmcsIHdlIHVzZSB0aGUgc3RyZWFtQ2FsbGJhY2tcclxuICAgICAgICAgICAgICAgIC8vIHRvIG1haW50YWluIGNvbXBhdGliaWxpdHkgd2l0aCB0aGUgZXhpc3RpbmcgaW50ZXJmYWNlXHJcbiAgICAgICAgICAgICAgICBvcHRpb25zLnN0cmVhbUNhbGxiYWNrKHRleHQpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdObyB0ZXh0IGZvdW5kIGluIEdlbWluaSByZXNwb25zZTonLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQcm92aWRlckVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnR2VtaW5pIHJlcXVlc3Qgd2FzIGFib3J0ZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhbGxpbmcgR2VtaW5pOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGF2YWlsYWJsZSBHZW1pbmkgbW9kZWxzXHJcbiAgICAgKiBcclxuICAgICAqIEZldGNoZXMgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIG1vZGVscyBmcm9tIEdvb2dsZSdzIEFQSS5cclxuICAgICAqIEZpbHRlcnMgdG8gb25seSBpbmNsdWRlIEdlbWluaSBtb2RlbHMuXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIExpc3Qgb2YgYXZhaWxhYmxlIG1vZGVsIG5hbWVzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEF2YWlsYWJsZU1vZGVscygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L21vZGVscz9rZXk9JHt0aGlzLmFwaUtleX1gLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUh0dHBFcnJvcihyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhLm1vZGVsc1xyXG4gICAgICAgICAgICAgICAgLm1hcCgobW9kZWw6IGFueSkgPT4gbW9kZWwubmFtZS5zcGxpdCgnLycpLnBvcCgpKVxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoaWQ6IHN0cmluZykgPT4gaWQuc3RhcnRzV2l0aCgnZ2VtaW5pLScpKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBHZW1pbmkgbW9kZWxzOicsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGVzdCBjb25uZWN0aW9uIHRvIEdlbWluaVxyXG4gICAgICogXHJcbiAgICAgKiBWZXJpZmllcyB0aGUgQVBJIGtleSB3b3JrcyBieSBhdHRlbXB0aW5nIHRvIGxpc3QgbW9kZWxzLlxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJucyBUZXN0IHJlc3VsdHMgaW5jbHVkaW5nIHN1Y2Nlc3MvZmFpbHVyZSBhbmQgYXZhaWxhYmxlIG1vZGVsc1xyXG4gICAgICovXHJcbiAgICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPENvbm5lY3Rpb25UZXN0UmVzdWx0PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgbW9kZWxzID0gYXdhaXQgdGhpcy5nZXRBdmFpbGFibGVNb2RlbHMoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byBHb29nbGUgR2VtaW5pISBGb3VuZCAke21vZGVscy5sZW5ndGh9IGF2YWlsYWJsZSBtb2RlbHMuYCxcclxuICAgICAgICAgICAgICAgIG1vZGVsc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVycm9yUmVzcG9uc2UoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZvcm1hdCBtZXNzYWdlcyBmb3IgR2VtaW5pIEFQSVxyXG4gICAgICogXHJcbiAgICAgKiBDb252ZXJ0cyBmcm9tIHRoZSBwbHVnaW4ncyBNZXNzYWdlIGZvcm1hdCB0byBHZW1pbmkncyBleHBlY3RlZCBmb3JtYXQuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyAtIEFycmF5IG9mIG1lc3NhZ2VzIHRvIGZvcm1hdFxyXG4gICAgICogQHJldHVybnMgRm9ybWF0dGVkIG1lc3NhZ2VzIGZvciBHZW1pbmkgQVBJXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZm9ybWF0TWVzc2FnZXMobWVzc2FnZXM6IE1lc3NhZ2VbXSk6IEFycmF5PGFueT4ge1xyXG4gICAgICAgIC8vIFRoZSBHZW1pbmkgQVBJIGV4cGVjdHMgYSBjaGF0IGZvcm1hdCB3aGVyZTpcclxuICAgICAgICAvLyAxLiBTeXN0ZW0gbWVzc2FnZXMgc2hvdWxkIGJlIHNlbnQgYXMgdXNlciBtZXNzYWdlcyB0aGF0IGNvbWUgZmlyc3RcclxuICAgICAgICAvLyAyLiBFYWNoIG1lc3NhZ2UgbmVlZHMgdG8gaGF2ZSBhIHJvbGUgYW5kIHBhcnRzIGFycmF5XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgZ2VtaW5pTWVzc2FnZXMgPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBGaXJzdCwgZmluZCBhbmQgcHJvY2VzcyBzeXN0ZW0gbWVzc2FnZXNcclxuICAgICAgICBjb25zdCBzeXN0ZW1NZXNzYWdlcyA9IG1lc3NhZ2VzLmZpbHRlcihtc2cgPT4gbXNnLnJvbGUgPT09ICdzeXN0ZW0nKTtcclxuICAgICAgICBjb25zdCBub25TeXN0ZW1NZXNzYWdlcyA9IG1lc3NhZ2VzLmZpbHRlcihtc2cgPT4gbXNnLnJvbGUgIT09ICdzeXN0ZW0nKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBBZGQgc3lzdGVtIG1lc3NhZ2VzIGZpcnN0IGFzIHVzZXIgbWVzc2FnZXNcclxuICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2Ygc3lzdGVtTWVzc2FnZXMpIHtcclxuICAgICAgICAgICAgZ2VtaW5pTWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICByb2xlOiAndXNlcicsXHJcbiAgICAgICAgICAgICAgICBwYXJ0czogW3sgdGV4dDogbWVzc2FnZS5jb250ZW50IH1dXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICAvLyBUaGVuIGFkZCB0aGUgcmVndWxhciBjb252ZXJzYXRpb24gbWVzc2FnZXNcclxuICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2Ygbm9uU3lzdGVtTWVzc2FnZXMpIHtcclxuICAgICAgICAgICAgLy8gR2VtaW5pIG9ubHkgc3VwcG9ydHMgJ3VzZXInIGFuZCAnbW9kZWwnIHJvbGVzXHJcbiAgICAgICAgICAgIGNvbnN0IHJvbGUgPSBtZXNzYWdlLnJvbGUgPT09ICdhc3Npc3RhbnQnID8gJ21vZGVsJyA6ICd1c2VyJztcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGdlbWluaU1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgcm9sZTogcm9sZSxcclxuICAgICAgICAgICAgICAgIHBhcnRzOiBbeyB0ZXh0OiBtZXNzYWdlLmNvbnRlbnQgfV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBnZW1pbmlNZXNzYWdlcztcclxuICAgIH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIE9sbGFtYSBQcm92aWRlciBJbXBsZW1lbnRhdGlvblxyXG4gKiBcclxuICogVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgT2xsYW1hIHByb3ZpZGVyLFxyXG4gKiB3aGljaCBhbGxvd3MgdGhlIHBsdWdpbiB0byBpbnRlcmFjdCB3aXRoIGEgbG9jYWwgT2xsYW1hIHNlcnZlclxyXG4gKiBydW5uaW5nIEFJIG1vZGVscyBsaWtlIExsYW1hLCBNaXN0cmFsLCBldGMuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTWVzc2FnZSwgQ29tcGxldGlvbk9wdGlvbnMsIENvbm5lY3Rpb25UZXN0UmVzdWx0IH0gZnJvbSAnLi4vc3JjL3R5cGVzJztcclxuaW1wb3J0IHsgQmFzZVByb3ZpZGVyLCBQcm92aWRlckVycm9yLCBQcm92aWRlckVycm9yVHlwZSB9IGZyb20gJy4vYmFzZSc7XHJcblxyXG5pbnRlcmZhY2UgT2xsYW1hUmVzcG9uc2Uge1xyXG4gICAgbW9kZWw6IHN0cmluZztcclxuICAgIGNyZWF0ZWRfYXQ6IHN0cmluZztcclxuICAgIHJlc3BvbnNlOiBzdHJpbmc7XHJcbiAgICBkb25lOiBib29sZWFuO1xyXG4gICAgY29udGV4dD86IG51bWJlcltdO1xyXG4gICAgdG90YWxfZHVyYXRpb24/OiBudW1iZXI7XHJcbiAgICBsb2FkX2R1cmF0aW9uPzogbnVtYmVyO1xyXG4gICAgcHJvbXB0X2V2YWxfZHVyYXRpb24/OiBudW1iZXI7XHJcbiAgICBldmFsX2R1cmF0aW9uPzogbnVtYmVyO1xyXG4gICAgZXZhbF9jb3VudD86IG51bWJlcjtcclxufVxyXG5cclxuaW50ZXJmYWNlIE9sbGFtYU1vZGVsIHtcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIG1vZGlmaWVkX2F0OiBzdHJpbmc7XHJcbiAgICBzaXplOiBudW1iZXI7XHJcbiAgICBkaWdlc3Q6IHN0cmluZztcclxuICAgIGRldGFpbHM6IHtcclxuICAgICAgICBmb3JtYXQ6IHN0cmluZztcclxuICAgICAgICBmYW1pbHk6IHN0cmluZztcclxuICAgICAgICBwYXJhbWV0ZXJfc2l6ZTogc3RyaW5nO1xyXG4gICAgICAgIHF1YW50aXphdGlvbl9sZXZlbDogc3RyaW5nO1xyXG4gICAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEltcGxlbWVudHMgdGhlIE9sbGFtYSBwcm92aWRlciBmdW5jdGlvbmFsaXR5XHJcbiAqIFxyXG4gKiBIYW5kbGVzIGNvbW11bmljYXRpb24gd2l0aCBhIGxvY2FsIE9sbGFtYSBzZXJ2ZXIsIGluY2x1ZGluZzpcclxuICogLSBDaGF0IGNvbXBsZXRpb25zXHJcbiAqIC0gTW9kZWwgbGlzdGluZ1xyXG4gKiAtIENvbm5lY3Rpb24gdGVzdGluZ1xyXG4gKiAtIFN0cmVhbWluZyByZXNwb25zZXNcclxuICogXHJcbiAqIFJlcXVpcmVzIE9sbGFtYSB0byBiZSBpbnN0YWxsZWQgYW5kIHJ1bm5pbmcgbG9jYWxseTpcclxuICogMS4gSW5zdGFsbCBPbGxhbWEgZnJvbSBodHRwczovL29sbGFtYS5haVxyXG4gKiAyLiBTdGFydCB0aGUgT2xsYW1hIHNlcnZlclxyXG4gKiAzLiBQdWxsIHlvdXIgZGVzaXJlZCBtb2RlbHMgdXNpbmcgJ29sbGFtYSBwdWxsIG1vZGVsLW5hbWUnXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT2xsYW1hUHJvdmlkZXIgZXh0ZW5kcyBCYXNlUHJvdmlkZXIge1xyXG4gICAgcHJvdGVjdGVkIGFwaUtleTogc3RyaW5nID0gJyc7IC8vIE5vdCB1c2VkIGZvciBPbGxhbWFcclxuICAgIHByb3RlY3RlZCBiYXNlVXJsOiBzdHJpbmc7XHJcbiAgICBwcm90ZWN0ZWQgbW9kZWw6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihzZXJ2ZXJVcmw6IHN0cmluZyA9ICdodHRwOi8vbG9jYWxob3N0OjExNDM0JywgbW9kZWw6IHN0cmluZyA9ICdsbGFtYTInKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmJhc2VVcmwgPSBzZXJ2ZXJVcmwucmVwbGFjZSgvXFwvJC8sICcnKTsgLy8gUmVtb3ZlIHRyYWlsaW5nIHNsYXNoIGlmIHByZXNlbnRcclxuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb252ZXJ0IG1lc3NhZ2VzIHRvIE9sbGFtYSBmb3JtYXRcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIC0gU3RhbmRhcmQgbWVzc2FnZSBmb3JtYXRcclxuICAgICAqIEByZXR1cm5zIFByb21wdCBzdHJpbmcgaW4gT2xsYW1hIGZvcm1hdFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNvbnZlcnRUb09sbGFtYUZvcm1hdChtZXNzYWdlczogTWVzc2FnZVtdKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gbWVzc2FnZXMubWFwKG1zZyA9PiB7XHJcbiAgICAgICAgICAgIGlmIChtc2cucm9sZSA9PT0gJ3N5c3RlbScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBgU3lzdGVtOiAke21zZy5jb250ZW50fVxcblxcbmA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGAke21zZy5yb2xlID09PSAndXNlcicgPyAnSHVtYW4nIDogJ0Fzc2lzdGFudCd9OiAke21zZy5jb250ZW50fVxcblxcbmA7XHJcbiAgICAgICAgfSkuam9pbignJykgKyAnQXNzaXN0YW50Oic7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSBjb21wbGV0aW9uIGZyb20gT2xsYW1hXHJcbiAgICAgKiBcclxuICAgICAqIFNlbmRzIHRoZSBjb252ZXJzYXRpb24gdG8gdGhlIGxvY2FsIE9sbGFtYSBzZXJ2ZXIgYW5kIHN0cmVhbXMgYmFjayB0aGUgcmVzcG9uc2UuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyAtIFRoZSBjb252ZXJzYXRpb24gaGlzdG9yeVxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBTZXR0aW5ncyBmb3IgdGhpcyBjb21wbGV0aW9uXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldENvbXBsZXRpb24obWVzc2FnZXM6IE1lc3NhZ2VbXSwgb3B0aW9uczogQ29tcGxldGlvbk9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwcm9tcHQgPSB0aGlzLmNvbnZlcnRUb09sbGFtYUZvcm1hdChtZXNzYWdlcyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9hcGkvZ2VuZXJhdGVgLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxyXG4gICAgICAgICAgICAgICAgICAgIHByb21wdCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogb3B0aW9ucy50ZW1wZXJhdHVyZSA/PyAwLjcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bV9wcmVkaWN0OiBvcHRpb25zLm1heFRva2VucyA/PyAxMDAwXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuYWJvcnRDb250cm9sbGVyPy5zaWduYWxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUh0dHBFcnJvcihyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IHJlc3BvbnNlLmJvZHk/LmdldFJlYWRlcigpO1xyXG4gICAgICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpO1xyXG4gICAgICAgICAgICBsZXQgYnVmZmVyID0gJyc7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyPy5yZWFkKCkgfHwgeyBkb25lOiB0cnVlLCB2YWx1ZTogdW5kZWZpbmVkIH07XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9uZSkgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgYnVmZmVyICs9IGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gYnVmZmVyLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGxpbmVzLnBvcCgpIHx8ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lLnRyaW0oKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YTogT2xsYW1hUmVzcG9uc2UgPSBKU09OLnBhcnNlKGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGRhdGEucmVzcG9uc2UgJiYgb3B0aW9ucy5zdHJlYW1DYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2soZGF0YS5yZXNwb25zZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgcGFyc2luZyBPbGxhbWEgcmVzcG9uc2UgY2h1bms6JywgZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQcm92aWRlckVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnT2xsYW1hIHN0cmVhbSB3YXMgYWJvcnRlZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2FsbGluZyBPbGxhbWE6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYXZhaWxhYmxlIE9sbGFtYSBtb2RlbHNcclxuICAgICAqIFxyXG4gICAgICogRmV0Y2hlcyB0aGUgbGlzdCBvZiBtb2RlbHMgaW5zdGFsbGVkIG9uIHRoZSBsb2NhbCBPbGxhbWEgc2VydmVyLlxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJucyBMaXN0IG9mIGF2YWlsYWJsZSBtb2RlbCBuYW1lc1xyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRBdmFpbGFibGVNb2RlbHMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9hcGkvdGFnc2ApO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVIdHRwRXJyb3IocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICByZXR1cm4gKGRhdGEubW9kZWxzIGFzIE9sbGFtYU1vZGVsW10pPy5tYXAobW9kZWwgPT4gbW9kZWwubmFtZSkgfHwgW107XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgT2xsYW1hIG1vZGVsczonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlc3QgY29ubmVjdGlvbiB0byBPbGxhbWFcclxuICAgICAqIFxyXG4gICAgICogVmVyaWZpZXMgdGhlIE9sbGFtYSBzZXJ2ZXIgaXMgcnVubmluZyBhbmQgYWNjZXNzaWJsZS5cclxuICAgICAqIEFsc28gY2hlY2tzIGlmIGFueSBtb2RlbHMgYXJlIGluc3RhbGxlZC5cclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMgVGVzdCByZXN1bHRzIGluY2x1ZGluZyBzdWNjZXNzL2ZhaWx1cmUgYW5kIGF2YWlsYWJsZSBtb2RlbHNcclxuICAgICAqL1xyXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxDb25uZWN0aW9uVGVzdFJlc3VsdD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IHRoaXMuZ2V0QXZhaWxhYmxlTW9kZWxzKCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAobW9kZWxzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiAnQ29ubmVjdGVkIHRvIE9sbGFtYSBzZXJ2ZXIsIGJ1dCBubyBtb2RlbHMgYXJlIGluc3RhbGxlZC4gVXNlIFwib2xsYW1hIHB1bGwgbW9kZWwtbmFtZVwiIHRvIGluc3RhbGwgbW9kZWxzLicsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxzOiBbXVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byBPbGxhbWEhIEZvdW5kICR7bW9kZWxzLmxlbmd0aH0gaW5zdGFsbGVkIG1vZGVscy5gLFxyXG4gICAgICAgICAgICAgICAgbW9kZWxzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3JSZXNwb25zZShlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsICIvKipcclxuICogQUkgUHJvdmlkZXJzIEluZGV4XHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgZXhwb3J0cyBhbGwgQUkgcHJvdmlkZXIgaW1wbGVtZW50YXRpb25zIGFuZCBzaGFyZWQgdHlwZXMuXHJcbiAqIEltcG9ydCBwcm92aWRlcnMgZnJvbSB0aGlzIGZpbGUgcmF0aGVyIHRoYW4gZGlyZWN0bHkgZnJvbSB0aGVpciBtb2R1bGVzLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IE15UGx1Z2luU2V0dGluZ3MgfSBmcm9tICcuLi9zcmMvdHlwZXMnO1xyXG5pbXBvcnQgeyBCYXNlUHJvdmlkZXIsIFByb3ZpZGVyRXJyb3IsIFByb3ZpZGVyRXJyb3JUeXBlIH0gZnJvbSAnLi9iYXNlJztcclxuaW1wb3J0IHsgQW50aHJvcGljUHJvdmlkZXIgfSBmcm9tICcuL2FudGhyb3BpYyc7XHJcbmltcG9ydCB7IE9wZW5BSVByb3ZpZGVyIH0gZnJvbSAnLi9vcGVuYWknO1xyXG5pbXBvcnQgeyBHZW1pbmlQcm92aWRlciB9IGZyb20gJy4vZ2VtaW5pJztcclxuaW1wb3J0IHsgT2xsYW1hUHJvdmlkZXIgfSBmcm9tICcuL29sbGFtYSc7XHJcblxyXG5leHBvcnQgeyBCYXNlUHJvdmlkZXIsIFByb3ZpZGVyRXJyb3IsIFByb3ZpZGVyRXJyb3JUeXBlIH07XHJcbmV4cG9ydCB7IEFudGhyb3BpY1Byb3ZpZGVyIH07XHJcbmV4cG9ydCB7IE9wZW5BSVByb3ZpZGVyIH07XHJcbmV4cG9ydCB7IEdlbWluaVByb3ZpZGVyIH07XHJcbmV4cG9ydCB7IE9sbGFtYVByb3ZpZGVyIH07XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhbiBBSSBwcm92aWRlciBpbnN0YW5jZSBiYXNlZCBvbiB0aGUgcGx1Z2luIHNldHRpbmdzXHJcbiAqIFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgVGhlIHBsdWdpbiBzZXR0aW5ncyBjb250YWluaW5nIHByb3ZpZGVyIGNvbmZpZ3VyYXRpb25cclxuICogQHJldHVybnMgVGhlIGFwcHJvcHJpYXRlIHByb3ZpZGVyIGluc3RhbmNlXHJcbiAqIEB0aHJvd3MgRXJyb3IgaWYgdGhlIHByb3ZpZGVyIHR5cGUgaXMgaW52YWxpZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb3ZpZGVyKHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzKTogQmFzZVByb3ZpZGVyIHtcclxuICAgIHN3aXRjaCAoc2V0dGluZ3MucHJvdmlkZXIpIHtcclxuICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE9wZW5BSVByb3ZpZGVyKFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MuYXBpS2V5LFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MubW9kZWxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBjYXNlICdhbnRocm9waWMnOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFudGhyb3BpY1Byb3ZpZGVyKFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MuYXBpS2V5LFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MubW9kZWxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBjYXNlICdnZW1pbmknOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbWluaVByb3ZpZGVyKFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MuYXBpS2V5LFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MubW9kZWxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBjYXNlICdvbGxhbWEnOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE9sbGFtYVByb3ZpZGVyKFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3Muc2VydmVyVXJsLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3MubW9kZWxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcHJvdmlkZXIgdHlwZTogJHtzZXR0aW5ncy5wcm92aWRlcn1gKTtcclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBNeVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCBNeVBsdWdpbiBmcm9tICcuL21haW4nO1xyXG5cclxuLyoqXHJcbiAqIFBsdWdpbiBTZXR0aW5ncyBUYWJcclxuICogXHJcbiAqIFRoaXMgdGFiIHByb3ZpZGVzIGEgdXNlciBpbnRlcmZhY2UgZm9yIGNvbmZpZ3VyaW5nIHRoZSBwbHVnaW4gc2V0dGluZ3MuXHJcbiAqIEl0IGF1dG9tYXRpY2FsbHkgb3BlbnMgdGhlIG1vZGVsIHNldHRpbmdzIHZpZXcgd2hlbiBzZXR0aW5ncyBhcmUgY2hhbmdlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNeVBsdWdpblNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICAgIHBsdWdpbjogTXlQbHVnaW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwbGF5IHRoZSBzZXR0aW5ncyB0YWJcclxuICAgICAqIFxyXG4gICAgICogU2hvd3Mgb25seSB0aGUgYXV0by1vcGVuIHNldHRpbmcgaGVyZSBzaW5jZSBhbGwgb3RoZXIgc2V0dGluZ3NcclxuICAgICAqIGFyZSBtYW5hZ2VkIGluIHRoZSBtb2RlbCBzZXR0aW5ncyB2aWV3IGZvciBiZXR0ZXIgb3JnYW5pemF0aW9uLlxyXG4gICAgICovXHJcbiAgICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQUkgQXNzaXN0YW50IFNldHRpbmdzJyB9KTtcclxuXHJcbiAgICAgICAgLy8gQVBJIEtleXMgU2VjdGlvblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FQSSBLZXlzJyB9KTtcclxuXHJcbiAgICAgICAgLy8gT3BlbkFJIEFQSSBLZXlcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ09wZW5BSSBBUEkgS2V5JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0VudGVyIHlvdXIgT3BlbkFJIEFQSSBrZXknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgeW91ciBBUEkga2V5JylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5hcGlLZXkpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MuYXBpS2V5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIEFudGhyb3BpYyBBUEkgS2V5XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdBbnRocm9waWMgQVBJIEtleScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdFbnRlciB5b3VyIEFudGhyb3BpYyBBUEkga2V5JylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHlvdXIgQVBJIGtleScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MuYXBpS2V5KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBHZW1pbmkgQVBJIEtleVxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnR29vZ2xlIEFQSSBLZXknKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnRW50ZXIgeW91ciBHb29nbGUgQVBJIGtleScpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIEFQSSBrZXknKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbWluaVNldHRpbmdzLmFwaUtleSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW1pbmlTZXR0aW5ncy5hcGlLZXkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gT2xsYW1hIFNlcnZlciBVUkxcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ09sbGFtYSBTZXJ2ZXIgVVJMJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0VudGVyIHlvdXIgT2xsYW1hIHNlcnZlciBVUkwgKGRlZmF1bHQ6IGh0dHA6Ly9sb2NhbGhvc3Q6MTE0MzQpJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHA6Ly9sb2NhbGhvc3Q6MTE0MzQnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9sbGFtYVNldHRpbmdzLnNlcnZlclVybClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vbGxhbWFTZXR0aW5ncy5zZXJ2ZXJVcmwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gTW9kZWwgU2V0dGluZ3MgU2VjdGlvblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ01vZGVsIFNldHRpbmdzJyB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdBdXRvLW9wZW4gTW9kZWwgU2V0dGluZ3MnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSBvcGVuIG1vZGVsIHNldHRpbmdzIHdoZW4gT2JzaWRpYW4gc3RhcnRzJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b09wZW5Nb2RlbFNldHRpbmdzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9PcGVuTW9kZWxTZXR0aW5ncyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBBZGQgYSBidXR0b24gdG8gb3BlbiBtb2RlbCBzZXR0aW5nc1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnT3BlbiBNb2RlbCBTZXR0aW5ncycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdPcGVuIHRoZSBtb2RlbCBzZXR0aW5ncyB2aWV3JylcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnT3BlbicpXHJcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYWN0aXZhdGVWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2hhdCBTZXBhcmF0b3InKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIHN0cmluZyB1c2VkIHRvIHNlcGFyYXRlIGNoYXQgbWVzc2FnZXMuJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCctLS0tJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdFNlcGFyYXRvciA/PyAnJylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdFNlcGFyYXRvciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2hhdCBTdGFydCBTdHJpbmcnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIHN0cmluZyB0aGF0IGluZGljYXRlcyB3aGVyZSB0byBzdGFydCB0YWtpbmcgdGhlIG5vdGUgZm9yIGNvbnRleHQuJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCc9PT1TVEFSVD09PScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRTdGFydFN0cmluZyA/PyAnJylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdFN0YXJ0U3RyaW5nID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdDaGF0IEVuZCBTdHJpbmcnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIHN0cmluZyB0aGF0IGluZGljYXRlcyB3aGVyZSB0byBlbmQgdGFraW5nIHRoZSBub3RlIGZvciBjb250ZXh0LicpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignPT09RU5EPT09JylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdEVuZFN0cmluZyA/PyAnJylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdEVuZFN0cmluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIE1vZGFsLCBBcHAsIFNldHRpbmcsIE1hcmtkb3duUmVuZGVyZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBNeVBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgY3JlYXRlUHJvdmlkZXIgfSBmcm9tICcuLi8uLi9wcm92aWRlcnMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9DSEFUID0gJ2NoYXQtdmlldyc7XHJcblxyXG5jbGFzcyBTZXR0aW5nc01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBNeVBsdWdpbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoJ0FJIE1vZGVsIFNldHRpbmdzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnYWktc2V0dGluZ3MtbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gU2Vzc2lvbiBNYW5hZ2VtZW50IFNldHRpbmdzXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ1Nlc3Npb24gTWFuYWdlbWVudCcgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQXV0by1zYXZlIFNlc3Npb25zJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgc2F2ZSBjaGF0IG1lc3NhZ2VzIHRvIHNlc3Npb25zJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b1NhdmVTZXNzaW9ucylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU2F2ZVNlc3Npb25zID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ01heGltdW0gU2Vzc2lvbnMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnTWF4aW11bSBudW1iZXIgb2YgY2hhdCBzZXNzaW9ucyB0byBrZWVwIChvbGRlc3Qgd2lsbCBiZSByZW1vdmVkKScpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygxLCA1MCwgMSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhTZXNzaW9ucylcclxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4U2Vzc2lvbnMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZW1vdmUgb2xkZXN0IHNlc3Npb25zIGlmIHdlJ3JlIG92ZXIgdGhlIGxpbWl0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnNlc3Npb25zLmxlbmd0aCA+IHZhbHVlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnNlc3Npb25zID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2Vzc2lvbnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zb3J0KChhLCBiKSA9PiBiLmxhc3RVcGRhdGVkIC0gYS5sYXN0VXBkYXRlZClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zbGljZSgwLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBQcm92aWRlciBzZWxlY3Rpb25cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdBSSBQcm92aWRlcicpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdDaG9vc2Ugd2hpY2ggQUkgcHJvdmlkZXIgdG8gdXNlJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignb3BlbmFpJywgJ09wZW5BSSAoQ2hhdEdQVCknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2FudGhyb3BpYycsICdBbnRocm9waWMgKENsYXVkZSknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaScsICdHb29nbGUgKEdlbWluaSknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ29sbGFtYScsICdPbGxhbWEgKExvY2FsIEFJKScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6ICdvcGVuYWknIHwgJ2FudGhyb3BpYycgfCAnZ2VtaW5pJyB8ICdvbGxhbWEnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpOyAvLyBSZWZyZXNoIHZpZXcgdG8gc2hvdyBwcm92aWRlci1zcGVjaWZpYyBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIC8vIFN5c3RlbSBtZXNzYWdlXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnU3lzdGVtIE1lc3NhZ2UnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnU2V0IHRoZSBzeXN0ZW0gbWVzc2FnZSBmb3IgdGhlIEFJJylcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeXN0ZW1NZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnN5c3RlbU1lc3NhZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIFxyXG4gICAgICAgIC8vIEluY2x1ZGUgZGF0ZSB3aXRoIHN5c3RlbSBtZXNzYWdlXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnSW5jbHVkZSBEYXRlIHdpdGggU3lzdGVtIE1lc3NhZ2UnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQWRkIHRoZSBjdXJyZW50IGRhdGUgdG8gdGhlIHN5c3RlbSBtZXNzYWdlJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZURhdGVXaXRoU3lzdGVtTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlRGF0ZVdpdGhTeXN0ZW1NZXNzYWdlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICBcclxuICAgICAgICAvLyBJbmNsdWRlIHRpbWUgd2l0aCBzeXN0ZW0gbWVzc2FnZVxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0luY2x1ZGUgVGltZSB3aXRoIFN5c3RlbSBNZXNzYWdlJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0FkZCB0aGUgY3VycmVudCB0aW1lIGFsb25nIHdpdGggdGhlIGRhdGUgdG8gdGhlIHN5c3RlbSBtZXNzYWdlJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZVRpbWVXaXRoU3lzdGVtTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlVGltZVdpdGhTeXN0ZW1NZXNzYWdlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICBcclxuICAgICAgICAvLyBFbmFibGUgT2JzaWRpYW4gbGlua3NcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbmFibGUgT2JzaWRpYW4gTGlua3MnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnUmVhZCBPYnNpZGlhbiBsaW5rcyBpbiBtZXNzYWdlcyB1c2luZyBbW2ZpbGVuYW1lXV0gc3ludGF4JylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlT2JzaWRpYW5MaW5rcylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVPYnNpZGlhbkxpbmtzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICBcclxuICAgICAgICAvLyBFbmFibGUgY29udGV4dCBub3Rlc1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0VuYWJsZSBDb250ZXh0IE5vdGVzJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0F0dGFjaCBzcGVjaWZpZWQgbm90ZSBjb250ZW50IHRvIGNoYXQgbWVzc2FnZXMnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb250ZXh0Tm90ZXMpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ29udGV4dE5vdGVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICBcclxuICAgICAgICAvLyBDb250ZXh0IG5vdGVzXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ29udGV4dCBOb3RlcycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdOb3RlcyB0byBhdHRhY2ggYXMgY29udGV4dCAoc3VwcG9ydHMgW1tmaWxlbmFtZV1dIGFuZCBbW2ZpbGVuYW1lI2hlYWRlcl1dIHN5bnRheCknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCdbW05vdGUgTmFtZV1dXFxuW1tBbm90aGVyIE5vdGUjSGVhZGVyXV0nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZXh0Tm90ZXMgfHwgJycpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZXh0Tm90ZXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgLy8gRW5hYmxlIHN0cmVhbWluZ1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0VuYWJsZSBTdHJlYW1pbmcnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnRW5hYmxlIG9yIGRpc2FibGUgc3RyZWFtaW5nIGZvciBjb21wbGV0aW9ucycpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVN0cmVhbWluZylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVTdHJlYW1pbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIFxyXG4gICAgICAgIC8vIFRlbXBlcmF0dXJlXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnVGVtcGVyYXR1cmUnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnU2V0IHRoZSByYW5kb21uZXNzIG9mIHRoZSBtb2RlbFxcJ3Mgb3V0cHV0ICgwLTEpJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAsIDEsIDAuMSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wZXJhdHVyZSlcclxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGVyYXR1cmUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIFxyXG4gICAgICAgIC8vIE1heCB0b2tlbnNcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdNYXggVG9rZW5zJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1NldCB0aGUgbWF4aW11bSBsZW5ndGggb2YgdGhlIG1vZGVsXFwncyBvdXRwdXQnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignNDAwMCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFRva2VucykpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtVmFsdWUgPSBOdW1iZXIodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4obnVtVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFRva2VucyA9IG51bVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICBcclxuICAgICAgICAvLyBBZGQgXCJSZWZlcmVuY2UgQ3VycmVudCBOb3RlXCIgdG9nZ2xlXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnUmVmZXJlbmNlIEN1cnJlbnQgTm90ZScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdJbmNsdWRlIHRoZSBjb250ZW50IG9mIHRoZSBjdXJyZW50IG5vdGUgaW4gdGhlIGNoYXQgY29udGV4dC4nKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWZlcmVuY2VDdXJyZW50Tm90ZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWZlcmVuY2VDdXJyZW50Tm90ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgXHJcbiAgICAgICAgLy8gUHJvdmlkZXItc3BlY2lmaWMgc2V0dGluZ3NcclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlci50b1VwcGVyQ2FzZSgpfSBTZXR0aW5nc2AgfSk7XHJcbiAgICBcclxuICAgICAgICBzd2l0Y2ggKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ29wZW5haSc6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3M7XHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ01vZGVsJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIHRoZSBPcGVuQUkgbW9kZWwgdG8gdXNlJylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIHNldHRpbmdzLmF2YWlsYWJsZU1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG1vZGVsLCBtb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5ncy5tb2RlbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5tb2RlbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlICdhbnRocm9waWMnOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzO1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdNb2RlbCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSB0aGUgQW50aHJvcGljIG1vZGVsIHRvIHVzZScpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb2RlbCBvZiBzZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihtb2RlbCwgbW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3MubW9kZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubW9kZWwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAnZ2VtaW5pJzoge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW1pbmlTZXR0aW5ncztcclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnTW9kZWwnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdDaG9vc2UgdGhlIEdlbWluaSBtb2RlbCB0byB1c2UnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbW9kZWwgb2Ygc2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24obW9kZWwsIG1vZGVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHNldHRpbmdzLm1vZGVsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm1vZGVsID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgJ29sbGFtYSc6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3M7XHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ01vZGVsJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIHRoZSBPbGxhbWEgbW9kZWwgdG8gdXNlJylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIHNldHRpbmdzLmF2YWlsYWJsZU1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG1vZGVsLCBtb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5ncy5tb2RlbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5tb2RlbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBDb25maXJtYXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHByaXZhdGUgb25Db25maXJtOiAoY29uZmlybWVkOiBib29sZWFuKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSBtZXNzYWdlOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgb25Db25maXJtOiAoY29uZmlybWVkOiBib29sZWFuKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCh0aXRsZSk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgICAgICB0aGlzLm9uQ29uZmlybSA9IG9uQ29uZmlybTtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGhpcy5tZXNzYWdlIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdtb2RhbC1idXR0b24tY29udGFpbmVyJyk7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2ZsZXgtZW5kJztcclxuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gJzhweCc7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcxNnB4JztcclxuXHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pXHJcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Db25maXJtKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuICAgICAgICAgICAgdGV4dDogJ0RlbGV0ZScsXHJcbiAgICAgICAgICAgIGNsczogJ21vZC13YXJuaW5nJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25Db25maXJtKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENoYXRWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xyXG4gICAgcGx1Z2luOiBNeVBsdWdpbjtcclxuICAgIG1lc3NhZ2VzQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIGlucHV0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIGFjdGl2ZVN0cmVhbTogQWJvcnRDb250cm9sbGVyIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBNeVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGxlYWYpO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFZJRVdfVFlQRV9DSEFUO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICdBSSBDaGF0JztcclxuICAgIH1cclxuXHJcbiAgICBnZXRJY29uKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICdtZXNzYWdlLXNxdWFyZSc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXR0aW5nc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBtYWluIGNvbnRhaW5lciB3aXRoIGZsZXggbGF5b3V0XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdhaS1jaGF0LXZpZXcnKTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIHNldHRpbmdzIGJ1dHRvbiBpbiB0aGUgYnV0dG9uIGNvbnRhaW5lciAod2lsbCBiZSBhZGRlZCBsYXRlcilcclxuICAgICAgICBjb25zdCBzZXR0aW5nc0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIHNldHRpbmdzQnV0dG9uLnNldFRleHQoJ1NldHRpbmdzJyk7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1RvZ2dsZSBtb2RlbCBzZXR0aW5ncycpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFdlJ2xsIGFkZCB0aGlzIGJ1dHRvbiB0byB0aGUgYnV0dG9uIGNvbnRhaW5lciBsYXRlclxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE1lc3NhZ2VzIGNvbnRhaW5lclxyXG4gICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdhaS1jaGF0LW1lc3NhZ2VzJyk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zdHlsZS5mbGV4ID0gJzEnO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuc3R5bGUub3ZlcmZsb3cgPSAnYXV0byc7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzE2cHgnO1xyXG5cclxuICAgICAgICAvLyBJbnB1dCBjb250YWluZXIgYXQgYm90dG9tXHJcbiAgICAgICAgdGhpcy5pbnB1dENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ2FpLWNoYXQtaW5wdXQtY29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5pbnB1dENvbnRhaW5lci5zdHlsZS5ib3JkZXJUb3AgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XHJcbiAgICAgICAgdGhpcy5pbnB1dENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzE2cHgnO1xyXG5cclxuICAgICAgICAvLyBUZXh0YXJlYSBmb3IgaW5wdXRcclxuICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IHRoaXMuaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xyXG4gICAgICAgICAgICBjbHM6ICdhaS1jaGF0LWlucHV0JyxcclxuICAgICAgICAgICAgYXR0cjoge1xyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdUeXBlIHlvdXIgbWVzc2FnZS4uLicsXHJcbiAgICAgICAgICAgICAgICByb3dzOiAnMydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTdHlsZSB0aGUgdGV4dGFyZWFcclxuICAgICAgICB0ZXh0YXJlYS5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICB0ZXh0YXJlYS5zdHlsZS5yZXNpemUgPSAnbm9uZSc7XHJcbiAgICAgICAgdGV4dGFyZWEuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xyXG4gICAgICAgIHRleHRhcmVhLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc0cHgnO1xyXG4gICAgICAgIHRleHRhcmVhLnN0eWxlLnBhZGRpbmcgPSAnOHB4JztcclxuICAgICAgICB0ZXh0YXJlYS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KSc7XHJcbiAgICAgICAgdGV4dGFyZWEuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1ub3JtYWwpJztcclxuXHJcbiAgICAgICAgLy8gQnV0dG9uIGNvbnRhaW5lclxyXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IHRoaXMuaW5wdXRDb250YWluZXIuY3JlYXRlRGl2KCdhaS1jaGF0LWJ1dHRvbnMnKTtcclxuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzhweCc7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9ICc4cHgnO1xyXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XHJcblxyXG4gICAgICAgIC8vIFNlbmQgYnV0dG9uXHJcbiAgICAgICAgY29uc3Qgc2VuZEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICB0ZXh0OiAnU2VuZCcsXHJcbiAgICAgICAgICAgIGNsczogJ21vZC1jdGEnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN0b3AgYnV0dG9uIChoaWRkZW4gaW5pdGlhbGx5KVxyXG4gICAgICAgIGNvbnN0IHN0b3BCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuICAgICAgICAgICAgdGV4dDogJ1N0b3AnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN0b3BCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcbiAgICAgICAgLy8gQ29weSBBbGwgYnV0dG9uXHJcbiAgICAgICAgY29uc3QgY29weUFsbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICB0ZXh0OiAnQ29weSBBbGwnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29weUFsbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZXMgPSB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5haS1jaGF0LW1lc3NhZ2UnKTtcclxuICAgICAgICAgICAgbGV0IGNoYXRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2goKGVsLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlLWNvbnRlbnQnKT8udGV4dENvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBjaGF0Q29udGVudCArPSBjb250ZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgbWVzc2FnZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXRDb250ZW50ICs9ICdcXG5cXG4nICsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdFNlcGFyYXRvciArICdcXG5cXG4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb3B5VG9DbGlwYm9hcmQoY2hhdENvbnRlbnQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBDbGVhciBidXR0b25cclxuICAgICAgICBjb25zdCBjbGVhckJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICB0ZXh0OiAnQ2xlYXIgQ2hhdCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIHNlbmQgbWVzc2FnZVxyXG4gICAgICAgIGNvbnN0IHNlbmRNZXNzYWdlID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gdGV4dGFyZWEudmFsdWUudHJpbSgpO1xyXG4gICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIC8vIERpc2FibGUgaW5wdXQgYW5kIHNob3cgc3RvcCBidXR0b25cclxuICAgICAgICAgICAgdGV4dGFyZWEuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBzZW5kQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIHN0b3BCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgdXNlciBtZXNzYWdlXHJcbiAgICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZSgndXNlcicsIGNvbnRlbnQpO1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9ICcnO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGFib3J0IGNvbnRyb2xsZXIgZm9yIHN0cmVhbWluZ1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbSA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IGNyZWF0ZVByb3ZpZGVyKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIGxldCBzeXN0ZW1NZXNzYWdlID0gdGhpcy5wbHVnaW4uZ2V0U3lzdGVtTWVzc2FnZSgpO1xyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUHJvY2VzcyBjb250ZXh0IG5vdGVzIHRvIGdldCB0aGUgbGF0ZXN0IHZlcnNpb25cclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb250ZXh0Tm90ZXMgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGV4dE5vdGVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGV4dENvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5nZXRDb250ZXh0Tm90ZXNDb250ZW50KHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRleHROb3Rlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgc3lzdGVtTWVzc2FnZSArPSBgXFxuXFxuQ29udGV4dCBOb3RlczpcXG4ke2NvbnRleHRDb250ZW50fWA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlczogTWVzc2FnZVtdID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHN5c3RlbU1lc3NhZ2UgfVxyXG4gICAgICAgICAgICAgICAgXTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJbmNsdWRlIHRoZSBjdXJyZW50IG5vdGUncyBjb250ZW50IGlmIHRoZSB0b2dnbGUgaXMgZW5hYmxlZFxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlZmVyZW5jZUN1cnJlbnROb3RlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudEZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjdXJyZW50RmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Tm90ZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGN1cnJlbnRGaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb2xlOiAnc3lzdGVtJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGBIZXJlIGlzIHRoZSBjb250ZW50IG9mIHRoZSBjdXJyZW50IG5vdGU6XFxuXFxuJHtjdXJyZW50Tm90ZUNvbnRlbnR9YFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gR2V0IGFsbCBleGlzdGluZyBtZXNzYWdlc1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUVsZW1lbnRzID0gdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYWktY2hhdC1tZXNzYWdlJyk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlRWxlbWVudHMuZm9yRWFjaChlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgcm9sZSA9IGVsLmNsYXNzTGlzdC5jb250YWlucygndXNlcicpID8gJ3VzZXInIDogJ2Fzc2lzdGFudCc7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlLWNvbnRlbnQnKT8udGV4dENvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGUsIGNvbnRlbnQgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBDcmVhdGUgYXNzaXN0YW50IG1lc3NhZ2UgY29udGFpbmVyIGZvciBzdHJlYW1pbmdcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFzc2lzdGFudENvbnRhaW5lciA9IHRoaXMuY3JlYXRlTWVzc2FnZUVsZW1lbnQoJ2Fzc2lzdGFudCcsICcnKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuYXBwZW5kQ2hpbGQoYXNzaXN0YW50Q29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsVG9wID0gdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlQ29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgcHJvdmlkZXIuZ2V0Q29tcGxldGlvbihcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlcyxcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wZXJhdHVyZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4VG9rZW5zOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhUb2tlbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbUNhbGxiYWNrOiBhc3luYyAoY2h1bms6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VDb250ZW50ICs9IGNodW5rO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudEVsID0gYXNzaXN0YW50Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlLWNvbnRlbnQnKSBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50RWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBVcGRhdGUgdGhlIGRhdGEgYXR0cmlidXRlIHdpdGggdGhlIGN1cnJlbnQgY29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFzc2lzdGFudENvbnRhaW5lci5kYXRhc2V0LnJhd0NvbnRlbnQgPSByZXNwb25zZUNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVuZGVyIE1hcmtkb3duIGNvbnRlbnQgZHluYW1pY2FsbHlcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQ29udGVudCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxUb3AgPSB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbEhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyOiB0aGlzLmFjdGl2ZVN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZXJyb3IubmFtZSAhPT0gJ0Fib3J0RXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsIGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgLy8gUmUtZW5hYmxlIGlucHV0IGFuZCBoaWRlIHN0b3AgYnV0dG9uXHJcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGV4dGFyZWEuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIHN0b3BCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIHNlbmRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyBFdmVudCBsaXN0ZW5lcnNcclxuICAgICAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHNlbmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZW5kTWVzc2FnZSk7XHJcblxyXG4gICAgICAgIHN0b3BCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVN0cmVhbSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVTdHJlYW0uYWJvcnQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRleHRhcmVhLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgc3RvcEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgICAgICAgICAgICAgc2VuZEJ1dHRvbi5zdHlsZS5kaXNwbGF5ID0gJ2Jsb2NrJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjbGVhckJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5lbXB0eSgpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBBZGQgc2V0dGluZ3MgYnV0dG9uIHRvIHRoZSBidXR0b24gY29udGFpbmVyXHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLmluc2VydEJlZm9yZShzZXR0aW5nc0J1dHRvbiwgY2xlYXJCdXR0b24pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFNldHRpbmdzIGJ1dHRvbiBjbGljayBoYW5kbGVyXHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzTW9kYWwgPSBuZXcgU2V0dGluZ3NNb2RhbCh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pO1xyXG4gICAgICAgICAgICBzZXR0aW5nc01vZGFsLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGluaXRpYWwgc3lzdGVtIG1lc3NhZ2VcclxuICAgICAgICB0aGlzLmFkZE1lc3NhZ2UoJ2Fzc2lzdGFudCcsICdIZWxsbyEgSG93IGNhbiBJIGhlbHAgeW91IHRvZGF5PycpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlQWN0aW9uQnV0dG9uKGxhYmVsOiBzdHJpbmcsIHRvb2x0aXA6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IHZvaWQpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uLmFkZENsYXNzKCdhaS1jaGF0LWFjdGlvbi1idXR0b24nKTtcclxuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgdG9vbHRpcCk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBsYWJlbFxyXG4gICAgICAgIGNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgbGFiZWxFbC50ZXh0Q29udGVudCA9IGxhYmVsO1xyXG4gICAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChsYWJlbEVsKTtcclxuXHJcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2FsbGJhY2spO1xyXG4gICAgICAgIHJldHVybiBidXR0b247XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjb3B5VG9DbGlwYm9hcmQodGV4dDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCk7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0NvcGllZCB0byBjbGlwYm9hcmQnKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gY29weSB0byBjbGlwYm9hcmQnKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2xpcGJvYXJkIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVNZXNzYWdlRWxlbWVudChyb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JywgY29udGVudDogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIG1lc3NhZ2VFbC5hZGRDbGFzcygnYWktY2hhdC1tZXNzYWdlJywgcm9sZSk7XHJcbiAgICAgICAgbWVzc2FnZUVsLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxNnB4JztcclxuICAgICAgICBtZXNzYWdlRWwuc3R5bGUucGFkZGluZyA9ICcxMnB4JztcclxuICAgICAgICBtZXNzYWdlRWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzhweCc7XHJcbiAgICAgICAgbWVzc2FnZUVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHJvbGUgPT09ICd1c2VyJyBcclxuICAgICAgICAgICAgPyAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3ZlciknXHJcbiAgICAgICAgICAgIDogJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBtZXNzYWdlIGNvbnRhaW5lciB3aXRoIGNvbnRlbnQgYW5kIGFjdGlvbnNcclxuICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gbWVzc2FnZUVsLmNyZWF0ZURpdignbWVzc2FnZS1jb250YWluZXInKTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGNvbnRlbnQgZWxlbWVudFxyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IG1lc3NhZ2VDb250YWluZXIuY3JlYXRlRGl2KCdtZXNzYWdlLWNvbnRlbnQnKTtcclxuICAgICAgICBjb250ZW50RWwuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU3RvcmUgdGhlIHJhdyBNYXJrZG93biBjb250ZW50IGFzIGEgZGF0YSBhdHRyaWJ1dGVcclxuICAgICAgICBtZXNzYWdlRWwuZGF0YXNldC5yYXdDb250ZW50ID0gY29udGVudDtcclxuXHJcbiAgICAgICAgLy8gUmVuZGVyIE1hcmtkb3duIGNvbnRlbnRcclxuICAgICAgICBNYXJrZG93blJlbmRlcmVyLnJlbmRlcihcclxuICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgIGNvbnRlbnQsXHJcbiAgICAgICAgICAgIGNvbnRlbnRFbCxcclxuICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgIHRoaXNcclxuICAgICAgICApLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNYXJrZG93biByZW5kZXJpbmcgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBjb250ZW50RWwudGV4dENvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYWN0aW9ucyBjb250YWluZXJcclxuICAgICAgICBjb25zdCBhY3Rpb25zRWwgPSBtZXNzYWdlQ29udGFpbmVyLmNyZWF0ZURpdignbWVzc2FnZS1hY3Rpb25zJyk7XHJcbiAgICAgICAgYWN0aW9uc0VsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblxyXG4gICAgICAgIC8vIEFkZCBob3ZlciBiZWhhdmlvciB0byB0aGUgbWVzc2FnZSBlbGVtZW50XHJcbiAgICAgICAgbWVzc2FnZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGFjdGlvbnNFbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG1lc3NhZ2VFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBhY3Rpb25zRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYWN0aW9uc0VsLnN0eWxlLmZsZXhXcmFwID0gJ3dyYXAnO1xyXG4gICAgICAgIGFjdGlvbnNFbC5zdHlsZS5nYXAgPSAnOHB4JztcclxuICAgICAgICBhY3Rpb25zRWwuc3R5bGUubWFyZ2luVG9wID0gJzhweCc7XHJcblxyXG4gICAgICAgIC8vIEFkZCBjb3B5IGJ1dHRvblxyXG4gICAgICAgIGFjdGlvbnNFbC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUFjdGlvbkJ1dHRvbignQ29weScsICdDb3B5IG1lc3NhZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRDb250ZW50ID0gbWVzc2FnZUVsLmRhdGFzZXQucmF3Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRDb250ZW50LnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGNvbnRlbnQgdG8gY29weScpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuY29weVRvQ2xpcGJvYXJkKGN1cnJlbnRDb250ZW50KTtcclxuICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBlZGl0IGJ1dHRvblxyXG4gICAgICAgIGFjdGlvbnNFbC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUFjdGlvbkJ1dHRvbignRWRpdCcsICdFZGl0IG1lc3NhZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHdhc0VkaXRpbmcgPSBjb250ZW50RWwuaGFzQ2xhc3MoJ2VkaXRpbmcnKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghd2FzRWRpdGluZykge1xyXG4gICAgICAgICAgICAgICAgLy8gU3dpdGNoIHRvIGVkaXQgbW9kZVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xyXG4gICAgICAgICAgICAgICAgdGV4dGFyZWEudmFsdWUgPSBtZXNzYWdlRWwuZGF0YXNldC5yYXdDb250ZW50IHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5zdHlsZS5oZWlnaHQgPSBgJHtjb250ZW50RWwub2Zmc2V0SGVpZ2h0fXB4YDtcclxuICAgICAgICAgICAgICAgIHRleHRhcmVhLnN0eWxlLm1pbkhlaWdodCA9ICcxMDBweCc7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRFbC5hcHBlbmRDaGlsZCh0ZXh0YXJlYSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdlZGl0aW5nJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBTYXZlIGVkaXRzXHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IGNvbnRlbnRFbC5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHRleHRhcmVhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgb2xkQ29udGVudCA9IG1lc3NhZ2VFbC5kYXRhc2V0LnJhd0NvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q29udGVudCA9IHRleHRhcmVhLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgZGF0YSBhdHRyaWJ1dGUgd2l0aCB0aGUgbmV3IGNvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlRWwuZGF0YXNldC5yYXdDb250ZW50ID0gbmV3Q29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBNYXJrZG93blJlbmRlcmVyLnJlbmRlcih0aGlzLmFwcCwgbmV3Q29udGVudCwgY29udGVudEVsLCAnJywgdGhpcykuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01hcmtkb3duIHJlbmRlcmluZyBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRFbC50ZXh0Q29udGVudCA9IG5ld0NvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLnJlbW92ZUNsYXNzKCdlZGl0aW5nJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBBZGQgZGVsZXRlIGJ1dHRvblxyXG4gICAgICAgIGFjdGlvbnNFbC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUFjdGlvbkJ1dHRvbignRGVsZXRlJywgJ0RlbGV0ZSBtZXNzYWdlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBDb25maXJtYXRpb25Nb2RhbChcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAgICAgJ0RlbGV0ZSBtZXNzYWdlJyxcclxuICAgICAgICAgICAgICAgICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgbWVzc2FnZT8nLFxyXG4gICAgICAgICAgICAgICAgYXN5bmMgKGNvbmZpcm1lZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb25maXJtZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUVsLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgbW9kYWwub3BlbigpO1xyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGEgc2luZ2xlIHJlZ2VuZXJhdGUgYnV0dG9uIHdpdGggY29udGV4dC1hd2FyZSBsYWJlbFxyXG4gICAgICAgIGNvbnN0IHJlZ2VuZXJhdGVMYWJlbCA9IHJvbGUgPT09ICdhc3Npc3RhbnQnID8gJ1JlZ2VuZXJhdGUnIDogJ1JlZ2VuZXJhdGUgUmVzcG9uc2UnO1xyXG4gICAgICAgIGNvbnN0IHJlZ2VuZXJhdGVUb29sdGlwID0gcm9sZSA9PT0gJ2Fzc2lzdGFudCcgPyAnUmVnZW5lcmF0ZSB0aGlzIHJlc3BvbnNlJyA6ICdSZWdlbmVyYXRlIEFJIHJlc3BvbnNlJztcclxuICAgICAgICBhY3Rpb25zRWwuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVBY3Rpb25CdXR0b24ocmVnZW5lcmF0ZUxhYmVsLCByZWdlbmVyYXRlVG9vbHRpcCwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnJlZ2VuZXJhdGVSZXNwb25zZShtZXNzYWdlRWwpO1xyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gQXBwZW5kIGFjdGlvbnMgY29udGFpbmVyIHRvIG1lc3NhZ2UgY29udGFpbmVyXHJcbiAgICAgICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChhY3Rpb25zRWwpO1xyXG5cclxuICAgICAgICByZXR1cm4gbWVzc2FnZUVsO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYWRkTWVzc2FnZShyb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JywgY29udGVudDogc3RyaW5nKSB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUVsID0gdGhpcy5jcmVhdGVNZXNzYWdlRWxlbWVudChyb2xlLCBjb250ZW50KTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLmFwcGVuZENoaWxkKG1lc3NhZ2VFbCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxUb3AgPSB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbEhlaWdodDtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbkNsb3NlKCkge1xyXG4gICAgICAgIGlmICh0aGlzLmFjdGl2ZVN0cmVhbSkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbS5hYm9ydCgpO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY3JlYXRlU2V0dGluZ3NQYW5lbCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgY29udGFpbmVyLmFkZENsYXNzKCdhaS1jaGF0LXNldHRpbmdzLXBhbmVsJyk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBzZXR0aW5ncyB0aXRsZVxyXG4gICAgICAgIGNvbnRhaW5lci5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBSSBNb2RlbCBTZXR0aW5ncycgfSk7XHJcblxyXG4gICAgICAgIC8vIFByb3ZpZGVyIHNlbGVjdGlvblxyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdigpO1xyXG4gICAgICAgIHByb3ZpZGVyQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgdGV4dDogJ0FJIFByb3ZpZGVyJyB9KTtcclxuICAgICAgICBjb25zdCBwcm92aWRlclNlbGVjdCA9IHByb3ZpZGVyQ29udGFpbmVyLmNyZWF0ZUVsKCdzZWxlY3QnKTtcclxuICAgICAgICBwcm92aWRlclNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB2YWx1ZTogJ29wZW5haScsIHRleHQ6ICdPcGVuQUkgKENoYXRHUFQpJyB9KTtcclxuICAgICAgICBwcm92aWRlclNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB2YWx1ZTogJ2FudGhyb3BpYycsIHRleHQ6ICdBbnRocm9waWMgKENsYXVkZSknIH0pO1xyXG4gICAgICAgIHByb3ZpZGVyU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHZhbHVlOiAnZ2VtaW5pJywgdGV4dDogJ0dvb2dsZSAoR2VtaW5pKScgfSk7XHJcbiAgICAgICAgcHJvdmlkZXJTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdmFsdWU6ICdvbGxhbWEnLCB0ZXh0OiAnT2xsYW1hIChMb2NhbCBBSSknIH0pO1xyXG4gICAgICAgIHByb3ZpZGVyU2VsZWN0LnZhbHVlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdmlkZXI7XHJcbiAgICAgICAgcHJvdmlkZXJTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlciA9IHByb3ZpZGVyU2VsZWN0LnZhbHVlIGFzIGFueTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIC8vIFJlZnJlc2ggc2V0dGluZ3MgcGFuZWwgdG8gc2hvdyBwcm92aWRlci1zcGVjaWZpYyBzZXR0aW5nc1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5nc0NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5nc0NvbnRhaW5lci5yZXBsYWNlV2l0aCh0aGlzLmNyZWF0ZVNldHRpbmdzUGFuZWwoKSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gU3lzdGVtIG1lc3NhZ2VcclxuICAgICAgICBjb25zdCBzeXN0ZW1NZXNzYWdlQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdigpO1xyXG4gICAgICAgIHN5c3RlbU1lc3NhZ2VDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiAnU3lzdGVtIE1lc3NhZ2UnIH0pO1xyXG4gICAgICAgIGNvbnN0IHN5c3RlbU1lc3NhZ2VJbnB1dCA9IHN5c3RlbU1lc3NhZ2VDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJyk7XHJcbiAgICAgICAgc3lzdGVtTWVzc2FnZUlucHV0LnZhbHVlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3lzdGVtTWVzc2FnZTtcclxuICAgICAgICBzeXN0ZW1NZXNzYWdlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeXN0ZW1NZXNzYWdlID0gc3lzdGVtTWVzc2FnZUlucHV0LnZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gVGVtcGVyYXR1cmVcclxuICAgICAgICBjb25zdCB0ZW1wZXJhdHVyZUNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoKTtcclxuICAgICAgICB0ZW1wZXJhdHVyZUNvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IHRleHQ6ICdUZW1wZXJhdHVyZScgfSk7XHJcbiAgICAgICAgY29uc3QgdGVtcGVyYXR1cmVJbnB1dCA9IHRlbXBlcmF0dXJlQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ3JhbmdlJyB9KTtcclxuICAgICAgICB0ZW1wZXJhdHVyZUlucHV0Lm1pbiA9ICcwJztcclxuICAgICAgICB0ZW1wZXJhdHVyZUlucHV0Lm1heCA9ICcxJztcclxuICAgICAgICB0ZW1wZXJhdHVyZUlucHV0LnN0ZXAgPSAnMC4xJztcclxuICAgICAgICB0ZW1wZXJhdHVyZUlucHV0LnZhbHVlID0gU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBlcmF0dXJlKTtcclxuICAgICAgICBjb25zdCB0ZW1wZXJhdHVyZVZhbHVlID0gdGVtcGVyYXR1cmVDb250YWluZXIuY3JlYXRlU3BhbigpO1xyXG4gICAgICAgIHRlbXBlcmF0dXJlVmFsdWUudGV4dENvbnRlbnQgPSBTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGVyYXR1cmUpO1xyXG4gICAgICAgIHRlbXBlcmF0dXJlSW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKHRlbXBlcmF0dXJlSW5wdXQudmFsdWUpO1xyXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZVZhbHVlLnRleHRDb250ZW50ID0gU3RyaW5nKHZhbHVlKTtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGVyYXR1cmUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIE1heCB0b2tlbnNcclxuICAgICAgICBjb25zdCBtYXhUb2tlbnNDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCk7XHJcbiAgICAgICAgbWF4VG9rZW5zQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgdGV4dDogJ01heCBUb2tlbnMnIH0pO1xyXG4gICAgICAgIGNvbnN0IG1heFRva2Vuc0lucHV0ID0gbWF4VG9rZW5zQ29udGFpbmVyLmNyZWF0ZUVsKCdpbnB1dCcsIHsgdHlwZTogJ251bWJlcicgfSk7XHJcbiAgICAgICAgbWF4VG9rZW5zSW5wdXQudmFsdWUgPSBTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4VG9rZW5zKTtcclxuICAgICAgICBtYXhUb2tlbnNJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHZhbHVlID0gTnVtYmVyKG1heFRva2Vuc0lucHV0LnZhbHVlKTtcclxuICAgICAgICAgICAgaWYgKCFpc05hTih2YWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFRva2VucyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gUHJvdmlkZXItc3BlY2lmaWMgc2V0dGluZ3NcclxuICAgICAgICBjb25zdCBwcm92aWRlclNldHRpbmdzID0gY29udGFpbmVyLmNyZWF0ZURpdigpO1xyXG4gICAgICAgIHByb3ZpZGVyU2V0dGluZ3MuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlci50b1VwcGVyQ2FzZSgpfSBTZXR0aW5nc2AgfSk7XHJcblxyXG4gICAgICAgIHN3aXRjaCAodGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdmlkZXIpIHtcclxuICAgICAgICAgICAgY2FzZSAnb3BlbmFpJzoge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncztcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVsU2VsZWN0ID0gcHJvdmlkZXJTZXR0aW5ncy5jcmVhdGVFbCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMuZm9yRWFjaChtb2RlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdmFsdWU6IG1vZGVsLCB0ZXh0OiBtb2RlbCB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbW9kZWxTZWxlY3QudmFsdWUgPSBzZXR0aW5ncy5tb2RlbDtcclxuICAgICAgICAgICAgICAgIG1vZGVsU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5tb2RlbCA9IG1vZGVsU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlICdhbnRocm9waWMnOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9kZWxTZWxlY3QgPSBwcm92aWRlclNldHRpbmdzLmNyZWF0ZUVsKCdzZWxlY3QnKTtcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmF2YWlsYWJsZU1vZGVscy5mb3JFYWNoKG1vZGVsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbFNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB2YWx1ZTogbW9kZWwsIHRleHQ6IG1vZGVsIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBtb2RlbFNlbGVjdC52YWx1ZSA9IHNldHRpbmdzLm1vZGVsO1xyXG4gICAgICAgICAgICAgICAgbW9kZWxTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm1vZGVsID0gbW9kZWxTZWxlY3QudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgJ2dlbWluaSc6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3M7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RlbFNlbGVjdCA9IHByb3ZpZGVyU2V0dGluZ3MuY3JlYXRlRWwoJ3NlbGVjdCcpO1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzLmZvckVhY2gobW9kZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHZhbHVlOiBtb2RlbCwgdGV4dDogbW9kZWwgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG1vZGVsU2VsZWN0LnZhbHVlID0gc2V0dGluZ3MubW9kZWw7XHJcbiAgICAgICAgICAgICAgICBtb2RlbFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubW9kZWwgPSBtb2RlbFNlbGVjdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAnb2xsYW1hJzoge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vbGxhbWFTZXR0aW5ncztcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVsU2VsZWN0ID0gcHJvdmlkZXJTZXR0aW5ncy5jcmVhdGVFbCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMuZm9yRWFjaChtb2RlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdmFsdWU6IG1vZGVsLCB0ZXh0OiBtb2RlbCB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbW9kZWxTZWxlY3QudmFsdWUgPSBzZXR0aW5ncy5tb2RlbDtcclxuICAgICAgICAgICAgICAgIG1vZGVsU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5tb2RlbCA9IG1vZGVsU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGNvbnRhaW5lcjtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHJlZ2VuZXJhdGVSZXNwb25zZShtZXNzYWdlRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgLy8gRGlzYWJsZSBpbnB1dCBkdXJpbmcgcmVnZW5lcmF0aW9uXHJcbiAgICAgICAgY29uc3QgdGV4dGFyZWEgPSB0aGlzLmlucHV0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XHJcbiAgICAgICAgaWYgKHRleHRhcmVhKSB0ZXh0YXJlYS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICBcclxuICAgICAgICAvLyBHZXQgYWxsIG1lc3NhZ2VzIHVwIHRvIHRoaXMgcG9pbnQgZm9yIGNvbnRleHRcclxuICAgICAgICBjb25zdCBtZXNzYWdlczogTWVzc2FnZVtdID0gW1xyXG4gICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiB0aGlzLnBsdWdpbi5nZXRTeXN0ZW1NZXNzYWdlKCkgfVxyXG4gICAgICAgIF07XHJcbiAgICBcclxuICAgICAgICAvLyBBZGQgY29udGV4dCBub3RlcyBpZiBlbmFibGVkXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvbnRleHROb3RlcyAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZXh0Tm90ZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgY29udGV4dENvbnRlbnQgPSBhd2FpdCB0aGlzLnBsdWdpbi5nZXRDb250ZXh0Tm90ZXNDb250ZW50KHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRleHROb3Rlcyk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VzWzBdLmNvbnRlbnQgKz0gYFxcblxcbkNvbnRleHQgTm90ZXM6XFxuJHtjb250ZXh0Q29udGVudH1gO1xyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIGNvbnN0IGFsbE1lc3NhZ2VzID0gQXJyYXkuZnJvbSh0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5haS1jaGF0LW1lc3NhZ2UnKSk7XHJcbiAgICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gYWxsTWVzc2FnZXMuaW5kZXhPZihtZXNzYWdlRWwpO1xyXG4gICAgXHJcbiAgICAgICAgLy8gR2V0IGFsbCBtZXNzYWdlcyB1cCB0byBjdXJyZW50IG1lc3NhZ2VcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8PSBjdXJyZW50SW5kZXg7IGkrKykge1xyXG4gICAgICAgICAgICBjb25zdCBlbCA9IGFsbE1lc3NhZ2VzW2ldO1xyXG4gICAgICAgICAgICBjb25zdCByb2xlID0gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCd1c2VyJykgPyAndXNlcicgOiAnYXNzaXN0YW50JztcclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IChlbCBhcyBIVE1MRWxlbWVudCkuZGF0YXNldC5yYXdDb250ZW50IHx8ICcnO1xyXG4gICAgICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZSwgY29udGVudCB9KTtcclxuICAgICAgICB9XHJcbiAgICBcclxuICAgICAgICAvLyBEZXRlcm1pbmUgd2hpY2ggbWVzc2FnZSB0byByZXBsYWNlXHJcbiAgICAgICAgbGV0IG1lc3NhZ2VUb1JlcGxhY2U6IEhUTUxFbGVtZW50O1xyXG4gICAgICAgIGlmIChtZXNzYWdlRWwuY2xhc3NMaXN0LmNvbnRhaW5zKCdhc3Npc3RhbnQnKSkge1xyXG4gICAgICAgICAgICBtZXNzYWdlVG9SZXBsYWNlID0gbWVzc2FnZUVsO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIEZvciB1c2VyIG1lc3NhZ2VzLCByZXBsYWNlIHRoZSBuZXh0IGFzc2lzdGFudCBtZXNzYWdlIGlmIGl0IGV4aXN0c1xyXG4gICAgICAgICAgICBtZXNzYWdlVG9SZXBsYWNlID0gbWVzc2FnZUVsLm5leHRFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgaWYgKCFtZXNzYWdlVG9SZXBsYWNlPy5jbGFzc0xpc3QuY29udGFpbnMoJ2Fzc2lzdGFudCcpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47IC8vIE5vIGFzc2lzdGFudCBtZXNzYWdlIHRvIHJlcGxhY2VcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIFxyXG4gICAgICAgIC8vIFJlbW92ZSB0aGUgbWVzc2FnZSB0byBiZSByZXBsYWNlZFxyXG4gICAgICAgIG1lc3NhZ2VUb1JlcGxhY2UucmVtb3ZlKCk7XHJcbiAgICBcclxuICAgICAgICAvLyBDcmVhdGUgbmV3IGFzc2lzdGFudCBtZXNzYWdlIGNvbnRhaW5lclxyXG4gICAgICAgIGNvbnN0IGFzc2lzdGFudENvbnRhaW5lciA9IHRoaXMuY3JlYXRlTWVzc2FnZUVsZW1lbnQoJ2Fzc2lzdGFudCcsICcnKTtcclxuICAgICAgICBpZiAobWVzc2FnZUVsLmNsYXNzTGlzdC5jb250YWlucygnYXNzaXN0YW50JykpIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5pbnNlcnRCZWZvcmUoYXNzaXN0YW50Q29udGFpbmVyLCBtZXNzYWdlRWwubmV4dFNpYmxpbmcpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuaW5zZXJ0QmVmb3JlKGFzc2lzdGFudENvbnRhaW5lciwgbWVzc2FnZVRvUmVwbGFjZT8ubmV4dFNpYmxpbmcgfHwgbnVsbCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsVG9wID0gdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxIZWlnaHQ7XHJcbiAgICBcclxuICAgICAgICAvLyBHZW5lcmF0ZSBuZXcgcmVzcG9uc2VcclxuICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbSA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgICAgICBsZXQgcmVzcG9uc2VDb250ZW50ID0gJyc7XHJcbiAgICBcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IGNyZWF0ZVByb3ZpZGVyKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgYXdhaXQgcHJvdmlkZXIuZ2V0Q29tcGxldGlvbihcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wZXJhdHVyZSxcclxuICAgICAgICAgICAgICAgICAgICBtYXhUb2tlbnM6IHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFRva2VucyxcclxuICAgICAgICAgICAgICAgICAgICBzdHJlYW1DYWxsYmFjazogYXN5bmMgKGNodW5rOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VDb250ZW50ICs9IGNodW5rO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50RWwgPSBhc3Npc3RhbnRDb250YWluZXIucXVlcnlTZWxlY3RvcignLm1lc3NhZ2UtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudEVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3Npc3RhbnRDb250YWluZXIuZGF0YXNldC5yYXdDb250ZW50ID0gcmVzcG9uc2VDb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXI6IHRoaXMuYWN0aXZlU3RyZWFtXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgIT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgICAgIGFzc2lzdGFudENvbnRhaW5lci5yZW1vdmUoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgIGlmICh0ZXh0YXJlYSkge1xyXG4gICAgICAgICAgICAgICAgdGV4dGFyZWEuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRleHRhcmVhLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVTdHJlYW0gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbi8qKlxyXG4gKiBQYXJzZXMgYSBnaXZlbiB0ZXh0IHNlbGVjdGlvbiBpbnRvIGFuIGFycmF5IG9mIG1lc3NhZ2Ugb2JqZWN0c1xyXG4gKiBcclxuICogVGhlIGZ1bmN0aW9uIGludGVycHJldHMgbGluZXMgb2YgdGV4dCBzZXBhcmF0ZWQgYnkgY2hhdEJvdW5kYXJ5U3RyaW5nIChkZWZhdWx0cyB0byAnLS0tLScpIGFzIGJvdW5kYXJpZXNcclxuICogYmV0d2VlbiB1c2VyIGFuZCBhc3Npc3RhbnQgbWVzc2FnZXMuXHJcbiAqIFxyXG4gKiBAcGFyYW0gc2VsZWN0aW9uIC0gVGhlIHRleHQgc2VsZWN0aW9uIHRvIHBhcnNlXHJcbiAqIEBwYXJhbSBjaGF0U2VwYXJhdG9yIC0gVGhlIHN0cmluZyB0aGF0IHNlcGFyYXRlcyB1c2VyIGFuZCBhc3Npc3RhbnQgbWVzc2FnZXNcclxuICogQHBhcmFtIGNoYXRCb3VuZGFyeVN0cmluZyAtIFRoZSBzdHJpbmcgdGhhdCBpbmRpY2F0ZXMgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgdGhlIGNoYXRcclxuICogQHJldHVybnMgQXJyYXkgb2YgbWVzc2FnZSBvYmplY3RzIHdpdGggcm9sZXMgYW5kIGNvbnRlbnRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNlbGVjdGlvbihcclxuICAgIHNlbGVjdGlvbjogc3RyaW5nLFxyXG4gICAgY2hhdFNlcGFyYXRvcjogc3RyaW5nLFxyXG4gICAgY2hhdEJvdW5kYXJ5U3RyaW5nPzogc3RyaW5nXHJcbik6IE1lc3NhZ2VbXSB7XHJcbiAgICAvLyBJZiBubyBjaGF0Qm91bmRhcnlTdHJpbmcgaXMgcHJvdmlkZWQsIHN0YXJ0IHBhcnNpbmcgcmlnaHQgYXdheVxyXG4gICAgbGV0IGluc2lkZUNoYXQgPSAhY2hhdEJvdW5kYXJ5U3RyaW5nO1xyXG5cclxuICAgIGNvbnN0IGxpbmVzID0gc2VsZWN0aW9uLnNwbGl0KCdcXG4nKTtcclxuICAgIGxldCBtZXNzYWdlczogTWVzc2FnZVtdID0gW107XHJcbiAgICBsZXQgY3VycmVudFJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnID0gJ3VzZXInO1xyXG4gICAgbGV0IGN1cnJlbnRDb250ZW50ID0gJyc7XHJcblxyXG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcbiAgICAgICAgaWYgKGNoYXRCb3VuZGFyeVN0cmluZyAmJiBsaW5lLnRyaW0oKSA9PT0gY2hhdEJvdW5kYXJ5U3RyaW5nKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHN0YXJ0IGFuZCBlbmQgYm91bmRhcmllcyBhcmUgdGhlIHNhbWUsIHRvZ2dsZSBvbmx5IG9uY2VcclxuICAgICAgICAgICAgaWYgKCFpbnNpZGVDaGF0ICYmIGN1cnJlbnRDb250ZW50LnRyaW0oKSkge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGU6IGN1cnJlbnRSb2xlLCBjb250ZW50OiBjdXJyZW50Q29udGVudC50cmltKCkgfSk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGluc2lkZUNoYXQgPSAhaW5zaWRlQ2hhdDtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWluc2lkZUNoYXQpIGNvbnRpbnVlOyAvLyBJZ25vcmUgbGluZXMgb3V0c2lkZSBvZiBhIGNoYXRcclxuXHJcbiAgICAgICAgaWYgKGxpbmUudHJpbSgpID09PSBjaGF0U2VwYXJhdG9yKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHdlIGhpdCBhIHNlcGFyYXRvciwgc2F2ZSB0aGUgY3VycmVudCBtZXNzYWdlIGFuZCBzd2l0Y2ggcm9sZXNcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRDb250ZW50LnRyaW0oKSkge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGU6IGN1cnJlbnRSb2xlLCBjb250ZW50OiBjdXJyZW50Q29udGVudC50cmltKCkgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VycmVudFJvbGUgPSBjdXJyZW50Um9sZSA9PT0gJ3VzZXInID8gJ2Fzc2lzdGFudCcgOiAndXNlcic7XHJcbiAgICAgICAgICAgIGN1cnJlbnRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3VycmVudENvbnRlbnQgKz0gbGluZSArICdcXG4nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTYXZlIGFueSByZW1haW5pbmcgY29udGVudFxyXG4gICAgaWYgKGN1cnJlbnRDb250ZW50LnRyaW0oKSkge1xyXG4gICAgICAgIG1lc3NhZ2VzLnB1c2goeyByb2xlOiBjdXJyZW50Um9sZSwgY29udGVudDogY3VycmVudENvbnRlbnQudHJpbSgpIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBtZXNzYWdlcztcclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBXb3Jrc3BhY2VMZWFmLCBJdGVtVmlldywgU2V0dGluZywgTm90aWNlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IE15UGx1Z2luIGZyb20gJy4uL21haW4nOyAvLyBJbXBvcnQgTXlQbHVnaW5cclxuaW1wb3J0IHsgY3JlYXRlUHJvdmlkZXIgfSBmcm9tICcuLi8uLi9wcm92aWRlcnMnO1xyXG5cclxuY29uc3QgVklFV19UWVBFX01PREVMX1NFVFRJTkdTID0gJ21vZGVsLXNldHRpbmdzLXZpZXcnO1xyXG5cclxuLyoqXHJcbiAqIEFJIE1vZGVsIFNldHRpbmdzIFZpZXdcclxuICpcclxuICogVGhpcyB2aWV3IHByb3ZpZGVzIGEgdXNlciBpbnRlcmZhY2UgZm9yIGNvbmZpZ3VyaW5nIEFJIG1vZGVsIHNldHRpbmdzLlxyXG4gKiBJdCBhbGxvd3MgdXNlcnMgdG86XHJcbiAqIC0gU2VsZWN0IHRoZWlyIHByZWZlcnJlZCBBSSBwcm92aWRlciAoT3BlbkFJLCBBbnRocm9waWMsIEdlbWluaSwgT2xsYW1hKVxyXG4gKiAtIENvbmZpZ3VyZSBwcm92aWRlci1zcGVjaWZpYyBzZXR0aW5ncyBsaWtlIEFQSSBrZXlzIGFuZCBtb2RlbHNcclxuICogLSBBZGp1c3QgY29tbW9uIHNldHRpbmdzIGxpa2UgdGVtcGVyYXR1cmUgYW5kIHRva2VuIGxpbWl0c1xyXG4gKiAtIFRlc3QgQVBJIGNvbm5lY3Rpb25zIGFuZCByZWZyZXNoIGF2YWlsYWJsZSBtb2RlbHNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBNb2RlbFNldHRpbmdzVmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcclxuICAgIHBsdWdpbjogTXlQbHVnaW47XHJcblxyXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBNeVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGxlYWYpO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFZJRVdfVFlQRV9NT0RFTF9TRVRUSU5HUztcclxuICAgIH1cclxuXHJcbiAgICBnZXREaXNwbGF5VGV4dCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAnQUkgTW9kZWwgU2V0dGluZ3MnO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEljb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ2ZpbGUtc2xpZGVycyc7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICAvLyBTZXR0aW5ncyBTZWN0aW9uXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0FJIE1vZGVsIFNldHRpbmdzJyB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnU3lzdGVtIE1lc3NhZ2UnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnU2V0IHRoZSBzeXN0ZW0gbWVzc2FnZSBmb3IgdGhlIEFJJylcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeXN0ZW1NZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnN5c3RlbU1lc3NhZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnRW5hYmxlIFN0cmVhbWluZycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdFbmFibGUgb3IgZGlzYWJsZSBzdHJlYW1pbmcgZm9yIGNvbXBsZXRpb25zJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlU3RyZWFtaW5nKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVN0cmVhbWluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdUZW1wZXJhdHVyZScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdTZXQgdGhlIHJhbmRvbW5lc3Mgb2YgdGhlIG1vZGVsXFwncyBvdXRwdXQgKDAtMSknKVxyXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiBzbGlkZXJcclxuICAgICAgICAgICAgICAgIC5zZXRMaW1pdHMoMCwgMSwgMC4xKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBlcmF0dXJlKVxyXG4gICAgICAgICAgICAgICAgLnNldER5bmFtaWNUb29sdGlwKClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wZXJhdHVyZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdNYXggVG9rZW5zJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1NldCB0aGUgbWF4aW11bSBsZW5ndGggb2YgdGhlIG1vZGVsXFwncyBvdXRwdXQnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignNDAwMCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFRva2VucykpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtVmFsdWUgPSBOdW1iZXIodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4obnVtVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFRva2VucyA9IG51bVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgLy8gRGF0ZSBTZXR0aW5ncyBTZWN0aW9uXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ0RhdGUgU2V0dGluZ3MnIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdJbmNsdWRlIERhdGUgd2l0aCBTeXN0ZW0gTWVzc2FnZScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdBZGQgdGhlIGN1cnJlbnQgZGF0ZSB0byB0aGUgc3lzdGVtIG1lc3NhZ2UnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlRGF0ZVdpdGhTeXN0ZW1NZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluY2x1ZGVEYXRlV2l0aFN5c3RlbU1lc3NhZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnSW5jbHVkZSBUaW1lIHdpdGggU3lzdGVtIE1lc3NhZ2UnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQWRkIHRoZSBjdXJyZW50IHRpbWUgYWxvbmcgd2l0aCB0aGUgZGF0ZSB0byB0aGUgc3lzdGVtIG1lc3NhZ2UnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlVGltZVdpdGhTeXN0ZW1NZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluY2x1ZGVUaW1lV2l0aFN5c3RlbU1lc3NhZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgICAgICAvLyBOb3RlIFJlZmVyZW5jZSBTZXR0aW5ncyBTZWN0aW9uXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ05vdGUgUmVmZXJlbmNlIFNldHRpbmdzJyB9KTtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbmFibGUgT2JzaWRpYW4gTGlua3MnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnUmVhZCBPYnNpZGlhbiBsaW5rcyBpbiBtZXNzYWdlcyB1c2luZyBbW2ZpbGVuYW1lXV0gc3ludGF4JylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlT2JzaWRpYW5MaW5rcylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVPYnNpZGlhbkxpbmtzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0VuYWJsZSBDb250ZXh0IE5vdGVzJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0F0dGFjaCBzcGVjaWZpZWQgbm90ZSBjb250ZW50IHRvIGNoYXQgbWVzc2FnZXMnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb250ZXh0Tm90ZXMpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ29udGV4dE5vdGVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRleHROb3Rlc0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ2NvbnRleHQtbm90ZXMtY29udGFpbmVyJyk7XHJcbiAgICAgICAgY29udGV4dE5vdGVzQ29udGFpbmVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcyNHB4JztcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGV4dE5vdGVzQ29udGFpbmVyKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ29udGV4dCBOb3RlcycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdOb3RlcyB0byBhdHRhY2ggYXMgY29udGV4dCAoc3VwcG9ydHMgW1tmaWxlbmFtZV1dIGFuZCBbW2ZpbGVuYW1lI2hlYWRlcl1dIHN5bnRheCknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCdbW05vdGUgTmFtZV1dXFxuW1tBbm90aGVyIE5vdGUjSGVhZGVyXV0nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZXh0Tm90ZXMgfHwgJycpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZXh0Tm90ZXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRW5hYmxlIGxhcmdlciB0ZXh0IGFyZWFcclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5yb3dzID0gNDtcclxuICAgICAgICAgICAgICAgIHRleHQuaW5wdXRFbC5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBQcm92aWRlci1zcGVjaWZpYyBzZXR0aW5ncyBzZWN0aW9uXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1Byb3ZpZGVyIFNldHRpbmdzJyB9KTtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdBSSBQcm92aWRlcicpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdDaG9vc2Ugd2hpY2ggQUkgcHJvdmlkZXIgdG8gdXNlJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignb3BlbmFpJywgJ09wZW5BSSAoQ2hhdEdQVCknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2FudGhyb3BpYycsICdBbnRocm9waWMgKENsYXVkZSknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaScsICdHb29nbGUgKEdlbWluaSknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ29sbGFtYScsICdPbGxhbWEgKExvY2FsIEFJKScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6ICdvcGVuYWknIHwgJ2FudGhyb3BpYycgfCAnZ2VtaW5pJyB8ICdvbGxhbWEnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWZyZXNoIHZpZXcgdG8gc2hvdyBwcm92aWRlci1zcGVjaWZpYyBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBzd2l0Y2ggKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ29wZW5haSc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck9wZW5BSVNldHRpbmdzKGNvbnRlbnRFbCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnYW50aHJvcGljJzpcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyQW50aHJvcGljU2V0dGluZ3MoY29udGVudEVsKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdnZW1pbmknOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJHZW1pbmlTZXR0aW5ncyhjb250ZW50RWwpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ29sbGFtYSc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlck9sbGFtYVNldHRpbmdzKGNvbnRlbnRFbCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJQcm92aWRlclNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgc2V0dGluZ3M6IGFueSwgcHJvdmlkZXJOYW1lOiBzdHJpbmcsIHRlc3RDb25uZWN0aW9uQ2FsbGJhY2s6ICgpID0+IFByb21pc2U8dm9pZD4pIHtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1Rlc3QgQ29ubmVjdGlvbicpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKGBWZXJpZnkgeW91ciBBUEkga2V5IGFuZCBmZXRjaCBhdmFpbGFibGUgbW9kZWxzIGZvciAke3Byb3ZpZGVyTmFtZX1gKVxyXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cclxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdUZXN0JylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdGluZy4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGVzdENvbm5lY3Rpb25DYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1Rlc3QnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIGlmIChzZXR0aW5ncy5sYXN0VGVzdFJlc3VsdCkge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc2V0dGluZ3MubGFzdFRlc3RSZXN1bHQudGltZXN0YW1wKTtcclxuICAgICAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBMYXN0IHRlc3Q6ICR7ZGF0ZS50b0xvY2FsZVN0cmluZygpfSAtICR7c2V0dGluZ3MubGFzdFRlc3RSZXN1bHQubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgY2xzOiBzZXR0aW5ncy5sYXN0VGVzdFJlc3VsdC5zdWNjZXNzID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnTW9kZWwnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhgQ2hvb3NlIHRoZSAke3Byb3ZpZGVyTmFtZX0gbW9kZWwgdG8gdXNlYClcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbW9kZWwgb2Ygc2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG1vZGVsLCBtb2RlbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5ncy5tb2RlbClcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm1vZGVsID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlck9wZW5BSVNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvdmlkZXJTZXR0aW5ncyhjb250YWluZXJFbCwgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MsICdPcGVuQUknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gY3JlYXRlUHJvdmlkZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm92aWRlci50ZXN0Q29ubmVjdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5tb2RlbHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haVNldHRpbmdzLmF2YWlsYWJsZU1vZGVscyA9IHJlc3VsdC5tb2RlbHM7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haVNldHRpbmdzLmxhc3RUZXN0UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShyZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpOyAvLyBSZWZyZXNoIHZpZXdcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haVNldHRpbmdzLmxhc3RUZXN0UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UocmVzdWx0Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJBbnRocm9waWNTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLnJlbmRlclByb3ZpZGVyU2V0dGluZ3MoY29udGFpbmVyRWwsIHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzLCAnQW50aHJvcGljJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IGNyZWF0ZVByb3ZpZGVyKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvdmlkZXIudGVzdENvbm5lY3Rpb24oKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQubW9kZWxzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNTZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMgPSByZXN1bHQubW9kZWxzO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNTZXR0aW5ncy5sYXN0VGVzdFJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UocmVzdWx0Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk9wZW4oKTsgLy8gUmVmcmVzaCB2aWV3XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNTZXR0aW5ncy5sYXN0VGVzdFJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHJlc3VsdC5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyR2VtaW5pU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJQcm92aWRlclNldHRpbmdzKGNvbnRhaW5lckVsLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW1pbmlTZXR0aW5ncywgJ0dlbWluaScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBjcmVhdGVQcm92aWRlcih0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb3ZpZGVyLnRlc3RDb25uZWN0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0Lm1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzID0gcmVzdWx0Lm1vZGVscztcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHJlc3VsdC5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25PcGVuKCk7IC8vIFJlZnJlc2ggdmlld1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShyZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlck9sbGFtYVNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvdmlkZXJTZXR0aW5ncyhjb250YWluZXJFbCwgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3MsICdPbGxhbWEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gY3JlYXRlUHJvdmlkZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm92aWRlci50ZXN0Q29ubmVjdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5tb2RlbHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9sbGFtYVNldHRpbmdzLmF2YWlsYWJsZU1vZGVscyA9IHJlc3VsdC5tb2RlbHM7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9sbGFtYVNldHRpbmdzLmxhc3RUZXN0UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShyZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpOyAvLyBSZWZyZXNoIHZpZXdcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9sbGFtYVNldHRpbmdzLmxhc3RUZXN0UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UocmVzdWx0Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBoZWxwIHRleHQgZm9yIE9sbGFtYSBzZXR1cFxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7XHJcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXHJcbiAgICAgICAgICAgIHRleHQ6ICdUbyB1c2UgT2xsYW1hOidcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBzdGVwcyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdvbCcpO1xyXG4gICAgICAgIHN0ZXBzLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ0luc3RhbGwgT2xsYW1hIGZyb20gaHR0cHM6Ly9vbGxhbWEuYWknIH0pO1xyXG4gICAgICAgIHN0ZXBzLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1N0YXJ0IHRoZSBPbGxhbWEgc2VydmVyJyB9KTtcclxuICAgICAgICBzdGVwcy5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICdQdWxsIG1vZGVscyB1c2luZyBcIm9sbGFtYSBwdWxsIG1vZGVsLW5hbWVcIicgfSk7XHJcbiAgICAgICAgc3RlcHMuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAnVGVzdCBjb25uZWN0aW9uIHRvIHNlZSBhdmFpbGFibGUgbW9kZWxzJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbkNsb3NlKCkge1xyXG4gICAgICAgIC8vIENsZWFuIHVwIGFueSByZXNvdXJjZXMgaWYgbmVlZGVkXHJcbiAgICB9XHJcblxyXG59XHJcbiIsICJpbXBvcnQgeyBOb3RpY2UsIFRGaWxlLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IE1lc3NhZ2UsIE15UGx1Z2luU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG4vKipcclxuICogRXh0cmFjdCBjb250ZW50IHVuZGVyIGEgc3BlY2lmaWMgaGVhZGVyIGluIGEgbm90ZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RDb250ZW50VW5kZXJIZWFkZXIoY29udGVudDogc3RyaW5nLCBoZWFkZXJUZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcclxuICAgIGxldCBmb3VuZEhlYWRlciA9IGZhbHNlO1xyXG4gICAgbGV0IGV4dHJhY3RlZENvbnRlbnQgPSBbXTtcclxuICAgIGxldCBoZWFkZXJMZXZlbCA9IDA7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcclxuICAgICAgICBjb25zdCBoZWFkZXJNYXRjaCA9IGxpbmUubWF0Y2goL14oIyspXFxzKyguKj8pJC8pO1xyXG4gICAgICAgIGlmIChoZWFkZXJNYXRjaCkge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SGVhZGVyTGV2ZWwgPSBoZWFkZXJNYXRjaFsxXS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRIZWFkZXJUZXh0ID0gaGVhZGVyTWF0Y2hbMl0udHJpbSgpO1xyXG4gICAgICAgICAgICBpZiAoZm91bmRIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SGVhZGVyTGV2ZWwgPD0gaGVhZGVyTGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50SGVhZGVyVGV4dC50b0xvd2VyQ2FzZSgpID09PSBoZWFkZXJUZXh0LnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgICAgIGZvdW5kSGVhZGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGhlYWRlckxldmVsID0gY3VycmVudEhlYWRlckxldmVsO1xyXG4gICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudC5wdXNoKGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZvdW5kSGVhZGVyKSB7XHJcbiAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQucHVzaChsaW5lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZXh0cmFjdGVkQ29udGVudC5qb2luKCdcXG4nKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFByb2Nlc3MgYSBzaW5nbGUgbWVzc2FnZSBjb250ZW50IHRvIGluY2x1ZGUgT2JzaWRpYW4gbm90ZSBjb250ZW50c1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NPYnNpZGlhbkxpbmtzKGNvbnRlbnQ6IHN0cmluZywgYXBwOiBBcHAsIHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIGlmICghc2V0dGluZ3MuZW5hYmxlT2JzaWRpYW5MaW5rcykgcmV0dXJuIGNvbnRlbnQ7XHJcbiAgICBjb25zdCBsaW5rUmVnZXggPSAvXFxbXFxbKC4qPylcXF1cXF0vZztcclxuICAgIGxldCBtYXRjaDtcclxuICAgIGxldCBwcm9jZXNzZWRDb250ZW50ID0gY29udGVudDtcclxuICAgIHdoaWxlICgobWF0Y2ggPSBsaW5rUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcclxuICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMF0gJiYgbWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgY29uc3QgcGFydHMgPSBtYXRjaFsxXS5zcGxpdCgnfCcpO1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhcnRzWzBdLnRyaW0oKTtcclxuICAgICAgICAgICAgY29uc3QgZGlzcGxheVRleHQgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHNbMV0udHJpbSgpIDogZmlsZVBhdGg7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpIHx8IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYCR7ZmlsZVBhdGh9Lm1kYCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxGaWxlcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUgPSBhbGxGaWxlcy5maW5kKGYgPT4gZi5uYW1lID09PSBmaWxlUGF0aCB8fCBmLm5hbWUgPT09IGAke2ZpbGVQYXRofS5tZGAgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZi5iYXNlbmFtZS50b0xvd2VyQ2FzZSgpID09PSBmaWxlUGF0aC50b0xvd2VyQ2FzZSgpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGYucGF0aCA9PT0gZmlsZVBhdGggfHwgZi5wYXRoID09PSBgJHtmaWxlUGF0aH0ubWRgKSB8fCBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyTWF0Y2ggPSBmaWxlUGF0aC5tYXRjaCgvKC4qPykjKC4qKS8pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGV4dHJhY3RlZENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgJiYgZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90ZUNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudCA9IGV4dHJhY3RDb250ZW50VW5kZXJIZWFkZXIobm90ZUNvbnRlbnQsIGhlYWRlck1hdGNoWzJdLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudCA9IG5vdGVDb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWRDb250ZW50ID0gcHJvY2Vzc2VkQ29udGVudC5yZXBsYWNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYCR7bWF0Y2hbMF19XFxuXFxuLS0tXFxuTm90ZSBOYW1lOiAke2ZpbGVQYXRofVxcbkNvbnRlbnQ6XFxuJHtleHRyYWN0ZWRDb250ZW50fVxcbi0tLVxcbmBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBGaWxlIG5vdCBmb3VuZDogJHtmaWxlUGF0aH0uIEVuc3VyZSB0aGUgZmlsZSBuYW1lIGFuZCBwYXRoIGFyZSBjb3JyZWN0LmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3IgcHJvY2Vzc2luZyBsaW5rIGZvciAke2ZpbGVQYXRofTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByb2Nlc3NlZENvbnRlbnQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcm9jZXNzIGNvbnRleHQgbm90ZXMgc3BlY2lmaWVkIGluIHRoZSBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NDb250ZXh0Tm90ZXMoY29udGV4dE5vdGVzVGV4dDogc3RyaW5nLCBhcHA6IEFwcCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBjb25zdCBsaW5rUmVnZXggPSAvXFxbXFxbKC4qPylcXF1cXF0vZztcclxuICAgIGxldCBtYXRjaDtcclxuICAgIGxldCBjb250ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB3aGlsZSAoKG1hdGNoID0gbGlua1JlZ2V4LmV4ZWMoY29udGV4dE5vdGVzVGV4dCkpICE9PSBudWxsKSB7XHJcbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gbWF0Y2hbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyTWF0Y2ggPSBmaWxlTmFtZS5tYXRjaCgvKC4qPykjKC4qKS8pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUZpbGVOYW1lID0gaGVhZGVyTWF0Y2ggPyBoZWFkZXJNYXRjaFsxXS50cmltKCkgOiBmaWxlTmFtZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlck5hbWUgPSBoZWFkZXJNYXRjaCA/IGhlYWRlck1hdGNoWzJdLnRyaW0oKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYmFzZUZpbGVOYW1lKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYCR7YmFzZUZpbGVOYW1lfS5tZGApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsRmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gYWxsRmlsZXMuZmluZChmID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGYuYmFzZW5hbWUudG9Mb3dlckNhc2UoKSA9PT0gYmFzZUZpbGVOYW1lLnRvTG93ZXJDYXNlKCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZi5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IGAke2Jhc2VGaWxlTmFtZS50b0xvd2VyQ2FzZSgpfS5tZGBcclxuICAgICAgICAgICAgICAgICAgICApIHx8IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSAmJiBmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RlQ29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRDb250ZW50ICs9IGAtLS1cXG5Gcm9tIG5vdGU6ICR7ZmlsZS5iYXNlbmFtZX1cXG5cXG5gO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckNvbnRlbnQgPSBleHRyYWN0Q29udGVudFVuZGVySGVhZGVyKG5vdGVDb250ZW50LCBoZWFkZXJOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dENvbnRlbnQgKz0gaGVhZGVyQ29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Q29udGVudCArPSBub3RlQ29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dENvbnRlbnQgKz0gJ1xcblxcbic7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRDb250ZW50ICs9IGBOb3RlIG5vdCBmb3VuZDogJHtmaWxlTmFtZX1cXG5cXG5gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dENvbnRlbnQgKz0gYEVycm9yIHByb2Nlc3Npbmcgbm90ZSAke2ZpbGVOYW1lfTogJHtlcnJvci5tZXNzYWdlfVxcblxcbmA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY29udGV4dENvbnRlbnQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcm9jZXNzIGFuIGFycmF5IG9mIG1lc3NhZ2VzIHRvIGluY2x1ZGUgT2JzaWRpYW4gbm90ZSBjb250ZW50c1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NNZXNzYWdlcyhtZXNzYWdlczogTWVzc2FnZVtdLCBhcHA6IEFwcCwgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3MpOiBQcm9taXNlPE1lc3NhZ2VbXT4ge1xyXG4gICAgY29uc3QgcHJvY2Vzc2VkTWVzc2FnZXM6IE1lc3NhZ2VbXSA9IFtdO1xyXG4gICAgaWYgKHNldHRpbmdzLmVuYWJsZUNvbnRleHROb3RlcyAmJiBzZXR0aW5ncy5jb250ZXh0Tm90ZXMpIHtcclxuICAgICAgICBjb25zdCBjb250ZXh0Q29udGVudCA9IGF3YWl0IHByb2Nlc3NDb250ZXh0Tm90ZXMoc2V0dGluZ3MuY29udGV4dE5vdGVzLCBhcHApO1xyXG4gICAgICAgIGlmIChjb250ZXh0Q29udGVudCkge1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZXMubGVuZ3RoID4gMCAmJiBtZXNzYWdlc1swXS5yb2xlID09PSAnc3lzdGVtJykge1xyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkTWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYCR7bWVzc2FnZXNbMF0uY29udGVudH1cXG5cXG5IZXJlIGlzIGFkZGl0aW9uYWwgY29udGV4dDpcXG4ke2NvbnRleHRDb250ZW50fWBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZXMgPSBtZXNzYWdlcy5zbGljZSgxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZE1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGBIZXJlIGlzIGNvbnRleHQgZm9yIG91ciBjb252ZXJzYXRpb246XFxuJHtjb250ZXh0Q29udGVudH1gXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBtZXNzYWdlcykge1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZENvbnRlbnQgPSBhd2FpdCBwcm9jZXNzT2JzaWRpYW5MaW5rcyhtZXNzYWdlLmNvbnRlbnQsIGFwcCwgc2V0dGluZ3MpO1xyXG4gICAgICAgIHByb2Nlc3NlZE1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICByb2xlOiBtZXNzYWdlLnJvbGUsXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHByb2Nlc3NlZENvbnRlbnRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcm9jZXNzZWRNZXNzYWdlcztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbnRleHROb3Rlc0NvbnRlbnQoY29udGV4dE5vdGVzVGV4dDogc3RyaW5nLCBhcHA6IEFwcCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICByZXR1cm4gcHJvY2Vzc0NvbnRleHROb3Rlcyhjb250ZXh0Tm90ZXNUZXh0LCBhcHApO1xyXG59XHJcbiIsICJpbXBvcnQgeyBNeVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIEdlbmVyYXRlIHRoZSBzeXN0ZW0gbWVzc2FnZSB3aXRoIG9wdGlvbmFsIGRhdGUgYW5kIHRpbWUgaW5mb3JtYXRpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTeXN0ZW1NZXNzYWdlKHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzKTogc3RyaW5nIHtcclxuICAgIGxldCBzeXN0ZW1NZXNzYWdlID0gc2V0dGluZ3Muc3lzdGVtTWVzc2FnZTtcclxuXHJcbiAgICBpZiAoc2V0dGluZ3MuaW5jbHVkZURhdGVXaXRoU3lzdGVtTWVzc2FnZSkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XHJcbiAgICAgICAgc3lzdGVtTWVzc2FnZSA9IGAke3N5c3RlbU1lc3NhZ2V9XFxuXFxuVGhlIGN1cnJlbnQgZGF0ZSBpcyAke2N1cnJlbnREYXRlfS5gO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzZXR0aW5ncy5pbmNsdWRlVGltZVdpdGhTeXN0ZW1NZXNzYWdlKSB7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCB0aW1lWm9uZU9mZnNldCA9IG5vdy5nZXRUaW1lem9uZU9mZnNldCgpO1xyXG4gICAgICAgIGNvbnN0IG9mZnNldEhvdXJzID0gTWF0aC5hYnModGltZVpvbmVPZmZzZXQpIC8gNjA7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0TWludXRlcyA9IE1hdGguYWJzKHRpbWVab25lT2Zmc2V0KSAlIDYwO1xyXG4gICAgICAgIGNvbnN0IHNpZ24gPSB0aW1lWm9uZU9mZnNldCA+IDAgPyAnLScgOiAnKyc7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gbm93LnRvTG9jYWxlVGltZVN0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IHRpbWVab25lU3RyaW5nID0gYFVUQyR7c2lnbn0ke29mZnNldEhvdXJzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtvZmZzZXRNaW51dGVzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xyXG4gICAgICAgIHN5c3RlbU1lc3NhZ2UgPSBgJHtzeXN0ZW1NZXNzYWdlfVxcblxcblRoZSBjdXJyZW50IHRpbWUgaXMgJHtjdXJyZW50VGltZX0gJHt0aW1lWm9uZVN0cmluZ30uYDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3lzdGVtTWVzc2FnZTtcclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFB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a0JBQWtCLE1BQU0sS0FBSyxTQUFTLENBQUM7QUFBQSxFQUM3RTtBQUFBLEVBRUEsTUFBTSxlQUFlO0FBQ2pCLFVBQU0sS0FBSyxTQUFTLEtBQUssUUFBUTtBQUFBLEVBQ3JDO0FBQUEsRUFFQSxNQUFjLGdCQUFnQixVQUF5QztBQUNuRSxXQUFPLGdCQUFnQixVQUFVLEtBQUssS0FBSyxLQUFLLFFBQVE7QUFBQSxFQUM1RDtBQUFBLEVBRUEsTUFBYSx1QkFBdUIsa0JBQTJDO0FBQzNFLFdBQU8sdUJBQXVCLGtCQUFrQixLQUFLLEdBQUc7QUFBQSxFQUM1RDtBQUNKOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAic3RhdHVzIiwgImZldGNoIiwgIlJlcXVlc3QiLCAiUmVzcG9uc2UiLCAiSGVhZGVycyIsICJGb3JtRGF0YSIsICJCbG9iIiwgIkZpbGUiLCAiUmVhZGFibGVTdHJlYW0iLCAiX2EiLCAiUmVhZGFibGVTdHJlYW0iLCAiX2EiLCAiX2EiLCAiRmlsZSIsICJmZXRjaCIsICJvcHRzIiwgIlBhZ2UiLCAiX2EiLCAicmV0cnlNZXNzYWdlIiwgIl9hIiwgIl9hIiwgIl9hIiwgIl9hIiwgIl9fY2xhc3NQcml2YXRlRmllbGRTZXQiLCAiX19jbGFzc1ByaXZhdGVGaWVsZEdldCIsICJfYSIsICJfQmV0YU1lc3NhZ2VTdHJlYW1fZ2V0RmluYWxNZXNzYWdlIiwgIl9CZXRhTWVzc2FnZVN0cmVhbV9nZXRGaW5hbFRleHQiLCAiX0JldGFNZXNzYWdlU3RyZWFtX2JlZ2luUmVxdWVzdCIsICJfQmV0YU1lc3NhZ2VTdHJlYW1fYWRkU3RyZWFtRXZlbnQiLCAiX0JldGFNZXNzYWdlU3RyZWFtX2VuZFJlcXVlc3QiLCAiX0JldGFNZXNzYWdlU3RyZWFtX2FjY3VtdWxhdGVNZXNzYWdlIiwgImNodW5rIiwgIl9hIiwgIl9hIiwgIkJhdGNoZXMiLCAiSlNPTl9CVUZfUFJPUEVSVFkiLCAiX19jbGFzc1ByaXZhdGVGaWVsZFNldCIsICJfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0IiwgIl9hIiwgIl9NZXNzYWdlU3RyZWFtX2dldEZpbmFsTWVzc2FnZSIsICJfTWVzc2FnZVN0cmVhbV9nZXRGaW5hbFRleHQiLCAiX01lc3NhZ2VTdHJlYW1fYmVnaW5SZXF1ZXN0IiwgIl9NZXNzYWdlU3RyZWFtX2FkZFN0cmVhbUV2ZW50IiwgImNoZWNrTmV2ZXIiLCAiX01lc3NhZ2VTdHJlYW1fZW5kUmVxdWVzdCIsICJfTWVzc2FnZVN0cmVhbV9hY2N1bXVsYXRlTWVzc2FnZSIsICJjaHVuayIsICJNZXNzYWdlcyIsICJCYXRjaGVzIiwgIl9hIiwgIkRFUFJFQ0FURURfTU9ERUxTIiwgIk1vZGVscyIsICJfYSIsICJNZXNzYWdlcyIsICJNb2RlbHMiLCAiX2EiLCAiX2EiLCAiX2EiLCAiX2EiLCAiX2EiLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgImNvbnRlbnQiLCAiY29udGVudEVsIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiVklFV19UWVBFX01PREVMX1NFVFRJTkdTIiwgIl9hIl0KfQo=
