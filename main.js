/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// src/prompts.ts
var prompts_exports = {};
__export(prompts_exports, {
  DEFAULT_GENERAL_SYSTEM_PROMPT: () => DEFAULT_GENERAL_SYSTEM_PROMPT,
  DEFAULT_SUMMARY_PROMPT: () => DEFAULT_SUMMARY_PROMPT,
  DEFAULT_TITLE_PROMPT: () => DEFAULT_TITLE_PROMPT,
  DEFAULT_YAML_SYSTEM_MESSAGE: () => DEFAULT_YAML_SYSTEM_MESSAGE
});
var DEFAULT_TITLE_PROMPT, DEFAULT_SUMMARY_PROMPT, DEFAULT_GENERAL_SYSTEM_PROMPT, DEFAULT_YAML_SYSTEM_MESSAGE;
var init_prompts = __esm({
  "src/prompts.ts"() {
    DEFAULT_TITLE_PROMPT = "You are a title generator. You will give succinct titles that do not contain backslashes, forward slashes, or colons. Only generate a title as your response.";
    DEFAULT_SUMMARY_PROMPT = "Summarize the note content in 1-2 sentences, focusing on the main ideas and purpose.";
    DEFAULT_GENERAL_SYSTEM_PROMPT = "You are a helpful assistant.";
    DEFAULT_YAML_SYSTEM_MESSAGE = "You are an assistant that generates YAML attribute values for Obsidian notes. Read the note and generate a value for the specified YAML field. Only output the value, not the key or extra text.";
  }
});

// src/types.ts
var types_exports = {};
__export(types_exports, {
  DEFAULT_SETTINGS: () => DEFAULT_SETTINGS
});
var DEFAULT_SETTINGS;
var init_types = __esm({
  "src/types.ts"() {
    init_prompts();
    DEFAULT_SETTINGS = {
      referenceCurrentNote: false,
      provider: "openai",
      openaiSettings: {
        apiKey: "",
        model: "gpt-4.1",
        availableModels: []
      },
      anthropicSettings: {
        apiKey: "",
        model: "claude-3-5-sonnet-latest",
        availableModels: []
      },
      geminiSettings: {
        apiKey: "",
        model: "gemini-2.5-flash-preview-05-20",
        availableModels: []
      },
      ollamaSettings: {
        serverUrl: "http://localhost:11434",
        model: "llama2",
        availableModels: []
      },
      systemMessage: DEFAULT_GENERAL_SYSTEM_PROMPT,
      temperature: 0.7,
      maxTokens: 1e3,
      includeDateWithSystemMessage: false,
      includeTimeWithSystemMessage: false,
      enableStreaming: true,
      autoOpenModelSettings: true,
      enableObsidianLinks: true,
      titleOutputMode: "clipboard",
      summaryOutputMode: "clipboard",
      chatSeparator: "----",
      chatStartString: void 0,
      chatEndString: void 0,
      enableContextNotes: false,
      contextNotes: "",
      titlePrompt: DEFAULT_TITLE_PROMPT,
      summaryPrompt: DEFAULT_SUMMARY_PROMPT,
      maxSessions: 10,
      autoSaveSessions: true,
      sessions: [],
      activeSessionId: void 0,
      expandLinkedNotesRecursively: false,
      maxLinkExpansionDepth: 2,
      chatNoteFolder: "",
      // Default to vault root
      yamlAttributeGenerators: [
        {
          attributeName: "summary",
          prompt: DEFAULT_SUMMARY_PROMPT,
          outputMode: "metadata",
          commandName: "Generate YAML: summary"
        }
      ]
    };
  }
});

// providers/base.ts
var ProviderError, BaseProvider;
var init_base = __esm({
  "providers/base.ts"() {
    ProviderError = class extends Error {
      constructor(type2, message, statusCode) {
        super(message);
        __publicField(this, "type");
        __publicField(this, "statusCode");
        this.type = type2;
        this.statusCode = statusCode;
        this.name = "ProviderError";
      }
    };
    BaseProvider = class {
      /**
       * Handle common HTTP errors
       */
      handleHttpError(error) {
        if (error instanceof Response) {
          const status2 = error.status;
          switch (status2) {
            case 401:
              throw new ProviderError(
                "invalid_api_key" /* InvalidApiKey */,
                "Invalid API key",
                status2
              );
            case 429:
              throw new ProviderError(
                "rate_limit" /* RateLimit */,
                "Rate limit exceeded",
                status2
              );
            case 400:
              throw new ProviderError(
                "invalid_request" /* InvalidRequest */,
                "Invalid request",
                status2
              );
            case 500:
            case 502:
            case 503:
            case 504:
              throw new ProviderError(
                "server_error" /* ServerError */,
                "Server error occurred",
                status2
              );
            default:
              throw new ProviderError(
                "server_error" /* ServerError */,
                `Unknown error occurred: ${status2}`,
                status2
              );
          }
        }
        if (!error.response) {
          throw new ProviderError(
            "network_error" /* NetworkError */,
            "Network error occurred"
          );
        }
        const status = error.response.status;
        switch (status) {
          case 401:
            throw new ProviderError(
              "invalid_api_key" /* InvalidApiKey */,
              "Invalid API key",
              status
            );
          case 429:
            throw new ProviderError(
              "rate_limit" /* RateLimit */,
              "Rate limit exceeded",
              status
            );
          case 400:
            throw new ProviderError(
              "invalid_request" /* InvalidRequest */,
              "Invalid request",
              status
            );
          case 500:
          case 502:
          case 503:
          case 504:
            throw new ProviderError(
              "server_error" /* ServerError */,
              "Server error occurred",
              status
            );
          default:
            throw new ProviderError(
              "server_error" /* ServerError */,
              `Unknown error occurred: ${status}`,
              status
            );
        }
      }
      /**
       * Format error message for connection test results
       */
      formatErrorMessage(error) {
        if (error instanceof ProviderError) {
          switch (error.type) {
            case "invalid_api_key" /* InvalidApiKey */:
              return "Invalid API key. Please check your credentials.";
            case "rate_limit" /* RateLimit */:
              return "Rate limit exceeded. Please try again later.";
            case "network_error" /* NetworkError */:
              return "Network error. Please check your internet connection.";
            default:
              return error.message;
          }
        }
        return error.message || "An unknown error occurred";
      }
      /**
       * Create a standard error response for connection tests
       */
      createErrorResponse(error) {
        return {
          success: false,
          message: this.formatErrorMessage(error)
        };
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/version.mjs
var VERSION;
var init_version = __esm({
  "node_modules/@anthropic-ai/sdk/version.mjs"() {
    VERSION = "0.36.3";
  }
});

// node_modules/@anthropic-ai/sdk/_shims/registry.mjs
function setShims(shims, options = { auto: false }) {
  if (auto) {
    throw new Error(`you must \`import '@anthropic-ai/sdk/shims/${shims.kind}'\` before importing anything else from @anthropic-ai/sdk`);
  }
  if (kind) {
    throw new Error(`can't \`import '@anthropic-ai/sdk/shims/${shims.kind}'\` after \`import '@anthropic-ai/sdk/shims/${kind}'\``);
  }
  auto = options.auto;
  kind = shims.kind;
  fetch2 = shims.fetch;
  Request2 = shims.Request;
  Response2 = shims.Response;
  Headers2 = shims.Headers;
  FormData2 = shims.FormData;
  Blob2 = shims.Blob;
  File2 = shims.File;
  ReadableStream2 = shims.ReadableStream;
  getMultipartRequestOptions = shims.getMultipartRequestOptions;
  getDefaultAgent = shims.getDefaultAgent;
  fileFromPath = shims.fileFromPath;
  isFsReadStream = shims.isFsReadStream;
}
var auto, kind, fetch2, Request2, Response2, Headers2, FormData2, Blob2, File2, ReadableStream2, getMultipartRequestOptions, getDefaultAgent, fileFromPath, isFsReadStream;
var init_registry = __esm({
  "node_modules/@anthropic-ai/sdk/_shims/registry.mjs"() {
    auto = false;
    kind = void 0;
    fetch2 = void 0;
    Request2 = void 0;
    Response2 = void 0;
    Headers2 = void 0;
    FormData2 = void 0;
    Blob2 = void 0;
    File2 = void 0;
    ReadableStream2 = void 0;
    getMultipartRequestOptions = void 0;
    getDefaultAgent = void 0;
    fileFromPath = void 0;
    isFsReadStream = void 0;
  }
});

// node_modules/@anthropic-ai/sdk/_shims/MultipartBody.mjs
var MultipartBody;
var init_MultipartBody = __esm({
  "node_modules/@anthropic-ai/sdk/_shims/MultipartBody.mjs"() {
    MultipartBody = class {
      constructor(body) {
        this.body = body;
      }
      get [Symbol.toStringTag]() {
        return "MultipartBody";
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/_shims/web-runtime.mjs
function getRuntime({ manuallyImported } = {}) {
  const recommendation = manuallyImported ? `You may need to use polyfills` : `Add one of these imports before your first \`import \u2026 from '@anthropic-ai/sdk'\`:
- \`import '@anthropic-ai/sdk/shims/node'\` (if you're running on Node)
- \`import '@anthropic-ai/sdk/shims/web'\` (otherwise)
`;
  let _fetch, _Request, _Response, _Headers;
  try {
    _fetch = fetch;
    _Request = Request;
    _Response = Response;
    _Headers = Headers;
  } catch (error) {
    throw new Error(`this environment is missing the following Web Fetch API type: ${error.message}. ${recommendation}`);
  }
  return {
    kind: "web",
    fetch: _fetch,
    Request: _Request,
    Response: _Response,
    Headers: _Headers,
    FormData: (
      // @ts-ignore
      typeof FormData !== "undefined" ? FormData : class FormData {
        // @ts-ignore
        constructor() {
          throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${recommendation}`);
        }
      }
    ),
    Blob: typeof Blob !== "undefined" ? Blob : class Blob {
      constructor() {
        throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${recommendation}`);
      }
    },
    File: (
      // @ts-ignore
      typeof File !== "undefined" ? File : class File {
        // @ts-ignore
        constructor() {
          throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${recommendation}`);
        }
      }
    ),
    ReadableStream: (
      // @ts-ignore
      typeof ReadableStream !== "undefined" ? ReadableStream : class ReadableStream {
        // @ts-ignore
        constructor() {
          throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${recommendation}`);
        }
      }
    ),
    getMultipartRequestOptions: async (form, opts) => ({
      ...opts,
      body: new MultipartBody(form)
    }),
    getDefaultAgent: (url) => void 0,
    fileFromPath: () => {
      throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/anthropics/anthropic-sdk-typescript#file-uploads");
    },
    isFsReadStream: (value) => false
  };
}
var init_web_runtime = __esm({
  "node_modules/@anthropic-ai/sdk/_shims/web-runtime.mjs"() {
    init_MultipartBody();
  }
});

// node_modules/@anthropic-ai/sdk/_shims/auto/runtime.mjs
var init_runtime = __esm({
  "node_modules/@anthropic-ai/sdk/_shims/auto/runtime.mjs"() {
    init_web_runtime();
  }
});

// node_modules/@anthropic-ai/sdk/_shims/index.mjs
var init_shims = __esm({
  "node_modules/@anthropic-ai/sdk/_shims/index.mjs"() {
    init_registry();
    init_runtime();
    init_registry();
    if (!kind) setShims(getRuntime(), { auto: true });
  }
});

// node_modules/@anthropic-ai/sdk/error.mjs
var AnthropicError, APIError, APIUserAbortError, APIConnectionError, APIConnectionTimeoutError, BadRequestError, AuthenticationError, PermissionDeniedError, NotFoundError, ConflictError, UnprocessableEntityError, RateLimitError, InternalServerError;
var init_error = __esm({
  "node_modules/@anthropic-ai/sdk/error.mjs"() {
    init_core();
    AnthropicError = class extends Error {
    };
    APIError = class _APIError extends AnthropicError {
      constructor(status, error, message, headers) {
        super(`${_APIError.makeMessage(status, error, message)}`);
        this.status = status;
        this.headers = headers;
        this.request_id = headers == null ? void 0 : headers["request-id"];
        this.error = error;
      }
      static makeMessage(status, error, message) {
        const msg = (error == null ? void 0 : error.message) ? typeof error.message === "string" ? error.message : JSON.stringify(error.message) : error ? JSON.stringify(error) : message;
        if (status && msg) {
          return `${status} ${msg}`;
        }
        if (status) {
          return `${status} status code (no body)`;
        }
        if (msg) {
          return msg;
        }
        return "(no status code or body)";
      }
      static generate(status, errorResponse, message, headers) {
        if (!status || !headers) {
          return new APIConnectionError({ message, cause: castToError(errorResponse) });
        }
        const error = errorResponse;
        if (status === 400) {
          return new BadRequestError(status, error, message, headers);
        }
        if (status === 401) {
          return new AuthenticationError(status, error, message, headers);
        }
        if (status === 403) {
          return new PermissionDeniedError(status, error, message, headers);
        }
        if (status === 404) {
          return new NotFoundError(status, error, message, headers);
        }
        if (status === 409) {
          return new ConflictError(status, error, message, headers);
        }
        if (status === 422) {
          return new UnprocessableEntityError(status, error, message, headers);
        }
        if (status === 429) {
          return new RateLimitError(status, error, message, headers);
        }
        if (status >= 500) {
          return new InternalServerError(status, error, message, headers);
        }
        return new _APIError(status, error, message, headers);
      }
    };
    APIUserAbortError = class extends APIError {
      constructor({ message } = {}) {
        super(void 0, void 0, message || "Request was aborted.", void 0);
      }
    };
    APIConnectionError = class extends APIError {
      constructor({ message, cause }) {
        super(void 0, void 0, message || "Connection error.", void 0);
        if (cause)
          this.cause = cause;
      }
    };
    APIConnectionTimeoutError = class extends APIConnectionError {
      constructor({ message } = {}) {
        super({ message: message != null ? message : "Request timed out." });
      }
    };
    BadRequestError = class extends APIError {
    };
    AuthenticationError = class extends APIError {
    };
    PermissionDeniedError = class extends APIError {
    };
    NotFoundError = class extends APIError {
    };
    ConflictError = class extends APIError {
    };
    UnprocessableEntityError = class extends APIError {
    };
    RateLimitError = class extends APIError {
    };
    InternalServerError = class extends APIError {
    };
  }
});

// node_modules/@anthropic-ai/sdk/internal/decoders/line.mjs
var LineDecoder;
var init_line = __esm({
  "node_modules/@anthropic-ai/sdk/internal/decoders/line.mjs"() {
    init_error();
    LineDecoder = class _LineDecoder {
      constructor() {
        this.buffer = [];
        this.trailingCR = false;
      }
      decode(chunk) {
        let text = this.decodeText(chunk);
        if (this.trailingCR) {
          text = "\r" + text;
          this.trailingCR = false;
        }
        if (text.endsWith("\r")) {
          this.trailingCR = true;
          text = text.slice(0, -1);
        }
        if (!text) {
          return [];
        }
        const trailingNewline = _LineDecoder.NEWLINE_CHARS.has(text[text.length - 1] || "");
        let lines = text.split(_LineDecoder.NEWLINE_REGEXP);
        if (trailingNewline) {
          lines.pop();
        }
        if (lines.length === 1 && !trailingNewline) {
          this.buffer.push(lines[0]);
          return [];
        }
        if (this.buffer.length > 0) {
          lines = [this.buffer.join("") + lines[0], ...lines.slice(1)];
          this.buffer = [];
        }
        if (!trailingNewline) {
          this.buffer = [lines.pop() || ""];
        }
        return lines;
      }
      decodeText(bytes) {
        var _a2;
        if (bytes == null)
          return "";
        if (typeof bytes === "string")
          return bytes;
        if (typeof Buffer !== "undefined") {
          if (bytes instanceof Buffer) {
            return bytes.toString();
          }
          if (bytes instanceof Uint8Array) {
            return Buffer.from(bytes).toString();
          }
          throw new AnthropicError(`Unexpected: received non-Uint8Array (${bytes.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`);
        }
        if (typeof TextDecoder !== "undefined") {
          if (bytes instanceof Uint8Array || bytes instanceof ArrayBuffer) {
            (_a2 = this.textDecoder) != null ? _a2 : this.textDecoder = new TextDecoder("utf8");
            return this.textDecoder.decode(bytes);
          }
          throw new AnthropicError(`Unexpected: received non-Uint8Array/ArrayBuffer (${bytes.constructor.name}) in a web platform. Please report this error.`);
        }
        throw new AnthropicError(`Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`);
      }
      flush() {
        if (!this.buffer.length && !this.trailingCR) {
          return [];
        }
        const lines = [this.buffer.join("")];
        this.buffer = [];
        this.trailingCR = false;
        return lines;
      }
    };
    LineDecoder.NEWLINE_CHARS = /* @__PURE__ */ new Set(["\n", "\r"]);
    LineDecoder.NEWLINE_REGEXP = /\r\n|[\n\r]/g;
  }
});

// node_modules/@anthropic-ai/sdk/internal/stream-utils.mjs
function ReadableStreamToAsyncIterable(stream) {
  if (stream[Symbol.asyncIterator])
    return stream;
  const reader = stream.getReader();
  return {
    async next() {
      try {
        const result = await reader.read();
        if (result == null ? void 0 : result.done)
          reader.releaseLock();
        return result;
      } catch (e) {
        reader.releaseLock();
        throw e;
      }
    },
    async return() {
      const cancelPromise = reader.cancel();
      reader.releaseLock();
      await cancelPromise;
      return { done: true, value: void 0 };
    },
    [Symbol.asyncIterator]() {
      return this;
    }
  };
}
var init_stream_utils = __esm({
  "node_modules/@anthropic-ai/sdk/internal/stream-utils.mjs"() {
  }
});

// node_modules/@anthropic-ai/sdk/streaming.mjs
async function* _iterSSEMessages(response, controller) {
  if (!response.body) {
    controller.abort();
    throw new AnthropicError(`Attempted to iterate over a response with no body`);
  }
  const sseDecoder = new SSEDecoder();
  const lineDecoder = new LineDecoder();
  const iter = ReadableStreamToAsyncIterable(response.body);
  for await (const sseChunk of iterSSEChunks(iter)) {
    for (const line of lineDecoder.decode(sseChunk)) {
      const sse = sseDecoder.decode(line);
      if (sse)
        yield sse;
    }
  }
  for (const line of lineDecoder.flush()) {
    const sse = sseDecoder.decode(line);
    if (sse)
      yield sse;
  }
}
async function* iterSSEChunks(iterator) {
  let data = new Uint8Array();
  for await (const chunk of iterator) {
    if (chunk == null) {
      continue;
    }
    const binaryChunk = chunk instanceof ArrayBuffer ? new Uint8Array(chunk) : typeof chunk === "string" ? new TextEncoder().encode(chunk) : chunk;
    let newData = new Uint8Array(data.length + binaryChunk.length);
    newData.set(data);
    newData.set(binaryChunk, data.length);
    data = newData;
    let patternIndex;
    while ((patternIndex = findDoubleNewlineIndex(data)) !== -1) {
      yield data.slice(0, patternIndex);
      data = data.slice(patternIndex);
    }
  }
  if (data.length > 0) {
    yield data;
  }
}
function findDoubleNewlineIndex(buffer) {
  const newline = 10;
  const carriage = 13;
  for (let i = 0; i < buffer.length - 2; i++) {
    if (buffer[i] === newline && buffer[i + 1] === newline) {
      return i + 2;
    }
    if (buffer[i] === carriage && buffer[i + 1] === carriage) {
      return i + 2;
    }
    if (buffer[i] === carriage && buffer[i + 1] === newline && i + 3 < buffer.length && buffer[i + 2] === carriage && buffer[i + 3] === newline) {
      return i + 4;
    }
  }
  return -1;
}
function partition(str2, delimiter) {
  const index = str2.indexOf(delimiter);
  if (index !== -1) {
    return [str2.substring(0, index), delimiter, str2.substring(index + delimiter.length)];
  }
  return [str2, "", ""];
}
var Stream, SSEDecoder;
var init_streaming = __esm({
  "node_modules/@anthropic-ai/sdk/streaming.mjs"() {
    init_shims();
    init_error();
    init_line();
    init_stream_utils();
    init_core();
    init_error();
    Stream = class _Stream {
      constructor(iterator, controller) {
        this.iterator = iterator;
        this.controller = controller;
      }
      static fromSSEResponse(response, controller) {
        let consumed = false;
        async function* iterator() {
          if (consumed) {
            throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");
          }
          consumed = true;
          let done = false;
          try {
            for await (const sse of _iterSSEMessages(response, controller)) {
              if (sse.event === "completion") {
                try {
                  yield JSON.parse(sse.data);
                } catch (e) {
                  console.error(`Could not parse message into JSON:`, sse.data);
                  console.error(`From chunk:`, sse.raw);
                  throw e;
                }
              }
              if (sse.event === "message_start" || sse.event === "message_delta" || sse.event === "message_stop" || sse.event === "content_block_start" || sse.event === "content_block_delta" || sse.event === "content_block_stop") {
                try {
                  yield JSON.parse(sse.data);
                } catch (e) {
                  console.error(`Could not parse message into JSON:`, sse.data);
                  console.error(`From chunk:`, sse.raw);
                  throw e;
                }
              }
              if (sse.event === "ping") {
                continue;
              }
              if (sse.event === "error") {
                throw APIError.generate(void 0, `SSE Error: ${sse.data}`, sse.data, createResponseHeaders(response.headers));
              }
            }
            done = true;
          } catch (e) {
            if (e instanceof Error && e.name === "AbortError")
              return;
            throw e;
          } finally {
            if (!done)
              controller.abort();
          }
        }
        return new _Stream(iterator, controller);
      }
      /**
       * Generates a Stream from a newline-separated ReadableStream
       * where each item is a JSON value.
       */
      static fromReadableStream(readableStream, controller) {
        let consumed = false;
        async function* iterLines() {
          const lineDecoder = new LineDecoder();
          const iter = ReadableStreamToAsyncIterable(readableStream);
          for await (const chunk of iter) {
            for (const line of lineDecoder.decode(chunk)) {
              yield line;
            }
          }
          for (const line of lineDecoder.flush()) {
            yield line;
          }
        }
        async function* iterator() {
          if (consumed) {
            throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");
          }
          consumed = true;
          let done = false;
          try {
            for await (const line of iterLines()) {
              if (done)
                continue;
              if (line)
                yield JSON.parse(line);
            }
            done = true;
          } catch (e) {
            if (e instanceof Error && e.name === "AbortError")
              return;
            throw e;
          } finally {
            if (!done)
              controller.abort();
          }
        }
        return new _Stream(iterator, controller);
      }
      [Symbol.asyncIterator]() {
        return this.iterator();
      }
      /**
       * Splits the stream into two streams which can be
       * independently read from at different speeds.
       */
      tee() {
        const left = [];
        const right = [];
        const iterator = this.iterator();
        const teeIterator = (queue) => {
          return {
            next: () => {
              if (queue.length === 0) {
                const result = iterator.next();
                left.push(result);
                right.push(result);
              }
              return queue.shift();
            }
          };
        };
        return [
          new _Stream(() => teeIterator(left), this.controller),
          new _Stream(() => teeIterator(right), this.controller)
        ];
      }
      /**
       * Converts this stream to a newline-separated ReadableStream of
       * JSON stringified values in the stream
       * which can be turned back into a Stream with `Stream.fromReadableStream()`.
       */
      toReadableStream() {
        const self = this;
        let iter;
        const encoder = new TextEncoder();
        return new ReadableStream2({
          async start() {
            iter = self[Symbol.asyncIterator]();
          },
          async pull(ctrl) {
            try {
              const { value, done } = await iter.next();
              if (done)
                return ctrl.close();
              const bytes = encoder.encode(JSON.stringify(value) + "\n");
              ctrl.enqueue(bytes);
            } catch (err) {
              ctrl.error(err);
            }
          },
          async cancel() {
            var _a2;
            await ((_a2 = iter.return) == null ? void 0 : _a2.call(iter));
          }
        });
      }
    };
    SSEDecoder = class {
      constructor() {
        this.event = null;
        this.data = [];
        this.chunks = [];
      }
      decode(line) {
        if (line.endsWith("\r")) {
          line = line.substring(0, line.length - 1);
        }
        if (!line) {
          if (!this.event && !this.data.length)
            return null;
          const sse = {
            event: this.event,
            data: this.data.join("\n"),
            raw: this.chunks
          };
          this.event = null;
          this.data = [];
          this.chunks = [];
          return sse;
        }
        this.chunks.push(line);
        if (line.startsWith(":")) {
          return null;
        }
        let [fieldname, _, value] = partition(line, ":");
        if (value.startsWith(" ")) {
          value = value.substring(1);
        }
        if (fieldname === "event") {
          this.event = value;
        } else if (fieldname === "data") {
          this.data.push(value);
        }
        return null;
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/uploads.mjs
async function toFile(value, name, options) {
  var _a2, _b, _c;
  value = await value;
  if (isFileLike(value)) {
    return value;
  }
  if (isResponseLike(value)) {
    const blob = await value.blob();
    name || (name = (_a2 = new URL(value.url).pathname.split(/[\\/]/).pop()) != null ? _a2 : "unknown_file");
    const data = isBlobLike(blob) ? [await blob.arrayBuffer()] : [blob];
    return new File2(data, name, options);
  }
  const bits = await getBytes(value);
  name || (name = (_b = getName(value)) != null ? _b : "unknown_file");
  if (!(options == null ? void 0 : options.type)) {
    const type2 = (_c = bits[0]) == null ? void 0 : _c.type;
    if (typeof type2 === "string") {
      options = { ...options, type: type2 };
    }
  }
  return new File2(bits, name, options);
}
async function getBytes(value) {
  var _a2;
  let parts = [];
  if (typeof value === "string" || ArrayBuffer.isView(value) || // includes Uint8Array, Buffer, etc.
  value instanceof ArrayBuffer) {
    parts.push(value);
  } else if (isBlobLike(value)) {
    parts.push(await value.arrayBuffer());
  } else if (isAsyncIterableIterator(value)) {
    for await (const chunk of value) {
      parts.push(chunk);
    }
  } else {
    throw new Error(`Unexpected data type: ${typeof value}; constructor: ${(_a2 = value == null ? void 0 : value.constructor) == null ? void 0 : _a2.name}; props: ${propsForError(value)}`);
  }
  return parts;
}
function propsForError(value) {
  const props = Object.getOwnPropertyNames(value);
  return `[${props.map((p) => `"${p}"`).join(", ")}]`;
}
function getName(value) {
  var _a2;
  return getStringFromMaybeBuffer(value.name) || getStringFromMaybeBuffer(value.filename) || // For fs.ReadStream
  ((_a2 = getStringFromMaybeBuffer(value.path)) == null ? void 0 : _a2.split(/[\\/]/).pop());
}
var isResponseLike, isFileLike, isBlobLike, getStringFromMaybeBuffer, isAsyncIterableIterator, isMultipartBody;
var init_uploads = __esm({
  "node_modules/@anthropic-ai/sdk/uploads.mjs"() {
    init_shims();
    init_shims();
    isResponseLike = (value) => value != null && typeof value === "object" && typeof value.url === "string" && typeof value.blob === "function";
    isFileLike = (value) => value != null && typeof value === "object" && typeof value.name === "string" && typeof value.lastModified === "number" && isBlobLike(value);
    isBlobLike = (value) => value != null && typeof value === "object" && typeof value.size === "number" && typeof value.type === "string" && typeof value.text === "function" && typeof value.slice === "function" && typeof value.arrayBuffer === "function";
    getStringFromMaybeBuffer = (x) => {
      if (typeof x === "string")
        return x;
      if (typeof Buffer !== "undefined" && x instanceof Buffer)
        return String(x);
      return void 0;
    };
    isAsyncIterableIterator = (value) => value != null && typeof value === "object" && typeof value[Symbol.asyncIterator] === "function";
    isMultipartBody = (body) => body && typeof body === "object" && body.body && body[Symbol.toStringTag] === "MultipartBody";
  }
});

// node_modules/@anthropic-ai/sdk/core.mjs
async function defaultParseResponse(props) {
  const { response } = props;
  if (props.options.stream) {
    debug("response", response.status, response.url, response.headers, response.body);
    if (props.options.__streamClass) {
      return props.options.__streamClass.fromSSEResponse(response, props.controller);
    }
    return Stream.fromSSEResponse(response, props.controller);
  }
  if (response.status === 204) {
    return null;
  }
  if (props.options.__binaryResponse) {
    return response;
  }
  const contentType = response.headers.get("content-type");
  const isJSON = (contentType == null ? void 0 : contentType.includes("application/json")) || (contentType == null ? void 0 : contentType.includes("application/vnd.api+json"));
  if (isJSON) {
    const json2 = await response.json();
    debug("response", response.status, response.url, response.headers, json2);
    return _addRequestID(json2, response);
  }
  const text = await response.text();
  debug("response", response.status, response.url, response.headers, text);
  return text;
}
function _addRequestID(value, response) {
  if (!value || typeof value !== "object" || Array.isArray(value)) {
    return value;
  }
  return Object.defineProperty(value, "_request_id", {
    value: response.headers.get("request-id"),
    enumerable: false
  });
}
function getBrowserInfo() {
  if (typeof navigator === "undefined" || !navigator) {
    return null;
  }
  const browserPatterns = [
    { key: "edge", pattern: /Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "chrome", pattern: /Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "firefox", pattern: /Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "safari", pattern: /(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/ }
  ];
  for (const { key, pattern } of browserPatterns) {
    const match = pattern.exec(navigator.userAgent);
    if (match) {
      const major = match[1] || 0;
      const minor = match[2] || 0;
      const patch = match[3] || 0;
      return { browser: key, version: `${major}.${minor}.${patch}` };
    }
  }
  return null;
}
function isEmptyObj(obj) {
  if (!obj)
    return true;
  for (const _k in obj)
    return false;
  return true;
}
function hasOwn(obj, key) {
  return Object.prototype.hasOwnProperty.call(obj, key);
}
function applyHeadersMut(targetHeaders, newHeaders) {
  for (const k in newHeaders) {
    if (!hasOwn(newHeaders, k))
      continue;
    const lowerKey = k.toLowerCase();
    if (!lowerKey)
      continue;
    const val = newHeaders[k];
    if (val === null) {
      delete targetHeaders[lowerKey];
    } else if (val !== void 0) {
      targetHeaders[lowerKey] = val;
    }
  }
}
function debug(action, ...args) {
  var _a2;
  if (typeof process !== "undefined" && ((_a2 = process == null ? void 0 : process.env) == null ? void 0 : _a2["DEBUG"]) === "true") {
    console.log(`Anthropic:DEBUG:${action}`, ...args);
  }
}
var __classPrivateFieldSet, __classPrivateFieldGet, _AbstractPage_client, APIPromise, APIClient, AbstractPage, PagePromise, createResponseHeaders, requestOptionsKeys, isRequestOptions, getPlatformProperties, normalizeArch, normalizePlatform, _platformHeaders, getPlatformHeaders, safeJSON, startsWithSchemeRegexp, isAbsoluteURL, sleep, validatePositiveInteger, castToError, readEnv, uuid4, isRunningInBrowser, isHeadersProtocol, getHeader;
var init_core = __esm({
  "node_modules/@anthropic-ai/sdk/core.mjs"() {
    init_version();
    init_streaming();
    init_error();
    init_shims();
    init_uploads();
    __classPrivateFieldSet = function(receiver, state, value, kind2, f) {
      if (kind2 === "m") throw new TypeError("Private method is not writable");
      if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
      if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
      return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
    };
    __classPrivateFieldGet = function(receiver, state, kind2, f) {
      if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
      if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
      return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
    };
    APIPromise = class _APIPromise extends Promise {
      constructor(responsePromise, parseResponse = defaultParseResponse) {
        super((resolve) => {
          resolve(null);
        });
        this.responsePromise = responsePromise;
        this.parseResponse = parseResponse;
      }
      _thenUnwrap(transform) {
        return new _APIPromise(this.responsePromise, async (props) => _addRequestID(transform(await this.parseResponse(props), props), props.response));
      }
      /**
       * Gets the raw `Response` instance instead of parsing the response
       * data.
       *
       * If you want to parse the response body but still get the `Response`
       * instance, you can use {@link withResponse()}.
       *
       * ðŸ‘‹ Getting the wrong TypeScript type for `Response`?
       * Try setting `"moduleResolution": "NodeNext"` if you can,
       * or add one of these imports before your first `import â€¦ from '@anthropic-ai/sdk'`:
       * - `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)
       * - `import '@anthropic-ai/sdk/shims/web'` (otherwise)
       */
      asResponse() {
        return this.responsePromise.then((p) => p.response);
      }
      /**
       * Gets the parsed response data, the raw `Response` instance and the ID of the request,
       * returned vie the `request-id` header which is useful for debugging requests and resporting
       * issues to Anthropic.
       *
       * If you just want to get the raw `Response` instance without parsing it,
       * you can use {@link asResponse()}.
       *
       * ðŸ‘‹ Getting the wrong TypeScript type for `Response`?
       * Try setting `"moduleResolution": "NodeNext"` if you can,
       * or add one of these imports before your first `import â€¦ from '@anthropic-ai/sdk'`:
       * - `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)
       * - `import '@anthropic-ai/sdk/shims/web'` (otherwise)
       */
      async withResponse() {
        const [data, response] = await Promise.all([this.parse(), this.asResponse()]);
        return { data, response, request_id: response.headers.get("request-id") };
      }
      parse() {
        if (!this.parsedPromise) {
          this.parsedPromise = this.responsePromise.then(this.parseResponse);
        }
        return this.parsedPromise;
      }
      then(onfulfilled, onrejected) {
        return this.parse().then(onfulfilled, onrejected);
      }
      catch(onrejected) {
        return this.parse().catch(onrejected);
      }
      finally(onfinally) {
        return this.parse().finally(onfinally);
      }
    };
    APIClient = class {
      constructor({
        baseURL,
        maxRetries = 2,
        timeout = 6e5,
        // 10 minutes
        httpAgent,
        fetch: overriddenFetch
      }) {
        this.baseURL = baseURL;
        this.maxRetries = validatePositiveInteger("maxRetries", maxRetries);
        this.timeout = validatePositiveInteger("timeout", timeout);
        this.httpAgent = httpAgent;
        this.fetch = overriddenFetch != null ? overriddenFetch : fetch2;
      }
      authHeaders(opts) {
        return {};
      }
      /**
       * Override this to add your own default headers, for example:
       *
       *  {
       *    ...super.defaultHeaders(),
       *    Authorization: 'Bearer 123',
       *  }
       */
      defaultHeaders(opts) {
        return {
          Accept: "application/json",
          "Content-Type": "application/json",
          "User-Agent": this.getUserAgent(),
          ...getPlatformHeaders(),
          ...this.authHeaders(opts)
        };
      }
      /**
       * Override this to add your own headers validation:
       */
      validateHeaders(headers, customHeaders) {
      }
      defaultIdempotencyKey() {
        return `stainless-node-retry-${uuid4()}`;
      }
      get(path, opts) {
        return this.methodRequest("get", path, opts);
      }
      post(path, opts) {
        return this.methodRequest("post", path, opts);
      }
      patch(path, opts) {
        return this.methodRequest("patch", path, opts);
      }
      put(path, opts) {
        return this.methodRequest("put", path, opts);
      }
      delete(path, opts) {
        return this.methodRequest("delete", path, opts);
      }
      methodRequest(method, path, opts) {
        return this.request(Promise.resolve(opts).then(async (opts2) => {
          const body = opts2 && isBlobLike(opts2 == null ? void 0 : opts2.body) ? new DataView(await opts2.body.arrayBuffer()) : (opts2 == null ? void 0 : opts2.body) instanceof DataView ? opts2.body : (opts2 == null ? void 0 : opts2.body) instanceof ArrayBuffer ? new DataView(opts2.body) : opts2 && ArrayBuffer.isView(opts2 == null ? void 0 : opts2.body) ? new DataView(opts2.body.buffer) : opts2 == null ? void 0 : opts2.body;
          return { method, path, ...opts2, body };
        }));
      }
      getAPIList(path, Page2, opts) {
        return this.requestAPIList(Page2, { method: "get", path, ...opts });
      }
      calculateContentLength(body) {
        if (typeof body === "string") {
          if (typeof Buffer !== "undefined") {
            return Buffer.byteLength(body, "utf8").toString();
          }
          if (typeof TextEncoder !== "undefined") {
            const encoder = new TextEncoder();
            const encoded = encoder.encode(body);
            return encoded.length.toString();
          }
        } else if (ArrayBuffer.isView(body)) {
          return body.byteLength.toString();
        }
        return null;
      }
      buildRequest(options, { retryCount = 0 } = {}) {
        var _a2, _b, _c, _d, _e, _f;
        const { method, path, query, headers = {} } = options;
        const body = ArrayBuffer.isView(options.body) || options.__binaryRequest && typeof options.body === "string" ? options.body : isMultipartBody(options.body) ? options.body.body : options.body ? JSON.stringify(options.body, null, 2) : null;
        const contentLength = this.calculateContentLength(body);
        const url = this.buildURL(path, query);
        if ("timeout" in options)
          validatePositiveInteger("timeout", options.timeout);
        const timeout = (_a2 = options.timeout) != null ? _a2 : this.timeout;
        const httpAgent = (_c = (_b = options.httpAgent) != null ? _b : this.httpAgent) != null ? _c : getDefaultAgent(url);
        const minAgentTimeout = timeout + 1e3;
        if (typeof ((_d = httpAgent == null ? void 0 : httpAgent.options) == null ? void 0 : _d.timeout) === "number" && minAgentTimeout > ((_e = httpAgent.options.timeout) != null ? _e : 0)) {
          httpAgent.options.timeout = minAgentTimeout;
        }
        if (this.idempotencyHeader && method !== "get") {
          if (!options.idempotencyKey)
            options.idempotencyKey = this.defaultIdempotencyKey();
          headers[this.idempotencyHeader] = options.idempotencyKey;
        }
        const reqHeaders = this.buildHeaders({ options, headers, contentLength, retryCount });
        const req = {
          method,
          ...body && { body },
          headers: reqHeaders,
          ...httpAgent && { agent: httpAgent },
          // @ts-ignore node-fetch uses a custom AbortSignal type that is
          // not compatible with standard web types
          signal: (_f = options.signal) != null ? _f : null
        };
        return { req, url, timeout };
      }
      buildHeaders({ options, headers, contentLength, retryCount }) {
        const reqHeaders = {};
        if (contentLength) {
          reqHeaders["content-length"] = contentLength;
        }
        const defaultHeaders = this.defaultHeaders(options);
        applyHeadersMut(reqHeaders, defaultHeaders);
        applyHeadersMut(reqHeaders, headers);
        if (isMultipartBody(options.body) && kind !== "node") {
          delete reqHeaders["content-type"];
        }
        if (getHeader(defaultHeaders, "x-stainless-retry-count") === void 0 && getHeader(headers, "x-stainless-retry-count") === void 0) {
          reqHeaders["x-stainless-retry-count"] = String(retryCount);
        }
        this.validateHeaders(reqHeaders, headers);
        return reqHeaders;
      }
      /**
       * Used as a callback for mutating the given `FinalRequestOptions` object.
       */
      async prepareOptions(options) {
      }
      /**
       * Used as a callback for mutating the given `RequestInit` object.
       *
       * This is useful for cases where you want to add certain headers based off of
       * the request properties, e.g. `method` or `url`.
       */
      async prepareRequest(request, { url, options }) {
      }
      parseHeaders(headers) {
        return !headers ? {} : Symbol.iterator in headers ? Object.fromEntries(Array.from(headers).map((header) => [...header])) : { ...headers };
      }
      makeStatusError(status, error, message, headers) {
        return APIError.generate(status, error, message, headers);
      }
      request(options, remainingRetries = null) {
        return new APIPromise(this.makeRequest(options, remainingRetries));
      }
      async makeRequest(optionsInput, retriesRemaining) {
        var _a2, _b, _c;
        const options = await optionsInput;
        const maxRetries = (_a2 = options.maxRetries) != null ? _a2 : this.maxRetries;
        if (retriesRemaining == null) {
          retriesRemaining = maxRetries;
        }
        await this.prepareOptions(options);
        const { req, url, timeout } = this.buildRequest(options, { retryCount: maxRetries - retriesRemaining });
        await this.prepareRequest(req, { url, options });
        debug("request", url, options, req.headers);
        if ((_b = options.signal) == null ? void 0 : _b.aborted) {
          throw new APIUserAbortError();
        }
        const controller = new AbortController();
        const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(castToError);
        if (response instanceof Error) {
          if ((_c = options.signal) == null ? void 0 : _c.aborted) {
            throw new APIUserAbortError();
          }
          if (retriesRemaining) {
            return this.retryRequest(options, retriesRemaining);
          }
          if (response.name === "AbortError") {
            throw new APIConnectionTimeoutError();
          }
          throw new APIConnectionError({ cause: response });
        }
        const responseHeaders = createResponseHeaders(response.headers);
        if (!response.ok) {
          if (retriesRemaining && this.shouldRetry(response)) {
            const retryMessage2 = `retrying, ${retriesRemaining} attempts remaining`;
            debug(`response (error; ${retryMessage2})`, response.status, url, responseHeaders);
            return this.retryRequest(options, retriesRemaining, responseHeaders);
          }
          const errText = await response.text().catch((e) => castToError(e).message);
          const errJSON = safeJSON(errText);
          const errMessage = errJSON ? void 0 : errText;
          const retryMessage = retriesRemaining ? `(error; no more retries left)` : `(error; not retryable)`;
          debug(`response (error; ${retryMessage})`, response.status, url, responseHeaders, errMessage);
          const err = this.makeStatusError(response.status, errJSON, errMessage, responseHeaders);
          throw err;
        }
        return { response, options, controller };
      }
      requestAPIList(Page2, options) {
        const request = this.makeRequest(options, null);
        return new PagePromise(this, request, Page2);
      }
      buildURL(path, query) {
        const url = isAbsoluteURL(path) ? new URL(path) : new URL(this.baseURL + (this.baseURL.endsWith("/") && path.startsWith("/") ? path.slice(1) : path));
        const defaultQuery = this.defaultQuery();
        if (!isEmptyObj(defaultQuery)) {
          query = { ...defaultQuery, ...query };
        }
        if (typeof query === "object" && query && !Array.isArray(query)) {
          url.search = this.stringifyQuery(query);
        }
        return url.toString();
      }
      stringifyQuery(query) {
        return Object.entries(query).filter(([_, value]) => typeof value !== "undefined").map(([key, value]) => {
          if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") {
            return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;
          }
          if (value === null) {
            return `${encodeURIComponent(key)}=`;
          }
          throw new AnthropicError(`Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`);
        }).join("&");
      }
      async fetchWithTimeout(url, init, ms, controller) {
        const { signal, ...options } = init || {};
        if (signal)
          signal.addEventListener("abort", () => controller.abort());
        const timeout = setTimeout(() => controller.abort(), ms);
        const fetchOptions = {
          signal: controller.signal,
          ...options
        };
        if (fetchOptions.method) {
          fetchOptions.method = fetchOptions.method.toUpperCase();
        }
        return (
          // use undefined this binding; fetch errors if bound to something else in browser/cloudflare
          this.fetch.call(void 0, url, fetchOptions).finally(() => {
            clearTimeout(timeout);
          })
        );
      }
      shouldRetry(response) {
        const shouldRetryHeader = response.headers.get("x-should-retry");
        if (shouldRetryHeader === "true")
          return true;
        if (shouldRetryHeader === "false")
          return false;
        if (response.status === 408)
          return true;
        if (response.status === 409)
          return true;
        if (response.status === 429)
          return true;
        if (response.status >= 500)
          return true;
        return false;
      }
      async retryRequest(options, retriesRemaining, responseHeaders) {
        var _a2;
        let timeoutMillis;
        const retryAfterMillisHeader = responseHeaders == null ? void 0 : responseHeaders["retry-after-ms"];
        if (retryAfterMillisHeader) {
          const timeoutMs = parseFloat(retryAfterMillisHeader);
          if (!Number.isNaN(timeoutMs)) {
            timeoutMillis = timeoutMs;
          }
        }
        const retryAfterHeader = responseHeaders == null ? void 0 : responseHeaders["retry-after"];
        if (retryAfterHeader && !timeoutMillis) {
          const timeoutSeconds = parseFloat(retryAfterHeader);
          if (!Number.isNaN(timeoutSeconds)) {
            timeoutMillis = timeoutSeconds * 1e3;
          } else {
            timeoutMillis = Date.parse(retryAfterHeader) - Date.now();
          }
        }
        if (!(timeoutMillis && 0 <= timeoutMillis && timeoutMillis < 60 * 1e3)) {
          const maxRetries = (_a2 = options.maxRetries) != null ? _a2 : this.maxRetries;
          timeoutMillis = this.calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries);
        }
        await sleep(timeoutMillis);
        return this.makeRequest(options, retriesRemaining - 1);
      }
      calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries) {
        const initialRetryDelay = 0.5;
        const maxRetryDelay = 8;
        const numRetries = maxRetries - retriesRemaining;
        const sleepSeconds = Math.min(initialRetryDelay * Math.pow(2, numRetries), maxRetryDelay);
        const jitter = 1 - Math.random() * 0.25;
        return sleepSeconds * jitter * 1e3;
      }
      getUserAgent() {
        return `${this.constructor.name}/JS ${VERSION}`;
      }
    };
    AbstractPage = class {
      constructor(client, response, body, options) {
        _AbstractPage_client.set(this, void 0);
        __classPrivateFieldSet(this, _AbstractPage_client, client, "f");
        this.options = options;
        this.response = response;
        this.body = body;
      }
      hasNextPage() {
        const items = this.getPaginatedItems();
        if (!items.length)
          return false;
        return this.nextPageInfo() != null;
      }
      async getNextPage() {
        const nextInfo = this.nextPageInfo();
        if (!nextInfo) {
          throw new AnthropicError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");
        }
        const nextOptions = { ...this.options };
        if ("params" in nextInfo && typeof nextOptions.query === "object") {
          nextOptions.query = { ...nextOptions.query, ...nextInfo.params };
        } else if ("url" in nextInfo) {
          const params = [...Object.entries(nextOptions.query || {}), ...nextInfo.url.searchParams.entries()];
          for (const [key, value] of params) {
            nextInfo.url.searchParams.set(key, value);
          }
          nextOptions.query = void 0;
          nextOptions.path = nextInfo.url.toString();
        }
        return await __classPrivateFieldGet(this, _AbstractPage_client, "f").requestAPIList(this.constructor, nextOptions);
      }
      async *iterPages() {
        let page = this;
        yield page;
        while (page.hasNextPage()) {
          page = await page.getNextPage();
          yield page;
        }
      }
      async *[(_AbstractPage_client = /* @__PURE__ */ new WeakMap(), Symbol.asyncIterator)]() {
        for await (const page of this.iterPages()) {
          for (const item of page.getPaginatedItems()) {
            yield item;
          }
        }
      }
    };
    PagePromise = class extends APIPromise {
      constructor(client, request, Page2) {
        super(request, async (props) => new Page2(client, props.response, await defaultParseResponse(props), props.options));
      }
      /**
       * Allow auto-paginating iteration on an unawaited list call, eg:
       *
       *    for await (const item of client.items.list()) {
       *      console.log(item)
       *    }
       */
      async *[Symbol.asyncIterator]() {
        const page = await this;
        for await (const item of page) {
          yield item;
        }
      }
    };
    createResponseHeaders = (headers) => {
      return new Proxy(Object.fromEntries(
        // @ts-ignore
        headers.entries()
      ), {
        get(target, name) {
          const key = name.toString();
          return target[key.toLowerCase()] || target[key];
        }
      });
    };
    requestOptionsKeys = {
      method: true,
      path: true,
      query: true,
      body: true,
      headers: true,
      maxRetries: true,
      stream: true,
      timeout: true,
      httpAgent: true,
      signal: true,
      idempotencyKey: true,
      __binaryRequest: true,
      __binaryResponse: true,
      __streamClass: true
    };
    isRequestOptions = (obj) => {
      return typeof obj === "object" && obj !== null && !isEmptyObj(obj) && Object.keys(obj).every((k) => hasOwn(requestOptionsKeys, k));
    };
    getPlatformProperties = () => {
      var _a2, _b;
      if (typeof Deno !== "undefined" && Deno.build != null) {
        return {
          "X-Stainless-Lang": "js",
          "X-Stainless-Package-Version": VERSION,
          "X-Stainless-OS": normalizePlatform(Deno.build.os),
          "X-Stainless-Arch": normalizeArch(Deno.build.arch),
          "X-Stainless-Runtime": "deno",
          "X-Stainless-Runtime-Version": typeof Deno.version === "string" ? Deno.version : (_b = (_a2 = Deno.version) == null ? void 0 : _a2.deno) != null ? _b : "unknown"
        };
      }
      if (typeof EdgeRuntime !== "undefined") {
        return {
          "X-Stainless-Lang": "js",
          "X-Stainless-Package-Version": VERSION,
          "X-Stainless-OS": "Unknown",
          "X-Stainless-Arch": `other:${EdgeRuntime}`,
          "X-Stainless-Runtime": "edge",
          "X-Stainless-Runtime-Version": process.version
        };
      }
      if (Object.prototype.toString.call(typeof process !== "undefined" ? process : 0) === "[object process]") {
        return {
          "X-Stainless-Lang": "js",
          "X-Stainless-Package-Version": VERSION,
          "X-Stainless-OS": normalizePlatform(process.platform),
          "X-Stainless-Arch": normalizeArch(process.arch),
          "X-Stainless-Runtime": "node",
          "X-Stainless-Runtime-Version": process.version
        };
      }
      const browserInfo = getBrowserInfo();
      if (browserInfo) {
        return {
          "X-Stainless-Lang": "js",
          "X-Stainless-Package-Version": VERSION,
          "X-Stainless-OS": "Unknown",
          "X-Stainless-Arch": "unknown",
          "X-Stainless-Runtime": `browser:${browserInfo.browser}`,
          "X-Stainless-Runtime-Version": browserInfo.version
        };
      }
      return {
        "X-Stainless-Lang": "js",
        "X-Stainless-Package-Version": VERSION,
        "X-Stainless-OS": "Unknown",
        "X-Stainless-Arch": "unknown",
        "X-Stainless-Runtime": "unknown",
        "X-Stainless-Runtime-Version": "unknown"
      };
    };
    normalizeArch = (arch) => {
      if (arch === "x32")
        return "x32";
      if (arch === "x86_64" || arch === "x64")
        return "x64";
      if (arch === "arm")
        return "arm";
      if (arch === "aarch64" || arch === "arm64")
        return "arm64";
      if (arch)
        return `other:${arch}`;
      return "unknown";
    };
    normalizePlatform = (platform) => {
      platform = platform.toLowerCase();
      if (platform.includes("ios"))
        return "iOS";
      if (platform === "android")
        return "Android";
      if (platform === "darwin")
        return "MacOS";
      if (platform === "win32")
        return "Windows";
      if (platform === "freebsd")
        return "FreeBSD";
      if (platform === "openbsd")
        return "OpenBSD";
      if (platform === "linux")
        return "Linux";
      if (platform)
        return `Other:${platform}`;
      return "Unknown";
    };
    getPlatformHeaders = () => {
      return _platformHeaders != null ? _platformHeaders : _platformHeaders = getPlatformProperties();
    };
    safeJSON = (text) => {
      try {
        return JSON.parse(text);
      } catch (err) {
        return void 0;
      }
    };
    startsWithSchemeRegexp = /^[a-z][a-z0-9+.-]*:/i;
    isAbsoluteURL = (url) => {
      return startsWithSchemeRegexp.test(url);
    };
    sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));
    validatePositiveInteger = (name, n) => {
      if (typeof n !== "number" || !Number.isInteger(n)) {
        throw new AnthropicError(`${name} must be an integer`);
      }
      if (n < 0) {
        throw new AnthropicError(`${name} must be a positive integer`);
      }
      return n;
    };
    castToError = (err) => {
      if (err instanceof Error)
        return err;
      if (typeof err === "object" && err !== null) {
        try {
          return new Error(JSON.stringify(err));
        } catch (e) {
        }
      }
      return new Error(String(err));
    };
    readEnv = (env) => {
      var _a2, _b, _c, _d, _e, _f;
      if (typeof process !== "undefined") {
        return (_c = (_b = (_a2 = process.env) == null ? void 0 : _a2[env]) == null ? void 0 : _b.trim()) != null ? _c : void 0;
      }
      if (typeof Deno !== "undefined") {
        return (_f = (_e = (_d = Deno.env) == null ? void 0 : _d.get) == null ? void 0 : _e.call(_d, env)) == null ? void 0 : _f.trim();
      }
      return void 0;
    };
    uuid4 = () => {
      return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
        const r = Math.random() * 16 | 0;
        const v = c === "x" ? r : r & 3 | 8;
        return v.toString(16);
      });
    };
    isRunningInBrowser = () => {
      return (
        // @ts-ignore
        typeof window !== "undefined" && // @ts-ignore
        typeof window.document !== "undefined" && // @ts-ignore
        typeof navigator !== "undefined"
      );
    };
    isHeadersProtocol = (headers) => {
      return typeof (headers == null ? void 0 : headers.get) === "function";
    };
    getHeader = (headers, header) => {
      var _a2;
      const lowerCasedHeader = header.toLowerCase();
      if (isHeadersProtocol(headers)) {
        const intercapsHeader = ((_a2 = header[0]) == null ? void 0 : _a2.toUpperCase()) + header.substring(1).replace(/([^\w])(\w)/g, (_m, g1, g2) => g1 + g2.toUpperCase());
        for (const key of [header, lowerCasedHeader, header.toUpperCase(), intercapsHeader]) {
          const value = headers.get(key);
          if (value) {
            return value;
          }
        }
      }
      for (const [key, value] of Object.entries(headers)) {
        if (key.toLowerCase() === lowerCasedHeader) {
          if (Array.isArray(value)) {
            if (value.length <= 1)
              return value[0];
            console.warn(`Received ${value.length} entries for the ${header} header, using the first entry.`);
            return value[0];
          }
          return value;
        }
      }
      return void 0;
    };
  }
});

// node_modules/@anthropic-ai/sdk/pagination.mjs
var Page;
var init_pagination = __esm({
  "node_modules/@anthropic-ai/sdk/pagination.mjs"() {
    init_core();
    Page = class extends AbstractPage {
      constructor(client, response, body, options) {
        super(client, response, body, options);
        this.data = body.data || [];
        this.has_more = body.has_more || false;
        this.first_id = body.first_id || null;
        this.last_id = body.last_id || null;
      }
      getPaginatedItems() {
        var _a2;
        return (_a2 = this.data) != null ? _a2 : [];
      }
      // @deprecated Please use `nextPageInfo()` instead
      nextPageParams() {
        const info = this.nextPageInfo();
        if (!info)
          return null;
        if ("params" in info)
          return info.params;
        const params = Object.fromEntries(info.url.searchParams);
        if (!Object.keys(params).length)
          return null;
        return params;
      }
      nextPageInfo() {
        var _a2;
        if ((_a2 = this.options.query) == null ? void 0 : _a2["before_id"]) {
          const firstId = this.first_id;
          if (!firstId) {
            return null;
          }
          return {
            params: {
              before_id: firstId
            }
          };
        }
        const cursor = this.last_id;
        if (!cursor) {
          return null;
        }
        return {
          params: {
            after_id: cursor
          }
        };
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/resources/shared.mjs
var init_shared = __esm({
  "node_modules/@anthropic-ai/sdk/resources/shared.mjs"() {
  }
});

// node_modules/@anthropic-ai/sdk/resource.mjs
var APIResource;
var init_resource = __esm({
  "node_modules/@anthropic-ai/sdk/resource.mjs"() {
    APIResource = class {
      constructor(client) {
        this._client = client;
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/resources/beta/models.mjs
var Models, BetaModelInfosPage;
var init_models = __esm({
  "node_modules/@anthropic-ai/sdk/resources/beta/models.mjs"() {
    init_resource();
    init_core();
    init_pagination();
    Models = class extends APIResource {
      /**
       * Get a specific model.
       *
       * The Models API response can be used to determine information about a specific
       * model or resolve a model alias to a model ID.
       */
      retrieve(modelId, options) {
        return this._client.get(`/v1/models/${modelId}?beta=true`, options);
      }
      list(query = {}, options) {
        if (isRequestOptions(query)) {
          return this.list({}, query);
        }
        return this._client.getAPIList("/v1/models?beta=true", BetaModelInfosPage, { query, ...options });
      }
    };
    BetaModelInfosPage = class extends Page {
    };
    Models.BetaModelInfosPage = BetaModelInfosPage;
  }
});

// node_modules/@anthropic-ai/sdk/internal/decoders/jsonl.mjs
var JSONLDecoder;
var init_jsonl = __esm({
  "node_modules/@anthropic-ai/sdk/internal/decoders/jsonl.mjs"() {
    init_error();
    init_stream_utils();
    init_line();
    JSONLDecoder = class _JSONLDecoder {
      constructor(iterator, controller) {
        this.iterator = iterator;
        this.controller = controller;
      }
      async *decoder() {
        const lineDecoder = new LineDecoder();
        for await (const chunk of this.iterator) {
          for (const line of lineDecoder.decode(chunk)) {
            yield JSON.parse(line);
          }
        }
        for (const line of lineDecoder.flush()) {
          yield JSON.parse(line);
        }
      }
      [Symbol.asyncIterator]() {
        return this.decoder();
      }
      static fromResponse(response, controller) {
        if (!response.body) {
          controller.abort();
          throw new AnthropicError(`Attempted to iterate over a response with no body`);
        }
        return new _JSONLDecoder(ReadableStreamToAsyncIterable(response.body), controller);
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/resources/beta/messages/batches.mjs
var Batches, BetaMessageBatchesPage;
var init_batches = __esm({
  "node_modules/@anthropic-ai/sdk/resources/beta/messages/batches.mjs"() {
    init_resource();
    init_core();
    init_pagination();
    init_jsonl();
    init_error();
    Batches = class extends APIResource {
      /**
       * Send a batch of Message creation requests.
       *
       * The Message Batches API can be used to process multiple Messages API requests at
       * once. Once a Message Batch is created, it begins processing immediately. Batches
       * can take up to 24 hours to complete.
       */
      create(params, options) {
        const { betas, ...body } = params;
        return this._client.post("/v1/messages/batches?beta=true", {
          body,
          ...options,
          headers: {
            "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
            ...options == null ? void 0 : options.headers
          }
        });
      }
      retrieve(messageBatchId, params = {}, options) {
        if (isRequestOptions(params)) {
          return this.retrieve(messageBatchId, {}, params);
        }
        const { betas } = params;
        return this._client.get(`/v1/messages/batches/${messageBatchId}?beta=true`, {
          ...options,
          headers: {
            "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
            ...options == null ? void 0 : options.headers
          }
        });
      }
      list(params = {}, options) {
        if (isRequestOptions(params)) {
          return this.list({}, params);
        }
        const { betas, ...query } = params;
        return this._client.getAPIList("/v1/messages/batches?beta=true", BetaMessageBatchesPage, {
          query,
          ...options,
          headers: {
            "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
            ...options == null ? void 0 : options.headers
          }
        });
      }
      delete(messageBatchId, params = {}, options) {
        if (isRequestOptions(params)) {
          return this.delete(messageBatchId, {}, params);
        }
        const { betas } = params;
        return this._client.delete(`/v1/messages/batches/${messageBatchId}?beta=true`, {
          ...options,
          headers: {
            "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
            ...options == null ? void 0 : options.headers
          }
        });
      }
      cancel(messageBatchId, params = {}, options) {
        if (isRequestOptions(params)) {
          return this.cancel(messageBatchId, {}, params);
        }
        const { betas } = params;
        return this._client.post(`/v1/messages/batches/${messageBatchId}/cancel?beta=true`, {
          ...options,
          headers: {
            "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
            ...options == null ? void 0 : options.headers
          }
        });
      }
      async results(messageBatchId, params = {}, options) {
        if (isRequestOptions(params)) {
          return this.results(messageBatchId, {}, params);
        }
        const batch = await this.retrieve(messageBatchId);
        if (!batch.results_url) {
          throw new AnthropicError(`No batch \`results_url\`; Has it finished processing? ${batch.processing_status} - ${batch.id}`);
        }
        const { betas } = params;
        return this._client.get(batch.results_url, {
          ...options,
          headers: {
            "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
            Accept: "application/binary",
            ...options == null ? void 0 : options.headers
          },
          __binaryResponse: true
        })._thenUnwrap((_, props) => JSONLDecoder.fromResponse(props.response, props.controller));
      }
    };
    BetaMessageBatchesPage = class extends Page {
    };
    Batches.BetaMessageBatchesPage = BetaMessageBatchesPage;
  }
});

// node_modules/@anthropic-ai/sdk/_vendor/partial-json-parser/parser.mjs
var tokenize, strip, unstrip, generate, partialParse;
var init_parser = __esm({
  "node_modules/@anthropic-ai/sdk/_vendor/partial-json-parser/parser.mjs"() {
    tokenize = (input) => {
      let current = 0;
      let tokens = [];
      while (current < input.length) {
        let char = input[current];
        if (char === "\\") {
          current++;
          continue;
        }
        if (char === "{") {
          tokens.push({
            type: "brace",
            value: "{"
          });
          current++;
          continue;
        }
        if (char === "}") {
          tokens.push({
            type: "brace",
            value: "}"
          });
          current++;
          continue;
        }
        if (char === "[") {
          tokens.push({
            type: "paren",
            value: "["
          });
          current++;
          continue;
        }
        if (char === "]") {
          tokens.push({
            type: "paren",
            value: "]"
          });
          current++;
          continue;
        }
        if (char === ":") {
          tokens.push({
            type: "separator",
            value: ":"
          });
          current++;
          continue;
        }
        if (char === ",") {
          tokens.push({
            type: "delimiter",
            value: ","
          });
          current++;
          continue;
        }
        if (char === '"') {
          let value = "";
          let danglingQuote = false;
          char = input[++current];
          while (char !== '"') {
            if (current === input.length) {
              danglingQuote = true;
              break;
            }
            if (char === "\\") {
              current++;
              if (current === input.length) {
                danglingQuote = true;
                break;
              }
              value += char + input[current];
              char = input[++current];
            } else {
              value += char;
              char = input[++current];
            }
          }
          char = input[++current];
          if (!danglingQuote) {
            tokens.push({
              type: "string",
              value
            });
          }
          continue;
        }
        let WHITESPACE = /\s/;
        if (char && WHITESPACE.test(char)) {
          current++;
          continue;
        }
        let NUMBERS = /[0-9]/;
        if (char && NUMBERS.test(char) || char === "-" || char === ".") {
          let value = "";
          if (char === "-") {
            value += char;
            char = input[++current];
          }
          while (char && NUMBERS.test(char) || char === ".") {
            value += char;
            char = input[++current];
          }
          tokens.push({
            type: "number",
            value
          });
          continue;
        }
        let LETTERS = /[a-z]/i;
        if (char && LETTERS.test(char)) {
          let value = "";
          while (char && LETTERS.test(char)) {
            if (current === input.length) {
              break;
            }
            value += char;
            char = input[++current];
          }
          if (value == "true" || value == "false" || value === "null") {
            tokens.push({
              type: "name",
              value
            });
          } else {
            current++;
            continue;
          }
          continue;
        }
        current++;
      }
      return tokens;
    };
    strip = (tokens) => {
      if (tokens.length === 0) {
        return tokens;
      }
      let lastToken = tokens[tokens.length - 1];
      switch (lastToken.type) {
        case "separator":
          tokens = tokens.slice(0, tokens.length - 1);
          return strip(tokens);
          break;
        case "number":
          let lastCharacterOfLastToken = lastToken.value[lastToken.value.length - 1];
          if (lastCharacterOfLastToken === "." || lastCharacterOfLastToken === "-") {
            tokens = tokens.slice(0, tokens.length - 1);
            return strip(tokens);
          }
        case "string":
          let tokenBeforeTheLastToken = tokens[tokens.length - 2];
          if ((tokenBeforeTheLastToken == null ? void 0 : tokenBeforeTheLastToken.type) === "delimiter") {
            tokens = tokens.slice(0, tokens.length - 1);
            return strip(tokens);
          } else if ((tokenBeforeTheLastToken == null ? void 0 : tokenBeforeTheLastToken.type) === "brace" && tokenBeforeTheLastToken.value === "{") {
            tokens = tokens.slice(0, tokens.length - 1);
            return strip(tokens);
          }
          break;
        case "delimiter":
          tokens = tokens.slice(0, tokens.length - 1);
          return strip(tokens);
          break;
      }
      return tokens;
    };
    unstrip = (tokens) => {
      let tail = [];
      tokens.map((token) => {
        if (token.type === "brace") {
          if (token.value === "{") {
            tail.push("}");
          } else {
            tail.splice(tail.lastIndexOf("}"), 1);
          }
        }
        if (token.type === "paren") {
          if (token.value === "[") {
            tail.push("]");
          } else {
            tail.splice(tail.lastIndexOf("]"), 1);
          }
        }
      });
      if (tail.length > 0) {
        tail.reverse().map((item) => {
          if (item === "}") {
            tokens.push({
              type: "brace",
              value: "}"
            });
          } else if (item === "]") {
            tokens.push({
              type: "paren",
              value: "]"
            });
          }
        });
      }
      return tokens;
    };
    generate = (tokens) => {
      let output = "";
      tokens.map((token) => {
        switch (token.type) {
          case "string":
            output += '"' + token.value + '"';
            break;
          default:
            output += token.value;
            break;
        }
      });
      return output;
    };
    partialParse = (input) => JSON.parse(generate(unstrip(strip(tokenize(input)))));
  }
});

// node_modules/@anthropic-ai/sdk/lib/BetaMessageStream.mjs
function checkNever(x) {
}
var __classPrivateFieldSet2, __classPrivateFieldGet2, _BetaMessageStream_instances, _BetaMessageStream_currentMessageSnapshot, _BetaMessageStream_connectedPromise, _BetaMessageStream_resolveConnectedPromise, _BetaMessageStream_rejectConnectedPromise, _BetaMessageStream_endPromise, _BetaMessageStream_resolveEndPromise, _BetaMessageStream_rejectEndPromise, _BetaMessageStream_listeners, _BetaMessageStream_ended, _BetaMessageStream_errored, _BetaMessageStream_aborted, _BetaMessageStream_catchingPromiseCreated, _BetaMessageStream_response, _BetaMessageStream_request_id, _BetaMessageStream_getFinalMessage, _BetaMessageStream_getFinalText, _BetaMessageStream_handleError, _BetaMessageStream_beginRequest, _BetaMessageStream_addStreamEvent, _BetaMessageStream_endRequest, _BetaMessageStream_accumulateMessage, JSON_BUF_PROPERTY, BetaMessageStream;
var init_BetaMessageStream = __esm({
  "node_modules/@anthropic-ai/sdk/lib/BetaMessageStream.mjs"() {
    init_error();
    init_streaming();
    init_parser();
    __classPrivateFieldSet2 = function(receiver, state, value, kind2, f) {
      if (kind2 === "m") throw new TypeError("Private method is not writable");
      if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
      if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
      return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
    };
    __classPrivateFieldGet2 = function(receiver, state, kind2, f) {
      if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
      if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
      return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
    };
    JSON_BUF_PROPERTY = "__json_buf";
    BetaMessageStream = class _BetaMessageStream {
      constructor() {
        _BetaMessageStream_instances.add(this);
        this.messages = [];
        this.receivedMessages = [];
        _BetaMessageStream_currentMessageSnapshot.set(this, void 0);
        this.controller = new AbortController();
        _BetaMessageStream_connectedPromise.set(this, void 0);
        _BetaMessageStream_resolveConnectedPromise.set(this, () => {
        });
        _BetaMessageStream_rejectConnectedPromise.set(this, () => {
        });
        _BetaMessageStream_endPromise.set(this, void 0);
        _BetaMessageStream_resolveEndPromise.set(this, () => {
        });
        _BetaMessageStream_rejectEndPromise.set(this, () => {
        });
        _BetaMessageStream_listeners.set(this, {});
        _BetaMessageStream_ended.set(this, false);
        _BetaMessageStream_errored.set(this, false);
        _BetaMessageStream_aborted.set(this, false);
        _BetaMessageStream_catchingPromiseCreated.set(this, false);
        _BetaMessageStream_response.set(this, void 0);
        _BetaMessageStream_request_id.set(this, void 0);
        _BetaMessageStream_handleError.set(this, (error) => {
          __classPrivateFieldSet2(this, _BetaMessageStream_errored, true, "f");
          if (error instanceof Error && error.name === "AbortError") {
            error = new APIUserAbortError();
          }
          if (error instanceof APIUserAbortError) {
            __classPrivateFieldSet2(this, _BetaMessageStream_aborted, true, "f");
            return this._emit("abort", error);
          }
          if (error instanceof AnthropicError) {
            return this._emit("error", error);
          }
          if (error instanceof Error) {
            const anthropicError = new AnthropicError(error.message);
            anthropicError.cause = error;
            return this._emit("error", anthropicError);
          }
          return this._emit("error", new AnthropicError(String(error)));
        });
        __classPrivateFieldSet2(this, _BetaMessageStream_connectedPromise, new Promise((resolve, reject) => {
          __classPrivateFieldSet2(this, _BetaMessageStream_resolveConnectedPromise, resolve, "f");
          __classPrivateFieldSet2(this, _BetaMessageStream_rejectConnectedPromise, reject, "f");
        }), "f");
        __classPrivateFieldSet2(this, _BetaMessageStream_endPromise, new Promise((resolve, reject) => {
          __classPrivateFieldSet2(this, _BetaMessageStream_resolveEndPromise, resolve, "f");
          __classPrivateFieldSet2(this, _BetaMessageStream_rejectEndPromise, reject, "f");
        }), "f");
        __classPrivateFieldGet2(this, _BetaMessageStream_connectedPromise, "f").catch(() => {
        });
        __classPrivateFieldGet2(this, _BetaMessageStream_endPromise, "f").catch(() => {
        });
      }
      get response() {
        return __classPrivateFieldGet2(this, _BetaMessageStream_response, "f");
      }
      get request_id() {
        return __classPrivateFieldGet2(this, _BetaMessageStream_request_id, "f");
      }
      /**
       * Returns the `MessageStream` data, the raw `Response` instance and the ID of the request,
       * returned vie the `request-id` header which is useful for debugging requests and resporting
       * issues to Anthropic.
       *
       * This is the same as the `APIPromise.withResponse()` method.
       *
       * This method will raise an error if you created the stream using `MessageStream.fromReadableStream`
       * as no `Response` is available.
       */
      async withResponse() {
        const response = await __classPrivateFieldGet2(this, _BetaMessageStream_connectedPromise, "f");
        if (!response) {
          throw new Error("Could not resolve a `Response` object");
        }
        return {
          data: this,
          response,
          request_id: response.headers.get("request-id")
        };
      }
      /**
       * Intended for use on the frontend, consuming a stream produced with
       * `.toReadableStream()` on the backend.
       *
       * Note that messages sent to the model do not appear in `.on('message')`
       * in this context.
       */
      static fromReadableStream(stream) {
        const runner = new _BetaMessageStream();
        runner._run(() => runner._fromReadableStream(stream));
        return runner;
      }
      static createMessage(messages, params, options) {
        const runner = new _BetaMessageStream();
        for (const message of params.messages) {
          runner._addMessageParam(message);
        }
        runner._run(() => runner._createMessage(messages, { ...params, stream: true }, { ...options, headers: { ...options == null ? void 0 : options.headers, "X-Stainless-Helper-Method": "stream" } }));
        return runner;
      }
      _run(executor) {
        executor().then(() => {
          this._emitFinal();
          this._emit("end");
        }, __classPrivateFieldGet2(this, _BetaMessageStream_handleError, "f"));
      }
      _addMessageParam(message) {
        this.messages.push(message);
      }
      _addMessage(message, emit = true) {
        this.receivedMessages.push(message);
        if (emit) {
          this._emit("message", message);
        }
      }
      async _createMessage(messages, params, options) {
        var _a2;
        const signal = options == null ? void 0 : options.signal;
        if (signal) {
          if (signal.aborted)
            this.controller.abort();
          signal.addEventListener("abort", () => this.controller.abort());
        }
        __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_beginRequest).call(this);
        const { response, data: stream } = await messages.create({ ...params, stream: true }, { ...options, signal: this.controller.signal }).withResponse();
        this._connected(response);
        for await (const event of stream) {
          __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_addStreamEvent).call(this, event);
        }
        if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
          throw new APIUserAbortError();
        }
        __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_endRequest).call(this);
      }
      _connected(response) {
        if (this.ended)
          return;
        __classPrivateFieldSet2(this, _BetaMessageStream_response, response, "f");
        __classPrivateFieldSet2(this, _BetaMessageStream_request_id, response == null ? void 0 : response.headers.get("request-id"), "f");
        __classPrivateFieldGet2(this, _BetaMessageStream_resolveConnectedPromise, "f").call(this, response);
        this._emit("connect");
      }
      get ended() {
        return __classPrivateFieldGet2(this, _BetaMessageStream_ended, "f");
      }
      get errored() {
        return __classPrivateFieldGet2(this, _BetaMessageStream_errored, "f");
      }
      get aborted() {
        return __classPrivateFieldGet2(this, _BetaMessageStream_aborted, "f");
      }
      abort() {
        this.controller.abort();
      }
      /**
       * Adds the listener function to the end of the listeners array for the event.
       * No checks are made to see if the listener has already been added. Multiple calls passing
       * the same combination of event and listener will result in the listener being added, and
       * called, multiple times.
       * @returns this MessageStream, so that calls can be chained
       */
      on(event, listener) {
        const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] || (__classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] = []);
        listeners.push({ listener });
        return this;
      }
      /**
       * Removes the specified listener from the listener array for the event.
       * off() will remove, at most, one instance of a listener from the listener array. If any single
       * listener has been added multiple times to the listener array for the specified event, then
       * off() must be called multiple times to remove each instance.
       * @returns this MessageStream, so that calls can be chained
       */
      off(event, listener) {
        const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event];
        if (!listeners)
          return this;
        const index = listeners.findIndex((l) => l.listener === listener);
        if (index >= 0)
          listeners.splice(index, 1);
        return this;
      }
      /**
       * Adds a one-time listener function for the event. The next time the event is triggered,
       * this listener is removed and then invoked.
       * @returns this MessageStream, so that calls can be chained
       */
      once(event, listener) {
        const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] || (__classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] = []);
        listeners.push({ listener, once: true });
        return this;
      }
      /**
       * This is similar to `.once()`, but returns a Promise that resolves the next time
       * the event is triggered, instead of calling a listener callback.
       * @returns a Promise that resolves the next time given event is triggered,
       * or rejects if an error is emitted.  (If you request the 'error' event,
       * returns a promise that resolves with the error).
       *
       * Example:
       *
       *   const message = await stream.emitted('message') // rejects if the stream errors
       */
      emitted(event) {
        return new Promise((resolve, reject) => {
          __classPrivateFieldSet2(this, _BetaMessageStream_catchingPromiseCreated, true, "f");
          if (event !== "error")
            this.once("error", reject);
          this.once(event, resolve);
        });
      }
      async done() {
        __classPrivateFieldSet2(this, _BetaMessageStream_catchingPromiseCreated, true, "f");
        await __classPrivateFieldGet2(this, _BetaMessageStream_endPromise, "f");
      }
      get currentMessage() {
        return __classPrivateFieldGet2(this, _BetaMessageStream_currentMessageSnapshot, "f");
      }
      /**
       * @returns a promise that resolves with the the final assistant Message response,
       * or rejects if an error occurred or the stream ended prematurely without producing a Message.
       */
      async finalMessage() {
        await this.done();
        return __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_getFinalMessage).call(this);
      }
      /**
       * @returns a promise that resolves with the the final assistant Message's text response, concatenated
       * together if there are more than one text blocks.
       * Rejects if an error occurred or the stream ended prematurely without producing a Message.
       */
      async finalText() {
        await this.done();
        return __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_getFinalText).call(this);
      }
      _emit(event, ...args) {
        if (__classPrivateFieldGet2(this, _BetaMessageStream_ended, "f"))
          return;
        if (event === "end") {
          __classPrivateFieldSet2(this, _BetaMessageStream_ended, true, "f");
          __classPrivateFieldGet2(this, _BetaMessageStream_resolveEndPromise, "f").call(this);
        }
        const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event];
        if (listeners) {
          __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] = listeners.filter((l) => !l.once);
          listeners.forEach(({ listener }) => listener(...args));
        }
        if (event === "abort") {
          const error = args[0];
          if (!__classPrivateFieldGet2(this, _BetaMessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
            Promise.reject(error);
          }
          __classPrivateFieldGet2(this, _BetaMessageStream_rejectConnectedPromise, "f").call(this, error);
          __classPrivateFieldGet2(this, _BetaMessageStream_rejectEndPromise, "f").call(this, error);
          this._emit("end");
          return;
        }
        if (event === "error") {
          const error = args[0];
          if (!__classPrivateFieldGet2(this, _BetaMessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
            Promise.reject(error);
          }
          __classPrivateFieldGet2(this, _BetaMessageStream_rejectConnectedPromise, "f").call(this, error);
          __classPrivateFieldGet2(this, _BetaMessageStream_rejectEndPromise, "f").call(this, error);
          this._emit("end");
        }
      }
      _emitFinal() {
        const finalMessage = this.receivedMessages.at(-1);
        if (finalMessage) {
          this._emit("finalMessage", __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_getFinalMessage).call(this));
        }
      }
      async _fromReadableStream(readableStream, options) {
        var _a2;
        const signal = options == null ? void 0 : options.signal;
        if (signal) {
          if (signal.aborted)
            this.controller.abort();
          signal.addEventListener("abort", () => this.controller.abort());
        }
        __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_beginRequest).call(this);
        this._connected(null);
        const stream = Stream.fromReadableStream(readableStream, this.controller);
        for await (const event of stream) {
          __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_addStreamEvent).call(this, event);
        }
        if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
          throw new APIUserAbortError();
        }
        __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_endRequest).call(this);
      }
      [(_BetaMessageStream_currentMessageSnapshot = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_connectedPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_resolveConnectedPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_rejectConnectedPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_endPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_resolveEndPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_rejectEndPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_listeners = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_ended = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_errored = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_aborted = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_catchingPromiseCreated = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_response = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_request_id = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_handleError = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_instances = /* @__PURE__ */ new WeakSet(), _BetaMessageStream_getFinalMessage = function _BetaMessageStream_getFinalMessage2() {
        if (this.receivedMessages.length === 0) {
          throw new AnthropicError("stream ended without producing a Message with role=assistant");
        }
        return this.receivedMessages.at(-1);
      }, _BetaMessageStream_getFinalText = function _BetaMessageStream_getFinalText2() {
        if (this.receivedMessages.length === 0) {
          throw new AnthropicError("stream ended without producing a Message with role=assistant");
        }
        const textBlocks = this.receivedMessages.at(-1).content.filter((block) => block.type === "text").map((block) => block.text);
        if (textBlocks.length === 0) {
          throw new AnthropicError("stream ended without producing a content block with type=text");
        }
        return textBlocks.join(" ");
      }, _BetaMessageStream_beginRequest = function _BetaMessageStream_beginRequest2() {
        if (this.ended)
          return;
        __classPrivateFieldSet2(this, _BetaMessageStream_currentMessageSnapshot, void 0, "f");
      }, _BetaMessageStream_addStreamEvent = function _BetaMessageStream_addStreamEvent2(event) {
        var _a2;
        if (this.ended)
          return;
        const messageSnapshot = __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_accumulateMessage).call(this, event);
        this._emit("streamEvent", event, messageSnapshot);
        switch (event.type) {
          case "content_block_delta": {
            const content = messageSnapshot.content.at(-1);
            switch (event.delta.type) {
              case "text_delta": {
                if (content.type === "text") {
                  this._emit("text", event.delta.text, content.text || "");
                }
                break;
              }
              case "citations_delta": {
                if (content.type === "text") {
                  this._emit("citation", event.delta.citation, (_a2 = content.citations) != null ? _a2 : []);
                }
                break;
              }
              case "input_json_delta": {
                if (content.type === "tool_use" && content.input) {
                  this._emit("inputJson", event.delta.partial_json, content.input);
                }
                break;
              }
              default:
                checkNever(event.delta);
            }
            break;
          }
          case "message_stop": {
            this._addMessageParam(messageSnapshot);
            this._addMessage(messageSnapshot, true);
            break;
          }
          case "content_block_stop": {
            this._emit("contentBlock", messageSnapshot.content.at(-1));
            break;
          }
          case "message_start": {
            __classPrivateFieldSet2(this, _BetaMessageStream_currentMessageSnapshot, messageSnapshot, "f");
            break;
          }
          case "content_block_start":
          case "message_delta":
            break;
        }
      }, _BetaMessageStream_endRequest = function _BetaMessageStream_endRequest2() {
        if (this.ended) {
          throw new AnthropicError(`stream has ended, this shouldn't happen`);
        }
        const snapshot = __classPrivateFieldGet2(this, _BetaMessageStream_currentMessageSnapshot, "f");
        if (!snapshot) {
          throw new AnthropicError(`request ended without sending any chunks`);
        }
        __classPrivateFieldSet2(this, _BetaMessageStream_currentMessageSnapshot, void 0, "f");
        return snapshot;
      }, _BetaMessageStream_accumulateMessage = function _BetaMessageStream_accumulateMessage2(event) {
        var _a2;
        let snapshot = __classPrivateFieldGet2(this, _BetaMessageStream_currentMessageSnapshot, "f");
        if (event.type === "message_start") {
          if (snapshot) {
            throw new AnthropicError(`Unexpected event order, got ${event.type} before receiving "message_stop"`);
          }
          return event.message;
        }
        if (!snapshot) {
          throw new AnthropicError(`Unexpected event order, got ${event.type} before "message_start"`);
        }
        switch (event.type) {
          case "message_stop":
            return snapshot;
          case "message_delta":
            snapshot.stop_reason = event.delta.stop_reason;
            snapshot.stop_sequence = event.delta.stop_sequence;
            snapshot.usage.output_tokens = event.usage.output_tokens;
            return snapshot;
          case "content_block_start":
            snapshot.content.push(event.content_block);
            return snapshot;
          case "content_block_delta": {
            const snapshotContent = snapshot.content.at(event.index);
            switch (event.delta.type) {
              case "text_delta": {
                if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
                  snapshotContent.text += event.delta.text;
                }
                break;
              }
              case "citations_delta": {
                if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
                  (_a2 = snapshotContent.citations) != null ? _a2 : snapshotContent.citations = [];
                  snapshotContent.citations.push(event.delta.citation);
                }
                break;
              }
              case "input_json_delta": {
                if ((snapshotContent == null ? void 0 : snapshotContent.type) === "tool_use") {
                  let jsonBuf = snapshotContent[JSON_BUF_PROPERTY] || "";
                  jsonBuf += event.delta.partial_json;
                  Object.defineProperty(snapshotContent, JSON_BUF_PROPERTY, {
                    value: jsonBuf,
                    enumerable: false,
                    writable: true
                  });
                  if (jsonBuf) {
                    snapshotContent.input = partialParse(jsonBuf);
                  }
                }
                break;
              }
              default:
                checkNever(event.delta);
            }
            return snapshot;
          }
          case "content_block_stop":
            return snapshot;
        }
      }, Symbol.asyncIterator)]() {
        const pushQueue = [];
        const readQueue = [];
        let done = false;
        this.on("streamEvent", (event) => {
          const reader = readQueue.shift();
          if (reader) {
            reader.resolve(event);
          } else {
            pushQueue.push(event);
          }
        });
        this.on("end", () => {
          done = true;
          for (const reader of readQueue) {
            reader.resolve(void 0);
          }
          readQueue.length = 0;
        });
        this.on("abort", (err) => {
          done = true;
          for (const reader of readQueue) {
            reader.reject(err);
          }
          readQueue.length = 0;
        });
        this.on("error", (err) => {
          done = true;
          for (const reader of readQueue) {
            reader.reject(err);
          }
          readQueue.length = 0;
        });
        return {
          next: async () => {
            if (!pushQueue.length) {
              if (done) {
                return { value: void 0, done: true };
              }
              return new Promise((resolve, reject) => readQueue.push({ resolve, reject })).then((chunk2) => chunk2 ? { value: chunk2, done: false } : { value: void 0, done: true });
            }
            const chunk = pushQueue.shift();
            return { value: chunk, done: false };
          },
          return: async () => {
            this.abort();
            return { value: void 0, done: true };
          }
        };
      }
      toReadableStream() {
        const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);
        return stream.toReadableStream();
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/resources/beta/messages/messages.mjs
var DEPRECATED_MODELS, Messages;
var init_messages = __esm({
  "node_modules/@anthropic-ai/sdk/resources/beta/messages/messages.mjs"() {
    init_resource();
    init_batches();
    init_batches();
    init_BetaMessageStream();
    DEPRECATED_MODELS = {
      "claude-1.3": "November 6th, 2024",
      "claude-1.3-100k": "November 6th, 2024",
      "claude-instant-1.1": "November 6th, 2024",
      "claude-instant-1.1-100k": "November 6th, 2024",
      "claude-instant-1.2": "November 6th, 2024",
      "claude-3-sonnet-20240229": "July 21st, 2025",
      "claude-2.1": "July 21st, 2025",
      "claude-2.0": "July 21st, 2025"
    };
    Messages = class extends APIResource {
      constructor() {
        super(...arguments);
        this.batches = new Batches(this._client);
      }
      create(params, options) {
        var _a2, _b;
        const { betas, ...body } = params;
        if (body.model in DEPRECATED_MODELS) {
          console.warn(`The model '${body.model}' is deprecated and will reach end-of-life on ${DEPRECATED_MODELS[body.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);
        }
        return this._client.post("/v1/messages?beta=true", {
          body,
          timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
          ...options,
          headers: {
            ...(betas == null ? void 0 : betas.toString()) != null ? { "anthropic-beta": betas == null ? void 0 : betas.toString() } : void 0,
            ...options == null ? void 0 : options.headers
          },
          stream: (_b = params.stream) != null ? _b : false
        });
      }
      /**
       * Create a Message stream
       */
      stream(body, options) {
        return BetaMessageStream.createMessage(this, body, options);
      }
      /**
       * Count the number of tokens in a Message.
       *
       * The Token Count API can be used to count the number of tokens in a Message,
       * including tools, images, and documents, without creating it.
       */
      countTokens(params, options) {
        const { betas, ...body } = params;
        return this._client.post("/v1/messages/count_tokens?beta=true", {
          body,
          ...options,
          headers: {
            "anthropic-beta": [...betas != null ? betas : [], "token-counting-2024-11-01"].toString(),
            ...options == null ? void 0 : options.headers
          }
        });
      }
    };
    Messages.Batches = Batches;
    Messages.BetaMessageBatchesPage = BetaMessageBatchesPage;
  }
});

// node_modules/@anthropic-ai/sdk/resources/beta/beta.mjs
var Beta;
var init_beta = __esm({
  "node_modules/@anthropic-ai/sdk/resources/beta/beta.mjs"() {
    init_resource();
    init_models();
    init_models();
    init_messages();
    init_messages();
    Beta = class extends APIResource {
      constructor() {
        super(...arguments);
        this.models = new Models(this._client);
        this.messages = new Messages(this._client);
      }
    };
    Beta.Models = Models;
    Beta.BetaModelInfosPage = BetaModelInfosPage;
    Beta.Messages = Messages;
  }
});

// node_modules/@anthropic-ai/sdk/resources/completions.mjs
var Completions;
var init_completions = __esm({
  "node_modules/@anthropic-ai/sdk/resources/completions.mjs"() {
    init_resource();
    Completions = class extends APIResource {
      create(body, options) {
        var _a2, _b;
        return this._client.post("/v1/complete", {
          body,
          timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
          ...options,
          stream: (_b = body.stream) != null ? _b : false
        });
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/resources/messages/batches.mjs
var Batches2, MessageBatchesPage;
var init_batches2 = __esm({
  "node_modules/@anthropic-ai/sdk/resources/messages/batches.mjs"() {
    init_resource();
    init_core();
    init_pagination();
    init_jsonl();
    init_error();
    Batches2 = class extends APIResource {
      /**
       * Send a batch of Message creation requests.
       *
       * The Message Batches API can be used to process multiple Messages API requests at
       * once. Once a Message Batch is created, it begins processing immediately. Batches
       * can take up to 24 hours to complete.
       */
      create(body, options) {
        return this._client.post("/v1/messages/batches", { body, ...options });
      }
      /**
       * This endpoint is idempotent and can be used to poll for Message Batch
       * completion. To access the results of a Message Batch, make a request to the
       * `results_url` field in the response.
       */
      retrieve(messageBatchId, options) {
        return this._client.get(`/v1/messages/batches/${messageBatchId}`, options);
      }
      list(query = {}, options) {
        if (isRequestOptions(query)) {
          return this.list({}, query);
        }
        return this._client.getAPIList("/v1/messages/batches", MessageBatchesPage, { query, ...options });
      }
      /**
       * Delete a Message Batch.
       *
       * Message Batches can only be deleted once they've finished processing. If you'd
       * like to delete an in-progress batch, you must first cancel it.
       */
      delete(messageBatchId, options) {
        return this._client.delete(`/v1/messages/batches/${messageBatchId}`, options);
      }
      /**
       * Batches may be canceled any time before processing ends. Once cancellation is
       * initiated, the batch enters a `canceling` state, at which time the system may
       * complete any in-progress, non-interruptible requests before finalizing
       * cancellation.
       *
       * The number of canceled requests is specified in `request_counts`. To determine
       * which requests were canceled, check the individual results within the batch.
       * Note that cancellation may not result in any canceled requests if they were
       * non-interruptible.
       */
      cancel(messageBatchId, options) {
        return this._client.post(`/v1/messages/batches/${messageBatchId}/cancel`, options);
      }
      /**
       * Streams the results of a Message Batch as a `.jsonl` file.
       *
       * Each line in the file is a JSON object containing the result of a single request
       * in the Message Batch. Results are not guaranteed to be in the same order as
       * requests. Use the `custom_id` field to match results to requests.
       */
      async results(messageBatchId, options) {
        const batch = await this.retrieve(messageBatchId);
        if (!batch.results_url) {
          throw new AnthropicError(`No batch \`results_url\`; Has it finished processing? ${batch.processing_status} - ${batch.id}`);
        }
        return this._client.get(batch.results_url, {
          ...options,
          headers: {
            Accept: "application/binary",
            ...options == null ? void 0 : options.headers
          },
          __binaryResponse: true
        })._thenUnwrap((_, props) => JSONLDecoder.fromResponse(props.response, props.controller));
      }
    };
    MessageBatchesPage = class extends Page {
    };
    Batches2.MessageBatchesPage = MessageBatchesPage;
  }
});

// node_modules/@anthropic-ai/sdk/lib/MessageStream.mjs
function checkNever2(x) {
}
var __classPrivateFieldSet3, __classPrivateFieldGet3, _MessageStream_instances, _MessageStream_currentMessageSnapshot, _MessageStream_connectedPromise, _MessageStream_resolveConnectedPromise, _MessageStream_rejectConnectedPromise, _MessageStream_endPromise, _MessageStream_resolveEndPromise, _MessageStream_rejectEndPromise, _MessageStream_listeners, _MessageStream_ended, _MessageStream_errored, _MessageStream_aborted, _MessageStream_catchingPromiseCreated, _MessageStream_response, _MessageStream_request_id, _MessageStream_getFinalMessage, _MessageStream_getFinalText, _MessageStream_handleError, _MessageStream_beginRequest, _MessageStream_addStreamEvent, _MessageStream_endRequest, _MessageStream_accumulateMessage, JSON_BUF_PROPERTY2, MessageStream;
var init_MessageStream = __esm({
  "node_modules/@anthropic-ai/sdk/lib/MessageStream.mjs"() {
    init_error();
    init_streaming();
    init_parser();
    __classPrivateFieldSet3 = function(receiver, state, value, kind2, f) {
      if (kind2 === "m") throw new TypeError("Private method is not writable");
      if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
      if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
      return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
    };
    __classPrivateFieldGet3 = function(receiver, state, kind2, f) {
      if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
      if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
      return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
    };
    JSON_BUF_PROPERTY2 = "__json_buf";
    MessageStream = class _MessageStream {
      constructor() {
        _MessageStream_instances.add(this);
        this.messages = [];
        this.receivedMessages = [];
        _MessageStream_currentMessageSnapshot.set(this, void 0);
        this.controller = new AbortController();
        _MessageStream_connectedPromise.set(this, void 0);
        _MessageStream_resolveConnectedPromise.set(this, () => {
        });
        _MessageStream_rejectConnectedPromise.set(this, () => {
        });
        _MessageStream_endPromise.set(this, void 0);
        _MessageStream_resolveEndPromise.set(this, () => {
        });
        _MessageStream_rejectEndPromise.set(this, () => {
        });
        _MessageStream_listeners.set(this, {});
        _MessageStream_ended.set(this, false);
        _MessageStream_errored.set(this, false);
        _MessageStream_aborted.set(this, false);
        _MessageStream_catchingPromiseCreated.set(this, false);
        _MessageStream_response.set(this, void 0);
        _MessageStream_request_id.set(this, void 0);
        _MessageStream_handleError.set(this, (error) => {
          __classPrivateFieldSet3(this, _MessageStream_errored, true, "f");
          if (error instanceof Error && error.name === "AbortError") {
            error = new APIUserAbortError();
          }
          if (error instanceof APIUserAbortError) {
            __classPrivateFieldSet3(this, _MessageStream_aborted, true, "f");
            return this._emit("abort", error);
          }
          if (error instanceof AnthropicError) {
            return this._emit("error", error);
          }
          if (error instanceof Error) {
            const anthropicError = new AnthropicError(error.message);
            anthropicError.cause = error;
            return this._emit("error", anthropicError);
          }
          return this._emit("error", new AnthropicError(String(error)));
        });
        __classPrivateFieldSet3(this, _MessageStream_connectedPromise, new Promise((resolve, reject) => {
          __classPrivateFieldSet3(this, _MessageStream_resolveConnectedPromise, resolve, "f");
          __classPrivateFieldSet3(this, _MessageStream_rejectConnectedPromise, reject, "f");
        }), "f");
        __classPrivateFieldSet3(this, _MessageStream_endPromise, new Promise((resolve, reject) => {
          __classPrivateFieldSet3(this, _MessageStream_resolveEndPromise, resolve, "f");
          __classPrivateFieldSet3(this, _MessageStream_rejectEndPromise, reject, "f");
        }), "f");
        __classPrivateFieldGet3(this, _MessageStream_connectedPromise, "f").catch(() => {
        });
        __classPrivateFieldGet3(this, _MessageStream_endPromise, "f").catch(() => {
        });
      }
      get response() {
        return __classPrivateFieldGet3(this, _MessageStream_response, "f");
      }
      get request_id() {
        return __classPrivateFieldGet3(this, _MessageStream_request_id, "f");
      }
      /**
       * Returns the `MessageStream` data, the raw `Response` instance and the ID of the request,
       * returned vie the `request-id` header which is useful for debugging requests and resporting
       * issues to Anthropic.
       *
       * This is the same as the `APIPromise.withResponse()` method.
       *
       * This method will raise an error if you created the stream using `MessageStream.fromReadableStream`
       * as no `Response` is available.
       */
      async withResponse() {
        const response = await __classPrivateFieldGet3(this, _MessageStream_connectedPromise, "f");
        if (!response) {
          throw new Error("Could not resolve a `Response` object");
        }
        return {
          data: this,
          response,
          request_id: response.headers.get("request-id")
        };
      }
      /**
       * Intended for use on the frontend, consuming a stream produced with
       * `.toReadableStream()` on the backend.
       *
       * Note that messages sent to the model do not appear in `.on('message')`
       * in this context.
       */
      static fromReadableStream(stream) {
        const runner = new _MessageStream();
        runner._run(() => runner._fromReadableStream(stream));
        return runner;
      }
      static createMessage(messages, params, options) {
        const runner = new _MessageStream();
        for (const message of params.messages) {
          runner._addMessageParam(message);
        }
        runner._run(() => runner._createMessage(messages, { ...params, stream: true }, { ...options, headers: { ...options == null ? void 0 : options.headers, "X-Stainless-Helper-Method": "stream" } }));
        return runner;
      }
      _run(executor) {
        executor().then(() => {
          this._emitFinal();
          this._emit("end");
        }, __classPrivateFieldGet3(this, _MessageStream_handleError, "f"));
      }
      _addMessageParam(message) {
        this.messages.push(message);
      }
      _addMessage(message, emit = true) {
        this.receivedMessages.push(message);
        if (emit) {
          this._emit("message", message);
        }
      }
      async _createMessage(messages, params, options) {
        var _a2;
        const signal = options == null ? void 0 : options.signal;
        if (signal) {
          if (signal.aborted)
            this.controller.abort();
          signal.addEventListener("abort", () => this.controller.abort());
        }
        __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_beginRequest).call(this);
        const { response, data: stream } = await messages.create({ ...params, stream: true }, { ...options, signal: this.controller.signal }).withResponse();
        this._connected(response);
        for await (const event of stream) {
          __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_addStreamEvent).call(this, event);
        }
        if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
          throw new APIUserAbortError();
        }
        __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_endRequest).call(this);
      }
      _connected(response) {
        if (this.ended)
          return;
        __classPrivateFieldSet3(this, _MessageStream_response, response, "f");
        __classPrivateFieldSet3(this, _MessageStream_request_id, response == null ? void 0 : response.headers.get("request-id"), "f");
        __classPrivateFieldGet3(this, _MessageStream_resolveConnectedPromise, "f").call(this, response);
        this._emit("connect");
      }
      get ended() {
        return __classPrivateFieldGet3(this, _MessageStream_ended, "f");
      }
      get errored() {
        return __classPrivateFieldGet3(this, _MessageStream_errored, "f");
      }
      get aborted() {
        return __classPrivateFieldGet3(this, _MessageStream_aborted, "f");
      }
      abort() {
        this.controller.abort();
      }
      /**
       * Adds the listener function to the end of the listeners array for the event.
       * No checks are made to see if the listener has already been added. Multiple calls passing
       * the same combination of event and listener will result in the listener being added, and
       * called, multiple times.
       * @returns this MessageStream, so that calls can be chained
       */
      on(event, listener) {
        const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] || (__classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = []);
        listeners.push({ listener });
        return this;
      }
      /**
       * Removes the specified listener from the listener array for the event.
       * off() will remove, at most, one instance of a listener from the listener array. If any single
       * listener has been added multiple times to the listener array for the specified event, then
       * off() must be called multiple times to remove each instance.
       * @returns this MessageStream, so that calls can be chained
       */
      off(event, listener) {
        const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event];
        if (!listeners)
          return this;
        const index = listeners.findIndex((l) => l.listener === listener);
        if (index >= 0)
          listeners.splice(index, 1);
        return this;
      }
      /**
       * Adds a one-time listener function for the event. The next time the event is triggered,
       * this listener is removed and then invoked.
       * @returns this MessageStream, so that calls can be chained
       */
      once(event, listener) {
        const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] || (__classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = []);
        listeners.push({ listener, once: true });
        return this;
      }
      /**
       * This is similar to `.once()`, but returns a Promise that resolves the next time
       * the event is triggered, instead of calling a listener callback.
       * @returns a Promise that resolves the next time given event is triggered,
       * or rejects if an error is emitted.  (If you request the 'error' event,
       * returns a promise that resolves with the error).
       *
       * Example:
       *
       *   const message = await stream.emitted('message') // rejects if the stream errors
       */
      emitted(event) {
        return new Promise((resolve, reject) => {
          __classPrivateFieldSet3(this, _MessageStream_catchingPromiseCreated, true, "f");
          if (event !== "error")
            this.once("error", reject);
          this.once(event, resolve);
        });
      }
      async done() {
        __classPrivateFieldSet3(this, _MessageStream_catchingPromiseCreated, true, "f");
        await __classPrivateFieldGet3(this, _MessageStream_endPromise, "f");
      }
      get currentMessage() {
        return __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
      }
      /**
       * @returns a promise that resolves with the the final assistant Message response,
       * or rejects if an error occurred or the stream ended prematurely without producing a Message.
       */
      async finalMessage() {
        await this.done();
        return __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalMessage).call(this);
      }
      /**
       * @returns a promise that resolves with the the final assistant Message's text response, concatenated
       * together if there are more than one text blocks.
       * Rejects if an error occurred or the stream ended prematurely without producing a Message.
       */
      async finalText() {
        await this.done();
        return __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalText).call(this);
      }
      _emit(event, ...args) {
        if (__classPrivateFieldGet3(this, _MessageStream_ended, "f"))
          return;
        if (event === "end") {
          __classPrivateFieldSet3(this, _MessageStream_ended, true, "f");
          __classPrivateFieldGet3(this, _MessageStream_resolveEndPromise, "f").call(this);
        }
        const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event];
        if (listeners) {
          __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = listeners.filter((l) => !l.once);
          listeners.forEach(({ listener }) => listener(...args));
        }
        if (event === "abort") {
          const error = args[0];
          if (!__classPrivateFieldGet3(this, _MessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
            Promise.reject(error);
          }
          __classPrivateFieldGet3(this, _MessageStream_rejectConnectedPromise, "f").call(this, error);
          __classPrivateFieldGet3(this, _MessageStream_rejectEndPromise, "f").call(this, error);
          this._emit("end");
          return;
        }
        if (event === "error") {
          const error = args[0];
          if (!__classPrivateFieldGet3(this, _MessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
            Promise.reject(error);
          }
          __classPrivateFieldGet3(this, _MessageStream_rejectConnectedPromise, "f").call(this, error);
          __classPrivateFieldGet3(this, _MessageStream_rejectEndPromise, "f").call(this, error);
          this._emit("end");
        }
      }
      _emitFinal() {
        const finalMessage = this.receivedMessages.at(-1);
        if (finalMessage) {
          this._emit("finalMessage", __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalMessage).call(this));
        }
      }
      async _fromReadableStream(readableStream, options) {
        var _a2;
        const signal = options == null ? void 0 : options.signal;
        if (signal) {
          if (signal.aborted)
            this.controller.abort();
          signal.addEventListener("abort", () => this.controller.abort());
        }
        __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_beginRequest).call(this);
        this._connected(null);
        const stream = Stream.fromReadableStream(readableStream, this.controller);
        for await (const event of stream) {
          __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_addStreamEvent).call(this, event);
        }
        if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
          throw new APIUserAbortError();
        }
        __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_endRequest).call(this);
      }
      [(_MessageStream_currentMessageSnapshot = /* @__PURE__ */ new WeakMap(), _MessageStream_connectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_resolveConnectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_rejectConnectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_endPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_resolveEndPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_rejectEndPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_listeners = /* @__PURE__ */ new WeakMap(), _MessageStream_ended = /* @__PURE__ */ new WeakMap(), _MessageStream_errored = /* @__PURE__ */ new WeakMap(), _MessageStream_aborted = /* @__PURE__ */ new WeakMap(), _MessageStream_catchingPromiseCreated = /* @__PURE__ */ new WeakMap(), _MessageStream_response = /* @__PURE__ */ new WeakMap(), _MessageStream_request_id = /* @__PURE__ */ new WeakMap(), _MessageStream_handleError = /* @__PURE__ */ new WeakMap(), _MessageStream_instances = /* @__PURE__ */ new WeakSet(), _MessageStream_getFinalMessage = function _MessageStream_getFinalMessage2() {
        if (this.receivedMessages.length === 0) {
          throw new AnthropicError("stream ended without producing a Message with role=assistant");
        }
        return this.receivedMessages.at(-1);
      }, _MessageStream_getFinalText = function _MessageStream_getFinalText2() {
        if (this.receivedMessages.length === 0) {
          throw new AnthropicError("stream ended without producing a Message with role=assistant");
        }
        const textBlocks = this.receivedMessages.at(-1).content.filter((block) => block.type === "text").map((block) => block.text);
        if (textBlocks.length === 0) {
          throw new AnthropicError("stream ended without producing a content block with type=text");
        }
        return textBlocks.join(" ");
      }, _MessageStream_beginRequest = function _MessageStream_beginRequest2() {
        if (this.ended)
          return;
        __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, void 0, "f");
      }, _MessageStream_addStreamEvent = function _MessageStream_addStreamEvent2(event) {
        var _a2;
        if (this.ended)
          return;
        const messageSnapshot = __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_accumulateMessage).call(this, event);
        this._emit("streamEvent", event, messageSnapshot);
        switch (event.type) {
          case "content_block_delta": {
            const content = messageSnapshot.content.at(-1);
            switch (event.delta.type) {
              case "text_delta": {
                if (content.type === "text") {
                  this._emit("text", event.delta.text, content.text || "");
                }
                break;
              }
              case "citations_delta": {
                if (content.type === "text") {
                  this._emit("citation", event.delta.citation, (_a2 = content.citations) != null ? _a2 : []);
                }
                break;
              }
              case "input_json_delta": {
                if (content.type === "tool_use" && content.input) {
                  this._emit("inputJson", event.delta.partial_json, content.input);
                }
                break;
              }
              default:
                checkNever2(event.delta);
            }
            break;
          }
          case "message_stop": {
            this._addMessageParam(messageSnapshot);
            this._addMessage(messageSnapshot, true);
            break;
          }
          case "content_block_stop": {
            this._emit("contentBlock", messageSnapshot.content.at(-1));
            break;
          }
          case "message_start": {
            __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, messageSnapshot, "f");
            break;
          }
          case "content_block_start":
          case "message_delta":
            break;
        }
      }, _MessageStream_endRequest = function _MessageStream_endRequest2() {
        if (this.ended) {
          throw new AnthropicError(`stream has ended, this shouldn't happen`);
        }
        const snapshot = __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
        if (!snapshot) {
          throw new AnthropicError(`request ended without sending any chunks`);
        }
        __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, void 0, "f");
        return snapshot;
      }, _MessageStream_accumulateMessage = function _MessageStream_accumulateMessage2(event) {
        var _a2;
        let snapshot = __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
        if (event.type === "message_start") {
          if (snapshot) {
            throw new AnthropicError(`Unexpected event order, got ${event.type} before receiving "message_stop"`);
          }
          return event.message;
        }
        if (!snapshot) {
          throw new AnthropicError(`Unexpected event order, got ${event.type} before "message_start"`);
        }
        switch (event.type) {
          case "message_stop":
            return snapshot;
          case "message_delta":
            snapshot.stop_reason = event.delta.stop_reason;
            snapshot.stop_sequence = event.delta.stop_sequence;
            snapshot.usage.output_tokens = event.usage.output_tokens;
            return snapshot;
          case "content_block_start":
            snapshot.content.push(event.content_block);
            return snapshot;
          case "content_block_delta": {
            const snapshotContent = snapshot.content.at(event.index);
            switch (event.delta.type) {
              case "text_delta": {
                if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
                  snapshotContent.text += event.delta.text;
                }
                break;
              }
              case "citations_delta": {
                if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
                  (_a2 = snapshotContent.citations) != null ? _a2 : snapshotContent.citations = [];
                  snapshotContent.citations.push(event.delta.citation);
                }
                break;
              }
              case "input_json_delta": {
                if ((snapshotContent == null ? void 0 : snapshotContent.type) === "tool_use") {
                  let jsonBuf = snapshotContent[JSON_BUF_PROPERTY2] || "";
                  jsonBuf += event.delta.partial_json;
                  Object.defineProperty(snapshotContent, JSON_BUF_PROPERTY2, {
                    value: jsonBuf,
                    enumerable: false,
                    writable: true
                  });
                  if (jsonBuf) {
                    snapshotContent.input = partialParse(jsonBuf);
                  }
                }
                break;
              }
              default:
                checkNever2(event.delta);
            }
            return snapshot;
          }
          case "content_block_stop":
            return snapshot;
        }
      }, Symbol.asyncIterator)]() {
        const pushQueue = [];
        const readQueue = [];
        let done = false;
        this.on("streamEvent", (event) => {
          const reader = readQueue.shift();
          if (reader) {
            reader.resolve(event);
          } else {
            pushQueue.push(event);
          }
        });
        this.on("end", () => {
          done = true;
          for (const reader of readQueue) {
            reader.resolve(void 0);
          }
          readQueue.length = 0;
        });
        this.on("abort", (err) => {
          done = true;
          for (const reader of readQueue) {
            reader.reject(err);
          }
          readQueue.length = 0;
        });
        this.on("error", (err) => {
          done = true;
          for (const reader of readQueue) {
            reader.reject(err);
          }
          readQueue.length = 0;
        });
        return {
          next: async () => {
            if (!pushQueue.length) {
              if (done) {
                return { value: void 0, done: true };
              }
              return new Promise((resolve, reject) => readQueue.push({ resolve, reject })).then((chunk2) => chunk2 ? { value: chunk2, done: false } : { value: void 0, done: true });
            }
            const chunk = pushQueue.shift();
            return { value: chunk, done: false };
          },
          return: async () => {
            this.abort();
            return { value: void 0, done: true };
          }
        };
      }
      toReadableStream() {
        const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);
        return stream.toReadableStream();
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/resources/messages/messages.mjs
var Messages2, DEPRECATED_MODELS2;
var init_messages2 = __esm({
  "node_modules/@anthropic-ai/sdk/resources/messages/messages.mjs"() {
    init_resource();
    init_batches2();
    init_batches2();
    init_MessageStream();
    Messages2 = class extends APIResource {
      constructor() {
        super(...arguments);
        this.batches = new Batches2(this._client);
      }
      create(body, options) {
        var _a2, _b;
        if (body.model in DEPRECATED_MODELS2) {
          console.warn(`The model '${body.model}' is deprecated and will reach end-of-life on ${DEPRECATED_MODELS2[body.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);
        }
        return this._client.post("/v1/messages", {
          body,
          timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
          ...options,
          stream: (_b = body.stream) != null ? _b : false
        });
      }
      /**
       * Create a Message stream
       */
      stream(body, options) {
        return MessageStream.createMessage(this, body, options);
      }
      /**
       * Count the number of tokens in a Message.
       *
       * The Token Count API can be used to count the number of tokens in a Message,
       * including tools, images, and documents, without creating it.
       */
      countTokens(body, options) {
        return this._client.post("/v1/messages/count_tokens", { body, ...options });
      }
    };
    DEPRECATED_MODELS2 = {
      "claude-1.3": "November 6th, 2024",
      "claude-1.3-100k": "November 6th, 2024",
      "claude-instant-1.1": "November 6th, 2024",
      "claude-instant-1.1-100k": "November 6th, 2024",
      "claude-instant-1.2": "November 6th, 2024",
      "claude-3-sonnet-20240229": "July 21st, 2025",
      "claude-2.1": "July 21st, 2025",
      "claude-2.0": "July 21st, 2025"
    };
    Messages2.Batches = Batches2;
    Messages2.MessageBatchesPage = MessageBatchesPage;
  }
});

// node_modules/@anthropic-ai/sdk/resources/models.mjs
var Models2, ModelInfosPage;
var init_models2 = __esm({
  "node_modules/@anthropic-ai/sdk/resources/models.mjs"() {
    init_resource();
    init_core();
    init_pagination();
    Models2 = class extends APIResource {
      /**
       * Get a specific model.
       *
       * The Models API response can be used to determine information about a specific
       * model or resolve a model alias to a model ID.
       */
      retrieve(modelId, options) {
        return this._client.get(`/v1/models/${modelId}`, options);
      }
      list(query = {}, options) {
        if (isRequestOptions(query)) {
          return this.list({}, query);
        }
        return this._client.getAPIList("/v1/models", ModelInfosPage, { query, ...options });
      }
    };
    ModelInfosPage = class extends Page {
    };
    Models2.ModelInfosPage = ModelInfosPage;
  }
});

// node_modules/@anthropic-ai/sdk/resources/index.mjs
var init_resources = __esm({
  "node_modules/@anthropic-ai/sdk/resources/index.mjs"() {
    init_shared();
    init_beta();
    init_completions();
    init_messages2();
    init_models2();
  }
});

// node_modules/@anthropic-ai/sdk/index.mjs
var _a, Anthropic, HUMAN_PROMPT, AI_PROMPT, sdk_default;
var init_sdk = __esm({
  "node_modules/@anthropic-ai/sdk/index.mjs"() {
    init_core();
    init_error();
    init_uploads();
    init_resources();
    init_completions();
    init_models2();
    init_beta();
    init_messages2();
    Anthropic = class extends APIClient {
      /**
       * API Client for interfacing with the Anthropic API.
       *
       * @param {string | null | undefined} [opts.apiKey=process.env['ANTHROPIC_API_KEY'] ?? null]
       * @param {string | null | undefined} [opts.authToken=process.env['ANTHROPIC_AUTH_TOKEN'] ?? null]
       * @param {string} [opts.baseURL=process.env['ANTHROPIC_BASE_URL'] ?? https://api.anthropic.com] - Override the default base URL for the API.
       * @param {number} [opts.timeout=10 minutes] - The maximum amount of time (in milliseconds) the client will wait for a response before timing out.
       * @param {number} [opts.httpAgent] - An HTTP agent used to manage HTTP(s) connections.
       * @param {Core.Fetch} [opts.fetch] - Specify a custom `fetch` function implementation.
       * @param {number} [opts.maxRetries=2] - The maximum number of times the client will retry a request.
       * @param {Core.Headers} opts.defaultHeaders - Default headers to include with every request to the API.
       * @param {Core.DefaultQuery} opts.defaultQuery - Default query parameters to include with every request to the API.
       * @param {boolean} [opts.dangerouslyAllowBrowser=false] - By default, client-side use of this library is not allowed, as it risks exposing your secret API credentials to attackers.
       */
      constructor({ baseURL = readEnv("ANTHROPIC_BASE_URL"), apiKey = ((_a2) => (_a2 = readEnv("ANTHROPIC_API_KEY")) != null ? _a2 : null)(), authToken = ((_b) => (_b = readEnv("ANTHROPIC_AUTH_TOKEN")) != null ? _b : null)(), ...opts } = {}) {
        var _a3;
        const options = {
          apiKey,
          authToken,
          ...opts,
          baseURL: baseURL || `https://api.anthropic.com`
        };
        if (!options.dangerouslyAllowBrowser && isRunningInBrowser()) {
          throw new AnthropicError("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");
        }
        super({
          baseURL: options.baseURL,
          timeout: (_a3 = options.timeout) != null ? _a3 : 6e5,
          httpAgent: options.httpAgent,
          maxRetries: options.maxRetries,
          fetch: options.fetch
        });
        this.completions = new Completions(this);
        this.messages = new Messages2(this);
        this.models = new Models2(this);
        this.beta = new Beta(this);
        this._options = options;
        this.apiKey = apiKey;
        this.authToken = authToken;
      }
      defaultQuery() {
        return this._options.defaultQuery;
      }
      defaultHeaders(opts) {
        return {
          ...super.defaultHeaders(opts),
          ...this._options.dangerouslyAllowBrowser ? { "anthropic-dangerous-direct-browser-access": "true" } : void 0,
          "anthropic-version": "2023-06-01",
          ...this._options.defaultHeaders
        };
      }
      validateHeaders(headers, customHeaders) {
        if (this.apiKey && headers["x-api-key"]) {
          return;
        }
        if (customHeaders["x-api-key"] === null) {
          return;
        }
        if (this.authToken && headers["authorization"]) {
          return;
        }
        if (customHeaders["authorization"] === null) {
          return;
        }
        throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted');
      }
      authHeaders(opts) {
        const apiKeyAuth = this.apiKeyAuth(opts);
        const bearerAuth = this.bearerAuth(opts);
        if (apiKeyAuth != null && !isEmptyObj(apiKeyAuth)) {
          return apiKeyAuth;
        }
        if (bearerAuth != null && !isEmptyObj(bearerAuth)) {
          return bearerAuth;
        }
        return {};
      }
      apiKeyAuth(opts) {
        if (this.apiKey == null) {
          return {};
        }
        return { "X-Api-Key": this.apiKey };
      }
      bearerAuth(opts) {
        if (this.authToken == null) {
          return {};
        }
        return { Authorization: `Bearer ${this.authToken}` };
      }
    };
    _a = Anthropic;
    Anthropic.Anthropic = _a;
    Anthropic.HUMAN_PROMPT = "\n\nHuman:";
    Anthropic.AI_PROMPT = "\n\nAssistant:";
    Anthropic.DEFAULT_TIMEOUT = 6e5;
    Anthropic.AnthropicError = AnthropicError;
    Anthropic.APIError = APIError;
    Anthropic.APIConnectionError = APIConnectionError;
    Anthropic.APIConnectionTimeoutError = APIConnectionTimeoutError;
    Anthropic.APIUserAbortError = APIUserAbortError;
    Anthropic.NotFoundError = NotFoundError;
    Anthropic.ConflictError = ConflictError;
    Anthropic.RateLimitError = RateLimitError;
    Anthropic.BadRequestError = BadRequestError;
    Anthropic.AuthenticationError = AuthenticationError;
    Anthropic.InternalServerError = InternalServerError;
    Anthropic.PermissionDeniedError = PermissionDeniedError;
    Anthropic.UnprocessableEntityError = UnprocessableEntityError;
    Anthropic.toFile = toFile;
    Anthropic.fileFromPath = fileFromPath;
    Anthropic.Completions = Completions;
    Anthropic.Messages = Messages2;
    Anthropic.Models = Models2;
    Anthropic.ModelInfosPage = ModelInfosPage;
    Anthropic.Beta = Beta;
    ({ HUMAN_PROMPT, AI_PROMPT } = Anthropic);
    sdk_default = Anthropic;
  }
});

// providers/anthropic.ts
function estimateTokenCount(messages) {
  const CHARS_PER_TOKEN = 4;
  const totalChars = messages.reduce((total, msg) => {
    return total + msg.content.length;
  }, 0);
  return Math.ceil(totalChars / CHARS_PER_TOKEN);
}
var MODEL_CONTEXT_WINDOWS, MODEL_OUTPUT_TOKEN_LIMITS, AnthropicProvider;
var init_anthropic = __esm({
  "providers/anthropic.ts"() {
    init_base();
    init_sdk();
    MODEL_CONTEXT_WINDOWS = {
      "claude-3-opus-20240229": 2e5,
      "claude-3-sonnet-20240229": 2e5,
      "claude-3-haiku-20240307": 2e5,
      "claude-3-7-sonnet-20250219": 2e5,
      "claude-3-5-sonnet-20241022": 2e5,
      "claude-3-5-sonnet-20240620": 2e5,
      "claude-3-5-haiku-20241022": 2e5
    };
    MODEL_OUTPUT_TOKEN_LIMITS = {
      "claude-3-7-sonnet-20250219": 64e3,
      "claude-3-5-sonnet-20241022": 8192,
      "claude-3-5-sonnet-20240620": 8192,
      "claude-3-5-haiku-20241022": 8192,
      "claude-3-opus-20240229": 4096,
      "claude-3-sonnet-20240229": 8192,
      // fallback for older sonnet
      "claude-3-haiku-20240307": 4096
      // fallback for older haiku
    };
    AnthropicProvider = class extends BaseProvider {
      constructor(apiKey, model = "claude-3-sonnet-20240229") {
        super();
        __publicField(this, "apiKey");
        __publicField(this, "baseUrl", "https://api.anthropic.com/v1");
        __publicField(this, "model");
        __publicField(this, "client");
        this.apiKey = apiKey;
        this.model = model;
        this.client = new sdk_default({
          apiKey: this.apiKey,
          dangerouslyAllowBrowser: true
          // Required for browser environments
        });
      }
      /**
       * Get a completion from Anthropic
       * 
       * Sends the conversation to Anthropic and streams back the response
       * using the official SDK's streaming support.
       * 
       * Automatically adjusts max_tokens if the request would exceed the model's context window.
       * 
       * @param messages - The conversation history
       * @param options - Settings for this completion
       */
      async getCompletion(messages, options) {
        var _a2, _b, _c, _d;
        try {
          const contextWindow = (_a2 = MODEL_CONTEXT_WINDOWS[this.model]) != null ? _a2 : 2e5;
          const outputTokenLimit = MODEL_OUTPUT_TOKEN_LIMITS[this.model];
          const inputTokens = estimateTokenCount(messages);
          let maxTokens = (_b = options.maxTokens) != null ? _b : 1e3;
          if (inputTokens + maxTokens > contextWindow) {
            const adjustedMaxTokens = contextWindow - inputTokens;
            if (adjustedMaxTokens <= 0) {
              throw new ProviderError(
                "invalid_request" /* InvalidRequest */,
                `Input is too long for ${this.model}'s context window. Estimated input tokens: ${inputTokens}, context window: ${contextWindow}`
              );
            }
            console.log(
              `Adjusting max_tokens from ${maxTokens} to ${adjustedMaxTokens} to fit within ${this.model}'s context window`
            );
            maxTokens = adjustedMaxTokens;
          }
          if (outputTokenLimit && maxTokens > outputTokenLimit) {
            console.log(
              `Capping max_tokens from ${maxTokens} to model output limit ${outputTokenLimit} for ${this.model}`
            );
            maxTokens = outputTokenLimit;
          }
          const { systemPrompt, anthropicMessages } = this.formatMessages(messages);
          const requestParams = {
            model: this.model,
            messages: anthropicMessages,
            temperature: (_c = options.temperature) != null ? _c : 0.7,
            max_tokens: maxTokens,
            stream: true
          };
          if (systemPrompt) {
            requestParams.system = systemPrompt;
          }
          const stream = await this.client.messages.create(requestParams);
          try {
            if (stream && typeof stream === "object") {
              if (stream.on && typeof stream.on === "function") {
                await new Promise((resolve, reject) => {
                  stream.on("content_block_delta", (chunk) => {
                    var _a3;
                    if (((_a3 = chunk.delta) == null ? void 0 : _a3.type) === "text_delta" && options.streamCallback) {
                      options.streamCallback(chunk.delta.text);
                    }
                  });
                  stream.on("end", resolve);
                  stream.on("error", reject);
                });
              } else if (Symbol.asyncIterator in stream) {
                for await (const chunk of stream) {
                  if (chunk.type === "content_block_delta" && ((_d = chunk.delta) == null ? void 0 : _d.type) === "text_delta" && options.streamCallback) {
                    options.streamCallback(chunk.delta.text);
                  }
                }
              } else if (options.streamCallback) {
                console.warn("Anthropic response is not a stream, handling as regular response");
                if ("content" in stream && typeof stream.content === "string") {
                  options.streamCallback(stream.content);
                }
              }
            }
          } catch (streamError) {
            console.error("Error processing Anthropic stream:", streamError);
            throw streamError;
          }
        } catch (error) {
          if (error instanceof ProviderError) {
            throw error;
          }
          if (error.name === "AbortError") {
            console.log("Anthropic stream was aborted");
          } else {
            console.error("Error calling Anthropic:", error);
            throw error;
          }
        }
      }
      /**
       * Get available Anthropic models
       * 
       * Returns the list of supported Claude models.
       * Note: Anthropic doesn't have a models endpoint, so we return known models.
       * This list is based on the models defined in MODEL_CONTEXT_WINDOWS.
       * 
       * @returns List of available model names
       */
      async getAvailableModels() {
        try {
          return Object.keys(MODEL_CONTEXT_WINDOWS);
        } catch (error) {
          console.error("Error getting Anthropic models:", error);
          throw error;
        }
      }
      /**
       * Format messages for Anthropic API
       * 
       * Converts from the plugin's Message format to Anthropic's expected format.
       * Handles system messages specially as Anthropic has a different format.
       * 
       * @param messages - Array of messages to format
       * @returns Formatted messages and system prompt for Anthropic API
       */
      formatMessages(messages) {
        const systemMessages = messages.filter((msg) => msg.role === "system");
        const nonSystemMessages = messages.filter((msg) => msg.role !== "system");
        const systemPrompt = systemMessages.length > 0 ? systemMessages.map((msg) => msg.content).join("\n\n") : void 0;
        const anthropicMessages = nonSystemMessages.map((msg) => {
          const role = msg.role === "user" || msg.role === "assistant" ? msg.role : "user";
          return { role, content: msg.content };
        });
        return { systemPrompt, anthropicMessages };
      }
      /**
       * Test connection to Anthropic
       * 
       * Verifies the API key works by attempting a simple completion.
       * 
       * @returns Test results including success/failure
       */
      async testConnection() {
        try {
          await this.client.messages.create({
            model: this.model,
            messages: [{ role: "user", content: "Hi" }],
            max_tokens: 1
          });
          const models = await this.getAvailableModels();
          return {
            success: true,
            message: "Successfully connected to Anthropic!",
            models
          };
        } catch (error) {
          return this.createErrorResponse(error);
        }
      }
    };
  }
});

// providers/openai.ts
var OpenAIProvider;
var init_openai = __esm({
  "providers/openai.ts"() {
    init_base();
    OpenAIProvider = class extends BaseProvider {
      constructor(apiKey, model = "gpt-4") {
        super();
        __publicField(this, "apiKey");
        __publicField(this, "baseUrl", "https://api.openai.com/v1");
        __publicField(this, "model");
        this.apiKey = apiKey;
        this.model = model;
      }
      /**
       * Get a completion from OpenAI
       * 
       * Sends the conversation to OpenAI and streams back the response.
       * 
       * @param messages - The conversation history
       * @param options - Settings for this completion
       */
      async getCompletion(messages, options) {
        var _a2, _b, _c, _d, _e, _f;
        try {
          const response = await fetch(`${this.baseUrl}/chat/completions`, {
            method: "POST",
            headers: {
              "Authorization": `Bearer ${this.apiKey}`,
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              model: this.model,
              messages,
              temperature: (_a2 = options.temperature) != null ? _a2 : 0.7,
              max_tokens: (_b = options.maxTokens) != null ? _b : 1e3,
              stream: true
            }),
            signal: (_c = options.abortController) == null ? void 0 : _c.signal
          });
          if (!response.ok) {
            throw this.handleHttpError(response);
          }
          const reader = (_d = response.body) == null ? void 0 : _d.getReader();
          const decoder = new TextDecoder("utf-8");
          let buffer = "";
          while (true) {
            const { done, value } = await (reader == null ? void 0 : reader.read()) || { done: true, value: void 0 };
            if (done) break;
            buffer += decoder.decode(value, { stream: true });
            const lines = buffer.split("\n");
            buffer = lines.pop() || "";
            for (const line of lines) {
              if (line.startsWith("data: ") && line !== "data: [DONE]") {
                try {
                  const data = JSON.parse(line.slice(6));
                  const content = (_f = (_e = data.choices[0]) == null ? void 0 : _e.delta) == null ? void 0 : _f.content;
                  if (content && options.streamCallback) {
                    options.streamCallback(content);
                  }
                } catch (e) {
                  console.warn("Error parsing OpenAI response chunk:", e);
                }
              }
            }
          }
        } catch (error) {
          if (error instanceof ProviderError) {
            throw error;
          }
          if (error.name === "AbortError") {
            console.log("OpenAI stream was aborted");
          } else {
            console.error("Error calling OpenAI:", error);
            throw error;
          }
        }
      }
      /**
       * Get available OpenAI models
       * 
       * Fetches the list of models from OpenAI's API.
       * Filters to only include chat models (GPT-3.5, GPT-4, etc.)
       * 
       * @returns List of available model names
       */
      async getAvailableModels() {
        try {
          const response = await fetch(`${this.baseUrl}/models`, {
            method: "GET",
            headers: {
              "Authorization": `Bearer ${this.apiKey}`,
              "Content-Type": "application/json"
            }
          });
          if (!response.ok) {
            throw this.handleHttpError(response);
          }
          const data = await response.json();
          return data.data.map((model) => model.id).filter((id) => id.startsWith("gpt-"));
        } catch (error) {
          console.error("Error fetching OpenAI models:", error);
          throw error;
        }
      }
      /**
       * Test connection to OpenAI
       * 
       * Verifies the API key works by attempting to list models.
       * 
       * @returns Test results including success/failure and available models
       */
      async testConnection() {
        try {
          const models = await this.getAvailableModels();
          return {
            success: true,
            message: `Successfully connected to OpenAI! Found ${models.length} available models.`,
            models
          };
        } catch (error) {
          return this.createErrorResponse(error);
        }
      }
    };
  }
});

// providers/gemini.ts
var GeminiProvider;
var init_gemini = __esm({
  "providers/gemini.ts"() {
    init_base();
    GeminiProvider = class extends BaseProvider {
      constructor(apiKey, model = "gemini-pro") {
        super();
        __publicField(this, "apiKey");
        __publicField(this, "baseUrl", "https://generativelanguage.googleapis.com/v1");
        __publicField(this, "model");
        this.apiKey = apiKey;
        this.model = model;
      }
      /**
       * Get a completion from Google Gemini
       * 
       * Sends the conversation to Gemini and streams back the response.
       * 
       * @param messages - The conversation history
       * @param options - Settings for this completion
       */
      async getCompletion(messages, options) {
        var _a2, _b, _c, _d, _e, _f, _g, _h;
        try {
          const formattedMessages = this.formatMessages(messages);
          const url = `${this.baseUrl}/models/${this.model}:generateContent?key=${this.apiKey}`;
          const response = await fetch(url, {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              contents: formattedMessages,
              generationConfig: {
                temperature: (_a2 = options.temperature) != null ? _a2 : 0.7,
                maxOutputTokens: (_b = options.maxTokens) != null ? _b : 1e3
              }
            }),
            signal: (_c = options.abortController) == null ? void 0 : _c.signal
          });
          if (!response.ok) {
            throw this.handleHttpError(response);
          }
          const data = await response.json();
          console.log("Gemini response:", JSON.stringify(data));
          const text = (_h = (_g = (_f = (_e = (_d = data.candidates) == null ? void 0 : _d[0]) == null ? void 0 : _e.content) == null ? void 0 : _f.parts) == null ? void 0 : _g[0]) == null ? void 0 : _h.text;
          if (text && options.streamCallback) {
            options.streamCallback(text);
          } else {
            console.warn("No text found in Gemini response:", JSON.stringify(data));
          }
        } catch (error) {
          if (error instanceof ProviderError) {
            throw error;
          }
          if (error.name === "AbortError") {
            console.log("Gemini request was aborted");
          } else {
            console.error("Error calling Gemini:", error);
            throw error;
          }
        }
      }
      /**
       * Get available Gemini models
       * 
       * Fetches the list of available models from Google's API.
       * Filters to only include Gemini models.
       * 
       * @returns List of available model names
       */
      async getAvailableModels() {
        try {
          const response = await fetch(`${this.baseUrl}/models?key=${this.apiKey}`, {
            method: "GET",
            headers: {
              "Content-Type": "application/json"
            }
          });
          if (!response.ok) {
            throw this.handleHttpError(response);
          }
          const data = await response.json();
          return data.models.map((model) => model.name.split("/").pop()).filter((id) => id.startsWith("gemini-"));
        } catch (error) {
          console.error("Error fetching Gemini models:", error);
          throw error;
        }
      }
      /**
       * Test connection to Gemini
       * 
       * Verifies the API key works by attempting to list models.
       * 
       * @returns Test results including success/failure and available models
       */
      async testConnection() {
        try {
          const models = await this.getAvailableModels();
          return {
            success: true,
            message: `Successfully connected to Google Gemini! Found ${models.length} available models.`,
            models
          };
        } catch (error) {
          return this.createErrorResponse(error);
        }
      }
      /**
       * Format messages for Gemini API
       * 
       * Converts from the plugin's Message format to Gemini's expected format.
       * 
       * @param messages - Array of messages to format
       * @returns Formatted messages for Gemini API
       */
      formatMessages(messages) {
        const geminiMessages = [];
        const systemMessages = messages.filter((msg) => msg.role === "system");
        const nonSystemMessages = messages.filter((msg) => msg.role !== "system");
        for (const message of systemMessages) {
          geminiMessages.push({
            role: "user",
            parts: [{ text: message.content }]
          });
        }
        for (const message of nonSystemMessages) {
          const role = message.role === "assistant" ? "model" : "user";
          geminiMessages.push({
            role,
            parts: [{ text: message.content }]
          });
        }
        return geminiMessages;
      }
    };
  }
});

// providers/ollama.ts
var OllamaProvider;
var init_ollama = __esm({
  "providers/ollama.ts"() {
    init_base();
    OllamaProvider = class extends BaseProvider {
      constructor(serverUrl = "http://localhost:11434", model = "llama2") {
        super();
        __publicField(this, "apiKey", "");
        // Not used for Ollama
        __publicField(this, "baseUrl");
        __publicField(this, "model");
        this.baseUrl = serverUrl.replace(/\/$/, "");
        this.model = model;
      }
      /**
       * Convert messages to Ollama format
       * 
       * @param messages - Standard message format
       * @returns Prompt string in Ollama format
       */
      convertToOllamaFormat(messages) {
        return messages.map((msg) => {
          if (msg.role === "system") {
            return `System: ${msg.content}

`;
          }
          return `${msg.role === "user" ? "Human" : "Assistant"}: ${msg.content}

`;
        }).join("") + "Assistant:";
      }
      /**
       * Get a completion from Ollama
       * 
       * Sends the conversation to the local Ollama server and streams back the response.
       * 
       * @param messages - The conversation history
       * @param options - Settings for this completion
       */
      async getCompletion(messages, options) {
        var _a2, _b, _c, _d;
        try {
          const prompt = this.convertToOllamaFormat(messages);
          const response = await fetch(`${this.baseUrl}/api/generate`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              model: this.model,
              prompt,
              stream: true,
              options: {
                temperature: (_a2 = options.temperature) != null ? _a2 : 0.7,
                num_predict: (_b = options.maxTokens) != null ? _b : 1e3
              }
            }),
            signal: (_c = options.abortController) == null ? void 0 : _c.signal
          });
          if (!response.ok) {
            throw this.handleHttpError(response);
          }
          const reader = (_d = response.body) == null ? void 0 : _d.getReader();
          const decoder = new TextDecoder("utf-8");
          let buffer = "";
          while (true) {
            const { done, value } = await (reader == null ? void 0 : reader.read()) || { done: true, value: void 0 };
            if (done) break;
            buffer += decoder.decode(value, { stream: true });
            const lines = buffer.split("\n");
            buffer = lines.pop() || "";
            for (const line of lines) {
              if (line.trim()) {
                try {
                  const data = JSON.parse(line);
                  if (data.response && options.streamCallback) {
                    options.streamCallback(data.response);
                  }
                } catch (e) {
                  console.warn("Error parsing Ollama response chunk:", e);
                }
              }
            }
          }
        } catch (error) {
          if (error instanceof ProviderError) {
            throw error;
          }
          if (error.name === "AbortError") {
            console.log("Ollama stream was aborted");
          } else {
            console.error("Error calling Ollama:", error);
            throw error;
          }
        }
      }
      /**
       * Get available Ollama models
       * 
       * Fetches the list of models installed on the local Ollama server.
       * 
       * @returns List of available model names
       */
      async getAvailableModels() {
        var _a2;
        try {
          const response = await fetch(`${this.baseUrl}/api/tags`);
          if (!response.ok) {
            throw this.handleHttpError(response);
          }
          const data = await response.json();
          return ((_a2 = data.models) == null ? void 0 : _a2.map((model) => model.name)) || [];
        } catch (error) {
          console.error("Error fetching Ollama models:", error);
          throw error;
        }
      }
      /**
       * Test connection to Ollama
       * 
       * Verifies the Ollama server is running and accessible.
       * Also checks if any models are installed.
       * 
       * @returns Test results including success/failure and available models
       */
      async testConnection() {
        try {
          const models = await this.getAvailableModels();
          if (models.length === 0) {
            return {
              success: false,
              message: 'Connected to Ollama server, but no models are installed. Use "ollama pull model-name" to install models.',
              models: []
            };
          }
          return {
            success: true,
            message: `Successfully connected to Ollama! Found ${models.length} installed models.`,
            models
          };
        } catch (error) {
          return this.createErrorResponse(error);
        }
      }
    };
  }
});

// providers/index.ts
function createProvider(settings) {
  switch (settings.provider) {
    case "openai":
      return new OpenAIProvider(
        settings.openaiSettings.apiKey,
        settings.openaiSettings.model
      );
    case "anthropic":
      return new AnthropicProvider(
        settings.anthropicSettings.apiKey,
        settings.anthropicSettings.model
      );
    case "gemini":
      return new GeminiProvider(
        settings.geminiSettings.apiKey,
        settings.geminiSettings.model
      );
    case "ollama":
      return new OllamaProvider(
        settings.ollamaSettings.serverUrl,
        settings.ollamaSettings.model
      );
    default:
      throw new Error(`Invalid provider type: ${settings.provider}`);
  }
}
var init_providers = __esm({
  "providers/index.ts"() {
    init_base();
    init_anthropic();
    init_openai();
    init_gemini();
    init_ollama();
  }
});

// node_modules/js-yaml/dist/js-yaml.mjs
function isNothing(subject) {
  return typeof subject === "undefined" || subject === null;
}
function isObject(subject) {
  return typeof subject === "object" && subject !== null;
}
function toArray(sequence) {
  if (Array.isArray(sequence)) return sequence;
  else if (isNothing(sequence)) return [];
  return [sequence];
}
function extend(target, source) {
  var index, length, key, sourceKeys;
  if (source) {
    sourceKeys = Object.keys(source);
    for (index = 0, length = sourceKeys.length; index < length; index += 1) {
      key = sourceKeys[index];
      target[key] = source[key];
    }
  }
  return target;
}
function repeat(string, count) {
  var result = "", cycle;
  for (cycle = 0; cycle < count; cycle += 1) {
    result += string;
  }
  return result;
}
function isNegativeZero(number) {
  return number === 0 && Number.NEGATIVE_INFINITY === 1 / number;
}
function formatError(exception2, compact) {
  var where = "", message = exception2.reason || "(unknown reason)";
  if (!exception2.mark) return message;
  if (exception2.mark.name) {
    where += 'in "' + exception2.mark.name + '" ';
  }
  where += "(" + (exception2.mark.line + 1) + ":" + (exception2.mark.column + 1) + ")";
  if (!compact && exception2.mark.snippet) {
    where += "\n\n" + exception2.mark.snippet;
  }
  return message + " " + where;
}
function YAMLException$1(reason, mark) {
  Error.call(this);
  this.name = "YAMLException";
  this.reason = reason;
  this.mark = mark;
  this.message = formatError(this, false);
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, this.constructor);
  } else {
    this.stack = new Error().stack || "";
  }
}
function getLine(buffer, lineStart, lineEnd, position, maxLineLength) {
  var head = "";
  var tail = "";
  var maxHalfLength = Math.floor(maxLineLength / 2) - 1;
  if (position - lineStart > maxHalfLength) {
    head = " ... ";
    lineStart = position - maxHalfLength + head.length;
  }
  if (lineEnd - position > maxHalfLength) {
    tail = " ...";
    lineEnd = position + maxHalfLength - tail.length;
  }
  return {
    str: head + buffer.slice(lineStart, lineEnd).replace(/\t/g, "\u2192") + tail,
    pos: position - lineStart + head.length
    // relative position
  };
}
function padStart(string, max) {
  return common.repeat(" ", max - string.length) + string;
}
function makeSnippet(mark, options) {
  options = Object.create(options || null);
  if (!mark.buffer) return null;
  if (!options.maxLength) options.maxLength = 79;
  if (typeof options.indent !== "number") options.indent = 1;
  if (typeof options.linesBefore !== "number") options.linesBefore = 3;
  if (typeof options.linesAfter !== "number") options.linesAfter = 2;
  var re = /\r?\n|\r|\0/g;
  var lineStarts = [0];
  var lineEnds = [];
  var match;
  var foundLineNo = -1;
  while (match = re.exec(mark.buffer)) {
    lineEnds.push(match.index);
    lineStarts.push(match.index + match[0].length);
    if (mark.position <= match.index && foundLineNo < 0) {
      foundLineNo = lineStarts.length - 2;
    }
  }
  if (foundLineNo < 0) foundLineNo = lineStarts.length - 1;
  var result = "", i, line;
  var lineNoLength = Math.min(mark.line + options.linesAfter, lineEnds.length).toString().length;
  var maxLineLength = options.maxLength - (options.indent + lineNoLength + 3);
  for (i = 1; i <= options.linesBefore; i++) {
    if (foundLineNo - i < 0) break;
    line = getLine(
      mark.buffer,
      lineStarts[foundLineNo - i],
      lineEnds[foundLineNo - i],
      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo - i]),
      maxLineLength
    );
    result = common.repeat(" ", options.indent) + padStart((mark.line - i + 1).toString(), lineNoLength) + " | " + line.str + "\n" + result;
  }
  line = getLine(mark.buffer, lineStarts[foundLineNo], lineEnds[foundLineNo], mark.position, maxLineLength);
  result += common.repeat(" ", options.indent) + padStart((mark.line + 1).toString(), lineNoLength) + " | " + line.str + "\n";
  result += common.repeat("-", options.indent + lineNoLength + 3 + line.pos) + "^\n";
  for (i = 1; i <= options.linesAfter; i++) {
    if (foundLineNo + i >= lineEnds.length) break;
    line = getLine(
      mark.buffer,
      lineStarts[foundLineNo + i],
      lineEnds[foundLineNo + i],
      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo + i]),
      maxLineLength
    );
    result += common.repeat(" ", options.indent) + padStart((mark.line + i + 1).toString(), lineNoLength) + " | " + line.str + "\n";
  }
  return result.replace(/\n$/, "");
}
function compileStyleAliases(map2) {
  var result = {};
  if (map2 !== null) {
    Object.keys(map2).forEach(function(style) {
      map2[style].forEach(function(alias) {
        result[String(alias)] = style;
      });
    });
  }
  return result;
}
function Type$1(tag, options) {
  options = options || {};
  Object.keys(options).forEach(function(name) {
    if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {
      throw new exception('Unknown option "' + name + '" is met in definition of "' + tag + '" YAML type.');
    }
  });
  this.options = options;
  this.tag = tag;
  this.kind = options["kind"] || null;
  this.resolve = options["resolve"] || function() {
    return true;
  };
  this.construct = options["construct"] || function(data) {
    return data;
  };
  this.instanceOf = options["instanceOf"] || null;
  this.predicate = options["predicate"] || null;
  this.represent = options["represent"] || null;
  this.representName = options["representName"] || null;
  this.defaultStyle = options["defaultStyle"] || null;
  this.multi = options["multi"] || false;
  this.styleAliases = compileStyleAliases(options["styleAliases"] || null);
  if (YAML_NODE_KINDS.indexOf(this.kind) === -1) {
    throw new exception('Unknown kind "' + this.kind + '" is specified for "' + tag + '" YAML type.');
  }
}
function compileList(schema2, name) {
  var result = [];
  schema2[name].forEach(function(currentType) {
    var newIndex = result.length;
    result.forEach(function(previousType, previousIndex) {
      if (previousType.tag === currentType.tag && previousType.kind === currentType.kind && previousType.multi === currentType.multi) {
        newIndex = previousIndex;
      }
    });
    result[newIndex] = currentType;
  });
  return result;
}
function compileMap() {
  var result = {
    scalar: {},
    sequence: {},
    mapping: {},
    fallback: {},
    multi: {
      scalar: [],
      sequence: [],
      mapping: [],
      fallback: []
    }
  }, index, length;
  function collectType(type2) {
    if (type2.multi) {
      result.multi[type2.kind].push(type2);
      result.multi["fallback"].push(type2);
    } else {
      result[type2.kind][type2.tag] = result["fallback"][type2.tag] = type2;
    }
  }
  for (index = 0, length = arguments.length; index < length; index += 1) {
    arguments[index].forEach(collectType);
  }
  return result;
}
function Schema$1(definition) {
  return this.extend(definition);
}
function resolveYamlNull(data) {
  if (data === null) return true;
  var max = data.length;
  return max === 1 && data === "~" || max === 4 && (data === "null" || data === "Null" || data === "NULL");
}
function constructYamlNull() {
  return null;
}
function isNull(object) {
  return object === null;
}
function resolveYamlBoolean(data) {
  if (data === null) return false;
  var max = data.length;
  return max === 4 && (data === "true" || data === "True" || data === "TRUE") || max === 5 && (data === "false" || data === "False" || data === "FALSE");
}
function constructYamlBoolean(data) {
  return data === "true" || data === "True" || data === "TRUE";
}
function isBoolean(object) {
  return Object.prototype.toString.call(object) === "[object Boolean]";
}
function isHexCode(c) {
  return 48 <= c && c <= 57 || 65 <= c && c <= 70 || 97 <= c && c <= 102;
}
function isOctCode(c) {
  return 48 <= c && c <= 55;
}
function isDecCode(c) {
  return 48 <= c && c <= 57;
}
function resolveYamlInteger(data) {
  if (data === null) return false;
  var max = data.length, index = 0, hasDigits = false, ch;
  if (!max) return false;
  ch = data[index];
  if (ch === "-" || ch === "+") {
    ch = data[++index];
  }
  if (ch === "0") {
    if (index + 1 === max) return true;
    ch = data[++index];
    if (ch === "b") {
      index++;
      for (; index < max; index++) {
        ch = data[index];
        if (ch === "_") continue;
        if (ch !== "0" && ch !== "1") return false;
        hasDigits = true;
      }
      return hasDigits && ch !== "_";
    }
    if (ch === "x") {
      index++;
      for (; index < max; index++) {
        ch = data[index];
        if (ch === "_") continue;
        if (!isHexCode(data.charCodeAt(index))) return false;
        hasDigits = true;
      }
      return hasDigits && ch !== "_";
    }
    if (ch === "o") {
      index++;
      for (; index < max; index++) {
        ch = data[index];
        if (ch === "_") continue;
        if (!isOctCode(data.charCodeAt(index))) return false;
        hasDigits = true;
      }
      return hasDigits && ch !== "_";
    }
  }
  if (ch === "_") return false;
  for (; index < max; index++) {
    ch = data[index];
    if (ch === "_") continue;
    if (!isDecCode(data.charCodeAt(index))) {
      return false;
    }
    hasDigits = true;
  }
  if (!hasDigits || ch === "_") return false;
  return true;
}
function constructYamlInteger(data) {
  var value = data, sign = 1, ch;
  if (value.indexOf("_") !== -1) {
    value = value.replace(/_/g, "");
  }
  ch = value[0];
  if (ch === "-" || ch === "+") {
    if (ch === "-") sign = -1;
    value = value.slice(1);
    ch = value[0];
  }
  if (value === "0") return 0;
  if (ch === "0") {
    if (value[1] === "b") return sign * parseInt(value.slice(2), 2);
    if (value[1] === "x") return sign * parseInt(value.slice(2), 16);
    if (value[1] === "o") return sign * parseInt(value.slice(2), 8);
  }
  return sign * parseInt(value, 10);
}
function isInteger(object) {
  return Object.prototype.toString.call(object) === "[object Number]" && (object % 1 === 0 && !common.isNegativeZero(object));
}
function resolveYamlFloat(data) {
  if (data === null) return false;
  if (!YAML_FLOAT_PATTERN.test(data) || // Quick hack to not allow integers end with `_`
  // Probably should update regexp & check speed
  data[data.length - 1] === "_") {
    return false;
  }
  return true;
}
function constructYamlFloat(data) {
  var value, sign;
  value = data.replace(/_/g, "").toLowerCase();
  sign = value[0] === "-" ? -1 : 1;
  if ("+-".indexOf(value[0]) >= 0) {
    value = value.slice(1);
  }
  if (value === ".inf") {
    return sign === 1 ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;
  } else if (value === ".nan") {
    return NaN;
  }
  return sign * parseFloat(value, 10);
}
function representYamlFloat(object, style) {
  var res;
  if (isNaN(object)) {
    switch (style) {
      case "lowercase":
        return ".nan";
      case "uppercase":
        return ".NAN";
      case "camelcase":
        return ".NaN";
    }
  } else if (Number.POSITIVE_INFINITY === object) {
    switch (style) {
      case "lowercase":
        return ".inf";
      case "uppercase":
        return ".INF";
      case "camelcase":
        return ".Inf";
    }
  } else if (Number.NEGATIVE_INFINITY === object) {
    switch (style) {
      case "lowercase":
        return "-.inf";
      case "uppercase":
        return "-.INF";
      case "camelcase":
        return "-.Inf";
    }
  } else if (common.isNegativeZero(object)) {
    return "-0.0";
  }
  res = object.toString(10);
  return SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace("e", ".e") : res;
}
function isFloat(object) {
  return Object.prototype.toString.call(object) === "[object Number]" && (object % 1 !== 0 || common.isNegativeZero(object));
}
function resolveYamlTimestamp(data) {
  if (data === null) return false;
  if (YAML_DATE_REGEXP.exec(data) !== null) return true;
  if (YAML_TIMESTAMP_REGEXP.exec(data) !== null) return true;
  return false;
}
function constructYamlTimestamp(data) {
  var match, year, month, day, hour, minute, second, fraction = 0, delta = null, tz_hour, tz_minute, date;
  match = YAML_DATE_REGEXP.exec(data);
  if (match === null) match = YAML_TIMESTAMP_REGEXP.exec(data);
  if (match === null) throw new Error("Date resolve error");
  year = +match[1];
  month = +match[2] - 1;
  day = +match[3];
  if (!match[4]) {
    return new Date(Date.UTC(year, month, day));
  }
  hour = +match[4];
  minute = +match[5];
  second = +match[6];
  if (match[7]) {
    fraction = match[7].slice(0, 3);
    while (fraction.length < 3) {
      fraction += "0";
    }
    fraction = +fraction;
  }
  if (match[9]) {
    tz_hour = +match[10];
    tz_minute = +(match[11] || 0);
    delta = (tz_hour * 60 + tz_minute) * 6e4;
    if (match[9] === "-") delta = -delta;
  }
  date = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));
  if (delta) date.setTime(date.getTime() - delta);
  return date;
}
function representYamlTimestamp(object) {
  return object.toISOString();
}
function resolveYamlMerge(data) {
  return data === "<<" || data === null;
}
function resolveYamlBinary(data) {
  if (data === null) return false;
  var code, idx, bitlen = 0, max = data.length, map2 = BASE64_MAP;
  for (idx = 0; idx < max; idx++) {
    code = map2.indexOf(data.charAt(idx));
    if (code > 64) continue;
    if (code < 0) return false;
    bitlen += 6;
  }
  return bitlen % 8 === 0;
}
function constructYamlBinary(data) {
  var idx, tailbits, input = data.replace(/[\r\n=]/g, ""), max = input.length, map2 = BASE64_MAP, bits = 0, result = [];
  for (idx = 0; idx < max; idx++) {
    if (idx % 4 === 0 && idx) {
      result.push(bits >> 16 & 255);
      result.push(bits >> 8 & 255);
      result.push(bits & 255);
    }
    bits = bits << 6 | map2.indexOf(input.charAt(idx));
  }
  tailbits = max % 4 * 6;
  if (tailbits === 0) {
    result.push(bits >> 16 & 255);
    result.push(bits >> 8 & 255);
    result.push(bits & 255);
  } else if (tailbits === 18) {
    result.push(bits >> 10 & 255);
    result.push(bits >> 2 & 255);
  } else if (tailbits === 12) {
    result.push(bits >> 4 & 255);
  }
  return new Uint8Array(result);
}
function representYamlBinary(object) {
  var result = "", bits = 0, idx, tail, max = object.length, map2 = BASE64_MAP;
  for (idx = 0; idx < max; idx++) {
    if (idx % 3 === 0 && idx) {
      result += map2[bits >> 18 & 63];
      result += map2[bits >> 12 & 63];
      result += map2[bits >> 6 & 63];
      result += map2[bits & 63];
    }
    bits = (bits << 8) + object[idx];
  }
  tail = max % 3;
  if (tail === 0) {
    result += map2[bits >> 18 & 63];
    result += map2[bits >> 12 & 63];
    result += map2[bits >> 6 & 63];
    result += map2[bits & 63];
  } else if (tail === 2) {
    result += map2[bits >> 10 & 63];
    result += map2[bits >> 4 & 63];
    result += map2[bits << 2 & 63];
    result += map2[64];
  } else if (tail === 1) {
    result += map2[bits >> 2 & 63];
    result += map2[bits << 4 & 63];
    result += map2[64];
    result += map2[64];
  }
  return result;
}
function isBinary(obj) {
  return Object.prototype.toString.call(obj) === "[object Uint8Array]";
}
function resolveYamlOmap(data) {
  if (data === null) return true;
  var objectKeys = [], index, length, pair, pairKey, pairHasKey, object = data;
  for (index = 0, length = object.length; index < length; index += 1) {
    pair = object[index];
    pairHasKey = false;
    if (_toString$2.call(pair) !== "[object Object]") return false;
    for (pairKey in pair) {
      if (_hasOwnProperty$3.call(pair, pairKey)) {
        if (!pairHasKey) pairHasKey = true;
        else return false;
      }
    }
    if (!pairHasKey) return false;
    if (objectKeys.indexOf(pairKey) === -1) objectKeys.push(pairKey);
    else return false;
  }
  return true;
}
function constructYamlOmap(data) {
  return data !== null ? data : [];
}
function resolveYamlPairs(data) {
  if (data === null) return true;
  var index, length, pair, keys, result, object = data;
  result = new Array(object.length);
  for (index = 0, length = object.length; index < length; index += 1) {
    pair = object[index];
    if (_toString$1.call(pair) !== "[object Object]") return false;
    keys = Object.keys(pair);
    if (keys.length !== 1) return false;
    result[index] = [keys[0], pair[keys[0]]];
  }
  return true;
}
function constructYamlPairs(data) {
  if (data === null) return [];
  var index, length, pair, keys, result, object = data;
  result = new Array(object.length);
  for (index = 0, length = object.length; index < length; index += 1) {
    pair = object[index];
    keys = Object.keys(pair);
    result[index] = [keys[0], pair[keys[0]]];
  }
  return result;
}
function resolveYamlSet(data) {
  if (data === null) return true;
  var key, object = data;
  for (key in object) {
    if (_hasOwnProperty$2.call(object, key)) {
      if (object[key] !== null) return false;
    }
  }
  return true;
}
function constructYamlSet(data) {
  return data !== null ? data : {};
}
function _class(obj) {
  return Object.prototype.toString.call(obj);
}
function is_EOL(c) {
  return c === 10 || c === 13;
}
function is_WHITE_SPACE(c) {
  return c === 9 || c === 32;
}
function is_WS_OR_EOL(c) {
  return c === 9 || c === 32 || c === 10 || c === 13;
}
function is_FLOW_INDICATOR(c) {
  return c === 44 || c === 91 || c === 93 || c === 123 || c === 125;
}
function fromHexCode(c) {
  var lc;
  if (48 <= c && c <= 57) {
    return c - 48;
  }
  lc = c | 32;
  if (97 <= lc && lc <= 102) {
    return lc - 97 + 10;
  }
  return -1;
}
function escapedHexLen(c) {
  if (c === 120) {
    return 2;
  }
  if (c === 117) {
    return 4;
  }
  if (c === 85) {
    return 8;
  }
  return 0;
}
function fromDecimalCode(c) {
  if (48 <= c && c <= 57) {
    return c - 48;
  }
  return -1;
}
function simpleEscapeSequence(c) {
  return c === 48 ? "\0" : c === 97 ? "\x07" : c === 98 ? "\b" : c === 116 ? "	" : c === 9 ? "	" : c === 110 ? "\n" : c === 118 ? "\v" : c === 102 ? "\f" : c === 114 ? "\r" : c === 101 ? "\x1B" : c === 32 ? " " : c === 34 ? '"' : c === 47 ? "/" : c === 92 ? "\\" : c === 78 ? "\x85" : c === 95 ? "\xA0" : c === 76 ? "\u2028" : c === 80 ? "\u2029" : "";
}
function charFromCodepoint(c) {
  if (c <= 65535) {
    return String.fromCharCode(c);
  }
  return String.fromCharCode(
    (c - 65536 >> 10) + 55296,
    (c - 65536 & 1023) + 56320
  );
}
function State$1(input, options) {
  this.input = input;
  this.filename = options["filename"] || null;
  this.schema = options["schema"] || _default;
  this.onWarning = options["onWarning"] || null;
  this.legacy = options["legacy"] || false;
  this.json = options["json"] || false;
  this.listener = options["listener"] || null;
  this.implicitTypes = this.schema.compiledImplicit;
  this.typeMap = this.schema.compiledTypeMap;
  this.length = input.length;
  this.position = 0;
  this.line = 0;
  this.lineStart = 0;
  this.lineIndent = 0;
  this.firstTabInLine = -1;
  this.documents = [];
}
function generateError(state, message) {
  var mark = {
    name: state.filename,
    buffer: state.input.slice(0, -1),
    // omit trailing \0
    position: state.position,
    line: state.line,
    column: state.position - state.lineStart
  };
  mark.snippet = snippet(mark);
  return new exception(message, mark);
}
function throwError(state, message) {
  throw generateError(state, message);
}
function throwWarning(state, message) {
  if (state.onWarning) {
    state.onWarning.call(null, generateError(state, message));
  }
}
function captureSegment(state, start, end, checkJson) {
  var _position, _length, _character, _result;
  if (start < end) {
    _result = state.input.slice(start, end);
    if (checkJson) {
      for (_position = 0, _length = _result.length; _position < _length; _position += 1) {
        _character = _result.charCodeAt(_position);
        if (!(_character === 9 || 32 <= _character && _character <= 1114111)) {
          throwError(state, "expected valid JSON character");
        }
      }
    } else if (PATTERN_NON_PRINTABLE.test(_result)) {
      throwError(state, "the stream contains non-printable characters");
    }
    state.result += _result;
  }
}
function mergeMappings(state, destination, source, overridableKeys) {
  var sourceKeys, key, index, quantity;
  if (!common.isObject(source)) {
    throwError(state, "cannot merge mappings; the provided source object is unacceptable");
  }
  sourceKeys = Object.keys(source);
  for (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {
    key = sourceKeys[index];
    if (!_hasOwnProperty$1.call(destination, key)) {
      destination[key] = source[key];
      overridableKeys[key] = true;
    }
  }
}
function storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, startLine, startLineStart, startPos) {
  var index, quantity;
  if (Array.isArray(keyNode)) {
    keyNode = Array.prototype.slice.call(keyNode);
    for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {
      if (Array.isArray(keyNode[index])) {
        throwError(state, "nested arrays are not supported inside keys");
      }
      if (typeof keyNode === "object" && _class(keyNode[index]) === "[object Object]") {
        keyNode[index] = "[object Object]";
      }
    }
  }
  if (typeof keyNode === "object" && _class(keyNode) === "[object Object]") {
    keyNode = "[object Object]";
  }
  keyNode = String(keyNode);
  if (_result === null) {
    _result = {};
  }
  if (keyTag === "tag:yaml.org,2002:merge") {
    if (Array.isArray(valueNode)) {
      for (index = 0, quantity = valueNode.length; index < quantity; index += 1) {
        mergeMappings(state, _result, valueNode[index], overridableKeys);
      }
    } else {
      mergeMappings(state, _result, valueNode, overridableKeys);
    }
  } else {
    if (!state.json && !_hasOwnProperty$1.call(overridableKeys, keyNode) && _hasOwnProperty$1.call(_result, keyNode)) {
      state.line = startLine || state.line;
      state.lineStart = startLineStart || state.lineStart;
      state.position = startPos || state.position;
      throwError(state, "duplicated mapping key");
    }
    if (keyNode === "__proto__") {
      Object.defineProperty(_result, keyNode, {
        configurable: true,
        enumerable: true,
        writable: true,
        value: valueNode
      });
    } else {
      _result[keyNode] = valueNode;
    }
    delete overridableKeys[keyNode];
  }
  return _result;
}
function readLineBreak(state) {
  var ch;
  ch = state.input.charCodeAt(state.position);
  if (ch === 10) {
    state.position++;
  } else if (ch === 13) {
    state.position++;
    if (state.input.charCodeAt(state.position) === 10) {
      state.position++;
    }
  } else {
    throwError(state, "a line break is expected");
  }
  state.line += 1;
  state.lineStart = state.position;
  state.firstTabInLine = -1;
}
function skipSeparationSpace(state, allowComments, checkIndent) {
  var lineBreaks = 0, ch = state.input.charCodeAt(state.position);
  while (ch !== 0) {
    while (is_WHITE_SPACE(ch)) {
      if (ch === 9 && state.firstTabInLine === -1) {
        state.firstTabInLine = state.position;
      }
      ch = state.input.charCodeAt(++state.position);
    }
    if (allowComments && ch === 35) {
      do {
        ch = state.input.charCodeAt(++state.position);
      } while (ch !== 10 && ch !== 13 && ch !== 0);
    }
    if (is_EOL(ch)) {
      readLineBreak(state);
      ch = state.input.charCodeAt(state.position);
      lineBreaks++;
      state.lineIndent = 0;
      while (ch === 32) {
        state.lineIndent++;
        ch = state.input.charCodeAt(++state.position);
      }
    } else {
      break;
    }
  }
  if (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {
    throwWarning(state, "deficient indentation");
  }
  return lineBreaks;
}
function testDocumentSeparator(state) {
  var _position = state.position, ch;
  ch = state.input.charCodeAt(_position);
  if ((ch === 45 || ch === 46) && ch === state.input.charCodeAt(_position + 1) && ch === state.input.charCodeAt(_position + 2)) {
    _position += 3;
    ch = state.input.charCodeAt(_position);
    if (ch === 0 || is_WS_OR_EOL(ch)) {
      return true;
    }
  }
  return false;
}
function writeFoldedLines(state, count) {
  if (count === 1) {
    state.result += " ";
  } else if (count > 1) {
    state.result += common.repeat("\n", count - 1);
  }
}
function readPlainScalar(state, nodeIndent, withinFlowCollection) {
  var preceding, following, captureStart, captureEnd, hasPendingContent, _line, _lineStart, _lineIndent, _kind = state.kind, _result = state.result, ch;
  ch = state.input.charCodeAt(state.position);
  if (is_WS_OR_EOL(ch) || is_FLOW_INDICATOR(ch) || ch === 35 || ch === 38 || ch === 42 || ch === 33 || ch === 124 || ch === 62 || ch === 39 || ch === 34 || ch === 37 || ch === 64 || ch === 96) {
    return false;
  }
  if (ch === 63 || ch === 45) {
    following = state.input.charCodeAt(state.position + 1);
    if (is_WS_OR_EOL(following) || withinFlowCollection && is_FLOW_INDICATOR(following)) {
      return false;
    }
  }
  state.kind = "scalar";
  state.result = "";
  captureStart = captureEnd = state.position;
  hasPendingContent = false;
  while (ch !== 0) {
    if (ch === 58) {
      following = state.input.charCodeAt(state.position + 1);
      if (is_WS_OR_EOL(following) || withinFlowCollection && is_FLOW_INDICATOR(following)) {
        break;
      }
    } else if (ch === 35) {
      preceding = state.input.charCodeAt(state.position - 1);
      if (is_WS_OR_EOL(preceding)) {
        break;
      }
    } else if (state.position === state.lineStart && testDocumentSeparator(state) || withinFlowCollection && is_FLOW_INDICATOR(ch)) {
      break;
    } else if (is_EOL(ch)) {
      _line = state.line;
      _lineStart = state.lineStart;
      _lineIndent = state.lineIndent;
      skipSeparationSpace(state, false, -1);
      if (state.lineIndent >= nodeIndent) {
        hasPendingContent = true;
        ch = state.input.charCodeAt(state.position);
        continue;
      } else {
        state.position = captureEnd;
        state.line = _line;
        state.lineStart = _lineStart;
        state.lineIndent = _lineIndent;
        break;
      }
    }
    if (hasPendingContent) {
      captureSegment(state, captureStart, captureEnd, false);
      writeFoldedLines(state, state.line - _line);
      captureStart = captureEnd = state.position;
      hasPendingContent = false;
    }
    if (!is_WHITE_SPACE(ch)) {
      captureEnd = state.position + 1;
    }
    ch = state.input.charCodeAt(++state.position);
  }
  captureSegment(state, captureStart, captureEnd, false);
  if (state.result) {
    return true;
  }
  state.kind = _kind;
  state.result = _result;
  return false;
}
function readSingleQuotedScalar(state, nodeIndent) {
  var ch, captureStart, captureEnd;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 39) {
    return false;
  }
  state.kind = "scalar";
  state.result = "";
  state.position++;
  captureStart = captureEnd = state.position;
  while ((ch = state.input.charCodeAt(state.position)) !== 0) {
    if (ch === 39) {
      captureSegment(state, captureStart, state.position, true);
      ch = state.input.charCodeAt(++state.position);
      if (ch === 39) {
        captureStart = state.position;
        state.position++;
        captureEnd = state.position;
      } else {
        return true;
      }
    } else if (is_EOL(ch)) {
      captureSegment(state, captureStart, captureEnd, true);
      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));
      captureStart = captureEnd = state.position;
    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {
      throwError(state, "unexpected end of the document within a single quoted scalar");
    } else {
      state.position++;
      captureEnd = state.position;
    }
  }
  throwError(state, "unexpected end of the stream within a single quoted scalar");
}
function readDoubleQuotedScalar(state, nodeIndent) {
  var captureStart, captureEnd, hexLength, hexResult, tmp, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 34) {
    return false;
  }
  state.kind = "scalar";
  state.result = "";
  state.position++;
  captureStart = captureEnd = state.position;
  while ((ch = state.input.charCodeAt(state.position)) !== 0) {
    if (ch === 34) {
      captureSegment(state, captureStart, state.position, true);
      state.position++;
      return true;
    } else if (ch === 92) {
      captureSegment(state, captureStart, state.position, true);
      ch = state.input.charCodeAt(++state.position);
      if (is_EOL(ch)) {
        skipSeparationSpace(state, false, nodeIndent);
      } else if (ch < 256 && simpleEscapeCheck[ch]) {
        state.result += simpleEscapeMap[ch];
        state.position++;
      } else if ((tmp = escapedHexLen(ch)) > 0) {
        hexLength = tmp;
        hexResult = 0;
        for (; hexLength > 0; hexLength--) {
          ch = state.input.charCodeAt(++state.position);
          if ((tmp = fromHexCode(ch)) >= 0) {
            hexResult = (hexResult << 4) + tmp;
          } else {
            throwError(state, "expected hexadecimal character");
          }
        }
        state.result += charFromCodepoint(hexResult);
        state.position++;
      } else {
        throwError(state, "unknown escape sequence");
      }
      captureStart = captureEnd = state.position;
    } else if (is_EOL(ch)) {
      captureSegment(state, captureStart, captureEnd, true);
      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));
      captureStart = captureEnd = state.position;
    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {
      throwError(state, "unexpected end of the document within a double quoted scalar");
    } else {
      state.position++;
      captureEnd = state.position;
    }
  }
  throwError(state, "unexpected end of the stream within a double quoted scalar");
}
function readFlowCollection(state, nodeIndent) {
  var readNext = true, _line, _lineStart, _pos, _tag = state.tag, _result, _anchor = state.anchor, following, terminator, isPair, isExplicitPair, isMapping, overridableKeys = /* @__PURE__ */ Object.create(null), keyNode, keyTag, valueNode, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch === 91) {
    terminator = 93;
    isMapping = false;
    _result = [];
  } else if (ch === 123) {
    terminator = 125;
    isMapping = true;
    _result = {};
  } else {
    return false;
  }
  if (state.anchor !== null) {
    state.anchorMap[state.anchor] = _result;
  }
  ch = state.input.charCodeAt(++state.position);
  while (ch !== 0) {
    skipSeparationSpace(state, true, nodeIndent);
    ch = state.input.charCodeAt(state.position);
    if (ch === terminator) {
      state.position++;
      state.tag = _tag;
      state.anchor = _anchor;
      state.kind = isMapping ? "mapping" : "sequence";
      state.result = _result;
      return true;
    } else if (!readNext) {
      throwError(state, "missed comma between flow collection entries");
    } else if (ch === 44) {
      throwError(state, "expected the node content, but found ','");
    }
    keyTag = keyNode = valueNode = null;
    isPair = isExplicitPair = false;
    if (ch === 63) {
      following = state.input.charCodeAt(state.position + 1);
      if (is_WS_OR_EOL(following)) {
        isPair = isExplicitPair = true;
        state.position++;
        skipSeparationSpace(state, true, nodeIndent);
      }
    }
    _line = state.line;
    _lineStart = state.lineStart;
    _pos = state.position;
    composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);
    keyTag = state.tag;
    keyNode = state.result;
    skipSeparationSpace(state, true, nodeIndent);
    ch = state.input.charCodeAt(state.position);
    if ((isExplicitPair || state.line === _line) && ch === 58) {
      isPair = true;
      ch = state.input.charCodeAt(++state.position);
      skipSeparationSpace(state, true, nodeIndent);
      composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);
      valueNode = state.result;
    }
    if (isMapping) {
      storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos);
    } else if (isPair) {
      _result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos));
    } else {
      _result.push(keyNode);
    }
    skipSeparationSpace(state, true, nodeIndent);
    ch = state.input.charCodeAt(state.position);
    if (ch === 44) {
      readNext = true;
      ch = state.input.charCodeAt(++state.position);
    } else {
      readNext = false;
    }
  }
  throwError(state, "unexpected end of the stream within a flow collection");
}
function readBlockScalar(state, nodeIndent) {
  var captureStart, folding, chomping = CHOMPING_CLIP, didReadContent = false, detectedIndent = false, textIndent = nodeIndent, emptyLines = 0, atMoreIndented = false, tmp, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch === 124) {
    folding = false;
  } else if (ch === 62) {
    folding = true;
  } else {
    return false;
  }
  state.kind = "scalar";
  state.result = "";
  while (ch !== 0) {
    ch = state.input.charCodeAt(++state.position);
    if (ch === 43 || ch === 45) {
      if (CHOMPING_CLIP === chomping) {
        chomping = ch === 43 ? CHOMPING_KEEP : CHOMPING_STRIP;
      } else {
        throwError(state, "repeat of a chomping mode identifier");
      }
    } else if ((tmp = fromDecimalCode(ch)) >= 0) {
      if (tmp === 0) {
        throwError(state, "bad explicit indentation width of a block scalar; it cannot be less than one");
      } else if (!detectedIndent) {
        textIndent = nodeIndent + tmp - 1;
        detectedIndent = true;
      } else {
        throwError(state, "repeat of an indentation width identifier");
      }
    } else {
      break;
    }
  }
  if (is_WHITE_SPACE(ch)) {
    do {
      ch = state.input.charCodeAt(++state.position);
    } while (is_WHITE_SPACE(ch));
    if (ch === 35) {
      do {
        ch = state.input.charCodeAt(++state.position);
      } while (!is_EOL(ch) && ch !== 0);
    }
  }
  while (ch !== 0) {
    readLineBreak(state);
    state.lineIndent = 0;
    ch = state.input.charCodeAt(state.position);
    while ((!detectedIndent || state.lineIndent < textIndent) && ch === 32) {
      state.lineIndent++;
      ch = state.input.charCodeAt(++state.position);
    }
    if (!detectedIndent && state.lineIndent > textIndent) {
      textIndent = state.lineIndent;
    }
    if (is_EOL(ch)) {
      emptyLines++;
      continue;
    }
    if (state.lineIndent < textIndent) {
      if (chomping === CHOMPING_KEEP) {
        state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
      } else if (chomping === CHOMPING_CLIP) {
        if (didReadContent) {
          state.result += "\n";
        }
      }
      break;
    }
    if (folding) {
      if (is_WHITE_SPACE(ch)) {
        atMoreIndented = true;
        state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
      } else if (atMoreIndented) {
        atMoreIndented = false;
        state.result += common.repeat("\n", emptyLines + 1);
      } else if (emptyLines === 0) {
        if (didReadContent) {
          state.result += " ";
        }
      } else {
        state.result += common.repeat("\n", emptyLines);
      }
    } else {
      state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
    }
    didReadContent = true;
    detectedIndent = true;
    emptyLines = 0;
    captureStart = state.position;
    while (!is_EOL(ch) && ch !== 0) {
      ch = state.input.charCodeAt(++state.position);
    }
    captureSegment(state, captureStart, state.position, false);
  }
  return true;
}
function readBlockSequence(state, nodeIndent) {
  var _line, _tag = state.tag, _anchor = state.anchor, _result = [], following, detected = false, ch;
  if (state.firstTabInLine !== -1) return false;
  if (state.anchor !== null) {
    state.anchorMap[state.anchor] = _result;
  }
  ch = state.input.charCodeAt(state.position);
  while (ch !== 0) {
    if (state.firstTabInLine !== -1) {
      state.position = state.firstTabInLine;
      throwError(state, "tab characters must not be used in indentation");
    }
    if (ch !== 45) {
      break;
    }
    following = state.input.charCodeAt(state.position + 1);
    if (!is_WS_OR_EOL(following)) {
      break;
    }
    detected = true;
    state.position++;
    if (skipSeparationSpace(state, true, -1)) {
      if (state.lineIndent <= nodeIndent) {
        _result.push(null);
        ch = state.input.charCodeAt(state.position);
        continue;
      }
    }
    _line = state.line;
    composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);
    _result.push(state.result);
    skipSeparationSpace(state, true, -1);
    ch = state.input.charCodeAt(state.position);
    if ((state.line === _line || state.lineIndent > nodeIndent) && ch !== 0) {
      throwError(state, "bad indentation of a sequence entry");
    } else if (state.lineIndent < nodeIndent) {
      break;
    }
  }
  if (detected) {
    state.tag = _tag;
    state.anchor = _anchor;
    state.kind = "sequence";
    state.result = _result;
    return true;
  }
  return false;
}
function readBlockMapping(state, nodeIndent, flowIndent) {
  var following, allowCompact, _line, _keyLine, _keyLineStart, _keyPos, _tag = state.tag, _anchor = state.anchor, _result = {}, overridableKeys = /* @__PURE__ */ Object.create(null), keyTag = null, keyNode = null, valueNode = null, atExplicitKey = false, detected = false, ch;
  if (state.firstTabInLine !== -1) return false;
  if (state.anchor !== null) {
    state.anchorMap[state.anchor] = _result;
  }
  ch = state.input.charCodeAt(state.position);
  while (ch !== 0) {
    if (!atExplicitKey && state.firstTabInLine !== -1) {
      state.position = state.firstTabInLine;
      throwError(state, "tab characters must not be used in indentation");
    }
    following = state.input.charCodeAt(state.position + 1);
    _line = state.line;
    if ((ch === 63 || ch === 58) && is_WS_OR_EOL(following)) {
      if (ch === 63) {
        if (atExplicitKey) {
          storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);
          keyTag = keyNode = valueNode = null;
        }
        detected = true;
        atExplicitKey = true;
        allowCompact = true;
      } else if (atExplicitKey) {
        atExplicitKey = false;
        allowCompact = true;
      } else {
        throwError(state, "incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line");
      }
      state.position += 1;
      ch = following;
    } else {
      _keyLine = state.line;
      _keyLineStart = state.lineStart;
      _keyPos = state.position;
      if (!composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {
        break;
      }
      if (state.line === _line) {
        ch = state.input.charCodeAt(state.position);
        while (is_WHITE_SPACE(ch)) {
          ch = state.input.charCodeAt(++state.position);
        }
        if (ch === 58) {
          ch = state.input.charCodeAt(++state.position);
          if (!is_WS_OR_EOL(ch)) {
            throwError(state, "a whitespace character is expected after the key-value separator within a block mapping");
          }
          if (atExplicitKey) {
            storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);
            keyTag = keyNode = valueNode = null;
          }
          detected = true;
          atExplicitKey = false;
          allowCompact = false;
          keyTag = state.tag;
          keyNode = state.result;
        } else if (detected) {
          throwError(state, "can not read an implicit mapping pair; a colon is missed");
        } else {
          state.tag = _tag;
          state.anchor = _anchor;
          return true;
        }
      } else if (detected) {
        throwError(state, "can not read a block mapping entry; a multiline key may not be an implicit key");
      } else {
        state.tag = _tag;
        state.anchor = _anchor;
        return true;
      }
    }
    if (state.line === _line || state.lineIndent > nodeIndent) {
      if (atExplicitKey) {
        _keyLine = state.line;
        _keyLineStart = state.lineStart;
        _keyPos = state.position;
      }
      if (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {
        if (atExplicitKey) {
          keyNode = state.result;
        } else {
          valueNode = state.result;
        }
      }
      if (!atExplicitKey) {
        storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _keyLine, _keyLineStart, _keyPos);
        keyTag = keyNode = valueNode = null;
      }
      skipSeparationSpace(state, true, -1);
      ch = state.input.charCodeAt(state.position);
    }
    if ((state.line === _line || state.lineIndent > nodeIndent) && ch !== 0) {
      throwError(state, "bad indentation of a mapping entry");
    } else if (state.lineIndent < nodeIndent) {
      break;
    }
  }
  if (atExplicitKey) {
    storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);
  }
  if (detected) {
    state.tag = _tag;
    state.anchor = _anchor;
    state.kind = "mapping";
    state.result = _result;
  }
  return detected;
}
function readTagProperty(state) {
  var _position, isVerbatim = false, isNamed = false, tagHandle, tagName, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 33) return false;
  if (state.tag !== null) {
    throwError(state, "duplication of a tag property");
  }
  ch = state.input.charCodeAt(++state.position);
  if (ch === 60) {
    isVerbatim = true;
    ch = state.input.charCodeAt(++state.position);
  } else if (ch === 33) {
    isNamed = true;
    tagHandle = "!!";
    ch = state.input.charCodeAt(++state.position);
  } else {
    tagHandle = "!";
  }
  _position = state.position;
  if (isVerbatim) {
    do {
      ch = state.input.charCodeAt(++state.position);
    } while (ch !== 0 && ch !== 62);
    if (state.position < state.length) {
      tagName = state.input.slice(_position, state.position);
      ch = state.input.charCodeAt(++state.position);
    } else {
      throwError(state, "unexpected end of the stream within a verbatim tag");
    }
  } else {
    while (ch !== 0 && !is_WS_OR_EOL(ch)) {
      if (ch === 33) {
        if (!isNamed) {
          tagHandle = state.input.slice(_position - 1, state.position + 1);
          if (!PATTERN_TAG_HANDLE.test(tagHandle)) {
            throwError(state, "named tag handle cannot contain such characters");
          }
          isNamed = true;
          _position = state.position + 1;
        } else {
          throwError(state, "tag suffix cannot contain exclamation marks");
        }
      }
      ch = state.input.charCodeAt(++state.position);
    }
    tagName = state.input.slice(_position, state.position);
    if (PATTERN_FLOW_INDICATORS.test(tagName)) {
      throwError(state, "tag suffix cannot contain flow indicator characters");
    }
  }
  if (tagName && !PATTERN_TAG_URI.test(tagName)) {
    throwError(state, "tag name cannot contain such characters: " + tagName);
  }
  try {
    tagName = decodeURIComponent(tagName);
  } catch (err) {
    throwError(state, "tag name is malformed: " + tagName);
  }
  if (isVerbatim) {
    state.tag = tagName;
  } else if (_hasOwnProperty$1.call(state.tagMap, tagHandle)) {
    state.tag = state.tagMap[tagHandle] + tagName;
  } else if (tagHandle === "!") {
    state.tag = "!" + tagName;
  } else if (tagHandle === "!!") {
    state.tag = "tag:yaml.org,2002:" + tagName;
  } else {
    throwError(state, 'undeclared tag handle "' + tagHandle + '"');
  }
  return true;
}
function readAnchorProperty(state) {
  var _position, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 38) return false;
  if (state.anchor !== null) {
    throwError(state, "duplication of an anchor property");
  }
  ch = state.input.charCodeAt(++state.position);
  _position = state.position;
  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {
    ch = state.input.charCodeAt(++state.position);
  }
  if (state.position === _position) {
    throwError(state, "name of an anchor node must contain at least one character");
  }
  state.anchor = state.input.slice(_position, state.position);
  return true;
}
function readAlias(state) {
  var _position, alias, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 42) return false;
  ch = state.input.charCodeAt(++state.position);
  _position = state.position;
  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {
    ch = state.input.charCodeAt(++state.position);
  }
  if (state.position === _position) {
    throwError(state, "name of an alias node must contain at least one character");
  }
  alias = state.input.slice(_position, state.position);
  if (!_hasOwnProperty$1.call(state.anchorMap, alias)) {
    throwError(state, 'unidentified alias "' + alias + '"');
  }
  state.result = state.anchorMap[alias];
  skipSeparationSpace(state, true, -1);
  return true;
}
function composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {
  var allowBlockStyles, allowBlockScalars, allowBlockCollections, indentStatus = 1, atNewLine = false, hasContent = false, typeIndex, typeQuantity, typeList, type2, flowIndent, blockIndent;
  if (state.listener !== null) {
    state.listener("open", state);
  }
  state.tag = null;
  state.anchor = null;
  state.kind = null;
  state.result = null;
  allowBlockStyles = allowBlockScalars = allowBlockCollections = CONTEXT_BLOCK_OUT === nodeContext || CONTEXT_BLOCK_IN === nodeContext;
  if (allowToSeek) {
    if (skipSeparationSpace(state, true, -1)) {
      atNewLine = true;
      if (state.lineIndent > parentIndent) {
        indentStatus = 1;
      } else if (state.lineIndent === parentIndent) {
        indentStatus = 0;
      } else if (state.lineIndent < parentIndent) {
        indentStatus = -1;
      }
    }
  }
  if (indentStatus === 1) {
    while (readTagProperty(state) || readAnchorProperty(state)) {
      if (skipSeparationSpace(state, true, -1)) {
        atNewLine = true;
        allowBlockCollections = allowBlockStyles;
        if (state.lineIndent > parentIndent) {
          indentStatus = 1;
        } else if (state.lineIndent === parentIndent) {
          indentStatus = 0;
        } else if (state.lineIndent < parentIndent) {
          indentStatus = -1;
        }
      } else {
        allowBlockCollections = false;
      }
    }
  }
  if (allowBlockCollections) {
    allowBlockCollections = atNewLine || allowCompact;
  }
  if (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {
    if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {
      flowIndent = parentIndent;
    } else {
      flowIndent = parentIndent + 1;
    }
    blockIndent = state.position - state.lineStart;
    if (indentStatus === 1) {
      if (allowBlockCollections && (readBlockSequence(state, blockIndent) || readBlockMapping(state, blockIndent, flowIndent)) || readFlowCollection(state, flowIndent)) {
        hasContent = true;
      } else {
        if (allowBlockScalars && readBlockScalar(state, flowIndent) || readSingleQuotedScalar(state, flowIndent) || readDoubleQuotedScalar(state, flowIndent)) {
          hasContent = true;
        } else if (readAlias(state)) {
          hasContent = true;
          if (state.tag !== null || state.anchor !== null) {
            throwError(state, "alias node should not have any properties");
          }
        } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {
          hasContent = true;
          if (state.tag === null) {
            state.tag = "?";
          }
        }
        if (state.anchor !== null) {
          state.anchorMap[state.anchor] = state.result;
        }
      }
    } else if (indentStatus === 0) {
      hasContent = allowBlockCollections && readBlockSequence(state, blockIndent);
    }
  }
  if (state.tag === null) {
    if (state.anchor !== null) {
      state.anchorMap[state.anchor] = state.result;
    }
  } else if (state.tag === "?") {
    if (state.result !== null && state.kind !== "scalar") {
      throwError(state, 'unacceptable node kind for !<?> tag; it should be "scalar", not "' + state.kind + '"');
    }
    for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {
      type2 = state.implicitTypes[typeIndex];
      if (type2.resolve(state.result)) {
        state.result = type2.construct(state.result);
        state.tag = type2.tag;
        if (state.anchor !== null) {
          state.anchorMap[state.anchor] = state.result;
        }
        break;
      }
    }
  } else if (state.tag !== "!") {
    if (_hasOwnProperty$1.call(state.typeMap[state.kind || "fallback"], state.tag)) {
      type2 = state.typeMap[state.kind || "fallback"][state.tag];
    } else {
      type2 = null;
      typeList = state.typeMap.multi[state.kind || "fallback"];
      for (typeIndex = 0, typeQuantity = typeList.length; typeIndex < typeQuantity; typeIndex += 1) {
        if (state.tag.slice(0, typeList[typeIndex].tag.length) === typeList[typeIndex].tag) {
          type2 = typeList[typeIndex];
          break;
        }
      }
    }
    if (!type2) {
      throwError(state, "unknown tag !<" + state.tag + ">");
    }
    if (state.result !== null && type2.kind !== state.kind) {
      throwError(state, "unacceptable node kind for !<" + state.tag + '> tag; it should be "' + type2.kind + '", not "' + state.kind + '"');
    }
    if (!type2.resolve(state.result, state.tag)) {
      throwError(state, "cannot resolve a node with !<" + state.tag + "> explicit tag");
    } else {
      state.result = type2.construct(state.result, state.tag);
      if (state.anchor !== null) {
        state.anchorMap[state.anchor] = state.result;
      }
    }
  }
  if (state.listener !== null) {
    state.listener("close", state);
  }
  return state.tag !== null || state.anchor !== null || hasContent;
}
function readDocument(state) {
  var documentStart = state.position, _position, directiveName, directiveArgs, hasDirectives = false, ch;
  state.version = null;
  state.checkLineBreaks = state.legacy;
  state.tagMap = /* @__PURE__ */ Object.create(null);
  state.anchorMap = /* @__PURE__ */ Object.create(null);
  while ((ch = state.input.charCodeAt(state.position)) !== 0) {
    skipSeparationSpace(state, true, -1);
    ch = state.input.charCodeAt(state.position);
    if (state.lineIndent > 0 || ch !== 37) {
      break;
    }
    hasDirectives = true;
    ch = state.input.charCodeAt(++state.position);
    _position = state.position;
    while (ch !== 0 && !is_WS_OR_EOL(ch)) {
      ch = state.input.charCodeAt(++state.position);
    }
    directiveName = state.input.slice(_position, state.position);
    directiveArgs = [];
    if (directiveName.length < 1) {
      throwError(state, "directive name must not be less than one character in length");
    }
    while (ch !== 0) {
      while (is_WHITE_SPACE(ch)) {
        ch = state.input.charCodeAt(++state.position);
      }
      if (ch === 35) {
        do {
          ch = state.input.charCodeAt(++state.position);
        } while (ch !== 0 && !is_EOL(ch));
        break;
      }
      if (is_EOL(ch)) break;
      _position = state.position;
      while (ch !== 0 && !is_WS_OR_EOL(ch)) {
        ch = state.input.charCodeAt(++state.position);
      }
      directiveArgs.push(state.input.slice(_position, state.position));
    }
    if (ch !== 0) readLineBreak(state);
    if (_hasOwnProperty$1.call(directiveHandlers, directiveName)) {
      directiveHandlers[directiveName](state, directiveName, directiveArgs);
    } else {
      throwWarning(state, 'unknown document directive "' + directiveName + '"');
    }
  }
  skipSeparationSpace(state, true, -1);
  if (state.lineIndent === 0 && state.input.charCodeAt(state.position) === 45 && state.input.charCodeAt(state.position + 1) === 45 && state.input.charCodeAt(state.position + 2) === 45) {
    state.position += 3;
    skipSeparationSpace(state, true, -1);
  } else if (hasDirectives) {
    throwError(state, "directives end mark is expected");
  }
  composeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);
  skipSeparationSpace(state, true, -1);
  if (state.checkLineBreaks && PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {
    throwWarning(state, "non-ASCII line breaks are interpreted as content");
  }
  state.documents.push(state.result);
  if (state.position === state.lineStart && testDocumentSeparator(state)) {
    if (state.input.charCodeAt(state.position) === 46) {
      state.position += 3;
      skipSeparationSpace(state, true, -1);
    }
    return;
  }
  if (state.position < state.length - 1) {
    throwError(state, "end of the stream or a document separator is expected");
  } else {
    return;
  }
}
function loadDocuments(input, options) {
  input = String(input);
  options = options || {};
  if (input.length !== 0) {
    if (input.charCodeAt(input.length - 1) !== 10 && input.charCodeAt(input.length - 1) !== 13) {
      input += "\n";
    }
    if (input.charCodeAt(0) === 65279) {
      input = input.slice(1);
    }
  }
  var state = new State$1(input, options);
  var nullpos = input.indexOf("\0");
  if (nullpos !== -1) {
    state.position = nullpos;
    throwError(state, "null byte is not allowed in input");
  }
  state.input += "\0";
  while (state.input.charCodeAt(state.position) === 32) {
    state.lineIndent += 1;
    state.position += 1;
  }
  while (state.position < state.length - 1) {
    readDocument(state);
  }
  return state.documents;
}
function loadAll$1(input, iterator, options) {
  if (iterator !== null && typeof iterator === "object" && typeof options === "undefined") {
    options = iterator;
    iterator = null;
  }
  var documents = loadDocuments(input, options);
  if (typeof iterator !== "function") {
    return documents;
  }
  for (var index = 0, length = documents.length; index < length; index += 1) {
    iterator(documents[index]);
  }
}
function load$1(input, options) {
  var documents = loadDocuments(input, options);
  if (documents.length === 0) {
    return void 0;
  } else if (documents.length === 1) {
    return documents[0];
  }
  throw new exception("expected a single document in the stream, but found more");
}
function compileStyleMap(schema2, map2) {
  var result, keys, index, length, tag, style, type2;
  if (map2 === null) return {};
  result = {};
  keys = Object.keys(map2);
  for (index = 0, length = keys.length; index < length; index += 1) {
    tag = keys[index];
    style = String(map2[tag]);
    if (tag.slice(0, 2) === "!!") {
      tag = "tag:yaml.org,2002:" + tag.slice(2);
    }
    type2 = schema2.compiledTypeMap["fallback"][tag];
    if (type2 && _hasOwnProperty.call(type2.styleAliases, style)) {
      style = type2.styleAliases[style];
    }
    result[tag] = style;
  }
  return result;
}
function encodeHex(character) {
  var string, handle, length;
  string = character.toString(16).toUpperCase();
  if (character <= 255) {
    handle = "x";
    length = 2;
  } else if (character <= 65535) {
    handle = "u";
    length = 4;
  } else if (character <= 4294967295) {
    handle = "U";
    length = 8;
  } else {
    throw new exception("code point within a string may not be greater than 0xFFFFFFFF");
  }
  return "\\" + handle + common.repeat("0", length - string.length) + string;
}
function State(options) {
  this.schema = options["schema"] || _default;
  this.indent = Math.max(1, options["indent"] || 2);
  this.noArrayIndent = options["noArrayIndent"] || false;
  this.skipInvalid = options["skipInvalid"] || false;
  this.flowLevel = common.isNothing(options["flowLevel"]) ? -1 : options["flowLevel"];
  this.styleMap = compileStyleMap(this.schema, options["styles"] || null);
  this.sortKeys = options["sortKeys"] || false;
  this.lineWidth = options["lineWidth"] || 80;
  this.noRefs = options["noRefs"] || false;
  this.noCompatMode = options["noCompatMode"] || false;
  this.condenseFlow = options["condenseFlow"] || false;
  this.quotingType = options["quotingType"] === '"' ? QUOTING_TYPE_DOUBLE : QUOTING_TYPE_SINGLE;
  this.forceQuotes = options["forceQuotes"] || false;
  this.replacer = typeof options["replacer"] === "function" ? options["replacer"] : null;
  this.implicitTypes = this.schema.compiledImplicit;
  this.explicitTypes = this.schema.compiledExplicit;
  this.tag = null;
  this.result = "";
  this.duplicates = [];
  this.usedDuplicates = null;
}
function indentString(string, spaces) {
  var ind = common.repeat(" ", spaces), position = 0, next = -1, result = "", line, length = string.length;
  while (position < length) {
    next = string.indexOf("\n", position);
    if (next === -1) {
      line = string.slice(position);
      position = length;
    } else {
      line = string.slice(position, next + 1);
      position = next + 1;
    }
    if (line.length && line !== "\n") result += ind;
    result += line;
  }
  return result;
}
function generateNextLine(state, level) {
  return "\n" + common.repeat(" ", state.indent * level);
}
function testImplicitResolving(state, str2) {
  var index, length, type2;
  for (index = 0, length = state.implicitTypes.length; index < length; index += 1) {
    type2 = state.implicitTypes[index];
    if (type2.resolve(str2)) {
      return true;
    }
  }
  return false;
}
function isWhitespace(c) {
  return c === CHAR_SPACE || c === CHAR_TAB;
}
function isPrintable(c) {
  return 32 <= c && c <= 126 || 161 <= c && c <= 55295 && c !== 8232 && c !== 8233 || 57344 <= c && c <= 65533 && c !== CHAR_BOM || 65536 <= c && c <= 1114111;
}
function isNsCharOrWhitespace(c) {
  return isPrintable(c) && c !== CHAR_BOM && c !== CHAR_CARRIAGE_RETURN && c !== CHAR_LINE_FEED;
}
function isPlainSafe(c, prev, inblock) {
  var cIsNsCharOrWhitespace = isNsCharOrWhitespace(c);
  var cIsNsChar = cIsNsCharOrWhitespace && !isWhitespace(c);
  return (
    // ns-plain-safe
    (inblock ? (
      // c = flow-in
      cIsNsCharOrWhitespace
    ) : cIsNsCharOrWhitespace && c !== CHAR_COMMA && c !== CHAR_LEFT_SQUARE_BRACKET && c !== CHAR_RIGHT_SQUARE_BRACKET && c !== CHAR_LEFT_CURLY_BRACKET && c !== CHAR_RIGHT_CURLY_BRACKET) && c !== CHAR_SHARP && !(prev === CHAR_COLON && !cIsNsChar) || isNsCharOrWhitespace(prev) && !isWhitespace(prev) && c === CHAR_SHARP || prev === CHAR_COLON && cIsNsChar
  );
}
function isPlainSafeFirst(c) {
  return isPrintable(c) && c !== CHAR_BOM && !isWhitespace(c) && c !== CHAR_MINUS && c !== CHAR_QUESTION && c !== CHAR_COLON && c !== CHAR_COMMA && c !== CHAR_LEFT_SQUARE_BRACKET && c !== CHAR_RIGHT_SQUARE_BRACKET && c !== CHAR_LEFT_CURLY_BRACKET && c !== CHAR_RIGHT_CURLY_BRACKET && c !== CHAR_SHARP && c !== CHAR_AMPERSAND && c !== CHAR_ASTERISK && c !== CHAR_EXCLAMATION && c !== CHAR_VERTICAL_LINE && c !== CHAR_EQUALS && c !== CHAR_GREATER_THAN && c !== CHAR_SINGLE_QUOTE && c !== CHAR_DOUBLE_QUOTE && c !== CHAR_PERCENT && c !== CHAR_COMMERCIAL_AT && c !== CHAR_GRAVE_ACCENT;
}
function isPlainSafeLast(c) {
  return !isWhitespace(c) && c !== CHAR_COLON;
}
function codePointAt(string, pos) {
  var first = string.charCodeAt(pos), second;
  if (first >= 55296 && first <= 56319 && pos + 1 < string.length) {
    second = string.charCodeAt(pos + 1);
    if (second >= 56320 && second <= 57343) {
      return (first - 55296) * 1024 + second - 56320 + 65536;
    }
  }
  return first;
}
function needIndentIndicator(string) {
  var leadingSpaceRe = /^\n* /;
  return leadingSpaceRe.test(string);
}
function chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth, testAmbiguousType, quotingType, forceQuotes, inblock) {
  var i;
  var char = 0;
  var prevChar = null;
  var hasLineBreak = false;
  var hasFoldableLine = false;
  var shouldTrackWidth = lineWidth !== -1;
  var previousLineBreak = -1;
  var plain = isPlainSafeFirst(codePointAt(string, 0)) && isPlainSafeLast(codePointAt(string, string.length - 1));
  if (singleLineOnly || forceQuotes) {
    for (i = 0; i < string.length; char >= 65536 ? i += 2 : i++) {
      char = codePointAt(string, i);
      if (!isPrintable(char)) {
        return STYLE_DOUBLE;
      }
      plain = plain && isPlainSafe(char, prevChar, inblock);
      prevChar = char;
    }
  } else {
    for (i = 0; i < string.length; char >= 65536 ? i += 2 : i++) {
      char = codePointAt(string, i);
      if (char === CHAR_LINE_FEED) {
        hasLineBreak = true;
        if (shouldTrackWidth) {
          hasFoldableLine = hasFoldableLine || // Foldable line = too long, and not more-indented.
          i - previousLineBreak - 1 > lineWidth && string[previousLineBreak + 1] !== " ";
          previousLineBreak = i;
        }
      } else if (!isPrintable(char)) {
        return STYLE_DOUBLE;
      }
      plain = plain && isPlainSafe(char, prevChar, inblock);
      prevChar = char;
    }
    hasFoldableLine = hasFoldableLine || shouldTrackWidth && (i - previousLineBreak - 1 > lineWidth && string[previousLineBreak + 1] !== " ");
  }
  if (!hasLineBreak && !hasFoldableLine) {
    if (plain && !forceQuotes && !testAmbiguousType(string)) {
      return STYLE_PLAIN;
    }
    return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;
  }
  if (indentPerLevel > 9 && needIndentIndicator(string)) {
    return STYLE_DOUBLE;
  }
  if (!forceQuotes) {
    return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;
  }
  return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;
}
function writeScalar(state, string, level, iskey, inblock) {
  state.dump = function() {
    if (string.length === 0) {
      return state.quotingType === QUOTING_TYPE_DOUBLE ? '""' : "''";
    }
    if (!state.noCompatMode) {
      if (DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1 || DEPRECATED_BASE60_SYNTAX.test(string)) {
        return state.quotingType === QUOTING_TYPE_DOUBLE ? '"' + string + '"' : "'" + string + "'";
      }
    }
    var indent = state.indent * Math.max(1, level);
    var lineWidth = state.lineWidth === -1 ? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);
    var singleLineOnly = iskey || state.flowLevel > -1 && level >= state.flowLevel;
    function testAmbiguity(string2) {
      return testImplicitResolving(state, string2);
    }
    switch (chooseScalarStyle(
      string,
      singleLineOnly,
      state.indent,
      lineWidth,
      testAmbiguity,
      state.quotingType,
      state.forceQuotes && !iskey,
      inblock
    )) {
      case STYLE_PLAIN:
        return string;
      case STYLE_SINGLE:
        return "'" + string.replace(/'/g, "''") + "'";
      case STYLE_LITERAL:
        return "|" + blockHeader(string, state.indent) + dropEndingNewline(indentString(string, indent));
      case STYLE_FOLDED:
        return ">" + blockHeader(string, state.indent) + dropEndingNewline(indentString(foldString(string, lineWidth), indent));
      case STYLE_DOUBLE:
        return '"' + escapeString(string) + '"';
      default:
        throw new exception("impossible error: invalid scalar style");
    }
  }();
}
function blockHeader(string, indentPerLevel) {
  var indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : "";
  var clip = string[string.length - 1] === "\n";
  var keep = clip && (string[string.length - 2] === "\n" || string === "\n");
  var chomp = keep ? "+" : clip ? "" : "-";
  return indentIndicator + chomp + "\n";
}
function dropEndingNewline(string) {
  return string[string.length - 1] === "\n" ? string.slice(0, -1) : string;
}
function foldString(string, width) {
  var lineRe = /(\n+)([^\n]*)/g;
  var result = function() {
    var nextLF = string.indexOf("\n");
    nextLF = nextLF !== -1 ? nextLF : string.length;
    lineRe.lastIndex = nextLF;
    return foldLine(string.slice(0, nextLF), width);
  }();
  var prevMoreIndented = string[0] === "\n" || string[0] === " ";
  var moreIndented;
  var match;
  while (match = lineRe.exec(string)) {
    var prefix = match[1], line = match[2];
    moreIndented = line[0] === " ";
    result += prefix + (!prevMoreIndented && !moreIndented && line !== "" ? "\n" : "") + foldLine(line, width);
    prevMoreIndented = moreIndented;
  }
  return result;
}
function foldLine(line, width) {
  if (line === "" || line[0] === " ") return line;
  var breakRe = / [^ ]/g;
  var match;
  var start = 0, end, curr = 0, next = 0;
  var result = "";
  while (match = breakRe.exec(line)) {
    next = match.index;
    if (next - start > width) {
      end = curr > start ? curr : next;
      result += "\n" + line.slice(start, end);
      start = end + 1;
    }
    curr = next;
  }
  result += "\n";
  if (line.length - start > width && curr > start) {
    result += line.slice(start, curr) + "\n" + line.slice(curr + 1);
  } else {
    result += line.slice(start);
  }
  return result.slice(1);
}
function escapeString(string) {
  var result = "";
  var char = 0;
  var escapeSeq;
  for (var i = 0; i < string.length; char >= 65536 ? i += 2 : i++) {
    char = codePointAt(string, i);
    escapeSeq = ESCAPE_SEQUENCES[char];
    if (!escapeSeq && isPrintable(char)) {
      result += string[i];
      if (char >= 65536) result += string[i + 1];
    } else {
      result += escapeSeq || encodeHex(char);
    }
  }
  return result;
}
function writeFlowSequence(state, level, object) {
  var _result = "", _tag = state.tag, index, length, value;
  for (index = 0, length = object.length; index < length; index += 1) {
    value = object[index];
    if (state.replacer) {
      value = state.replacer.call(object, String(index), value);
    }
    if (writeNode(state, level, value, false, false) || typeof value === "undefined" && writeNode(state, level, null, false, false)) {
      if (_result !== "") _result += "," + (!state.condenseFlow ? " " : "");
      _result += state.dump;
    }
  }
  state.tag = _tag;
  state.dump = "[" + _result + "]";
}
function writeBlockSequence(state, level, object, compact) {
  var _result = "", _tag = state.tag, index, length, value;
  for (index = 0, length = object.length; index < length; index += 1) {
    value = object[index];
    if (state.replacer) {
      value = state.replacer.call(object, String(index), value);
    }
    if (writeNode(state, level + 1, value, true, true, false, true) || typeof value === "undefined" && writeNode(state, level + 1, null, true, true, false, true)) {
      if (!compact || _result !== "") {
        _result += generateNextLine(state, level);
      }
      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
        _result += "-";
      } else {
        _result += "- ";
      }
      _result += state.dump;
    }
  }
  state.tag = _tag;
  state.dump = _result || "[]";
}
function writeFlowMapping(state, level, object) {
  var _result = "", _tag = state.tag, objectKeyList = Object.keys(object), index, length, objectKey, objectValue, pairBuffer;
  for (index = 0, length = objectKeyList.length; index < length; index += 1) {
    pairBuffer = "";
    if (_result !== "") pairBuffer += ", ";
    if (state.condenseFlow) pairBuffer += '"';
    objectKey = objectKeyList[index];
    objectValue = object[objectKey];
    if (state.replacer) {
      objectValue = state.replacer.call(object, objectKey, objectValue);
    }
    if (!writeNode(state, level, objectKey, false, false)) {
      continue;
    }
    if (state.dump.length > 1024) pairBuffer += "? ";
    pairBuffer += state.dump + (state.condenseFlow ? '"' : "") + ":" + (state.condenseFlow ? "" : " ");
    if (!writeNode(state, level, objectValue, false, false)) {
      continue;
    }
    pairBuffer += state.dump;
    _result += pairBuffer;
  }
  state.tag = _tag;
  state.dump = "{" + _result + "}";
}
function writeBlockMapping(state, level, object, compact) {
  var _result = "", _tag = state.tag, objectKeyList = Object.keys(object), index, length, objectKey, objectValue, explicitPair, pairBuffer;
  if (state.sortKeys === true) {
    objectKeyList.sort();
  } else if (typeof state.sortKeys === "function") {
    objectKeyList.sort(state.sortKeys);
  } else if (state.sortKeys) {
    throw new exception("sortKeys must be a boolean or a function");
  }
  for (index = 0, length = objectKeyList.length; index < length; index += 1) {
    pairBuffer = "";
    if (!compact || _result !== "") {
      pairBuffer += generateNextLine(state, level);
    }
    objectKey = objectKeyList[index];
    objectValue = object[objectKey];
    if (state.replacer) {
      objectValue = state.replacer.call(object, objectKey, objectValue);
    }
    if (!writeNode(state, level + 1, objectKey, true, true, true)) {
      continue;
    }
    explicitPair = state.tag !== null && state.tag !== "?" || state.dump && state.dump.length > 1024;
    if (explicitPair) {
      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
        pairBuffer += "?";
      } else {
        pairBuffer += "? ";
      }
    }
    pairBuffer += state.dump;
    if (explicitPair) {
      pairBuffer += generateNextLine(state, level);
    }
    if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {
      continue;
    }
    if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
      pairBuffer += ":";
    } else {
      pairBuffer += ": ";
    }
    pairBuffer += state.dump;
    _result += pairBuffer;
  }
  state.tag = _tag;
  state.dump = _result || "{}";
}
function detectType(state, object, explicit) {
  var _result, typeList, index, length, type2, style;
  typeList = explicit ? state.explicitTypes : state.implicitTypes;
  for (index = 0, length = typeList.length; index < length; index += 1) {
    type2 = typeList[index];
    if ((type2.instanceOf || type2.predicate) && (!type2.instanceOf || typeof object === "object" && object instanceof type2.instanceOf) && (!type2.predicate || type2.predicate(object))) {
      if (explicit) {
        if (type2.multi && type2.representName) {
          state.tag = type2.representName(object);
        } else {
          state.tag = type2.tag;
        }
      } else {
        state.tag = "?";
      }
      if (type2.represent) {
        style = state.styleMap[type2.tag] || type2.defaultStyle;
        if (_toString.call(type2.represent) === "[object Function]") {
          _result = type2.represent(object, style);
        } else if (_hasOwnProperty.call(type2.represent, style)) {
          _result = type2.represent[style](object, style);
        } else {
          throw new exception("!<" + type2.tag + '> tag resolver accepts not "' + style + '" style');
        }
        state.dump = _result;
      }
      return true;
    }
  }
  return false;
}
function writeNode(state, level, object, block, compact, iskey, isblockseq) {
  state.tag = null;
  state.dump = object;
  if (!detectType(state, object, false)) {
    detectType(state, object, true);
  }
  var type2 = _toString.call(state.dump);
  var inblock = block;
  var tagStr;
  if (block) {
    block = state.flowLevel < 0 || state.flowLevel > level;
  }
  var objectOrArray = type2 === "[object Object]" || type2 === "[object Array]", duplicateIndex, duplicate;
  if (objectOrArray) {
    duplicateIndex = state.duplicates.indexOf(object);
    duplicate = duplicateIndex !== -1;
  }
  if (state.tag !== null && state.tag !== "?" || duplicate || state.indent !== 2 && level > 0) {
    compact = false;
  }
  if (duplicate && state.usedDuplicates[duplicateIndex]) {
    state.dump = "*ref_" + duplicateIndex;
  } else {
    if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {
      state.usedDuplicates[duplicateIndex] = true;
    }
    if (type2 === "[object Object]") {
      if (block && Object.keys(state.dump).length !== 0) {
        writeBlockMapping(state, level, state.dump, compact);
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + state.dump;
        }
      } else {
        writeFlowMapping(state, level, state.dump);
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + " " + state.dump;
        }
      }
    } else if (type2 === "[object Array]") {
      if (block && state.dump.length !== 0) {
        if (state.noArrayIndent && !isblockseq && level > 0) {
          writeBlockSequence(state, level - 1, state.dump, compact);
        } else {
          writeBlockSequence(state, level, state.dump, compact);
        }
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + state.dump;
        }
      } else {
        writeFlowSequence(state, level, state.dump);
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + " " + state.dump;
        }
      }
    } else if (type2 === "[object String]") {
      if (state.tag !== "?") {
        writeScalar(state, state.dump, level, iskey, inblock);
      }
    } else if (type2 === "[object Undefined]") {
      return false;
    } else {
      if (state.skipInvalid) return false;
      throw new exception("unacceptable kind of an object to dump " + type2);
    }
    if (state.tag !== null && state.tag !== "?") {
      tagStr = encodeURI(
        state.tag[0] === "!" ? state.tag.slice(1) : state.tag
      ).replace(/!/g, "%21");
      if (state.tag[0] === "!") {
        tagStr = "!" + tagStr;
      } else if (tagStr.slice(0, 18) === "tag:yaml.org,2002:") {
        tagStr = "!!" + tagStr.slice(18);
      } else {
        tagStr = "!<" + tagStr + ">";
      }
      state.dump = tagStr + " " + state.dump;
    }
  }
  return true;
}
function getDuplicateReferences(object, state) {
  var objects = [], duplicatesIndexes = [], index, length;
  inspectNode(object, objects, duplicatesIndexes);
  for (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {
    state.duplicates.push(objects[duplicatesIndexes[index]]);
  }
  state.usedDuplicates = new Array(length);
}
function inspectNode(object, objects, duplicatesIndexes) {
  var objectKeyList, index, length;
  if (object !== null && typeof object === "object") {
    index = objects.indexOf(object);
    if (index !== -1) {
      if (duplicatesIndexes.indexOf(index) === -1) {
        duplicatesIndexes.push(index);
      }
    } else {
      objects.push(object);
      if (Array.isArray(object)) {
        for (index = 0, length = object.length; index < length; index += 1) {
          inspectNode(object[index], objects, duplicatesIndexes);
        }
      } else {
        objectKeyList = Object.keys(object);
        for (index = 0, length = objectKeyList.length; index < length; index += 1) {
          inspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);
        }
      }
    }
  }
}
function dump$1(input, options) {
  options = options || {};
  var state = new State(options);
  if (!state.noRefs) getDuplicateReferences(input, state);
  var value = input;
  if (state.replacer) {
    value = state.replacer.call({ "": value }, "", value);
  }
  if (writeNode(state, 0, value, true, true)) return state.dump + "\n";
  return "";
}
function renamed(from, to) {
  return function() {
    throw new Error("Function yaml." + from + " is removed in js-yaml 4. Use yaml." + to + " instead, which is now safe by default.");
  };
}
var isNothing_1, isObject_1, toArray_1, repeat_1, isNegativeZero_1, extend_1, common, exception, snippet, TYPE_CONSTRUCTOR_OPTIONS, YAML_NODE_KINDS, type, schema, str, seq, map, failsafe, _null, bool, int, YAML_FLOAT_PATTERN, SCIENTIFIC_WITHOUT_DOT, float, json, core, YAML_DATE_REGEXP, YAML_TIMESTAMP_REGEXP, timestamp, merge, BASE64_MAP, binary, _hasOwnProperty$3, _toString$2, omap, _toString$1, pairs, _hasOwnProperty$2, set, _default, _hasOwnProperty$1, CONTEXT_FLOW_IN, CONTEXT_FLOW_OUT, CONTEXT_BLOCK_IN, CONTEXT_BLOCK_OUT, CHOMPING_CLIP, CHOMPING_STRIP, CHOMPING_KEEP, PATTERN_NON_PRINTABLE, PATTERN_NON_ASCII_LINE_BREAKS, PATTERN_FLOW_INDICATORS, PATTERN_TAG_HANDLE, PATTERN_TAG_URI, simpleEscapeCheck, simpleEscapeMap, i, directiveHandlers, loadAll_1, load_1, loader, _toString, _hasOwnProperty, CHAR_BOM, CHAR_TAB, CHAR_LINE_FEED, CHAR_CARRIAGE_RETURN, CHAR_SPACE, CHAR_EXCLAMATION, CHAR_DOUBLE_QUOTE, CHAR_SHARP, CHAR_PERCENT, CHAR_AMPERSAND, CHAR_SINGLE_QUOTE, CHAR_ASTERISK, CHAR_COMMA, CHAR_MINUS, CHAR_COLON, CHAR_EQUALS, CHAR_GREATER_THAN, CHAR_QUESTION, CHAR_COMMERCIAL_AT, CHAR_LEFT_SQUARE_BRACKET, CHAR_RIGHT_SQUARE_BRACKET, CHAR_GRAVE_ACCENT, CHAR_LEFT_CURLY_BRACKET, CHAR_VERTICAL_LINE, CHAR_RIGHT_CURLY_BRACKET, ESCAPE_SEQUENCES, DEPRECATED_BOOLEANS_SYNTAX, DEPRECATED_BASE60_SYNTAX, QUOTING_TYPE_SINGLE, QUOTING_TYPE_DOUBLE, STYLE_PLAIN, STYLE_SINGLE, STYLE_LITERAL, STYLE_FOLDED, STYLE_DOUBLE, dump_1, dumper, load, loadAll, dump, safeLoad, safeLoadAll, safeDump;
var init_js_yaml = __esm({
  "node_modules/js-yaml/dist/js-yaml.mjs"() {
    isNothing_1 = isNothing;
    isObject_1 = isObject;
    toArray_1 = toArray;
    repeat_1 = repeat;
    isNegativeZero_1 = isNegativeZero;
    extend_1 = extend;
    common = {
      isNothing: isNothing_1,
      isObject: isObject_1,
      toArray: toArray_1,
      repeat: repeat_1,
      isNegativeZero: isNegativeZero_1,
      extend: extend_1
    };
    YAMLException$1.prototype = Object.create(Error.prototype);
    YAMLException$1.prototype.constructor = YAMLException$1;
    YAMLException$1.prototype.toString = function toString(compact) {
      return this.name + ": " + formatError(this, compact);
    };
    exception = YAMLException$1;
    snippet = makeSnippet;
    TYPE_CONSTRUCTOR_OPTIONS = [
      "kind",
      "multi",
      "resolve",
      "construct",
      "instanceOf",
      "predicate",
      "represent",
      "representName",
      "defaultStyle",
      "styleAliases"
    ];
    YAML_NODE_KINDS = [
      "scalar",
      "sequence",
      "mapping"
    ];
    type = Type$1;
    Schema$1.prototype.extend = function extend2(definition) {
      var implicit = [];
      var explicit = [];
      if (definition instanceof type) {
        explicit.push(definition);
      } else if (Array.isArray(definition)) {
        explicit = explicit.concat(definition);
      } else if (definition && (Array.isArray(definition.implicit) || Array.isArray(definition.explicit))) {
        if (definition.implicit) implicit = implicit.concat(definition.implicit);
        if (definition.explicit) explicit = explicit.concat(definition.explicit);
      } else {
        throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");
      }
      implicit.forEach(function(type$1) {
        if (!(type$1 instanceof type)) {
          throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");
        }
        if (type$1.loadKind && type$1.loadKind !== "scalar") {
          throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");
        }
        if (type$1.multi) {
          throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.");
        }
      });
      explicit.forEach(function(type$1) {
        if (!(type$1 instanceof type)) {
          throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");
        }
      });
      var result = Object.create(Schema$1.prototype);
      result.implicit = (this.implicit || []).concat(implicit);
      result.explicit = (this.explicit || []).concat(explicit);
      result.compiledImplicit = compileList(result, "implicit");
      result.compiledExplicit = compileList(result, "explicit");
      result.compiledTypeMap = compileMap(result.compiledImplicit, result.compiledExplicit);
      return result;
    };
    schema = Schema$1;
    str = new type("tag:yaml.org,2002:str", {
      kind: "scalar",
      construct: function(data) {
        return data !== null ? data : "";
      }
    });
    seq = new type("tag:yaml.org,2002:seq", {
      kind: "sequence",
      construct: function(data) {
        return data !== null ? data : [];
      }
    });
    map = new type("tag:yaml.org,2002:map", {
      kind: "mapping",
      construct: function(data) {
        return data !== null ? data : {};
      }
    });
    failsafe = new schema({
      explicit: [
        str,
        seq,
        map
      ]
    });
    _null = new type("tag:yaml.org,2002:null", {
      kind: "scalar",
      resolve: resolveYamlNull,
      construct: constructYamlNull,
      predicate: isNull,
      represent: {
        canonical: function() {
          return "~";
        },
        lowercase: function() {
          return "null";
        },
        uppercase: function() {
          return "NULL";
        },
        camelcase: function() {
          return "Null";
        },
        empty: function() {
          return "";
        }
      },
      defaultStyle: "lowercase"
    });
    bool = new type("tag:yaml.org,2002:bool", {
      kind: "scalar",
      resolve: resolveYamlBoolean,
      construct: constructYamlBoolean,
      predicate: isBoolean,
      represent: {
        lowercase: function(object) {
          return object ? "true" : "false";
        },
        uppercase: function(object) {
          return object ? "TRUE" : "FALSE";
        },
        camelcase: function(object) {
          return object ? "True" : "False";
        }
      },
      defaultStyle: "lowercase"
    });
    int = new type("tag:yaml.org,2002:int", {
      kind: "scalar",
      resolve: resolveYamlInteger,
      construct: constructYamlInteger,
      predicate: isInteger,
      represent: {
        binary: function(obj) {
          return obj >= 0 ? "0b" + obj.toString(2) : "-0b" + obj.toString(2).slice(1);
        },
        octal: function(obj) {
          return obj >= 0 ? "0o" + obj.toString(8) : "-0o" + obj.toString(8).slice(1);
        },
        decimal: function(obj) {
          return obj.toString(10);
        },
        /* eslint-disable max-len */
        hexadecimal: function(obj) {
          return obj >= 0 ? "0x" + obj.toString(16).toUpperCase() : "-0x" + obj.toString(16).toUpperCase().slice(1);
        }
      },
      defaultStyle: "decimal",
      styleAliases: {
        binary: [2, "bin"],
        octal: [8, "oct"],
        decimal: [10, "dec"],
        hexadecimal: [16, "hex"]
      }
    });
    YAML_FLOAT_PATTERN = new RegExp(
      // 2.5e4, 2.5 and integers
      "^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"
    );
    SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;
    float = new type("tag:yaml.org,2002:float", {
      kind: "scalar",
      resolve: resolveYamlFloat,
      construct: constructYamlFloat,
      predicate: isFloat,
      represent: representYamlFloat,
      defaultStyle: "lowercase"
    });
    json = failsafe.extend({
      implicit: [
        _null,
        bool,
        int,
        float
      ]
    });
    core = json;
    YAML_DATE_REGEXP = new RegExp(
      "^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"
    );
    YAML_TIMESTAMP_REGEXP = new RegExp(
      "^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"
    );
    timestamp = new type("tag:yaml.org,2002:timestamp", {
      kind: "scalar",
      resolve: resolveYamlTimestamp,
      construct: constructYamlTimestamp,
      instanceOf: Date,
      represent: representYamlTimestamp
    });
    merge = new type("tag:yaml.org,2002:merge", {
      kind: "scalar",
      resolve: resolveYamlMerge
    });
    BASE64_MAP = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";
    binary = new type("tag:yaml.org,2002:binary", {
      kind: "scalar",
      resolve: resolveYamlBinary,
      construct: constructYamlBinary,
      predicate: isBinary,
      represent: representYamlBinary
    });
    _hasOwnProperty$3 = Object.prototype.hasOwnProperty;
    _toString$2 = Object.prototype.toString;
    omap = new type("tag:yaml.org,2002:omap", {
      kind: "sequence",
      resolve: resolveYamlOmap,
      construct: constructYamlOmap
    });
    _toString$1 = Object.prototype.toString;
    pairs = new type("tag:yaml.org,2002:pairs", {
      kind: "sequence",
      resolve: resolveYamlPairs,
      construct: constructYamlPairs
    });
    _hasOwnProperty$2 = Object.prototype.hasOwnProperty;
    set = new type("tag:yaml.org,2002:set", {
      kind: "mapping",
      resolve: resolveYamlSet,
      construct: constructYamlSet
    });
    _default = core.extend({
      implicit: [
        timestamp,
        merge
      ],
      explicit: [
        binary,
        omap,
        pairs,
        set
      ]
    });
    _hasOwnProperty$1 = Object.prototype.hasOwnProperty;
    CONTEXT_FLOW_IN = 1;
    CONTEXT_FLOW_OUT = 2;
    CONTEXT_BLOCK_IN = 3;
    CONTEXT_BLOCK_OUT = 4;
    CHOMPING_CLIP = 1;
    CHOMPING_STRIP = 2;
    CHOMPING_KEEP = 3;
    PATTERN_NON_PRINTABLE = /[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;
    PATTERN_NON_ASCII_LINE_BREAKS = /[\x85\u2028\u2029]/;
    PATTERN_FLOW_INDICATORS = /[,\[\]\{\}]/;
    PATTERN_TAG_HANDLE = /^(?:!|!!|![a-z\-]+!)$/i;
    PATTERN_TAG_URI = /^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;
    simpleEscapeCheck = new Array(256);
    simpleEscapeMap = new Array(256);
    for (i = 0; i < 256; i++) {
      simpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;
      simpleEscapeMap[i] = simpleEscapeSequence(i);
    }
    directiveHandlers = {
      YAML: function handleYamlDirective(state, name, args) {
        var match, major, minor;
        if (state.version !== null) {
          throwError(state, "duplication of %YAML directive");
        }
        if (args.length !== 1) {
          throwError(state, "YAML directive accepts exactly one argument");
        }
        match = /^([0-9]+)\.([0-9]+)$/.exec(args[0]);
        if (match === null) {
          throwError(state, "ill-formed argument of the YAML directive");
        }
        major = parseInt(match[1], 10);
        minor = parseInt(match[2], 10);
        if (major !== 1) {
          throwError(state, "unacceptable YAML version of the document");
        }
        state.version = args[0];
        state.checkLineBreaks = minor < 2;
        if (minor !== 1 && minor !== 2) {
          throwWarning(state, "unsupported YAML version of the document");
        }
      },
      TAG: function handleTagDirective(state, name, args) {
        var handle, prefix;
        if (args.length !== 2) {
          throwError(state, "TAG directive accepts exactly two arguments");
        }
        handle = args[0];
        prefix = args[1];
        if (!PATTERN_TAG_HANDLE.test(handle)) {
          throwError(state, "ill-formed tag handle (first argument) of the TAG directive");
        }
        if (_hasOwnProperty$1.call(state.tagMap, handle)) {
          throwError(state, 'there is a previously declared suffix for "' + handle + '" tag handle');
        }
        if (!PATTERN_TAG_URI.test(prefix)) {
          throwError(state, "ill-formed tag prefix (second argument) of the TAG directive");
        }
        try {
          prefix = decodeURIComponent(prefix);
        } catch (err) {
          throwError(state, "tag prefix is malformed: " + prefix);
        }
        state.tagMap[handle] = prefix;
      }
    };
    loadAll_1 = loadAll$1;
    load_1 = load$1;
    loader = {
      loadAll: loadAll_1,
      load: load_1
    };
    _toString = Object.prototype.toString;
    _hasOwnProperty = Object.prototype.hasOwnProperty;
    CHAR_BOM = 65279;
    CHAR_TAB = 9;
    CHAR_LINE_FEED = 10;
    CHAR_CARRIAGE_RETURN = 13;
    CHAR_SPACE = 32;
    CHAR_EXCLAMATION = 33;
    CHAR_DOUBLE_QUOTE = 34;
    CHAR_SHARP = 35;
    CHAR_PERCENT = 37;
    CHAR_AMPERSAND = 38;
    CHAR_SINGLE_QUOTE = 39;
    CHAR_ASTERISK = 42;
    CHAR_COMMA = 44;
    CHAR_MINUS = 45;
    CHAR_COLON = 58;
    CHAR_EQUALS = 61;
    CHAR_GREATER_THAN = 62;
    CHAR_QUESTION = 63;
    CHAR_COMMERCIAL_AT = 64;
    CHAR_LEFT_SQUARE_BRACKET = 91;
    CHAR_RIGHT_SQUARE_BRACKET = 93;
    CHAR_GRAVE_ACCENT = 96;
    CHAR_LEFT_CURLY_BRACKET = 123;
    CHAR_VERTICAL_LINE = 124;
    CHAR_RIGHT_CURLY_BRACKET = 125;
    ESCAPE_SEQUENCES = {};
    ESCAPE_SEQUENCES[0] = "\\0";
    ESCAPE_SEQUENCES[7] = "\\a";
    ESCAPE_SEQUENCES[8] = "\\b";
    ESCAPE_SEQUENCES[9] = "\\t";
    ESCAPE_SEQUENCES[10] = "\\n";
    ESCAPE_SEQUENCES[11] = "\\v";
    ESCAPE_SEQUENCES[12] = "\\f";
    ESCAPE_SEQUENCES[13] = "\\r";
    ESCAPE_SEQUENCES[27] = "\\e";
    ESCAPE_SEQUENCES[34] = '\\"';
    ESCAPE_SEQUENCES[92] = "\\\\";
    ESCAPE_SEQUENCES[133] = "\\N";
    ESCAPE_SEQUENCES[160] = "\\_";
    ESCAPE_SEQUENCES[8232] = "\\L";
    ESCAPE_SEQUENCES[8233] = "\\P";
    DEPRECATED_BOOLEANS_SYNTAX = [
      "y",
      "Y",
      "yes",
      "Yes",
      "YES",
      "on",
      "On",
      "ON",
      "n",
      "N",
      "no",
      "No",
      "NO",
      "off",
      "Off",
      "OFF"
    ];
    DEPRECATED_BASE60_SYNTAX = /^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;
    QUOTING_TYPE_SINGLE = 1;
    QUOTING_TYPE_DOUBLE = 2;
    STYLE_PLAIN = 1;
    STYLE_SINGLE = 2;
    STYLE_LITERAL = 3;
    STYLE_FOLDED = 4;
    STYLE_DOUBLE = 5;
    dump_1 = dump$1;
    dumper = {
      dump: dump_1
    };
    load = loader.load;
    loadAll = loader.loadAll;
    dump = dumper.dump;
    safeLoad = renamed("safeLoad", "load");
    safeLoadAll = renamed("safeLoadAll", "loadAll");
    safeDump = renamed("safeDump", "dump");
  }
});

// src/filechanger.ts
var filechanger_exports = {};
__export(filechanger_exports, {
  generateNoteTitle: () => generateNoteTitle,
  generateYamlAttribute: () => generateYamlAttribute,
  upsertYamlField: () => upsertYamlField
});
function generateTableOfContents(noteContent) {
  const headerLines = noteContent.split("\n").filter((line) => /^#{1,6}\s+.+/.test(line));
  if (headerLines.length === 0) return "";
  return headerLines.map((line) => {
    const match = line.match(/^(#{1,6})\s+(.+)/);
    if (!match) return "";
    const level = match[1].length;
    const title = match[2].trim();
    return `${"  ".repeat(level - 1)}- ${title}`;
  }).join("\n");
}
function debug2(...args) {
  if (DEBUG) {
    console.log("[DEBUG]", ...args);
  }
}
async function generateNoteTitle(app, settings, processMessages2) {
  var _a2, _b;
  debug2("Starting generateNoteTitle");
  const activeFile = app.workspace.getActiveFile();
  if (!activeFile) {
    new import_obsidian11.Notice("No active note found.");
    return;
  }
  let noteContent = await app.vault.cachedRead(activeFile);
  noteContent = noteContent.slice(0, 15e3);
  const toc = generateTableOfContents(noteContent);
  const prompt = DEFAULT_TITLE_PROMPT;
  const userContent = (toc && toc.trim().length > 0 ? "Table of Contents:\n" + toc + "\n\n" : "") + noteContent;
  try {
    debug2("Provider:", settings.provider);
    const provider = createProvider(settings);
    const messages = [
      { role: "system", content: prompt },
      { role: "user", content: userContent }
    ];
    debug2("Original messages:", JSON.stringify(messages));
    const originalEnableContextNotes = settings.enableContextNotes;
    debug2("Original enableContextNotes:", originalEnableContextNotes);
    settings.enableContextNotes = false;
    try {
      const processedMessages = await processMessages2(messages);
      debug2("Processed messages:", JSON.stringify(processedMessages));
      settings.enableContextNotes = originalEnableContextNotes;
      if (!processedMessages || processedMessages.length === 0) {
        debug2("No processed messages!");
        new import_obsidian11.Notice("No valid messages to send to the model. Please check your note content.");
        return;
      }
      debug2("Calling provider.getCompletion");
      let resultBuffer = "";
      await provider.getCompletion(processedMessages, {
        temperature: 0,
        streamCallback: (chunk) => {
          resultBuffer += chunk;
        }
      });
      debug2("Result from provider (buffered):", resultBuffer);
      let title = resultBuffer.trim();
      debug2("Extracted title before sanitization:", title);
      title = title.replace(/[\\/:]/g, "").trim();
      debug2("Sanitized title:", title);
      if (title && typeof title === "string" && title.length > 0) {
        const outputMode = (_a2 = settings.titleOutputMode) != null ? _a2 : "clipboard";
        debug2("Output mode:", outputMode);
        if (outputMode === "replace-filename") {
          const file = app.workspace.getActiveFile();
          if (file) {
            const ext = file.extension ? "." + file.extension : "";
            const sanitized = title;
            const parentPath = file.parent ? file.parent.path : "";
            const newPath = parentPath ? parentPath + "/" + sanitized + ext : sanitized + ext;
            if (file.path !== newPath) {
              await app.fileManager.renameFile(file, newPath);
              new import_obsidian11.Notice(`Note renamed to: ${sanitized}${ext}`);
            } else {
              new import_obsidian11.Notice(`Note title is already: ${sanitized}${ext}`);
            }
          }
        } else if (outputMode === "metadata") {
          const file = app.workspace.getActiveFile();
          if (file) {
            await upsertYamlField(app, file, "title", title);
            new import_obsidian11.Notice(`Inserted title into metadata: ${title}`);
          }
        } else {
          try {
            await navigator.clipboard.writeText(title);
            new import_obsidian11.Notice(`Generated title (copied): ${title}`);
          } catch (e) {
            new import_obsidian11.Notice(`Generated title: ${title}`);
          }
        }
      } else {
        debug2("No title generated after sanitization.");
        new import_obsidian11.Notice("No title generated.");
      }
    } catch (processError) {
      debug2("Error in processMessages or provider.getCompletion:", processError);
      settings.enableContextNotes = originalEnableContextNotes;
      throw processError;
    }
  } catch (err) {
    new import_obsidian11.Notice("Error generating title: " + ((_b = err == null ? void 0 : err.message) != null ? _b : err));
  }
}
async function generateYamlAttribute(app, settings, processMessages2, attributeName, prompt, outputMode = "metadata") {
  debug2(`Starting generateYamlAttribute for ${attributeName}`);
  const activeFile = app.workspace.getActiveFile();
  if (!activeFile) {
    new import_obsidian11.Notice("No active note found.");
    return;
  }
  let noteContent = await app.vault.cachedRead(activeFile);
  noteContent = noteContent.slice(0, 15e3);
  const messages = [
    { role: "system", content: DEFAULT_YAML_SYSTEM_MESSAGE },
    { role: "user", content: prompt + "\n\n" + noteContent }
  ];
  debug2("Original messages:", JSON.stringify(messages));
  const originalEnableContextNotes = settings.enableContextNotes;
  debug2("Original enableContextNotes:", originalEnableContextNotes);
  settings.enableContextNotes = false;
  try {
    const processedMessages = await processMessages2(messages);
    debug2("Processed messages:", JSON.stringify(processedMessages));
    settings.enableContextNotes = originalEnableContextNotes;
    if (!processedMessages || processedMessages.length === 0) {
      debug2("No processed messages!");
      new import_obsidian11.Notice("No valid messages to send to the model. Please check your note content.");
      return;
    }
    debug2("Calling provider.getCompletion");
    const provider = createProvider(settings);
    let resultBuffer = "";
    await provider.getCompletion(processedMessages, {
      temperature: 0,
      streamCallback: (chunk) => {
        resultBuffer += chunk;
      }
    });
    debug2("Result from provider (buffered):", resultBuffer);
    let value = resultBuffer.trim();
    debug2("Extracted value before sanitization:", value);
    value = value.replace(/[\\/]/g, "").trim();
    debug2("Sanitized value:", value);
    if (value && typeof value === "string" && value.length > 0) {
      debug2("Output mode:", outputMode);
      if (outputMode === "metadata") {
        await upsertYamlField(app, activeFile, attributeName, value);
        new import_obsidian11.Notice(`Inserted ${attributeName} into metadata: ${value}`);
      } else {
        try {
          await navigator.clipboard.writeText(value);
          new import_obsidian11.Notice(`Generated ${attributeName} (copied): ${value}`);
        } catch (e) {
          new import_obsidian11.Notice(`Generated ${attributeName}: ${value}`);
        }
      }
    } else {
      debug2(`No value generated for ${attributeName} after sanitization.`);
      new import_obsidian11.Notice(`No value generated for ${attributeName}.`);
    }
  } catch (processError) {
    debug2("Error in processMessages or provider.getCompletion:", processError);
    settings.enableContextNotes = originalEnableContextNotes;
    throw processError;
  }
}
async function upsertYamlField(app, file, field, value) {
  let content = await app.vault.read(file);
  let newContent = content;
  const frontmatterRegex = /^---\n([\s\S]*?)\n---/;
  const match = content.match(frontmatterRegex);
  if (match) {
    let yamlObj = {};
    try {
      yamlObj = load(match[1]) || {};
    } catch (e) {
      yamlObj = {};
    }
    yamlObj[field] = value;
    const newYaml = dump(yamlObj, { lineWidth: -1 }).trim();
    newContent = content.replace(frontmatterRegex, `---
${newYaml}
---`);
  } else {
    const newYaml = dump({ [field]: value }, { lineWidth: -1 }).trim();
    newContent = `---
${newYaml}
---
` + content;
  }
  await app.vault.modify(file, newContent);
}
var import_obsidian11, DEBUG;
var init_filechanger = __esm({
  "src/filechanger.ts"() {
    import_obsidian11 = require("obsidian");
    init_providers();
    init_prompts();
    init_js_yaml();
    DEBUG = true;
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian12 = require("obsidian");
init_types();
init_providers();

// src/settings.ts
var import_obsidian = require("obsidian");
var MyPluginSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    __publicField(this, "plugin");
    this.plugin = plugin;
  }
  /**
   * Display the settings tab
   * 
   * Shows only the auto-open setting here since all other settings
   * are managed in the model settings view for better organization.
   */
  display() {
    var _a2;
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "AI Assistant Settings" });
    containerEl.createEl("h3", { text: "API Keys" });
    new import_obsidian.Setting(containerEl).setName("OpenAI API Key").setDesc("Enter your OpenAI API key").addText((text) => text.setPlaceholder("Enter your API key").setValue(this.plugin.settings.openaiSettings.apiKey).onChange(async (value) => {
      this.plugin.settings.openaiSettings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Anthropic API Key").setDesc("Enter your Anthropic API key").addText((text) => text.setPlaceholder("Enter your API key").setValue(this.plugin.settings.anthropicSettings.apiKey).onChange(async (value) => {
      this.plugin.settings.anthropicSettings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Google API Key").setDesc("Enter your Google API key").addText((text) => text.setPlaceholder("Enter your API key").setValue(this.plugin.settings.geminiSettings.apiKey).onChange(async (value) => {
      this.plugin.settings.geminiSettings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Ollama Server URL").setDesc("Enter your Ollama server URL (default: http://localhost:11434)").addText((text) => text.setPlaceholder("http://localhost:11434").setValue(this.plugin.settings.ollamaSettings.serverUrl).onChange(async (value) => {
      this.plugin.settings.ollamaSettings.serverUrl = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h3", { text: "Model Settings" });
    new import_obsidian.Setting(containerEl).setName("Auto-open Model Settings").setDesc("Automatically open model settings when Obsidian starts").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoOpenModelSettings).onChange(async (value) => {
      this.plugin.settings.autoOpenModelSettings = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Open Model Settings").setDesc("Open the model settings view").addButton((button) => button.setButtonText("Open").onClick(() => {
      this.plugin.activateView();
    }));
    new import_obsidian.Setting(containerEl).setName("Chat Separator").setDesc("The string used to separate chat messages.").addText((text) => {
      var _a3;
      text.setPlaceholder("----").setValue((_a3 = this.plugin.settings.chatSeparator) != null ? _a3 : "").onChange(async (value) => {
        this.plugin.settings.chatSeparator = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Chat Start String").setDesc("The string that indicates where to start taking the note for context.").addText((text) => {
      var _a3;
      text.setPlaceholder("===START===").setValue((_a3 = this.plugin.settings.chatStartString) != null ? _a3 : "").onChange(async (value) => {
        this.plugin.settings.chatStartString = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Chat End String").setDesc("The string that indicates where to end taking the note for context.").addText((text) => {
      var _a3;
      text.setPlaceholder("===END===").setValue((_a3 = this.plugin.settings.chatEndString) != null ? _a3 : "").onChange(async (value) => {
        this.plugin.settings.chatEndString = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Title Prompt").setDesc("The prompt used for generating note titles.").addTextArea((text) => {
      text.setPlaceholder("You are a title generator...").setValue(this.plugin.settings.titlePrompt).onChange(async (value) => {
        this.plugin.settings.titlePrompt = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Reset All Settings to Default").setDesc("Reset all plugin settings (except API keys) to their original default values.").addButton((button) => button.setButtonText("Reset").onClick(async () => {
      const { DEFAULT_TITLE_PROMPT: DEFAULT_TITLE_PROMPT2 } = await Promise.resolve().then(() => (init_prompts(), prompts_exports));
      const { DEFAULT_SETTINGS: DEFAULT_SETTINGS2 } = await Promise.resolve().then(() => (init_types(), types_exports));
      const openaiKey = this.plugin.settings.openaiSettings.apiKey;
      const anthropicKey = this.plugin.settings.anthropicSettings.apiKey;
      const geminiKey = this.plugin.settings.geminiSettings.apiKey;
      this.plugin.settings = JSON.parse(JSON.stringify(DEFAULT_SETTINGS2));
      this.plugin.settings.openaiSettings.apiKey = openaiKey;
      this.plugin.settings.anthropicSettings.apiKey = anthropicKey;
      this.plugin.settings.geminiSettings.apiKey = geminiKey;
      this.plugin.settings.titlePrompt = DEFAULT_TITLE_PROMPT2;
      await this.plugin.saveSettings();
      this.display();
      new import_obsidian.Notice("All settings (except API keys) reset to default.");
    }));
    new import_obsidian.Setting(containerEl).setName("Title Output Mode").setDesc("Choose what to do with the generated note title.").addDropdown((drop) => {
      var _a3;
      drop.addOption("clipboard", "Copy to clipboard");
      drop.addOption("replace-filename", "Replace note filename");
      drop.addOption("metadata", "Insert into metadata");
      drop.setValue((_a3 = this.plugin.settings.titleOutputMode) != null ? _a3 : "clipboard");
      drop.onChange(async (value) => {
        this.plugin.settings.titleOutputMode = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Summary Output Mode").setDesc("Choose what to do with the generated note summary.").addDropdown((drop) => {
      var _a3;
      drop.addOption("clipboard", "Copy to clipboard");
      drop.addOption("metadata", "Insert into metadata");
      drop.setValue((_a3 = this.plugin.settings.summaryOutputMode) != null ? _a3 : "clipboard");
      drop.onChange(async (value) => {
        this.plugin.settings.summaryOutputMode = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Expand Linked Notes Recursively").setDesc("If enabled, when fetching a note, also fetch and expand links within that note recursively (prevents infinite loops).").addToggle((toggle) => {
      var _a3;
      return toggle.setValue((_a3 = this.plugin.settings.expandLinkedNotesRecursively) != null ? _a3 : false).onChange(async (value) => {
        this.plugin.settings.expandLinkedNotesRecursively = value;
        await this.plugin.saveSettings();
        this.display();
      });
    });
    if (this.plugin.settings.expandLinkedNotesRecursively) {
      new import_obsidian.Setting(containerEl).setName("Max Link Expansion Depth").setDesc("Maximum depth for recursively expanding linked notes (1-3).").addSlider((slider) => {
        var _a3;
        slider.setLimits(1, 3, 1).setValue((_a3 = this.plugin.settings.maxLinkExpansionDepth) != null ? _a3 : 2).setDynamicTooltip().onChange(async (value) => {
          this.plugin.settings.maxLinkExpansionDepth = value;
          await this.plugin.saveSettings();
        });
      });
    }
    new import_obsidian.Setting(containerEl).setName("Chat Note Folder").setDesc("Folder to save exported chat notes (relative to vault root, leave blank for root)").addText((text) => {
      var _a3;
      text.setPlaceholder("e.g. AI Chats").setValue((_a3 = this.plugin.settings.chatNoteFolder) != null ? _a3 : "").onChange(async (value) => {
        this.plugin.settings.chatNoteFolder = value.trim();
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("h3", { text: "YAML Attribute Generators" });
    const yamlGenDesc = containerEl.createEl("div", { text: "Configure custom YAML attribute generators. Each entry will create a command to generate and insert/update a YAML field in your notes." });
    yamlGenDesc.style.marginBottom = "1em";
    const yamlGens = (_a2 = this.plugin.settings.yamlAttributeGenerators) != null ? _a2 : [];
    yamlGens.forEach((gen, idx) => {
      const autoCommandName = gen.attributeName ? `Generate YAML: ${gen.attributeName}` : `YAML Generator #${idx + 1}`;
      const setting = new import_obsidian.Setting(containerEl).setName(autoCommandName).setDesc(`YAML field: ${gen.attributeName}`).addText((text) => text.setPlaceholder("YAML Attribute Name").setValue(gen.attributeName).onChange(async (value) => {
        if (this.plugin.settings.yamlAttributeGenerators) {
          this.plugin.settings.yamlAttributeGenerators[idx].attributeName = value;
          this.plugin.settings.yamlAttributeGenerators[idx].commandName = value ? `Generate YAML: ${value}` : "";
          await this.plugin.saveSettings();
          this.display();
        }
      })).addTextArea((text) => text.setPlaceholder("Prompt for LLM").setValue(gen.prompt).onChange(async (value) => {
        if (this.plugin.settings.yamlAttributeGenerators) {
          this.plugin.settings.yamlAttributeGenerators[idx].prompt = value;
          await this.plugin.saveSettings();
        }
      })).addDropdown((drop) => {
        drop.addOption("clipboard", "Copy to clipboard");
        drop.addOption("metadata", "Insert into metadata");
        drop.setValue(gen.outputMode);
        drop.onChange(async (value) => {
          if (this.plugin.settings.yamlAttributeGenerators) {
            this.plugin.settings.yamlAttributeGenerators[idx].outputMode = value;
            await this.plugin.saveSettings();
          }
        });
      }).addExtraButton((btn) => {
        btn.setIcon("cross").setTooltip("Delete").onClick(async () => {
          if (this.plugin.settings.yamlAttributeGenerators) {
            this.plugin.settings.yamlAttributeGenerators.splice(idx, 1);
            await this.plugin.saveSettings();
            this.display();
          }
        });
      });
    });
    new import_obsidian.Setting(containerEl).addButton((btn) => {
      btn.setButtonText("Add YAML Attribute Generator").setCta().onClick(async () => {
        if (!this.plugin.settings.yamlAttributeGenerators) this.plugin.settings.yamlAttributeGenerators = [];
        this.plugin.settings.yamlAttributeGenerators.push({
          attributeName: "",
          prompt: "",
          outputMode: "metadata",
          commandName: "New YAML Generator"
        });
        await this.plugin.saveSettings();
        this.display();
      });
    });
  }
};

// src/components/chat.ts
var import_obsidian8 = require("obsidian");
init_providers();

// src/components/chat/ChatHistoryManager.ts
var import_obsidian2 = require("obsidian");
var ChatHistoryManager = class {
  constructor(vault, pluginId, historyFilePath) {
    __publicField(this, "vault");
    __publicField(this, "historyFilePath");
    __publicField(this, "history", []);
    __publicField(this, "isLoaded", false);
    this.vault = vault;
    let effectivePluginId = pluginId;
    if (!pluginId) {
      console.error("CRITICAL: ChatHistoryManager instantiated without pluginId! Using placeholder. This will likely lead to incorrect file paths.");
      effectivePluginId = "unknown-plugin-id-error";
    }
    const fPath = historyFilePath || "chat-history.json";
    this.historyFilePath = (0, import_obsidian2.normalizePath)(`.obsidian/plugins/${effectivePluginId}/${fPath}`);
    console.log("[ChatHistoryManager] Using history file path:", this.historyFilePath);
    if (typeof window !== "undefined" && window.Notice) {
    }
  }
  async ensureDirectoryExists() {
    const dirPath = this.historyFilePath.substring(0, this.historyFilePath.lastIndexOf("/"));
    if (!dirPath) return;
    try {
      const abstractFile = this.vault.getAbstractFileByPath(dirPath);
      if (abstractFile === null) {
        await this.vault.createFolder(dirPath);
      } else if (!(abstractFile instanceof import_obsidian2.TFolder)) {
        console.error(`Path ${dirPath} exists but is not a folder.`);
        throw new Error(`Path ${dirPath} exists but is not a folder.`);
      }
    } catch (e) {
      if (e.message && e.message.toLowerCase().includes("folder already exists")) {
        return;
      }
      console.error(`Failed to ensure directory ${dirPath} exists:`, e);
      throw e;
    }
  }
  async loadHistory() {
    try {
      const exists = await this.vault.adapter.exists(this.historyFilePath);
      if (exists) {
        const data = await this.vault.adapter.read(this.historyFilePath);
        try {
          this.history = JSON.parse(data);
        } catch (parseError) {
          console.error("Failed to parse chat history:", parseError);
          this.history = [];
        }
      } else {
        this.history = [];
      }
    } catch (e) {
      console.error("Failed to load chat history:", e);
      this.history = [];
    }
    return this.history;
  }
  async addMessage(message) {
    const currentHistory = await this.loadHistory();
    currentHistory.push(message);
    this.history = currentHistory;
    await this.saveHistory();
  }
  async getHistory() {
    return await this.loadHistory();
  }
  async clearHistory() {
    this.history = [];
    await this.saveHistory();
  }
  async deleteMessage(timestamp2, sender, content) {
    await this.loadHistory();
    const index = this.history.findIndex(
      (msg) => msg.timestamp === timestamp2 && msg.sender === sender && msg.content === content
    );
    if (index !== -1) {
      this.history.splice(index, 1);
      await this.saveHistory();
    }
  }
  async updateMessage(timestamp2, sender, oldContent, newContent) {
    await this.loadHistory();
    const message = this.history.find(
      (msg) => msg.timestamp === timestamp2 && msg.sender === sender && msg.content === oldContent
    );
    if (message) {
      message.content = newContent;
      await this.saveHistory();
    } else {
      console.warn("ChatHistoryManager: updateMessage did not find a matching message to update.", { timestamp: timestamp2, sender, oldContent });
    }
  }
  async saveHistory() {
    try {
      await this.ensureDirectoryExists();
      const data = JSON.stringify(this.history, null, 2);
      const abstractTarget = this.vault.getAbstractFileByPath(this.historyFilePath);
      if (abstractTarget instanceof import_obsidian2.TFolder) {
        throw new Error(`Path ${this.historyFilePath} is a directory, not a file.`);
      }
      await this.vault.adapter.write(this.historyFilePath, data);
      if (!abstractTarget || !(abstractTarget instanceof import_obsidian2.TFile)) {
        await this.vault.adapter.exists(this.historyFilePath);
      }
    } catch (e) {
      console.error(`Failed to save history to ${this.historyFilePath}:`, e);
      throw e;
    }
  }
};

// src/components/chat/SettingsModal.ts
var import_obsidian3 = require("obsidian");
init_providers();
var SettingsModal = class extends import_obsidian3.Modal {
  constructor(app, plugin) {
    super(app);
    __publicField(this, "plugin");
    this.plugin = plugin;
    this.titleEl.setText("AI Model Settings");
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("ai-settings-modal");
    contentEl.createEl("h2", { text: "AI Model Settings" });
    contentEl.createEl("hr");
    new import_obsidian3.Setting(contentEl).setName("System Message").setDesc("Set the system message for the AI").addTextArea((text) => text.setPlaceholder("You are a helpful assistant.").setValue(this.plugin.settings.systemMessage).onChange(async (value) => {
      this.plugin.settings.systemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Enable Streaming").setDesc("Enable or disable streaming for completions").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableStreaming).onChange(async (value) => {
      this.plugin.settings.enableStreaming = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Temperature").setDesc("Set the randomness of the model's output (0-1)").addSlider((slider) => slider.setLimits(0, 1, 0.1).setValue(this.plugin.settings.temperature).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.temperature = value;
      await this.plugin.saveSettings();
    }));
    contentEl.createEl("hr");
    contentEl.createEl("h4", { text: "Date Settings" });
    new import_obsidian3.Setting(contentEl).setName("Include Date with System Message").setDesc("Add the current date to the system message").addToggle((toggle) => toggle.setValue(this.plugin.settings.includeDateWithSystemMessage).onChange(async (value) => {
      this.plugin.settings.includeDateWithSystemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Include Time with System Message").setDesc("Add the current time along with the date to the system message").addToggle((toggle) => toggle.setValue(this.plugin.settings.includeTimeWithSystemMessage).onChange(async (value) => {
      this.plugin.settings.includeTimeWithSystemMessage = value;
      await this.plugin.saveSettings();
    }));
    contentEl.createEl("hr");
    contentEl.createEl("h4", { text: "Note Reference Settings" });
    new import_obsidian3.Setting(contentEl).setName("Enable Obsidian Links").setDesc("Read Obsidian links in messages using [[filename]] syntax").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableObsidianLinks).onChange(async (value) => {
      this.plugin.settings.enableObsidianLinks = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Enable Context Notes").setDesc("Attach specified note content to chat messages").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableContextNotes).onChange(async (value) => {
      this.plugin.settings.enableContextNotes = value;
      await this.plugin.saveSettings();
    }));
    const contextNotesContainer = contentEl.createDiv("context-notes-container");
    contextNotesContainer.style.marginBottom = "24px";
    new import_obsidian3.Setting(contextNotesContainer).setName("Context Notes").setDesc("Notes to attach as context (supports [[filename]] and [[filename#header]] syntax)").addTextArea((text) => {
      text.setPlaceholder("[[Note Name]]\n[[Another Note#Header]]").setValue(this.plugin.settings.contextNotes || "").onChange(async (value) => {
        this.plugin.settings.contextNotes = value;
        await this.plugin.saveSettings();
      });
      text.inputEl.rows = 4;
      text.inputEl.style.width = "100%";
    });
    new import_obsidian3.Setting(contentEl).setName("Expand Linked Notes Recursively").setDesc("If enabled, when fetching a note, also fetch and expand links within that note recursively (prevents infinite loops).").addToggle((toggle) => {
      var _a2;
      return toggle.setValue((_a2 = this.plugin.settings.expandLinkedNotesRecursively) != null ? _a2 : false).onChange(async (value) => {
        this.plugin.settings.expandLinkedNotesRecursively = value;
        await this.plugin.saveSettings();
      });
    });
    contentEl.createEl("hr");
    contentEl.createEl("h2", { text: "Provider Settings" });
    new import_obsidian3.Setting(contentEl).setName("AI Provider").setDesc("Choose which AI provider to use").addDropdown((dropdown) => {
      dropdown.addOption("openai", "OpenAI (ChatGPT)").addOption("anthropic", "Anthropic (Claude)").addOption("gemini", "Google (Gemini)").addOption("ollama", "Ollama (Local AI)").setValue(this.plugin.settings.provider).onChange(async (value) => {
        this.plugin.settings.provider = value;
        await this.plugin.saveSettings();
        this.onOpen();
      });
    });
    switch (this.plugin.settings.provider) {
      case "openai":
        this.renderProviderSettings(contentEl, this.plugin.settings.openaiSettings, "OpenAI", async () => {
          const provider = createProvider(this.plugin.settings);
          const result = await provider.testConnection();
          if (result.success && result.models) {
            this.plugin.settings.openaiSettings.availableModels = result.models;
            await this.plugin.saveSettings();
            this.plugin.settings.openaiSettings.lastTestResult = {
              timestamp: Date.now(),
              success: true,
              message: result.message
            };
            new import_obsidian3.Notice(result.message);
            this.onOpen();
          } else {
            this.plugin.settings.openaiSettings.lastTestResult = {
              timestamp: Date.now(),
              success: false,
              message: result.message
            };
            new import_obsidian3.Notice(result.message);
          }
        });
        break;
      case "anthropic":
        this.renderProviderSettings(contentEl, this.plugin.settings.anthropicSettings, "Anthropic", async () => {
          const provider = createProvider(this.plugin.settings);
          const result = await provider.testConnection();
          if (result.success && result.models) {
            this.plugin.settings.anthropicSettings.availableModels = result.models;
            await this.plugin.saveSettings();
            this.plugin.settings.anthropicSettings.lastTestResult = {
              timestamp: Date.now(),
              success: true,
              message: result.message
            };
            new import_obsidian3.Notice(result.message);
            this.onOpen();
          } else {
            this.plugin.settings.anthropicSettings.lastTestResult = {
              timestamp: Date.now(),
              success: false,
              message: result.message
            };
            new import_obsidian3.Notice(result.message);
          }
        });
        break;
      case "gemini":
        this.renderProviderSettings(contentEl, this.plugin.settings.geminiSettings, "Gemini", async () => {
          const provider = createProvider(this.plugin.settings);
          const result = await provider.testConnection();
          if (result.success && result.models) {
            this.plugin.settings.geminiSettings.availableModels = result.models;
            await this.plugin.saveSettings();
            this.plugin.settings.geminiSettings.lastTestResult = {
              timestamp: Date.now(),
              success: true,
              message: result.message
            };
            new import_obsidian3.Notice(result.message);
            this.onOpen();
          } else {
            this.plugin.settings.geminiSettings.lastTestResult = {
              timestamp: Date.now(),
              success: false,
              message: result.message
            };
            new import_obsidian3.Notice(result.message);
          }
        });
        break;
      case "ollama":
        this.renderProviderSettings(contentEl, this.plugin.settings.ollamaSettings, "Ollama", async () => {
          const provider = createProvider(this.plugin.settings);
          const result = await provider.testConnection();
          if (result.success && result.models) {
            this.plugin.settings.ollamaSettings.availableModels = result.models;
            await this.plugin.saveSettings();
            this.plugin.settings.ollamaSettings.lastTestResult = {
              timestamp: Date.now(),
              success: true,
              message: result.message
            };
            new import_obsidian3.Notice(result.message);
            this.onOpen();
          } else {
            this.plugin.settings.ollamaSettings.lastTestResult = {
              timestamp: Date.now(),
              success: false,
              message: result.message
            };
            new import_obsidian3.Notice(result.message);
          }
        });
        contentEl.createEl("div", {
          cls: "setting-item-description",
          text: "To use Ollama:"
        });
        const steps = contentEl.createEl("ol");
        steps.createEl("li", { text: "Install Ollama from https://ollama.ai" });
        steps.createEl("li", { text: "Start the Ollama server" });
        steps.createEl("li", { text: 'Pull models using "ollama pull model-name"' });
        steps.createEl("li", { text: "Test connection to see available models" });
        break;
    }
  }
  renderProviderSettings(containerEl, settings, providerName, testConnectionCallback) {
    new import_obsidian3.Setting(containerEl).setName("Test Connection").setDesc(`Verify your API key and fetch available models for ${providerName}`).addButton((button) => button.setButtonText("Test").onClick(async () => {
      button.setButtonText("Testing...");
      button.setDisabled(true);
      try {
        await testConnectionCallback();
      } catch (error) {
        new import_obsidian3.Notice(`Error: ${error.message}`);
      } finally {
        button.setButtonText("Test");
        button.setDisabled(false);
      }
    }));
    if (settings.lastTestResult) {
      const date = new Date(settings.lastTestResult.timestamp);
      containerEl.createEl("div", {
        text: `Last test: ${date.toLocaleString()} - ${settings.lastTestResult.message}`,
        cls: settings.lastTestResult.success ? "success" : "error"
      });
    }
    new import_obsidian3.Setting(containerEl).setName("Model").setDesc(`Choose the ${providerName} model to use`).addDropdown((dropdown) => {
      for (const model of settings.availableModels) {
        dropdown.addOption(model, model);
      }
      dropdown.setValue(settings.model).onChange(async (value) => {
        settings.model = value;
        await this.plugin.saveSettings();
      });
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/components/chat/Message.ts
var import_obsidian6 = require("obsidian");

// src/components/chat/Buttons.ts
var import_obsidian4 = require("obsidian");
function createActionButton(label, tooltip, callback) {
  const button = document.createElement("button");
  button.addClass("ai-chat-action-button");
  button.setAttribute("aria-label", tooltip);
  const labelEl = document.createElement("span");
  labelEl.textContent = label;
  button.appendChild(labelEl);
  button.addEventListener("click", callback);
  return button;
}
async function copyToClipboard(text) {
  try {
    await navigator.clipboard.writeText(text);
  } catch (error) {
  }
}

// src/components/chat/ConfirmationModal.ts
var import_obsidian5 = require("obsidian");
var ConfirmationModal = class extends import_obsidian5.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    __publicField(this, "onConfirm");
    __publicField(this, "message");
    this.titleEl.setText(title);
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("p", { text: this.message });
    const buttonContainer = contentEl.createDiv("modal-button-container");
    buttonContainer.createEl("button", { text: "Cancel" }).addEventListener("click", () => {
      this.onConfirm(false);
      this.close();
    });
    const confirmButton = buttonContainer.createEl("button", {
      text: "Delete",
      cls: "mod-warning"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm(true);
      this.close();
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/components/chat/Message.ts
function createMessageElement(app, role, content, chatHistoryManager, plugin, regenerateCallback, parentComponent) {
  const messageEl = document.createElement("div");
  messageEl.addClass("ai-chat-message", role);
  const messageContainer = messageEl.createDiv("message-container");
  const contentEl = messageContainer.createDiv("message-content");
  messageEl.dataset.rawContent = content;
  messageEl.dataset.timestamp = (/* @__PURE__ */ new Date()).toISOString();
  import_obsidian6.MarkdownRenderer.render(app, content, contentEl, "", parentComponent).catch((error) => {
    contentEl.textContent = content;
  });
  const actionsEl = messageContainer.createDiv("message-actions");
  actionsEl.classList.add("hidden");
  messageEl.addEventListener("mouseenter", () => {
    actionsEl.classList.remove("hidden");
    actionsEl.classList.add("visible");
  });
  messageEl.addEventListener("mouseleave", () => {
    actionsEl.classList.remove("visible");
    actionsEl.classList.add("hidden");
  });
  actionsEl.appendChild(createActionButton("Copy", "Copy message", () => {
    const currentContent = messageEl.dataset.rawContent || "";
    if (currentContent.trim() === "") {
      new import_obsidian6.Notice("No content to copy");
      return;
    }
    copyToClipboard(currentContent);
  }));
  actionsEl.appendChild(createActionButton("Edit", "Edit message", async () => {
    if (!contentEl.hasClass("editing")) {
      const textarea = document.createElement("textarea");
      textarea.value = messageEl.dataset.rawContent || "";
      textarea.className = "message-content editing";
      contentEl.empty();
      contentEl.appendChild(textarea);
      textarea.focus();
      contentEl.addClass("editing");
      textarea.addEventListener("keydown", async (e) => {
        if (e.key === "Enter" && !e.shiftKey) {
          e.preventDefault();
          textarea.blur();
        }
      });
      textarea.addEventListener("blur", async () => {
        const oldContent = messageEl.dataset.rawContent;
        const newContent = textarea.value;
        try {
          await chatHistoryManager.updateMessage(
            messageEl.dataset.timestamp || (/* @__PURE__ */ new Date()).toISOString(),
            messageEl.classList.contains("user") ? "user" : "assistant",
            oldContent || "",
            newContent
          );
          messageEl.dataset.rawContent = newContent;
          contentEl.empty();
          await import_obsidian6.MarkdownRenderer.render(app, newContent, contentEl, "", parentComponent);
          contentEl.removeClass("editing");
        } catch (e) {
          new import_obsidian6.Notice("Failed to save edited message.");
          messageEl.dataset.rawContent = oldContent || "";
          contentEl.empty();
          await import_obsidian6.MarkdownRenderer.render(app, oldContent || "", contentEl, "", parentComponent);
          contentEl.removeClass("editing");
        }
      });
    }
  }));
  actionsEl.appendChild(createActionButton("Delete", "Delete message", () => {
    const modal = new ConfirmationModal(app, "Delete message", "Are you sure you want to delete this message?", (confirmed) => {
      if (confirmed) {
        chatHistoryManager.deleteMessage(
          messageEl.dataset.timestamp || (/* @__PURE__ */ new Date()).toISOString(),
          messageEl.classList.contains("user") ? "user" : "assistant",
          messageEl.dataset.rawContent || ""
        ).then(() => {
          messageEl.remove();
        }).catch(() => {
          new import_obsidian6.Notice("Failed to delete message from history.");
        });
      }
    });
    modal.open();
  }));
  actionsEl.appendChild(createActionButton("Regenerate", "Regenerate this response", () => {
    regenerateCallback(messageEl);
  }));
  messageContainer.appendChild(actionsEl);
  return messageEl;
}

// src/components/chat/chatPersistence.ts
var import_obsidian7 = require("obsidian");
init_js_yaml();
function buildChatYaml(settings, provider, model) {
  const yamlObj = {
    provider,
    model,
    system_message: settings.systemMessage,
    temperature: settings.temperature
  };
  return `---
${dump(yamlObj)}---
`;
}
async function saveChatAsNote({
  app,
  messages,
  settings,
  provider,
  model,
  chatSeparator,
  chatNoteFolder
}) {
  let chatContent = "";
  messages.forEach((el, index) => {
    var _a2;
    const rawContent = el.dataset.rawContent;
    const content = rawContent !== void 0 ? rawContent : ((_a2 = el.querySelector(".message-content")) == null ? void 0 : _a2.textContent) || "";
    chatContent += content;
    if (index < messages.length - 1) {
      chatContent += "\n\n" + chatSeparator + "\n\n";
    }
  });
  const yaml = buildChatYaml(settings, provider, model);
  chatContent = chatContent.replace(/^---[\s\S]*?---\n?/, "");
  const noteContent = yaml + "\n" + chatContent.trimStart();
  const now = /* @__PURE__ */ new Date();
  const pad = (n) => n.toString().padStart(2, "0");
  const fileName = `Chat Export ${now.getFullYear()}-${pad(now.getMonth() + 1)}-${pad(now.getDate())} ${pad(now.getHours())}-${pad(now.getMinutes())}.md`;
  let filePath = fileName;
  const folder = chatNoteFolder == null ? void 0 : chatNoteFolder.trim();
  if (folder) {
    filePath = folder.replace(/[/\\]+$/, "") + "/" + fileName;
  }
  try {
    await app.vault.create(filePath, noteContent);
    new import_obsidian7.Notice(`Chat saved as note: ${filePath}`);
  } catch (e) {
    new import_obsidian7.Notice("Failed to save chat as note.");
  }
}
async function loadChatYamlAndApplySettings({
  app,
  plugin,
  settings,
  file
}) {
  var _a2, _b, _c, _d;
  let content = await app.vault.read(file);
  const yamlMatch = content.match(/^---\n([\s\S]*?)\n---/);
  let yamlObj = {};
  if (yamlMatch) {
    try {
      yamlObj = load(yamlMatch[1]) || {};
    } catch (e) {
      yamlObj = {};
    }
  }
  let newProvider = settings.provider;
  let newModel = ((_a2 = settings.openaiSettings) == null ? void 0 : _a2.model) || ((_b = settings.anthropicSettings) == null ? void 0 : _b.model) || ((_c = settings.geminiSettings) == null ? void 0 : _c.model) || ((_d = settings.ollamaSettings) == null ? void 0 : _d.model);
  const availableProviders = plugin.getAvailableProviders ? plugin.getAvailableProviders() : [];
  if (yamlObj.model) {
    let found = false;
    for (const prov of availableProviders) {
      const models = plugin.getModelsForProvider ? plugin.getModelsForProvider(prov) : [];
      if (models.includes(yamlObj.model)) {
        newProvider = prov;
        newModel = yamlObj.model;
        found = true;
        break;
      }
    }
  } else if (yamlObj.provider && availableProviders.includes(yamlObj.provider)) {
    newProvider = yamlObj.provider;
    switch (newProvider) {
      case "openai":
        newModel = settings.openaiSettings.model;
        break;
      case "anthropic":
        newModel = settings.anthropicSettings.model;
        break;
      case "gemini":
        newModel = settings.geminiSettings.model;
        break;
      case "ollama":
        newModel = settings.ollamaSettings.model;
        break;
    }
  }
  let newSystemMessage = yamlObj.system_message || settings.systemMessage;
  let newTemperature = settings.temperature;
  if (yamlObj.temperature !== void 0) {
    const tempNum = parseFloat(yamlObj.temperature);
    if (!isNaN(tempNum)) newTemperature = tempNum;
  }
  settings.provider = newProvider;
  if (newModel) {
    switch (newProvider) {
      case "openai":
        settings.openaiSettings.model = newModel;
        break;
      case "anthropic":
        settings.anthropicSettings.model = newModel;
        break;
      case "gemini":
        settings.geminiSettings.model = newModel;
        break;
      case "ollama":
        settings.ollamaSettings.model = newModel;
        break;
    }
  }
  settings.systemMessage = newSystemMessage;
  settings.temperature = newTemperature;
  if (plugin.onSettingsLoadedFromNote) {
    plugin.onSettingsLoadedFromNote(settings);
  }
  return {
    provider: newProvider,
    model: newModel,
    systemMessage: newSystemMessage,
    temperature: newTemperature
  };
}

// src/components/chat/chatHistoryUtils.ts
async function renderChatHistory({
  messagesContainer,
  loadedHistory,
  chatHistoryManager,
  plugin,
  regenerateResponse,
  scrollToBottom = true
}) {
  messagesContainer.empty();
  for (const msg of loadedHistory) {
    if (msg.sender === "user" || msg.sender === "assistant") {
      const messageEl = await createMessageElement(
        plugin.app,
        msg.sender,
        msg.content,
        chatHistoryManager,
        plugin,
        regenerateResponse,
        plugin
        // parentComponent
      );
      messageEl.dataset.timestamp = msg.timestamp;
      messagesContainer.appendChild(messageEl);
    }
  }
  if (scrollToBottom) {
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
  }
}

// src/components/chat.ts
var VIEW_TYPE_CHAT = "chat-view";
var ChatView = class extends import_obsidian8.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    __publicField(this, "plugin");
    __publicField(this, "messagesContainer");
    __publicField(this, "inputContainer");
    __publicField(this, "activeStream", null);
    __publicField(this, "chatHistoryManager");
    this.plugin = plugin;
    this.chatHistoryManager = new ChatHistoryManager(this.app.vault, this.plugin.manifest.id, "chat-history.json");
  }
  getViewType() {
    return VIEW_TYPE_CHAT;
  }
  getDisplayText() {
    return "AI Chat";
  }
  getIcon() {
    return "message-square";
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    let loadedHistory = [];
    try {
      loadedHistory = await this.chatHistoryManager.getHistory();
    } catch (e) {
      new import_obsidian8.Notice("Failed to load chat history.");
      loadedHistory = [];
    }
    contentEl.addClass("ai-chat-view");
    const fadedHelp = contentEl.createDiv();
    fadedHelp.setText("Tip: Type /help or press Ctrl+Shift+H for chat commands and shortcuts.");
    fadedHelp.style.textAlign = "center";
    fadedHelp.style.opacity = "0.6";
    fadedHelp.style.fontSize = "0.95em";
    fadedHelp.style.margin = "0.5em 0 0.2em 0";
    const topButtonContainer = contentEl.createDiv("ai-chat-buttons");
    const settingsButton = document.createElement("button");
    settingsButton.setText("Settings");
    settingsButton.setAttribute("aria-label", "Toggle model settings");
    topButtonContainer.appendChild(settingsButton);
    const copyAllButton = document.createElement("button");
    copyAllButton.textContent = "Copy All";
    topButtonContainer.appendChild(copyAllButton);
    const saveNoteButton = document.createElement("button");
    saveNoteButton.textContent = "Save as Note";
    topButtonContainer.appendChild(saveNoteButton);
    const clearButton = document.createElement("button");
    clearButton.textContent = "Clear Chat";
    topButtonContainer.appendChild(clearButton);
    this.messagesContainer = contentEl.createDiv("ai-chat-messages");
    this.inputContainer = contentEl.createDiv("ai-chat-input-container");
    const textarea = this.inputContainer.createEl("textarea", {
      cls: "ai-chat-input",
      attr: {
        placeholder: "Type your message...",
        rows: "3"
      }
    });
    const sendButton = this.inputContainer.createEl("button", {
      text: "Send",
      cls: "mod-cta"
    });
    const stopButton = this.inputContainer.createEl("button", {
      text: "Stop"
    });
    stopButton.classList.add("hidden");
    const helpButton = this.inputContainer.createEl("button", {
      text: "?"
    });
    helpButton.setAttr("aria-label", "Show chat help");
    helpButton.style.fontSize = "0.9em";
    helpButton.style.width = "1.8em";
    helpButton.style.height = "1.8em";
    helpButton.style.marginBottom = "0.2em";
    helpButton.style.opacity = "0.7";
    helpButton.style.position = "absolute";
    helpButton.style.right = "0.5em";
    helpButton.style.top = "-2.2em";
    helpButton.style.zIndex = "2";
    helpButton.addEventListener("click", () => {
      new ChatHelpModal(this.app).open();
    });
    this.inputContainer.style.position = "relative";
    const sendMessage = async () => {
      const content = textarea.value.trim();
      if (!content) return;
      textarea.disabled = true;
      sendButton.classList.add("hidden");
      stopButton.classList.remove("hidden");
      const userMessageEl = await createMessageElement(this.app, "user", content, this.chatHistoryManager, this.plugin, (el) => this.regenerateResponse(el), this);
      this.messagesContainer.appendChild(userMessageEl);
      this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
      textarea.value = "";
      try {
        const messages = await this.buildContextMessages();
        const messageElements = this.messagesContainer.querySelectorAll(".ai-chat-message");
        messageElements.forEach((el) => {
          var _a2;
          const role = el.classList.contains("user") ? "user" : "assistant";
          const content2 = ((_a2 = el.querySelector(".message-content")) == null ? void 0 : _a2.textContent) || "";
          messages.push({ role, content: content2 });
        });
        const tempContainer = document.createElement("div");
        tempContainer.addClass("ai-chat-message", "assistant");
        tempContainer.createDiv("message-content");
        this.messagesContainer.appendChild(tempContainer);
        this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
        const responseContent = await this.streamAssistantResponse(messages, tempContainer);
        tempContainer.remove();
        if (responseContent.trim() !== "") {
          const messageEl = await createMessageElement(this.app, "assistant", responseContent, this.chatHistoryManager, this.plugin, (el) => this.regenerateResponse(el), this);
          this.messagesContainer.appendChild(messageEl);
          await this.chatHistoryManager.addMessage({
            timestamp: messageEl.dataset.timestamp || (/* @__PURE__ */ new Date()).toISOString(),
            sender: "assistant",
            content: responseContent
          });
        }
      } catch (error) {
        if (error.name !== "AbortError") {
          new import_obsidian8.Notice(`Error: ${error.message}`);
          await createMessageElement(this.app, "assistant", `Error: ${error.message}`, this.chatHistoryManager, this.plugin, (el) => this.regenerateResponse(el), this);
        }
      } finally {
        textarea.disabled = false;
        textarea.focus();
        stopButton.classList.add("hidden");
        sendButton.classList.remove("hidden");
        this.activeStream = null;
      }
    };
    sendButton.addEventListener("click", sendMessage);
    stopButton.addEventListener("click", () => {
      if (this.activeStream) {
        this.activeStream.abort();
        this.activeStream = null;
        textarea.disabled = false;
        textarea.focus();
        stopButton.classList.add("hidden");
        sendButton.classList.remove("hidden");
      }
    });
    copyAllButton.addEventListener("click", async () => {
      const messages = this.messagesContainer.querySelectorAll(".ai-chat-message");
      let chatContent = "";
      messages.forEach((el, index) => {
        var _a2;
        const content = ((_a2 = el.querySelector(".message-content")) == null ? void 0 : _a2.textContent) || "";
        chatContent += content;
        if (index < messages.length - 1) {
          chatContent += "\n\n" + this.plugin.settings.chatSeparator + "\n\n";
        }
      });
      await copyToClipboard(chatContent);
    });
    saveNoteButton.addEventListener("click", async () => {
      const provider = this.plugin.settings.provider;
      let model = "";
      if (provider === "openai") model = this.plugin.settings.openaiSettings.model;
      else if (provider === "anthropic") model = this.plugin.settings.anthropicSettings.model;
      else if (provider === "gemini") model = this.plugin.settings.geminiSettings.model;
      else if (provider === "ollama") model = this.plugin.settings.ollamaSettings.model;
      await saveChatAsNote({
        app: this.app,
        messages: this.messagesContainer.querySelectorAll(".ai-chat-message"),
        settings: this.plugin.settings,
        provider,
        model,
        chatSeparator: this.plugin.settings.chatSeparator,
        chatNoteFolder: this.plugin.settings.chatNoteFolder
      });
    });
    clearButton.addEventListener("click", async () => {
      this.messagesContainer.empty();
      try {
        await this.chatHistoryManager.clearHistory();
      } catch (e) {
        new import_obsidian8.Notice("Failed to clear chat history.");
      }
    });
    settingsButton.addEventListener("click", () => {
      const settingsModal = new SettingsModal(this.app, this.plugin);
      settingsModal.open();
    });
    async function handleSlashCommand(cmd) {
      switch (cmd) {
        case "/clear":
          await clearButton.click();
          break;
        case "/copy":
          await copyAllButton.click();
          break;
        case "/save":
          await saveNoteButton.click();
          break;
        case "/settings":
          settingsButton.click();
          break;
        case "/help":
          new ChatHelpModal(this.app).open();
          break;
      }
    }
    textarea.addEventListener("keydown", async (e) => {
      if (e.ctrlKey && e.shiftKey) {
        if (e.key.toLowerCase() === "c") {
          e.preventDefault();
          await clearButton.click();
          return;
        }
        if (e.key.toLowerCase() === "y") {
          e.preventDefault();
          await copyAllButton.click();
          return;
        }
        if (e.key.toLowerCase() === "s") {
          e.preventDefault();
          await saveNoteButton.click();
          return;
        }
        if (e.key.toLowerCase() === "o") {
          e.preventDefault();
          settingsButton.click();
          return;
        }
        if (e.key.toLowerCase() === "h") {
          e.preventDefault();
          new ChatHelpModal(this.app).open();
          return;
        }
      }
      if (e.key === "Enter" && !e.shiftKey) {
        const val = textarea.value.trim();
        if (val === "/clear" || val === "/copy" || val === "/save" || val === "/settings" || val === "/help") {
          e.preventDefault();
          await handleSlashCommand.call(this, val);
          textarea.value = "";
          return;
        }
        sendMessage();
        e.preventDefault();
      }
    });
    if (loadedHistory.length > 0) {
      this.messagesContainer.empty();
      const file = this.app.workspace.getActiveFile();
      if (file) {
        await loadChatYamlAndApplySettings({
          app: this.app,
          plugin: this.plugin,
          settings: this.plugin.settings,
          file
        });
      }
      await renderChatHistory({
        messagesContainer: this.messagesContainer,
        loadedHistory,
        chatHistoryManager: this.chatHistoryManager,
        plugin: this.plugin,
        regenerateResponse: (el) => this.regenerateResponse(el),
        scrollToBottom: true
      });
    }
  }
  async addMessage(role, content, isError = false) {
    const messageEl = await createMessageElement(this.app, role, content, this.chatHistoryManager, this.plugin, (el) => this.regenerateResponse(el), this);
    const uiTimestamp = messageEl.dataset.timestamp || (/* @__PURE__ */ new Date()).toISOString();
    this.messagesContainer.appendChild(messageEl);
    this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
    try {
      await this.chatHistoryManager.addMessage({
        timestamp: uiTimestamp,
        sender: role,
        content
      });
    } catch (e) {
      new import_obsidian8.Notice("Failed to save chat message: " + e.message);
    }
  }
  async onClose() {
    if (this.activeStream) {
      this.activeStream.abort();
      this.activeStream = null;
    }
  }
  async regenerateResponse(messageEl) {
    const textarea = this.inputContainer.querySelector("textarea");
    if (textarea) textarea.disabled = true;
    const allMessages = Array.from(this.messagesContainer.querySelectorAll(".ai-chat-message"));
    const currentIndex = allMessages.indexOf(messageEl);
    const isUserClicked = messageEl.classList.contains("user");
    let targetIndex = -1;
    if (isUserClicked) {
      for (let i = currentIndex + 1; i < allMessages.length; i++) {
        if (allMessages[i].classList.contains("assistant")) {
          targetIndex = i;
          break;
        }
        if (allMessages[i].classList.contains("user")) {
          break;
        }
      }
    } else {
      targetIndex = currentIndex;
    }
    let userMsgIndex = currentIndex;
    if (!isUserClicked) {
      userMsgIndex = currentIndex - 1;
      while (userMsgIndex >= 0 && !allMessages[userMsgIndex].classList.contains("user")) {
        userMsgIndex--;
      }
    }
    const messages = await this.buildContextMessages();
    for (let i = 0; i <= userMsgIndex; i++) {
      const el = allMessages[i];
      const role = el.classList.contains("user") ? "user" : "assistant";
      const content = el.dataset.rawContent || "";
      messages.push({ role, content });
    }
    let originalTimestamp = (/* @__PURE__ */ new Date()).toISOString();
    let originalContent = "";
    let insertAfterNode = null;
    if (targetIndex !== -1) {
      const targetEl = allMessages[targetIndex];
      originalTimestamp = targetEl.dataset.timestamp || originalTimestamp;
      originalContent = targetEl.dataset.rawContent || "";
      insertAfterNode = targetEl.previousElementSibling;
      targetEl.remove();
    } else if (isUserClicked) {
      insertAfterNode = messageEl;
    } else {
      insertAfterNode = null;
    }
    const assistantContainer = await createMessageElement(this.app, "assistant", "", this.chatHistoryManager, this.plugin, (el) => this.regenerateResponse(el), this);
    assistantContainer.dataset.timestamp = originalTimestamp;
    if (insertAfterNode && insertAfterNode.nextSibling) {
      this.messagesContainer.insertBefore(assistantContainer, insertAfterNode.nextSibling);
    } else {
      this.messagesContainer.appendChild(assistantContainer);
    }
    this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
    try {
      await this.streamAssistantResponse(messages, assistantContainer, originalTimestamp, originalContent);
    } catch (error) {
      if (error.name !== "AbortError") {
        new import_obsidian8.Notice(`Error: ${error.message}`);
        assistantContainer.remove();
      }
    } finally {
      if (textarea) {
        textarea.disabled = false;
        textarea.focus();
      }
      this.activeStream = null;
    }
  }
  async buildContextMessages() {
    const messages = [
      { role: "system", content: this.plugin.getSystemMessage() }
    ];
    if (this.plugin.settings.enableContextNotes && this.plugin.settings.contextNotes) {
      const contextContent = await this.plugin.getContextNotesContent(this.plugin.settings.contextNotes);
      messages[0].content += `

Context Notes:
${contextContent}`;
    }
    if (this.plugin.settings.referenceCurrentNote) {
      const currentFile = this.app.workspace.getActiveFile();
      if (currentFile) {
        const currentNoteContent = await this.app.vault.cachedRead(currentFile);
        messages.push({
          role: "system",
          content: `Here is the content of the current note:

${currentNoteContent}`
        });
      }
    }
    return messages;
  }
  async streamAssistantResponse(messages, container, originalTimestamp, originalContent) {
    let responseContent = "";
    this.activeStream = new AbortController();
    try {
      const provider = createProvider(this.plugin.settings);
      await provider.getCompletion(
        messages,
        {
          temperature: this.plugin.settings.temperature,
          maxTokens: this.plugin.settings.maxTokens,
          streamCallback: async (chunk) => {
            responseContent += chunk;
            const contentEl = container.querySelector(".message-content");
            if (contentEl) {
              container.dataset.rawContent = responseContent;
              contentEl.empty();
              await import_obsidian8.MarkdownRenderer.render(
                this.app,
                responseContent,
                contentEl,
                "",
                this
              );
              this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
            }
          },
          abortController: this.activeStream
        }
      );
      if (originalTimestamp && responseContent.trim() !== "") {
        await this.chatHistoryManager.updateMessage(
          originalTimestamp,
          "assistant",
          originalContent || "",
          responseContent
        );
      }
      return responseContent;
    } catch (error) {
      if (error.name !== "AbortError") {
        throw error;
      }
      return "";
    }
  }
};
var ChatHelpModal = class extends import_obsidian8.Modal {
  constructor(app) {
    super(app);
  }
  onOpen() {
    this.titleEl.setText("AI Chat Help");
    this.contentEl.innerHTML = `
            <div style="line-height:1.7;font-size:1em;">
                <b>Slash Commands:</b><br>
                <code>/clear</code> \u2013 Clear the chat<br>
                <code>/copy</code> \u2013 Copy all chat<br>
                <code>/save</code> \u2013 Save chat as note<br>
                <code>/settings</code> \u2013 Open settings<br>
                <code>/help</code> \u2013 Show this help<br>
                <br>
                <b>Keyboard Shortcuts (when input is focused):</b><br>
                <code>Ctrl+Shift+C</code> \u2013 Clear chat<br>
                <code>Ctrl+Shift+Y</code> \u2013 Copy all chat<br>
                <code>Ctrl+Shift+S</code> \u2013 Save as note<br>
                <code>Ctrl+Shift+O</code> \u2013 Open settings<br>
                <code>Ctrl+Shift+H</code> \u2013 Show this help<br>
                <br>
                <b>Other:</b><br>
                <code>Enter</code> \u2013 Send message<br>
                <code>Shift+Enter</code> \u2013 Newline<br>
                <br>
                You can also use the buttons at the top of the chat window.
            </div>
        `;
  }
};

// src/components/parseSelection.ts
function parseSelection(selection, chatSeparator, chatBoundaryString) {
  let insideChat = !chatBoundaryString;
  const lines = selection.split("\n");
  let messages = [];
  let currentRole = "user";
  let currentContent = "";
  for (const line of lines) {
    if (chatBoundaryString && line.trim() === chatBoundaryString) {
      if (!insideChat && currentContent.trim()) {
        messages.push({ role: currentRole, content: currentContent.trim() });
        currentContent = "";
      }
      insideChat = !insideChat;
      continue;
    }
    if (!insideChat) continue;
    if (line.trim() === chatSeparator) {
      if (currentContent.trim()) {
        messages.push({ role: currentRole, content: currentContent.trim() });
      }
      currentRole = currentRole === "user" ? "assistant" : "user";
      currentContent = "";
    } else {
      currentContent += line + "\n";
    }
  }
  if (currentContent.trim()) {
    messages.push({ role: currentRole, content: currentContent.trim() });
  }
  return messages;
}

// src/components/ModelSettingsView.ts
var import_obsidian9 = require("obsidian");
init_providers();
var VIEW_TYPE_MODEL_SETTINGS = "model-settings-view";
var ModelSettingsView = class extends import_obsidian9.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    __publicField(this, "plugin");
    this.plugin = plugin;
  }
  getViewType() {
    return VIEW_TYPE_MODEL_SETTINGS;
  }
  getDisplayText() {
    return "AI Model Settings";
  }
  getIcon() {
    return "file-sliders";
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "AI Model Settings" });
    new import_obsidian9.Setting(contentEl).setName("System Message").setDesc("Set the system message for the AI").addTextArea((text) => text.setPlaceholder("You are a helpful assistant.").setValue(this.plugin.settings.systemMessage).onChange(async (value) => {
      this.plugin.settings.systemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian9.Setting(contentEl).setName("Enable Streaming").setDesc("Enable or disable streaming for completions").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableStreaming).onChange(async (value) => {
      this.plugin.settings.enableStreaming = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian9.Setting(contentEl).setName("Temperature").setDesc("Set the randomness of the model's output (0-1)").addSlider((slider) => slider.setLimits(0, 1, 0.1).setValue(this.plugin.settings.temperature).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.temperature = value;
      await this.plugin.saveSettings();
    }));
    contentEl.createEl("h4", { text: "Date Settings" });
    new import_obsidian9.Setting(contentEl).setName("Include Date with System Message").setDesc("Add the current date to the system message").addToggle((toggle) => toggle.setValue(this.plugin.settings.includeDateWithSystemMessage).onChange(async (value) => {
      this.plugin.settings.includeDateWithSystemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian9.Setting(contentEl).setName("Include Time with System Message").setDesc("Add the current time along with the date to the system message").addToggle((toggle) => toggle.setValue(this.plugin.settings.includeTimeWithSystemMessage).onChange(async (value) => {
      this.plugin.settings.includeTimeWithSystemMessage = value;
      await this.plugin.saveSettings();
    }));
    contentEl.createEl("h4", { text: "Note Reference Settings" });
    new import_obsidian9.Setting(contentEl).setName("Enable Obsidian Links").setDesc("Read Obsidian links in messages using [[filename]] syntax").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableObsidianLinks).onChange(async (value) => {
      this.plugin.settings.enableObsidianLinks = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian9.Setting(contentEl).setName("Enable Context Notes").setDesc("Attach specified note content to chat messages").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableContextNotes).onChange(async (value) => {
      this.plugin.settings.enableContextNotes = value;
      await this.plugin.saveSettings();
    }));
    const contextNotesContainer = contentEl.createDiv("context-notes-container");
    contextNotesContainer.style.marginBottom = "24px";
    new import_obsidian9.Setting(contextNotesContainer).setName("Context Notes").setDesc("Notes to attach as context (supports [[filename]] and [[filename#header]] syntax)").addTextArea((text) => {
      text.setPlaceholder("[[Note Name]]\n[[Another Note#Header]]").setValue(this.plugin.settings.contextNotes || "").onChange(async (value) => {
        this.plugin.settings.contextNotes = value;
        await this.plugin.saveSettings();
      });
      text.inputEl.rows = 4;
      text.inputEl.style.width = "100%";
    });
    new import_obsidian9.Setting(contentEl).setName("Expand Linked Notes Recursively").setDesc("If enabled, when fetching a note, also fetch and expand links within that note recursively (prevents infinite loops).").addToggle((toggle) => {
      var _a2;
      return toggle.setValue((_a2 = this.plugin.settings.expandLinkedNotesRecursively) != null ? _a2 : false).onChange(async (value) => {
        this.plugin.settings.expandLinkedNotesRecursively = value;
        await this.plugin.saveSettings();
      });
    });
    contentEl.createEl("h2", { text: "Provider Settings" });
    new import_obsidian9.Setting(contentEl).setName("AI Provider").setDesc("Choose which AI provider to use").addDropdown((dropdown) => {
      dropdown.addOption("openai", "OpenAI (ChatGPT)").addOption("anthropic", "Anthropic (Claude)").addOption("gemini", "Google (Gemini)").addOption("ollama", "Ollama (Local AI)").setValue(this.plugin.settings.provider).onChange(async (value) => {
        this.plugin.settings.provider = value;
        await this.plugin.saveSettings();
        this.onOpen();
      });
    });
    switch (this.plugin.settings.provider) {
      case "openai":
        this.renderOpenAISettings(contentEl);
        break;
      case "anthropic":
        this.renderAnthropicSettings(contentEl);
        break;
      case "gemini":
        this.renderGeminiSettings(contentEl);
        break;
      case "ollama":
        this.renderOllamaSettings(contentEl);
        break;
    }
  }
  renderProviderSettings(containerEl, settings, providerName, testConnectionCallback) {
    new import_obsidian9.Setting(containerEl).setName("Test Connection").setDesc(`Verify your API key and fetch available models for ${providerName}`).addButton((button) => button.setButtonText("Test").onClick(async () => {
      button.setButtonText("Testing...");
      button.setDisabled(true);
      try {
        await testConnectionCallback();
      } catch (error) {
        new import_obsidian9.Notice(`Error: ${error.message}`);
      } finally {
        button.setButtonText("Test");
        button.setDisabled(false);
      }
    }));
    if (settings.lastTestResult) {
      const date = new Date(settings.lastTestResult.timestamp);
      containerEl.createEl("div", {
        text: `Last test: ${date.toLocaleString()} - ${settings.lastTestResult.message}`,
        cls: settings.lastTestResult.success ? "success" : "error"
      });
    }
    new import_obsidian9.Setting(containerEl).setName("Model").setDesc(`Choose the ${providerName} model to use`).addDropdown((dropdown) => {
      for (const model of settings.availableModels) {
        dropdown.addOption(model, model);
      }
      dropdown.setValue(settings.model).onChange(async (value) => {
        settings.model = value;
        await this.plugin.saveSettings();
      });
    });
  }
  renderOpenAISettings(containerEl) {
    this.renderProviderSettings(containerEl, this.plugin.settings.openaiSettings, "OpenAI", async () => {
      const provider = createProvider(this.plugin.settings);
      const result = await provider.testConnection();
      if (result.success && result.models) {
        this.plugin.settings.openaiSettings.availableModels = result.models;
        await this.plugin.saveSettings();
        this.plugin.settings.openaiSettings.lastTestResult = {
          timestamp: Date.now(),
          success: true,
          message: result.message
        };
        new import_obsidian9.Notice(result.message);
        this.onOpen();
      } else {
        this.plugin.settings.openaiSettings.lastTestResult = {
          timestamp: Date.now(),
          success: false,
          message: result.message
        };
        new import_obsidian9.Notice(result.message);
      }
    });
  }
  renderAnthropicSettings(containerEl) {
    this.renderProviderSettings(containerEl, this.plugin.settings.anthropicSettings, "Anthropic", async () => {
      const provider = createProvider(this.plugin.settings);
      const result = await provider.testConnection();
      if (result.success && result.models) {
        this.plugin.settings.anthropicSettings.availableModels = result.models;
        await this.plugin.saveSettings();
        this.plugin.settings.anthropicSettings.lastTestResult = {
          timestamp: Date.now(),
          success: true,
          message: result.message
        };
        new import_obsidian9.Notice(result.message);
        this.onOpen();
      } else {
        this.plugin.settings.anthropicSettings.lastTestResult = {
          timestamp: Date.now(),
          success: false,
          message: result.message
        };
        new import_obsidian9.Notice(result.message);
      }
    });
  }
  renderGeminiSettings(containerEl) {
    this.renderProviderSettings(containerEl, this.plugin.settings.geminiSettings, "Gemini", async () => {
      const provider = createProvider(this.plugin.settings);
      const result = await provider.testConnection();
      if (result.success && result.models) {
        this.plugin.settings.geminiSettings.availableModels = result.models;
        await this.plugin.saveSettings();
        this.plugin.settings.geminiSettings.lastTestResult = {
          timestamp: Date.now(),
          success: true,
          message: result.message
        };
        new import_obsidian9.Notice(result.message);
        this.onOpen();
      } else {
        this.plugin.settings.geminiSettings.lastTestResult = {
          timestamp: Date.now(),
          success: false,
          message: result.message
        };
        new import_obsidian9.Notice(result.message);
      }
    });
  }
  renderOllamaSettings(containerEl) {
    this.renderProviderSettings(containerEl, this.plugin.settings.ollamaSettings, "Ollama", async () => {
      const provider = createProvider(this.plugin.settings);
      const result = await provider.testConnection();
      if (result.success && result.models) {
        this.plugin.settings.ollamaSettings.availableModels = result.models;
        await this.plugin.saveSettings();
        this.plugin.settings.ollamaSettings.lastTestResult = {
          timestamp: Date.now(),
          success: true,
          message: result.message
        };
        new import_obsidian9.Notice(result.message);
        this.onOpen();
      } else {
        this.plugin.settings.ollamaSettings.lastTestResult = {
          timestamp: Date.now(),
          success: false,
          message: result.message
        };
        new import_obsidian9.Notice(result.message);
      }
    });
    containerEl.createEl("div", {
      cls: "setting-item-description",
      text: "To use Ollama:"
    });
    const steps = containerEl.createEl("ol");
    steps.createEl("li", { text: "Install Ollama from https://ollama.ai" });
    steps.createEl("li", { text: "Start the Ollama server" });
    steps.createEl("li", { text: 'Pull models using "ollama pull model-name"' });
    steps.createEl("li", { text: "Test connection to see available models" });
  }
  async onClose() {
  }
};

// src/components/noteUtils.ts
var import_obsidian10 = require("obsidian");
function extractContentUnderHeader(content, headerText) {
  const lines = content.split("\n");
  let foundHeader = false;
  let extractedContent = [];
  let headerLevel = 0;
  for (let i = 0; i < lines.length; i++) {
    const line = lines[i];
    const headerMatch = line.match(/^(#+)\s+(.*?)$/);
    if (headerMatch) {
      const currentHeaderLevel = headerMatch[1].length;
      const currentHeaderText = headerMatch[2].trim();
      if (foundHeader) {
        if (currentHeaderLevel <= headerLevel) {
          break;
        }
      } else if (currentHeaderText.toLowerCase() === headerText.toLowerCase()) {
        foundHeader = true;
        headerLevel = currentHeaderLevel;
        extractedContent.push(line);
        continue;
      }
    }
    if (foundHeader) {
      extractedContent.push(line);
    }
  }
  return extractedContent.join("\n");
}
async function processObsidianLinks(content, app, settings, visitedNotes = /* @__PURE__ */ new Set(), currentDepth = 0) {
  var _a2;
  if (!settings.enableObsidianLinks) return content;
  const linkRegex = /\[\[(.*?)\]\]/g;
  let match;
  let processedContent = content;
  while ((match = linkRegex.exec(content)) !== null) {
    if (match && match[0] && match[1]) {
      const parts = match[1].split("|");
      const filePath = parts[0].trim();
      const displayText = parts.length > 1 ? parts[1].trim() : filePath;
      try {
        let file = app.vault.getAbstractFileByPath(filePath) || app.vault.getAbstractFileByPath(`${filePath}.md`);
        if (!file) {
          const allFiles = app.vault.getFiles();
          file = allFiles.find((f) => f.name === filePath || f.name === `${filePath}.md` || f.basename.toLowerCase() === filePath.toLowerCase() || f.path === filePath || f.path === `${filePath}.md`) || null;
        }
        const headerMatch = filePath.match(/(.*?)#(.*)/);
        let extractedContent = "";
        if (file && file instanceof import_obsidian10.TFile) {
          if (visitedNotes.has(file.path)) {
            extractedContent = "[Recursive link omitted: already included]";
          } else {
            visitedNotes.add(file.path);
            const noteContent = await app.vault.cachedRead(file);
            if (headerMatch) {
              extractedContent = extractContentUnderHeader(noteContent, headerMatch[2].trim());
            } else {
              extractedContent = noteContent;
            }
            if (settings.expandLinkedNotesRecursively && currentDepth < ((_a2 = settings.maxLinkExpansionDepth) != null ? _a2 : 2)) {
              extractedContent = await processObsidianLinks(extractedContent, app, settings, visitedNotes, currentDepth + 1);
            }
          }
          processedContent = processedContent.replace(
            match[0],
            `${match[0]}

---
Note Name: ${filePath}
Content:
${extractedContent}
---
`
          );
        } else {
          new import_obsidian10.Notice(`File not found: ${filePath}. Ensure the file name and path are correct.`);
        }
      } catch (error) {
        new import_obsidian10.Notice(`Error processing link for ${filePath}: ${error.message}`);
      }
    }
  }
  return processedContent;
}
async function processContextNotes(contextNotesText, app) {
  const linkRegex = /\[\[(.*?)\]\]/g;
  let match;
  let contextContent = "";
  while ((match = linkRegex.exec(contextNotesText)) !== null) {
    if (match && match[1]) {
      const fileName = match[1].trim();
      try {
        const headerMatch = fileName.match(/(.*?)#(.*)/);
        const baseFileName = headerMatch ? headerMatch[1].trim() : fileName;
        const headerName = headerMatch ? headerMatch[2].trim() : null;
        let file = app.vault.getAbstractFileByPath(baseFileName) || app.vault.getAbstractFileByPath(`${baseFileName}.md`);
        if (!file) {
          const allFiles = app.vault.getFiles();
          file = allFiles.find(
            (f) => f.basename.toLowerCase() === baseFileName.toLowerCase() || f.name.toLowerCase() === `${baseFileName.toLowerCase()}.md`
          ) || null;
        }
        if (file && file instanceof import_obsidian10.TFile) {
          const noteContent = await app.vault.cachedRead(file);
          contextContent += `---
From note: ${file.basename}

`;
          if (headerName) {
            const headerContent = extractContentUnderHeader(noteContent, headerName);
            contextContent += headerContent;
          } else {
            contextContent += noteContent;
          }
          contextContent += "\n\n";
        } else {
          contextContent += `Note not found: ${fileName}

`;
        }
      } catch (error) {
        contextContent += `Error processing note ${fileName}: ${error.message}

`;
      }
    }
  }
  return contextContent;
}
async function processMessages(messages, app, settings) {
  const processedMessages = [];
  if (settings.enableContextNotes && settings.contextNotes) {
    const contextContent = await processContextNotes(settings.contextNotes, app);
    if (contextContent) {
      if (messages.length > 0 && messages[0].role === "system") {
        processedMessages.push({
          role: "system",
          content: `${messages[0].content}

Here is additional context:
${contextContent}`
        });
        messages = messages.slice(1);
      } else {
        processedMessages.push({
          role: "system",
          content: `Here is context for our conversation:
${contextContent}`
        });
      }
    }
  }
  for (const message of messages) {
    const processedContent = await processObsidianLinks(message.content, app, settings, /* @__PURE__ */ new Set());
    processedMessages.push({
      role: message.role,
      content: processedContent
    });
  }
  return processedMessages;
}
async function getContextNotesContent(contextNotesText, app) {
  return processContextNotes(contextNotesText, app);
}

// src/components/systemMessage.ts
function getSystemMessage(settings) {
  let systemMessage = settings.systemMessage;
  if (settings.includeDateWithSystemMessage) {
    const currentDate = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
    systemMessage = `${systemMessage}

The current date is ${currentDate}.`;
  }
  if (settings.includeTimeWithSystemMessage) {
    const now = /* @__PURE__ */ new Date();
    const timeZoneOffset = now.getTimezoneOffset();
    const offsetHours = Math.abs(timeZoneOffset) / 60;
    const offsetMinutes = Math.abs(timeZoneOffset) % 60;
    const sign = timeZoneOffset > 0 ? "-" : "+";
    const currentTime = now.toLocaleTimeString();
    const timeZoneString = `UTC${sign}${offsetHours.toString().padStart(2, "0")}:${offsetMinutes.toString().padStart(2, "0")}`;
    systemMessage = `${systemMessage}

The current time is ${currentTime} ${timeZoneString}.`;
  }
  return systemMessage;
}

// src/main.ts
var VIEW_TYPE_MODEL_SETTINGS2 = "model-settings-view";
var MyPlugin = class extends import_obsidian12.Plugin {
  constructor() {
    super(...arguments);
    __publicField(this, "settings");
    __publicField(this, "modelSettingsView", null);
    __publicField(this, "activeStream", null);
    __publicField(this, "_yamlAttributeCommandIds", []);
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new MyPluginSettingTab(this.app, this));
    this.registerView(
      VIEW_TYPE_MODEL_SETTINGS2,
      (leaf) => new ModelSettingsView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_CHAT,
      (leaf) => new ChatView(leaf, this)
    );
    this.addRibbonIcon("file-sliders", "Open AI Settings", () => {
      this.activateView();
    });
    this.addRibbonIcon("message-square", "Open AI Chat", () => {
      this.activateChatView();
    });
    this.app.workspace.onLayoutReady(() => {
      if (this.settings.autoOpenModelSettings) {
        this.activateView();
      }
    });
    this.addCommand({
      id: "ai-completion",
      name: "Get AI Completion",
      editorCallback: async (editor) => {
        var _a2, _b, _c;
        let text;
        let insertPosition;
        if (editor.somethingSelected()) {
          text = editor.getSelection();
          insertPosition = editor.getCursor("to");
        } else {
          const currentLineNumber = editor.getCursor().line;
          let lines = [];
          for (let i = 0; i <= currentLineNumber; i++) {
            lines.push(editor.getLine(i));
          }
          const chatStartString = this.settings.chatStartString;
          if (chatStartString) {
            const startIdx = lines.findIndex((line) => line.trim() === chatStartString.trim());
            if (startIdx !== -1) {
              lines = lines.slice(startIdx + 1);
            }
          }
          text = lines.join("\n");
          insertPosition = { line: currentLineNumber + 1, ch: 0 };
        }
        console.log("Extracted text for completion:", text);
        const messages = parseSelection(text, this.settings.chatSeparator);
        if (messages.length === 0) {
          new import_obsidian12.Notice("No valid messages found in the selection.");
          return;
        }
        const lineContent = (_a2 = editor.getLine(insertPosition.line)) != null ? _a2 : "";
        let prefix = "";
        if (lineContent.trim() !== "") {
          prefix = "\n";
        }
        editor.replaceRange(`${prefix}
${this.settings.chatSeparator}
`, insertPosition);
        let currentPosition = {
          line: insertPosition.line + (prefix ? 1 : 0) + 2,
          ch: 0
        };
        this.activeStream = new AbortController();
        try {
          const provider = createProvider(this.settings);
          const processedMessages = await this.processMessages([
            { role: "system", content: this.getSystemMessage() },
            ...messages
          ]);
          let bufferedChunk = "";
          const flushBuffer = () => {
            if (bufferedChunk) {
              editor.replaceRange(bufferedChunk, currentPosition);
              currentPosition = editor.offsetToPos(
                editor.posToOffset(currentPosition) + bufferedChunk.length
              );
              bufferedChunk = "";
            }
          };
          await provider.getCompletion(
            processedMessages,
            {
              temperature: this.settings.temperature,
              maxTokens: this.settings.maxTokens,
              streamCallback: (chunk) => {
                bufferedChunk += chunk;
                setTimeout(flushBuffer, 100);
              },
              abortController: this.activeStream
            }
          );
          flushBuffer();
          const endLineContent = (_b = editor.getLine(currentPosition.line)) != null ? _b : "";
          let endPrefix = "";
          if (endLineContent.trim() !== "") {
            endPrefix = "\n";
          }
          editor.replaceRange(`${endPrefix}
${this.settings.chatSeparator}

`, currentPosition);
          const newCursorPos = editor.offsetToPos(
            editor.posToOffset(currentPosition) + (endPrefix ? 1 : 0) + 1 + this.settings.chatSeparator.length + 1
          );
          editor.setCursor(newCursorPos);
        } catch (error) {
          new import_obsidian12.Notice(`Error: ${error.message}`);
          const errLineContent = (_c = editor.getLine(currentPosition.line)) != null ? _c : "";
          let errPrefix = "";
          if (errLineContent.trim() !== "") {
            errPrefix = "\n";
          }
          editor.replaceRange(`Error: ${error.message}
${errPrefix}
${this.settings.chatSeparator}

`, currentPosition);
        } finally {
          this.activeStream = null;
        }
      }
    });
    this.addCommand({
      id: "end-ai-stream",
      name: "End AI Stream",
      callback: () => {
        if (this.activeStream) {
          this.activeStream.abort();
          this.activeStream = null;
          new import_obsidian12.Notice("AI stream ended");
        } else {
          new import_obsidian12.Notice("No active AI stream to end");
        }
      }
    });
    this.addCommand({
      id: "show-ai-settings",
      name: "Show AI Settings",
      callback: () => {
        this.activateView();
      }
    });
    this.addCommand({
      id: "show-ai-chat",
      name: "Show AI Chat",
      callback: () => {
        this.activateChatView();
      }
    });
    this.addCommand({
      id: "copy-active-note-name",
      name: "Copy Active Note Name",
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (activeFile) {
          const noteName = `[[${activeFile.basename}]]`;
          try {
            await navigator.clipboard.writeText(noteName);
            new import_obsidian12.Notice(`Copied to clipboard: ${noteName}`);
          } catch (error) {
            new import_obsidian12.Notice("Failed to copy to clipboard");
            console.error("Clipboard error:", error);
          }
        } else {
          new import_obsidian12.Notice("No active note found");
        }
      }
    });
    this.addCommand({
      id: "insert-chat-start-string",
      name: "Insert Chat Start String",
      editorCallback: (editor) => {
        var _a2;
        const chatStartString = (_a2 = this.settings.chatStartString) != null ? _a2 : "";
        if (!chatStartString) {
          new import_obsidian12.Notice("chatStartString is not set in settings.");
          return;
        }
        const cursor = editor.getCursor();
        editor.replaceRange(chatStartString, cursor);
        const lines = chatStartString.split("\n");
        if (lines.length === 1) {
          editor.setCursor({
            line: cursor.line,
            ch: cursor.ch + chatStartString.length
          });
        } else {
          editor.setCursor({
            line: cursor.line + lines.length - 1,
            ch: lines[lines.length - 1].length
          });
        }
      }
    });
    this.addCommand({
      id: "generate-note-title",
      name: "Generate Note Title",
      callback: async () => {
        const { generateNoteTitle: generateNoteTitle2 } = await Promise.resolve().then(() => (init_filechanger(), filechanger_exports));
        await generateNoteTitle2(
          this.app,
          this.settings,
          (messages) => this.processMessages(messages)
        );
      }
    });
    this.addCommand({
      id: "load-chat-note-into-chat",
      name: "Load Chat Note into Chat",
      callback: async () => {
        let file = this.app.workspace.getActiveFile();
        if (!file) {
          new import_obsidian12.Notice("No active note found. Please open a note to load as chat.");
          return;
        }
        let content = await this.app.vault.read(file);
        const messages = parseSelection(content, this.settings.chatSeparator);
        if (!messages.length) {
          new import_obsidian12.Notice("No chat messages found in the selected note.");
          return;
        }
        await this.activateChatView();
        const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_CHAT);
        if (!leaves.length) {
          new import_obsidian12.Notice("Could not find chat view.");
          return;
        }
        const chatView = leaves[0].view;
        chatView.messagesContainer.empty();
        for (const msg of messages) {
          if (msg.role === "user" || msg.role === "assistant") {
            await chatView["addMessage"](msg.role, msg.content);
          }
        }
        chatView.messagesContainer.scrollTop = chatView.messagesContainer.scrollHeight;
        new import_obsidian12.Notice("Loaded chat note into chat.");
      }
    });
    this.registerYamlAttributeCommands();
  }
  /**
   * Register YAML attribute generator commands dynamically based on settings.
   * Unregisters previous commands before registering new ones.
   */
  registerYamlAttributeCommands() {
    if (this._yamlAttributeCommandIds && this._yamlAttributeCommandIds.length > 0) {
      for (const id of this._yamlAttributeCommandIds) {
        this.app.commands.removeCommand(id);
      }
    }
    this._yamlAttributeCommandIds = [];
    if (this.settings.yamlAttributeGenerators && Array.isArray(this.settings.yamlAttributeGenerators)) {
      for (const gen of this.settings.yamlAttributeGenerators) {
        if (!gen.attributeName || !gen.prompt || !gen.commandName) continue;
        const id = `generate-yaml-attribute-${gen.attributeName}`;
        this.addCommand({
          id,
          name: gen.commandName,
          callback: async () => {
            const { generateYamlAttribute: generateYamlAttribute2 } = await Promise.resolve().then(() => (init_filechanger(), filechanger_exports));
            await generateYamlAttribute2(
              this.app,
              this.settings,
              (messages) => this.processMessages(messages),
              gen.attributeName,
              gen.prompt,
              gen.outputMode
            );
          }
        });
        this._yamlAttributeCommandIds.push(id);
      }
    }
  }
  getSystemMessage() {
    return getSystemMessage(this.settings);
  }
  async activateView(viewType = VIEW_TYPE_MODEL_SETTINGS2) {
    this.app.workspace.detachLeavesOfType(viewType);
    let leaf = this.app.workspace.getRightLeaf(false);
    if (leaf) {
      await leaf.setViewState({
        type: viewType,
        active: true
      });
      this.app.workspace.revealLeaf(leaf);
    } else {
      leaf = this.app.workspace.getLeaf(true);
      await leaf.setViewState({
        type: viewType,
        active: true
      });
    }
  }
  async activateChatView() {
    await this.activateView(VIEW_TYPE_CHAT);
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.registerYamlAttributeCommands();
  }
  async processMessages(messages) {
    return processMessages(messages, this.app, this.settings);
  }
  async getContextNotesContent(contextNotesText) {
    return getContextNotesContent(contextNotesText, this.app);
  }
};
/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3Byb21wdHMudHMiLCAic3JjL3R5cGVzLnRzIiwgInByb3ZpZGVycy9iYXNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvdmVyc2lvbi50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL19zaGltcy9yZWdpc3RyeS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL19zaGltcy9NdWx0aXBhcnRCb2R5LnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvX3NoaW1zL3dlYi1ydW50aW1lLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9fc2hpbXMvYXV0by9ydW50aW1lLm1qcyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvX3NoaW1zL2luZGV4Lm1qcyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2Vycm9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvaW50ZXJuYWwvZGVjb2RlcnMvbGluZS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2ludGVybmFsL3N0cmVhbS11dGlscy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3N0cmVhbWluZy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3VwbG9hZHMudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9jb3JlLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcGFnaW5hdGlvbi50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9zaGFyZWQudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9yZXNvdXJjZS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9iZXRhL21vZGVscy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2ludGVybmFsL2RlY29kZXJzL2pzb25sLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL2JldGEvbWVzc2FnZXMvYmF0Y2hlcy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL192ZW5kb3IvcGFydGlhbC1qc29uLXBhcnNlci9wYXJzZXIudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9saWIvQmV0YU1lc3NhZ2VTdHJlYW0udHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9yZXNvdXJjZXMvYmV0YS9tZXNzYWdlcy9tZXNzYWdlcy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9iZXRhL2JldGEudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9yZXNvdXJjZXMvY29tcGxldGlvbnMudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9yZXNvdXJjZXMvbWVzc2FnZXMvYmF0Y2hlcy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2xpYi9NZXNzYWdlU3RyZWFtLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL21lc3NhZ2VzL21lc3NhZ2VzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL21vZGVscy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9pbmRleC50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2luZGV4LnRzIiwgInByb3ZpZGVycy9hbnRocm9waWMudHMiLCAicHJvdmlkZXJzL29wZW5haS50cyIsICJwcm92aWRlcnMvZ2VtaW5pLnRzIiwgInByb3ZpZGVycy9vbGxhbWEudHMiLCAicHJvdmlkZXJzL2luZGV4LnRzIiwgIm5vZGVfbW9kdWxlcy9qcy15YW1sL2Rpc3QvanMteWFtbC5tanMiLCAic3JjL2ZpbGVjaGFuZ2VyLnRzIiwgInNyYy9tYWluLnRzIiwgInNyYy9zZXR0aW5ncy50cyIsICJzcmMvY29tcG9uZW50cy9jaGF0LnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvQ2hhdEhpc3RvcnlNYW5hZ2VyLnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvU2V0dGluZ3NNb2RhbC50cyIsICJzcmMvY29tcG9uZW50cy9jaGF0L01lc3NhZ2UudHMiLCAic3JjL2NvbXBvbmVudHMvY2hhdC9CdXR0b25zLnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvQ29uZmlybWF0aW9uTW9kYWwudHMiLCAic3JjL2NvbXBvbmVudHMvY2hhdC9jaGF0UGVyc2lzdGVuY2UudHMiLCAic3JjL2NvbXBvbmVudHMvY2hhdC9jaGF0SGlzdG9yeVV0aWxzLnRzIiwgInNyYy9jb21wb25lbnRzL3BhcnNlU2VsZWN0aW9uLnRzIiwgInNyYy9jb21wb25lbnRzL01vZGVsU2V0dGluZ3NWaWV3LnRzIiwgInNyYy9jb21wb25lbnRzL25vdGVVdGlscy50cyIsICJzcmMvY29tcG9uZW50cy9zeXN0ZW1NZXNzYWdlLnRzIl0sCiAgInNvdXJjZXNDb250ZW50IjogWyJleHBvcnQgY29uc3QgREVGQVVMVF9USVRMRV9QUk9NUFQgPSBcIllvdSBhcmUgYSB0aXRsZSBnZW5lcmF0b3IuIFlvdSB3aWxsIGdpdmUgc3VjY2luY3QgdGl0bGVzIHRoYXQgZG8gbm90IGNvbnRhaW4gYmFja3NsYXNoZXMsIGZvcndhcmQgc2xhc2hlcywgb3IgY29sb25zLiBPbmx5IGdlbmVyYXRlIGEgdGl0bGUgYXMgeW91ciByZXNwb25zZS5cIjtcclxuXHJcbi8vIFRoZSBZQU1MIHN5c3RlbSBtZXNzYWdlIG5vdyBjb3ZlcnMgY29uY2lzZW5lc3MsIGZvcmJpZGRlbiBjaGFyYWN0ZXJzLCBhbmQgb3V0cHV0IGZvcm1hdC5cclxuLy8gVGhpcyBzdW1tYXJ5IHByb21wdCBpcyBub3cgZm9jdXNlZCBvbiBzdW1tYXJpemF0aW9uIGludGVudCBvbmx5LlxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TVU1NQVJZX1BST01QVCA9IFwiU3VtbWFyaXplIHRoZSBub3RlIGNvbnRlbnQgaW4gMS0yIHNlbnRlbmNlcywgZm9jdXNpbmcgb24gdGhlIG1haW4gaWRlYXMgYW5kIHB1cnBvc2UuXCI7XHJcblxyXG4vLyBHZW5lcmFsIHN5c3RlbSBwcm9tcHQgZm9yIHRoZSBhc3Npc3RhbnRcclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfR0VORVJBTF9TWVNURU1fUFJPTVBUID0gXCJZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuXCI7XHJcblxyXG4vLyBEZWZhdWx0IHN5c3RlbSBtZXNzYWdlIGZvciBZQU1MIGF0dHJpYnV0ZSBnZW5lcmF0aW9uICh1c2VkIGluIGZpbGVjaGFuZ2VyLnRzKVxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9ZQU1MX1NZU1RFTV9NRVNTQUdFID1cclxuICAgIFwiWW91IGFyZSBhbiBhc3Npc3RhbnQgdGhhdCBnZW5lcmF0ZXMgWUFNTCBhdHRyaWJ1dGUgdmFsdWVzIGZvciBPYnNpZGlhbiBub3Rlcy4gXCIgK1xyXG4gICAgXCJSZWFkIHRoZSBub3RlIGFuZCBnZW5lcmF0ZSBhIHZhbHVlIGZvciB0aGUgc3BlY2lmaWVkIFlBTUwgZmllbGQuIFwiICtcclxuICAgIFwiT25seSBvdXRwdXQgdGhlIHZhbHVlLCBub3QgdGhlIGtleSBvciBleHRyYSB0ZXh0LlwiO1xyXG4iLCAiaW1wb3J0IHsgREVGQVVMVF9USVRMRV9QUk9NUFQsIERFRkFVTFRfU1VNTUFSWV9QUk9NUFQsIERFRkFVTFRfWUFNTF9TWVNURU1fTUVTU0FHRSwgREVGQVVMVF9HRU5FUkFMX1NZU1RFTV9QUk9NUFQgfSBmcm9tIFwiLi9wcm9tcHRzXCI7XHJcblxyXG4vKipcclxuICogQUkgQXNzaXN0YW50IFBsdWdpbiBUeXBlc1xyXG4gKiBcclxuICogVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBjb3JlIHR5cGVzIGFuZCBpbnRlcmZhY2VzIHVzZWQgdGhyb3VnaG91dCB0aGUgcGx1Z2luLlxyXG4gKiBUaGVzZSBkZWZpbml0aW9ucyBlbnN1cmUgY29uc2lzdGVuY3kgYWNyb3NzIGRpZmZlcmVudCBBSSBwcm92aWRlcnMgYW5kXHJcbiAqIG1ha2UgdGhlIGNvZGUgbW9yZSBtYWludGFpbmFibGUgYW5kIHR5cGUtc2FmZS5cclxuICovXHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyBhIGNoYXQgbWVzc2FnZSBpbiBhIGNvbnZlcnNhdGlvblxyXG4gKiBcclxuICogQHByb3BlcnR5IHJvbGUgLSBXaG8gc2VudCB0aGUgbWVzc2FnZSAoJ3N5c3RlbScsICd1c2VyJywgb3IgJ2Fzc2lzdGFudCcpXHJcbiAqIEBwcm9wZXJ0eSBjb250ZW50IC0gVGhlIGFjdHVhbCB0ZXh0IGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2VcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZSB7XHJcbiAgICByb2xlOiAnc3lzdGVtJyB8ICd1c2VyJyB8ICdhc3Npc3RhbnQnO1xyXG4gICAgY29udGVudDogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogT3B0aW9ucyBmb3IgZ2VuZXJhdGluZyBBSSBjb21wbGV0aW9uc1xyXG4gKiBcclxuICogVGhlc2Ugc2V0dGluZ3MgY29udHJvbCBob3cgdGhlIEFJIGdlbmVyYXRlcyBpdHMgcmVzcG9uc2UuXHJcbiAqIE5vdCBhbGwgb3B0aW9ucyBhcmUgc3VwcG9ydGVkIGJ5IGFsbCBwcm92aWRlcnMuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb25PcHRpb25zIHtcclxuICAgIHRlbXBlcmF0dXJlPzogbnVtYmVyO1xyXG4gICAgbWF4VG9rZW5zPzogbnVtYmVyO1xyXG4gICAgc3RyZWFtQ2FsbGJhY2s/OiAoY2h1bms6IHN0cmluZykgPT4gdm9pZDtcclxuICAgIGFib3J0Q29udHJvbGxlcj86IEFib3J0Q29udHJvbGxlcjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlc3VsdCBvZiB0ZXN0aW5nIGFuIEFJIHByb3ZpZGVyIGNvbm5lY3Rpb25cclxuICogXHJcbiAqIEBwcm9wZXJ0eSBzdWNjZXNzIC0gV2hldGhlciB0aGUgY29ubmVjdGlvbiB0ZXN0IHBhc3NlZFxyXG4gKiBAcHJvcGVydHkgbWVzc2FnZSAtIEh1bWFuLXJlYWRhYmxlIHJlc3VsdCBtZXNzYWdlXHJcbiAqIEBwcm9wZXJ0eSBtb2RlbHMgLSBMaXN0IG9mIGF2YWlsYWJsZSBtb2RlbHMgKGlmIHRlc3Qgc3VjY2Vzc2Z1bClcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29ubmVjdGlvblRlc3RSZXN1bHQge1xyXG4gICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgIG1vZGVscz86IHN0cmluZ1tdO1xyXG59XHJcblxyXG4vKipcclxuICogQ29tbW9uIGludGVyZmFjZSBmb3IgYWxsIEFJIHByb3ZpZGVyc1xyXG4gKiBcclxuICogVGhpcyBpbnRlcmZhY2UgZW5zdXJlcyB0aGF0IGFsbCBBSSBwcm92aWRlcnMgKE9wZW5BSSwgQW50aHJvcGljLCBldGMuKVxyXG4gKiBpbXBsZW1lbnQgdGhlIHNhbWUgYmFzaWMgZnVuY3Rpb25hbGl0eSwgbWFraW5nIGl0IGVhc3kgdG8gc3dpdGNoIGJldHdlZW4gdGhlbS5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQUlQcm92aWRlciB7XHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIGNvbXBsZXRpb24gZnJvbSB0aGUgQUkgbW9kZWxcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIC0gVGhlIGNvbnZlcnNhdGlvbiBoaXN0b3J5XHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFNldHRpbmdzIGZvciB0aGlzIGNvbXBsZXRpb25cclxuICAgICAqIEByZXR1cm5zIFByb21pc2UgdGhhdCByZXNvbHZlcyB3aGVuIHRoZSBjb21wbGV0aW9uIGlzIGZpbmlzaGVkXHJcbiAgICAgKi9cclxuICAgIGdldENvbXBsZXRpb24obWVzc2FnZXM6IE1lc3NhZ2VbXSwgb3B0aW9uczogQ29tcGxldGlvbk9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBtb2RlbHMgZnJvbSB0aGlzIHByb3ZpZGVyXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIGxpc3Qgb2YgbW9kZWwgbmFtZXNcclxuICAgICAqL1xyXG4gICAgZ2V0QXZhaWxhYmxlTW9kZWxzKCk6IFByb21pc2U8c3RyaW5nW10+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGVzdCB0aGUgY29ubmVjdGlvbiB0byB0aGlzIHByb3ZpZGVyXHJcbiAgICAgKiBcclxuICAgICAqIFZlcmlmaWVzIEFQSSBrZXlzLCBzZXJ2ZXIgY29ubmVjdGlvbnMsIGFuZCBwZXJtaXNzaW9ucy5cclxuICAgICAqIEFsc28gZmV0Y2hlcyB0aGUgbGlzdCBvZiBhdmFpbGFibGUgbW9kZWxzIGlmIHN1Y2Nlc3NmdWwuXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIHRlc3QgcmVzdWx0c1xyXG4gICAgICovXHJcbiAgICB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPENvbm5lY3Rpb25UZXN0UmVzdWx0PjtcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBZQU1MIGF0dHJpYnV0ZSBnZW5lcmF0b3IgZm9yIHRoZSBzZXR0aW5ncyBVSVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBZYW1sQXR0cmlidXRlR2VuZXJhdG9yIHtcclxuICAgIGF0dHJpYnV0ZU5hbWU6IHN0cmluZzsgLy8gVGhlIFlBTUwgZmllbGQgdG8gaW5zZXJ0L3VwZGF0ZVxyXG4gICAgcHJvbXB0OiBzdHJpbmc7ICAgICAgICAvLyBUaGUgTExNIHByb21wdCB0byB1c2UgZm9yIGdlbmVyYXRpbmcgdGhlIHZhbHVlXHJcbiAgICBvdXRwdXRNb2RlOiBcImNsaXBib2FyZFwiIHwgXCJtZXRhZGF0YVwiOyAvLyBPdXRwdXQgbW9kZVxyXG4gICAgY29tbWFuZE5hbWU6IHN0cmluZzsgICAvLyBUaGUgbmFtZS9sYWJlbCBmb3IgdGhlIGNvbW1hbmRcclxufVxyXG5cclxuLyoqXHJcbiAqIFBsdWdpbiBTZXR0aW5nc1xyXG4gKiBcclxuICogVGhlc2Ugc2V0dGluZ3MgY29udHJvbCBob3cgdGhlIEFJIEFzc2lzdGFudCBwbHVnaW4gd29ya3MuXHJcbiAqIFRoZXkgYXJlIHNhdmVkIGJldHdlZW4gc2Vzc2lvbnMgYW5kIGNhbiBiZSBjb25maWd1cmVkIGluIHRoZSBzZXR0aW5ncyB0YWIuXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE15UGx1Z2luU2V0dGluZ3Mge1xyXG4gICAgLyoqIFdoaWNoIEFJIHByb3ZpZGVyIHRvIHVzZSAqL1xyXG4gICAgcHJvdmlkZXI6ICdvcGVuYWknIHwgJ2FudGhyb3BpYycgfCAnZ2VtaW5pJyB8ICdvbGxhbWEnO1xyXG4gICAgcmVmZXJlbmNlQ3VycmVudE5vdGU6IGJvb2xlYW47XHJcblxyXG4gICAgLyoqIE9wZW5BSS1zcGVjaWZpYyBzZXR0aW5ncyAqL1xyXG4gICAgb3BlbmFpU2V0dGluZ3M6IHtcclxuICAgICAgICBhcGlLZXk6IHN0cmluZztcclxuICAgICAgICBtb2RlbDogc3RyaW5nO1xyXG4gICAgICAgIGF2YWlsYWJsZU1vZGVsczogc3RyaW5nW107XHJcbiAgICAgICAgbGFzdFRlc3RSZXN1bHQ/OiB7XHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbnVtYmVyO1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqIEFudGhyb3BpYy1zcGVjaWZpYyBzZXR0aW5ncyAqL1xyXG4gICAgYW50aHJvcGljU2V0dGluZ3M6IHtcclxuICAgICAgICBhcGlLZXk6IHN0cmluZztcclxuICAgICAgICBtb2RlbDogc3RyaW5nO1xyXG4gICAgICAgIGF2YWlsYWJsZU1vZGVsczogc3RyaW5nW107XHJcbiAgICAgICAgbGFzdFRlc3RSZXN1bHQ/OiB7XHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbnVtYmVyO1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqIEdvb2dsZSBHZW1pbmktc3BlY2lmaWMgc2V0dGluZ3MgKi9cclxuICAgIGdlbWluaVNldHRpbmdzOiB7XHJcbiAgICAgICAgYXBpS2V5OiBzdHJpbmc7XHJcbiAgICAgICAgbW9kZWw6IHN0cmluZztcclxuICAgICAgICBhdmFpbGFibGVNb2RlbHM6IHN0cmluZ1tdO1xyXG4gICAgICAgIGxhc3RUZXN0UmVzdWx0Pzoge1xyXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG51bWJlcjtcclxuICAgICAgICAgICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgICAgICAgICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiBPbGxhbWEtc3BlY2lmaWMgc2V0dGluZ3MgKi9cclxuICAgIG9sbGFtYVNldHRpbmdzOiB7XHJcbiAgICAgICAgc2VydmVyVXJsOiBzdHJpbmc7XHJcbiAgICAgICAgbW9kZWw6IHN0cmluZztcclxuICAgICAgICBhdmFpbGFibGVNb2RlbHM6IHN0cmluZ1tdO1xyXG4gICAgICAgIGxhc3RUZXN0UmVzdWx0Pzoge1xyXG4gICAgICAgICAgICB0aW1lc3RhbXA6IG51bWJlcjtcclxuICAgICAgICAgICAgc3VjY2VzczogYm9vbGVhbjtcclxuICAgICAgICAgICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgICAgIH07XHJcbiAgICB9O1xyXG5cclxuICAgIC8qKiBTZXR0aW5ncyB0aGF0IGFwcGx5IHRvIGFsbCBwcm92aWRlcnMgKi9cclxuICAgIHN5c3RlbU1lc3NhZ2U6IHN0cmluZztcclxuICAgIHRlbXBlcmF0dXJlOiBudW1iZXI7XHJcbiAgICBtYXhUb2tlbnM6IG51bWJlcjtcclxuICAgIGluY2x1ZGVEYXRlV2l0aFN5c3RlbU1lc3NhZ2U6IGJvb2xlYW47XHJcbiAgICBpbmNsdWRlVGltZVdpdGhTeXN0ZW1NZXNzYWdlOiBib29sZWFuO1xyXG4gICAgZW5hYmxlU3RyZWFtaW5nOiBib29sZWFuO1xyXG4gICAgYXV0b09wZW5Nb2RlbFNldHRpbmdzOiBib29sZWFuO1xyXG4gICAgZW5hYmxlT2JzaWRpYW5MaW5rczogYm9vbGVhbjtcclxuICAgIC8qKiBPdXRwdXQgbW9kZSBmb3IgZ2VuZXJhdGVkIG5vdGUgdGl0bGU6IGNsaXBib2FyZCwgcmVwbGFjZS1maWxlbmFtZSwgb3IgbWV0YWRhdGEgKi9cclxuICAgIHRpdGxlT3V0cHV0TW9kZT86IFwiY2xpcGJvYXJkXCIgfCBcInJlcGxhY2UtZmlsZW5hbWVcIiB8IFwibWV0YWRhdGFcIjtcclxuICAgIC8qKiBPdXRwdXQgbW9kZSBmb3IgZ2VuZXJhdGVkIG5vdGUgc3VtbWFyeTogY2xpcGJvYXJkIG9yIG1ldGFkYXRhICovXHJcbiAgICBzdW1tYXJ5T3V0cHV0TW9kZT86IFwiY2xpcGJvYXJkXCIgfCBcIm1ldGFkYXRhXCI7XHJcbiAgICAvKiogVGhlIHN0cmluZyB0aGF0IHNlcGFyYXRlcyBjaGF0IG1lc3NhZ2VzICovXHJcbiAgICBjaGF0U2VwYXJhdG9yOiBzdHJpbmc7XHJcbiAgICAvKiogVGhlIHN0cmluZyB0aGF0IHN0YXJ0cyBjaGF0IG1lc3NhZ2VzIGluIGEgbm90ZSwgaWYgcHJlc2VudCAqL1xyXG4gICAgY2hhdFN0YXJ0U3RyaW5nPzogc3RyaW5nO1xyXG4gICAgLyoqIFRoZSBzdHJpbmcgdGhhdCBlbmRzIGNoYXQgbWVzc2FnZXMgaW4gYSBub3RlLCBpZiBwcmVzZW50ICovXHJcbiAgICBjaGF0RW5kU3RyaW5nPzogc3RyaW5nO1xyXG4gICAgZW5hYmxlQ29udGV4dE5vdGVzOiBib29sZWFuO1xyXG4gICAgY29udGV4dE5vdGVzOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqIFByb21wdHMgZm9yIHRpdGxlIGFuZCBzdW1tYXJ5IGdlbmVyYXRpb24gKi9cclxuICAgIHRpdGxlUHJvbXB0OiBzdHJpbmc7XHJcbiAgICBzdW1tYXJ5UHJvbXB0OiBzdHJpbmc7XHJcblxyXG4gICAgLyoqIENoYXQgaGlzdG9yeSBzZXR0aW5ncyAqL1xyXG4gICAgbWF4U2Vzc2lvbnM6IG51bWJlcjtcclxuICAgIGF1dG9TYXZlU2Vzc2lvbnM6IGJvb2xlYW47XHJcbiAgICBzZXNzaW9uczogQ2hhdFNlc3Npb25bXTtcclxuICAgIGFjdGl2ZVNlc3Npb25JZD86IHN0cmluZztcclxuXHJcbiAgICAvKipcclxuICAgICAqIElmIHRydWUsIHJlY3Vyc2l2ZWx5IGV4cGFuZCBsaW5rcyB3aXRoaW4gZmV0Y2hlZCBub3RlcyAod2l0aCBsb29wIHByb3RlY3Rpb24pXHJcbiAgICAgKi9cclxuICAgIGV4cGFuZExpbmtlZE5vdGVzUmVjdXJzaXZlbHk/OiBib29sZWFuO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogTWF4aW11bSBkZXB0aCBmb3IgcmVjdXJzaXZlbHkgZXhwYW5kaW5nIGxpbmtlZCBub3Rlcy4gMCA9IG5vIHJlY3Vyc2lvbiwgMSA9IGRpcmVjdCBsaW5rcyBvbmx5LCBldGMuXHJcbiAgICAgKi9cclxuICAgIG1heExpbmtFeHBhbnNpb25EZXB0aD86IG51bWJlcjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEZvbGRlciBwYXRoIChyZWxhdGl2ZSB0byB2YXVsdCByb290KSB3aGVyZSBjaGF0IG5vdGVzIHdpbGwgYmUgc2F2ZWQuIElmIGVtcHR5LCBzYXZlcyB0byB2YXVsdCByb290LlxyXG4gICAgICovXHJcbiAgICBjaGF0Tm90ZUZvbGRlcj86IHN0cmluZztcclxuXHJcbiAgICAvKiogWUFNTCBhdHRyaWJ1dGUgZ2VuZXJhdG9ycyBmb3IgdGhlIHNldHRpbmdzIFVJICovXHJcbiAgICB5YW1sQXR0cmlidXRlR2VuZXJhdG9ycz86IFlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JbXTtcclxufVxyXG5cclxuLyoqXHJcbiAqIERlZmF1bHQgc2V0dGluZ3MgdXNlZCB3aGVuIGluaXRpYWxpemluZyB0aGUgcGx1Z2luXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogTXlQbHVnaW5TZXR0aW5ncyA9IHtcclxuICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlOiBmYWxzZSxcclxuICAgIHByb3ZpZGVyOiAnb3BlbmFpJyxcclxuICAgIG9wZW5haVNldHRpbmdzOiB7XHJcbiAgICAgICAgYXBpS2V5OiAnJyxcclxuICAgICAgICBtb2RlbDogJ2dwdC00LjEnLFxyXG4gICAgICAgIGF2YWlsYWJsZU1vZGVsczogW11cclxuICAgIH0sXHJcbiAgICBhbnRocm9waWNTZXR0aW5nczoge1xyXG4gICAgICAgIGFwaUtleTogJycsXHJcbiAgICAgICAgbW9kZWw6ICdjbGF1ZGUtMy01LXNvbm5ldC1sYXRlc3QnLFxyXG4gICAgICAgIGF2YWlsYWJsZU1vZGVsczogW11cclxuICAgIH0sXHJcbiAgICBnZW1pbmlTZXR0aW5nczoge1xyXG4gICAgICAgIGFwaUtleTogJycsXHJcbiAgICAgICAgbW9kZWw6ICdnZW1pbmktMi41LWZsYXNoLXByZXZpZXctMDUtMjAnLFxyXG4gICAgICAgIGF2YWlsYWJsZU1vZGVsczogW11cclxuICAgIH0sXHJcbiAgICBvbGxhbWFTZXR0aW5nczoge1xyXG4gICAgICAgIHNlcnZlclVybDogJ2h0dHA6Ly9sb2NhbGhvc3Q6MTE0MzQnLFxyXG4gICAgICAgIG1vZGVsOiAnbGxhbWEyJyxcclxuICAgICAgICBhdmFpbGFibGVNb2RlbHM6IFtdXHJcbiAgICB9LFxyXG4gICAgc3lzdGVtTWVzc2FnZTogREVGQVVMVF9HRU5FUkFMX1NZU1RFTV9QUk9NUFQsXHJcbiAgICB0ZW1wZXJhdHVyZTogMC43LFxyXG4gICAgbWF4VG9rZW5zOiAxMDAwLFxyXG4gICAgaW5jbHVkZURhdGVXaXRoU3lzdGVtTWVzc2FnZTogZmFsc2UsXHJcbiAgICBpbmNsdWRlVGltZVdpdGhTeXN0ZW1NZXNzYWdlOiBmYWxzZSxcclxuICAgIGVuYWJsZVN0cmVhbWluZzogdHJ1ZSxcclxuICAgIGF1dG9PcGVuTW9kZWxTZXR0aW5nczogdHJ1ZSxcclxuICAgIGVuYWJsZU9ic2lkaWFuTGlua3M6IHRydWUsXHJcbiAgICB0aXRsZU91dHB1dE1vZGU6IFwiY2xpcGJvYXJkXCIsXHJcbiAgICBzdW1tYXJ5T3V0cHV0TW9kZTogXCJjbGlwYm9hcmRcIixcclxuICAgIGNoYXRTZXBhcmF0b3I6ICctLS0tJyxcclxuICAgIGNoYXRTdGFydFN0cmluZzogdW5kZWZpbmVkLFxyXG4gICAgY2hhdEVuZFN0cmluZzogdW5kZWZpbmVkLFxyXG4gICAgZW5hYmxlQ29udGV4dE5vdGVzOiBmYWxzZSxcclxuICAgIGNvbnRleHROb3RlczogJycsXHJcblxyXG4gICAgdGl0bGVQcm9tcHQ6IERFRkFVTFRfVElUTEVfUFJPTVBULFxyXG4gICAgc3VtbWFyeVByb21wdDogREVGQVVMVF9TVU1NQVJZX1BST01QVCxcclxuXHJcbiAgICBtYXhTZXNzaW9uczogMTAsXHJcbiAgICBhdXRvU2F2ZVNlc3Npb25zOiB0cnVlLFxyXG4gICAgc2Vzc2lvbnM6IFtdLFxyXG4gICAgYWN0aXZlU2Vzc2lvbklkOiB1bmRlZmluZWQsXHJcblxyXG4gICAgZXhwYW5kTGlua2VkTm90ZXNSZWN1cnNpdmVseTogZmFsc2UsXHJcbiAgICBtYXhMaW5rRXhwYW5zaW9uRGVwdGg6IDIsXHJcblxyXG4gICAgY2hhdE5vdGVGb2xkZXI6ICcnLCAvLyBEZWZhdWx0IHRvIHZhdWx0IHJvb3RcclxuXHJcbiAgICB5YW1sQXR0cmlidXRlR2VuZXJhdG9yczogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgYXR0cmlidXRlTmFtZTogXCJzdW1tYXJ5XCIsXHJcbiAgICAgICAgICAgIHByb21wdDogREVGQVVMVF9TVU1NQVJZX1BST01QVCxcclxuICAgICAgICAgICAgb3V0cHV0TW9kZTogXCJtZXRhZGF0YVwiLFxyXG4gICAgICAgICAgICBjb21tYW5kTmFtZTogXCJHZW5lcmF0ZSBZQU1MOiBzdW1tYXJ5XCJcclxuICAgICAgICB9XHJcbiAgICBdXHJcbn07XHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyBhIGNoYXQgc2Vzc2lvblxyXG4gKiBcclxuICogQHByb3BlcnR5IGlkIC0gVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBzZXNzaW9uXHJcbiAqIEBwcm9wZXJ0eSBuYW1lIC0gSHVtYW4tcmVhZGFibGUgbmFtZSBmb3IgdGhlIHNlc3Npb25cclxuICogQHByb3BlcnR5IGNyZWF0ZWQgLSBUaW1lc3RhbXAgd2hlbiB0aGUgc2Vzc2lvbiB3YXMgY3JlYXRlZFxyXG4gKiBAcHJvcGVydHkgbGFzdFVwZGF0ZWQgLSBUaW1lc3RhbXAgd2hlbiB0aGUgc2Vzc2lvbiB3YXMgbGFzdCB1cGRhdGVkXHJcbiAqIEBwcm9wZXJ0eSBtZXNzYWdlcyAtIExpc3Qgb2YgbWVzc2FnZXMgaW4gdGhlIHNlc3Npb25cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdFNlc3Npb24ge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGNyZWF0ZWQ6IG51bWJlcjtcclxuICAgIGxhc3RVcGRhdGVkOiBudW1iZXI7XHJcbiAgICBtZXNzYWdlczogTWVzc2FnZVtdO1xyXG59XHJcbiIsICIvKipcclxuICogQmFzZSBBSSBQcm92aWRlciBJbXBsZW1lbnRhdGlvblxyXG4gKiBcclxuICogVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBiYXNlIGNsYXNzIGZvciBBSSBwcm92aWRlcnMgd2l0aCBzaGFyZWQgZnVuY3Rpb25hbGl0eVxyXG4gKiBhbmQgY29tbW9uIGVycm9yIGhhbmRsaW5nIHBhdHRlcm5zLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFJUHJvdmlkZXIsIE1lc3NhZ2UsIENvbXBsZXRpb25PcHRpb25zLCBDb25uZWN0aW9uVGVzdFJlc3VsdCB9IGZyb20gJy4uL3NyYy90eXBlcyc7XHJcblxyXG4vKipcclxuICogQ29tbW9uIGVycm9yIHR5cGVzIGFjcm9zcyBwcm92aWRlcnNcclxuICovXHJcbmV4cG9ydCBlbnVtIFByb3ZpZGVyRXJyb3JUeXBlIHtcclxuICAgIEludmFsaWRBcGlLZXkgPSAnaW52YWxpZF9hcGlfa2V5JyxcclxuICAgIFJhdGVMaW1pdCA9ICdyYXRlX2xpbWl0JyxcclxuICAgIEludmFsaWRSZXF1ZXN0ID0gJ2ludmFsaWRfcmVxdWVzdCcsXHJcbiAgICBTZXJ2ZXJFcnJvciA9ICdzZXJ2ZXJfZXJyb3InLFxyXG4gICAgTmV0d29ya0Vycm9yID0gJ25ldHdvcmtfZXJyb3InXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCYXNlIGVycm9yIGNsYXNzIGZvciBwcm92aWRlci1zcGVjaWZpYyBlcnJvcnNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBQcm92aWRlckVycm9yIGV4dGVuZHMgRXJyb3Ige1xyXG4gICAgdHlwZTogUHJvdmlkZXJFcnJvclR5cGU7XHJcbiAgICBzdGF0dXNDb2RlPzogbnVtYmVyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHR5cGU6IFByb3ZpZGVyRXJyb3JUeXBlLCBtZXNzYWdlOiBzdHJpbmcsIHN0YXR1c0NvZGU/OiBudW1iZXIpIHtcclxuICAgICAgICBzdXBlcihtZXNzYWdlKTtcclxuICAgICAgICB0aGlzLnR5cGUgPSB0eXBlO1xyXG4gICAgICAgIHRoaXMuc3RhdHVzQ29kZSA9IHN0YXR1c0NvZGU7XHJcbiAgICAgICAgdGhpcy5uYW1lID0gJ1Byb3ZpZGVyRXJyb3InO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQmFzZSBjbGFzcyBmb3IgQUkgcHJvdmlkZXJzIGltcGxlbWVudGluZyBjb21tb24gZnVuY3Rpb25hbGl0eVxyXG4gKi9cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEJhc2VQcm92aWRlciBpbXBsZW1lbnRzIEFJUHJvdmlkZXIge1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGFwaUtleTogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IGJhc2VVcmw6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBtb2RlbDogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgY29tcGxldGlvbiBmcm9tIHRoZSBBSSBtb2RlbFxyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCBnZXRDb21wbGV0aW9uKG1lc3NhZ2VzOiBNZXNzYWdlW10sIG9wdGlvbnM6IENvbXBsZXRpb25PcHRpb25zKTogUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhdmFpbGFibGUgbW9kZWxzXHJcbiAgICAgKi9cclxuICAgIGFic3RyYWN0IGdldEF2YWlsYWJsZU1vZGVscygpOiBQcm9taXNlPHN0cmluZ1tdPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlc3QgY29ubmVjdGlvbiB0byB0aGUgcHJvdmlkZXJcclxuICAgICAqL1xyXG4gICAgYWJzdHJhY3QgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxDb25uZWN0aW9uVGVzdFJlc3VsdD47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGUgY29tbW9uIEhUVFAgZXJyb3JzXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBoYW5kbGVIdHRwRXJyb3IoZXJyb3I6IGFueSk6IG5ldmVyIHtcclxuICAgICAgICAvLyBIYW5kbGUgUmVzcG9uc2Ugb2JqZWN0cyBmcm9tIGZldGNoIEFQSVxyXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IGVycm9yLnN0YXR1cztcclxuICAgICAgICAgICAgc3dpdGNoIChzdGF0dXMpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDAxOlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm92aWRlckVycm9yVHlwZS5JbnZhbGlkQXBpS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnSW52YWxpZCBBUEkga2V5JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDI5OlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm92aWRlckVycm9yVHlwZS5SYXRlTGltaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdSYXRlIGxpbWl0IGV4Y2VlZGVkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNDAwOlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm92aWRlckVycm9yVHlwZS5JbnZhbGlkUmVxdWVzdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ0ludmFsaWQgcmVxdWVzdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDUwMDpcclxuICAgICAgICAgICAgICAgIGNhc2UgNTAyOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA1MDM6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDUwNDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuU2VydmVyRXJyb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdTZXJ2ZXIgZXJyb3Igb2NjdXJyZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuU2VydmVyRXJyb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBVbmtub3duIGVycm9yIG9jY3VycmVkOiAke3N0YXR1c31gLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBIYW5kbGUgZXJyb3Igb2JqZWN0cyB3aXRoIHJlc3BvbnNlIHByb3BlcnR5IChsaWtlIEF4aW9zIGVycm9ycylcclxuICAgICAgICBpZiAoIWVycm9yLnJlc3BvbnNlKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuTmV0d29ya0Vycm9yLFxyXG4gICAgICAgICAgICAgICAgJ05ldHdvcmsgZXJyb3Igb2NjdXJyZWQnXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzdGF0dXMgPSBlcnJvci5yZXNwb25zZS5zdGF0dXM7XHJcbiAgICAgICAgc3dpdGNoIChzdGF0dXMpIHtcclxuICAgICAgICAgICAgY2FzZSA0MDE6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBQcm92aWRlckVycm9yVHlwZS5JbnZhbGlkQXBpS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICdJbnZhbGlkIEFQSSBrZXknLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY2FzZSA0Mjk6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBQcm92aWRlckVycm9yVHlwZS5SYXRlTGltaXQsXHJcbiAgICAgICAgICAgICAgICAgICAgJ1JhdGUgbGltaXQgZXhjZWVkZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY2FzZSA0MDA6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBQcm92aWRlckVycm9yVHlwZS5JbnZhbGlkUmVxdWVzdCxcclxuICAgICAgICAgICAgICAgICAgICAnSW52YWxpZCByZXF1ZXN0JyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNhc2UgNTAwOlxyXG4gICAgICAgICAgICBjYXNlIDUwMjpcclxuICAgICAgICAgICAgY2FzZSA1MDM6XHJcbiAgICAgICAgICAgIGNhc2UgNTA0OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuU2VydmVyRXJyb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgJ1NlcnZlciBlcnJvciBvY2N1cnJlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuU2VydmVyRXJyb3IsXHJcbiAgICAgICAgICAgICAgICAgICAgYFVua25vd24gZXJyb3Igb2NjdXJyZWQ6ICR7c3RhdHVzfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZvcm1hdCBlcnJvciBtZXNzYWdlIGZvciBjb25uZWN0aW9uIHRlc3QgcmVzdWx0c1xyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgZm9ybWF0RXJyb3JNZXNzYWdlKGVycm9yOiBhbnkpOiBzdHJpbmcge1xyXG4gICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFByb3ZpZGVyRXJyb3IpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChlcnJvci50eXBlKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFByb3ZpZGVyRXJyb3JUeXBlLkludmFsaWRBcGlLZXk6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdJbnZhbGlkIEFQSSBrZXkuIFBsZWFzZSBjaGVjayB5b3VyIGNyZWRlbnRpYWxzLic7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFByb3ZpZGVyRXJyb3JUeXBlLlJhdGVMaW1pdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ1JhdGUgbGltaXQgZXhjZWVkZWQuIFBsZWFzZSB0cnkgYWdhaW4gbGF0ZXIuJztcclxuICAgICAgICAgICAgICAgIGNhc2UgUHJvdmlkZXJFcnJvclR5cGUuTmV0d29ya0Vycm9yOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnTmV0d29yayBlcnJvci4gUGxlYXNlIGNoZWNrIHlvdXIgaW50ZXJuZXQgY29ubmVjdGlvbi4nO1xyXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZXJyb3IubWVzc2FnZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZXJyb3IubWVzc2FnZSB8fCAnQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCc7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBzdGFuZGFyZCBlcnJvciByZXNwb25zZSBmb3IgY29ubmVjdGlvbiB0ZXN0c1xyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgY3JlYXRlRXJyb3JSZXNwb25zZShlcnJvcjogYW55KTogQ29ubmVjdGlvblRlc3RSZXN1bHQge1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICBtZXNzYWdlOiB0aGlzLmZvcm1hdEVycm9yTWVzc2FnZShlcnJvcilcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG59XHJcbiIsICJleHBvcnQgY29uc3QgVkVSU0lPTiA9ICcwLjM2LjMnOyAvLyB4LXJlbGVhc2UtcGxlYXNlLXZlcnNpb25cbiIsICIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKi9cbmltcG9ydCB7IHR5cGUgUmVxdWVzdE9wdGlvbnMgfSBmcm9tIFwiLi4vY29yZS5qc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIFNoaW1zIHtcbiAga2luZDogc3RyaW5nO1xuICBmZXRjaDogYW55O1xuICBSZXF1ZXN0OiBhbnk7XG4gIFJlc3BvbnNlOiBhbnk7XG4gIEhlYWRlcnM6IGFueTtcbiAgRm9ybURhdGE6IGFueTtcbiAgQmxvYjogYW55O1xuICBGaWxlOiBhbnk7XG4gIFJlYWRhYmxlU3RyZWFtOiBhbnk7XG4gIGdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zOiA8VCA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgICBmb3JtOiBTaGltc1snRm9ybURhdGEnXSxcbiAgICBvcHRzOiBSZXF1ZXN0T3B0aW9uczxUPixcbiAgKSA9PiBQcm9taXNlPFJlcXVlc3RPcHRpb25zPFQ+PjtcbiAgZ2V0RGVmYXVsdEFnZW50OiAodXJsOiBzdHJpbmcpID0+IGFueTtcbiAgZmlsZUZyb21QYXRoOlxuICAgIHwgKChwYXRoOiBzdHJpbmcsIGZpbGVuYW1lPzogc3RyaW5nLCBvcHRpb25zPzoge30pID0+IFByb21pc2U8U2hpbXNbJ0ZpbGUnXT4pXG4gICAgfCAoKHBhdGg6IHN0cmluZywgb3B0aW9ucz86IHt9KSA9PiBQcm9taXNlPFNoaW1zWydGaWxlJ10+KTtcbiAgaXNGc1JlYWRTdHJlYW06ICh2YWx1ZTogYW55KSA9PiBib29sZWFuO1xufVxuXG5leHBvcnQgbGV0IGF1dG8gPSBmYWxzZTtcbmV4cG9ydCBsZXQga2luZDogU2hpbXNbJ2tpbmQnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgZmV0Y2g6IFNoaW1zWydmZXRjaCddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBSZXF1ZXN0OiBTaGltc1snUmVxdWVzdCddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBSZXNwb25zZTogU2hpbXNbJ1Jlc3BvbnNlJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IEhlYWRlcnM6IFNoaW1zWydIZWFkZXJzJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IEZvcm1EYXRhOiBTaGltc1snRm9ybURhdGEnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgQmxvYjogU2hpbXNbJ0Jsb2InXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgRmlsZTogU2hpbXNbJ0ZpbGUnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgUmVhZGFibGVTdHJlYW06IFNoaW1zWydSZWFkYWJsZVN0cmVhbSddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9uczogU2hpbXNbJ2dldE11bHRpcGFydFJlcXVlc3RPcHRpb25zJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IGdldERlZmF1bHRBZ2VudDogU2hpbXNbJ2dldERlZmF1bHRBZ2VudCddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBmaWxlRnJvbVBhdGg6IFNoaW1zWydmaWxlRnJvbVBhdGgnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgaXNGc1JlYWRTdHJlYW06IFNoaW1zWydpc0ZzUmVhZFN0cmVhbSddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuXG5leHBvcnQgZnVuY3Rpb24gc2V0U2hpbXMoc2hpbXM6IFNoaW1zLCBvcHRpb25zOiB7IGF1dG86IGJvb2xlYW4gfSA9IHsgYXV0bzogZmFsc2UgfSkge1xuICBpZiAoYXV0bykge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGB5b3UgbXVzdCBcXGBpbXBvcnQgJ0BhbnRocm9waWMtYWkvc2RrL3NoaW1zLyR7c2hpbXMua2luZH0nXFxgIGJlZm9yZSBpbXBvcnRpbmcgYW55dGhpbmcgZWxzZSBmcm9tIEBhbnRocm9waWMtYWkvc2RrYCxcbiAgICApO1xuICB9XG4gIGlmIChraW5kKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYGNhbid0IFxcYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvJHtzaGltcy5raW5kfSdcXGAgYWZ0ZXIgXFxgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy8ke2tpbmR9J1xcYGAsXG4gICAgKTtcbiAgfVxuICBhdXRvID0gb3B0aW9ucy5hdXRvO1xuICBraW5kID0gc2hpbXMua2luZDtcbiAgZmV0Y2ggPSBzaGltcy5mZXRjaDtcbiAgUmVxdWVzdCA9IHNoaW1zLlJlcXVlc3Q7XG4gIFJlc3BvbnNlID0gc2hpbXMuUmVzcG9uc2U7XG4gIEhlYWRlcnMgPSBzaGltcy5IZWFkZXJzO1xuICBGb3JtRGF0YSA9IHNoaW1zLkZvcm1EYXRhO1xuICBCbG9iID0gc2hpbXMuQmxvYjtcbiAgRmlsZSA9IHNoaW1zLkZpbGU7XG4gIFJlYWRhYmxlU3RyZWFtID0gc2hpbXMuUmVhZGFibGVTdHJlYW07XG4gIGdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zID0gc2hpbXMuZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnM7XG4gIGdldERlZmF1bHRBZ2VudCA9IHNoaW1zLmdldERlZmF1bHRBZ2VudDtcbiAgZmlsZUZyb21QYXRoID0gc2hpbXMuZmlsZUZyb21QYXRoO1xuICBpc0ZzUmVhZFN0cmVhbSA9IHNoaW1zLmlzRnNSZWFkU3RyZWFtO1xufVxuIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuZXhwb3J0IGNsYXNzIE11bHRpcGFydEJvZHkge1xuICBjb25zdHJ1Y3RvcihwdWJsaWMgYm9keTogYW55KSB7fVxuICBnZXQgW1N5bWJvbC50b1N0cmluZ1RhZ10oKTogc3RyaW5nIHtcbiAgICByZXR1cm4gJ011bHRpcGFydEJvZHknO1xuICB9XG59XG4iLCAiLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICovXG5pbXBvcnQgeyBNdWx0aXBhcnRCb2R5IH0gZnJvbSBcIi4vTXVsdGlwYXJ0Qm9keS5qc1wiO1xuaW1wb3J0IHsgdHlwZSBSZXF1ZXN0T3B0aW9ucyB9IGZyb20gXCIuLi9jb3JlLmpzXCI7XG5pbXBvcnQgeyB0eXBlIFNoaW1zIH0gZnJvbSBcIi4vcmVnaXN0cnkuanNcIjtcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFJ1bnRpbWUoeyBtYW51YWxseUltcG9ydGVkIH06IHsgbWFudWFsbHlJbXBvcnRlZD86IGJvb2xlYW4gfSA9IHt9KTogU2hpbXMge1xuICBjb25zdCByZWNvbW1lbmRhdGlvbiA9XG4gICAgbWFudWFsbHlJbXBvcnRlZCA/XG4gICAgICBgWW91IG1heSBuZWVkIHRvIHVzZSBwb2x5ZmlsbHNgXG4gICAgOiBgQWRkIG9uZSBvZiB0aGVzZSBpbXBvcnRzIGJlZm9yZSB5b3VyIGZpcnN0IFxcYGltcG9ydCBcdTIwMjYgZnJvbSAnQGFudGhyb3BpYy1haS9zZGsnXFxgOlxuLSBcXGBpbXBvcnQgJ0BhbnRocm9waWMtYWkvc2RrL3NoaW1zL25vZGUnXFxgIChpZiB5b3UncmUgcnVubmluZyBvbiBOb2RlKVxuLSBcXGBpbXBvcnQgJ0BhbnRocm9waWMtYWkvc2RrL3NoaW1zL3dlYidcXGAgKG90aGVyd2lzZSlcbmA7XG5cbiAgbGV0IF9mZXRjaCwgX1JlcXVlc3QsIF9SZXNwb25zZSwgX0hlYWRlcnM7XG4gIHRyeSB7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIF9mZXRjaCA9IGZldGNoO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBfUmVxdWVzdCA9IFJlcXVlc3Q7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIF9SZXNwb25zZSA9IFJlc3BvbnNlO1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBfSGVhZGVycyA9IEhlYWRlcnM7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYHRoaXMgZW52aXJvbm1lbnQgaXMgbWlzc2luZyB0aGUgZm9sbG93aW5nIFdlYiBGZXRjaCBBUEkgdHlwZTogJHtcbiAgICAgICAgKGVycm9yIGFzIGFueSkubWVzc2FnZVxuICAgICAgfS4gJHtyZWNvbW1lbmRhdGlvbn1gLFxuICAgICk7XG4gIH1cblxuICByZXR1cm4ge1xuICAgIGtpbmQ6ICd3ZWInLFxuICAgIGZldGNoOiBfZmV0Y2gsXG4gICAgUmVxdWVzdDogX1JlcXVlc3QsXG4gICAgUmVzcG9uc2U6IF9SZXNwb25zZSxcbiAgICBIZWFkZXJzOiBfSGVhZGVycyxcbiAgICBGb3JtRGF0YTpcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHR5cGVvZiBGb3JtRGF0YSAhPT0gJ3VuZGVmaW5lZCcgPyBGb3JtRGF0YSA6IChcbiAgICAgICAgY2xhc3MgRm9ybURhdGEge1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYGZpbGUgdXBsb2FkcyBhcmVuJ3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQgeWV0IGFzICdGb3JtRGF0YScgaXMgdW5kZWZpbmVkLiAke3JlY29tbWVuZGF0aW9ufWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSxcbiAgICBCbG9iOlxuICAgICAgdHlwZW9mIEJsb2IgIT09ICd1bmRlZmluZWQnID8gQmxvYiA6IChcbiAgICAgICAgY2xhc3MgQmxvYiB7XG4gICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIGBmaWxlIHVwbG9hZHMgYXJlbid0IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50IHlldCBhcyAnQmxvYicgaXMgdW5kZWZpbmVkLiAke3JlY29tbWVuZGF0aW9ufWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSxcbiAgICBGaWxlOlxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgdHlwZW9mIEZpbGUgIT09ICd1bmRlZmluZWQnID8gRmlsZSA6IChcbiAgICAgICAgY2xhc3MgRmlsZSB7XG4gICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgZmlsZSB1cGxvYWRzIGFyZW4ndCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCB5ZXQgYXMgJ0ZpbGUnIGlzIHVuZGVmaW5lZC4gJHtyZWNvbW1lbmRhdGlvbn1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgUmVhZGFibGVTdHJlYW06XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICB0eXBlb2YgUmVhZGFibGVTdHJlYW0gIT09ICd1bmRlZmluZWQnID8gUmVhZGFibGVTdHJlYW0gOiAoXG4gICAgICAgIGNsYXNzIFJlYWRhYmxlU3RyZWFtIHtcbiAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIGBzdHJlYW1pbmcgaXNuJ3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQgeWV0IGFzICdSZWFkYWJsZVN0cmVhbScgaXMgdW5kZWZpbmVkLiAke3JlY29tbWVuZGF0aW9ufWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSxcbiAgICBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9uczogYXN5bmMgPFQgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oXG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBmb3JtOiBGb3JtRGF0YSxcbiAgICAgIG9wdHM6IFJlcXVlc3RPcHRpb25zPFQ+LFxuICAgICk6IFByb21pc2U8UmVxdWVzdE9wdGlvbnM8VD4+ID0+ICh7XG4gICAgICAuLi5vcHRzLFxuICAgICAgYm9keTogbmV3IE11bHRpcGFydEJvZHkoZm9ybSkgYXMgYW55LFxuICAgIH0pLFxuICAgIGdldERlZmF1bHRBZ2VudDogKHVybDogc3RyaW5nKSA9PiB1bmRlZmluZWQsXG4gICAgZmlsZUZyb21QYXRoOiAoKSA9PiB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICdUaGUgYGZpbGVGcm9tUGF0aGAgZnVuY3Rpb24gaXMgb25seSBzdXBwb3J0ZWQgaW4gTm9kZS4gU2VlIHRoZSBSRUFETUUgZm9yIG1vcmUgZGV0YWlsczogaHR0cHM6Ly93d3cuZ2l0aHViLmNvbS9hbnRocm9waWNzL2FudGhyb3BpYy1zZGstdHlwZXNjcmlwdCNmaWxlLXVwbG9hZHMnLFxuICAgICAgKTtcbiAgICB9LFxuICAgIGlzRnNSZWFkU3RyZWFtOiAodmFsdWU6IGFueSkgPT4gZmFsc2UsXG4gIH07XG59XG4iLCAiZXhwb3J0ICogZnJvbSBcIi4uL3dlYi1ydW50aW1lLm1qc1wiO1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cnVudGltZS5tanMubWFwIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuaW1wb3J0ICogYXMgc2hpbXMgZnJvbSAnLi9yZWdpc3RyeS5tanMnO1xuaW1wb3J0ICogYXMgYXV0byBmcm9tICdAYW50aHJvcGljLWFpL3Nkay9fc2hpbXMvYXV0by9ydW50aW1lJztcbmlmICghc2hpbXMua2luZCkgc2hpbXMuc2V0U2hpbXMoYXV0by5nZXRSdW50aW1lKCksIHsgYXV0bzogdHJ1ZSB9KTtcbmV4cG9ydCAqIGZyb20gJy4vcmVnaXN0cnkubWpzJztcbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBjYXN0VG9FcnJvciwgSGVhZGVycyB9IGZyb20gXCIuL2NvcmUuanNcIjtcblxuZXhwb3J0IGNsYXNzIEFudGhyb3BpY0Vycm9yIGV4dGVuZHMgRXJyb3Ige31cblxuZXhwb3J0IGNsYXNzIEFQSUVycm9yPFxuICBUU3RhdHVzIGV4dGVuZHMgbnVtYmVyIHwgdW5kZWZpbmVkID0gbnVtYmVyIHwgdW5kZWZpbmVkLFxuICBUSGVhZGVycyBleHRlbmRzIEhlYWRlcnMgfCB1bmRlZmluZWQgPSBIZWFkZXJzIHwgdW5kZWZpbmVkLFxuICBURXJyb3IgZXh0ZW5kcyBPYmplY3QgfCB1bmRlZmluZWQgPSBPYmplY3QgfCB1bmRlZmluZWQsXG4+IGV4dGVuZHMgQW50aHJvcGljRXJyb3Ige1xuICAvKiogSFRUUCBzdGF0dXMgZm9yIHRoZSByZXNwb25zZSB0aGF0IGNhdXNlZCB0aGUgZXJyb3IgKi9cbiAgcmVhZG9ubHkgc3RhdHVzOiBUU3RhdHVzO1xuICAvKiogSFRUUCBoZWFkZXJzIGZvciB0aGUgcmVzcG9uc2UgdGhhdCBjYXVzZWQgdGhlIGVycm9yICovXG4gIHJlYWRvbmx5IGhlYWRlcnM6IFRIZWFkZXJzO1xuICAvKiogSlNPTiBib2R5IG9mIHRoZSByZXNwb25zZSB0aGF0IGNhdXNlZCB0aGUgZXJyb3IgKi9cbiAgcmVhZG9ubHkgZXJyb3I6IFRFcnJvcjtcblxuICByZWFkb25seSByZXF1ZXN0X2lkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKHN0YXR1czogVFN0YXR1cywgZXJyb3I6IFRFcnJvciwgbWVzc2FnZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBoZWFkZXJzOiBUSGVhZGVycykge1xuICAgIHN1cGVyKGAke0FQSUVycm9yLm1ha2VNZXNzYWdlKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UpfWApO1xuICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgdGhpcy5yZXF1ZXN0X2lkID0gaGVhZGVycz8uWydyZXF1ZXN0LWlkJ107XG4gICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgbWFrZU1lc3NhZ2Uoc3RhdHVzOiBudW1iZXIgfCB1bmRlZmluZWQsIGVycm9yOiBhbnksIG1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IG1zZyA9XG4gICAgICBlcnJvcj8ubWVzc2FnZSA/XG4gICAgICAgIHR5cGVvZiBlcnJvci5tZXNzYWdlID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgZXJyb3IubWVzc2FnZVxuICAgICAgICA6IEpTT04uc3RyaW5naWZ5KGVycm9yLm1lc3NhZ2UpXG4gICAgICA6IGVycm9yID8gSlNPTi5zdHJpbmdpZnkoZXJyb3IpXG4gICAgICA6IG1lc3NhZ2U7XG5cbiAgICBpZiAoc3RhdHVzICYmIG1zZykge1xuICAgICAgcmV0dXJuIGAke3N0YXR1c30gJHttc2d9YDtcbiAgICB9XG4gICAgaWYgKHN0YXR1cykge1xuICAgICAgcmV0dXJuIGAke3N0YXR1c30gc3RhdHVzIGNvZGUgKG5vIGJvZHkpYDtcbiAgICB9XG4gICAgaWYgKG1zZykge1xuICAgICAgcmV0dXJuIG1zZztcbiAgICB9XG4gICAgcmV0dXJuICcobm8gc3RhdHVzIGNvZGUgb3IgYm9keSknO1xuICB9XG5cbiAgc3RhdGljIGdlbmVyYXRlKFxuICAgIHN0YXR1czogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICAgIGVycm9yUmVzcG9uc2U6IE9iamVjdCB8IHVuZGVmaW5lZCxcbiAgICBtZXNzYWdlOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgaGVhZGVyczogSGVhZGVycyB8IHVuZGVmaW5lZCxcbiAgKTogQVBJRXJyb3Ige1xuICAgIGlmICghc3RhdHVzIHx8ICFoZWFkZXJzKSB7XG4gICAgICByZXR1cm4gbmV3IEFQSUNvbm5lY3Rpb25FcnJvcih7IG1lc3NhZ2UsIGNhdXNlOiBjYXN0VG9FcnJvcihlcnJvclJlc3BvbnNlKSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBlcnJvciA9IGVycm9yUmVzcG9uc2UgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcblxuICAgIGlmIChzdGF0dXMgPT09IDQwMCkge1xuICAgICAgcmV0dXJuIG5ldyBCYWRSZXF1ZXN0RXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICByZXR1cm4gbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICByZXR1cm4gbmV3IFBlcm1pc3Npb25EZW5pZWRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDQpIHtcbiAgICAgIHJldHVybiBuZXcgTm90Rm91bmRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDkpIHtcbiAgICAgIHJldHVybiBuZXcgQ29uZmxpY3RFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MjIpIHtcbiAgICAgIHJldHVybiBuZXcgVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQyOSkge1xuICAgICAgcmV0dXJuIG5ldyBSYXRlTGltaXRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID49IDUwMCkge1xuICAgICAgcmV0dXJuIG5ldyBJbnRlcm5hbFNlcnZlckVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgQVBJRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFQSVVzZXJBYm9ydEVycm9yIGV4dGVuZHMgQVBJRXJyb3I8dW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZD4ge1xuICBjb25zdHJ1Y3Rvcih7IG1lc3NhZ2UgfTogeyBtZXNzYWdlPzogc3RyaW5nIH0gPSB7fSkge1xuICAgIHN1cGVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBtZXNzYWdlIHx8ICdSZXF1ZXN0IHdhcyBhYm9ydGVkLicsIHVuZGVmaW5lZCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFQSUNvbm5lY3Rpb25FcnJvciBleHRlbmRzIEFQSUVycm9yPHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQ+IHtcbiAgY29uc3RydWN0b3IoeyBtZXNzYWdlLCBjYXVzZSB9OiB7IG1lc3NhZ2U/OiBzdHJpbmcgfCB1bmRlZmluZWQ7IGNhdXNlPzogRXJyb3IgfCB1bmRlZmluZWQgfSkge1xuICAgIHN1cGVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBtZXNzYWdlIHx8ICdDb25uZWN0aW9uIGVycm9yLicsIHVuZGVmaW5lZCk7XG4gICAgLy8gaW4gc29tZSBlbnZpcm9ubWVudHMgdGhlICdjYXVzZScgcHJvcGVydHkgaXMgYWxyZWFkeSBkZWNsYXJlZFxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAoY2F1c2UpIHRoaXMuY2F1c2UgPSBjYXVzZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvciBleHRlbmRzIEFQSUNvbm5lY3Rpb25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKHsgbWVzc2FnZSB9OiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSA9IHt9KSB7XG4gICAgc3VwZXIoeyBtZXNzYWdlOiBtZXNzYWdlID8/ICdSZXF1ZXN0IHRpbWVkIG91dC4nIH0pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCYWRSZXF1ZXN0RXJyb3IgZXh0ZW5kcyBBUElFcnJvcjw0MDAsIEhlYWRlcnM+IHt9XG5cbmV4cG9ydCBjbGFzcyBBdXRoZW50aWNhdGlvbkVycm9yIGV4dGVuZHMgQVBJRXJyb3I8NDAxLCBIZWFkZXJzPiB7fVxuXG5leHBvcnQgY2xhc3MgUGVybWlzc2lvbkRlbmllZEVycm9yIGV4dGVuZHMgQVBJRXJyb3I8NDAzLCBIZWFkZXJzPiB7fVxuXG5leHBvcnQgY2xhc3MgTm90Rm91bmRFcnJvciBleHRlbmRzIEFQSUVycm9yPDQwNCwgSGVhZGVycz4ge31cblxuZXhwb3J0IGNsYXNzIENvbmZsaWN0RXJyb3IgZXh0ZW5kcyBBUElFcnJvcjw0MDksIEhlYWRlcnM+IHt9XG5cbmV4cG9ydCBjbGFzcyBVbnByb2Nlc3NhYmxlRW50aXR5RXJyb3IgZXh0ZW5kcyBBUElFcnJvcjw0MjIsIEhlYWRlcnM+IHt9XG5cbmV4cG9ydCBjbGFzcyBSYXRlTGltaXRFcnJvciBleHRlbmRzIEFQSUVycm9yPDQyOSwgSGVhZGVycz4ge31cblxuZXhwb3J0IGNsYXNzIEludGVybmFsU2VydmVyRXJyb3IgZXh0ZW5kcyBBUElFcnJvcjxudW1iZXIsIEhlYWRlcnM+IHt9XG4iLCAiaW1wb3J0IHsgQW50aHJvcGljRXJyb3IgfSBmcm9tIFwiLi4vLi4vZXJyb3IuanNcIjtcblxuZXhwb3J0IHR5cGUgQnl0ZXMgPSBzdHJpbmcgfCBBcnJheUJ1ZmZlciB8IFVpbnQ4QXJyYXkgfCBCdWZmZXIgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4vKipcbiAqIEEgcmUtaW1wbGVtZW50YXRpb24gb2YgaHR0cHgncyBgTGluZURlY29kZXJgIGluIFB5dGhvbiB0aGF0IGhhbmRsZXMgaW5jcmVtZW50YWxseVxuICogcmVhZGluZyBsaW5lcyBmcm9tIHRleHQuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9odHRweC9ibG9iLzkyMDMzM2VhOTgxMThlOWNmNjE3ZjI0NjkwNWQ3YjIwMjUxMDk0MWMvaHR0cHgvX2RlY29kZXJzLnB5I0wyNThcbiAqL1xuZXhwb3J0IGNsYXNzIExpbmVEZWNvZGVyIHtcbiAgLy8gcHJldHRpZXItaWdub3JlXG4gIHN0YXRpYyBORVdMSU5FX0NIQVJTID0gbmV3IFNldChbJ1xcbicsICdcXHInXSk7XG4gIHN0YXRpYyBORVdMSU5FX1JFR0VYUCA9IC9cXHJcXG58W1xcblxccl0vZztcblxuICBidWZmZXI6IHN0cmluZ1tdO1xuICB0cmFpbGluZ0NSOiBib29sZWFuO1xuICB0ZXh0RGVjb2RlcjogYW55OyAvLyBUZXh0RGVjb2RlciBmb3VuZCBpbiBicm93c2Vyczsgbm90IHR5cGVkIHRvIGF2b2lkIHB1bGxpbmcgaW4gZWl0aGVyIFwiZG9tXCIgb3IgXCJub2RlXCIgdHlwZXMuXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB0aGlzLnRyYWlsaW5nQ1IgPSBmYWxzZTtcbiAgfVxuXG4gIGRlY29kZShjaHVuazogQnl0ZXMpOiBzdHJpbmdbXSB7XG4gICAgbGV0IHRleHQgPSB0aGlzLmRlY29kZVRleHQoY2h1bmspO1xuXG4gICAgaWYgKHRoaXMudHJhaWxpbmdDUikge1xuICAgICAgdGV4dCA9ICdcXHInICsgdGV4dDtcbiAgICAgIHRoaXMudHJhaWxpbmdDUiA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodGV4dC5lbmRzV2l0aCgnXFxyJykpIHtcbiAgICAgIHRoaXMudHJhaWxpbmdDUiA9IHRydWU7XG4gICAgICB0ZXh0ID0gdGV4dC5zbGljZSgwLCAtMSk7XG4gICAgfVxuXG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgdHJhaWxpbmdOZXdsaW5lID0gTGluZURlY29kZXIuTkVXTElORV9DSEFSUy5oYXModGV4dFt0ZXh0Lmxlbmd0aCAtIDFdIHx8ICcnKTtcbiAgICBsZXQgbGluZXMgPSB0ZXh0LnNwbGl0KExpbmVEZWNvZGVyLk5FV0xJTkVfUkVHRVhQKTtcblxuICAgIC8vIGlmIHRoZXJlIGlzIGEgdHJhaWxpbmcgbmV3IGxpbmUgdGhlbiB0aGUgbGFzdCBlbnRyeSB3aWxsIGJlIGFuIGVtcHR5XG4gICAgLy8gc3RyaW5nIHdoaWNoIHdlIGRvbid0IGNhcmUgYWJvdXRcbiAgICBpZiAodHJhaWxpbmdOZXdsaW5lKSB7XG4gICAgICBsaW5lcy5wb3AoKTtcbiAgICB9XG5cbiAgICBpZiAobGluZXMubGVuZ3RoID09PSAxICYmICF0cmFpbGluZ05ld2xpbmUpIHtcbiAgICAgIHRoaXMuYnVmZmVyLnB1c2gobGluZXNbMF0hKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgbGluZXMgPSBbdGhpcy5idWZmZXIuam9pbignJykgKyBsaW5lc1swXSwgLi4ubGluZXMuc2xpY2UoMSldO1xuICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB9XG5cbiAgICBpZiAoIXRyYWlsaW5nTmV3bGluZSkge1xuICAgICAgdGhpcy5idWZmZXIgPSBbbGluZXMucG9wKCkgfHwgJyddO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIGRlY29kZVRleHQoYnl0ZXM6IEJ5dGVzKTogc3RyaW5nIHtcbiAgICBpZiAoYnl0ZXMgPT0gbnVsbCkgcmV0dXJuICcnO1xuICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSByZXR1cm4gYnl0ZXM7XG5cbiAgICAvLyBOb2RlOlxuICAgIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGJ5dGVzIGluc3RhbmNlb2YgQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBieXRlcy50b1N0cmluZygpO1xuICAgICAgfVxuICAgICAgaWYgKGJ5dGVzIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20oYnl0ZXMpLnRvU3RyaW5nKCk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihcbiAgICAgICAgYFVuZXhwZWN0ZWQ6IHJlY2VpdmVkIG5vbi1VaW50OEFycmF5ICgke2J5dGVzLmNvbnN0cnVjdG9yLm5hbWV9KSBzdHJlYW0gY2h1bmsgaW4gYW4gZW52aXJvbm1lbnQgd2l0aCBhIGdsb2JhbCBcIkJ1ZmZlclwiIGRlZmluZWQsIHdoaWNoIHRoaXMgbGlicmFyeSBhc3N1bWVzIHRvIGJlIE5vZGUuIFBsZWFzZSByZXBvcnQgdGhpcyBlcnJvci5gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBCcm93c2VyXG4gICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChieXRlcyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgfHwgYnl0ZXMgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICB0aGlzLnRleHREZWNvZGVyID8/PSBuZXcgVGV4dERlY29kZXIoJ3V0ZjgnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dERlY29kZXIuZGVjb2RlKGJ5dGVzKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICBgVW5leHBlY3RlZDogcmVjZWl2ZWQgbm9uLVVpbnQ4QXJyYXkvQXJyYXlCdWZmZXIgKCR7XG4gICAgICAgICAgKGJ5dGVzIGFzIGFueSkuY29uc3RydWN0b3IubmFtZVxuICAgICAgICB9KSBpbiBhIHdlYiBwbGF0Zm9ybS4gUGxlYXNlIHJlcG9ydCB0aGlzIGVycm9yLmAsXG4gICAgICApO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihcbiAgICAgIGBVbmV4cGVjdGVkOiBuZWl0aGVyIEJ1ZmZlciBub3IgVGV4dERlY29kZXIgYXJlIGF2YWlsYWJsZSBhcyBnbG9iYWxzLiBQbGVhc2UgcmVwb3J0IHRoaXMgZXJyb3IuYCxcbiAgICApO1xuICB9XG5cbiAgZmx1c2goKTogc3RyaW5nW10ge1xuICAgIGlmICghdGhpcy5idWZmZXIubGVuZ3RoICYmICF0aGlzLnRyYWlsaW5nQ1IpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBsaW5lcyA9IFt0aGlzLmJ1ZmZlci5qb2luKCcnKV07XG4gICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB0aGlzLnRyYWlsaW5nQ1IgPSBmYWxzZTtcbiAgICByZXR1cm4gbGluZXM7XG4gIH1cbn1cbiIsICIvKipcbiAqIE1vc3QgYnJvd3NlcnMgZG9uJ3QgeWV0IGhhdmUgYXN5bmMgaXRlcmFibGUgc3VwcG9ydCBmb3IgUmVhZGFibGVTdHJlYW0sXG4gKiBhbmQgTm9kZSBoYXMgYSB2ZXJ5IGRpZmZlcmVudCB3YXkgb2YgcmVhZGluZyBieXRlcyBmcm9tIGl0cyBcIlJlYWRhYmxlU3RyZWFtXCIuXG4gKlxuICogVGhpcyBwb2x5ZmlsbCB3YXMgcHVsbGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL01hdHRpYXNCdWVsZW5zL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3B1bGwvMTIyI2lzc3VlY29tbWVudC0xNjI3MzU0NDkwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbVRvQXN5bmNJdGVyYWJsZTxUPihzdHJlYW06IGFueSk6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxUPiB7XG4gIGlmIChzdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKSByZXR1cm4gc3RyZWFtO1xuXG4gIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgcmV0dXJuIHtcbiAgICBhc3luYyBuZXh0KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgaWYgKHJlc3VsdD8uZG9uZSkgcmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayB3aGVuIHN0cmVhbSBiZWNvbWVzIGNsb3NlZFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIHdoZW4gc3RyZWFtIGJlY29tZXMgZXJyb3JlZFxuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH0sXG4gICAgYXN5bmMgcmV0dXJuKCkge1xuICAgICAgY29uc3QgY2FuY2VsUHJvbWlzZSA9IHJlYWRlci5jYW5jZWwoKTtcbiAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpO1xuICAgICAgYXdhaXQgY2FuY2VsUHJvbWlzZTtcbiAgICAgIHJldHVybiB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcbiAgICB9LFxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICB9O1xufVxuIiwgImltcG9ydCB7IFJlYWRhYmxlU3RyZWFtLCB0eXBlIFJlc3BvbnNlIH0gZnJvbSBcIi4vX3NoaW1zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBBbnRocm9waWNFcnJvciB9IGZyb20gXCIuL2Vycm9yLmpzXCI7XG5pbXBvcnQgeyBMaW5lRGVjb2RlciB9IGZyb20gXCIuL2ludGVybmFsL2RlY29kZXJzL2xpbmUuanNcIjtcbmltcG9ydCB7IFJlYWRhYmxlU3RyZWFtVG9Bc3luY0l0ZXJhYmxlIH0gZnJvbSBcIi4vaW50ZXJuYWwvc3RyZWFtLXV0aWxzLmpzXCI7XG5cbmltcG9ydCB7IGNyZWF0ZVJlc3BvbnNlSGVhZGVycyB9IGZyb20gXCIuL2NvcmUuanNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcIi4vZXJyb3IuanNcIjtcblxudHlwZSBCeXRlcyA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgVWludDhBcnJheSB8IEJ1ZmZlciB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbmV4cG9ydCB0eXBlIFNlcnZlclNlbnRFdmVudCA9IHtcbiAgZXZlbnQ6IHN0cmluZyB8IG51bGw7XG4gIGRhdGE6IHN0cmluZztcbiAgcmF3OiBzdHJpbmdbXTtcbn07XG5cbmV4cG9ydCBjbGFzcyBTdHJlYW08SXRlbT4gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPEl0ZW0+IHtcbiAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgaXRlcmF0b3I6ICgpID0+IEFzeW5jSXRlcmF0b3I8SXRlbT4sXG4gICAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyLFxuICApIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICB9XG5cbiAgc3RhdGljIGZyb21TU0VSZXNwb25zZTxJdGVtPihyZXNwb25zZTogUmVzcG9uc2UsIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcik6IFN0cmVhbTxJdGVtPiB7XG4gICAgbGV0IGNvbnN1bWVkID0gZmFsc2U7XG5cbiAgICBhc3luYyBmdW5jdGlvbiogaXRlcmF0b3IoKTogQXN5bmNJdGVyYXRvcjxJdGVtLCBhbnksIHVuZGVmaW5lZD4ge1xuICAgICAgaWYgKGNvbnN1bWVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGl0ZXJhdGUgb3ZlciBhIGNvbnN1bWVkIHN0cmVhbSwgdXNlIGAudGVlKClgIHRvIHNwbGl0IHRoZSBzdHJlYW0uJyk7XG4gICAgICB9XG4gICAgICBjb25zdW1lZCA9IHRydWU7XG4gICAgICBsZXQgZG9uZSA9IGZhbHNlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBzc2Ugb2YgX2l0ZXJTU0VNZXNzYWdlcyhyZXNwb25zZSwgY29udHJvbGxlcikpIHtcbiAgICAgICAgICBpZiAoc3NlLmV2ZW50ID09PSAnY29tcGxldGlvbicpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHlpZWxkIEpTT04ucGFyc2Uoc3NlLmRhdGEpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDb3VsZCBub3QgcGFyc2UgbWVzc2FnZSBpbnRvIEpTT046YCwgc3NlLmRhdGEpO1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGcm9tIGNodW5rOmAsIHNzZS5yYXcpO1xuICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHNzZS5ldmVudCA9PT0gJ21lc3NhZ2Vfc3RhcnQnIHx8XG4gICAgICAgICAgICBzc2UuZXZlbnQgPT09ICdtZXNzYWdlX2RlbHRhJyB8fFxuICAgICAgICAgICAgc3NlLmV2ZW50ID09PSAnbWVzc2FnZV9zdG9wJyB8fFxuICAgICAgICAgICAgc3NlLmV2ZW50ID09PSAnY29udGVudF9ibG9ja19zdGFydCcgfHxcbiAgICAgICAgICAgIHNzZS5ldmVudCA9PT0gJ2NvbnRlbnRfYmxvY2tfZGVsdGEnIHx8XG4gICAgICAgICAgICBzc2UuZXZlbnQgPT09ICdjb250ZW50X2Jsb2NrX3N0b3AnXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB5aWVsZCBKU09OLnBhcnNlKHNzZS5kYXRhKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQ291bGQgbm90IHBhcnNlIG1lc3NhZ2UgaW50byBKU09OOmAsIHNzZS5kYXRhKTtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRnJvbSBjaHVuazpgLCBzc2UucmF3KTtcbiAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc3NlLmV2ZW50ID09PSAncGluZycpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzc2UuZXZlbnQgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgIHRocm93IEFQSUVycm9yLmdlbmVyYXRlKFxuICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIGBTU0UgRXJyb3I6ICR7c3NlLmRhdGF9YCxcbiAgICAgICAgICAgICAgc3NlLmRhdGEsXG4gICAgICAgICAgICAgIGNyZWF0ZVJlc3BvbnNlSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZiB0aGUgdXNlciBjYWxscyBgc3RyZWFtLmNvbnRyb2xsZXIuYWJvcnQoKWAsIHdlIHNob3VsZCBleGl0IHdpdGhvdXQgdGhyb3dpbmcuXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5uYW1lID09PSAnQWJvcnRFcnJvcicpIHJldHVybjtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIElmIHRoZSB1c2VyIGBicmVha2BzLCBhYm9ydCB0aGUgb25nb2luZyByZXF1ZXN0LlxuICAgICAgICBpZiAoIWRvbmUpIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFN0cmVhbShpdGVyYXRvciwgY29udHJvbGxlcik7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGEgU3RyZWFtIGZyb20gYSBuZXdsaW5lLXNlcGFyYXRlZCBSZWFkYWJsZVN0cmVhbVxuICAgKiB3aGVyZSBlYWNoIGl0ZW0gaXMgYSBKU09OIHZhbHVlLlxuICAgKi9cbiAgc3RhdGljIGZyb21SZWFkYWJsZVN0cmVhbTxJdGVtPihyZWFkYWJsZVN0cmVhbTogUmVhZGFibGVTdHJlYW0sIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcik6IFN0cmVhbTxJdGVtPiB7XG4gICAgbGV0IGNvbnN1bWVkID0gZmFsc2U7XG5cbiAgICBhc3luYyBmdW5jdGlvbiogaXRlckxpbmVzKCk6IEFzeW5jR2VuZXJhdG9yPHN0cmluZywgdm9pZCwgdW5rbm93bj4ge1xuICAgICAgY29uc3QgbGluZURlY29kZXIgPSBuZXcgTGluZURlY29kZXIoKTtcblxuICAgICAgY29uc3QgaXRlciA9IFJlYWRhYmxlU3RyZWFtVG9Bc3luY0l0ZXJhYmxlPEJ5dGVzPihyZWFkYWJsZVN0cmVhbSk7XG4gICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGl0ZXIpIHtcbiAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVEZWNvZGVyLmRlY29kZShjaHVuaykpIHtcbiAgICAgICAgICB5aWVsZCBsaW5lO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lRGVjb2Rlci5mbHVzaCgpKSB7XG4gICAgICAgIHlpZWxkIGxpbmU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24qIGl0ZXJhdG9yKCk6IEFzeW5jSXRlcmF0b3I8SXRlbSwgYW55LCB1bmRlZmluZWQ+IHtcbiAgICAgIGlmIChjb25zdW1lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBpdGVyYXRlIG92ZXIgYSBjb25zdW1lZCBzdHJlYW0sIHVzZSBgLnRlZSgpYCB0byBzcGxpdCB0aGUgc3RyZWFtLicpO1xuICAgICAgfVxuICAgICAgY29uc3VtZWQgPSB0cnVlO1xuICAgICAgbGV0IGRvbmUgPSBmYWxzZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgbGluZSBvZiBpdGVyTGluZXMoKSkge1xuICAgICAgICAgIGlmIChkb25lKSBjb250aW51ZTtcbiAgICAgICAgICBpZiAobGluZSkgeWllbGQgSlNPTi5wYXJzZShsaW5lKTtcbiAgICAgICAgfVxuICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgY2FsbHMgYHN0cmVhbS5jb250cm9sbGVyLmFib3J0KClgLCB3ZSBzaG91bGQgZXhpdCB3aXRob3V0IHRocm93aW5nLlxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSByZXR1cm47XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICAvLyBJZiB0aGUgdXNlciBgYnJlYWtgcywgYWJvcnQgdGhlIG9uZ29pbmcgcmVxdWVzdC5cbiAgICAgICAgaWYgKCFkb25lKSBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBTdHJlYW0oaXRlcmF0b3IsIGNvbnRyb2xsZXIpO1xuICB9XG5cbiAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0l0ZXJhdG9yPEl0ZW0+IHtcbiAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwbGl0cyB0aGUgc3RyZWFtIGludG8gdHdvIHN0cmVhbXMgd2hpY2ggY2FuIGJlXG4gICAqIGluZGVwZW5kZW50bHkgcmVhZCBmcm9tIGF0IGRpZmZlcmVudCBzcGVlZHMuXG4gICAqL1xuICB0ZWUoKTogW1N0cmVhbTxJdGVtPiwgU3RyZWFtPEl0ZW0+XSB7XG4gICAgY29uc3QgbGVmdDogQXJyYXk8UHJvbWlzZTxJdGVyYXRvclJlc3VsdDxJdGVtPj4+ID0gW107XG4gICAgY29uc3QgcmlnaHQ6IEFycmF5PFByb21pc2U8SXRlcmF0b3JSZXN1bHQ8SXRlbT4+PiA9IFtdO1xuICAgIGNvbnN0IGl0ZXJhdG9yID0gdGhpcy5pdGVyYXRvcigpO1xuXG4gICAgY29uc3QgdGVlSXRlcmF0b3IgPSAocXVldWU6IEFycmF5PFByb21pc2U8SXRlcmF0b3JSZXN1bHQ8SXRlbT4+Pik6IEFzeW5jSXRlcmF0b3I8SXRlbT4gPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmV4dDogKCkgPT4ge1xuICAgICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgIGxlZnQucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgcmlnaHQucHVzaChyZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcXVldWUuc2hpZnQoKSE7XG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH07XG5cbiAgICByZXR1cm4gW1xuICAgICAgbmV3IFN0cmVhbSgoKSA9PiB0ZWVJdGVyYXRvcihsZWZ0KSwgdGhpcy5jb250cm9sbGVyKSxcbiAgICAgIG5ldyBTdHJlYW0oKCkgPT4gdGVlSXRlcmF0b3IocmlnaHQpLCB0aGlzLmNvbnRyb2xsZXIpLFxuICAgIF07XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgdGhpcyBzdHJlYW0gdG8gYSBuZXdsaW5lLXNlcGFyYXRlZCBSZWFkYWJsZVN0cmVhbSBvZlxuICAgKiBKU09OIHN0cmluZ2lmaWVkIHZhbHVlcyBpbiB0aGUgc3RyZWFtXG4gICAqIHdoaWNoIGNhbiBiZSB0dXJuZWQgYmFjayBpbnRvIGEgU3RyZWFtIHdpdGggYFN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW0oKWAuXG4gICAqL1xuICB0b1JlYWRhYmxlU3RyZWFtKCk6IFJlYWRhYmxlU3RyZWFtIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBsZXQgaXRlcjogQXN5bmNJdGVyYXRvcjxJdGVtPjtcbiAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5cbiAgICByZXR1cm4gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICBpdGVyID0gc2VsZltTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBwdWxsKGN0cmw6IGFueSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IGl0ZXIubmV4dCgpO1xuICAgICAgICAgIGlmIChkb25lKSByZXR1cm4gY3RybC5jbG9zZSgpO1xuXG4gICAgICAgICAgY29uc3QgYnl0ZXMgPSBlbmNvZGVyLmVuY29kZShKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAnXFxuJyk7XG5cbiAgICAgICAgICBjdHJsLmVucXVldWUoYnl0ZXMpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjdHJsLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhc3luYyBjYW5jZWwoKSB7XG4gICAgICAgIGF3YWl0IGl0ZXIucmV0dXJuPy4oKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uKiBfaXRlclNTRU1lc3NhZ2VzKFxuICByZXNwb25zZTogUmVzcG9uc2UsXG4gIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcixcbik6IEFzeW5jR2VuZXJhdG9yPFNlcnZlclNlbnRFdmVudCwgdm9pZCwgdW5rbm93bj4ge1xuICBpZiAoIXJlc3BvbnNlLmJvZHkpIHtcbiAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBBdHRlbXB0ZWQgdG8gaXRlcmF0ZSBvdmVyIGEgcmVzcG9uc2Ugd2l0aCBubyBib2R5YCk7XG4gIH1cblxuICBjb25zdCBzc2VEZWNvZGVyID0gbmV3IFNTRURlY29kZXIoKTtcbiAgY29uc3QgbGluZURlY29kZXIgPSBuZXcgTGluZURlY29kZXIoKTtcblxuICBjb25zdCBpdGVyID0gUmVhZGFibGVTdHJlYW1Ub0FzeW5jSXRlcmFibGU8Qnl0ZXM+KHJlc3BvbnNlLmJvZHkpO1xuICBmb3IgYXdhaXQgKGNvbnN0IHNzZUNodW5rIG9mIGl0ZXJTU0VDaHVua3MoaXRlcikpIHtcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZURlY29kZXIuZGVjb2RlKHNzZUNodW5rKSkge1xuICAgICAgY29uc3Qgc3NlID0gc3NlRGVjb2Rlci5kZWNvZGUobGluZSk7XG4gICAgICBpZiAoc3NlKSB5aWVsZCBzc2U7XG4gICAgfVxuICB9XG5cbiAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVEZWNvZGVyLmZsdXNoKCkpIHtcbiAgICBjb25zdCBzc2UgPSBzc2VEZWNvZGVyLmRlY29kZShsaW5lKTtcbiAgICBpZiAoc3NlKSB5aWVsZCBzc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBHaXZlbiBhbiBhc3luYyBpdGVyYWJsZSBpdGVyYXRvciwgaXRlcmF0ZXMgb3ZlciBpdCBhbmQgeWllbGRzIGZ1bGxcbiAqIFNTRSBjaHVua3MsIGkuZS4geWllbGRzIHdoZW4gYSBkb3VibGUgbmV3LWxpbmUgaXMgZW5jb3VudGVyZWQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uKiBpdGVyU1NFQ2h1bmtzKGl0ZXJhdG9yOiBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8Qnl0ZXM+KTogQXN5bmNHZW5lcmF0b3I8VWludDhBcnJheT4ge1xuICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KCk7XG5cbiAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBpdGVyYXRvcikge1xuICAgIGlmIChjaHVuayA9PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjb25zdCBiaW5hcnlDaHVuayA9XG4gICAgICBjaHVuayBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gbmV3IFVpbnQ4QXJyYXkoY2h1bmspXG4gICAgICA6IHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycgPyBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoY2h1bmspXG4gICAgICA6IGNodW5rO1xuXG4gICAgbGV0IG5ld0RhdGEgPSBuZXcgVWludDhBcnJheShkYXRhLmxlbmd0aCArIGJpbmFyeUNodW5rLmxlbmd0aCk7XG4gICAgbmV3RGF0YS5zZXQoZGF0YSk7XG4gICAgbmV3RGF0YS5zZXQoYmluYXJ5Q2h1bmssIGRhdGEubGVuZ3RoKTtcbiAgICBkYXRhID0gbmV3RGF0YTtcblxuICAgIGxldCBwYXR0ZXJuSW5kZXg7XG4gICAgd2hpbGUgKChwYXR0ZXJuSW5kZXggPSBmaW5kRG91YmxlTmV3bGluZUluZGV4KGRhdGEpKSAhPT0gLTEpIHtcbiAgICAgIHlpZWxkIGRhdGEuc2xpY2UoMCwgcGF0dGVybkluZGV4KTtcbiAgICAgIGRhdGEgPSBkYXRhLnNsaWNlKHBhdHRlcm5JbmRleCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRhdGEubGVuZ3RoID4gMCkge1xuICAgIHlpZWxkIGRhdGE7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZERvdWJsZU5ld2xpbmVJbmRleChidWZmZXI6IFVpbnQ4QXJyYXkpOiBudW1iZXIge1xuICAvLyBUaGlzIGZ1bmN0aW9uIHNlYXJjaGVzIHRoZSBidWZmZXIgZm9yIHRoZSBlbmQgcGF0dGVybnMgKFxcclxcciwgXFxuXFxuLCBcXHJcXG5cXHJcXG4pXG4gIC8vIGFuZCByZXR1cm5zIHRoZSBpbmRleCByaWdodCBhZnRlciB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbnkgcGF0dGVybixcbiAgLy8gb3IgLTEgaWYgbm9uZSBvZiB0aGUgcGF0dGVybnMgYXJlIGZvdW5kLlxuICBjb25zdCBuZXdsaW5lID0gMHgwYTsgLy8gXFxuXG4gIGNvbnN0IGNhcnJpYWdlID0gMHgwZDsgLy8gXFxyXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoIC0gMjsgaSsrKSB7XG4gICAgaWYgKGJ1ZmZlcltpXSA9PT0gbmV3bGluZSAmJiBidWZmZXJbaSArIDFdID09PSBuZXdsaW5lKSB7XG4gICAgICAvLyBcXG5cXG5cbiAgICAgIHJldHVybiBpICsgMjtcbiAgICB9XG4gICAgaWYgKGJ1ZmZlcltpXSA9PT0gY2FycmlhZ2UgJiYgYnVmZmVyW2kgKyAxXSA9PT0gY2FycmlhZ2UpIHtcbiAgICAgIC8vIFxcclxcclxuICAgICAgcmV0dXJuIGkgKyAyO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBidWZmZXJbaV0gPT09IGNhcnJpYWdlICYmXG4gICAgICBidWZmZXJbaSArIDFdID09PSBuZXdsaW5lICYmXG4gICAgICBpICsgMyA8IGJ1ZmZlci5sZW5ndGggJiZcbiAgICAgIGJ1ZmZlcltpICsgMl0gPT09IGNhcnJpYWdlICYmXG4gICAgICBidWZmZXJbaSArIDNdID09PSBuZXdsaW5lXG4gICAgKSB7XG4gICAgICAvLyBcXHJcXG5cXHJcXG5cbiAgICAgIHJldHVybiBpICsgNDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gLTE7XG59XG5cbmNsYXNzIFNTRURlY29kZXIge1xuICBwcml2YXRlIGRhdGE6IHN0cmluZ1tdO1xuICBwcml2YXRlIGV2ZW50OiBzdHJpbmcgfCBudWxsO1xuICBwcml2YXRlIGNodW5rczogc3RyaW5nW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5ldmVudCA9IG51bGw7XG4gICAgdGhpcy5kYXRhID0gW107XG4gICAgdGhpcy5jaHVua3MgPSBbXTtcbiAgfVxuXG4gIGRlY29kZShsaW5lOiBzdHJpbmcpIHtcbiAgICBpZiAobGluZS5lbmRzV2l0aCgnXFxyJykpIHtcbiAgICAgIGxpbmUgPSBsaW5lLnN1YnN0cmluZygwLCBsaW5lLmxlbmd0aCAtIDEpO1xuICAgIH1cblxuICAgIGlmICghbGluZSkge1xuICAgICAgLy8gZW1wdHkgbGluZSBhbmQgd2UgZGlkbid0IHByZXZpb3VzbHkgZW5jb3VudGVyIGFueSBtZXNzYWdlc1xuICAgICAgaWYgKCF0aGlzLmV2ZW50ICYmICF0aGlzLmRhdGEubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3Qgc3NlOiBTZXJ2ZXJTZW50RXZlbnQgPSB7XG4gICAgICAgIGV2ZW50OiB0aGlzLmV2ZW50LFxuICAgICAgICBkYXRhOiB0aGlzLmRhdGEuam9pbignXFxuJyksXG4gICAgICAgIHJhdzogdGhpcy5jaHVua3MsXG4gICAgICB9O1xuXG4gICAgICB0aGlzLmV2ZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgICAgdGhpcy5jaHVua3MgPSBbXTtcblxuICAgICAgcmV0dXJuIHNzZTtcbiAgICB9XG5cbiAgICB0aGlzLmNodW5rcy5wdXNoKGxpbmUpO1xuXG4gICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnOicpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgW2ZpZWxkbmFtZSwgXywgdmFsdWVdID0gcGFydGl0aW9uKGxpbmUsICc6Jyk7XG5cbiAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnICcpKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygxKTtcbiAgICB9XG5cbiAgICBpZiAoZmllbGRuYW1lID09PSAnZXZlbnQnKSB7XG4gICAgICB0aGlzLmV2ZW50ID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChmaWVsZG5hbWUgPT09ICdkYXRhJykge1xuICAgICAgdGhpcy5kYXRhLnB1c2godmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKiBUaGlzIGlzIGFuIGludGVybmFsIGhlbHBlciBmdW5jdGlvbiB0aGF0J3MganVzdCB1c2VkIGZvciB0ZXN0aW5nICovXG5leHBvcnQgZnVuY3Rpb24gX2RlY29kZUNodW5rcyhjaHVua3M6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICBjb25zdCBkZWNvZGVyID0gbmV3IExpbmVEZWNvZGVyKCk7XG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBmb3IgKGNvbnN0IGNodW5rIG9mIGNodW5rcykge1xuICAgIGxpbmVzLnB1c2goLi4uZGVjb2Rlci5kZWNvZGUoY2h1bmspKTtcbiAgfVxuXG4gIHJldHVybiBsaW5lcztcbn1cblxuZnVuY3Rpb24gcGFydGl0aW9uKHN0cjogc3RyaW5nLCBkZWxpbWl0ZXI6IHN0cmluZyk6IFtzdHJpbmcsIHN0cmluZywgc3RyaW5nXSB7XG4gIGNvbnN0IGluZGV4ID0gc3RyLmluZGV4T2YoZGVsaW1pdGVyKTtcbiAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgIHJldHVybiBbc3RyLnN1YnN0cmluZygwLCBpbmRleCksIGRlbGltaXRlciwgc3RyLnN1YnN0cmluZyhpbmRleCArIGRlbGltaXRlci5sZW5ndGgpXTtcbiAgfVxuXG4gIHJldHVybiBbc3RyLCAnJywgJyddO1xufVxuIiwgImltcG9ydCB7IHR5cGUgUmVxdWVzdE9wdGlvbnMgfSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5pbXBvcnQge1xuICBGb3JtRGF0YSxcbiAgRmlsZSxcbiAgdHlwZSBCbG9iLFxuICB0eXBlIEZpbGVQcm9wZXJ0eUJhZyxcbiAgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMsXG4gIHR5cGUgRnNSZWFkU3RyZWFtLFxuICBpc0ZzUmVhZFN0cmVhbSxcbn0gZnJvbSBcIi4vX3NoaW1zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBNdWx0aXBhcnRCb2R5IH0gZnJvbSBcIi4vX3NoaW1zL011bHRpcGFydEJvZHkuanNcIjtcbmV4cG9ydCB7IGZpbGVGcm9tUGF0aCB9IGZyb20gXCIuL19zaGltcy9pbmRleC5qc1wiO1xuXG50eXBlIEJsb2JMaWtlUGFydCA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgQXJyYXlCdWZmZXJWaWV3IHwgQmxvYkxpa2UgfCBVaW50OEFycmF5IHwgRGF0YVZpZXc7XG5leHBvcnQgdHlwZSBCbG9iUGFydCA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgQXJyYXlCdWZmZXJWaWV3IHwgQmxvYiB8IFVpbnQ4QXJyYXkgfCBEYXRhVmlldztcblxuLyoqXG4gKiBUeXBpY2FsbHksIHRoaXMgaXMgYSBuYXRpdmUgXCJGaWxlXCIgY2xhc3MuXG4gKlxuICogV2UgcHJvdmlkZSB0aGUge0BsaW5rIHRvRmlsZX0gdXRpbGl0eSB0byBjb252ZXJ0IGEgdmFyaWV0eSBvZiBvYmplY3RzXG4gKiBpbnRvIHRoZSBGaWxlIGNsYXNzLlxuICpcbiAqIEZvciBjb252ZW5pZW5jZSwgeW91IGNhbiBhbHNvIHBhc3MgYSBmZXRjaCBSZXNwb25zZSwgb3IgaW4gTm9kZSxcbiAqIHRoZSByZXN1bHQgb2YgZnMuY3JlYXRlUmVhZFN0cmVhbSgpLlxuICovXG5leHBvcnQgdHlwZSBVcGxvYWRhYmxlID0gRmlsZUxpa2UgfCBSZXNwb25zZUxpa2UgfCBGc1JlYWRTdHJlYW07XG5cbi8qKlxuICogSW50ZW5kZWQgdG8gbWF0Y2ggd2ViLkJsb2IsIG5vZGUuQmxvYiwgbm9kZS1mZXRjaC5CbG9iLCBldGMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmxvYkxpa2Uge1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9CbG9iL3NpemUpICovXG4gIHJlYWRvbmx5IHNpemU6IG51bWJlcjtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYi90eXBlKSAqL1xuICByZWFkb25seSB0eXBlOiBzdHJpbmc7XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2IvdGV4dCkgKi9cbiAgdGV4dCgpOiBQcm9taXNlPHN0cmluZz47XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2Ivc2xpY2UpICovXG4gIHNsaWNlKHN0YXJ0PzogbnVtYmVyLCBlbmQ/OiBudW1iZXIpOiBCbG9iTGlrZTtcbiAgLy8gdW5mb3J0dW5hdGVseSBAdHlwZXMvbm9kZS1mZXRjaEBeMi42LjQgZG9lc24ndCB0eXBlIHRoZSBhcnJheUJ1ZmZlciBtZXRob2Rcbn1cblxuLyoqXG4gKiBJbnRlbmRlZCB0byBtYXRjaCB3ZWIuRmlsZSwgbm9kZS5GaWxlLCBub2RlLWZldGNoLkZpbGUsIGV0Yy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaWxlTGlrZSBleHRlbmRzIEJsb2JMaWtlIHtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvRmlsZS9sYXN0TW9kaWZpZWQpICovXG4gIHJlYWRvbmx5IGxhc3RNb2RpZmllZDogbnVtYmVyO1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9GaWxlL25hbWUpICovXG4gIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcbn1cblxuLyoqXG4gKiBJbnRlbmRlZCB0byBtYXRjaCB3ZWIuUmVzcG9uc2UsIG5vZGUuUmVzcG9uc2UsIG5vZGUtZmV0Y2guUmVzcG9uc2UsIGV0Yy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXNwb25zZUxpa2Uge1xuICB1cmw6IHN0cmluZztcbiAgYmxvYigpOiBQcm9taXNlPEJsb2JMaWtlPjtcbn1cblxuZXhwb3J0IGNvbnN0IGlzUmVzcG9uc2VMaWtlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBSZXNwb25zZUxpa2UgPT5cbiAgdmFsdWUgIT0gbnVsbCAmJlxuICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gIHR5cGVvZiB2YWx1ZS51cmwgPT09ICdzdHJpbmcnICYmXG4gIHR5cGVvZiB2YWx1ZS5ibG9iID09PSAnZnVuY3Rpb24nO1xuXG5leHBvcnQgY29uc3QgaXNGaWxlTGlrZSA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgRmlsZUxpa2UgPT5cbiAgdmFsdWUgIT0gbnVsbCAmJlxuICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gIHR5cGVvZiB2YWx1ZS5uYW1lID09PSAnc3RyaW5nJyAmJlxuICB0eXBlb2YgdmFsdWUubGFzdE1vZGlmaWVkID09PSAnbnVtYmVyJyAmJlxuICBpc0Jsb2JMaWtlKHZhbHVlKTtcblxuLyoqXG4gKiBUaGUgQmxvYkxpa2UgdHlwZSBvbWl0cyBhcnJheUJ1ZmZlcigpIGJlY2F1c2UgQHR5cGVzL25vZGUtZmV0Y2hAXjIuNi40IGxhY2tzIGl0OyBidXQgdGhpcyBjaGVja1xuICogYWRkcyB0aGUgYXJyYXlCdWZmZXIoKSBtZXRob2QgdHlwZSBiZWNhdXNlIGl0IGlzIGF2YWlsYWJsZSBhbmQgdXNlZCBhdCBydW50aW1lXG4gKi9cbmV4cG9ydCBjb25zdCBpc0Jsb2JMaWtlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBCbG9iTGlrZSAmIHsgYXJyYXlCdWZmZXIoKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4gfSA9PlxuICB2YWx1ZSAhPSBudWxsICYmXG4gIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgdHlwZW9mIHZhbHVlLnNpemUgPT09ICdudW1iZXInICYmXG4gIHR5cGVvZiB2YWx1ZS50eXBlID09PSAnc3RyaW5nJyAmJlxuICB0eXBlb2YgdmFsdWUudGV4dCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICB0eXBlb2YgdmFsdWUuc2xpY2UgPT09ICdmdW5jdGlvbicgJiZcbiAgdHlwZW9mIHZhbHVlLmFycmF5QnVmZmVyID09PSAnZnVuY3Rpb24nO1xuXG5leHBvcnQgY29uc3QgaXNVcGxvYWRhYmxlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBVcGxvYWRhYmxlID0+IHtcbiAgcmV0dXJuIGlzRmlsZUxpa2UodmFsdWUpIHx8IGlzUmVzcG9uc2VMaWtlKHZhbHVlKSB8fCBpc0ZzUmVhZFN0cmVhbSh2YWx1ZSk7XG59O1xuXG5leHBvcnQgdHlwZSBUb0ZpbGVJbnB1dCA9IFVwbG9hZGFibGUgfCBFeGNsdWRlPEJsb2JMaWtlUGFydCwgc3RyaW5nPiB8IEFzeW5jSXRlcmFibGU8QmxvYkxpa2VQYXJ0PjtcblxuLyoqXG4gKiBIZWxwZXIgZm9yIGNyZWF0aW5nIGEge0BsaW5rIEZpbGV9IHRvIHBhc3MgdG8gYW4gU0RLIHVwbG9hZCBtZXRob2QgZnJvbSBhIHZhcmlldHkgb2YgZGlmZmVyZW50IGRhdGEgZm9ybWF0c1xuICogQHBhcmFtIHZhbHVlIHRoZSByYXcgY29udGVudCBvZiB0aGUgZmlsZS4gIENhbiBiZSBhbiB7QGxpbmsgVXBsb2FkYWJsZX0sIHtAbGluayBCbG9iTGlrZVBhcnR9LCBvciB7QGxpbmsgQXN5bmNJdGVyYWJsZX0gb2Yge0BsaW5rIEJsb2JMaWtlUGFydH1zXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgdGhlIG5hbWUgb2YgdGhlIGZpbGUuIElmIG9taXR0ZWQsIHRvRmlsZSB3aWxsIHRyeSB0byBkZXRlcm1pbmUgYSBmaWxlIG5hbWUgZnJvbSBiaXRzIGlmIHBvc3NpYmxlXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnMgYWRkaXRpb25hbCBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdGlvbnMudHlwZSB0aGUgTUlNRSB0eXBlIG9mIHRoZSBjb250ZW50XG4gKiBAcGFyYW0ge251bWJlcj19IG9wdGlvbnMubGFzdE1vZGlmaWVkIHRoZSBsYXN0IG1vZGlmaWVkIHRpbWVzdGFtcFxuICogQHJldHVybnMgYSB7QGxpbmsgRmlsZX0gd2l0aCB0aGUgZ2l2ZW4gcHJvcGVydGllc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdG9GaWxlKFxuICB2YWx1ZTogVG9GaWxlSW5wdXQgfCBQcm9taXNlTGlrZTxUb0ZpbGVJbnB1dD4sXG4gIG5hbWU/OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBvcHRpb25zPzogRmlsZVByb3BlcnR5QmFnIHwgdW5kZWZpbmVkLFxuKTogUHJvbWlzZTxGaWxlTGlrZT4ge1xuICAvLyBJZiBpdCdzIGEgcHJvbWlzZSwgcmVzb2x2ZSBpdC5cbiAgdmFsdWUgPSBhd2FpdCB2YWx1ZTtcblxuICAvLyBJZiB3ZSd2ZSBiZWVuIGdpdmVuIGEgYEZpbGVgIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmdcbiAgaWYgKGlzRmlsZUxpa2UodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgaWYgKGlzUmVzcG9uc2VMaWtlKHZhbHVlKSkge1xuICAgIGNvbnN0IGJsb2IgPSBhd2FpdCB2YWx1ZS5ibG9iKCk7XG4gICAgbmFtZSB8fD0gbmV3IFVSTCh2YWx1ZS51cmwpLnBhdGhuYW1lLnNwbGl0KC9bXFxcXC9dLykucG9wKCkgPz8gJ3Vua25vd25fZmlsZSc7XG5cbiAgICAvLyB3ZSBuZWVkIHRvIGNvbnZlcnQgdGhlIGBCbG9iYCBpbnRvIGFuIGFycmF5IGJ1ZmZlciBiZWNhdXNlIHRoZSBgQmxvYmAgY2xhc3NcbiAgICAvLyB0aGF0IGBub2RlLWZldGNoYCBkZWZpbmVzIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSB3ZWIgc3RhbmRhcmQgd2hpY2ggcmVzdWx0c1xuICAgIC8vIGluIGBuZXcgRmlsZWAgaW50ZXJwcmV0aW5nIGl0IGFzIGEgc3RyaW5nIGluc3RlYWQgb2YgYmluYXJ5IGRhdGEuXG4gICAgY29uc3QgZGF0YSA9IGlzQmxvYkxpa2UoYmxvYikgPyBbKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSkgYXMgYW55XSA6IFtibG9iXTtcblxuICAgIHJldHVybiBuZXcgRmlsZShkYXRhLCBuYW1lLCBvcHRpb25zKTtcbiAgfVxuXG4gIGNvbnN0IGJpdHMgPSBhd2FpdCBnZXRCeXRlcyh2YWx1ZSk7XG5cbiAgbmFtZSB8fD0gZ2V0TmFtZSh2YWx1ZSkgPz8gJ3Vua25vd25fZmlsZSc7XG5cbiAgaWYgKCFvcHRpb25zPy50eXBlKSB7XG4gICAgY29uc3QgdHlwZSA9IChiaXRzWzBdIGFzIGFueSk/LnR5cGU7XG4gICAgaWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgb3B0aW9ucyA9IHsgLi4ub3B0aW9ucywgdHlwZSB9O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgRmlsZShiaXRzLCBuYW1lLCBvcHRpb25zKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0Qnl0ZXModmFsdWU6IFRvRmlsZUlucHV0KTogUHJvbWlzZTxBcnJheTxCbG9iUGFydD4+IHtcbiAgbGV0IHBhcnRzOiBBcnJheTxCbG9iUGFydD4gPSBbXTtcbiAgaWYgKFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHxcbiAgICBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsdWUpIHx8IC8vIGluY2x1ZGVzIFVpbnQ4QXJyYXksIEJ1ZmZlciwgZXRjLlxuICAgIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXJcbiAgKSB7XG4gICAgcGFydHMucHVzaCh2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoaXNCbG9iTGlrZSh2YWx1ZSkpIHtcbiAgICBwYXJ0cy5wdXNoKGF3YWl0IHZhbHVlLmFycmF5QnVmZmVyKCkpO1xuICB9IGVsc2UgaWYgKFxuICAgIGlzQXN5bmNJdGVyYWJsZUl0ZXJhdG9yKHZhbHVlKSAvLyBpbmNsdWRlcyBSZWFkYWJsZSwgUmVhZGFibGVTdHJlYW0sIGV0Yy5cbiAgKSB7XG4gICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiB2YWx1ZSkge1xuICAgICAgcGFydHMucHVzaChjaHVuayBhcyBCbG9iUGFydCk7IC8vIFRPRE8sIGNvbnNpZGVyIHZhbGlkYXRpbmc/XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBVbmV4cGVjdGVkIGRhdGEgdHlwZTogJHt0eXBlb2YgdmFsdWV9OyBjb25zdHJ1Y3RvcjogJHt2YWx1ZT8uY29uc3RydWN0b3JcbiAgICAgICAgPy5uYW1lfTsgcHJvcHM6ICR7cHJvcHNGb3JFcnJvcih2YWx1ZSl9YCxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHBhcnRzO1xufVxuXG5mdW5jdGlvbiBwcm9wc0ZvckVycm9yKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBwcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKTtcbiAgcmV0dXJuIGBbJHtwcm9wcy5tYXAoKHApID0+IGBcIiR7cH1cImApLmpvaW4oJywgJyl9XWA7XG59XG5cbmZ1bmN0aW9uIGdldE5hbWUodmFsdWU6IGFueSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiAoXG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLm5hbWUpIHx8XG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLmZpbGVuYW1lKSB8fFxuICAgIC8vIEZvciBmcy5SZWFkU3RyZWFtXG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLnBhdGgpPy5zcGxpdCgvW1xcXFwvXS8pLnBvcCgpXG4gICk7XG59XG5cbmNvbnN0IGdldFN0cmluZ0Zyb21NYXliZUJ1ZmZlciA9ICh4OiBzdHJpbmcgfCBCdWZmZXIgfCB1bmtub3duKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgcmV0dXJuIHg7XG4gIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB4IGluc3RhbmNlb2YgQnVmZmVyKSByZXR1cm4gU3RyaW5nKHgpO1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuY29uc3QgaXNBc3luY0l0ZXJhYmxlSXRlcmF0b3IgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEFzeW5jSXRlcmFibGVJdGVyYXRvcjx1bmtub3duPiA9PlxuICB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJztcblxuZXhwb3J0IGNvbnN0IGlzTXVsdGlwYXJ0Qm9keSA9IChib2R5OiBhbnkpOiBib2R5IGlzIE11bHRpcGFydEJvZHkgPT5cbiAgYm9keSAmJiB0eXBlb2YgYm9keSA9PT0gJ29iamVjdCcgJiYgYm9keS5ib2R5ICYmIGJvZHlbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ011bHRpcGFydEJvZHknO1xuXG4vKipcbiAqIFJldHVybnMgYSBtdWx0aXBhcnQvZm9ybS1kYXRhIHJlcXVlc3QgaWYgYW55IHBhcnQgb2YgdGhlIGdpdmVuIHJlcXVlc3QgYm9keSBjb250YWlucyBhIEZpbGUgLyBCbG9iIHZhbHVlLlxuICogT3RoZXJ3aXNlIHJldHVybnMgdGhlIHJlcXVlc3QgYXMgaXMuXG4gKi9cbmV4cG9ydCBjb25zdCBtYXliZU11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyA9IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBvcHRzOiBSZXF1ZXN0T3B0aW9uczxUPixcbik6IFByb21pc2U8UmVxdWVzdE9wdGlvbnM8VCB8IE11bHRpcGFydEJvZHk+PiA9PiB7XG4gIGlmICghaGFzVXBsb2FkYWJsZVZhbHVlKG9wdHMuYm9keSkpIHJldHVybiBvcHRzO1xuXG4gIGNvbnN0IGZvcm0gPSBhd2FpdCBjcmVhdGVGb3JtKG9wdHMuYm9keSk7XG4gIHJldHVybiBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyhmb3JtLCBvcHRzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgPSBhc3luYyA8VCA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4sXG4pOiBQcm9taXNlPFJlcXVlc3RPcHRpb25zPFQgfCBNdWx0aXBhcnRCb2R5Pj4gPT4ge1xuICBjb25zdCBmb3JtID0gYXdhaXQgY3JlYXRlRm9ybShvcHRzLmJvZHkpO1xuICByZXR1cm4gZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMoZm9ybSwgb3B0cyk7XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRm9ybSA9IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KGJvZHk6IFQgfCB1bmRlZmluZWQpOiBQcm9taXNlPEZvcm1EYXRhPiA9PiB7XG4gIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcbiAgYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LmVudHJpZXMoYm9keSB8fCB7fSkubWFwKChba2V5LCB2YWx1ZV0pID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBrZXksIHZhbHVlKSkpO1xuICByZXR1cm4gZm9ybTtcbn07XG5cbmNvbnN0IGhhc1VwbG9hZGFibGVWYWx1ZSA9ICh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4gPT4ge1xuICBpZiAoaXNVcGxvYWRhYmxlKHZhbHVlKSkgcmV0dXJuIHRydWU7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIHZhbHVlLnNvbWUoaGFzVXBsb2FkYWJsZVZhbHVlKTtcbiAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICBmb3IgKGNvbnN0IGsgaW4gdmFsdWUpIHtcbiAgICAgIGlmIChoYXNVcGxvYWRhYmxlVmFsdWUoKHZhbHVlIGFzIGFueSlba10pKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgYWRkRm9ybVZhbHVlID0gYXN5bmMgKGZvcm06IEZvcm1EYXRhLCBrZXk6IHN0cmluZywgdmFsdWU6IHVua25vd24pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYFJlY2VpdmVkIG51bGwgZm9yIFwiJHtrZXl9XCI7IHRvIHBhc3MgbnVsbCBpbiBGb3JtRGF0YSwgeW91IG11c3QgdXNlIHRoZSBzdHJpbmcgJ251bGwnYCxcbiAgICApO1xuICB9XG5cbiAgLy8gVE9ETzogbWFrZSBuZXN0ZWQgZm9ybWF0cyBjb25maWd1cmFibGVcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgIGZvcm0uYXBwZW5kKGtleSwgU3RyaW5nKHZhbHVlKSk7XG4gIH0gZWxzZSBpZiAoaXNVcGxvYWRhYmxlKHZhbHVlKSkge1xuICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0b0ZpbGUodmFsdWUpO1xuICAgIGZvcm0uYXBwZW5kKGtleSwgZmlsZSBhcyBGaWxlKTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHZhbHVlLm1hcCgoZW50cnkpID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBrZXkgKyAnW10nLCBlbnRyeSkpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBPYmplY3QuZW50cmllcyh2YWx1ZSkubWFwKChbbmFtZSwgcHJvcF0pID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBgJHtrZXl9WyR7bmFtZX1dYCwgcHJvcCkpLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIGBJbnZhbGlkIHZhbHVlIGdpdmVuIHRvIGZvcm0sIGV4cGVjdGVkIGEgc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9iamVjdCwgQXJyYXksIEZpbGUgb3IgQmxvYiBidXQgZ290ICR7dmFsdWV9IGluc3RlYWRgLFxuICAgICk7XG4gIH1cbn07XG4iLCAiaW1wb3J0IHsgVkVSU0lPTiB9IGZyb20gXCIuL3ZlcnNpb24uanNcIjtcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuL3N0cmVhbWluZy5qc1wiO1xuaW1wb3J0IHtcbiAgQW50aHJvcGljRXJyb3IsXG4gIEFQSUVycm9yLFxuICBBUElDb25uZWN0aW9uRXJyb3IsXG4gIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IsXG4gIEFQSVVzZXJBYm9ydEVycm9yLFxufSBmcm9tIFwiLi9lcnJvci5qc1wiO1xuaW1wb3J0IHtcbiAga2luZCBhcyBzaGltc0tpbmQsXG4gIHR5cGUgUmVhZGFibGUsXG4gIGdldERlZmF1bHRBZ2VudCxcbiAgdHlwZSBBZ2VudCxcbiAgZmV0Y2gsXG4gIHR5cGUgUmVxdWVzdEluZm8sXG4gIHR5cGUgUmVxdWVzdEluaXQsXG4gIHR5cGUgUmVzcG9uc2UsXG4gIHR5cGUgSGVhZGVyc0luaXQsXG59IGZyb20gXCIuL19zaGltcy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgdHlwZSBSZXNwb25zZSB9O1xuaW1wb3J0IHsgQmxvYkxpa2UsIGlzQmxvYkxpa2UsIGlzTXVsdGlwYXJ0Qm9keSB9IGZyb20gXCIuL3VwbG9hZHMuanNcIjtcbmV4cG9ydCB7XG4gIG1heWJlTXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zLFxuICBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMsXG4gIGNyZWF0ZUZvcm0sXG4gIHR5cGUgVXBsb2FkYWJsZSxcbn0gZnJvbSBcIi4vdXBsb2Fkcy5qc1wiO1xuXG5leHBvcnQgdHlwZSBGZXRjaCA9ICh1cmw6IFJlcXVlc3RJbmZvLCBpbml0PzogUmVxdWVzdEluaXQpID0+IFByb21pc2U8UmVzcG9uc2U+O1xuXG50eXBlIFByb21pc2VPclZhbHVlPFQ+ID0gVCB8IFByb21pc2U8VD47XG5cbnR5cGUgQVBJUmVzcG9uc2VQcm9wcyA9IHtcbiAgcmVzcG9uc2U6IFJlc3BvbnNlO1xuICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zO1xuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXI7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBkZWZhdWx0UGFyc2VSZXNwb25zZTxUPihwcm9wczogQVBJUmVzcG9uc2VQcm9wcyk6IFByb21pc2U8V2l0aFJlcXVlc3RJRDxUPj4ge1xuICBjb25zdCB7IHJlc3BvbnNlIH0gPSBwcm9wcztcbiAgaWYgKHByb3BzLm9wdGlvbnMuc3RyZWFtKSB7XG4gICAgZGVidWcoJ3Jlc3BvbnNlJywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS51cmwsIHJlc3BvbnNlLmhlYWRlcnMsIHJlc3BvbnNlLmJvZHkpO1xuXG4gICAgLy8gTm90ZTogdGhlcmUgaXMgYW4gaW52YXJpYW50IGhlcmUgdGhhdCBpc24ndCByZXByZXNlbnRlZCBpbiB0aGUgdHlwZSBzeXN0ZW1cbiAgICAvLyB0aGF0IGlmIHlvdSBzZXQgYHN0cmVhbTogdHJ1ZWAgdGhlIHJlc3BvbnNlIHR5cGUgbXVzdCBhbHNvIGJlIGBTdHJlYW08VD5gXG5cbiAgICBpZiAocHJvcHMub3B0aW9ucy5fX3N0cmVhbUNsYXNzKSB7XG4gICAgICByZXR1cm4gcHJvcHMub3B0aW9ucy5fX3N0cmVhbUNsYXNzLmZyb21TU0VSZXNwb25zZShyZXNwb25zZSwgcHJvcHMuY29udHJvbGxlcikgYXMgYW55O1xuICAgIH1cblxuICAgIHJldHVybiBTdHJlYW0uZnJvbVNTRVJlc3BvbnNlKHJlc3BvbnNlLCBwcm9wcy5jb250cm9sbGVyKSBhcyBhbnk7XG4gIH1cblxuICAvLyBmZXRjaCByZWZ1c2VzIHRvIHJlYWQgdGhlIGJvZHkgd2hlbiB0aGUgc3RhdHVzIGNvZGUgaXMgMjA0LlxuICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpIHtcbiAgICByZXR1cm4gbnVsbCBhcyBXaXRoUmVxdWVzdElEPFQ+O1xuICB9XG5cbiAgaWYgKHByb3BzLm9wdGlvbnMuX19iaW5hcnlSZXNwb25zZSkge1xuICAgIHJldHVybiByZXNwb25zZSBhcyB1bmtub3duIGFzIFdpdGhSZXF1ZXN0SUQ8VD47XG4gIH1cblxuICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgY29uc3QgaXNKU09OID1cbiAgICBjb250ZW50VHlwZT8uaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL2pzb24nKSB8fCBjb250ZW50VHlwZT8uaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL3ZuZC5hcGkranNvbicpO1xuICBpZiAoaXNKU09OKSB7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGRlYnVnKCdyZXNwb25zZScsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UudXJsLCByZXNwb25zZS5oZWFkZXJzLCBqc29uKTtcblxuICAgIHJldHVybiBfYWRkUmVxdWVzdElEKGpzb24gYXMgVCwgcmVzcG9uc2UpO1xuICB9XG5cbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgZGVidWcoJ3Jlc3BvbnNlJywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS51cmwsIHJlc3BvbnNlLmhlYWRlcnMsIHRleHQpO1xuXG4gIC8vIFRPRE8gaGFuZGxlIGJsb2IsIGFycmF5YnVmZmVyLCBvdGhlciBjb250ZW50IHR5cGVzLCBldGMuXG4gIHJldHVybiB0ZXh0IGFzIHVua25vd24gYXMgV2l0aFJlcXVlc3RJRDxUPjtcbn1cblxudHlwZSBXaXRoUmVxdWVzdElEPFQ+ID1cbiAgVCBleHRlbmRzIEFycmF5PGFueT4gfCBSZXNwb25zZSB8IEFic3RyYWN0UGFnZTxhbnk+ID8gVFxuICA6IFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+ID8gVCAmIHsgX3JlcXVlc3RfaWQ/OiBzdHJpbmcgfCBudWxsIH1cbiAgOiBUO1xuXG5mdW5jdGlvbiBfYWRkUmVxdWVzdElEPFQ+KHZhbHVlOiBULCByZXNwb25zZTogUmVzcG9uc2UpOiBXaXRoUmVxdWVzdElEPFQ+IHtcbiAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlIGFzIFdpdGhSZXF1ZXN0SUQ8VD47XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHZhbHVlLCAnX3JlcXVlc3RfaWQnLCB7XG4gICAgdmFsdWU6IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdyZXF1ZXN0LWlkJyksXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gIH0pIGFzIFdpdGhSZXF1ZXN0SUQ8VD47XG59XG5cbi8qKlxuICogQSBzdWJjbGFzcyBvZiBgUHJvbWlzZWAgcHJvdmlkaW5nIGFkZGl0aW9uYWwgaGVscGVyIG1ldGhvZHNcbiAqIGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBTREsuXG4gKi9cbmV4cG9ydCBjbGFzcyBBUElQcm9taXNlPFQ+IGV4dGVuZHMgUHJvbWlzZTxXaXRoUmVxdWVzdElEPFQ+PiB7XG4gIHByaXZhdGUgcGFyc2VkUHJvbWlzZTogUHJvbWlzZTxXaXRoUmVxdWVzdElEPFQ+PiB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlc3BvbnNlUHJvbWlzZTogUHJvbWlzZTxBUElSZXNwb25zZVByb3BzPixcbiAgICBwcml2YXRlIHBhcnNlUmVzcG9uc2U6IChcbiAgICAgIHByb3BzOiBBUElSZXNwb25zZVByb3BzLFxuICAgICkgPT4gUHJvbWlzZU9yVmFsdWU8V2l0aFJlcXVlc3RJRDxUPj4gPSBkZWZhdWx0UGFyc2VSZXNwb25zZSxcbiAgKSB7XG4gICAgc3VwZXIoKHJlc29sdmUpID0+IHtcbiAgICAgIC8vIHRoaXMgaXMgbWF5YmUgYSBiaXQgd2VpcmQgYnV0IHRoaXMgaGFzIHRvIGJlIGEgbm8tb3AgdG8gbm90IGltcGxpY2l0bHlcbiAgICAgIC8vIHBhcnNlIHRoZSByZXNwb25zZSBib2R5OyBpbnN0ZWFkIC50aGVuLCAuY2F0Y2gsIC5maW5hbGx5IGFyZSBvdmVycmlkZGVuXG4gICAgICAvLyB0byBwYXJzZSB0aGUgcmVzcG9uc2VcbiAgICAgIHJlc29sdmUobnVsbCBhcyBhbnkpO1xuICAgIH0pO1xuICB9XG5cbiAgX3RoZW5VbndyYXA8VT4odHJhbnNmb3JtOiAoZGF0YTogVCwgcHJvcHM6IEFQSVJlc3BvbnNlUHJvcHMpID0+IFUpOiBBUElQcm9taXNlPFU+IHtcbiAgICByZXR1cm4gbmV3IEFQSVByb21pc2UodGhpcy5yZXNwb25zZVByb21pc2UsIGFzeW5jIChwcm9wcykgPT5cbiAgICAgIF9hZGRSZXF1ZXN0SUQodHJhbnNmb3JtKGF3YWl0IHRoaXMucGFyc2VSZXNwb25zZShwcm9wcyksIHByb3BzKSwgcHJvcHMucmVzcG9uc2UpLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcmF3IGBSZXNwb25zZWAgaW5zdGFuY2UgaW5zdGVhZCBvZiBwYXJzaW5nIHRoZSByZXNwb25zZVxuICAgKiBkYXRhLlxuICAgKlxuICAgKiBJZiB5b3Ugd2FudCB0byBwYXJzZSB0aGUgcmVzcG9uc2UgYm9keSBidXQgc3RpbGwgZ2V0IHRoZSBgUmVzcG9uc2VgXG4gICAqIGluc3RhbmNlLCB5b3UgY2FuIHVzZSB7QGxpbmsgd2l0aFJlc3BvbnNlKCl9LlxuICAgKlxuICAgKiBcdUQ4M0RcdURDNEIgR2V0dGluZyB0aGUgd3JvbmcgVHlwZVNjcmlwdCB0eXBlIGZvciBgUmVzcG9uc2VgP1xuICAgKiBUcnkgc2V0dGluZyBgXCJtb2R1bGVSZXNvbHV0aW9uXCI6IFwiTm9kZU5leHRcImAgaWYgeW91IGNhbixcbiAgICogb3IgYWRkIG9uZSBvZiB0aGVzZSBpbXBvcnRzIGJlZm9yZSB5b3VyIGZpcnN0IGBpbXBvcnQgXHUyMDI2IGZyb20gJ0BhbnRocm9waWMtYWkvc2RrJ2A6XG4gICAqIC0gYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvbm9kZSdgIChpZiB5b3UncmUgcnVubmluZyBvbiBOb2RlKVxuICAgKiAtIGBpbXBvcnQgJ0BhbnRocm9waWMtYWkvc2RrL3NoaW1zL3dlYidgIChvdGhlcndpc2UpXG4gICAqL1xuICBhc1Jlc3BvbnNlKCk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5yZXNwb25zZVByb21pc2UudGhlbigocCkgPT4gcC5yZXNwb25zZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcGFyc2VkIHJlc3BvbnNlIGRhdGEsIHRoZSByYXcgYFJlc3BvbnNlYCBpbnN0YW5jZSBhbmQgdGhlIElEIG9mIHRoZSByZXF1ZXN0LFxuICAgKiByZXR1cm5lZCB2aWUgdGhlIGByZXF1ZXN0LWlkYCBoZWFkZXIgd2hpY2ggaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmcgcmVxdWVzdHMgYW5kIHJlc3BvcnRpbmdcbiAgICogaXNzdWVzIHRvIEFudGhyb3BpYy5cbiAgICpcbiAgICogSWYgeW91IGp1c3Qgd2FudCB0byBnZXQgdGhlIHJhdyBgUmVzcG9uc2VgIGluc3RhbmNlIHdpdGhvdXQgcGFyc2luZyBpdCxcbiAgICogeW91IGNhbiB1c2Uge0BsaW5rIGFzUmVzcG9uc2UoKX0uXG4gICAqXG4gICAqIFx1RDgzRFx1REM0QiBHZXR0aW5nIHRoZSB3cm9uZyBUeXBlU2NyaXB0IHR5cGUgZm9yIGBSZXNwb25zZWA/XG4gICAqIFRyeSBzZXR0aW5nIGBcIm1vZHVsZVJlc29sdXRpb25cIjogXCJOb2RlTmV4dFwiYCBpZiB5b3UgY2FuLFxuICAgKiBvciBhZGQgb25lIG9mIHRoZXNlIGltcG9ydHMgYmVmb3JlIHlvdXIgZmlyc3QgYGltcG9ydCBcdTIwMjYgZnJvbSAnQGFudGhyb3BpYy1haS9zZGsnYDpcbiAgICogLSBgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy9ub2RlJ2AgKGlmIHlvdSdyZSBydW5uaW5nIG9uIE5vZGUpXG4gICAqIC0gYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvd2ViJ2AgKG90aGVyd2lzZSlcbiAgICovXG4gIGFzeW5jIHdpdGhSZXNwb25zZSgpOiBQcm9taXNlPHsgZGF0YTogVDsgcmVzcG9uc2U6IFJlc3BvbnNlOyByZXF1ZXN0X2lkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkIH0+IHtcbiAgICBjb25zdCBbZGF0YSwgcmVzcG9uc2VdID0gYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMucGFyc2UoKSwgdGhpcy5hc1Jlc3BvbnNlKCldKTtcbiAgICByZXR1cm4geyBkYXRhLCByZXNwb25zZSwgcmVxdWVzdF9pZDogcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3JlcXVlc3QtaWQnKSB9O1xuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZSgpOiBQcm9taXNlPFdpdGhSZXF1ZXN0SUQ8VD4+IHtcbiAgICBpZiAoIXRoaXMucGFyc2VkUHJvbWlzZSkge1xuICAgICAgdGhpcy5wYXJzZWRQcm9taXNlID0gdGhpcy5yZXNwb25zZVByb21pc2UudGhlbih0aGlzLnBhcnNlUmVzcG9uc2UpIGFzIGFueSBhcyBQcm9taXNlPFdpdGhSZXF1ZXN0SUQ8VD4+O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wYXJzZWRQcm9taXNlO1xuICB9XG5cbiAgb3ZlcnJpZGUgdGhlbjxUUmVzdWx0MSA9IFdpdGhSZXF1ZXN0SUQ8VD4sIFRSZXN1bHQyID0gbmV2ZXI+KFxuICAgIG9uZnVsZmlsbGVkPzogKCh2YWx1ZTogV2l0aFJlcXVlc3RJRDxUPikgPT4gVFJlc3VsdDEgfCBQcm9taXNlTGlrZTxUUmVzdWx0MT4pIHwgdW5kZWZpbmVkIHwgbnVsbCxcbiAgICBvbnJlamVjdGVkPzogKChyZWFzb246IGFueSkgPT4gVFJlc3VsdDIgfCBQcm9taXNlTGlrZTxUUmVzdWx0Mj4pIHwgdW5kZWZpbmVkIHwgbnVsbCxcbiAgKTogUHJvbWlzZTxUUmVzdWx0MSB8IFRSZXN1bHQyPiB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UoKS50aGVuKG9uZnVsZmlsbGVkLCBvbnJlamVjdGVkKTtcbiAgfVxuXG4gIG92ZXJyaWRlIGNhdGNoPFRSZXN1bHQgPSBuZXZlcj4oXG4gICAgb25yZWplY3RlZD86ICgocmVhc29uOiBhbnkpID0+IFRSZXN1bHQgfCBQcm9taXNlTGlrZTxUUmVzdWx0PikgfCB1bmRlZmluZWQgfCBudWxsLFxuICApOiBQcm9taXNlPFdpdGhSZXF1ZXN0SUQ8VD4gfCBUUmVzdWx0PiB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UoKS5jYXRjaChvbnJlamVjdGVkKTtcbiAgfVxuXG4gIG92ZXJyaWRlIGZpbmFsbHkob25maW5hbGx5PzogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkIHwgbnVsbCk6IFByb21pc2U8V2l0aFJlcXVlc3RJRDxUPj4ge1xuICAgIHJldHVybiB0aGlzLnBhcnNlKCkuZmluYWxseShvbmZpbmFsbHkpO1xuICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBUElDbGllbnQge1xuICBiYXNlVVJMOiBzdHJpbmc7XG4gIG1heFJldHJpZXM6IG51bWJlcjtcbiAgdGltZW91dDogbnVtYmVyO1xuICBodHRwQWdlbnQ6IEFnZW50IHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgZmV0Y2g6IEZldGNoO1xuICBwcm90ZWN0ZWQgaWRlbXBvdGVuY3lIZWFkZXI/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIGJhc2VVUkwsXG4gICAgbWF4UmV0cmllcyA9IDIsXG4gICAgdGltZW91dCA9IDYwMDAwMCwgLy8gMTAgbWludXRlc1xuICAgIGh0dHBBZ2VudCxcbiAgICBmZXRjaDogb3ZlcnJpZGRlbkZldGNoLFxuICB9OiB7XG4gICAgYmFzZVVSTDogc3RyaW5nO1xuICAgIG1heFJldHJpZXM/OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIGh0dHBBZ2VudDogQWdlbnQgfCB1bmRlZmluZWQ7XG4gICAgZmV0Y2g6IEZldGNoIHwgdW5kZWZpbmVkO1xuICB9KSB7XG4gICAgdGhpcy5iYXNlVVJMID0gYmFzZVVSTDtcbiAgICB0aGlzLm1heFJldHJpZXMgPSB2YWxpZGF0ZVBvc2l0aXZlSW50ZWdlcignbWF4UmV0cmllcycsIG1heFJldHJpZXMpO1xuICAgIHRoaXMudGltZW91dCA9IHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKCd0aW1lb3V0JywgdGltZW91dCk7XG4gICAgdGhpcy5odHRwQWdlbnQgPSBodHRwQWdlbnQ7XG5cbiAgICB0aGlzLmZldGNoID0gb3ZlcnJpZGRlbkZldGNoID8/IGZldGNoO1xuICB9XG5cbiAgcHJvdGVjdGVkIGF1dGhIZWFkZXJzKG9wdHM6IEZpbmFsUmVxdWVzdE9wdGlvbnMpOiBIZWFkZXJzIHtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhpcyB0byBhZGQgeW91ciBvd24gZGVmYXVsdCBoZWFkZXJzLCBmb3IgZXhhbXBsZTpcbiAgICpcbiAgICogIHtcbiAgICogICAgLi4uc3VwZXIuZGVmYXVsdEhlYWRlcnMoKSxcbiAgICogICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAxMjMnLFxuICAgKiAgfVxuICAgKi9cbiAgcHJvdGVjdGVkIGRlZmF1bHRIZWFkZXJzKG9wdHM6IEZpbmFsUmVxdWVzdE9wdGlvbnMpOiBIZWFkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ1VzZXItQWdlbnQnOiB0aGlzLmdldFVzZXJBZ2VudCgpLFxuICAgICAgLi4uZ2V0UGxhdGZvcm1IZWFkZXJzKCksXG4gICAgICAuLi50aGlzLmF1dGhIZWFkZXJzKG9wdHMpLFxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZGVmYXVsdFF1ZXJ5KCk6IERlZmF1bHRRdWVyeSB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhpcyB0byBhZGQgeW91ciBvd24gaGVhZGVycyB2YWxpZGF0aW9uOlxuICAgKi9cbiAgcHJvdGVjdGVkIHZhbGlkYXRlSGVhZGVycyhoZWFkZXJzOiBIZWFkZXJzLCBjdXN0b21IZWFkZXJzOiBIZWFkZXJzKSB7fVxuXG4gIHByb3RlY3RlZCBkZWZhdWx0SWRlbXBvdGVuY3lLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYHN0YWlubGVzcy1ub2RlLXJldHJ5LSR7dXVpZDQoKX1gO1xuICB9XG5cbiAgZ2V0PFJlcSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgnZ2V0JywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBwb3N0PFJlcSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgncG9zdCcsIHBhdGgsIG9wdHMpO1xuICB9XG5cbiAgcGF0Y2g8UmVxLCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdwYXRjaCcsIHBhdGgsIG9wdHMpO1xuICB9XG5cbiAgcHV0PFJlcSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgncHV0JywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBkZWxldGU8UmVxLCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdkZWxldGUnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIHByaXZhdGUgbWV0aG9kUmVxdWVzdDxSZXEsIFJzcD4oXG4gICAgbWV0aG9kOiBIVFRQTWV0aG9kLFxuICAgIHBhdGg6IHN0cmluZyxcbiAgICBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4sXG4gICk6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChcbiAgICAgIFByb21pc2UucmVzb2x2ZShvcHRzKS50aGVuKGFzeW5jIChvcHRzKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvZHkgPVxuICAgICAgICAgIG9wdHMgJiYgaXNCbG9iTGlrZShvcHRzPy5ib2R5KSA/IG5ldyBEYXRhVmlldyhhd2FpdCBvcHRzLmJvZHkuYXJyYXlCdWZmZXIoKSlcbiAgICAgICAgICA6IG9wdHM/LmJvZHkgaW5zdGFuY2VvZiBEYXRhVmlldyA/IG9wdHMuYm9keVxuICAgICAgICAgIDogb3B0cz8uYm9keSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gbmV3IERhdGFWaWV3KG9wdHMuYm9keSlcbiAgICAgICAgICA6IG9wdHMgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KG9wdHM/LmJvZHkpID8gbmV3IERhdGFWaWV3KG9wdHMuYm9keS5idWZmZXIpXG4gICAgICAgICAgOiBvcHRzPy5ib2R5O1xuICAgICAgICByZXR1cm4geyBtZXRob2QsIHBhdGgsIC4uLm9wdHMsIGJvZHkgfTtcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cblxuICBnZXRBUElMaXN0PEl0ZW0sIFBhZ2VDbGFzcyBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPiA9IEFic3RyYWN0UGFnZTxJdGVtPj4oXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIFBhZ2U6IG5ldyAoLi4uYXJnczogYW55W10pID0+IFBhZ2VDbGFzcyxcbiAgICBvcHRzPzogUmVxdWVzdE9wdGlvbnM8YW55PixcbiAgKTogUGFnZVByb21pc2U8UGFnZUNsYXNzLCBJdGVtPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdEFQSUxpc3QoUGFnZSwgeyBtZXRob2Q6ICdnZXQnLCBwYXRoLCAuLi5vcHRzIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVDb250ZW50TGVuZ3RoKGJvZHk6IHVua25vd24pOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5ieXRlTGVuZ3RoKGJvZHksICd1dGY4JykudG9TdHJpbmcoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBUZXh0RW5jb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICBjb25zdCBlbmNvZGVkID0gZW5jb2Rlci5lbmNvZGUoYm9keSk7XG4gICAgICAgIHJldHVybiBlbmNvZGVkLmxlbmd0aC50b1N0cmluZygpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KGJvZHkpKSB7XG4gICAgICByZXR1cm4gYm9keS5ieXRlTGVuZ3RoLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBidWlsZFJlcXVlc3Q8UmVxPihcbiAgICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zPFJlcT4sXG4gICAgeyByZXRyeUNvdW50ID0gMCB9OiB7IHJldHJ5Q291bnQ/OiBudW1iZXIgfSA9IHt9LFxuICApOiB7IHJlcTogUmVxdWVzdEluaXQ7IHVybDogc3RyaW5nOyB0aW1lb3V0OiBudW1iZXIgfSB7XG4gICAgY29uc3QgeyBtZXRob2QsIHBhdGgsIHF1ZXJ5LCBoZWFkZXJzOiBoZWFkZXJzID0ge30gfSA9IG9wdGlvbnM7XG5cbiAgICBjb25zdCBib2R5ID1cbiAgICAgIEFycmF5QnVmZmVyLmlzVmlldyhvcHRpb25zLmJvZHkpIHx8IChvcHRpb25zLl9fYmluYXJ5UmVxdWVzdCAmJiB0eXBlb2Ygb3B0aW9ucy5ib2R5ID09PSAnc3RyaW5nJykgP1xuICAgICAgICBvcHRpb25zLmJvZHlcbiAgICAgIDogaXNNdWx0aXBhcnRCb2R5KG9wdGlvbnMuYm9keSkgPyBvcHRpb25zLmJvZHkuYm9keVxuICAgICAgOiBvcHRpb25zLmJvZHkgPyBKU09OLnN0cmluZ2lmeShvcHRpb25zLmJvZHksIG51bGwsIDIpXG4gICAgICA6IG51bGw7XG4gICAgY29uc3QgY29udGVudExlbmd0aCA9IHRoaXMuY2FsY3VsYXRlQ29udGVudExlbmd0aChib2R5KTtcblxuICAgIGNvbnN0IHVybCA9IHRoaXMuYnVpbGRVUkwocGF0aCEsIHF1ZXJ5KTtcbiAgICBpZiAoJ3RpbWVvdXQnIGluIG9wdGlvbnMpIHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKCd0aW1lb3V0Jywgb3B0aW9ucy50aW1lb3V0KTtcbiAgICBjb25zdCB0aW1lb3V0ID0gb3B0aW9ucy50aW1lb3V0ID8/IHRoaXMudGltZW91dDtcbiAgICBjb25zdCBodHRwQWdlbnQgPSBvcHRpb25zLmh0dHBBZ2VudCA/PyB0aGlzLmh0dHBBZ2VudCA/PyBnZXREZWZhdWx0QWdlbnQodXJsKTtcbiAgICBjb25zdCBtaW5BZ2VudFRpbWVvdXQgPSB0aW1lb3V0ICsgMTAwMDtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgKGh0dHBBZ2VudCBhcyBhbnkpPy5vcHRpb25zPy50aW1lb3V0ID09PSAnbnVtYmVyJyAmJlxuICAgICAgbWluQWdlbnRUaW1lb3V0ID4gKChodHRwQWdlbnQgYXMgYW55KS5vcHRpb25zLnRpbWVvdXQgPz8gMClcbiAgICApIHtcbiAgICAgIC8vIEFsbG93IGFueSBnaXZlbiByZXF1ZXN0IHRvIGJ1bXAgb3VyIGFnZW50IGFjdGl2ZSBzb2NrZXQgdGltZW91dC5cbiAgICAgIC8vIFRoaXMgbWF5IHNlZW0gc3RyYW5nZSwgYnV0IGxlYWtpbmcgYWN0aXZlIHNvY2tldHMgc2hvdWxkIGJlIHJhcmUgYW5kIG5vdCBwYXJ0aWN1bGFybHkgcHJvYmxlbWF0aWMsXG4gICAgICAvLyBhbmQgd2l0aG91dCBtdXRhdGluZyBhZ2VudCB3ZSB3b3VsZCBuZWVkIHRvIGNyZWF0ZSBtb3JlIG9mIHRoZW0uXG4gICAgICAvLyBUaGlzIHRyYWRlb2ZmIG9wdGltaXplcyBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICAoaHR0cEFnZW50IGFzIGFueSkub3B0aW9ucy50aW1lb3V0ID0gbWluQWdlbnRUaW1lb3V0O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlkZW1wb3RlbmN5SGVhZGVyICYmIG1ldGhvZCAhPT0gJ2dldCcpIHtcbiAgICAgIGlmICghb3B0aW9ucy5pZGVtcG90ZW5jeUtleSkgb3B0aW9ucy5pZGVtcG90ZW5jeUtleSA9IHRoaXMuZGVmYXVsdElkZW1wb3RlbmN5S2V5KCk7XG4gICAgICBoZWFkZXJzW3RoaXMuaWRlbXBvdGVuY3lIZWFkZXJdID0gb3B0aW9ucy5pZGVtcG90ZW5jeUtleTtcbiAgICB9XG5cbiAgICBjb25zdCByZXFIZWFkZXJzID0gdGhpcy5idWlsZEhlYWRlcnMoeyBvcHRpb25zLCBoZWFkZXJzLCBjb250ZW50TGVuZ3RoLCByZXRyeUNvdW50IH0pO1xuXG4gICAgY29uc3QgcmVxOiBSZXF1ZXN0SW5pdCA9IHtcbiAgICAgIG1ldGhvZCxcbiAgICAgIC4uLihib2R5ICYmIHsgYm9keTogYm9keSBhcyBhbnkgfSksXG4gICAgICBoZWFkZXJzOiByZXFIZWFkZXJzLFxuICAgICAgLi4uKGh0dHBBZ2VudCAmJiB7IGFnZW50OiBodHRwQWdlbnQgfSksXG4gICAgICAvLyBAdHMtaWdub3JlIG5vZGUtZmV0Y2ggdXNlcyBhIGN1c3RvbSBBYm9ydFNpZ25hbCB0eXBlIHRoYXQgaXNcbiAgICAgIC8vIG5vdCBjb21wYXRpYmxlIHdpdGggc3RhbmRhcmQgd2ViIHR5cGVzXG4gICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsID8/IG51bGwsXG4gICAgfTtcblxuICAgIHJldHVybiB7IHJlcSwgdXJsLCB0aW1lb3V0IH07XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkSGVhZGVycyh7XG4gICAgb3B0aW9ucyxcbiAgICBoZWFkZXJzLFxuICAgIGNvbnRlbnRMZW5ndGgsXG4gICAgcmV0cnlDb3VudCxcbiAgfToge1xuICAgIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnM7XG4gICAgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZD47XG4gICAgY29udGVudExlbmd0aDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgICByZXRyeUNvdW50OiBudW1iZXI7XG4gIH0pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICBjb25zdCByZXFIZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gICAgaWYgKGNvbnRlbnRMZW5ndGgpIHtcbiAgICAgIHJlcUhlYWRlcnNbJ2NvbnRlbnQtbGVuZ3RoJ10gPSBjb250ZW50TGVuZ3RoO1xuICAgIH1cblxuICAgIGNvbnN0IGRlZmF1bHRIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycyhvcHRpb25zKTtcbiAgICBhcHBseUhlYWRlcnNNdXQocmVxSGVhZGVycywgZGVmYXVsdEhlYWRlcnMpO1xuICAgIGFwcGx5SGVhZGVyc011dChyZXFIZWFkZXJzLCBoZWFkZXJzKTtcblxuICAgIC8vIGxldCBidWlsdGluIGZldGNoIHNldCB0aGUgQ29udGVudC1UeXBlIGZvciBtdWx0aXBhcnQgYm9kaWVzXG4gICAgaWYgKGlzTXVsdGlwYXJ0Qm9keShvcHRpb25zLmJvZHkpICYmIHNoaW1zS2luZCAhPT0gJ25vZGUnKSB7XG4gICAgICBkZWxldGUgcmVxSGVhZGVyc1snY29udGVudC10eXBlJ107XG4gICAgfVxuXG4gICAgLy8gRG9uJ3Qgc2V0IHRoZSByZXRyeSBjb3VudCBoZWFkZXIgaWYgaXQgd2FzIGFscmVhZHkgc2V0IG9yIHJlbW92ZWQgdGhyb3VnaCBkZWZhdWx0IGhlYWRlcnMgb3IgYnkgdGhlXG4gICAgLy8gY2FsbGVyLiBXZSBjaGVjayBgZGVmYXVsdEhlYWRlcnNgIGFuZCBgaGVhZGVyc2AsIHdoaWNoIGNhbiBjb250YWluIG51bGxzLCBpbnN0ZWFkIG9mIGByZXFIZWFkZXJzYCB0b1xuICAgIC8vIGFjY291bnQgZm9yIHRoZSByZW1vdmFsIGNhc2UuXG4gICAgaWYgKFxuICAgICAgZ2V0SGVhZGVyKGRlZmF1bHRIZWFkZXJzLCAneC1zdGFpbmxlc3MtcmV0cnktY291bnQnKSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICBnZXRIZWFkZXIoaGVhZGVycywgJ3gtc3RhaW5sZXNzLXJldHJ5LWNvdW50JykgPT09IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgcmVxSGVhZGVyc1sneC1zdGFpbmxlc3MtcmV0cnktY291bnQnXSA9IFN0cmluZyhyZXRyeUNvdW50KTtcbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlSGVhZGVycyhyZXFIZWFkZXJzLCBoZWFkZXJzKTtcblxuICAgIHJldHVybiByZXFIZWFkZXJzO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYXMgYSBjYWxsYmFjayBmb3IgbXV0YXRpbmcgdGhlIGdpdmVuIGBGaW5hbFJlcXVlc3RPcHRpb25zYCBvYmplY3QuXG4gICAqL1xuICBwcm90ZWN0ZWQgYXN5bmMgcHJlcGFyZU9wdGlvbnMob3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge31cblxuICAvKipcbiAgICogVXNlZCBhcyBhIGNhbGxiYWNrIGZvciBtdXRhdGluZyB0aGUgZ2l2ZW4gYFJlcXVlc3RJbml0YCBvYmplY3QuXG4gICAqXG4gICAqIFRoaXMgaXMgdXNlZnVsIGZvciBjYXNlcyB3aGVyZSB5b3Ugd2FudCB0byBhZGQgY2VydGFpbiBoZWFkZXJzIGJhc2VkIG9mZiBvZlxuICAgKiB0aGUgcmVxdWVzdCBwcm9wZXJ0aWVzLCBlLmcuIGBtZXRob2RgIG9yIGB1cmxgLlxuICAgKi9cbiAgcHJvdGVjdGVkIGFzeW5jIHByZXBhcmVSZXF1ZXN0KFxuICAgIHJlcXVlc3Q6IFJlcXVlc3RJbml0LFxuICAgIHsgdXJsLCBvcHRpb25zIH06IHsgdXJsOiBzdHJpbmc7IG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnMgfSxcbiAgKTogUHJvbWlzZTx2b2lkPiB7fVxuXG4gIHByb3RlY3RlZCBwYXJzZUhlYWRlcnMoaGVhZGVyczogSGVhZGVyc0luaXQgfCBudWxsIHwgdW5kZWZpbmVkKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgcmV0dXJuIChcbiAgICAgICFoZWFkZXJzID8ge31cbiAgICAgIDogU3ltYm9sLml0ZXJhdG9yIGluIGhlYWRlcnMgP1xuICAgICAgICBPYmplY3QuZnJvbUVudHJpZXMoQXJyYXkuZnJvbShoZWFkZXJzIGFzIEl0ZXJhYmxlPHN0cmluZ1tdPikubWFwKChoZWFkZXIpID0+IFsuLi5oZWFkZXJdKSlcbiAgICAgIDogeyAuLi5oZWFkZXJzIH1cbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIG1ha2VTdGF0dXNFcnJvcihcbiAgICBzdGF0dXM6IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgICBlcnJvcjogT2JqZWN0IHwgdW5kZWZpbmVkLFxuICAgIG1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBoZWFkZXJzOiBIZWFkZXJzIHwgdW5kZWZpbmVkLFxuICApOiBBUElFcnJvciB7XG4gICAgcmV0dXJuIEFQSUVycm9yLmdlbmVyYXRlKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICB9XG5cbiAgcmVxdWVzdDxSZXEsIFJzcD4oXG4gICAgb3B0aW9uczogUHJvbWlzZU9yVmFsdWU8RmluYWxSZXF1ZXN0T3B0aW9uczxSZXE+PixcbiAgICByZW1haW5pbmdSZXRyaWVzOiBudW1iZXIgfCBudWxsID0gbnVsbCxcbiAgKTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gbmV3IEFQSVByb21pc2UodGhpcy5tYWtlUmVxdWVzdChvcHRpb25zLCByZW1haW5pbmdSZXRyaWVzKSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0PFJlcT4oXG4gICAgb3B0aW9uc0lucHV0OiBQcm9taXNlT3JWYWx1ZTxGaW5hbFJlcXVlc3RPcHRpb25zPFJlcT4+LFxuICAgIHJldHJpZXNSZW1haW5pbmc6IG51bWJlciB8IG51bGwsXG4gICk6IFByb21pc2U8QVBJUmVzcG9uc2VQcm9wcz4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBvcHRpb25zSW5wdXQ7XG4gICAgY29uc3QgbWF4UmV0cmllcyA9IG9wdGlvbnMubWF4UmV0cmllcyA/PyB0aGlzLm1heFJldHJpZXM7XG4gICAgaWYgKHJldHJpZXNSZW1haW5pbmcgPT0gbnVsbCkge1xuICAgICAgcmV0cmllc1JlbWFpbmluZyA9IG1heFJldHJpZXM7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5wcmVwYXJlT3B0aW9ucyhvcHRpb25zKTtcblxuICAgIGNvbnN0IHsgcmVxLCB1cmwsIHRpbWVvdXQgfSA9IHRoaXMuYnVpbGRSZXF1ZXN0KG9wdGlvbnMsIHsgcmV0cnlDb3VudDogbWF4UmV0cmllcyAtIHJldHJpZXNSZW1haW5pbmcgfSk7XG5cbiAgICBhd2FpdCB0aGlzLnByZXBhcmVSZXF1ZXN0KHJlcSwgeyB1cmwsIG9wdGlvbnMgfSk7XG5cbiAgICBkZWJ1ZygncmVxdWVzdCcsIHVybCwgb3B0aW9ucywgcmVxLmhlYWRlcnMpO1xuXG4gICAgaWYgKG9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJVXNlckFib3J0RXJyb3IoKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaFdpdGhUaW1lb3V0KHVybCwgcmVxLCB0aW1lb3V0LCBjb250cm9sbGVyKS5jYXRjaChjYXN0VG9FcnJvcik7XG5cbiAgICBpZiAocmVzcG9uc2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgaWYgKG9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgICAgfVxuICAgICAgaWYgKHJldHJpZXNSZW1haW5pbmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmV0cnlSZXF1ZXN0KG9wdGlvbnMsIHJldHJpZXNSZW1haW5pbmcpO1xuICAgICAgfVxuICAgICAgaWYgKHJlc3BvbnNlLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICB0aHJvdyBuZXcgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcigpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEFQSUNvbm5lY3Rpb25FcnJvcih7IGNhdXNlOiByZXNwb25zZSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSBjcmVhdGVSZXNwb25zZUhlYWRlcnMocmVzcG9uc2UuaGVhZGVycyk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBpZiAocmV0cmllc1JlbWFpbmluZyAmJiB0aGlzLnNob3VsZFJldHJ5KHJlc3BvbnNlKSkge1xuICAgICAgICBjb25zdCByZXRyeU1lc3NhZ2UgPSBgcmV0cnlpbmcsICR7cmV0cmllc1JlbWFpbmluZ30gYXR0ZW1wdHMgcmVtYWluaW5nYDtcbiAgICAgICAgZGVidWcoYHJlc3BvbnNlIChlcnJvcjsgJHtyZXRyeU1lc3NhZ2V9KWAsIHJlc3BvbnNlLnN0YXR1cywgdXJsLCByZXNwb25zZUhlYWRlcnMpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZXRyeVJlcXVlc3Qob3B0aW9ucywgcmV0cmllc1JlbWFpbmluZywgcmVzcG9uc2VIZWFkZXJzKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZXJyVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoZSkgPT4gY2FzdFRvRXJyb3IoZSkubWVzc2FnZSk7XG4gICAgICBjb25zdCBlcnJKU09OID0gc2FmZUpTT04oZXJyVGV4dCk7XG4gICAgICBjb25zdCBlcnJNZXNzYWdlID0gZXJySlNPTiA/IHVuZGVmaW5lZCA6IGVyclRleHQ7XG4gICAgICBjb25zdCByZXRyeU1lc3NhZ2UgPSByZXRyaWVzUmVtYWluaW5nID8gYChlcnJvcjsgbm8gbW9yZSByZXRyaWVzIGxlZnQpYCA6IGAoZXJyb3I7IG5vdCByZXRyeWFibGUpYDtcblxuICAgICAgZGVidWcoYHJlc3BvbnNlIChlcnJvcjsgJHtyZXRyeU1lc3NhZ2V9KWAsIHJlc3BvbnNlLnN0YXR1cywgdXJsLCByZXNwb25zZUhlYWRlcnMsIGVyck1lc3NhZ2UpO1xuXG4gICAgICBjb25zdCBlcnIgPSB0aGlzLm1ha2VTdGF0dXNFcnJvcihyZXNwb25zZS5zdGF0dXMsIGVyckpTT04sIGVyck1lc3NhZ2UsIHJlc3BvbnNlSGVhZGVycyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgcmVzcG9uc2UsIG9wdGlvbnMsIGNvbnRyb2xsZXIgfTtcbiAgfVxuXG4gIHJlcXVlc3RBUElMaXN0PEl0ZW0gPSB1bmtub3duLCBQYWdlQ2xhc3MgZXh0ZW5kcyBBYnN0cmFjdFBhZ2U8SXRlbT4gPSBBYnN0cmFjdFBhZ2U8SXRlbT4+KFxuICAgIFBhZ2U6IG5ldyAoLi4uYXJnczogQ29uc3RydWN0b3JQYXJhbWV0ZXJzPHR5cGVvZiBBYnN0cmFjdFBhZ2U+KSA9PiBQYWdlQ2xhc3MsXG4gICAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyxcbiAgKTogUGFnZVByb21pc2U8UGFnZUNsYXNzLCBJdGVtPiB7XG4gICAgY29uc3QgcmVxdWVzdCA9IHRoaXMubWFrZVJlcXVlc3Qob3B0aW9ucywgbnVsbCk7XG4gICAgcmV0dXJuIG5ldyBQYWdlUHJvbWlzZTxQYWdlQ2xhc3MsIEl0ZW0+KHRoaXMsIHJlcXVlc3QsIFBhZ2UpO1xuICB9XG5cbiAgYnVpbGRVUkw8UmVxPihwYXRoOiBzdHJpbmcsIHF1ZXJ5OiBSZXEgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcbiAgICBjb25zdCB1cmwgPVxuICAgICAgaXNBYnNvbHV0ZVVSTChwYXRoKSA/XG4gICAgICAgIG5ldyBVUkwocGF0aClcbiAgICAgIDogbmV3IFVSTCh0aGlzLmJhc2VVUkwgKyAodGhpcy5iYXNlVVJMLmVuZHNXaXRoKCcvJykgJiYgcGF0aC5zdGFydHNXaXRoKCcvJykgPyBwYXRoLnNsaWNlKDEpIDogcGF0aCkpO1xuXG4gICAgY29uc3QgZGVmYXVsdFF1ZXJ5ID0gdGhpcy5kZWZhdWx0UXVlcnkoKTtcbiAgICBpZiAoIWlzRW1wdHlPYmooZGVmYXVsdFF1ZXJ5KSkge1xuICAgICAgcXVlcnkgPSB7IC4uLmRlZmF1bHRRdWVyeSwgLi4ucXVlcnkgfSBhcyBSZXE7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBxdWVyeSA9PT0gJ29iamVjdCcgJiYgcXVlcnkgJiYgIUFycmF5LmlzQXJyYXkocXVlcnkpKSB7XG4gICAgICB1cmwuc2VhcmNoID0gdGhpcy5zdHJpbmdpZnlRdWVyeShxdWVyeSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN0cmluZ2lmeVF1ZXJ5KHF1ZXJ5OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHN0cmluZyB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KVxuICAgICAgLmZpbHRlcigoW18sIHZhbHVlXSkgPT4gdHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJylcbiAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICAgIGBDYW5ub3Qgc3RyaW5naWZ5IHR5cGUgJHt0eXBlb2YgdmFsdWV9OyBFeHBlY3RlZCBzdHJpbmcsIG51bWJlciwgYm9vbGVhbiwgb3IgbnVsbC4gSWYgeW91IG5lZWQgdG8gcGFzcyBuZXN0ZWQgcXVlcnkgcGFyYW1ldGVycywgeW91IGNhbiBtYW51YWxseSBlbmNvZGUgdGhlbSwgZS5nLiB7IHF1ZXJ5OiB7ICdmb29ba2V5MV0nOiB2YWx1ZTEsICdmb29ba2V5Ml0nOiB2YWx1ZTIgfSB9LCBhbmQgcGxlYXNlIG9wZW4gYSBHaXRIdWIgaXNzdWUgcmVxdWVzdGluZyBiZXR0ZXIgc3VwcG9ydCBmb3IgeW91ciB1c2UgY2FzZS5gLFxuICAgICAgICApO1xuICAgICAgfSlcbiAgICAgIC5qb2luKCcmJyk7XG4gIH1cblxuICBhc3luYyBmZXRjaFdpdGhUaW1lb3V0KFxuICAgIHVybDogUmVxdWVzdEluZm8sXG4gICAgaW5pdDogUmVxdWVzdEluaXQgfCB1bmRlZmluZWQsXG4gICAgbXM6IG51bWJlcixcbiAgICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIsXG4gICk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICBjb25zdCB7IHNpZ25hbCwgLi4ub3B0aW9ucyB9ID0gaW5pdCB8fCB7fTtcbiAgICBpZiAoc2lnbmFsKSBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiBjb250cm9sbGVyLmFib3J0KCkpO1xuXG4gICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCBtcyk7XG5cbiAgICBjb25zdCBmZXRjaE9wdGlvbnMgPSB7XG4gICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsIGFzIGFueSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfTtcbiAgICBpZiAoZmV0Y2hPcHRpb25zLm1ldGhvZCkge1xuICAgICAgLy8gQ3VzdG9tIG1ldGhvZHMgbGlrZSAncGF0Y2gnIG5lZWQgdG8gYmUgdXBwZXJjYXNlZFxuICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMvdW5kaWNpL2lzc3Vlcy8yMjk0XG4gICAgICBmZXRjaE9wdGlvbnMubWV0aG9kID0gZmV0Y2hPcHRpb25zLm1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAvLyB1c2UgdW5kZWZpbmVkIHRoaXMgYmluZGluZzsgZmV0Y2ggZXJyb3JzIGlmIGJvdW5kIHRvIHNvbWV0aGluZyBlbHNlIGluIGJyb3dzZXIvY2xvdWRmbGFyZVxuICAgICAgdGhpcy5mZXRjaC5jYWxsKHVuZGVmaW5lZCwgdXJsLCBmZXRjaE9wdGlvbnMpLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHNob3VsZFJldHJ5KHJlc3BvbnNlOiBSZXNwb25zZSk6IGJvb2xlYW4ge1xuICAgIC8vIE5vdGUgdGhpcyBpcyBub3QgYSBzdGFuZGFyZCBoZWFkZXIuXG4gICAgY29uc3Qgc2hvdWxkUmV0cnlIZWFkZXIgPSByZXNwb25zZS5oZWFkZXJzLmdldCgneC1zaG91bGQtcmV0cnknKTtcblxuICAgIC8vIElmIHRoZSBzZXJ2ZXIgZXhwbGljaXRseSBzYXlzIHdoZXRoZXIgb3Igbm90IHRvIHJldHJ5LCBvYmV5LlxuICAgIGlmIChzaG91bGRSZXRyeUhlYWRlciA9PT0gJ3RydWUnKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoc2hvdWxkUmV0cnlIZWFkZXIgPT09ICdmYWxzZScpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFJldHJ5IG9uIHJlcXVlc3QgdGltZW91dHMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA4KSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFJldHJ5IG9uIGxvY2sgdGltZW91dHMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFJldHJ5IG9uIHJhdGUgbGltaXRzLlxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQyOSkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBSZXRyeSBpbnRlcm5hbCBlcnJvcnMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA1MDApIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZXRyeVJlcXVlc3QoXG4gICAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyxcbiAgICByZXRyaWVzUmVtYWluaW5nOiBudW1iZXIsXG4gICAgcmVzcG9uc2VIZWFkZXJzPzogSGVhZGVycyB8IHVuZGVmaW5lZCxcbiAgKTogUHJvbWlzZTxBUElSZXNwb25zZVByb3BzPiB7XG4gICAgbGV0IHRpbWVvdXRNaWxsaXM6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAgIC8vIE5vdGUgdGhlIGByZXRyeS1hZnRlci1tc2AgaGVhZGVyIG1heSBub3QgYmUgc3RhbmRhcmQsIGJ1dCBpcyBhIGdvb2QgaWRlYSBhbmQgd2UnZCBsaWtlIHByb2FjdGl2ZSBzdXBwb3J0IGZvciBpdC5cbiAgICBjb25zdCByZXRyeUFmdGVyTWlsbGlzSGVhZGVyID0gcmVzcG9uc2VIZWFkZXJzPy5bJ3JldHJ5LWFmdGVyLW1zJ107XG4gICAgaWYgKHJldHJ5QWZ0ZXJNaWxsaXNIZWFkZXIpIHtcbiAgICAgIGNvbnN0IHRpbWVvdXRNcyA9IHBhcnNlRmxvYXQocmV0cnlBZnRlck1pbGxpc0hlYWRlcik7XG4gICAgICBpZiAoIU51bWJlci5pc05hTih0aW1lb3V0TXMpKSB7XG4gICAgICAgIHRpbWVvdXRNaWxsaXMgPSB0aW1lb3V0TXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWJvdXQgdGhlIFJldHJ5LUFmdGVyIGhlYWRlcjogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRUUC9IZWFkZXJzL1JldHJ5LUFmdGVyXG4gICAgY29uc3QgcmV0cnlBZnRlckhlYWRlciA9IHJlc3BvbnNlSGVhZGVycz8uWydyZXRyeS1hZnRlciddO1xuICAgIGlmIChyZXRyeUFmdGVySGVhZGVyICYmICF0aW1lb3V0TWlsbGlzKSB7XG4gICAgICBjb25zdCB0aW1lb3V0U2Vjb25kcyA9IHBhcnNlRmxvYXQocmV0cnlBZnRlckhlYWRlcik7XG4gICAgICBpZiAoIU51bWJlci5pc05hTih0aW1lb3V0U2Vjb25kcykpIHtcbiAgICAgICAgdGltZW91dE1pbGxpcyA9IHRpbWVvdXRTZWNvbmRzICogMTAwMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVvdXRNaWxsaXMgPSBEYXRlLnBhcnNlKHJldHJ5QWZ0ZXJIZWFkZXIpIC0gRGF0ZS5ub3coKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgQVBJIGFza3MgdXMgdG8gd2FpdCBhIGNlcnRhaW4gYW1vdW50IG9mIHRpbWUgKGFuZCBpdCdzIGEgcmVhc29uYWJsZSBhbW91bnQpLFxuICAgIC8vIGp1c3QgZG8gd2hhdCBpdCBzYXlzLCBidXQgb3RoZXJ3aXNlIGNhbGN1bGF0ZSBhIGRlZmF1bHRcbiAgICBpZiAoISh0aW1lb3V0TWlsbGlzICYmIDAgPD0gdGltZW91dE1pbGxpcyAmJiB0aW1lb3V0TWlsbGlzIDwgNjAgKiAxMDAwKSkge1xuICAgICAgY29uc3QgbWF4UmV0cmllcyA9IG9wdGlvbnMubWF4UmV0cmllcyA/PyB0aGlzLm1heFJldHJpZXM7XG4gICAgICB0aW1lb3V0TWlsbGlzID0gdGhpcy5jYWxjdWxhdGVEZWZhdWx0UmV0cnlUaW1lb3V0TWlsbGlzKHJldHJpZXNSZW1haW5pbmcsIG1heFJldHJpZXMpO1xuICAgIH1cbiAgICBhd2FpdCBzbGVlcCh0aW1lb3V0TWlsbGlzKTtcblxuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KG9wdGlvbnMsIHJldHJpZXNSZW1haW5pbmcgLSAxKTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlRGVmYXVsdFJldHJ5VGltZW91dE1pbGxpcyhyZXRyaWVzUmVtYWluaW5nOiBudW1iZXIsIG1heFJldHJpZXM6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgaW5pdGlhbFJldHJ5RGVsYXkgPSAwLjU7XG4gICAgY29uc3QgbWF4UmV0cnlEZWxheSA9IDguMDtcblxuICAgIGNvbnN0IG51bVJldHJpZXMgPSBtYXhSZXRyaWVzIC0gcmV0cmllc1JlbWFpbmluZztcblxuICAgIC8vIEFwcGx5IGV4cG9uZW50aWFsIGJhY2tvZmYsIGJ1dCBub3QgbW9yZSB0aGFuIHRoZSBtYXguXG4gICAgY29uc3Qgc2xlZXBTZWNvbmRzID0gTWF0aC5taW4oaW5pdGlhbFJldHJ5RGVsYXkgKiBNYXRoLnBvdygyLCBudW1SZXRyaWVzKSwgbWF4UmV0cnlEZWxheSk7XG5cbiAgICAvLyBBcHBseSBzb21lIGppdHRlciwgdGFrZSB1cCB0byBhdCBtb3N0IDI1IHBlcmNlbnQgb2YgdGhlIHJldHJ5IHRpbWUuXG4gICAgY29uc3Qgaml0dGVyID0gMSAtIE1hdGgucmFuZG9tKCkgKiAwLjI1O1xuXG4gICAgcmV0dXJuIHNsZWVwU2Vjb25kcyAqIGppdHRlciAqIDEwMDA7XG4gIH1cblxuICBwcml2YXRlIGdldFVzZXJBZ2VudCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9L0pTICR7VkVSU0lPTn1gO1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIFBhZ2VJbmZvID0geyB1cmw6IFVSTCB9IHwgeyBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbCB9O1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RQYWdlPEl0ZW0+IGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZTxJdGVtPiB7XG4gICNjbGllbnQ6IEFQSUNsaWVudDtcbiAgcHJvdGVjdGVkIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnM7XG5cbiAgcHJvdGVjdGVkIHJlc3BvbnNlOiBSZXNwb25zZTtcbiAgcHJvdGVjdGVkIGJvZHk6IHVua25vd247XG5cbiAgY29uc3RydWN0b3IoY2xpZW50OiBBUElDbGllbnQsIHJlc3BvbnNlOiBSZXNwb25zZSwgYm9keTogdW5rbm93biwgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucykge1xuICAgIHRoaXMuI2NsaWVudCA9IGNsaWVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLmJvZHkgPSBib2R5O1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIFVzZSBuZXh0UGFnZUluZm8gaW5zdGVhZFxuICAgKi9cbiAgYWJzdHJhY3QgbmV4dFBhZ2VQYXJhbXMoKTogUGFydGlhbDxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4gfCBudWxsO1xuICBhYnN0cmFjdCBuZXh0UGFnZUluZm8oKTogUGFnZUluZm8gfCBudWxsO1xuXG4gIGFic3RyYWN0IGdldFBhZ2luYXRlZEl0ZW1zKCk6IEl0ZW1bXTtcblxuICBoYXNOZXh0UGFnZSgpOiBib29sZWFuIHtcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuZ2V0UGFnaW5hdGVkSXRlbXMoKTtcbiAgICBpZiAoIWl0ZW1zLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLm5leHRQYWdlSW5mbygpICE9IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXROZXh0UGFnZSgpOiBQcm9taXNlPHRoaXM+IHtcbiAgICBjb25zdCBuZXh0SW5mbyA9IHRoaXMubmV4dFBhZ2VJbmZvKCk7XG4gICAgaWYgKCFuZXh0SW5mbykge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICAnTm8gbmV4dCBwYWdlIGV4cGVjdGVkOyBwbGVhc2UgY2hlY2sgYC5oYXNOZXh0UGFnZSgpYCBiZWZvcmUgY2FsbGluZyBgLmdldE5leHRQYWdlKClgLicsXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBuZXh0T3B0aW9ucyA9IHsgLi4udGhpcy5vcHRpb25zIH07XG4gICAgaWYgKCdwYXJhbXMnIGluIG5leHRJbmZvICYmIHR5cGVvZiBuZXh0T3B0aW9ucy5xdWVyeSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG5leHRPcHRpb25zLnF1ZXJ5ID0geyAuLi5uZXh0T3B0aW9ucy5xdWVyeSwgLi4ubmV4dEluZm8ucGFyYW1zIH07XG4gICAgfSBlbHNlIGlmICgndXJsJyBpbiBuZXh0SW5mbykge1xuICAgICAgY29uc3QgcGFyYW1zID0gWy4uLk9iamVjdC5lbnRyaWVzKG5leHRPcHRpb25zLnF1ZXJ5IHx8IHt9KSwgLi4ubmV4dEluZm8udXJsLnNlYXJjaFBhcmFtcy5lbnRyaWVzKCldO1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgcGFyYW1zKSB7XG4gICAgICAgIG5leHRJbmZvLnVybC5zZWFyY2hQYXJhbXMuc2V0KGtleSwgdmFsdWUgYXMgYW55KTtcbiAgICAgIH1cbiAgICAgIG5leHRPcHRpb25zLnF1ZXJ5ID0gdW5kZWZpbmVkO1xuICAgICAgbmV4dE9wdGlvbnMucGF0aCA9IG5leHRJbmZvLnVybC50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy4jY2xpZW50LnJlcXVlc3RBUElMaXN0KHRoaXMuY29uc3RydWN0b3IgYXMgYW55LCBuZXh0T3B0aW9ucyk7XG4gIH1cblxuICBhc3luYyAqaXRlclBhZ2VzKCk6IEFzeW5jR2VuZXJhdG9yPHRoaXM+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICBsZXQgcGFnZTogdGhpcyA9IHRoaXM7XG4gICAgeWllbGQgcGFnZTtcbiAgICB3aGlsZSAocGFnZS5oYXNOZXh0UGFnZSgpKSB7XG4gICAgICBwYWdlID0gYXdhaXQgcGFnZS5nZXROZXh0UGFnZSgpO1xuICAgICAgeWllbGQgcGFnZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0dlbmVyYXRvcjxJdGVtPiB7XG4gICAgZm9yIGF3YWl0IChjb25zdCBwYWdlIG9mIHRoaXMuaXRlclBhZ2VzKCkpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBwYWdlLmdldFBhZ2luYXRlZEl0ZW1zKCkpIHtcbiAgICAgICAgeWllbGQgaXRlbTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHN1YmNsYXNzIG9mIFByb21pc2Ugd2lsbCByZXNvbHZlIHRvIGFuIGluc3RhbnRpYXRlZCBQYWdlIG9uY2UgdGhlIHJlcXVlc3QgY29tcGxldGVzLlxuICpcbiAqIEl0IGFsc28gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlIHRvIGFsbG93IGF1dG8tcGFnaW5hdGluZyBpdGVyYXRpb24gb24gYW4gdW5hd2FpdGVkIGxpc3QgY2FsbCwgZWc6XG4gKlxuICogICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGNsaWVudC5pdGVtcy5saXN0KCkpIHtcbiAqICAgICAgY29uc29sZS5sb2coaXRlbSlcbiAqICAgIH1cbiAqL1xuZXhwb3J0IGNsYXNzIFBhZ2VQcm9taXNlPFxuICAgIFBhZ2VDbGFzcyBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPixcbiAgICBJdGVtID0gUmV0dXJuVHlwZTxQYWdlQ2xhc3NbJ2dldFBhZ2luYXRlZEl0ZW1zJ10+W251bWJlcl0sXG4gID5cbiAgZXh0ZW5kcyBBUElQcm9taXNlPFBhZ2VDbGFzcz5cbiAgaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPEl0ZW0+XG57XG4gIGNvbnN0cnVjdG9yKFxuICAgIGNsaWVudDogQVBJQ2xpZW50LFxuICAgIHJlcXVlc3Q6IFByb21pc2U8QVBJUmVzcG9uc2VQcm9wcz4sXG4gICAgUGFnZTogbmV3ICguLi5hcmdzOiBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8dHlwZW9mIEFic3RyYWN0UGFnZT4pID0+IFBhZ2VDbGFzcyxcbiAgKSB7XG4gICAgc3VwZXIoXG4gICAgICByZXF1ZXN0LFxuICAgICAgYXN5bmMgKHByb3BzKSA9PlxuICAgICAgICBuZXcgUGFnZShcbiAgICAgICAgICBjbGllbnQsXG4gICAgICAgICAgcHJvcHMucmVzcG9uc2UsXG4gICAgICAgICAgYXdhaXQgZGVmYXVsdFBhcnNlUmVzcG9uc2UocHJvcHMpLFxuICAgICAgICAgIHByb3BzLm9wdGlvbnMsXG4gICAgICAgICkgYXMgV2l0aFJlcXVlc3RJRDxQYWdlQ2xhc3M+LFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQWxsb3cgYXV0by1wYWdpbmF0aW5nIGl0ZXJhdGlvbiBvbiBhbiB1bmF3YWl0ZWQgbGlzdCBjYWxsLCBlZzpcbiAgICpcbiAgICogICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGNsaWVudC5pdGVtcy5saXN0KCkpIHtcbiAgICogICAgICBjb25zb2xlLmxvZyhpdGVtKVxuICAgKiAgICB9XG4gICAqL1xuICBhc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0dlbmVyYXRvcjxJdGVtPiB7XG4gICAgY29uc3QgcGFnZSA9IGF3YWl0IHRoaXM7XG4gICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIHBhZ2UpIHtcbiAgICAgIHlpZWxkIGl0ZW07XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVSZXNwb25zZUhlYWRlcnMgPSAoXG4gIGhlYWRlcnM6IEF3YWl0ZWQ8UmV0dXJuVHlwZTxGZXRjaD4+WydoZWFkZXJzJ10sXG4pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm94eShcbiAgICBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBoZWFkZXJzLmVudHJpZXMoKSxcbiAgICApLFxuICAgIHtcbiAgICAgIGdldCh0YXJnZXQsIG5hbWUpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gbmFtZS50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gdGFyZ2V0W2tleS50b0xvd2VyQ2FzZSgpXSB8fCB0YXJnZXRba2V5XTtcbiAgICAgIH0sXG4gICAgfSxcbiAgKTtcbn07XG5cbnR5cGUgSFRUUE1ldGhvZCA9ICdnZXQnIHwgJ3Bvc3QnIHwgJ3B1dCcgfCAncGF0Y2gnIHwgJ2RlbGV0ZSc7XG5cbmV4cG9ydCB0eXBlIFJlcXVlc3RDbGllbnQgPSB7IGZldGNoOiBGZXRjaCB9O1xuZXhwb3J0IHR5cGUgSGVhZGVycyA9IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ+O1xuZXhwb3J0IHR5cGUgRGVmYXVsdFF1ZXJ5ID0gUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPjtcbmV4cG9ydCB0eXBlIEtleXNFbnVtPFQ+ID0geyBbUCBpbiBrZXlvZiBSZXF1aXJlZDxUPl06IHRydWUgfTtcblxuZXhwb3J0IHR5cGUgUmVxdWVzdE9wdGlvbnM8XG4gIFJlcSA9IHVua25vd24gfCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IFJlYWRhYmxlIHwgQmxvYkxpa2UgfCBBcnJheUJ1ZmZlclZpZXcgfCBBcnJheUJ1ZmZlcixcbj4gPSB7XG4gIG1ldGhvZD86IEhUVFBNZXRob2Q7XG4gIHBhdGg/OiBzdHJpbmc7XG4gIHF1ZXJ5PzogUmVxIHwgdW5kZWZpbmVkO1xuICBib2R5PzogUmVxIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgaGVhZGVycz86IEhlYWRlcnMgfCB1bmRlZmluZWQ7XG5cbiAgbWF4UmV0cmllcz86IG51bWJlcjtcbiAgc3RyZWFtPzogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbiAgdGltZW91dD86IG51bWJlcjtcbiAgaHR0cEFnZW50PzogQWdlbnQ7XG4gIHNpZ25hbD86IEFib3J0U2lnbmFsIHwgdW5kZWZpbmVkIHwgbnVsbDtcbiAgaWRlbXBvdGVuY3lLZXk/OiBzdHJpbmc7XG5cbiAgX19iaW5hcnlSZXF1ZXN0PzogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbiAgX19iaW5hcnlSZXNwb25zZT86IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG4gIF9fc3RyZWFtQ2xhc3M/OiB0eXBlb2YgU3RyZWFtO1xufTtcblxuLy8gVGhpcyBpcyByZXF1aXJlZCBzbyB0aGF0IHdlIGNhbiBkZXRlcm1pbmUgaWYgYSBnaXZlbiBvYmplY3QgbWF0Y2hlcyB0aGUgUmVxdWVzdE9wdGlvbnNcbi8vIHR5cGUgYXQgcnVudGltZS4gV2hpbGUgdGhpcyByZXF1aXJlcyBkdXBsaWNhdGlvbiwgaXQgaXMgZW5mb3JjZWQgYnkgdGhlIFR5cGVTY3JpcHRcbi8vIGNvbXBpbGVyIHN1Y2ggdGhhdCBhbnkgbWlzc2luZyAvIGV4dHJhbmVvdXMga2V5cyB3aWxsIGNhdXNlIGFuIGVycm9yLlxuY29uc3QgcmVxdWVzdE9wdGlvbnNLZXlzOiBLZXlzRW51bTxSZXF1ZXN0T3B0aW9ucz4gPSB7XG4gIG1ldGhvZDogdHJ1ZSxcbiAgcGF0aDogdHJ1ZSxcbiAgcXVlcnk6IHRydWUsXG4gIGJvZHk6IHRydWUsXG4gIGhlYWRlcnM6IHRydWUsXG5cbiAgbWF4UmV0cmllczogdHJ1ZSxcbiAgc3RyZWFtOiB0cnVlLFxuICB0aW1lb3V0OiB0cnVlLFxuICBodHRwQWdlbnQ6IHRydWUsXG4gIHNpZ25hbDogdHJ1ZSxcbiAgaWRlbXBvdGVuY3lLZXk6IHRydWUsXG5cbiAgX19iaW5hcnlSZXF1ZXN0OiB0cnVlLFxuICBfX2JpbmFyeVJlc3BvbnNlOiB0cnVlLFxuICBfX3N0cmVhbUNsYXNzOiB0cnVlLFxufTtcblxuZXhwb3J0IGNvbnN0IGlzUmVxdWVzdE9wdGlvbnMgPSAob2JqOiB1bmtub3duKTogb2JqIGlzIFJlcXVlc3RPcHRpb25zID0+IHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJlxuICAgIG9iaiAhPT0gbnVsbCAmJlxuICAgICFpc0VtcHR5T2JqKG9iaikgJiZcbiAgICBPYmplY3Qua2V5cyhvYmopLmV2ZXJ5KChrKSA9PiBoYXNPd24ocmVxdWVzdE9wdGlvbnNLZXlzLCBrKSlcbiAgKTtcbn07XG5cbmV4cG9ydCB0eXBlIEZpbmFsUmVxdWVzdE9wdGlvbnM8UmVxID0gdW5rbm93biB8IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgUmVhZGFibGUgfCBEYXRhVmlldz4gPVxuICBSZXF1ZXN0T3B0aW9uczxSZXE+ICYge1xuICAgIG1ldGhvZDogSFRUUE1ldGhvZDtcbiAgICBwYXRoOiBzdHJpbmc7XG4gIH07XG5cbmRlY2xhcmUgY29uc3QgRGVubzogYW55O1xuZGVjbGFyZSBjb25zdCBFZGdlUnVudGltZTogYW55O1xudHlwZSBBcmNoID0gJ3gzMicgfCAneDY0JyB8ICdhcm0nIHwgJ2FybTY0JyB8IGBvdGhlcjoke3N0cmluZ31gIHwgJ3Vua25vd24nO1xudHlwZSBQbGF0Zm9ybU5hbWUgPVxuICB8ICdNYWNPUydcbiAgfCAnTGludXgnXG4gIHwgJ1dpbmRvd3MnXG4gIHwgJ0ZyZWVCU0QnXG4gIHwgJ09wZW5CU0QnXG4gIHwgJ2lPUydcbiAgfCAnQW5kcm9pZCdcbiAgfCBgT3RoZXI6JHtzdHJpbmd9YFxuICB8ICdVbmtub3duJztcbnR5cGUgQnJvd3NlciA9ICdpZScgfCAnZWRnZScgfCAnY2hyb21lJyB8ICdmaXJlZm94JyB8ICdzYWZhcmknO1xudHlwZSBQbGF0Zm9ybVByb3BlcnRpZXMgPSB7XG4gICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJztcbiAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IHN0cmluZztcbiAgJ1gtU3RhaW5sZXNzLU9TJzogUGxhdGZvcm1OYW1lO1xuICAnWC1TdGFpbmxlc3MtQXJjaCc6IEFyY2g7XG4gICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ25vZGUnIHwgJ2Rlbm8nIHwgJ2VkZ2UnIHwgYGJyb3dzZXI6JHtCcm93c2VyfWAgfCAndW5rbm93bic7XG4gICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBzdHJpbmc7XG59O1xuY29uc3QgZ2V0UGxhdGZvcm1Qcm9wZXJ0aWVzID0gKCk6IFBsYXRmb3JtUHJvcGVydGllcyA9PiB7XG4gIGlmICh0eXBlb2YgRGVubyAhPT0gJ3VuZGVmaW5lZCcgJiYgRGVuby5idWlsZCAhPSBudWxsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICAgJ1gtU3RhaW5sZXNzLU9TJzogbm9ybWFsaXplUGxhdGZvcm0oRGVuby5idWlsZC5vcyksXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6IG5vcm1hbGl6ZUFyY2goRGVuby5idWlsZC5hcmNoKSxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ2Rlbm8nLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6XG4gICAgICAgIHR5cGVvZiBEZW5vLnZlcnNpb24gPT09ICdzdHJpbmcnID8gRGVuby52ZXJzaW9uIDogRGVuby52ZXJzaW9uPy5kZW5vID8/ICd1bmtub3duJyxcbiAgICB9O1xuICB9XG4gIGlmICh0eXBlb2YgRWRnZVJ1bnRpbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICAgJ1gtU3RhaW5sZXNzLU9TJzogJ1Vua25vd24nLFxuICAgICAgJ1gtU3RhaW5sZXNzLUFyY2gnOiBgb3RoZXI6JHtFZGdlUnVudGltZX1gLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnZWRnZScsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogcHJvY2Vzcy52ZXJzaW9uLFxuICAgIH07XG4gIH1cbiAgLy8gQ2hlY2sgaWYgTm9kZS5qc1xuICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyA/IHByb2Nlc3MgOiAwKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICAgJ1gtU3RhaW5sZXNzLU9TJzogbm9ybWFsaXplUGxhdGZvcm0ocHJvY2Vzcy5wbGF0Zm9ybSksXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6IG5vcm1hbGl6ZUFyY2gocHJvY2Vzcy5hcmNoKSxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ25vZGUnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6IHByb2Nlc3MudmVyc2lvbixcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgYnJvd3NlckluZm8gPSBnZXRCcm93c2VySW5mbygpO1xuICBpZiAoYnJvd3NlckluZm8pIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiAnVW5rbm93bicsXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6ICd1bmtub3duJyxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogYGJyb3dzZXI6JHticm93c2VySW5mby5icm93c2VyfWAsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogYnJvd3NlckluZm8udmVyc2lvbixcbiAgICB9O1xuICB9XG5cbiAgLy8gVE9ETyBhZGQgc3VwcG9ydCBmb3IgQ2xvdWRmbGFyZSB3b3JrZXJzLCBldGMuXG4gIHJldHVybiB7XG4gICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICdYLVN0YWlubGVzcy1PUyc6ICdVbmtub3duJyxcbiAgICAnWC1TdGFpbmxlc3MtQXJjaCc6ICd1bmtub3duJyxcbiAgICAnWC1TdGFpbmxlc3MtUnVudGltZSc6ICd1bmtub3duJyxcbiAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogJ3Vua25vd24nLFxuICB9O1xufTtcblxudHlwZSBCcm93c2VySW5mbyA9IHtcbiAgYnJvd3NlcjogQnJvd3NlcjtcbiAgdmVyc2lvbjogc3RyaW5nO1xufTtcblxuZGVjbGFyZSBjb25zdCBuYXZpZ2F0b3I6IHsgdXNlckFnZW50OiBzdHJpbmcgfSB8IHVuZGVmaW5lZDtcblxuLy8gTm90ZTogbW9kaWZpZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vSlMtRGV2VG9vbHMvaG9zdC1lbnZpcm9ubWVudC9ibG9iL2IxYWI3OWVjZGUzN2RiNWQ2ZTE2M2MwNTBlNTRmZTdkMjg3ZDdjOTIvc3JjL2lzb21vcnBoaWMuYnJvd3Nlci50c1xuZnVuY3Rpb24gZ2V0QnJvd3NlckluZm8oKTogQnJvd3NlckluZm8gfCBudWxsIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIE5PVEU6IFRoZSBvcmRlciBtYXR0ZXJzIGhlcmUhXG4gIGNvbnN0IGJyb3dzZXJQYXR0ZXJucyA9IFtcbiAgICB7IGtleTogJ2VkZ2UnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvRWRnZSg/OlxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnaWUnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvTVNJRSg/OlxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnaWUnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvVHJpZGVudCg/Oi4qcnZcXDooXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnY2hyb21lJyBhcyBjb25zdCwgcGF0dGVybjogL0Nocm9tZSg/OlxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnZmlyZWZveCcgYXMgY29uc3QsIHBhdHRlcm46IC9GaXJlZm94KD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdzYWZhcmknIGFzIGNvbnN0LCBwYXR0ZXJuOiAvKD86VmVyc2lvblxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/KD86XFxXK01vYmlsZVxcUyopP1xcVytTYWZhcmkvIH0sXG4gIF07XG5cbiAgLy8gRmluZCB0aGUgRklSU1QgbWF0Y2hpbmcgYnJvd3NlclxuICBmb3IgKGNvbnN0IHsga2V5LCBwYXR0ZXJuIH0gb2YgYnJvd3NlclBhdHRlcm5zKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBwYXR0ZXJuLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBjb25zdCBtYWpvciA9IG1hdGNoWzFdIHx8IDA7XG4gICAgICBjb25zdCBtaW5vciA9IG1hdGNoWzJdIHx8IDA7XG4gICAgICBjb25zdCBwYXRjaCA9IG1hdGNoWzNdIHx8IDA7XG5cbiAgICAgIHJldHVybiB7IGJyb3dzZXI6IGtleSwgdmVyc2lvbjogYCR7bWFqb3J9LiR7bWlub3J9LiR7cGF0Y2h9YCB9O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5jb25zdCBub3JtYWxpemVBcmNoID0gKGFyY2g6IHN0cmluZyk6IEFyY2ggPT4ge1xuICAvLyBOb2RlIGRvY3M6XG4gIC8vIC0gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9wcm9jZXNzLmh0bWwjcHJvY2Vzc2FyY2hcbiAgLy8gRGVubyBkb2NzOlxuICAvLyAtIGh0dHBzOi8vZG9jLmRlbm8ubGFuZC9kZW5vL3N0YWJsZS9+L0Rlbm8uYnVpbGRcbiAgaWYgKGFyY2ggPT09ICd4MzInKSByZXR1cm4gJ3gzMic7XG4gIGlmIChhcmNoID09PSAneDg2XzY0JyB8fCBhcmNoID09PSAneDY0JykgcmV0dXJuICd4NjQnO1xuICBpZiAoYXJjaCA9PT0gJ2FybScpIHJldHVybiAnYXJtJztcbiAgaWYgKGFyY2ggPT09ICdhYXJjaDY0JyB8fCBhcmNoID09PSAnYXJtNjQnKSByZXR1cm4gJ2FybTY0JztcbiAgaWYgKGFyY2gpIHJldHVybiBgb3RoZXI6JHthcmNofWA7XG4gIHJldHVybiAndW5rbm93bic7XG59O1xuXG5jb25zdCBub3JtYWxpemVQbGF0Zm9ybSA9IChwbGF0Zm9ybTogc3RyaW5nKTogUGxhdGZvcm1OYW1lID0+IHtcbiAgLy8gTm9kZSBwbGF0Zm9ybXM6XG4gIC8vIC0gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9wcm9jZXNzLmh0bWwjcHJvY2Vzc3BsYXRmb3JtXG4gIC8vIERlbm8gcGxhdGZvcm1zOlxuICAvLyAtIGh0dHBzOi8vZG9jLmRlbm8ubGFuZC9kZW5vL3N0YWJsZS9+L0Rlbm8uYnVpbGRcbiAgLy8gLSBodHRwczovL2dpdGh1Yi5jb20vZGVub2xhbmQvZGVuby9pc3N1ZXMvMTQ3OTlcblxuICBwbGF0Zm9ybSA9IHBsYXRmb3JtLnRvTG93ZXJDYXNlKCk7XG5cbiAgLy8gTk9URTogdGhpcyBpT1MgY2hlY2sgaXMgdW50ZXN0ZWQgYW5kIG1heSBub3Qgd29ya1xuICAvLyBOb2RlIGRvZXMgbm90IHdvcmsgbmF0aXZlbHkgb24gSU9TLCB0aGVyZSBpcyBhIGZvcmsgYXRcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy1tb2JpbGUvbm9kZWpzLW1vYmlsZVxuICAvLyBob3dldmVyIGl0IGlzIHVua25vd24gYXQgdGhlIHRpbWUgb2Ygd3JpdGluZyBob3cgdG8gZGV0ZWN0IGlmIGl0IGlzIHJ1bm5pbmdcbiAgaWYgKHBsYXRmb3JtLmluY2x1ZGVzKCdpb3MnKSkgcmV0dXJuICdpT1MnO1xuICBpZiAocGxhdGZvcm0gPT09ICdhbmRyb2lkJykgcmV0dXJuICdBbmRyb2lkJztcbiAgaWYgKHBsYXRmb3JtID09PSAnZGFyd2luJykgcmV0dXJuICdNYWNPUyc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ3dpbjMyJykgcmV0dXJuICdXaW5kb3dzJztcbiAgaWYgKHBsYXRmb3JtID09PSAnZnJlZWJzZCcpIHJldHVybiAnRnJlZUJTRCc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ29wZW5ic2QnKSByZXR1cm4gJ09wZW5CU0QnO1xuICBpZiAocGxhdGZvcm0gPT09ICdsaW51eCcpIHJldHVybiAnTGludXgnO1xuICBpZiAocGxhdGZvcm0pIHJldHVybiBgT3RoZXI6JHtwbGF0Zm9ybX1gO1xuICByZXR1cm4gJ1Vua25vd24nO1xufTtcblxubGV0IF9wbGF0Zm9ybUhlYWRlcnM6IFBsYXRmb3JtUHJvcGVydGllcztcbmNvbnN0IGdldFBsYXRmb3JtSGVhZGVycyA9ICgpID0+IHtcbiAgcmV0dXJuIChfcGxhdGZvcm1IZWFkZXJzID8/PSBnZXRQbGF0Zm9ybVByb3BlcnRpZXMoKSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2FmZUpTT04gPSAodGV4dDogc3RyaW5nKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGV4dCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn07XG5cbi8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsLXNjaGVtZS1zdHJpbmdcbmNvbnN0IHN0YXJ0c1dpdGhTY2hlbWVSZWdleHAgPSAvXlthLXpdW2EtejAtOSsuLV0qOi9pO1xuY29uc3QgaXNBYnNvbHV0ZVVSTCA9ICh1cmw6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gc3RhcnRzV2l0aFNjaGVtZVJlZ2V4cC50ZXN0KHVybCk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2xlZXAgPSAobXM6IG51bWJlcikgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcblxuY29uc3QgdmFsaWRhdGVQb3NpdGl2ZUludGVnZXIgPSAobmFtZTogc3RyaW5nLCBuOiB1bmtub3duKTogbnVtYmVyID0+IHtcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCAhTnVtYmVyLmlzSW50ZWdlcihuKSkge1xuICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgJHtuYW1lfSBtdXN0IGJlIGFuIGludGVnZXJgKTtcbiAgfVxuICBpZiAobiA8IDApIHtcbiAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYCR7bmFtZX0gbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXJgKTtcbiAgfVxuICByZXR1cm4gbjtcbn07XG5cbmV4cG9ydCBjb25zdCBjYXN0VG9FcnJvciA9IChlcnI6IGFueSk6IEVycm9yID0+IHtcbiAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4gZXJyO1xuICBpZiAodHlwZW9mIGVyciA9PT0gJ29iamVjdCcgJiYgZXJyICE9PSBudWxsKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkoZXJyKSk7XG4gICAgfSBjYXRjaCB7fVxuICB9XG4gIHJldHVybiBuZXcgRXJyb3IoU3RyaW5nKGVycikpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVuc3VyZVByZXNlbnQgPSA8VD4odmFsdWU6IFQgfCBudWxsIHwgdW5kZWZpbmVkKTogVCA9PiB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYEV4cGVjdGVkIGEgdmFsdWUgdG8gYmUgZ2l2ZW4gYnV0IHJlY2VpdmVkICR7dmFsdWV9IGluc3RlYWQuYCk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbi8qKlxuICogUmVhZCBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZS5cbiAqXG4gKiBUcmltcyBiZWdpbm5pbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuXG4gKlxuICogV2lsbCByZXR1cm4gdW5kZWZpbmVkIGlmIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBkb2Vzbid0IGV4aXN0IG9yIGNhbm5vdCBiZSBhY2Nlc3NlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlYWRFbnYgPSAoZW52OiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52Py5bZW52XT8udHJpbSgpID8/IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAodHlwZW9mIERlbm8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIERlbm8uZW52Py5nZXQ/LihlbnYpPy50cmltKCk7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbmV4cG9ydCBjb25zdCBjb2VyY2VJbnRlZ2VyID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHJldHVybiBwYXJzZUludCh2YWx1ZSwgMTApO1xuXG4gIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgQ291bGQgbm90IGNvZXJjZSAke3ZhbHVlfSAodHlwZTogJHt0eXBlb2YgdmFsdWV9KSBpbnRvIGEgbnVtYmVyYCk7XG59O1xuXG5leHBvcnQgY29uc3QgY29lcmNlRmxvYXQgPSAodmFsdWU6IHVua25vd24pOiBudW1iZXIgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykgcmV0dXJuIHZhbHVlO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xuXG4gIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgQ291bGQgbm90IGNvZXJjZSAke3ZhbHVlfSAodHlwZTogJHt0eXBlb2YgdmFsdWV9KSBpbnRvIGEgbnVtYmVyYCk7XG59O1xuXG5leHBvcnQgY29uc3QgY29lcmNlQm9vbGVhbiA9ICh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4gPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHJldHVybiB2YWx1ZTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHJldHVybiB2YWx1ZSA9PT0gJ3RydWUnO1xuICByZXR1cm4gQm9vbGVhbih2YWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgbWF5YmVDb2VyY2VJbnRlZ2VyID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBjb2VyY2VJbnRlZ2VyKHZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtYXliZUNvZXJjZUZsb2F0ID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBjb2VyY2VGbG9hdCh2YWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgbWF5YmVDb2VyY2VCb29sZWFuID0gKHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gY29lcmNlQm9vbGVhbih2YWx1ZSk7XG59O1xuXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzQ0OTEyODdcbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5T2JqKG9iajogT2JqZWN0IHwgbnVsbCB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xuICBpZiAoIW9iaikgcmV0dXJuIHRydWU7XG4gIGZvciAoY29uc3QgX2sgaW4gb2JqKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyBodHRwczovL2VzbGludC5vcmcvZG9jcy9sYXRlc3QvcnVsZXMvbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG5leHBvcnQgZnVuY3Rpb24gaGFzT3duKG9iajogT2JqZWN0LCBrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cblxuLyoqXG4gKiBDb3BpZXMgaGVhZGVycyBmcm9tIFwibmV3SGVhZGVyc1wiIG9udG8gXCJ0YXJnZXRIZWFkZXJzXCIsXG4gKiB1c2luZyBsb3dlci1jYXNlIGZvciBhbGwgcHJvcGVydGllcyxcbiAqIGlnbm9yaW5nIGFueSBrZXlzIHdpdGggdW5kZWZpbmVkIHZhbHVlcyxcbiAqIGFuZCBkZWxldGluZyBhbnkga2V5cyB3aXRoIG51bGwgdmFsdWVzLlxuICovXG5mdW5jdGlvbiBhcHBseUhlYWRlcnNNdXQodGFyZ2V0SGVhZGVyczogSGVhZGVycywgbmV3SGVhZGVyczogSGVhZGVycyk6IHZvaWQge1xuICBmb3IgKGNvbnN0IGsgaW4gbmV3SGVhZGVycykge1xuICAgIGlmICghaGFzT3duKG5ld0hlYWRlcnMsIGspKSBjb250aW51ZTtcbiAgICBjb25zdCBsb3dlcktleSA9IGsudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoIWxvd2VyS2V5KSBjb250aW51ZTtcblxuICAgIGNvbnN0IHZhbCA9IG5ld0hlYWRlcnNba107XG5cbiAgICBpZiAodmFsID09PSBudWxsKSB7XG4gICAgICBkZWxldGUgdGFyZ2V0SGVhZGVyc1tsb3dlcktleV07XG4gICAgfSBlbHNlIGlmICh2YWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGFyZ2V0SGVhZGVyc1tsb3dlcktleV0gPSB2YWw7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWJ1ZyhhY3Rpb246IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzPy5lbnY/LlsnREVCVUcnXSA9PT0gJ3RydWUnKSB7XG4gICAgY29uc29sZS5sb2coYEFudGhyb3BpYzpERUJVRzoke2FjdGlvbn1gLCAuLi5hcmdzKTtcbiAgfVxufVxuXG4vKipcbiAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXG4gKi9cbmNvbnN0IHV1aWQ0ID0gKCkgPT4ge1xuICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCAoYykgPT4ge1xuICAgIGNvbnN0IHIgPSAoTWF0aC5yYW5kb20oKSAqIDE2KSB8IDA7XG4gICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBpc1J1bm5pbmdJbkJyb3dzZXIgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnXG4gICk7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEhlYWRlcnNQcm90b2NvbCB7XG4gIGdldDogKGhlYWRlcjogc3RyaW5nKSA9PiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xufVxuZXhwb3J0IHR5cGUgSGVhZGVyc0xpa2UgPSBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXSB8IHVuZGVmaW5lZD4gfCBIZWFkZXJzUHJvdG9jb2w7XG5cbmV4cG9ydCBjb25zdCBpc0hlYWRlcnNQcm90b2NvbCA9IChoZWFkZXJzOiBhbnkpOiBoZWFkZXJzIGlzIEhlYWRlcnNQcm90b2NvbCA9PiB7XG4gIHJldHVybiB0eXBlb2YgaGVhZGVycz8uZ2V0ID09PSAnZnVuY3Rpb24nO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFJlcXVpcmVkSGVhZGVyID0gKGhlYWRlcnM6IEhlYWRlcnNMaWtlIHwgSGVhZGVycywgaGVhZGVyOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBmb3VuZEhlYWRlciA9IGdldEhlYWRlcihoZWFkZXJzLCBoZWFkZXIpO1xuICBpZiAoZm91bmRIZWFkZXIgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgJHtoZWFkZXJ9IGhlYWRlcmApO1xuICB9XG4gIHJldHVybiBmb3VuZEhlYWRlcjtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRIZWFkZXIgPSAoaGVhZGVyczogSGVhZGVyc0xpa2UgfCBIZWFkZXJzLCBoZWFkZXI6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IGxvd2VyQ2FzZWRIZWFkZXIgPSBoZWFkZXIudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGlzSGVhZGVyc1Byb3RvY29sKGhlYWRlcnMpKSB7XG4gICAgLy8gdG8gZGVhbCB3aXRoIHRoZSBjYXNlIHdoZXJlIHRoZSBoZWFkZXIgbG9va3MgbGlrZSBTdGFpbmxlc3MtRXZlbnQtSWRcbiAgICBjb25zdCBpbnRlcmNhcHNIZWFkZXIgPVxuICAgICAgaGVhZGVyWzBdPy50b1VwcGVyQ2FzZSgpICtcbiAgICAgIGhlYWRlci5zdWJzdHJpbmcoMSkucmVwbGFjZSgvKFteXFx3XSkoXFx3KS9nLCAoX20sIGcxLCBnMikgPT4gZzEgKyBnMi50b1VwcGVyQ2FzZSgpKTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbaGVhZGVyLCBsb3dlckNhc2VkSGVhZGVyLCBoZWFkZXIudG9VcHBlckNhc2UoKSwgaW50ZXJjYXBzSGVhZGVyXSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBoZWFkZXJzLmdldChrZXkpO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhoZWFkZXJzKSkge1xuICAgIGlmIChrZXkudG9Mb3dlckNhc2UoKSA9PT0gbG93ZXJDYXNlZEhlYWRlcikge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPD0gMSkgcmV0dXJuIHZhbHVlWzBdO1xuICAgICAgICBjb25zb2xlLndhcm4oYFJlY2VpdmVkICR7dmFsdWUubGVuZ3RofSBlbnRyaWVzIGZvciB0aGUgJHtoZWFkZXJ9IGhlYWRlciwgdXNpbmcgdGhlIGZpcnN0IGVudHJ5LmApO1xuICAgICAgICByZXR1cm4gdmFsdWVbMF07XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbi8qKlxuICogRW5jb2RlcyBhIHN0cmluZyB0byBCYXNlNjQgZm9ybWF0LlxuICovXG5leHBvcnQgY29uc3QgdG9CYXNlNjQgPSAoc3RyOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nID0+IHtcbiAgaWYgKCFzdHIpIHJldHVybiAnJztcbiAgaWYgKHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHN0cikudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBidG9hICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBidG9hKHN0cik7XG4gIH1cblxuICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoJ0Nhbm5vdCBnZW5lcmF0ZSBiNjQgc3RyaW5nOyBFeHBlY3RlZCBgQnVmZmVyYCBvciBgYnRvYWAgdG8gYmUgZGVmaW5lZCcpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqKG9iajogdW5rbm93bik6IG9iaiBpcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIHJldHVybiBvYmogIT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShvYmopO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IEFic3RyYWN0UGFnZSwgUmVzcG9uc2UsIEFQSUNsaWVudCwgRmluYWxSZXF1ZXN0T3B0aW9ucywgUGFnZUluZm8gfSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFnZVJlc3BvbnNlPEl0ZW0+IHtcbiAgZGF0YTogQXJyYXk8SXRlbT47XG5cbiAgaGFzX21vcmU6IGJvb2xlYW47XG5cbiAgZmlyc3RfaWQ6IHN0cmluZyB8IG51bGw7XG5cbiAgbGFzdF9pZDogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYWdlUGFyYW1zIHtcbiAgLyoqXG4gICAqIE51bWJlciBvZiBpdGVtcyBwZXIgcGFnZS5cbiAgICovXG4gIGxpbWl0PzogbnVtYmVyO1xuXG4gIGJlZm9yZV9pZD86IHN0cmluZztcblxuICBhZnRlcl9pZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFBhZ2U8SXRlbT4gZXh0ZW5kcyBBYnN0cmFjdFBhZ2U8SXRlbT4gaW1wbGVtZW50cyBQYWdlUmVzcG9uc2U8SXRlbT4ge1xuICBkYXRhOiBBcnJheTxJdGVtPjtcblxuICBoYXNfbW9yZTogYm9vbGVhbjtcblxuICBmaXJzdF9pZDogc3RyaW5nIHwgbnVsbDtcblxuICBsYXN0X2lkOiBzdHJpbmcgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKGNsaWVudDogQVBJQ2xpZW50LCByZXNwb25zZTogUmVzcG9uc2UsIGJvZHk6IFBhZ2VSZXNwb25zZTxJdGVtPiwgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucykge1xuICAgIHN1cGVyKGNsaWVudCwgcmVzcG9uc2UsIGJvZHksIG9wdGlvbnMpO1xuXG4gICAgdGhpcy5kYXRhID0gYm9keS5kYXRhIHx8IFtdO1xuICAgIHRoaXMuaGFzX21vcmUgPSBib2R5Lmhhc19tb3JlIHx8IGZhbHNlO1xuICAgIHRoaXMuZmlyc3RfaWQgPSBib2R5LmZpcnN0X2lkIHx8IG51bGw7XG4gICAgdGhpcy5sYXN0X2lkID0gYm9keS5sYXN0X2lkIHx8IG51bGw7XG4gIH1cblxuICBnZXRQYWdpbmF0ZWRJdGVtcygpOiBJdGVtW10ge1xuICAgIHJldHVybiB0aGlzLmRhdGEgPz8gW107XG4gIH1cblxuICAvLyBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBuZXh0UGFnZUluZm8oKWAgaW5zdGVhZFxuICBuZXh0UGFnZVBhcmFtcygpOiBQYXJ0aWFsPFBhZ2VQYXJhbXM+IHwgbnVsbCB7XG4gICAgY29uc3QgaW5mbyA9IHRoaXMubmV4dFBhZ2VJbmZvKCk7XG4gICAgaWYgKCFpbmZvKSByZXR1cm4gbnVsbDtcbiAgICBpZiAoJ3BhcmFtcycgaW4gaW5mbykgcmV0dXJuIGluZm8ucGFyYW1zO1xuICAgIGNvbnN0IHBhcmFtcyA9IE9iamVjdC5mcm9tRW50cmllcyhpbmZvLnVybC5zZWFyY2hQYXJhbXMpO1xuICAgIGlmICghT2JqZWN0LmtleXMocGFyYW1zKS5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBwYXJhbXM7XG4gIH1cblxuICBuZXh0UGFnZUluZm8oKTogUGFnZUluZm8gfCBudWxsIHtcbiAgICBpZiAoKHRoaXMub3B0aW9ucy5xdWVyeSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik/LlsnYmVmb3JlX2lkJ10pIHtcbiAgICAgIC8vIGluIHJldmVyc2VcbiAgICAgIGNvbnN0IGZpcnN0SWQgPSB0aGlzLmZpcnN0X2lkO1xuICAgICAgaWYgKCFmaXJzdElkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBiZWZvcmVfaWQ6IGZpcnN0SWQsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnNvciA9IHRoaXMubGFzdF9pZDtcbiAgICBpZiAoIWN1cnNvcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhcmFtczoge1xuICAgICAgICBhZnRlcl9pZDogY3Vyc29yLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuZXhwb3J0IGludGVyZmFjZSBBUElFcnJvck9iamVjdCB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAnYXBpX2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBBdXRoZW50aWNhdGlvbkVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdhdXRoZW50aWNhdGlvbl9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmlsbGluZ0Vycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdiaWxsaW5nX2Vycm9yJztcbn1cblxuZXhwb3J0IHR5cGUgRXJyb3JPYmplY3QgPVxuICB8IEludmFsaWRSZXF1ZXN0RXJyb3JcbiAgfCBBdXRoZW50aWNhdGlvbkVycm9yXG4gIHwgQmlsbGluZ0Vycm9yXG4gIHwgUGVybWlzc2lvbkVycm9yXG4gIHwgTm90Rm91bmRFcnJvclxuICB8IFJhdGVMaW1pdEVycm9yXG4gIHwgR2F0ZXdheVRpbWVvdXRFcnJvclxuICB8IEFQSUVycm9yT2JqZWN0XG4gIHwgT3ZlcmxvYWRlZEVycm9yO1xuXG5leHBvcnQgaW50ZXJmYWNlIEVycm9yUmVzcG9uc2Uge1xuICBlcnJvcjogRXJyb3JPYmplY3Q7XG5cbiAgdHlwZTogJ2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBHYXRld2F5VGltZW91dEVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICd0aW1lb3V0X2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbnZhbGlkUmVxdWVzdEVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdpbnZhbGlkX3JlcXVlc3RfZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE5vdEZvdW5kRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ25vdF9mb3VuZF9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgT3ZlcmxvYWRlZEVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdvdmVybG9hZGVkX2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQZXJtaXNzaW9uRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3Blcm1pc3Npb25fZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhdGVMaW1pdEVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdyYXRlX2xpbWl0X2Vycm9yJztcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuL2NvcmUuanNcIjtcblxuZXhwb3J0IGNsYXNzIEFQSVJlc291cmNlIHtcbiAgcHJvdGVjdGVkIF9jbGllbnQ6IENvcmUuQVBJQ2xpZW50O1xuXG4gIGNvbnN0cnVjdG9yKGNsaWVudDogQ29yZS5BUElDbGllbnQpIHtcbiAgICB0aGlzLl9jbGllbnQgPSBjbGllbnQ7XG4gIH1cbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gXCIuLi8uLi9yZXNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgaXNSZXF1ZXN0T3B0aW9ucyB9IGZyb20gXCIuLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgeyBQYWdlLCB0eXBlIFBhZ2VQYXJhbXMgfSBmcm9tIFwiLi4vLi4vcGFnaW5hdGlvbi5qc1wiO1xuXG5leHBvcnQgY2xhc3MgTW9kZWxzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogR2V0IGEgc3BlY2lmaWMgbW9kZWwuXG4gICAqXG4gICAqIFRoZSBNb2RlbHMgQVBJIHJlc3BvbnNlIGNhbiBiZSB1c2VkIHRvIGRldGVybWluZSBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljXG4gICAqIG1vZGVsIG9yIHJlc29sdmUgYSBtb2RlbCBhbGlhcyB0byBhIG1vZGVsIElELlxuICAgKi9cbiAgcmV0cmlldmUobW9kZWxJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxCZXRhTW9kZWxJbmZvPiB7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5nZXQoYC92MS9tb2RlbHMvJHttb2RlbElkfT9iZXRhPXRydWVgLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0IGF2YWlsYWJsZSBtb2RlbHMuXG4gICAqXG4gICAqIFRoZSBNb2RlbHMgQVBJIHJlc3BvbnNlIGNhbiBiZSB1c2VkIHRvIGRldGVybWluZSB3aGljaCBtb2RlbHMgYXJlIGF2YWlsYWJsZSBmb3JcbiAgICogdXNlIGluIHRoZSBBUEkuIE1vcmUgcmVjZW50bHkgcmVsZWFzZWQgbW9kZWxzIGFyZSBsaXN0ZWQgZmlyc3QuXG4gICAqL1xuICBsaXN0KFxuICAgIHF1ZXJ5PzogTW9kZWxMaXN0UGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEJldGFNb2RlbEluZm9zUGFnZSwgQmV0YU1vZGVsSW5mbz47XG4gIGxpc3Qob3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLlBhZ2VQcm9taXNlPEJldGFNb2RlbEluZm9zUGFnZSwgQmV0YU1vZGVsSW5mbz47XG4gIGxpc3QoXG4gICAgcXVlcnk6IE1vZGVsTGlzdFBhcmFtcyB8IENvcmUuUmVxdWVzdE9wdGlvbnMgPSB7fSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxCZXRhTW9kZWxJbmZvc1BhZ2UsIEJldGFNb2RlbEluZm8+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhxdWVyeSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmxpc3Qoe30sIHF1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5nZXRBUElMaXN0KCcvdjEvbW9kZWxzP2JldGE9dHJ1ZScsIEJldGFNb2RlbEluZm9zUGFnZSwgeyBxdWVyeSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQmV0YU1vZGVsSW5mb3NQYWdlIGV4dGVuZHMgUGFnZTxCZXRhTW9kZWxJbmZvPiB7fVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNb2RlbEluZm8ge1xuICAvKipcbiAgICogVW5pcXVlIG1vZGVsIGlkZW50aWZpZXIuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIHRoZSBtb2RlbCB3YXMgcmVsZWFzZWQuXG4gICAqIE1heSBiZSBzZXQgdG8gYW4gZXBvY2ggdmFsdWUgaWYgdGhlIHJlbGVhc2UgZGF0ZSBpcyB1bmtub3duLlxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBIGh1bWFuLXJlYWRhYmxlIG5hbWUgZm9yIHRoZSBtb2RlbC5cbiAgICovXG4gIGRpc3BsYXlfbmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBPYmplY3QgdHlwZS5cbiAgICpcbiAgICogRm9yIE1vZGVscywgdGhpcyBpcyBhbHdheXMgYFwibW9kZWxcImAuXG4gICAqL1xuICB0eXBlOiAnbW9kZWwnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsTGlzdFBhcmFtcyBleHRlbmRzIFBhZ2VQYXJhbXMge31cblxuTW9kZWxzLkJldGFNb2RlbEluZm9zUGFnZSA9IEJldGFNb2RlbEluZm9zUGFnZTtcblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIE1vZGVscyB7XG4gIGV4cG9ydCB7XG4gICAgdHlwZSBCZXRhTW9kZWxJbmZvIGFzIEJldGFNb2RlbEluZm8sXG4gICAgQmV0YU1vZGVsSW5mb3NQYWdlIGFzIEJldGFNb2RlbEluZm9zUGFnZSxcbiAgICB0eXBlIE1vZGVsTGlzdFBhcmFtcyBhcyBNb2RlbExpc3RQYXJhbXMsXG4gIH07XG59XG4iLCAiaW1wb3J0IHsgQW50aHJvcGljRXJyb3IgfSBmcm9tIFwiLi4vLi4vZXJyb3IuanNcIjtcbmltcG9ydCB7IFJlYWRhYmxlU3RyZWFtVG9Bc3luY0l0ZXJhYmxlIH0gZnJvbSBcIi4uL3N0cmVhbS11dGlscy5qc1wiO1xuaW1wb3J0IHsgdHlwZSBSZXNwb25zZSB9IGZyb20gXCIuLi8uLi9fc2hpbXMvaW5kZXguanNcIjtcbmltcG9ydCB7IExpbmVEZWNvZGVyLCB0eXBlIEJ5dGVzIH0gZnJvbSBcIi4vbGluZS5qc1wiO1xuXG5leHBvcnQgY2xhc3MgSlNPTkxEZWNvZGVyPFQ+IHtcbiAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgaXRlcmF0b3I6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxCeXRlcz4sXG4gICAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyLFxuICApIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyAqZGVjb2RlcigpOiBBc3luY0l0ZXJhdG9yPFQsIGFueSwgdW5kZWZpbmVkPiB7XG4gICAgY29uc3QgbGluZURlY29kZXIgPSBuZXcgTGluZURlY29kZXIoKTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHRoaXMuaXRlcmF0b3IpIHtcbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lRGVjb2Rlci5kZWNvZGUoY2h1bmspKSB7XG4gICAgICAgIHlpZWxkIEpTT04ucGFyc2UobGluZSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVEZWNvZGVyLmZsdXNoKCkpIHtcbiAgICAgIHlpZWxkIEpTT04ucGFyc2UobGluZSk7XG4gICAgfVxuICB9XG5cbiAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0l0ZXJhdG9yPFQ+IHtcbiAgICByZXR1cm4gdGhpcy5kZWNvZGVyKCk7XG4gIH1cblxuICBzdGF0aWMgZnJvbVJlc3BvbnNlPFQ+KHJlc3BvbnNlOiBSZXNwb25zZSwgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyKTogSlNPTkxEZWNvZGVyPFQ+IHtcbiAgICBpZiAoIXJlc3BvbnNlLmJvZHkpIHtcbiAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgQXR0ZW1wdGVkIHRvIGl0ZXJhdGUgb3ZlciBhIHJlc3BvbnNlIHdpdGggbm8gYm9keWApO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgSlNPTkxEZWNvZGVyKFJlYWRhYmxlU3RyZWFtVG9Bc3luY0l0ZXJhYmxlPEJ5dGVzPihyZXNwb25zZS5ib2R5KSwgY29udHJvbGxlcik7XG4gIH1cbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gXCIuLi8uLi8uLi9yZXNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgaXNSZXF1ZXN0T3B0aW9ucyB9IGZyb20gXCIuLi8uLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuLi8uLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBCZXRhQVBJIGZyb20gXCIuLi9iZXRhLmpzXCI7XG5pbXBvcnQgKiBhcyBCZXRhTWVzc2FnZXNBUEkgZnJvbSBcIi4vbWVzc2FnZXMuanNcIjtcbmltcG9ydCB7IFBhZ2UsIHR5cGUgUGFnZVBhcmFtcyB9IGZyb20gXCIuLi8uLi8uLi9wYWdpbmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBKU09OTERlY29kZXIgfSBmcm9tIFwiLi4vLi4vLi4vaW50ZXJuYWwvZGVjb2RlcnMvanNvbmwuanNcIjtcbmltcG9ydCB7IEFudGhyb3BpY0Vycm9yIH0gZnJvbSBcIi4uLy4uLy4uL2Vycm9yLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBCYXRjaGVzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogU2VuZCBhIGJhdGNoIG9mIE1lc3NhZ2UgY3JlYXRpb24gcmVxdWVzdHMuXG4gICAqXG4gICAqIFRoZSBNZXNzYWdlIEJhdGNoZXMgQVBJIGNhbiBiZSB1c2VkIHRvIHByb2Nlc3MgbXVsdGlwbGUgTWVzc2FnZXMgQVBJIHJlcXVlc3RzIGF0XG4gICAqIG9uY2UuIE9uY2UgYSBNZXNzYWdlIEJhdGNoIGlzIGNyZWF0ZWQsIGl0IGJlZ2lucyBwcm9jZXNzaW5nIGltbWVkaWF0ZWx5LiBCYXRjaGVzXG4gICAqIGNhbiB0YWtlIHVwIHRvIDI0IGhvdXJzIHRvIGNvbXBsZXRlLlxuICAgKi9cbiAgY3JlYXRlKHBhcmFtczogQmF0Y2hDcmVhdGVQYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2g+IHtcbiAgICBjb25zdCB7IGJldGFzLCAuLi5ib2R5IH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5wb3N0KCcvdjEvbWVzc2FnZXMvYmF0Y2hlcz9iZXRhPXRydWUnLCB7XG4gICAgICBib2R5LFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FudGhyb3BpYy1iZXRhJzogWy4uLihiZXRhcyA/PyBbXSksICdtZXNzYWdlLWJhdGNoZXMtMjAyNC0wOS0yNCddLnRvU3RyaW5nKCksXG4gICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgZW5kcG9pbnQgaXMgaWRlbXBvdGVudCBhbmQgY2FuIGJlIHVzZWQgdG8gcG9sbCBmb3IgTWVzc2FnZSBCYXRjaFxuICAgKiBjb21wbGV0aW9uLiBUbyBhY2Nlc3MgdGhlIHJlc3VsdHMgb2YgYSBNZXNzYWdlIEJhdGNoLCBtYWtlIGEgcmVxdWVzdCB0byB0aGVcbiAgICogYHJlc3VsdHNfdXJsYCBmaWVsZCBpbiB0aGUgcmVzcG9uc2UuXG4gICAqL1xuICByZXRyaWV2ZShcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtcz86IEJhdGNoUmV0cmlldmVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoPjtcbiAgcmV0cmlldmUobWVzc2FnZUJhdGNoSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaD47XG4gIHJldHJpZXZlKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgcGFyYW1zOiBCYXRjaFJldHJpZXZlUGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaD4ge1xuICAgIGlmIChpc1JlcXVlc3RPcHRpb25zKHBhcmFtcykpIHtcbiAgICAgIHJldHVybiB0aGlzLnJldHJpZXZlKG1lc3NhZ2VCYXRjaElkLCB7fSwgcGFyYW1zKTtcbiAgICB9XG4gICAgY29uc3QgeyBiZXRhcyB9ID0gcGFyYW1zO1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZ2V0KGAvdjEvbWVzc2FnZXMvYmF0Y2hlcy8ke21lc3NhZ2VCYXRjaElkfT9iZXRhPXRydWVgLCB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYW50aHJvcGljLWJldGEnOiBbLi4uKGJldGFzID8/IFtdKSwgJ21lc3NhZ2UtYmF0Y2hlcy0yMDI0LTA5LTI0J10udG9TdHJpbmcoKSxcbiAgICAgICAgLi4ub3B0aW9ucz8uaGVhZGVycyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdCBhbGwgTWVzc2FnZSBCYXRjaGVzIHdpdGhpbiBhIFdvcmtzcGFjZS4gTW9zdCByZWNlbnRseSBjcmVhdGVkIGJhdGNoZXMgYXJlXG4gICAqIHJldHVybmVkIGZpcnN0LlxuICAgKi9cbiAgbGlzdChcbiAgICBwYXJhbXM/OiBCYXRjaExpc3RQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSwgQmV0YU1lc3NhZ2VCYXRjaD47XG4gIGxpc3Qob3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLlBhZ2VQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UsIEJldGFNZXNzYWdlQmF0Y2g+O1xuICBsaXN0KFxuICAgIHBhcmFtczogQmF0Y2hMaXN0UGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UsIEJldGFNZXNzYWdlQmF0Y2g+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhwYXJhbXMpKSB7XG4gICAgICByZXR1cm4gdGhpcy5saXN0KHt9LCBwYXJhbXMpO1xuICAgIH1cbiAgICBjb25zdCB7IGJldGFzLCAuLi5xdWVyeSB9ID0gcGFyYW1zO1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZ2V0QVBJTGlzdCgnL3YxL21lc3NhZ2VzL2JhdGNoZXM/YmV0YT10cnVlJywgQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSwge1xuICAgICAgcXVlcnksXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYW50aHJvcGljLWJldGEnOiBbLi4uKGJldGFzID8/IFtdKSwgJ21lc3NhZ2UtYmF0Y2hlcy0yMDI0LTA5LTI0J10udG9TdHJpbmcoKSxcbiAgICAgICAgLi4ub3B0aW9ucz8uaGVhZGVycyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGEgTWVzc2FnZSBCYXRjaC5cbiAgICpcbiAgICogTWVzc2FnZSBCYXRjaGVzIGNhbiBvbmx5IGJlIGRlbGV0ZWQgb25jZSB0aGV5J3ZlIGZpbmlzaGVkIHByb2Nlc3NpbmcuIElmIHlvdSdkXG4gICAqIGxpa2UgdG8gZGVsZXRlIGFuIGluLXByb2dyZXNzIGJhdGNoLCB5b3UgbXVzdCBmaXJzdCBjYW5jZWwgaXQuXG4gICAqL1xuICBkZWxldGUoXG4gICAgbWVzc2FnZUJhdGNoSWQ6IHN0cmluZyxcbiAgICBwYXJhbXM/OiBCYXRjaERlbGV0ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPEJldGFEZWxldGVkTWVzc2FnZUJhdGNoPjtcbiAgZGVsZXRlKG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEJldGFEZWxldGVkTWVzc2FnZUJhdGNoPjtcbiAgZGVsZXRlKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgcGFyYW1zOiBCYXRjaERlbGV0ZVBhcmFtcyB8IENvcmUuUmVxdWVzdE9wdGlvbnMgPSB7fSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPEJldGFEZWxldGVkTWVzc2FnZUJhdGNoPiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocGFyYW1zKSkge1xuICAgICAgcmV0dXJuIHRoaXMuZGVsZXRlKG1lc3NhZ2VCYXRjaElkLCB7fSwgcGFyYW1zKTtcbiAgICB9XG4gICAgY29uc3QgeyBiZXRhcyB9ID0gcGFyYW1zO1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZGVsZXRlKGAvdjEvbWVzc2FnZXMvYmF0Y2hlcy8ke21lc3NhZ2VCYXRjaElkfT9iZXRhPXRydWVgLCB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYW50aHJvcGljLWJldGEnOiBbLi4uKGJldGFzID8/IFtdKSwgJ21lc3NhZ2UtYmF0Y2hlcy0yMDI0LTA5LTI0J10udG9TdHJpbmcoKSxcbiAgICAgICAgLi4ub3B0aW9ucz8uaGVhZGVycyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogQmF0Y2hlcyBtYXkgYmUgY2FuY2VsZWQgYW55IHRpbWUgYmVmb3JlIHByb2Nlc3NpbmcgZW5kcy4gT25jZSBjYW5jZWxsYXRpb24gaXNcbiAgICogaW5pdGlhdGVkLCB0aGUgYmF0Y2ggZW50ZXJzIGEgYGNhbmNlbGluZ2Agc3RhdGUsIGF0IHdoaWNoIHRpbWUgdGhlIHN5c3RlbSBtYXlcbiAgICogY29tcGxldGUgYW55IGluLXByb2dyZXNzLCBub24taW50ZXJydXB0aWJsZSByZXF1ZXN0cyBiZWZvcmUgZmluYWxpemluZ1xuICAgKiBjYW5jZWxsYXRpb24uXG4gICAqXG4gICAqIFRoZSBudW1iZXIgb2YgY2FuY2VsZWQgcmVxdWVzdHMgaXMgc3BlY2lmaWVkIGluIGByZXF1ZXN0X2NvdW50c2AuIFRvIGRldGVybWluZVxuICAgKiB3aGljaCByZXF1ZXN0cyB3ZXJlIGNhbmNlbGVkLCBjaGVjayB0aGUgaW5kaXZpZHVhbCByZXN1bHRzIHdpdGhpbiB0aGUgYmF0Y2guXG4gICAqIE5vdGUgdGhhdCBjYW5jZWxsYXRpb24gbWF5IG5vdCByZXN1bHQgaW4gYW55IGNhbmNlbGVkIHJlcXVlc3RzIGlmIHRoZXkgd2VyZVxuICAgKiBub24taW50ZXJydXB0aWJsZS5cbiAgICovXG4gIGNhbmNlbChcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtcz86IEJhdGNoQ2FuY2VsUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaD47XG4gIGNhbmNlbChtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoPjtcbiAgY2FuY2VsKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgcGFyYW1zOiBCYXRjaENhbmNlbFBhcmFtcyB8IENvcmUuUmVxdWVzdE9wdGlvbnMgPSB7fSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2g+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhwYXJhbXMpKSB7XG4gICAgICByZXR1cm4gdGhpcy5jYW5jZWwobWVzc2FnZUJhdGNoSWQsIHt9LCBwYXJhbXMpO1xuICAgIH1cbiAgICBjb25zdCB7IGJldGFzIH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5wb3N0KGAvdjEvbWVzc2FnZXMvYmF0Y2hlcy8ke21lc3NhZ2VCYXRjaElkfS9jYW5jZWw/YmV0YT10cnVlYCwge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FudGhyb3BpYy1iZXRhJzogWy4uLihiZXRhcyA/PyBbXSksICdtZXNzYWdlLWJhdGNoZXMtMjAyNC0wOS0yNCddLnRvU3RyaW5nKCksXG4gICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0cmVhbXMgdGhlIHJlc3VsdHMgb2YgYSBNZXNzYWdlIEJhdGNoIGFzIGEgYC5qc29ubGAgZmlsZS5cbiAgICpcbiAgICogRWFjaCBsaW5lIGluIHRoZSBmaWxlIGlzIGEgSlNPTiBvYmplY3QgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIGEgc2luZ2xlIHJlcXVlc3RcbiAgICogaW4gdGhlIE1lc3NhZ2UgQmF0Y2guIFJlc3VsdHMgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlIGluIHRoZSBzYW1lIG9yZGVyIGFzXG4gICAqIHJlcXVlc3RzLiBVc2UgdGhlIGBjdXN0b21faWRgIGZpZWxkIHRvIG1hdGNoIHJlc3VsdHMgdG8gcmVxdWVzdHMuXG4gICAqL1xuICBhc3luYyByZXN1bHRzKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgcGFyYW1zPzogQmF0Y2hSZXN1bHRzUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBQcm9taXNlPEpTT05MRGVjb2RlcjxCZXRhTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlPj47XG4gIGFzeW5jIHJlc3VsdHMoXG4gICAgbWVzc2FnZUJhdGNoSWQ6IHN0cmluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogUHJvbWlzZTxKU09OTERlY29kZXI8QmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZT4+O1xuICBhc3luYyByZXN1bHRzKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgcGFyYW1zOiBCYXRjaFJlc3VsdHNQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IFByb21pc2U8SlNPTkxEZWNvZGVyPEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2U+PiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocGFyYW1zKSkge1xuICAgICAgcmV0dXJuIHRoaXMucmVzdWx0cyhtZXNzYWdlQmF0Y2hJZCwge30sIHBhcmFtcyk7XG4gICAgfVxuXG4gICAgY29uc3QgYmF0Y2ggPSBhd2FpdCB0aGlzLnJldHJpZXZlKG1lc3NhZ2VCYXRjaElkKTtcbiAgICBpZiAoIWJhdGNoLnJlc3VsdHNfdXJsKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoXG4gICAgICAgIGBObyBiYXRjaCBcXGByZXN1bHRzX3VybFxcYDsgSGFzIGl0IGZpbmlzaGVkIHByb2Nlc3Npbmc/ICR7YmF0Y2gucHJvY2Vzc2luZ19zdGF0dXN9IC0gJHtiYXRjaC5pZH1gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGJldGFzIH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudFxuICAgICAgLmdldChiYXRjaC5yZXN1bHRzX3VybCwge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgJ2FudGhyb3BpYy1iZXRhJzogWy4uLihiZXRhcyA/PyBbXSksICdtZXNzYWdlLWJhdGNoZXMtMjAyNC0wOS0yNCddLnRvU3RyaW5nKCksXG4gICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vYmluYXJ5JyxcbiAgICAgICAgICAuLi5vcHRpb25zPy5oZWFkZXJzLFxuICAgICAgICB9LFxuICAgICAgICBfX2JpbmFyeVJlc3BvbnNlOiB0cnVlLFxuICAgICAgfSlcbiAgICAgIC5fdGhlblVud3JhcCgoXywgcHJvcHMpID0+IEpTT05MRGVjb2Rlci5mcm9tUmVzcG9uc2UocHJvcHMucmVzcG9uc2UsIHByb3BzLmNvbnRyb2xsZXIpKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSBleHRlbmRzIFBhZ2U8QmV0YU1lc3NhZ2VCYXRjaD4ge31cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhRGVsZXRlZE1lc3NhZ2VCYXRjaCB7XG4gIC8qKlxuICAgKiBJRCBvZiB0aGUgTWVzc2FnZSBCYXRjaC5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIERlbGV0ZWQgb2JqZWN0IHR5cGUuXG4gICAqXG4gICAqIEZvciBNZXNzYWdlIEJhdGNoZXMsIHRoaXMgaXMgYWx3YXlzIGBcIm1lc3NhZ2VfYmF0Y2hfZGVsZXRlZFwiYC5cbiAgICovXG4gIHR5cGU6ICdtZXNzYWdlX2JhdGNoX2RlbGV0ZWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlQmF0Y2gge1xuICAvKipcbiAgICogVW5pcXVlIG9iamVjdCBpZGVudGlmaWVyLlxuICAgKlxuICAgKiBUaGUgZm9ybWF0IGFuZCBsZW5ndGggb2YgSURzIG1heSBjaGFuZ2Ugb3ZlciB0aW1lLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCB0aGUgTWVzc2FnZSBCYXRjaCB3YXNcbiAgICogYXJjaGl2ZWQgYW5kIGl0cyByZXN1bHRzIGJlY2FtZSB1bmF2YWlsYWJsZS5cbiAgICovXG4gIGFyY2hpdmVkX2F0OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIGNhbmNlbGxhdGlvbiB3YXNcbiAgICogaW5pdGlhdGVkIGZvciB0aGUgTWVzc2FnZSBCYXRjaC4gU3BlY2lmaWVkIG9ubHkgaWYgY2FuY2VsbGF0aW9uIHdhcyBpbml0aWF0ZWQuXG4gICAqL1xuICBjYW5jZWxfaW5pdGlhdGVkX2F0OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIHRoZSBNZXNzYWdlIEJhdGNoIHdhc1xuICAgKiBjcmVhdGVkLlxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIHByb2Nlc3NpbmcgZm9yIHRoZVxuICAgKiBNZXNzYWdlIEJhdGNoIGVuZGVkLiBTcGVjaWZpZWQgb25seSBvbmNlIHByb2Nlc3NpbmcgZW5kcy5cbiAgICpcbiAgICogUHJvY2Vzc2luZyBlbmRzIHdoZW4gZXZlcnkgcmVxdWVzdCBpbiBhIE1lc3NhZ2UgQmF0Y2ggaGFzIGVpdGhlciBzdWNjZWVkZWQsXG4gICAqIGVycm9yZWQsIGNhbmNlbGVkLCBvciBleHBpcmVkLlxuICAgKi9cbiAgZW5kZWRfYXQ6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggdGhlIE1lc3NhZ2UgQmF0Y2ggd2lsbFxuICAgKiBleHBpcmUgYW5kIGVuZCBwcm9jZXNzaW5nLCB3aGljaCBpcyAyNCBob3VycyBhZnRlciBjcmVhdGlvbi5cbiAgICovXG4gIGV4cGlyZXNfYXQ6IHN0cmluZztcblxuICAvKipcbiAgICogUHJvY2Vzc2luZyBzdGF0dXMgb2YgdGhlIE1lc3NhZ2UgQmF0Y2guXG4gICAqL1xuICBwcm9jZXNzaW5nX3N0YXR1czogJ2luX3Byb2dyZXNzJyB8ICdjYW5jZWxpbmcnIHwgJ2VuZGVkJztcblxuICAvKipcbiAgICogVGFsbGllcyByZXF1ZXN0cyB3aXRoaW4gdGhlIE1lc3NhZ2UgQmF0Y2gsIGNhdGVnb3JpemVkIGJ5IHRoZWlyIHN0YXR1cy5cbiAgICpcbiAgICogUmVxdWVzdHMgc3RhcnQgYXMgYHByb2Nlc3NpbmdgIGFuZCBtb3ZlIHRvIG9uZSBvZiB0aGUgb3RoZXIgc3RhdHVzZXMgb25seSBvbmNlXG4gICAqIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBiYXRjaCBlbmRzLiBUaGUgc3VtIG9mIGFsbCB2YWx1ZXMgYWx3YXlzIG1hdGNoZXMgdGhlXG4gICAqIHRvdGFsIG51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgYmF0Y2guXG4gICAqL1xuICByZXF1ZXN0X2NvdW50czogQmV0YU1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHM7XG5cbiAgLyoqXG4gICAqIFVSTCB0byBhIGAuanNvbmxgIGZpbGUgY29udGFpbmluZyB0aGUgcmVzdWx0cyBvZiB0aGUgTWVzc2FnZSBCYXRjaCByZXF1ZXN0cy5cbiAgICogU3BlY2lmaWVkIG9ubHkgb25jZSBwcm9jZXNzaW5nIGVuZHMuXG4gICAqXG4gICAqIFJlc3VsdHMgaW4gdGhlIGZpbGUgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlIGluIHRoZSBzYW1lIG9yZGVyIGFzIHJlcXVlc3RzLiBVc2VcbiAgICogdGhlIGBjdXN0b21faWRgIGZpZWxkIHRvIG1hdGNoIHJlc3VsdHMgdG8gcmVxdWVzdHMuXG4gICAqL1xuICByZXN1bHRzX3VybDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogT2JqZWN0IHR5cGUuXG4gICAqXG4gICAqIEZvciBNZXNzYWdlIEJhdGNoZXMsIHRoaXMgaXMgYWx3YXlzIGBcIm1lc3NhZ2VfYmF0Y2hcImAuXG4gICAqL1xuICB0eXBlOiAnbWVzc2FnZV9iYXRjaCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0IHtcbiAgdHlwZTogJ2NhbmNlbGVkJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCB7XG4gIGVycm9yOiBCZXRhQVBJLkJldGFFcnJvclJlc3BvbnNlO1xuXG4gIHR5cGU6ICdlcnJvcmVkJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCB7XG4gIHR5cGU6ICdleHBpcmVkJztcbn1cblxuLyoqXG4gKiBUaGlzIGlzIGEgc2luZ2xlIGxpbmUgaW4gdGhlIHJlc3BvbnNlIGAuanNvbmxgIGZpbGUgYW5kIGRvZXMgbm90IHJlcHJlc2VudCB0aGVcbiAqIHJlc3BvbnNlIGFzIGEgd2hvbGUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBEZXZlbG9wZXItcHJvdmlkZWQgSUQgY3JlYXRlZCBmb3IgZWFjaCByZXF1ZXN0IGluIGEgTWVzc2FnZSBCYXRjaC4gVXNlZnVsIGZvclxuICAgKiBtYXRjaGluZyByZXN1bHRzIHRvIHJlcXVlc3RzLCBhcyByZXN1bHRzIG1heSBiZSBnaXZlbiBvdXQgb2YgcmVxdWVzdCBvcmRlci5cbiAgICpcbiAgICogTXVzdCBiZSB1bmlxdWUgZm9yIGVhY2ggcmVxdWVzdCB3aXRoaW4gdGhlIE1lc3NhZ2UgQmF0Y2guXG4gICAqL1xuICBjdXN0b21faWQ6IHN0cmluZztcblxuICAvKipcbiAgICogUHJvY2Vzc2luZyByZXN1bHQgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICpcbiAgICogQ29udGFpbnMgYSBNZXNzYWdlIG91dHB1dCBpZiBwcm9jZXNzaW5nIHdhcyBzdWNjZXNzZnVsLCBhbiBlcnJvciByZXNwb25zZSBpZlxuICAgKiBwcm9jZXNzaW5nIGZhaWxlZCwgb3IgdGhlIHJlYXNvbiB3aHkgcHJvY2Vzc2luZyB3YXMgbm90IGF0dGVtcHRlZCwgc3VjaCBhc1xuICAgKiBjYW5jZWxsYXRpb24gb3IgZXhwaXJhdGlvbi5cbiAgICovXG4gIHJlc3VsdDogQmV0YU1lc3NhZ2VCYXRjaFJlc3VsdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyB7XG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIE1lc3NhZ2UgQmF0Y2ggdGhhdCBoYXZlIGJlZW4gY2FuY2VsZWQuXG4gICAqXG4gICAqIFRoaXMgaXMgemVybyB1bnRpbCBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgTWVzc2FnZSBCYXRjaCBoYXMgZW5kZWQuXG4gICAqL1xuICBjYW5jZWxlZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIE1lc3NhZ2UgQmF0Y2ggdGhhdCBlbmNvdW50ZXJlZCBhbiBlcnJvci5cbiAgICpcbiAgICogVGhpcyBpcyB6ZXJvIHVudGlsIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBNZXNzYWdlIEJhdGNoIGhhcyBlbmRlZC5cbiAgICovXG4gIGVycm9yZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgaGF2ZSBleHBpcmVkLlxuICAgKlxuICAgKiBUaGlzIGlzIHplcm8gdW50aWwgcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIE1lc3NhZ2UgQmF0Y2ggaGFzIGVuZGVkLlxuICAgKi9cbiAgZXhwaXJlZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIE1lc3NhZ2UgQmF0Y2ggdGhhdCBhcmUgcHJvY2Vzc2luZy5cbiAgICovXG4gIHByb2Nlc3Npbmc6IG51bWJlcjtcblxuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgaGF2ZSBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LlxuICAgKlxuICAgKiBUaGlzIGlzIHplcm8gdW50aWwgcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIE1lc3NhZ2UgQmF0Y2ggaGFzIGVuZGVkLlxuICAgKi9cbiAgc3VjY2VlZGVkOiBudW1iZXI7XG59XG5cbi8qKlxuICogUHJvY2Vzc2luZyByZXN1bHQgZm9yIHRoaXMgcmVxdWVzdC5cbiAqXG4gKiBDb250YWlucyBhIE1lc3NhZ2Ugb3V0cHV0IGlmIHByb2Nlc3Npbmcgd2FzIHN1Y2Nlc3NmdWwsIGFuIGVycm9yIHJlc3BvbnNlIGlmXG4gKiBwcm9jZXNzaW5nIGZhaWxlZCwgb3IgdGhlIHJlYXNvbiB3aHkgcHJvY2Vzc2luZyB3YXMgbm90IGF0dGVtcHRlZCwgc3VjaCBhc1xuICogY2FuY2VsbGF0aW9uIG9yIGV4cGlyYXRpb24uXG4gKi9cbmV4cG9ydCB0eXBlIEJldGFNZXNzYWdlQmF0Y2hSZXN1bHQgPVxuICB8IEJldGFNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHRcbiAgfCBCZXRhTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdFxuICB8IEJldGFNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdFxuICB8IEJldGFNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0O1xuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQge1xuICBtZXNzYWdlOiBCZXRhTWVzc2FnZXNBUEkuQmV0YU1lc3NhZ2U7XG5cbiAgdHlwZTogJ3N1Y2NlZWRlZCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogQm9keSBwYXJhbTogTGlzdCBvZiByZXF1ZXN0cyBmb3IgcHJvbXB0IGNvbXBsZXRpb24uIEVhY2ggaXMgYW4gaW5kaXZpZHVhbFxuICAgKiByZXF1ZXN0IHRvIGNyZWF0ZSBhIE1lc3NhZ2UuXG4gICAqL1xuICByZXF1ZXN0czogQXJyYXk8QmF0Y2hDcmVhdGVQYXJhbXMuUmVxdWVzdD47XG5cbiAgLyoqXG4gICAqIEhlYWRlciBwYXJhbTogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQmF0Y2hDcmVhdGVQYXJhbXMge1xuICBleHBvcnQgaW50ZXJmYWNlIFJlcXVlc3Qge1xuICAgIC8qKlxuICAgICAqIERldmVsb3Blci1wcm92aWRlZCBJRCBjcmVhdGVkIGZvciBlYWNoIHJlcXVlc3QgaW4gYSBNZXNzYWdlIEJhdGNoLiBVc2VmdWwgZm9yXG4gICAgICogbWF0Y2hpbmcgcmVzdWx0cyB0byByZXF1ZXN0cywgYXMgcmVzdWx0cyBtYXkgYmUgZ2l2ZW4gb3V0IG9mIHJlcXVlc3Qgb3JkZXIuXG4gICAgICpcbiAgICAgKiBNdXN0IGJlIHVuaXF1ZSBmb3IgZWFjaCByZXF1ZXN0IHdpdGhpbiB0aGUgTWVzc2FnZSBCYXRjaC5cbiAgICAgKi9cbiAgICBjdXN0b21faWQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIE1lc3NhZ2VzIEFQSSBjcmVhdGlvbiBwYXJhbWV0ZXJzIGZvciB0aGUgaW5kaXZpZHVhbCByZXF1ZXN0LlxuICAgICAqXG4gICAgICogU2VlIHRoZSBbTWVzc2FnZXMgQVBJIHJlZmVyZW5jZV0oL2VuL2FwaS9tZXNzYWdlcykgZm9yIGZ1bGwgZG9jdW1lbnRhdGlvbiBvblxuICAgICAqIGF2YWlsYWJsZSBwYXJhbWV0ZXJzLlxuICAgICAqL1xuICAgIHBhcmFtczogT21pdDxCZXRhTWVzc2FnZXNBUEkuTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZywgJ2JldGFzJz47XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXRjaFJldHJpZXZlUGFyYW1zIHtcbiAgLyoqXG4gICAqIE9wdGlvbmFsIGhlYWRlciB0byBzcGVjaWZ5IHRoZSBiZXRhIHZlcnNpb24ocykgeW91IHdhbnQgdG8gdXNlLlxuICAgKi9cbiAgYmV0YXM/OiBBcnJheTxCZXRhQVBJLkFudGhyb3BpY0JldGE+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoTGlzdFBhcmFtcyBleHRlbmRzIFBhZ2VQYXJhbXMge1xuICAvKipcbiAgICogSGVhZGVyIHBhcmFtOiBPcHRpb25hbCBoZWFkZXIgdG8gc3BlY2lmeSB0aGUgYmV0YSB2ZXJzaW9uKHMpIHlvdSB3YW50IHRvIHVzZS5cbiAgICovXG4gIGJldGFzPzogQXJyYXk8QmV0YUFQSS5BbnRocm9waWNCZXRhPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXRjaERlbGV0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBPcHRpb25hbCBoZWFkZXIgdG8gc3BlY2lmeSB0aGUgYmV0YSB2ZXJzaW9uKHMpIHlvdSB3YW50IHRvIHVzZS5cbiAgICovXG4gIGJldGFzPzogQXJyYXk8QmV0YUFQSS5BbnRocm9waWNCZXRhPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXRjaENhbmNlbFBhcmFtcyB7XG4gIC8qKlxuICAgKiBPcHRpb25hbCBoZWFkZXIgdG8gc3BlY2lmeSB0aGUgYmV0YSB2ZXJzaW9uKHMpIHlvdSB3YW50IHRvIHVzZS5cbiAgICovXG4gIGJldGFzPzogQXJyYXk8QmV0YUFQSS5BbnRocm9waWNCZXRhPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXRjaFJlc3VsdHNQYXJhbXMge1xuICAvKipcbiAgICogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbkJhdGNoZXMuQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSA9IEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2U7XG5cbmV4cG9ydCBkZWNsYXJlIG5hbWVzcGFjZSBCYXRjaGVzIHtcbiAgZXhwb3J0IHtcbiAgICB0eXBlIEJldGFEZWxldGVkTWVzc2FnZUJhdGNoIGFzIEJldGFEZWxldGVkTWVzc2FnZUJhdGNoLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaCBhcyBCZXRhTWVzc2FnZUJhdGNoLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0LFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlIGFzIEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyBhcyBCZXRhTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaFJlc3VsdCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCxcbiAgICBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlIGFzIEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UsXG4gICAgdHlwZSBCYXRjaENyZWF0ZVBhcmFtcyBhcyBCYXRjaENyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIEJhdGNoUmV0cmlldmVQYXJhbXMgYXMgQmF0Y2hSZXRyaWV2ZVBhcmFtcyxcbiAgICB0eXBlIEJhdGNoTGlzdFBhcmFtcyBhcyBCYXRjaExpc3RQYXJhbXMsXG4gICAgdHlwZSBCYXRjaERlbGV0ZVBhcmFtcyBhcyBCYXRjaERlbGV0ZVBhcmFtcyxcbiAgICB0eXBlIEJhdGNoQ2FuY2VsUGFyYW1zIGFzIEJhdGNoQ2FuY2VsUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hSZXN1bHRzUGFyYW1zIGFzIEJhdGNoUmVzdWx0c1BhcmFtcyxcbiAgfTtcbn1cbiIsICJ0eXBlIFRva2VuID0ge1xuICB0eXBlOiBzdHJpbmc7XG4gIHZhbHVlOiBzdHJpbmc7XG59O1xuXG5jb25zdCB0b2tlbml6ZSA9IChpbnB1dDogc3RyaW5nKTogVG9rZW5bXSA9PiB7XG4gICAgbGV0IGN1cnJlbnQgPSAwO1xuICAgIGxldCB0b2tlbnM6IFRva2VuW10gPSBbXTtcblxuICAgIHdoaWxlIChjdXJyZW50IDwgaW5wdXQubGVuZ3RoKSB7XG4gICAgICBsZXQgY2hhciA9IGlucHV0W2N1cnJlbnRdO1xuXG4gICAgICBpZiAoY2hhciA9PT0gJ1xcXFwnKSB7XG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAneycpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdicmFjZScsXG4gICAgICAgICAgdmFsdWU6ICd7JyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY3VycmVudCsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXIgPT09ICd9Jykge1xuICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgdHlwZTogJ2JyYWNlJyxcbiAgICAgICAgICB2YWx1ZTogJ30nLFxuICAgICAgICB9KTtcblxuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PT0gJ1snKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAncGFyZW4nLFxuICAgICAgICAgIHZhbHVlOiAnWycsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAnXScpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdwYXJlbicsXG4gICAgICAgICAgdmFsdWU6ICddJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY3VycmVudCsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXIgPT09ICc6Jykge1xuICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgdHlwZTogJ3NlcGFyYXRvcicsXG4gICAgICAgICAgdmFsdWU6ICc6JyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY3VycmVudCsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXIgPT09ICcsJykge1xuICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgdHlwZTogJ2RlbGltaXRlcicsXG4gICAgICAgICAgdmFsdWU6ICcsJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY3VycmVudCsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXIgPT09ICdcIicpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gJyc7XG4gICAgICAgIGxldCBkYW5nbGluZ1F1b3RlID0gZmFsc2U7XG5cbiAgICAgICAgY2hhciA9IGlucHV0WysrY3VycmVudF07XG5cbiAgICAgICAgd2hpbGUgKGNoYXIgIT09ICdcIicpIHtcbiAgICAgICAgICBpZiAoY3VycmVudCA9PT0gaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICBkYW5nbGluZ1F1b3RlID0gdHJ1ZTtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChjaGFyID09PSAnXFxcXCcpIHtcbiAgICAgICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgICAgIGlmIChjdXJyZW50ID09PSBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgZGFuZ2xpbmdRdW90ZSA9IHRydWU7XG4gICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgdmFsdWUgKz0gY2hhciArIGlucHV0W2N1cnJlbnRdO1xuICAgICAgICAgICAgY2hhciA9IGlucHV0WysrY3VycmVudF07XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHZhbHVlICs9IGNoYXI7XG4gICAgICAgICAgICBjaGFyID0gaW5wdXRbKytjdXJyZW50XTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBjaGFyID0gaW5wdXRbKytjdXJyZW50XTtcblxuICAgICAgICBpZiAoIWRhbmdsaW5nUXVvdGUpIHtcbiAgICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgV0hJVEVTUEFDRSA9IC9cXHMvO1xuICAgICAgaWYgKGNoYXIgJiYgV0hJVEVTUEFDRS50ZXN0KGNoYXIpKSB7XG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGxldCBOVU1CRVJTID0gL1swLTldLztcbiAgICAgIGlmICgoY2hhciAmJiBOVU1CRVJTLnRlc3QoY2hhcikpIHx8IGNoYXIgPT09ICctJyB8fCBjaGFyID09PSAnLicpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gJyc7XG5cbiAgICAgICAgaWYgKGNoYXIgPT09ICctJykge1xuICAgICAgICAgIHZhbHVlICs9IGNoYXI7XG4gICAgICAgICAgY2hhciA9IGlucHV0WysrY3VycmVudF07XG4gICAgICAgIH1cblxuICAgICAgICB3aGlsZSAoKGNoYXIgJiYgTlVNQkVSUy50ZXN0KGNoYXIpKSB8fCBjaGFyID09PSAnLicpIHtcbiAgICAgICAgICB2YWx1ZSArPSBjaGFyO1xuICAgICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuICAgICAgICB9XG5cbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIHZhbHVlLFxuICAgICAgICB9KTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGxldCBMRVRURVJTID0gL1thLXpdL2k7XG4gICAgICBpZiAoY2hhciAmJiBMRVRURVJTLnRlc3QoY2hhcikpIHtcbiAgICAgICAgbGV0IHZhbHVlID0gJyc7XG5cbiAgICAgICAgd2hpbGUgKGNoYXIgJiYgTEVUVEVSUy50ZXN0KGNoYXIpKSB7XG4gICAgICAgICAgaWYgKGN1cnJlbnQgPT09IGlucHV0Lmxlbmd0aCkge1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIHZhbHVlICs9IGNoYXI7XG4gICAgICAgICAgY2hhciA9IGlucHV0WysrY3VycmVudF07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAodmFsdWUgPT0gJ3RydWUnIHx8IHZhbHVlID09ICdmYWxzZScgfHwgdmFsdWUgPT09ICdudWxsJykge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6ICduYW1lJyxcbiAgICAgICAgICAgIHZhbHVlLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIC8vIHVua25vd24gdG9rZW4sIGUuZy4gYG51bGAgd2hpY2ggaXNuJ3QgcXVpdGUgYG51bGxgXG4gICAgICAgICAgY3VycmVudCsrO1xuICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICB9XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjdXJyZW50Kys7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VucztcbiAgfSxcbiAgc3RyaXAgPSAodG9rZW5zOiBUb2tlbltdKTogVG9rZW5bXSA9PiB7XG4gICAgaWYgKHRva2Vucy5sZW5ndGggPT09IDApIHtcbiAgICAgIHJldHVybiB0b2tlbnM7XG4gICAgfVxuXG4gICAgbGV0IGxhc3RUb2tlbiA9IHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMV0hO1xuXG4gICAgc3dpdGNoIChsYXN0VG9rZW4udHlwZSkge1xuICAgICAgY2FzZSAnc2VwYXJhdG9yJzpcbiAgICAgICAgdG9rZW5zID0gdG9rZW5zLnNsaWNlKDAsIHRva2Vucy5sZW5ndGggLSAxKTtcbiAgICAgICAgcmV0dXJuIHN0cmlwKHRva2Vucyk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbnVtYmVyJzpcbiAgICAgICAgbGV0IGxhc3RDaGFyYWN0ZXJPZkxhc3RUb2tlbiA9IGxhc3RUb2tlbi52YWx1ZVtsYXN0VG9rZW4udmFsdWUubGVuZ3RoIC0gMV07XG4gICAgICAgIGlmIChsYXN0Q2hhcmFjdGVyT2ZMYXN0VG9rZW4gPT09ICcuJyB8fCBsYXN0Q2hhcmFjdGVyT2ZMYXN0VG9rZW4gPT09ICctJykge1xuICAgICAgICAgIHRva2VucyA9IHRva2Vucy5zbGljZSgwLCB0b2tlbnMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgcmV0dXJuIHN0cmlwKHRva2Vucyk7XG4gICAgICAgIH1cbiAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgIGxldCB0b2tlbkJlZm9yZVRoZUxhc3RUb2tlbiA9IHRva2Vuc1t0b2tlbnMubGVuZ3RoIC0gMl07XG4gICAgICAgIGlmICh0b2tlbkJlZm9yZVRoZUxhc3RUb2tlbj8udHlwZSA9PT0gJ2RlbGltaXRlcicpIHtcbiAgICAgICAgICB0b2tlbnMgPSB0b2tlbnMuc2xpY2UoMCwgdG9rZW5zLmxlbmd0aCAtIDEpO1xuICAgICAgICAgIHJldHVybiBzdHJpcCh0b2tlbnMpO1xuICAgICAgICB9IGVsc2UgaWYgKHRva2VuQmVmb3JlVGhlTGFzdFRva2VuPy50eXBlID09PSAnYnJhY2UnICYmIHRva2VuQmVmb3JlVGhlTGFzdFRva2VuLnZhbHVlID09PSAneycpIHtcbiAgICAgICAgICB0b2tlbnMgPSB0b2tlbnMuc2xpY2UoMCwgdG9rZW5zLmxlbmd0aCAtIDEpO1xuICAgICAgICAgIHJldHVybiBzdHJpcCh0b2tlbnMpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnZGVsaW1pdGVyJzpcbiAgICAgICAgdG9rZW5zID0gdG9rZW5zLnNsaWNlKDAsIHRva2Vucy5sZW5ndGggLSAxKTtcbiAgICAgICAgcmV0dXJuIHN0cmlwKHRva2Vucyk7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIHJldHVybiB0b2tlbnM7XG4gIH0sXG4gIHVuc3RyaXAgPSAodG9rZW5zOiBUb2tlbltdKTogVG9rZW5bXSA9PiB7XG4gICAgbGV0IHRhaWw6IHN0cmluZ1tdID0gW107XG5cbiAgICB0b2tlbnMubWFwKCh0b2tlbikgPT4ge1xuICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICdicmFjZScpIHtcbiAgICAgICAgaWYgKHRva2VuLnZhbHVlID09PSAneycpIHtcbiAgICAgICAgICB0YWlsLnB1c2goJ30nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YWlsLnNwbGljZSh0YWlsLmxhc3RJbmRleE9mKCd9JyksIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ3BhcmVuJykge1xuICAgICAgICBpZiAodG9rZW4udmFsdWUgPT09ICdbJykge1xuICAgICAgICAgIHRhaWwucHVzaCgnXScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhaWwuc3BsaWNlKHRhaWwubGFzdEluZGV4T2YoJ10nKSwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh0YWlsLmxlbmd0aCA+IDApIHtcbiAgICAgIHRhaWwucmV2ZXJzZSgpLm1hcCgoaXRlbSkgPT4ge1xuICAgICAgICBpZiAoaXRlbSA9PT0gJ30nKSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogJ2JyYWNlJyxcbiAgICAgICAgICAgIHZhbHVlOiAnfScsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSBpZiAoaXRlbSA9PT0gJ10nKSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogJ3BhcmVuJyxcbiAgICAgICAgICAgIHZhbHVlOiAnXScsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIHJldHVybiB0b2tlbnM7XG4gIH0sXG4gIGdlbmVyYXRlID0gKHRva2VuczogVG9rZW5bXSk6IHN0cmluZyA9PiB7XG4gICAgbGV0IG91dHB1dCA9ICcnO1xuXG4gICAgdG9rZW5zLm1hcCgodG9rZW4pID0+IHtcbiAgICAgIHN3aXRjaCAodG9rZW4udHlwZSkge1xuICAgICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICAgIG91dHB1dCArPSAnXCInICsgdG9rZW4udmFsdWUgKyAnXCInO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgIG91dHB1dCArPSB0b2tlbi52YWx1ZTtcbiAgICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHJldHVybiBvdXRwdXQ7XG4gIH0sXG4gIHBhcnRpYWxQYXJzZSA9IChpbnB1dDogc3RyaW5nKTogdW5rbm93biA9PiBKU09OLnBhcnNlKGdlbmVyYXRlKHVuc3RyaXAoc3RyaXAodG9rZW5pemUoaW5wdXQpKSkpKTtcblxuZXhwb3J0IHsgcGFydGlhbFBhcnNlIH07XG4iLCAiaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vY29yZS5qc1wiO1xuaW1wb3J0IHsgQW50aHJvcGljRXJyb3IsIEFQSVVzZXJBYm9ydEVycm9yIH0gZnJvbSBcIi4uL2Vycm9yLmpzXCI7XG5pbXBvcnQge1xuICB0eXBlIEJldGFDb250ZW50QmxvY2ssXG4gIE1lc3NhZ2VzIGFzIEJldGFNZXNzYWdlcyxcbiAgdHlwZSBCZXRhTWVzc2FnZSxcbiAgdHlwZSBCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50IGFzIEJldGFNZXNzYWdlU3RyZWFtRXZlbnQsXG4gIHR5cGUgQmV0YU1lc3NhZ2VQYXJhbSxcbiAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIGFzIEJldGFNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlIGFzIEJldGFNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSxcbiAgdHlwZSBCZXRhVGV4dEJsb2NrLFxuICB0eXBlIEJldGFUZXh0Q2l0YXRpb24sXG59IGZyb20gXCIuLi9yZXNvdXJjZXMvYmV0YS9tZXNzYWdlcy9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHsgdHlwZSBSZWFkYWJsZVN0cmVhbSwgdHlwZSBSZXNwb25zZSB9IGZyb20gXCIuLi9fc2hpbXMvaW5kZXguanNcIjtcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuLi9zdHJlYW1pbmcuanNcIjtcbmltcG9ydCB7IHBhcnRpYWxQYXJzZSB9IGZyb20gXCIuLi9fdmVuZG9yL3BhcnRpYWwtanNvbi1wYXJzZXIvcGFyc2VyLmpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZVN0cmVhbUV2ZW50cyB7XG4gIGNvbm5lY3Q6ICgpID0+IHZvaWQ7XG4gIHN0cmVhbUV2ZW50OiAoZXZlbnQ6IEJldGFNZXNzYWdlU3RyZWFtRXZlbnQsIHNuYXBzaG90OiBCZXRhTWVzc2FnZSkgPT4gdm9pZDtcbiAgdGV4dDogKHRleHREZWx0YTogc3RyaW5nLCB0ZXh0U25hcHNob3Q6IHN0cmluZykgPT4gdm9pZDtcbiAgY2l0YXRpb246IChjaXRhdGlvbjogQmV0YVRleHRDaXRhdGlvbiwgY2l0YXRpb25zU25hcHNob3Q6IEJldGFUZXh0Q2l0YXRpb25bXSkgPT4gdm9pZDtcbiAgaW5wdXRKc29uOiAocGFydGlhbEpzb246IHN0cmluZywganNvblNuYXBzaG90OiB1bmtub3duKSA9PiB2b2lkO1xuICBtZXNzYWdlOiAobWVzc2FnZTogQmV0YU1lc3NhZ2UpID0+IHZvaWQ7XG4gIGNvbnRlbnRCbG9jazogKGNvbnRlbnQ6IEJldGFDb250ZW50QmxvY2spID0+IHZvaWQ7XG4gIGZpbmFsTWVzc2FnZTogKG1lc3NhZ2U6IEJldGFNZXNzYWdlKSA9PiB2b2lkO1xuICBlcnJvcjogKGVycm9yOiBBbnRocm9waWNFcnJvcikgPT4gdm9pZDtcbiAgYWJvcnQ6IChlcnJvcjogQVBJVXNlckFib3J0RXJyb3IpID0+IHZvaWQ7XG4gIGVuZDogKCkgPT4gdm9pZDtcbn1cblxudHlwZSBNZXNzYWdlU3RyZWFtRXZlbnRMaXN0ZW5lcnM8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPiA9IHtcbiAgbGlzdGVuZXI6IE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdO1xuICBvbmNlPzogYm9vbGVhbjtcbn1bXTtcblxuY29uc3QgSlNPTl9CVUZfUFJPUEVSVFkgPSAnX19qc29uX2J1Zic7XG5cbmV4cG9ydCBjbGFzcyBCZXRhTWVzc2FnZVN0cmVhbSBpbXBsZW1lbnRzIEFzeW5jSXRlcmFibGU8QmV0YU1lc3NhZ2VTdHJlYW1FdmVudD4ge1xuICBtZXNzYWdlczogQmV0YU1lc3NhZ2VQYXJhbVtdID0gW107XG4gIHJlY2VpdmVkTWVzc2FnZXM6IEJldGFNZXNzYWdlW10gPSBbXTtcbiAgI2N1cnJlbnRNZXNzYWdlU25hcHNob3Q6IEJldGFNZXNzYWdlIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblxuICAjY29ubmVjdGVkUHJvbWlzZTogUHJvbWlzZTxSZXNwb25zZSB8IG51bGw+O1xuICAjcmVzb2x2ZUNvbm5lY3RlZFByb21pc2U6IChyZXNwb25zZTogUmVzcG9uc2UgfCBudWxsKSA9PiB2b2lkID0gKCkgPT4ge307XG4gICNyZWplY3RDb25uZWN0ZWRQcm9taXNlOiAoZXJyb3I6IEFudGhyb3BpY0Vycm9yKSA9PiB2b2lkID0gKCkgPT4ge307XG5cbiAgI2VuZFByb21pc2U6IFByb21pc2U8dm9pZD47XG4gICNyZXNvbHZlRW5kUHJvbWlzZTogKCkgPT4gdm9pZCA9ICgpID0+IHt9O1xuICAjcmVqZWN0RW5kUHJvbWlzZTogKGVycm9yOiBBbnRocm9waWNFcnJvcikgPT4gdm9pZCA9ICgpID0+IHt9O1xuXG4gICNsaXN0ZW5lcnM6IHsgW0V2ZW50IGluIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHNdPzogTWVzc2FnZVN0cmVhbUV2ZW50TGlzdGVuZXJzPEV2ZW50PiB9ID0ge307XG5cbiAgI2VuZGVkID0gZmFsc2U7XG4gICNlcnJvcmVkID0gZmFsc2U7XG4gICNhYm9ydGVkID0gZmFsc2U7XG4gICNjYXRjaGluZ1Byb21pc2VDcmVhdGVkID0gZmFsc2U7XG4gICNyZXNwb25zZTogUmVzcG9uc2UgfCBudWxsIHwgdW5kZWZpbmVkO1xuICAjcmVxdWVzdF9pZDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLiNjb25uZWN0ZWRQcm9taXNlID0gbmV3IFByb21pc2U8UmVzcG9uc2UgfCBudWxsPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLiNyZXNvbHZlQ29ubmVjdGVkUHJvbWlzZSA9IHJlc29sdmU7XG4gICAgICB0aGlzLiNyZWplY3RDb25uZWN0ZWRQcm9taXNlID0gcmVqZWN0O1xuICAgIH0pO1xuXG4gICAgdGhpcy4jZW5kUHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuI3Jlc29sdmVFbmRQcm9taXNlID0gcmVzb2x2ZTtcbiAgICAgIHRoaXMuI3JlamVjdEVuZFByb21pc2UgPSByZWplY3Q7XG4gICAgfSk7XG5cbiAgICAvLyBEb24ndCBsZXQgdGhlc2UgcHJvbWlzZXMgY2F1c2UgdW5oYW5kbGVkIHJlamVjdGlvbiBlcnJvcnMuXG4gICAgLy8gd2Ugd2lsbCBtYW51YWxseSBjYXVzZSBhbiB1bmhhbmRsZWQgcmVqZWN0aW9uIGVycm9yIGxhdGVyXG4gICAgLy8gaWYgdGhlIHVzZXIgaGFzbid0IHJlZ2lzdGVyZWQgYW55IGVycm9yIGxpc3RlbmVyIG9yIGNhbGxlZFxuICAgIC8vIGFueSBwcm9taXNlLXJldHVybmluZyBtZXRob2QuXG4gICAgdGhpcy4jY29ubmVjdGVkUHJvbWlzZS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgdGhpcy4jZW5kUHJvbWlzZS5jYXRjaCgoKSA9PiB7fSk7XG4gIH1cblxuICBnZXQgcmVzcG9uc2UoKTogUmVzcG9uc2UgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy4jcmVzcG9uc2U7XG4gIH1cblxuICBnZXQgcmVxdWVzdF9pZCgpOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy4jcmVxdWVzdF9pZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBgTWVzc2FnZVN0cmVhbWAgZGF0YSwgdGhlIHJhdyBgUmVzcG9uc2VgIGluc3RhbmNlIGFuZCB0aGUgSUQgb2YgdGhlIHJlcXVlc3QsXG4gICAqIHJldHVybmVkIHZpZSB0aGUgYHJlcXVlc3QtaWRgIGhlYWRlciB3aGljaCBpcyB1c2VmdWwgZm9yIGRlYnVnZ2luZyByZXF1ZXN0cyBhbmQgcmVzcG9ydGluZ1xuICAgKiBpc3N1ZXMgdG8gQW50aHJvcGljLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBzYW1lIGFzIHRoZSBgQVBJUHJvbWlzZS53aXRoUmVzcG9uc2UoKWAgbWV0aG9kLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCB3aWxsIHJhaXNlIGFuIGVycm9yIGlmIHlvdSBjcmVhdGVkIHRoZSBzdHJlYW0gdXNpbmcgYE1lc3NhZ2VTdHJlYW0uZnJvbVJlYWRhYmxlU3RyZWFtYFxuICAgKiBhcyBubyBgUmVzcG9uc2VgIGlzIGF2YWlsYWJsZS5cbiAgICovXG4gIGFzeW5jIHdpdGhSZXNwb25zZSgpOiBQcm9taXNlPHtcbiAgICBkYXRhOiBCZXRhTWVzc2FnZVN0cmVhbTtcbiAgICByZXNwb25zZTogUmVzcG9uc2U7XG4gICAgcmVxdWVzdF9pZDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgfT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy4jY29ubmVjdGVkUHJvbWlzZTtcbiAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCByZXNvbHZlIGEgYFJlc3BvbnNlYCBvYmplY3QnKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGF0YTogdGhpcyxcbiAgICAgIHJlc3BvbnNlLFxuICAgICAgcmVxdWVzdF9pZDogcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3JlcXVlc3QtaWQnKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEludGVuZGVkIGZvciB1c2Ugb24gdGhlIGZyb250ZW5kLCBjb25zdW1pbmcgYSBzdHJlYW0gcHJvZHVjZWQgd2l0aFxuICAgKiBgLnRvUmVhZGFibGVTdHJlYW0oKWAgb24gdGhlIGJhY2tlbmQuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBtZXNzYWdlcyBzZW50IHRvIHRoZSBtb2RlbCBkbyBub3QgYXBwZWFyIGluIGAub24oJ21lc3NhZ2UnKWBcbiAgICogaW4gdGhpcyBjb250ZXh0LlxuICAgKi9cbiAgc3RhdGljIGZyb21SZWFkYWJsZVN0cmVhbShzdHJlYW06IFJlYWRhYmxlU3RyZWFtKTogQmV0YU1lc3NhZ2VTdHJlYW0ge1xuICAgIGNvbnN0IHJ1bm5lciA9IG5ldyBCZXRhTWVzc2FnZVN0cmVhbSgpO1xuICAgIHJ1bm5lci5fcnVuKCgpID0+IHJ1bm5lci5fZnJvbVJlYWRhYmxlU3RyZWFtKHN0cmVhbSkpO1xuICAgIHJldHVybiBydW5uZXI7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlTWVzc2FnZShcbiAgICBtZXNzYWdlczogQmV0YU1lc3NhZ2VzLFxuICAgIHBhcmFtczogQmV0YU1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBCZXRhTWVzc2FnZVN0cmVhbSB7XG4gICAgY29uc3QgcnVubmVyID0gbmV3IEJldGFNZXNzYWdlU3RyZWFtKCk7XG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIHBhcmFtcy5tZXNzYWdlcykge1xuICAgICAgcnVubmVyLl9hZGRNZXNzYWdlUGFyYW0obWVzc2FnZSk7XG4gICAgfVxuICAgIHJ1bm5lci5fcnVuKCgpID0+XG4gICAgICBydW5uZXIuX2NyZWF0ZU1lc3NhZ2UoXG4gICAgICAgIG1lc3NhZ2VzLFxuICAgICAgICB7IC4uLnBhcmFtcywgc3RyZWFtOiB0cnVlIH0sXG4gICAgICAgIHsgLi4ub3B0aW9ucywgaGVhZGVyczogeyAuLi5vcHRpb25zPy5oZWFkZXJzLCAnWC1TdGFpbmxlc3MtSGVscGVyLU1ldGhvZCc6ICdzdHJlYW0nIH0gfSxcbiAgICAgICksXG4gICAgKTtcbiAgICByZXR1cm4gcnVubmVyO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9ydW4oZXhlY3V0b3I6ICgpID0+IFByb21pc2U8YW55Pikge1xuICAgIGV4ZWN1dG9yKCkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLl9lbWl0RmluYWwoKTtcbiAgICAgIHRoaXMuX2VtaXQoJ2VuZCcpO1xuICAgIH0sIHRoaXMuI2hhbmRsZUVycm9yKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfYWRkTWVzc2FnZVBhcmFtKG1lc3NhZ2U6IEJldGFNZXNzYWdlUGFyYW0pIHtcbiAgICB0aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2FkZE1lc3NhZ2UobWVzc2FnZTogQmV0YU1lc3NhZ2UsIGVtaXQgPSB0cnVlKSB7XG4gICAgdGhpcy5yZWNlaXZlZE1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgaWYgKGVtaXQpIHtcbiAgICAgIHRoaXMuX2VtaXQoJ21lc3NhZ2UnLCBtZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgX2NyZWF0ZU1lc3NhZ2UoXG4gICAgbWVzc2FnZXM6IEJldGFNZXNzYWdlcyxcbiAgICBwYXJhbXM6IEJldGFNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzaWduYWwgPSBvcHRpb25zPy5zaWduYWw7XG4gICAgaWYgKHNpZ25hbCkge1xuICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+IHRoaXMuY29udHJvbGxlci5hYm9ydCgpKTtcbiAgICB9XG4gICAgdGhpcy4jYmVnaW5SZXF1ZXN0KCk7XG4gICAgY29uc3QgeyByZXNwb25zZSwgZGF0YTogc3RyZWFtIH0gPSBhd2FpdCBtZXNzYWdlc1xuICAgICAgLmNyZWF0ZSh7IC4uLnBhcmFtcywgc3RyZWFtOiB0cnVlIH0sIHsgLi4ub3B0aW9ucywgc2lnbmFsOiB0aGlzLmNvbnRyb2xsZXIuc2lnbmFsIH0pXG4gICAgICAud2l0aFJlc3BvbnNlKCk7XG4gICAgdGhpcy5fY29ubmVjdGVkKHJlc3BvbnNlKTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIHN0cmVhbSkge1xuICAgICAgdGhpcy4jYWRkU3RyZWFtRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICBpZiAoc3RyZWFtLmNvbnRyb2xsZXIuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJVXNlckFib3J0RXJyb3IoKTtcbiAgICB9XG4gICAgdGhpcy4jZW5kUmVxdWVzdCgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9jb25uZWN0ZWQocmVzcG9uc2U6IFJlc3BvbnNlIHwgbnVsbCkge1xuICAgIGlmICh0aGlzLmVuZGVkKSByZXR1cm47XG4gICAgdGhpcy4jcmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLiNyZXF1ZXN0X2lkID0gcmVzcG9uc2U/LmhlYWRlcnMuZ2V0KCdyZXF1ZXN0LWlkJyk7XG4gICAgdGhpcy4jcmVzb2x2ZUNvbm5lY3RlZFByb21pc2UocmVzcG9uc2UpO1xuICAgIHRoaXMuX2VtaXQoJ2Nvbm5lY3QnKTtcbiAgfVxuXG4gIGdldCBlbmRlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4jZW5kZWQ7XG4gIH1cblxuICBnZXQgZXJyb3JlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4jZXJyb3JlZDtcbiAgfVxuXG4gIGdldCBhYm9ydGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLiNhYm9ydGVkO1xuICB9XG5cbiAgYWJvcnQoKSB7XG4gICAgdGhpcy5jb250cm9sbGVyLmFib3J0KCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB0aGUgbGlzdGVuZXIgZnVuY3Rpb24gdG8gdGhlIGVuZCBvZiB0aGUgbGlzdGVuZXJzIGFycmF5IGZvciB0aGUgZXZlbnQuXG4gICAqIE5vIGNoZWNrcyBhcmUgbWFkZSB0byBzZWUgaWYgdGhlIGxpc3RlbmVyIGhhcyBhbHJlYWR5IGJlZW4gYWRkZWQuIE11bHRpcGxlIGNhbGxzIHBhc3NpbmdcbiAgICogdGhlIHNhbWUgY29tYmluYXRpb24gb2YgZXZlbnQgYW5kIGxpc3RlbmVyIHdpbGwgcmVzdWx0IGluIHRoZSBsaXN0ZW5lciBiZWluZyBhZGRlZCwgYW5kXG4gICAqIGNhbGxlZCwgbXVsdGlwbGUgdGltZXMuXG4gICAqIEByZXR1cm5zIHRoaXMgTWVzc2FnZVN0cmVhbSwgc28gdGhhdCBjYWxscyBjYW4gYmUgY2hhaW5lZFxuICAgKi9cbiAgb248RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihldmVudDogRXZlbnQsIGxpc3RlbmVyOiBNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XSk6IHRoaXMge1xuICAgIGNvbnN0IGxpc3RlbmVyczogTWVzc2FnZVN0cmVhbUV2ZW50TGlzdGVuZXJzPEV2ZW50PiA9XG4gICAgICB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdIHx8ICh0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdID0gW10pO1xuICAgIGxpc3RlbmVycy5wdXNoKHsgbGlzdGVuZXIgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGxpc3RlbmVyIGZyb20gdGhlIGxpc3RlbmVyIGFycmF5IGZvciB0aGUgZXZlbnQuXG4gICAqIG9mZigpIHdpbGwgcmVtb3ZlLCBhdCBtb3N0LCBvbmUgaW5zdGFuY2Ugb2YgYSBsaXN0ZW5lciBmcm9tIHRoZSBsaXN0ZW5lciBhcnJheS4gSWYgYW55IHNpbmdsZVxuICAgKiBsaXN0ZW5lciBoYXMgYmVlbiBhZGRlZCBtdWx0aXBsZSB0aW1lcyB0byB0aGUgbGlzdGVuZXIgYXJyYXkgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnQsIHRoZW5cbiAgICogb2ZmKCkgbXVzdCBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMgdG8gcmVtb3ZlIGVhY2ggaW5zdGFuY2UuXG4gICAqIEByZXR1cm5zIHRoaXMgTWVzc2FnZVN0cmVhbSwgc28gdGhhdCBjYWxscyBjYW4gYmUgY2hhaW5lZFxuICAgKi9cbiAgb2ZmPEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oZXZlbnQ6IEV2ZW50LCBsaXN0ZW5lcjogTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0pOiB0aGlzIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdO1xuICAgIGlmICghbGlzdGVuZXJzKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVycy5maW5kSW5kZXgoKGwpID0+IGwubGlzdGVuZXIgPT09IGxpc3RlbmVyKTtcbiAgICBpZiAoaW5kZXggPj0gMCkgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIG9uZS10aW1lIGxpc3RlbmVyIGZ1bmN0aW9uIGZvciB0aGUgZXZlbnQuIFRoZSBuZXh0IHRpbWUgdGhlIGV2ZW50IGlzIHRyaWdnZXJlZCxcbiAgICogdGhpcyBsaXN0ZW5lciBpcyByZW1vdmVkIGFuZCB0aGVuIGludm9rZWQuXG4gICAqIEByZXR1cm5zIHRoaXMgTWVzc2FnZVN0cmVhbSwgc28gdGhhdCBjYWxscyBjYW4gYmUgY2hhaW5lZFxuICAgKi9cbiAgb25jZTxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+KGV2ZW50OiBFdmVudCwgbGlzdGVuZXI6IE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdKTogdGhpcyB7XG4gICAgY29uc3QgbGlzdGVuZXJzOiBNZXNzYWdlU3RyZWFtRXZlbnRMaXN0ZW5lcnM8RXZlbnQ+ID1cbiAgICAgIHRoaXMuI2xpc3RlbmVyc1tldmVudF0gfHwgKHRoaXMuI2xpc3RlbmVyc1tldmVudF0gPSBbXSk7XG4gICAgbGlzdGVuZXJzLnB1c2goeyBsaXN0ZW5lciwgb25jZTogdHJ1ZSB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHNpbWlsYXIgdG8gYC5vbmNlKClgLCBidXQgcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB0aGUgbmV4dCB0aW1lXG4gICAqIHRoZSBldmVudCBpcyB0cmlnZ2VyZWQsIGluc3RlYWQgb2YgY2FsbGluZyBhIGxpc3RlbmVyIGNhbGxiYWNrLlxuICAgKiBAcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB0aGUgbmV4dCB0aW1lIGdpdmVuIGV2ZW50IGlzIHRyaWdnZXJlZCxcbiAgICogb3IgcmVqZWN0cyBpZiBhbiBlcnJvciBpcyBlbWl0dGVkLiAgKElmIHlvdSByZXF1ZXN0IHRoZSAnZXJyb3InIGV2ZW50LFxuICAgKiByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGVycm9yKS5cbiAgICpcbiAgICogRXhhbXBsZTpcbiAgICpcbiAgICogICBjb25zdCBtZXNzYWdlID0gYXdhaXQgc3RyZWFtLmVtaXR0ZWQoJ21lc3NhZ2UnKSAvLyByZWplY3RzIGlmIHRoZSBzdHJlYW0gZXJyb3JzXG4gICAqL1xuICBlbWl0dGVkPEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oXG4gICAgZXZlbnQ6IEV2ZW50LFxuICApOiBQcm9taXNlPFxuICAgIFBhcmFtZXRlcnM8TWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+IGV4dGVuZHMgW2luZmVyIFBhcmFtXSA/IFBhcmFtXG4gICAgOiBQYXJhbWV0ZXJzPE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdPiBleHRlbmRzIFtdID8gdm9pZFxuICAgIDogUGFyYW1ldGVyczxNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XT5cbiAgPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgPSB0cnVlO1xuICAgICAgaWYgKGV2ZW50ICE9PSAnZXJyb3InKSB0aGlzLm9uY2UoJ2Vycm9yJywgcmVqZWN0KTtcbiAgICAgIHRoaXMub25jZShldmVudCwgcmVzb2x2ZSBhcyBhbnkpO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZG9uZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLiNjYXRjaGluZ1Byb21pc2VDcmVhdGVkID0gdHJ1ZTtcbiAgICBhd2FpdCB0aGlzLiNlbmRQcm9taXNlO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRNZXNzYWdlKCk6IEJldGFNZXNzYWdlIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdDtcbiAgfVxuXG4gICNnZXRGaW5hbE1lc3NhZ2UoKTogQmV0YU1lc3NhZ2Uge1xuICAgIGlmICh0aGlzLnJlY2VpdmVkTWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoJ3N0cmVhbSBlbmRlZCB3aXRob3V0IHByb2R1Y2luZyBhIE1lc3NhZ2Ugd2l0aCByb2xlPWFzc2lzdGFudCcpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmF0KC0xKSE7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgdGhlIGZpbmFsIGFzc2lzdGFudCBNZXNzYWdlIHJlc3BvbnNlLFxuICAgKiBvciByZWplY3RzIGlmIGFuIGVycm9yIG9jY3VycmVkIG9yIHRoZSBzdHJlYW0gZW5kZWQgcHJlbWF0dXJlbHkgd2l0aG91dCBwcm9kdWNpbmcgYSBNZXNzYWdlLlxuICAgKi9cbiAgYXN5bmMgZmluYWxNZXNzYWdlKCk6IFByb21pc2U8QmV0YU1lc3NhZ2U+IHtcbiAgICBhd2FpdCB0aGlzLmRvbmUoKTtcbiAgICByZXR1cm4gdGhpcy4jZ2V0RmluYWxNZXNzYWdlKCk7XG4gIH1cblxuICAjZ2V0RmluYWxUZXh0KCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMucmVjZWl2ZWRNZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcignc3RyZWFtIGVuZGVkIHdpdGhvdXQgcHJvZHVjaW5nIGEgTWVzc2FnZSB3aXRoIHJvbGU9YXNzaXN0YW50Jyk7XG4gICAgfVxuICAgIGNvbnN0IHRleHRCbG9ja3MgPSB0aGlzLnJlY2VpdmVkTWVzc2FnZXNcbiAgICAgIC5hdCgtMSkhXG4gICAgICAuY29udGVudC5maWx0ZXIoKGJsb2NrKTogYmxvY2sgaXMgQmV0YVRleHRCbG9jayA9PiBibG9jay50eXBlID09PSAndGV4dCcpXG4gICAgICAubWFwKChibG9jaykgPT4gYmxvY2sudGV4dCk7XG4gICAgaWYgKHRleHRCbG9ja3MubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoJ3N0cmVhbSBlbmRlZCB3aXRob3V0IHByb2R1Y2luZyBhIGNvbnRlbnQgYmxvY2sgd2l0aCB0eXBlPXRleHQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRleHRCbG9ja3Muam9pbignICcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHRoZSBmaW5hbCBhc3Npc3RhbnQgTWVzc2FnZSdzIHRleHQgcmVzcG9uc2UsIGNvbmNhdGVuYXRlZFxuICAgKiB0b2dldGhlciBpZiB0aGVyZSBhcmUgbW9yZSB0aGFuIG9uZSB0ZXh0IGJsb2Nrcy5cbiAgICogUmVqZWN0cyBpZiBhbiBlcnJvciBvY2N1cnJlZCBvciB0aGUgc3RyZWFtIGVuZGVkIHByZW1hdHVyZWx5IHdpdGhvdXQgcHJvZHVjaW5nIGEgTWVzc2FnZS5cbiAgICovXG4gIGFzeW5jIGZpbmFsVGV4dCgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGF3YWl0IHRoaXMuZG9uZSgpO1xuICAgIHJldHVybiB0aGlzLiNnZXRGaW5hbFRleHQoKTtcbiAgfVxuXG4gICNoYW5kbGVFcnJvciA9IChlcnJvcjogdW5rbm93bikgPT4ge1xuICAgIHRoaXMuI2Vycm9yZWQgPSB0cnVlO1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgZXJyb3IgPSBuZXcgQVBJVXNlckFib3J0RXJyb3IoKTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQVBJVXNlckFib3J0RXJyb3IpIHtcbiAgICAgIHRoaXMuI2Fib3J0ZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRoaXMuX2VtaXQoJ2Fib3J0JywgZXJyb3IpO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBBbnRocm9waWNFcnJvcikge1xuICAgICAgcmV0dXJuIHRoaXMuX2VtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgY29uc3QgYW50aHJvcGljRXJyb3I6IEFudGhyb3BpY0Vycm9yID0gbmV3IEFudGhyb3BpY0Vycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgYW50aHJvcGljRXJyb3IuY2F1c2UgPSBlcnJvcjtcbiAgICAgIHJldHVybiB0aGlzLl9lbWl0KCdlcnJvcicsIGFudGhyb3BpY0Vycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2VtaXQoJ2Vycm9yJywgbmV3IEFudGhyb3BpY0Vycm9yKFN0cmluZyhlcnJvcikpKTtcbiAgfTtcblxuICBwcm90ZWN0ZWQgX2VtaXQ8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihcbiAgICBldmVudDogRXZlbnQsXG4gICAgLi4uYXJnczogUGFyYW1ldGVyczxNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XT5cbiAgKSB7XG4gICAgLy8gbWFrZSBzdXJlIHdlIGRvbid0IGVtaXQgYW55IE1lc3NhZ2VTdHJlYW1FdmVudHMgYWZ0ZXIgZW5kXG4gICAgaWYgKHRoaXMuI2VuZGVkKSByZXR1cm47XG5cbiAgICBpZiAoZXZlbnQgPT09ICdlbmQnKSB7XG4gICAgICB0aGlzLiNlbmRlZCA9IHRydWU7XG4gICAgICB0aGlzLiNyZXNvbHZlRW5kUHJvbWlzZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGxpc3RlbmVyczogTWVzc2FnZVN0cmVhbUV2ZW50TGlzdGVuZXJzPEV2ZW50PiB8IHVuZGVmaW5lZCA9IHRoaXMuI2xpc3RlbmVyc1tldmVudF07XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgdGhpcy4jbGlzdGVuZXJzW2V2ZW50XSA9IGxpc3RlbmVycy5maWx0ZXIoKGwpID0+ICFsLm9uY2UpIGFzIGFueTtcbiAgICAgIGxpc3RlbmVycy5mb3JFYWNoKCh7IGxpc3RlbmVyIH06IGFueSkgPT4gbGlzdGVuZXIoLi4uYXJncykpO1xuICAgIH1cblxuICAgIGlmIChldmVudCA9PT0gJ2Fib3J0Jykge1xuICAgICAgY29uc3QgZXJyb3IgPSBhcmdzWzBdIGFzIEFQSVVzZXJBYm9ydEVycm9yO1xuICAgICAgaWYgKCF0aGlzLiNjYXRjaGluZ1Byb21pc2VDcmVhdGVkICYmICFsaXN0ZW5lcnM/Lmxlbmd0aCkge1xuICAgICAgICBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgICB0aGlzLiNyZWplY3RDb25uZWN0ZWRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuI3JlamVjdEVuZFByb21pc2UoZXJyb3IpO1xuICAgICAgdGhpcy5fZW1pdCgnZW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50ID09PSAnZXJyb3InKSB7XG4gICAgICAvLyBOT1RFOiBfZW1pdCgnZXJyb3InLCBlcnJvcikgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZyb20gI2hhbmRsZUVycm9yKCkuXG5cbiAgICAgIGNvbnN0IGVycm9yID0gYXJnc1swXSBhcyBBbnRocm9waWNFcnJvcjtcbiAgICAgIGlmICghdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCAmJiAhbGlzdGVuZXJzPy5sZW5ndGgpIHtcbiAgICAgICAgLy8gVHJpZ2dlciBhbiB1bmhhbmRsZWQgcmVqZWN0aW9uIGlmIHRoZSB1c2VyIGhhc24ndCByZWdpc3RlcmVkIGFueSBlcnJvciBoYW5kbGVycy5cbiAgICAgICAgLy8gSWYgeW91IGFyZSBzZWVpbmcgc3RhY2sgdHJhY2VzIGhlcmUsIG1ha2Ugc3VyZSB0byBoYW5kbGUgZXJyb3JzIHZpYSBlaXRoZXI6XG4gICAgICAgIC8vIC0gcnVubmVyLm9uKCdlcnJvcicsICgpID0+IC4uLilcbiAgICAgICAgLy8gLSBhd2FpdCBydW5uZXIuZG9uZSgpXG4gICAgICAgIC8vIC0gYXdhaXQgcnVubmVyLmZpbmFsLi4uKClcbiAgICAgICAgLy8gLSBldGMuXG4gICAgICAgIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuI3JlamVjdENvbm5lY3RlZFByb21pc2UoZXJyb3IpO1xuICAgICAgdGhpcy4jcmVqZWN0RW5kUHJvbWlzZShlcnJvcik7XG4gICAgICB0aGlzLl9lbWl0KCdlbmQnKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgX2VtaXRGaW5hbCgpIHtcbiAgICBjb25zdCBmaW5hbE1lc3NhZ2UgPSB0aGlzLnJlY2VpdmVkTWVzc2FnZXMuYXQoLTEpO1xuICAgIGlmIChmaW5hbE1lc3NhZ2UpIHtcbiAgICAgIHRoaXMuX2VtaXQoJ2ZpbmFsTWVzc2FnZScsIHRoaXMuI2dldEZpbmFsTWVzc2FnZSgpKTtcbiAgICB9XG4gIH1cblxuICAjYmVnaW5SZXF1ZXN0KCkge1xuICAgIGlmICh0aGlzLmVuZGVkKSByZXR1cm47XG4gICAgdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdCA9IHVuZGVmaW5lZDtcbiAgfVxuICAjYWRkU3RyZWFtRXZlbnQoZXZlbnQ6IEJldGFNZXNzYWdlU3RyZWFtRXZlbnQpIHtcbiAgICBpZiAodGhpcy5lbmRlZCkgcmV0dXJuO1xuICAgIGNvbnN0IG1lc3NhZ2VTbmFwc2hvdCA9IHRoaXMuI2FjY3VtdWxhdGVNZXNzYWdlKGV2ZW50KTtcbiAgICB0aGlzLl9lbWl0KCdzdHJlYW1FdmVudCcsIGV2ZW50LCBtZXNzYWdlU25hcHNob3QpO1xuXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX2RlbHRhJzoge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gbWVzc2FnZVNuYXBzaG90LmNvbnRlbnQuYXQoLTEpITtcbiAgICAgICAgc3dpdGNoIChldmVudC5kZWx0YS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAndGV4dF9kZWx0YSc6IHtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICB0aGlzLl9lbWl0KCd0ZXh0JywgZXZlbnQuZGVsdGEudGV4dCwgY29udGVudC50ZXh0IHx8ICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlICdjaXRhdGlvbnNfZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZW1pdCgnY2l0YXRpb24nLCBldmVudC5kZWx0YS5jaXRhdGlvbiwgY29udGVudC5jaXRhdGlvbnMgPz8gW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgJ2lucHV0X2pzb25fZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAndG9vbF91c2UnICYmIGNvbnRlbnQuaW5wdXQpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZW1pdCgnaW5wdXRKc29uJywgZXZlbnQuZGVsdGEucGFydGlhbF9qc29uLCBjb250ZW50LmlucHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2hlY2tOZXZlcihldmVudC5kZWx0YSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdtZXNzYWdlX3N0b3AnOiB7XG4gICAgICAgIHRoaXMuX2FkZE1lc3NhZ2VQYXJhbShtZXNzYWdlU25hcHNob3QpO1xuICAgICAgICB0aGlzLl9hZGRNZXNzYWdlKG1lc3NhZ2VTbmFwc2hvdCwgdHJ1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19zdG9wJzoge1xuICAgICAgICB0aGlzLl9lbWl0KCdjb250ZW50QmxvY2snLCBtZXNzYWdlU25hcHNob3QuY29udGVudC5hdCgtMSkhKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdtZXNzYWdlX3N0YXJ0Jzoge1xuICAgICAgICB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90ID0gbWVzc2FnZVNuYXBzaG90O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RhcnQnOlxuICAgICAgY2FzZSAnbWVzc2FnZV9kZWx0YSc6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICAjZW5kUmVxdWVzdCgpOiBCZXRhTWVzc2FnZSB7XG4gICAgaWYgKHRoaXMuZW5kZWQpIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgc3RyZWFtIGhhcyBlbmRlZCwgdGhpcyBzaG91bGRuJ3QgaGFwcGVuYCk7XG4gICAgfVxuICAgIGNvbnN0IHNuYXBzaG90ID0gdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdDtcbiAgICBpZiAoIXNuYXBzaG90KSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYHJlcXVlc3QgZW5kZWQgd2l0aG91dCBzZW5kaW5nIGFueSBjaHVua3NgKTtcbiAgICB9XG4gICAgdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gc25hcHNob3Q7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgX2Zyb21SZWFkYWJsZVN0cmVhbShcbiAgICByZWFkYWJsZVN0cmVhbTogUmVhZGFibGVTdHJlYW0sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHNpZ25hbCA9IG9wdGlvbnM/LnNpZ25hbDtcbiAgICBpZiAoc2lnbmFsKSB7XG4gICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT4gdGhpcy5jb250cm9sbGVyLmFib3J0KCkpO1xuICAgIH1cbiAgICB0aGlzLiNiZWdpblJlcXVlc3QoKTtcbiAgICB0aGlzLl9jb25uZWN0ZWQobnVsbCk7XG4gICAgY29uc3Qgc3RyZWFtID0gU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbTxCZXRhTWVzc2FnZVN0cmVhbUV2ZW50PihyZWFkYWJsZVN0cmVhbSwgdGhpcy5jb250cm9sbGVyKTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIHN0cmVhbSkge1xuICAgICAgdGhpcy4jYWRkU3RyZWFtRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICBpZiAoc3RyZWFtLmNvbnRyb2xsZXIuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJVXNlckFib3J0RXJyb3IoKTtcbiAgICB9XG4gICAgdGhpcy4jZW5kUmVxdWVzdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIE11dGF0ZXMgdGhpcy4jY3VycmVudE1lc3NhZ2Ugd2l0aCB0aGUgY3VycmVudCBldmVudC4gSGFuZGxpbmcgdGhlIGFjY3VtdWxhdGlvbiBvZiBtdWx0aXBsZSBtZXNzYWdlc1xuICAgKiB3aWxsIGJlIG5lZWRlZCB0byBiZSBoYW5kbGVkIGJ5IHRoZSBjYWxsZXIsIHRoaXMgbWV0aG9kIHdpbGwgdGhyb3cgaWYgeW91IHRyeSB0byBhY2N1bXVsYXRlIGZvciBtdWx0aXBsZVxuICAgKiBtZXNzYWdlcy5cbiAgICovXG4gICNhY2N1bXVsYXRlTWVzc2FnZShldmVudDogQmV0YU1lc3NhZ2VTdHJlYW1FdmVudCk6IEJldGFNZXNzYWdlIHtcbiAgICBsZXQgc25hcHNob3QgPSB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90O1xuXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdtZXNzYWdlX3N0YXJ0Jykge1xuICAgICAgaWYgKHNuYXBzaG90KSB7XG4gICAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgVW5leHBlY3RlZCBldmVudCBvcmRlciwgZ290ICR7ZXZlbnQudHlwZX0gYmVmb3JlIHJlY2VpdmluZyBcIm1lc3NhZ2Vfc3RvcFwiYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZXZlbnQubWVzc2FnZTtcbiAgICB9XG5cbiAgICBpZiAoIXNuYXBzaG90KSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYFVuZXhwZWN0ZWQgZXZlbnQgb3JkZXIsIGdvdCAke2V2ZW50LnR5cGV9IGJlZm9yZSBcIm1lc3NhZ2Vfc3RhcnRcImApO1xuICAgIH1cblxuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgY2FzZSAnbWVzc2FnZV9zdG9wJzpcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgICAgY2FzZSAnbWVzc2FnZV9kZWx0YSc6XG4gICAgICAgIHNuYXBzaG90LnN0b3BfcmVhc29uID0gZXZlbnQuZGVsdGEuc3RvcF9yZWFzb247XG4gICAgICAgIHNuYXBzaG90LnN0b3Bfc2VxdWVuY2UgPSBldmVudC5kZWx0YS5zdG9wX3NlcXVlbmNlO1xuICAgICAgICBzbmFwc2hvdC51c2FnZS5vdXRwdXRfdG9rZW5zID0gZXZlbnQudXNhZ2Uub3V0cHV0X3Rva2VucztcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19zdGFydCc6XG4gICAgICAgIHNuYXBzaG90LmNvbnRlbnQucHVzaChldmVudC5jb250ZW50X2Jsb2NrKTtcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19kZWx0YSc6IHtcbiAgICAgICAgY29uc3Qgc25hcHNob3RDb250ZW50ID0gc25hcHNob3QuY29udGVudC5hdChldmVudC5pbmRleCk7XG5cbiAgICAgICAgc3dpdGNoIChldmVudC5kZWx0YS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAndGV4dF9kZWx0YSc6IHtcbiAgICAgICAgICAgIGlmIChzbmFwc2hvdENvbnRlbnQ/LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICBzbmFwc2hvdENvbnRlbnQudGV4dCArPSBldmVudC5kZWx0YS50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgJ2NpdGF0aW9uc19kZWx0YSc6IHtcbiAgICAgICAgICAgIGlmIChzbmFwc2hvdENvbnRlbnQ/LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICBzbmFwc2hvdENvbnRlbnQuY2l0YXRpb25zID8/PSBbXTtcbiAgICAgICAgICAgICAgc25hcHNob3RDb250ZW50LmNpdGF0aW9ucy5wdXNoKGV2ZW50LmRlbHRhLmNpdGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlICdpbnB1dF9qc29uX2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKHNuYXBzaG90Q29udGVudD8udHlwZSA9PT0gJ3Rvb2xfdXNlJykge1xuICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGtlZXAgdHJhY2sgb2YgdGhlIHJhdyBKU09OIHN0cmluZyBhcyB3ZWxsIHNvIHRoYXQgd2UgY2FuXG4gICAgICAgICAgICAgIC8vIHJlLXBhcnNlIGl0IGZvciBlYWNoIGRlbHRhLCBmb3Igbm93IHdlIGp1c3Qgc3RvcmUgaXQgYXMgYW4gdW50eXBlZFxuICAgICAgICAgICAgICAvLyBub24tZW51bWVyYWJsZSBwcm9wZXJ0eSBvbiB0aGUgc25hcHNob3RcbiAgICAgICAgICAgICAgbGV0IGpzb25CdWYgPSAoc25hcHNob3RDb250ZW50IGFzIGFueSlbSlNPTl9CVUZfUFJPUEVSVFldIHx8ICcnO1xuICAgICAgICAgICAgICBqc29uQnVmICs9IGV2ZW50LmRlbHRhLnBhcnRpYWxfanNvbjtcblxuICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc25hcHNob3RDb250ZW50LCBKU09OX0JVRl9QUk9QRVJUWSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBqc29uQnVmLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBpZiAoanNvbkJ1Zikge1xuICAgICAgICAgICAgICAgIHNuYXBzaG90Q29udGVudC5pbnB1dCA9IHBhcnRpYWxQYXJzZShqc29uQnVmKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjaGVja05ldmVyKGV2ZW50LmRlbHRhKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgICB9XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX3N0b3AnOlxuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgfVxuICB9XG5cbiAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0l0ZXJhdG9yPEJldGFNZXNzYWdlU3RyZWFtRXZlbnQ+IHtcbiAgICBjb25zdCBwdXNoUXVldWU6IEJldGFNZXNzYWdlU3RyZWFtRXZlbnRbXSA9IFtdO1xuICAgIGNvbnN0IHJlYWRRdWV1ZToge1xuICAgICAgcmVzb2x2ZTogKGNodW5rOiBCZXRhTWVzc2FnZVN0cmVhbUV2ZW50IHwgdW5kZWZpbmVkKSA9PiB2b2lkO1xuICAgICAgcmVqZWN0OiAoZXJyb3I6IHVua25vd24pID0+IHZvaWQ7XG4gICAgfVtdID0gW107XG4gICAgbGV0IGRvbmUgPSBmYWxzZTtcblxuICAgIHRoaXMub24oJ3N0cmVhbUV2ZW50JywgKGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCByZWFkZXIgPSByZWFkUXVldWUuc2hpZnQoKTtcbiAgICAgIGlmIChyZWFkZXIpIHtcbiAgICAgICAgcmVhZGVyLnJlc29sdmUoZXZlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHVzaFF1ZXVlLnB1c2goZXZlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5vbignZW5kJywgKCkgPT4ge1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICBmb3IgKGNvbnN0IHJlYWRlciBvZiByZWFkUXVldWUpIHtcbiAgICAgICAgcmVhZGVyLnJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICAgIHJlYWRRdWV1ZS5sZW5ndGggPSAwO1xuICAgIH0pO1xuXG4gICAgdGhpcy5vbignYWJvcnQnLCAoZXJyKSA9PiB7XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIGZvciAoY29uc3QgcmVhZGVyIG9mIHJlYWRRdWV1ZSkge1xuICAgICAgICByZWFkZXIucmVqZWN0KGVycik7XG4gICAgICB9XG4gICAgICByZWFkUXVldWUubGVuZ3RoID0gMDtcbiAgICB9KTtcblxuICAgIHRoaXMub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICBmb3IgKGNvbnN0IHJlYWRlciBvZiByZWFkUXVldWUpIHtcbiAgICAgICAgcmVhZGVyLnJlamVjdChlcnIpO1xuICAgICAgfVxuICAgICAgcmVhZFF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbmV4dDogYXN5bmMgKCk6IFByb21pc2U8SXRlcmF0b3JSZXN1bHQ8QmV0YU1lc3NhZ2VTdHJlYW1FdmVudD4+ID0+IHtcbiAgICAgICAgaWYgKCFwdXNoUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPEJldGFNZXNzYWdlU3RyZWFtRXZlbnQgfCB1bmRlZmluZWQ+KChyZXNvbHZlLCByZWplY3QpID0+XG4gICAgICAgICAgICByZWFkUXVldWUucHVzaCh7IHJlc29sdmUsIHJlamVjdCB9KSxcbiAgICAgICAgICApLnRoZW4oKGNodW5rKSA9PiAoY2h1bmsgPyB7IHZhbHVlOiBjaHVuaywgZG9uZTogZmFsc2UgfSA6IHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2h1bmsgPSBwdXNoUXVldWUuc2hpZnQoKSE7XG4gICAgICAgIHJldHVybiB7IHZhbHVlOiBjaHVuaywgZG9uZTogZmFsc2UgfTtcbiAgICAgIH0sXG4gICAgICByZXR1cm46IGFzeW5jICgpID0+IHtcbiAgICAgICAgdGhpcy5hYm9ydCgpO1xuICAgICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICB0b1JlYWRhYmxlU3RyZWFtKCk6IFJlYWRhYmxlU3RyZWFtIHtcbiAgICBjb25zdCBzdHJlYW0gPSBuZXcgU3RyZWFtKHRoaXNbU3ltYm9sLmFzeW5jSXRlcmF0b3JdLmJpbmQodGhpcyksIHRoaXMuY29udHJvbGxlcik7XG4gICAgcmV0dXJuIHN0cmVhbS50b1JlYWRhYmxlU3RyZWFtKCk7XG4gIH1cbn1cblxuLy8gdXNlZCB0byBlbnN1cmUgZXhoYXVzdGl2ZSBjYXNlIG1hdGNoaW5nIHdpdGhvdXQgdGhyb3dpbmcgYSBydW50aW1lIGVycm9yXG5mdW5jdGlvbiBjaGVja05ldmVyKHg6IG5ldmVyKSB7fVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSBcIi4uLy4uLy4uL3Jlc291cmNlLmpzXCI7XG5pbXBvcnQgeyBBUElQcm9taXNlIH0gZnJvbSBcIi4uLy4uLy4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4uLy4uLy4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIE1lc3NhZ2VzTWVzc2FnZXNBUEkgZnJvbSBcIi4vbWVzc2FnZXMuanNcIjtcbmltcG9ydCAqIGFzIEJldGFBUEkgZnJvbSBcIi4uL2JldGEuanNcIjtcbmltcG9ydCAqIGFzIE1lc3NhZ2VzQVBJIGZyb20gXCIuLi8uLi9tZXNzYWdlcy9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0ICogYXMgQmF0Y2hlc0FQSSBmcm9tIFwiLi9iYXRjaGVzLmpzXCI7XG5pbXBvcnQge1xuICBCYXRjaENhbmNlbFBhcmFtcyxcbiAgQmF0Y2hDcmVhdGVQYXJhbXMsXG4gIEJhdGNoRGVsZXRlUGFyYW1zLFxuICBCYXRjaExpc3RQYXJhbXMsXG4gIEJhdGNoUmVzdWx0c1BhcmFtcyxcbiAgQmF0Y2hSZXRyaWV2ZVBhcmFtcyxcbiAgQmF0Y2hlcyxcbiAgQmV0YURlbGV0ZWRNZXNzYWdlQmF0Y2gsXG4gIEJldGFNZXNzYWdlQmF0Y2gsXG4gIEJldGFNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCxcbiAgQmV0YU1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQsXG4gIEJldGFNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0LFxuICBCZXRhTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlLFxuICBCZXRhTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyxcbiAgQmV0YU1lc3NhZ2VCYXRjaFJlc3VsdCxcbiAgQmV0YU1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCxcbiAgQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSxcbn0gZnJvbSBcIi4vYmF0Y2hlcy5qc1wiO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSBcIi4uLy4uLy4uL3N0cmVhbWluZy5qc1wiO1xuaW1wb3J0IHsgQmV0YU1lc3NhZ2VTdHJlYW0gfSBmcm9tIFwiLi4vLi4vLi4vbGliL0JldGFNZXNzYWdlU3RyZWFtLmpzXCI7XG5pbXBvcnQgdHlwZSB7IE1vZGVsIH0gZnJvbSBcIi4uLy4uL21lc3NhZ2VzL21lc3NhZ2VzLmpzXCI7XG5cbmNvbnN0IERFUFJFQ0FURURfTU9ERUxTOiB7XG4gIFtLIGluIE1vZGVsXT86IHN0cmluZztcbn0gPSB7XG4gICdjbGF1ZGUtMS4zJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG4gICdjbGF1ZGUtMS4zLTEwMGsnOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS1pbnN0YW50LTEuMSc6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLWluc3RhbnQtMS4xLTEwMGsnOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS1pbnN0YW50LTEuMic6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5JzogJ0p1bHkgMjFzdCwgMjAyNScsXG4gICdjbGF1ZGUtMi4xJzogJ0p1bHkgMjFzdCwgMjAyNScsXG4gICdjbGF1ZGUtMi4wJzogJ0p1bHkgMjFzdCwgMjAyNScsXG59O1xuXG5leHBvcnQgY2xhc3MgTWVzc2FnZXMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIGJhdGNoZXM6IEJhdGNoZXNBUEkuQmF0Y2hlcyA9IG5ldyBCYXRjaGVzQVBJLkJhdGNoZXModGhpcy5fY2xpZW50KTtcblxuICAvKipcbiAgICogU2VuZCBhIHN0cnVjdHVyZWQgbGlzdCBvZiBpbnB1dCBtZXNzYWdlcyB3aXRoIHRleHQgYW5kL29yIGltYWdlIGNvbnRlbnQsIGFuZCB0aGVcbiAgICogbW9kZWwgd2lsbCBnZW5lcmF0ZSB0aGUgbmV4dCBtZXNzYWdlIGluIHRoZSBjb252ZXJzYXRpb24uXG4gICAqXG4gICAqIFRoZSBNZXNzYWdlcyBBUEkgY2FuIGJlIHVzZWQgZm9yIGVpdGhlciBzaW5nbGUgcXVlcmllcyBvciBzdGF0ZWxlc3MgbXVsdGktdHVyblxuICAgKiBjb252ZXJzYXRpb25zLlxuICAgKi9cbiAgY3JlYXRlKHBhcmFtczogTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBBUElQcm9taXNlPEJldGFNZXNzYWdlPjtcbiAgY3JlYXRlKFxuICAgIHBhcmFtczogTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08QmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudD4+O1xuICBjcmVhdGUoXG4gICAgcGFyYW1zOiBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08QmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudD4gfCBCZXRhTWVzc2FnZT47XG4gIGNyZWF0ZShcbiAgICBwYXJhbXM6IE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8QmV0YU1lc3NhZ2U+IHwgQVBJUHJvbWlzZTxTdHJlYW08QmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudD4+IHtcbiAgICBjb25zdCB7IGJldGFzLCAuLi5ib2R5IH0gPSBwYXJhbXM7XG5cbiAgICBpZiAoYm9keS5tb2RlbCBpbiBERVBSRUNBVEVEX01PREVMUykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgVGhlIG1vZGVsICcke2JvZHkubW9kZWx9JyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIHJlYWNoIGVuZC1vZi1saWZlIG9uICR7XG4gICAgICAgICAgREVQUkVDQVRFRF9NT0RFTFNbYm9keS5tb2RlbF1cbiAgICAgICAgfVxcblBsZWFzZSBtaWdyYXRlIHRvIGEgbmV3ZXIgbW9kZWwuIFZpc2l0IGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvcmVzb3VyY2VzL21vZGVsLWRlcHJlY2F0aW9ucyBmb3IgbW9yZSBpbmZvcm1hdGlvbi5gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoJy92MS9tZXNzYWdlcz9iZXRhPXRydWUnLCB7XG4gICAgICBib2R5LFxuICAgICAgdGltZW91dDogKHRoaXMuX2NsaWVudCBhcyBhbnkpLl9vcHRpb25zLnRpbWVvdXQgPz8gNjAwMDAwLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgLi4uKGJldGFzPy50b1N0cmluZygpICE9IG51bGwgPyB7ICdhbnRocm9waWMtYmV0YSc6IGJldGFzPy50b1N0cmluZygpIH0gOiB1bmRlZmluZWQpLFxuICAgICAgICAuLi5vcHRpb25zPy5oZWFkZXJzLFxuICAgICAgfSxcbiAgICAgIHN0cmVhbTogcGFyYW1zLnN0cmVhbSA/PyBmYWxzZSxcbiAgICB9KSBhcyBBUElQcm9taXNlPEJldGFNZXNzYWdlPiB8IEFQSVByb21pc2U8U3RyZWFtPEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQ+PjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBNZXNzYWdlIHN0cmVhbVxuICAgKi9cbiAgc3RyZWFtKGJvZHk6IEJldGFNZXNzYWdlU3RyZWFtUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IEJldGFNZXNzYWdlU3RyZWFtIHtcbiAgICByZXR1cm4gQmV0YU1lc3NhZ2VTdHJlYW0uY3JlYXRlTWVzc2FnZSh0aGlzLCBib2R5LCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb3VudCB0aGUgbnVtYmVyIG9mIHRva2VucyBpbiBhIE1lc3NhZ2UuXG4gICAqXG4gICAqIFRoZSBUb2tlbiBDb3VudCBBUEkgY2FuIGJlIHVzZWQgdG8gY291bnQgdGhlIG51bWJlciBvZiB0b2tlbnMgaW4gYSBNZXNzYWdlLFxuICAgKiBpbmNsdWRpbmcgdG9vbHMsIGltYWdlcywgYW5kIGRvY3VtZW50cywgd2l0aG91dCBjcmVhdGluZyBpdC5cbiAgICovXG4gIGNvdW50VG9rZW5zKFxuICAgIHBhcmFtczogTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8QmV0YU1lc3NhZ2VUb2tlbnNDb3VudD4ge1xuICAgIGNvbnN0IHsgYmV0YXMsIC4uLmJvZHkgfSA9IHBhcmFtcztcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoJy92MS9tZXNzYWdlcy9jb3VudF90b2tlbnM/YmV0YT10cnVlJywge1xuICAgICAgYm9keSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhbnRocm9waWMtYmV0YSc6IFsuLi4oYmV0YXMgPz8gW10pLCAndG9rZW4tY291bnRpbmctMjAyNC0xMS0wMSddLnRvU3RyaW5nKCksXG4gICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIEJldGFNZXNzYWdlU3RyZWFtUGFyYW1zID0gTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2U7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUJhc2U2NFBERkJsb2NrIHtcbiAgc291cmNlOiBCZXRhQmFzZTY0UERGU291cmNlIHwgQmV0YVBsYWluVGV4dFNvdXJjZSB8IEJldGFDb250ZW50QmxvY2tTb3VyY2U7XG5cbiAgdHlwZTogJ2RvY3VtZW50JztcblxuICBjYWNoZV9jb250cm9sPzogQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG5cbiAgY2l0YXRpb25zPzogQmV0YUNpdGF0aW9uc0NvbmZpZ1BhcmFtO1xuXG4gIGNvbnRleHQ/OiBzdHJpbmcgfCBudWxsO1xuXG4gIHRpdGxlPzogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQmFzZTY0UERGU291cmNlIHtcbiAgZGF0YTogc3RyaW5nO1xuXG4gIG1lZGlhX3R5cGU6ICdhcHBsaWNhdGlvbi9wZGYnO1xuXG4gIHR5cGU6ICdiYXNlNjQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwge1xuICB0eXBlOiAnZXBoZW1lcmFsJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb24ge1xuICBjaXRlZF90ZXh0OiBzdHJpbmc7XG5cbiAgZG9jdW1lbnRfaW5kZXg6IG51bWJlcjtcblxuICBkb2N1bWVudF90aXRsZTogc3RyaW5nIHwgbnVsbDtcblxuICBlbmRfY2hhcl9pbmRleDogbnVtYmVyO1xuXG4gIHN0YXJ0X2NoYXJfaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY2hhcl9sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0ge1xuICBjaXRlZF90ZXh0OiBzdHJpbmc7XG5cbiAgZG9jdW1lbnRfaW5kZXg6IG51bWJlcjtcblxuICBkb2N1bWVudF90aXRsZTogc3RyaW5nIHwgbnVsbDtcblxuICBlbmRfY2hhcl9pbmRleDogbnVtYmVyO1xuXG4gIHN0YXJ0X2NoYXJfaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY2hhcl9sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24ge1xuICBjaXRlZF90ZXh0OiBzdHJpbmc7XG5cbiAgZG9jdW1lbnRfaW5kZXg6IG51bWJlcjtcblxuICBkb2N1bWVudF90aXRsZTogc3RyaW5nIHwgbnVsbDtcblxuICBlbmRfYmxvY2tfaW5kZXg6IG51bWJlcjtcblxuICBzdGFydF9ibG9ja19pbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX2xvY2F0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX2Jsb2NrX2luZGV4OiBudW1iZXI7XG5cbiAgc3RhcnRfYmxvY2tfaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX3BhZ2VfbnVtYmVyOiBudW1iZXI7XG5cbiAgc3RhcnRfcGFnZV9udW1iZXI6IG51bWJlcjtcblxuICB0eXBlOiAncGFnZV9sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0ge1xuICBjaXRlZF90ZXh0OiBzdHJpbmc7XG5cbiAgZG9jdW1lbnRfaW5kZXg6IG51bWJlcjtcblxuICBkb2N1bWVudF90aXRsZTogc3RyaW5nIHwgbnVsbDtcblxuICBlbmRfcGFnZV9udW1iZXI6IG51bWJlcjtcblxuICBzdGFydF9wYWdlX251bWJlcjogbnVtYmVyO1xuXG4gIHR5cGU6ICdwYWdlX2xvY2F0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQ2l0YXRpb25zQ29uZmlnUGFyYW0ge1xuICBlbmFibGVkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQ2l0YXRpb25zRGVsdGEge1xuICBjaXRhdGlvbjogQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uIHwgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uIHwgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb247XG5cbiAgdHlwZTogJ2NpdGF0aW9uc19kZWx0YSc7XG59XG5cbmV4cG9ydCB0eXBlIEJldGFDb250ZW50QmxvY2sgPSBCZXRhVGV4dEJsb2NrIHwgQmV0YVRvb2xVc2VCbG9jaztcblxuZXhwb3J0IHR5cGUgQmV0YUNvbnRlbnRCbG9ja1BhcmFtID1cbiAgfCBCZXRhVGV4dEJsb2NrUGFyYW1cbiAgfCBCZXRhSW1hZ2VCbG9ja1BhcmFtXG4gIHwgQmV0YVRvb2xVc2VCbG9ja1BhcmFtXG4gIHwgQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtXG4gIHwgQmV0YUJhc2U2NFBERkJsb2NrO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFDb250ZW50QmxvY2tTb3VyY2Uge1xuICBjb250ZW50OiBzdHJpbmcgfCBBcnJheTxCZXRhQ29udGVudEJsb2NrU291cmNlQ29udGVudD47XG5cbiAgdHlwZTogJ2NvbnRlbnQnO1xufVxuXG5leHBvcnQgdHlwZSBCZXRhQ29udGVudEJsb2NrU291cmNlQ29udGVudCA9IEJldGFUZXh0QmxvY2tQYXJhbSB8IEJldGFJbWFnZUJsb2NrUGFyYW07XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUltYWdlQmxvY2tQYXJhbSB7XG4gIHNvdXJjZTogQmV0YUltYWdlQmxvY2tQYXJhbS5Tb3VyY2U7XG5cbiAgdHlwZTogJ2ltYWdlJztcblxuICBjYWNoZV9jb250cm9sPzogQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQmV0YUltYWdlQmxvY2tQYXJhbSB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgU291cmNlIHtcbiAgICBkYXRhOiBzdHJpbmc7XG5cbiAgICBtZWRpYV90eXBlOiAnaW1hZ2UvanBlZycgfCAnaW1hZ2UvcG5nJyB8ICdpbWFnZS9naWYnIHwgJ2ltYWdlL3dlYnAnO1xuXG4gICAgdHlwZTogJ2Jhc2U2NCc7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhSW5wdXRKU09ORGVsdGEge1xuICBwYXJ0aWFsX2pzb246IHN0cmluZztcblxuICB0eXBlOiAnaW5wdXRfanNvbl9kZWx0YSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2Uge1xuICAvKipcbiAgICogVW5pcXVlIG9iamVjdCBpZGVudGlmaWVyLlxuICAgKlxuICAgKiBUaGUgZm9ybWF0IGFuZCBsZW5ndGggb2YgSURzIG1heSBjaGFuZ2Ugb3ZlciB0aW1lLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogQ29udGVudCBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsLlxuICAgKlxuICAgKiBUaGlzIGlzIGFuIGFycmF5IG9mIGNvbnRlbnQgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGhhcyBhIGB0eXBlYCB0aGF0IGRldGVybWluZXNcbiAgICogaXRzIHNoYXBlLlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiSGksIEknbSBDbGF1ZGUuXCIgfV1cbiAgICogYGBgXG4gICAqXG4gICAqIElmIHRoZSByZXF1ZXN0IGlucHV0IGBtZXNzYWdlc2AgZW5kZWQgd2l0aCBhbiBgYXNzaXN0YW50YCB0dXJuLCB0aGVuIHRoZVxuICAgKiByZXNwb25zZSBgY29udGVudGAgd2lsbCBjb250aW51ZSBkaXJlY3RseSBmcm9tIHRoYXQgbGFzdCB0dXJuLiBZb3UgY2FuIHVzZSB0aGlzXG4gICAqIHRvIGNvbnN0cmFpbiB0aGUgbW9kZWwncyBvdXRwdXQuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBpZiB0aGUgaW5wdXQgYG1lc3NhZ2VzYCB3ZXJlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCJXaGF0J3MgdGhlIEdyZWVrIG5hbWUgZm9yIFN1bj8gKEEpIFNvbCAoQikgSGVsaW9zIChDKSBTdW5cIlxuICAgKiAgIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiVGhlIGJlc3QgYW5zd2VyIGlzIChcIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFRoZW4gdGhlIHJlc3BvbnNlIGBjb250ZW50YCBtaWdodCBiZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIkIpXCIgfV1cbiAgICogYGBgXG4gICAqL1xuICBjb250ZW50OiBBcnJheTxCZXRhQ29udGVudEJsb2NrPjtcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gICAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gICAqL1xuICBtb2RlbDogTWVzc2FnZXNBUEkuTW9kZWw7XG5cbiAgLyoqXG4gICAqIENvbnZlcnNhdGlvbmFsIHJvbGUgb2YgdGhlIGdlbmVyYXRlZCBtZXNzYWdlLlxuICAgKlxuICAgKiBUaGlzIHdpbGwgYWx3YXlzIGJlIGBcImFzc2lzdGFudFwiYC5cbiAgICovXG4gIHJvbGU6ICdhc3Npc3RhbnQnO1xuXG4gIC8qKlxuICAgKiBUaGUgcmVhc29uIHRoYXQgd2Ugc3RvcHBlZC5cbiAgICpcbiAgICogVGhpcyBtYXkgYmUgb25lIHRoZSBmb2xsb3dpbmcgdmFsdWVzOlxuICAgKlxuICAgKiAtIGBcImVuZF90dXJuXCJgOiB0aGUgbW9kZWwgcmVhY2hlZCBhIG5hdHVyYWwgc3RvcHBpbmcgcG9pbnRcbiAgICogLSBgXCJtYXhfdG9rZW5zXCJgOiB3ZSBleGNlZWRlZCB0aGUgcmVxdWVzdGVkIGBtYXhfdG9rZW5zYCBvciB0aGUgbW9kZWwncyBtYXhpbXVtXG4gICAqIC0gYFwic3RvcF9zZXF1ZW5jZVwiYDogb25lIG9mIHlvdXIgcHJvdmlkZWQgY3VzdG9tIGBzdG9wX3NlcXVlbmNlc2Agd2FzIGdlbmVyYXRlZFxuICAgKiAtIGBcInRvb2xfdXNlXCJgOiB0aGUgbW9kZWwgaW52b2tlZCBvbmUgb3IgbW9yZSB0b29sc1xuICAgKlxuICAgKiBJbiBub24tc3RyZWFtaW5nIG1vZGUgdGhpcyB2YWx1ZSBpcyBhbHdheXMgbm9uLW51bGwuIEluIHN0cmVhbWluZyBtb2RlLCBpdCBpc1xuICAgKiBudWxsIGluIHRoZSBgbWVzc2FnZV9zdGFydGAgZXZlbnQgYW5kIG5vbi1udWxsIG90aGVyd2lzZS5cbiAgICovXG4gIHN0b3BfcmVhc29uOiAnZW5kX3R1cm4nIHwgJ21heF90b2tlbnMnIHwgJ3N0b3Bfc2VxdWVuY2UnIHwgJ3Rvb2xfdXNlJyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFdoaWNoIGN1c3RvbSBzdG9wIHNlcXVlbmNlIHdhcyBnZW5lcmF0ZWQsIGlmIGFueS5cbiAgICpcbiAgICogVGhpcyB2YWx1ZSB3aWxsIGJlIGEgbm9uLW51bGwgc3RyaW5nIGlmIG9uZSBvZiB5b3VyIGN1c3RvbSBzdG9wIHNlcXVlbmNlcyB3YXNcbiAgICogZ2VuZXJhdGVkLlxuICAgKi9cbiAgc3RvcF9zZXF1ZW5jZTogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogT2JqZWN0IHR5cGUuXG4gICAqXG4gICAqIEZvciBNZXNzYWdlcywgdGhpcyBpcyBhbHdheXMgYFwibWVzc2FnZVwiYC5cbiAgICovXG4gIHR5cGU6ICdtZXNzYWdlJztcblxuICAvKipcbiAgICogQmlsbGluZyBhbmQgcmF0ZS1saW1pdCB1c2FnZS5cbiAgICpcbiAgICogQW50aHJvcGljJ3MgQVBJIGJpbGxzIGFuZCByYXRlLWxpbWl0cyBieSB0b2tlbiBjb3VudHMsIGFzIHRva2VucyByZXByZXNlbnQgdGhlXG4gICAqIHVuZGVybHlpbmcgY29zdCB0byBvdXIgc3lzdGVtcy5cbiAgICpcbiAgICogVW5kZXIgdGhlIGhvb2QsIHRoZSBBUEkgdHJhbnNmb3JtcyByZXF1ZXN0cyBpbnRvIGEgZm9ybWF0IHN1aXRhYmxlIGZvciB0aGVcbiAgICogbW9kZWwuIFRoZSBtb2RlbCdzIG91dHB1dCB0aGVuIGdvZXMgdGhyb3VnaCBhIHBhcnNpbmcgc3RhZ2UgYmVmb3JlIGJlY29taW5nIGFuXG4gICAqIEFQSSByZXNwb25zZS4gQXMgYSByZXN1bHQsIHRoZSB0b2tlbiBjb3VudHMgaW4gYHVzYWdlYCB3aWxsIG5vdCBtYXRjaCBvbmUtdG8tb25lXG4gICAqIHdpdGggdGhlIGV4YWN0IHZpc2libGUgY29udGVudCBvZiBhbiBBUEkgcmVxdWVzdCBvciByZXNwb25zZS5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGBvdXRwdXRfdG9rZW5zYCB3aWxsIGJlIG5vbi16ZXJvLCBldmVuIGZvciBhbiBlbXB0eSBzdHJpbmcgcmVzcG9uc2VcbiAgICogZnJvbSBDbGF1ZGUuXG4gICAqL1xuICB1c2FnZTogQmV0YVVzYWdlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlRGVsdGFVc2FnZSB7XG4gIC8qKlxuICAgKiBUaGUgY3VtdWxhdGl2ZSBudW1iZXIgb2Ygb3V0cHV0IHRva2VucyB3aGljaCB3ZXJlIHVzZWQuXG4gICAqL1xuICBvdXRwdXRfdG9rZW5zOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VQYXJhbSB7XG4gIGNvbnRlbnQ6IHN0cmluZyB8IEFycmF5PEJldGFDb250ZW50QmxvY2tQYXJhbT47XG5cbiAgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VUb2tlbnNDb3VudCB7XG4gIC8qKlxuICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIHRva2VucyBhY3Jvc3MgdGhlIHByb3ZpZGVkIGxpc3Qgb2YgbWVzc2FnZXMsIHN5c3RlbSBwcm9tcHQsXG4gICAqIGFuZCB0b29scy5cbiAgICovXG4gIGlucHV0X3Rva2VuczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXRhZGF0YSB7XG4gIC8qKlxuICAgKiBBbiBleHRlcm5hbCBpZGVudGlmaWVyIGZvciB0aGUgdXNlciB3aG8gaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSByZXF1ZXN0LlxuICAgKlxuICAgKiBUaGlzIHNob3VsZCBiZSBhIHV1aWQsIGhhc2ggdmFsdWUsIG9yIG90aGVyIG9wYXF1ZSBpZGVudGlmaWVyLiBBbnRocm9waWMgbWF5IHVzZVxuICAgKiB0aGlzIGlkIHRvIGhlbHAgZGV0ZWN0IGFidXNlLiBEbyBub3QgaW5jbHVkZSBhbnkgaWRlbnRpZnlpbmcgaW5mb3JtYXRpb24gc3VjaCBhc1xuICAgKiBuYW1lLCBlbWFpbCBhZGRyZXNzLCBvciBwaG9uZSBudW1iZXIuXG4gICAqL1xuICB1c2VyX2lkPzogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUGxhaW5UZXh0U291cmNlIHtcbiAgZGF0YTogc3RyaW5nO1xuXG4gIG1lZGlhX3R5cGU6ICd0ZXh0L3BsYWluJztcblxuICB0eXBlOiAndGV4dCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQge1xuICBkZWx0YTogQmV0YVRleHREZWx0YSB8IEJldGFJbnB1dEpTT05EZWx0YSB8IEJldGFDaXRhdGlvbnNEZWx0YTtcblxuICBpbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX2RlbHRhJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCB7XG4gIGNvbnRlbnRfYmxvY2s6IEJldGFUZXh0QmxvY2sgfCBCZXRhVG9vbFVzZUJsb2NrO1xuXG4gIGluZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NvbnRlbnRfYmxvY2tfc3RhcnQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQge1xuICBpbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX3N0b3AnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudCB7XG4gIGRlbHRhOiBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnQuRGVsdGE7XG5cbiAgdHlwZTogJ21lc3NhZ2VfZGVsdGEnO1xuXG4gIC8qKlxuICAgKiBCaWxsaW5nIGFuZCByYXRlLWxpbWl0IHVzYWdlLlxuICAgKlxuICAgKiBBbnRocm9waWMncyBBUEkgYmlsbHMgYW5kIHJhdGUtbGltaXRzIGJ5IHRva2VuIGNvdW50cywgYXMgdG9rZW5zIHJlcHJlc2VudCB0aGVcbiAgICogdW5kZXJseWluZyBjb3N0IHRvIG91ciBzeXN0ZW1zLlxuICAgKlxuICAgKiBVbmRlciB0aGUgaG9vZCwgdGhlIEFQSSB0cmFuc2Zvcm1zIHJlcXVlc3RzIGludG8gYSBmb3JtYXQgc3VpdGFibGUgZm9yIHRoZVxuICAgKiBtb2RlbC4gVGhlIG1vZGVsJ3Mgb3V0cHV0IHRoZW4gZ29lcyB0aHJvdWdoIGEgcGFyc2luZyBzdGFnZSBiZWZvcmUgYmVjb21pbmcgYW5cbiAgICogQVBJIHJlc3BvbnNlLiBBcyBhIHJlc3VsdCwgdGhlIHRva2VuIGNvdW50cyBpbiBgdXNhZ2VgIHdpbGwgbm90IG1hdGNoIG9uZS10by1vbmVcbiAgICogd2l0aCB0aGUgZXhhY3QgdmlzaWJsZSBjb250ZW50IG9mIGFuIEFQSSByZXF1ZXN0IG9yIHJlc3BvbnNlLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgYG91dHB1dF90b2tlbnNgIHdpbGwgYmUgbm9uLXplcm8sIGV2ZW4gZm9yIGFuIGVtcHR5IHN0cmluZyByZXNwb25zZVxuICAgKiBmcm9tIENsYXVkZS5cbiAgICovXG4gIHVzYWdlOiBCZXRhTWVzc2FnZURlbHRhVXNhZ2U7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQmV0YVJhd01lc3NhZ2VEZWx0YUV2ZW50IHtcbiAgZXhwb3J0IGludGVyZmFjZSBEZWx0YSB7XG4gICAgc3RvcF9yZWFzb246ICdlbmRfdHVybicgfCAnbWF4X3Rva2VucycgfCAnc3RvcF9zZXF1ZW5jZScgfCAndG9vbF91c2UnIHwgbnVsbDtcblxuICAgIHN0b3Bfc2VxdWVuY2U6IHN0cmluZyB8IG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUmF3TWVzc2FnZVN0YXJ0RXZlbnQge1xuICBtZXNzYWdlOiBCZXRhTWVzc2FnZTtcblxuICB0eXBlOiAnbWVzc2FnZV9zdGFydCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVJhd01lc3NhZ2VTdG9wRXZlbnQge1xuICB0eXBlOiAnbWVzc2FnZV9zdG9wJztcbn1cblxuZXhwb3J0IHR5cGUgQmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudCA9XG4gIHwgQmV0YVJhd01lc3NhZ2VTdGFydEV2ZW50XG4gIHwgQmV0YVJhd01lc3NhZ2VEZWx0YUV2ZW50XG4gIHwgQmV0YVJhd01lc3NhZ2VTdG9wRXZlbnRcbiAgfCBCZXRhUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudFxuICB8IEJldGFSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50XG4gIHwgQmV0YVJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudDtcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVGV4dEJsb2NrIHtcbiAgLyoqXG4gICAqIENpdGF0aW9ucyBzdXBwb3J0aW5nIHRoZSB0ZXh0IGJsb2NrLlxuICAgKlxuICAgKiBUaGUgdHlwZSBvZiBjaXRhdGlvbiByZXR1cm5lZCB3aWxsIGRlcGVuZCBvbiB0aGUgdHlwZSBvZiBkb2N1bWVudCBiZWluZyBjaXRlZC5cbiAgICogQ2l0aW5nIGEgUERGIHJlc3VsdHMgaW4gYHBhZ2VfbG9jYXRpb25gLCBwbGFpbiB0ZXh0IHJlc3VsdHMgaW4gYGNoYXJfbG9jYXRpb25gLFxuICAgKiBhbmQgY29udGVudCBkb2N1bWVudCByZXN1bHRzIGluIGBjb250ZW50X2Jsb2NrX2xvY2F0aW9uYC5cbiAgICovXG4gIGNpdGF0aW9uczogQXJyYXk8QmV0YVRleHRDaXRhdGlvbj4gfCBudWxsO1xuXG4gIHRleHQ6IHN0cmluZztcblxuICB0eXBlOiAndGV4dCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRleHRCbG9ja1BhcmFtIHtcbiAgdGV4dDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0ZXh0JztcblxuICBjYWNoZV9jb250cm9sPzogQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG5cbiAgY2l0YXRpb25zPzogQXJyYXk8QmV0YVRleHRDaXRhdGlvblBhcmFtPiB8IG51bGw7XG59XG5cbmV4cG9ydCB0eXBlIEJldGFUZXh0Q2l0YXRpb24gPVxuICB8IEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvblxuICB8IEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvblxuICB8IEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uO1xuXG5leHBvcnQgdHlwZSBCZXRhVGV4dENpdGF0aW9uUGFyYW0gPVxuICB8IEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtXG4gIHwgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW1cbiAgfCBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUZXh0RGVsdGEge1xuICB0ZXh0OiBzdHJpbmc7XG5cbiAgdHlwZTogJ3RleHRfZGVsdGEnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sIHtcbiAgLyoqXG4gICAqIFtKU09OIHNjaGVtYV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvKSBmb3IgdGhpcyB0b29sJ3MgaW5wdXQuXG4gICAqXG4gICAqIFRoaXMgZGVmaW5lcyB0aGUgc2hhcGUgb2YgdGhlIGBpbnB1dGAgdGhhdCB5b3VyIHRvb2wgYWNjZXB0cyBhbmQgdGhhdCB0aGUgbW9kZWxcbiAgICogd2lsbCBwcm9kdWNlLlxuICAgKi9cbiAgaW5wdXRfc2NoZW1hOiBCZXRhVG9vbC5JbnB1dFNjaGVtYTtcblxuICAvKipcbiAgICogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICpcbiAgICogVGhpcyBpcyBob3cgdGhlIHRvb2wgd2lsbCBiZSBjYWxsZWQgYnkgdGhlIG1vZGVsIGFuZCBpbiB0b29sX3VzZSBibG9ja3MuXG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBEZXNjcmlwdGlvbiBvZiB3aGF0IHRoaXMgdG9vbCBkb2VzLlxuICAgKlxuICAgKiBUb29sIGRlc2NyaXB0aW9ucyBzaG91bGQgYmUgYXMgZGV0YWlsZWQgYXMgcG9zc2libGUuIFRoZSBtb3JlIGluZm9ybWF0aW9uIHRoYXRcbiAgICogdGhlIG1vZGVsIGhhcyBhYm91dCB3aGF0IHRoZSB0b29sIGlzIGFuZCBob3cgdG8gdXNlIGl0LCB0aGUgYmV0dGVyIGl0IHdpbGxcbiAgICogcGVyZm9ybS4gWW91IGNhbiB1c2UgbmF0dXJhbCBsYW5ndWFnZSBkZXNjcmlwdGlvbnMgdG8gcmVpbmZvcmNlIGltcG9ydGFudFxuICAgKiBhc3BlY3RzIG9mIHRoZSB0b29sIGlucHV0IEpTT04gc2NoZW1hLlxuICAgKi9cbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG5cbiAgdHlwZT86ICdjdXN0b20nIHwgbnVsbDtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBCZXRhVG9vbCB7XG4gIC8qKlxuICAgKiBbSlNPTiBzY2hlbWFdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnLykgZm9yIHRoaXMgdG9vbCdzIGlucHV0LlxuICAgKlxuICAgKiBUaGlzIGRlZmluZXMgdGhlIHNoYXBlIG9mIHRoZSBgaW5wdXRgIHRoYXQgeW91ciB0b29sIGFjY2VwdHMgYW5kIHRoYXQgdGhlIG1vZGVsXG4gICAqIHdpbGwgcHJvZHVjZS5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgSW5wdXRTY2hlbWEge1xuICAgIHR5cGU6ICdvYmplY3QnO1xuXG4gICAgcHJvcGVydGllcz86IHVua25vd24gfCBudWxsO1xuICAgIFtrOiBzdHJpbmddOiB1bmtub3duO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2xCYXNoMjAyNDEwMjIge1xuICAvKipcbiAgICogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICpcbiAgICogVGhpcyBpcyBob3cgdGhlIHRvb2wgd2lsbCBiZSBjYWxsZWQgYnkgdGhlIG1vZGVsIGFuZCBpbiB0b29sX3VzZSBibG9ja3MuXG4gICAqL1xuICBuYW1lOiAnYmFzaCc7XG5cbiAgdHlwZTogJ2Jhc2hfMjAyNDEwMjInO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcbn1cblxuLyoqXG4gKiBIb3cgdGhlIG1vZGVsIHNob3VsZCB1c2UgdGhlIHByb3ZpZGVkIHRvb2xzLiBUaGUgbW9kZWwgY2FuIHVzZSBhIHNwZWNpZmljIHRvb2wsXG4gKiBhbnkgYXZhaWxhYmxlIHRvb2wsIG9yIGRlY2lkZSBieSBpdHNlbGYuXG4gKi9cbmV4cG9ydCB0eXBlIEJldGFUb29sQ2hvaWNlID0gQmV0YVRvb2xDaG9pY2VBdXRvIHwgQmV0YVRvb2xDaG9pY2VBbnkgfCBCZXRhVG9vbENob2ljZVRvb2w7XG5cbi8qKlxuICogVGhlIG1vZGVsIHdpbGwgdXNlIGFueSBhdmFpbGFibGUgdG9vbHMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2xDaG9pY2VBbnkge1xuICB0eXBlOiAnYW55JztcblxuICAvKipcbiAgICogV2hldGhlciB0byBkaXNhYmxlIHBhcmFsbGVsIHRvb2wgdXNlLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgZmFsc2VgLiBJZiBzZXQgdG8gYHRydWVgLCB0aGUgbW9kZWwgd2lsbCBvdXRwdXQgZXhhY3RseSBvbmUgdG9vbFxuICAgKiB1c2UuXG4gICAqL1xuICBkaXNhYmxlX3BhcmFsbGVsX3Rvb2xfdXNlPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBUaGUgbW9kZWwgd2lsbCBhdXRvbWF0aWNhbGx5IGRlY2lkZSB3aGV0aGVyIHRvIHVzZSB0b29scy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbENob2ljZUF1dG8ge1xuICB0eXBlOiAnYXV0byc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZGlzYWJsZSBwYXJhbGxlbCB0b29sIHVzZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC4gSWYgc2V0IHRvIGB0cnVlYCwgdGhlIG1vZGVsIHdpbGwgb3V0cHV0IGF0IG1vc3Qgb25lIHRvb2xcbiAgICogdXNlLlxuICAgKi9cbiAgZGlzYWJsZV9wYXJhbGxlbF90b29sX3VzZT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVGhlIG1vZGVsIHdpbGwgdXNlIHRoZSBzcGVjaWZpZWQgdG9vbCB3aXRoIGB0b29sX2Nob2ljZS5uYW1lYC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbENob2ljZVRvb2wge1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIHRvb2wgdG8gdXNlLlxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuXG4gIHR5cGU6ICd0b29sJztcblxuICAvKipcbiAgICogV2hldGhlciB0byBkaXNhYmxlIHBhcmFsbGVsIHRvb2wgdXNlLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgZmFsc2VgLiBJZiBzZXQgdG8gYHRydWVgLCB0aGUgbW9kZWwgd2lsbCBvdXRwdXQgZXhhY3RseSBvbmUgdG9vbFxuICAgKiB1c2UuXG4gICAqL1xuICBkaXNhYmxlX3BhcmFsbGVsX3Rvb2xfdXNlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbENvbXB1dGVyVXNlMjAyNDEwMjIge1xuICAvKipcbiAgICogVGhlIGhlaWdodCBvZiB0aGUgZGlzcGxheSBpbiBwaXhlbHMuXG4gICAqL1xuICBkaXNwbGF5X2hlaWdodF9weDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgd2lkdGggb2YgdGhlIGRpc3BsYXkgaW4gcGl4ZWxzLlxuICAgKi9cbiAgZGlzcGxheV93aWR0aF9weDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKlxuICAgKiBUaGlzIGlzIGhvdyB0aGUgdG9vbCB3aWxsIGJlIGNhbGxlZCBieSB0aGUgbW9kZWwgYW5kIGluIHRvb2xfdXNlIGJsb2Nrcy5cbiAgICovXG4gIG5hbWU6ICdjb21wdXRlcic7XG5cbiAgdHlwZTogJ2NvbXB1dGVyXzIwMjQxMDIyJztcblxuICBjYWNoZV9jb250cm9sPzogQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBYMTEgZGlzcGxheSBudW1iZXIgKGUuZy4gMCwgMSkgZm9yIHRoZSBkaXNwbGF5LlxuICAgKi9cbiAgZGlzcGxheV9udW1iZXI/OiBudW1iZXIgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sUmVzdWx0QmxvY2tQYXJhbSB7XG4gIHRvb2xfdXNlX2lkOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3Rvb2xfcmVzdWx0JztcblxuICBjYWNoZV9jb250cm9sPzogQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG5cbiAgY29udGVudD86IHN0cmluZyB8IEFycmF5PEJldGFUZXh0QmxvY2tQYXJhbSB8IEJldGFJbWFnZUJsb2NrUGFyYW0+O1xuXG4gIGlzX2Vycm9yPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbFRleHRFZGl0b3IyMDI0MTAyMiB7XG4gIC8qKlxuICAgKiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKlxuICAgKiBUaGlzIGlzIGhvdyB0aGUgdG9vbCB3aWxsIGJlIGNhbGxlZCBieSB0aGUgbW9kZWwgYW5kIGluIHRvb2xfdXNlIGJsb2Nrcy5cbiAgICovXG4gIG5hbWU6ICdzdHJfcmVwbGFjZV9lZGl0b3InO1xuXG4gIHR5cGU6ICd0ZXh0X2VkaXRvcl8yMDI0MTAyMic7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xufVxuXG5leHBvcnQgdHlwZSBCZXRhVG9vbFVuaW9uID1cbiAgfCBCZXRhVG9vbFxuICB8IEJldGFUb29sQ29tcHV0ZXJVc2UyMDI0MTAyMlxuICB8IEJldGFUb29sQmFzaDIwMjQxMDIyXG4gIHwgQmV0YVRvb2xUZXh0RWRpdG9yMjAyNDEwMjI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2xVc2VCbG9jayB7XG4gIGlkOiBzdHJpbmc7XG5cbiAgaW5wdXQ6IHVua25vd247XG5cbiAgbmFtZTogc3RyaW5nO1xuXG4gIHR5cGU6ICd0b29sX3VzZSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2xVc2VCbG9ja1BhcmFtIHtcbiAgaWQ6IHN0cmluZztcblxuICBpbnB1dDogdW5rbm93bjtcblxuICBuYW1lOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3Rvb2xfdXNlJztcblxuICBjYWNoZV9jb250cm9sPzogQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVVzYWdlIHtcbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHVzZWQgdG8gY3JlYXRlIHRoZSBjYWNoZSBlbnRyeS5cbiAgICovXG4gIGNhY2hlX2NyZWF0aW9uX2lucHV0X3Rva2VuczogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgcmVhZCBmcm9tIHRoZSBjYWNoZS5cbiAgICovXG4gIGNhY2hlX3JlYWRfaW5wdXRfdG9rZW5zOiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyB3aGljaCB3ZXJlIHVzZWQuXG4gICAqL1xuICBpbnB1dF90b2tlbnM6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBvdXRwdXQgdG9rZW5zIHdoaWNoIHdlcmUgdXNlZC5cbiAgICovXG4gIG91dHB1dF90b2tlbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtcyA9IE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgfCBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IFRoZSBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnMgdG8gZ2VuZXJhdGUgYmVmb3JlIHN0b3BwaW5nLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgb3VyIG1vZGVscyBtYXkgc3RvcCBfYmVmb3JlXyByZWFjaGluZyB0aGlzIG1heGltdW0uIFRoaXMgcGFyYW1ldGVyXG4gICAqIG9ubHkgc3BlY2lmaWVzIHRoZSBhYnNvbHV0ZSBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnMgdG8gZ2VuZXJhdGUuXG4gICAqXG4gICAqIERpZmZlcmVudCBtb2RlbHMgaGF2ZSBkaWZmZXJlbnQgbWF4aW11bSB2YWx1ZXMgZm9yIHRoaXMgcGFyYW1ldGVyLiBTZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBkZXRhaWxzLlxuICAgKi9cbiAgbWF4X3Rva2VuczogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBJbnB1dCBtZXNzYWdlcy5cbiAgICpcbiAgICogT3VyIG1vZGVscyBhcmUgdHJhaW5lZCB0byBvcGVyYXRlIG9uIGFsdGVybmF0aW5nIGB1c2VyYCBhbmQgYGFzc2lzdGFudGBcbiAgICogY29udmVyc2F0aW9uYWwgdHVybnMuIFdoZW4gY3JlYXRpbmcgYSBuZXcgYE1lc3NhZ2VgLCB5b3Ugc3BlY2lmeSB0aGUgcHJpb3JcbiAgICogY29udmVyc2F0aW9uYWwgdHVybnMgd2l0aCB0aGUgYG1lc3NhZ2VzYCBwYXJhbWV0ZXIsIGFuZCB0aGUgbW9kZWwgdGhlbiBnZW5lcmF0ZXNcbiAgICogdGhlIG5leHQgYE1lc3NhZ2VgIGluIHRoZSBjb252ZXJzYXRpb24uIENvbnNlY3V0aXZlIGB1c2VyYCBvciBgYXNzaXN0YW50YCB0dXJuc1xuICAgKiBpbiB5b3VyIHJlcXVlc3Qgd2lsbCBiZSBjb21iaW5lZCBpbnRvIGEgc2luZ2xlIHR1cm4uXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBtdXN0IGJlIGFuIG9iamVjdCB3aXRoIGEgYHJvbGVgIGFuZCBgY29udGVudGAuIFlvdSBjYW5cbiAgICogc3BlY2lmeSBhIHNpbmdsZSBgdXNlcmAtcm9sZSBtZXNzYWdlLCBvciB5b3UgY2FuIGluY2x1ZGUgbXVsdGlwbGUgYHVzZXJgIGFuZFxuICAgKiBgYXNzaXN0YW50YCBtZXNzYWdlcy5cbiAgICpcbiAgICogSWYgdGhlIGZpbmFsIG1lc3NhZ2UgdXNlcyB0aGUgYGFzc2lzdGFudGAgcm9sZSwgdGhlIHJlc3BvbnNlIGNvbnRlbnQgd2lsbFxuICAgKiBjb250aW51ZSBpbW1lZGlhdGVseSBmcm9tIHRoZSBjb250ZW50IGluIHRoYXQgbWVzc2FnZS4gVGhpcyBjYW4gYmUgdXNlZCB0b1xuICAgKiBjb25zdHJhaW4gcGFydCBvZiB0aGUgbW9kZWwncyByZXNwb25zZS5cbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIGEgc2luZ2xlIGB1c2VyYCBtZXNzYWdlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1dXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggbXVsdGlwbGUgY29udmVyc2F0aW9uYWwgdHVybnM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbyB0aGVyZS5cIiB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIkhpLCBJJ20gQ2xhdWRlLiBIb3cgY2FuIEkgaGVscCB5b3U/XCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiQ2FuIHlvdSBleHBsYWluIExMTXMgaW4gcGxhaW4gRW5nbGlzaD9cIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHBhcnRpYWxseS1maWxsZWQgcmVzcG9uc2UgZnJvbSBDbGF1ZGU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIldoYXQncyB0aGUgR3JlZWsgbmFtZSBmb3IgU3VuPyAoQSkgU29sIChCKSBIZWxpb3MgKEMpIFN1blwiXG4gICAqICAgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJUaGUgYmVzdCBhbnN3ZXIgaXMgKFwiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogRWFjaCBpbnB1dCBtZXNzYWdlIGBjb250ZW50YCBtYXkgYmUgZWl0aGVyIGEgc2luZ2xlIGBzdHJpbmdgIG9yIGFuIGFycmF5IG9mXG4gICAqIGNvbnRlbnQgYmxvY2tzLCB3aGVyZSBlYWNoIGJsb2NrIGhhcyBhIHNwZWNpZmljIGB0eXBlYC4gVXNpbmcgYSBgc3RyaW5nYCBmb3JcbiAgICogYGNvbnRlbnRgIGlzIHNob3J0aGFuZCBmb3IgYW4gYXJyYXkgb2Ygb25lIGNvbnRlbnQgYmxvY2sgb2YgdHlwZSBgXCJ0ZXh0XCJgLiBUaGVcbiAgICogZm9sbG93aW5nIGlucHV0IG1lc3NhZ2VzIGFyZSBlcXVpdmFsZW50OlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfVxuICAgKiBgYGBcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1dIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFN0YXJ0aW5nIHdpdGggQ2xhdWRlIDMgbW9kZWxzLCB5b3UgY2FuIGFsc28gc2VuZCBpbWFnZSBjb250ZW50IGJsb2NrczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7XG4gICAqICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgIFwiY29udGVudFwiOiBbXG4gICAqICAgICB7XG4gICAqICAgICAgIFwidHlwZVwiOiBcImltYWdlXCIsXG4gICAqICAgICAgIFwic291cmNlXCI6IHtcbiAgICogICAgICAgICBcInR5cGVcIjogXCJiYXNlNjRcIixcbiAgICogICAgICAgICBcIm1lZGlhX3R5cGVcIjogXCJpbWFnZS9qcGVnXCIsXG4gICAqICAgICAgICAgXCJkYXRhXCI6IFwiLzlqLzRBQVFTa1pKUmcuLi5cIlxuICAgKiAgICAgICB9XG4gICAqICAgICB9LFxuICAgKiAgICAgeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIldoYXQgaXMgaW4gdGhpcyBpbWFnZT9cIiB9XG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBXZSBjdXJyZW50bHkgc3VwcG9ydCB0aGUgYGJhc2U2NGAgc291cmNlIHR5cGUgZm9yIGltYWdlcywgYW5kIHRoZSBgaW1hZ2UvanBlZ2AsXG4gICAqIGBpbWFnZS9wbmdgLCBgaW1hZ2UvZ2lmYCwgYW5kIGBpbWFnZS93ZWJwYCBtZWRpYSB0eXBlcy5cbiAgICpcbiAgICogU2VlIFtleGFtcGxlc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLWV4YW1wbGVzI3Zpc2lvbikgZm9yXG4gICAqIG1vcmUgaW5wdXQgZXhhbXBsZXMuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBpZiB5b3Ugd2FudCB0byBpbmNsdWRlIGFcbiAgICogW3N5c3RlbSBwcm9tcHRdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3Mvc3lzdGVtLXByb21wdHMpLCB5b3UgY2FuIHVzZVxuICAgKiB0aGUgdG9wLWxldmVsIGBzeXN0ZW1gIHBhcmFtZXRlciBcdTIwMTQgdGhlcmUgaXMgbm8gYFwic3lzdGVtXCJgIHJvbGUgZm9yIGlucHV0XG4gICAqIG1lc3NhZ2VzIGluIHRoZSBNZXNzYWdlcyBBUEkuXG4gICAqL1xuICBtZXNzYWdlczogQXJyYXk8QmV0YU1lc3NhZ2VQYXJhbT47XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1lc3NhZ2VzQVBJLk1vZGVsO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBBbiBvYmplY3QgZGVzY3JpYmluZyBtZXRhZGF0YSBhYm91dCB0aGUgcmVxdWVzdC5cbiAgICovXG4gIG1ldGFkYXRhPzogQmV0YU1ldGFkYXRhO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBDdXN0b20gdGV4dCBzZXF1ZW5jZXMgdGhhdCB3aWxsIGNhdXNlIHRoZSBtb2RlbCB0byBzdG9wIGdlbmVyYXRpbmcuXG4gICAqXG4gICAqIE91ciBtb2RlbHMgd2lsbCBub3JtYWxseSBzdG9wIHdoZW4gdGhleSBoYXZlIG5hdHVyYWxseSBjb21wbGV0ZWQgdGhlaXIgdHVybixcbiAgICogd2hpY2ggd2lsbCByZXN1bHQgaW4gYSByZXNwb25zZSBgc3RvcF9yZWFzb25gIG9mIGBcImVuZF90dXJuXCJgLlxuICAgKlxuICAgKiBJZiB5b3Ugd2FudCB0aGUgbW9kZWwgdG8gc3RvcCBnZW5lcmF0aW5nIHdoZW4gaXQgZW5jb3VudGVycyBjdXN0b20gc3RyaW5ncyBvZlxuICAgKiB0ZXh0LCB5b3UgY2FuIHVzZSB0aGUgYHN0b3Bfc2VxdWVuY2VzYCBwYXJhbWV0ZXIuIElmIHRoZSBtb2RlbCBlbmNvdW50ZXJzIG9uZSBvZlxuICAgKiB0aGUgY3VzdG9tIHNlcXVlbmNlcywgdGhlIHJlc3BvbnNlIGBzdG9wX3JlYXNvbmAgdmFsdWUgd2lsbCBiZSBgXCJzdG9wX3NlcXVlbmNlXCJgXG4gICAqIGFuZCB0aGUgcmVzcG9uc2UgYHN0b3Bfc2VxdWVuY2VgIHZhbHVlIHdpbGwgY29udGFpbiB0aGUgbWF0Y2hlZCBzdG9wIHNlcXVlbmNlLlxuICAgKi9cbiAgc3RvcF9zZXF1ZW5jZXM/OiBBcnJheTxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudFxuICAgKiBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtc3RyZWFtaW5nKSBmb3JcbiAgICogZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IFN5c3RlbSBwcm9tcHQuXG4gICAqXG4gICAqIEEgc3lzdGVtIHByb21wdCBpcyBhIHdheSBvZiBwcm92aWRpbmcgY29udGV4dCBhbmQgaW5zdHJ1Y3Rpb25zIHRvIENsYXVkZSwgc3VjaFxuICAgKiBhcyBzcGVjaWZ5aW5nIGEgcGFydGljdWxhciBnb2FsIG9yIHJvbGUuIFNlZSBvdXJcbiAgICogW2d1aWRlIHRvIHN5c3RlbSBwcm9tcHRzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3N5c3RlbS1wcm9tcHRzKS5cbiAgICovXG4gIHN5c3RlbT86IHN0cmluZyB8IEFycmF5PEJldGFUZXh0QmxvY2tQYXJhbT47XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IEFtb3VudCBvZiByYW5kb21uZXNzIGluamVjdGVkIGludG8gdGhlIHJlc3BvbnNlLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgMS4wYC4gUmFuZ2VzIGZyb20gYDAuMGAgdG8gYDEuMGAuIFVzZSBgdGVtcGVyYXR1cmVgIGNsb3NlciB0byBgMC4wYFxuICAgKiBmb3IgYW5hbHl0aWNhbCAvIG11bHRpcGxlIGNob2ljZSwgYW5kIGNsb3NlciB0byBgMS4wYCBmb3IgY3JlYXRpdmUgYW5kXG4gICAqIGdlbmVyYXRpdmUgdGFza3MuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBldmVuIHdpdGggYHRlbXBlcmF0dXJlYCBvZiBgMC4wYCwgdGhlIHJlc3VsdHMgd2lsbCBub3QgYmUgZnVsbHlcbiAgICogZGV0ZXJtaW5pc3RpYy5cbiAgICovXG4gIHRlbXBlcmF0dXJlPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBIb3cgdGhlIG1vZGVsIHNob3VsZCB1c2UgdGhlIHByb3ZpZGVkIHRvb2xzLiBUaGUgbW9kZWwgY2FuIHVzZSBhXG4gICAqIHNwZWNpZmljIHRvb2wsIGFueSBhdmFpbGFibGUgdG9vbCwgb3IgZGVjaWRlIGJ5IGl0c2VsZi5cbiAgICovXG4gIHRvb2xfY2hvaWNlPzogQmV0YVRvb2xDaG9pY2U7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IERlZmluaXRpb25zIG9mIHRvb2xzIHRoYXQgdGhlIG1vZGVsIG1heSB1c2UuXG4gICAqXG4gICAqIElmIHlvdSBpbmNsdWRlIGB0b29sc2AgaW4geW91ciBBUEkgcmVxdWVzdCwgdGhlIG1vZGVsIG1heSByZXR1cm4gYHRvb2xfdXNlYFxuICAgKiBjb250ZW50IGJsb2NrcyB0aGF0IHJlcHJlc2VudCB0aGUgbW9kZWwncyB1c2Ugb2YgdGhvc2UgdG9vbHMuIFlvdSBjYW4gdGhlbiBydW5cbiAgICogdGhvc2UgdG9vbHMgdXNpbmcgdGhlIHRvb2wgaW5wdXQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBhbmQgdGhlbiBvcHRpb25hbGx5XG4gICAqIHJldHVybiByZXN1bHRzIGJhY2sgdG8gdGhlIG1vZGVsIHVzaW5nIGB0b29sX3Jlc3VsdGAgY29udGVudCBibG9ja3MuXG4gICAqXG4gICAqIEVhY2ggdG9vbCBkZWZpbml0aW9uIGluY2x1ZGVzOlxuICAgKlxuICAgKiAtIGBuYW1lYDogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICogLSBgZGVzY3JpcHRpb25gOiBPcHRpb25hbCwgYnV0IHN0cm9uZ2x5LXJlY29tbWVuZGVkIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sLlxuICAgKiAtIGBpbnB1dF9zY2hlbWFgOiBbSlNPTiBzY2hlbWFdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnLykgZm9yIHRoZSB0b29sIGBpbnB1dGBcbiAgICogICBzaGFwZSB0aGF0IHRoZSBtb2RlbCB3aWxsIHByb2R1Y2UgaW4gYHRvb2xfdXNlYCBvdXRwdXQgY29udGVudCBibG9ja3MuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBpZiB5b3UgZGVmaW5lZCBgdG9vbHNgIGFzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcIm5hbWVcIjogXCJnZXRfc3RvY2tfcHJpY2VcIixcbiAgICogICAgIFwiZGVzY3JpcHRpb25cIjogXCJHZXQgdGhlIGN1cnJlbnQgc3RvY2sgcHJpY2UgZm9yIGEgZ2l2ZW4gdGlja2VyIHN5bWJvbC5cIixcbiAgICogICAgIFwiaW5wdXRfc2NoZW1hXCI6IHtcbiAgICogICAgICAgXCJ0eXBlXCI6IFwib2JqZWN0XCIsXG4gICAqICAgICAgIFwicHJvcGVydGllc1wiOiB7XG4gICAqICAgICAgICAgXCJ0aWNrZXJcIjoge1xuICAgKiAgICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXG4gICAqICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIHN0b2NrIHRpY2tlciBzeW1ib2wsIGUuZy4gQUFQTCBmb3IgQXBwbGUgSW5jLlwiXG4gICAqICAgICAgICAgfVxuICAgKiAgICAgICB9LFxuICAgKiAgICAgICBcInJlcXVpcmVkXCI6IFtcInRpY2tlclwiXVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogQW5kIHRoZW4gYXNrZWQgdGhlIG1vZGVsIFwiV2hhdCdzIHRoZSBTJlAgNTAwIGF0IHRvZGF5P1wiLCB0aGUgbW9kZWwgbWlnaHQgcHJvZHVjZVxuICAgKiBgdG9vbF91c2VgIGNvbnRlbnQgYmxvY2tzIGluIHRoZSByZXNwb25zZSBsaWtlIHRoaXM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwidHlwZVwiOiBcInRvb2xfdXNlXCIsXG4gICAqICAgICBcImlkXCI6IFwidG9vbHVfMDFEN0ZMcmZoNEdZcTd5VDFVTEZleU1WXCIsXG4gICAqICAgICBcIm5hbWVcIjogXCJnZXRfc3RvY2tfcHJpY2VcIixcbiAgICogICAgIFwiaW5wdXRcIjogeyBcInRpY2tlclwiOiBcIl5HU1BDXCIgfVxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogWW91IG1pZ2h0IHRoZW4gcnVuIHlvdXIgYGdldF9zdG9ja19wcmljZWAgdG9vbCB3aXRoIGB7XCJ0aWNrZXJcIjogXCJeR1NQQ1wifWAgYXMgYW5cbiAgICogaW5wdXQsIGFuZCByZXR1cm4gdGhlIGZvbGxvd2luZyBiYWNrIHRvIHRoZSBtb2RlbCBpbiBhIHN1YnNlcXVlbnQgYHVzZXJgXG4gICAqIG1lc3NhZ2U6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwidHlwZVwiOiBcInRvb2xfcmVzdWx0XCIsXG4gICAqICAgICBcInRvb2xfdXNlX2lkXCI6IFwidG9vbHVfMDFEN0ZMcmZoNEdZcTd5VDFVTEZleU1WXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCIyNTkuNzUgVVNEXCJcbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFRvb2xzIGNhbiBiZSB1c2VkIGZvciB3b3JrZmxvd3MgdGhhdCBpbmNsdWRlIHJ1bm5pbmcgY2xpZW50LXNpZGUgdG9vbHMgYW5kXG4gICAqIGZ1bmN0aW9ucywgb3IgbW9yZSBnZW5lcmFsbHkgd2hlbmV2ZXIgeW91IHdhbnQgdGhlIG1vZGVsIHRvIHByb2R1Y2UgYSBwYXJ0aWN1bGFyXG4gICAqIEpTT04gc3RydWN0dXJlIG9mIG91dHB1dC5cbiAgICpcbiAgICogU2VlIG91ciBbZ3VpZGVdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvdG9vbC11c2UpIGZvciBtb3JlIGRldGFpbHMuXG4gICAqL1xuICB0b29scz86IEFycmF5PEJldGFUb29sVW5pb24+O1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBPbmx5IHNhbXBsZSBmcm9tIHRoZSB0b3AgSyBvcHRpb25zIGZvciBlYWNoIHN1YnNlcXVlbnQgdG9rZW4uXG4gICAqXG4gICAqIFVzZWQgdG8gcmVtb3ZlIFwibG9uZyB0YWlsXCIgbG93IHByb2JhYmlsaXR5IHJlc3BvbnNlcy5cbiAgICogW0xlYXJuIG1vcmUgdGVjaG5pY2FsIGRldGFpbHMgaGVyZV0oaHR0cHM6Ly90b3dhcmRzZGF0YXNjaWVuY2UuY29tL2hvdy10by1zYW1wbGUtZnJvbS1sYW5ndWFnZS1tb2RlbHMtNjgyYmNlYjk3Mjc3KS5cbiAgICpcbiAgICogUmVjb21tZW5kZWQgZm9yIGFkdmFuY2VkIHVzZSBjYXNlcyBvbmx5LiBZb3UgdXN1YWxseSBvbmx5IG5lZWQgdG8gdXNlXG4gICAqIGB0ZW1wZXJhdHVyZWAuXG4gICAqL1xuICB0b3Bfaz86IG51bWJlcjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogVXNlIG51Y2xldXMgc2FtcGxpbmcuXG4gICAqXG4gICAqIEluIG51Y2xldXMgc2FtcGxpbmcsIHdlIGNvbXB1dGUgdGhlIGN1bXVsYXRpdmUgZGlzdHJpYnV0aW9uIG92ZXIgYWxsIHRoZSBvcHRpb25zXG4gICAqIGZvciBlYWNoIHN1YnNlcXVlbnQgdG9rZW4gaW4gZGVjcmVhc2luZyBwcm9iYWJpbGl0eSBvcmRlciBhbmQgY3V0IGl0IG9mZiBvbmNlIGl0XG4gICAqIHJlYWNoZXMgYSBwYXJ0aWN1bGFyIHByb2JhYmlsaXR5IHNwZWNpZmllZCBieSBgdG9wX3BgLiBZb3Ugc2hvdWxkIGVpdGhlciBhbHRlclxuICAgKiBgdGVtcGVyYXR1cmVgIG9yIGB0b3BfcGAsIGJ1dCBub3QgYm90aC5cbiAgICpcbiAgICogUmVjb21tZW5kZWQgZm9yIGFkdmFuY2VkIHVzZSBjYXNlcyBvbmx5LiBZb3UgdXN1YWxseSBvbmx5IG5lZWQgdG8gdXNlXG4gICAqIGB0ZW1wZXJhdHVyZWAuXG4gICAqL1xuICB0b3BfcD86IG51bWJlcjtcblxuICAvKipcbiAgICogSGVhZGVyIHBhcmFtOiBPcHRpb25hbCBoZWFkZXIgdG8gc3BlY2lmeSB0aGUgYmV0YSB2ZXJzaW9uKHMpIHlvdSB3YW50IHRvIHVzZS5cbiAgICovXG4gIGJldGFzPzogQXJyYXk8QmV0YUFQSS5BbnRocm9waWNCZXRhPjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIHtcbiAgZXhwb3J0IHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IE1lc3NhZ2VzTWVzc2FnZXNBUEkuTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IE1lc3NhZ2VzTWVzc2FnZXNBUEkuTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGV4dGVuZHMgTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogQm9keSBwYXJhbTogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnRcbiAgICogZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLXN0cmVhbWluZykgZm9yXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW0/OiBmYWxzZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGV4dGVuZHMgTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogQm9keSBwYXJhbTogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnRcbiAgICogZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLXN0cmVhbWluZykgZm9yXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW06IHRydWU7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zIHtcbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IElucHV0IG1lc3NhZ2VzLlxuICAgKlxuICAgKiBPdXIgbW9kZWxzIGFyZSB0cmFpbmVkIHRvIG9wZXJhdGUgb24gYWx0ZXJuYXRpbmcgYHVzZXJgIGFuZCBgYXNzaXN0YW50YFxuICAgKiBjb252ZXJzYXRpb25hbCB0dXJucy4gV2hlbiBjcmVhdGluZyBhIG5ldyBgTWVzc2FnZWAsIHlvdSBzcGVjaWZ5IHRoZSBwcmlvclxuICAgKiBjb252ZXJzYXRpb25hbCB0dXJucyB3aXRoIHRoZSBgbWVzc2FnZXNgIHBhcmFtZXRlciwgYW5kIHRoZSBtb2RlbCB0aGVuIGdlbmVyYXRlc1xuICAgKiB0aGUgbmV4dCBgTWVzc2FnZWAgaW4gdGhlIGNvbnZlcnNhdGlvbi4gQ29uc2VjdXRpdmUgYHVzZXJgIG9yIGBhc3Npc3RhbnRgIHR1cm5zXG4gICAqIGluIHlvdXIgcmVxdWVzdCB3aWxsIGJlIGNvbWJpbmVkIGludG8gYSBzaW5nbGUgdHVybi5cbiAgICpcbiAgICogRWFjaCBpbnB1dCBtZXNzYWdlIG11c3QgYmUgYW4gb2JqZWN0IHdpdGggYSBgcm9sZWAgYW5kIGBjb250ZW50YC4gWW91IGNhblxuICAgKiBzcGVjaWZ5IGEgc2luZ2xlIGB1c2VyYC1yb2xlIG1lc3NhZ2UsIG9yIHlvdSBjYW4gaW5jbHVkZSBtdWx0aXBsZSBgdXNlcmAgYW5kXG4gICAqIGBhc3Npc3RhbnRgIG1lc3NhZ2VzLlxuICAgKlxuICAgKiBJZiB0aGUgZmluYWwgbWVzc2FnZSB1c2VzIHRoZSBgYXNzaXN0YW50YCByb2xlLCB0aGUgcmVzcG9uc2UgY29udGVudCB3aWxsXG4gICAqIGNvbnRpbnVlIGltbWVkaWF0ZWx5IGZyb20gdGhlIGNvbnRlbnQgaW4gdGhhdCBtZXNzYWdlLiBUaGlzIGNhbiBiZSB1c2VkIHRvXG4gICAqIGNvbnN0cmFpbiBwYXJ0IG9mIHRoZSBtb2RlbCdzIHJlc3BvbnNlLlxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggYSBzaW5nbGUgYHVzZXJgIG1lc3NhZ2U6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW3sgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfV1cbiAgICogYGBgXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBtdWx0aXBsZSBjb252ZXJzYXRpb25hbCB0dXJuczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAgeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvIHRoZXJlLlwiIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiSGksIEknbSBDbGF1ZGUuIEhvdyBjYW4gSSBoZWxwIHlvdT9cIiB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJDYW4geW91IGV4cGxhaW4gTExNcyBpbiBwbGFpbiBFbmdsaXNoP1wiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIGEgcGFydGlhbGx5LWZpbGxlZCByZXNwb25zZSBmcm9tIENsYXVkZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiV2hhdCdzIHRoZSBHcmVlayBuYW1lIGZvciBTdW4/IChBKSBTb2wgKEIpIEhlbGlvcyAoQykgU3VuXCJcbiAgICogICB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIlRoZSBiZXN0IGFuc3dlciBpcyAoXCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBFYWNoIGlucHV0IG1lc3NhZ2UgYGNvbnRlbnRgIG1heSBiZSBlaXRoZXIgYSBzaW5nbGUgYHN0cmluZ2Agb3IgYW4gYXJyYXkgb2ZcbiAgICogY29udGVudCBibG9ja3MsIHdoZXJlIGVhY2ggYmxvY2sgaGFzIGEgc3BlY2lmaWMgYHR5cGVgLiBVc2luZyBhIGBzdHJpbmdgIGZvclxuICAgKiBgY29udGVudGAgaXMgc2hvcnRoYW5kIGZvciBhbiBhcnJheSBvZiBvbmUgY29udGVudCBibG9jayBvZiB0eXBlIGBcInRleHRcImAuIFRoZVxuICAgKiBmb2xsb3dpbmcgaW5wdXQgbWVzc2FnZXMgYXJlIGVxdWl2YWxlbnQ6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogW3sgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfV0gfVxuICAgKiBgYGBcbiAgICpcbiAgICogU3RhcnRpbmcgd2l0aCBDbGF1ZGUgMyBtb2RlbHMsIHlvdSBjYW4gYWxzbyBzZW5kIGltYWdlIGNvbnRlbnQgYmxvY2tzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHtcbiAgICogICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgXCJjb250ZW50XCI6IFtcbiAgICogICAgIHtcbiAgICogICAgICAgXCJ0eXBlXCI6IFwiaW1hZ2VcIixcbiAgICogICAgICAgXCJzb3VyY2VcIjoge1xuICAgKiAgICAgICAgIFwidHlwZVwiOiBcImJhc2U2NFwiLFxuICAgKiAgICAgICAgIFwibWVkaWFfdHlwZVwiOiBcImltYWdlL2pwZWdcIixcbiAgICogICAgICAgICBcImRhdGFcIjogXCIvOWovNEFBUVNrWkpSZy4uLlwiXG4gICAqICAgICAgIH1cbiAgICogICAgIH0sXG4gICAqICAgICB7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiV2hhdCBpcyBpbiB0aGlzIGltYWdlP1wiIH1cbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFdlIGN1cnJlbnRseSBzdXBwb3J0IHRoZSBgYmFzZTY0YCBzb3VyY2UgdHlwZSBmb3IgaW1hZ2VzLCBhbmQgdGhlIGBpbWFnZS9qcGVnYCxcbiAgICogYGltYWdlL3BuZ2AsIGBpbWFnZS9naWZgLCBhbmQgYGltYWdlL3dlYnBgIG1lZGlhIHR5cGVzLlxuICAgKlxuICAgKiBTZWUgW2V4YW1wbGVzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtZXhhbXBsZXMjdmlzaW9uKSBmb3JcbiAgICogbW9yZSBpbnB1dCBleGFtcGxlcy5cbiAgICpcbiAgICogTm90ZSB0aGF0IGlmIHlvdSB3YW50IHRvIGluY2x1ZGUgYVxuICAgKiBbc3lzdGVtIHByb21wdF0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9zeXN0ZW0tcHJvbXB0cyksIHlvdSBjYW4gdXNlXG4gICAqIHRoZSB0b3AtbGV2ZWwgYHN5c3RlbWAgcGFyYW1ldGVyIFx1MjAxNCB0aGVyZSBpcyBubyBgXCJzeXN0ZW1cImAgcm9sZSBmb3IgaW5wdXRcbiAgICogbWVzc2FnZXMgaW4gdGhlIE1lc3NhZ2VzIEFQSS5cbiAgICovXG4gIG1lc3NhZ2VzOiBBcnJheTxCZXRhTWVzc2FnZVBhcmFtPjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gICAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gICAqL1xuICBtb2RlbDogTWVzc2FnZXNBUEkuTW9kZWw7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IFN5c3RlbSBwcm9tcHQuXG4gICAqXG4gICAqIEEgc3lzdGVtIHByb21wdCBpcyBhIHdheSBvZiBwcm92aWRpbmcgY29udGV4dCBhbmQgaW5zdHJ1Y3Rpb25zIHRvIENsYXVkZSwgc3VjaFxuICAgKiBhcyBzcGVjaWZ5aW5nIGEgcGFydGljdWxhciBnb2FsIG9yIHJvbGUuIFNlZSBvdXJcbiAgICogW2d1aWRlIHRvIHN5c3RlbSBwcm9tcHRzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3N5c3RlbS1wcm9tcHRzKS5cbiAgICovXG4gIHN5c3RlbT86IHN0cmluZyB8IEFycmF5PEJldGFUZXh0QmxvY2tQYXJhbT47XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IEhvdyB0aGUgbW9kZWwgc2hvdWxkIHVzZSB0aGUgcHJvdmlkZWQgdG9vbHMuIFRoZSBtb2RlbCBjYW4gdXNlIGFcbiAgICogc3BlY2lmaWMgdG9vbCwgYW55IGF2YWlsYWJsZSB0b29sLCBvciBkZWNpZGUgYnkgaXRzZWxmLlxuICAgKi9cbiAgdG9vbF9jaG9pY2U/OiBCZXRhVG9vbENob2ljZTtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogRGVmaW5pdGlvbnMgb2YgdG9vbHMgdGhhdCB0aGUgbW9kZWwgbWF5IHVzZS5cbiAgICpcbiAgICogSWYgeW91IGluY2x1ZGUgYHRvb2xzYCBpbiB5b3VyIEFQSSByZXF1ZXN0LCB0aGUgbW9kZWwgbWF5IHJldHVybiBgdG9vbF91c2VgXG4gICAqIGNvbnRlbnQgYmxvY2tzIHRoYXQgcmVwcmVzZW50IHRoZSBtb2RlbCdzIHVzZSBvZiB0aG9zZSB0b29scy4gWW91IGNhbiB0aGVuIHJ1blxuICAgKiB0aG9zZSB0b29scyB1c2luZyB0aGUgdG9vbCBpbnB1dCBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGFuZCB0aGVuIG9wdGlvbmFsbHlcbiAgICogcmV0dXJuIHJlc3VsdHMgYmFjayB0byB0aGUgbW9kZWwgdXNpbmcgYHRvb2xfcmVzdWx0YCBjb250ZW50IGJsb2Nrcy5cbiAgICpcbiAgICogRWFjaCB0b29sIGRlZmluaXRpb24gaW5jbHVkZXM6XG4gICAqXG4gICAqIC0gYG5hbWVgOiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKiAtIGBkZXNjcmlwdGlvbmA6IE9wdGlvbmFsLCBidXQgc3Ryb25nbHktcmVjb21tZW5kZWQgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wuXG4gICAqIC0gYGlucHV0X3NjaGVtYWA6IFtKU09OIHNjaGVtYV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvKSBmb3IgdGhlIHRvb2wgYGlucHV0YFxuICAgKiAgIHNoYXBlIHRoYXQgdGhlIG1vZGVsIHdpbGwgcHJvZHVjZSBpbiBgdG9vbF91c2VgIG91dHB1dCBjb250ZW50IGJsb2Nrcy5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGlmIHlvdSBkZWZpbmVkIGB0b29sc2AgYXM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwibmFtZVwiOiBcImdldF9zdG9ja19wcmljZVwiLFxuICAgKiAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkdldCB0aGUgY3VycmVudCBzdG9jayBwcmljZSBmb3IgYSBnaXZlbiB0aWNrZXIgc3ltYm9sLlwiLFxuICAgKiAgICAgXCJpbnB1dF9zY2hlbWFcIjoge1xuICAgKiAgICAgICBcInR5cGVcIjogXCJvYmplY3RcIixcbiAgICogICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcbiAgICogICAgICAgICBcInRpY2tlclwiOiB7XG4gICAqICAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcbiAgICogICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgc3RvY2sgdGlja2VyIHN5bWJvbCwgZS5nLiBBQVBMIGZvciBBcHBsZSBJbmMuXCJcbiAgICogICAgICAgICB9XG4gICAqICAgICAgIH0sXG4gICAqICAgICAgIFwicmVxdWlyZWRcIjogW1widGlja2VyXCJdXG4gICAqICAgICB9XG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBBbmQgdGhlbiBhc2tlZCB0aGUgbW9kZWwgXCJXaGF0J3MgdGhlIFMmUCA1MDAgYXQgdG9kYXk/XCIsIHRoZSBtb2RlbCBtaWdodCBwcm9kdWNlXG4gICAqIGB0b29sX3VzZWAgY29udGVudCBibG9ja3MgaW4gdGhlIHJlc3BvbnNlIGxpa2UgdGhpczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJ0eXBlXCI6IFwidG9vbF91c2VcIixcbiAgICogICAgIFwiaWRcIjogXCJ0b29sdV8wMUQ3RkxyZmg0R1lxN3lUMVVMRmV5TVZcIixcbiAgICogICAgIFwibmFtZVwiOiBcImdldF9zdG9ja19wcmljZVwiLFxuICAgKiAgICAgXCJpbnB1dFwiOiB7IFwidGlja2VyXCI6IFwiXkdTUENcIiB9XG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBZb3UgbWlnaHQgdGhlbiBydW4geW91ciBgZ2V0X3N0b2NrX3ByaWNlYCB0b29sIHdpdGggYHtcInRpY2tlclwiOiBcIl5HU1BDXCJ9YCBhcyBhblxuICAgKiBpbnB1dCwgYW5kIHJldHVybiB0aGUgZm9sbG93aW5nIGJhY2sgdG8gdGhlIG1vZGVsIGluIGEgc3Vic2VxdWVudCBgdXNlcmBcbiAgICogbWVzc2FnZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJ0eXBlXCI6IFwidG9vbF9yZXN1bHRcIixcbiAgICogICAgIFwidG9vbF91c2VfaWRcIjogXCJ0b29sdV8wMUQ3RkxyZmg0R1lxN3lUMVVMRmV5TVZcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIjI1OS43NSBVU0RcIlxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogVG9vbHMgY2FuIGJlIHVzZWQgZm9yIHdvcmtmbG93cyB0aGF0IGluY2x1ZGUgcnVubmluZyBjbGllbnQtc2lkZSB0b29scyBhbmRcbiAgICogZnVuY3Rpb25zLCBvciBtb3JlIGdlbmVyYWxseSB3aGVuZXZlciB5b3Ugd2FudCB0aGUgbW9kZWwgdG8gcHJvZHVjZSBhIHBhcnRpY3VsYXJcbiAgICogSlNPTiBzdHJ1Y3R1cmUgb2Ygb3V0cHV0LlxuICAgKlxuICAgKiBTZWUgb3VyIFtndWlkZV0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy90b29sLXVzZSkgZm9yIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIHRvb2xzPzogQXJyYXk8QmV0YVRvb2wgfCBCZXRhVG9vbENvbXB1dGVyVXNlMjAyNDEwMjIgfCBCZXRhVG9vbEJhc2gyMDI0MTAyMiB8IEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyPjtcblxuICAvKipcbiAgICogSGVhZGVyIHBhcmFtOiBPcHRpb25hbCBoZWFkZXIgdG8gc3BlY2lmeSB0aGUgYmV0YSB2ZXJzaW9uKHMpIHlvdSB3YW50IHRvIHVzZS5cbiAgICovXG4gIGJldGFzPzogQXJyYXk8QmV0YUFQSS5BbnRocm9waWNCZXRhPjtcbn1cblxuTWVzc2FnZXMuQmF0Y2hlcyA9IEJhdGNoZXM7XG5NZXNzYWdlcy5CZXRhTWVzc2FnZUJhdGNoZXNQYWdlID0gQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZTtcblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIE1lc3NhZ2VzIHtcbiAgZXhwb3J0IHtcbiAgICB0eXBlIEJldGFCYXNlNjRQREZCbG9jayBhcyBCZXRhQmFzZTY0UERGQmxvY2ssXG4gICAgdHlwZSBCZXRhQmFzZTY0UERGU291cmNlIGFzIEJldGFCYXNlNjRQREZTb3VyY2UsXG4gICAgdHlwZSBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIGFzIEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwsXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb24gYXMgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0gYXMgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbiBhcyBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbixcbiAgICB0eXBlIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0gYXMgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSxcbiAgICB0eXBlIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvbiBhcyBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb24sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbSBhcyBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbSxcbiAgICB0eXBlIEJldGFDaXRhdGlvbnNDb25maWdQYXJhbSBhcyBCZXRhQ2l0YXRpb25zQ29uZmlnUGFyYW0sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25zRGVsdGEgYXMgQmV0YUNpdGF0aW9uc0RlbHRhLFxuICAgIHR5cGUgQmV0YUNvbnRlbnRCbG9jayBhcyBCZXRhQ29udGVudEJsb2NrLFxuICAgIHR5cGUgQmV0YUNvbnRlbnRCbG9ja1BhcmFtIGFzIEJldGFDb250ZW50QmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2tTb3VyY2UgYXMgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZSxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2tTb3VyY2VDb250ZW50IGFzIEJldGFDb250ZW50QmxvY2tTb3VyY2VDb250ZW50LFxuICAgIHR5cGUgQmV0YUltYWdlQmxvY2tQYXJhbSBhcyBCZXRhSW1hZ2VCbG9ja1BhcmFtLFxuICAgIHR5cGUgQmV0YUlucHV0SlNPTkRlbHRhIGFzIEJldGFJbnB1dEpTT05EZWx0YSxcbiAgICB0eXBlIEJldGFNZXNzYWdlIGFzIEJldGFNZXNzYWdlLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VEZWx0YVVzYWdlIGFzIEJldGFNZXNzYWdlRGVsdGFVc2FnZSxcbiAgICB0eXBlIEJldGFNZXNzYWdlUGFyYW0gYXMgQmV0YU1lc3NhZ2VQYXJhbSxcbiAgICB0eXBlIEJldGFNZXNzYWdlVG9rZW5zQ291bnQgYXMgQmV0YU1lc3NhZ2VUb2tlbnNDb3VudCxcbiAgICB0eXBlIEJldGFNZXRhZGF0YSBhcyBCZXRhTWV0YWRhdGEsXG4gICAgdHlwZSBCZXRhUGxhaW5UZXh0U291cmNlIGFzIEJldGFQbGFpblRleHRTb3VyY2UsXG4gICAgdHlwZSBCZXRhUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCBhcyBCZXRhUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgICB0eXBlIEJldGFSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50IGFzIEJldGFSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCBhcyBCZXRhUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd01lc3NhZ2VEZWx0YUV2ZW50IGFzIEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudCxcbiAgICB0eXBlIEJldGFSYXdNZXNzYWdlU3RhcnRFdmVudCBhcyBCZXRhUmF3TWVzc2FnZVN0YXJ0RXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3TWVzc2FnZVN0b3BFdmVudCBhcyBCZXRhUmF3TWVzc2FnZVN0b3BFdmVudCxcbiAgICB0eXBlIEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQgYXMgQmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudCxcbiAgICB0eXBlIEJldGFUZXh0QmxvY2sgYXMgQmV0YVRleHRCbG9jayxcbiAgICB0eXBlIEJldGFUZXh0QmxvY2tQYXJhbSBhcyBCZXRhVGV4dEJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhVGV4dENpdGF0aW9uIGFzIEJldGFUZXh0Q2l0YXRpb24sXG4gICAgdHlwZSBCZXRhVGV4dENpdGF0aW9uUGFyYW0gYXMgQmV0YVRleHRDaXRhdGlvblBhcmFtLFxuICAgIHR5cGUgQmV0YVRleHREZWx0YSBhcyBCZXRhVGV4dERlbHRhLFxuICAgIHR5cGUgQmV0YVRvb2wgYXMgQmV0YVRvb2wsXG4gICAgdHlwZSBCZXRhVG9vbEJhc2gyMDI0MTAyMiBhcyBCZXRhVG9vbEJhc2gyMDI0MTAyMixcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlIGFzIEJldGFUb29sQ2hvaWNlLFxuICAgIHR5cGUgQmV0YVRvb2xDaG9pY2VBbnkgYXMgQmV0YVRvb2xDaG9pY2VBbnksXG4gICAgdHlwZSBCZXRhVG9vbENob2ljZUF1dG8gYXMgQmV0YVRvb2xDaG9pY2VBdXRvLFxuICAgIHR5cGUgQmV0YVRvb2xDaG9pY2VUb29sIGFzIEJldGFUb29sQ2hvaWNlVG9vbCxcbiAgICB0eXBlIEJldGFUb29sQ29tcHV0ZXJVc2UyMDI0MTAyMiBhcyBCZXRhVG9vbENvbXB1dGVyVXNlMjAyNDEwMjIsXG4gICAgdHlwZSBCZXRhVG9vbFJlc3VsdEJsb2NrUGFyYW0gYXMgQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtLFxuICAgIHR5cGUgQmV0YVRvb2xUZXh0RWRpdG9yMjAyNDEwMjIgYXMgQmV0YVRvb2xUZXh0RWRpdG9yMjAyNDEwMjIsXG4gICAgdHlwZSBCZXRhVG9vbFVuaW9uIGFzIEJldGFUb29sVW5pb24sXG4gICAgdHlwZSBCZXRhVG9vbFVzZUJsb2NrIGFzIEJldGFUb29sVXNlQmxvY2ssXG4gICAgdHlwZSBCZXRhVG9vbFVzZUJsb2NrUGFyYW0gYXMgQmV0YVRvb2xVc2VCbG9ja1BhcmFtLFxuICAgIHR5cGUgQmV0YVVzYWdlIGFzIEJldGFVc2FnZSxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICB0eXBlIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyBhcyBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMsXG4gIH07XG5cbiAgZXhwb3J0IHtcbiAgICBCYXRjaGVzIGFzIEJhdGNoZXMsXG4gICAgdHlwZSBCZXRhRGVsZXRlZE1lc3NhZ2VCYXRjaCBhcyBCZXRhRGVsZXRlZE1lc3NhZ2VCYXRjaCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2ggYXMgQmV0YU1lc3NhZ2VCYXRjaCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0LFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSBhcyBCZXRhTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMgYXMgQmV0YU1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hSZXN1bHQsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQsXG4gICAgQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSBhcyBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlLFxuICAgIHR5cGUgQmF0Y2hDcmVhdGVQYXJhbXMgYXMgQmF0Y2hDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBCYXRjaFJldHJpZXZlUGFyYW1zIGFzIEJhdGNoUmV0cmlldmVQYXJhbXMsXG4gICAgdHlwZSBCYXRjaExpc3RQYXJhbXMgYXMgQmF0Y2hMaXN0UGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hEZWxldGVQYXJhbXMgYXMgQmF0Y2hEZWxldGVQYXJhbXMsXG4gICAgdHlwZSBCYXRjaENhbmNlbFBhcmFtcyBhcyBCYXRjaENhbmNlbFBhcmFtcyxcbiAgICB0eXBlIEJhdGNoUmVzdWx0c1BhcmFtcyBhcyBCYXRjaFJlc3VsdHNQYXJhbXMsXG4gIH07XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCAqIGFzIE1vZGVsc0FQSSBmcm9tIFwiLi9tb2RlbHMuanNcIjtcbmltcG9ydCB7IEJldGFNb2RlbEluZm8sIEJldGFNb2RlbEluZm9zUGFnZSwgTW9kZWxMaXN0UGFyYW1zLCBNb2RlbHMgfSBmcm9tIFwiLi9tb2RlbHMuanNcIjtcbmltcG9ydCAqIGFzIE1lc3NhZ2VzQVBJIGZyb20gXCIuL21lc3NhZ2VzL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQge1xuICBCZXRhQmFzZTY0UERGQmxvY2ssXG4gIEJldGFCYXNlNjRQREZTb3VyY2UsXG4gIEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwsXG4gIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvbixcbiAgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0sXG4gIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uLFxuICBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtLFxuICBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb24sXG4gIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtLFxuICBCZXRhQ2l0YXRpb25zQ29uZmlnUGFyYW0sXG4gIEJldGFDaXRhdGlvbnNEZWx0YSxcbiAgQmV0YUNvbnRlbnRCbG9jayxcbiAgQmV0YUNvbnRlbnRCbG9ja1BhcmFtLFxuICBCZXRhQ29udGVudEJsb2NrU291cmNlLFxuICBCZXRhQ29udGVudEJsb2NrU291cmNlQ29udGVudCxcbiAgQmV0YUltYWdlQmxvY2tQYXJhbSxcbiAgQmV0YUlucHV0SlNPTkRlbHRhLFxuICBCZXRhTWVzc2FnZSxcbiAgQmV0YU1lc3NhZ2VEZWx0YVVzYWdlLFxuICBCZXRhTWVzc2FnZVBhcmFtLFxuICBCZXRhTWVzc2FnZVRva2Vuc0NvdW50LFxuICBCZXRhTWV0YWRhdGEsXG4gIEJldGFQbGFpblRleHRTb3VyY2UsXG4gIEJldGFSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50LFxuICBCZXRhUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgQmV0YVJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCxcbiAgQmV0YVJhd01lc3NhZ2VEZWx0YUV2ZW50LFxuICBCZXRhUmF3TWVzc2FnZVN0YXJ0RXZlbnQsXG4gIEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50LFxuICBCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50LFxuICBCZXRhVGV4dEJsb2NrLFxuICBCZXRhVGV4dEJsb2NrUGFyYW0sXG4gIEJldGFUZXh0Q2l0YXRpb24sXG4gIEJldGFUZXh0Q2l0YXRpb25QYXJhbSxcbiAgQmV0YVRleHREZWx0YSxcbiAgQmV0YVRvb2wsXG4gIEJldGFUb29sQmFzaDIwMjQxMDIyLFxuICBCZXRhVG9vbENob2ljZSxcbiAgQmV0YVRvb2xDaG9pY2VBbnksXG4gIEJldGFUb29sQ2hvaWNlQXV0byxcbiAgQmV0YVRvb2xDaG9pY2VUb29sLFxuICBCZXRhVG9vbENvbXB1dGVyVXNlMjAyNDEwMjIsXG4gIEJldGFUb29sUmVzdWx0QmxvY2tQYXJhbSxcbiAgQmV0YVRvb2xUZXh0RWRpdG9yMjAyNDEwMjIsXG4gIEJldGFUb29sVW5pb24sXG4gIEJldGFUb29sVXNlQmxvY2ssXG4gIEJldGFUb29sVXNlQmxvY2tQYXJhbSxcbiAgQmV0YVVzYWdlLFxuICBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMsXG4gIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gIE1lc3NhZ2VzLFxufSBmcm9tIFwiLi9tZXNzYWdlcy9tZXNzYWdlcy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQmV0YSBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgbW9kZWxzOiBNb2RlbHNBUEkuTW9kZWxzID0gbmV3IE1vZGVsc0FQSS5Nb2RlbHModGhpcy5fY2xpZW50KTtcbiAgbWVzc2FnZXM6IE1lc3NhZ2VzQVBJLk1lc3NhZ2VzID0gbmV3IE1lc3NhZ2VzQVBJLk1lc3NhZ2VzKHRoaXMuX2NsaWVudCk7XG59XG5cbmV4cG9ydCB0eXBlIEFudGhyb3BpY0JldGEgPVxuICB8IChzdHJpbmcgJiB7fSlcbiAgfCAnbWVzc2FnZS1iYXRjaGVzLTIwMjQtMDktMjQnXG4gIHwgJ3Byb21wdC1jYWNoaW5nLTIwMjQtMDctMzEnXG4gIHwgJ2NvbXB1dGVyLXVzZS0yMDI0LTEwLTIyJ1xuICB8ICdwZGZzLTIwMjQtMDktMjUnXG4gIHwgJ3Rva2VuLWNvdW50aW5nLTIwMjQtMTEtMDEnO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFBUElFcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAnYXBpX2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQXV0aGVudGljYXRpb25FcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAnYXV0aGVudGljYXRpb25fZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFCaWxsaW5nRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2JpbGxpbmdfZXJyb3InO1xufVxuXG5leHBvcnQgdHlwZSBCZXRhRXJyb3IgPVxuICB8IEJldGFJbnZhbGlkUmVxdWVzdEVycm9yXG4gIHwgQmV0YUF1dGhlbnRpY2F0aW9uRXJyb3JcbiAgfCBCZXRhQmlsbGluZ0Vycm9yXG4gIHwgQmV0YVBlcm1pc3Npb25FcnJvclxuICB8IEJldGFOb3RGb3VuZEVycm9yXG4gIHwgQmV0YVJhdGVMaW1pdEVycm9yXG4gIHwgQmV0YUdhdGV3YXlUaW1lb3V0RXJyb3JcbiAgfCBCZXRhQVBJRXJyb3JcbiAgfCBCZXRhT3ZlcmxvYWRlZEVycm9yO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFFcnJvclJlc3BvbnNlIHtcbiAgZXJyb3I6IEJldGFFcnJvcjtcblxuICB0eXBlOiAnZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFHYXRld2F5VGltZW91dEVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICd0aW1lb3V0X2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhSW52YWxpZFJlcXVlc3RFcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAnaW52YWxpZF9yZXF1ZXN0X2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTm90Rm91bmRFcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAnbm90X2ZvdW5kX2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhT3ZlcmxvYWRlZEVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdvdmVybG9hZGVkX2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUGVybWlzc2lvbkVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdwZXJtaXNzaW9uX2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUmF0ZUxpbWl0RXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3JhdGVfbGltaXRfZXJyb3InO1xufVxuXG5CZXRhLk1vZGVscyA9IE1vZGVscztcbkJldGEuQmV0YU1vZGVsSW5mb3NQYWdlID0gQmV0YU1vZGVsSW5mb3NQYWdlO1xuQmV0YS5NZXNzYWdlcyA9IE1lc3NhZ2VzO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgQmV0YSB7XG4gIGV4cG9ydCB7XG4gICAgdHlwZSBBbnRocm9waWNCZXRhIGFzIEFudGhyb3BpY0JldGEsXG4gICAgdHlwZSBCZXRhQVBJRXJyb3IgYXMgQmV0YUFQSUVycm9yLFxuICAgIHR5cGUgQmV0YUF1dGhlbnRpY2F0aW9uRXJyb3IgYXMgQmV0YUF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gICAgdHlwZSBCZXRhQmlsbGluZ0Vycm9yIGFzIEJldGFCaWxsaW5nRXJyb3IsXG4gICAgdHlwZSBCZXRhRXJyb3IgYXMgQmV0YUVycm9yLFxuICAgIHR5cGUgQmV0YUVycm9yUmVzcG9uc2UgYXMgQmV0YUVycm9yUmVzcG9uc2UsXG4gICAgdHlwZSBCZXRhR2F0ZXdheVRpbWVvdXRFcnJvciBhcyBCZXRhR2F0ZXdheVRpbWVvdXRFcnJvcixcbiAgICB0eXBlIEJldGFJbnZhbGlkUmVxdWVzdEVycm9yIGFzIEJldGFJbnZhbGlkUmVxdWVzdEVycm9yLFxuICAgIHR5cGUgQmV0YU5vdEZvdW5kRXJyb3IgYXMgQmV0YU5vdEZvdW5kRXJyb3IsXG4gICAgdHlwZSBCZXRhT3ZlcmxvYWRlZEVycm9yIGFzIEJldGFPdmVybG9hZGVkRXJyb3IsXG4gICAgdHlwZSBCZXRhUGVybWlzc2lvbkVycm9yIGFzIEJldGFQZXJtaXNzaW9uRXJyb3IsXG4gICAgdHlwZSBCZXRhUmF0ZUxpbWl0RXJyb3IgYXMgQmV0YVJhdGVMaW1pdEVycm9yLFxuICB9O1xuXG4gIGV4cG9ydCB7XG4gICAgTW9kZWxzIGFzIE1vZGVscyxcbiAgICB0eXBlIEJldGFNb2RlbEluZm8gYXMgQmV0YU1vZGVsSW5mbyxcbiAgICBCZXRhTW9kZWxJbmZvc1BhZ2UgYXMgQmV0YU1vZGVsSW5mb3NQYWdlLFxuICAgIHR5cGUgTW9kZWxMaXN0UGFyYW1zIGFzIE1vZGVsTGlzdFBhcmFtcyxcbiAgfTtcblxuICBleHBvcnQge1xuICAgIE1lc3NhZ2VzIGFzIE1lc3NhZ2VzLFxuICAgIHR5cGUgQmV0YUJhc2U2NFBERkJsb2NrIGFzIEJldGFCYXNlNjRQREZCbG9jayxcbiAgICB0eXBlIEJldGFCYXNlNjRQREZTb3VyY2UgYXMgQmV0YUJhc2U2NFBERlNvdXJjZSxcbiAgICB0eXBlIEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgYXMgQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCxcbiAgICB0eXBlIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvbiBhcyBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb24sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbSBhcyBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbSxcbiAgICB0eXBlIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uIGFzIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSBhcyBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uIGFzIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvbixcbiAgICB0eXBlIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtIGFzIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uc0NvbmZpZ1BhcmFtIGFzIEJldGFDaXRhdGlvbnNDb25maWdQYXJhbSxcbiAgICB0eXBlIEJldGFDaXRhdGlvbnNEZWx0YSBhcyBCZXRhQ2l0YXRpb25zRGVsdGEsXG4gICAgdHlwZSBCZXRhQ29udGVudEJsb2NrIGFzIEJldGFDb250ZW50QmxvY2ssXG4gICAgdHlwZSBCZXRhQ29udGVudEJsb2NrUGFyYW0gYXMgQmV0YUNvbnRlbnRCbG9ja1BhcmFtLFxuICAgIHR5cGUgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZSBhcyBCZXRhQ29udGVudEJsb2NrU291cmNlLFxuICAgIHR5cGUgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQgYXMgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQsXG4gICAgdHlwZSBCZXRhSW1hZ2VCbG9ja1BhcmFtIGFzIEJldGFJbWFnZUJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhSW5wdXRKU09ORGVsdGEgYXMgQmV0YUlucHV0SlNPTkRlbHRhLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2UgYXMgQmV0YU1lc3NhZ2UsXG4gICAgdHlwZSBCZXRhTWVzc2FnZURlbHRhVXNhZ2UgYXMgQmV0YU1lc3NhZ2VEZWx0YVVzYWdlLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VQYXJhbSBhcyBCZXRhTWVzc2FnZVBhcmFtLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VUb2tlbnNDb3VudCBhcyBCZXRhTWVzc2FnZVRva2Vuc0NvdW50LFxuICAgIHR5cGUgQmV0YU1ldGFkYXRhIGFzIEJldGFNZXRhZGF0YSxcbiAgICB0eXBlIEJldGFQbGFpblRleHRTb3VyY2UgYXMgQmV0YVBsYWluVGV4dFNvdXJjZSxcbiAgICB0eXBlIEJldGFSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50IGFzIEJldGFSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQgYXMgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50IGFzIEJldGFSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnQgYXMgQmV0YVJhd01lc3NhZ2VEZWx0YUV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd01lc3NhZ2VTdGFydEV2ZW50IGFzIEJldGFSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgICB0eXBlIEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50IGFzIEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudCBhcyBCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50LFxuICAgIHR5cGUgQmV0YVRleHRCbG9jayBhcyBCZXRhVGV4dEJsb2NrLFxuICAgIHR5cGUgQmV0YVRleHRCbG9ja1BhcmFtIGFzIEJldGFUZXh0QmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFUZXh0Q2l0YXRpb24gYXMgQmV0YVRleHRDaXRhdGlvbixcbiAgICB0eXBlIEJldGFUZXh0Q2l0YXRpb25QYXJhbSBhcyBCZXRhVGV4dENpdGF0aW9uUGFyYW0sXG4gICAgdHlwZSBCZXRhVGV4dERlbHRhIGFzIEJldGFUZXh0RGVsdGEsXG4gICAgdHlwZSBCZXRhVG9vbCBhcyBCZXRhVG9vbCxcbiAgICB0eXBlIEJldGFUb29sQmFzaDIwMjQxMDIyIGFzIEJldGFUb29sQmFzaDIwMjQxMDIyLFxuICAgIHR5cGUgQmV0YVRvb2xDaG9pY2UgYXMgQmV0YVRvb2xDaG9pY2UsXG4gICAgdHlwZSBCZXRhVG9vbENob2ljZUFueSBhcyBCZXRhVG9vbENob2ljZUFueSxcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlQXV0byBhcyBCZXRhVG9vbENob2ljZUF1dG8sXG4gICAgdHlwZSBCZXRhVG9vbENob2ljZVRvb2wgYXMgQmV0YVRvb2xDaG9pY2VUb29sLFxuICAgIHR5cGUgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyIGFzIEJldGFUb29sQ29tcHV0ZXJVc2UyMDI0MTAyMixcbiAgICB0eXBlIEJldGFUb29sUmVzdWx0QmxvY2tQYXJhbSBhcyBCZXRhVG9vbFJlc3VsdEJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhVG9vbFRleHRFZGl0b3IyMDI0MTAyMiBhcyBCZXRhVG9vbFRleHRFZGl0b3IyMDI0MTAyMixcbiAgICB0eXBlIEJldGFUb29sVW5pb24gYXMgQmV0YVRvb2xVbmlvbixcbiAgICB0eXBlIEJldGFUb29sVXNlQmxvY2sgYXMgQmV0YVRvb2xVc2VCbG9jayxcbiAgICB0eXBlIEJldGFUb29sVXNlQmxvY2tQYXJhbSBhcyBCZXRhVG9vbFVzZUJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhVXNhZ2UgYXMgQmV0YVVzYWdlLFxuICAgIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtcyBhcyBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICAgIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBhcyBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICAgIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyBhcyBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICAgIHR5cGUgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zIGFzIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyxcbiAgfTtcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gXCIuLi9yZXNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgQVBJUHJvbWlzZSB9IGZyb20gXCIuLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBDb21wbGV0aW9uc0FQSSBmcm9tIFwiLi9jb21wbGV0aW9ucy5qc1wiO1xuaW1wb3J0ICogYXMgTWVzc2FnZXNBUEkgZnJvbSBcIi4vbWVzc2FnZXMvbWVzc2FnZXMuanNcIjtcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuLi9zdHJlYW1pbmcuanNcIjtcblxuZXhwb3J0IGNsYXNzIENvbXBsZXRpb25zIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogW0xlZ2FjeV0gQ3JlYXRlIGEgVGV4dCBDb21wbGV0aW9uLlxuICAgKlxuICAgKiBUaGUgVGV4dCBDb21wbGV0aW9ucyBBUEkgaXMgYSBsZWdhY3kgQVBJLiBXZSByZWNvbW1lbmQgdXNpbmcgdGhlXG4gICAqIFtNZXNzYWdlcyBBUEldKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcykgZ29pbmcgZm9yd2FyZC5cbiAgICpcbiAgICogRnV0dXJlIG1vZGVscyBhbmQgZmVhdHVyZXMgd2lsbCBub3QgYmUgY29tcGF0aWJsZSB3aXRoIFRleHQgQ29tcGxldGlvbnMuIFNlZSBvdXJcbiAgICogW21pZ3JhdGlvbiBndWlkZV0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21pZ3JhdGluZy1mcm9tLXRleHQtY29tcGxldGlvbnMtdG8tbWVzc2FnZXMpXG4gICAqIGZvciBndWlkYW5jZSBpbiBtaWdyYXRpbmcgZnJvbSBUZXh0IENvbXBsZXRpb25zIHRvIE1lc3NhZ2VzLlxuICAgKi9cbiAgY3JlYXRlKGJvZHk6IENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQVBJUHJvbWlzZTxDb21wbGV0aW9uPjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPENvbXBsZXRpb24+PjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxDb21wbGV0aW9uPiB8IENvbXBsZXRpb24+O1xuICBjcmVhdGUoXG4gICAgYm9keTogQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxDb21wbGV0aW9uPiB8IEFQSVByb21pc2U8U3RyZWFtPENvbXBsZXRpb24+PiB7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5wb3N0KCcvdjEvY29tcGxldGUnLCB7XG4gICAgICBib2R5LFxuICAgICAgdGltZW91dDogKHRoaXMuX2NsaWVudCBhcyBhbnkpLl9vcHRpb25zLnRpbWVvdXQgPz8gNjAwMDAwLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHN0cmVhbTogYm9keS5zdHJlYW0gPz8gZmFsc2UsXG4gICAgfSkgYXMgQVBJUHJvbWlzZTxDb21wbGV0aW9uPiB8IEFQSVByb21pc2U8U3RyZWFtPENvbXBsZXRpb24+PjtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb24ge1xuICAvKipcbiAgICogVW5pcXVlIG9iamVjdCBpZGVudGlmaWVyLlxuICAgKlxuICAgKiBUaGUgZm9ybWF0IGFuZCBsZW5ndGggb2YgSURzIG1heSBjaGFuZ2Ugb3ZlciB0aW1lLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIHJlc3VsdGluZyBjb21wbGV0aW9uIHVwIHRvIGFuZCBleGNsdWRpbmcgdGhlIHN0b3Agc2VxdWVuY2VzLlxuICAgKi9cbiAgY29tcGxldGlvbjogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgdGhhdCB3aWxsIGNvbXBsZXRlIHlvdXIgcHJvbXB0LlxcblxcblNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGFkZGl0aW9uYWxcbiAgICogZGV0YWlscyBhbmQgb3B0aW9ucy5cbiAgICovXG4gIG1vZGVsOiBNZXNzYWdlc0FQSS5Nb2RlbDtcblxuICAvKipcbiAgICogVGhlIHJlYXNvbiB0aGF0IHdlIHN0b3BwZWQuXG4gICAqXG4gICAqIFRoaXMgbWF5IGJlIG9uZSB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAgICpcbiAgICogLSBgXCJzdG9wX3NlcXVlbmNlXCJgOiB3ZSByZWFjaGVkIGEgc3RvcCBzZXF1ZW5jZSBcdTIwMTQgZWl0aGVyIHByb3ZpZGVkIGJ5IHlvdSB2aWEgdGhlXG4gICAqICAgYHN0b3Bfc2VxdWVuY2VzYCBwYXJhbWV0ZXIsIG9yIGEgc3RvcCBzZXF1ZW5jZSBidWlsdCBpbnRvIHRoZSBtb2RlbFxuICAgKiAtIGBcIm1heF90b2tlbnNcImA6IHdlIGV4Y2VlZGVkIGBtYXhfdG9rZW5zX3RvX3NhbXBsZWAgb3IgdGhlIG1vZGVsJ3MgbWF4aW11bVxuICAgKi9cbiAgc3RvcF9yZWFzb246IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgVGV4dCBDb21wbGV0aW9ucywgdGhpcyBpcyBhbHdheXMgYFwiY29tcGxldGlvblwiYC5cbiAgICovXG4gIHR5cGU6ICdjb21wbGV0aW9uJztcbn1cblxuZXhwb3J0IHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyA9IENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgfCBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnMgdG8gZ2VuZXJhdGUgYmVmb3JlIHN0b3BwaW5nLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgb3VyIG1vZGVscyBtYXkgc3RvcCBfYmVmb3JlXyByZWFjaGluZyB0aGlzIG1heGltdW0uIFRoaXMgcGFyYW1ldGVyXG4gICAqIG9ubHkgc3BlY2lmaWVzIHRoZSBhYnNvbHV0ZSBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnMgdG8gZ2VuZXJhdGUuXG4gICAqL1xuICBtYXhfdG9rZW5zX3RvX3NhbXBsZTogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgdGhhdCB3aWxsIGNvbXBsZXRlIHlvdXIgcHJvbXB0LlxcblxcblNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGFkZGl0aW9uYWxcbiAgICogZGV0YWlscyBhbmQgb3B0aW9ucy5cbiAgICovXG4gIG1vZGVsOiBNZXNzYWdlc0FQSS5Nb2RlbDtcblxuICAvKipcbiAgICogVGhlIHByb21wdCB0aGF0IHlvdSB3YW50IENsYXVkZSB0byBjb21wbGV0ZS5cbiAgICpcbiAgICogRm9yIHByb3BlciByZXNwb25zZSBnZW5lcmF0aW9uIHlvdSB3aWxsIG5lZWQgdG8gZm9ybWF0IHlvdXIgcHJvbXB0IHVzaW5nXG4gICAqIGFsdGVybmF0aW5nIGBcXG5cXG5IdW1hbjpgIGFuZCBgXFxuXFxuQXNzaXN0YW50OmAgY29udmVyc2F0aW9uYWwgdHVybnMuIEZvciBleGFtcGxlOlxuICAgKlxuICAgKiBgYGBcbiAgICogXCJcXG5cXG5IdW1hbjoge3VzZXJRdWVzdGlvbn1cXG5cXG5Bc3Npc3RhbnQ6XCJcbiAgICogYGBgXG4gICAqXG4gICAqIFNlZSBbcHJvbXB0IHZhbGlkYXRpb25dKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9wcm9tcHQtdmFsaWRhdGlvbikgYW5kXG4gICAqIG91ciBndWlkZSB0b1xuICAgKiBbcHJvbXB0IGRlc2lnbl0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9pbnRyby10by1wcm9tcHRpbmcpIGZvciBtb3JlXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBwcm9tcHQ6IHN0cmluZztcblxuICAvKipcbiAgICogQW4gb2JqZWN0IGRlc2NyaWJpbmcgbWV0YWRhdGEgYWJvdXQgdGhlIHJlcXVlc3QuXG4gICAqL1xuICBtZXRhZGF0YT86IE1lc3NhZ2VzQVBJLk1ldGFkYXRhO1xuXG4gIC8qKlxuICAgKiBTZXF1ZW5jZXMgdGhhdCB3aWxsIGNhdXNlIHRoZSBtb2RlbCB0byBzdG9wIGdlbmVyYXRpbmcuXG4gICAqXG4gICAqIE91ciBtb2RlbHMgc3RvcCBvbiBgXCJcXG5cXG5IdW1hbjpcImAsIGFuZCBtYXkgaW5jbHVkZSBhZGRpdGlvbmFsIGJ1aWx0LWluIHN0b3BcbiAgICogc2VxdWVuY2VzIGluIHRoZSBmdXR1cmUuIEJ5IHByb3ZpZGluZyB0aGUgc3RvcF9zZXF1ZW5jZXMgcGFyYW1ldGVyLCB5b3UgbWF5XG4gICAqIGluY2x1ZGUgYWRkaXRpb25hbCBzdHJpbmdzIHRoYXQgd2lsbCBjYXVzZSB0aGUgbW9kZWwgdG8gc3RvcCBnZW5lcmF0aW5nLlxuICAgKi9cbiAgc3RvcF9zZXF1ZW5jZXM/OiBBcnJheTxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudCBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvc3RyZWFtaW5nKSBmb3IgZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIEFtb3VudCBvZiByYW5kb21uZXNzIGluamVjdGVkIGludG8gdGhlIHJlc3BvbnNlLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgMS4wYC4gUmFuZ2VzIGZyb20gYDAuMGAgdG8gYDEuMGAuIFVzZSBgdGVtcGVyYXR1cmVgIGNsb3NlciB0byBgMC4wYFxuICAgKiBmb3IgYW5hbHl0aWNhbCAvIG11bHRpcGxlIGNob2ljZSwgYW5kIGNsb3NlciB0byBgMS4wYCBmb3IgY3JlYXRpdmUgYW5kXG4gICAqIGdlbmVyYXRpdmUgdGFza3MuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBldmVuIHdpdGggYHRlbXBlcmF0dXJlYCBvZiBgMC4wYCwgdGhlIHJlc3VsdHMgd2lsbCBub3QgYmUgZnVsbHlcbiAgICogZGV0ZXJtaW5pc3RpYy5cbiAgICovXG4gIHRlbXBlcmF0dXJlPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBPbmx5IHNhbXBsZSBmcm9tIHRoZSB0b3AgSyBvcHRpb25zIGZvciBlYWNoIHN1YnNlcXVlbnQgdG9rZW4uXG4gICAqXG4gICAqIFVzZWQgdG8gcmVtb3ZlIFwibG9uZyB0YWlsXCIgbG93IHByb2JhYmlsaXR5IHJlc3BvbnNlcy5cbiAgICogW0xlYXJuIG1vcmUgdGVjaG5pY2FsIGRldGFpbHMgaGVyZV0oaHR0cHM6Ly90b3dhcmRzZGF0YXNjaWVuY2UuY29tL2hvdy10by1zYW1wbGUtZnJvbS1sYW5ndWFnZS1tb2RlbHMtNjgyYmNlYjk3Mjc3KS5cbiAgICpcbiAgICogUmVjb21tZW5kZWQgZm9yIGFkdmFuY2VkIHVzZSBjYXNlcyBvbmx5LiBZb3UgdXN1YWxseSBvbmx5IG5lZWQgdG8gdXNlXG4gICAqIGB0ZW1wZXJhdHVyZWAuXG4gICAqL1xuICB0b3Bfaz86IG51bWJlcjtcblxuICAvKipcbiAgICogVXNlIG51Y2xldXMgc2FtcGxpbmcuXG4gICAqXG4gICAqIEluIG51Y2xldXMgc2FtcGxpbmcsIHdlIGNvbXB1dGUgdGhlIGN1bXVsYXRpdmUgZGlzdHJpYnV0aW9uIG92ZXIgYWxsIHRoZSBvcHRpb25zXG4gICAqIGZvciBlYWNoIHN1YnNlcXVlbnQgdG9rZW4gaW4gZGVjcmVhc2luZyBwcm9iYWJpbGl0eSBvcmRlciBhbmQgY3V0IGl0IG9mZiBvbmNlIGl0XG4gICAqIHJlYWNoZXMgYSBwYXJ0aWN1bGFyIHByb2JhYmlsaXR5IHNwZWNpZmllZCBieSBgdG9wX3BgLiBZb3Ugc2hvdWxkIGVpdGhlciBhbHRlclxuICAgKiBgdGVtcGVyYXR1cmVgIG9yIGB0b3BfcGAsIGJ1dCBub3QgYm90aC5cbiAgICpcbiAgICogUmVjb21tZW5kZWQgZm9yIGFkdmFuY2VkIHVzZSBjYXNlcyBvbmx5LiBZb3UgdXN1YWxseSBvbmx5IG5lZWQgdG8gdXNlXG4gICAqIGB0ZW1wZXJhdHVyZWAuXG4gICAqL1xuICB0b3BfcD86IG51bWJlcjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBgQW50aHJvcGljLk1lc3NhZ2VzLk1ldGFkYXRhYCBpbnN0ZWFkXG4gICAqL1xuICBleHBvcnQgdHlwZSBNZXRhZGF0YSA9IE1lc3NhZ2VzQVBJLk1ldGFkYXRhO1xuXG4gIGV4cG9ydCB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBDb21wbGV0aW9uc0FQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gQ29tcGxldGlvbnNBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGV4dGVuZHMgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnQgZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL3N0cmVhbWluZykgZm9yIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW0/OiBmYWxzZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGV4dGVuZHMgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnQgZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL3N0cmVhbWluZykgZm9yIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW06IHRydWU7XG59XG5cbmV4cG9ydCBkZWNsYXJlIG5hbWVzcGFjZSBDb21wbGV0aW9ucyB7XG4gIGV4cG9ydCB7XG4gICAgdHlwZSBDb21wbGV0aW9uIGFzIENvbXBsZXRpb24sXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gIH07XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCB7IGlzUmVxdWVzdE9wdGlvbnMgfSBmcm9tIFwiLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgU2hhcmVkIGZyb20gXCIuLi9zaGFyZWQuanNcIjtcbmltcG9ydCAqIGFzIE1lc3NhZ2VzQVBJIGZyb20gXCIuL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgeyBQYWdlLCB0eXBlIFBhZ2VQYXJhbXMgfSBmcm9tIFwiLi4vLi4vcGFnaW5hdGlvbi5qc1wiO1xuaW1wb3J0IHsgSlNPTkxEZWNvZGVyIH0gZnJvbSBcIi4uLy4uL2ludGVybmFsL2RlY29kZXJzL2pzb25sLmpzXCI7XG5pbXBvcnQgeyBBbnRocm9waWNFcnJvciB9IGZyb20gXCIuLi8uLi9lcnJvci5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQmF0Y2hlcyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFNlbmQgYSBiYXRjaCBvZiBNZXNzYWdlIGNyZWF0aW9uIHJlcXVlc3RzLlxuICAgKlxuICAgKiBUaGUgTWVzc2FnZSBCYXRjaGVzIEFQSSBjYW4gYmUgdXNlZCB0byBwcm9jZXNzIG11bHRpcGxlIE1lc3NhZ2VzIEFQSSByZXF1ZXN0cyBhdFxuICAgKiBvbmNlLiBPbmNlIGEgTWVzc2FnZSBCYXRjaCBpcyBjcmVhdGVkLCBpdCBiZWdpbnMgcHJvY2Vzc2luZyBpbW1lZGlhdGVseS4gQmF0Y2hlc1xuICAgKiBjYW4gdGFrZSB1cCB0byAyNCBob3VycyB0byBjb21wbGV0ZS5cbiAgICovXG4gIGNyZWF0ZShib2R5OiBCYXRjaENyZWF0ZVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8TWVzc2FnZUJhdGNoPiB7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5wb3N0KCcvdjEvbWVzc2FnZXMvYmF0Y2hlcycsIHsgYm9keSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGVuZHBvaW50IGlzIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSB1c2VkIHRvIHBvbGwgZm9yIE1lc3NhZ2UgQmF0Y2hcbiAgICogY29tcGxldGlvbi4gVG8gYWNjZXNzIHRoZSByZXN1bHRzIG9mIGEgTWVzc2FnZSBCYXRjaCwgbWFrZSBhIHJlcXVlc3QgdG8gdGhlXG4gICAqIGByZXN1bHRzX3VybGAgZmllbGQgaW4gdGhlIHJlc3BvbnNlLlxuICAgKi9cbiAgcmV0cmlldmUobWVzc2FnZUJhdGNoSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8TWVzc2FnZUJhdGNoPiB7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5nZXQoYC92MS9tZXNzYWdlcy9iYXRjaGVzLyR7bWVzc2FnZUJhdGNoSWR9YCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdCBhbGwgTWVzc2FnZSBCYXRjaGVzIHdpdGhpbiBhIFdvcmtzcGFjZS4gTW9zdCByZWNlbnRseSBjcmVhdGVkIGJhdGNoZXMgYXJlXG4gICAqIHJldHVybmVkIGZpcnN0LlxuICAgKi9cbiAgbGlzdChcbiAgICBxdWVyeT86IEJhdGNoTGlzdFBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxNZXNzYWdlQmF0Y2hlc1BhZ2UsIE1lc3NhZ2VCYXRjaD47XG4gIGxpc3Qob3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLlBhZ2VQcm9taXNlPE1lc3NhZ2VCYXRjaGVzUGFnZSwgTWVzc2FnZUJhdGNoPjtcbiAgbGlzdChcbiAgICBxdWVyeTogQmF0Y2hMaXN0UGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPE1lc3NhZ2VCYXRjaGVzUGFnZSwgTWVzc2FnZUJhdGNoPiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocXVlcnkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5saXN0KHt9LCBxdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZ2V0QVBJTGlzdCgnL3YxL21lc3NhZ2VzL2JhdGNoZXMnLCBNZXNzYWdlQmF0Y2hlc1BhZ2UsIHsgcXVlcnksIC4uLm9wdGlvbnMgfSk7XG4gIH1cblxuICAvKipcbiAgICogRGVsZXRlIGEgTWVzc2FnZSBCYXRjaC5cbiAgICpcbiAgICogTWVzc2FnZSBCYXRjaGVzIGNhbiBvbmx5IGJlIGRlbGV0ZWQgb25jZSB0aGV5J3ZlIGZpbmlzaGVkIHByb2Nlc3NpbmcuIElmIHlvdSdkXG4gICAqIGxpa2UgdG8gZGVsZXRlIGFuIGluLXByb2dyZXNzIGJhdGNoLCB5b3UgbXVzdCBmaXJzdCBjYW5jZWwgaXQuXG4gICAqL1xuICBkZWxldGUobWVzc2FnZUJhdGNoSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8RGVsZXRlZE1lc3NhZ2VCYXRjaD4ge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZGVsZXRlKGAvdjEvbWVzc2FnZXMvYmF0Y2hlcy8ke21lc3NhZ2VCYXRjaElkfWAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIEJhdGNoZXMgbWF5IGJlIGNhbmNlbGVkIGFueSB0aW1lIGJlZm9yZSBwcm9jZXNzaW5nIGVuZHMuIE9uY2UgY2FuY2VsbGF0aW9uIGlzXG4gICAqIGluaXRpYXRlZCwgdGhlIGJhdGNoIGVudGVycyBhIGBjYW5jZWxpbmdgIHN0YXRlLCBhdCB3aGljaCB0aW1lIHRoZSBzeXN0ZW0gbWF5XG4gICAqIGNvbXBsZXRlIGFueSBpbi1wcm9ncmVzcywgbm9uLWludGVycnVwdGlibGUgcmVxdWVzdHMgYmVmb3JlIGZpbmFsaXppbmdcbiAgICogY2FuY2VsbGF0aW9uLlxuICAgKlxuICAgKiBUaGUgbnVtYmVyIG9mIGNhbmNlbGVkIHJlcXVlc3RzIGlzIHNwZWNpZmllZCBpbiBgcmVxdWVzdF9jb3VudHNgLiBUbyBkZXRlcm1pbmVcbiAgICogd2hpY2ggcmVxdWVzdHMgd2VyZSBjYW5jZWxlZCwgY2hlY2sgdGhlIGluZGl2aWR1YWwgcmVzdWx0cyB3aXRoaW4gdGhlIGJhdGNoLlxuICAgKiBOb3RlIHRoYXQgY2FuY2VsbGF0aW9uIG1heSBub3QgcmVzdWx0IGluIGFueSBjYW5jZWxlZCByZXF1ZXN0cyBpZiB0aGV5IHdlcmVcbiAgICogbm9uLWludGVycnVwdGlibGUuXG4gICAqL1xuICBjYW5jZWwobWVzc2FnZUJhdGNoSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8TWVzc2FnZUJhdGNoPiB7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5wb3N0KGAvdjEvbWVzc2FnZXMvYmF0Y2hlcy8ke21lc3NhZ2VCYXRjaElkfS9jYW5jZWxgLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdHJlYW1zIHRoZSByZXN1bHRzIG9mIGEgTWVzc2FnZSBCYXRjaCBhcyBhIGAuanNvbmxgIGZpbGUuXG4gICAqXG4gICAqIEVhY2ggbGluZSBpbiB0aGUgZmlsZSBpcyBhIEpTT04gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBhIHNpbmdsZSByZXF1ZXN0XG4gICAqIGluIHRoZSBNZXNzYWdlIEJhdGNoLiBSZXN1bHRzIGFyZSBub3QgZ3VhcmFudGVlZCB0byBiZSBpbiB0aGUgc2FtZSBvcmRlciBhc1xuICAgKiByZXF1ZXN0cy4gVXNlIHRoZSBgY3VzdG9tX2lkYCBmaWVsZCB0byBtYXRjaCByZXN1bHRzIHRvIHJlcXVlc3RzLlxuICAgKi9cbiAgYXN5bmMgcmVzdWx0cyhcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBQcm9taXNlPEpTT05MRGVjb2RlcjxNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2U+PiB7XG4gICAgY29uc3QgYmF0Y2ggPSBhd2FpdCB0aGlzLnJldHJpZXZlKG1lc3NhZ2VCYXRjaElkKTtcbiAgICBpZiAoIWJhdGNoLnJlc3VsdHNfdXJsKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoXG4gICAgICAgIGBObyBiYXRjaCBcXGByZXN1bHRzX3VybFxcYDsgSGFzIGl0IGZpbmlzaGVkIHByb2Nlc3Npbmc/ICR7YmF0Y2gucHJvY2Vzc2luZ19zdGF0dXN9IC0gJHtiYXRjaC5pZH1gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gdGhpcy5fY2xpZW50XG4gICAgICAuZ2V0KGJhdGNoLnJlc3VsdHNfdXJsLCB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9iaW5hcnknLFxuICAgICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICAgIH0sXG4gICAgICAgIF9fYmluYXJ5UmVzcG9uc2U6IHRydWUsXG4gICAgICB9KVxuICAgICAgLl90aGVuVW53cmFwKChfLCBwcm9wcykgPT4gSlNPTkxEZWNvZGVyLmZyb21SZXNwb25zZShwcm9wcy5yZXNwb25zZSwgcHJvcHMuY29udHJvbGxlcikpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNZXNzYWdlQmF0Y2hlc1BhZ2UgZXh0ZW5kcyBQYWdlPE1lc3NhZ2VCYXRjaD4ge31cblxuZXhwb3J0IGludGVyZmFjZSBEZWxldGVkTWVzc2FnZUJhdGNoIHtcbiAgLyoqXG4gICAqIElEIG9mIHRoZSBNZXNzYWdlIEJhdGNoLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogRGVsZXRlZCBvYmplY3QgdHlwZS5cbiAgICpcbiAgICogRm9yIE1lc3NhZ2UgQmF0Y2hlcywgdGhpcyBpcyBhbHdheXMgYFwibWVzc2FnZV9iYXRjaF9kZWxldGVkXCJgLlxuICAgKi9cbiAgdHlwZTogJ21lc3NhZ2VfYmF0Y2hfZGVsZXRlZCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUJhdGNoIHtcbiAgLyoqXG4gICAqIFVuaXF1ZSBvYmplY3QgaWRlbnRpZmllci5cbiAgICpcbiAgICogVGhlIGZvcm1hdCBhbmQgbGVuZ3RoIG9mIElEcyBtYXkgY2hhbmdlIG92ZXIgdGltZS5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggdGhlIE1lc3NhZ2UgQmF0Y2ggd2FzXG4gICAqIGFyY2hpdmVkIGFuZCBpdHMgcmVzdWx0cyBiZWNhbWUgdW5hdmFpbGFibGUuXG4gICAqL1xuICBhcmNoaXZlZF9hdDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCBjYW5jZWxsYXRpb24gd2FzXG4gICAqIGluaXRpYXRlZCBmb3IgdGhlIE1lc3NhZ2UgQmF0Y2guIFNwZWNpZmllZCBvbmx5IGlmIGNhbmNlbGxhdGlvbiB3YXMgaW5pdGlhdGVkLlxuICAgKi9cbiAgY2FuY2VsX2luaXRpYXRlZF9hdDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCB0aGUgTWVzc2FnZSBCYXRjaCB3YXNcbiAgICogY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCBwcm9jZXNzaW5nIGZvciB0aGVcbiAgICogTWVzc2FnZSBCYXRjaCBlbmRlZC4gU3BlY2lmaWVkIG9ubHkgb25jZSBwcm9jZXNzaW5nIGVuZHMuXG4gICAqXG4gICAqIFByb2Nlc3NpbmcgZW5kcyB3aGVuIGV2ZXJ5IHJlcXVlc3QgaW4gYSBNZXNzYWdlIEJhdGNoIGhhcyBlaXRoZXIgc3VjY2VlZGVkLFxuICAgKiBlcnJvcmVkLCBjYW5jZWxlZCwgb3IgZXhwaXJlZC5cbiAgICovXG4gIGVuZGVkX2F0OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIHRoZSBNZXNzYWdlIEJhdGNoIHdpbGxcbiAgICogZXhwaXJlIGFuZCBlbmQgcHJvY2Vzc2luZywgd2hpY2ggaXMgMjQgaG91cnMgYWZ0ZXIgY3JlYXRpb24uXG4gICAqL1xuICBleHBpcmVzX2F0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFByb2Nlc3Npbmcgc3RhdHVzIG9mIHRoZSBNZXNzYWdlIEJhdGNoLlxuICAgKi9cbiAgcHJvY2Vzc2luZ19zdGF0dXM6ICdpbl9wcm9ncmVzcycgfCAnY2FuY2VsaW5nJyB8ICdlbmRlZCc7XG5cbiAgLyoqXG4gICAqIFRhbGxpZXMgcmVxdWVzdHMgd2l0aGluIHRoZSBNZXNzYWdlIEJhdGNoLCBjYXRlZ29yaXplZCBieSB0aGVpciBzdGF0dXMuXG4gICAqXG4gICAqIFJlcXVlc3RzIHN0YXJ0IGFzIGBwcm9jZXNzaW5nYCBhbmQgbW92ZSB0byBvbmUgb2YgdGhlIG90aGVyIHN0YXR1c2VzIG9ubHkgb25jZVxuICAgKiBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgYmF0Y2ggZW5kcy4gVGhlIHN1bSBvZiBhbGwgdmFsdWVzIGFsd2F5cyBtYXRjaGVzIHRoZVxuICAgKiB0b3RhbCBudW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIGJhdGNoLlxuICAgKi9cbiAgcmVxdWVzdF9jb3VudHM6IE1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHM7XG5cbiAgLyoqXG4gICAqIFVSTCB0byBhIGAuanNvbmxgIGZpbGUgY29udGFpbmluZyB0aGUgcmVzdWx0cyBvZiB0aGUgTWVzc2FnZSBCYXRjaCByZXF1ZXN0cy5cbiAgICogU3BlY2lmaWVkIG9ubHkgb25jZSBwcm9jZXNzaW5nIGVuZHMuXG4gICAqXG4gICAqIFJlc3VsdHMgaW4gdGhlIGZpbGUgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlIGluIHRoZSBzYW1lIG9yZGVyIGFzIHJlcXVlc3RzLiBVc2VcbiAgICogdGhlIGBjdXN0b21faWRgIGZpZWxkIHRvIG1hdGNoIHJlc3VsdHMgdG8gcmVxdWVzdHMuXG4gICAqL1xuICByZXN1bHRzX3VybDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogT2JqZWN0IHR5cGUuXG4gICAqXG4gICAqIEZvciBNZXNzYWdlIEJhdGNoZXMsIHRoaXMgaXMgYWx3YXlzIGBcIm1lc3NhZ2VfYmF0Y2hcImAuXG4gICAqL1xuICB0eXBlOiAnbWVzc2FnZV9iYXRjaCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQge1xuICB0eXBlOiAnY2FuY2VsZWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQge1xuICBlcnJvcjogU2hhcmVkLkVycm9yUmVzcG9uc2U7XG5cbiAgdHlwZTogJ2Vycm9yZWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQge1xuICB0eXBlOiAnZXhwaXJlZCc7XG59XG5cbi8qKlxuICogVGhpcyBpcyBhIHNpbmdsZSBsaW5lIGluIHRoZSByZXNwb25zZSBgLmpzb25sYCBmaWxlIGFuZCBkb2VzIG5vdCByZXByZXNlbnQgdGhlXG4gKiByZXNwb25zZSBhcyBhIHdob2xlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSB7XG4gIC8qKlxuICAgKiBEZXZlbG9wZXItcHJvdmlkZWQgSUQgY3JlYXRlZCBmb3IgZWFjaCByZXF1ZXN0IGluIGEgTWVzc2FnZSBCYXRjaC4gVXNlZnVsIGZvclxuICAgKiBtYXRjaGluZyByZXN1bHRzIHRvIHJlcXVlc3RzLCBhcyByZXN1bHRzIG1heSBiZSBnaXZlbiBvdXQgb2YgcmVxdWVzdCBvcmRlci5cbiAgICpcbiAgICogTXVzdCBiZSB1bmlxdWUgZm9yIGVhY2ggcmVxdWVzdCB3aXRoaW4gdGhlIE1lc3NhZ2UgQmF0Y2guXG4gICAqL1xuICBjdXN0b21faWQ6IHN0cmluZztcblxuICAvKipcbiAgICogUHJvY2Vzc2luZyByZXN1bHQgZm9yIHRoaXMgcmVxdWVzdC5cbiAgICpcbiAgICogQ29udGFpbnMgYSBNZXNzYWdlIG91dHB1dCBpZiBwcm9jZXNzaW5nIHdhcyBzdWNjZXNzZnVsLCBhbiBlcnJvciByZXNwb25zZSBpZlxuICAgKiBwcm9jZXNzaW5nIGZhaWxlZCwgb3IgdGhlIHJlYXNvbiB3aHkgcHJvY2Vzc2luZyB3YXMgbm90IGF0dGVtcHRlZCwgc3VjaCBhc1xuICAgKiBjYW5jZWxsYXRpb24gb3IgZXhwaXJhdGlvbi5cbiAgICovXG4gIHJlc3VsdDogTWVzc2FnZUJhdGNoUmVzdWx0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMge1xuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgaGF2ZSBiZWVuIGNhbmNlbGVkLlxuICAgKlxuICAgKiBUaGlzIGlzIHplcm8gdW50aWwgcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIE1lc3NhZ2UgQmF0Y2ggaGFzIGVuZGVkLlxuICAgKi9cbiAgY2FuY2VsZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgZW5jb3VudGVyZWQgYW4gZXJyb3IuXG4gICAqXG4gICAqIFRoaXMgaXMgemVybyB1bnRpbCBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgTWVzc2FnZSBCYXRjaCBoYXMgZW5kZWQuXG4gICAqL1xuICBlcnJvcmVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGhhdmUgZXhwaXJlZC5cbiAgICpcbiAgICogVGhpcyBpcyB6ZXJvIHVudGlsIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBNZXNzYWdlIEJhdGNoIGhhcyBlbmRlZC5cbiAgICovXG4gIGV4cGlyZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgYXJlIHByb2Nlc3NpbmcuXG4gICAqL1xuICBwcm9jZXNzaW5nOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGhhdmUgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS5cbiAgICpcbiAgICogVGhpcyBpcyB6ZXJvIHVudGlsIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBNZXNzYWdlIEJhdGNoIGhhcyBlbmRlZC5cbiAgICovXG4gIHN1Y2NlZWRlZDogbnVtYmVyO1xufVxuXG4vKipcbiAqIFByb2Nlc3NpbmcgcmVzdWx0IGZvciB0aGlzIHJlcXVlc3QuXG4gKlxuICogQ29udGFpbnMgYSBNZXNzYWdlIG91dHB1dCBpZiBwcm9jZXNzaW5nIHdhcyBzdWNjZXNzZnVsLCBhbiBlcnJvciByZXNwb25zZSBpZlxuICogcHJvY2Vzc2luZyBmYWlsZWQsIG9yIHRoZSByZWFzb24gd2h5IHByb2Nlc3Npbmcgd2FzIG5vdCBhdHRlbXB0ZWQsIHN1Y2ggYXNcbiAqIGNhbmNlbGxhdGlvbiBvciBleHBpcmF0aW9uLlxuICovXG5leHBvcnQgdHlwZSBNZXNzYWdlQmF0Y2hSZXN1bHQgPVxuICB8IE1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdFxuICB8IE1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHRcbiAgfCBNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdFxuICB8IE1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0IHtcbiAgbWVzc2FnZTogTWVzc2FnZXNBUEkuTWVzc2FnZTtcblxuICB0eXBlOiAnc3VjY2VlZGVkJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXRjaENyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBMaXN0IG9mIHJlcXVlc3RzIGZvciBwcm9tcHQgY29tcGxldGlvbi4gRWFjaCBpcyBhbiBpbmRpdmlkdWFsIHJlcXVlc3QgdG8gY3JlYXRlXG4gICAqIGEgTWVzc2FnZS5cbiAgICovXG4gIHJlcXVlc3RzOiBBcnJheTxCYXRjaENyZWF0ZVBhcmFtcy5SZXF1ZXN0Pjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBCYXRjaENyZWF0ZVBhcmFtcyB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgUmVxdWVzdCB7XG4gICAgLyoqXG4gICAgICogRGV2ZWxvcGVyLXByb3ZpZGVkIElEIGNyZWF0ZWQgZm9yIGVhY2ggcmVxdWVzdCBpbiBhIE1lc3NhZ2UgQmF0Y2guIFVzZWZ1bCBmb3JcbiAgICAgKiBtYXRjaGluZyByZXN1bHRzIHRvIHJlcXVlc3RzLCBhcyByZXN1bHRzIG1heSBiZSBnaXZlbiBvdXQgb2YgcmVxdWVzdCBvcmRlci5cbiAgICAgKlxuICAgICAqIE11c3QgYmUgdW5pcXVlIGZvciBlYWNoIHJlcXVlc3Qgd2l0aGluIHRoZSBNZXNzYWdlIEJhdGNoLlxuICAgICAqL1xuICAgIGN1c3RvbV9pZDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogTWVzc2FnZXMgQVBJIGNyZWF0aW9uIHBhcmFtZXRlcnMgZm9yIHRoZSBpbmRpdmlkdWFsIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBTZWUgdGhlIFtNZXNzYWdlcyBBUEkgcmVmZXJlbmNlXSgvZW4vYXBpL21lc3NhZ2VzKSBmb3IgZnVsbCBkb2N1bWVudGF0aW9uIG9uXG4gICAgICogYXZhaWxhYmxlIHBhcmFtZXRlcnMuXG4gICAgICovXG4gICAgcGFyYW1zOiBNZXNzYWdlc0FQSS5NZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hMaXN0UGFyYW1zIGV4dGVuZHMgUGFnZVBhcmFtcyB7fVxuXG5CYXRjaGVzLk1lc3NhZ2VCYXRjaGVzUGFnZSA9IE1lc3NhZ2VCYXRjaGVzUGFnZTtcblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIEJhdGNoZXMge1xuICBleHBvcnQge1xuICAgIHR5cGUgRGVsZXRlZE1lc3NhZ2VCYXRjaCBhcyBEZWxldGVkTWVzc2FnZUJhdGNoLFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoIGFzIE1lc3NhZ2VCYXRjaCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0IGFzIE1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0LFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCBhcyBNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0LFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCBhcyBNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0LFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlIGFzIE1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMgYXMgTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaFJlc3VsdCBhcyBNZXNzYWdlQmF0Y2hSZXN1bHQsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQgYXMgTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0LFxuICAgIE1lc3NhZ2VCYXRjaGVzUGFnZSBhcyBNZXNzYWdlQmF0Y2hlc1BhZ2UsXG4gICAgdHlwZSBCYXRjaENyZWF0ZVBhcmFtcyBhcyBCYXRjaENyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIEJhdGNoTGlzdFBhcmFtcyBhcyBCYXRjaExpc3RQYXJhbXMsXG4gIH07XG59XG4iLCAiaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vY29yZS5qc1wiO1xuaW1wb3J0IHsgQW50aHJvcGljRXJyb3IsIEFQSVVzZXJBYm9ydEVycm9yIH0gZnJvbSBcIi4uL2Vycm9yLmpzXCI7XG5pbXBvcnQge1xuICB0eXBlIENvbnRlbnRCbG9jayxcbiAgTWVzc2FnZXMsXG4gIHR5cGUgTWVzc2FnZSxcbiAgdHlwZSBNZXNzYWdlU3RyZWFtRXZlbnQsXG4gIHR5cGUgTWVzc2FnZVBhcmFtLFxuICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2UsXG4gIHR5cGUgVGV4dEJsb2NrLFxuICB0eXBlIFRleHRDaXRhdGlvbixcbn0gZnJvbSBcIi4uL3Jlc291cmNlcy9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHsgdHlwZSBSZWFkYWJsZVN0cmVhbSwgdHlwZSBSZXNwb25zZSB9IGZyb20gXCIuLi9fc2hpbXMvaW5kZXguanNcIjtcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuLi9zdHJlYW1pbmcuanNcIjtcbmltcG9ydCB7IHBhcnRpYWxQYXJzZSB9IGZyb20gXCIuLi9fdmVuZG9yL3BhcnRpYWwtanNvbi1wYXJzZXIvcGFyc2VyLmpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZVN0cmVhbUV2ZW50cyB7XG4gIGNvbm5lY3Q6ICgpID0+IHZvaWQ7XG4gIHN0cmVhbUV2ZW50OiAoZXZlbnQ6IE1lc3NhZ2VTdHJlYW1FdmVudCwgc25hcHNob3Q6IE1lc3NhZ2UpID0+IHZvaWQ7XG4gIHRleHQ6ICh0ZXh0RGVsdGE6IHN0cmluZywgdGV4dFNuYXBzaG90OiBzdHJpbmcpID0+IHZvaWQ7XG4gIGNpdGF0aW9uOiAoY2l0YXRpb246IFRleHRDaXRhdGlvbiwgY2l0YXRpb25zU25hcHNob3Q6IFRleHRDaXRhdGlvbltdKSA9PiB2b2lkO1xuICBpbnB1dEpzb246IChwYXJ0aWFsSnNvbjogc3RyaW5nLCBqc29uU25hcHNob3Q6IHVua25vd24pID0+IHZvaWQ7XG4gIG1lc3NhZ2U6IChtZXNzYWdlOiBNZXNzYWdlKSA9PiB2b2lkO1xuICBjb250ZW50QmxvY2s6IChjb250ZW50OiBDb250ZW50QmxvY2spID0+IHZvaWQ7XG4gIGZpbmFsTWVzc2FnZTogKG1lc3NhZ2U6IE1lc3NhZ2UpID0+IHZvaWQ7XG4gIGVycm9yOiAoZXJyb3I6IEFudGhyb3BpY0Vycm9yKSA9PiB2b2lkO1xuICBhYm9ydDogKGVycm9yOiBBUElVc2VyQWJvcnRFcnJvcikgPT4gdm9pZDtcbiAgZW5kOiAoKSA9PiB2b2lkO1xufVxuXG50eXBlIE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+ID0ge1xuICBsaXN0ZW5lcjogTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF07XG4gIG9uY2U/OiBib29sZWFuO1xufVtdO1xuXG5jb25zdCBKU09OX0JVRl9QUk9QRVJUWSA9ICdfX2pzb25fYnVmJztcblxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VTdHJlYW0gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPE1lc3NhZ2VTdHJlYW1FdmVudD4ge1xuICBtZXNzYWdlczogTWVzc2FnZVBhcmFtW10gPSBbXTtcbiAgcmVjZWl2ZWRNZXNzYWdlczogTWVzc2FnZVtdID0gW107XG4gICNjdXJyZW50TWVzc2FnZVNuYXBzaG90OiBNZXNzYWdlIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlciA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcblxuICAjY29ubmVjdGVkUHJvbWlzZTogUHJvbWlzZTxSZXNwb25zZSB8IG51bGw+O1xuICAjcmVzb2x2ZUNvbm5lY3RlZFByb21pc2U6IChyZXNwb25zZTogUmVzcG9uc2UgfCBudWxsKSA9PiB2b2lkID0gKCkgPT4ge307XG4gICNyZWplY3RDb25uZWN0ZWRQcm9taXNlOiAoZXJyb3I6IEFudGhyb3BpY0Vycm9yKSA9PiB2b2lkID0gKCkgPT4ge307XG5cbiAgI2VuZFByb21pc2U6IFByb21pc2U8dm9pZD47XG4gICNyZXNvbHZlRW5kUHJvbWlzZTogKCkgPT4gdm9pZCA9ICgpID0+IHt9O1xuICAjcmVqZWN0RW5kUHJvbWlzZTogKGVycm9yOiBBbnRocm9waWNFcnJvcikgPT4gdm9pZCA9ICgpID0+IHt9O1xuXG4gICNsaXN0ZW5lcnM6IHsgW0V2ZW50IGluIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHNdPzogTWVzc2FnZVN0cmVhbUV2ZW50TGlzdGVuZXJzPEV2ZW50PiB9ID0ge307XG5cbiAgI2VuZGVkID0gZmFsc2U7XG4gICNlcnJvcmVkID0gZmFsc2U7XG4gICNhYm9ydGVkID0gZmFsc2U7XG4gICNjYXRjaGluZ1Byb21pc2VDcmVhdGVkID0gZmFsc2U7XG4gICNyZXNwb25zZTogUmVzcG9uc2UgfCBudWxsIHwgdW5kZWZpbmVkO1xuICAjcmVxdWVzdF9pZDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLiNjb25uZWN0ZWRQcm9taXNlID0gbmV3IFByb21pc2U8UmVzcG9uc2UgfCBudWxsPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLiNyZXNvbHZlQ29ubmVjdGVkUHJvbWlzZSA9IHJlc29sdmU7XG4gICAgICB0aGlzLiNyZWplY3RDb25uZWN0ZWRQcm9taXNlID0gcmVqZWN0O1xuICAgIH0pO1xuXG4gICAgdGhpcy4jZW5kUHJvbWlzZSA9IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuI3Jlc29sdmVFbmRQcm9taXNlID0gcmVzb2x2ZTtcbiAgICAgIHRoaXMuI3JlamVjdEVuZFByb21pc2UgPSByZWplY3Q7XG4gICAgfSk7XG5cbiAgICAvLyBEb24ndCBsZXQgdGhlc2UgcHJvbWlzZXMgY2F1c2UgdW5oYW5kbGVkIHJlamVjdGlvbiBlcnJvcnMuXG4gICAgLy8gd2Ugd2lsbCBtYW51YWxseSBjYXVzZSBhbiB1bmhhbmRsZWQgcmVqZWN0aW9uIGVycm9yIGxhdGVyXG4gICAgLy8gaWYgdGhlIHVzZXIgaGFzbid0IHJlZ2lzdGVyZWQgYW55IGVycm9yIGxpc3RlbmVyIG9yIGNhbGxlZFxuICAgIC8vIGFueSBwcm9taXNlLXJldHVybmluZyBtZXRob2QuXG4gICAgdGhpcy4jY29ubmVjdGVkUHJvbWlzZS5jYXRjaCgoKSA9PiB7fSk7XG4gICAgdGhpcy4jZW5kUHJvbWlzZS5jYXRjaCgoKSA9PiB7fSk7XG4gIH1cblxuICBnZXQgcmVzcG9uc2UoKTogUmVzcG9uc2UgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy4jcmVzcG9uc2U7XG4gIH1cblxuICBnZXQgcmVxdWVzdF9pZCgpOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy4jcmVxdWVzdF9pZDtcbiAgfVxuXG4gIC8qKlxuICAgKiBSZXR1cm5zIHRoZSBgTWVzc2FnZVN0cmVhbWAgZGF0YSwgdGhlIHJhdyBgUmVzcG9uc2VgIGluc3RhbmNlIGFuZCB0aGUgSUQgb2YgdGhlIHJlcXVlc3QsXG4gICAqIHJldHVybmVkIHZpZSB0aGUgYHJlcXVlc3QtaWRgIGhlYWRlciB3aGljaCBpcyB1c2VmdWwgZm9yIGRlYnVnZ2luZyByZXF1ZXN0cyBhbmQgcmVzcG9ydGluZ1xuICAgKiBpc3N1ZXMgdG8gQW50aHJvcGljLlxuICAgKlxuICAgKiBUaGlzIGlzIHRoZSBzYW1lIGFzIHRoZSBgQVBJUHJvbWlzZS53aXRoUmVzcG9uc2UoKWAgbWV0aG9kLlxuICAgKlxuICAgKiBUaGlzIG1ldGhvZCB3aWxsIHJhaXNlIGFuIGVycm9yIGlmIHlvdSBjcmVhdGVkIHRoZSBzdHJlYW0gdXNpbmcgYE1lc3NhZ2VTdHJlYW0uZnJvbVJlYWRhYmxlU3RyZWFtYFxuICAgKiBhcyBubyBgUmVzcG9uc2VgIGlzIGF2YWlsYWJsZS5cbiAgICovXG4gIGFzeW5jIHdpdGhSZXNwb25zZSgpOiBQcm9taXNlPHtcbiAgICBkYXRhOiBNZXNzYWdlU3RyZWFtO1xuICAgIHJlc3BvbnNlOiBSZXNwb25zZTtcbiAgICByZXF1ZXN0X2lkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuICB9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiNjb25uZWN0ZWRQcm9taXNlO1xuICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IHJlc29sdmUgYSBgUmVzcG9uc2VgIG9iamVjdCcpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiB0aGlzLFxuICAgICAgcmVzcG9uc2UsXG4gICAgICByZXF1ZXN0X2lkOiByZXNwb25zZS5oZWFkZXJzLmdldCgncmVxdWVzdC1pZCcpLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogSW50ZW5kZWQgZm9yIHVzZSBvbiB0aGUgZnJvbnRlbmQsIGNvbnN1bWluZyBhIHN0cmVhbSBwcm9kdWNlZCB3aXRoXG4gICAqIGAudG9SZWFkYWJsZVN0cmVhbSgpYCBvbiB0aGUgYmFja2VuZC5cbiAgICpcbiAgICogTm90ZSB0aGF0IG1lc3NhZ2VzIHNlbnQgdG8gdGhlIG1vZGVsIGRvIG5vdCBhcHBlYXIgaW4gYC5vbignbWVzc2FnZScpYFxuICAgKiBpbiB0aGlzIGNvbnRleHQuXG4gICAqL1xuICBzdGF0aWMgZnJvbVJlYWRhYmxlU3RyZWFtKHN0cmVhbTogUmVhZGFibGVTdHJlYW0pOiBNZXNzYWdlU3RyZWFtIHtcbiAgICBjb25zdCBydW5uZXIgPSBuZXcgTWVzc2FnZVN0cmVhbSgpO1xuICAgIHJ1bm5lci5fcnVuKCgpID0+IHJ1bm5lci5fZnJvbVJlYWRhYmxlU3RyZWFtKHN0cmVhbSkpO1xuICAgIHJldHVybiBydW5uZXI7XG4gIH1cblxuICBzdGF0aWMgY3JlYXRlTWVzc2FnZShcbiAgICBtZXNzYWdlczogTWVzc2FnZXMsXG4gICAgcGFyYW1zOiBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogTWVzc2FnZVN0cmVhbSB7XG4gICAgY29uc3QgcnVubmVyID0gbmV3IE1lc3NhZ2VTdHJlYW0oKTtcbiAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgcGFyYW1zLm1lc3NhZ2VzKSB7XG4gICAgICBydW5uZXIuX2FkZE1lc3NhZ2VQYXJhbShtZXNzYWdlKTtcbiAgICB9XG4gICAgcnVubmVyLl9ydW4oKCkgPT5cbiAgICAgIHJ1bm5lci5fY3JlYXRlTWVzc2FnZShcbiAgICAgICAgbWVzc2FnZXMsXG4gICAgICAgIHsgLi4ucGFyYW1zLCBzdHJlYW06IHRydWUgfSxcbiAgICAgICAgeyAuLi5vcHRpb25zLCBoZWFkZXJzOiB7IC4uLm9wdGlvbnM/LmhlYWRlcnMsICdYLVN0YWlubGVzcy1IZWxwZXItTWV0aG9kJzogJ3N0cmVhbScgfSB9LFxuICAgICAgKSxcbiAgICApO1xuICAgIHJldHVybiBydW5uZXI7XG4gIH1cblxuICBwcm90ZWN0ZWQgX3J1bihleGVjdXRvcjogKCkgPT4gUHJvbWlzZTxhbnk+KSB7XG4gICAgZXhlY3V0b3IoKS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuX2VtaXRGaW5hbCgpO1xuICAgICAgdGhpcy5fZW1pdCgnZW5kJyk7XG4gICAgfSwgdGhpcy4jaGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9hZGRNZXNzYWdlUGFyYW0obWVzc2FnZTogTWVzc2FnZVBhcmFtKSB7XG4gICAgdGhpcy5tZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9hZGRNZXNzYWdlKG1lc3NhZ2U6IE1lc3NhZ2UsIGVtaXQgPSB0cnVlKSB7XG4gICAgdGhpcy5yZWNlaXZlZE1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gICAgaWYgKGVtaXQpIHtcbiAgICAgIHRoaXMuX2VtaXQoJ21lc3NhZ2UnLCBtZXNzYWdlKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgX2NyZWF0ZU1lc3NhZ2UoXG4gICAgbWVzc2FnZXM6IE1lc3NhZ2VzLFxuICAgIHBhcmFtczogTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc2lnbmFsID0gb3B0aW9ucz8uc2lnbmFsO1xuICAgIGlmIChzaWduYWwpIHtcbiAgICAgIGlmIChzaWduYWwuYWJvcnRlZCkgdGhpcy5jb250cm9sbGVyLmFib3J0KCk7XG4gICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKSk7XG4gICAgfVxuICAgIHRoaXMuI2JlZ2luUmVxdWVzdCgpO1xuICAgIGNvbnN0IHsgcmVzcG9uc2UsIGRhdGE6IHN0cmVhbSB9ID0gYXdhaXQgbWVzc2FnZXNcbiAgICAgIC5jcmVhdGUoeyAuLi5wYXJhbXMsIHN0cmVhbTogdHJ1ZSB9LCB7IC4uLm9wdGlvbnMsIHNpZ25hbDogdGhpcy5jb250cm9sbGVyLnNpZ25hbCB9KVxuICAgICAgLndpdGhSZXNwb25zZSgpO1xuICAgIHRoaXMuX2Nvbm5lY3RlZChyZXNwb25zZSk7XG4gICAgZm9yIGF3YWl0IChjb25zdCBldmVudCBvZiBzdHJlYW0pIHtcbiAgICAgIHRoaXMuI2FkZFN0cmVhbUV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgaWYgKHN0cmVhbS5jb250cm9sbGVyLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgdGhyb3cgbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuICAgIHRoaXMuI2VuZFJlcXVlc3QoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfY29ubmVjdGVkKHJlc3BvbnNlOiBSZXNwb25zZSB8IG51bGwpIHtcbiAgICBpZiAodGhpcy5lbmRlZCkgcmV0dXJuO1xuICAgIHRoaXMuI3Jlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgdGhpcy4jcmVxdWVzdF9pZCA9IHJlc3BvbnNlPy5oZWFkZXJzLmdldCgncmVxdWVzdC1pZCcpO1xuICAgIHRoaXMuI3Jlc29sdmVDb25uZWN0ZWRQcm9taXNlKHJlc3BvbnNlKTtcbiAgICB0aGlzLl9lbWl0KCdjb25uZWN0Jyk7XG4gIH1cblxuICBnZXQgZW5kZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2VuZGVkO1xuICB9XG5cbiAgZ2V0IGVycm9yZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2Vycm9yZWQ7XG4gIH1cblxuICBnZXQgYWJvcnRlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4jYWJvcnRlZDtcbiAgfVxuXG4gIGFib3J0KCkge1xuICAgIHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIGxpc3RlbmVyIGZ1bmN0aW9uIHRvIHRoZSBlbmQgb2YgdGhlIGxpc3RlbmVycyBhcnJheSBmb3IgdGhlIGV2ZW50LlxuICAgKiBObyBjaGVja3MgYXJlIG1hZGUgdG8gc2VlIGlmIHRoZSBsaXN0ZW5lciBoYXMgYWxyZWFkeSBiZWVuIGFkZGVkLiBNdWx0aXBsZSBjYWxscyBwYXNzaW5nXG4gICAqIHRoZSBzYW1lIGNvbWJpbmF0aW9uIG9mIGV2ZW50IGFuZCBsaXN0ZW5lciB3aWxsIHJlc3VsdCBpbiB0aGUgbGlzdGVuZXIgYmVpbmcgYWRkZWQsIGFuZFxuICAgKiBjYWxsZWQsIG11bHRpcGxlIHRpbWVzLlxuICAgKiBAcmV0dXJucyB0aGlzIE1lc3NhZ2VTdHJlYW0sIHNvIHRoYXQgY2FsbHMgY2FuIGJlIGNoYWluZWRcbiAgICovXG4gIG9uPEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oZXZlbnQ6IEV2ZW50LCBsaXN0ZW5lcjogTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0pOiB0aGlzIHtcbiAgICBjb25zdCBsaXN0ZW5lcnM6IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gPVxuICAgICAgdGhpcy4jbGlzdGVuZXJzW2V2ZW50XSB8fCAodGhpcy4jbGlzdGVuZXJzW2V2ZW50XSA9IFtdKTtcbiAgICBsaXN0ZW5lcnMucHVzaCh7IGxpc3RlbmVyIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBsaXN0ZW5lciBmcm9tIHRoZSBsaXN0ZW5lciBhcnJheSBmb3IgdGhlIGV2ZW50LlxuICAgKiBvZmYoKSB3aWxsIHJlbW92ZSwgYXQgbW9zdCwgb25lIGluc3RhbmNlIG9mIGEgbGlzdGVuZXIgZnJvbSB0aGUgbGlzdGVuZXIgYXJyYXkuIElmIGFueSBzaW5nbGVcbiAgICogbGlzdGVuZXIgaGFzIGJlZW4gYWRkZWQgbXVsdGlwbGUgdGltZXMgdG8gdGhlIGxpc3RlbmVyIGFycmF5IGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50LCB0aGVuXG4gICAqIG9mZigpIG11c3QgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzIHRvIHJlbW92ZSBlYWNoIGluc3RhbmNlLlxuICAgKiBAcmV0dXJucyB0aGlzIE1lc3NhZ2VTdHJlYW0sIHNvIHRoYXQgY2FsbHMgY2FuIGJlIGNoYWluZWRcbiAgICovXG4gIG9mZjxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+KGV2ZW50OiBFdmVudCwgbGlzdGVuZXI6IE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdKTogdGhpcyB7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy4jbGlzdGVuZXJzW2V2ZW50XTtcbiAgICBpZiAoIWxpc3RlbmVycykgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuZmluZEluZGV4KChsKSA9PiBsLmxpc3RlbmVyID09PSBsaXN0ZW5lcik7XG4gICAgaWYgKGluZGV4ID49IDApIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBvbmUtdGltZSBsaXN0ZW5lciBmdW5jdGlvbiBmb3IgdGhlIGV2ZW50LiBUaGUgbmV4dCB0aW1lIHRoZSBldmVudCBpcyB0cmlnZ2VyZWQsXG4gICAqIHRoaXMgbGlzdGVuZXIgaXMgcmVtb3ZlZCBhbmQgdGhlbiBpbnZva2VkLlxuICAgKiBAcmV0dXJucyB0aGlzIE1lc3NhZ2VTdHJlYW0sIHNvIHRoYXQgY2FsbHMgY2FuIGJlIGNoYWluZWRcbiAgICovXG4gIG9uY2U8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihldmVudDogRXZlbnQsIGxpc3RlbmVyOiBNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XSk6IHRoaXMge1xuICAgIGNvbnN0IGxpc3RlbmVyczogTWVzc2FnZVN0cmVhbUV2ZW50TGlzdGVuZXJzPEV2ZW50PiA9XG4gICAgICB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdIHx8ICh0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdID0gW10pO1xuICAgIGxpc3RlbmVycy5wdXNoKHsgbGlzdGVuZXIsIG9uY2U6IHRydWUgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyBzaW1pbGFyIHRvIGAub25jZSgpYCwgYnV0IHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdGhlIG5leHQgdGltZVxuICAgKiB0aGUgZXZlbnQgaXMgdHJpZ2dlcmVkLCBpbnN0ZWFkIG9mIGNhbGxpbmcgYSBsaXN0ZW5lciBjYWxsYmFjay5cbiAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdGhlIG5leHQgdGltZSBnaXZlbiBldmVudCBpcyB0cmlnZ2VyZWQsXG4gICAqIG9yIHJlamVjdHMgaWYgYW4gZXJyb3IgaXMgZW1pdHRlZC4gIChJZiB5b3UgcmVxdWVzdCB0aGUgJ2Vycm9yJyBldmVudCxcbiAgICogcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBlcnJvcikuXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqXG4gICAqICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHN0cmVhbS5lbWl0dGVkKCdtZXNzYWdlJykgLy8gcmVqZWN0cyBpZiB0aGUgc3RyZWFtIGVycm9yc1xuICAgKi9cbiAgZW1pdHRlZDxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+KFxuICAgIGV2ZW50OiBFdmVudCxcbiAgKTogUHJvbWlzZTxcbiAgICBQYXJhbWV0ZXJzPE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdPiBleHRlbmRzIFtpbmZlciBQYXJhbV0gPyBQYXJhbVxuICAgIDogUGFyYW1ldGVyczxNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XT4gZXh0ZW5kcyBbXSA/IHZvaWRcbiAgICA6IFBhcmFtZXRlcnM8TWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+XG4gID4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLiNjYXRjaGluZ1Byb21pc2VDcmVhdGVkID0gdHJ1ZTtcbiAgICAgIGlmIChldmVudCAhPT0gJ2Vycm9yJykgdGhpcy5vbmNlKCdlcnJvcicsIHJlamVjdCk7XG4gICAgICB0aGlzLm9uY2UoZXZlbnQsIHJlc29sdmUgYXMgYW55KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGRvbmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCA9IHRydWU7XG4gICAgYXdhaXQgdGhpcy4jZW5kUHJvbWlzZTtcbiAgfVxuXG4gIGdldCBjdXJyZW50TWVzc2FnZSgpOiBNZXNzYWdlIHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdDtcbiAgfVxuXG4gICNnZXRGaW5hbE1lc3NhZ2UoKTogTWVzc2FnZSB7XG4gICAgaWYgKHRoaXMucmVjZWl2ZWRNZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcignc3RyZWFtIGVuZGVkIHdpdGhvdXQgcHJvZHVjaW5nIGEgTWVzc2FnZSB3aXRoIHJvbGU9YXNzaXN0YW50Jyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlY2VpdmVkTWVzc2FnZXMuYXQoLTEpITtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSB0aGUgZmluYWwgYXNzaXN0YW50IE1lc3NhZ2UgcmVzcG9uc2UsXG4gICAqIG9yIHJlamVjdHMgaWYgYW4gZXJyb3Igb2NjdXJyZWQgb3IgdGhlIHN0cmVhbSBlbmRlZCBwcmVtYXR1cmVseSB3aXRob3V0IHByb2R1Y2luZyBhIE1lc3NhZ2UuXG4gICAqL1xuICBhc3luYyBmaW5hbE1lc3NhZ2UoKTogUHJvbWlzZTxNZXNzYWdlPiB7XG4gICAgYXdhaXQgdGhpcy5kb25lKCk7XG4gICAgcmV0dXJuIHRoaXMuI2dldEZpbmFsTWVzc2FnZSgpO1xuICB9XG5cbiAgI2dldEZpbmFsVGV4dCgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLnJlY2VpdmVkTWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoJ3N0cmVhbSBlbmRlZCB3aXRob3V0IHByb2R1Y2luZyBhIE1lc3NhZ2Ugd2l0aCByb2xlPWFzc2lzdGFudCcpO1xuICAgIH1cbiAgICBjb25zdCB0ZXh0QmxvY2tzID0gdGhpcy5yZWNlaXZlZE1lc3NhZ2VzXG4gICAgICAuYXQoLTEpIVxuICAgICAgLmNvbnRlbnQuZmlsdGVyKChibG9jayk6IGJsb2NrIGlzIFRleHRCbG9jayA9PiBibG9jay50eXBlID09PSAndGV4dCcpXG4gICAgICAubWFwKChibG9jaykgPT4gYmxvY2sudGV4dCk7XG4gICAgaWYgKHRleHRCbG9ja3MubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoJ3N0cmVhbSBlbmRlZCB3aXRob3V0IHByb2R1Y2luZyBhIGNvbnRlbnQgYmxvY2sgd2l0aCB0eXBlPXRleHQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRleHRCbG9ja3Muam9pbignICcpO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHRoZSBmaW5hbCBhc3Npc3RhbnQgTWVzc2FnZSdzIHRleHQgcmVzcG9uc2UsIGNvbmNhdGVuYXRlZFxuICAgKiB0b2dldGhlciBpZiB0aGVyZSBhcmUgbW9yZSB0aGFuIG9uZSB0ZXh0IGJsb2Nrcy5cbiAgICogUmVqZWN0cyBpZiBhbiBlcnJvciBvY2N1cnJlZCBvciB0aGUgc3RyZWFtIGVuZGVkIHByZW1hdHVyZWx5IHdpdGhvdXQgcHJvZHVjaW5nIGEgTWVzc2FnZS5cbiAgICovXG4gIGFzeW5jIGZpbmFsVGV4dCgpOiBQcm9taXNlPHN0cmluZz4ge1xuICAgIGF3YWl0IHRoaXMuZG9uZSgpO1xuICAgIHJldHVybiB0aGlzLiNnZXRGaW5hbFRleHQoKTtcbiAgfVxuXG4gICNoYW5kbGVFcnJvciA9IChlcnJvcjogdW5rbm93bikgPT4ge1xuICAgIHRoaXMuI2Vycm9yZWQgPSB0cnVlO1xuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yICYmIGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgZXJyb3IgPSBuZXcgQVBJVXNlckFib3J0RXJyb3IoKTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQVBJVXNlckFib3J0RXJyb3IpIHtcbiAgICAgIHRoaXMuI2Fib3J0ZWQgPSB0cnVlO1xuICAgICAgcmV0dXJuIHRoaXMuX2VtaXQoJ2Fib3J0JywgZXJyb3IpO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBBbnRocm9waWNFcnJvcikge1xuICAgICAgcmV0dXJuIHRoaXMuX2VtaXQoJ2Vycm9yJywgZXJyb3IpO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgY29uc3QgYW50aHJvcGljRXJyb3I6IEFudGhyb3BpY0Vycm9yID0gbmV3IEFudGhyb3BpY0Vycm9yKGVycm9yLm1lc3NhZ2UpO1xuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgYW50aHJvcGljRXJyb3IuY2F1c2UgPSBlcnJvcjtcbiAgICAgIHJldHVybiB0aGlzLl9lbWl0KCdlcnJvcicsIGFudGhyb3BpY0Vycm9yKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2VtaXQoJ2Vycm9yJywgbmV3IEFudGhyb3BpY0Vycm9yKFN0cmluZyhlcnJvcikpKTtcbiAgfTtcblxuICBwcm90ZWN0ZWQgX2VtaXQ8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihcbiAgICBldmVudDogRXZlbnQsXG4gICAgLi4uYXJnczogUGFyYW1ldGVyczxNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XT5cbiAgKSB7XG4gICAgLy8gbWFrZSBzdXJlIHdlIGRvbid0IGVtaXQgYW55IE1lc3NhZ2VTdHJlYW1FdmVudHMgYWZ0ZXIgZW5kXG4gICAgaWYgKHRoaXMuI2VuZGVkKSByZXR1cm47XG5cbiAgICBpZiAoZXZlbnQgPT09ICdlbmQnKSB7XG4gICAgICB0aGlzLiNlbmRlZCA9IHRydWU7XG4gICAgICB0aGlzLiNyZXNvbHZlRW5kUHJvbWlzZSgpO1xuICAgIH1cblxuICAgIGNvbnN0IGxpc3RlbmVyczogTWVzc2FnZVN0cmVhbUV2ZW50TGlzdGVuZXJzPEV2ZW50PiB8IHVuZGVmaW5lZCA9IHRoaXMuI2xpc3RlbmVyc1tldmVudF07XG4gICAgaWYgKGxpc3RlbmVycykge1xuICAgICAgdGhpcy4jbGlzdGVuZXJzW2V2ZW50XSA9IGxpc3RlbmVycy5maWx0ZXIoKGwpID0+ICFsLm9uY2UpIGFzIGFueTtcbiAgICAgIGxpc3RlbmVycy5mb3JFYWNoKCh7IGxpc3RlbmVyIH06IGFueSkgPT4gbGlzdGVuZXIoLi4uYXJncykpO1xuICAgIH1cblxuICAgIGlmIChldmVudCA9PT0gJ2Fib3J0Jykge1xuICAgICAgY29uc3QgZXJyb3IgPSBhcmdzWzBdIGFzIEFQSVVzZXJBYm9ydEVycm9yO1xuICAgICAgaWYgKCF0aGlzLiNjYXRjaGluZ1Byb21pc2VDcmVhdGVkICYmICFsaXN0ZW5lcnM/Lmxlbmd0aCkge1xuICAgICAgICBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgICB0aGlzLiNyZWplY3RDb25uZWN0ZWRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuI3JlamVjdEVuZFByb21pc2UoZXJyb3IpO1xuICAgICAgdGhpcy5fZW1pdCgnZW5kJyk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50ID09PSAnZXJyb3InKSB7XG4gICAgICAvLyBOT1RFOiBfZW1pdCgnZXJyb3InLCBlcnJvcikgc2hvdWxkIG9ubHkgYmUgY2FsbGVkIGZyb20gI2hhbmRsZUVycm9yKCkuXG5cbiAgICAgIGNvbnN0IGVycm9yID0gYXJnc1swXSBhcyBBbnRocm9waWNFcnJvcjtcbiAgICAgIGlmICghdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCAmJiAhbGlzdGVuZXJzPy5sZW5ndGgpIHtcbiAgICAgICAgLy8gVHJpZ2dlciBhbiB1bmhhbmRsZWQgcmVqZWN0aW9uIGlmIHRoZSB1c2VyIGhhc24ndCByZWdpc3RlcmVkIGFueSBlcnJvciBoYW5kbGVycy5cbiAgICAgICAgLy8gSWYgeW91IGFyZSBzZWVpbmcgc3RhY2sgdHJhY2VzIGhlcmUsIG1ha2Ugc3VyZSB0byBoYW5kbGUgZXJyb3JzIHZpYSBlaXRoZXI6XG4gICAgICAgIC8vIC0gcnVubmVyLm9uKCdlcnJvcicsICgpID0+IC4uLilcbiAgICAgICAgLy8gLSBhd2FpdCBydW5uZXIuZG9uZSgpXG4gICAgICAgIC8vIC0gYXdhaXQgcnVubmVyLmZpbmFsLi4uKClcbiAgICAgICAgLy8gLSBldGMuXG4gICAgICAgIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuI3JlamVjdENvbm5lY3RlZFByb21pc2UoZXJyb3IpO1xuICAgICAgdGhpcy4jcmVqZWN0RW5kUHJvbWlzZShlcnJvcik7XG4gICAgICB0aGlzLl9lbWl0KCdlbmQnKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgX2VtaXRGaW5hbCgpIHtcbiAgICBjb25zdCBmaW5hbE1lc3NhZ2UgPSB0aGlzLnJlY2VpdmVkTWVzc2FnZXMuYXQoLTEpO1xuICAgIGlmIChmaW5hbE1lc3NhZ2UpIHtcbiAgICAgIHRoaXMuX2VtaXQoJ2ZpbmFsTWVzc2FnZScsIHRoaXMuI2dldEZpbmFsTWVzc2FnZSgpKTtcbiAgICB9XG4gIH1cblxuICAjYmVnaW5SZXF1ZXN0KCkge1xuICAgIGlmICh0aGlzLmVuZGVkKSByZXR1cm47XG4gICAgdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdCA9IHVuZGVmaW5lZDtcbiAgfVxuICAjYWRkU3RyZWFtRXZlbnQoZXZlbnQ6IE1lc3NhZ2VTdHJlYW1FdmVudCkge1xuICAgIGlmICh0aGlzLmVuZGVkKSByZXR1cm47XG4gICAgY29uc3QgbWVzc2FnZVNuYXBzaG90ID0gdGhpcy4jYWNjdW11bGF0ZU1lc3NhZ2UoZXZlbnQpO1xuICAgIHRoaXMuX2VtaXQoJ3N0cmVhbUV2ZW50JywgZXZlbnQsIG1lc3NhZ2VTbmFwc2hvdCk7XG5cbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfZGVsdGEnOiB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBtZXNzYWdlU25hcHNob3QuY29udGVudC5hdCgtMSkhO1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmRlbHRhLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICd0ZXh0X2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2VtaXQoJ3RleHQnLCBldmVudC5kZWx0YS50ZXh0LCBjb250ZW50LnRleHQgfHwgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgJ2NpdGF0aW9uc19kZWx0YSc6IHtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICB0aGlzLl9lbWl0KCdjaXRhdGlvbicsIGV2ZW50LmRlbHRhLmNpdGF0aW9uLCBjb250ZW50LmNpdGF0aW9ucyA/PyBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSAnaW5wdXRfanNvbl9kZWx0YSc6IHtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICd0b29sX3VzZScgJiYgY29udGVudC5pbnB1dCkge1xuICAgICAgICAgICAgICB0aGlzLl9lbWl0KCdpbnB1dEpzb24nLCBldmVudC5kZWx0YS5wYXJ0aWFsX2pzb24sIGNvbnRlbnQuaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjaGVja05ldmVyKGV2ZW50LmRlbHRhKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ21lc3NhZ2Vfc3RvcCc6IHtcbiAgICAgICAgdGhpcy5fYWRkTWVzc2FnZVBhcmFtKG1lc3NhZ2VTbmFwc2hvdCk7XG4gICAgICAgIHRoaXMuX2FkZE1lc3NhZ2UobWVzc2FnZVNuYXBzaG90LCB0cnVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX3N0b3AnOiB7XG4gICAgICAgIHRoaXMuX2VtaXQoJ2NvbnRlbnRCbG9jaycsIG1lc3NhZ2VTbmFwc2hvdC5jb250ZW50LmF0KC0xKSEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ21lc3NhZ2Vfc3RhcnQnOiB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3QgPSBtZXNzYWdlU25hcHNob3Q7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19zdGFydCc6XG4gICAgICBjYXNlICdtZXNzYWdlX2RlbHRhJzpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gICNlbmRSZXF1ZXN0KCk6IE1lc3NhZ2Uge1xuICAgIGlmICh0aGlzLmVuZGVkKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYHN0cmVhbSBoYXMgZW5kZWQsIHRoaXMgc2hvdWxkbid0IGhhcHBlbmApO1xuICAgIH1cbiAgICBjb25zdCBzbmFwc2hvdCA9IHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3Q7XG4gICAgaWYgKCFzbmFwc2hvdCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGByZXF1ZXN0IGVuZGVkIHdpdGhvdXQgc2VuZGluZyBhbnkgY2h1bmtzYCk7XG4gICAgfVxuICAgIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3QgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHNuYXBzaG90O1xuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIF9mcm9tUmVhZGFibGVTdHJlYW0oXG4gICAgcmVhZGFibGVTdHJlYW06IFJlYWRhYmxlU3RyZWFtLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzaWduYWwgPSBvcHRpb25zPy5zaWduYWw7XG4gICAgaWYgKHNpZ25hbCkge1xuICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+IHRoaXMuY29udHJvbGxlci5hYm9ydCgpKTtcbiAgICB9XG4gICAgdGhpcy4jYmVnaW5SZXF1ZXN0KCk7XG4gICAgdGhpcy5fY29ubmVjdGVkKG51bGwpO1xuICAgIGNvbnN0IHN0cmVhbSA9IFN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW08TWVzc2FnZVN0cmVhbUV2ZW50PihyZWFkYWJsZVN0cmVhbSwgdGhpcy5jb250cm9sbGVyKTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIHN0cmVhbSkge1xuICAgICAgdGhpcy4jYWRkU3RyZWFtRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICBpZiAoc3RyZWFtLmNvbnRyb2xsZXIuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJVXNlckFib3J0RXJyb3IoKTtcbiAgICB9XG4gICAgdGhpcy4jZW5kUmVxdWVzdCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIE11dGF0ZXMgdGhpcy4jY3VycmVudE1lc3NhZ2Ugd2l0aCB0aGUgY3VycmVudCBldmVudC4gSGFuZGxpbmcgdGhlIGFjY3VtdWxhdGlvbiBvZiBtdWx0aXBsZSBtZXNzYWdlc1xuICAgKiB3aWxsIGJlIG5lZWRlZCB0byBiZSBoYW5kbGVkIGJ5IHRoZSBjYWxsZXIsIHRoaXMgbWV0aG9kIHdpbGwgdGhyb3cgaWYgeW91IHRyeSB0byBhY2N1bXVsYXRlIGZvciBtdWx0aXBsZVxuICAgKiBtZXNzYWdlcy5cbiAgICovXG4gICNhY2N1bXVsYXRlTWVzc2FnZShldmVudDogTWVzc2FnZVN0cmVhbUV2ZW50KTogTWVzc2FnZSB7XG4gICAgbGV0IHNuYXBzaG90ID0gdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdDtcblxuICAgIGlmIChldmVudC50eXBlID09PSAnbWVzc2FnZV9zdGFydCcpIHtcbiAgICAgIGlmIChzbmFwc2hvdCkge1xuICAgICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYFVuZXhwZWN0ZWQgZXZlbnQgb3JkZXIsIGdvdCAke2V2ZW50LnR5cGV9IGJlZm9yZSByZWNlaXZpbmcgXCJtZXNzYWdlX3N0b3BcImApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGV2ZW50Lm1lc3NhZ2U7XG4gICAgfVxuXG4gICAgaWYgKCFzbmFwc2hvdCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBVbmV4cGVjdGVkIGV2ZW50IG9yZGVyLCBnb3QgJHtldmVudC50eXBlfSBiZWZvcmUgXCJtZXNzYWdlX3N0YXJ0XCJgKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgJ21lc3NhZ2Vfc3RvcCc6XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIGNhc2UgJ21lc3NhZ2VfZGVsdGEnOlxuICAgICAgICBzbmFwc2hvdC5zdG9wX3JlYXNvbiA9IGV2ZW50LmRlbHRhLnN0b3BfcmVhc29uO1xuICAgICAgICBzbmFwc2hvdC5zdG9wX3NlcXVlbmNlID0gZXZlbnQuZGVsdGEuc3RvcF9zZXF1ZW5jZTtcbiAgICAgICAgc25hcHNob3QudXNhZ2Uub3V0cHV0X3Rva2VucyA9IGV2ZW50LnVzYWdlLm91dHB1dF90b2tlbnM7XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RhcnQnOlxuICAgICAgICBzbmFwc2hvdC5jb250ZW50LnB1c2goZXZlbnQuY29udGVudF9ibG9jayk7XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfZGVsdGEnOiB7XG4gICAgICAgIGNvbnN0IHNuYXBzaG90Q29udGVudCA9IHNuYXBzaG90LmNvbnRlbnQuYXQoZXZlbnQuaW5kZXgpO1xuXG4gICAgICAgIHN3aXRjaCAoZXZlbnQuZGVsdGEudHlwZSkge1xuICAgICAgICAgIGNhc2UgJ3RleHRfZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoc25hcHNob3RDb250ZW50Py50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgc25hcHNob3RDb250ZW50LnRleHQgKz0gZXZlbnQuZGVsdGEudGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlICdjaXRhdGlvbnNfZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoc25hcHNob3RDb250ZW50Py50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgc25hcHNob3RDb250ZW50LmNpdGF0aW9ucyA/Pz0gW107XG4gICAgICAgICAgICAgIHNuYXBzaG90Q29udGVudC5jaXRhdGlvbnMucHVzaChldmVudC5kZWx0YS5jaXRhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSAnaW5wdXRfanNvbl9kZWx0YSc6IHtcbiAgICAgICAgICAgIGlmIChzbmFwc2hvdENvbnRlbnQ/LnR5cGUgPT09ICd0b29sX3VzZScpIHtcbiAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHRoZSByYXcgSlNPTiBzdHJpbmcgYXMgd2VsbCBzbyB0aGF0IHdlIGNhblxuICAgICAgICAgICAgICAvLyByZS1wYXJzZSBpdCBmb3IgZWFjaCBkZWx0YSwgZm9yIG5vdyB3ZSBqdXN0IHN0b3JlIGl0IGFzIGFuIHVudHlwZWRcbiAgICAgICAgICAgICAgLy8gbm9uLWVudW1lcmFibGUgcHJvcGVydHkgb24gdGhlIHNuYXBzaG90XG4gICAgICAgICAgICAgIGxldCBqc29uQnVmID0gKHNuYXBzaG90Q29udGVudCBhcyBhbnkpW0pTT05fQlVGX1BST1BFUlRZXSB8fCAnJztcbiAgICAgICAgICAgICAganNvbkJ1ZiArPSBldmVudC5kZWx0YS5wYXJ0aWFsX2pzb247XG5cbiAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNuYXBzaG90Q29udGVudCwgSlNPTl9CVUZfUFJPUEVSVFksIHtcbiAgICAgICAgICAgICAgICB2YWx1ZToganNvbkJ1ZixcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgaWYgKGpzb25CdWYpIHtcbiAgICAgICAgICAgICAgICBzbmFwc2hvdENvbnRlbnQuaW5wdXQgPSBwYXJ0aWFsUGFyc2UoanNvbkJ1Zik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2hlY2tOZXZlcihldmVudC5kZWx0YSk7XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgICB9XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX3N0b3AnOlxuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgfVxuICB9XG5cbiAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0l0ZXJhdG9yPE1lc3NhZ2VTdHJlYW1FdmVudD4ge1xuICAgIGNvbnN0IHB1c2hRdWV1ZTogTWVzc2FnZVN0cmVhbUV2ZW50W10gPSBbXTtcbiAgICBjb25zdCByZWFkUXVldWU6IHtcbiAgICAgIHJlc29sdmU6IChjaHVuazogTWVzc2FnZVN0cmVhbUV2ZW50IHwgdW5kZWZpbmVkKSA9PiB2b2lkO1xuICAgICAgcmVqZWN0OiAoZXJyb3I6IHVua25vd24pID0+IHZvaWQ7XG4gICAgfVtdID0gW107XG4gICAgbGV0IGRvbmUgPSBmYWxzZTtcblxuICAgIHRoaXMub24oJ3N0cmVhbUV2ZW50JywgKGV2ZW50KSA9PiB7XG4gICAgICBjb25zdCByZWFkZXIgPSByZWFkUXVldWUuc2hpZnQoKTtcbiAgICAgIGlmIChyZWFkZXIpIHtcbiAgICAgICAgcmVhZGVyLnJlc29sdmUoZXZlbnQpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcHVzaFF1ZXVlLnB1c2goZXZlbnQpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5vbignZW5kJywgKCkgPT4ge1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICBmb3IgKGNvbnN0IHJlYWRlciBvZiByZWFkUXVldWUpIHtcbiAgICAgICAgcmVhZGVyLnJlc29sdmUodW5kZWZpbmVkKTtcbiAgICAgIH1cbiAgICAgIHJlYWRRdWV1ZS5sZW5ndGggPSAwO1xuICAgIH0pO1xuXG4gICAgdGhpcy5vbignYWJvcnQnLCAoZXJyKSA9PiB7XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIGZvciAoY29uc3QgcmVhZGVyIG9mIHJlYWRRdWV1ZSkge1xuICAgICAgICByZWFkZXIucmVqZWN0KGVycik7XG4gICAgICB9XG4gICAgICByZWFkUXVldWUubGVuZ3RoID0gMDtcbiAgICB9KTtcblxuICAgIHRoaXMub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICBmb3IgKGNvbnN0IHJlYWRlciBvZiByZWFkUXVldWUpIHtcbiAgICAgICAgcmVhZGVyLnJlamVjdChlcnIpO1xuICAgICAgfVxuICAgICAgcmVhZFF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgfSk7XG5cbiAgICByZXR1cm4ge1xuICAgICAgbmV4dDogYXN5bmMgKCk6IFByb21pc2U8SXRlcmF0b3JSZXN1bHQ8TWVzc2FnZVN0cmVhbUV2ZW50Pj4gPT4ge1xuICAgICAgICBpZiAoIXB1c2hRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8TWVzc2FnZVN0cmVhbUV2ZW50IHwgdW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PlxuICAgICAgICAgICAgcmVhZFF1ZXVlLnB1c2goeyByZXNvbHZlLCByZWplY3QgfSksXG4gICAgICAgICAgKS50aGVuKChjaHVuaykgPT4gKGNodW5rID8geyB2YWx1ZTogY2h1bmssIGRvbmU6IGZhbHNlIH0gOiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNodW5rID0gcHVzaFF1ZXVlLnNoaWZ0KCkhO1xuICAgICAgICByZXR1cm4geyB2YWx1ZTogY2h1bmssIGRvbmU6IGZhbHNlIH07XG4gICAgICB9LFxuICAgICAgcmV0dXJuOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMuYWJvcnQoKTtcbiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgdG9SZWFkYWJsZVN0cmVhbSgpOiBSZWFkYWJsZVN0cmVhbSB7XG4gICAgY29uc3Qgc3RyZWFtID0gbmV3IFN0cmVhbSh0aGlzW1N5bWJvbC5hc3luY0l0ZXJhdG9yXS5iaW5kKHRoaXMpLCB0aGlzLmNvbnRyb2xsZXIpO1xuICAgIHJldHVybiBzdHJlYW0udG9SZWFkYWJsZVN0cmVhbSgpO1xuICB9XG59XG5cbi8vIHVzZWQgdG8gZW5zdXJlIGV4aGF1c3RpdmUgY2FzZSBtYXRjaGluZyB3aXRob3V0IHRocm93aW5nIGEgcnVudGltZSBlcnJvclxuZnVuY3Rpb24gY2hlY2tOZXZlcih4OiBuZXZlcikge31cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gXCIuLi8uLi9yZXNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgQVBJUHJvbWlzZSB9IGZyb20gXCIuLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBNZXNzYWdlc0FQSSBmcm9tIFwiLi9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0ICogYXMgQmF0Y2hlc0FQSSBmcm9tIFwiLi9iYXRjaGVzLmpzXCI7XG5pbXBvcnQge1xuICBCYXRjaENyZWF0ZVBhcmFtcyxcbiAgQmF0Y2hMaXN0UGFyYW1zLFxuICBCYXRjaGVzLFxuICBEZWxldGVkTWVzc2FnZUJhdGNoLFxuICBNZXNzYWdlQmF0Y2gsXG4gIE1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0LFxuICBNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0LFxuICBNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0LFxuICBNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UsXG4gIE1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMsXG4gIE1lc3NhZ2VCYXRjaFJlc3VsdCxcbiAgTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0LFxuICBNZXNzYWdlQmF0Y2hlc1BhZ2UsXG59IGZyb20gXCIuL2JhdGNoZXMuanNcIjtcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuLi8uLi9zdHJlYW1pbmcuanNcIjtcbmltcG9ydCB7IE1lc3NhZ2VTdHJlYW0gfSBmcm9tIFwiLi4vLi4vbGliL01lc3NhZ2VTdHJlYW0uanNcIjtcblxuZXhwb3J0IHsgTWVzc2FnZVN0cmVhbSB9IGZyb20gXCIuLi8uLi9saWIvTWVzc2FnZVN0cmVhbS5qc1wiO1xuXG5leHBvcnQgY2xhc3MgTWVzc2FnZXMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIGJhdGNoZXM6IEJhdGNoZXNBUEkuQmF0Y2hlcyA9IG5ldyBCYXRjaGVzQVBJLkJhdGNoZXModGhpcy5fY2xpZW50KTtcblxuICAvKipcbiAgICogU2VuZCBhIHN0cnVjdHVyZWQgbGlzdCBvZiBpbnB1dCBtZXNzYWdlcyB3aXRoIHRleHQgYW5kL29yIGltYWdlIGNvbnRlbnQsIGFuZCB0aGVcbiAgICogbW9kZWwgd2lsbCBnZW5lcmF0ZSB0aGUgbmV4dCBtZXNzYWdlIGluIHRoZSBjb252ZXJzYXRpb24uXG4gICAqXG4gICAqIFRoZSBNZXNzYWdlcyBBUEkgY2FuIGJlIHVzZWQgZm9yIGVpdGhlciBzaW5nbGUgcXVlcmllcyBvciBzdGF0ZWxlc3MgbXVsdGktdHVyblxuICAgKiBjb252ZXJzYXRpb25zLlxuICAgKi9cbiAgY3JlYXRlKGJvZHk6IE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQVBJUHJvbWlzZTxNZXNzYWdlPjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPFJhd01lc3NhZ2VTdHJlYW1FdmVudD4+O1xuICBjcmVhdGUoXG4gICAgYm9keTogTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2UsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPFJhd01lc3NhZ2VTdHJlYW1FdmVudD4gfCBNZXNzYWdlPjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8TWVzc2FnZT4gfCBBUElQcm9taXNlPFN0cmVhbTxSYXdNZXNzYWdlU3RyZWFtRXZlbnQ+PiB7XG4gICAgaWYgKGJvZHkubW9kZWwgaW4gREVQUkVDQVRFRF9NT0RFTFMpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFRoZSBtb2RlbCAnJHtib2R5Lm1vZGVsfScgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCByZWFjaCBlbmQtb2YtbGlmZSBvbiAke1xuICAgICAgICAgIERFUFJFQ0FURURfTU9ERUxTW2JvZHkubW9kZWxdXG4gICAgICAgIH1cXG5QbGVhc2UgbWlncmF0ZSB0byBhIG5ld2VyIG1vZGVsLiBWaXNpdCBodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3Jlc291cmNlcy9tb2RlbC1kZXByZWNhdGlvbnMgZm9yIG1vcmUgaW5mb3JtYXRpb24uYCxcbiAgICAgICk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jbGllbnQucG9zdCgnL3YxL21lc3NhZ2VzJywge1xuICAgICAgYm9keSxcbiAgICAgIHRpbWVvdXQ6ICh0aGlzLl9jbGllbnQgYXMgYW55KS5fb3B0aW9ucy50aW1lb3V0ID8/IDYwMDAwMCxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBzdHJlYW06IGJvZHkuc3RyZWFtID8/IGZhbHNlLFxuICAgIH0pIGFzIEFQSVByb21pc2U8TWVzc2FnZT4gfCBBUElQcm9taXNlPFN0cmVhbTxSYXdNZXNzYWdlU3RyZWFtRXZlbnQ+PjtcbiAgfVxuXG4gIC8qKlxuICAgKiBDcmVhdGUgYSBNZXNzYWdlIHN0cmVhbVxuICAgKi9cbiAgc3RyZWFtKGJvZHk6IE1lc3NhZ2VTdHJlYW1QYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogTWVzc2FnZVN0cmVhbSB7XG4gICAgcmV0dXJuIE1lc3NhZ2VTdHJlYW0uY3JlYXRlTWVzc2FnZSh0aGlzLCBib2R5LCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb3VudCB0aGUgbnVtYmVyIG9mIHRva2VucyBpbiBhIE1lc3NhZ2UuXG4gICAqXG4gICAqIFRoZSBUb2tlbiBDb3VudCBBUEkgY2FuIGJlIHVzZWQgdG8gY291bnQgdGhlIG51bWJlciBvZiB0b2tlbnMgaW4gYSBNZXNzYWdlLFxuICAgKiBpbmNsdWRpbmcgdG9vbHMsIGltYWdlcywgYW5kIGRvY3VtZW50cywgd2l0aG91dCBjcmVhdGluZyBpdC5cbiAgICovXG4gIGNvdW50VG9rZW5zKFxuICAgIGJvZHk6IE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPE1lc3NhZ2VUb2tlbnNDb3VudD4ge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQucG9zdCgnL3YxL21lc3NhZ2VzL2NvdW50X3Rva2VucycsIHsgYm9keSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhc2U2NFBERlNvdXJjZSB7XG4gIGRhdGE6IHN0cmluZztcblxuICBtZWRpYV90eXBlOiAnYXBwbGljYXRpb24vcGRmJztcblxuICB0eXBlOiAnYmFzZTY0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDYWNoZUNvbnRyb2xFcGhlbWVyYWwge1xuICB0eXBlOiAnZXBoZW1lcmFsJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaXRhdGlvbkNoYXJMb2NhdGlvbiB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9jaGFyX2luZGV4OiBudW1iZXI7XG5cbiAgc3RhcnRfY2hhcl9pbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjaGFyX2xvY2F0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX2NoYXJfaW5kZXg6IG51bWJlcjtcblxuICBzdGFydF9jaGFyX2luZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NoYXJfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24ge1xuICBjaXRlZF90ZXh0OiBzdHJpbmc7XG5cbiAgZG9jdW1lbnRfaW5kZXg6IG51bWJlcjtcblxuICBkb2N1bWVudF90aXRsZTogc3RyaW5nIHwgbnVsbDtcblxuICBlbmRfYmxvY2tfaW5kZXg6IG51bWJlcjtcblxuICBzdGFydF9ibG9ja19pbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX2xvY2F0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0ge1xuICBjaXRlZF90ZXh0OiBzdHJpbmc7XG5cbiAgZG9jdW1lbnRfaW5kZXg6IG51bWJlcjtcblxuICBkb2N1bWVudF90aXRsZTogc3RyaW5nIHwgbnVsbDtcblxuICBlbmRfYmxvY2tfaW5kZXg6IG51bWJlcjtcblxuICBzdGFydF9ibG9ja19pbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX2xvY2F0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaXRhdGlvblBhZ2VMb2NhdGlvbiB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9wYWdlX251bWJlcjogbnVtYmVyO1xuXG4gIHN0YXJ0X3BhZ2VfbnVtYmVyOiBudW1iZXI7XG5cbiAgdHlwZTogJ3BhZ2VfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0ge1xuICBjaXRlZF90ZXh0OiBzdHJpbmc7XG5cbiAgZG9jdW1lbnRfaW5kZXg6IG51bWJlcjtcblxuICBkb2N1bWVudF90aXRsZTogc3RyaW5nIHwgbnVsbDtcblxuICBlbmRfcGFnZV9udW1iZXI6IG51bWJlcjtcblxuICBzdGFydF9wYWdlX251bWJlcjogbnVtYmVyO1xuXG4gIHR5cGU6ICdwYWdlX2xvY2F0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaXRhdGlvbnNDb25maWdQYXJhbSB7XG4gIGVuYWJsZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpdGF0aW9uc0RlbHRhIHtcbiAgY2l0YXRpb246IENpdGF0aW9uQ2hhckxvY2F0aW9uIHwgQ2l0YXRpb25QYWdlTG9jYXRpb24gfCBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uO1xuXG4gIHR5cGU6ICdjaXRhdGlvbnNfZGVsdGEnO1xufVxuXG5leHBvcnQgdHlwZSBDb250ZW50QmxvY2sgPSBUZXh0QmxvY2sgfCBUb29sVXNlQmxvY2s7XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRCbG9ja0RlbHRhRXZlbnQgPSBSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50O1xuXG5leHBvcnQgdHlwZSBDb250ZW50QmxvY2tQYXJhbSA9XG4gIHwgVGV4dEJsb2NrUGFyYW1cbiAgfCBJbWFnZUJsb2NrUGFyYW1cbiAgfCBUb29sVXNlQmxvY2tQYXJhbVxuICB8IFRvb2xSZXN1bHRCbG9ja1BhcmFtXG4gIHwgRG9jdW1lbnRCbG9ja1BhcmFtO1xuXG5leHBvcnQgaW50ZXJmYWNlIENvbnRlbnRCbG9ja1NvdXJjZSB7XG4gIGNvbnRlbnQ6IHN0cmluZyB8IEFycmF5PENvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQ+O1xuXG4gIHR5cGU6ICdjb250ZW50Jztcbn1cblxuZXhwb3J0IHR5cGUgQ29udGVudEJsb2NrU291cmNlQ29udGVudCA9IFRleHRCbG9ja1BhcmFtIHwgSW1hZ2VCbG9ja1BhcmFtO1xuXG5leHBvcnQgdHlwZSBDb250ZW50QmxvY2tTdGFydEV2ZW50ID0gUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudDtcblxuZXhwb3J0IHR5cGUgQ29udGVudEJsb2NrU3RvcEV2ZW50ID0gUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIERvY3VtZW50QmxvY2tQYXJhbSB7XG4gIHNvdXJjZTogQmFzZTY0UERGU291cmNlIHwgUGxhaW5UZXh0U291cmNlIHwgQ29udGVudEJsb2NrU291cmNlO1xuXG4gIHR5cGU6ICdkb2N1bWVudCc7XG5cbiAgY2FjaGVfY29udHJvbD86IENhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG5cbiAgY2l0YXRpb25zPzogQ2l0YXRpb25zQ29uZmlnUGFyYW07XG5cbiAgY29udGV4dD86IHN0cmluZyB8IG51bGw7XG5cbiAgdGl0bGU/OiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEltYWdlQmxvY2tQYXJhbSB7XG4gIHNvdXJjZTogSW1hZ2VCbG9ja1BhcmFtLlNvdXJjZTtcblxuICB0eXBlOiAnaW1hZ2UnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEltYWdlQmxvY2tQYXJhbSB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgU291cmNlIHtcbiAgICBkYXRhOiBzdHJpbmc7XG5cbiAgICBtZWRpYV90eXBlOiAnaW1hZ2UvanBlZycgfCAnaW1hZ2UvcG5nJyB8ICdpbWFnZS9naWYnIHwgJ2ltYWdlL3dlYnAnO1xuXG4gICAgdHlwZTogJ2Jhc2U2NCc7XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgSW5wdXRKc29uRGVsdGEgPSBJbnB1dEpTT05EZWx0YTtcblxuZXhwb3J0IGludGVyZmFjZSBJbnB1dEpTT05EZWx0YSB7XG4gIHBhcnRpYWxfanNvbjogc3RyaW5nO1xuXG4gIHR5cGU6ICdpbnB1dF9qc29uX2RlbHRhJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlIHtcbiAgLyoqXG4gICAqIFVuaXF1ZSBvYmplY3QgaWRlbnRpZmllci5cbiAgICpcbiAgICogVGhlIGZvcm1hdCBhbmQgbGVuZ3RoIG9mIElEcyBtYXkgY2hhbmdlIG92ZXIgdGltZS5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIENvbnRlbnQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbC5cbiAgICpcbiAgICogVGhpcyBpcyBhbiBhcnJheSBvZiBjb250ZW50IGJsb2NrcywgZWFjaCBvZiB3aGljaCBoYXMgYSBgdHlwZWAgdGhhdCBkZXRlcm1pbmVzXG4gICAqIGl0cyBzaGFwZS5cbiAgICpcbiAgICogRXhhbXBsZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIkhpLCBJJ20gQ2xhdWRlLlwiIH1dXG4gICAqIGBgYFxuICAgKlxuICAgKiBJZiB0aGUgcmVxdWVzdCBpbnB1dCBgbWVzc2FnZXNgIGVuZGVkIHdpdGggYW4gYGFzc2lzdGFudGAgdHVybiwgdGhlbiB0aGVcbiAgICogcmVzcG9uc2UgYGNvbnRlbnRgIHdpbGwgY29udGludWUgZGlyZWN0bHkgZnJvbSB0aGF0IGxhc3QgdHVybi4gWW91IGNhbiB1c2UgdGhpc1xuICAgKiB0byBjb25zdHJhaW4gdGhlIG1vZGVsJ3Mgb3V0cHV0LlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgdGhlIGlucHV0IGBtZXNzYWdlc2Agd2VyZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiV2hhdCdzIHRoZSBHcmVlayBuYW1lIGZvciBTdW4/IChBKSBTb2wgKEIpIEhlbGlvcyAoQykgU3VuXCJcbiAgICogICB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIlRoZSBiZXN0IGFuc3dlciBpcyAoXCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBUaGVuIHRoZSByZXNwb25zZSBgY29udGVudGAgbWlnaHQgYmU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW3sgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJCKVwiIH1dXG4gICAqIGBgYFxuICAgKi9cbiAgY29udGVudDogQXJyYXk8Q29udGVudEJsb2NrPjtcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gICAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gICAqL1xuICBtb2RlbDogTW9kZWw7XG5cbiAgLyoqXG4gICAqIENvbnZlcnNhdGlvbmFsIHJvbGUgb2YgdGhlIGdlbmVyYXRlZCBtZXNzYWdlLlxuICAgKlxuICAgKiBUaGlzIHdpbGwgYWx3YXlzIGJlIGBcImFzc2lzdGFudFwiYC5cbiAgICovXG4gIHJvbGU6ICdhc3Npc3RhbnQnO1xuXG4gIC8qKlxuICAgKiBUaGUgcmVhc29uIHRoYXQgd2Ugc3RvcHBlZC5cbiAgICpcbiAgICogVGhpcyBtYXkgYmUgb25lIHRoZSBmb2xsb3dpbmcgdmFsdWVzOlxuICAgKlxuICAgKiAtIGBcImVuZF90dXJuXCJgOiB0aGUgbW9kZWwgcmVhY2hlZCBhIG5hdHVyYWwgc3RvcHBpbmcgcG9pbnRcbiAgICogLSBgXCJtYXhfdG9rZW5zXCJgOiB3ZSBleGNlZWRlZCB0aGUgcmVxdWVzdGVkIGBtYXhfdG9rZW5zYCBvciB0aGUgbW9kZWwncyBtYXhpbXVtXG4gICAqIC0gYFwic3RvcF9zZXF1ZW5jZVwiYDogb25lIG9mIHlvdXIgcHJvdmlkZWQgY3VzdG9tIGBzdG9wX3NlcXVlbmNlc2Agd2FzIGdlbmVyYXRlZFxuICAgKiAtIGBcInRvb2xfdXNlXCJgOiB0aGUgbW9kZWwgaW52b2tlZCBvbmUgb3IgbW9yZSB0b29sc1xuICAgKlxuICAgKiBJbiBub24tc3RyZWFtaW5nIG1vZGUgdGhpcyB2YWx1ZSBpcyBhbHdheXMgbm9uLW51bGwuIEluIHN0cmVhbWluZyBtb2RlLCBpdCBpc1xuICAgKiBudWxsIGluIHRoZSBgbWVzc2FnZV9zdGFydGAgZXZlbnQgYW5kIG5vbi1udWxsIG90aGVyd2lzZS5cbiAgICovXG4gIHN0b3BfcmVhc29uOiAnZW5kX3R1cm4nIHwgJ21heF90b2tlbnMnIHwgJ3N0b3Bfc2VxdWVuY2UnIHwgJ3Rvb2xfdXNlJyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFdoaWNoIGN1c3RvbSBzdG9wIHNlcXVlbmNlIHdhcyBnZW5lcmF0ZWQsIGlmIGFueS5cbiAgICpcbiAgICogVGhpcyB2YWx1ZSB3aWxsIGJlIGEgbm9uLW51bGwgc3RyaW5nIGlmIG9uZSBvZiB5b3VyIGN1c3RvbSBzdG9wIHNlcXVlbmNlcyB3YXNcbiAgICogZ2VuZXJhdGVkLlxuICAgKi9cbiAgc3RvcF9zZXF1ZW5jZTogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogT2JqZWN0IHR5cGUuXG4gICAqXG4gICAqIEZvciBNZXNzYWdlcywgdGhpcyBpcyBhbHdheXMgYFwibWVzc2FnZVwiYC5cbiAgICovXG4gIHR5cGU6ICdtZXNzYWdlJztcblxuICAvKipcbiAgICogQmlsbGluZyBhbmQgcmF0ZS1saW1pdCB1c2FnZS5cbiAgICpcbiAgICogQW50aHJvcGljJ3MgQVBJIGJpbGxzIGFuZCByYXRlLWxpbWl0cyBieSB0b2tlbiBjb3VudHMsIGFzIHRva2VucyByZXByZXNlbnQgdGhlXG4gICAqIHVuZGVybHlpbmcgY29zdCB0byBvdXIgc3lzdGVtcy5cbiAgICpcbiAgICogVW5kZXIgdGhlIGhvb2QsIHRoZSBBUEkgdHJhbnNmb3JtcyByZXF1ZXN0cyBpbnRvIGEgZm9ybWF0IHN1aXRhYmxlIGZvciB0aGVcbiAgICogbW9kZWwuIFRoZSBtb2RlbCdzIG91dHB1dCB0aGVuIGdvZXMgdGhyb3VnaCBhIHBhcnNpbmcgc3RhZ2UgYmVmb3JlIGJlY29taW5nIGFuXG4gICAqIEFQSSByZXNwb25zZS4gQXMgYSByZXN1bHQsIHRoZSB0b2tlbiBjb3VudHMgaW4gYHVzYWdlYCB3aWxsIG5vdCBtYXRjaCBvbmUtdG8tb25lXG4gICAqIHdpdGggdGhlIGV4YWN0IHZpc2libGUgY29udGVudCBvZiBhbiBBUEkgcmVxdWVzdCBvciByZXNwb25zZS5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGBvdXRwdXRfdG9rZW5zYCB3aWxsIGJlIG5vbi16ZXJvLCBldmVuIGZvciBhbiBlbXB0eSBzdHJpbmcgcmVzcG9uc2VcbiAgICogZnJvbSBDbGF1ZGUuXG4gICAqL1xuICB1c2FnZTogVXNhZ2U7XG59XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VEZWx0YUV2ZW50ID0gUmF3TWVzc2FnZURlbHRhRXZlbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZURlbHRhVXNhZ2Uge1xuICAvKipcbiAgICogVGhlIGN1bXVsYXRpdmUgbnVtYmVyIG9mIG91dHB1dCB0b2tlbnMgd2hpY2ggd2VyZSB1c2VkLlxuICAgKi9cbiAgb3V0cHV0X3Rva2VuczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VQYXJhbSB7XG4gIGNvbnRlbnQ6IHN0cmluZyB8IEFycmF5PENvbnRlbnRCbG9ja1BhcmFtPjtcblxuICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50Jztcbn1cblxuZXhwb3J0IHR5cGUgTWVzc2FnZVN0YXJ0RXZlbnQgPSBSYXdNZXNzYWdlU3RhcnRFdmVudDtcblxuZXhwb3J0IHR5cGUgTWVzc2FnZVN0b3BFdmVudCA9IFJhd01lc3NhZ2VTdG9wRXZlbnQ7XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VTdHJlYW1FdmVudCA9IFJhd01lc3NhZ2VTdHJlYW1FdmVudDtcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlVG9rZW5zQ291bnQge1xuICAvKipcbiAgICogVGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgYWNyb3NzIHRoZSBwcm92aWRlZCBsaXN0IG9mIG1lc3NhZ2VzLCBzeXN0ZW0gcHJvbXB0LFxuICAgKiBhbmQgdG9vbHMuXG4gICAqL1xuICBpbnB1dF90b2tlbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXRhZGF0YSB7XG4gIC8qKlxuICAgKiBBbiBleHRlcm5hbCBpZGVudGlmaWVyIGZvciB0aGUgdXNlciB3aG8gaXMgYXNzb2NpYXRlZCB3aXRoIHRoZSByZXF1ZXN0LlxuICAgKlxuICAgKiBUaGlzIHNob3VsZCBiZSBhIHV1aWQsIGhhc2ggdmFsdWUsIG9yIG90aGVyIG9wYXF1ZSBpZGVudGlmaWVyLiBBbnRocm9waWMgbWF5IHVzZVxuICAgKiB0aGlzIGlkIHRvIGhlbHAgZGV0ZWN0IGFidXNlLiBEbyBub3QgaW5jbHVkZSBhbnkgaWRlbnRpZnlpbmcgaW5mb3JtYXRpb24gc3VjaCBhc1xuICAgKiBuYW1lLCBlbWFpbCBhZGRyZXNzLCBvciBwaG9uZSBudW1iZXIuXG4gICAqL1xuICB1c2VyX2lkPzogc3RyaW5nIHwgbnVsbDtcbn1cblxuLyoqXG4gKiBUaGUgbW9kZWwgdGhhdCB3aWxsIGNvbXBsZXRlIHlvdXIgcHJvbXB0LlxcblxcblNlZVxuICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICovXG5leHBvcnQgdHlwZSBNb2RlbCA9XG4gIHwgKHN0cmluZyAmIHt9KVxuICB8ICdjbGF1ZGUtMy01LWhhaWt1LWxhdGVzdCdcbiAgfCAnY2xhdWRlLTMtNS1oYWlrdS0yMDI0MTAyMidcbiAgfCAnY2xhdWRlLTMtNS1zb25uZXQtbGF0ZXN0J1xuICB8ICdjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MTAyMidcbiAgfCAnY2xhdWRlLTMtNS1zb25uZXQtMjAyNDA2MjAnXG4gIHwgJ2NsYXVkZS0zLW9wdXMtbGF0ZXN0J1xuICB8ICdjbGF1ZGUtMy1vcHVzLTIwMjQwMjI5J1xuICB8ICdjbGF1ZGUtMy1zb25uZXQtMjAyNDAyMjknXG4gIHwgJ2NsYXVkZS0zLWhhaWt1LTIwMjQwMzA3J1xuICB8ICdjbGF1ZGUtMi4xJ1xuICB8ICdjbGF1ZGUtMi4wJztcblxuY29uc3QgREVQUkVDQVRFRF9NT0RFTFM6IHtcbiAgW0sgaW4gTW9kZWxdPzogc3RyaW5nO1xufSA9IHtcbiAgJ2NsYXVkZS0xLjMnOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS0xLjMtMTAwayc6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLWluc3RhbnQtMS4xJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG4gICdjbGF1ZGUtaW5zdGFudC0xLjEtMTAwayc6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLWluc3RhbnQtMS4yJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG4gICdjbGF1ZGUtMy1zb25uZXQtMjAyNDAyMjknOiAnSnVseSAyMXN0LCAyMDI1JyxcbiAgJ2NsYXVkZS0yLjEnOiAnSnVseSAyMXN0LCAyMDI1JyxcbiAgJ2NsYXVkZS0yLjAnOiAnSnVseSAyMXN0LCAyMDI1Jyxcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGxhaW5UZXh0U291cmNlIHtcbiAgZGF0YTogc3RyaW5nO1xuXG4gIG1lZGlhX3R5cGU6ICd0ZXh0L3BsYWluJztcblxuICB0eXBlOiAndGV4dCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCB7XG4gIGRlbHRhOiBUZXh0RGVsdGEgfCBJbnB1dEpTT05EZWx0YSB8IENpdGF0aW9uc0RlbHRhO1xuXG4gIGluZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NvbnRlbnRfYmxvY2tfZGVsdGEnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQge1xuICBjb250ZW50X2Jsb2NrOiBUZXh0QmxvY2sgfCBUb29sVXNlQmxvY2s7XG5cbiAgaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19zdGFydCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50IHtcbiAgaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19zdG9wJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSYXdNZXNzYWdlRGVsdGFFdmVudCB7XG4gIGRlbHRhOiBSYXdNZXNzYWdlRGVsdGFFdmVudC5EZWx0YTtcblxuICB0eXBlOiAnbWVzc2FnZV9kZWx0YSc7XG5cbiAgLyoqXG4gICAqIEJpbGxpbmcgYW5kIHJhdGUtbGltaXQgdXNhZ2UuXG4gICAqXG4gICAqIEFudGhyb3BpYydzIEFQSSBiaWxscyBhbmQgcmF0ZS1saW1pdHMgYnkgdG9rZW4gY291bnRzLCBhcyB0b2tlbnMgcmVwcmVzZW50IHRoZVxuICAgKiB1bmRlcmx5aW5nIGNvc3QgdG8gb3VyIHN5c3RlbXMuXG4gICAqXG4gICAqIFVuZGVyIHRoZSBob29kLCB0aGUgQVBJIHRyYW5zZm9ybXMgcmVxdWVzdHMgaW50byBhIGZvcm1hdCBzdWl0YWJsZSBmb3IgdGhlXG4gICAqIG1vZGVsLiBUaGUgbW9kZWwncyBvdXRwdXQgdGhlbiBnb2VzIHRocm91Z2ggYSBwYXJzaW5nIHN0YWdlIGJlZm9yZSBiZWNvbWluZyBhblxuICAgKiBBUEkgcmVzcG9uc2UuIEFzIGEgcmVzdWx0LCB0aGUgdG9rZW4gY291bnRzIGluIGB1c2FnZWAgd2lsbCBub3QgbWF0Y2ggb25lLXRvLW9uZVxuICAgKiB3aXRoIHRoZSBleGFjdCB2aXNpYmxlIGNvbnRlbnQgb2YgYW4gQVBJIHJlcXVlc3Qgb3IgcmVzcG9uc2UuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBgb3V0cHV0X3Rva2Vuc2Agd2lsbCBiZSBub24temVybywgZXZlbiBmb3IgYW4gZW1wdHkgc3RyaW5nIHJlc3BvbnNlXG4gICAqIGZyb20gQ2xhdWRlLlxuICAgKi9cbiAgdXNhZ2U6IE1lc3NhZ2VEZWx0YVVzYWdlO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIFJhd01lc3NhZ2VEZWx0YUV2ZW50IHtcbiAgZXhwb3J0IGludGVyZmFjZSBEZWx0YSB7XG4gICAgc3RvcF9yZWFzb246ICdlbmRfdHVybicgfCAnbWF4X3Rva2VucycgfCAnc3RvcF9zZXF1ZW5jZScgfCAndG9vbF91c2UnIHwgbnVsbDtcblxuICAgIHN0b3Bfc2VxdWVuY2U6IHN0cmluZyB8IG51bGw7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBSYXdNZXNzYWdlU3RhcnRFdmVudCB7XG4gIG1lc3NhZ2U6IE1lc3NhZ2U7XG5cbiAgdHlwZTogJ21lc3NhZ2Vfc3RhcnQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhd01lc3NhZ2VTdG9wRXZlbnQge1xuICB0eXBlOiAnbWVzc2FnZV9zdG9wJztcbn1cblxuZXhwb3J0IHR5cGUgUmF3TWVzc2FnZVN0cmVhbUV2ZW50ID1cbiAgfCBSYXdNZXNzYWdlU3RhcnRFdmVudFxuICB8IFJhd01lc3NhZ2VEZWx0YUV2ZW50XG4gIHwgUmF3TWVzc2FnZVN0b3BFdmVudFxuICB8IFJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnRcbiAgfCBSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50XG4gIHwgUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIFRleHRCbG9jayB7XG4gIC8qKlxuICAgKiBDaXRhdGlvbnMgc3VwcG9ydGluZyB0aGUgdGV4dCBibG9jay5cbiAgICpcbiAgICogVGhlIHR5cGUgb2YgY2l0YXRpb24gcmV0dXJuZWQgd2lsbCBkZXBlbmQgb24gdGhlIHR5cGUgb2YgZG9jdW1lbnQgYmVpbmcgY2l0ZWQuXG4gICAqIENpdGluZyBhIFBERiByZXN1bHRzIGluIGBwYWdlX2xvY2F0aW9uYCwgcGxhaW4gdGV4dCByZXN1bHRzIGluIGBjaGFyX2xvY2F0aW9uYCxcbiAgICogYW5kIGNvbnRlbnQgZG9jdW1lbnQgcmVzdWx0cyBpbiBgY29udGVudF9ibG9ja19sb2NhdGlvbmAuXG4gICAqL1xuICBjaXRhdGlvbnM6IEFycmF5PFRleHRDaXRhdGlvbj4gfCBudWxsO1xuXG4gIHRleHQ6IHN0cmluZztcblxuICB0eXBlOiAndGV4dCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dEJsb2NrUGFyYW0ge1xuICB0ZXh0OiBzdHJpbmc7XG5cbiAgdHlwZTogJ3RleHQnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIGNpdGF0aW9ucz86IEFycmF5PFRleHRDaXRhdGlvblBhcmFtPiB8IG51bGw7XG59XG5cbmV4cG9ydCB0eXBlIFRleHRDaXRhdGlvbiA9IENpdGF0aW9uQ2hhckxvY2F0aW9uIHwgQ2l0YXRpb25QYWdlTG9jYXRpb24gfCBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uO1xuXG5leHBvcnQgdHlwZSBUZXh0Q2l0YXRpb25QYXJhbSA9XG4gIHwgQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbVxuICB8IENpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW1cbiAgfCBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW07XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dERlbHRhIHtcbiAgdGV4dDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0ZXh0X2RlbHRhJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb29sIHtcbiAgLyoqXG4gICAqIFtKU09OIHNjaGVtYV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvKSBmb3IgdGhpcyB0b29sJ3MgaW5wdXQuXG4gICAqXG4gICAqIFRoaXMgZGVmaW5lcyB0aGUgc2hhcGUgb2YgdGhlIGBpbnB1dGAgdGhhdCB5b3VyIHRvb2wgYWNjZXB0cyBhbmQgdGhhdCB0aGUgbW9kZWxcbiAgICogd2lsbCBwcm9kdWNlLlxuICAgKi9cbiAgaW5wdXRfc2NoZW1hOiBUb29sLklucHV0U2NoZW1hO1xuXG4gIC8qKlxuICAgKiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKlxuICAgKiBUaGlzIGlzIGhvdyB0aGUgdG9vbCB3aWxsIGJlIGNhbGxlZCBieSB0aGUgbW9kZWwgYW5kIGluIHRvb2xfdXNlIGJsb2Nrcy5cbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICBjYWNoZV9jb250cm9sPzogQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcblxuICAvKipcbiAgICogRGVzY3JpcHRpb24gb2Ygd2hhdCB0aGlzIHRvb2wgZG9lcy5cbiAgICpcbiAgICogVG9vbCBkZXNjcmlwdGlvbnMgc2hvdWxkIGJlIGFzIGRldGFpbGVkIGFzIHBvc3NpYmxlLiBUaGUgbW9yZSBpbmZvcm1hdGlvbiB0aGF0XG4gICAqIHRoZSBtb2RlbCBoYXMgYWJvdXQgd2hhdCB0aGUgdG9vbCBpcyBhbmQgaG93IHRvIHVzZSBpdCwgdGhlIGJldHRlciBpdCB3aWxsXG4gICAqIHBlcmZvcm0uIFlvdSBjYW4gdXNlIG5hdHVyYWwgbGFuZ3VhZ2UgZGVzY3JpcHRpb25zIHRvIHJlaW5mb3JjZSBpbXBvcnRhbnRcbiAgICogYXNwZWN0cyBvZiB0aGUgdG9vbCBpbnB1dCBKU09OIHNjaGVtYS5cbiAgICovXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIFRvb2wge1xuICAvKipcbiAgICogW0pTT04gc2NoZW1hXShodHRwczovL2pzb24tc2NoZW1hLm9yZy8pIGZvciB0aGlzIHRvb2wncyBpbnB1dC5cbiAgICpcbiAgICogVGhpcyBkZWZpbmVzIHRoZSBzaGFwZSBvZiB0aGUgYGlucHV0YCB0aGF0IHlvdXIgdG9vbCBhY2NlcHRzIGFuZCB0aGF0IHRoZSBtb2RlbFxuICAgKiB3aWxsIHByb2R1Y2UuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIElucHV0U2NoZW1hIHtcbiAgICB0eXBlOiAnb2JqZWN0JztcblxuICAgIHByb3BlcnRpZXM/OiB1bmtub3duIHwgbnVsbDtcbiAgICBbazogc3RyaW5nXTogdW5rbm93bjtcbiAgfVxufVxuXG4vKipcbiAqIEhvdyB0aGUgbW9kZWwgc2hvdWxkIHVzZSB0aGUgcHJvdmlkZWQgdG9vbHMuIFRoZSBtb2RlbCBjYW4gdXNlIGEgc3BlY2lmaWMgdG9vbCxcbiAqIGFueSBhdmFpbGFibGUgdG9vbCwgb3IgZGVjaWRlIGJ5IGl0c2VsZi5cbiAqL1xuZXhwb3J0IHR5cGUgVG9vbENob2ljZSA9IFRvb2xDaG9pY2VBdXRvIHwgVG9vbENob2ljZUFueSB8IFRvb2xDaG9pY2VUb29sO1xuXG4vKipcbiAqIFRoZSBtb2RlbCB3aWxsIHVzZSBhbnkgYXZhaWxhYmxlIHRvb2xzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xDaG9pY2VBbnkge1xuICB0eXBlOiAnYW55JztcblxuICAvKipcbiAgICogV2hldGhlciB0byBkaXNhYmxlIHBhcmFsbGVsIHRvb2wgdXNlLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgZmFsc2VgLiBJZiBzZXQgdG8gYHRydWVgLCB0aGUgbW9kZWwgd2lsbCBvdXRwdXQgZXhhY3RseSBvbmUgdG9vbFxuICAgKiB1c2UuXG4gICAqL1xuICBkaXNhYmxlX3BhcmFsbGVsX3Rvb2xfdXNlPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBUaGUgbW9kZWwgd2lsbCBhdXRvbWF0aWNhbGx5IGRlY2lkZSB3aGV0aGVyIHRvIHVzZSB0b29scy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUb29sQ2hvaWNlQXV0byB7XG4gIHR5cGU6ICdhdXRvJztcblxuICAvKipcbiAgICogV2hldGhlciB0byBkaXNhYmxlIHBhcmFsbGVsIHRvb2wgdXNlLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgZmFsc2VgLiBJZiBzZXQgdG8gYHRydWVgLCB0aGUgbW9kZWwgd2lsbCBvdXRwdXQgYXQgbW9zdCBvbmUgdG9vbFxuICAgKiB1c2UuXG4gICAqL1xuICBkaXNhYmxlX3BhcmFsbGVsX3Rvb2xfdXNlPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBUaGUgbW9kZWwgd2lsbCB1c2UgdGhlIHNwZWNpZmllZCB0b29sIHdpdGggYHRvb2xfY2hvaWNlLm5hbWVgLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xDaG9pY2VUb29sIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSB0b29sIHRvIHVzZS5cbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICB0eXBlOiAndG9vbCc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZGlzYWJsZSBwYXJhbGxlbCB0b29sIHVzZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC4gSWYgc2V0IHRvIGB0cnVlYCwgdGhlIG1vZGVsIHdpbGwgb3V0cHV0IGV4YWN0bHkgb25lIHRvb2xcbiAgICogdXNlLlxuICAgKi9cbiAgZGlzYWJsZV9wYXJhbGxlbF90b29sX3VzZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbFJlc3VsdEJsb2NrUGFyYW0ge1xuICB0b29sX3VzZV9pZDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0b29sX3Jlc3VsdCc7XG5cbiAgY2FjaGVfY29udHJvbD86IENhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG5cbiAgY29udGVudD86IHN0cmluZyB8IEFycmF5PFRleHRCbG9ja1BhcmFtIHwgSW1hZ2VCbG9ja1BhcmFtPjtcblxuICBpc19lcnJvcj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbFVzZUJsb2NrIHtcbiAgaWQ6IHN0cmluZztcblxuICBpbnB1dDogdW5rbm93bjtcblxuICBuYW1lOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3Rvb2xfdXNlJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb29sVXNlQmxvY2tQYXJhbSB7XG4gIGlkOiBzdHJpbmc7XG5cbiAgaW5wdXQ6IHVua25vd247XG5cbiAgbmFtZTogc3RyaW5nO1xuXG4gIHR5cGU6ICd0b29sX3VzZSc7XG5cbiAgY2FjaGVfY29udHJvbD86IENhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVXNhZ2Uge1xuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgdXNlZCB0byBjcmVhdGUgdGhlIGNhY2hlIGVudHJ5LlxuICAgKi9cbiAgY2FjaGVfY3JlYXRpb25faW5wdXRfdG9rZW5zOiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyByZWFkIGZyb20gdGhlIGNhY2hlLlxuICAgKi9cbiAgY2FjaGVfcmVhZF9pbnB1dF90b2tlbnM6IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHdoaWNoIHdlcmUgdXNlZC5cbiAgICovXG4gIGlucHV0X3Rva2VuczogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIG91dHB1dCB0b2tlbnMgd2hpY2ggd2VyZSB1c2VkLlxuICAgKi9cbiAgb3V0cHV0X3Rva2VuczogbnVtYmVyO1xufVxuXG5leHBvcnQgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zID0gTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyB8IE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHRva2VucyB0byBnZW5lcmF0ZSBiZWZvcmUgc3RvcHBpbmcuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBvdXIgbW9kZWxzIG1heSBzdG9wIF9iZWZvcmVfIHJlYWNoaW5nIHRoaXMgbWF4aW11bS4gVGhpcyBwYXJhbWV0ZXJcbiAgICogb25seSBzcGVjaWZpZXMgdGhlIGFic29sdXRlIG1heGltdW0gbnVtYmVyIG9mIHRva2VucyB0byBnZW5lcmF0ZS5cbiAgICpcbiAgICogRGlmZmVyZW50IG1vZGVscyBoYXZlIGRpZmZlcmVudCBtYXhpbXVtIHZhbHVlcyBmb3IgdGhpcyBwYXJhbWV0ZXIuIFNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGRldGFpbHMuXG4gICAqL1xuICBtYXhfdG9rZW5zOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIElucHV0IG1lc3NhZ2VzLlxuICAgKlxuICAgKiBPdXIgbW9kZWxzIGFyZSB0cmFpbmVkIHRvIG9wZXJhdGUgb24gYWx0ZXJuYXRpbmcgYHVzZXJgIGFuZCBgYXNzaXN0YW50YFxuICAgKiBjb252ZXJzYXRpb25hbCB0dXJucy4gV2hlbiBjcmVhdGluZyBhIG5ldyBgTWVzc2FnZWAsIHlvdSBzcGVjaWZ5IHRoZSBwcmlvclxuICAgKiBjb252ZXJzYXRpb25hbCB0dXJucyB3aXRoIHRoZSBgbWVzc2FnZXNgIHBhcmFtZXRlciwgYW5kIHRoZSBtb2RlbCB0aGVuIGdlbmVyYXRlc1xuICAgKiB0aGUgbmV4dCBgTWVzc2FnZWAgaW4gdGhlIGNvbnZlcnNhdGlvbi4gQ29uc2VjdXRpdmUgYHVzZXJgIG9yIGBhc3Npc3RhbnRgIHR1cm5zXG4gICAqIGluIHlvdXIgcmVxdWVzdCB3aWxsIGJlIGNvbWJpbmVkIGludG8gYSBzaW5nbGUgdHVybi5cbiAgICpcbiAgICogRWFjaCBpbnB1dCBtZXNzYWdlIG11c3QgYmUgYW4gb2JqZWN0IHdpdGggYSBgcm9sZWAgYW5kIGBjb250ZW50YC4gWW91IGNhblxuICAgKiBzcGVjaWZ5IGEgc2luZ2xlIGB1c2VyYC1yb2xlIG1lc3NhZ2UsIG9yIHlvdSBjYW4gaW5jbHVkZSBtdWx0aXBsZSBgdXNlcmAgYW5kXG4gICAqIGBhc3Npc3RhbnRgIG1lc3NhZ2VzLlxuICAgKlxuICAgKiBJZiB0aGUgZmluYWwgbWVzc2FnZSB1c2VzIHRoZSBgYXNzaXN0YW50YCByb2xlLCB0aGUgcmVzcG9uc2UgY29udGVudCB3aWxsXG4gICAqIGNvbnRpbnVlIGltbWVkaWF0ZWx5IGZyb20gdGhlIGNvbnRlbnQgaW4gdGhhdCBtZXNzYWdlLiBUaGlzIGNhbiBiZSB1c2VkIHRvXG4gICAqIGNvbnN0cmFpbiBwYXJ0IG9mIHRoZSBtb2RlbCdzIHJlc3BvbnNlLlxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggYSBzaW5nbGUgYHVzZXJgIG1lc3NhZ2U6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW3sgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfV1cbiAgICogYGBgXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBtdWx0aXBsZSBjb252ZXJzYXRpb25hbCB0dXJuczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAgeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvIHRoZXJlLlwiIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiSGksIEknbSBDbGF1ZGUuIEhvdyBjYW4gSSBoZWxwIHlvdT9cIiB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJDYW4geW91IGV4cGxhaW4gTExNcyBpbiBwbGFpbiBFbmdsaXNoP1wiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIGEgcGFydGlhbGx5LWZpbGxlZCByZXNwb25zZSBmcm9tIENsYXVkZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiV2hhdCdzIHRoZSBHcmVlayBuYW1lIGZvciBTdW4/IChBKSBTb2wgKEIpIEhlbGlvcyAoQykgU3VuXCJcbiAgICogICB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIlRoZSBiZXN0IGFuc3dlciBpcyAoXCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBFYWNoIGlucHV0IG1lc3NhZ2UgYGNvbnRlbnRgIG1heSBiZSBlaXRoZXIgYSBzaW5nbGUgYHN0cmluZ2Agb3IgYW4gYXJyYXkgb2ZcbiAgICogY29udGVudCBibG9ja3MsIHdoZXJlIGVhY2ggYmxvY2sgaGFzIGEgc3BlY2lmaWMgYHR5cGVgLiBVc2luZyBhIGBzdHJpbmdgIGZvclxuICAgKiBgY29udGVudGAgaXMgc2hvcnRoYW5kIGZvciBhbiBhcnJheSBvZiBvbmUgY29udGVudCBibG9jayBvZiB0eXBlIGBcInRleHRcImAuIFRoZVxuICAgKiBmb2xsb3dpbmcgaW5wdXQgbWVzc2FnZXMgYXJlIGVxdWl2YWxlbnQ6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogW3sgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfV0gfVxuICAgKiBgYGBcbiAgICpcbiAgICogU3RhcnRpbmcgd2l0aCBDbGF1ZGUgMyBtb2RlbHMsIHlvdSBjYW4gYWxzbyBzZW5kIGltYWdlIGNvbnRlbnQgYmxvY2tzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHtcbiAgICogICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgXCJjb250ZW50XCI6IFtcbiAgICogICAgIHtcbiAgICogICAgICAgXCJ0eXBlXCI6IFwiaW1hZ2VcIixcbiAgICogICAgICAgXCJzb3VyY2VcIjoge1xuICAgKiAgICAgICAgIFwidHlwZVwiOiBcImJhc2U2NFwiLFxuICAgKiAgICAgICAgIFwibWVkaWFfdHlwZVwiOiBcImltYWdlL2pwZWdcIixcbiAgICogICAgICAgICBcImRhdGFcIjogXCIvOWovNEFBUVNrWkpSZy4uLlwiXG4gICAqICAgICAgIH1cbiAgICogICAgIH0sXG4gICAqICAgICB7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiV2hhdCBpcyBpbiB0aGlzIGltYWdlP1wiIH1cbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFdlIGN1cnJlbnRseSBzdXBwb3J0IHRoZSBgYmFzZTY0YCBzb3VyY2UgdHlwZSBmb3IgaW1hZ2VzLCBhbmQgdGhlIGBpbWFnZS9qcGVnYCxcbiAgICogYGltYWdlL3BuZ2AsIGBpbWFnZS9naWZgLCBhbmQgYGltYWdlL3dlYnBgIG1lZGlhIHR5cGVzLlxuICAgKlxuICAgKiBTZWUgW2V4YW1wbGVzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtZXhhbXBsZXMjdmlzaW9uKSBmb3JcbiAgICogbW9yZSBpbnB1dCBleGFtcGxlcy5cbiAgICpcbiAgICogTm90ZSB0aGF0IGlmIHlvdSB3YW50IHRvIGluY2x1ZGUgYVxuICAgKiBbc3lzdGVtIHByb21wdF0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9zeXN0ZW0tcHJvbXB0cyksIHlvdSBjYW4gdXNlXG4gICAqIHRoZSB0b3AtbGV2ZWwgYHN5c3RlbWAgcGFyYW1ldGVyIFx1MjAxNCB0aGVyZSBpcyBubyBgXCJzeXN0ZW1cImAgcm9sZSBmb3IgaW5wdXRcbiAgICogbWVzc2FnZXMgaW4gdGhlIE1lc3NhZ2VzIEFQSS5cbiAgICovXG4gIG1lc3NhZ2VzOiBBcnJheTxNZXNzYWdlUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgdGhhdCB3aWxsIGNvbXBsZXRlIHlvdXIgcHJvbXB0LlxcblxcblNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGFkZGl0aW9uYWxcbiAgICogZGV0YWlscyBhbmQgb3B0aW9ucy5cbiAgICovXG4gIG1vZGVsOiBNb2RlbDtcblxuICAvKipcbiAgICogQW4gb2JqZWN0IGRlc2NyaWJpbmcgbWV0YWRhdGEgYWJvdXQgdGhlIHJlcXVlc3QuXG4gICAqL1xuICBtZXRhZGF0YT86IE1ldGFkYXRhO1xuXG4gIC8qKlxuICAgKiBDdXN0b20gdGV4dCBzZXF1ZW5jZXMgdGhhdCB3aWxsIGNhdXNlIHRoZSBtb2RlbCB0byBzdG9wIGdlbmVyYXRpbmcuXG4gICAqXG4gICAqIE91ciBtb2RlbHMgd2lsbCBub3JtYWxseSBzdG9wIHdoZW4gdGhleSBoYXZlIG5hdHVyYWxseSBjb21wbGV0ZWQgdGhlaXIgdHVybixcbiAgICogd2hpY2ggd2lsbCByZXN1bHQgaW4gYSByZXNwb25zZSBgc3RvcF9yZWFzb25gIG9mIGBcImVuZF90dXJuXCJgLlxuICAgKlxuICAgKiBJZiB5b3Ugd2FudCB0aGUgbW9kZWwgdG8gc3RvcCBnZW5lcmF0aW5nIHdoZW4gaXQgZW5jb3VudGVycyBjdXN0b20gc3RyaW5ncyBvZlxuICAgKiB0ZXh0LCB5b3UgY2FuIHVzZSB0aGUgYHN0b3Bfc2VxdWVuY2VzYCBwYXJhbWV0ZXIuIElmIHRoZSBtb2RlbCBlbmNvdW50ZXJzIG9uZSBvZlxuICAgKiB0aGUgY3VzdG9tIHNlcXVlbmNlcywgdGhlIHJlc3BvbnNlIGBzdG9wX3JlYXNvbmAgdmFsdWUgd2lsbCBiZSBgXCJzdG9wX3NlcXVlbmNlXCJgXG4gICAqIGFuZCB0aGUgcmVzcG9uc2UgYHN0b3Bfc2VxdWVuY2VgIHZhbHVlIHdpbGwgY29udGFpbiB0aGUgbWF0Y2hlZCBzdG9wIHNlcXVlbmNlLlxuICAgKi9cbiAgc3RvcF9zZXF1ZW5jZXM/OiBBcnJheTxzdHJpbmc+O1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudCBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtc3RyZWFtaW5nKSBmb3JcbiAgICogZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbT86IGJvb2xlYW47XG5cbiAgLyoqXG4gICAqIFN5c3RlbSBwcm9tcHQuXG4gICAqXG4gICAqIEEgc3lzdGVtIHByb21wdCBpcyBhIHdheSBvZiBwcm92aWRpbmcgY29udGV4dCBhbmQgaW5zdHJ1Y3Rpb25zIHRvIENsYXVkZSwgc3VjaFxuICAgKiBhcyBzcGVjaWZ5aW5nIGEgcGFydGljdWxhciBnb2FsIG9yIHJvbGUuIFNlZSBvdXJcbiAgICogW2d1aWRlIHRvIHN5c3RlbSBwcm9tcHRzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3N5c3RlbS1wcm9tcHRzKS5cbiAgICovXG4gIHN5c3RlbT86IHN0cmluZyB8IEFycmF5PFRleHRCbG9ja1BhcmFtPjtcblxuICAvKipcbiAgICogQW1vdW50IG9mIHJhbmRvbW5lc3MgaW5qZWN0ZWQgaW50byB0aGUgcmVzcG9uc2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGAxLjBgLiBSYW5nZXMgZnJvbSBgMC4wYCB0byBgMS4wYC4gVXNlIGB0ZW1wZXJhdHVyZWAgY2xvc2VyIHRvIGAwLjBgXG4gICAqIGZvciBhbmFseXRpY2FsIC8gbXVsdGlwbGUgY2hvaWNlLCBhbmQgY2xvc2VyIHRvIGAxLjBgIGZvciBjcmVhdGl2ZSBhbmRcbiAgICogZ2VuZXJhdGl2ZSB0YXNrcy5cbiAgICpcbiAgICogTm90ZSB0aGF0IGV2ZW4gd2l0aCBgdGVtcGVyYXR1cmVgIG9mIGAwLjBgLCB0aGUgcmVzdWx0cyB3aWxsIG5vdCBiZSBmdWxseVxuICAgKiBkZXRlcm1pbmlzdGljLlxuICAgKi9cbiAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEhvdyB0aGUgbW9kZWwgc2hvdWxkIHVzZSB0aGUgcHJvdmlkZWQgdG9vbHMuIFRoZSBtb2RlbCBjYW4gdXNlIGEgc3BlY2lmaWMgdG9vbCxcbiAgICogYW55IGF2YWlsYWJsZSB0b29sLCBvciBkZWNpZGUgYnkgaXRzZWxmLlxuICAgKi9cbiAgdG9vbF9jaG9pY2U/OiBUb29sQ2hvaWNlO1xuXG4gIC8qKlxuICAgKiBEZWZpbml0aW9ucyBvZiB0b29scyB0aGF0IHRoZSBtb2RlbCBtYXkgdXNlLlxuICAgKlxuICAgKiBJZiB5b3UgaW5jbHVkZSBgdG9vbHNgIGluIHlvdXIgQVBJIHJlcXVlc3QsIHRoZSBtb2RlbCBtYXkgcmV0dXJuIGB0b29sX3VzZWBcbiAgICogY29udGVudCBibG9ja3MgdGhhdCByZXByZXNlbnQgdGhlIG1vZGVsJ3MgdXNlIG9mIHRob3NlIHRvb2xzLiBZb3UgY2FuIHRoZW4gcnVuXG4gICAqIHRob3NlIHRvb2xzIHVzaW5nIHRoZSB0b29sIGlucHV0IGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgYW5kIHRoZW4gb3B0aW9uYWxseVxuICAgKiByZXR1cm4gcmVzdWx0cyBiYWNrIHRvIHRoZSBtb2RlbCB1c2luZyBgdG9vbF9yZXN1bHRgIGNvbnRlbnQgYmxvY2tzLlxuICAgKlxuICAgKiBFYWNoIHRvb2wgZGVmaW5pdGlvbiBpbmNsdWRlczpcbiAgICpcbiAgICogLSBgbmFtZWA6IE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqIC0gYGRlc2NyaXB0aW9uYDogT3B0aW9uYWwsIGJ1dCBzdHJvbmdseS1yZWNvbW1lbmRlZCBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbC5cbiAgICogLSBgaW5wdXRfc2NoZW1hYDogW0pTT04gc2NoZW1hXShodHRwczovL2pzb24tc2NoZW1hLm9yZy8pIGZvciB0aGUgdG9vbCBgaW5wdXRgXG4gICAqICAgc2hhcGUgdGhhdCB0aGUgbW9kZWwgd2lsbCBwcm9kdWNlIGluIGB0b29sX3VzZWAgb3V0cHV0IGNvbnRlbnQgYmxvY2tzLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgeW91IGRlZmluZWQgYHRvb2xzYCBhczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJuYW1lXCI6IFwiZ2V0X3N0b2NrX3ByaWNlXCIsXG4gICAqICAgICBcImRlc2NyaXB0aW9uXCI6IFwiR2V0IHRoZSBjdXJyZW50IHN0b2NrIHByaWNlIGZvciBhIGdpdmVuIHRpY2tlciBzeW1ib2wuXCIsXG4gICAqICAgICBcImlucHV0X3NjaGVtYVwiOiB7XG4gICAqICAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiLFxuICAgKiAgICAgICBcInByb3BlcnRpZXNcIjoge1xuICAgKiAgICAgICAgIFwidGlja2VyXCI6IHtcbiAgICogICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxuICAgKiAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSBzdG9jayB0aWNrZXIgc3ltYm9sLCBlLmcuIEFBUEwgZm9yIEFwcGxlIEluYy5cIlxuICAgKiAgICAgICAgIH1cbiAgICogICAgICAgfSxcbiAgICogICAgICAgXCJyZXF1aXJlZFwiOiBbXCJ0aWNrZXJcIl1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEFuZCB0aGVuIGFza2VkIHRoZSBtb2RlbCBcIldoYXQncyB0aGUgUyZQIDUwMCBhdCB0b2RheT9cIiwgdGhlIG1vZGVsIG1pZ2h0IHByb2R1Y2VcbiAgICogYHRvb2xfdXNlYCBjb250ZW50IGJsb2NrcyBpbiB0aGUgcmVzcG9uc2UgbGlrZSB0aGlzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInR5cGVcIjogXCJ0b29sX3VzZVwiLFxuICAgKiAgICAgXCJpZFwiOiBcInRvb2x1XzAxRDdGTHJmaDRHWXE3eVQxVUxGZXlNVlwiLFxuICAgKiAgICAgXCJuYW1lXCI6IFwiZ2V0X3N0b2NrX3ByaWNlXCIsXG4gICAqICAgICBcImlucHV0XCI6IHsgXCJ0aWNrZXJcIjogXCJeR1NQQ1wiIH1cbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFlvdSBtaWdodCB0aGVuIHJ1biB5b3VyIGBnZXRfc3RvY2tfcHJpY2VgIHRvb2wgd2l0aCBge1widGlja2VyXCI6IFwiXkdTUENcIn1gIGFzIGFuXG4gICAqIGlucHV0LCBhbmQgcmV0dXJuIHRoZSBmb2xsb3dpbmcgYmFjayB0byB0aGUgbW9kZWwgaW4gYSBzdWJzZXF1ZW50IGB1c2VyYFxuICAgKiBtZXNzYWdlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInR5cGVcIjogXCJ0b29sX3Jlc3VsdFwiLFxuICAgKiAgICAgXCJ0b29sX3VzZV9pZFwiOiBcInRvb2x1XzAxRDdGTHJmaDRHWXE3eVQxVUxGZXlNVlwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiMjU5Ljc1IFVTRFwiXG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBUb29scyBjYW4gYmUgdXNlZCBmb3Igd29ya2Zsb3dzIHRoYXQgaW5jbHVkZSBydW5uaW5nIGNsaWVudC1zaWRlIHRvb2xzIGFuZFxuICAgKiBmdW5jdGlvbnMsIG9yIG1vcmUgZ2VuZXJhbGx5IHdoZW5ldmVyIHlvdSB3YW50IHRoZSBtb2RlbCB0byBwcm9kdWNlIGEgcGFydGljdWxhclxuICAgKiBKU09OIHN0cnVjdHVyZSBvZiBvdXRwdXQuXG4gICAqXG4gICAqIFNlZSBvdXIgW2d1aWRlXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3Rvb2wtdXNlKSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgdG9vbHM/OiBBcnJheTxUb29sPjtcblxuICAvKipcbiAgICogT25seSBzYW1wbGUgZnJvbSB0aGUgdG9wIEsgb3B0aW9ucyBmb3IgZWFjaCBzdWJzZXF1ZW50IHRva2VuLlxuICAgKlxuICAgKiBVc2VkIHRvIHJlbW92ZSBcImxvbmcgdGFpbFwiIGxvdyBwcm9iYWJpbGl0eSByZXNwb25zZXMuXG4gICAqIFtMZWFybiBtb3JlIHRlY2huaWNhbCBkZXRhaWxzIGhlcmVdKGh0dHBzOi8vdG93YXJkc2RhdGFzY2llbmNlLmNvbS9ob3ctdG8tc2FtcGxlLWZyb20tbGFuZ3VhZ2UtbW9kZWxzLTY4MmJjZWI5NzI3NykuXG4gICAqXG4gICAqIFJlY29tbWVuZGVkIGZvciBhZHZhbmNlZCB1c2UgY2FzZXMgb25seS4gWW91IHVzdWFsbHkgb25seSBuZWVkIHRvIHVzZVxuICAgKiBgdGVtcGVyYXR1cmVgLlxuICAgKi9cbiAgdG9wX2s/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFVzZSBudWNsZXVzIHNhbXBsaW5nLlxuICAgKlxuICAgKiBJbiBudWNsZXVzIHNhbXBsaW5nLCB3ZSBjb21wdXRlIHRoZSBjdW11bGF0aXZlIGRpc3RyaWJ1dGlvbiBvdmVyIGFsbCB0aGUgb3B0aW9uc1xuICAgKiBmb3IgZWFjaCBzdWJzZXF1ZW50IHRva2VuIGluIGRlY3JlYXNpbmcgcHJvYmFiaWxpdHkgb3JkZXIgYW5kIGN1dCBpdCBvZmYgb25jZSBpdFxuICAgKiByZWFjaGVzIGEgcGFydGljdWxhciBwcm9iYWJpbGl0eSBzcGVjaWZpZWQgYnkgYHRvcF9wYC4gWW91IHNob3VsZCBlaXRoZXIgYWx0ZXJcbiAgICogYHRlbXBlcmF0dXJlYCBvciBgdG9wX3BgLCBidXQgbm90IGJvdGguXG4gICAqXG4gICAqIFJlY29tbWVuZGVkIGZvciBhZHZhbmNlZCB1c2UgY2FzZXMgb25seS4gWW91IHVzdWFsbHkgb25seSBuZWVkIHRvIHVzZVxuICAgKiBgdGVtcGVyYXR1cmVgLlxuICAgKi9cbiAgdG9wX3A/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgTWVzc2FnZUNyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCB1c2UgYEFudGhyb3BpYy5NZXNzYWdlcy5Ub29sQ2hvaWNlQXV0b2AgaW5zdGVhZFxuICAgKi9cbiAgZXhwb3J0IHR5cGUgTWV0YWRhdGEgPSBNZXNzYWdlc0FQSS5NZXRhZGF0YTtcblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGBBbnRocm9waWMuTWVzc2FnZXMuVG9vbENob2ljZUF1dG9gIGluc3RlYWRcbiAgICovXG4gIGV4cG9ydCB0eXBlIFRvb2xDaG9pY2VBdXRvID0gTWVzc2FnZXNBUEkuVG9vbENob2ljZUF1dG87XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBgQW50aHJvcGljLk1lc3NhZ2VzLlRvb2xDaG9pY2VBbnlgIGluc3RlYWRcbiAgICovXG4gIGV4cG9ydCB0eXBlIFRvb2xDaG9pY2VBbnkgPSBNZXNzYWdlc0FQSS5Ub29sQ2hvaWNlQW55O1xuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCB1c2UgYEFudGhyb3BpYy5NZXNzYWdlcy5Ub29sQ2hvaWNlVG9vbGAgaW5zdGVhZFxuICAgKi9cbiAgZXhwb3J0IHR5cGUgVG9vbENob2ljZVRvb2wgPSBNZXNzYWdlc0FQSS5Ub29sQ2hvaWNlVG9vbDtcblxuICBleHBvcnQgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gTWVzc2FnZXNBUEkuTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IE1lc3NhZ2VzQVBJLk1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBleHRlbmRzIE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50IGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1zdHJlYW1pbmcpIGZvclxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtPzogZmFsc2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyBleHRlbmRzIE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50IGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1zdHJlYW1pbmcpIGZvclxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtOiB0cnVlO1xufVxuXG5leHBvcnQgdHlwZSBNZXNzYWdlU3RyZWFtUGFyYW1zID0gTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2U7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zIHtcbiAgLyoqXG4gICAqIElucHV0IG1lc3NhZ2VzLlxuICAgKlxuICAgKiBPdXIgbW9kZWxzIGFyZSB0cmFpbmVkIHRvIG9wZXJhdGUgb24gYWx0ZXJuYXRpbmcgYHVzZXJgIGFuZCBgYXNzaXN0YW50YFxuICAgKiBjb252ZXJzYXRpb25hbCB0dXJucy4gV2hlbiBjcmVhdGluZyBhIG5ldyBgTWVzc2FnZWAsIHlvdSBzcGVjaWZ5IHRoZSBwcmlvclxuICAgKiBjb252ZXJzYXRpb25hbCB0dXJucyB3aXRoIHRoZSBgbWVzc2FnZXNgIHBhcmFtZXRlciwgYW5kIHRoZSBtb2RlbCB0aGVuIGdlbmVyYXRlc1xuICAgKiB0aGUgbmV4dCBgTWVzc2FnZWAgaW4gdGhlIGNvbnZlcnNhdGlvbi4gQ29uc2VjdXRpdmUgYHVzZXJgIG9yIGBhc3Npc3RhbnRgIHR1cm5zXG4gICAqIGluIHlvdXIgcmVxdWVzdCB3aWxsIGJlIGNvbWJpbmVkIGludG8gYSBzaW5nbGUgdHVybi5cbiAgICpcbiAgICogRWFjaCBpbnB1dCBtZXNzYWdlIG11c3QgYmUgYW4gb2JqZWN0IHdpdGggYSBgcm9sZWAgYW5kIGBjb250ZW50YC4gWW91IGNhblxuICAgKiBzcGVjaWZ5IGEgc2luZ2xlIGB1c2VyYC1yb2xlIG1lc3NhZ2UsIG9yIHlvdSBjYW4gaW5jbHVkZSBtdWx0aXBsZSBgdXNlcmAgYW5kXG4gICAqIGBhc3Npc3RhbnRgIG1lc3NhZ2VzLlxuICAgKlxuICAgKiBJZiB0aGUgZmluYWwgbWVzc2FnZSB1c2VzIHRoZSBgYXNzaXN0YW50YCByb2xlLCB0aGUgcmVzcG9uc2UgY29udGVudCB3aWxsXG4gICAqIGNvbnRpbnVlIGltbWVkaWF0ZWx5IGZyb20gdGhlIGNvbnRlbnQgaW4gdGhhdCBtZXNzYWdlLiBUaGlzIGNhbiBiZSB1c2VkIHRvXG4gICAqIGNvbnN0cmFpbiBwYXJ0IG9mIHRoZSBtb2RlbCdzIHJlc3BvbnNlLlxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggYSBzaW5nbGUgYHVzZXJgIG1lc3NhZ2U6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW3sgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfV1cbiAgICogYGBgXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBtdWx0aXBsZSBjb252ZXJzYXRpb25hbCB0dXJuczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAgeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvIHRoZXJlLlwiIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiSGksIEknbSBDbGF1ZGUuIEhvdyBjYW4gSSBoZWxwIHlvdT9cIiB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJDYW4geW91IGV4cGxhaW4gTExNcyBpbiBwbGFpbiBFbmdsaXNoP1wiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIGEgcGFydGlhbGx5LWZpbGxlZCByZXNwb25zZSBmcm9tIENsYXVkZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiV2hhdCdzIHRoZSBHcmVlayBuYW1lIGZvciBTdW4/IChBKSBTb2wgKEIpIEhlbGlvcyAoQykgU3VuXCJcbiAgICogICB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIlRoZSBiZXN0IGFuc3dlciBpcyAoXCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBFYWNoIGlucHV0IG1lc3NhZ2UgYGNvbnRlbnRgIG1heSBiZSBlaXRoZXIgYSBzaW5nbGUgYHN0cmluZ2Agb3IgYW4gYXJyYXkgb2ZcbiAgICogY29udGVudCBibG9ja3MsIHdoZXJlIGVhY2ggYmxvY2sgaGFzIGEgc3BlY2lmaWMgYHR5cGVgLiBVc2luZyBhIGBzdHJpbmdgIGZvclxuICAgKiBgY29udGVudGAgaXMgc2hvcnRoYW5kIGZvciBhbiBhcnJheSBvZiBvbmUgY29udGVudCBibG9jayBvZiB0eXBlIGBcInRleHRcImAuIFRoZVxuICAgKiBmb2xsb3dpbmcgaW5wdXQgbWVzc2FnZXMgYXJlIGVxdWl2YWxlbnQ6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogW3sgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfV0gfVxuICAgKiBgYGBcbiAgICpcbiAgICogU3RhcnRpbmcgd2l0aCBDbGF1ZGUgMyBtb2RlbHMsIHlvdSBjYW4gYWxzbyBzZW5kIGltYWdlIGNvbnRlbnQgYmxvY2tzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHtcbiAgICogICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgXCJjb250ZW50XCI6IFtcbiAgICogICAgIHtcbiAgICogICAgICAgXCJ0eXBlXCI6IFwiaW1hZ2VcIixcbiAgICogICAgICAgXCJzb3VyY2VcIjoge1xuICAgKiAgICAgICAgIFwidHlwZVwiOiBcImJhc2U2NFwiLFxuICAgKiAgICAgICAgIFwibWVkaWFfdHlwZVwiOiBcImltYWdlL2pwZWdcIixcbiAgICogICAgICAgICBcImRhdGFcIjogXCIvOWovNEFBUVNrWkpSZy4uLlwiXG4gICAqICAgICAgIH1cbiAgICogICAgIH0sXG4gICAqICAgICB7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiV2hhdCBpcyBpbiB0aGlzIGltYWdlP1wiIH1cbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFdlIGN1cnJlbnRseSBzdXBwb3J0IHRoZSBgYmFzZTY0YCBzb3VyY2UgdHlwZSBmb3IgaW1hZ2VzLCBhbmQgdGhlIGBpbWFnZS9qcGVnYCxcbiAgICogYGltYWdlL3BuZ2AsIGBpbWFnZS9naWZgLCBhbmQgYGltYWdlL3dlYnBgIG1lZGlhIHR5cGVzLlxuICAgKlxuICAgKiBTZWUgW2V4YW1wbGVzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtZXhhbXBsZXMjdmlzaW9uKSBmb3JcbiAgICogbW9yZSBpbnB1dCBleGFtcGxlcy5cbiAgICpcbiAgICogTm90ZSB0aGF0IGlmIHlvdSB3YW50IHRvIGluY2x1ZGUgYVxuICAgKiBbc3lzdGVtIHByb21wdF0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9zeXN0ZW0tcHJvbXB0cyksIHlvdSBjYW4gdXNlXG4gICAqIHRoZSB0b3AtbGV2ZWwgYHN5c3RlbWAgcGFyYW1ldGVyIFx1MjAxNCB0aGVyZSBpcyBubyBgXCJzeXN0ZW1cImAgcm9sZSBmb3IgaW5wdXRcbiAgICogbWVzc2FnZXMgaW4gdGhlIE1lc3NhZ2VzIEFQSS5cbiAgICovXG4gIG1lc3NhZ2VzOiBBcnJheTxNZXNzYWdlUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgdGhhdCB3aWxsIGNvbXBsZXRlIHlvdXIgcHJvbXB0LlxcblxcblNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGFkZGl0aW9uYWxcbiAgICogZGV0YWlscyBhbmQgb3B0aW9ucy5cbiAgICovXG4gIG1vZGVsOiBNb2RlbDtcblxuICAvKipcbiAgICogU3lzdGVtIHByb21wdC5cbiAgICpcbiAgICogQSBzeXN0ZW0gcHJvbXB0IGlzIGEgd2F5IG9mIHByb3ZpZGluZyBjb250ZXh0IGFuZCBpbnN0cnVjdGlvbnMgdG8gQ2xhdWRlLCBzdWNoXG4gICAqIGFzIHNwZWNpZnlpbmcgYSBwYXJ0aWN1bGFyIGdvYWwgb3Igcm9sZS4gU2VlIG91clxuICAgKiBbZ3VpZGUgdG8gc3lzdGVtIHByb21wdHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3Mvc3lzdGVtLXByb21wdHMpLlxuICAgKi9cbiAgc3lzdGVtPzogc3RyaW5nIHwgQXJyYXk8VGV4dEJsb2NrUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBIb3cgdGhlIG1vZGVsIHNob3VsZCB1c2UgdGhlIHByb3ZpZGVkIHRvb2xzLiBUaGUgbW9kZWwgY2FuIHVzZSBhIHNwZWNpZmljIHRvb2wsXG4gICAqIGFueSBhdmFpbGFibGUgdG9vbCwgb3IgZGVjaWRlIGJ5IGl0c2VsZi5cbiAgICovXG4gIHRvb2xfY2hvaWNlPzogVG9vbENob2ljZTtcblxuICAvKipcbiAgICogRGVmaW5pdGlvbnMgb2YgdG9vbHMgdGhhdCB0aGUgbW9kZWwgbWF5IHVzZS5cbiAgICpcbiAgICogSWYgeW91IGluY2x1ZGUgYHRvb2xzYCBpbiB5b3VyIEFQSSByZXF1ZXN0LCB0aGUgbW9kZWwgbWF5IHJldHVybiBgdG9vbF91c2VgXG4gICAqIGNvbnRlbnQgYmxvY2tzIHRoYXQgcmVwcmVzZW50IHRoZSBtb2RlbCdzIHVzZSBvZiB0aG9zZSB0b29scy4gWW91IGNhbiB0aGVuIHJ1blxuICAgKiB0aG9zZSB0b29scyB1c2luZyB0aGUgdG9vbCBpbnB1dCBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGFuZCB0aGVuIG9wdGlvbmFsbHlcbiAgICogcmV0dXJuIHJlc3VsdHMgYmFjayB0byB0aGUgbW9kZWwgdXNpbmcgYHRvb2xfcmVzdWx0YCBjb250ZW50IGJsb2Nrcy5cbiAgICpcbiAgICogRWFjaCB0b29sIGRlZmluaXRpb24gaW5jbHVkZXM6XG4gICAqXG4gICAqIC0gYG5hbWVgOiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKiAtIGBkZXNjcmlwdGlvbmA6IE9wdGlvbmFsLCBidXQgc3Ryb25nbHktcmVjb21tZW5kZWQgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wuXG4gICAqIC0gYGlucHV0X3NjaGVtYWA6IFtKU09OIHNjaGVtYV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvKSBmb3IgdGhlIHRvb2wgYGlucHV0YFxuICAgKiAgIHNoYXBlIHRoYXQgdGhlIG1vZGVsIHdpbGwgcHJvZHVjZSBpbiBgdG9vbF91c2VgIG91dHB1dCBjb250ZW50IGJsb2Nrcy5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGlmIHlvdSBkZWZpbmVkIGB0b29sc2AgYXM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwibmFtZVwiOiBcImdldF9zdG9ja19wcmljZVwiLFxuICAgKiAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkdldCB0aGUgY3VycmVudCBzdG9jayBwcmljZSBmb3IgYSBnaXZlbiB0aWNrZXIgc3ltYm9sLlwiLFxuICAgKiAgICAgXCJpbnB1dF9zY2hlbWFcIjoge1xuICAgKiAgICAgICBcInR5cGVcIjogXCJvYmplY3RcIixcbiAgICogICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcbiAgICogICAgICAgICBcInRpY2tlclwiOiB7XG4gICAqICAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcbiAgICogICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgc3RvY2sgdGlja2VyIHN5bWJvbCwgZS5nLiBBQVBMIGZvciBBcHBsZSBJbmMuXCJcbiAgICogICAgICAgICB9XG4gICAqICAgICAgIH0sXG4gICAqICAgICAgIFwicmVxdWlyZWRcIjogW1widGlja2VyXCJdXG4gICAqICAgICB9XG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBBbmQgdGhlbiBhc2tlZCB0aGUgbW9kZWwgXCJXaGF0J3MgdGhlIFMmUCA1MDAgYXQgdG9kYXk/XCIsIHRoZSBtb2RlbCBtaWdodCBwcm9kdWNlXG4gICAqIGB0b29sX3VzZWAgY29udGVudCBibG9ja3MgaW4gdGhlIHJlc3BvbnNlIGxpa2UgdGhpczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJ0eXBlXCI6IFwidG9vbF91c2VcIixcbiAgICogICAgIFwiaWRcIjogXCJ0b29sdV8wMUQ3RkxyZmg0R1lxN3lUMVVMRmV5TVZcIixcbiAgICogICAgIFwibmFtZVwiOiBcImdldF9zdG9ja19wcmljZVwiLFxuICAgKiAgICAgXCJpbnB1dFwiOiB7IFwidGlja2VyXCI6IFwiXkdTUENcIiB9XG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBZb3UgbWlnaHQgdGhlbiBydW4geW91ciBgZ2V0X3N0b2NrX3ByaWNlYCB0b29sIHdpdGggYHtcInRpY2tlclwiOiBcIl5HU1BDXCJ9YCBhcyBhblxuICAgKiBpbnB1dCwgYW5kIHJldHVybiB0aGUgZm9sbG93aW5nIGJhY2sgdG8gdGhlIG1vZGVsIGluIGEgc3Vic2VxdWVudCBgdXNlcmBcbiAgICogbWVzc2FnZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJ0eXBlXCI6IFwidG9vbF9yZXN1bHRcIixcbiAgICogICAgIFwidG9vbF91c2VfaWRcIjogXCJ0b29sdV8wMUQ3RkxyZmg0R1lxN3lUMVVMRmV5TVZcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIjI1OS43NSBVU0RcIlxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogVG9vbHMgY2FuIGJlIHVzZWQgZm9yIHdvcmtmbG93cyB0aGF0IGluY2x1ZGUgcnVubmluZyBjbGllbnQtc2lkZSB0b29scyBhbmRcbiAgICogZnVuY3Rpb25zLCBvciBtb3JlIGdlbmVyYWxseSB3aGVuZXZlciB5b3Ugd2FudCB0aGUgbW9kZWwgdG8gcHJvZHVjZSBhIHBhcnRpY3VsYXJcbiAgICogSlNPTiBzdHJ1Y3R1cmUgb2Ygb3V0cHV0LlxuICAgKlxuICAgKiBTZWUgb3VyIFtndWlkZV0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy90b29sLXVzZSkgZm9yIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIHRvb2xzPzogQXJyYXk8VG9vbD47XG59XG5cbk1lc3NhZ2VzLkJhdGNoZXMgPSBCYXRjaGVzO1xuTWVzc2FnZXMuTWVzc2FnZUJhdGNoZXNQYWdlID0gTWVzc2FnZUJhdGNoZXNQYWdlO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgTWVzc2FnZXMge1xuICBleHBvcnQge1xuICAgIHR5cGUgQmFzZTY0UERGU291cmNlIGFzIEJhc2U2NFBERlNvdXJjZSxcbiAgICB0eXBlIENhY2hlQ29udHJvbEVwaGVtZXJhbCBhcyBDYWNoZUNvbnRyb2xFcGhlbWVyYWwsXG4gICAgdHlwZSBDaXRhdGlvbkNoYXJMb2NhdGlvbiBhcyBDaXRhdGlvbkNoYXJMb2NhdGlvbixcbiAgICB0eXBlIENpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0gYXMgQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbSxcbiAgICB0eXBlIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24gYXMgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbixcbiAgICB0eXBlIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSBhcyBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBDaXRhdGlvblBhZ2VMb2NhdGlvbiBhcyBDaXRhdGlvblBhZ2VMb2NhdGlvbixcbiAgICB0eXBlIENpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0gYXMgQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbSxcbiAgICB0eXBlIENpdGF0aW9uc0NvbmZpZ1BhcmFtIGFzIENpdGF0aW9uc0NvbmZpZ1BhcmFtLFxuICAgIHR5cGUgQ2l0YXRpb25zRGVsdGEgYXMgQ2l0YXRpb25zRGVsdGEsXG4gICAgdHlwZSBDb250ZW50QmxvY2sgYXMgQ29udGVudEJsb2NrLFxuICAgIHR5cGUgQ29udGVudEJsb2NrRGVsdGFFdmVudCBhcyBDb250ZW50QmxvY2tEZWx0YUV2ZW50LFxuICAgIHR5cGUgQ29udGVudEJsb2NrUGFyYW0gYXMgQ29udGVudEJsb2NrUGFyYW0sXG4gICAgdHlwZSBDb250ZW50QmxvY2tTb3VyY2UgYXMgQ29udGVudEJsb2NrU291cmNlLFxuICAgIHR5cGUgQ29udGVudEJsb2NrU291cmNlQ29udGVudCBhcyBDb250ZW50QmxvY2tTb3VyY2VDb250ZW50LFxuICAgIHR5cGUgQ29udGVudEJsb2NrU3RhcnRFdmVudCBhcyBDb250ZW50QmxvY2tTdGFydEV2ZW50LFxuICAgIHR5cGUgQ29udGVudEJsb2NrU3RvcEV2ZW50IGFzIENvbnRlbnRCbG9ja1N0b3BFdmVudCxcbiAgICB0eXBlIERvY3VtZW50QmxvY2tQYXJhbSBhcyBEb2N1bWVudEJsb2NrUGFyYW0sXG4gICAgdHlwZSBJbWFnZUJsb2NrUGFyYW0gYXMgSW1hZ2VCbG9ja1BhcmFtLFxuICAgIHR5cGUgSW5wdXRKc29uRGVsdGEgYXMgSW5wdXRKc29uRGVsdGEsXG4gICAgdHlwZSBJbnB1dEpTT05EZWx0YSBhcyBJbnB1dEpTT05EZWx0YSxcbiAgICB0eXBlIE1lc3NhZ2UgYXMgTWVzc2FnZSxcbiAgICB0eXBlIE1lc3NhZ2VEZWx0YUV2ZW50IGFzIE1lc3NhZ2VEZWx0YUV2ZW50LFxuICAgIHR5cGUgTWVzc2FnZURlbHRhVXNhZ2UgYXMgTWVzc2FnZURlbHRhVXNhZ2UsXG4gICAgdHlwZSBNZXNzYWdlUGFyYW0gYXMgTWVzc2FnZVBhcmFtLFxuICAgIHR5cGUgTWVzc2FnZVN0YXJ0RXZlbnQgYXMgTWVzc2FnZVN0YXJ0RXZlbnQsXG4gICAgdHlwZSBNZXNzYWdlU3RvcEV2ZW50IGFzIE1lc3NhZ2VTdG9wRXZlbnQsXG4gICAgdHlwZSBNZXNzYWdlU3RyZWFtRXZlbnQgYXMgTWVzc2FnZVN0cmVhbUV2ZW50LFxuICAgIHR5cGUgTWVzc2FnZVRva2Vuc0NvdW50IGFzIE1lc3NhZ2VUb2tlbnNDb3VudCxcbiAgICB0eXBlIE1ldGFkYXRhIGFzIE1ldGFkYXRhLFxuICAgIHR5cGUgTW9kZWwgYXMgTW9kZWwsXG4gICAgdHlwZSBQbGFpblRleHRTb3VyY2UgYXMgUGxhaW5UZXh0U291cmNlLFxuICAgIHR5cGUgUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCBhcyBSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50LFxuICAgIHR5cGUgUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCBhcyBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50LFxuICAgIHR5cGUgUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50IGFzIFJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VEZWx0YUV2ZW50IGFzIFJhd01lc3NhZ2VEZWx0YUV2ZW50LFxuICAgIHR5cGUgUmF3TWVzc2FnZVN0YXJ0RXZlbnQgYXMgUmF3TWVzc2FnZVN0YXJ0RXZlbnQsXG4gICAgdHlwZSBSYXdNZXNzYWdlU3RvcEV2ZW50IGFzIFJhd01lc3NhZ2VTdG9wRXZlbnQsXG4gICAgdHlwZSBSYXdNZXNzYWdlU3RyZWFtRXZlbnQgYXMgUmF3TWVzc2FnZVN0cmVhbUV2ZW50LFxuICAgIHR5cGUgVGV4dEJsb2NrIGFzIFRleHRCbG9jayxcbiAgICB0eXBlIFRleHRCbG9ja1BhcmFtIGFzIFRleHRCbG9ja1BhcmFtLFxuICAgIHR5cGUgVGV4dENpdGF0aW9uIGFzIFRleHRDaXRhdGlvbixcbiAgICB0eXBlIFRleHRDaXRhdGlvblBhcmFtIGFzIFRleHRDaXRhdGlvblBhcmFtLFxuICAgIHR5cGUgVGV4dERlbHRhIGFzIFRleHREZWx0YSxcbiAgICB0eXBlIFRvb2wgYXMgVG9vbCxcbiAgICB0eXBlIFRvb2xDaG9pY2UgYXMgVG9vbENob2ljZSxcbiAgICB0eXBlIFRvb2xDaG9pY2VBbnkgYXMgVG9vbENob2ljZUFueSxcbiAgICB0eXBlIFRvb2xDaG9pY2VBdXRvIGFzIFRvb2xDaG9pY2VBdXRvLFxuICAgIHR5cGUgVG9vbENob2ljZVRvb2wgYXMgVG9vbENob2ljZVRvb2wsXG4gICAgdHlwZSBUb29sUmVzdWx0QmxvY2tQYXJhbSBhcyBUb29sUmVzdWx0QmxvY2tQYXJhbSxcbiAgICB0eXBlIFRvb2xVc2VCbG9jayBhcyBUb29sVXNlQmxvY2ssXG4gICAgdHlwZSBUb29sVXNlQmxvY2tQYXJhbSBhcyBUb29sVXNlQmxvY2tQYXJhbSxcbiAgICB0eXBlIFVzYWdlIGFzIFVzYWdlLFxuICAgIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtcyBhcyBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICAgIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBhcyBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICAgIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyBhcyBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICAgIHR5cGUgTWVzc2FnZVN0cmVhbVBhcmFtcyBhcyBNZXNzYWdlU3RyZWFtUGFyYW1zLFxuICAgIHR5cGUgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zIGFzIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyxcbiAgfTtcblxuICBleHBvcnQge1xuICAgIEJhdGNoZXMgYXMgQmF0Y2hlcyxcbiAgICB0eXBlIERlbGV0ZWRNZXNzYWdlQmF0Y2ggYXMgRGVsZXRlZE1lc3NhZ2VCYXRjaCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaCBhcyBNZXNzYWdlQmF0Y2gsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCBhcyBNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQgYXMgTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQgYXMgTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSBhcyBNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzIGFzIE1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hSZXN1bHQgYXMgTWVzc2FnZUJhdGNoUmVzdWx0LFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0IGFzIE1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCxcbiAgICBNZXNzYWdlQmF0Y2hlc1BhZ2UgYXMgTWVzc2FnZUJhdGNoZXNQYWdlLFxuICAgIHR5cGUgQmF0Y2hDcmVhdGVQYXJhbXMgYXMgQmF0Y2hDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBCYXRjaExpc3RQYXJhbXMgYXMgQmF0Y2hMaXN0UGFyYW1zLFxuICB9O1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSBcIi4uL3Jlc291cmNlLmpzXCI7XG5pbXBvcnQgeyBpc1JlcXVlc3RPcHRpb25zIH0gZnJvbSBcIi4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4uL2NvcmUuanNcIjtcbmltcG9ydCB7IFBhZ2UsIHR5cGUgUGFnZVBhcmFtcyB9IGZyb20gXCIuLi9wYWdpbmF0aW9uLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBNb2RlbHMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBHZXQgYSBzcGVjaWZpYyBtb2RlbC5cbiAgICpcbiAgICogVGhlIE1vZGVscyBBUEkgcmVzcG9uc2UgY2FuIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWNcbiAgICogbW9kZWwgb3IgcmVzb2x2ZSBhIG1vZGVsIGFsaWFzIHRvIGEgbW9kZWwgSUQuXG4gICAqL1xuICByZXRyaWV2ZShtb2RlbElkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPE1vZGVsSW5mbz4ge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZ2V0KGAvdjEvbW9kZWxzLyR7bW9kZWxJZH1gLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0IGF2YWlsYWJsZSBtb2RlbHMuXG4gICAqXG4gICAqIFRoZSBNb2RlbHMgQVBJIHJlc3BvbnNlIGNhbiBiZSB1c2VkIHRvIGRldGVybWluZSB3aGljaCBtb2RlbHMgYXJlIGF2YWlsYWJsZSBmb3JcbiAgICogdXNlIGluIHRoZSBBUEkuIE1vcmUgcmVjZW50bHkgcmVsZWFzZWQgbW9kZWxzIGFyZSBsaXN0ZWQgZmlyc3QuXG4gICAqL1xuICBsaXN0KHF1ZXJ5PzogTW9kZWxMaXN0UGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuUGFnZVByb21pc2U8TW9kZWxJbmZvc1BhZ2UsIE1vZGVsSW5mbz47XG4gIGxpc3Qob3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLlBhZ2VQcm9taXNlPE1vZGVsSW5mb3NQYWdlLCBNb2RlbEluZm8+O1xuICBsaXN0KFxuICAgIHF1ZXJ5OiBNb2RlbExpc3RQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8TW9kZWxJbmZvc1BhZ2UsIE1vZGVsSW5mbz4ge1xuICAgIGlmIChpc1JlcXVlc3RPcHRpb25zKHF1ZXJ5KSkge1xuICAgICAgcmV0dXJuIHRoaXMubGlzdCh7fSwgcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmdldEFQSUxpc3QoJy92MS9tb2RlbHMnLCBNb2RlbEluZm9zUGFnZSwgeyBxdWVyeSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTW9kZWxJbmZvc1BhZ2UgZXh0ZW5kcyBQYWdlPE1vZGVsSW5mbz4ge31cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbEluZm8ge1xuICAvKipcbiAgICogVW5pcXVlIG1vZGVsIGlkZW50aWZpZXIuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIHRoZSBtb2RlbCB3YXMgcmVsZWFzZWQuXG4gICAqIE1heSBiZSBzZXQgdG8gYW4gZXBvY2ggdmFsdWUgaWYgdGhlIHJlbGVhc2UgZGF0ZSBpcyB1bmtub3duLlxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBIGh1bWFuLXJlYWRhYmxlIG5hbWUgZm9yIHRoZSBtb2RlbC5cbiAgICovXG4gIGRpc3BsYXlfbmFtZTogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBPYmplY3QgdHlwZS5cbiAgICpcbiAgICogRm9yIE1vZGVscywgdGhpcyBpcyBhbHdheXMgYFwibW9kZWxcImAuXG4gICAqL1xuICB0eXBlOiAnbW9kZWwnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsTGlzdFBhcmFtcyBleHRlbmRzIFBhZ2VQYXJhbXMge31cblxuTW9kZWxzLk1vZGVsSW5mb3NQYWdlID0gTW9kZWxJbmZvc1BhZ2U7XG5cbmV4cG9ydCBkZWNsYXJlIG5hbWVzcGFjZSBNb2RlbHMge1xuICBleHBvcnQge1xuICAgIHR5cGUgTW9kZWxJbmZvIGFzIE1vZGVsSW5mbyxcbiAgICBNb2RlbEluZm9zUGFnZSBhcyBNb2RlbEluZm9zUGFnZSxcbiAgICB0eXBlIE1vZGVsTGlzdFBhcmFtcyBhcyBNb2RlbExpc3RQYXJhbXMsXG4gIH07XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuZXhwb3J0ICogZnJvbSBcIi4vc2hhcmVkLmpzXCI7XG5leHBvcnQge1xuICBCZXRhLFxuICB0eXBlIEFudGhyb3BpY0JldGEsXG4gIHR5cGUgQmV0YUFQSUVycm9yLFxuICB0eXBlIEJldGFBdXRoZW50aWNhdGlvbkVycm9yLFxuICB0eXBlIEJldGFCaWxsaW5nRXJyb3IsXG4gIHR5cGUgQmV0YUVycm9yLFxuICB0eXBlIEJldGFFcnJvclJlc3BvbnNlLFxuICB0eXBlIEJldGFHYXRld2F5VGltZW91dEVycm9yLFxuICB0eXBlIEJldGFJbnZhbGlkUmVxdWVzdEVycm9yLFxuICB0eXBlIEJldGFOb3RGb3VuZEVycm9yLFxuICB0eXBlIEJldGFPdmVybG9hZGVkRXJyb3IsXG4gIHR5cGUgQmV0YVBlcm1pc3Npb25FcnJvcixcbiAgdHlwZSBCZXRhUmF0ZUxpbWl0RXJyb3IsXG59IGZyb20gXCIuL2JldGEvYmV0YS5qc1wiO1xuZXhwb3J0IHtcbiAgQ29tcGxldGlvbnMsXG4gIHR5cGUgQ29tcGxldGlvbixcbiAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zLFxuICB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gIHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbn0gZnJvbSBcIi4vY29tcGxldGlvbnMuanNcIjtcbmV4cG9ydCB7XG4gIE1lc3NhZ2VzLFxuICB0eXBlIEJhc2U2NFBERlNvdXJjZSxcbiAgdHlwZSBDYWNoZUNvbnRyb2xFcGhlbWVyYWwsXG4gIHR5cGUgQ2l0YXRpb25DaGFyTG9jYXRpb24sXG4gIHR5cGUgQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbSxcbiAgdHlwZSBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uLFxuICB0eXBlIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSxcbiAgdHlwZSBDaXRhdGlvblBhZ2VMb2NhdGlvbixcbiAgdHlwZSBDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtLFxuICB0eXBlIENpdGF0aW9uc0NvbmZpZ1BhcmFtLFxuICB0eXBlIENpdGF0aW9uc0RlbHRhLFxuICB0eXBlIENvbnRlbnRCbG9jayxcbiAgdHlwZSBDb250ZW50QmxvY2tEZWx0YUV2ZW50LFxuICB0eXBlIENvbnRlbnRCbG9ja1BhcmFtLFxuICB0eXBlIENvbnRlbnRCbG9ja1NvdXJjZSxcbiAgdHlwZSBDb250ZW50QmxvY2tTb3VyY2VDb250ZW50LFxuICB0eXBlIENvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gIHR5cGUgQ29udGVudEJsb2NrU3RvcEV2ZW50LFxuICB0eXBlIERvY3VtZW50QmxvY2tQYXJhbSxcbiAgdHlwZSBJbWFnZUJsb2NrUGFyYW0sXG4gIHR5cGUgSW5wdXRKc29uRGVsdGEsXG4gIHR5cGUgSW5wdXRKU09ORGVsdGEsXG4gIHR5cGUgTWVzc2FnZSxcbiAgdHlwZSBNZXNzYWdlRGVsdGFFdmVudCxcbiAgdHlwZSBNZXNzYWdlRGVsdGFVc2FnZSxcbiAgdHlwZSBNZXNzYWdlUGFyYW0sXG4gIHR5cGUgTWVzc2FnZVN0YXJ0RXZlbnQsXG4gIHR5cGUgTWVzc2FnZVN0b3BFdmVudCxcbiAgdHlwZSBNZXNzYWdlU3RyZWFtRXZlbnQsXG4gIHR5cGUgTWVzc2FnZVN0cmVhbVBhcmFtcyxcbiAgdHlwZSBNZXNzYWdlVG9rZW5zQ291bnQsXG4gIHR5cGUgTWV0YWRhdGEsXG4gIHR5cGUgTW9kZWwsXG4gIHR5cGUgUGxhaW5UZXh0U291cmNlLFxuICB0eXBlIFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gIHR5cGUgUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgdHlwZSBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gIHR5cGUgUmF3TWVzc2FnZURlbHRhRXZlbnQsXG4gIHR5cGUgUmF3TWVzc2FnZVN0YXJ0RXZlbnQsXG4gIHR5cGUgUmF3TWVzc2FnZVN0b3BFdmVudCxcbiAgdHlwZSBSYXdNZXNzYWdlU3RyZWFtRXZlbnQsXG4gIHR5cGUgVGV4dEJsb2NrLFxuICB0eXBlIFRleHRCbG9ja1BhcmFtLFxuICB0eXBlIFRleHRDaXRhdGlvbixcbiAgdHlwZSBUZXh0Q2l0YXRpb25QYXJhbSxcbiAgdHlwZSBUZXh0RGVsdGEsXG4gIHR5cGUgVG9vbCxcbiAgdHlwZSBUb29sQ2hvaWNlLFxuICB0eXBlIFRvb2xDaG9pY2VBbnksXG4gIHR5cGUgVG9vbENob2ljZUF1dG8sXG4gIHR5cGUgVG9vbENob2ljZVRvb2wsXG4gIHR5cGUgVG9vbFJlc3VsdEJsb2NrUGFyYW0sXG4gIHR5cGUgVG9vbFVzZUJsb2NrLFxuICB0eXBlIFRvb2xVc2VCbG9ja1BhcmFtLFxuICB0eXBlIFVzYWdlLFxuICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICB0eXBlIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyxcbn0gZnJvbSBcIi4vbWVzc2FnZXMvbWVzc2FnZXMuanNcIjtcbmV4cG9ydCB7IE1vZGVsSW5mb3NQYWdlLCBNb2RlbHMsIHR5cGUgTW9kZWxJbmZvLCB0eXBlIE1vZGVsTGlzdFBhcmFtcyB9IGZyb20gXCIuL21vZGVscy5qc1wiO1xuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IHR5cGUgQWdlbnQgfSBmcm9tIFwiLi9fc2hpbXMvaW5kZXguanNcIjtcbmltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgRXJyb3JzIGZyb20gXCIuL2Vycm9yLmpzXCI7XG5pbXBvcnQgKiBhcyBQYWdpbmF0aW9uIGZyb20gXCIuL3BhZ2luYXRpb24uanNcIjtcbmltcG9ydCB7IHR5cGUgUGFnZVBhcmFtcywgUGFnZVJlc3BvbnNlIH0gZnJvbSBcIi4vcGFnaW5hdGlvbi5qc1wiO1xuaW1wb3J0ICogYXMgVXBsb2FkcyBmcm9tIFwiLi91cGxvYWRzLmpzXCI7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSBcIi4vcmVzb3VyY2VzL2luZGV4LmpzXCI7XG5pbXBvcnQge1xuICBDb21wbGV0aW9uLFxuICBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zLFxuICBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICBDb21wbGV0aW9ucyxcbn0gZnJvbSBcIi4vcmVzb3VyY2VzL2NvbXBsZXRpb25zLmpzXCI7XG5pbXBvcnQgeyBNb2RlbEluZm8sIE1vZGVsSW5mb3NQYWdlLCBNb2RlbExpc3RQYXJhbXMsIE1vZGVscyB9IGZyb20gXCIuL3Jlc291cmNlcy9tb2RlbHMuanNcIjtcbmltcG9ydCB7XG4gIEFudGhyb3BpY0JldGEsXG4gIEJldGEsXG4gIEJldGFBUElFcnJvcixcbiAgQmV0YUF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gIEJldGFCaWxsaW5nRXJyb3IsXG4gIEJldGFFcnJvcixcbiAgQmV0YUVycm9yUmVzcG9uc2UsXG4gIEJldGFHYXRld2F5VGltZW91dEVycm9yLFxuICBCZXRhSW52YWxpZFJlcXVlc3RFcnJvcixcbiAgQmV0YU5vdEZvdW5kRXJyb3IsXG4gIEJldGFPdmVybG9hZGVkRXJyb3IsXG4gIEJldGFQZXJtaXNzaW9uRXJyb3IsXG4gIEJldGFSYXRlTGltaXRFcnJvcixcbn0gZnJvbSBcIi4vcmVzb3VyY2VzL2JldGEvYmV0YS5qc1wiO1xuaW1wb3J0IHtcbiAgQmFzZTY0UERGU291cmNlLFxuICBDYWNoZUNvbnRyb2xFcGhlbWVyYWwsXG4gIENpdGF0aW9uQ2hhckxvY2F0aW9uLFxuICBDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtLFxuICBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uLFxuICBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0sXG4gIENpdGF0aW9uUGFnZUxvY2F0aW9uLFxuICBDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtLFxuICBDaXRhdGlvbnNDb25maWdQYXJhbSxcbiAgQ2l0YXRpb25zRGVsdGEsXG4gIENvbnRlbnRCbG9jayxcbiAgQ29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgQ29udGVudEJsb2NrUGFyYW0sXG4gIENvbnRlbnRCbG9ja1NvdXJjZSxcbiAgQ29udGVudEJsb2NrU291cmNlQ29udGVudCxcbiAgQ29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgQ29udGVudEJsb2NrU3RvcEV2ZW50LFxuICBEb2N1bWVudEJsb2NrUGFyYW0sXG4gIEltYWdlQmxvY2tQYXJhbSxcbiAgSW5wdXRKU09ORGVsdGEsXG4gIE1lc3NhZ2UsXG4gIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyxcbiAgTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgTWVzc2FnZURlbHRhRXZlbnQsXG4gIE1lc3NhZ2VEZWx0YVVzYWdlLFxuICBNZXNzYWdlUGFyYW0sXG4gIE1lc3NhZ2VTdGFydEV2ZW50LFxuICBNZXNzYWdlU3RvcEV2ZW50LFxuICBNZXNzYWdlU3RyZWFtRXZlbnQsXG4gIE1lc3NhZ2VTdHJlYW1QYXJhbXMsXG4gIE1lc3NhZ2VUb2tlbnNDb3VudCxcbiAgTWVzc2FnZXMsXG4gIE1ldGFkYXRhLFxuICBNb2RlbCxcbiAgUGxhaW5UZXh0U291cmNlLFxuICBSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50LFxuICBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50LFxuICBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gIFJhd01lc3NhZ2VEZWx0YUV2ZW50LFxuICBSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgUmF3TWVzc2FnZVN0b3BFdmVudCxcbiAgUmF3TWVzc2FnZVN0cmVhbUV2ZW50LFxuICBUZXh0QmxvY2ssXG4gIFRleHRCbG9ja1BhcmFtLFxuICBUZXh0Q2l0YXRpb24sXG4gIFRleHRDaXRhdGlvblBhcmFtLFxuICBUZXh0RGVsdGEsXG4gIFRvb2wsXG4gIFRvb2xDaG9pY2UsXG4gIFRvb2xDaG9pY2VBbnksXG4gIFRvb2xDaG9pY2VBdXRvLFxuICBUb29sQ2hvaWNlVG9vbCxcbiAgVG9vbFJlc3VsdEJsb2NrUGFyYW0sXG4gIFRvb2xVc2VCbG9jayxcbiAgVG9vbFVzZUJsb2NrUGFyYW0sXG4gIFVzYWdlLFxufSBmcm9tIFwiLi9yZXNvdXJjZXMvbWVzc2FnZXMvbWVzc2FnZXMuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDbGllbnRPcHRpb25zIHtcbiAgLyoqXG4gICAqIERlZmF1bHRzIHRvIHByb2Nlc3MuZW52WydBTlRIUk9QSUNfQVBJX0tFWSddLlxuICAgKi9cbiAgYXBpS2V5Pzogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogRGVmYXVsdHMgdG8gcHJvY2Vzcy5lbnZbJ0FOVEhST1BJQ19BVVRIX1RPS0VOJ10uXG4gICAqL1xuICBhdXRoVG9rZW4/OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgZGVmYXVsdCBiYXNlIFVSTCBmb3IgdGhlIEFQSSwgZS5nLiwgXCJodHRwczovL2FwaS5leGFtcGxlLmNvbS92Mi9cIlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBwcm9jZXNzLmVudlsnQU5USFJPUElDX0JBU0VfVVJMJ10uXG4gICAqL1xuICBiYXNlVVJMPzogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gYW1vdW50IG9mIHRpbWUgKGluIG1pbGxpc2Vjb25kcykgdGhhdCB0aGUgY2xpZW50IHNob3VsZCB3YWl0IGZvciBhIHJlc3BvbnNlXG4gICAqIGZyb20gdGhlIHNlcnZlciBiZWZvcmUgdGltaW5nIG91dCBhIHNpbmdsZSByZXF1ZXN0LlxuICAgKlxuICAgKiBOb3RlIHRoYXQgcmVxdWVzdCB0aW1lb3V0cyBhcmUgcmV0cmllZCBieSBkZWZhdWx0LCBzbyBpbiBhIHdvcnN0LWNhc2Ugc2NlbmFyaW8geW91IG1heSB3YWl0XG4gICAqIG11Y2ggbG9uZ2VyIHRoYW4gdGhpcyB0aW1lb3V0IGJlZm9yZSB0aGUgcHJvbWlzZSBzdWNjZWVkcyBvciBmYWlscy5cbiAgICovXG4gIHRpbWVvdXQ/OiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIEFuIEhUVFAgYWdlbnQgdXNlZCB0byBtYW5hZ2UgSFRUUChTKSBjb25uZWN0aW9ucy5cbiAgICpcbiAgICogSWYgbm90IHByb3ZpZGVkLCBhbiBhZ2VudCB3aWxsIGJlIGNvbnN0cnVjdGVkIGJ5IGRlZmF1bHQgaW4gdGhlIE5vZGUuanMgZW52aXJvbm1lbnQsXG4gICAqIG90aGVyd2lzZSBubyBhZ2VudCBpcyB1c2VkLlxuICAgKi9cbiAgaHR0cEFnZW50PzogQWdlbnQgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFNwZWNpZnkgYSBjdXN0b20gYGZldGNoYCBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICpcbiAgICogSWYgbm90IHByb3ZpZGVkLCB3ZSB1c2UgYG5vZGUtZmV0Y2hgIG9uIE5vZGUuanMgYW5kIG90aGVyd2lzZSBleHBlY3QgdGhhdCBgZmV0Y2hgIGlzXG4gICAqIGRlZmluZWQgZ2xvYmFsbHkuXG4gICAqL1xuICBmZXRjaD86IENvcmUuRmV0Y2ggfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0aW1lcyB0aGF0IHRoZSBjbGllbnQgd2lsbCByZXRyeSBhIHJlcXVlc3QgaW4gY2FzZSBvZiBhXG4gICAqIHRlbXBvcmFyeSBmYWlsdXJlLCBsaWtlIGEgbmV0d29yayBlcnJvciBvciBhIDVYWCBlcnJvciBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAqXG4gICAqIEBkZWZhdWx0IDJcbiAgICovXG4gIG1heFJldHJpZXM/OiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIERlZmF1bHQgaGVhZGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKlxuICAgKiBUaGVzZSBjYW4gYmUgcmVtb3ZlZCBpbiBpbmRpdmlkdWFsIHJlcXVlc3RzIGJ5IGV4cGxpY2l0bHkgc2V0dGluZyB0aGVcbiAgICogaGVhZGVyIHRvIGB1bmRlZmluZWRgIG9yIGBudWxsYCBpbiByZXF1ZXN0IG9wdGlvbnMuXG4gICAqL1xuICBkZWZhdWx0SGVhZGVycz86IENvcmUuSGVhZGVycyB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogRGVmYXVsdCBxdWVyeSBwYXJhbWV0ZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqXG4gICAqIFRoZXNlIGNhbiBiZSByZW1vdmVkIGluIGluZGl2aWR1YWwgcmVxdWVzdHMgYnkgZXhwbGljaXRseSBzZXR0aW5nIHRoZVxuICAgKiBwYXJhbSB0byBgdW5kZWZpbmVkYCBpbiByZXF1ZXN0IG9wdGlvbnMuXG4gICAqL1xuICBkZWZhdWx0UXVlcnk/OiBDb3JlLkRlZmF1bHRRdWVyeSB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogQnkgZGVmYXVsdCwgY2xpZW50LXNpZGUgdXNlIG9mIHRoaXMgbGlicmFyeSBpcyBub3QgYWxsb3dlZCwgYXMgaXQgcmlza3MgZXhwb3NpbmcgeW91ciBzZWNyZXQgQVBJIGNyZWRlbnRpYWxzIHRvIGF0dGFja2Vycy5cbiAgICogT25seSBzZXQgdGhpcyBvcHRpb24gdG8gYHRydWVgIGlmIHlvdSB1bmRlcnN0YW5kIHRoZSByaXNrcyBhbmQgaGF2ZSBhcHByb3ByaWF0ZSBtaXRpZ2F0aW9ucyBpbiBwbGFjZS5cbiAgICovXG4gIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyPzogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBBUEkgQ2xpZW50IGZvciBpbnRlcmZhY2luZyB3aXRoIHRoZSBBbnRocm9waWMgQVBJLlxuICovXG5leHBvcnQgY2xhc3MgQW50aHJvcGljIGV4dGVuZHMgQ29yZS5BUElDbGllbnQge1xuICBhcGlLZXk6IHN0cmluZyB8IG51bGw7XG4gIGF1dGhUb2tlbjogc3RyaW5nIHwgbnVsbDtcblxuICBwcml2YXRlIF9vcHRpb25zOiBDbGllbnRPcHRpb25zO1xuXG4gIC8qKlxuICAgKiBBUEkgQ2xpZW50IGZvciBpbnRlcmZhY2luZyB3aXRoIHRoZSBBbnRocm9waWMgQVBJLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bGwgfCB1bmRlZmluZWR9IFtvcHRzLmFwaUtleT1wcm9jZXNzLmVudlsnQU5USFJPUElDX0FQSV9LRVknXSA/PyBudWxsXVxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bGwgfCB1bmRlZmluZWR9IFtvcHRzLmF1dGhUb2tlbj1wcm9jZXNzLmVudlsnQU5USFJPUElDX0FVVEhfVE9LRU4nXSA/PyBudWxsXVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuYmFzZVVSTD1wcm9jZXNzLmVudlsnQU5USFJPUElDX0JBU0VfVVJMJ10gPz8gaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbV0gLSBPdmVycmlkZSB0aGUgZGVmYXVsdCBiYXNlIFVSTCBmb3IgdGhlIEFQSS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnRpbWVvdXQ9MTAgbWludXRlc10gLSBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSAoaW4gbWlsbGlzZWNvbmRzKSB0aGUgY2xpZW50IHdpbGwgd2FpdCBmb3IgYSByZXNwb25zZSBiZWZvcmUgdGltaW5nIG91dC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmh0dHBBZ2VudF0gLSBBbiBIVFRQIGFnZW50IHVzZWQgdG8gbWFuYWdlIEhUVFAocykgY29ubmVjdGlvbnMuXG4gICAqIEBwYXJhbSB7Q29yZS5GZXRjaH0gW29wdHMuZmV0Y2hdIC0gU3BlY2lmeSBhIGN1c3RvbSBgZmV0Y2hgIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMubWF4UmV0cmllcz0yXSAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0aW1lcyB0aGUgY2xpZW50IHdpbGwgcmV0cnkgYSByZXF1ZXN0LlxuICAgKiBAcGFyYW0ge0NvcmUuSGVhZGVyc30gb3B0cy5kZWZhdWx0SGVhZGVycyAtIERlZmF1bHQgaGVhZGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge0NvcmUuRGVmYXVsdFF1ZXJ5fSBvcHRzLmRlZmF1bHRRdWVyeSAtIERlZmF1bHQgcXVlcnkgcGFyYW1ldGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmRhbmdlcm91c2x5QWxsb3dCcm93c2VyPWZhbHNlXSAtIEJ5IGRlZmF1bHQsIGNsaWVudC1zaWRlIHVzZSBvZiB0aGlzIGxpYnJhcnkgaXMgbm90IGFsbG93ZWQsIGFzIGl0IHJpc2tzIGV4cG9zaW5nIHlvdXIgc2VjcmV0IEFQSSBjcmVkZW50aWFscyB0byBhdHRhY2tlcnMuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgYmFzZVVSTCA9IENvcmUucmVhZEVudignQU5USFJPUElDX0JBU0VfVVJMJyksXG4gICAgYXBpS2V5ID0gQ29yZS5yZWFkRW52KCdBTlRIUk9QSUNfQVBJX0tFWScpID8/IG51bGwsXG4gICAgYXV0aFRva2VuID0gQ29yZS5yZWFkRW52KCdBTlRIUk9QSUNfQVVUSF9UT0tFTicpID8/IG51bGwsXG4gICAgLi4ub3B0c1xuICB9OiBDbGllbnRPcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBvcHRpb25zOiBDbGllbnRPcHRpb25zID0ge1xuICAgICAgYXBpS2V5LFxuICAgICAgYXV0aFRva2VuLFxuICAgICAgLi4ub3B0cyxcbiAgICAgIGJhc2VVUkw6IGJhc2VVUkwgfHwgYGh0dHBzOi8vYXBpLmFudGhyb3BpYy5jb21gLFxuICAgIH07XG5cbiAgICBpZiAoIW9wdGlvbnMuZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXIgJiYgQ29yZS5pc1J1bm5pbmdJbkJyb3dzZXIoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9ycy5BbnRocm9waWNFcnJvcihcbiAgICAgICAgXCJJdCBsb29rcyBsaWtlIHlvdSdyZSBydW5uaW5nIGluIGEgYnJvd3Nlci1saWtlIGVudmlyb25tZW50LlxcblxcblRoaXMgaXMgZGlzYWJsZWQgYnkgZGVmYXVsdCwgYXMgaXQgcmlza3MgZXhwb3NpbmcgeW91ciBzZWNyZXQgQVBJIGNyZWRlbnRpYWxzIHRvIGF0dGFja2Vycy5cXG5JZiB5b3UgdW5kZXJzdGFuZCB0aGUgcmlza3MgYW5kIGhhdmUgYXBwcm9wcmlhdGUgbWl0aWdhdGlvbnMgaW4gcGxhY2UsXFxueW91IGNhbiBzZXQgdGhlIGBkYW5nZXJvdXNseUFsbG93QnJvd3NlcmAgb3B0aW9uIHRvIGB0cnVlYCwgZS5nLixcXG5cXG5uZXcgQW50aHJvcGljKHsgYXBpS2V5LCBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZSB9KTtcXG5cIixcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3VwZXIoe1xuICAgICAgYmFzZVVSTDogb3B0aW9ucy5iYXNlVVJMISxcbiAgICAgIHRpbWVvdXQ6IG9wdGlvbnMudGltZW91dCA/PyA2MDAwMDAgLyogMTAgbWludXRlcyAqLyxcbiAgICAgIGh0dHBBZ2VudDogb3B0aW9ucy5odHRwQWdlbnQsXG4gICAgICBtYXhSZXRyaWVzOiBvcHRpb25zLm1heFJldHJpZXMsXG4gICAgICBmZXRjaDogb3B0aW9ucy5mZXRjaCxcbiAgICB9KTtcblxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gICAgdGhpcy5hdXRoVG9rZW4gPSBhdXRoVG9rZW47XG4gIH1cblxuICBjb21wbGV0aW9uczogQVBJLkNvbXBsZXRpb25zID0gbmV3IEFQSS5Db21wbGV0aW9ucyh0aGlzKTtcbiAgbWVzc2FnZXM6IEFQSS5NZXNzYWdlcyA9IG5ldyBBUEkuTWVzc2FnZXModGhpcyk7XG4gIG1vZGVsczogQVBJLk1vZGVscyA9IG5ldyBBUEkuTW9kZWxzKHRoaXMpO1xuICBiZXRhOiBBUEkuQmV0YSA9IG5ldyBBUEkuQmV0YSh0aGlzKTtcblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgZGVmYXVsdFF1ZXJ5KCk6IENvcmUuRGVmYXVsdFF1ZXJ5IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5kZWZhdWx0UXVlcnk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgZGVmYXVsdEhlYWRlcnMob3B0czogQ29yZS5GaW5hbFJlcXVlc3RPcHRpb25zKTogQ29yZS5IZWFkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3VwZXIuZGVmYXVsdEhlYWRlcnMob3B0cyksXG4gICAgICAuLi4odGhpcy5fb3B0aW9ucy5kYW5nZXJvdXNseUFsbG93QnJvd3NlciA/XG4gICAgICAgIHsgJ2FudGhyb3BpYy1kYW5nZXJvdXMtZGlyZWN0LWJyb3dzZXItYWNjZXNzJzogJ3RydWUnIH1cbiAgICAgIDogdW5kZWZpbmVkKSxcbiAgICAgICdhbnRocm9waWMtdmVyc2lvbic6ICcyMDIzLTA2LTAxJyxcbiAgICAgIC4uLnRoaXMuX29wdGlvbnMuZGVmYXVsdEhlYWRlcnMsXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvdmVycmlkZSB2YWxpZGF0ZUhlYWRlcnMoaGVhZGVyczogQ29yZS5IZWFkZXJzLCBjdXN0b21IZWFkZXJzOiBDb3JlLkhlYWRlcnMpIHtcbiAgICBpZiAodGhpcy5hcGlLZXkgJiYgaGVhZGVyc1sneC1hcGkta2V5J10pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGN1c3RvbUhlYWRlcnNbJ3gtYXBpLWtleSddID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYXV0aFRva2VuICYmIGhlYWRlcnNbJ2F1dGhvcml6YXRpb24nXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY3VzdG9tSGVhZGVyc1snYXV0aG9yaXphdGlvbiddID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0NvdWxkIG5vdCByZXNvbHZlIGF1dGhlbnRpY2F0aW9uIG1ldGhvZC4gRXhwZWN0ZWQgZWl0aGVyIGFwaUtleSBvciBhdXRoVG9rZW4gdG8gYmUgc2V0LiBPciBmb3Igb25lIG9mIHRoZSBcIlgtQXBpLUtleVwiIG9yIFwiQXV0aG9yaXphdGlvblwiIGhlYWRlcnMgdG8gYmUgZXhwbGljaXRseSBvbWl0dGVkJyxcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIGF1dGhIZWFkZXJzKG9wdHM6IENvcmUuRmluYWxSZXF1ZXN0T3B0aW9ucyk6IENvcmUuSGVhZGVycyB7XG4gICAgY29uc3QgYXBpS2V5QXV0aCA9IHRoaXMuYXBpS2V5QXV0aChvcHRzKTtcbiAgICBjb25zdCBiZWFyZXJBdXRoID0gdGhpcy5iZWFyZXJBdXRoKG9wdHMpO1xuXG4gICAgaWYgKGFwaUtleUF1dGggIT0gbnVsbCAmJiAhQ29yZS5pc0VtcHR5T2JqKGFwaUtleUF1dGgpKSB7XG4gICAgICByZXR1cm4gYXBpS2V5QXV0aDtcbiAgICB9XG5cbiAgICBpZiAoYmVhcmVyQXV0aCAhPSBudWxsICYmICFDb3JlLmlzRW1wdHlPYmooYmVhcmVyQXV0aCkpIHtcbiAgICAgIHJldHVybiBiZWFyZXJBdXRoO1xuICAgIH1cbiAgICByZXR1cm4ge307XG4gIH1cblxuICBwcm90ZWN0ZWQgYXBpS2V5QXV0aChvcHRzOiBDb3JlLkZpbmFsUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkhlYWRlcnMge1xuICAgIGlmICh0aGlzLmFwaUtleSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHJldHVybiB7ICdYLUFwaS1LZXknOiB0aGlzLmFwaUtleSB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIGJlYXJlckF1dGgob3B0czogQ29yZS5GaW5hbFJlcXVlc3RPcHRpb25zKTogQ29yZS5IZWFkZXJzIHtcbiAgICBpZiAodGhpcy5hdXRoVG9rZW4gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICByZXR1cm4geyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5hdXRoVG9rZW59YCB9O1xuICB9XG5cbiAgc3RhdGljIEFudGhyb3BpYyA9IHRoaXM7XG4gIHN0YXRpYyBIVU1BTl9QUk9NUFQgPSAnXFxuXFxuSHVtYW46JztcbiAgc3RhdGljIEFJX1BST01QVCA9ICdcXG5cXG5Bc3Npc3RhbnQ6JztcbiAgc3RhdGljIERFRkFVTFRfVElNRU9VVCA9IDYwMDAwMDsgLy8gMTAgbWludXRlc1xuXG4gIHN0YXRpYyBBbnRocm9waWNFcnJvciA9IEVycm9ycy5BbnRocm9waWNFcnJvcjtcbiAgc3RhdGljIEFQSUVycm9yID0gRXJyb3JzLkFQSUVycm9yO1xuICBzdGF0aWMgQVBJQ29ubmVjdGlvbkVycm9yID0gRXJyb3JzLkFQSUNvbm5lY3Rpb25FcnJvcjtcbiAgc3RhdGljIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IgPSBFcnJvcnMuQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcjtcbiAgc3RhdGljIEFQSVVzZXJBYm9ydEVycm9yID0gRXJyb3JzLkFQSVVzZXJBYm9ydEVycm9yO1xuICBzdGF0aWMgTm90Rm91bmRFcnJvciA9IEVycm9ycy5Ob3RGb3VuZEVycm9yO1xuICBzdGF0aWMgQ29uZmxpY3RFcnJvciA9IEVycm9ycy5Db25mbGljdEVycm9yO1xuICBzdGF0aWMgUmF0ZUxpbWl0RXJyb3IgPSBFcnJvcnMuUmF0ZUxpbWl0RXJyb3I7XG4gIHN0YXRpYyBCYWRSZXF1ZXN0RXJyb3IgPSBFcnJvcnMuQmFkUmVxdWVzdEVycm9yO1xuICBzdGF0aWMgQXV0aGVudGljYXRpb25FcnJvciA9IEVycm9ycy5BdXRoZW50aWNhdGlvbkVycm9yO1xuICBzdGF0aWMgSW50ZXJuYWxTZXJ2ZXJFcnJvciA9IEVycm9ycy5JbnRlcm5hbFNlcnZlckVycm9yO1xuICBzdGF0aWMgUGVybWlzc2lvbkRlbmllZEVycm9yID0gRXJyb3JzLlBlcm1pc3Npb25EZW5pZWRFcnJvcjtcbiAgc3RhdGljIFVucHJvY2Vzc2FibGVFbnRpdHlFcnJvciA9IEVycm9ycy5VbnByb2Nlc3NhYmxlRW50aXR5RXJyb3I7XG5cbiAgc3RhdGljIHRvRmlsZSA9IFVwbG9hZHMudG9GaWxlO1xuICBzdGF0aWMgZmlsZUZyb21QYXRoID0gVXBsb2Fkcy5maWxlRnJvbVBhdGg7XG59XG5cbkFudGhyb3BpYy5Db21wbGV0aW9ucyA9IENvbXBsZXRpb25zO1xuQW50aHJvcGljLk1lc3NhZ2VzID0gTWVzc2FnZXM7XG5BbnRocm9waWMuTW9kZWxzID0gTW9kZWxzO1xuQW50aHJvcGljLk1vZGVsSW5mb3NQYWdlID0gTW9kZWxJbmZvc1BhZ2U7XG5BbnRocm9waWMuQmV0YSA9IEJldGE7XG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgQW50aHJvcGljIHtcbiAgZXhwb3J0IHR5cGUgUmVxdWVzdE9wdGlvbnMgPSBDb3JlLlJlcXVlc3RPcHRpb25zO1xuXG4gIGV4cG9ydCBpbXBvcnQgUGFnZSA9IFBhZ2luYXRpb24uUGFnZTtcbiAgZXhwb3J0IHsgdHlwZSBQYWdlUGFyYW1zIGFzIFBhZ2VQYXJhbXMsIHR5cGUgUGFnZVJlc3BvbnNlIGFzIFBhZ2VSZXNwb25zZSB9O1xuXG4gIGV4cG9ydCB7XG4gICAgQ29tcGxldGlvbnMgYXMgQ29tcGxldGlvbnMsXG4gICAgdHlwZSBDb21wbGV0aW9uIGFzIENvbXBsZXRpb24sXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gIH07XG5cbiAgZXhwb3J0IHtcbiAgICBNZXNzYWdlcyBhcyBNZXNzYWdlcyxcbiAgICB0eXBlIEJhc2U2NFBERlNvdXJjZSBhcyBCYXNlNjRQREZTb3VyY2UsXG4gICAgdHlwZSBDYWNoZUNvbnRyb2xFcGhlbWVyYWwgYXMgQ2FjaGVDb250cm9sRXBoZW1lcmFsLFxuICAgIHR5cGUgQ2l0YXRpb25DaGFyTG9jYXRpb24gYXMgQ2l0YXRpb25DaGFyTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtIGFzIENpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uIGFzIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0gYXMgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtLFxuICAgIHR5cGUgQ2l0YXRpb25QYWdlTG9jYXRpb24gYXMgQ2l0YXRpb25QYWdlTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtIGFzIENpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBDaXRhdGlvbnNDb25maWdQYXJhbSBhcyBDaXRhdGlvbnNDb25maWdQYXJhbSxcbiAgICB0eXBlIENpdGF0aW9uc0RlbHRhIGFzIENpdGF0aW9uc0RlbHRhLFxuICAgIHR5cGUgQ29udGVudEJsb2NrIGFzIENvbnRlbnRCbG9jayxcbiAgICB0eXBlIENvbnRlbnRCbG9ja0RlbHRhRXZlbnQgYXMgQ29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1BhcmFtIGFzIENvbnRlbnRCbG9ja1BhcmFtLFxuICAgIHR5cGUgQ29udGVudEJsb2NrU291cmNlIGFzIENvbnRlbnRCbG9ja1NvdXJjZSxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQgYXMgQ29udGVudEJsb2NrU291cmNlQ29udGVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1N0YXJ0RXZlbnQgYXMgQ29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1N0b3BFdmVudCBhcyBDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gICAgdHlwZSBEb2N1bWVudEJsb2NrUGFyYW0gYXMgRG9jdW1lbnRCbG9ja1BhcmFtLFxuICAgIHR5cGUgSW1hZ2VCbG9ja1BhcmFtIGFzIEltYWdlQmxvY2tQYXJhbSxcbiAgICB0eXBlIElucHV0SlNPTkRlbHRhIGFzIElucHV0SlNPTkRlbHRhLFxuICAgIHR5cGUgTWVzc2FnZSBhcyBNZXNzYWdlLFxuICAgIHR5cGUgTWVzc2FnZURlbHRhRXZlbnQgYXMgTWVzc2FnZURlbHRhRXZlbnQsXG4gICAgdHlwZSBNZXNzYWdlRGVsdGFVc2FnZSBhcyBNZXNzYWdlRGVsdGFVc2FnZSxcbiAgICB0eXBlIE1lc3NhZ2VQYXJhbSBhcyBNZXNzYWdlUGFyYW0sXG4gICAgdHlwZSBNZXNzYWdlU3RhcnRFdmVudCBhcyBNZXNzYWdlU3RhcnRFdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VTdG9wRXZlbnQgYXMgTWVzc2FnZVN0b3BFdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VTdHJlYW1FdmVudCBhcyBNZXNzYWdlU3RyZWFtRXZlbnQsXG4gICAgdHlwZSBNZXNzYWdlVG9rZW5zQ291bnQgYXMgTWVzc2FnZVRva2Vuc0NvdW50LFxuICAgIHR5cGUgTWV0YWRhdGEgYXMgTWV0YWRhdGEsXG4gICAgdHlwZSBNb2RlbCBhcyBNb2RlbCxcbiAgICB0eXBlIFBsYWluVGV4dFNvdXJjZSBhcyBQbGFpblRleHRTb3VyY2UsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50IGFzIFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50IGFzIFJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQgYXMgUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50LFxuICAgIHR5cGUgUmF3TWVzc2FnZURlbHRhRXZlbnQgYXMgUmF3TWVzc2FnZURlbHRhRXZlbnQsXG4gICAgdHlwZSBSYXdNZXNzYWdlU3RhcnRFdmVudCBhcyBSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VTdG9wRXZlbnQgYXMgUmF3TWVzc2FnZVN0b3BFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VTdHJlYW1FdmVudCBhcyBSYXdNZXNzYWdlU3RyZWFtRXZlbnQsXG4gICAgdHlwZSBUZXh0QmxvY2sgYXMgVGV4dEJsb2NrLFxuICAgIHR5cGUgVGV4dEJsb2NrUGFyYW0gYXMgVGV4dEJsb2NrUGFyYW0sXG4gICAgdHlwZSBUZXh0Q2l0YXRpb24gYXMgVGV4dENpdGF0aW9uLFxuICAgIHR5cGUgVGV4dENpdGF0aW9uUGFyYW0gYXMgVGV4dENpdGF0aW9uUGFyYW0sXG4gICAgdHlwZSBUZXh0RGVsdGEgYXMgVGV4dERlbHRhLFxuICAgIHR5cGUgVG9vbCBhcyBUb29sLFxuICAgIHR5cGUgVG9vbENob2ljZSBhcyBUb29sQ2hvaWNlLFxuICAgIHR5cGUgVG9vbENob2ljZUFueSBhcyBUb29sQ2hvaWNlQW55LFxuICAgIHR5cGUgVG9vbENob2ljZUF1dG8gYXMgVG9vbENob2ljZUF1dG8sXG4gICAgdHlwZSBUb29sQ2hvaWNlVG9vbCBhcyBUb29sQ2hvaWNlVG9vbCxcbiAgICB0eXBlIFRvb2xSZXN1bHRCbG9ja1BhcmFtIGFzIFRvb2xSZXN1bHRCbG9ja1BhcmFtLFxuICAgIHR5cGUgVG9vbFVzZUJsb2NrIGFzIFRvb2xVc2VCbG9jayxcbiAgICB0eXBlIFRvb2xVc2VCbG9ja1BhcmFtIGFzIFRvb2xVc2VCbG9ja1BhcmFtLFxuICAgIHR5cGUgVXNhZ2UgYXMgVXNhZ2UsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlU3RyZWFtUGFyYW1zIGFzIE1lc3NhZ2VTdHJlYW1QYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMgYXMgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICB9O1xuXG4gIGV4cG9ydCB7XG4gICAgTW9kZWxzIGFzIE1vZGVscyxcbiAgICB0eXBlIE1vZGVsSW5mbyBhcyBNb2RlbEluZm8sXG4gICAgTW9kZWxJbmZvc1BhZ2UgYXMgTW9kZWxJbmZvc1BhZ2UsXG4gICAgdHlwZSBNb2RlbExpc3RQYXJhbXMgYXMgTW9kZWxMaXN0UGFyYW1zLFxuICB9O1xuXG4gIGV4cG9ydCB7XG4gICAgQmV0YSBhcyBCZXRhLFxuICAgIHR5cGUgQW50aHJvcGljQmV0YSBhcyBBbnRocm9waWNCZXRhLFxuICAgIHR5cGUgQmV0YUFQSUVycm9yIGFzIEJldGFBUElFcnJvcixcbiAgICB0eXBlIEJldGFBdXRoZW50aWNhdGlvbkVycm9yIGFzIEJldGFBdXRoZW50aWNhdGlvbkVycm9yLFxuICAgIHR5cGUgQmV0YUJpbGxpbmdFcnJvciBhcyBCZXRhQmlsbGluZ0Vycm9yLFxuICAgIHR5cGUgQmV0YUVycm9yIGFzIEJldGFFcnJvcixcbiAgICB0eXBlIEJldGFFcnJvclJlc3BvbnNlIGFzIEJldGFFcnJvclJlc3BvbnNlLFxuICAgIHR5cGUgQmV0YUdhdGV3YXlUaW1lb3V0RXJyb3IgYXMgQmV0YUdhdGV3YXlUaW1lb3V0RXJyb3IsXG4gICAgdHlwZSBCZXRhSW52YWxpZFJlcXVlc3RFcnJvciBhcyBCZXRhSW52YWxpZFJlcXVlc3RFcnJvcixcbiAgICB0eXBlIEJldGFOb3RGb3VuZEVycm9yIGFzIEJldGFOb3RGb3VuZEVycm9yLFxuICAgIHR5cGUgQmV0YU92ZXJsb2FkZWRFcnJvciBhcyBCZXRhT3ZlcmxvYWRlZEVycm9yLFxuICAgIHR5cGUgQmV0YVBlcm1pc3Npb25FcnJvciBhcyBCZXRhUGVybWlzc2lvbkVycm9yLFxuICAgIHR5cGUgQmV0YVJhdGVMaW1pdEVycm9yIGFzIEJldGFSYXRlTGltaXRFcnJvcixcbiAgfTtcblxuICBleHBvcnQgdHlwZSBBUElFcnJvck9iamVjdCA9IEFQSS5BUElFcnJvck9iamVjdDtcbiAgZXhwb3J0IHR5cGUgQXV0aGVudGljYXRpb25FcnJvciA9IEFQSS5BdXRoZW50aWNhdGlvbkVycm9yO1xuICBleHBvcnQgdHlwZSBCaWxsaW5nRXJyb3IgPSBBUEkuQmlsbGluZ0Vycm9yO1xuICBleHBvcnQgdHlwZSBFcnJvck9iamVjdCA9IEFQSS5FcnJvck9iamVjdDtcbiAgZXhwb3J0IHR5cGUgRXJyb3JSZXNwb25zZSA9IEFQSS5FcnJvclJlc3BvbnNlO1xuICBleHBvcnQgdHlwZSBHYXRld2F5VGltZW91dEVycm9yID0gQVBJLkdhdGV3YXlUaW1lb3V0RXJyb3I7XG4gIGV4cG9ydCB0eXBlIEludmFsaWRSZXF1ZXN0RXJyb3IgPSBBUEkuSW52YWxpZFJlcXVlc3RFcnJvcjtcbiAgZXhwb3J0IHR5cGUgTm90Rm91bmRFcnJvciA9IEFQSS5Ob3RGb3VuZEVycm9yO1xuICBleHBvcnQgdHlwZSBPdmVybG9hZGVkRXJyb3IgPSBBUEkuT3ZlcmxvYWRlZEVycm9yO1xuICBleHBvcnQgdHlwZSBQZXJtaXNzaW9uRXJyb3IgPSBBUEkuUGVybWlzc2lvbkVycm9yO1xuICBleHBvcnQgdHlwZSBSYXRlTGltaXRFcnJvciA9IEFQSS5SYXRlTGltaXRFcnJvcjtcbn1cbmV4cG9ydCBjb25zdCB7IEhVTUFOX1BST01QVCwgQUlfUFJPTVBUIH0gPSBBbnRocm9waWM7XG5cbmV4cG9ydCB7IHRvRmlsZSwgZmlsZUZyb21QYXRoIH0gZnJvbSBcIi4vdXBsb2Fkcy5qc1wiO1xuZXhwb3J0IHtcbiAgQW50aHJvcGljRXJyb3IsXG4gIEFQSUVycm9yLFxuICBBUElDb25uZWN0aW9uRXJyb3IsXG4gIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IsXG4gIEFQSVVzZXJBYm9ydEVycm9yLFxuICBOb3RGb3VuZEVycm9yLFxuICBDb25mbGljdEVycm9yLFxuICBSYXRlTGltaXRFcnJvcixcbiAgQmFkUmVxdWVzdEVycm9yLFxuICBBdXRoZW50aWNhdGlvbkVycm9yLFxuICBJbnRlcm5hbFNlcnZlckVycm9yLFxuICBQZXJtaXNzaW9uRGVuaWVkRXJyb3IsXG4gIFVucHJvY2Vzc2FibGVFbnRpdHlFcnJvcixcbn0gZnJvbSBcIi4vZXJyb3IuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgQW50aHJvcGljO1xuIiwgIi8qKlxyXG4gKiBBbnRocm9waWMgUHJvdmlkZXIgSW1wbGVtZW50YXRpb25cclxuICogXHJcbiAqIFRoaXMgZmlsZSBjb250YWlucyB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIEFudGhyb3BpYyBwcm92aWRlcixcclxuICogd2hpY2ggYWxsb3dzIHRoZSBwbHVnaW4gdG8gaW50ZXJhY3Qgd2l0aCBBbnRocm9waWMncyBBUEkgKENsYXVkZSBtb2RlbHMpXHJcbiAqIHVzaW5nIHRoZSBvZmZpY2lhbCBBbnRocm9waWMgVHlwZVNjcmlwdCBTREsuXHJcbiAqIFxyXG4gKiBDbGF1ZGUgbW9kZWxzIGhhdmUgbGFyZ2UgY29udGV4dCB3aW5kb3dzIGFuZCBzdHJvbmcgcmVhc29uaW5nIGNhcGFiaWxpdGllcy5cclxuICogVGhpcyBpbXBsZW1lbnRhdGlvbiBoYW5kbGVzIHRva2VuIGNvdW50aW5nIGFuZCBjb250ZXh0IHdpbmRvdyBtYW5hZ2VtZW50LlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IE1lc3NhZ2UsIENvbXBsZXRpb25PcHRpb25zLCBDb25uZWN0aW9uVGVzdFJlc3VsdCB9IGZyb20gJy4uL3NyYy90eXBlcyc7XHJcbmltcG9ydCB7IEJhc2VQcm92aWRlciwgUHJvdmlkZXJFcnJvciwgUHJvdmlkZXJFcnJvclR5cGUgfSBmcm9tICcuL2Jhc2UnO1xyXG5pbXBvcnQgQW50aHJvcGljIGZyb20gJ0BhbnRocm9waWMtYWkvc2RrJztcclxuXHJcbi8qKlxyXG4gKiBBbnRocm9waWMgQVBJIHJlc3BvbnNlIHR5cGVzXHJcbiAqIFRoZXNlIGFyZSBzaW1wbGlmaWVkIHZlcnNpb25zIG9mIHRoZSBhY3R1YWwgcmVzcG9uc2UgdHlwZXNcclxuICovXHJcbmludGVyZmFjZSBBbnRocm9waWNNZXNzYWdlIHtcclxuICAgIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnO1xyXG4gICAgY29udGVudDogc3RyaW5nO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgQW50aHJvcGljU3RyZWFtRXZlbnQge1xyXG4gICAgdHlwZTogc3RyaW5nO1xyXG4gICAgZGVsdGE/OiB7XHJcbiAgICAgICAgdHlwZTogc3RyaW5nO1xyXG4gICAgICAgIHRleHQ6IHN0cmluZztcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNYXhpbXVtIGNvbnRleHQgd2luZG93IHNpemVzIGZvciBBbnRocm9waWMgbW9kZWxzIChpbiB0b2tlbnMpXHJcbiAqIFRoZXNlIHZhbHVlcyByZXByZXNlbnQgdGhlIHRvdGFsIHRva2VucyAoaW5wdXQgKyBvdXRwdXQpIHRoYXQgZWFjaCBtb2RlbCBjYW4gaGFuZGxlXHJcbiAqL1xyXG5jb25zdCBNT0RFTF9DT05URVhUX1dJTkRPV1M6IFJlY29yZDxzdHJpbmcsIG51bWJlcj4gPSB7XHJcbiAgICAnY2xhdWRlLTMtb3B1cy0yMDI0MDIyOSc6IDIwMDAwMCxcclxuICAgICdjbGF1ZGUtMy1zb25uZXQtMjAyNDAyMjknOiAyMDAwMDAsXHJcbiAgICAnY2xhdWRlLTMtaGFpa3UtMjAyNDAzMDcnOiAyMDAwMDAsXHJcbiAgICAnY2xhdWRlLTMtNy1zb25uZXQtMjAyNTAyMTknOiAyMDAwMDAsXHJcbiAgICAnY2xhdWRlLTMtNS1zb25uZXQtMjAyNDEwMjInOiAyMDAwMDAsXHJcbiAgICAnY2xhdWRlLTMtNS1zb25uZXQtMjAyNDA2MjAnOiAyMDAwMDAsXHJcbiAgICAnY2xhdWRlLTMtNS1oYWlrdS0yMDI0MTAyMic6IDIwMDAwMCxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBNYXhpbXVtIG91dHB1dCB0b2tlbnMgcGVyIEFudGhyb3BpYyBtb2RlbFxyXG4gKi9cclxuY29uc3QgTU9ERUxfT1VUUFVUX1RPS0VOX0xJTUlUUzogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHtcclxuICAgICdjbGF1ZGUtMy03LXNvbm5ldC0yMDI1MDIxOSc6IDY0MDAwLFxyXG4gICAgJ2NsYXVkZS0zLTUtc29ubmV0LTIwMjQxMDIyJzogODE5MixcclxuICAgICdjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MDYyMCc6IDgxOTIsXHJcbiAgICAnY2xhdWRlLTMtNS1oYWlrdS0yMDI0MTAyMic6IDgxOTIsXHJcbiAgICAnY2xhdWRlLTMtb3B1cy0yMDI0MDIyOSc6IDQwOTYsXHJcbiAgICAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5JzogODE5MiwgLy8gZmFsbGJhY2sgZm9yIG9sZGVyIHNvbm5ldFxyXG4gICAgJ2NsYXVkZS0zLWhhaWt1LTIwMjQwMzA3JzogNDA5NiwgIC8vIGZhbGxiYWNrIGZvciBvbGRlciBoYWlrdVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEFwcHJveGltYXRlIHRva2VuIGNvdW50IGZvciBtZXNzYWdlc1xyXG4gKiBcclxuICogVGhpcyBpcyBhIHNpbXBsZSBhcHByb3hpbWF0aW9uIGJhc2VkIG9uIGNoYXJhY3RlciBjb3VudC5cclxuICogQ2xhdWRlIG1vZGVscyB1c2UgfjMuNSBjaGFycyBwZXIgdG9rZW4gb24gYXZlcmFnZSwgYnV0IHdlIHVzZSA0IGZvciBzYWZldHkuXHJcbiAqIFxyXG4gKiBAcGFyYW0gbWVzc2FnZXMgLSBUaGUgbWVzc2FnZXMgdG8gY291bnQgdG9rZW5zIGZvclxyXG4gKiBAcmV0dXJucyBBcHByb3hpbWF0ZSB0b2tlbiBjb3VudFxyXG4gKi9cclxuZnVuY3Rpb24gZXN0aW1hdGVUb2tlbkNvdW50KG1lc3NhZ2VzOiBNZXNzYWdlW10pOiBudW1iZXIge1xyXG4gICAgLy8gU2ltcGxlIGFwcHJveGltYXRpb246IDEgdG9rZW4gXHUyMjQ4IDQgY2hhcmFjdGVyc1xyXG4gICAgY29uc3QgQ0hBUlNfUEVSX1RPS0VOID0gNDtcclxuICAgIFxyXG4gICAgLy8gQ2FsY3VsYXRlIHRvdGFsIGNoYXJhY3RlcnMgaW4gYWxsIG1lc3NhZ2VzXHJcbiAgICBjb25zdCB0b3RhbENoYXJzID0gbWVzc2FnZXMucmVkdWNlKCh0b3RhbCwgbXNnKSA9PiB7XHJcbiAgICAgICAgcmV0dXJuIHRvdGFsICsgbXNnLmNvbnRlbnQubGVuZ3RoO1xyXG4gICAgfSwgMCk7XHJcbiAgICBcclxuICAgIC8vIENvbnZlcnQgdG8gdG9rZW5zXHJcbiAgICByZXR1cm4gTWF0aC5jZWlsKHRvdGFsQ2hhcnMgLyBDSEFSU19QRVJfVE9LRU4pO1xyXG59XHJcblxyXG4vKipcclxuICogSW1wbGVtZW50cyB0aGUgQW50aHJvcGljIHByb3ZpZGVyIGZ1bmN0aW9uYWxpdHlcclxuICogXHJcbiAqIEhhbmRsZXMgY29tbXVuaWNhdGlvbiB3aXRoIEFudGhyb3BpYydzIEFQSSwgaW5jbHVkaW5nOlxyXG4gKiAtIENoYXQgY29tcGxldGlvbnNcclxuICogLSBNb2RlbCBsaXN0aW5nXHJcbiAqIC0gQ29ubmVjdGlvbiB0ZXN0aW5nXHJcbiAqIC0gU3RyZWFtaW5nIHJlc3BvbnNlc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEFudGhyb3BpY1Byb3ZpZGVyIGV4dGVuZHMgQmFzZVByb3ZpZGVyIHtcclxuICAgIHByb3RlY3RlZCBhcGlLZXk6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBiYXNlVXJsID0gJ2h0dHBzOi8vYXBpLmFudGhyb3BpYy5jb20vdjEnO1xyXG4gICAgcHJvdGVjdGVkIG1vZGVsOiBzdHJpbmc7XHJcbiAgICBwcml2YXRlIGNsaWVudDogQW50aHJvcGljO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwaUtleTogc3RyaW5nLCBtb2RlbDogc3RyaW5nID0gJ2NsYXVkZS0zLXNvbm5ldC0yMDI0MDIyOScpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xyXG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuICAgICAgICB0aGlzLmNsaWVudCA9IG5ldyBBbnRocm9waWMoe1xyXG4gICAgICAgICAgICBhcGlLZXk6IHRoaXMuYXBpS2V5LFxyXG4gICAgICAgICAgICBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZSAvLyBSZXF1aXJlZCBmb3IgYnJvd3NlciBlbnZpcm9ubWVudHNcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIGNvbXBsZXRpb24gZnJvbSBBbnRocm9waWNcclxuICAgICAqIFxyXG4gICAgICogU2VuZHMgdGhlIGNvbnZlcnNhdGlvbiB0byBBbnRocm9waWMgYW5kIHN0cmVhbXMgYmFjayB0aGUgcmVzcG9uc2VcclxuICAgICAqIHVzaW5nIHRoZSBvZmZpY2lhbCBTREsncyBzdHJlYW1pbmcgc3VwcG9ydC5cclxuICAgICAqIFxyXG4gICAgICogQXV0b21hdGljYWxseSBhZGp1c3RzIG1heF90b2tlbnMgaWYgdGhlIHJlcXVlc3Qgd291bGQgZXhjZWVkIHRoZSBtb2RlbCdzIGNvbnRleHQgd2luZG93LlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgLSBUaGUgY29udmVyc2F0aW9uIGhpc3RvcnlcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gU2V0dGluZ3MgZm9yIHRoaXMgY29tcGxldGlvblxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRDb21wbGV0aW9uKG1lc3NhZ2VzOiBNZXNzYWdlW10sIG9wdGlvbnM6IENvbXBsZXRpb25PcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gR2V0IHRoZSBjb250ZXh0IHdpbmRvdyBzaXplIGZvciB0aGUgY3VycmVudCBtb2RlbFxyXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0V2luZG93ID0gTU9ERUxfQ09OVEVYVF9XSU5ET1dTW3RoaXMubW9kZWxdID8/IDIwMDAwMDtcclxuICAgICAgICAgICAgY29uc3Qgb3V0cHV0VG9rZW5MaW1pdCA9IE1PREVMX09VVFBVVF9UT0tFTl9MSU1JVFNbdGhpcy5tb2RlbF07XHJcblxyXG4gICAgICAgICAgICAvLyBFc3RpbWF0ZSB0b2tlbiBjb3VudCBmb3IgaW5wdXQgbWVzc2FnZXNcclxuICAgICAgICAgICAgY29uc3QgaW5wdXRUb2tlbnMgPSBlc3RpbWF0ZVRva2VuQ291bnQobWVzc2FnZXMpO1xyXG5cclxuICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHNhZmUgbWF4X3Rva2VucyB2YWx1ZVxyXG4gICAgICAgICAgICBsZXQgbWF4VG9rZW5zID0gb3B0aW9ucy5tYXhUb2tlbnMgPz8gMTAwMDtcclxuXHJcbiAgICAgICAgICAgIC8vIElmIHRoZSBjb21iaW5lZCBpbnB1dCArIG91dHB1dCB0b2tlbnMgd291bGQgZXhjZWVkIHRoZSBjb250ZXh0IHdpbmRvdyxcclxuICAgICAgICAgICAgLy8gYXV0b21hdGljYWxseSBhZGp1c3QgbWF4X3Rva2VucyB0byBmaXRcclxuICAgICAgICAgICAgaWYgKGlucHV0VG9rZW5zICsgbWF4VG9rZW5zID4gY29udGV4dFdpbmRvdykge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWRqdXN0ZWRNYXhUb2tlbnMgPSBjb250ZXh0V2luZG93IC0gaW5wdXRUb2tlbnM7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGFkanVzdGVkTWF4VG9rZW5zIDw9IDApIHtcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuSW52YWxpZFJlcXVlc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGBJbnB1dCBpcyB0b28gbG9uZyBmb3IgJHt0aGlzLm1vZGVsfSdzIGNvbnRleHQgd2luZG93LiBgICtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYEVzdGltYXRlZCBpbnB1dCB0b2tlbnM6ICR7aW5wdXRUb2tlbnN9LCBjb250ZXh0IHdpbmRvdzogJHtjb250ZXh0V2luZG93fWBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgICAgICAgICAgIGBBZGp1c3RpbmcgbWF4X3Rva2VucyBmcm9tICR7bWF4VG9rZW5zfSB0byAke2FkanVzdGVkTWF4VG9rZW5zfSBgICtcclxuICAgICAgICAgICAgICAgICAgICBgdG8gZml0IHdpdGhpbiAke3RoaXMubW9kZWx9J3MgY29udGV4dCB3aW5kb3dgXHJcbiAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgIG1heFRva2VucyA9IGFkanVzdGVkTWF4VG9rZW5zO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBFbmZvcmNlIG1vZGVsIG91dHB1dCB0b2tlbiBsaW1pdFxyXG4gICAgICAgICAgICBpZiAob3V0cHV0VG9rZW5MaW1pdCAmJiBtYXhUb2tlbnMgPiBvdXRwdXRUb2tlbkxpbWl0KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhcclxuICAgICAgICAgICAgICAgICAgICBgQ2FwcGluZyBtYXhfdG9rZW5zIGZyb20gJHttYXhUb2tlbnN9IHRvIG1vZGVsIG91dHB1dCBsaW1pdCAke291dHB1dFRva2VuTGltaXR9IGZvciAke3RoaXMubW9kZWx9YFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIG1heFRva2VucyA9IG91dHB1dFRva2VuTGltaXQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEZvcm1hdCBtZXNzYWdlcyBmb3IgQW50aHJvcGljIEFQSVxyXG4gICAgICAgICAgICBjb25zdCB7IHN5c3RlbVByb21wdCwgYW50aHJvcGljTWVzc2FnZXMgfSA9IHRoaXMuZm9ybWF0TWVzc2FnZXMobWVzc2FnZXMpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSByZXF1ZXN0IHBhcmFtZXRlcnNcclxuICAgICAgICAgICAgY29uc3QgcmVxdWVzdFBhcmFtczogYW55ID0ge1xyXG4gICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogYW50aHJvcGljTWVzc2FnZXMsXHJcbiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogb3B0aW9ucy50ZW1wZXJhdHVyZSA/PyAwLjcsXHJcbiAgICAgICAgICAgICAgICBtYXhfdG9rZW5zOiBtYXhUb2tlbnMsXHJcbiAgICAgICAgICAgICAgICBzdHJlYW06IHRydWVcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEFkZCBzeXN0ZW0gcHJvbXB0IGlmIHByZXNlbnRcclxuICAgICAgICAgICAgaWYgKHN5c3RlbVByb21wdCkge1xyXG4gICAgICAgICAgICAgICAgcmVxdWVzdFBhcmFtcy5zeXN0ZW0gPSBzeXN0ZW1Qcm9tcHQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgc3RyZWFtIHdpdGggcHJvcGVyIG1lc3NhZ2UgZm9ybWF0XHJcbiAgICAgICAgICAgIC8vIFVzZSB0eXBlIGFzc2VydGlvbiB0byBieXBhc3MgVHlwZVNjcmlwdCBlcnJvcnNcclxuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgdGhpcy5jbGllbnQubWVzc2FnZXMuY3JlYXRlKHJlcXVlc3RQYXJhbXMpIGFzIGFueTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIFByb2Nlc3MgdGhlIHN0cmVhbSB1c2luZyBhIHRyeS1jYXRjaCB0byBoYW5kbGUgYW55IHN0cmVhbWluZyBlcnJvcnNcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIEhhbmRsZSB0aGUgc3RyZWFtIGJhc2VkIG9uIHRoZSBBbnRocm9waWMgU0RLJ3Mgc3RyZWFtaW5nIGltcGxlbWVudGF0aW9uXHJcbiAgICAgICAgICAgICAgICAvLyBUaGlzIGlzIGEgc2ltcGxpZmllZCBhcHByb2FjaCB0aGF0IHNob3VsZCB3b3JrIHdpdGggbW9zdCB2ZXJzaW9ucyBvZiB0aGUgU0RLXHJcbiAgICAgICAgICAgICAgICBpZiAoc3RyZWFtICYmIHR5cGVvZiBzdHJlYW0gPT09ICdvYmplY3QnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHN0cmVhbS5vbiAmJiB0eXBlb2Ygc3RyZWFtLm9uID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIEV2ZW50LWJhc2VkIEFQSVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0ub24oJ2NvbnRlbnRfYmxvY2tfZGVsdGEnLCAoY2h1bms6IGFueSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaHVuay5kZWx0YT8udHlwZSA9PT0gJ3RleHRfZGVsdGEnICYmIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zdHJlYW1DYWxsYmFjayhjaHVuay5kZWx0YS50ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5vbignZW5kJywgcmVzb2x2ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW0ub24oJ2Vycm9yJywgcmVqZWN0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIGlmIChTeW1ib2wuYXN5bmNJdGVyYXRvciBpbiBzdHJlYW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gQXN5bmMgaXRlcmF0b3IgQVBJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY2h1bmsudHlwZSA9PT0gJ2NvbnRlbnRfYmxvY2tfZGVsdGEnICYmIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNodW5rLmRlbHRhPy50eXBlID09PSAndGV4dF9kZWx0YScgJiYgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zdHJlYW1DYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2soY2h1bmsuZGVsdGEudGV4dCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gTm9uLXN0cmVhbWluZyByZXNwb25zZSAoZmFsbGJhY2spXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignQW50aHJvcGljIHJlc3BvbnNlIGlzIG5vdCBhIHN0cmVhbSwgaGFuZGxpbmcgYXMgcmVndWxhciByZXNwb25zZScpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoJ2NvbnRlbnQnIGluIHN0cmVhbSAmJiB0eXBlb2Ygc3RyZWFtLmNvbnRlbnQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN0cmVhbUNhbGxiYWNrKHN0cmVhbS5jb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoc3RyZWFtRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHByb2Nlc3NpbmcgQW50aHJvcGljIHN0cmVhbTonLCBzdHJlYW1FcnJvcik7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBzdHJlYW1FcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFByb3ZpZGVyRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBbnRocm9waWMgc3RyZWFtIHdhcyBhYm9ydGVkJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxsaW5nIEFudGhyb3BpYzonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhdmFpbGFibGUgQW50aHJvcGljIG1vZGVsc1xyXG4gICAgICogXHJcbiAgICAgKiBSZXR1cm5zIHRoZSBsaXN0IG9mIHN1cHBvcnRlZCBDbGF1ZGUgbW9kZWxzLlxyXG4gICAgICogTm90ZTogQW50aHJvcGljIGRvZXNuJ3QgaGF2ZSBhIG1vZGVscyBlbmRwb2ludCwgc28gd2UgcmV0dXJuIGtub3duIG1vZGVscy5cclxuICAgICAqIFRoaXMgbGlzdCBpcyBiYXNlZCBvbiB0aGUgbW9kZWxzIGRlZmluZWQgaW4gTU9ERUxfQ09OVEVYVF9XSU5ET1dTLlxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJucyBMaXN0IG9mIGF2YWlsYWJsZSBtb2RlbCBuYW1lc1xyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRBdmFpbGFibGVNb2RlbHMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFJldHVybiB0aGUga2V5cyBmcm9tIG91ciBNT0RFTF9DT05URVhUX1dJTkRPV1Mgb2JqZWN0XHJcbiAgICAgICAgICAgIC8vIFRoaXMgZW5zdXJlcyB0aGUgbW9kZWwgbGlzdCBpcyBzeW5jaHJvbml6ZWQgd2l0aCBvdXIgY29udGV4dCB3aW5kb3cgZGVmaW5pdGlvbnNcclxuICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5rZXlzKE1PREVMX0NPTlRFWFRfV0lORE9XUyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZ2V0dGluZyBBbnRocm9waWMgbW9kZWxzOicsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIEZvcm1hdCBtZXNzYWdlcyBmb3IgQW50aHJvcGljIEFQSVxyXG4gICAgICogXHJcbiAgICAgKiBDb252ZXJ0cyBmcm9tIHRoZSBwbHVnaW4ncyBNZXNzYWdlIGZvcm1hdCB0byBBbnRocm9waWMncyBleHBlY3RlZCBmb3JtYXQuXHJcbiAgICAgKiBIYW5kbGVzIHN5c3RlbSBtZXNzYWdlcyBzcGVjaWFsbHkgYXMgQW50aHJvcGljIGhhcyBhIGRpZmZlcmVudCBmb3JtYXQuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyAtIEFycmF5IG9mIG1lc3NhZ2VzIHRvIGZvcm1hdFxyXG4gICAgICogQHJldHVybnMgRm9ybWF0dGVkIG1lc3NhZ2VzIGFuZCBzeXN0ZW0gcHJvbXB0IGZvciBBbnRocm9waWMgQVBJXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgZm9ybWF0TWVzc2FnZXMobWVzc2FnZXM6IE1lc3NhZ2VbXSk6IHsgXHJcbiAgICAgICAgc3lzdGVtUHJvbXB0OiBzdHJpbmcgfCB1bmRlZmluZWQsIFxyXG4gICAgICAgIGFudGhyb3BpY01lc3NhZ2VzOiBBbnRocm9waWNNZXNzYWdlW10gXHJcbiAgICB9IHtcclxuICAgICAgICAvLyBIYW5kbGUgc3lzdGVtIG1lc3NhZ2VzIHNwZWNpYWxseSBhcyBBbnRocm9waWMgaGFzIGEgZGlmZmVyZW50IGZvcm1hdFxyXG4gICAgICAgIGNvbnN0IHN5c3RlbU1lc3NhZ2VzID0gbWVzc2FnZXMuZmlsdGVyKG1zZyA9PiBtc2cucm9sZSA9PT0gJ3N5c3RlbScpO1xyXG4gICAgICAgIGNvbnN0IG5vblN5c3RlbU1lc3NhZ2VzID0gbWVzc2FnZXMuZmlsdGVyKG1zZyA9PiBtc2cucm9sZSAhPT0gJ3N5c3RlbScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEV4dHJhY3Qgc3lzdGVtIG1lc3NhZ2UgaWYgcHJlc2VudFxyXG4gICAgICAgIGNvbnN0IHN5c3RlbVByb21wdCA9IHN5c3RlbU1lc3NhZ2VzLmxlbmd0aCA+IDAgXHJcbiAgICAgICAgICAgID8gc3lzdGVtTWVzc2FnZXMubWFwKG1zZyA9PiBtc2cuY29udGVudCkuam9pbignXFxuXFxuJylcclxuICAgICAgICAgICAgOiB1bmRlZmluZWQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ29udmVydCBtZXNzYWdlcyB0byBBbnRocm9waWMgZm9ybWF0XHJcbiAgICAgICAgLy8gRmlyc3QsIHByZXBhcmUgYSBjbGVhbiBhcnJheSBvZiBtZXNzYWdlcyB3aXRoIHByb3BlciByb2xlc1xyXG4gICAgICAgIGNvbnN0IGFudGhyb3BpY01lc3NhZ2VzID0gbm9uU3lzdGVtTWVzc2FnZXMubWFwKG1zZyA9PiB7XHJcbiAgICAgICAgICAgIC8vIEVuc3VyZSByb2xlIGlzIGVpdGhlciAndXNlcicgb3IgJ2Fzc2lzdGFudCdcclxuICAgICAgICAgICAgY29uc3Qgcm9sZSA9IChtc2cucm9sZSA9PT0gJ3VzZXInIHx8IG1zZy5yb2xlID09PSAnYXNzaXN0YW50JykgXHJcbiAgICAgICAgICAgICAgICA/IG1zZy5yb2xlIGFzICd1c2VyJyB8ICdhc3Npc3RhbnQnICAvLyBUeXBlIGFzc2VydGlvbiB0byBoZWxwIFR5cGVTY3JpcHRcclxuICAgICAgICAgICAgICAgIDogJ3VzZXInIGFzIGNvbnN0O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgcmV0dXJuIHsgcm9sZSwgY29udGVudDogbXNnLmNvbnRlbnQgfTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4geyBzeXN0ZW1Qcm9tcHQsIGFudGhyb3BpY01lc3NhZ2VzIH07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXN0IGNvbm5lY3Rpb24gdG8gQW50aHJvcGljXHJcbiAgICAgKiBcclxuICAgICAqIFZlcmlmaWVzIHRoZSBBUEkga2V5IHdvcmtzIGJ5IGF0dGVtcHRpbmcgYSBzaW1wbGUgY29tcGxldGlvbi5cclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMgVGVzdCByZXN1bHRzIGluY2x1ZGluZyBzdWNjZXNzL2ZhaWx1cmVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxDb25uZWN0aW9uVGVzdFJlc3VsdD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFRlc3QgdGhlIGNvbm5lY3Rpb24gYnkgc2VuZGluZyBhIG1pbmltYWwgbWVzc2FnZVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC5tZXNzYWdlcy5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogW3sgcm9sZTogJ3VzZXInIGFzIGNvbnN0LCBjb250ZW50OiAnSGknIH1dLFxyXG4gICAgICAgICAgICAgICAgbWF4X3Rva2VuczogMVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IHRoaXMuZ2V0QXZhaWxhYmxlTW9kZWxzKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBjb25uZWN0ZWQgdG8gQW50aHJvcGljIScsXHJcbiAgICAgICAgICAgICAgICBtb2RlbHNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFcnJvclJlc3BvbnNlKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBPcGVuQUkgUHJvdmlkZXIgSW1wbGVtZW50YXRpb25cclxuICogXHJcbiAqIFRoaXMgZmlsZSBjb250YWlucyB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIE9wZW5BSSBwcm92aWRlcixcclxuICogd2hpY2ggYWxsb3dzIHRoZSBwbHVnaW4gdG8gaW50ZXJhY3Qgd2l0aCBPcGVuQUkncyBBUEkgKEdQVC0zLjUsIEdQVC00LCBldGMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IE1lc3NhZ2UsIENvbXBsZXRpb25PcHRpb25zLCBDb25uZWN0aW9uVGVzdFJlc3VsdCB9IGZyb20gJy4uL3NyYy90eXBlcyc7XHJcbmltcG9ydCB7IEJhc2VQcm92aWRlciwgUHJvdmlkZXJFcnJvciwgUHJvdmlkZXJFcnJvclR5cGUgfSBmcm9tICcuL2Jhc2UnO1xyXG5cclxuaW50ZXJmYWNlIE9wZW5BSVJlc3BvbnNlIHtcclxuICAgIGlkOiBzdHJpbmc7XHJcbiAgICBvYmplY3Q6IHN0cmluZztcclxuICAgIGNyZWF0ZWQ6IG51bWJlcjtcclxuICAgIG1vZGVsOiBzdHJpbmc7XHJcbiAgICBzeXN0ZW1fZmluZ2VycHJpbnQ6IHN0cmluZztcclxuICAgIGNob2ljZXM6IEFycmF5PHtcclxuICAgICAgICBpbmRleDogbnVtYmVyO1xyXG4gICAgICAgIG1lc3NhZ2U6IHtcclxuICAgICAgICAgICAgcm9sZTogc3RyaW5nO1xyXG4gICAgICAgICAgICBjb250ZW50OiBzdHJpbmc7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmaW5pc2hfcmVhc29uOiBzdHJpbmc7XHJcbiAgICB9PjtcclxuICAgIHVzYWdlOiB7XHJcbiAgICAgICAgcHJvbXB0X3Rva2VuczogbnVtYmVyO1xyXG4gICAgICAgIGNvbXBsZXRpb25fdG9rZW5zOiBudW1iZXI7XHJcbiAgICAgICAgdG90YWxfdG9rZW5zOiBudW1iZXI7XHJcbiAgICB9O1xyXG59XHJcblxyXG4vKipcclxuICogSW1wbGVtZW50cyB0aGUgT3BlbkFJIHByb3ZpZGVyIGZ1bmN0aW9uYWxpdHlcclxuICogXHJcbiAqIEhhbmRsZXMgY29tbXVuaWNhdGlvbiB3aXRoIE9wZW5BSSdzIEFQSSwgaW5jbHVkaW5nOlxyXG4gKiAtIENoYXQgY29tcGxldGlvbnNcclxuICogLSBNb2RlbCBsaXN0aW5nXHJcbiAqIC0gQ29ubmVjdGlvbiB0ZXN0aW5nXHJcbiAqIC0gU3RyZWFtaW5nIHJlc3BvbnNlc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE9wZW5BSVByb3ZpZGVyIGV4dGVuZHMgQmFzZVByb3ZpZGVyIHtcclxuICAgIHByb3RlY3RlZCBhcGlLZXk6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBiYXNlVXJsID0gJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEnO1xyXG4gICAgcHJvdGVjdGVkIG1vZGVsOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBpS2V5OiBzdHJpbmcsIG1vZGVsOiBzdHJpbmcgPSAnZ3B0LTQnKSB7XHJcbiAgICAgICAgc3VwZXIoKTtcclxuICAgICAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcclxuICAgICAgICB0aGlzLm1vZGVsID0gbW9kZWw7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSBjb21wbGV0aW9uIGZyb20gT3BlbkFJXHJcbiAgICAgKiBcclxuICAgICAqIFNlbmRzIHRoZSBjb252ZXJzYXRpb24gdG8gT3BlbkFJIGFuZCBzdHJlYW1zIGJhY2sgdGhlIHJlc3BvbnNlLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgLSBUaGUgY29udmVyc2F0aW9uIGhpc3RvcnlcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gU2V0dGluZ3MgZm9yIHRoaXMgY29tcGxldGlvblxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRDb21wbGV0aW9uKG1lc3NhZ2VzOiBNZXNzYWdlW10sIG9wdGlvbnM6IENvbXBsZXRpb25PcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2NoYXQvY29tcGxldGlvbnNgLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gLFxyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IG9wdGlvbnMudGVtcGVyYXR1cmUgPz8gMC43LFxyXG4gICAgICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IG9wdGlvbnMubWF4VG9rZW5zID8/IDEwMDAsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5hYm9ydENvbnRyb2xsZXI/LnNpZ25hbFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlSHR0cEVycm9yKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keT8uZ2V0UmVhZGVyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoJ3V0Zi04Jyk7XHJcbiAgICAgICAgICAgIGxldCBidWZmZXIgPSAnJztcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXI/LnJlYWQoKSB8fCB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcclxuICAgICAgICAgICAgICAgIGlmIChkb25lKSBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBidWZmZXIgKz0gZGVjb2Rlci5kZWNvZGUodmFsdWUsIHsgc3RyZWFtOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSBidWZmZXIuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyID0gbGluZXMucG9wKCkgfHwgJyc7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnZGF0YTogJykgJiYgbGluZSAhPT0gJ2RhdGE6IFtET05FXScpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnBhcnNlKGxpbmUuc2xpY2UoNikpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGRhdGEuY2hvaWNlc1swXT8uZGVsdGE/LmNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudCAmJiBvcHRpb25zLnN0cmVhbUNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zdHJlYW1DYWxsYmFjayhjb250ZW50KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBwYXJzaW5nIE9wZW5BSSByZXNwb25zZSBjaHVuazonLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFByb3ZpZGVyRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdPcGVuQUkgc3RyZWFtIHdhcyBhYm9ydGVkJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxsaW5nIE9wZW5BSTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhdmFpbGFibGUgT3BlbkFJIG1vZGVsc1xyXG4gICAgICogXHJcbiAgICAgKiBGZXRjaGVzIHRoZSBsaXN0IG9mIG1vZGVscyBmcm9tIE9wZW5BSSdzIEFQSS5cclxuICAgICAqIEZpbHRlcnMgdG8gb25seSBpbmNsdWRlIGNoYXQgbW9kZWxzIChHUFQtMy41LCBHUFQtNCwgZXRjLilcclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMgTGlzdCBvZiBhdmFpbGFibGUgbW9kZWwgbmFtZXNcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0QXZhaWxhYmxlTW9kZWxzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVybH0vbW9kZWxzYCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQXV0aG9yaXphdGlvbic6IGBCZWFyZXIgJHt0aGlzLmFwaUtleX1gLFxyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUh0dHBFcnJvcihyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIHJldHVybiBkYXRhLmRhdGFcclxuICAgICAgICAgICAgICAgIC5tYXAoKG1vZGVsOiBhbnkpID0+IG1vZGVsLmlkKVxyXG4gICAgICAgICAgICAgICAgLmZpbHRlcigoaWQ6IHN0cmluZykgPT4gaWQuc3RhcnRzV2l0aCgnZ3B0LScpKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBPcGVuQUkgbW9kZWxzOicsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGVzdCBjb25uZWN0aW9uIHRvIE9wZW5BSVxyXG4gICAgICogXHJcbiAgICAgKiBWZXJpZmllcyB0aGUgQVBJIGtleSB3b3JrcyBieSBhdHRlbXB0aW5nIHRvIGxpc3QgbW9kZWxzLlxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJucyBUZXN0IHJlc3VsdHMgaW5jbHVkaW5nIHN1Y2Nlc3MvZmFpbHVyZSBhbmQgYXZhaWxhYmxlIG1vZGVsc1xyXG4gICAgICovXHJcbiAgICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPENvbm5lY3Rpb25UZXN0UmVzdWx0PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgbW9kZWxzID0gYXdhaXQgdGhpcy5nZXRBdmFpbGFibGVNb2RlbHMoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiBgU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byBPcGVuQUkhIEZvdW5kICR7bW9kZWxzLmxlbmd0aH0gYXZhaWxhYmxlIG1vZGVscy5gLFxyXG4gICAgICAgICAgICAgICAgbW9kZWxzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3JSZXNwb25zZShlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsICIvKipcclxuICogR29vZ2xlIEdlbWluaSBQcm92aWRlciBJbXBsZW1lbnRhdGlvblxyXG4gKiBcclxuICogVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgR29vZ2xlIEdlbWluaSBwcm92aWRlcixcclxuICogd2hpY2ggYWxsb3dzIHRoZSBwbHVnaW4gdG8gaW50ZXJhY3Qgd2l0aCBHb29nbGUncyBHZW1pbmkgQVBJLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IE1lc3NhZ2UsIENvbXBsZXRpb25PcHRpb25zLCBDb25uZWN0aW9uVGVzdFJlc3VsdCB9IGZyb20gJy4uL3NyYy90eXBlcyc7XHJcbmltcG9ydCB7IEJhc2VQcm92aWRlciwgUHJvdmlkZXJFcnJvciwgUHJvdmlkZXJFcnJvclR5cGUgfSBmcm9tICcuL2Jhc2UnO1xyXG5cclxuaW50ZXJmYWNlIEdlbWluaVJlc3BvbnNlIHtcclxuICAgIGNhbmRpZGF0ZXM6IEFycmF5PHtcclxuICAgICAgICBjb250ZW50OiB7XHJcbiAgICAgICAgICAgIHBhcnRzOiBBcnJheTx7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBzdHJpbmc7XHJcbiAgICAgICAgICAgIH0+O1xyXG4gICAgICAgICAgICByb2xlOiBzdHJpbmc7XHJcbiAgICAgICAgfTtcclxuICAgICAgICBmaW5pc2hSZWFzb246IHN0cmluZztcclxuICAgICAgICBpbmRleDogbnVtYmVyO1xyXG4gICAgICAgIHNhZmV0eVJhdGluZ3M6IEFycmF5PGFueT47XHJcbiAgICB9PjtcclxuICAgIHByb21wdEZlZWRiYWNrOiB7XHJcbiAgICAgICAgc2FmZXR5UmF0aW5nczogQXJyYXk8YW55PjtcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbXBsZW1lbnRzIHRoZSBHb29nbGUgR2VtaW5pIHByb3ZpZGVyIGZ1bmN0aW9uYWxpdHlcclxuICogXHJcbiAqIEhhbmRsZXMgY29tbXVuaWNhdGlvbiB3aXRoIEdvb2dsZSdzIEdlbWluaSBBUEksIGluY2x1ZGluZzpcclxuICogLSBDaGF0IGNvbXBsZXRpb25zXHJcbiAqIC0gTW9kZWwgbGlzdGluZ1xyXG4gKiAtIENvbm5lY3Rpb24gdGVzdGluZ1xyXG4gKiAtIFN0cmVhbWluZyByZXNwb25zZXNcclxuICovXHJcbmV4cG9ydCBjbGFzcyBHZW1pbmlQcm92aWRlciBleHRlbmRzIEJhc2VQcm92aWRlciB7XHJcbiAgICBwcm90ZWN0ZWQgYXBpS2V5OiBzdHJpbmc7XHJcbiAgICBwcm90ZWN0ZWQgYmFzZVVybCA9ICdodHRwczovL2dlbmVyYXRpdmVsYW5ndWFnZS5nb29nbGVhcGlzLmNvbS92MSc7XHJcbiAgICBwcm90ZWN0ZWQgbW9kZWw6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcGlLZXk6IHN0cmluZywgbW9kZWw6IHN0cmluZyA9ICdnZW1pbmktcHJvJykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgY29tcGxldGlvbiBmcm9tIEdvb2dsZSBHZW1pbmlcclxuICAgICAqIFxyXG4gICAgICogU2VuZHMgdGhlIGNvbnZlcnNhdGlvbiB0byBHZW1pbmkgYW5kIHN0cmVhbXMgYmFjayB0aGUgcmVzcG9uc2UuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyAtIFRoZSBjb252ZXJzYXRpb24gaGlzdG9yeVxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBTZXR0aW5ncyBmb3IgdGhpcyBjb21wbGV0aW9uXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldENvbXBsZXRpb24obWVzc2FnZXM6IE1lc3NhZ2VbXSwgb3B0aW9uczogQ29tcGxldGlvbk9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBGb3JtYXQgbWVzc2FnZXMgZm9yIEdlbWluaSBBUElcclxuICAgICAgICAgICAgY29uc3QgZm9ybWF0dGVkTWVzc2FnZXMgPSB0aGlzLmZvcm1hdE1lc3NhZ2VzKG1lc3NhZ2VzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEZvciBjaGF0IG1vZGVscywgd2Ugc2hvdWxkIHVzZSB0aGUgZ2VuZXJhdGVDb250ZW50IGVuZHBvaW50XHJcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGAke3RoaXMuYmFzZVVybH0vbW9kZWxzLyR7dGhpcy5tb2RlbH06Z2VuZXJhdGVDb250ZW50P2tleT0ke3RoaXMuYXBpS2V5fWA7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBVc2Ugbm9uLXN0cmVhbWluZyB2ZXJzaW9uIGZvciBjaGF0IGNvbXBsZXRpb25zXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2godXJsLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRzOiBmb3JtYXR0ZWRNZXNzYWdlcyxcclxuICAgICAgICAgICAgICAgICAgICBnZW5lcmF0aW9uQ29uZmlnOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBvcHRpb25zLnRlbXBlcmF0dXJlID8/IDAuNyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4T3V0cHV0VG9rZW5zOiBvcHRpb25zLm1heFRva2VucyA/PyAxMDAwXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuYWJvcnRDb250cm9sbGVyPy5zaWduYWxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUh0dHBFcnJvcihyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEZvciBub24tc3RyZWFtaW5nIHJlc3BvbnNlLCBwYXJzZSB0aGUgSlNPTiBkaXJlY3RseVxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnR2VtaW5pIHJlc3BvbnNlOicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIEV4dHJhY3QgdGhlIHRleHQgZnJvbSB0aGUgcmVzcG9uc2VcclxuICAgICAgICAgICAgY29uc3QgdGV4dCA9IGRhdGEuY2FuZGlkYXRlcz8uWzBdPy5jb250ZW50Py5wYXJ0cz8uWzBdPy50ZXh0O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHRleHQgJiYgb3B0aW9ucy5zdHJlYW1DYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgLy8gRXZlbiB0aG91Z2ggaXQncyBub3Qgc3RyZWFtaW5nLCB3ZSB1c2UgdGhlIHN0cmVhbUNhbGxiYWNrXHJcbiAgICAgICAgICAgICAgICAvLyB0byBtYWludGFpbiBjb21wYXRpYmlsaXR5IHdpdGggdGhlIGV4aXN0aW5nIGludGVyZmFjZVxyXG4gICAgICAgICAgICAgICAgb3B0aW9ucy5zdHJlYW1DYWxsYmFjayh0ZXh0KTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignTm8gdGV4dCBmb3VuZCBpbiBHZW1pbmkgcmVzcG9uc2U6JywgSlNPTi5zdHJpbmdpZnkoZGF0YSkpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUHJvdmlkZXJFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0dlbWluaSByZXF1ZXN0IHdhcyBhYm9ydGVkJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxsaW5nIEdlbWluaTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhdmFpbGFibGUgR2VtaW5pIG1vZGVsc1xyXG4gICAgICogXHJcbiAgICAgKiBGZXRjaGVzIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBtb2RlbHMgZnJvbSBHb29nbGUncyBBUEkuXHJcbiAgICAgKiBGaWx0ZXJzIHRvIG9ubHkgaW5jbHVkZSBHZW1pbmkgbW9kZWxzLlxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJucyBMaXN0IG9mIGF2YWlsYWJsZSBtb2RlbCBuYW1lc1xyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRBdmFpbGFibGVNb2RlbHMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9tb2RlbHM/a2V5PSR7dGhpcy5hcGlLZXl9YCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnR0VUJyxcclxuICAgICAgICAgICAgICAgIGhlYWRlcnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVIdHRwRXJyb3IocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YS5tb2RlbHNcclxuICAgICAgICAgICAgICAgIC5tYXAoKG1vZGVsOiBhbnkpID0+IG1vZGVsLm5hbWUuc3BsaXQoJy8nKS5wb3AoKSlcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGlkOiBzdHJpbmcpID0+IGlkLnN0YXJ0c1dpdGgoJ2dlbWluaS0nKSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgR2VtaW5pIG1vZGVsczonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlc3QgY29ubmVjdGlvbiB0byBHZW1pbmlcclxuICAgICAqIFxyXG4gICAgICogVmVyaWZpZXMgdGhlIEFQSSBrZXkgd29ya3MgYnkgYXR0ZW1wdGluZyB0byBsaXN0IG1vZGVscy5cclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMgVGVzdCByZXN1bHRzIGluY2x1ZGluZyBzdWNjZXNzL2ZhaWx1cmUgYW5kIGF2YWlsYWJsZSBtb2RlbHNcclxuICAgICAqL1xyXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxDb25uZWN0aW9uVGVzdFJlc3VsdD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IHRoaXMuZ2V0QXZhaWxhYmxlTW9kZWxzKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYFN1Y2Nlc3NmdWxseSBjb25uZWN0ZWQgdG8gR29vZ2xlIEdlbWluaSEgRm91bmQgJHttb2RlbHMubGVuZ3RofSBhdmFpbGFibGUgbW9kZWxzLmAsXHJcbiAgICAgICAgICAgICAgICBtb2RlbHNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFcnJvclJlc3BvbnNlKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGb3JtYXQgbWVzc2FnZXMgZm9yIEdlbWluaSBBUElcclxuICAgICAqIFxyXG4gICAgICogQ29udmVydHMgZnJvbSB0aGUgcGx1Z2luJ3MgTWVzc2FnZSBmb3JtYXQgdG8gR2VtaW5pJ3MgZXhwZWN0ZWQgZm9ybWF0LlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgLSBBcnJheSBvZiBtZXNzYWdlcyB0byBmb3JtYXRcclxuICAgICAqIEByZXR1cm5zIEZvcm1hdHRlZCBtZXNzYWdlcyBmb3IgR2VtaW5pIEFQSVxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGZvcm1hdE1lc3NhZ2VzKG1lc3NhZ2VzOiBNZXNzYWdlW10pOiBBcnJheTxhbnk+IHtcclxuICAgICAgICAvLyBUaGUgR2VtaW5pIEFQSSBleHBlY3RzIGEgY2hhdCBmb3JtYXQgd2hlcmU6XHJcbiAgICAgICAgLy8gMS4gU3lzdGVtIG1lc3NhZ2VzIHNob3VsZCBiZSBzZW50IGFzIHVzZXIgbWVzc2FnZXMgdGhhdCBjb21lIGZpcnN0XHJcbiAgICAgICAgLy8gMi4gRWFjaCBtZXNzYWdlIG5lZWRzIHRvIGhhdmUgYSByb2xlIGFuZCBwYXJ0cyBhcnJheVxyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGdlbWluaU1lc3NhZ2VzID0gW107XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRmlyc3QsIGZpbmQgYW5kIHByb2Nlc3Mgc3lzdGVtIG1lc3NhZ2VzXHJcbiAgICAgICAgY29uc3Qgc3lzdGVtTWVzc2FnZXMgPSBtZXNzYWdlcy5maWx0ZXIobXNnID0+IG1zZy5yb2xlID09PSAnc3lzdGVtJyk7XHJcbiAgICAgICAgY29uc3Qgbm9uU3lzdGVtTWVzc2FnZXMgPSBtZXNzYWdlcy5maWx0ZXIobXNnID0+IG1zZy5yb2xlICE9PSAnc3lzdGVtJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQWRkIHN5c3RlbSBtZXNzYWdlcyBmaXJzdCBhcyB1c2VyIG1lc3NhZ2VzXHJcbiAgICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIHN5c3RlbU1lc3NhZ2VzKSB7XHJcbiAgICAgICAgICAgIGdlbWluaU1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgcm9sZTogJ3VzZXInLFxyXG4gICAgICAgICAgICAgICAgcGFydHM6IFt7IHRleHQ6IG1lc3NhZ2UuY29udGVudCB9XVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gVGhlbiBhZGQgdGhlIHJlZ3VsYXIgY29udmVyc2F0aW9uIG1lc3NhZ2VzXHJcbiAgICAgICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIG5vblN5c3RlbU1lc3NhZ2VzKSB7XHJcbiAgICAgICAgICAgIC8vIEdlbWluaSBvbmx5IHN1cHBvcnRzICd1c2VyJyBhbmQgJ21vZGVsJyByb2xlc1xyXG4gICAgICAgICAgICBjb25zdCByb2xlID0gbWVzc2FnZS5yb2xlID09PSAnYXNzaXN0YW50JyA/ICdtb2RlbCcgOiAndXNlcic7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBnZW1pbmlNZXNzYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHJvbGU6IHJvbGUsXHJcbiAgICAgICAgICAgICAgICBwYXJ0czogW3sgdGV4dDogbWVzc2FnZS5jb250ZW50IH1dXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZ2VtaW5pTWVzc2FnZXM7XHJcbiAgICB9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBPbGxhbWEgUHJvdmlkZXIgSW1wbGVtZW50YXRpb25cclxuICogXHJcbiAqIFRoaXMgZmlsZSBjb250YWlucyB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIE9sbGFtYSBwcm92aWRlcixcclxuICogd2hpY2ggYWxsb3dzIHRoZSBwbHVnaW4gdG8gaW50ZXJhY3Qgd2l0aCBhIGxvY2FsIE9sbGFtYSBzZXJ2ZXJcclxuICogcnVubmluZyBBSSBtb2RlbHMgbGlrZSBMbGFtYSwgTWlzdHJhbCwgZXRjLlxyXG4gKi9cclxuXHJcbmltcG9ydCB7IE1lc3NhZ2UsIENvbXBsZXRpb25PcHRpb25zLCBDb25uZWN0aW9uVGVzdFJlc3VsdCB9IGZyb20gJy4uL3NyYy90eXBlcyc7XHJcbmltcG9ydCB7IEJhc2VQcm92aWRlciwgUHJvdmlkZXJFcnJvciwgUHJvdmlkZXJFcnJvclR5cGUgfSBmcm9tICcuL2Jhc2UnO1xyXG5cclxuaW50ZXJmYWNlIE9sbGFtYVJlc3BvbnNlIHtcclxuICAgIG1vZGVsOiBzdHJpbmc7XHJcbiAgICBjcmVhdGVkX2F0OiBzdHJpbmc7XHJcbiAgICByZXNwb25zZTogc3RyaW5nO1xyXG4gICAgZG9uZTogYm9vbGVhbjtcclxuICAgIGNvbnRleHQ/OiBudW1iZXJbXTtcclxuICAgIHRvdGFsX2R1cmF0aW9uPzogbnVtYmVyO1xyXG4gICAgbG9hZF9kdXJhdGlvbj86IG51bWJlcjtcclxuICAgIHByb21wdF9ldmFsX2R1cmF0aW9uPzogbnVtYmVyO1xyXG4gICAgZXZhbF9kdXJhdGlvbj86IG51bWJlcjtcclxuICAgIGV2YWxfY291bnQ/OiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBPbGxhbWFNb2RlbCB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBtb2RpZmllZF9hdDogc3RyaW5nO1xyXG4gICAgc2l6ZTogbnVtYmVyO1xyXG4gICAgZGlnZXN0OiBzdHJpbmc7XHJcbiAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgZm9ybWF0OiBzdHJpbmc7XHJcbiAgICAgICAgZmFtaWx5OiBzdHJpbmc7XHJcbiAgICAgICAgcGFyYW1ldGVyX3NpemU6IHN0cmluZztcclxuICAgICAgICBxdWFudGl6YXRpb25fbGV2ZWw6IHN0cmluZztcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbXBsZW1lbnRzIHRoZSBPbGxhbWEgcHJvdmlkZXIgZnVuY3Rpb25hbGl0eVxyXG4gKiBcclxuICogSGFuZGxlcyBjb21tdW5pY2F0aW9uIHdpdGggYSBsb2NhbCBPbGxhbWEgc2VydmVyLCBpbmNsdWRpbmc6XHJcbiAqIC0gQ2hhdCBjb21wbGV0aW9uc1xyXG4gKiAtIE1vZGVsIGxpc3RpbmdcclxuICogLSBDb25uZWN0aW9uIHRlc3RpbmdcclxuICogLSBTdHJlYW1pbmcgcmVzcG9uc2VzXHJcbiAqIFxyXG4gKiBSZXF1aXJlcyBPbGxhbWEgdG8gYmUgaW5zdGFsbGVkIGFuZCBydW5uaW5nIGxvY2FsbHk6XHJcbiAqIDEuIEluc3RhbGwgT2xsYW1hIGZyb20gaHR0cHM6Ly9vbGxhbWEuYWlcclxuICogMi4gU3RhcnQgdGhlIE9sbGFtYSBzZXJ2ZXJcclxuICogMy4gUHVsbCB5b3VyIGRlc2lyZWQgbW9kZWxzIHVzaW5nICdvbGxhbWEgcHVsbCBtb2RlbC1uYW1lJ1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE9sbGFtYVByb3ZpZGVyIGV4dGVuZHMgQmFzZVByb3ZpZGVyIHtcclxuICAgIHByb3RlY3RlZCBhcGlLZXk6IHN0cmluZyA9ICcnOyAvLyBOb3QgdXNlZCBmb3IgT2xsYW1hXHJcbiAgICBwcm90ZWN0ZWQgYmFzZVVybDogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIG1vZGVsOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2VydmVyVXJsOiBzdHJpbmcgPSAnaHR0cDovL2xvY2FsaG9zdDoxMTQzNCcsIG1vZGVsOiBzdHJpbmcgPSAnbGxhbWEyJykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gc2VydmVyVXJsLnJlcGxhY2UoL1xcLyQvLCAnJyk7IC8vIFJlbW92ZSB0cmFpbGluZyBzbGFzaCBpZiBwcmVzZW50XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29udmVydCBtZXNzYWdlcyB0byBPbGxhbWEgZm9ybWF0XHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyAtIFN0YW5kYXJkIG1lc3NhZ2UgZm9ybWF0XHJcbiAgICAgKiBAcmV0dXJucyBQcm9tcHQgc3RyaW5nIGluIE9sbGFtYSBmb3JtYXRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjb252ZXJ0VG9PbGxhbWFGb3JtYXQobWVzc2FnZXM6IE1lc3NhZ2VbXSk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzLm1hcChtc2cgPT4ge1xyXG4gICAgICAgICAgICBpZiAobXNnLnJvbGUgPT09ICdzeXN0ZW0nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYFN5c3RlbTogJHttc2cuY29udGVudH1cXG5cXG5gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBgJHttc2cucm9sZSA9PT0gJ3VzZXInID8gJ0h1bWFuJyA6ICdBc3Npc3RhbnQnfTogJHttc2cuY29udGVudH1cXG5cXG5gO1xyXG4gICAgICAgIH0pLmpvaW4oJycpICsgJ0Fzc2lzdGFudDonO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgY29tcGxldGlvbiBmcm9tIE9sbGFtYVxyXG4gICAgICogXHJcbiAgICAgKiBTZW5kcyB0aGUgY29udmVyc2F0aW9uIHRvIHRoZSBsb2NhbCBPbGxhbWEgc2VydmVyIGFuZCBzdHJlYW1zIGJhY2sgdGhlIHJlc3BvbnNlLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgLSBUaGUgY29udmVyc2F0aW9uIGhpc3RvcnlcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gU2V0dGluZ3MgZm9yIHRoaXMgY29tcGxldGlvblxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRDb21wbGV0aW9uKG1lc3NhZ2VzOiBNZXNzYWdlW10sIG9wdGlvbnM6IENvbXBsZXRpb25PcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy5jb252ZXJ0VG9PbGxhbWFGb3JtYXQobWVzc2FnZXMpO1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVybH0vYXBpL2dlbmVyYXRlYCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICBwcm9tcHQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IG9wdGlvbnMudGVtcGVyYXR1cmUgPz8gMC43LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1fcHJlZGljdDogb3B0aW9ucy5tYXhUb2tlbnMgPz8gMTAwMFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLmFib3J0Q29udHJvbGxlcj8uc2lnbmFsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVIdHRwRXJyb3IocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZWFkZXIgPSByZXNwb25zZS5ib2R5Py5nZXRSZWFkZXIoKTtcclxuICAgICAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTtcclxuICAgICAgICAgICAgbGV0IGJ1ZmZlciA9ICcnO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlcj8ucmVhZCgpIHx8IHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKGRvbmUpIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ1ZmZlciArPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGJ1ZmZlci5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICBidWZmZXIgPSBsaW5lcy5wb3AoKSB8fCAnJztcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGluZS50cmltKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGE6IE9sbGFtYVJlc3BvbnNlID0gSlNPTi5wYXJzZShsaW5lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlc3BvbnNlICYmIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN0cmVhbUNhbGxiYWNrKGRhdGEucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIHBhcnNpbmcgT2xsYW1hIHJlc3BvbnNlIGNodW5rOicsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUHJvdmlkZXJFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ09sbGFtYSBzdHJlYW0gd2FzIGFib3J0ZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhbGxpbmcgT2xsYW1hOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGF2YWlsYWJsZSBPbGxhbWEgbW9kZWxzXHJcbiAgICAgKiBcclxuICAgICAqIEZldGNoZXMgdGhlIGxpc3Qgb2YgbW9kZWxzIGluc3RhbGxlZCBvbiB0aGUgbG9jYWwgT2xsYW1hIHNlcnZlci5cclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMgTGlzdCBvZiBhdmFpbGFibGUgbW9kZWwgbmFtZXNcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0QXZhaWxhYmxlTW9kZWxzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVybH0vYXBpL3RhZ3NgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlSHR0cEVycm9yKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuIChkYXRhLm1vZGVscyBhcyBPbGxhbWFNb2RlbFtdKT8ubWFwKG1vZGVsID0+IG1vZGVsLm5hbWUpIHx8IFtdO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIE9sbGFtYSBtb2RlbHM6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXN0IGNvbm5lY3Rpb24gdG8gT2xsYW1hXHJcbiAgICAgKiBcclxuICAgICAqIFZlcmlmaWVzIHRoZSBPbGxhbWEgc2VydmVyIGlzIHJ1bm5pbmcgYW5kIGFjY2Vzc2libGUuXHJcbiAgICAgKiBBbHNvIGNoZWNrcyBpZiBhbnkgbW9kZWxzIGFyZSBpbnN0YWxsZWQuXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIFRlc3QgcmVzdWx0cyBpbmNsdWRpbmcgc3VjY2Vzcy9mYWlsdXJlIGFuZCBhdmFpbGFibGUgbW9kZWxzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Q29ubmVjdGlvblRlc3RSZXN1bHQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBtb2RlbHMgPSBhd2FpdCB0aGlzLmdldEF2YWlsYWJsZU1vZGVscygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKG1vZGVscy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Nvbm5lY3RlZCB0byBPbGxhbWEgc2VydmVyLCBidXQgbm8gbW9kZWxzIGFyZSBpbnN0YWxsZWQuIFVzZSBcIm9sbGFtYSBwdWxsIG1vZGVsLW5hbWVcIiB0byBpbnN0YWxsIG1vZGVscy4nLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsczogW11cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYFN1Y2Nlc3NmdWxseSBjb25uZWN0ZWQgdG8gT2xsYW1hISBGb3VuZCAke21vZGVscy5sZW5ndGh9IGluc3RhbGxlZCBtb2RlbHMuYCxcclxuICAgICAgICAgICAgICAgIG1vZGVsc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVycm9yUmVzcG9uc2UoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEFJIFByb3ZpZGVycyBJbmRleFxyXG4gKiBcclxuICogVGhpcyBmaWxlIGV4cG9ydHMgYWxsIEFJIHByb3ZpZGVyIGltcGxlbWVudGF0aW9ucyBhbmQgc2hhcmVkIHR5cGVzLlxyXG4gKiBJbXBvcnQgcHJvdmlkZXJzIGZyb20gdGhpcyBmaWxlIHJhdGhlciB0aGFuIGRpcmVjdGx5IGZyb20gdGhlaXIgbW9kdWxlcy5cclxuICovXHJcblxyXG5pbXBvcnQgeyBNeVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vc3JjL3R5cGVzJztcclxuaW1wb3J0IHsgQmFzZVByb3ZpZGVyLCBQcm92aWRlckVycm9yLCBQcm92aWRlckVycm9yVHlwZSB9IGZyb20gJy4vYmFzZSc7XHJcbmltcG9ydCB7IEFudGhyb3BpY1Byb3ZpZGVyIH0gZnJvbSAnLi9hbnRocm9waWMnO1xyXG5pbXBvcnQgeyBPcGVuQUlQcm92aWRlciB9IGZyb20gJy4vb3BlbmFpJztcclxuaW1wb3J0IHsgR2VtaW5pUHJvdmlkZXIgfSBmcm9tICcuL2dlbWluaSc7XHJcbmltcG9ydCB7IE9sbGFtYVByb3ZpZGVyIH0gZnJvbSAnLi9vbGxhbWEnO1xyXG5cclxuZXhwb3J0IHsgQmFzZVByb3ZpZGVyLCBQcm92aWRlckVycm9yLCBQcm92aWRlckVycm9yVHlwZSB9O1xyXG5leHBvcnQgeyBBbnRocm9waWNQcm92aWRlciB9O1xyXG5leHBvcnQgeyBPcGVuQUlQcm92aWRlciB9O1xyXG5leHBvcnQgeyBHZW1pbmlQcm92aWRlciB9O1xyXG5leHBvcnQgeyBPbGxhbWFQcm92aWRlciB9O1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYW4gQUkgcHJvdmlkZXIgaW5zdGFuY2UgYmFzZWQgb24gdGhlIHBsdWdpbiBzZXR0aW5nc1xyXG4gKiBcclxuICogQHBhcmFtIHNldHRpbmdzIFRoZSBwbHVnaW4gc2V0dGluZ3MgY29udGFpbmluZyBwcm92aWRlciBjb25maWd1cmF0aW9uXHJcbiAqIEByZXR1cm5zIFRoZSBhcHByb3ByaWF0ZSBwcm92aWRlciBpbnN0YW5jZVxyXG4gKiBAdGhyb3dzIEVycm9yIGlmIHRoZSBwcm92aWRlciB0eXBlIGlzIGludmFsaWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm92aWRlcihzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncyk6IEJhc2VQcm92aWRlciB7XHJcbiAgICBzd2l0Y2ggKHNldHRpbmdzLnByb3ZpZGVyKSB7XHJcbiAgICAgICAgY2FzZSAnb3BlbmFpJzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBPcGVuQUlQcm92aWRlcihcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLm9wZW5haVNldHRpbmdzLmFwaUtleSxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLm9wZW5haVNldHRpbmdzLm1vZGVsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgY2FzZSAnYW50aHJvcGljJzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBbnRocm9waWNQcm92aWRlcihcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzLmFwaUtleSxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzLm1vZGVsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgY2FzZSAnZ2VtaW5pJzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBHZW1pbmlQcm92aWRlcihcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmdlbWluaVNldHRpbmdzLmFwaUtleSxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmdlbWluaVNldHRpbmdzLm1vZGVsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgY2FzZSAnb2xsYW1hJzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBPbGxhbWFQcm92aWRlcihcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLm9sbGFtYVNldHRpbmdzLnNlcnZlclVybCxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLm9sbGFtYVNldHRpbmdzLm1vZGVsXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHByb3ZpZGVyIHR5cGU6ICR7c2V0dGluZ3MucHJvdmlkZXJ9YCk7XHJcbiAgICB9XHJcbn1cclxuIiwgIlxuLyohIGpzLXlhbWwgNC4xLjAgaHR0cHM6Ly9naXRodWIuY29tL25vZGVjYS9qcy15YW1sIEBsaWNlbnNlIE1JVCAqL1xuZnVuY3Rpb24gaXNOb3RoaW5nKHN1YmplY3QpIHtcbiAgcmV0dXJuICh0eXBlb2Ygc3ViamVjdCA9PT0gJ3VuZGVmaW5lZCcpIHx8IChzdWJqZWN0ID09PSBudWxsKTtcbn1cblxuXG5mdW5jdGlvbiBpc09iamVjdChzdWJqZWN0KSB7XG4gIHJldHVybiAodHlwZW9mIHN1YmplY3QgPT09ICdvYmplY3QnKSAmJiAoc3ViamVjdCAhPT0gbnVsbCk7XG59XG5cblxuZnVuY3Rpb24gdG9BcnJheShzZXF1ZW5jZSkge1xuICBpZiAoQXJyYXkuaXNBcnJheShzZXF1ZW5jZSkpIHJldHVybiBzZXF1ZW5jZTtcbiAgZWxzZSBpZiAoaXNOb3RoaW5nKHNlcXVlbmNlKSkgcmV0dXJuIFtdO1xuXG4gIHJldHVybiBbIHNlcXVlbmNlIF07XG59XG5cblxuZnVuY3Rpb24gZXh0ZW5kKHRhcmdldCwgc291cmNlKSB7XG4gIHZhciBpbmRleCwgbGVuZ3RoLCBrZXksIHNvdXJjZUtleXM7XG5cbiAgaWYgKHNvdXJjZSkge1xuICAgIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuXG4gICAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IHNvdXJjZUtleXMubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgICAga2V5ID0gc291cmNlS2V5c1tpbmRleF07XG4gICAgICB0YXJnZXRba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0YXJnZXQ7XG59XG5cblxuZnVuY3Rpb24gcmVwZWF0KHN0cmluZywgY291bnQpIHtcbiAgdmFyIHJlc3VsdCA9ICcnLCBjeWNsZTtcblxuICBmb3IgKGN5Y2xlID0gMDsgY3ljbGUgPCBjb3VudDsgY3ljbGUgKz0gMSkge1xuICAgIHJlc3VsdCArPSBzdHJpbmc7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbmZ1bmN0aW9uIGlzTmVnYXRpdmVaZXJvKG51bWJlcikge1xuICByZXR1cm4gKG51bWJlciA9PT0gMCkgJiYgKE51bWJlci5ORUdBVElWRV9JTkZJTklUWSA9PT0gMSAvIG51bWJlcik7XG59XG5cblxudmFyIGlzTm90aGluZ18xICAgICAgPSBpc05vdGhpbmc7XG52YXIgaXNPYmplY3RfMSAgICAgICA9IGlzT2JqZWN0O1xudmFyIHRvQXJyYXlfMSAgICAgICAgPSB0b0FycmF5O1xudmFyIHJlcGVhdF8xICAgICAgICAgPSByZXBlYXQ7XG52YXIgaXNOZWdhdGl2ZVplcm9fMSA9IGlzTmVnYXRpdmVaZXJvO1xudmFyIGV4dGVuZF8xICAgICAgICAgPSBleHRlbmQ7XG5cbnZhciBjb21tb24gPSB7XG5cdGlzTm90aGluZzogaXNOb3RoaW5nXzEsXG5cdGlzT2JqZWN0OiBpc09iamVjdF8xLFxuXHR0b0FycmF5OiB0b0FycmF5XzEsXG5cdHJlcGVhdDogcmVwZWF0XzEsXG5cdGlzTmVnYXRpdmVaZXJvOiBpc05lZ2F0aXZlWmVyb18xLFxuXHRleHRlbmQ6IGV4dGVuZF8xXG59O1xuXG4vLyBZQU1MIGVycm9yIGNsYXNzLiBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzg0NTg5ODRcblxuXG5mdW5jdGlvbiBmb3JtYXRFcnJvcihleGNlcHRpb24sIGNvbXBhY3QpIHtcbiAgdmFyIHdoZXJlID0gJycsIG1lc3NhZ2UgPSBleGNlcHRpb24ucmVhc29uIHx8ICcodW5rbm93biByZWFzb24pJztcblxuICBpZiAoIWV4Y2VwdGlvbi5tYXJrKSByZXR1cm4gbWVzc2FnZTtcblxuICBpZiAoZXhjZXB0aW9uLm1hcmsubmFtZSkge1xuICAgIHdoZXJlICs9ICdpbiBcIicgKyBleGNlcHRpb24ubWFyay5uYW1lICsgJ1wiICc7XG4gIH1cblxuICB3aGVyZSArPSAnKCcgKyAoZXhjZXB0aW9uLm1hcmsubGluZSArIDEpICsgJzonICsgKGV4Y2VwdGlvbi5tYXJrLmNvbHVtbiArIDEpICsgJyknO1xuXG4gIGlmICghY29tcGFjdCAmJiBleGNlcHRpb24ubWFyay5zbmlwcGV0KSB7XG4gICAgd2hlcmUgKz0gJ1xcblxcbicgKyBleGNlcHRpb24ubWFyay5zbmlwcGV0O1xuICB9XG5cbiAgcmV0dXJuIG1lc3NhZ2UgKyAnICcgKyB3aGVyZTtcbn1cblxuXG5mdW5jdGlvbiBZQU1MRXhjZXB0aW9uJDEocmVhc29uLCBtYXJrKSB7XG4gIC8vIFN1cGVyIGNvbnN0cnVjdG9yXG4gIEVycm9yLmNhbGwodGhpcyk7XG5cbiAgdGhpcy5uYW1lID0gJ1lBTUxFeGNlcHRpb24nO1xuICB0aGlzLnJlYXNvbiA9IHJlYXNvbjtcbiAgdGhpcy5tYXJrID0gbWFyaztcbiAgdGhpcy5tZXNzYWdlID0gZm9ybWF0RXJyb3IodGhpcywgZmFsc2UpO1xuXG4gIC8vIEluY2x1ZGUgc3RhY2sgdHJhY2UgaW4gZXJyb3Igb2JqZWN0XG4gIGlmIChFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSkge1xuICAgIC8vIENocm9tZSBhbmQgTm9kZUpTXG4gICAgRXJyb3IuY2FwdHVyZVN0YWNrVHJhY2UodGhpcywgdGhpcy5jb25zdHJ1Y3Rvcik7XG4gIH0gZWxzZSB7XG4gICAgLy8gRkYsIElFIDEwKyBhbmQgU2FmYXJpIDYrLiBGYWxsYmFjayBmb3Igb3RoZXJzXG4gICAgdGhpcy5zdGFjayA9IChuZXcgRXJyb3IoKSkuc3RhY2sgfHwgJyc7XG4gIH1cbn1cblxuXG4vLyBJbmhlcml0IGZyb20gRXJyb3JcbllBTUxFeGNlcHRpb24kMS5wcm90b3R5cGUgPSBPYmplY3QuY3JlYXRlKEVycm9yLnByb3RvdHlwZSk7XG5ZQU1MRXhjZXB0aW9uJDEucHJvdG90eXBlLmNvbnN0cnVjdG9yID0gWUFNTEV4Y2VwdGlvbiQxO1xuXG5cbllBTUxFeGNlcHRpb24kMS5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyhjb21wYWN0KSB7XG4gIHJldHVybiB0aGlzLm5hbWUgKyAnOiAnICsgZm9ybWF0RXJyb3IodGhpcywgY29tcGFjdCk7XG59O1xuXG5cbnZhciBleGNlcHRpb24gPSBZQU1MRXhjZXB0aW9uJDE7XG5cbi8vIGdldCBzbmlwcGV0IGZvciBhIHNpbmdsZSBsaW5lLCByZXNwZWN0aW5nIG1heExlbmd0aFxuZnVuY3Rpb24gZ2V0TGluZShidWZmZXIsIGxpbmVTdGFydCwgbGluZUVuZCwgcG9zaXRpb24sIG1heExpbmVMZW5ndGgpIHtcbiAgdmFyIGhlYWQgPSAnJztcbiAgdmFyIHRhaWwgPSAnJztcbiAgdmFyIG1heEhhbGZMZW5ndGggPSBNYXRoLmZsb29yKG1heExpbmVMZW5ndGggLyAyKSAtIDE7XG5cbiAgaWYgKHBvc2l0aW9uIC0gbGluZVN0YXJ0ID4gbWF4SGFsZkxlbmd0aCkge1xuICAgIGhlYWQgPSAnIC4uLiAnO1xuICAgIGxpbmVTdGFydCA9IHBvc2l0aW9uIC0gbWF4SGFsZkxlbmd0aCArIGhlYWQubGVuZ3RoO1xuICB9XG5cbiAgaWYgKGxpbmVFbmQgLSBwb3NpdGlvbiA+IG1heEhhbGZMZW5ndGgpIHtcbiAgICB0YWlsID0gJyAuLi4nO1xuICAgIGxpbmVFbmQgPSBwb3NpdGlvbiArIG1heEhhbGZMZW5ndGggLSB0YWlsLmxlbmd0aDtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAgc3RyOiBoZWFkICsgYnVmZmVyLnNsaWNlKGxpbmVTdGFydCwgbGluZUVuZCkucmVwbGFjZSgvXFx0L2csICdcdTIxOTInKSArIHRhaWwsXG4gICAgcG9zOiBwb3NpdGlvbiAtIGxpbmVTdGFydCArIGhlYWQubGVuZ3RoIC8vIHJlbGF0aXZlIHBvc2l0aW9uXG4gIH07XG59XG5cblxuZnVuY3Rpb24gcGFkU3RhcnQoc3RyaW5nLCBtYXgpIHtcbiAgcmV0dXJuIGNvbW1vbi5yZXBlYXQoJyAnLCBtYXggLSBzdHJpbmcubGVuZ3RoKSArIHN0cmluZztcbn1cblxuXG5mdW5jdGlvbiBtYWtlU25pcHBldChtYXJrLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBPYmplY3QuY3JlYXRlKG9wdGlvbnMgfHwgbnVsbCk7XG5cbiAgaWYgKCFtYXJrLmJ1ZmZlcikgcmV0dXJuIG51bGw7XG5cbiAgaWYgKCFvcHRpb25zLm1heExlbmd0aCkgb3B0aW9ucy5tYXhMZW5ndGggPSA3OTtcbiAgaWYgKHR5cGVvZiBvcHRpb25zLmluZGVudCAgICAgICE9PSAnbnVtYmVyJykgb3B0aW9ucy5pbmRlbnQgICAgICA9IDE7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5saW5lc0JlZm9yZSAhPT0gJ251bWJlcicpIG9wdGlvbnMubGluZXNCZWZvcmUgPSAzO1xuICBpZiAodHlwZW9mIG9wdGlvbnMubGluZXNBZnRlciAgIT09ICdudW1iZXInKSBvcHRpb25zLmxpbmVzQWZ0ZXIgID0gMjtcblxuICB2YXIgcmUgPSAvXFxyP1xcbnxcXHJ8XFwwL2c7XG4gIHZhciBsaW5lU3RhcnRzID0gWyAwIF07XG4gIHZhciBsaW5lRW5kcyA9IFtdO1xuICB2YXIgbWF0Y2g7XG4gIHZhciBmb3VuZExpbmVObyA9IC0xO1xuXG4gIHdoaWxlICgobWF0Y2ggPSByZS5leGVjKG1hcmsuYnVmZmVyKSkpIHtcbiAgICBsaW5lRW5kcy5wdXNoKG1hdGNoLmluZGV4KTtcbiAgICBsaW5lU3RhcnRzLnB1c2gobWF0Y2guaW5kZXggKyBtYXRjaFswXS5sZW5ndGgpO1xuXG4gICAgaWYgKG1hcmsucG9zaXRpb24gPD0gbWF0Y2guaW5kZXggJiYgZm91bmRMaW5lTm8gPCAwKSB7XG4gICAgICBmb3VuZExpbmVObyA9IGxpbmVTdGFydHMubGVuZ3RoIC0gMjtcbiAgICB9XG4gIH1cblxuICBpZiAoZm91bmRMaW5lTm8gPCAwKSBmb3VuZExpbmVObyA9IGxpbmVTdGFydHMubGVuZ3RoIC0gMTtcblxuICB2YXIgcmVzdWx0ID0gJycsIGksIGxpbmU7XG4gIHZhciBsaW5lTm9MZW5ndGggPSBNYXRoLm1pbihtYXJrLmxpbmUgKyBvcHRpb25zLmxpbmVzQWZ0ZXIsIGxpbmVFbmRzLmxlbmd0aCkudG9TdHJpbmcoKS5sZW5ndGg7XG4gIHZhciBtYXhMaW5lTGVuZ3RoID0gb3B0aW9ucy5tYXhMZW5ndGggLSAob3B0aW9ucy5pbmRlbnQgKyBsaW5lTm9MZW5ndGggKyAzKTtcblxuICBmb3IgKGkgPSAxOyBpIDw9IG9wdGlvbnMubGluZXNCZWZvcmU7IGkrKykge1xuICAgIGlmIChmb3VuZExpbmVObyAtIGkgPCAwKSBicmVhaztcbiAgICBsaW5lID0gZ2V0TGluZShcbiAgICAgIG1hcmsuYnVmZmVyLFxuICAgICAgbGluZVN0YXJ0c1tmb3VuZExpbmVObyAtIGldLFxuICAgICAgbGluZUVuZHNbZm91bmRMaW5lTm8gLSBpXSxcbiAgICAgIG1hcmsucG9zaXRpb24gLSAobGluZVN0YXJ0c1tmb3VuZExpbmVOb10gLSBsaW5lU3RhcnRzW2ZvdW5kTGluZU5vIC0gaV0pLFxuICAgICAgbWF4TGluZUxlbmd0aFxuICAgICk7XG4gICAgcmVzdWx0ID0gY29tbW9uLnJlcGVhdCgnICcsIG9wdGlvbnMuaW5kZW50KSArIHBhZFN0YXJ0KChtYXJrLmxpbmUgLSBpICsgMSkudG9TdHJpbmcoKSwgbGluZU5vTGVuZ3RoKSArXG4gICAgICAnIHwgJyArIGxpbmUuc3RyICsgJ1xcbicgKyByZXN1bHQ7XG4gIH1cblxuICBsaW5lID0gZ2V0TGluZShtYXJrLmJ1ZmZlciwgbGluZVN0YXJ0c1tmb3VuZExpbmVOb10sIGxpbmVFbmRzW2ZvdW5kTGluZU5vXSwgbWFyay5wb3NpdGlvbiwgbWF4TGluZUxlbmd0aCk7XG4gIHJlc3VsdCArPSBjb21tb24ucmVwZWF0KCcgJywgb3B0aW9ucy5pbmRlbnQpICsgcGFkU3RhcnQoKG1hcmsubGluZSArIDEpLnRvU3RyaW5nKCksIGxpbmVOb0xlbmd0aCkgK1xuICAgICcgfCAnICsgbGluZS5zdHIgKyAnXFxuJztcbiAgcmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJy0nLCBvcHRpb25zLmluZGVudCArIGxpbmVOb0xlbmd0aCArIDMgKyBsaW5lLnBvcykgKyAnXicgKyAnXFxuJztcblxuICBmb3IgKGkgPSAxOyBpIDw9IG9wdGlvbnMubGluZXNBZnRlcjsgaSsrKSB7XG4gICAgaWYgKGZvdW5kTGluZU5vICsgaSA+PSBsaW5lRW5kcy5sZW5ndGgpIGJyZWFrO1xuICAgIGxpbmUgPSBnZXRMaW5lKFxuICAgICAgbWFyay5idWZmZXIsXG4gICAgICBsaW5lU3RhcnRzW2ZvdW5kTGluZU5vICsgaV0sXG4gICAgICBsaW5lRW5kc1tmb3VuZExpbmVObyArIGldLFxuICAgICAgbWFyay5wb3NpdGlvbiAtIChsaW5lU3RhcnRzW2ZvdW5kTGluZU5vXSAtIGxpbmVTdGFydHNbZm91bmRMaW5lTm8gKyBpXSksXG4gICAgICBtYXhMaW5lTGVuZ3RoXG4gICAgKTtcbiAgICByZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnICcsIG9wdGlvbnMuaW5kZW50KSArIHBhZFN0YXJ0KChtYXJrLmxpbmUgKyBpICsgMSkudG9TdHJpbmcoKSwgbGluZU5vTGVuZ3RoKSArXG4gICAgICAnIHwgJyArIGxpbmUuc3RyICsgJ1xcbic7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0LnJlcGxhY2UoL1xcbiQvLCAnJyk7XG59XG5cblxudmFyIHNuaXBwZXQgPSBtYWtlU25pcHBldDtcblxudmFyIFRZUEVfQ09OU1RSVUNUT1JfT1BUSU9OUyA9IFtcbiAgJ2tpbmQnLFxuICAnbXVsdGknLFxuICAncmVzb2x2ZScsXG4gICdjb25zdHJ1Y3QnLFxuICAnaW5zdGFuY2VPZicsXG4gICdwcmVkaWNhdGUnLFxuICAncmVwcmVzZW50JyxcbiAgJ3JlcHJlc2VudE5hbWUnLFxuICAnZGVmYXVsdFN0eWxlJyxcbiAgJ3N0eWxlQWxpYXNlcydcbl07XG5cbnZhciBZQU1MX05PREVfS0lORFMgPSBbXG4gICdzY2FsYXInLFxuICAnc2VxdWVuY2UnLFxuICAnbWFwcGluZydcbl07XG5cbmZ1bmN0aW9uIGNvbXBpbGVTdHlsZUFsaWFzZXMobWFwKSB7XG4gIHZhciByZXN1bHQgPSB7fTtcblxuICBpZiAobWFwICE9PSBudWxsKSB7XG4gICAgT2JqZWN0LmtleXMobWFwKS5mb3JFYWNoKGZ1bmN0aW9uIChzdHlsZSkge1xuICAgICAgbWFwW3N0eWxlXS5mb3JFYWNoKGZ1bmN0aW9uIChhbGlhcykge1xuICAgICAgICByZXN1bHRbU3RyaW5nKGFsaWFzKV0gPSBzdHlsZTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gVHlwZSQxKHRhZywgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICBPYmplY3Qua2V5cyhvcHRpb25zKS5mb3JFYWNoKGZ1bmN0aW9uIChuYW1lKSB7XG4gICAgaWYgKFRZUEVfQ09OU1RSVUNUT1JfT1BUSU9OUy5pbmRleE9mKG5hbWUpID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignVW5rbm93biBvcHRpb24gXCInICsgbmFtZSArICdcIiBpcyBtZXQgaW4gZGVmaW5pdGlvbiBvZiBcIicgKyB0YWcgKyAnXCIgWUFNTCB0eXBlLicpO1xuICAgIH1cbiAgfSk7XG5cbiAgLy8gVE9ETzogQWRkIHRhZyBmb3JtYXQgY2hlY2suXG4gIHRoaXMub3B0aW9ucyAgICAgICA9IG9wdGlvbnM7IC8vIGtlZXAgb3JpZ2luYWwgb3B0aW9ucyBpbiBjYXNlIHVzZXIgd2FudHMgdG8gZXh0ZW5kIHRoaXMgdHlwZSBsYXRlclxuICB0aGlzLnRhZyAgICAgICAgICAgPSB0YWc7XG4gIHRoaXMua2luZCAgICAgICAgICA9IG9wdGlvbnNbJ2tpbmQnXSAgICAgICAgICB8fCBudWxsO1xuICB0aGlzLnJlc29sdmUgICAgICAgPSBvcHRpb25zWydyZXNvbHZlJ10gICAgICAgfHwgZnVuY3Rpb24gKCkgeyByZXR1cm4gdHJ1ZTsgfTtcbiAgdGhpcy5jb25zdHJ1Y3QgICAgID0gb3B0aW9uc1snY29uc3RydWN0J10gICAgIHx8IGZ1bmN0aW9uIChkYXRhKSB7IHJldHVybiBkYXRhOyB9O1xuICB0aGlzLmluc3RhbmNlT2YgICAgPSBvcHRpb25zWydpbnN0YW5jZU9mJ10gICAgfHwgbnVsbDtcbiAgdGhpcy5wcmVkaWNhdGUgICAgID0gb3B0aW9uc1sncHJlZGljYXRlJ10gICAgIHx8IG51bGw7XG4gIHRoaXMucmVwcmVzZW50ICAgICA9IG9wdGlvbnNbJ3JlcHJlc2VudCddICAgICB8fCBudWxsO1xuICB0aGlzLnJlcHJlc2VudE5hbWUgPSBvcHRpb25zWydyZXByZXNlbnROYW1lJ10gfHwgbnVsbDtcbiAgdGhpcy5kZWZhdWx0U3R5bGUgID0gb3B0aW9uc1snZGVmYXVsdFN0eWxlJ10gIHx8IG51bGw7XG4gIHRoaXMubXVsdGkgICAgICAgICA9IG9wdGlvbnNbJ211bHRpJ10gICAgICAgICB8fCBmYWxzZTtcbiAgdGhpcy5zdHlsZUFsaWFzZXMgID0gY29tcGlsZVN0eWxlQWxpYXNlcyhvcHRpb25zWydzdHlsZUFsaWFzZXMnXSB8fCBudWxsKTtcblxuICBpZiAoWUFNTF9OT0RFX0tJTkRTLmluZGV4T2YodGhpcy5raW5kKSA9PT0gLTEpIHtcbiAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdVbmtub3duIGtpbmQgXCInICsgdGhpcy5raW5kICsgJ1wiIGlzIHNwZWNpZmllZCBmb3IgXCInICsgdGFnICsgJ1wiIFlBTUwgdHlwZS4nKTtcbiAgfVxufVxuXG52YXIgdHlwZSA9IFR5cGUkMTtcblxuLyplc2xpbnQtZGlzYWJsZSBtYXgtbGVuKi9cblxuXG5cblxuXG5mdW5jdGlvbiBjb21waWxlTGlzdChzY2hlbWEsIG5hbWUpIHtcbiAgdmFyIHJlc3VsdCA9IFtdO1xuXG4gIHNjaGVtYVtuYW1lXS5mb3JFYWNoKGZ1bmN0aW9uIChjdXJyZW50VHlwZSkge1xuICAgIHZhciBuZXdJbmRleCA9IHJlc3VsdC5sZW5ndGg7XG5cbiAgICByZXN1bHQuZm9yRWFjaChmdW5jdGlvbiAocHJldmlvdXNUeXBlLCBwcmV2aW91c0luZGV4KSB7XG4gICAgICBpZiAocHJldmlvdXNUeXBlLnRhZyA9PT0gY3VycmVudFR5cGUudGFnICYmXG4gICAgICAgICAgcHJldmlvdXNUeXBlLmtpbmQgPT09IGN1cnJlbnRUeXBlLmtpbmQgJiZcbiAgICAgICAgICBwcmV2aW91c1R5cGUubXVsdGkgPT09IGN1cnJlbnRUeXBlLm11bHRpKSB7XG5cbiAgICAgICAgbmV3SW5kZXggPSBwcmV2aW91c0luZGV4O1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmVzdWx0W25ld0luZGV4XSA9IGN1cnJlbnRUeXBlO1xuICB9KTtcblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5cbmZ1bmN0aW9uIGNvbXBpbGVNYXAoLyogbGlzdHMuLi4gKi8pIHtcbiAgdmFyIHJlc3VsdCA9IHtcbiAgICAgICAgc2NhbGFyOiB7fSxcbiAgICAgICAgc2VxdWVuY2U6IHt9LFxuICAgICAgICBtYXBwaW5nOiB7fSxcbiAgICAgICAgZmFsbGJhY2s6IHt9LFxuICAgICAgICBtdWx0aToge1xuICAgICAgICAgIHNjYWxhcjogW10sXG4gICAgICAgICAgc2VxdWVuY2U6IFtdLFxuICAgICAgICAgIG1hcHBpbmc6IFtdLFxuICAgICAgICAgIGZhbGxiYWNrOiBbXVxuICAgICAgICB9XG4gICAgICB9LCBpbmRleCwgbGVuZ3RoO1xuXG4gIGZ1bmN0aW9uIGNvbGxlY3RUeXBlKHR5cGUpIHtcbiAgICBpZiAodHlwZS5tdWx0aSkge1xuICAgICAgcmVzdWx0Lm11bHRpW3R5cGUua2luZF0ucHVzaCh0eXBlKTtcbiAgICAgIHJlc3VsdC5tdWx0aVsnZmFsbGJhY2snXS5wdXNoKHR5cGUpO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXN1bHRbdHlwZS5raW5kXVt0eXBlLnRhZ10gPSByZXN1bHRbJ2ZhbGxiYWNrJ11bdHlwZS50YWddID0gdHlwZTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gYXJndW1lbnRzLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBhcmd1bWVudHNbaW5kZXhdLmZvckVhY2goY29sbGVjdFR5cGUpO1xuICB9XG4gIHJldHVybiByZXN1bHQ7XG59XG5cblxuZnVuY3Rpb24gU2NoZW1hJDEoZGVmaW5pdGlvbikge1xuICByZXR1cm4gdGhpcy5leHRlbmQoZGVmaW5pdGlvbik7XG59XG5cblxuU2NoZW1hJDEucHJvdG90eXBlLmV4dGVuZCA9IGZ1bmN0aW9uIGV4dGVuZChkZWZpbml0aW9uKSB7XG4gIHZhciBpbXBsaWNpdCA9IFtdO1xuICB2YXIgZXhwbGljaXQgPSBbXTtcblxuICBpZiAoZGVmaW5pdGlvbiBpbnN0YW5jZW9mIHR5cGUpIHtcbiAgICAvLyBTY2hlbWEuZXh0ZW5kKHR5cGUpXG4gICAgZXhwbGljaXQucHVzaChkZWZpbml0aW9uKTtcblxuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoZGVmaW5pdGlvbikpIHtcbiAgICAvLyBTY2hlbWEuZXh0ZW5kKFsgdHlwZTEsIHR5cGUyLCAuLi4gXSlcbiAgICBleHBsaWNpdCA9IGV4cGxpY2l0LmNvbmNhdChkZWZpbml0aW9uKTtcblxuICB9IGVsc2UgaWYgKGRlZmluaXRpb24gJiYgKEFycmF5LmlzQXJyYXkoZGVmaW5pdGlvbi5pbXBsaWNpdCkgfHwgQXJyYXkuaXNBcnJheShkZWZpbml0aW9uLmV4cGxpY2l0KSkpIHtcbiAgICAvLyBTY2hlbWEuZXh0ZW5kKHsgZXhwbGljaXQ6IFsgdHlwZTEsIHR5cGUyLCAuLi4gXSwgaW1wbGljaXQ6IFsgdHlwZTEsIHR5cGUyLCAuLi4gXSB9KVxuICAgIGlmIChkZWZpbml0aW9uLmltcGxpY2l0KSBpbXBsaWNpdCA9IGltcGxpY2l0LmNvbmNhdChkZWZpbml0aW9uLmltcGxpY2l0KTtcbiAgICBpZiAoZGVmaW5pdGlvbi5leHBsaWNpdCkgZXhwbGljaXQgPSBleHBsaWNpdC5jb25jYXQoZGVmaW5pdGlvbi5leHBsaWNpdCk7XG5cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdTY2hlbWEuZXh0ZW5kIGFyZ3VtZW50IHNob3VsZCBiZSBhIFR5cGUsIFsgVHlwZSBdLCAnICtcbiAgICAgICdvciBhIHNjaGVtYSBkZWZpbml0aW9uICh7IGltcGxpY2l0OiBbLi4uXSwgZXhwbGljaXQ6IFsuLi5dIH0pJyk7XG4gIH1cblxuICBpbXBsaWNpdC5mb3JFYWNoKGZ1bmN0aW9uICh0eXBlJDEpIHtcbiAgICBpZiAoISh0eXBlJDEgaW5zdGFuY2VvZiB0eXBlKSkge1xuICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignU3BlY2lmaWVkIGxpc3Qgb2YgWUFNTCB0eXBlcyAob3IgYSBzaW5nbGUgVHlwZSBvYmplY3QpIGNvbnRhaW5zIGEgbm9uLVR5cGUgb2JqZWN0LicpO1xuICAgIH1cblxuICAgIGlmICh0eXBlJDEubG9hZEtpbmQgJiYgdHlwZSQxLmxvYWRLaW5kICE9PSAnc2NhbGFyJykge1xuICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignVGhlcmUgaXMgYSBub24tc2NhbGFyIHR5cGUgaW4gdGhlIGltcGxpY2l0IGxpc3Qgb2YgYSBzY2hlbWEuIEltcGxpY2l0IHJlc29sdmluZyBvZiBzdWNoIHR5cGVzIGlzIG5vdCBzdXBwb3J0ZWQuJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGUkMS5tdWx0aSkge1xuICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignVGhlcmUgaXMgYSBtdWx0aSB0eXBlIGluIHRoZSBpbXBsaWNpdCBsaXN0IG9mIGEgc2NoZW1hLiBNdWx0aSB0YWdzIGNhbiBvbmx5IGJlIGxpc3RlZCBhcyBleHBsaWNpdC4nKTtcbiAgICB9XG4gIH0pO1xuXG4gIGV4cGxpY2l0LmZvckVhY2goZnVuY3Rpb24gKHR5cGUkMSkge1xuICAgIGlmICghKHR5cGUkMSBpbnN0YW5jZW9mIHR5cGUpKSB7XG4gICAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdTcGVjaWZpZWQgbGlzdCBvZiBZQU1MIHR5cGVzIChvciBhIHNpbmdsZSBUeXBlIG9iamVjdCkgY29udGFpbnMgYSBub24tVHlwZSBvYmplY3QuJyk7XG4gICAgfVxuICB9KTtcblxuICB2YXIgcmVzdWx0ID0gT2JqZWN0LmNyZWF0ZShTY2hlbWEkMS5wcm90b3R5cGUpO1xuXG4gIHJlc3VsdC5pbXBsaWNpdCA9ICh0aGlzLmltcGxpY2l0IHx8IFtdKS5jb25jYXQoaW1wbGljaXQpO1xuICByZXN1bHQuZXhwbGljaXQgPSAodGhpcy5leHBsaWNpdCB8fCBbXSkuY29uY2F0KGV4cGxpY2l0KTtcblxuICByZXN1bHQuY29tcGlsZWRJbXBsaWNpdCA9IGNvbXBpbGVMaXN0KHJlc3VsdCwgJ2ltcGxpY2l0Jyk7XG4gIHJlc3VsdC5jb21waWxlZEV4cGxpY2l0ID0gY29tcGlsZUxpc3QocmVzdWx0LCAnZXhwbGljaXQnKTtcbiAgcmVzdWx0LmNvbXBpbGVkVHlwZU1hcCAgPSBjb21waWxlTWFwKHJlc3VsdC5jb21waWxlZEltcGxpY2l0LCByZXN1bHQuY29tcGlsZWRFeHBsaWNpdCk7XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn07XG5cblxudmFyIHNjaGVtYSA9IFNjaGVtYSQxO1xuXG52YXIgc3RyID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnN0cicsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDogJyc7IH1cbn0pO1xuXG52YXIgc2VxID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnNlcScsIHtcbiAga2luZDogJ3NlcXVlbmNlJyxcbiAgY29uc3RydWN0OiBmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gZGF0YSAhPT0gbnVsbCA/IGRhdGEgOiBbXTsgfVxufSk7XG5cbnZhciBtYXAgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6bWFwJywge1xuICBraW5kOiAnbWFwcGluZycsXG4gIGNvbnN0cnVjdDogZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDoge307IH1cbn0pO1xuXG52YXIgZmFpbHNhZmUgPSBuZXcgc2NoZW1hKHtcbiAgZXhwbGljaXQ6IFtcbiAgICBzdHIsXG4gICAgc2VxLFxuICAgIG1hcFxuICBdXG59KTtcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxOdWxsKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiB0cnVlO1xuXG4gIHZhciBtYXggPSBkYXRhLmxlbmd0aDtcblxuICByZXR1cm4gKG1heCA9PT0gMSAmJiBkYXRhID09PSAnficpIHx8XG4gICAgICAgICAobWF4ID09PSA0ICYmIChkYXRhID09PSAnbnVsbCcgfHwgZGF0YSA9PT0gJ051bGwnIHx8IGRhdGEgPT09ICdOVUxMJykpO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sTnVsbCgpIHtcbiAgcmV0dXJuIG51bGw7XG59XG5cbmZ1bmN0aW9uIGlzTnVsbChvYmplY3QpIHtcbiAgcmV0dXJuIG9iamVjdCA9PT0gbnVsbDtcbn1cblxudmFyIF9udWxsID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOm51bGwnLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbE51bGwsXG4gIGNvbnN0cnVjdDogY29uc3RydWN0WWFtbE51bGwsXG4gIHByZWRpY2F0ZTogaXNOdWxsLFxuICByZXByZXNlbnQ6IHtcbiAgICBjYW5vbmljYWw6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICd+JzsgICAgfSxcbiAgICBsb3dlcmNhc2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICdudWxsJzsgfSxcbiAgICB1cHBlcmNhc2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICdOVUxMJzsgfSxcbiAgICBjYW1lbGNhc2U6IGZ1bmN0aW9uICgpIHsgcmV0dXJuICdOdWxsJzsgfSxcbiAgICBlbXB0eTogICAgIGZ1bmN0aW9uICgpIHsgcmV0dXJuICcnOyAgICAgfVxuICB9LFxuICBkZWZhdWx0U3R5bGU6ICdsb3dlcmNhc2UnXG59KTtcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxCb29sZWFuKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICB2YXIgbWF4ID0gZGF0YS5sZW5ndGg7XG5cbiAgcmV0dXJuIChtYXggPT09IDQgJiYgKGRhdGEgPT09ICd0cnVlJyB8fCBkYXRhID09PSAnVHJ1ZScgfHwgZGF0YSA9PT0gJ1RSVUUnKSkgfHxcbiAgICAgICAgIChtYXggPT09IDUgJiYgKGRhdGEgPT09ICdmYWxzZScgfHwgZGF0YSA9PT0gJ0ZhbHNlJyB8fCBkYXRhID09PSAnRkFMU0UnKSk7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxCb29sZWFuKGRhdGEpIHtcbiAgcmV0dXJuIGRhdGEgPT09ICd0cnVlJyB8fFxuICAgICAgICAgZGF0YSA9PT0gJ1RydWUnIHx8XG4gICAgICAgICBkYXRhID09PSAnVFJVRSc7XG59XG5cbmZ1bmN0aW9uIGlzQm9vbGVhbihvYmplY3QpIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09PSAnW29iamVjdCBCb29sZWFuXSc7XG59XG5cbnZhciBib29sID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOmJvb2wnLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbEJvb2xlYW4sXG4gIGNvbnN0cnVjdDogY29uc3RydWN0WWFtbEJvb2xlYW4sXG4gIHByZWRpY2F0ZTogaXNCb29sZWFuLFxuICByZXByZXNlbnQ6IHtcbiAgICBsb3dlcmNhc2U6IGZ1bmN0aW9uIChvYmplY3QpIHsgcmV0dXJuIG9iamVjdCA/ICd0cnVlJyA6ICdmYWxzZSc7IH0sXG4gICAgdXBwZXJjYXNlOiBmdW5jdGlvbiAob2JqZWN0KSB7IHJldHVybiBvYmplY3QgPyAnVFJVRScgOiAnRkFMU0UnOyB9LFxuICAgIGNhbWVsY2FzZTogZnVuY3Rpb24gKG9iamVjdCkgeyByZXR1cm4gb2JqZWN0ID8gJ1RydWUnIDogJ0ZhbHNlJzsgfVxuICB9LFxuICBkZWZhdWx0U3R5bGU6ICdsb3dlcmNhc2UnXG59KTtcblxuZnVuY3Rpb24gaXNIZXhDb2RlKGMpIHtcbiAgcmV0dXJuICgoMHgzMC8qIDAgKi8gPD0gYykgJiYgKGMgPD0gMHgzOS8qIDkgKi8pKSB8fFxuICAgICAgICAgKCgweDQxLyogQSAqLyA8PSBjKSAmJiAoYyA8PSAweDQ2LyogRiAqLykpIHx8XG4gICAgICAgICAoKDB4NjEvKiBhICovIDw9IGMpICYmIChjIDw9IDB4NjYvKiBmICovKSk7XG59XG5cbmZ1bmN0aW9uIGlzT2N0Q29kZShjKSB7XG4gIHJldHVybiAoKDB4MzAvKiAwICovIDw9IGMpICYmIChjIDw9IDB4MzcvKiA3ICovKSk7XG59XG5cbmZ1bmN0aW9uIGlzRGVjQ29kZShjKSB7XG4gIHJldHVybiAoKDB4MzAvKiAwICovIDw9IGMpICYmIChjIDw9IDB4MzkvKiA5ICovKSk7XG59XG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sSW50ZWdlcihkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG5cbiAgdmFyIG1heCA9IGRhdGEubGVuZ3RoLFxuICAgICAgaW5kZXggPSAwLFxuICAgICAgaGFzRGlnaXRzID0gZmFsc2UsXG4gICAgICBjaDtcblxuICBpZiAoIW1heCkgcmV0dXJuIGZhbHNlO1xuXG4gIGNoID0gZGF0YVtpbmRleF07XG5cbiAgLy8gc2lnblxuICBpZiAoY2ggPT09ICctJyB8fCBjaCA9PT0gJysnKSB7XG4gICAgY2ggPSBkYXRhWysraW5kZXhdO1xuICB9XG5cbiAgaWYgKGNoID09PSAnMCcpIHtcbiAgICAvLyAwXG4gICAgaWYgKGluZGV4ICsgMSA9PT0gbWF4KSByZXR1cm4gdHJ1ZTtcbiAgICBjaCA9IGRhdGFbKytpbmRleF07XG5cbiAgICAvLyBiYXNlIDIsIGJhc2UgOCwgYmFzZSAxNlxuXG4gICAgaWYgKGNoID09PSAnYicpIHtcbiAgICAgIC8vIGJhc2UgMlxuICAgICAgaW5kZXgrKztcblxuICAgICAgZm9yICg7IGluZGV4IDwgbWF4OyBpbmRleCsrKSB7XG4gICAgICAgIGNoID0gZGF0YVtpbmRleF07XG4gICAgICAgIGlmIChjaCA9PT0gJ18nKSBjb250aW51ZTtcbiAgICAgICAgaWYgKGNoICE9PSAnMCcgJiYgY2ggIT09ICcxJykgcmV0dXJuIGZhbHNlO1xuICAgICAgICBoYXNEaWdpdHMgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGhhc0RpZ2l0cyAmJiBjaCAhPT0gJ18nO1xuICAgIH1cblxuXG4gICAgaWYgKGNoID09PSAneCcpIHtcbiAgICAgIC8vIGJhc2UgMTZcbiAgICAgIGluZGV4Kys7XG5cbiAgICAgIGZvciAoOyBpbmRleCA8IG1heDsgaW5kZXgrKykge1xuICAgICAgICBjaCA9IGRhdGFbaW5kZXhdO1xuICAgICAgICBpZiAoY2ggPT09ICdfJykgY29udGludWU7XG4gICAgICAgIGlmICghaXNIZXhDb2RlKGRhdGEuY2hhckNvZGVBdChpbmRleCkpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGhhc0RpZ2l0cyA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gaGFzRGlnaXRzICYmIGNoICE9PSAnXyc7XG4gICAgfVxuXG5cbiAgICBpZiAoY2ggPT09ICdvJykge1xuICAgICAgLy8gYmFzZSA4XG4gICAgICBpbmRleCsrO1xuXG4gICAgICBmb3IgKDsgaW5kZXggPCBtYXg7IGluZGV4KyspIHtcbiAgICAgICAgY2ggPSBkYXRhW2luZGV4XTtcbiAgICAgICAgaWYgKGNoID09PSAnXycpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoIWlzT2N0Q29kZShkYXRhLmNoYXJDb2RlQXQoaW5kZXgpKSkgcmV0dXJuIGZhbHNlO1xuICAgICAgICBoYXNEaWdpdHMgPSB0cnVlO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGhhc0RpZ2l0cyAmJiBjaCAhPT0gJ18nO1xuICAgIH1cbiAgfVxuXG4gIC8vIGJhc2UgMTAgKGV4Y2VwdCAwKVxuXG4gIC8vIHZhbHVlIHNob3VsZCBub3Qgc3RhcnQgd2l0aCBgX2A7XG4gIGlmIChjaCA9PT0gJ18nKSByZXR1cm4gZmFsc2U7XG5cbiAgZm9yICg7IGluZGV4IDwgbWF4OyBpbmRleCsrKSB7XG4gICAgY2ggPSBkYXRhW2luZGV4XTtcbiAgICBpZiAoY2ggPT09ICdfJykgY29udGludWU7XG4gICAgaWYgKCFpc0RlY0NvZGUoZGF0YS5jaGFyQ29kZUF0KGluZGV4KSkpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gICAgaGFzRGlnaXRzID0gdHJ1ZTtcbiAgfVxuXG4gIC8vIFNob3VsZCBoYXZlIGRpZ2l0cyBhbmQgc2hvdWxkIG5vdCBlbmQgd2l0aCBgX2BcbiAgaWYgKCFoYXNEaWdpdHMgfHwgY2ggPT09ICdfJykgcmV0dXJuIGZhbHNlO1xuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sSW50ZWdlcihkYXRhKSB7XG4gIHZhciB2YWx1ZSA9IGRhdGEsIHNpZ24gPSAxLCBjaDtcblxuICBpZiAodmFsdWUuaW5kZXhPZignXycpICE9PSAtMSkge1xuICAgIHZhbHVlID0gdmFsdWUucmVwbGFjZSgvXy9nLCAnJyk7XG4gIH1cblxuICBjaCA9IHZhbHVlWzBdO1xuXG4gIGlmIChjaCA9PT0gJy0nIHx8IGNoID09PSAnKycpIHtcbiAgICBpZiAoY2ggPT09ICctJykgc2lnbiA9IC0xO1xuICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSk7XG4gICAgY2ggPSB2YWx1ZVswXTtcbiAgfVxuXG4gIGlmICh2YWx1ZSA9PT0gJzAnKSByZXR1cm4gMDtcblxuICBpZiAoY2ggPT09ICcwJykge1xuICAgIGlmICh2YWx1ZVsxXSA9PT0gJ2InKSByZXR1cm4gc2lnbiAqIHBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCAyKTtcbiAgICBpZiAodmFsdWVbMV0gPT09ICd4JykgcmV0dXJuIHNpZ24gKiBwYXJzZUludCh2YWx1ZS5zbGljZSgyKSwgMTYpO1xuICAgIGlmICh2YWx1ZVsxXSA9PT0gJ28nKSByZXR1cm4gc2lnbiAqIHBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCA4KTtcbiAgfVxuXG4gIHJldHVybiBzaWduICogcGFyc2VJbnQodmFsdWUsIDEwKTtcbn1cblxuZnVuY3Rpb24gaXNJbnRlZ2VyKG9iamVjdCkge1xuICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpKSA9PT0gJ1tvYmplY3QgTnVtYmVyXScgJiZcbiAgICAgICAgIChvYmplY3QgJSAxID09PSAwICYmICFjb21tb24uaXNOZWdhdGl2ZVplcm8ob2JqZWN0KSk7XG59XG5cbnZhciBpbnQgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6aW50Jywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxJbnRlZ2VyLFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxJbnRlZ2VyLFxuICBwcmVkaWNhdGU6IGlzSW50ZWdlcixcbiAgcmVwcmVzZW50OiB7XG4gICAgYmluYXJ5OiAgICAgIGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiA+PSAwID8gJzBiJyArIG9iai50b1N0cmluZygyKSA6ICctMGInICsgb2JqLnRvU3RyaW5nKDIpLnNsaWNlKDEpOyB9LFxuICAgIG9jdGFsOiAgICAgICBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogPj0gMCA/ICcwbycgICsgb2JqLnRvU3RyaW5nKDgpIDogJy0wbycgICsgb2JqLnRvU3RyaW5nKDgpLnNsaWNlKDEpOyB9LFxuICAgIGRlY2ltYWw6ICAgICBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmoudG9TdHJpbmcoMTApOyB9LFxuICAgIC8qIGVzbGludC1kaXNhYmxlIG1heC1sZW4gKi9cbiAgICBoZXhhZGVjaW1hbDogZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqID49IDAgPyAnMHgnICsgb2JqLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpIDogICctMHgnICsgb2JqLnRvU3RyaW5nKDE2KS50b1VwcGVyQ2FzZSgpLnNsaWNlKDEpOyB9XG4gIH0sXG4gIGRlZmF1bHRTdHlsZTogJ2RlY2ltYWwnLFxuICBzdHlsZUFsaWFzZXM6IHtcbiAgICBiaW5hcnk6ICAgICAgWyAyLCAgJ2JpbicgXSxcbiAgICBvY3RhbDogICAgICAgWyA4LCAgJ29jdCcgXSxcbiAgICBkZWNpbWFsOiAgICAgWyAxMCwgJ2RlYycgXSxcbiAgICBoZXhhZGVjaW1hbDogWyAxNiwgJ2hleCcgXVxuICB9XG59KTtcblxudmFyIFlBTUxfRkxPQVRfUEFUVEVSTiA9IG5ldyBSZWdFeHAoXG4gIC8vIDIuNWU0LCAyLjUgYW5kIGludGVnZXJzXG4gICdeKD86Wy0rXT8oPzpbMC05XVswLTlfXSopKD86XFxcXC5bMC05X10qKT8oPzpbZUVdWy0rXT9bMC05XSspPycgK1xuICAvLyAuMmU0LCAuMlxuICAvLyBzcGVjaWFsIGNhc2UsIHNlZW1zIG5vdCBmcm9tIHNwZWNcbiAgJ3xcXFxcLlswLTlfXSsoPzpbZUVdWy0rXT9bMC05XSspPycgK1xuICAvLyAuaW5mXG4gICd8Wy0rXT9cXFxcLig/OmluZnxJbmZ8SU5GKScgK1xuICAvLyAubmFuXG4gICd8XFxcXC4oPzpuYW58TmFOfE5BTikpJCcpO1xuXG5mdW5jdGlvbiByZXNvbHZlWWFtbEZsb2F0KGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICBpZiAoIVlBTUxfRkxPQVRfUEFUVEVSTi50ZXN0KGRhdGEpIHx8XG4gICAgICAvLyBRdWljayBoYWNrIHRvIG5vdCBhbGxvdyBpbnRlZ2VycyBlbmQgd2l0aCBgX2BcbiAgICAgIC8vIFByb2JhYmx5IHNob3VsZCB1cGRhdGUgcmVnZXhwICYgY2hlY2sgc3BlZWRcbiAgICAgIGRhdGFbZGF0YS5sZW5ndGggLSAxXSA9PT0gJ18nKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxGbG9hdChkYXRhKSB7XG4gIHZhciB2YWx1ZSwgc2lnbjtcblxuICB2YWx1ZSAgPSBkYXRhLnJlcGxhY2UoL18vZywgJycpLnRvTG93ZXJDYXNlKCk7XG4gIHNpZ24gICA9IHZhbHVlWzBdID09PSAnLScgPyAtMSA6IDE7XG5cbiAgaWYgKCcrLScuaW5kZXhPZih2YWx1ZVswXSkgPj0gMCkge1xuICAgIHZhbHVlID0gdmFsdWUuc2xpY2UoMSk7XG4gIH1cblxuICBpZiAodmFsdWUgPT09ICcuaW5mJykge1xuICAgIHJldHVybiAoc2lnbiA9PT0gMSkgPyBOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgOiBOdW1iZXIuTkVHQVRJVkVfSU5GSU5JVFk7XG5cbiAgfSBlbHNlIGlmICh2YWx1ZSA9PT0gJy5uYW4nKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuICByZXR1cm4gc2lnbiAqIHBhcnNlRmxvYXQodmFsdWUsIDEwKTtcbn1cblxuXG52YXIgU0NJRU5USUZJQ19XSVRIT1VUX0RPVCA9IC9eWy0rXT9bMC05XStlLztcblxuZnVuY3Rpb24gcmVwcmVzZW50WWFtbEZsb2F0KG9iamVjdCwgc3R5bGUpIHtcbiAgdmFyIHJlcztcblxuICBpZiAoaXNOYU4ob2JqZWN0KSkge1xuICAgIHN3aXRjaCAoc3R5bGUpIHtcbiAgICAgIGNhc2UgJ2xvd2VyY2FzZSc6IHJldHVybiAnLm5hbic7XG4gICAgICBjYXNlICd1cHBlcmNhc2UnOiByZXR1cm4gJy5OQU4nO1xuICAgICAgY2FzZSAnY2FtZWxjYXNlJzogcmV0dXJuICcuTmFOJztcbiAgICB9XG4gIH0gZWxzZSBpZiAoTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZID09PSBvYmplY3QpIHtcbiAgICBzd2l0Y2ggKHN0eWxlKSB7XG4gICAgICBjYXNlICdsb3dlcmNhc2UnOiByZXR1cm4gJy5pbmYnO1xuICAgICAgY2FzZSAndXBwZXJjYXNlJzogcmV0dXJuICcuSU5GJztcbiAgICAgIGNhc2UgJ2NhbWVsY2FzZSc6IHJldHVybiAnLkluZic7XG4gICAgfVxuICB9IGVsc2UgaWYgKE51bWJlci5ORUdBVElWRV9JTkZJTklUWSA9PT0gb2JqZWN0KSB7XG4gICAgc3dpdGNoIChzdHlsZSkge1xuICAgICAgY2FzZSAnbG93ZXJjYXNlJzogcmV0dXJuICctLmluZic7XG4gICAgICBjYXNlICd1cHBlcmNhc2UnOiByZXR1cm4gJy0uSU5GJztcbiAgICAgIGNhc2UgJ2NhbWVsY2FzZSc6IHJldHVybiAnLS5JbmYnO1xuICAgIH1cbiAgfSBlbHNlIGlmIChjb21tb24uaXNOZWdhdGl2ZVplcm8ob2JqZWN0KSkge1xuICAgIHJldHVybiAnLTAuMCc7XG4gIH1cblxuICByZXMgPSBvYmplY3QudG9TdHJpbmcoMTApO1xuXG4gIC8vIEpTIHN0cmluZ2lmaWVyIGNhbiBidWlsZCBzY2llbnRpZmljIGZvcm1hdCB3aXRob3V0IGRvdHM6IDVlLTEwMCxcbiAgLy8gd2hpbGUgWUFNTCByZXF1cmVzIGRvdDogNS5lLTEwMC4gRml4IGl0IHdpdGggc2ltcGxlIGhhY2tcblxuICByZXR1cm4gU0NJRU5USUZJQ19XSVRIT1VUX0RPVC50ZXN0KHJlcykgPyByZXMucmVwbGFjZSgnZScsICcuZScpIDogcmVzO1xufVxuXG5mdW5jdGlvbiBpc0Zsb2F0KG9iamVjdCkge1xuICByZXR1cm4gKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmplY3QpID09PSAnW29iamVjdCBOdW1iZXJdJykgJiZcbiAgICAgICAgIChvYmplY3QgJSAxICE9PSAwIHx8IGNvbW1vbi5pc05lZ2F0aXZlWmVybyhvYmplY3QpKTtcbn1cblxudmFyIGZsb2F0ID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOmZsb2F0Jywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxGbG9hdCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sRmxvYXQsXG4gIHByZWRpY2F0ZTogaXNGbG9hdCxcbiAgcmVwcmVzZW50OiByZXByZXNlbnRZYW1sRmxvYXQsXG4gIGRlZmF1bHRTdHlsZTogJ2xvd2VyY2FzZSdcbn0pO1xuXG52YXIganNvbiA9IGZhaWxzYWZlLmV4dGVuZCh7XG4gIGltcGxpY2l0OiBbXG4gICAgX251bGwsXG4gICAgYm9vbCxcbiAgICBpbnQsXG4gICAgZmxvYXRcbiAgXVxufSk7XG5cbnZhciBjb3JlID0ganNvbjtcblxudmFyIFlBTUxfREFURV9SRUdFWFAgPSBuZXcgUmVnRXhwKFxuICAnXihbMC05XVswLTldWzAtOV1bMC05XSknICAgICAgICAgICsgLy8gWzFdIHllYXJcbiAgJy0oWzAtOV1bMC05XSknICAgICAgICAgICAgICAgICAgICArIC8vIFsyXSBtb250aFxuICAnLShbMC05XVswLTldKSQnKTsgICAgICAgICAgICAgICAgICAgLy8gWzNdIGRheVxuXG52YXIgWUFNTF9USU1FU1RBTVBfUkVHRVhQID0gbmV3IFJlZ0V4cChcbiAgJ14oWzAtOV1bMC05XVswLTldWzAtOV0pJyAgICAgICAgICArIC8vIFsxXSB5ZWFyXG4gICctKFswLTldWzAtOV0/KScgICAgICAgICAgICAgICAgICAgKyAvLyBbMl0gbW9udGhcbiAgJy0oWzAtOV1bMC05XT8pJyAgICAgICAgICAgICAgICAgICArIC8vIFszXSBkYXlcbiAgJyg/OltUdF18WyBcXFxcdF0rKScgICAgICAgICAgICAgICAgICsgLy8gLi4uXG4gICcoWzAtOV1bMC05XT8pJyAgICAgICAgICAgICAgICAgICAgKyAvLyBbNF0gaG91clxuICAnOihbMC05XVswLTldKScgICAgICAgICAgICAgICAgICAgICsgLy8gWzVdIG1pbnV0ZVxuICAnOihbMC05XVswLTldKScgICAgICAgICAgICAgICAgICAgICsgLy8gWzZdIHNlY29uZFxuICAnKD86XFxcXC4oWzAtOV0qKSk/JyAgICAgICAgICAgICAgICAgKyAvLyBbN10gZnJhY3Rpb25cbiAgJyg/OlsgXFxcXHRdKihafChbLStdKShbMC05XVswLTldPyknICsgLy8gWzhdIHR6IFs5XSB0el9zaWduIFsxMF0gdHpfaG91clxuICAnKD86OihbMC05XVswLTldKSk/KSk/JCcpOyAgICAgICAgICAgLy8gWzExXSB0el9taW51dGVcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxUaW1lc3RhbXAoZGF0YSkge1xuICBpZiAoZGF0YSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICBpZiAoWUFNTF9EQVRFX1JFR0VYUC5leGVjKGRhdGEpICE9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKFlBTUxfVElNRVNUQU1QX1JFR0VYUC5leGVjKGRhdGEpICE9PSBudWxsKSByZXR1cm4gdHJ1ZTtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sVGltZXN0YW1wKGRhdGEpIHtcbiAgdmFyIG1hdGNoLCB5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgZnJhY3Rpb24gPSAwLFxuICAgICAgZGVsdGEgPSBudWxsLCB0el9ob3VyLCB0el9taW51dGUsIGRhdGU7XG5cbiAgbWF0Y2ggPSBZQU1MX0RBVEVfUkVHRVhQLmV4ZWMoZGF0YSk7XG4gIGlmIChtYXRjaCA9PT0gbnVsbCkgbWF0Y2ggPSBZQU1MX1RJTUVTVEFNUF9SRUdFWFAuZXhlYyhkYXRhKTtcblxuICBpZiAobWF0Y2ggPT09IG51bGwpIHRocm93IG5ldyBFcnJvcignRGF0ZSByZXNvbHZlIGVycm9yJyk7XG5cbiAgLy8gbWF0Y2g6IFsxXSB5ZWFyIFsyXSBtb250aCBbM10gZGF5XG5cbiAgeWVhciA9ICsobWF0Y2hbMV0pO1xuICBtb250aCA9ICsobWF0Y2hbMl0pIC0gMTsgLy8gSlMgbW9udGggc3RhcnRzIHdpdGggMFxuICBkYXkgPSArKG1hdGNoWzNdKTtcblxuICBpZiAoIW1hdGNoWzRdKSB7IC8vIG5vIGhvdXJcbiAgICByZXR1cm4gbmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbW9udGgsIGRheSkpO1xuICB9XG5cbiAgLy8gbWF0Y2g6IFs0XSBob3VyIFs1XSBtaW51dGUgWzZdIHNlY29uZCBbN10gZnJhY3Rpb25cblxuICBob3VyID0gKyhtYXRjaFs0XSk7XG4gIG1pbnV0ZSA9ICsobWF0Y2hbNV0pO1xuICBzZWNvbmQgPSArKG1hdGNoWzZdKTtcblxuICBpZiAobWF0Y2hbN10pIHtcbiAgICBmcmFjdGlvbiA9IG1hdGNoWzddLnNsaWNlKDAsIDMpO1xuICAgIHdoaWxlIChmcmFjdGlvbi5sZW5ndGggPCAzKSB7IC8vIG1pbGxpLXNlY29uZHNcbiAgICAgIGZyYWN0aW9uICs9ICcwJztcbiAgICB9XG4gICAgZnJhY3Rpb24gPSArZnJhY3Rpb247XG4gIH1cblxuICAvLyBtYXRjaDogWzhdIHR6IFs5XSB0el9zaWduIFsxMF0gdHpfaG91ciBbMTFdIHR6X21pbnV0ZVxuXG4gIGlmIChtYXRjaFs5XSkge1xuICAgIHR6X2hvdXIgPSArKG1hdGNoWzEwXSk7XG4gICAgdHpfbWludXRlID0gKyhtYXRjaFsxMV0gfHwgMCk7XG4gICAgZGVsdGEgPSAodHpfaG91ciAqIDYwICsgdHpfbWludXRlKSAqIDYwMDAwOyAvLyBkZWx0YSBpbiBtaWxpLXNlY29uZHNcbiAgICBpZiAobWF0Y2hbOV0gPT09ICctJykgZGVsdGEgPSAtZGVsdGE7XG4gIH1cblxuICBkYXRlID0gbmV3IERhdGUoRGF0ZS5VVEMoeWVhciwgbW9udGgsIGRheSwgaG91ciwgbWludXRlLCBzZWNvbmQsIGZyYWN0aW9uKSk7XG5cbiAgaWYgKGRlbHRhKSBkYXRlLnNldFRpbWUoZGF0ZS5nZXRUaW1lKCkgLSBkZWx0YSk7XG5cbiAgcmV0dXJuIGRhdGU7XG59XG5cbmZ1bmN0aW9uIHJlcHJlc2VudFlhbWxUaW1lc3RhbXAob2JqZWN0IC8qLCBzdHlsZSovKSB7XG4gIHJldHVybiBvYmplY3QudG9JU09TdHJpbmcoKTtcbn1cblxudmFyIHRpbWVzdGFtcCA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjp0aW1lc3RhbXAnLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbFRpbWVzdGFtcCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sVGltZXN0YW1wLFxuICBpbnN0YW5jZU9mOiBEYXRlLFxuICByZXByZXNlbnQ6IHJlcHJlc2VudFlhbWxUaW1lc3RhbXBcbn0pO1xuXG5mdW5jdGlvbiByZXNvbHZlWWFtbE1lcmdlKGRhdGEpIHtcbiAgcmV0dXJuIGRhdGEgPT09ICc8PCcgfHwgZGF0YSA9PT0gbnVsbDtcbn1cblxudmFyIG1lcmdlID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOm1lcmdlJywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxNZXJnZVxufSk7XG5cbi8qZXNsaW50LWRpc2FibGUgbm8tYml0d2lzZSovXG5cblxuXG5cblxuLy8gWyA2NCwgNjUsIDY2IF0gLT4gWyBwYWRkaW5nLCBDUiwgTEYgXVxudmFyIEJBU0U2NF9NQVAgPSAnQUJDREVGR0hJSktMTU5PUFFSU1RVVldYWVphYmNkZWZnaGlqa2xtbm9wcXJzdHV2d3h5ejAxMjM0NTY3ODkrLz1cXG5cXHInO1xuXG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sQmluYXJ5KGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICB2YXIgY29kZSwgaWR4LCBiaXRsZW4gPSAwLCBtYXggPSBkYXRhLmxlbmd0aCwgbWFwID0gQkFTRTY0X01BUDtcblxuICAvLyBDb252ZXJ0IG9uZSBieSBvbmUuXG4gIGZvciAoaWR4ID0gMDsgaWR4IDwgbWF4OyBpZHgrKykge1xuICAgIGNvZGUgPSBtYXAuaW5kZXhPZihkYXRhLmNoYXJBdChpZHgpKTtcblxuICAgIC8vIFNraXAgQ1IvTEZcbiAgICBpZiAoY29kZSA+IDY0KSBjb250aW51ZTtcblxuICAgIC8vIEZhaWwgb24gaWxsZWdhbCBjaGFyYWN0ZXJzXG4gICAgaWYgKGNvZGUgPCAwKSByZXR1cm4gZmFsc2U7XG5cbiAgICBiaXRsZW4gKz0gNjtcbiAgfVxuXG4gIC8vIElmIHRoZXJlIGFyZSBhbnkgYml0cyBsZWZ0LCBzb3VyY2Ugd2FzIGNvcnJ1cHRlZFxuICByZXR1cm4gKGJpdGxlbiAlIDgpID09PSAwO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sQmluYXJ5KGRhdGEpIHtcbiAgdmFyIGlkeCwgdGFpbGJpdHMsXG4gICAgICBpbnB1dCA9IGRhdGEucmVwbGFjZSgvW1xcclxcbj1dL2csICcnKSwgLy8gcmVtb3ZlIENSL0xGICYgcGFkZGluZyB0byBzaW1wbGlmeSBzY2FuXG4gICAgICBtYXggPSBpbnB1dC5sZW5ndGgsXG4gICAgICBtYXAgPSBCQVNFNjRfTUFQLFxuICAgICAgYml0cyA9IDAsXG4gICAgICByZXN1bHQgPSBbXTtcblxuICAvLyBDb2xsZWN0IGJ5IDYqNCBiaXRzICgzIGJ5dGVzKVxuXG4gIGZvciAoaWR4ID0gMDsgaWR4IDwgbWF4OyBpZHgrKykge1xuICAgIGlmICgoaWR4ICUgNCA9PT0gMCkgJiYgaWR4KSB7XG4gICAgICByZXN1bHQucHVzaCgoYml0cyA+PiAxNikgJiAweEZGKTtcbiAgICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDgpICYgMHhGRik7XG4gICAgICByZXN1bHQucHVzaChiaXRzICYgMHhGRik7XG4gICAgfVxuXG4gICAgYml0cyA9IChiaXRzIDw8IDYpIHwgbWFwLmluZGV4T2YoaW5wdXQuY2hhckF0KGlkeCkpO1xuICB9XG5cbiAgLy8gRHVtcCB0YWlsXG5cbiAgdGFpbGJpdHMgPSAobWF4ICUgNCkgKiA2O1xuXG4gIGlmICh0YWlsYml0cyA9PT0gMCkge1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDE2KSAmIDB4RkYpO1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDgpICYgMHhGRik7XG4gICAgcmVzdWx0LnB1c2goYml0cyAmIDB4RkYpO1xuICB9IGVsc2UgaWYgKHRhaWxiaXRzID09PSAxOCkge1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDEwKSAmIDB4RkYpO1xuICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDIpICYgMHhGRik7XG4gIH0gZWxzZSBpZiAodGFpbGJpdHMgPT09IDEyKSB7XG4gICAgcmVzdWx0LnB1c2goKGJpdHMgPj4gNCkgJiAweEZGKTtcbiAgfVxuXG4gIHJldHVybiBuZXcgVWludDhBcnJheShyZXN1bHQpO1xufVxuXG5mdW5jdGlvbiByZXByZXNlbnRZYW1sQmluYXJ5KG9iamVjdCAvKiwgc3R5bGUqLykge1xuICB2YXIgcmVzdWx0ID0gJycsIGJpdHMgPSAwLCBpZHgsIHRhaWwsXG4gICAgICBtYXggPSBvYmplY3QubGVuZ3RoLFxuICAgICAgbWFwID0gQkFTRTY0X01BUDtcblxuICAvLyBDb252ZXJ0IGV2ZXJ5IHRocmVlIGJ5dGVzIHRvIDQgQVNDSUkgY2hhcmFjdGVycy5cblxuICBmb3IgKGlkeCA9IDA7IGlkeCA8IG1heDsgaWR4KyspIHtcbiAgICBpZiAoKGlkeCAlIDMgPT09IDApICYmIGlkeCkge1xuICAgICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiAxOCkgJiAweDNGXTtcbiAgICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gMTIpICYgMHgzRl07XG4gICAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDYpICYgMHgzRl07XG4gICAgICByZXN1bHQgKz0gbWFwW2JpdHMgJiAweDNGXTtcbiAgICB9XG5cbiAgICBiaXRzID0gKGJpdHMgPDwgOCkgKyBvYmplY3RbaWR4XTtcbiAgfVxuXG4gIC8vIER1bXAgdGFpbFxuXG4gIHRhaWwgPSBtYXggJSAzO1xuXG4gIGlmICh0YWlsID09PSAwKSB7XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiAxOCkgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDEyKSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gNikgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwW2JpdHMgJiAweDNGXTtcbiAgfSBlbHNlIGlmICh0YWlsID09PSAyKSB7XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiAxMCkgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDQpICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA8PCAyKSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbNjRdO1xuICB9IGVsc2UgaWYgKHRhaWwgPT09IDEpIHtcbiAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDIpICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA8PCA0KSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbNjRdO1xuICAgIHJlc3VsdCArPSBtYXBbNjRdO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gaXNCaW5hcnkob2JqKSB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKSA9PT0gICdbb2JqZWN0IFVpbnQ4QXJyYXldJztcbn1cblxudmFyIGJpbmFyeSA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpiaW5hcnknLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbEJpbmFyeSxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sQmluYXJ5LFxuICBwcmVkaWNhdGU6IGlzQmluYXJ5LFxuICByZXByZXNlbnQ6IHJlcHJlc2VudFlhbWxCaW5hcnlcbn0pO1xuXG52YXIgX2hhc093blByb3BlcnR5JDMgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xudmFyIF90b1N0cmluZyQyICAgICAgID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxPbWFwKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiB0cnVlO1xuXG4gIHZhciBvYmplY3RLZXlzID0gW10sIGluZGV4LCBsZW5ndGgsIHBhaXIsIHBhaXJLZXksIHBhaXJIYXNLZXksXG4gICAgICBvYmplY3QgPSBkYXRhO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHBhaXIgPSBvYmplY3RbaW5kZXhdO1xuICAgIHBhaXJIYXNLZXkgPSBmYWxzZTtcblxuICAgIGlmIChfdG9TdHJpbmckMi5jYWxsKHBhaXIpICE9PSAnW29iamVjdCBPYmplY3RdJykgcmV0dXJuIGZhbHNlO1xuXG4gICAgZm9yIChwYWlyS2V5IGluIHBhaXIpIHtcbiAgICAgIGlmIChfaGFzT3duUHJvcGVydHkkMy5jYWxsKHBhaXIsIHBhaXJLZXkpKSB7XG4gICAgICAgIGlmICghcGFpckhhc0tleSkgcGFpckhhc0tleSA9IHRydWU7XG4gICAgICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghcGFpckhhc0tleSkgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKG9iamVjdEtleXMuaW5kZXhPZihwYWlyS2V5KSA9PT0gLTEpIG9iamVjdEtleXMucHVzaChwYWlyS2V5KTtcbiAgICBlbHNlIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sT21hcChkYXRhKSB7XG4gIHJldHVybiBkYXRhICE9PSBudWxsID8gZGF0YSA6IFtdO1xufVxuXG52YXIgb21hcCA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpvbWFwJywge1xuICBraW5kOiAnc2VxdWVuY2UnLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbE9tYXAsXG4gIGNvbnN0cnVjdDogY29uc3RydWN0WWFtbE9tYXBcbn0pO1xuXG52YXIgX3RvU3RyaW5nJDEgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5mdW5jdGlvbiByZXNvbHZlWWFtbFBhaXJzKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiB0cnVlO1xuXG4gIHZhciBpbmRleCwgbGVuZ3RoLCBwYWlyLCBrZXlzLCByZXN1bHQsXG4gICAgICBvYmplY3QgPSBkYXRhO1xuXG4gIHJlc3VsdCA9IG5ldyBBcnJheShvYmplY3QubGVuZ3RoKTtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBwYWlyID0gb2JqZWN0W2luZGV4XTtcblxuICAgIGlmIChfdG9TdHJpbmckMS5jYWxsKHBhaXIpICE9PSAnW29iamVjdCBPYmplY3RdJykgcmV0dXJuIGZhbHNlO1xuXG4gICAga2V5cyA9IE9iamVjdC5rZXlzKHBhaXIpO1xuXG4gICAgaWYgKGtleXMubGVuZ3RoICE9PSAxKSByZXR1cm4gZmFsc2U7XG5cbiAgICByZXN1bHRbaW5kZXhdID0gWyBrZXlzWzBdLCBwYWlyW2tleXNbMF1dIF07XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbFBhaXJzKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBbXTtcblxuICB2YXIgaW5kZXgsIGxlbmd0aCwgcGFpciwga2V5cywgcmVzdWx0LFxuICAgICAgb2JqZWN0ID0gZGF0YTtcblxuICByZXN1bHQgPSBuZXcgQXJyYXkob2JqZWN0Lmxlbmd0aCk7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgcGFpciA9IG9iamVjdFtpbmRleF07XG5cbiAgICBrZXlzID0gT2JqZWN0LmtleXMocGFpcik7XG5cbiAgICByZXN1bHRbaW5kZXhdID0gWyBrZXlzWzBdLCBwYWlyW2tleXNbMF1dIF07XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG52YXIgcGFpcnMgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6cGFpcnMnLCB7XG4gIGtpbmQ6ICdzZXF1ZW5jZScsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sUGFpcnMsXG4gIGNvbnN0cnVjdDogY29uc3RydWN0WWFtbFBhaXJzXG59KTtcblxudmFyIF9oYXNPd25Qcm9wZXJ0eSQyID0gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eTtcblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxTZXQoZGF0YSkge1xuICBpZiAoZGF0YSA9PT0gbnVsbCkgcmV0dXJuIHRydWU7XG5cbiAgdmFyIGtleSwgb2JqZWN0ID0gZGF0YTtcblxuICBmb3IgKGtleSBpbiBvYmplY3QpIHtcbiAgICBpZiAoX2hhc093blByb3BlcnR5JDIuY2FsbChvYmplY3QsIGtleSkpIHtcbiAgICAgIGlmIChvYmplY3Rba2V5XSAhPT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sU2V0KGRhdGEpIHtcbiAgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDoge307XG59XG5cbnZhciBzZXQgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6c2V0Jywge1xuICBraW5kOiAnbWFwcGluZycsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sU2V0LFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxTZXRcbn0pO1xuXG52YXIgX2RlZmF1bHQgPSBjb3JlLmV4dGVuZCh7XG4gIGltcGxpY2l0OiBbXG4gICAgdGltZXN0YW1wLFxuICAgIG1lcmdlXG4gIF0sXG4gIGV4cGxpY2l0OiBbXG4gICAgYmluYXJ5LFxuICAgIG9tYXAsXG4gICAgcGFpcnMsXG4gICAgc2V0XG4gIF1cbn0pO1xuXG4vKmVzbGludC1kaXNhYmxlIG1heC1sZW4sbm8tdXNlLWJlZm9yZS1kZWZpbmUqL1xuXG5cblxuXG5cblxuXG52YXIgX2hhc093blByb3BlcnR5JDEgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5cbnZhciBDT05URVhUX0ZMT1dfSU4gICA9IDE7XG52YXIgQ09OVEVYVF9GTE9XX09VVCAgPSAyO1xudmFyIENPTlRFWFRfQkxPQ0tfSU4gID0gMztcbnZhciBDT05URVhUX0JMT0NLX09VVCA9IDQ7XG5cblxudmFyIENIT01QSU5HX0NMSVAgID0gMTtcbnZhciBDSE9NUElOR19TVFJJUCA9IDI7XG52YXIgQ0hPTVBJTkdfS0VFUCAgPSAzO1xuXG5cbnZhciBQQVRURVJOX05PTl9QUklOVEFCTEUgICAgICAgICA9IC9bXFx4MDAtXFx4MDhcXHgwQlxceDBDXFx4MEUtXFx4MUZcXHg3Ri1cXHg4NFxceDg2LVxceDlGXFx1RkZGRVxcdUZGRkZdfFtcXHVEODAwLVxcdURCRkZdKD8hW1xcdURDMDAtXFx1REZGRl0pfCg/OlteXFx1RDgwMC1cXHVEQkZGXXxeKVtcXHVEQzAwLVxcdURGRkZdLztcbnZhciBQQVRURVJOX05PTl9BU0NJSV9MSU5FX0JSRUFLUyA9IC9bXFx4ODVcXHUyMDI4XFx1MjAyOV0vO1xudmFyIFBBVFRFUk5fRkxPV19JTkRJQ0FUT1JTICAgICAgID0gL1ssXFxbXFxdXFx7XFx9XS87XG52YXIgUEFUVEVSTl9UQUdfSEFORExFICAgICAgICAgICAgPSAvXig/OiF8ISF8IVthLXpcXC1dKyEpJC9pO1xudmFyIFBBVFRFUk5fVEFHX1VSSSAgICAgICAgICAgICAgID0gL14oPzohfFteLFxcW1xcXVxce1xcfV0pKD86JVswLTlhLWZdezJ9fFswLTlhLXpcXC0jO1xcL1xcPzpAJj1cXCtcXCQsX1xcLiF+XFwqJ1xcKFxcKVxcW1xcXV0pKiQvaTtcblxuXG5mdW5jdGlvbiBfY2xhc3Mob2JqKSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwob2JqKTsgfVxuXG5mdW5jdGlvbiBpc19FT0woYykge1xuICByZXR1cm4gKGMgPT09IDB4MEEvKiBMRiAqLykgfHwgKGMgPT09IDB4MEQvKiBDUiAqLyk7XG59XG5cbmZ1bmN0aW9uIGlzX1dISVRFX1NQQUNFKGMpIHtcbiAgcmV0dXJuIChjID09PSAweDA5LyogVGFiICovKSB8fCAoYyA9PT0gMHgyMC8qIFNwYWNlICovKTtcbn1cblxuZnVuY3Rpb24gaXNfV1NfT1JfRU9MKGMpIHtcbiAgcmV0dXJuIChjID09PSAweDA5LyogVGFiICovKSB8fFxuICAgICAgICAgKGMgPT09IDB4MjAvKiBTcGFjZSAqLykgfHxcbiAgICAgICAgIChjID09PSAweDBBLyogTEYgKi8pIHx8XG4gICAgICAgICAoYyA9PT0gMHgwRC8qIENSICovKTtcbn1cblxuZnVuY3Rpb24gaXNfRkxPV19JTkRJQ0FUT1IoYykge1xuICByZXR1cm4gYyA9PT0gMHgyQy8qICwgKi8gfHxcbiAgICAgICAgIGMgPT09IDB4NUIvKiBbICovIHx8XG4gICAgICAgICBjID09PSAweDVELyogXSAqLyB8fFxuICAgICAgICAgYyA9PT0gMHg3Qi8qIHsgKi8gfHxcbiAgICAgICAgIGMgPT09IDB4N0QvKiB9ICovO1xufVxuXG5mdW5jdGlvbiBmcm9tSGV4Q29kZShjKSB7XG4gIHZhciBsYztcblxuICBpZiAoKDB4MzAvKiAwICovIDw9IGMpICYmIChjIDw9IDB4MzkvKiA5ICovKSkge1xuICAgIHJldHVybiBjIC0gMHgzMDtcbiAgfVxuXG4gIC8qZXNsaW50LWRpc2FibGUgbm8tYml0d2lzZSovXG4gIGxjID0gYyB8IDB4MjA7XG5cbiAgaWYgKCgweDYxLyogYSAqLyA8PSBsYykgJiYgKGxjIDw9IDB4NjYvKiBmICovKSkge1xuICAgIHJldHVybiBsYyAtIDB4NjEgKyAxMDtcbiAgfVxuXG4gIHJldHVybiAtMTtcbn1cblxuZnVuY3Rpb24gZXNjYXBlZEhleExlbihjKSB7XG4gIGlmIChjID09PSAweDc4LyogeCAqLykgeyByZXR1cm4gMjsgfVxuICBpZiAoYyA9PT0gMHg3NS8qIHUgKi8pIHsgcmV0dXJuIDQ7IH1cbiAgaWYgKGMgPT09IDB4NTUvKiBVICovKSB7IHJldHVybiA4OyB9XG4gIHJldHVybiAwO1xufVxuXG5mdW5jdGlvbiBmcm9tRGVjaW1hbENvZGUoYykge1xuICBpZiAoKDB4MzAvKiAwICovIDw9IGMpICYmIChjIDw9IDB4MzkvKiA5ICovKSkge1xuICAgIHJldHVybiBjIC0gMHgzMDtcbiAgfVxuXG4gIHJldHVybiAtMTtcbn1cblxuZnVuY3Rpb24gc2ltcGxlRXNjYXBlU2VxdWVuY2UoYykge1xuICAvKiBlc2xpbnQtZGlzYWJsZSBpbmRlbnQgKi9cbiAgcmV0dXJuIChjID09PSAweDMwLyogMCAqLykgPyAnXFx4MDAnIDpcbiAgICAgICAgKGMgPT09IDB4NjEvKiBhICovKSA/ICdcXHgwNycgOlxuICAgICAgICAoYyA9PT0gMHg2Mi8qIGIgKi8pID8gJ1xceDA4JyA6XG4gICAgICAgIChjID09PSAweDc0LyogdCAqLykgPyAnXFx4MDknIDpcbiAgICAgICAgKGMgPT09IDB4MDkvKiBUYWIgKi8pID8gJ1xceDA5JyA6XG4gICAgICAgIChjID09PSAweDZFLyogbiAqLykgPyAnXFx4MEEnIDpcbiAgICAgICAgKGMgPT09IDB4NzYvKiB2ICovKSA/ICdcXHgwQicgOlxuICAgICAgICAoYyA9PT0gMHg2Ni8qIGYgKi8pID8gJ1xceDBDJyA6XG4gICAgICAgIChjID09PSAweDcyLyogciAqLykgPyAnXFx4MEQnIDpcbiAgICAgICAgKGMgPT09IDB4NjUvKiBlICovKSA/ICdcXHgxQicgOlxuICAgICAgICAoYyA9PT0gMHgyMC8qIFNwYWNlICovKSA/ICcgJyA6XG4gICAgICAgIChjID09PSAweDIyLyogXCIgKi8pID8gJ1xceDIyJyA6XG4gICAgICAgIChjID09PSAweDJGLyogLyAqLykgPyAnLycgOlxuICAgICAgICAoYyA9PT0gMHg1Qy8qIFxcICovKSA/ICdcXHg1QycgOlxuICAgICAgICAoYyA9PT0gMHg0RS8qIE4gKi8pID8gJ1xceDg1JyA6XG4gICAgICAgIChjID09PSAweDVGLyogXyAqLykgPyAnXFx4QTAnIDpcbiAgICAgICAgKGMgPT09IDB4NEMvKiBMICovKSA/ICdcXHUyMDI4JyA6XG4gICAgICAgIChjID09PSAweDUwLyogUCAqLykgPyAnXFx1MjAyOScgOiAnJztcbn1cblxuZnVuY3Rpb24gY2hhckZyb21Db2RlcG9pbnQoYykge1xuICBpZiAoYyA8PSAweEZGRkYpIHtcbiAgICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShjKTtcbiAgfVxuICAvLyBFbmNvZGUgVVRGLTE2IHN1cnJvZ2F0ZSBwYWlyXG4gIC8vIGh0dHBzOi8vZW4ud2lraXBlZGlhLm9yZy93aWtpL1VURi0xNiNDb2RlX3BvaW50c19VLjJCMDEwMDAwX3RvX1UuMkIxMEZGRkZcbiAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUoXG4gICAgKChjIC0gMHgwMTAwMDApID4+IDEwKSArIDB4RDgwMCxcbiAgICAoKGMgLSAweDAxMDAwMCkgJiAweDAzRkYpICsgMHhEQzAwXG4gICk7XG59XG5cbnZhciBzaW1wbGVFc2NhcGVDaGVjayA9IG5ldyBBcnJheSgyNTYpOyAvLyBpbnRlZ2VyLCBmb3IgZmFzdCBhY2Nlc3NcbnZhciBzaW1wbGVFc2NhcGVNYXAgPSBuZXcgQXJyYXkoMjU2KTtcbmZvciAodmFyIGkgPSAwOyBpIDwgMjU2OyBpKyspIHtcbiAgc2ltcGxlRXNjYXBlQ2hlY2tbaV0gPSBzaW1wbGVFc2NhcGVTZXF1ZW5jZShpKSA/IDEgOiAwO1xuICBzaW1wbGVFc2NhcGVNYXBbaV0gPSBzaW1wbGVFc2NhcGVTZXF1ZW5jZShpKTtcbn1cblxuXG5mdW5jdGlvbiBTdGF0ZSQxKGlucHV0LCBvcHRpb25zKSB7XG4gIHRoaXMuaW5wdXQgPSBpbnB1dDtcblxuICB0aGlzLmZpbGVuYW1lICA9IG9wdGlvbnNbJ2ZpbGVuYW1lJ10gIHx8IG51bGw7XG4gIHRoaXMuc2NoZW1hICAgID0gb3B0aW9uc1snc2NoZW1hJ10gICAgfHwgX2RlZmF1bHQ7XG4gIHRoaXMub25XYXJuaW5nID0gb3B0aW9uc1snb25XYXJuaW5nJ10gfHwgbnVsbDtcbiAgLy8gKEhpZGRlbikgUmVtb3ZlPyBtYWtlcyB0aGUgbG9hZGVyIHRvIGV4cGVjdCBZQU1MIDEuMSBkb2N1bWVudHNcbiAgLy8gaWYgc3VjaCBkb2N1bWVudHMgaGF2ZSBubyBleHBsaWNpdCAlWUFNTCBkaXJlY3RpdmVcbiAgdGhpcy5sZWdhY3kgICAgPSBvcHRpb25zWydsZWdhY3knXSAgICB8fCBmYWxzZTtcblxuICB0aGlzLmpzb24gICAgICA9IG9wdGlvbnNbJ2pzb24nXSAgICAgIHx8IGZhbHNlO1xuICB0aGlzLmxpc3RlbmVyICA9IG9wdGlvbnNbJ2xpc3RlbmVyJ10gIHx8IG51bGw7XG5cbiAgdGhpcy5pbXBsaWNpdFR5cGVzID0gdGhpcy5zY2hlbWEuY29tcGlsZWRJbXBsaWNpdDtcbiAgdGhpcy50eXBlTWFwICAgICAgID0gdGhpcy5zY2hlbWEuY29tcGlsZWRUeXBlTWFwO1xuXG4gIHRoaXMubGVuZ3RoICAgICA9IGlucHV0Lmxlbmd0aDtcbiAgdGhpcy5wb3NpdGlvbiAgID0gMDtcbiAgdGhpcy5saW5lICAgICAgID0gMDtcbiAgdGhpcy5saW5lU3RhcnQgID0gMDtcbiAgdGhpcy5saW5lSW5kZW50ID0gMDtcblxuICAvLyBwb3NpdGlvbiBvZiBmaXJzdCBsZWFkaW5nIHRhYiBpbiB0aGUgY3VycmVudCBsaW5lLFxuICAvLyB1c2VkIHRvIG1ha2Ugc3VyZSB0aGVyZSBhcmUgbm8gdGFicyBpbiB0aGUgaW5kZW50YXRpb25cbiAgdGhpcy5maXJzdFRhYkluTGluZSA9IC0xO1xuXG4gIHRoaXMuZG9jdW1lbnRzID0gW107XG5cbiAgLypcbiAgdGhpcy52ZXJzaW9uO1xuICB0aGlzLmNoZWNrTGluZUJyZWFrcztcbiAgdGhpcy50YWdNYXA7XG4gIHRoaXMuYW5jaG9yTWFwO1xuICB0aGlzLnRhZztcbiAgdGhpcy5hbmNob3I7XG4gIHRoaXMua2luZDtcbiAgdGhpcy5yZXN1bHQ7Ki9cblxufVxuXG5cbmZ1bmN0aW9uIGdlbmVyYXRlRXJyb3Ioc3RhdGUsIG1lc3NhZ2UpIHtcbiAgdmFyIG1hcmsgPSB7XG4gICAgbmFtZTogICAgIHN0YXRlLmZpbGVuYW1lLFxuICAgIGJ1ZmZlcjogICBzdGF0ZS5pbnB1dC5zbGljZSgwLCAtMSksIC8vIG9taXQgdHJhaWxpbmcgXFwwXG4gICAgcG9zaXRpb246IHN0YXRlLnBvc2l0aW9uLFxuICAgIGxpbmU6ICAgICBzdGF0ZS5saW5lLFxuICAgIGNvbHVtbjogICBzdGF0ZS5wb3NpdGlvbiAtIHN0YXRlLmxpbmVTdGFydFxuICB9O1xuXG4gIG1hcmsuc25pcHBldCA9IHNuaXBwZXQobWFyayk7XG5cbiAgcmV0dXJuIG5ldyBleGNlcHRpb24obWVzc2FnZSwgbWFyayk7XG59XG5cbmZ1bmN0aW9uIHRocm93RXJyb3Ioc3RhdGUsIG1lc3NhZ2UpIHtcbiAgdGhyb3cgZ2VuZXJhdGVFcnJvcihzdGF0ZSwgbWVzc2FnZSk7XG59XG5cbmZ1bmN0aW9uIHRocm93V2FybmluZyhzdGF0ZSwgbWVzc2FnZSkge1xuICBpZiAoc3RhdGUub25XYXJuaW5nKSB7XG4gICAgc3RhdGUub25XYXJuaW5nLmNhbGwobnVsbCwgZ2VuZXJhdGVFcnJvcihzdGF0ZSwgbWVzc2FnZSkpO1xuICB9XG59XG5cblxudmFyIGRpcmVjdGl2ZUhhbmRsZXJzID0ge1xuXG4gIFlBTUw6IGZ1bmN0aW9uIGhhbmRsZVlhbWxEaXJlY3RpdmUoc3RhdGUsIG5hbWUsIGFyZ3MpIHtcblxuICAgIHZhciBtYXRjaCwgbWFqb3IsIG1pbm9yO1xuXG4gICAgaWYgKHN0YXRlLnZlcnNpb24gIT09IG51bGwpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdkdXBsaWNhdGlvbiBvZiAlWUFNTCBkaXJlY3RpdmUnKTtcbiAgICB9XG5cbiAgICBpZiAoYXJncy5sZW5ndGggIT09IDEpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdZQU1MIGRpcmVjdGl2ZSBhY2NlcHRzIGV4YWN0bHkgb25lIGFyZ3VtZW50Jyk7XG4gICAgfVxuXG4gICAgbWF0Y2ggPSAvXihbMC05XSspXFwuKFswLTldKykkLy5leGVjKGFyZ3NbMF0pO1xuXG4gICAgaWYgKG1hdGNoID09PSBudWxsKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnaWxsLWZvcm1lZCBhcmd1bWVudCBvZiB0aGUgWUFNTCBkaXJlY3RpdmUnKTtcbiAgICB9XG5cbiAgICBtYWpvciA9IHBhcnNlSW50KG1hdGNoWzFdLCAxMCk7XG4gICAgbWlub3IgPSBwYXJzZUludChtYXRjaFsyXSwgMTApO1xuXG4gICAgaWYgKG1ham9yICE9PSAxKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5hY2NlcHRhYmxlIFlBTUwgdmVyc2lvbiBvZiB0aGUgZG9jdW1lbnQnKTtcbiAgICB9XG5cbiAgICBzdGF0ZS52ZXJzaW9uID0gYXJnc1swXTtcbiAgICBzdGF0ZS5jaGVja0xpbmVCcmVha3MgPSAobWlub3IgPCAyKTtcblxuICAgIGlmIChtaW5vciAhPT0gMSAmJiBtaW5vciAhPT0gMikge1xuICAgICAgdGhyb3dXYXJuaW5nKHN0YXRlLCAndW5zdXBwb3J0ZWQgWUFNTCB2ZXJzaW9uIG9mIHRoZSBkb2N1bWVudCcpO1xuICAgIH1cbiAgfSxcblxuICBUQUc6IGZ1bmN0aW9uIGhhbmRsZVRhZ0RpcmVjdGl2ZShzdGF0ZSwgbmFtZSwgYXJncykge1xuXG4gICAgdmFyIGhhbmRsZSwgcHJlZml4O1xuXG4gICAgaWYgKGFyZ3MubGVuZ3RoICE9PSAyKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnVEFHIGRpcmVjdGl2ZSBhY2NlcHRzIGV4YWN0bHkgdHdvIGFyZ3VtZW50cycpO1xuICAgIH1cblxuICAgIGhhbmRsZSA9IGFyZ3NbMF07XG4gICAgcHJlZml4ID0gYXJnc1sxXTtcblxuICAgIGlmICghUEFUVEVSTl9UQUdfSEFORExFLnRlc3QoaGFuZGxlKSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2lsbC1mb3JtZWQgdGFnIGhhbmRsZSAoZmlyc3QgYXJndW1lbnQpIG9mIHRoZSBUQUcgZGlyZWN0aXZlJyk7XG4gICAgfVxuXG4gICAgaWYgKF9oYXNPd25Qcm9wZXJ0eSQxLmNhbGwoc3RhdGUudGFnTWFwLCBoYW5kbGUpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGhlcmUgaXMgYSBwcmV2aW91c2x5IGRlY2xhcmVkIHN1ZmZpeCBmb3IgXCInICsgaGFuZGxlICsgJ1wiIHRhZyBoYW5kbGUnKTtcbiAgICB9XG5cbiAgICBpZiAoIVBBVFRFUk5fVEFHX1VSSS50ZXN0KHByZWZpeCkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdpbGwtZm9ybWVkIHRhZyBwcmVmaXggKHNlY29uZCBhcmd1bWVudCkgb2YgdGhlIFRBRyBkaXJlY3RpdmUnKTtcbiAgICB9XG5cbiAgICB0cnkge1xuICAgICAgcHJlZml4ID0gZGVjb2RlVVJJQ29tcG9uZW50KHByZWZpeCk7XG4gICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGFnIHByZWZpeCBpcyBtYWxmb3JtZWQ6ICcgKyBwcmVmaXgpO1xuICAgIH1cblxuICAgIHN0YXRlLnRhZ01hcFtoYW5kbGVdID0gcHJlZml4O1xuICB9XG59O1xuXG5cbmZ1bmN0aW9uIGNhcHR1cmVTZWdtZW50KHN0YXRlLCBzdGFydCwgZW5kLCBjaGVja0pzb24pIHtcbiAgdmFyIF9wb3NpdGlvbiwgX2xlbmd0aCwgX2NoYXJhY3RlciwgX3Jlc3VsdDtcblxuICBpZiAoc3RhcnQgPCBlbmQpIHtcbiAgICBfcmVzdWx0ID0gc3RhdGUuaW5wdXQuc2xpY2Uoc3RhcnQsIGVuZCk7XG5cbiAgICBpZiAoY2hlY2tKc29uKSB7XG4gICAgICBmb3IgKF9wb3NpdGlvbiA9IDAsIF9sZW5ndGggPSBfcmVzdWx0Lmxlbmd0aDsgX3Bvc2l0aW9uIDwgX2xlbmd0aDsgX3Bvc2l0aW9uICs9IDEpIHtcbiAgICAgICAgX2NoYXJhY3RlciA9IF9yZXN1bHQuY2hhckNvZGVBdChfcG9zaXRpb24pO1xuICAgICAgICBpZiAoIShfY2hhcmFjdGVyID09PSAweDA5IHx8XG4gICAgICAgICAgICAgICgweDIwIDw9IF9jaGFyYWN0ZXIgJiYgX2NoYXJhY3RlciA8PSAweDEwRkZGRikpKSB7XG4gICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2V4cGVjdGVkIHZhbGlkIEpTT04gY2hhcmFjdGVyJyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKFBBVFRFUk5fTk9OX1BSSU5UQUJMRS50ZXN0KF9yZXN1bHQpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGhlIHN0cmVhbSBjb250YWlucyBub24tcHJpbnRhYmxlIGNoYXJhY3RlcnMnKTtcbiAgICB9XG5cbiAgICBzdGF0ZS5yZXN1bHQgKz0gX3Jlc3VsdDtcbiAgfVxufVxuXG5mdW5jdGlvbiBtZXJnZU1hcHBpbmdzKHN0YXRlLCBkZXN0aW5hdGlvbiwgc291cmNlLCBvdmVycmlkYWJsZUtleXMpIHtcbiAgdmFyIHNvdXJjZUtleXMsIGtleSwgaW5kZXgsIHF1YW50aXR5O1xuXG4gIGlmICghY29tbW9uLmlzT2JqZWN0KHNvdXJjZSkpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnY2Fubm90IG1lcmdlIG1hcHBpbmdzOyB0aGUgcHJvdmlkZWQgc291cmNlIG9iamVjdCBpcyB1bmFjY2VwdGFibGUnKTtcbiAgfVxuXG4gIHNvdXJjZUtleXMgPSBPYmplY3Qua2V5cyhzb3VyY2UpO1xuXG4gIGZvciAoaW5kZXggPSAwLCBxdWFudGl0eSA9IHNvdXJjZUtleXMubGVuZ3RoOyBpbmRleCA8IHF1YW50aXR5OyBpbmRleCArPSAxKSB7XG4gICAga2V5ID0gc291cmNlS2V5c1tpbmRleF07XG5cbiAgICBpZiAoIV9oYXNPd25Qcm9wZXJ0eSQxLmNhbGwoZGVzdGluYXRpb24sIGtleSkpIHtcbiAgICAgIGRlc3RpbmF0aW9uW2tleV0gPSBzb3VyY2Vba2V5XTtcbiAgICAgIG92ZXJyaWRhYmxlS2V5c1trZXldID0gdHJ1ZTtcbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gc3RvcmVNYXBwaW5nUGFpcihzdGF0ZSwgX3Jlc3VsdCwgb3ZlcnJpZGFibGVLZXlzLCBrZXlUYWcsIGtleU5vZGUsIHZhbHVlTm9kZSxcbiAgc3RhcnRMaW5lLCBzdGFydExpbmVTdGFydCwgc3RhcnRQb3MpIHtcblxuICB2YXIgaW5kZXgsIHF1YW50aXR5O1xuXG4gIC8vIFRoZSBvdXRwdXQgaXMgYSBwbGFpbiBvYmplY3QgaGVyZSwgc28ga2V5cyBjYW4gb25seSBiZSBzdHJpbmdzLlxuICAvLyBXZSBuZWVkIHRvIGNvbnZlcnQga2V5Tm9kZSB0byBhIHN0cmluZywgYnV0IGRvaW5nIHNvIGNhbiBoYW5nIHRoZSBwcm9jZXNzXG4gIC8vIChkZWVwbHkgbmVzdGVkIGFycmF5cyB0aGF0IGV4cGxvZGUgZXhwb25lbnRpYWxseSB1c2luZyBhbGlhc2VzKS5cbiAgaWYgKEFycmF5LmlzQXJyYXkoa2V5Tm9kZSkpIHtcbiAgICBrZXlOb2RlID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwoa2V5Tm9kZSk7XG5cbiAgICBmb3IgKGluZGV4ID0gMCwgcXVhbnRpdHkgPSBrZXlOb2RlLmxlbmd0aDsgaW5kZXggPCBxdWFudGl0eTsgaW5kZXggKz0gMSkge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoa2V5Tm9kZVtpbmRleF0pKSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICduZXN0ZWQgYXJyYXlzIGFyZSBub3Qgc3VwcG9ydGVkIGluc2lkZSBrZXlzJyk7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlb2Yga2V5Tm9kZSA9PT0gJ29iamVjdCcgJiYgX2NsYXNzKGtleU5vZGVbaW5kZXhdKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgICAga2V5Tm9kZVtpbmRleF0gPSAnW29iamVjdCBPYmplY3RdJztcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBBdm9pZCBjb2RlIGV4ZWN1dGlvbiBpbiBsb2FkKCkgdmlhIHRvU3RyaW5nIHByb3BlcnR5XG4gIC8vIChzdGlsbCB1c2UgaXRzIG93biB0b1N0cmluZyBmb3IgYXJyYXlzLCB0aW1lc3RhbXBzLFxuICAvLyBhbmQgd2hhdGV2ZXIgdXNlciBzY2hlbWEgZXh0ZW5zaW9ucyBoYXBwZW4gdG8gaGF2ZSBAQHRvU3RyaW5nVGFnKVxuICBpZiAodHlwZW9mIGtleU5vZGUgPT09ICdvYmplY3QnICYmIF9jbGFzcyhrZXlOb2RlKSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICBrZXlOb2RlID0gJ1tvYmplY3QgT2JqZWN0XSc7XG4gIH1cblxuXG4gIGtleU5vZGUgPSBTdHJpbmcoa2V5Tm9kZSk7XG5cbiAgaWYgKF9yZXN1bHQgPT09IG51bGwpIHtcbiAgICBfcmVzdWx0ID0ge307XG4gIH1cblxuICBpZiAoa2V5VGFnID09PSAndGFnOnlhbWwub3JnLDIwMDI6bWVyZ2UnKSB7XG4gICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWVOb2RlKSkge1xuICAgICAgZm9yIChpbmRleCA9IDAsIHF1YW50aXR5ID0gdmFsdWVOb2RlLmxlbmd0aDsgaW5kZXggPCBxdWFudGl0eTsgaW5kZXggKz0gMSkge1xuICAgICAgICBtZXJnZU1hcHBpbmdzKHN0YXRlLCBfcmVzdWx0LCB2YWx1ZU5vZGVbaW5kZXhdLCBvdmVycmlkYWJsZUtleXMpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBtZXJnZU1hcHBpbmdzKHN0YXRlLCBfcmVzdWx0LCB2YWx1ZU5vZGUsIG92ZXJyaWRhYmxlS2V5cyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmICghc3RhdGUuanNvbiAmJlxuICAgICAgICAhX2hhc093blByb3BlcnR5JDEuY2FsbChvdmVycmlkYWJsZUtleXMsIGtleU5vZGUpICYmXG4gICAgICAgIF9oYXNPd25Qcm9wZXJ0eSQxLmNhbGwoX3Jlc3VsdCwga2V5Tm9kZSkpIHtcbiAgICAgIHN0YXRlLmxpbmUgPSBzdGFydExpbmUgfHwgc3RhdGUubGluZTtcbiAgICAgIHN0YXRlLmxpbmVTdGFydCA9IHN0YXJ0TGluZVN0YXJ0IHx8IHN0YXRlLmxpbmVTdGFydDtcbiAgICAgIHN0YXRlLnBvc2l0aW9uID0gc3RhcnRQb3MgfHwgc3RhdGUucG9zaXRpb247XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZHVwbGljYXRlZCBtYXBwaW5nIGtleScpO1xuICAgIH1cblxuICAgIC8vIHVzZWQgZm9yIHRoaXMgc3BlY2lmaWMga2V5IG9ubHkgYmVjYXVzZSBPYmplY3QuZGVmaW5lUHJvcGVydHkgaXMgc2xvd1xuICAgIGlmIChrZXlOb2RlID09PSAnX19wcm90b19fJykge1xuICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KF9yZXN1bHQsIGtleU5vZGUsIHtcbiAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlLFxuICAgICAgICBlbnVtZXJhYmxlOiB0cnVlLFxuICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgdmFsdWU6IHZhbHVlTm9kZVxuICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF9yZXN1bHRba2V5Tm9kZV0gPSB2YWx1ZU5vZGU7XG4gICAgfVxuICAgIGRlbGV0ZSBvdmVycmlkYWJsZUtleXNba2V5Tm9kZV07XG4gIH1cblxuICByZXR1cm4gX3Jlc3VsdDtcbn1cblxuZnVuY3Rpb24gcmVhZExpbmVCcmVhayhzdGF0ZSkge1xuICB2YXIgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggPT09IDB4MEEvKiBMRiAqLykge1xuICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gIH0gZWxzZSBpZiAoY2ggPT09IDB4MEQvKiBDUiAqLykge1xuICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgaWYgKHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pID09PSAweDBBLyogTEYgKi8pIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICdhIGxpbmUgYnJlYWsgaXMgZXhwZWN0ZWQnKTtcbiAgfVxuXG4gIHN0YXRlLmxpbmUgKz0gMTtcbiAgc3RhdGUubGluZVN0YXJ0ID0gc3RhdGUucG9zaXRpb247XG4gIHN0YXRlLmZpcnN0VGFiSW5MaW5lID0gLTE7XG59XG5cbmZ1bmN0aW9uIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIGFsbG93Q29tbWVudHMsIGNoZWNrSW5kZW50KSB7XG4gIHZhciBsaW5lQnJlYWtzID0gMCxcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgd2hpbGUgKGNoICE9PSAwKSB7XG4gICAgd2hpbGUgKGlzX1dISVRFX1NQQUNFKGNoKSkge1xuICAgICAgaWYgKGNoID09PSAweDA5LyogVGFiICovICYmIHN0YXRlLmZpcnN0VGFiSW5MaW5lID09PSAtMSkge1xuICAgICAgICBzdGF0ZS5maXJzdFRhYkluTGluZSA9IHN0YXRlLnBvc2l0aW9uO1xuICAgICAgfVxuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIH1cblxuICAgIGlmIChhbGxvd0NvbW1lbnRzICYmIGNoID09PSAweDIzLyogIyAqLykge1xuICAgICAgZG8ge1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgICB9IHdoaWxlIChjaCAhPT0gMHgwQS8qIExGICovICYmIGNoICE9PSAweDBELyogQ1IgKi8gJiYgY2ggIT09IDApO1xuICAgIH1cblxuICAgIGlmIChpc19FT0woY2gpKSB7XG4gICAgICByZWFkTGluZUJyZWFrKHN0YXRlKTtcblxuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcbiAgICAgIGxpbmVCcmVha3MrKztcbiAgICAgIHN0YXRlLmxpbmVJbmRlbnQgPSAwO1xuXG4gICAgICB3aGlsZSAoY2ggPT09IDB4MjAvKiBTcGFjZSAqLykge1xuICAgICAgICBzdGF0ZS5saW5lSW5kZW50Kys7XG4gICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKGNoZWNrSW5kZW50ICE9PSAtMSAmJiBsaW5lQnJlYWtzICE9PSAwICYmIHN0YXRlLmxpbmVJbmRlbnQgPCBjaGVja0luZGVudCkge1xuICAgIHRocm93V2FybmluZyhzdGF0ZSwgJ2RlZmljaWVudCBpbmRlbnRhdGlvbicpO1xuICB9XG5cbiAgcmV0dXJuIGxpbmVCcmVha3M7XG59XG5cbmZ1bmN0aW9uIHRlc3REb2N1bWVudFNlcGFyYXRvcihzdGF0ZSkge1xuICB2YXIgX3Bvc2l0aW9uID0gc3RhdGUucG9zaXRpb24sXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoX3Bvc2l0aW9uKTtcblxuICAvLyBDb25kaXRpb24gc3RhdGUucG9zaXRpb24gPT09IHN0YXRlLmxpbmVTdGFydCBpcyB0ZXN0ZWRcbiAgLy8gaW4gcGFyZW50IG9uIGVhY2ggY2FsbCwgZm9yIGVmZmljaWVuY3kuIE5vIG5lZWRzIHRvIHRlc3QgaGVyZSBhZ2Fpbi5cbiAgaWYgKChjaCA9PT0gMHgyRC8qIC0gKi8gfHwgY2ggPT09IDB4MkUvKiAuICovKSAmJlxuICAgICAgY2ggPT09IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoX3Bvc2l0aW9uICsgMSkgJiZcbiAgICAgIGNoID09PSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KF9wb3NpdGlvbiArIDIpKSB7XG5cbiAgICBfcG9zaXRpb24gKz0gMztcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChfcG9zaXRpb24pO1xuXG4gICAgaWYgKGNoID09PSAwIHx8IGlzX1dTX09SX0VPTChjaCkpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gd3JpdGVGb2xkZWRMaW5lcyhzdGF0ZSwgY291bnQpIHtcbiAgaWYgKGNvdW50ID09PSAxKSB7XG4gICAgc3RhdGUucmVzdWx0ICs9ICcgJztcbiAgfSBlbHNlIGlmIChjb3VudCA+IDEpIHtcbiAgICBzdGF0ZS5yZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnXFxuJywgY291bnQgLSAxKTtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIHJlYWRQbGFpblNjYWxhcihzdGF0ZSwgbm9kZUluZGVudCwgd2l0aGluRmxvd0NvbGxlY3Rpb24pIHtcbiAgdmFyIHByZWNlZGluZyxcbiAgICAgIGZvbGxvd2luZyxcbiAgICAgIGNhcHR1cmVTdGFydCxcbiAgICAgIGNhcHR1cmVFbmQsXG4gICAgICBoYXNQZW5kaW5nQ29udGVudCxcbiAgICAgIF9saW5lLFxuICAgICAgX2xpbmVTdGFydCxcbiAgICAgIF9saW5lSW5kZW50LFxuICAgICAgX2tpbmQgPSBzdGF0ZS5raW5kLFxuICAgICAgX3Jlc3VsdCA9IHN0YXRlLnJlc3VsdCxcbiAgICAgIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGlzX1dTX09SX0VPTChjaCkgICAgICB8fFxuICAgICAgaXNfRkxPV19JTkRJQ0FUT1IoY2gpIHx8XG4gICAgICBjaCA9PT0gMHgyMy8qICMgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDI2LyogJiAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4MkEvKiAqICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgyMS8qICEgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDdDLyogfCAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4M0UvKiA+ICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgyNy8qICcgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDIyLyogXCIgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDI1LyogJSAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4NDAvKiBAICovICAgIHx8XG4gICAgICBjaCA9PT0gMHg2MC8qIGAgKi8pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoY2ggPT09IDB4M0YvKiA/ICovIHx8IGNoID09PSAweDJELyogLSAqLykge1xuICAgIGZvbGxvd2luZyA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAxKTtcblxuICAgIGlmIChpc19XU19PUl9FT0woZm9sbG93aW5nKSB8fFxuICAgICAgICB3aXRoaW5GbG93Q29sbGVjdGlvbiAmJiBpc19GTE9XX0lORElDQVRPUihmb2xsb3dpbmcpKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgc3RhdGUua2luZCA9ICdzY2FsYXInO1xuICBzdGF0ZS5yZXN1bHQgPSAnJztcbiAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuICBoYXNQZW5kaW5nQ29udGVudCA9IGZhbHNlO1xuXG4gIHdoaWxlIChjaCAhPT0gMCkge1xuICAgIGlmIChjaCA9PT0gMHgzQS8qIDogKi8pIHtcbiAgICAgIGZvbGxvd2luZyA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAxKTtcblxuICAgICAgaWYgKGlzX1dTX09SX0VPTChmb2xsb3dpbmcpIHx8XG4gICAgICAgICAgd2l0aGluRmxvd0NvbGxlY3Rpb24gJiYgaXNfRkxPV19JTkRJQ0FUT1IoZm9sbG93aW5nKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoY2ggPT09IDB4MjMvKiAjICovKSB7XG4gICAgICBwcmVjZWRpbmcgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uIC0gMSk7XG5cbiAgICAgIGlmIChpc19XU19PUl9FT0wocHJlY2VkaW5nKSkge1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoKHN0YXRlLnBvc2l0aW9uID09PSBzdGF0ZS5saW5lU3RhcnQgJiYgdGVzdERvY3VtZW50U2VwYXJhdG9yKHN0YXRlKSkgfHxcbiAgICAgICAgICAgICAgIHdpdGhpbkZsb3dDb2xsZWN0aW9uICYmIGlzX0ZMT1dfSU5ESUNBVE9SKGNoKSkge1xuICAgICAgYnJlYWs7XG5cbiAgICB9IGVsc2UgaWYgKGlzX0VPTChjaCkpIHtcbiAgICAgIF9saW5lID0gc3RhdGUubGluZTtcbiAgICAgIF9saW5lU3RhcnQgPSBzdGF0ZS5saW5lU3RhcnQ7XG4gICAgICBfbGluZUluZGVudCA9IHN0YXRlLmxpbmVJbmRlbnQ7XG4gICAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCBmYWxzZSwgLTEpO1xuXG4gICAgICBpZiAoc3RhdGUubGluZUluZGVudCA+PSBub2RlSW5kZW50KSB7XG4gICAgICAgIGhhc1BlbmRpbmdDb250ZW50ID0gdHJ1ZTtcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5wb3NpdGlvbiA9IGNhcHR1cmVFbmQ7XG4gICAgICAgIHN0YXRlLmxpbmUgPSBfbGluZTtcbiAgICAgICAgc3RhdGUubGluZVN0YXJ0ID0gX2xpbmVTdGFydDtcbiAgICAgICAgc3RhdGUubGluZUluZGVudCA9IF9saW5lSW5kZW50O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoaGFzUGVuZGluZ0NvbnRlbnQpIHtcbiAgICAgIGNhcHR1cmVTZWdtZW50KHN0YXRlLCBjYXB0dXJlU3RhcnQsIGNhcHR1cmVFbmQsIGZhbHNlKTtcbiAgICAgIHdyaXRlRm9sZGVkTGluZXMoc3RhdGUsIHN0YXRlLmxpbmUgLSBfbGluZSk7XG4gICAgICBjYXB0dXJlU3RhcnQgPSBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG4gICAgICBoYXNQZW5kaW5nQ29udGVudCA9IGZhbHNlO1xuICAgIH1cblxuICAgIGlmICghaXNfV0hJVEVfU1BBQ0UoY2gpKSB7XG4gICAgICBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb24gKyAxO1xuICAgIH1cblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgfVxuXG4gIGNhcHR1cmVTZWdtZW50KHN0YXRlLCBjYXB0dXJlU3RhcnQsIGNhcHR1cmVFbmQsIGZhbHNlKTtcblxuICBpZiAoc3RhdGUucmVzdWx0KSB7XG4gICAgcmV0dXJuIHRydWU7XG4gIH1cblxuICBzdGF0ZS5raW5kID0gX2tpbmQ7XG4gIHN0YXRlLnJlc3VsdCA9IF9yZXN1bHQ7XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gcmVhZFNpbmdsZVF1b3RlZFNjYWxhcihzdGF0ZSwgbm9kZUluZGVudCkge1xuICB2YXIgY2gsXG4gICAgICBjYXB0dXJlU3RhcnQsIGNhcHR1cmVFbmQ7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggIT09IDB4MjcvKiAnICovKSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgc3RhdGUua2luZCA9ICdzY2FsYXInO1xuICBzdGF0ZS5yZXN1bHQgPSAnJztcbiAgc3RhdGUucG9zaXRpb24rKztcbiAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIHdoaWxlICgoY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSkgIT09IDApIHtcbiAgICBpZiAoY2ggPT09IDB4MjcvKiAnICovKSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBzdGF0ZS5wb3NpdGlvbiwgdHJ1ZSk7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICAgIGlmIChjaCA9PT0gMHgyNy8qICcgKi8pIHtcbiAgICAgICAgY2FwdHVyZVN0YXJ0ID0gc3RhdGUucG9zaXRpb247XG4gICAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgICAgIGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIGlmIChpc19FT0woY2gpKSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBjYXB0dXJlRW5kLCB0cnVlKTtcbiAgICAgIHdyaXRlRm9sZGVkTGluZXMoc3RhdGUsIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIGZhbHNlLCBub2RlSW5kZW50KSk7XG4gICAgICBjYXB0dXJlU3RhcnQgPSBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG5cbiAgICB9IGVsc2UgaWYgKHN0YXRlLnBvc2l0aW9uID09PSBzdGF0ZS5saW5lU3RhcnQgJiYgdGVzdERvY3VtZW50U2VwYXJhdG9yKHN0YXRlKSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZXhwZWN0ZWQgZW5kIG9mIHRoZSBkb2N1bWVudCB3aXRoaW4gYSBzaW5nbGUgcXVvdGVkIHNjYWxhcicpO1xuXG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgICBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG4gICAgfVxuICB9XG5cbiAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZXhwZWN0ZWQgZW5kIG9mIHRoZSBzdHJlYW0gd2l0aGluIGEgc2luZ2xlIHF1b3RlZCBzY2FsYXInKTtcbn1cblxuZnVuY3Rpb24gcmVhZERvdWJsZVF1b3RlZFNjYWxhcihzdGF0ZSwgbm9kZUluZGVudCkge1xuICB2YXIgY2FwdHVyZVN0YXJ0LFxuICAgICAgY2FwdHVyZUVuZCxcbiAgICAgIGhleExlbmd0aCxcbiAgICAgIGhleFJlc3VsdCxcbiAgICAgIHRtcCxcbiAgICAgIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoICE9PSAweDIyLyogXCIgKi8pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdGF0ZS5raW5kID0gJ3NjYWxhcic7XG4gIHN0YXRlLnJlc3VsdCA9ICcnO1xuICBzdGF0ZS5wb3NpdGlvbisrO1xuICBjYXB0dXJlU3RhcnQgPSBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG5cbiAgd2hpbGUgKChjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pKSAhPT0gMCkge1xuICAgIGlmIChjaCA9PT0gMHgyMi8qIFwiICovKSB7XG4gICAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBzdGF0ZS5wb3NpdGlvbiwgdHJ1ZSk7XG4gICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgICAgcmV0dXJuIHRydWU7XG5cbiAgICB9IGVsc2UgaWYgKGNoID09PSAweDVDLyogXFwgKi8pIHtcbiAgICAgIGNhcHR1cmVTZWdtZW50KHN0YXRlLCBjYXB0dXJlU3RhcnQsIHN0YXRlLnBvc2l0aW9uLCB0cnVlKTtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICAgICAgaWYgKGlzX0VPTChjaCkpIHtcbiAgICAgICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgZmFsc2UsIG5vZGVJbmRlbnQpO1xuXG4gICAgICAgIC8vIFRPRE86IHJld29yayB0byBpbmxpbmUgZm4gd2l0aCBubyB0eXBlIGNhc3Q/XG4gICAgICB9IGVsc2UgaWYgKGNoIDwgMjU2ICYmIHNpbXBsZUVzY2FwZUNoZWNrW2NoXSkge1xuICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gc2ltcGxlRXNjYXBlTWFwW2NoXTtcbiAgICAgICAgc3RhdGUucG9zaXRpb24rKztcblxuICAgICAgfSBlbHNlIGlmICgodG1wID0gZXNjYXBlZEhleExlbihjaCkpID4gMCkge1xuICAgICAgICBoZXhMZW5ndGggPSB0bXA7XG4gICAgICAgIGhleFJlc3VsdCA9IDA7XG5cbiAgICAgICAgZm9yICg7IGhleExlbmd0aCA+IDA7IGhleExlbmd0aC0tKSB7XG4gICAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gICAgICAgICAgaWYgKCh0bXAgPSBmcm9tSGV4Q29kZShjaCkpID49IDApIHtcbiAgICAgICAgICAgIGhleFJlc3VsdCA9IChoZXhSZXN1bHQgPDwgNCkgKyB0bXA7XG5cbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2V4cGVjdGVkIGhleGFkZWNpbWFsIGNoYXJhY3RlcicpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlLnJlc3VsdCArPSBjaGFyRnJvbUNvZGVwb2ludChoZXhSZXN1bHQpO1xuXG4gICAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmtub3duIGVzY2FwZSBzZXF1ZW5jZScpO1xuICAgICAgfVxuXG4gICAgICBjYXB0dXJlU3RhcnQgPSBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG5cbiAgICB9IGVsc2UgaWYgKGlzX0VPTChjaCkpIHtcbiAgICAgIGNhcHR1cmVTZWdtZW50KHN0YXRlLCBjYXB0dXJlU3RhcnQsIGNhcHR1cmVFbmQsIHRydWUpO1xuICAgICAgd3JpdGVGb2xkZWRMaW5lcyhzdGF0ZSwgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgZmFsc2UsIG5vZGVJbmRlbnQpKTtcbiAgICAgIGNhcHR1cmVTdGFydCA9IGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcblxuICAgIH0gZWxzZSBpZiAoc3RhdGUucG9zaXRpb24gPT09IHN0YXRlLmxpbmVTdGFydCAmJiB0ZXN0RG9jdW1lbnRTZXBhcmF0b3Ioc3RhdGUpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5leHBlY3RlZCBlbmQgb2YgdGhlIGRvY3VtZW50IHdpdGhpbiBhIGRvdWJsZSBxdW90ZWQgc2NhbGFyJyk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUucG9zaXRpb24rKztcbiAgICAgIGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcbiAgICB9XG4gIH1cblxuICB0aHJvd0Vycm9yKHN0YXRlLCAndW5leHBlY3RlZCBlbmQgb2YgdGhlIHN0cmVhbSB3aXRoaW4gYSBkb3VibGUgcXVvdGVkIHNjYWxhcicpO1xufVxuXG5mdW5jdGlvbiByZWFkRmxvd0NvbGxlY3Rpb24oc3RhdGUsIG5vZGVJbmRlbnQpIHtcbiAgdmFyIHJlYWROZXh0ID0gdHJ1ZSxcbiAgICAgIF9saW5lLFxuICAgICAgX2xpbmVTdGFydCxcbiAgICAgIF9wb3MsXG4gICAgICBfdGFnICAgICA9IHN0YXRlLnRhZyxcbiAgICAgIF9yZXN1bHQsXG4gICAgICBfYW5jaG9yICA9IHN0YXRlLmFuY2hvcixcbiAgICAgIGZvbGxvd2luZyxcbiAgICAgIHRlcm1pbmF0b3IsXG4gICAgICBpc1BhaXIsXG4gICAgICBpc0V4cGxpY2l0UGFpcixcbiAgICAgIGlzTWFwcGluZyxcbiAgICAgIG92ZXJyaWRhYmxlS2V5cyA9IE9iamVjdC5jcmVhdGUobnVsbCksXG4gICAgICBrZXlOb2RlLFxuICAgICAga2V5VGFnLFxuICAgICAgdmFsdWVOb2RlLFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggPT09IDB4NUIvKiBbICovKSB7XG4gICAgdGVybWluYXRvciA9IDB4NUQ7LyogXSAqL1xuICAgIGlzTWFwcGluZyA9IGZhbHNlO1xuICAgIF9yZXN1bHQgPSBbXTtcbiAgfSBlbHNlIGlmIChjaCA9PT0gMHg3Qi8qIHsgKi8pIHtcbiAgICB0ZXJtaW5hdG9yID0gMHg3RDsvKiB9ICovXG4gICAgaXNNYXBwaW5nID0gdHJ1ZTtcbiAgICBfcmVzdWx0ID0ge307XG4gIH0gZWxzZSB7XG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gX3Jlc3VsdDtcbiAgfVxuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCBub2RlSW5kZW50KTtcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoY2ggPT09IHRlcm1pbmF0b3IpIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgICBzdGF0ZS50YWcgPSBfdGFnO1xuICAgICAgc3RhdGUuYW5jaG9yID0gX2FuY2hvcjtcbiAgICAgIHN0YXRlLmtpbmQgPSBpc01hcHBpbmcgPyAnbWFwcGluZycgOiAnc2VxdWVuY2UnO1xuICAgICAgc3RhdGUucmVzdWx0ID0gX3Jlc3VsdDtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH0gZWxzZSBpZiAoIXJlYWROZXh0KSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbWlzc2VkIGNvbW1hIGJldHdlZW4gZmxvdyBjb2xsZWN0aW9uIGVudHJpZXMnKTtcbiAgICB9IGVsc2UgaWYgKGNoID09PSAweDJDLyogLCAqLykge1xuICAgICAgLy8gXCJmbG93IGNvbGxlY3Rpb24gZW50cmllcyBjYW4gbmV2ZXIgYmUgY29tcGxldGVseSBlbXB0eVwiLCBhcyBwZXIgWUFNTCAxLjIsIHNlY3Rpb24gNy40XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCBcImV4cGVjdGVkIHRoZSBub2RlIGNvbnRlbnQsIGJ1dCBmb3VuZCAnLCdcIik7XG4gICAgfVxuXG4gICAga2V5VGFnID0ga2V5Tm9kZSA9IHZhbHVlTm9kZSA9IG51bGw7XG4gICAgaXNQYWlyID0gaXNFeHBsaWNpdFBhaXIgPSBmYWxzZTtcblxuICAgIGlmIChjaCA9PT0gMHgzRi8qID8gKi8pIHtcbiAgICAgIGZvbGxvd2luZyA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAxKTtcblxuICAgICAgaWYgKGlzX1dTX09SX0VPTChmb2xsb3dpbmcpKSB7XG4gICAgICAgIGlzUGFpciA9IGlzRXhwbGljaXRQYWlyID0gdHJ1ZTtcbiAgICAgICAgc3RhdGUucG9zaXRpb24rKztcbiAgICAgICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgbm9kZUluZGVudCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2xpbmUgPSBzdGF0ZS5saW5lOyAvLyBTYXZlIHRoZSBjdXJyZW50IGxpbmUuXG4gICAgX2xpbmVTdGFydCA9IHN0YXRlLmxpbmVTdGFydDtcbiAgICBfcG9zID0gc3RhdGUucG9zaXRpb247XG4gICAgY29tcG9zZU5vZGUoc3RhdGUsIG5vZGVJbmRlbnQsIENPTlRFWFRfRkxPV19JTiwgZmFsc2UsIHRydWUpO1xuICAgIGtleVRhZyA9IHN0YXRlLnRhZztcbiAgICBrZXlOb2RlID0gc3RhdGUucmVzdWx0O1xuICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIG5vZGVJbmRlbnQpO1xuXG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICAgIGlmICgoaXNFeHBsaWNpdFBhaXIgfHwgc3RhdGUubGluZSA9PT0gX2xpbmUpICYmIGNoID09PSAweDNBLyogOiAqLykge1xuICAgICAgaXNQYWlyID0gdHJ1ZTtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIG5vZGVJbmRlbnQpO1xuICAgICAgY29tcG9zZU5vZGUoc3RhdGUsIG5vZGVJbmRlbnQsIENPTlRFWFRfRkxPV19JTiwgZmFsc2UsIHRydWUpO1xuICAgICAgdmFsdWVOb2RlID0gc3RhdGUucmVzdWx0O1xuICAgIH1cblxuICAgIGlmIChpc01hcHBpbmcpIHtcbiAgICAgIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCB2YWx1ZU5vZGUsIF9saW5lLCBfbGluZVN0YXJ0LCBfcG9zKTtcbiAgICB9IGVsc2UgaWYgKGlzUGFpcikge1xuICAgICAgX3Jlc3VsdC5wdXNoKHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIG51bGwsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCB2YWx1ZU5vZGUsIF9saW5lLCBfbGluZVN0YXJ0LCBfcG9zKSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIF9yZXN1bHQucHVzaChrZXlOb2RlKTtcbiAgICB9XG5cbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCBub2RlSW5kZW50KTtcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoY2ggPT09IDB4MkMvKiAsICovKSB7XG4gICAgICByZWFkTmV4dCA9IHRydWU7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlYWROZXh0ID0gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZXhwZWN0ZWQgZW5kIG9mIHRoZSBzdHJlYW0gd2l0aGluIGEgZmxvdyBjb2xsZWN0aW9uJyk7XG59XG5cbmZ1bmN0aW9uIHJlYWRCbG9ja1NjYWxhcihzdGF0ZSwgbm9kZUluZGVudCkge1xuICB2YXIgY2FwdHVyZVN0YXJ0LFxuICAgICAgZm9sZGluZyxcbiAgICAgIGNob21waW5nICAgICAgID0gQ0hPTVBJTkdfQ0xJUCxcbiAgICAgIGRpZFJlYWRDb250ZW50ID0gZmFsc2UsXG4gICAgICBkZXRlY3RlZEluZGVudCA9IGZhbHNlLFxuICAgICAgdGV4dEluZGVudCAgICAgPSBub2RlSW5kZW50LFxuICAgICAgZW1wdHlMaW5lcyAgICAgPSAwLFxuICAgICAgYXRNb3JlSW5kZW50ZWQgPSBmYWxzZSxcbiAgICAgIHRtcCxcbiAgICAgIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoID09PSAweDdDLyogfCAqLykge1xuICAgIGZvbGRpbmcgPSBmYWxzZTtcbiAgfSBlbHNlIGlmIChjaCA9PT0gMHgzRS8qID4gKi8pIHtcbiAgICBmb2xkaW5nID0gdHJ1ZTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdGF0ZS5raW5kID0gJ3NjYWxhcic7XG4gIHN0YXRlLnJlc3VsdCA9ICcnO1xuXG4gIHdoaWxlIChjaCAhPT0gMCkge1xuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICAgIGlmIChjaCA9PT0gMHgyQi8qICsgKi8gfHwgY2ggPT09IDB4MkQvKiAtICovKSB7XG4gICAgICBpZiAoQ0hPTVBJTkdfQ0xJUCA9PT0gY2hvbXBpbmcpIHtcbiAgICAgICAgY2hvbXBpbmcgPSAoY2ggPT09IDB4MkIvKiArICovKSA/IENIT01QSU5HX0tFRVAgOiBDSE9NUElOR19TVFJJUDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdyZXBlYXQgb2YgYSBjaG9tcGluZyBtb2RlIGlkZW50aWZpZXInKTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSBpZiAoKHRtcCA9IGZyb21EZWNpbWFsQ29kZShjaCkpID49IDApIHtcbiAgICAgIGlmICh0bXAgPT09IDApIHtcbiAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2JhZCBleHBsaWNpdCBpbmRlbnRhdGlvbiB3aWR0aCBvZiBhIGJsb2NrIHNjYWxhcjsgaXQgY2Fubm90IGJlIGxlc3MgdGhhbiBvbmUnKTtcbiAgICAgIH0gZWxzZSBpZiAoIWRldGVjdGVkSW5kZW50KSB7XG4gICAgICAgIHRleHRJbmRlbnQgPSBub2RlSW5kZW50ICsgdG1wIC0gMTtcbiAgICAgICAgZGV0ZWN0ZWRJbmRlbnQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3JlcGVhdCBvZiBhbiBpbmRlbnRhdGlvbiB3aWR0aCBpZGVudGlmaWVyJyk7XG4gICAgICB9XG5cbiAgICB9IGVsc2Uge1xuICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG5cbiAgaWYgKGlzX1dISVRFX1NQQUNFKGNoKSkge1xuICAgIGRvIHsgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pOyB9XG4gICAgd2hpbGUgKGlzX1dISVRFX1NQQUNFKGNoKSk7XG5cbiAgICBpZiAoY2ggPT09IDB4MjMvKiAjICovKSB7XG4gICAgICBkbyB7IGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTsgfVxuICAgICAgd2hpbGUgKCFpc19FT0woY2gpICYmIChjaCAhPT0gMCkpO1xuICAgIH1cbiAgfVxuXG4gIHdoaWxlIChjaCAhPT0gMCkge1xuICAgIHJlYWRMaW5lQnJlYWsoc3RhdGUpO1xuICAgIHN0YXRlLmxpbmVJbmRlbnQgPSAwO1xuXG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICAgIHdoaWxlICgoIWRldGVjdGVkSW5kZW50IHx8IHN0YXRlLmxpbmVJbmRlbnQgPCB0ZXh0SW5kZW50KSAmJlxuICAgICAgICAgICAoY2ggPT09IDB4MjAvKiBTcGFjZSAqLykpIHtcbiAgICAgIHN0YXRlLmxpbmVJbmRlbnQrKztcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAoIWRldGVjdGVkSW5kZW50ICYmIHN0YXRlLmxpbmVJbmRlbnQgPiB0ZXh0SW5kZW50KSB7XG4gICAgICB0ZXh0SW5kZW50ID0gc3RhdGUubGluZUluZGVudDtcbiAgICB9XG5cbiAgICBpZiAoaXNfRU9MKGNoKSkge1xuICAgICAgZW1wdHlMaW5lcysrO1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgLy8gRW5kIG9mIHRoZSBzY2FsYXIuXG4gICAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPCB0ZXh0SW5kZW50KSB7XG5cbiAgICAgIC8vIFBlcmZvcm0gdGhlIGNob21waW5nLlxuICAgICAgaWYgKGNob21waW5nID09PSBDSE9NUElOR19LRUVQKSB7XG4gICAgICAgIHN0YXRlLnJlc3VsdCArPSBjb21tb24ucmVwZWF0KCdcXG4nLCBkaWRSZWFkQ29udGVudCA/IDEgKyBlbXB0eUxpbmVzIDogZW1wdHlMaW5lcyk7XG4gICAgICB9IGVsc2UgaWYgKGNob21waW5nID09PSBDSE9NUElOR19DTElQKSB7XG4gICAgICAgIGlmIChkaWRSZWFkQ29udGVudCkgeyAvLyBpLmUuIG9ubHkgaWYgdGhlIHNjYWxhciBpcyBub3QgZW1wdHkuXG4gICAgICAgICAgc3RhdGUucmVzdWx0ICs9ICdcXG4nO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIEJyZWFrIHRoaXMgYHdoaWxlYCBjeWNsZSBhbmQgZ28gdG8gdGhlIGZ1bmNpdG9uJ3MgZXBpbG9ndWUuXG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICAvLyBGb2xkZWQgc3R5bGU6IHVzZSBmYW5jeSBydWxlcyB0byBoYW5kbGUgbGluZSBicmVha3MuXG4gICAgaWYgKGZvbGRpbmcpIHtcblxuICAgICAgLy8gTGluZXMgc3RhcnRpbmcgd2l0aCB3aGl0ZSBzcGFjZSBjaGFyYWN0ZXJzIChtb3JlLWluZGVudGVkIGxpbmVzKSBhcmUgbm90IGZvbGRlZC5cbiAgICAgIGlmIChpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICAgICAgYXRNb3JlSW5kZW50ZWQgPSB0cnVlO1xuICAgICAgICAvLyBleGNlcHQgZm9yIHRoZSBmaXJzdCBjb250ZW50IGxpbmUgKGNmLiBFeGFtcGxlIDguMSlcbiAgICAgICAgc3RhdGUucmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJ1xcbicsIGRpZFJlYWRDb250ZW50ID8gMSArIGVtcHR5TGluZXMgOiBlbXB0eUxpbmVzKTtcblxuICAgICAgLy8gRW5kIG9mIG1vcmUtaW5kZW50ZWQgYmxvY2suXG4gICAgICB9IGVsc2UgaWYgKGF0TW9yZUluZGVudGVkKSB7XG4gICAgICAgIGF0TW9yZUluZGVudGVkID0gZmFsc2U7XG4gICAgICAgIHN0YXRlLnJlc3VsdCArPSBjb21tb24ucmVwZWF0KCdcXG4nLCBlbXB0eUxpbmVzICsgMSk7XG5cbiAgICAgIC8vIEp1c3Qgb25lIGxpbmUgYnJlYWsgLSBwZXJjZWl2ZSBhcyB0aGUgc2FtZSBsaW5lLlxuICAgICAgfSBlbHNlIGlmIChlbXB0eUxpbmVzID09PSAwKSB7XG4gICAgICAgIGlmIChkaWRSZWFkQ29udGVudCkgeyAvLyBpLmUuIG9ubHkgaWYgd2UgaGF2ZSBhbHJlYWR5IHJlYWQgc29tZSBzY2FsYXIgY29udGVudC5cbiAgICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gJyAnO1xuICAgICAgICB9XG5cbiAgICAgIC8vIFNldmVyYWwgbGluZSBicmVha3MgLSBwZXJjZWl2ZSBhcyBkaWZmZXJlbnQgbGluZXMuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnXFxuJywgZW1wdHlMaW5lcyk7XG4gICAgICB9XG5cbiAgICAvLyBMaXRlcmFsIHN0eWxlOiBqdXN0IGFkZCBleGFjdCBudW1iZXIgb2YgbGluZSBicmVha3MgYmV0d2VlbiBjb250ZW50IGxpbmVzLlxuICAgIH0gZWxzZSB7XG4gICAgICAvLyBLZWVwIGFsbCBsaW5lIGJyZWFrcyBleGNlcHQgdGhlIGhlYWRlciBsaW5lIGJyZWFrLlxuICAgICAgc3RhdGUucmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJ1xcbicsIGRpZFJlYWRDb250ZW50ID8gMSArIGVtcHR5TGluZXMgOiBlbXB0eUxpbmVzKTtcbiAgICB9XG5cbiAgICBkaWRSZWFkQ29udGVudCA9IHRydWU7XG4gICAgZGV0ZWN0ZWRJbmRlbnQgPSB0cnVlO1xuICAgIGVtcHR5TGluZXMgPSAwO1xuICAgIGNhcHR1cmVTdGFydCA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgd2hpbGUgKCFpc19FT0woY2gpICYmIChjaCAhPT0gMCkpIHtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBjYXB0dXJlU2VnbWVudChzdGF0ZSwgY2FwdHVyZVN0YXJ0LCBzdGF0ZS5wb3NpdGlvbiwgZmFsc2UpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJlYWRCbG9ja1NlcXVlbmNlKHN0YXRlLCBub2RlSW5kZW50KSB7XG4gIHZhciBfbGluZSxcbiAgICAgIF90YWcgICAgICA9IHN0YXRlLnRhZyxcbiAgICAgIF9hbmNob3IgICA9IHN0YXRlLmFuY2hvcixcbiAgICAgIF9yZXN1bHQgICA9IFtdLFxuICAgICAgZm9sbG93aW5nLFxuICAgICAgZGV0ZWN0ZWQgID0gZmFsc2UsXG4gICAgICBjaDtcblxuICAvLyB0aGVyZSBpcyBhIGxlYWRpbmcgdGFiIGJlZm9yZSB0aGlzIHRva2VuLCBzbyBpdCBjYW4ndCBiZSBhIGJsb2NrIHNlcXVlbmNlL21hcHBpbmc7XG4gIC8vIGl0IGNhbiBzdGlsbCBiZSBmbG93IHNlcXVlbmNlL21hcHBpbmcgb3IgYSBzY2FsYXJcbiAgaWYgKHN0YXRlLmZpcnN0VGFiSW5MaW5lICE9PSAtMSkgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChzdGF0ZS5hbmNob3IgIT09IG51bGwpIHtcbiAgICBzdGF0ZS5hbmNob3JNYXBbc3RhdGUuYW5jaG9yXSA9IF9yZXN1bHQ7XG4gIH1cblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIHdoaWxlIChjaCAhPT0gMCkge1xuICAgIGlmIChzdGF0ZS5maXJzdFRhYkluTGluZSAhPT0gLTEpIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uID0gc3RhdGUuZmlyc3RUYWJJbkxpbmU7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGFiIGNoYXJhY3RlcnMgbXVzdCBub3QgYmUgdXNlZCBpbiBpbmRlbnRhdGlvbicpO1xuICAgIH1cblxuICAgIGlmIChjaCAhPT0gMHgyRC8qIC0gKi8pIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGZvbGxvd2luZyA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAxKTtcblxuICAgIGlmICghaXNfV1NfT1JfRU9MKGZvbGxvd2luZykpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGRldGVjdGVkID0gdHJ1ZTtcbiAgICBzdGF0ZS5wb3NpdGlvbisrO1xuXG4gICAgaWYgKHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKSkge1xuICAgICAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPD0gbm9kZUluZGVudCkge1xuICAgICAgICBfcmVzdWx0LnB1c2gobnVsbCk7XG4gICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuICAgIH1cblxuICAgIF9saW5lID0gc3RhdGUubGluZTtcbiAgICBjb21wb3NlTm9kZShzdGF0ZSwgbm9kZUluZGVudCwgQ09OVEVYVF9CTE9DS19JTiwgZmFsc2UsIHRydWUpO1xuICAgIF9yZXN1bHQucHVzaChzdGF0ZS5yZXN1bHQpO1xuICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKTtcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoKHN0YXRlLmxpbmUgPT09IF9saW5lIHx8IHN0YXRlLmxpbmVJbmRlbnQgPiBub2RlSW5kZW50KSAmJiAoY2ggIT09IDApKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYmFkIGluZGVudGF0aW9uIG9mIGEgc2VxdWVuY2UgZW50cnknKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPCBub2RlSW5kZW50KSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoZGV0ZWN0ZWQpIHtcbiAgICBzdGF0ZS50YWcgPSBfdGFnO1xuICAgIHN0YXRlLmFuY2hvciA9IF9hbmNob3I7XG4gICAgc3RhdGUua2luZCA9ICdzZXF1ZW5jZSc7XG4gICAgc3RhdGUucmVzdWx0ID0gX3Jlc3VsdDtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIHJlYWRCbG9ja01hcHBpbmcoc3RhdGUsIG5vZGVJbmRlbnQsIGZsb3dJbmRlbnQpIHtcbiAgdmFyIGZvbGxvd2luZyxcbiAgICAgIGFsbG93Q29tcGFjdCxcbiAgICAgIF9saW5lLFxuICAgICAgX2tleUxpbmUsXG4gICAgICBfa2V5TGluZVN0YXJ0LFxuICAgICAgX2tleVBvcyxcbiAgICAgIF90YWcgICAgICAgICAgPSBzdGF0ZS50YWcsXG4gICAgICBfYW5jaG9yICAgICAgID0gc3RhdGUuYW5jaG9yLFxuICAgICAgX3Jlc3VsdCAgICAgICA9IHt9LFxuICAgICAgb3ZlcnJpZGFibGVLZXlzID0gT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgIGtleVRhZyAgICAgICAgPSBudWxsLFxuICAgICAga2V5Tm9kZSAgICAgICA9IG51bGwsXG4gICAgICB2YWx1ZU5vZGUgICAgID0gbnVsbCxcbiAgICAgIGF0RXhwbGljaXRLZXkgPSBmYWxzZSxcbiAgICAgIGRldGVjdGVkICAgICAgPSBmYWxzZSxcbiAgICAgIGNoO1xuXG4gIC8vIHRoZXJlIGlzIGEgbGVhZGluZyB0YWIgYmVmb3JlIHRoaXMgdG9rZW4sIHNvIGl0IGNhbid0IGJlIGEgYmxvY2sgc2VxdWVuY2UvbWFwcGluZztcbiAgLy8gaXQgY2FuIHN0aWxsIGJlIGZsb3cgc2VxdWVuY2UvbWFwcGluZyBvciBhIHNjYWxhclxuICBpZiAoc3RhdGUuZmlyc3RUYWJJbkxpbmUgIT09IC0xKSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gX3Jlc3VsdDtcbiAgfVxuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgd2hpbGUgKGNoICE9PSAwKSB7XG4gICAgaWYgKCFhdEV4cGxpY2l0S2V5ICYmIHN0YXRlLmZpcnN0VGFiSW5MaW5lICE9PSAtMSkge1xuICAgICAgc3RhdGUucG9zaXRpb24gPSBzdGF0ZS5maXJzdFRhYkluTGluZTtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd0YWIgY2hhcmFjdGVycyBtdXN0IG5vdCBiZSB1c2VkIGluIGluZGVudGF0aW9uJyk7XG4gICAgfVxuXG4gICAgZm9sbG93aW5nID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiArIDEpO1xuICAgIF9saW5lID0gc3RhdGUubGluZTsgLy8gU2F2ZSB0aGUgY3VycmVudCBsaW5lLlxuXG4gICAgLy9cbiAgICAvLyBFeHBsaWNpdCBub3RhdGlvbiBjYXNlLiBUaGVyZSBhcmUgdHdvIHNlcGFyYXRlIGJsb2NrczpcbiAgICAvLyBmaXJzdCBmb3IgdGhlIGtleSAoZGVub3RlZCBieSBcIj9cIikgYW5kIHNlY29uZCBmb3IgdGhlIHZhbHVlIChkZW5vdGVkIGJ5IFwiOlwiKVxuICAgIC8vXG4gICAgaWYgKChjaCA9PT0gMHgzRi8qID8gKi8gfHwgY2ggPT09IDB4M0EvKiA6ICovKSAmJiBpc19XU19PUl9FT0woZm9sbG93aW5nKSkge1xuXG4gICAgICBpZiAoY2ggPT09IDB4M0YvKiA/ICovKSB7XG4gICAgICAgIGlmIChhdEV4cGxpY2l0S2V5KSB7XG4gICAgICAgICAgc3RvcmVNYXBwaW5nUGFpcihzdGF0ZSwgX3Jlc3VsdCwgb3ZlcnJpZGFibGVLZXlzLCBrZXlUYWcsIGtleU5vZGUsIG51bGwsIF9rZXlMaW5lLCBfa2V5TGluZVN0YXJ0LCBfa2V5UG9zKTtcbiAgICAgICAgICBrZXlUYWcgPSBrZXlOb2RlID0gdmFsdWVOb2RlID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGRldGVjdGVkID0gdHJ1ZTtcbiAgICAgICAgYXRFeHBsaWNpdEtleSA9IHRydWU7XG4gICAgICAgIGFsbG93Q29tcGFjdCA9IHRydWU7XG5cbiAgICAgIH0gZWxzZSBpZiAoYXRFeHBsaWNpdEtleSkge1xuICAgICAgICAvLyBpLmUuIDB4M0EvKiA6ICovID09PSBjaGFyYWN0ZXIgYWZ0ZXIgdGhlIGV4cGxpY2l0IGtleS5cbiAgICAgICAgYXRFeHBsaWNpdEtleSA9IGZhbHNlO1xuICAgICAgICBhbGxvd0NvbXBhY3QgPSB0cnVlO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnaW5jb21wbGV0ZSBleHBsaWNpdCBtYXBwaW5nIHBhaXI7IGEga2V5IG5vZGUgaXMgbWlzc2VkOyBvciBmb2xsb3dlZCBieSBhIG5vbi10YWJ1bGF0ZWQgZW1wdHkgbGluZScpO1xuICAgICAgfVxuXG4gICAgICBzdGF0ZS5wb3NpdGlvbiArPSAxO1xuICAgICAgY2ggPSBmb2xsb3dpbmc7XG5cbiAgICAvL1xuICAgIC8vIEltcGxpY2l0IG5vdGF0aW9uIGNhc2UuIEZsb3ctc3R5bGUgbm9kZSBhcyB0aGUga2V5IGZpcnN0LCB0aGVuIFwiOlwiLCBhbmQgdGhlIHZhbHVlLlxuICAgIC8vXG4gICAgfSBlbHNlIHtcbiAgICAgIF9rZXlMaW5lID0gc3RhdGUubGluZTtcbiAgICAgIF9rZXlMaW5lU3RhcnQgPSBzdGF0ZS5saW5lU3RhcnQ7XG4gICAgICBfa2V5UG9zID0gc3RhdGUucG9zaXRpb247XG5cbiAgICAgIGlmICghY29tcG9zZU5vZGUoc3RhdGUsIGZsb3dJbmRlbnQsIENPTlRFWFRfRkxPV19PVVQsIGZhbHNlLCB0cnVlKSkge1xuICAgICAgICAvLyBOZWl0aGVyIGltcGxpY2l0IG5vciBleHBsaWNpdCBub3RhdGlvbi5cbiAgICAgICAgLy8gUmVhZGluZyBpcyBkb25lLiBHbyB0byB0aGUgZXBpbG9ndWUuXG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUubGluZSA9PT0gX2xpbmUpIHtcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICAgICAgICB3aGlsZSAoaXNfV0hJVEVfU1BBQ0UoY2gpKSB7XG4gICAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGNoID09PSAweDNBLyogOiAqLykge1xuICAgICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICAgICAgICAgIGlmICghaXNfV1NfT1JfRU9MKGNoKSkge1xuICAgICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2Egd2hpdGVzcGFjZSBjaGFyYWN0ZXIgaXMgZXhwZWN0ZWQgYWZ0ZXIgdGhlIGtleS12YWx1ZSBzZXBhcmF0b3Igd2l0aGluIGEgYmxvY2sgbWFwcGluZycpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChhdEV4cGxpY2l0S2V5KSB7XG4gICAgICAgICAgICBzdG9yZU1hcHBpbmdQYWlyKHN0YXRlLCBfcmVzdWx0LCBvdmVycmlkYWJsZUtleXMsIGtleVRhZywga2V5Tm9kZSwgbnVsbCwgX2tleUxpbmUsIF9rZXlMaW5lU3RhcnQsIF9rZXlQb3MpO1xuICAgICAgICAgICAga2V5VGFnID0ga2V5Tm9kZSA9IHZhbHVlTm9kZSA9IG51bGw7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgZGV0ZWN0ZWQgPSB0cnVlO1xuICAgICAgICAgIGF0RXhwbGljaXRLZXkgPSBmYWxzZTtcbiAgICAgICAgICBhbGxvd0NvbXBhY3QgPSBmYWxzZTtcbiAgICAgICAgICBrZXlUYWcgPSBzdGF0ZS50YWc7XG4gICAgICAgICAga2V5Tm9kZSA9IHN0YXRlLnJlc3VsdDtcblxuICAgICAgICB9IGVsc2UgaWYgKGRldGVjdGVkKSB7XG4gICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2NhbiBub3QgcmVhZCBhbiBpbXBsaWNpdCBtYXBwaW5nIHBhaXI7IGEgY29sb24gaXMgbWlzc2VkJyk7XG5cbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBzdGF0ZS50YWcgPSBfdGFnO1xuICAgICAgICAgIHN0YXRlLmFuY2hvciA9IF9hbmNob3I7XG4gICAgICAgICAgcmV0dXJuIHRydWU7IC8vIEtlZXAgdGhlIHJlc3VsdCBvZiBgY29tcG9zZU5vZGVgLlxuICAgICAgICB9XG5cbiAgICAgIH0gZWxzZSBpZiAoZGV0ZWN0ZWQpIHtcbiAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2NhbiBub3QgcmVhZCBhIGJsb2NrIG1hcHBpbmcgZW50cnk7IGEgbXVsdGlsaW5lIGtleSBtYXkgbm90IGJlIGFuIGltcGxpY2l0IGtleScpO1xuXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS50YWcgPSBfdGFnO1xuICAgICAgICBzdGF0ZS5hbmNob3IgPSBfYW5jaG9yO1xuICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gS2VlcCB0aGUgcmVzdWx0IG9mIGBjb21wb3NlTm9kZWAuXG4gICAgICB9XG4gICAgfVxuXG4gICAgLy9cbiAgICAvLyBDb21tb24gcmVhZGluZyBjb2RlIGZvciBib3RoIGV4cGxpY2l0IGFuZCBpbXBsaWNpdCBub3RhdGlvbnMuXG4gICAgLy9cbiAgICBpZiAoc3RhdGUubGluZSA9PT0gX2xpbmUgfHwgc3RhdGUubGluZUluZGVudCA+IG5vZGVJbmRlbnQpIHtcbiAgICAgIGlmIChhdEV4cGxpY2l0S2V5KSB7XG4gICAgICAgIF9rZXlMaW5lID0gc3RhdGUubGluZTtcbiAgICAgICAgX2tleUxpbmVTdGFydCA9IHN0YXRlLmxpbmVTdGFydDtcbiAgICAgICAgX2tleVBvcyA9IHN0YXRlLnBvc2l0aW9uO1xuICAgICAgfVxuXG4gICAgICBpZiAoY29tcG9zZU5vZGUoc3RhdGUsIG5vZGVJbmRlbnQsIENPTlRFWFRfQkxPQ0tfT1VULCB0cnVlLCBhbGxvd0NvbXBhY3QpKSB7XG4gICAgICAgIGlmIChhdEV4cGxpY2l0S2V5KSB7XG4gICAgICAgICAga2V5Tm9kZSA9IHN0YXRlLnJlc3VsdDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB2YWx1ZU5vZGUgPSBzdGF0ZS5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgaWYgKCFhdEV4cGxpY2l0S2V5KSB7XG4gICAgICAgIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCB2YWx1ZU5vZGUsIF9rZXlMaW5lLCBfa2V5TGluZVN0YXJ0LCBfa2V5UG9zKTtcbiAgICAgICAga2V5VGFnID0ga2V5Tm9kZSA9IHZhbHVlTm9kZSA9IG51bGw7XG4gICAgICB9XG5cbiAgICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKTtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKChzdGF0ZS5saW5lID09PSBfbGluZSB8fCBzdGF0ZS5saW5lSW5kZW50ID4gbm9kZUluZGVudCkgJiYgKGNoICE9PSAwKSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2JhZCBpbmRlbnRhdGlvbiBvZiBhIG1hcHBpbmcgZW50cnknKTtcbiAgICB9IGVsc2UgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPCBub2RlSW5kZW50KSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICAvL1xuICAvLyBFcGlsb2d1ZS5cbiAgLy9cblxuICAvLyBTcGVjaWFsIGNhc2U6IGxhc3QgbWFwcGluZydzIG5vZGUgY29udGFpbnMgb25seSB0aGUga2V5IGluIGV4cGxpY2l0IG5vdGF0aW9uLlxuICBpZiAoYXRFeHBsaWNpdEtleSkge1xuICAgIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCBudWxsLCBfa2V5TGluZSwgX2tleUxpbmVTdGFydCwgX2tleVBvcyk7XG4gIH1cblxuICAvLyBFeHBvc2UgdGhlIHJlc3VsdGluZyBtYXBwaW5nLlxuICBpZiAoZGV0ZWN0ZWQpIHtcbiAgICBzdGF0ZS50YWcgPSBfdGFnO1xuICAgIHN0YXRlLmFuY2hvciA9IF9hbmNob3I7XG4gICAgc3RhdGUua2luZCA9ICdtYXBwaW5nJztcbiAgICBzdGF0ZS5yZXN1bHQgPSBfcmVzdWx0O1xuICB9XG5cbiAgcmV0dXJuIGRldGVjdGVkO1xufVxuXG5mdW5jdGlvbiByZWFkVGFnUHJvcGVydHkoc3RhdGUpIHtcbiAgdmFyIF9wb3NpdGlvbixcbiAgICAgIGlzVmVyYmF0aW0gPSBmYWxzZSxcbiAgICAgIGlzTmFtZWQgICAgPSBmYWxzZSxcbiAgICAgIHRhZ0hhbmRsZSxcbiAgICAgIHRhZ05hbWUsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCAhPT0gMHgyMS8qICEgKi8pIHJldHVybiBmYWxzZTtcblxuICBpZiAoc3RhdGUudGFnICE9PSBudWxsKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2R1cGxpY2F0aW9uIG9mIGEgdGFnIHByb3BlcnR5Jyk7XG4gIH1cblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoID09PSAweDNDLyogPCAqLykge1xuICAgIGlzVmVyYmF0aW0gPSB0cnVlO1xuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICB9IGVsc2UgaWYgKGNoID09PSAweDIxLyogISAqLykge1xuICAgIGlzTmFtZWQgPSB0cnVlO1xuICAgIHRhZ0hhbmRsZSA9ICchISc7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gIH0gZWxzZSB7XG4gICAgdGFnSGFuZGxlID0gJyEnO1xuICB9XG5cbiAgX3Bvc2l0aW9uID0gc3RhdGUucG9zaXRpb247XG5cbiAgaWYgKGlzVmVyYmF0aW0pIHtcbiAgICBkbyB7IGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTsgfVxuICAgIHdoaWxlIChjaCAhPT0gMCAmJiBjaCAhPT0gMHgzRS8qID4gKi8pO1xuXG4gICAgaWYgKHN0YXRlLnBvc2l0aW9uIDwgc3RhdGUubGVuZ3RoKSB7XG4gICAgICB0YWdOYW1lID0gc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uLCBzdGF0ZS5wb3NpdGlvbik7XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmV4cGVjdGVkIGVuZCBvZiB0aGUgc3RyZWFtIHdpdGhpbiBhIHZlcmJhdGltIHRhZycpO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB3aGlsZSAoY2ggIT09IDAgJiYgIWlzX1dTX09SX0VPTChjaCkpIHtcblxuICAgICAgaWYgKGNoID09PSAweDIxLyogISAqLykge1xuICAgICAgICBpZiAoIWlzTmFtZWQpIHtcbiAgICAgICAgICB0YWdIYW5kbGUgPSBzdGF0ZS5pbnB1dC5zbGljZShfcG9zaXRpb24gLSAxLCBzdGF0ZS5wb3NpdGlvbiArIDEpO1xuXG4gICAgICAgICAgaWYgKCFQQVRURVJOX1RBR19IQU5ETEUudGVzdCh0YWdIYW5kbGUpKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbmFtZWQgdGFnIGhhbmRsZSBjYW5ub3QgY29udGFpbiBzdWNoIGNoYXJhY3RlcnMnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpc05hbWVkID0gdHJ1ZTtcbiAgICAgICAgICBfcG9zaXRpb24gPSBzdGF0ZS5wb3NpdGlvbiArIDE7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3RhZyBzdWZmaXggY2Fubm90IGNvbnRhaW4gZXhjbGFtYXRpb24gbWFya3MnKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgdGFnTmFtZSA9IHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiwgc3RhdGUucG9zaXRpb24pO1xuXG4gICAgaWYgKFBBVFRFUk5fRkxPV19JTkRJQ0FUT1JTLnRlc3QodGFnTmFtZSkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd0YWcgc3VmZml4IGNhbm5vdCBjb250YWluIGZsb3cgaW5kaWNhdG9yIGNoYXJhY3RlcnMnKTtcbiAgICB9XG4gIH1cblxuICBpZiAodGFnTmFtZSAmJiAhUEFUVEVSTl9UQUdfVVJJLnRlc3QodGFnTmFtZSkpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGFnIG5hbWUgY2Fubm90IGNvbnRhaW4gc3VjaCBjaGFyYWN0ZXJzOiAnICsgdGFnTmFtZSk7XG4gIH1cblxuICB0cnkge1xuICAgIHRhZ05hbWUgPSBkZWNvZGVVUklDb21wb25lbnQodGFnTmFtZSk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICd0YWcgbmFtZSBpcyBtYWxmb3JtZWQ6ICcgKyB0YWdOYW1lKTtcbiAgfVxuXG4gIGlmIChpc1ZlcmJhdGltKSB7XG4gICAgc3RhdGUudGFnID0gdGFnTmFtZTtcblxuICB9IGVsc2UgaWYgKF9oYXNPd25Qcm9wZXJ0eSQxLmNhbGwoc3RhdGUudGFnTWFwLCB0YWdIYW5kbGUpKSB7XG4gICAgc3RhdGUudGFnID0gc3RhdGUudGFnTWFwW3RhZ0hhbmRsZV0gKyB0YWdOYW1lO1xuXG4gIH0gZWxzZSBpZiAodGFnSGFuZGxlID09PSAnIScpIHtcbiAgICBzdGF0ZS50YWcgPSAnIScgKyB0YWdOYW1lO1xuXG4gIH0gZWxzZSBpZiAodGFnSGFuZGxlID09PSAnISEnKSB7XG4gICAgc3RhdGUudGFnID0gJ3RhZzp5YW1sLm9yZywyMDAyOicgKyB0YWdOYW1lO1xuXG4gIH0gZWxzZSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZGVjbGFyZWQgdGFnIGhhbmRsZSBcIicgKyB0YWdIYW5kbGUgKyAnXCInKTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZWFkQW5jaG9yUHJvcGVydHkoc3RhdGUpIHtcbiAgdmFyIF9wb3NpdGlvbixcbiAgICAgIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoICE9PSAweDI2LyogJiAqLykgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChzdGF0ZS5hbmNob3IgIT09IG51bGwpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZHVwbGljYXRpb24gb2YgYW4gYW5jaG9yIHByb3BlcnR5Jyk7XG4gIH1cblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfV1NfT1JfRU9MKGNoKSAmJiAhaXNfRkxPV19JTkRJQ0FUT1IoY2gpKSB7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICB9XG5cbiAgaWYgKHN0YXRlLnBvc2l0aW9uID09PSBfcG9zaXRpb24pIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbmFtZSBvZiBhbiBhbmNob3Igbm9kZSBtdXN0IGNvbnRhaW4gYXQgbGVhc3Qgb25lIGNoYXJhY3RlcicpO1xuICB9XG5cbiAgc3RhdGUuYW5jaG9yID0gc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uLCBzdGF0ZS5wb3NpdGlvbik7XG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiByZWFkQWxpYXMoc3RhdGUpIHtcbiAgdmFyIF9wb3NpdGlvbiwgYWxpYXMsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCAhPT0gMHgyQS8qICogKi8pIHJldHVybiBmYWxzZTtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfV1NfT1JfRU9MKGNoKSAmJiAhaXNfRkxPV19JTkRJQ0FUT1IoY2gpKSB7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICB9XG5cbiAgaWYgKHN0YXRlLnBvc2l0aW9uID09PSBfcG9zaXRpb24pIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbmFtZSBvZiBhbiBhbGlhcyBub2RlIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgY2hhcmFjdGVyJyk7XG4gIH1cblxuICBhbGlhcyA9IHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiwgc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmICghX2hhc093blByb3BlcnR5JDEuY2FsbChzdGF0ZS5hbmNob3JNYXAsIGFsaWFzKSkge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmlkZW50aWZpZWQgYWxpYXMgXCInICsgYWxpYXMgKyAnXCInKTtcbiAgfVxuXG4gIHN0YXRlLnJlc3VsdCA9IHN0YXRlLmFuY2hvck1hcFthbGlhc107XG4gIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbXBvc2VOb2RlKHN0YXRlLCBwYXJlbnRJbmRlbnQsIG5vZGVDb250ZXh0LCBhbGxvd1RvU2VlaywgYWxsb3dDb21wYWN0KSB7XG4gIHZhciBhbGxvd0Jsb2NrU3R5bGVzLFxuICAgICAgYWxsb3dCbG9ja1NjYWxhcnMsXG4gICAgICBhbGxvd0Jsb2NrQ29sbGVjdGlvbnMsXG4gICAgICBpbmRlbnRTdGF0dXMgPSAxLCAvLyAxOiB0aGlzPnBhcmVudCwgMDogdGhpcz1wYXJlbnQsIC0xOiB0aGlzPHBhcmVudFxuICAgICAgYXROZXdMaW5lICA9IGZhbHNlLFxuICAgICAgaGFzQ29udGVudCA9IGZhbHNlLFxuICAgICAgdHlwZUluZGV4LFxuICAgICAgdHlwZVF1YW50aXR5LFxuICAgICAgdHlwZUxpc3QsXG4gICAgICB0eXBlLFxuICAgICAgZmxvd0luZGVudCxcbiAgICAgIGJsb2NrSW5kZW50O1xuXG4gIGlmIChzdGF0ZS5saXN0ZW5lciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmxpc3RlbmVyKCdvcGVuJywgc3RhdGUpO1xuICB9XG5cbiAgc3RhdGUudGFnICAgID0gbnVsbDtcbiAgc3RhdGUuYW5jaG9yID0gbnVsbDtcbiAgc3RhdGUua2luZCAgID0gbnVsbDtcbiAgc3RhdGUucmVzdWx0ID0gbnVsbDtcblxuICBhbGxvd0Jsb2NrU3R5bGVzID0gYWxsb3dCbG9ja1NjYWxhcnMgPSBhbGxvd0Jsb2NrQ29sbGVjdGlvbnMgPVxuICAgIENPTlRFWFRfQkxPQ0tfT1VUID09PSBub2RlQ29udGV4dCB8fFxuICAgIENPTlRFWFRfQkxPQ0tfSU4gID09PSBub2RlQ29udGV4dDtcblxuICBpZiAoYWxsb3dUb1NlZWspIHtcbiAgICBpZiAoc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpKSB7XG4gICAgICBhdE5ld0xpbmUgPSB0cnVlO1xuXG4gICAgICBpZiAoc3RhdGUubGluZUluZGVudCA+IHBhcmVudEluZGVudCkge1xuICAgICAgICBpbmRlbnRTdGF0dXMgPSAxO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZS5saW5lSW5kZW50ID09PSBwYXJlbnRJbmRlbnQpIHtcbiAgICAgICAgaW5kZW50U3RhdHVzID0gMDtcbiAgICAgIH0gZWxzZSBpZiAoc3RhdGUubGluZUluZGVudCA8IHBhcmVudEluZGVudCkge1xuICAgICAgICBpbmRlbnRTdGF0dXMgPSAtMTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoaW5kZW50U3RhdHVzID09PSAxKSB7XG4gICAgd2hpbGUgKHJlYWRUYWdQcm9wZXJ0eShzdGF0ZSkgfHwgcmVhZEFuY2hvclByb3BlcnR5KHN0YXRlKSkge1xuICAgICAgaWYgKHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKSkge1xuICAgICAgICBhdE5ld0xpbmUgPSB0cnVlO1xuICAgICAgICBhbGxvd0Jsb2NrQ29sbGVjdGlvbnMgPSBhbGxvd0Jsb2NrU3R5bGVzO1xuXG4gICAgICAgIGlmIChzdGF0ZS5saW5lSW5kZW50ID4gcGFyZW50SW5kZW50KSB7XG4gICAgICAgICAgaW5kZW50U3RhdHVzID0gMTtcbiAgICAgICAgfSBlbHNlIGlmIChzdGF0ZS5saW5lSW5kZW50ID09PSBwYXJlbnRJbmRlbnQpIHtcbiAgICAgICAgICBpbmRlbnRTdGF0dXMgPSAwO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPCBwYXJlbnRJbmRlbnQpIHtcbiAgICAgICAgICBpbmRlbnRTdGF0dXMgPSAtMTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgYWxsb3dCbG9ja0NvbGxlY3Rpb25zID0gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKGFsbG93QmxvY2tDb2xsZWN0aW9ucykge1xuICAgIGFsbG93QmxvY2tDb2xsZWN0aW9ucyA9IGF0TmV3TGluZSB8fCBhbGxvd0NvbXBhY3Q7XG4gIH1cblxuICBpZiAoaW5kZW50U3RhdHVzID09PSAxIHx8IENPTlRFWFRfQkxPQ0tfT1VUID09PSBub2RlQ29udGV4dCkge1xuICAgIGlmIChDT05URVhUX0ZMT1dfSU4gPT09IG5vZGVDb250ZXh0IHx8IENPTlRFWFRfRkxPV19PVVQgPT09IG5vZGVDb250ZXh0KSB7XG4gICAgICBmbG93SW5kZW50ID0gcGFyZW50SW5kZW50O1xuICAgIH0gZWxzZSB7XG4gICAgICBmbG93SW5kZW50ID0gcGFyZW50SW5kZW50ICsgMTtcbiAgICB9XG5cbiAgICBibG9ja0luZGVudCA9IHN0YXRlLnBvc2l0aW9uIC0gc3RhdGUubGluZVN0YXJ0O1xuXG4gICAgaWYgKGluZGVudFN0YXR1cyA9PT0gMSkge1xuICAgICAgaWYgKGFsbG93QmxvY2tDb2xsZWN0aW9ucyAmJlxuICAgICAgICAgIChyZWFkQmxvY2tTZXF1ZW5jZShzdGF0ZSwgYmxvY2tJbmRlbnQpIHx8XG4gICAgICAgICAgIHJlYWRCbG9ja01hcHBpbmcoc3RhdGUsIGJsb2NrSW5kZW50LCBmbG93SW5kZW50KSkgfHxcbiAgICAgICAgICByZWFkRmxvd0NvbGxlY3Rpb24oc3RhdGUsIGZsb3dJbmRlbnQpKSB7XG4gICAgICAgIGhhc0NvbnRlbnQgPSB0cnVlO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgaWYgKChhbGxvd0Jsb2NrU2NhbGFycyAmJiByZWFkQmxvY2tTY2FsYXIoc3RhdGUsIGZsb3dJbmRlbnQpKSB8fFxuICAgICAgICAgICAgcmVhZFNpbmdsZVF1b3RlZFNjYWxhcihzdGF0ZSwgZmxvd0luZGVudCkgfHxcbiAgICAgICAgICAgIHJlYWREb3VibGVRdW90ZWRTY2FsYXIoc3RhdGUsIGZsb3dJbmRlbnQpKSB7XG4gICAgICAgICAgaGFzQ29udGVudCA9IHRydWU7XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWFkQWxpYXMoc3RhdGUpKSB7XG4gICAgICAgICAgaGFzQ29udGVudCA9IHRydWU7XG5cbiAgICAgICAgICBpZiAoc3RhdGUudGFnICE9PSBudWxsIHx8IHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgICAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2FsaWFzIG5vZGUgc2hvdWxkIG5vdCBoYXZlIGFueSBwcm9wZXJ0aWVzJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgIH0gZWxzZSBpZiAocmVhZFBsYWluU2NhbGFyKHN0YXRlLCBmbG93SW5kZW50LCBDT05URVhUX0ZMT1dfSU4gPT09IG5vZGVDb250ZXh0KSkge1xuICAgICAgICAgIGhhc0NvbnRlbnQgPSB0cnVlO1xuXG4gICAgICAgICAgaWYgKHN0YXRlLnRhZyA9PT0gbnVsbCkge1xuICAgICAgICAgICAgc3RhdGUudGFnID0gJz8nO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzdGF0ZS5hbmNob3IgIT09IG51bGwpIHtcbiAgICAgICAgICBzdGF0ZS5hbmNob3JNYXBbc3RhdGUuYW5jaG9yXSA9IHN0YXRlLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoaW5kZW50U3RhdHVzID09PSAwKSB7XG4gICAgICAvLyBTcGVjaWFsIGNhc2U6IGJsb2NrIHNlcXVlbmNlcyBhcmUgYWxsb3dlZCB0byBoYXZlIHNhbWUgaW5kZW50YXRpb24gbGV2ZWwgYXMgdGhlIHBhcmVudC5cbiAgICAgIC8vIGh0dHA6Ly93d3cueWFtbC5vcmcvc3BlYy8xLjIvc3BlYy5odG1sI2lkMjc5OTc4NFxuICAgICAgaGFzQ29udGVudCA9IGFsbG93QmxvY2tDb2xsZWN0aW9ucyAmJiByZWFkQmxvY2tTZXF1ZW5jZShzdGF0ZSwgYmxvY2tJbmRlbnQpO1xuICAgIH1cbiAgfVxuXG4gIGlmIChzdGF0ZS50YWcgPT09IG51bGwpIHtcbiAgICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgICBzdGF0ZS5hbmNob3JNYXBbc3RhdGUuYW5jaG9yXSA9IHN0YXRlLnJlc3VsdDtcbiAgICB9XG5cbiAgfSBlbHNlIGlmIChzdGF0ZS50YWcgPT09ICc/Jykge1xuICAgIC8vIEltcGxpY2l0IHJlc29sdmluZyBpcyBub3QgYWxsb3dlZCBmb3Igbm9uLXNjYWxhciB0eXBlcywgYW5kICc/J1xuICAgIC8vIG5vbi1zcGVjaWZpYyB0YWcgaXMgb25seSBhdXRvbWF0aWNhbGx5IGFzc2lnbmVkIHRvIHBsYWluIHNjYWxhcnMuXG4gICAgLy9cbiAgICAvLyBXZSBvbmx5IG5lZWQgdG8gY2hlY2sga2luZCBjb25mb3JtaXR5IGluIGNhc2UgdXNlciBleHBsaWNpdGx5IGFzc2lnbnMgJz8nXG4gICAgLy8gdGFnLCBmb3IgZXhhbXBsZSBsaWtlIHRoaXM6IFwiITw/PiBbMF1cIlxuICAgIC8vXG4gICAgaWYgKHN0YXRlLnJlc3VsdCAhPT0gbnVsbCAmJiBzdGF0ZS5raW5kICE9PSAnc2NhbGFyJykge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuYWNjZXB0YWJsZSBub2RlIGtpbmQgZm9yICE8Pz4gdGFnOyBpdCBzaG91bGQgYmUgXCJzY2FsYXJcIiwgbm90IFwiJyArIHN0YXRlLmtpbmQgKyAnXCInKTtcbiAgICB9XG5cbiAgICBmb3IgKHR5cGVJbmRleCA9IDAsIHR5cGVRdWFudGl0eSA9IHN0YXRlLmltcGxpY2l0VHlwZXMubGVuZ3RoOyB0eXBlSW5kZXggPCB0eXBlUXVhbnRpdHk7IHR5cGVJbmRleCArPSAxKSB7XG4gICAgICB0eXBlID0gc3RhdGUuaW1wbGljaXRUeXBlc1t0eXBlSW5kZXhdO1xuXG4gICAgICBpZiAodHlwZS5yZXNvbHZlKHN0YXRlLnJlc3VsdCkpIHsgLy8gYHN0YXRlLnJlc3VsdGAgdXBkYXRlZCBpbiByZXNvbHZlciBpZiBtYXRjaGVkXG4gICAgICAgIHN0YXRlLnJlc3VsdCA9IHR5cGUuY29uc3RydWN0KHN0YXRlLnJlc3VsdCk7XG4gICAgICAgIHN0YXRlLnRhZyA9IHR5cGUudGFnO1xuICAgICAgICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgc3RhdGUuYW5jaG9yTWFwW3N0YXRlLmFuY2hvcl0gPSBzdGF0ZS5yZXN1bHQ7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfVxuICB9IGVsc2UgaWYgKHN0YXRlLnRhZyAhPT0gJyEnKSB7XG4gICAgaWYgKF9oYXNPd25Qcm9wZXJ0eSQxLmNhbGwoc3RhdGUudHlwZU1hcFtzdGF0ZS5raW5kIHx8ICdmYWxsYmFjayddLCBzdGF0ZS50YWcpKSB7XG4gICAgICB0eXBlID0gc3RhdGUudHlwZU1hcFtzdGF0ZS5raW5kIHx8ICdmYWxsYmFjayddW3N0YXRlLnRhZ107XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIGxvb2tpbmcgZm9yIG11bHRpIHR5cGVcbiAgICAgIHR5cGUgPSBudWxsO1xuICAgICAgdHlwZUxpc3QgPSBzdGF0ZS50eXBlTWFwLm11bHRpW3N0YXRlLmtpbmQgfHwgJ2ZhbGxiYWNrJ107XG5cbiAgICAgIGZvciAodHlwZUluZGV4ID0gMCwgdHlwZVF1YW50aXR5ID0gdHlwZUxpc3QubGVuZ3RoOyB0eXBlSW5kZXggPCB0eXBlUXVhbnRpdHk7IHR5cGVJbmRleCArPSAxKSB7XG4gICAgICAgIGlmIChzdGF0ZS50YWcuc2xpY2UoMCwgdHlwZUxpc3RbdHlwZUluZGV4XS50YWcubGVuZ3RoKSA9PT0gdHlwZUxpc3RbdHlwZUluZGV4XS50YWcpIHtcbiAgICAgICAgICB0eXBlID0gdHlwZUxpc3RbdHlwZUluZGV4XTtcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIGlmICghdHlwZSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3Vua25vd24gdGFnICE8JyArIHN0YXRlLnRhZyArICc+Jyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXRlLnJlc3VsdCAhPT0gbnVsbCAmJiB0eXBlLmtpbmQgIT09IHN0YXRlLmtpbmQpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmFjY2VwdGFibGUgbm9kZSBraW5kIGZvciAhPCcgKyBzdGF0ZS50YWcgKyAnPiB0YWc7IGl0IHNob3VsZCBiZSBcIicgKyB0eXBlLmtpbmQgKyAnXCIsIG5vdCBcIicgKyBzdGF0ZS5raW5kICsgJ1wiJyk7XG4gICAgfVxuXG4gICAgaWYgKCF0eXBlLnJlc29sdmUoc3RhdGUucmVzdWx0LCBzdGF0ZS50YWcpKSB7IC8vIGBzdGF0ZS5yZXN1bHRgIHVwZGF0ZWQgaW4gcmVzb2x2ZXIgaWYgbWF0Y2hlZFxuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2Nhbm5vdCByZXNvbHZlIGEgbm9kZSB3aXRoICE8JyArIHN0YXRlLnRhZyArICc+IGV4cGxpY2l0IHRhZycpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5yZXN1bHQgPSB0eXBlLmNvbnN0cnVjdChzdGF0ZS5yZXN1bHQsIHN0YXRlLnRhZyk7XG4gICAgICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gc3RhdGUucmVzdWx0O1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChzdGF0ZS5saXN0ZW5lciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmxpc3RlbmVyKCdjbG9zZScsIHN0YXRlKTtcbiAgfVxuICByZXR1cm4gc3RhdGUudGFnICE9PSBudWxsIHx8ICBzdGF0ZS5hbmNob3IgIT09IG51bGwgfHwgaGFzQ29udGVudDtcbn1cblxuZnVuY3Rpb24gcmVhZERvY3VtZW50KHN0YXRlKSB7XG4gIHZhciBkb2N1bWVudFN0YXJ0ID0gc3RhdGUucG9zaXRpb24sXG4gICAgICBfcG9zaXRpb24sXG4gICAgICBkaXJlY3RpdmVOYW1lLFxuICAgICAgZGlyZWN0aXZlQXJncyxcbiAgICAgIGhhc0RpcmVjdGl2ZXMgPSBmYWxzZSxcbiAgICAgIGNoO1xuXG4gIHN0YXRlLnZlcnNpb24gPSBudWxsO1xuICBzdGF0ZS5jaGVja0xpbmVCcmVha3MgPSBzdGF0ZS5sZWdhY3k7XG4gIHN0YXRlLnRhZ01hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gIHN0YXRlLmFuY2hvck1hcCA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG5cbiAgd2hpbGUgKChjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pKSAhPT0gMCkge1xuICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKTtcblxuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoc3RhdGUubGluZUluZGVudCA+IDAgfHwgY2ggIT09IDB4MjUvKiAlICovKSB7XG4gICAgICBicmVhaztcbiAgICB9XG5cbiAgICBoYXNEaXJlY3RpdmVzID0gdHJ1ZTtcbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgX3Bvc2l0aW9uID0gc3RhdGUucG9zaXRpb247XG5cbiAgICB3aGlsZSAoY2ggIT09IDAgJiYgIWlzX1dTX09SX0VPTChjaCkpIHtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBkaXJlY3RpdmVOYW1lID0gc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uLCBzdGF0ZS5wb3NpdGlvbik7XG4gICAgZGlyZWN0aXZlQXJncyA9IFtdO1xuXG4gICAgaWYgKGRpcmVjdGl2ZU5hbWUubGVuZ3RoIDwgMSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2RpcmVjdGl2ZSBuYW1lIG11c3Qgbm90IGJlIGxlc3MgdGhhbiBvbmUgY2hhcmFjdGVyIGluIGxlbmd0aCcpO1xuICAgIH1cblxuICAgIHdoaWxlIChjaCAhPT0gMCkge1xuICAgICAgd2hpbGUgKGlzX1dISVRFX1NQQUNFKGNoKSkge1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaCA9PT0gMHgyMy8qICMgKi8pIHtcbiAgICAgICAgZG8geyBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7IH1cbiAgICAgICAgd2hpbGUgKGNoICE9PSAwICYmICFpc19FT0woY2gpKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlmIChpc19FT0woY2gpKSBicmVhaztcblxuICAgICAgX3Bvc2l0aW9uID0gc3RhdGUucG9zaXRpb247XG5cbiAgICAgIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfV1NfT1JfRU9MKGNoKSkge1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgICB9XG5cbiAgICAgIGRpcmVjdGl2ZUFyZ3MucHVzaChzdGF0ZS5pbnB1dC5zbGljZShfcG9zaXRpb24sIHN0YXRlLnBvc2l0aW9uKSk7XG4gICAgfVxuXG4gICAgaWYgKGNoICE9PSAwKSByZWFkTGluZUJyZWFrKHN0YXRlKTtcblxuICAgIGlmIChfaGFzT3duUHJvcGVydHkkMS5jYWxsKGRpcmVjdGl2ZUhhbmRsZXJzLCBkaXJlY3RpdmVOYW1lKSkge1xuICAgICAgZGlyZWN0aXZlSGFuZGxlcnNbZGlyZWN0aXZlTmFtZV0oc3RhdGUsIGRpcmVjdGl2ZU5hbWUsIGRpcmVjdGl2ZUFyZ3MpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvd1dhcm5pbmcoc3RhdGUsICd1bmtub3duIGRvY3VtZW50IGRpcmVjdGl2ZSBcIicgKyBkaXJlY3RpdmVOYW1lICsgJ1wiJyk7XG4gICAgfVxuICB9XG5cbiAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpO1xuXG4gIGlmIChzdGF0ZS5saW5lSW5kZW50ID09PSAwICYmXG4gICAgICBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSAgICAgPT09IDB4MkQvKiAtICovICYmXG4gICAgICBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMSkgPT09IDB4MkQvKiAtICovICYmXG4gICAgICBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMikgPT09IDB4MkQvKiAtICovKSB7XG4gICAgc3RhdGUucG9zaXRpb24gKz0gMztcbiAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG5cbiAgfSBlbHNlIGlmIChoYXNEaXJlY3RpdmVzKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2RpcmVjdGl2ZXMgZW5kIG1hcmsgaXMgZXhwZWN0ZWQnKTtcbiAgfVxuXG4gIGNvbXBvc2VOb2RlKHN0YXRlLCBzdGF0ZS5saW5lSW5kZW50IC0gMSwgQ09OVEVYVF9CTE9DS19PVVQsIGZhbHNlLCB0cnVlKTtcbiAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpO1xuXG4gIGlmIChzdGF0ZS5jaGVja0xpbmVCcmVha3MgJiZcbiAgICAgIFBBVFRFUk5fTk9OX0FTQ0lJX0xJTkVfQlJFQUtTLnRlc3Qoc3RhdGUuaW5wdXQuc2xpY2UoZG9jdW1lbnRTdGFydCwgc3RhdGUucG9zaXRpb24pKSkge1xuICAgIHRocm93V2FybmluZyhzdGF0ZSwgJ25vbi1BU0NJSSBsaW5lIGJyZWFrcyBhcmUgaW50ZXJwcmV0ZWQgYXMgY29udGVudCcpO1xuICB9XG5cbiAgc3RhdGUuZG9jdW1lbnRzLnB1c2goc3RhdGUucmVzdWx0KTtcblxuICBpZiAoc3RhdGUucG9zaXRpb24gPT09IHN0YXRlLmxpbmVTdGFydCAmJiB0ZXN0RG9jdW1lbnRTZXBhcmF0b3Ioc3RhdGUpKSB7XG5cbiAgICBpZiAoc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbikgPT09IDB4MkUvKiAuICovKSB7XG4gICAgICBzdGF0ZS5wb3NpdGlvbiArPSAzO1xuICAgICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpO1xuICAgIH1cbiAgICByZXR1cm47XG4gIH1cblxuICBpZiAoc3RhdGUucG9zaXRpb24gPCAoc3RhdGUubGVuZ3RoIC0gMSkpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZW5kIG9mIHRoZSBzdHJlYW0gb3IgYSBkb2N1bWVudCBzZXBhcmF0b3IgaXMgZXhwZWN0ZWQnKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm47XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBsb2FkRG9jdW1lbnRzKGlucHV0LCBvcHRpb25zKSB7XG4gIGlucHV0ID0gU3RyaW5nKGlucHV0KTtcbiAgb3B0aW9ucyA9IG9wdGlvbnMgfHwge307XG5cbiAgaWYgKGlucHV0Lmxlbmd0aCAhPT0gMCkge1xuXG4gICAgLy8gQWRkIHRhaWxpbmcgYFxcbmAgaWYgbm90IGV4aXN0c1xuICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KGlucHV0Lmxlbmd0aCAtIDEpICE9PSAweDBBLyogTEYgKi8gJiZcbiAgICAgICAgaW5wdXQuY2hhckNvZGVBdChpbnB1dC5sZW5ndGggLSAxKSAhPT0gMHgwRC8qIENSICovKSB7XG4gICAgICBpbnB1dCArPSAnXFxuJztcbiAgICB9XG5cbiAgICAvLyBTdHJpcCBCT01cbiAgICBpZiAoaW5wdXQuY2hhckNvZGVBdCgwKSA9PT0gMHhGRUZGKSB7XG4gICAgICBpbnB1dCA9IGlucHV0LnNsaWNlKDEpO1xuICAgIH1cbiAgfVxuXG4gIHZhciBzdGF0ZSA9IG5ldyBTdGF0ZSQxKGlucHV0LCBvcHRpb25zKTtcblxuICB2YXIgbnVsbHBvcyA9IGlucHV0LmluZGV4T2YoJ1xcMCcpO1xuXG4gIGlmIChudWxscG9zICE9PSAtMSkge1xuICAgIHN0YXRlLnBvc2l0aW9uID0gbnVsbHBvcztcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnbnVsbCBieXRlIGlzIG5vdCBhbGxvd2VkIGluIGlucHV0Jyk7XG4gIH1cblxuICAvLyBVc2UgMCBhcyBzdHJpbmcgdGVybWluYXRvci4gVGhhdCBzaWduaWZpY2FudGx5IHNpbXBsaWZpZXMgYm91bmRzIGNoZWNrLlxuICBzdGF0ZS5pbnB1dCArPSAnXFwwJztcblxuICB3aGlsZSAoc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbikgPT09IDB4MjAvKiBTcGFjZSAqLykge1xuICAgIHN0YXRlLmxpbmVJbmRlbnQgKz0gMTtcbiAgICBzdGF0ZS5wb3NpdGlvbiArPSAxO1xuICB9XG5cbiAgd2hpbGUgKHN0YXRlLnBvc2l0aW9uIDwgKHN0YXRlLmxlbmd0aCAtIDEpKSB7XG4gICAgcmVhZERvY3VtZW50KHN0YXRlKTtcbiAgfVxuXG4gIHJldHVybiBzdGF0ZS5kb2N1bWVudHM7XG59XG5cblxuZnVuY3Rpb24gbG9hZEFsbCQxKGlucHV0LCBpdGVyYXRvciwgb3B0aW9ucykge1xuICBpZiAoaXRlcmF0b3IgIT09IG51bGwgJiYgdHlwZW9mIGl0ZXJhdG9yID09PSAnb2JqZWN0JyAmJiB0eXBlb2Ygb3B0aW9ucyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgICBvcHRpb25zID0gaXRlcmF0b3I7XG4gICAgaXRlcmF0b3IgPSBudWxsO1xuICB9XG5cbiAgdmFyIGRvY3VtZW50cyA9IGxvYWREb2N1bWVudHMoaW5wdXQsIG9wdGlvbnMpO1xuXG4gIGlmICh0eXBlb2YgaXRlcmF0b3IgIT09ICdmdW5jdGlvbicpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRzO1xuICB9XG5cbiAgZm9yICh2YXIgaW5kZXggPSAwLCBsZW5ndGggPSBkb2N1bWVudHMubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIGl0ZXJhdG9yKGRvY3VtZW50c1tpbmRleF0pO1xuICB9XG59XG5cblxuZnVuY3Rpb24gbG9hZCQxKGlucHV0LCBvcHRpb25zKSB7XG4gIHZhciBkb2N1bWVudHMgPSBsb2FkRG9jdW1lbnRzKGlucHV0LCBvcHRpb25zKTtcblxuICBpZiAoZG9jdW1lbnRzLmxlbmd0aCA9PT0gMCkge1xuICAgIC8qZXNsaW50LWRpc2FibGUgbm8tdW5kZWZpbmVkKi9cbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9IGVsc2UgaWYgKGRvY3VtZW50cy5sZW5ndGggPT09IDEpIHtcbiAgICByZXR1cm4gZG9jdW1lbnRzWzBdO1xuICB9XG4gIHRocm93IG5ldyBleGNlcHRpb24oJ2V4cGVjdGVkIGEgc2luZ2xlIGRvY3VtZW50IGluIHRoZSBzdHJlYW0sIGJ1dCBmb3VuZCBtb3JlJyk7XG59XG5cblxudmFyIGxvYWRBbGxfMSA9IGxvYWRBbGwkMTtcbnZhciBsb2FkXzEgICAgPSBsb2FkJDE7XG5cbnZhciBsb2FkZXIgPSB7XG5cdGxvYWRBbGw6IGxvYWRBbGxfMSxcblx0bG9hZDogbG9hZF8xXG59O1xuXG4vKmVzbGludC1kaXNhYmxlIG5vLXVzZS1iZWZvcmUtZGVmaW5lKi9cblxuXG5cblxuXG52YXIgX3RvU3RyaW5nICAgICAgID0gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZztcbnZhciBfaGFzT3duUHJvcGVydHkgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG52YXIgQ0hBUl9CT00gICAgICAgICAgICAgICAgICA9IDB4RkVGRjtcbnZhciBDSEFSX1RBQiAgICAgICAgICAgICAgICAgID0gMHgwOTsgLyogVGFiICovXG52YXIgQ0hBUl9MSU5FX0ZFRUQgICAgICAgICAgICA9IDB4MEE7IC8qIExGICovXG52YXIgQ0hBUl9DQVJSSUFHRV9SRVRVUk4gICAgICA9IDB4MEQ7IC8qIENSICovXG52YXIgQ0hBUl9TUEFDRSAgICAgICAgICAgICAgICA9IDB4MjA7IC8qIFNwYWNlICovXG52YXIgQ0hBUl9FWENMQU1BVElPTiAgICAgICAgICA9IDB4MjE7IC8qICEgKi9cbnZhciBDSEFSX0RPVUJMRV9RVU9URSAgICAgICAgID0gMHgyMjsgLyogXCIgKi9cbnZhciBDSEFSX1NIQVJQICAgICAgICAgICAgICAgID0gMHgyMzsgLyogIyAqL1xudmFyIENIQVJfUEVSQ0VOVCAgICAgICAgICAgICAgPSAweDI1OyAvKiAlICovXG52YXIgQ0hBUl9BTVBFUlNBTkQgICAgICAgICAgICA9IDB4MjY7IC8qICYgKi9cbnZhciBDSEFSX1NJTkdMRV9RVU9URSAgICAgICAgID0gMHgyNzsgLyogJyAqL1xudmFyIENIQVJfQVNURVJJU0sgICAgICAgICAgICAgPSAweDJBOyAvKiAqICovXG52YXIgQ0hBUl9DT01NQSAgICAgICAgICAgICAgICA9IDB4MkM7IC8qICwgKi9cbnZhciBDSEFSX01JTlVTICAgICAgICAgICAgICAgID0gMHgyRDsgLyogLSAqL1xudmFyIENIQVJfQ09MT04gICAgICAgICAgICAgICAgPSAweDNBOyAvKiA6ICovXG52YXIgQ0hBUl9FUVVBTFMgICAgICAgICAgICAgICA9IDB4M0Q7IC8qID0gKi9cbnZhciBDSEFSX0dSRUFURVJfVEhBTiAgICAgICAgID0gMHgzRTsgLyogPiAqL1xudmFyIENIQVJfUVVFU1RJT04gICAgICAgICAgICAgPSAweDNGOyAvKiA/ICovXG52YXIgQ0hBUl9DT01NRVJDSUFMX0FUICAgICAgICA9IDB4NDA7IC8qIEAgKi9cbnZhciBDSEFSX0xFRlRfU1FVQVJFX0JSQUNLRVQgID0gMHg1QjsgLyogWyAqL1xudmFyIENIQVJfUklHSFRfU1FVQVJFX0JSQUNLRVQgPSAweDVEOyAvKiBdICovXG52YXIgQ0hBUl9HUkFWRV9BQ0NFTlQgICAgICAgICA9IDB4NjA7IC8qIGAgKi9cbnZhciBDSEFSX0xFRlRfQ1VSTFlfQlJBQ0tFVCAgID0gMHg3QjsgLyogeyAqL1xudmFyIENIQVJfVkVSVElDQUxfTElORSAgICAgICAgPSAweDdDOyAvKiB8ICovXG52YXIgQ0hBUl9SSUdIVF9DVVJMWV9CUkFDS0VUICA9IDB4N0Q7IC8qIH0gKi9cblxudmFyIEVTQ0FQRV9TRVFVRU5DRVMgPSB7fTtcblxuRVNDQVBFX1NFUVVFTkNFU1sweDAwXSAgID0gJ1xcXFwwJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgwN10gICA9ICdcXFxcYSc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MDhdICAgPSAnXFxcXGInO1xuRVNDQVBFX1NFUVVFTkNFU1sweDA5XSAgID0gJ1xcXFx0JztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgwQV0gICA9ICdcXFxcbic7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MEJdICAgPSAnXFxcXHYnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDBDXSAgID0gJ1xcXFxmJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgwRF0gICA9ICdcXFxccic7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MUJdICAgPSAnXFxcXGUnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDIyXSAgID0gJ1xcXFxcIic7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4NUNdICAgPSAnXFxcXFxcXFwnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDg1XSAgID0gJ1xcXFxOJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHhBMF0gICA9ICdcXFxcXyc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MjAyOF0gPSAnXFxcXEwnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDIwMjldID0gJ1xcXFxQJztcblxudmFyIERFUFJFQ0FURURfQk9PTEVBTlNfU1lOVEFYID0gW1xuICAneScsICdZJywgJ3llcycsICdZZXMnLCAnWUVTJywgJ29uJywgJ09uJywgJ09OJyxcbiAgJ24nLCAnTicsICdubycsICdObycsICdOTycsICdvZmYnLCAnT2ZmJywgJ09GRidcbl07XG5cbnZhciBERVBSRUNBVEVEX0JBU0U2MF9TWU5UQVggPSAvXlstK10/WzAtOV9dKyg/OjpbMC05X10rKSsoPzpcXC5bMC05X10qKT8kLztcblxuZnVuY3Rpb24gY29tcGlsZVN0eWxlTWFwKHNjaGVtYSwgbWFwKSB7XG4gIHZhciByZXN1bHQsIGtleXMsIGluZGV4LCBsZW5ndGgsIHRhZywgc3R5bGUsIHR5cGU7XG5cbiAgaWYgKG1hcCA9PT0gbnVsbCkgcmV0dXJuIHt9O1xuXG4gIHJlc3VsdCA9IHt9O1xuICBrZXlzID0gT2JqZWN0LmtleXMobWFwKTtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0ga2V5cy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgdGFnID0ga2V5c1tpbmRleF07XG4gICAgc3R5bGUgPSBTdHJpbmcobWFwW3RhZ10pO1xuXG4gICAgaWYgKHRhZy5zbGljZSgwLCAyKSA9PT0gJyEhJykge1xuICAgICAgdGFnID0gJ3RhZzp5YW1sLm9yZywyMDAyOicgKyB0YWcuc2xpY2UoMik7XG4gICAgfVxuICAgIHR5cGUgPSBzY2hlbWEuY29tcGlsZWRUeXBlTWFwWydmYWxsYmFjayddW3RhZ107XG5cbiAgICBpZiAodHlwZSAmJiBfaGFzT3duUHJvcGVydHkuY2FsbCh0eXBlLnN0eWxlQWxpYXNlcywgc3R5bGUpKSB7XG4gICAgICBzdHlsZSA9IHR5cGUuc3R5bGVBbGlhc2VzW3N0eWxlXTtcbiAgICB9XG5cbiAgICByZXN1bHRbdGFnXSA9IHN0eWxlO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZW5jb2RlSGV4KGNoYXJhY3Rlcikge1xuICB2YXIgc3RyaW5nLCBoYW5kbGUsIGxlbmd0aDtcblxuICBzdHJpbmcgPSBjaGFyYWN0ZXIudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCk7XG5cbiAgaWYgKGNoYXJhY3RlciA8PSAweEZGKSB7XG4gICAgaGFuZGxlID0gJ3gnO1xuICAgIGxlbmd0aCA9IDI7XG4gIH0gZWxzZSBpZiAoY2hhcmFjdGVyIDw9IDB4RkZGRikge1xuICAgIGhhbmRsZSA9ICd1JztcbiAgICBsZW5ndGggPSA0O1xuICB9IGVsc2UgaWYgKGNoYXJhY3RlciA8PSAweEZGRkZGRkZGKSB7XG4gICAgaGFuZGxlID0gJ1UnO1xuICAgIGxlbmd0aCA9IDg7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignY29kZSBwb2ludCB3aXRoaW4gYSBzdHJpbmcgbWF5IG5vdCBiZSBncmVhdGVyIHRoYW4gMHhGRkZGRkZGRicpO1xuICB9XG5cbiAgcmV0dXJuICdcXFxcJyArIGhhbmRsZSArIGNvbW1vbi5yZXBlYXQoJzAnLCBsZW5ndGggLSBzdHJpbmcubGVuZ3RoKSArIHN0cmluZztcbn1cblxuXG52YXIgUVVPVElOR19UWVBFX1NJTkdMRSA9IDEsXG4gICAgUVVPVElOR19UWVBFX0RPVUJMRSA9IDI7XG5cbmZ1bmN0aW9uIFN0YXRlKG9wdGlvbnMpIHtcbiAgdGhpcy5zY2hlbWEgICAgICAgID0gb3B0aW9uc1snc2NoZW1hJ10gfHwgX2RlZmF1bHQ7XG4gIHRoaXMuaW5kZW50ICAgICAgICA9IE1hdGgubWF4KDEsIChvcHRpb25zWydpbmRlbnQnXSB8fCAyKSk7XG4gIHRoaXMubm9BcnJheUluZGVudCA9IG9wdGlvbnNbJ25vQXJyYXlJbmRlbnQnXSB8fCBmYWxzZTtcbiAgdGhpcy5za2lwSW52YWxpZCAgID0gb3B0aW9uc1snc2tpcEludmFsaWQnXSB8fCBmYWxzZTtcbiAgdGhpcy5mbG93TGV2ZWwgICAgID0gKGNvbW1vbi5pc05vdGhpbmcob3B0aW9uc1snZmxvd0xldmVsJ10pID8gLTEgOiBvcHRpb25zWydmbG93TGV2ZWwnXSk7XG4gIHRoaXMuc3R5bGVNYXAgICAgICA9IGNvbXBpbGVTdHlsZU1hcCh0aGlzLnNjaGVtYSwgb3B0aW9uc1snc3R5bGVzJ10gfHwgbnVsbCk7XG4gIHRoaXMuc29ydEtleXMgICAgICA9IG9wdGlvbnNbJ3NvcnRLZXlzJ10gfHwgZmFsc2U7XG4gIHRoaXMubGluZVdpZHRoICAgICA9IG9wdGlvbnNbJ2xpbmVXaWR0aCddIHx8IDgwO1xuICB0aGlzLm5vUmVmcyAgICAgICAgPSBvcHRpb25zWydub1JlZnMnXSB8fCBmYWxzZTtcbiAgdGhpcy5ub0NvbXBhdE1vZGUgID0gb3B0aW9uc1snbm9Db21wYXRNb2RlJ10gfHwgZmFsc2U7XG4gIHRoaXMuY29uZGVuc2VGbG93ICA9IG9wdGlvbnNbJ2NvbmRlbnNlRmxvdyddIHx8IGZhbHNlO1xuICB0aGlzLnF1b3RpbmdUeXBlICAgPSBvcHRpb25zWydxdW90aW5nVHlwZSddID09PSAnXCInID8gUVVPVElOR19UWVBFX0RPVUJMRSA6IFFVT1RJTkdfVFlQRV9TSU5HTEU7XG4gIHRoaXMuZm9yY2VRdW90ZXMgICA9IG9wdGlvbnNbJ2ZvcmNlUXVvdGVzJ10gfHwgZmFsc2U7XG4gIHRoaXMucmVwbGFjZXIgICAgICA9IHR5cGVvZiBvcHRpb25zWydyZXBsYWNlciddID09PSAnZnVuY3Rpb24nID8gb3B0aW9uc1sncmVwbGFjZXInXSA6IG51bGw7XG5cbiAgdGhpcy5pbXBsaWNpdFR5cGVzID0gdGhpcy5zY2hlbWEuY29tcGlsZWRJbXBsaWNpdDtcbiAgdGhpcy5leHBsaWNpdFR5cGVzID0gdGhpcy5zY2hlbWEuY29tcGlsZWRFeHBsaWNpdDtcblxuICB0aGlzLnRhZyA9IG51bGw7XG4gIHRoaXMucmVzdWx0ID0gJyc7XG5cbiAgdGhpcy5kdXBsaWNhdGVzID0gW107XG4gIHRoaXMudXNlZER1cGxpY2F0ZXMgPSBudWxsO1xufVxuXG4vLyBJbmRlbnRzIGV2ZXJ5IGxpbmUgaW4gYSBzdHJpbmcuIEVtcHR5IGxpbmVzIChcXG4gb25seSkgYXJlIG5vdCBpbmRlbnRlZC5cbmZ1bmN0aW9uIGluZGVudFN0cmluZyhzdHJpbmcsIHNwYWNlcykge1xuICB2YXIgaW5kID0gY29tbW9uLnJlcGVhdCgnICcsIHNwYWNlcyksXG4gICAgICBwb3NpdGlvbiA9IDAsXG4gICAgICBuZXh0ID0gLTEsXG4gICAgICByZXN1bHQgPSAnJyxcbiAgICAgIGxpbmUsXG4gICAgICBsZW5ndGggPSBzdHJpbmcubGVuZ3RoO1xuXG4gIHdoaWxlIChwb3NpdGlvbiA8IGxlbmd0aCkge1xuICAgIG5leHQgPSBzdHJpbmcuaW5kZXhPZignXFxuJywgcG9zaXRpb24pO1xuICAgIGlmIChuZXh0ID09PSAtMSkge1xuICAgICAgbGluZSA9IHN0cmluZy5zbGljZShwb3NpdGlvbik7XG4gICAgICBwb3NpdGlvbiA9IGxlbmd0aDtcbiAgICB9IGVsc2Uge1xuICAgICAgbGluZSA9IHN0cmluZy5zbGljZShwb3NpdGlvbiwgbmV4dCArIDEpO1xuICAgICAgcG9zaXRpb24gPSBuZXh0ICsgMTtcbiAgICB9XG5cbiAgICBpZiAobGluZS5sZW5ndGggJiYgbGluZSAhPT0gJ1xcbicpIHJlc3VsdCArPSBpbmQ7XG5cbiAgICByZXN1bHQgKz0gbGluZTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIGdlbmVyYXRlTmV4dExpbmUoc3RhdGUsIGxldmVsKSB7XG4gIHJldHVybiAnXFxuJyArIGNvbW1vbi5yZXBlYXQoJyAnLCBzdGF0ZS5pbmRlbnQgKiBsZXZlbCk7XG59XG5cbmZ1bmN0aW9uIHRlc3RJbXBsaWNpdFJlc29sdmluZyhzdGF0ZSwgc3RyKSB7XG4gIHZhciBpbmRleCwgbGVuZ3RoLCB0eXBlO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBzdGF0ZS5pbXBsaWNpdFR5cGVzLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICB0eXBlID0gc3RhdGUuaW1wbGljaXRUeXBlc1tpbmRleF07XG5cbiAgICBpZiAodHlwZS5yZXNvbHZlKHN0cikpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBmYWxzZTtcbn1cblxuLy8gWzMzXSBzLXdoaXRlIDo6PSBzLXNwYWNlIHwgcy10YWJcbmZ1bmN0aW9uIGlzV2hpdGVzcGFjZShjKSB7XG4gIHJldHVybiBjID09PSBDSEFSX1NQQUNFIHx8IGMgPT09IENIQVJfVEFCO1xufVxuXG4vLyBSZXR1cm5zIHRydWUgaWYgdGhlIGNoYXJhY3RlciBjYW4gYmUgcHJpbnRlZCB3aXRob3V0IGVzY2FwaW5nLlxuLy8gRnJvbSBZQU1MIDEuMjogXCJhbnkgYWxsb3dlZCBjaGFyYWN0ZXJzIGtub3duIHRvIGJlIG5vbi1wcmludGFibGVcbi8vIHNob3VsZCBhbHNvIGJlIGVzY2FwZWQuIFtIb3dldmVyLF0gVGhpcyBpc25cdTIwMTl0IG1hbmRhdG9yeVwiXG4vLyBEZXJpdmVkIGZyb20gbmItY2hhciAtIFxcdCAtICN4ODUgLSAjeEEwIC0gI3gyMDI4IC0gI3gyMDI5LlxuZnVuY3Rpb24gaXNQcmludGFibGUoYykge1xuICByZXR1cm4gICgweDAwMDIwIDw9IGMgJiYgYyA8PSAweDAwMDA3RSlcbiAgICAgIHx8ICgoMHgwMDBBMSA8PSBjICYmIGMgPD0gMHgwMEQ3RkYpICYmIGMgIT09IDB4MjAyOCAmJiBjICE9PSAweDIwMjkpXG4gICAgICB8fCAoKDB4MEUwMDAgPD0gYyAmJiBjIDw9IDB4MDBGRkZEKSAmJiBjICE9PSBDSEFSX0JPTSlcbiAgICAgIHx8ICAoMHgxMDAwMCA8PSBjICYmIGMgPD0gMHgxMEZGRkYpO1xufVxuXG4vLyBbMzRdIG5zLWNoYXIgOjo9IG5iLWNoYXIgLSBzLXdoaXRlXG4vLyBbMjddIG5iLWNoYXIgOjo9IGMtcHJpbnRhYmxlIC0gYi1jaGFyIC0gYy1ieXRlLW9yZGVyLW1hcmtcbi8vIFsyNl0gYi1jaGFyICA6Oj0gYi1saW5lLWZlZWQgfCBiLWNhcnJpYWdlLXJldHVyblxuLy8gSW5jbHVkaW5nIHMtd2hpdGUgKGZvciBzb21lIHJlYXNvbiwgZXhhbXBsZXMgZG9lc24ndCBtYXRjaCBzcGVjcyBpbiB0aGlzIGFzcGVjdClcbi8vIG5zLWNoYXIgOjo9IGMtcHJpbnRhYmxlIC0gYi1saW5lLWZlZWQgLSBiLWNhcnJpYWdlLXJldHVybiAtIGMtYnl0ZS1vcmRlci1tYXJrXG5mdW5jdGlvbiBpc05zQ2hhck9yV2hpdGVzcGFjZShjKSB7XG4gIHJldHVybiBpc1ByaW50YWJsZShjKVxuICAgICYmIGMgIT09IENIQVJfQk9NXG4gICAgLy8gLSBiLWNoYXJcbiAgICAmJiBjICE9PSBDSEFSX0NBUlJJQUdFX1JFVFVSTlxuICAgICYmIGMgIT09IENIQVJfTElORV9GRUVEO1xufVxuXG4vLyBbMTI3XSAgbnMtcGxhaW4tc2FmZShjKSA6Oj0gYyA9IGZsb3ctb3V0ICBcdTIxRDIgbnMtcGxhaW4tc2FmZS1vdXRcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gZmxvdy1pbiAgIFx1MjFEMiBucy1wbGFpbi1zYWZlLWluXG4vLyAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYyA9IGJsb2NrLWtleSBcdTIxRDIgbnMtcGxhaW4tc2FmZS1vdXRcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gZmxvdy1rZXkgIFx1MjFEMiBucy1wbGFpbi1zYWZlLWluXG4vLyBbMTI4XSBucy1wbGFpbi1zYWZlLW91dCA6Oj0gbnMtY2hhclxuLy8gWzEyOV0gIG5zLXBsYWluLXNhZmUtaW4gOjo9IG5zLWNoYXIgLSBjLWZsb3ctaW5kaWNhdG9yXG4vLyBbMTMwXSAgbnMtcGxhaW4tY2hhcihjKSA6Oj0gICggbnMtcGxhaW4tc2FmZShjKSAtIFx1MjAxQzpcdTIwMUQgLSBcdTIwMUMjXHUyMDFEIClcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgKCAvKiBBbiBucy1jaGFyIHByZWNlZGluZyAqLyBcdTIwMUMjXHUyMDFEIClcbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgIHwgKCBcdTIwMUM6XHUyMDFEIC8qIEZvbGxvd2VkIGJ5IGFuIG5zLXBsYWluLXNhZmUoYykgKi8gKVxuZnVuY3Rpb24gaXNQbGFpblNhZmUoYywgcHJldiwgaW5ibG9jaykge1xuICB2YXIgY0lzTnNDaGFyT3JXaGl0ZXNwYWNlID0gaXNOc0NoYXJPcldoaXRlc3BhY2UoYyk7XG4gIHZhciBjSXNOc0NoYXIgPSBjSXNOc0NoYXJPcldoaXRlc3BhY2UgJiYgIWlzV2hpdGVzcGFjZShjKTtcbiAgcmV0dXJuIChcbiAgICAvLyBucy1wbGFpbi1zYWZlXG4gICAgaW5ibG9jayA/IC8vIGMgPSBmbG93LWluXG4gICAgICBjSXNOc0NoYXJPcldoaXRlc3BhY2VcbiAgICAgIDogY0lzTnNDaGFyT3JXaGl0ZXNwYWNlXG4gICAgICAgIC8vIC0gYy1mbG93LWluZGljYXRvclxuICAgICAgICAmJiBjICE9PSBDSEFSX0NPTU1BXG4gICAgICAgICYmIGMgIT09IENIQVJfTEVGVF9TUVVBUkVfQlJBQ0tFVFxuICAgICAgICAmJiBjICE9PSBDSEFSX1JJR0hUX1NRVUFSRV9CUkFDS0VUXG4gICAgICAgICYmIGMgIT09IENIQVJfTEVGVF9DVVJMWV9CUkFDS0VUXG4gICAgICAgICYmIGMgIT09IENIQVJfUklHSFRfQ1VSTFlfQlJBQ0tFVFxuICApXG4gICAgLy8gbnMtcGxhaW4tY2hhclxuICAgICYmIGMgIT09IENIQVJfU0hBUlAgLy8gZmFsc2Ugb24gJyMnXG4gICAgJiYgIShwcmV2ID09PSBDSEFSX0NPTE9OICYmICFjSXNOc0NoYXIpIC8vIGZhbHNlIG9uICc6ICdcbiAgICB8fCAoaXNOc0NoYXJPcldoaXRlc3BhY2UocHJldikgJiYgIWlzV2hpdGVzcGFjZShwcmV2KSAmJiBjID09PSBDSEFSX1NIQVJQKSAvLyBjaGFuZ2UgdG8gdHJ1ZSBvbiAnW14gXSMnXG4gICAgfHwgKHByZXYgPT09IENIQVJfQ09MT04gJiYgY0lzTnNDaGFyKTsgLy8gY2hhbmdlIHRvIHRydWUgb24gJzpbXiBdJ1xufVxuXG4vLyBTaW1wbGlmaWVkIHRlc3QgZm9yIHZhbHVlcyBhbGxvd2VkIGFzIHRoZSBmaXJzdCBjaGFyYWN0ZXIgaW4gcGxhaW4gc3R5bGUuXG5mdW5jdGlvbiBpc1BsYWluU2FmZUZpcnN0KGMpIHtcbiAgLy8gVXNlcyBhIHN1YnNldCBvZiBucy1jaGFyIC0gYy1pbmRpY2F0b3JcbiAgLy8gd2hlcmUgbnMtY2hhciA9IG5iLWNoYXIgLSBzLXdoaXRlLlxuICAvLyBObyBzdXBwb3J0IG9mICggKCBcdTIwMUM/XHUyMDFEIHwgXHUyMDFDOlx1MjAxRCB8IFx1MjAxQy1cdTIwMUQgKSAvKiBGb2xsb3dlZCBieSBhbiBucy1wbGFpbi1zYWZlKGMpKSAqLyApIHBhcnRcbiAgcmV0dXJuIGlzUHJpbnRhYmxlKGMpICYmIGMgIT09IENIQVJfQk9NXG4gICAgJiYgIWlzV2hpdGVzcGFjZShjKSAvLyAtIHMtd2hpdGVcbiAgICAvLyAtIChjLWluZGljYXRvciA6Oj1cbiAgICAvLyBcdTIwMUMtXHUyMDFEIHwgXHUyMDFDP1x1MjAxRCB8IFx1MjAxQzpcdTIwMUQgfCBcdTIwMUMsXHUyMDFEIHwgXHUyMDFDW1x1MjAxRCB8IFx1MjAxQ11cdTIwMUQgfCBcdTIwMUN7XHUyMDFEIHwgXHUyMDFDfVx1MjAxRFxuICAgICYmIGMgIT09IENIQVJfTUlOVVNcbiAgICAmJiBjICE9PSBDSEFSX1FVRVNUSU9OXG4gICAgJiYgYyAhPT0gQ0hBUl9DT0xPTlxuICAgICYmIGMgIT09IENIQVJfQ09NTUFcbiAgICAmJiBjICE9PSBDSEFSX0xFRlRfU1FVQVJFX0JSQUNLRVRcbiAgICAmJiBjICE9PSBDSEFSX1JJR0hUX1NRVUFSRV9CUkFDS0VUXG4gICAgJiYgYyAhPT0gQ0hBUl9MRUZUX0NVUkxZX0JSQUNLRVRcbiAgICAmJiBjICE9PSBDSEFSX1JJR0hUX0NVUkxZX0JSQUNLRVRcbiAgICAvLyB8IFx1MjAxQyNcdTIwMUQgfCBcdTIwMUMmXHUyMDFEIHwgXHUyMDFDKlx1MjAxRCB8IFx1MjAxQyFcdTIwMUQgfCBcdTIwMUN8XHUyMDFEIHwgXHUyMDFDPVx1MjAxRCB8IFx1MjAxQz5cdTIwMUQgfCBcdTIwMUMnXHUyMDFEIHwgXHUyMDFDXCJcdTIwMURcbiAgICAmJiBjICE9PSBDSEFSX1NIQVJQXG4gICAgJiYgYyAhPT0gQ0hBUl9BTVBFUlNBTkRcbiAgICAmJiBjICE9PSBDSEFSX0FTVEVSSVNLXG4gICAgJiYgYyAhPT0gQ0hBUl9FWENMQU1BVElPTlxuICAgICYmIGMgIT09IENIQVJfVkVSVElDQUxfTElORVxuICAgICYmIGMgIT09IENIQVJfRVFVQUxTXG4gICAgJiYgYyAhPT0gQ0hBUl9HUkVBVEVSX1RIQU5cbiAgICAmJiBjICE9PSBDSEFSX1NJTkdMRV9RVU9URVxuICAgICYmIGMgIT09IENIQVJfRE9VQkxFX1FVT1RFXG4gICAgLy8gfCBcdTIwMUMlXHUyMDFEIHwgXHUyMDFDQFx1MjAxRCB8IFx1MjAxQ2BcdTIwMUQpXG4gICAgJiYgYyAhPT0gQ0hBUl9QRVJDRU5UXG4gICAgJiYgYyAhPT0gQ0hBUl9DT01NRVJDSUFMX0FUXG4gICAgJiYgYyAhPT0gQ0hBUl9HUkFWRV9BQ0NFTlQ7XG59XG5cbi8vIFNpbXBsaWZpZWQgdGVzdCBmb3IgdmFsdWVzIGFsbG93ZWQgYXMgdGhlIGxhc3QgY2hhcmFjdGVyIGluIHBsYWluIHN0eWxlLlxuZnVuY3Rpb24gaXNQbGFpblNhZmVMYXN0KGMpIHtcbiAgLy8ganVzdCBub3Qgd2hpdGVzcGFjZSBvciBjb2xvbiwgaXQgd2lsbCBiZSBjaGVja2VkIHRvIGJlIHBsYWluIGNoYXJhY3RlciBsYXRlclxuICByZXR1cm4gIWlzV2hpdGVzcGFjZShjKSAmJiBjICE9PSBDSEFSX0NPTE9OO1xufVxuXG4vLyBTYW1lIGFzICdzdHJpbmcnLmNvZGVQb2ludEF0KHBvcyksIGJ1dCB3b3JrcyBpbiBvbGRlciBicm93c2Vycy5cbmZ1bmN0aW9uIGNvZGVQb2ludEF0KHN0cmluZywgcG9zKSB7XG4gIHZhciBmaXJzdCA9IHN0cmluZy5jaGFyQ29kZUF0KHBvcyksIHNlY29uZDtcbiAgaWYgKGZpcnN0ID49IDB4RDgwMCAmJiBmaXJzdCA8PSAweERCRkYgJiYgcG9zICsgMSA8IHN0cmluZy5sZW5ndGgpIHtcbiAgICBzZWNvbmQgPSBzdHJpbmcuY2hhckNvZGVBdChwb3MgKyAxKTtcbiAgICBpZiAoc2Vjb25kID49IDB4REMwMCAmJiBzZWNvbmQgPD0gMHhERkZGKSB7XG4gICAgICAvLyBodHRwczovL21hdGhpYXNieW5lbnMuYmUvbm90ZXMvamF2YXNjcmlwdC1lbmNvZGluZyNzdXJyb2dhdGUtZm9ybXVsYWVcbiAgICAgIHJldHVybiAoZmlyc3QgLSAweEQ4MDApICogMHg0MDAgKyBzZWNvbmQgLSAweERDMDAgKyAweDEwMDAwO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmlyc3Q7XG59XG5cbi8vIERldGVybWluZXMgd2hldGhlciBibG9jayBpbmRlbnRhdGlvbiBpbmRpY2F0b3IgaXMgcmVxdWlyZWQuXG5mdW5jdGlvbiBuZWVkSW5kZW50SW5kaWNhdG9yKHN0cmluZykge1xuICB2YXIgbGVhZGluZ1NwYWNlUmUgPSAvXlxcbiogLztcbiAgcmV0dXJuIGxlYWRpbmdTcGFjZVJlLnRlc3Qoc3RyaW5nKTtcbn1cblxudmFyIFNUWUxFX1BMQUlOICAgPSAxLFxuICAgIFNUWUxFX1NJTkdMRSAgPSAyLFxuICAgIFNUWUxFX0xJVEVSQUwgPSAzLFxuICAgIFNUWUxFX0ZPTERFRCAgPSA0LFxuICAgIFNUWUxFX0RPVUJMRSAgPSA1O1xuXG4vLyBEZXRlcm1pbmVzIHdoaWNoIHNjYWxhciBzdHlsZXMgYXJlIHBvc3NpYmxlIGFuZCByZXR1cm5zIHRoZSBwcmVmZXJyZWQgc3R5bGUuXG4vLyBsaW5lV2lkdGggPSAtMSA9PiBubyBsaW1pdC5cbi8vIFByZS1jb25kaXRpb25zOiBzdHIubGVuZ3RoID4gMC5cbi8vIFBvc3QtY29uZGl0aW9uczpcbi8vICAgIFNUWUxFX1BMQUlOIG9yIFNUWUxFX1NJTkdMRSA9PiBubyBcXG4gYXJlIGluIHRoZSBzdHJpbmcuXG4vLyAgICBTVFlMRV9MSVRFUkFMID0+IG5vIGxpbmVzIGFyZSBzdWl0YWJsZSBmb3IgZm9sZGluZyAob3IgbGluZVdpZHRoIGlzIC0xKS5cbi8vICAgIFNUWUxFX0ZPTERFRCA9PiBhIGxpbmUgPiBsaW5lV2lkdGggYW5kIGNhbiBiZSBmb2xkZWQgKGFuZCBsaW5lV2lkdGggIT0gLTEpLlxuZnVuY3Rpb24gY2hvb3NlU2NhbGFyU3R5bGUoc3RyaW5nLCBzaW5nbGVMaW5lT25seSwgaW5kZW50UGVyTGV2ZWwsIGxpbmVXaWR0aCxcbiAgdGVzdEFtYmlndW91c1R5cGUsIHF1b3RpbmdUeXBlLCBmb3JjZVF1b3RlcywgaW5ibG9jaykge1xuXG4gIHZhciBpO1xuICB2YXIgY2hhciA9IDA7XG4gIHZhciBwcmV2Q2hhciA9IG51bGw7XG4gIHZhciBoYXNMaW5lQnJlYWsgPSBmYWxzZTtcbiAgdmFyIGhhc0ZvbGRhYmxlTGluZSA9IGZhbHNlOyAvLyBvbmx5IGNoZWNrZWQgaWYgc2hvdWxkVHJhY2tXaWR0aFxuICB2YXIgc2hvdWxkVHJhY2tXaWR0aCA9IGxpbmVXaWR0aCAhPT0gLTE7XG4gIHZhciBwcmV2aW91c0xpbmVCcmVhayA9IC0xOyAvLyBjb3VudCB0aGUgZmlyc3QgbGluZSBjb3JyZWN0bHlcbiAgdmFyIHBsYWluID0gaXNQbGFpblNhZmVGaXJzdChjb2RlUG9pbnRBdChzdHJpbmcsIDApKVxuICAgICAgICAgICYmIGlzUGxhaW5TYWZlTGFzdChjb2RlUG9pbnRBdChzdHJpbmcsIHN0cmluZy5sZW5ndGggLSAxKSk7XG5cbiAgaWYgKHNpbmdsZUxpbmVPbmx5IHx8IGZvcmNlUXVvdGVzKSB7XG4gICAgLy8gQ2FzZTogbm8gYmxvY2sgc3R5bGVzLlxuICAgIC8vIENoZWNrIGZvciBkaXNhbGxvd2VkIGNoYXJhY3RlcnMgdG8gcnVsZSBvdXQgcGxhaW4gYW5kIHNpbmdsZS5cbiAgICBmb3IgKGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgY2hhciA+PSAweDEwMDAwID8gaSArPSAyIDogaSsrKSB7XG4gICAgICBjaGFyID0gY29kZVBvaW50QXQoc3RyaW5nLCBpKTtcbiAgICAgIGlmICghaXNQcmludGFibGUoY2hhcikpIHtcbiAgICAgICAgcmV0dXJuIFNUWUxFX0RPVUJMRTtcbiAgICAgIH1cbiAgICAgIHBsYWluID0gcGxhaW4gJiYgaXNQbGFpblNhZmUoY2hhciwgcHJldkNoYXIsIGluYmxvY2spO1xuICAgICAgcHJldkNoYXIgPSBjaGFyO1xuICAgIH1cbiAgfSBlbHNlIHtcbiAgICAvLyBDYXNlOiBibG9jayBzdHlsZXMgcGVybWl0dGVkLlxuICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBjaGFyID49IDB4MTAwMDAgPyBpICs9IDIgOiBpKyspIHtcbiAgICAgIGNoYXIgPSBjb2RlUG9pbnRBdChzdHJpbmcsIGkpO1xuICAgICAgaWYgKGNoYXIgPT09IENIQVJfTElORV9GRUVEKSB7XG4gICAgICAgIGhhc0xpbmVCcmVhayA9IHRydWU7XG4gICAgICAgIC8vIENoZWNrIGlmIGFueSBsaW5lIGNhbiBiZSBmb2xkZWQuXG4gICAgICAgIGlmIChzaG91bGRUcmFja1dpZHRoKSB7XG4gICAgICAgICAgaGFzRm9sZGFibGVMaW5lID0gaGFzRm9sZGFibGVMaW5lIHx8XG4gICAgICAgICAgICAvLyBGb2xkYWJsZSBsaW5lID0gdG9vIGxvbmcsIGFuZCBub3QgbW9yZS1pbmRlbnRlZC5cbiAgICAgICAgICAgIChpIC0gcHJldmlvdXNMaW5lQnJlYWsgLSAxID4gbGluZVdpZHRoICYmXG4gICAgICAgICAgICAgc3RyaW5nW3ByZXZpb3VzTGluZUJyZWFrICsgMV0gIT09ICcgJyk7XG4gICAgICAgICAgcHJldmlvdXNMaW5lQnJlYWsgPSBpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKCFpc1ByaW50YWJsZShjaGFyKSkge1xuICAgICAgICByZXR1cm4gU1RZTEVfRE9VQkxFO1xuICAgICAgfVxuICAgICAgcGxhaW4gPSBwbGFpbiAmJiBpc1BsYWluU2FmZShjaGFyLCBwcmV2Q2hhciwgaW5ibG9jayk7XG4gICAgICBwcmV2Q2hhciA9IGNoYXI7XG4gICAgfVxuICAgIC8vIGluIGNhc2UgdGhlIGVuZCBpcyBtaXNzaW5nIGEgXFxuXG4gICAgaGFzRm9sZGFibGVMaW5lID0gaGFzRm9sZGFibGVMaW5lIHx8IChzaG91bGRUcmFja1dpZHRoICYmXG4gICAgICAoaSAtIHByZXZpb3VzTGluZUJyZWFrIC0gMSA+IGxpbmVXaWR0aCAmJlxuICAgICAgIHN0cmluZ1twcmV2aW91c0xpbmVCcmVhayArIDFdICE9PSAnICcpKTtcbiAgfVxuICAvLyBBbHRob3VnaCBldmVyeSBzdHlsZSBjYW4gcmVwcmVzZW50IFxcbiB3aXRob3V0IGVzY2FwaW5nLCBwcmVmZXIgYmxvY2sgc3R5bGVzXG4gIC8vIGZvciBtdWx0aWxpbmUsIHNpbmNlIHRoZXkncmUgbW9yZSByZWFkYWJsZSBhbmQgdGhleSBkb24ndCBhZGQgZW1wdHkgbGluZXMuXG4gIC8vIEFsc28gcHJlZmVyIGZvbGRpbmcgYSBzdXBlci1sb25nIGxpbmUuXG4gIGlmICghaGFzTGluZUJyZWFrICYmICFoYXNGb2xkYWJsZUxpbmUpIHtcbiAgICAvLyBTdHJpbmdzIGludGVycHJldGFibGUgYXMgYW5vdGhlciB0eXBlIGhhdmUgdG8gYmUgcXVvdGVkO1xuICAgIC8vIGUuZy4gdGhlIHN0cmluZyAndHJ1ZScgdnMuIHRoZSBib29sZWFuIHRydWUuXG4gICAgaWYgKHBsYWluICYmICFmb3JjZVF1b3RlcyAmJiAhdGVzdEFtYmlndW91c1R5cGUoc3RyaW5nKSkge1xuICAgICAgcmV0dXJuIFNUWUxFX1BMQUlOO1xuICAgIH1cbiAgICByZXR1cm4gcXVvdGluZ1R5cGUgPT09IFFVT1RJTkdfVFlQRV9ET1VCTEUgPyBTVFlMRV9ET1VCTEUgOiBTVFlMRV9TSU5HTEU7XG4gIH1cbiAgLy8gRWRnZSBjYXNlOiBibG9jayBpbmRlbnRhdGlvbiBpbmRpY2F0b3IgY2FuIG9ubHkgaGF2ZSBvbmUgZGlnaXQuXG4gIGlmIChpbmRlbnRQZXJMZXZlbCA+IDkgJiYgbmVlZEluZGVudEluZGljYXRvcihzdHJpbmcpKSB7XG4gICAgcmV0dXJuIFNUWUxFX0RPVUJMRTtcbiAgfVxuICAvLyBBdCB0aGlzIHBvaW50IHdlIGtub3cgYmxvY2sgc3R5bGVzIGFyZSB2YWxpZC5cbiAgLy8gUHJlZmVyIGxpdGVyYWwgc3R5bGUgdW5sZXNzIHdlIHdhbnQgdG8gZm9sZC5cbiAgaWYgKCFmb3JjZVF1b3Rlcykge1xuICAgIHJldHVybiBoYXNGb2xkYWJsZUxpbmUgPyBTVFlMRV9GT0xERUQgOiBTVFlMRV9MSVRFUkFMO1xuICB9XG4gIHJldHVybiBxdW90aW5nVHlwZSA9PT0gUVVPVElOR19UWVBFX0RPVUJMRSA/IFNUWUxFX0RPVUJMRSA6IFNUWUxFX1NJTkdMRTtcbn1cblxuLy8gTm90ZTogbGluZSBicmVha2luZy9mb2xkaW5nIGlzIGltcGxlbWVudGVkIGZvciBvbmx5IHRoZSBmb2xkZWQgc3R5bGUuXG4vLyBOQi4gV2UgZHJvcCB0aGUgbGFzdCB0cmFpbGluZyBuZXdsaW5lIChpZiBhbnkpIG9mIGEgcmV0dXJuZWQgYmxvY2sgc2NhbGFyXG4vLyAgc2luY2UgdGhlIGR1bXBlciBhZGRzIGl0cyBvd24gbmV3bGluZS4gVGhpcyBhbHdheXMgd29ya3M6XG4vLyAgICBcdTIwMjIgTm8gZW5kaW5nIG5ld2xpbmUgPT4gdW5hZmZlY3RlZDsgYWxyZWFkeSB1c2luZyBzdHJpcCBcIi1cIiBjaG9tcGluZy5cbi8vICAgIFx1MjAyMiBFbmRpbmcgbmV3bGluZSAgICA9PiByZW1vdmVkIHRoZW4gcmVzdG9yZWQuXG4vLyAgSW1wb3J0YW50bHksIHRoaXMga2VlcHMgdGhlIFwiK1wiIGNob21wIGluZGljYXRvciBmcm9tIGdhaW5pbmcgYW4gZXh0cmEgbGluZS5cbmZ1bmN0aW9uIHdyaXRlU2NhbGFyKHN0YXRlLCBzdHJpbmcsIGxldmVsLCBpc2tleSwgaW5ibG9jaykge1xuICBzdGF0ZS5kdW1wID0gKGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoc3RyaW5nLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHN0YXRlLnF1b3RpbmdUeXBlID09PSBRVU9USU5HX1RZUEVfRE9VQkxFID8gJ1wiXCInIDogXCInJ1wiO1xuICAgIH1cbiAgICBpZiAoIXN0YXRlLm5vQ29tcGF0TW9kZSkge1xuICAgICAgaWYgKERFUFJFQ0FURURfQk9PTEVBTlNfU1lOVEFYLmluZGV4T2Yoc3RyaW5nKSAhPT0gLTEgfHwgREVQUkVDQVRFRF9CQVNFNjBfU1lOVEFYLnRlc3Qoc3RyaW5nKSkge1xuICAgICAgICByZXR1cm4gc3RhdGUucXVvdGluZ1R5cGUgPT09IFFVT1RJTkdfVFlQRV9ET1VCTEUgPyAoJ1wiJyArIHN0cmluZyArICdcIicpIDogKFwiJ1wiICsgc3RyaW5nICsgXCInXCIpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHZhciBpbmRlbnQgPSBzdGF0ZS5pbmRlbnQgKiBNYXRoLm1heCgxLCBsZXZlbCk7IC8vIG5vIDAtaW5kZW50IHNjYWxhcnNcbiAgICAvLyBBcyBpbmRlbnRhdGlvbiBnZXRzIGRlZXBlciwgbGV0IHRoZSB3aWR0aCBkZWNyZWFzZSBtb25vdG9uaWNhbGx5XG4gICAgLy8gdG8gdGhlIGxvd2VyIGJvdW5kIG1pbihzdGF0ZS5saW5lV2lkdGgsIDQwKS5cbiAgICAvLyBOb3RlIHRoYXQgdGhpcyBpbXBsaWVzXG4gICAgLy8gIHN0YXRlLmxpbmVXaWR0aCBcdTIyNjQgNDAgKyBzdGF0ZS5pbmRlbnQ6IHdpZHRoIGlzIGZpeGVkIGF0IHRoZSBsb3dlciBib3VuZC5cbiAgICAvLyAgc3RhdGUubGluZVdpZHRoID4gNDAgKyBzdGF0ZS5pbmRlbnQ6IHdpZHRoIGRlY3JlYXNlcyB1bnRpbCB0aGUgbG93ZXIgYm91bmQuXG4gICAgLy8gVGhpcyBiZWhhdmVzIGJldHRlciB0aGFuIGEgY29uc3RhbnQgbWluaW11bSB3aWR0aCB3aGljaCBkaXNhbGxvd3MgbmFycm93ZXIgb3B0aW9ucyxcbiAgICAvLyBvciBhbiBpbmRlbnQgdGhyZXNob2xkIHdoaWNoIGNhdXNlcyB0aGUgd2lkdGggdG8gc3VkZGVubHkgaW5jcmVhc2UuXG4gICAgdmFyIGxpbmVXaWR0aCA9IHN0YXRlLmxpbmVXaWR0aCA9PT0gLTFcbiAgICAgID8gLTEgOiBNYXRoLm1heChNYXRoLm1pbihzdGF0ZS5saW5lV2lkdGgsIDQwKSwgc3RhdGUubGluZVdpZHRoIC0gaW5kZW50KTtcblxuICAgIC8vIFdpdGhvdXQga25vd2luZyBpZiBrZXlzIGFyZSBpbXBsaWNpdC9leHBsaWNpdCwgYXNzdW1lIGltcGxpY2l0IGZvciBzYWZldHkuXG4gICAgdmFyIHNpbmdsZUxpbmVPbmx5ID0gaXNrZXlcbiAgICAgIC8vIE5vIGJsb2NrIHN0eWxlcyBpbiBmbG93IG1vZGUuXG4gICAgICB8fCAoc3RhdGUuZmxvd0xldmVsID4gLTEgJiYgbGV2ZWwgPj0gc3RhdGUuZmxvd0xldmVsKTtcbiAgICBmdW5jdGlvbiB0ZXN0QW1iaWd1aXR5KHN0cmluZykge1xuICAgICAgcmV0dXJuIHRlc3RJbXBsaWNpdFJlc29sdmluZyhzdGF0ZSwgc3RyaW5nKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGNob29zZVNjYWxhclN0eWxlKHN0cmluZywgc2luZ2xlTGluZU9ubHksIHN0YXRlLmluZGVudCwgbGluZVdpZHRoLFxuICAgICAgdGVzdEFtYmlndWl0eSwgc3RhdGUucXVvdGluZ1R5cGUsIHN0YXRlLmZvcmNlUXVvdGVzICYmICFpc2tleSwgaW5ibG9jaykpIHtcblxuICAgICAgY2FzZSBTVFlMRV9QTEFJTjpcbiAgICAgICAgcmV0dXJuIHN0cmluZztcbiAgICAgIGNhc2UgU1RZTEVfU0lOR0xFOlxuICAgICAgICByZXR1cm4gXCInXCIgKyBzdHJpbmcucmVwbGFjZSgvJy9nLCBcIicnXCIpICsgXCInXCI7XG4gICAgICBjYXNlIFNUWUxFX0xJVEVSQUw6XG4gICAgICAgIHJldHVybiAnfCcgKyBibG9ja0hlYWRlcihzdHJpbmcsIHN0YXRlLmluZGVudClcbiAgICAgICAgICArIGRyb3BFbmRpbmdOZXdsaW5lKGluZGVudFN0cmluZyhzdHJpbmcsIGluZGVudCkpO1xuICAgICAgY2FzZSBTVFlMRV9GT0xERUQ6XG4gICAgICAgIHJldHVybiAnPicgKyBibG9ja0hlYWRlcihzdHJpbmcsIHN0YXRlLmluZGVudClcbiAgICAgICAgICArIGRyb3BFbmRpbmdOZXdsaW5lKGluZGVudFN0cmluZyhmb2xkU3RyaW5nKHN0cmluZywgbGluZVdpZHRoKSwgaW5kZW50KSk7XG4gICAgICBjYXNlIFNUWUxFX0RPVUJMRTpcbiAgICAgICAgcmV0dXJuICdcIicgKyBlc2NhcGVTdHJpbmcoc3RyaW5nKSArICdcIic7XG4gICAgICBkZWZhdWx0OlxuICAgICAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdpbXBvc3NpYmxlIGVycm9yOiBpbnZhbGlkIHNjYWxhciBzdHlsZScpO1xuICAgIH1cbiAgfSgpKTtcbn1cblxuLy8gUHJlLWNvbmRpdGlvbnM6IHN0cmluZyBpcyB2YWxpZCBmb3IgYSBibG9jayBzY2FsYXIsIDEgPD0gaW5kZW50UGVyTGV2ZWwgPD0gOS5cbmZ1bmN0aW9uIGJsb2NrSGVhZGVyKHN0cmluZywgaW5kZW50UGVyTGV2ZWwpIHtcbiAgdmFyIGluZGVudEluZGljYXRvciA9IG5lZWRJbmRlbnRJbmRpY2F0b3Ioc3RyaW5nKSA/IFN0cmluZyhpbmRlbnRQZXJMZXZlbCkgOiAnJztcblxuICAvLyBub3RlIHRoZSBzcGVjaWFsIGNhc2U6IHRoZSBzdHJpbmcgJ1xcbicgY291bnRzIGFzIGEgXCJ0cmFpbGluZ1wiIGVtcHR5IGxpbmUuXG4gIHZhciBjbGlwID0gICAgICAgICAgc3RyaW5nW3N0cmluZy5sZW5ndGggLSAxXSA9PT0gJ1xcbic7XG4gIHZhciBrZWVwID0gY2xpcCAmJiAoc3RyaW5nW3N0cmluZy5sZW5ndGggLSAyXSA9PT0gJ1xcbicgfHwgc3RyaW5nID09PSAnXFxuJyk7XG4gIHZhciBjaG9tcCA9IGtlZXAgPyAnKycgOiAoY2xpcCA/ICcnIDogJy0nKTtcblxuICByZXR1cm4gaW5kZW50SW5kaWNhdG9yICsgY2hvbXAgKyAnXFxuJztcbn1cblxuLy8gKFNlZSB0aGUgbm90ZSBmb3Igd3JpdGVTY2FsYXIuKVxuZnVuY3Rpb24gZHJvcEVuZGluZ05ld2xpbmUoc3RyaW5nKSB7XG4gIHJldHVybiBzdHJpbmdbc3RyaW5nLmxlbmd0aCAtIDFdID09PSAnXFxuJyA/IHN0cmluZy5zbGljZSgwLCAtMSkgOiBzdHJpbmc7XG59XG5cbi8vIE5vdGU6IGEgbG9uZyBsaW5lIHdpdGhvdXQgYSBzdWl0YWJsZSBicmVhayBwb2ludCB3aWxsIGV4Y2VlZCB0aGUgd2lkdGggbGltaXQuXG4vLyBQcmUtY29uZGl0aW9uczogZXZlcnkgY2hhciBpbiBzdHIgaXNQcmludGFibGUsIHN0ci5sZW5ndGggPiAwLCB3aWR0aCA+IDAuXG5mdW5jdGlvbiBmb2xkU3RyaW5nKHN0cmluZywgd2lkdGgpIHtcbiAgLy8gSW4gZm9sZGVkIHN0eWxlLCAkayQgY29uc2VjdXRpdmUgbmV3bGluZXMgb3V0cHV0IGFzICRrKzEkIG5ld2xpbmVzXHUyMDE0XG4gIC8vIHVubGVzcyB0aGV5J3JlIGJlZm9yZSBvciBhZnRlciBhIG1vcmUtaW5kZW50ZWQgbGluZSwgb3IgYXQgdGhlIHZlcnlcbiAgLy8gYmVnaW5uaW5nIG9yIGVuZCwgaW4gd2hpY2ggY2FzZSAkayQgbWFwcyB0byAkayQuXG4gIC8vIFRoZXJlZm9yZSwgcGFyc2UgZWFjaCBjaHVuayBhcyBuZXdsaW5lKHMpIGZvbGxvd2VkIGJ5IGEgY29udGVudCBsaW5lLlxuICB2YXIgbGluZVJlID0gLyhcXG4rKShbXlxcbl0qKS9nO1xuXG4gIC8vIGZpcnN0IGxpbmUgKHBvc3NpYmx5IGFuIGVtcHR5IGxpbmUpXG4gIHZhciByZXN1bHQgPSAoZnVuY3Rpb24gKCkge1xuICAgIHZhciBuZXh0TEYgPSBzdHJpbmcuaW5kZXhPZignXFxuJyk7XG4gICAgbmV4dExGID0gbmV4dExGICE9PSAtMSA/IG5leHRMRiA6IHN0cmluZy5sZW5ndGg7XG4gICAgbGluZVJlLmxhc3RJbmRleCA9IG5leHRMRjtcbiAgICByZXR1cm4gZm9sZExpbmUoc3RyaW5nLnNsaWNlKDAsIG5leHRMRiksIHdpZHRoKTtcbiAgfSgpKTtcbiAgLy8gSWYgd2UgaGF2ZW4ndCByZWFjaGVkIHRoZSBmaXJzdCBjb250ZW50IGxpbmUgeWV0LCBkb24ndCBhZGQgYW4gZXh0cmEgXFxuLlxuICB2YXIgcHJldk1vcmVJbmRlbnRlZCA9IHN0cmluZ1swXSA9PT0gJ1xcbicgfHwgc3RyaW5nWzBdID09PSAnICc7XG4gIHZhciBtb3JlSW5kZW50ZWQ7XG5cbiAgLy8gcmVzdCBvZiB0aGUgbGluZXNcbiAgdmFyIG1hdGNoO1xuICB3aGlsZSAoKG1hdGNoID0gbGluZVJlLmV4ZWMoc3RyaW5nKSkpIHtcbiAgICB2YXIgcHJlZml4ID0gbWF0Y2hbMV0sIGxpbmUgPSBtYXRjaFsyXTtcbiAgICBtb3JlSW5kZW50ZWQgPSAobGluZVswXSA9PT0gJyAnKTtcbiAgICByZXN1bHQgKz0gcHJlZml4XG4gICAgICArICghcHJldk1vcmVJbmRlbnRlZCAmJiAhbW9yZUluZGVudGVkICYmIGxpbmUgIT09ICcnXG4gICAgICAgID8gJ1xcbicgOiAnJylcbiAgICAgICsgZm9sZExpbmUobGluZSwgd2lkdGgpO1xuICAgIHByZXZNb3JlSW5kZW50ZWQgPSBtb3JlSW5kZW50ZWQ7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG4vLyBHcmVlZHkgbGluZSBicmVha2luZy5cbi8vIFBpY2tzIHRoZSBsb25nZXN0IGxpbmUgdW5kZXIgdGhlIGxpbWl0IGVhY2ggdGltZSxcbi8vIG90aGVyd2lzZSBzZXR0bGVzIGZvciB0aGUgc2hvcnRlc3QgbGluZSBvdmVyIHRoZSBsaW1pdC5cbi8vIE5CLiBNb3JlLWluZGVudGVkIGxpbmVzICpjYW5ub3QqIGJlIGZvbGRlZCwgYXMgdGhhdCB3b3VsZCBhZGQgYW4gZXh0cmEgXFxuLlxuZnVuY3Rpb24gZm9sZExpbmUobGluZSwgd2lkdGgpIHtcbiAgaWYgKGxpbmUgPT09ICcnIHx8IGxpbmVbMF0gPT09ICcgJykgcmV0dXJuIGxpbmU7XG5cbiAgLy8gU2luY2UgYSBtb3JlLWluZGVudGVkIGxpbmUgYWRkcyBhIFxcbiwgYnJlYWtzIGNhbid0IGJlIGZvbGxvd2VkIGJ5IGEgc3BhY2UuXG4gIHZhciBicmVha1JlID0gLyBbXiBdL2c7IC8vIG5vdGU6IHRoZSBtYXRjaCBpbmRleCB3aWxsIGFsd2F5cyBiZSA8PSBsZW5ndGgtMi5cbiAgdmFyIG1hdGNoO1xuICAvLyBzdGFydCBpcyBhbiBpbmNsdXNpdmUgaW5kZXguIGVuZCwgY3VyciwgYW5kIG5leHQgYXJlIGV4Y2x1c2l2ZS5cbiAgdmFyIHN0YXJ0ID0gMCwgZW5kLCBjdXJyID0gMCwgbmV4dCA9IDA7XG4gIHZhciByZXN1bHQgPSAnJztcblxuICAvLyBJbnZhcmlhbnRzOiAwIDw9IHN0YXJ0IDw9IGxlbmd0aC0xLlxuICAvLyAgIDAgPD0gY3VyciA8PSBuZXh0IDw9IG1heCgwLCBsZW5ndGgtMikuIGN1cnIgLSBzdGFydCA8PSB3aWR0aC5cbiAgLy8gSW5zaWRlIHRoZSBsb29wOlxuICAvLyAgIEEgbWF0Y2ggaW1wbGllcyBsZW5ndGggPj0gMiwgc28gY3VyciBhbmQgbmV4dCBhcmUgPD0gbGVuZ3RoLTIuXG4gIHdoaWxlICgobWF0Y2ggPSBicmVha1JlLmV4ZWMobGluZSkpKSB7XG4gICAgbmV4dCA9IG1hdGNoLmluZGV4O1xuICAgIC8vIG1haW50YWluIGludmFyaWFudDogY3VyciAtIHN0YXJ0IDw9IHdpZHRoXG4gICAgaWYgKG5leHQgLSBzdGFydCA+IHdpZHRoKSB7XG4gICAgICBlbmQgPSAoY3VyciA+IHN0YXJ0KSA/IGN1cnIgOiBuZXh0OyAvLyBkZXJpdmUgZW5kIDw9IGxlbmd0aC0yXG4gICAgICByZXN1bHQgKz0gJ1xcbicgKyBsaW5lLnNsaWNlKHN0YXJ0LCBlbmQpO1xuICAgICAgLy8gc2tpcCB0aGUgc3BhY2UgdGhhdCB3YXMgb3V0cHV0IGFzIFxcblxuICAgICAgc3RhcnQgPSBlbmQgKyAxOyAgICAgICAgICAgICAgICAgICAgLy8gZGVyaXZlIHN0YXJ0IDw9IGxlbmd0aC0xXG4gICAgfVxuICAgIGN1cnIgPSBuZXh0O1xuICB9XG5cbiAgLy8gQnkgdGhlIGludmFyaWFudHMsIHN0YXJ0IDw9IGxlbmd0aC0xLCBzbyB0aGVyZSBpcyBzb21ldGhpbmcgbGVmdCBvdmVyLlxuICAvLyBJdCBpcyBlaXRoZXIgdGhlIHdob2xlIHN0cmluZyBvciBhIHBhcnQgc3RhcnRpbmcgZnJvbSBub24td2hpdGVzcGFjZS5cbiAgcmVzdWx0ICs9ICdcXG4nO1xuICAvLyBJbnNlcnQgYSBicmVhayBpZiB0aGUgcmVtYWluZGVyIGlzIHRvbyBsb25nIGFuZCB0aGVyZSBpcyBhIGJyZWFrIGF2YWlsYWJsZS5cbiAgaWYgKGxpbmUubGVuZ3RoIC0gc3RhcnQgPiB3aWR0aCAmJiBjdXJyID4gc3RhcnQpIHtcbiAgICByZXN1bHQgKz0gbGluZS5zbGljZShzdGFydCwgY3VycikgKyAnXFxuJyArIGxpbmUuc2xpY2UoY3VyciArIDEpO1xuICB9IGVsc2Uge1xuICAgIHJlc3VsdCArPSBsaW5lLnNsaWNlKHN0YXJ0KTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQuc2xpY2UoMSk7IC8vIGRyb3AgZXh0cmEgXFxuIGpvaW5lclxufVxuXG4vLyBFc2NhcGVzIGEgZG91YmxlLXF1b3RlZCBzdHJpbmcuXG5mdW5jdGlvbiBlc2NhcGVTdHJpbmcoc3RyaW5nKSB7XG4gIHZhciByZXN1bHQgPSAnJztcbiAgdmFyIGNoYXIgPSAwO1xuICB2YXIgZXNjYXBlU2VxO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyaW5nLmxlbmd0aDsgY2hhciA+PSAweDEwMDAwID8gaSArPSAyIDogaSsrKSB7XG4gICAgY2hhciA9IGNvZGVQb2ludEF0KHN0cmluZywgaSk7XG4gICAgZXNjYXBlU2VxID0gRVNDQVBFX1NFUVVFTkNFU1tjaGFyXTtcblxuICAgIGlmICghZXNjYXBlU2VxICYmIGlzUHJpbnRhYmxlKGNoYXIpKSB7XG4gICAgICByZXN1bHQgKz0gc3RyaW5nW2ldO1xuICAgICAgaWYgKGNoYXIgPj0gMHgxMDAwMCkgcmVzdWx0ICs9IHN0cmluZ1tpICsgMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdCArPSBlc2NhcGVTZXEgfHwgZW5jb2RlSGV4KGNoYXIpO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvd1NlcXVlbmNlKHN0YXRlLCBsZXZlbCwgb2JqZWN0KSB7XG4gIHZhciBfcmVzdWx0ID0gJycsXG4gICAgICBfdGFnICAgID0gc3RhdGUudGFnLFxuICAgICAgaW5kZXgsXG4gICAgICBsZW5ndGgsXG4gICAgICB2YWx1ZTtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICB2YWx1ZSA9IG9iamVjdFtpbmRleF07XG5cbiAgICBpZiAoc3RhdGUucmVwbGFjZXIpIHtcbiAgICAgIHZhbHVlID0gc3RhdGUucmVwbGFjZXIuY2FsbChvYmplY3QsIFN0cmluZyhpbmRleCksIHZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBXcml0ZSBvbmx5IHZhbGlkIGVsZW1lbnRzLCBwdXQgbnVsbCBpbnN0ZWFkIG9mIGludmFsaWQgZWxlbWVudHMuXG4gICAgaWYgKHdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwsIHZhbHVlLCBmYWxzZSwgZmFsc2UpIHx8XG4gICAgICAgICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICB3cml0ZU5vZGUoc3RhdGUsIGxldmVsLCBudWxsLCBmYWxzZSwgZmFsc2UpKSkge1xuXG4gICAgICBpZiAoX3Jlc3VsdCAhPT0gJycpIF9yZXN1bHQgKz0gJywnICsgKCFzdGF0ZS5jb25kZW5zZUZsb3cgPyAnICcgOiAnJyk7XG4gICAgICBfcmVzdWx0ICs9IHN0YXRlLmR1bXA7XG4gICAgfVxuICB9XG5cbiAgc3RhdGUudGFnID0gX3RhZztcbiAgc3RhdGUuZHVtcCA9ICdbJyArIF9yZXN1bHQgKyAnXSc7XG59XG5cbmZ1bmN0aW9uIHdyaXRlQmxvY2tTZXF1ZW5jZShzdGF0ZSwgbGV2ZWwsIG9iamVjdCwgY29tcGFjdCkge1xuICB2YXIgX3Jlc3VsdCA9ICcnLFxuICAgICAgX3RhZyAgICA9IHN0YXRlLnRhZyxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoLFxuICAgICAgdmFsdWU7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgdmFsdWUgPSBvYmplY3RbaW5kZXhdO1xuXG4gICAgaWYgKHN0YXRlLnJlcGxhY2VyKSB7XG4gICAgICB2YWx1ZSA9IHN0YXRlLnJlcGxhY2VyLmNhbGwob2JqZWN0LCBTdHJpbmcoaW5kZXgpLCB2YWx1ZSk7XG4gICAgfVxuXG4gICAgLy8gV3JpdGUgb25seSB2YWxpZCBlbGVtZW50cywgcHV0IG51bGwgaW5zdGVhZCBvZiBpbnZhbGlkIGVsZW1lbnRzLlxuICAgIGlmICh3cml0ZU5vZGUoc3RhdGUsIGxldmVsICsgMSwgdmFsdWUsIHRydWUsIHRydWUsIGZhbHNlLCB0cnVlKSB8fFxuICAgICAgICAodHlwZW9mIHZhbHVlID09PSAndW5kZWZpbmVkJyAmJlxuICAgICAgICAgd3JpdGVOb2RlKHN0YXRlLCBsZXZlbCArIDEsIG51bGwsIHRydWUsIHRydWUsIGZhbHNlLCB0cnVlKSkpIHtcblxuICAgICAgaWYgKCFjb21wYWN0IHx8IF9yZXN1bHQgIT09ICcnKSB7XG4gICAgICAgIF9yZXN1bHQgKz0gZ2VuZXJhdGVOZXh0TGluZShzdGF0ZSwgbGV2ZWwpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc3RhdGUuZHVtcCAmJiBDSEFSX0xJTkVfRkVFRCA9PT0gc3RhdGUuZHVtcC5jaGFyQ29kZUF0KDApKSB7XG4gICAgICAgIF9yZXN1bHQgKz0gJy0nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgX3Jlc3VsdCArPSAnLSAnO1xuICAgICAgfVxuXG4gICAgICBfcmVzdWx0ICs9IHN0YXRlLmR1bXA7XG4gICAgfVxuICB9XG5cbiAgc3RhdGUudGFnID0gX3RhZztcbiAgc3RhdGUuZHVtcCA9IF9yZXN1bHQgfHwgJ1tdJzsgLy8gRW1wdHkgc2VxdWVuY2UgaWYgbm8gdmFsaWQgdmFsdWVzLlxufVxuXG5mdW5jdGlvbiB3cml0ZUZsb3dNYXBwaW5nKHN0YXRlLCBsZXZlbCwgb2JqZWN0KSB7XG4gIHZhciBfcmVzdWx0ICAgICAgID0gJycsXG4gICAgICBfdGFnICAgICAgICAgID0gc3RhdGUudGFnLFxuICAgICAgb2JqZWN0S2V5TGlzdCA9IE9iamVjdC5rZXlzKG9iamVjdCksXG4gICAgICBpbmRleCxcbiAgICAgIGxlbmd0aCxcbiAgICAgIG9iamVjdEtleSxcbiAgICAgIG9iamVjdFZhbHVlLFxuICAgICAgcGFpckJ1ZmZlcjtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0S2V5TGlzdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG5cbiAgICBwYWlyQnVmZmVyID0gJyc7XG4gICAgaWYgKF9yZXN1bHQgIT09ICcnKSBwYWlyQnVmZmVyICs9ICcsICc7XG5cbiAgICBpZiAoc3RhdGUuY29uZGVuc2VGbG93KSBwYWlyQnVmZmVyICs9ICdcIic7XG5cbiAgICBvYmplY3RLZXkgPSBvYmplY3RLZXlMaXN0W2luZGV4XTtcbiAgICBvYmplY3RWYWx1ZSA9IG9iamVjdFtvYmplY3RLZXldO1xuXG4gICAgaWYgKHN0YXRlLnJlcGxhY2VyKSB7XG4gICAgICBvYmplY3RWYWx1ZSA9IHN0YXRlLnJlcGxhY2VyLmNhbGwob2JqZWN0LCBvYmplY3RLZXksIG9iamVjdFZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAoIXdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwsIG9iamVjdEtleSwgZmFsc2UsIGZhbHNlKSkge1xuICAgICAgY29udGludWU7IC8vIFNraXAgdGhpcyBwYWlyIGJlY2F1c2Ugb2YgaW52YWxpZCBrZXk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXRlLmR1bXAubGVuZ3RoID4gMTAyNCkgcGFpckJ1ZmZlciArPSAnPyAnO1xuXG4gICAgcGFpckJ1ZmZlciArPSBzdGF0ZS5kdW1wICsgKHN0YXRlLmNvbmRlbnNlRmxvdyA/ICdcIicgOiAnJykgKyAnOicgKyAoc3RhdGUuY29uZGVuc2VGbG93ID8gJycgOiAnICcpO1xuXG4gICAgaWYgKCF3cml0ZU5vZGUoc3RhdGUsIGxldmVsLCBvYmplY3RWYWx1ZSwgZmFsc2UsIGZhbHNlKSkge1xuICAgICAgY29udGludWU7IC8vIFNraXAgdGhpcyBwYWlyIGJlY2F1c2Ugb2YgaW52YWxpZCB2YWx1ZS5cbiAgICB9XG5cbiAgICBwYWlyQnVmZmVyICs9IHN0YXRlLmR1bXA7XG5cbiAgICAvLyBCb3RoIGtleSBhbmQgdmFsdWUgYXJlIHZhbGlkLlxuICAgIF9yZXN1bHQgKz0gcGFpckJ1ZmZlcjtcbiAgfVxuXG4gIHN0YXRlLnRhZyA9IF90YWc7XG4gIHN0YXRlLmR1bXAgPSAneycgKyBfcmVzdWx0ICsgJ30nO1xufVxuXG5mdW5jdGlvbiB3cml0ZUJsb2NrTWFwcGluZyhzdGF0ZSwgbGV2ZWwsIG9iamVjdCwgY29tcGFjdCkge1xuICB2YXIgX3Jlc3VsdCAgICAgICA9ICcnLFxuICAgICAgX3RhZyAgICAgICAgICA9IHN0YXRlLnRhZyxcbiAgICAgIG9iamVjdEtleUxpc3QgPSBPYmplY3Qua2V5cyhvYmplY3QpLFxuICAgICAgaW5kZXgsXG4gICAgICBsZW5ndGgsXG4gICAgICBvYmplY3RLZXksXG4gICAgICBvYmplY3RWYWx1ZSxcbiAgICAgIGV4cGxpY2l0UGFpcixcbiAgICAgIHBhaXJCdWZmZXI7XG5cbiAgLy8gQWxsb3cgc29ydGluZyBrZXlzIHNvIHRoYXQgdGhlIG91dHB1dCBmaWxlIGlzIGRldGVybWluaXN0aWNcbiAgaWYgKHN0YXRlLnNvcnRLZXlzID09PSB0cnVlKSB7XG4gICAgLy8gRGVmYXVsdCBzb3J0aW5nXG4gICAgb2JqZWN0S2V5TGlzdC5zb3J0KCk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIHN0YXRlLnNvcnRLZXlzID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gQ3VzdG9tIHNvcnQgZnVuY3Rpb25cbiAgICBvYmplY3RLZXlMaXN0LnNvcnQoc3RhdGUuc29ydEtleXMpO1xuICB9IGVsc2UgaWYgKHN0YXRlLnNvcnRLZXlzKSB7XG4gICAgLy8gU29tZXRoaW5nIGlzIHdyb25nXG4gICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignc29ydEtleXMgbXVzdCBiZSBhIGJvb2xlYW4gb3IgYSBmdW5jdGlvbicpO1xuICB9XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdEtleUxpc3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHBhaXJCdWZmZXIgPSAnJztcblxuICAgIGlmICghY29tcGFjdCB8fCBfcmVzdWx0ICE9PSAnJykge1xuICAgICAgcGFpckJ1ZmZlciArPSBnZW5lcmF0ZU5leHRMaW5lKHN0YXRlLCBsZXZlbCk7XG4gICAgfVxuXG4gICAgb2JqZWN0S2V5ID0gb2JqZWN0S2V5TGlzdFtpbmRleF07XG4gICAgb2JqZWN0VmFsdWUgPSBvYmplY3Rbb2JqZWN0S2V5XTtcblxuICAgIGlmIChzdGF0ZS5yZXBsYWNlcikge1xuICAgICAgb2JqZWN0VmFsdWUgPSBzdGF0ZS5yZXBsYWNlci5jYWxsKG9iamVjdCwgb2JqZWN0S2V5LCBvYmplY3RWYWx1ZSk7XG4gICAgfVxuXG4gICAgaWYgKCF3cml0ZU5vZGUoc3RhdGUsIGxldmVsICsgMSwgb2JqZWN0S2V5LCB0cnVlLCB0cnVlLCB0cnVlKSkge1xuICAgICAgY29udGludWU7IC8vIFNraXAgdGhpcyBwYWlyIGJlY2F1c2Ugb2YgaW52YWxpZCBrZXkuXG4gICAgfVxuXG4gICAgZXhwbGljaXRQYWlyID0gKHN0YXRlLnRhZyAhPT0gbnVsbCAmJiBzdGF0ZS50YWcgIT09ICc/JykgfHxcbiAgICAgICAgICAgICAgICAgICAoc3RhdGUuZHVtcCAmJiBzdGF0ZS5kdW1wLmxlbmd0aCA+IDEwMjQpO1xuXG4gICAgaWYgKGV4cGxpY2l0UGFpcikge1xuICAgICAgaWYgKHN0YXRlLmR1bXAgJiYgQ0hBUl9MSU5FX0ZFRUQgPT09IHN0YXRlLmR1bXAuY2hhckNvZGVBdCgwKSkge1xuICAgICAgICBwYWlyQnVmZmVyICs9ICc/JztcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHBhaXJCdWZmZXIgKz0gJz8gJztcbiAgICAgIH1cbiAgICB9XG5cbiAgICBwYWlyQnVmZmVyICs9IHN0YXRlLmR1bXA7XG5cbiAgICBpZiAoZXhwbGljaXRQYWlyKSB7XG4gICAgICBwYWlyQnVmZmVyICs9IGdlbmVyYXRlTmV4dExpbmUoc3RhdGUsIGxldmVsKTtcbiAgICB9XG5cbiAgICBpZiAoIXdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwgKyAxLCBvYmplY3RWYWx1ZSwgdHJ1ZSwgZXhwbGljaXRQYWlyKSkge1xuICAgICAgY29udGludWU7IC8vIFNraXAgdGhpcyBwYWlyIGJlY2F1c2Ugb2YgaW52YWxpZCB2YWx1ZS5cbiAgICB9XG5cbiAgICBpZiAoc3RhdGUuZHVtcCAmJiBDSEFSX0xJTkVfRkVFRCA9PT0gc3RhdGUuZHVtcC5jaGFyQ29kZUF0KDApKSB7XG4gICAgICBwYWlyQnVmZmVyICs9ICc6JztcbiAgICB9IGVsc2Uge1xuICAgICAgcGFpckJ1ZmZlciArPSAnOiAnO1xuICAgIH1cblxuICAgIHBhaXJCdWZmZXIgKz0gc3RhdGUuZHVtcDtcblxuICAgIC8vIEJvdGgga2V5IGFuZCB2YWx1ZSBhcmUgdmFsaWQuXG4gICAgX3Jlc3VsdCArPSBwYWlyQnVmZmVyO1xuICB9XG5cbiAgc3RhdGUudGFnID0gX3RhZztcbiAgc3RhdGUuZHVtcCA9IF9yZXN1bHQgfHwgJ3t9JzsgLy8gRW1wdHkgbWFwcGluZyBpZiBubyB2YWxpZCBwYWlycy5cbn1cblxuZnVuY3Rpb24gZGV0ZWN0VHlwZShzdGF0ZSwgb2JqZWN0LCBleHBsaWNpdCkge1xuICB2YXIgX3Jlc3VsdCwgdHlwZUxpc3QsIGluZGV4LCBsZW5ndGgsIHR5cGUsIHN0eWxlO1xuXG4gIHR5cGVMaXN0ID0gZXhwbGljaXQgPyBzdGF0ZS5leHBsaWNpdFR5cGVzIDogc3RhdGUuaW1wbGljaXRUeXBlcztcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gdHlwZUxpc3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHR5cGUgPSB0eXBlTGlzdFtpbmRleF07XG5cbiAgICBpZiAoKHR5cGUuaW5zdGFuY2VPZiAgfHwgdHlwZS5wcmVkaWNhdGUpICYmXG4gICAgICAgICghdHlwZS5pbnN0YW5jZU9mIHx8ICgodHlwZW9mIG9iamVjdCA9PT0gJ29iamVjdCcpICYmIChvYmplY3QgaW5zdGFuY2VvZiB0eXBlLmluc3RhbmNlT2YpKSkgJiZcbiAgICAgICAgKCF0eXBlLnByZWRpY2F0ZSAgfHwgdHlwZS5wcmVkaWNhdGUob2JqZWN0KSkpIHtcblxuICAgICAgaWYgKGV4cGxpY2l0KSB7XG4gICAgICAgIGlmICh0eXBlLm11bHRpICYmIHR5cGUucmVwcmVzZW50TmFtZSkge1xuICAgICAgICAgIHN0YXRlLnRhZyA9IHR5cGUucmVwcmVzZW50TmFtZShvYmplY3QpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YXRlLnRhZyA9IHR5cGUudGFnO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzdGF0ZS50YWcgPSAnPyc7XG4gICAgICB9XG5cbiAgICAgIGlmICh0eXBlLnJlcHJlc2VudCkge1xuICAgICAgICBzdHlsZSA9IHN0YXRlLnN0eWxlTWFwW3R5cGUudGFnXSB8fCB0eXBlLmRlZmF1bHRTdHlsZTtcblxuICAgICAgICBpZiAoX3RvU3RyaW5nLmNhbGwodHlwZS5yZXByZXNlbnQpID09PSAnW29iamVjdCBGdW5jdGlvbl0nKSB7XG4gICAgICAgICAgX3Jlc3VsdCA9IHR5cGUucmVwcmVzZW50KG9iamVjdCwgc3R5bGUpO1xuICAgICAgICB9IGVsc2UgaWYgKF9oYXNPd25Qcm9wZXJ0eS5jYWxsKHR5cGUucmVwcmVzZW50LCBzdHlsZSkpIHtcbiAgICAgICAgICBfcmVzdWx0ID0gdHlwZS5yZXByZXNlbnRbc3R5bGVdKG9iamVjdCwgc3R5bGUpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRocm93IG5ldyBleGNlcHRpb24oJyE8JyArIHR5cGUudGFnICsgJz4gdGFnIHJlc29sdmVyIGFjY2VwdHMgbm90IFwiJyArIHN0eWxlICsgJ1wiIHN0eWxlJyk7XG4gICAgICAgIH1cblxuICAgICAgICBzdGF0ZS5kdW1wID0gX3Jlc3VsdDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyBTZXJpYWxpemVzIGBvYmplY3RgIGFuZCB3cml0ZXMgaXQgdG8gZ2xvYmFsIGByZXN1bHRgLlxuLy8gUmV0dXJucyB0cnVlIG9uIHN1Y2Nlc3MsIG9yIGZhbHNlIG9uIGludmFsaWQgb2JqZWN0LlxuLy9cbmZ1bmN0aW9uIHdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwsIG9iamVjdCwgYmxvY2ssIGNvbXBhY3QsIGlza2V5LCBpc2Jsb2Nrc2VxKSB7XG4gIHN0YXRlLnRhZyA9IG51bGw7XG4gIHN0YXRlLmR1bXAgPSBvYmplY3Q7XG5cbiAgaWYgKCFkZXRlY3RUeXBlKHN0YXRlLCBvYmplY3QsIGZhbHNlKSkge1xuICAgIGRldGVjdFR5cGUoc3RhdGUsIG9iamVjdCwgdHJ1ZSk7XG4gIH1cblxuICB2YXIgdHlwZSA9IF90b1N0cmluZy5jYWxsKHN0YXRlLmR1bXApO1xuICB2YXIgaW5ibG9jayA9IGJsb2NrO1xuICB2YXIgdGFnU3RyO1xuXG4gIGlmIChibG9jaykge1xuICAgIGJsb2NrID0gKHN0YXRlLmZsb3dMZXZlbCA8IDAgfHwgc3RhdGUuZmxvd0xldmVsID4gbGV2ZWwpO1xuICB9XG5cbiAgdmFyIG9iamVjdE9yQXJyYXkgPSB0eXBlID09PSAnW29iamVjdCBPYmplY3RdJyB8fCB0eXBlID09PSAnW29iamVjdCBBcnJheV0nLFxuICAgICAgZHVwbGljYXRlSW5kZXgsXG4gICAgICBkdXBsaWNhdGU7XG5cbiAgaWYgKG9iamVjdE9yQXJyYXkpIHtcbiAgICBkdXBsaWNhdGVJbmRleCA9IHN0YXRlLmR1cGxpY2F0ZXMuaW5kZXhPZihvYmplY3QpO1xuICAgIGR1cGxpY2F0ZSA9IGR1cGxpY2F0ZUluZGV4ICE9PSAtMTtcbiAgfVxuXG4gIGlmICgoc3RhdGUudGFnICE9PSBudWxsICYmIHN0YXRlLnRhZyAhPT0gJz8nKSB8fCBkdXBsaWNhdGUgfHwgKHN0YXRlLmluZGVudCAhPT0gMiAmJiBsZXZlbCA+IDApKSB7XG4gICAgY29tcGFjdCA9IGZhbHNlO1xuICB9XG5cbiAgaWYgKGR1cGxpY2F0ZSAmJiBzdGF0ZS51c2VkRHVwbGljYXRlc1tkdXBsaWNhdGVJbmRleF0pIHtcbiAgICBzdGF0ZS5kdW1wID0gJypyZWZfJyArIGR1cGxpY2F0ZUluZGV4O1xuICB9IGVsc2Uge1xuICAgIGlmIChvYmplY3RPckFycmF5ICYmIGR1cGxpY2F0ZSAmJiAhc3RhdGUudXNlZER1cGxpY2F0ZXNbZHVwbGljYXRlSW5kZXhdKSB7XG4gICAgICBzdGF0ZS51c2VkRHVwbGljYXRlc1tkdXBsaWNhdGVJbmRleF0gPSB0cnVlO1xuICAgIH1cbiAgICBpZiAodHlwZSA9PT0gJ1tvYmplY3QgT2JqZWN0XScpIHtcbiAgICAgIGlmIChibG9jayAmJiAoT2JqZWN0LmtleXMoc3RhdGUuZHVtcCkubGVuZ3RoICE9PSAwKSkge1xuICAgICAgICB3cml0ZUJsb2NrTWFwcGluZyhzdGF0ZSwgbGV2ZWwsIHN0YXRlLmR1bXAsIGNvbXBhY3QpO1xuICAgICAgICBpZiAoZHVwbGljYXRlKSB7XG4gICAgICAgICAgc3RhdGUuZHVtcCA9ICcmcmVmXycgKyBkdXBsaWNhdGVJbmRleCArIHN0YXRlLmR1bXA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdyaXRlRmxvd01hcHBpbmcoc3RhdGUsIGxldmVsLCBzdGF0ZS5kdW1wKTtcbiAgICAgICAgaWYgKGR1cGxpY2F0ZSkge1xuICAgICAgICAgIHN0YXRlLmR1bXAgPSAnJnJlZl8nICsgZHVwbGljYXRlSW5kZXggKyAnICcgKyBzdGF0ZS5kdW1wO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnW29iamVjdCBBcnJheV0nKSB7XG4gICAgICBpZiAoYmxvY2sgJiYgKHN0YXRlLmR1bXAubGVuZ3RoICE9PSAwKSkge1xuICAgICAgICBpZiAoc3RhdGUubm9BcnJheUluZGVudCAmJiAhaXNibG9ja3NlcSAmJiBsZXZlbCA+IDApIHtcbiAgICAgICAgICB3cml0ZUJsb2NrU2VxdWVuY2Uoc3RhdGUsIGxldmVsIC0gMSwgc3RhdGUuZHVtcCwgY29tcGFjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgd3JpdGVCbG9ja1NlcXVlbmNlKHN0YXRlLCBsZXZlbCwgc3RhdGUuZHVtcCwgY29tcGFjdCk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGR1cGxpY2F0ZSkge1xuICAgICAgICAgIHN0YXRlLmR1bXAgPSAnJnJlZl8nICsgZHVwbGljYXRlSW5kZXggKyBzdGF0ZS5kdW1wO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB3cml0ZUZsb3dTZXF1ZW5jZShzdGF0ZSwgbGV2ZWwsIHN0YXRlLmR1bXApO1xuICAgICAgICBpZiAoZHVwbGljYXRlKSB7XG4gICAgICAgICAgc3RhdGUuZHVtcCA9ICcmcmVmXycgKyBkdXBsaWNhdGVJbmRleCArICcgJyArIHN0YXRlLmR1bXA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdbb2JqZWN0IFN0cmluZ10nKSB7XG4gICAgICBpZiAoc3RhdGUudGFnICE9PSAnPycpIHtcbiAgICAgICAgd3JpdGVTY2FsYXIoc3RhdGUsIHN0YXRlLmR1bXAsIGxldmVsLCBpc2tleSwgaW5ibG9jayk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnW29iamVjdCBVbmRlZmluZWRdJykge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAoc3RhdGUuc2tpcEludmFsaWQpIHJldHVybiBmYWxzZTtcbiAgICAgIHRocm93IG5ldyBleGNlcHRpb24oJ3VuYWNjZXB0YWJsZSBraW5kIG9mIGFuIG9iamVjdCB0byBkdW1wICcgKyB0eXBlKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdGUudGFnICE9PSBudWxsICYmIHN0YXRlLnRhZyAhPT0gJz8nKSB7XG4gICAgICAvLyBOZWVkIHRvIGVuY29kZSBhbGwgY2hhcmFjdGVycyBleGNlcHQgdGhvc2UgYWxsb3dlZCBieSB0aGUgc3BlYzpcbiAgICAgIC8vXG4gICAgICAvLyBbMzVdIG5zLWRlYy1kaWdpdCAgICA6Oj0gIFsjeDMwLSN4MzldIC8qIDAtOSAqL1xuICAgICAgLy8gWzM2XSBucy1oZXgtZGlnaXQgICAgOjo9ICBucy1kZWMtZGlnaXRcbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHwgWyN4NDEtI3g0Nl0gLyogQS1GICovIHwgWyN4NjEtI3g2Nl0gLyogYS1mICovXG4gICAgICAvLyBbMzddIG5zLWFzY2lpLWxldHRlciA6Oj0gIFsjeDQxLSN4NUFdIC8qIEEtWiAqLyB8IFsjeDYxLSN4N0FdIC8qIGEteiAqL1xuICAgICAgLy8gWzM4XSBucy13b3JkLWNoYXIgICAgOjo9ICBucy1kZWMtZGlnaXQgfCBucy1hc2NpaS1sZXR0ZXIgfCBcdTIwMUMtXHUyMDFEXG4gICAgICAvLyBbMzldIG5zLXVyaS1jaGFyICAgICA6Oj0gIFx1MjAxQyVcdTIwMUQgbnMtaGV4LWRpZ2l0IG5zLWhleC1kaWdpdCB8IG5zLXdvcmQtY2hhciB8IFx1MjAxQyNcdTIwMURcbiAgICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHwgXHUyMDFDO1x1MjAxRCB8IFx1MjAxQy9cdTIwMUQgfCBcdTIwMUM/XHUyMDFEIHwgXHUyMDFDOlx1MjAxRCB8IFx1MjAxQ0BcdTIwMUQgfCBcdTIwMUMmXHUyMDFEIHwgXHUyMDFDPVx1MjAxRCB8IFx1MjAxQytcdTIwMUQgfCBcdTIwMUMkXHUyMDFEIHwgXHUyMDFDLFx1MjAxRFxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgfCBcdTIwMUNfXHUyMDFEIHwgXHUyMDFDLlx1MjAxRCB8IFx1MjAxQyFcdTIwMUQgfCBcdTIwMUN+XHUyMDFEIHwgXHUyMDFDKlx1MjAxRCB8IFx1MjAxQydcdTIwMUQgfCBcdTIwMUMoXHUyMDFEIHwgXHUyMDFDKVx1MjAxRCB8IFx1MjAxQ1tcdTIwMUQgfCBcdTIwMUNdXHUyMDFEXG4gICAgICAvL1xuICAgICAgLy8gQWxzbyBuZWVkIHRvIGVuY29kZSAnIScgYmVjYXVzZSBpdCBoYXMgc3BlY2lhbCBtZWFuaW5nIChlbmQgb2YgdGFnIHByZWZpeCkuXG4gICAgICAvL1xuICAgICAgdGFnU3RyID0gZW5jb2RlVVJJKFxuICAgICAgICBzdGF0ZS50YWdbMF0gPT09ICchJyA/IHN0YXRlLnRhZy5zbGljZSgxKSA6IHN0YXRlLnRhZ1xuICAgICAgKS5yZXBsYWNlKC8hL2csICclMjEnKTtcblxuICAgICAgaWYgKHN0YXRlLnRhZ1swXSA9PT0gJyEnKSB7XG4gICAgICAgIHRhZ1N0ciA9ICchJyArIHRhZ1N0cjtcbiAgICAgIH0gZWxzZSBpZiAodGFnU3RyLnNsaWNlKDAsIDE4KSA9PT0gJ3RhZzp5YW1sLm9yZywyMDAyOicpIHtcbiAgICAgICAgdGFnU3RyID0gJyEhJyArIHRhZ1N0ci5zbGljZSgxOCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0YWdTdHIgPSAnITwnICsgdGFnU3RyICsgJz4nO1xuICAgICAgfVxuXG4gICAgICBzdGF0ZS5kdW1wID0gdGFnU3RyICsgJyAnICsgc3RhdGUuZHVtcDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gZ2V0RHVwbGljYXRlUmVmZXJlbmNlcyhvYmplY3QsIHN0YXRlKSB7XG4gIHZhciBvYmplY3RzID0gW10sXG4gICAgICBkdXBsaWNhdGVzSW5kZXhlcyA9IFtdLFxuICAgICAgaW5kZXgsXG4gICAgICBsZW5ndGg7XG5cbiAgaW5zcGVjdE5vZGUob2JqZWN0LCBvYmplY3RzLCBkdXBsaWNhdGVzSW5kZXhlcyk7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IGR1cGxpY2F0ZXNJbmRleGVzLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBzdGF0ZS5kdXBsaWNhdGVzLnB1c2gob2JqZWN0c1tkdXBsaWNhdGVzSW5kZXhlc1tpbmRleF1dKTtcbiAgfVxuICBzdGF0ZS51c2VkRHVwbGljYXRlcyA9IG5ldyBBcnJheShsZW5ndGgpO1xufVxuXG5mdW5jdGlvbiBpbnNwZWN0Tm9kZShvYmplY3QsIG9iamVjdHMsIGR1cGxpY2F0ZXNJbmRleGVzKSB7XG4gIHZhciBvYmplY3RLZXlMaXN0LFxuICAgICAgaW5kZXgsXG4gICAgICBsZW5ndGg7XG5cbiAgaWYgKG9iamVjdCAhPT0gbnVsbCAmJiB0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0Jykge1xuICAgIGluZGV4ID0gb2JqZWN0cy5pbmRleE9mKG9iamVjdCk7XG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgICAgaWYgKGR1cGxpY2F0ZXNJbmRleGVzLmluZGV4T2YoaW5kZXgpID09PSAtMSkge1xuICAgICAgICBkdXBsaWNhdGVzSW5kZXhlcy5wdXNoKGluZGV4KTtcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgb2JqZWN0cy5wdXNoKG9iamVjdCk7XG5cbiAgICAgIGlmIChBcnJheS5pc0FycmF5KG9iamVjdCkpIHtcbiAgICAgICAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgICAgICAgaW5zcGVjdE5vZGUob2JqZWN0W2luZGV4XSwgb2JqZWN0cywgZHVwbGljYXRlc0luZGV4ZXMpO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBvYmplY3RLZXlMaXN0ID0gT2JqZWN0LmtleXMob2JqZWN0KTtcblxuICAgICAgICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0S2V5TGlzdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgICAgICAgaW5zcGVjdE5vZGUob2JqZWN0W29iamVjdEtleUxpc3RbaW5kZXhdXSwgb2JqZWN0cywgZHVwbGljYXRlc0luZGV4ZXMpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG59XG5cbmZ1bmN0aW9uIGR1bXAkMShpbnB1dCwgb3B0aW9ucykge1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICB2YXIgc3RhdGUgPSBuZXcgU3RhdGUob3B0aW9ucyk7XG5cbiAgaWYgKCFzdGF0ZS5ub1JlZnMpIGdldER1cGxpY2F0ZVJlZmVyZW5jZXMoaW5wdXQsIHN0YXRlKTtcblxuICB2YXIgdmFsdWUgPSBpbnB1dDtcblxuICBpZiAoc3RhdGUucmVwbGFjZXIpIHtcbiAgICB2YWx1ZSA9IHN0YXRlLnJlcGxhY2VyLmNhbGwoeyAnJzogdmFsdWUgfSwgJycsIHZhbHVlKTtcbiAgfVxuXG4gIGlmICh3cml0ZU5vZGUoc3RhdGUsIDAsIHZhbHVlLCB0cnVlLCB0cnVlKSkgcmV0dXJuIHN0YXRlLmR1bXAgKyAnXFxuJztcblxuICByZXR1cm4gJyc7XG59XG5cbnZhciBkdW1wXzEgPSBkdW1wJDE7XG5cbnZhciBkdW1wZXIgPSB7XG5cdGR1bXA6IGR1bXBfMVxufTtcblxuZnVuY3Rpb24gcmVuYW1lZChmcm9tLCB0bykge1xuICByZXR1cm4gZnVuY3Rpb24gKCkge1xuICAgIHRocm93IG5ldyBFcnJvcignRnVuY3Rpb24geWFtbC4nICsgZnJvbSArICcgaXMgcmVtb3ZlZCBpbiBqcy15YW1sIDQuICcgK1xuICAgICAgJ1VzZSB5YW1sLicgKyB0byArICcgaW5zdGVhZCwgd2hpY2ggaXMgbm93IHNhZmUgYnkgZGVmYXVsdC4nKTtcbiAgfTtcbn1cblxuXG52YXIgVHlwZSAgICAgICAgICAgICAgICA9IHR5cGU7XG52YXIgU2NoZW1hICAgICAgICAgICAgICA9IHNjaGVtYTtcbnZhciBGQUlMU0FGRV9TQ0hFTUEgICAgID0gZmFpbHNhZmU7XG52YXIgSlNPTl9TQ0hFTUEgICAgICAgICA9IGpzb247XG52YXIgQ09SRV9TQ0hFTUEgICAgICAgICA9IGNvcmU7XG52YXIgREVGQVVMVF9TQ0hFTUEgICAgICA9IF9kZWZhdWx0O1xudmFyIGxvYWQgICAgICAgICAgICAgICAgPSBsb2FkZXIubG9hZDtcbnZhciBsb2FkQWxsICAgICAgICAgICAgID0gbG9hZGVyLmxvYWRBbGw7XG52YXIgZHVtcCAgICAgICAgICAgICAgICA9IGR1bXBlci5kdW1wO1xudmFyIFlBTUxFeGNlcHRpb24gICAgICAgPSBleGNlcHRpb247XG5cbi8vIFJlLWV4cG9ydCBhbGwgdHlwZXMgaW4gY2FzZSB1c2VyIHdhbnRzIHRvIGNyZWF0ZSBjdXN0b20gc2NoZW1hXG52YXIgdHlwZXMgPSB7XG4gIGJpbmFyeTogICAgYmluYXJ5LFxuICBmbG9hdDogICAgIGZsb2F0LFxuICBtYXA6ICAgICAgIG1hcCxcbiAgbnVsbDogICAgICBfbnVsbCxcbiAgcGFpcnM6ICAgICBwYWlycyxcbiAgc2V0OiAgICAgICBzZXQsXG4gIHRpbWVzdGFtcDogdGltZXN0YW1wLFxuICBib29sOiAgICAgIGJvb2wsXG4gIGludDogICAgICAgaW50LFxuICBtZXJnZTogICAgIG1lcmdlLFxuICBvbWFwOiAgICAgIG9tYXAsXG4gIHNlcTogICAgICAgc2VxLFxuICBzdHI6ICAgICAgIHN0clxufTtcblxuLy8gUmVtb3ZlZCBmdW5jdGlvbnMgZnJvbSBKUy1ZQU1MIDMuMC54XG52YXIgc2FmZUxvYWQgICAgICAgICAgICA9IHJlbmFtZWQoJ3NhZmVMb2FkJywgJ2xvYWQnKTtcbnZhciBzYWZlTG9hZEFsbCAgICAgICAgID0gcmVuYW1lZCgnc2FmZUxvYWRBbGwnLCAnbG9hZEFsbCcpO1xudmFyIHNhZmVEdW1wICAgICAgICAgICAgPSByZW5hbWVkKCdzYWZlRHVtcCcsICdkdW1wJyk7XG5cbnZhciBqc1lhbWwgPSB7XG5cdFR5cGU6IFR5cGUsXG5cdFNjaGVtYTogU2NoZW1hLFxuXHRGQUlMU0FGRV9TQ0hFTUE6IEZBSUxTQUZFX1NDSEVNQSxcblx0SlNPTl9TQ0hFTUE6IEpTT05fU0NIRU1BLFxuXHRDT1JFX1NDSEVNQTogQ09SRV9TQ0hFTUEsXG5cdERFRkFVTFRfU0NIRU1BOiBERUZBVUxUX1NDSEVNQSxcblx0bG9hZDogbG9hZCxcblx0bG9hZEFsbDogbG9hZEFsbCxcblx0ZHVtcDogZHVtcCxcblx0WUFNTEV4Y2VwdGlvbjogWUFNTEV4Y2VwdGlvbixcblx0dHlwZXM6IHR5cGVzLFxuXHRzYWZlTG9hZDogc2FmZUxvYWQsXG5cdHNhZmVMb2FkQWxsOiBzYWZlTG9hZEFsbCxcblx0c2FmZUR1bXA6IHNhZmVEdW1wXG59O1xuXG5leHBvcnQgZGVmYXVsdCBqc1lhbWw7XG5leHBvcnQgeyBDT1JFX1NDSEVNQSwgREVGQVVMVF9TQ0hFTUEsIEZBSUxTQUZFX1NDSEVNQSwgSlNPTl9TQ0hFTUEsIFNjaGVtYSwgVHlwZSwgWUFNTEV4Y2VwdGlvbiwgZHVtcCwgbG9hZCwgbG9hZEFsbCwgc2FmZUR1bXAsIHNhZmVMb2FkLCBzYWZlTG9hZEFsbCwgdHlwZXMgfTtcbiIsICJpbXBvcnQgeyBOb3RpY2UsIFRGaWxlLCBBcHAgfSBmcm9tIFwib2JzaWRpYW5cIjtcclxuaW1wb3J0IHsgY3JlYXRlUHJvdmlkZXIgfSBmcm9tIFwiLi4vcHJvdmlkZXJzXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2UsIE15UGx1Z2luU2V0dGluZ3MgfSBmcm9tIFwiLi90eXBlc1wiO1xyXG5pbXBvcnQgeyBERUZBVUxUX1RJVExFX1BST01QVCwgREVGQVVMVF9TVU1NQVJZX1BST01QVCwgREVGQVVMVF9ZQU1MX1NZU1RFTV9NRVNTQUdFIH0gZnJvbSBcIi4vcHJvbXB0c1wiO1xyXG5pbXBvcnQgKiBhcyB5YW1sIGZyb20gXCJqcy15YW1sXCI7XHJcblxyXG4vKipcclxuICogR2VuZXJhdGUgYSBUYWJsZSBvZiBDb250ZW50cyBmcm9tIGFsbCBoZWFkZXJzIGluIHRoZSBub3RlLlxyXG4gKiBSZXR1cm5zIGEgc3RyaW5nIHdpdGggaW5kZW50ZWQgYnVsbGV0IHBvaW50cywgb3IgYW4gZW1wdHkgc3RyaW5nIGlmIG5vIGhlYWRlcnMuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZW5lcmF0ZVRhYmxlT2ZDb250ZW50cyhub3RlQ29udGVudDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGhlYWRlckxpbmVzID0gbm90ZUNvbnRlbnQuc3BsaXQoJ1xcbicpLmZpbHRlcihsaW5lID0+IC9eI3sxLDZ9XFxzKy4rLy50ZXN0KGxpbmUpKTtcclxuICAgIGlmIChoZWFkZXJMaW5lcy5sZW5ndGggPT09IDApIHJldHVybiBcIlwiO1xyXG4gICAgcmV0dXJuIGhlYWRlckxpbmVzXHJcbiAgICAgICAgLm1hcChsaW5lID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBsaW5lLm1hdGNoKC9eKCN7MSw2fSlcXHMrKC4rKS8pO1xyXG4gICAgICAgICAgICBpZiAoIW1hdGNoKSByZXR1cm4gXCJcIjtcclxuICAgICAgICAgICAgY29uc3QgbGV2ZWwgPSBtYXRjaFsxXS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpdGxlID0gbWF0Y2hbMl0udHJpbSgpO1xyXG4gICAgICAgICAgICAvLyBJbmRlbnQgYmFzZWQgb24gaGVhZGVyIGxldmVsICgyIHNwYWNlcyBwZXIgbGV2ZWwgYWZ0ZXIgSDEpXHJcbiAgICAgICAgICAgIHJldHVybiBgJHsnICAnLnJlcGVhdChsZXZlbCAtIDEpfS0gJHt0aXRsZX1gO1xyXG4gICAgICAgIH0pXHJcbiAgICAgICAgLmpvaW4oJ1xcbicpO1xyXG59XHJcblxyXG5jb25zdCBERUJVRyA9IHRydWU7XHJcblxyXG5mdW5jdGlvbiBkZWJ1ZyguLi5hcmdzOiBhbnlbXSkge1xyXG4gICAgaWYgKERFQlVHKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coXCJbREVCVUddXCIsIC4uLmFyZ3MpO1xyXG4gICAgfVxyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVOb3RlVGl0bGUoXHJcbiAgICBhcHA6IEFwcCxcclxuICAgIHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzLFxyXG4gICAgcHJvY2Vzc01lc3NhZ2VzOiAobWVzc2FnZXM6IE1lc3NhZ2VbXSkgPT4gUHJvbWlzZTxNZXNzYWdlW10+XHJcbikge1xyXG4gICAgZGVidWcoXCJTdGFydGluZyBnZW5lcmF0ZU5vdGVUaXRsZVwiKTtcclxuICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgIGlmICghYWN0aXZlRmlsZSkge1xyXG4gICAgICAgIG5ldyBOb3RpY2UoXCJObyBhY3RpdmUgbm90ZSBmb3VuZC5cIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IG5vdGVDb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LmNhY2hlZFJlYWQoYWN0aXZlRmlsZSk7XHJcbiAgICBub3RlQ29udGVudCA9IG5vdGVDb250ZW50LnNsaWNlKDAsIDE1MDAwKTtcclxuXHJcbiAgICAvLyBHZW5lcmF0ZSBUYWJsZSBvZiBDb250ZW50cyBmcm9tIGFsbCBoZWFkZXJzIGluIHRoZSBub3RlXHJcbiAgICBjb25zdCB0b2MgPSBnZW5lcmF0ZVRhYmxlT2ZDb250ZW50cyhub3RlQ29udGVudCk7XHJcblxyXG4gICAgLy8gVXNlIHRoZSBkZWZhdWx0IHRpdGxlIHByb21wdCBmcm9tIHByb21wdHMudHNcclxuICAgIGNvbnN0IHByb21wdCA9IERFRkFVTFRfVElUTEVfUFJPTVBUO1xyXG4gICAgY29uc3QgdXNlckNvbnRlbnQgPSAodG9jICYmIHRvYy50cmltKCkubGVuZ3RoID4gMCA/IFwiVGFibGUgb2YgQ29udGVudHM6XFxuXCIgKyB0b2MgKyBcIlxcblxcblwiIDogXCJcIikgKyBub3RlQ29udGVudDtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGRlYnVnKFwiUHJvdmlkZXI6XCIsIHNldHRpbmdzLnByb3ZpZGVyKTtcclxuICAgICAgICBjb25zdCBwcm92aWRlciA9IGNyZWF0ZVByb3ZpZGVyKHNldHRpbmdzKTtcclxuICAgICAgICAvLyBDb21wb3NlIG1lc3NhZ2VzOiBzeXN0ZW0gPSBwcm9tcHQsIHVzZXIgPSBub3RlIGNvbnRlbnQgKHdpdGggVE9DKVxyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzOiBNZXNzYWdlW10gPSBbXHJcbiAgICAgICAgICAgIHsgcm9sZTogXCJzeXN0ZW1cIiwgY29udGVudDogcHJvbXB0IH0sXHJcbiAgICAgICAgICAgIHsgcm9sZTogXCJ1c2VyXCIsIGNvbnRlbnQ6IHVzZXJDb250ZW50IH1cclxuICAgICAgICBdO1xyXG5cclxuICAgICAgICBkZWJ1ZyhcIk9yaWdpbmFsIG1lc3NhZ2VzOlwiLCBKU09OLnN0cmluZ2lmeShtZXNzYWdlcykpO1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsRW5hYmxlQ29udGV4dE5vdGVzID0gc2V0dGluZ3MuZW5hYmxlQ29udGV4dE5vdGVzO1xyXG4gICAgICAgIGRlYnVnKFwiT3JpZ2luYWwgZW5hYmxlQ29udGV4dE5vdGVzOlwiLCBvcmlnaW5hbEVuYWJsZUNvbnRleHROb3Rlcyk7XHJcbiAgICAgICAgKHNldHRpbmdzIGFzIGFueSkuZW5hYmxlQ29udGV4dE5vdGVzID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZE1lc3NhZ2VzID0gYXdhaXQgcHJvY2Vzc01lc3NhZ2VzKG1lc3NhZ2VzKTtcclxuICAgICAgICAgICAgZGVidWcoXCJQcm9jZXNzZWQgbWVzc2FnZXM6XCIsIEpTT04uc3RyaW5naWZ5KHByb2Nlc3NlZE1lc3NhZ2VzKSk7XHJcbiAgICAgICAgICAgIChzZXR0aW5ncyBhcyBhbnkpLmVuYWJsZUNvbnRleHROb3RlcyA9IG9yaWdpbmFsRW5hYmxlQ29udGV4dE5vdGVzO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFwcm9jZXNzZWRNZXNzYWdlcyB8fCBwcm9jZXNzZWRNZXNzYWdlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIGRlYnVnKFwiTm8gcHJvY2Vzc2VkIG1lc3NhZ2VzIVwiKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyB2YWxpZCBtZXNzYWdlcyB0byBzZW5kIHRvIHRoZSBtb2RlbC4gUGxlYXNlIGNoZWNrIHlvdXIgbm90ZSBjb250ZW50LlwiKTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZGVidWcoXCJDYWxsaW5nIHByb3ZpZGVyLmdldENvbXBsZXRpb25cIik7XHJcbiAgICAgICAgICAgIGxldCByZXN1bHRCdWZmZXIgPSBcIlwiO1xyXG4gICAgICAgICAgICBhd2FpdCBwcm92aWRlci5nZXRDb21wbGV0aW9uKHByb2Nlc3NlZE1lc3NhZ2VzLCB7XHJcbiAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogMCxcclxuICAgICAgICAgICAgICAgIHN0cmVhbUNhbGxiYWNrOiAoY2h1bms6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdEJ1ZmZlciArPSBjaHVuaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGRlYnVnKFwiUmVzdWx0IGZyb20gcHJvdmlkZXIgKGJ1ZmZlcmVkKTpcIiwgcmVzdWx0QnVmZmVyKTtcclxuXHJcbiAgICAgICAgICAgIGxldCB0aXRsZSA9IHJlc3VsdEJ1ZmZlci50cmltKCk7XHJcbiAgICAgICAgICAgIGRlYnVnKFwiRXh0cmFjdGVkIHRpdGxlIGJlZm9yZSBzYW5pdGl6YXRpb246XCIsIHRpdGxlKTtcclxuXHJcbiAgICAgICAgICAgIC8vIFJlbW92ZSBmb3JiaWRkZW4gY2hhcmFjdGVyczogYmFja3NsYXNoZXMsIGZvcndhcmQgc2xhc2hlcywgY29sb25zXHJcbiAgICAgICAgICAgIHRpdGxlID0gdGl0bGUucmVwbGFjZSgvW1xcXFwvOl0vZywgXCJcIikudHJpbSgpO1xyXG4gICAgICAgICAgICBkZWJ1ZyhcIlNhbml0aXplZCB0aXRsZTpcIiwgdGl0bGUpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRpdGxlICYmIHR5cGVvZiB0aXRsZSA9PT0gXCJzdHJpbmdcIiAmJiB0aXRsZS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvdXRwdXRNb2RlID0gc2V0dGluZ3MudGl0bGVPdXRwdXRNb2RlID8/IFwiY2xpcGJvYXJkXCI7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZyhcIk91dHB1dCBtb2RlOlwiLCBvdXRwdXRNb2RlKTtcclxuICAgICAgICAgICAgICAgIGlmIChvdXRwdXRNb2RlID09PSBcInJlcGxhY2UtZmlsZW5hbWVcIikge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBleHQgPSBmaWxlLmV4dGVuc2lvbiA/IFwiLlwiICsgZmlsZS5leHRlbnNpb24gOiBcIlwiO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzYW5pdGl6ZWQgPSB0aXRsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcGFyZW50UGF0aCA9IGZpbGUucGFyZW50ID8gZmlsZS5wYXJlbnQucGF0aCA6IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BhdGggPSBwYXJlbnRQYXRoID8gKHBhcmVudFBhdGggKyBcIi9cIiArIHNhbml0aXplZCArIGV4dCkgOiAoc2FuaXRpemVkICsgZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUucGF0aCAhPT0gbmV3UGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgYXBwLmZpbGVNYW5hZ2VyLnJlbmFtZUZpbGUoZmlsZSwgbmV3UGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBOb3RlIHJlbmFtZWQgdG86ICR7c2FuaXRpemVkfSR7ZXh0fWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgTm90ZSB0aXRsZSBpcyBhbHJlYWR5OiAke3Nhbml0aXplZH0ke2V4dH1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3V0cHV0TW9kZSA9PT0gXCJtZXRhZGF0YVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHVwc2VydFlhbWxGaWVsZChhcHAsIGZpbGUsIFwidGl0bGVcIiwgdGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBJbnNlcnRlZCB0aXRsZSBpbnRvIG1ldGFkYXRhOiAke3RpdGxlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGl0bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBHZW5lcmF0ZWQgdGl0bGUgKGNvcGllZCk6ICR7dGl0bGV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBHZW5lcmF0ZWQgdGl0bGU6ICR7dGl0bGV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoXCJObyB0aXRsZSBnZW5lcmF0ZWQgYWZ0ZXIgc2FuaXRpemF0aW9uLlwiKTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyB0aXRsZSBnZW5lcmF0ZWQuXCIpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAocHJvY2Vzc0Vycm9yKSB7XHJcbiAgICAgICAgICAgIGRlYnVnKFwiRXJyb3IgaW4gcHJvY2Vzc01lc3NhZ2VzIG9yIHByb3ZpZGVyLmdldENvbXBsZXRpb246XCIsIHByb2Nlc3NFcnJvcik7XHJcbiAgICAgICAgICAgIChzZXR0aW5ncyBhcyBhbnkpLmVuYWJsZUNvbnRleHROb3RlcyA9IG9yaWdpbmFsRW5hYmxlQ29udGV4dE5vdGVzO1xyXG4gICAgICAgICAgICB0aHJvdyBwcm9jZXNzRXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyKSB7XHJcbiAgICAgICAgbmV3IE5vdGljZShcIkVycm9yIGdlbmVyYXRpbmcgdGl0bGU6IFwiICsgKGVycj8ubWVzc2FnZSA/PyBlcnIpKTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdlbmVyaWMgZnVuY3Rpb24gdG8gZ2VuZXJhdGUgYW5kIGluc2VydC91cGRhdGUgYSBZQU1MIGF0dHJpYnV0ZSBpbiB0aGUgYWN0aXZlIG5vdGUuXHJcbiAqIEFsd2F5cyB1c2VzIHRoZSBkZWZhdWx0IHN5c3RlbSBtZXNzYWdlIGFuZCB0ZW1wZXJhdHVyZSAwLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdlbmVyYXRlWWFtbEF0dHJpYnV0ZShcclxuICAgIGFwcDogQXBwLFxyXG4gICAgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3MsXHJcbiAgICBwcm9jZXNzTWVzc2FnZXM6IChtZXNzYWdlczogTWVzc2FnZVtdKSA9PiBQcm9taXNlPE1lc3NhZ2VbXT4sXHJcbiAgICBhdHRyaWJ1dGVOYW1lOiBzdHJpbmcsXHJcbiAgICBwcm9tcHQ6IHN0cmluZyxcclxuICAgIG91dHB1dE1vZGU6IHN0cmluZyA9IFwibWV0YWRhdGFcIlxyXG4pIHtcclxuICAgIGRlYnVnKGBTdGFydGluZyBnZW5lcmF0ZVlhbWxBdHRyaWJ1dGUgZm9yICR7YXR0cmlidXRlTmFtZX1gKTtcclxuICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSBhcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgIGlmICghYWN0aXZlRmlsZSkge1xyXG4gICAgICAgIG5ldyBOb3RpY2UoXCJObyBhY3RpdmUgbm90ZSBmb3VuZC5cIik7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgbGV0IG5vdGVDb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LmNhY2hlZFJlYWQoYWN0aXZlRmlsZSk7XHJcbiAgICBub3RlQ29udGVudCA9IG5vdGVDb250ZW50LnNsaWNlKDAsIDE1MDAwKTtcclxuXHJcbiAgICAvLyBDb21wb3NlIG1lc3NhZ2VzOiBzeXN0ZW0gPSBkZWZhdWx0IHN5c3RlbSBtZXNzYWdlLCB1c2VyID0gcHJvbXB0ICsgbm90ZSBjb250ZW50XHJcbiAgICBjb25zdCBtZXNzYWdlczogTWVzc2FnZVtdID0gW1xyXG4gICAgICAgIHsgcm9sZTogXCJzeXN0ZW1cIiwgY29udGVudDogREVGQVVMVF9ZQU1MX1NZU1RFTV9NRVNTQUdFIH0sXHJcbiAgICAgICAgeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogcHJvbXB0ICsgXCJcXG5cXG5cIiArIG5vdGVDb250ZW50IH1cclxuICAgIF07XHJcblxyXG4gICAgLy8gVXNlIHByb2Nlc3NNZXNzYWdlcyBmb3IgT2JzaWRpYW4gbGluayBleHBhbnNpb24sIGJ1dCBza2lwIGNvbnRleHQgbm90ZXNcclxuICAgIGRlYnVnKFwiT3JpZ2luYWwgbWVzc2FnZXM6XCIsIEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VzKSk7XHJcbiAgICBjb25zdCBvcmlnaW5hbEVuYWJsZUNvbnRleHROb3RlcyA9IHNldHRpbmdzLmVuYWJsZUNvbnRleHROb3RlcztcclxuICAgIGRlYnVnKFwiT3JpZ2luYWwgZW5hYmxlQ29udGV4dE5vdGVzOlwiLCBvcmlnaW5hbEVuYWJsZUNvbnRleHROb3Rlcyk7XHJcbiAgICAoc2V0dGluZ3MgYXMgYW55KS5lbmFibGVDb250ZXh0Tm90ZXMgPSBmYWxzZTtcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZE1lc3NhZ2VzID0gYXdhaXQgcHJvY2Vzc01lc3NhZ2VzKG1lc3NhZ2VzKTtcclxuICAgICAgICBkZWJ1ZyhcIlByb2Nlc3NlZCBtZXNzYWdlczpcIiwgSlNPTi5zdHJpbmdpZnkocHJvY2Vzc2VkTWVzc2FnZXMpKTtcclxuICAgICAgICAoc2V0dGluZ3MgYXMgYW55KS5lbmFibGVDb250ZXh0Tm90ZXMgPSBvcmlnaW5hbEVuYWJsZUNvbnRleHROb3RlcztcclxuXHJcbiAgICAgICAgaWYgKCFwcm9jZXNzZWRNZXNzYWdlcyB8fCBwcm9jZXNzZWRNZXNzYWdlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgZGVidWcoXCJObyBwcm9jZXNzZWQgbWVzc2FnZXMhXCIpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiTm8gdmFsaWQgbWVzc2FnZXMgdG8gc2VuZCB0byB0aGUgbW9kZWwuIFBsZWFzZSBjaGVjayB5b3VyIG5vdGUgY29udGVudC5cIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdldCBjb21wbGV0aW9uIChidWZmZXIgc3RyZWFtZWQgb3V0cHV0KVxyXG4gICAgICAgIGRlYnVnKFwiQ2FsbGluZyBwcm92aWRlci5nZXRDb21wbGV0aW9uXCIpO1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gY3JlYXRlUHJvdmlkZXIoc2V0dGluZ3MpO1xyXG4gICAgICAgIGxldCByZXN1bHRCdWZmZXIgPSBcIlwiO1xyXG4gICAgICAgIGF3YWl0IHByb3ZpZGVyLmdldENvbXBsZXRpb24ocHJvY2Vzc2VkTWVzc2FnZXMsIHtcclxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAsXHJcbiAgICAgICAgICAgIHN0cmVhbUNhbGxiYWNrOiAoY2h1bms6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0QnVmZmVyICs9IGNodW5rO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGVidWcoXCJSZXN1bHQgZnJvbSBwcm92aWRlciAoYnVmZmVyZWQpOlwiLCByZXN1bHRCdWZmZXIpO1xyXG5cclxuICAgICAgICBsZXQgdmFsdWUgPSByZXN1bHRCdWZmZXIudHJpbSgpO1xyXG4gICAgICAgIGRlYnVnKFwiRXh0cmFjdGVkIHZhbHVlIGJlZm9yZSBzYW5pdGl6YXRpb246XCIsIHZhbHVlKTtcclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1tcXFxcL10vZywgXCJcIikudHJpbSgpOyAvLyBBbGxvdyBjb2xvbnMgaW4gWUFNTCB2YWx1ZXNcclxuICAgICAgICBkZWJ1ZyhcIlNhbml0aXplZCB2YWx1ZTpcIiwgdmFsdWUpO1xyXG5cclxuICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZGVidWcoXCJPdXRwdXQgbW9kZTpcIiwgb3V0cHV0TW9kZSk7XHJcbiAgICAgICAgICAgIGlmIChvdXRwdXRNb2RlID09PSBcIm1ldGFkYXRhXCIpIHtcclxuICAgICAgICAgICAgICAgIC8vIEluc2VydCBvciB1cGRhdGUgYXR0cmlidXRlIGluIFlBTUwgZnJvbnRtYXR0ZXIgdXNpbmcgaGVscGVyXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB1cHNlcnRZYW1sRmllbGQoYXBwLCBhY3RpdmVGaWxlLCBhdHRyaWJ1dGVOYW1lLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBJbnNlcnRlZCAke2F0dHJpYnV0ZU5hbWV9IGludG8gbWV0YWRhdGE6ICR7dmFsdWV9YCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDbGlwYm9hcmQgKGRlZmF1bHQpXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBHZW5lcmF0ZWQgJHthdHRyaWJ1dGVOYW1lfSAoY29waWVkKTogJHt2YWx1ZX1gKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBHZW5lcmF0ZWQgJHthdHRyaWJ1dGVOYW1lfTogJHt2YWx1ZX1gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRlYnVnKGBObyB2YWx1ZSBnZW5lcmF0ZWQgZm9yICR7YXR0cmlidXRlTmFtZX0gYWZ0ZXIgc2FuaXRpemF0aW9uLmApO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBObyB2YWx1ZSBnZW5lcmF0ZWQgZm9yICR7YXR0cmlidXRlTmFtZX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAocHJvY2Vzc0Vycm9yKSB7XHJcbiAgICAgICAgZGVidWcoXCJFcnJvciBpbiBwcm9jZXNzTWVzc2FnZXMgb3IgcHJvdmlkZXIuZ2V0Q29tcGxldGlvbjpcIiwgcHJvY2Vzc0Vycm9yKTtcclxuICAgICAgICAoc2V0dGluZ3MgYXMgYW55KS5lbmFibGVDb250ZXh0Tm90ZXMgPSBvcmlnaW5hbEVuYWJsZUNvbnRleHROb3RlcztcclxuICAgICAgICB0aHJvdyBwcm9jZXNzRXJyb3I7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbnNlcnQgb3IgdXBkYXRlIGEgZmllbGQgaW4gdGhlIFlBTUwgZnJvbnRtYXR0ZXIgb2YgYSBub3RlLlxyXG4gKiBJZiB0aGUgZmllbGQgZXhpc3RzLCBpdCBpcyB1cGRhdGVkLiBJZiBub3QsIGl0IGlzIGFkZGVkLlxyXG4gKiBJZiBubyBmcm9udG1hdHRlciBleGlzdHMsIGl0IGlzIGNyZWF0ZWQuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBzZXJ0WWFtbEZpZWxkKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgZmllbGQ6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xyXG4gICAgbGV0IGNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcclxuICAgIGxldCBuZXdDb250ZW50ID0gY29udGVudDtcclxuICAgIGNvbnN0IGZyb250bWF0dGVyUmVnZXggPSAvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS87XHJcbiAgICBjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goZnJvbnRtYXR0ZXJSZWdleCk7XHJcbiAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAvLyBQYXJzZSBZQU1MIGZyb250bWF0dGVyXHJcbiAgICAgICAgbGV0IHlhbWxPYmo6IGFueSA9IHt9O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHlhbWxPYmogPSB5YW1sLmxvYWQobWF0Y2hbMV0pIHx8IHt9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgeWFtbE9iaiA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB5YW1sT2JqW2ZpZWxkXSA9IHZhbHVlO1xyXG4gICAgICAgIGNvbnN0IG5ld1lhbWwgPSB5YW1sLmR1bXAoeWFtbE9iaiwgeyBsaW5lV2lkdGg6IC0xIH0pLnRyaW0oKTtcclxuICAgICAgICBuZXdDb250ZW50ID0gY29udGVudC5yZXBsYWNlKGZyb250bWF0dGVyUmVnZXgsIGAtLS1cXG4ke25ld1lhbWx9XFxuLS0tYCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIE5vIGZyb250bWF0dGVyLCBhZGQgaXRcclxuICAgICAgICBjb25zdCBuZXdZYW1sID0geWFtbC5kdW1wKHsgW2ZpZWxkXTogdmFsdWUgfSwgeyBsaW5lV2lkdGg6IC0xIH0pLnRyaW0oKTtcclxuICAgICAgICBuZXdDb250ZW50ID0gYC0tLVxcbiR7bmV3WWFtbH1cXG4tLS1cXG5gICsgY29udGVudDtcclxuICAgIH1cclxuICAgIGF3YWl0IGFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudCk7XHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luLCBTZXR0aW5nLCBXb3Jrc3BhY2VMZWFmLCBJdGVtVmlldywgTm90aWNlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgTXlQbHVnaW5TZXR0aW5ncywgTWVzc2FnZSwgREVGQVVMVF9TRVRUSU5HUyB9IGZyb20gJy4vdHlwZXMnO1xyXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlciB9IGZyb20gJy4uL3Byb3ZpZGVycyc7XHJcbmltcG9ydCB7IE15UGx1Z2luU2V0dGluZ1RhYiB9IGZyb20gJy4vc2V0dGluZ3MnO1xyXG5pbXBvcnQgeyBDaGF0VmlldywgVklFV19UWVBFX0NIQVQgfSBmcm9tICcuL2NvbXBvbmVudHMvY2hhdCc7XHJcbmltcG9ydCB7IHBhcnNlU2VsZWN0aW9uIH0gZnJvbSAnLi9jb21wb25lbnRzL3BhcnNlU2VsZWN0aW9uJztcclxuaW1wb3J0IHsgTW9kZWxTZXR0aW5nc1ZpZXcgfSBmcm9tICcuL2NvbXBvbmVudHMvTW9kZWxTZXR0aW5nc1ZpZXcnO1xyXG5pbXBvcnQgeyBwcm9jZXNzTWVzc2FnZXMsIGdldENvbnRleHROb3Rlc0NvbnRlbnQgfSBmcm9tICcuL2NvbXBvbmVudHMvbm90ZVV0aWxzJztcclxuaW1wb3J0IHsgZGVib3VuY2UgfSBmcm9tICcuL2NvbXBvbmVudHMvdXRpbHMnO1xyXG5pbXBvcnQgeyBnZXRTeXN0ZW1NZXNzYWdlIH0gZnJvbSAnLi9jb21wb25lbnRzL3N5c3RlbU1lc3NhZ2UnO1xyXG5cclxuY29uc3QgVklFV19UWVBFX01PREVMX1NFVFRJTkdTID0gJ21vZGVsLXNldHRpbmdzLXZpZXcnO1xyXG5cclxuLyoqXHJcbiAqIEFJIEFzc2lzdGFudCBQbHVnaW5cclxuICogXHJcbiAqIFRoaXMgcGx1Z2luIGFkZHMgQUkgY2FwYWJpbGl0aWVzIHRvIE9ic2lkaWFuLCBzdXBwb3J0aW5nIG11bHRpcGxlIHByb3ZpZGVyczpcclxuICogLSBPcGVuQUkgKENoYXRHUFQpXHJcbiAqIC0gQW50aHJvcGljIChDbGF1ZGUpXHJcbiAqIC0gR29vZ2xlIChHZW1pbmkpXHJcbiAqIC0gT2xsYW1hIChMb2NhbCBBSSlcclxuICogXHJcbiAqIEZlYXR1cmVzOlxyXG4gKiAtIENoYXQgd2l0aCBBSSBtb2RlbHNcclxuICogLSBTdHJlYW0gcmVzcG9uc2VzIGluIHJlYWwtdGltZVxyXG4gKiAtIENvbmZpZ3VyZSBtb2RlbCBzZXR0aW5nc1xyXG4gKiAtIFRlc3QgQVBJIGNvbm5lY3Rpb25zXHJcbiAqIC0gVXNlIGxvY2FsIEFJIG1vZGVscyB0aHJvdWdoIE9sbGFtYVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gICAgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3M7XHJcbiAgICBtb2RlbFNldHRpbmdzVmlldzogTW9kZWxTZXR0aW5nc1ZpZXcgfCBudWxsID0gbnVsbDtcclxuICAgIGFjdGl2ZVN0cmVhbTogQWJvcnRDb250cm9sbGVyIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIF95YW1sQXR0cmlidXRlQ29tbWFuZElkczogc3RyaW5nW10gPSBbXTtcclxuXHJcbiAgICBhc3luYyBvbmxvYWQoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBNeVBsdWdpblNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcclxuXHJcbiAgICAgICAgLy8gUmVnaXN0ZXIgdmlld3NcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyVmlldyhcclxuICAgICAgICAgICAgVklFV19UWVBFX01PREVMX1NFVFRJTkdTLFxyXG4gICAgICAgICAgICAobGVhZikgPT4gbmV3IE1vZGVsU2V0dGluZ3NWaWV3KGxlYWYsIHRoaXMpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclZpZXcoXHJcbiAgICAgICAgICAgIFZJRVdfVFlQRV9DSEFULFxyXG4gICAgICAgICAgICAobGVhZikgPT4gbmV3IENoYXRWaWV3KGxlYWYsIHRoaXMpXHJcbiAgICAgICAgKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIHJpYmJvbiBpY29uc1xyXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignZmlsZS1zbGlkZXJzJywgJ09wZW4gQUkgU2V0dGluZ3MnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbignbWVzc2FnZS1zcXVhcmUnLCAnT3BlbiBBSSBDaGF0JywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2YXRlQ2hhdFZpZXcoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLm9uTGF5b3V0UmVhZHkoKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5hdXRvT3Blbk1vZGVsU2V0dGluZ3MpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVWaWV3KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdhaS1jb21wbGV0aW9uJyxcclxuICAgICAgICAgICAgbmFtZTogJ0dldCBBSSBDb21wbGV0aW9uJyxcclxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IGFzeW5jIChlZGl0b3IpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0OiBzdHJpbmc7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5zZXJ0UG9zaXRpb247XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKGVkaXRvci5zb21ldGhpbmdTZWxlY3RlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXNlIHRoZSBzZWxlY3RlZCB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBpbnNlcnRQb3NpdGlvbiA9IGVkaXRvci5nZXRDdXJzb3IoJ3RvJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSB0aGUgY3VycmVudCBjdXJzb3IgbGluZSBhcyB0aGUgcmVxdWVzdFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRMaW5lTnVtYmVyID0gZWRpdG9yLmdldEN1cnNvcigpLmxpbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IGFsbCBsaW5lcyBmcm9tIHRoZSB0b3Agb2YgdGhlIGZpbGUgdXAgdG8gYW5kIGluY2x1ZGluZyB0aGUgY3VycmVudCBsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDw9IGN1cnJlbnRMaW5lTnVtYmVyOyBpKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZXMucHVzaChlZGl0b3IuZ2V0TGluZShpKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBmb3IgY2hhdFN0YXJ0U3RyaW5nIGluIHRoZSBsaW5lcyBhbmQgc2xpY2UgaWYgZm91bmRcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjaGF0U3RhcnRTdHJpbmcgPSB0aGlzLnNldHRpbmdzLmNoYXRTdGFydFN0cmluZztcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY2hhdFN0YXJ0U3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHN0YXJ0SWR4ID0gbGluZXMuZmluZEluZGV4KGxpbmUgPT4gbGluZS50cmltKCkgPT09IGNoYXRTdGFydFN0cmluZy50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnRJZHggIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeGNsdWRlIHRoZSBjaGF0U3RhcnRTdHJpbmcgbGluZSBpdHNlbGYgZnJvbSB0aGUgY29udGV4dFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbGluZXMgPSBsaW5lcy5zbGljZShzdGFydElkeCArIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gbGluZXMuam9pbignXFxuJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFNldCBpbnNlcnRpb24gcG9pbnQgdG8gYmUgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlIGN1cnJlbnQgbGluZVxyXG4gICAgICAgICAgICAgICAgICAgIGluc2VydFBvc2l0aW9uID0geyBsaW5lOiBjdXJyZW50TGluZU51bWJlciArIDEsIGNoOiAwIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRGVidWdnaW5nOiBMb2cgdGhlIGV4dHJhY3RlZCB0ZXh0XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnRXh0cmFjdGVkIHRleHQgZm9yIGNvbXBsZXRpb246JywgdGV4dCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUGFyc2UgdGhlIHNlbGVjdGlvbiBpbnRvIG1lc3NhZ2VzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IHBhcnNlU2VsZWN0aW9uKHRleHQsIHRoaXMuc2V0dGluZ3MuY2hhdFNlcGFyYXRvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRW5zdXJlIHRoZXJlIGFyZSBtZXNzYWdlcyB0byBzZW5kXHJcbiAgICAgICAgICAgICAgICBpZiAobWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gdmFsaWQgbWVzc2FnZXMgZm91bmQgaW4gdGhlIHNlbGVjdGlvbi4nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gRW5zdXJlIHRoZXJlJ3MgYSBjbGVhciBzZXBhcmF0aW9uIGJldHdlZW4gdXNlciByZXF1ZXN0IGFuZCBBSSByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgdGhlIGNvbnRlbnQgb2YgdGhlIGxpbmUgd2hlcmUgd2Ugd2FudCB0byBpbnNlcnQgdGhlIHNlcGFyYXRvclxyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZUNvbnRlbnQgPSBlZGl0b3IuZ2V0TGluZShpbnNlcnRQb3NpdGlvbi5saW5lKSA/PyAnJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVGhpcyB2YXJpYWJsZSB3aWxsIGhvbGQgYSBuZXdsaW5lIGNoYXJhY3RlciBpZiB3ZSBuZWVkIHRvIGFkZCBvbmUgYmVmb3JlIHRoZSBzZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgIGxldCBwcmVmaXggPSAnJztcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gSWYgdGhlIGN1cnJlbnQgbGluZSBpcyBub3QgZW1wdHkgKGhhcyB0ZXh0KSwgYWRkIGEgbmV3bGluZSBiZWZvcmUgdGhlIHNlcGFyYXRvclxyXG4gICAgICAgICAgICAgICAgaWYgKGxpbmVDb250ZW50LnRyaW0oKSAhPT0gJycpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcmVmaXggPSAnXFxuJztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBzZXBhcmF0b3Igd2l0aCBhIHNpbmdsZSBibGFuayBsaW5lIGJlZm9yZSBhbmQgYWZ0ZXJcclxuICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoYCR7cHJlZml4fVxcbiR7dGhpcy5zZXR0aW5ncy5jaGF0U2VwYXJhdG9yfVxcbmAsIGluc2VydFBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQ2FsY3VsYXRlIHRoZSBuZXcgcG9zaXRpb24gZm9yIHRoZSBjdXJzb3IgYWZ0ZXIgaW5zZXJ0aW5nIHRoZSBzZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgIC8vIC0gSWYgd2UgYWRkZWQgYSBwcmVmaXgsIG1vdmUgZG93biBvbmUgbGluZVxyXG4gICAgICAgICAgICAgICAgLy8gLSBNb3ZlIGRvd24gb25lIGxpbmUgZm9yIHRoZSBuZXdsaW5lIGJlZm9yZSBzZXBhcmF0b3JcclxuICAgICAgICAgICAgICAgIC8vIC0gTW92ZSBkb3duIG9uZSBsaW5lIGZvciB0aGUgc2VwYXJhdG9yIGl0c2VsZlxyXG4gICAgICAgICAgICAgICAgbGV0IGN1cnJlbnRQb3NpdGlvbiA9IHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lOiBpbnNlcnRQb3NpdGlvbi5saW5lICsgKHByZWZpeCA/IDEgOiAwKSArIDIsXHJcbiAgICAgICAgICAgICAgICAgICAgY2g6IDBcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVTdHJlYW0gPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IGNyZWF0ZVByb3ZpZGVyKHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb2Nlc3NlZE1lc3NhZ2VzID0gYXdhaXQgdGhpcy5wcm9jZXNzTWVzc2FnZXMoW1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiB0aGlzLmdldFN5c3RlbU1lc3NhZ2UoKSB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi5tZXNzYWdlc1xyXG4gICAgICAgICAgICAgICAgICAgIF0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgYnVmZmVyZWRDaHVuayA9ICcnOyAvLyBBY2N1bXVsYXRlIGNodW5rc1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGZsdXNoQnVmZmVyID0gKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoYnVmZmVyZWRDaHVuaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShidWZmZXJlZENodW5rLCBjdXJyZW50UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3VycmVudFBvc2l0aW9uID0gZWRpdG9yLm9mZnNldFRvUG9zKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5wb3NUb09mZnNldChjdXJyZW50UG9zaXRpb24pICsgYnVmZmVyZWRDaHVuay5sZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJlZENodW5rID0gJyc7IC8vIENsZWFyIGJ1ZmZlclxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgcHJvdmlkZXIuZ2V0Q29tcGxldGlvbihcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkTWVzc2FnZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnNldHRpbmdzLnRlbXBlcmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4VG9rZW5zOiB0aGlzLnNldHRpbmdzLm1heFRva2VucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbUNhbGxiYWNrOiAoY2h1bms6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcmVkQ2h1bmsgKz0gY2h1bms7IC8vIEFjY3VtdWxhdGUgdGhlIGNodW5rXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRmx1c2ggYnVmZmVyIGV2ZXJ5IDEwMG1zXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0VGltZW91dChmbHVzaEJ1ZmZlciwgMTAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXI6IHRoaXMuYWN0aXZlU3RyZWFtXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBGaW5hbCBmbHVzaCBhZnRlciBjb21wbGV0aW9uXHJcbiAgICAgICAgICAgICAgICAgICAgZmx1c2hCdWZmZXIoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5zZXJ0IHRoZSBzZXBhcmF0b3IgYWZ0ZXIgdGhlIEFJIHJlc3BvbnNlIHdpdGggY29ycmVjdCBzcGFjaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZW5kTGluZUNvbnRlbnQgPSBlZGl0b3IuZ2V0TGluZShjdXJyZW50UG9zaXRpb24ubGluZSkgPz8gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVuZFByZWZpeCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlbmRMaW5lQ29udGVudC50cmltKCkgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZFByZWZpeCA9ICdcXG4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGAke2VuZFByZWZpeH1cXG4ke3RoaXMuc2V0dGluZ3MuY2hhdFNlcGFyYXRvcn1cXG5cXG5gLCBjdXJyZW50UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5ld0N1cnNvclBvcyA9IGVkaXRvci5vZmZzZXRUb1BvcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnBvc1RvT2Zmc2V0KGN1cnJlbnRQb3NpdGlvbikgKyAoZW5kUHJlZml4ID8gMSA6IDApICsgMSArIHRoaXMuc2V0dGluZ3MuY2hhdFNlcGFyYXRvci5sZW5ndGggKyAxXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKG5ld0N1cnNvclBvcyk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSW5zZXJ0IGVycm9yIHdpdGggY29ycmVjdCBzcGFjaW5nXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXJyTGluZUNvbnRlbnQgPSBlZGl0b3IuZ2V0TGluZShjdXJyZW50UG9zaXRpb24ubGluZSkgPz8gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVyclByZWZpeCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJMaW5lQ29udGVudC50cmltKCkgIT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVyclByZWZpeCA9ICdcXG4nO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfVxcbiR7ZXJyUHJlZml4fVxcbiR7dGhpcy5zZXR0aW5ncy5jaGF0U2VwYXJhdG9yfVxcblxcbmAsIGN1cnJlbnRQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ2VuZC1haS1zdHJlYW0nLFxyXG4gICAgICAgICAgICBuYW1lOiAnRW5kIEFJIFN0cmVhbScsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVTdHJlYW0pIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbS5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtID0gbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdBSSBzdHJlYW0gZW5kZWQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIEFJIHN0cmVhbSB0byBlbmQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ3Nob3ctYWktc2V0dGluZ3MnLFxyXG4gICAgICAgICAgICBuYW1lOiAnU2hvdyBBSSBTZXR0aW5ncycsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2YXRlVmlldygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnc2hvdy1haS1jaGF0JyxcclxuICAgICAgICAgICAgbmFtZTogJ1Nob3cgQUkgQ2hhdCcsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2YXRlQ2hhdFZpZXcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ2NvcHktYWN0aXZlLW5vdGUtbmFtZScsXHJcbiAgICAgICAgICAgIG5hbWU6ICdDb3B5IEFjdGl2ZSBOb3RlIE5hbWUnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYWN0aXZlRmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoYWN0aXZlRmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGVOYW1lID0gYFtbJHthY3RpdmVGaWxlLmJhc2VuYW1lfV1dYDtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChub3RlTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYENvcGllZCB0byBjbGlwYm9hcmQ6ICR7bm90ZU5hbWV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIGNvcHkgdG8gY2xpcGJvYXJkJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NsaXBib2FyZCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBhY3RpdmUgbm90ZSBmb3VuZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnaW5zZXJ0LWNoYXQtc3RhcnQtc3RyaW5nJyxcclxuICAgICAgICAgICAgbmFtZTogJ0luc2VydCBDaGF0IFN0YXJ0IFN0cmluZycsXHJcbiAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjaGF0U3RhcnRTdHJpbmcgPSB0aGlzLnNldHRpbmdzLmNoYXRTdGFydFN0cmluZyA/PyAnJztcclxuICAgICAgICAgICAgICAgIGlmICghY2hhdFN0YXJ0U3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnY2hhdFN0YXJ0U3RyaW5nIGlzIG5vdCBzZXQgaW4gc2V0dGluZ3MuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShjaGF0U3RhcnRTdHJpbmcsIGN1cnNvcik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gTW92ZSBjdXJzb3IgdG8gdGhlIGVuZCBvZiB0aGUgaW5zZXJ0ZWQgY2hhdFN0YXJ0U3RyaW5nXHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGNoYXRTdGFydFN0cmluZy5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAobGluZXMubGVuZ3RoID09PSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU2luZ2xlIGxpbmUgaW5zZXJ0XHJcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcih7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxpbmU6IGN1cnNvci5saW5lLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjaDogY3Vyc29yLmNoICsgY2hhdFN0YXJ0U3RyaW5nLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBNdWx0aS1saW5lIGluc2VydFxyXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5zZXRDdXJzb3Ioe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsaW5lOiBjdXJzb3IubGluZSArIGxpbmVzLmxlbmd0aCAtIDEsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNoOiBsaW5lc1tsaW5lcy5sZW5ndGggLSAxXS5sZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBHZW5lcmF0ZSBOb3RlIFRpdGxlIENvbW1hbmRcclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ2dlbmVyYXRlLW5vdGUtdGl0bGUnLFxyXG4gICAgICAgICAgICBuYW1lOiAnR2VuZXJhdGUgTm90ZSBUaXRsZScsXHJcbiAgICAgICAgICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAvLyBJbXBvcnQgaGVyZSB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmN5IGlzc3VlcyBpZiBhbnlcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZ2VuZXJhdGVOb3RlVGl0bGUgfSA9IGF3YWl0IGltcG9ydChcIi4vZmlsZWNoYW5nZXJcIik7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBnZW5lcmF0ZU5vdGVUaXRsZShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcCxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLFxyXG4gICAgICAgICAgICAgICAgICAgIChtZXNzYWdlcykgPT4gdGhpcy5wcm9jZXNzTWVzc2FnZXMobWVzc2FnZXMpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIHRoaXMuYWRkQ29tbWFuZCh7XHJcbiAgICAgICAgLy8gICAgIGlkOiAnZ2VuZXJhdGUtbm90ZS1zdW1tYXJ5JyxcclxuICAgICAgICAvLyAgICAgbmFtZTogJ0dlbmVyYXRlIE5vdGUgU3VtbWFyeScsXHJcbiAgICAgICAgLy8gICAgIGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgLy8gICAgICAgICBjb25zdCB7IGdlbmVyYXRlTm90ZVN1bW1hcnkgfSA9IGF3YWl0IGltcG9ydChcIi4vZmlsZWNoYW5nZXJcIik7XHJcbiAgICAgICAgLy8gICAgICAgICBhd2FpdCBnZW5lcmF0ZU5vdGVTdW1tYXJ5KFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgIC8vICAgICAgICAgICAgIHRoaXMuc2V0dGluZ3MsXHJcbiAgICAgICAgLy8gICAgICAgICAgICAgKG1lc3NhZ2VzKSA9PiB0aGlzLnByb2Nlc3NNZXNzYWdlcyhtZXNzYWdlcylcclxuICAgICAgICAvLyAgICAgICAgICk7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdsb2FkLWNoYXQtbm90ZS1pbnRvLWNoYXQnLFxyXG4gICAgICAgICAgICBuYW1lOiAnTG9hZCBDaGF0IE5vdGUgaW50byBDaGF0JyxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBmaWxlOiBURmlsZSB8IG51bGwgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gYWN0aXZlIG5vdGUgZm91bmQuIFBsZWFzZSBvcGVuIGEgbm90ZSB0byBsb2FkIGFzIGNoYXQuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGV0IGNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBwYXJzZVNlbGVjdGlvbihjb250ZW50LCB0aGlzLnNldHRpbmdzLmNoYXRTZXBhcmF0b3IpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFtZXNzYWdlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyBjaGF0IG1lc3NhZ2VzIGZvdW5kIGluIHRoZSBzZWxlY3RlZCBub3RlLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVDaGF0VmlldygpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZShWSUVXX1RZUEVfQ0hBVCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWxlYXZlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdDb3VsZCBub3QgZmluZCBjaGF0IHZpZXcuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hhdFZpZXcgPSBsZWF2ZXNbMF0udmlldyBhcyBDaGF0VmlldztcclxuICAgICAgICAgICAgICAgIC8vIENsZWFyIGNoYXQgVUkgKGFuZCBoaXN0b3J5IHdpbGwgYmUgcmVidWlsdCBhcyB3ZSBhZGQgbWVzc2FnZXMpXHJcbiAgICAgICAgICAgICAgICBjaGF0Vmlldy5tZXNzYWdlc0NvbnRhaW5lci5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgLy8gQWRkIGVhY2ggcGFyc2VkIG1lc3NhZ2VcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbXNnIG9mIG1lc3NhZ2VzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG1zZy5yb2xlID09PSAndXNlcicgfHwgbXNnLnJvbGUgPT09ICdhc3Npc3RhbnQnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGNoYXRWaWV3W1wiYWRkTWVzc2FnZVwiXShtc2cucm9sZSwgbXNnLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNoYXRWaWV3Lm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbFRvcCA9IGNoYXRWaWV3Lm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbEhlaWdodDtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0xvYWRlZCBjaGF0IG5vdGUgaW50byBjaGF0LicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gLS0tIFJlZ2lzdGVyIFlBTUwgQXR0cmlidXRlIEdlbmVyYXRvciBDb21tYW5kcyAtLS1cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyWWFtbEF0dHJpYnV0ZUNvbW1hbmRzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlciBZQU1MIGF0dHJpYnV0ZSBnZW5lcmF0b3IgY29tbWFuZHMgZHluYW1pY2FsbHkgYmFzZWQgb24gc2V0dGluZ3MuXHJcbiAgICAgKiBVbnJlZ2lzdGVycyBwcmV2aW91cyBjb21tYW5kcyBiZWZvcmUgcmVnaXN0ZXJpbmcgbmV3IG9uZXMuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVnaXN0ZXJZYW1sQXR0cmlidXRlQ29tbWFuZHMoKSB7XHJcbiAgICAgICAgLy8gVW5yZWdpc3RlciBwcmV2aW91cyBjb21tYW5kc1xyXG4gICAgICAgIGlmICh0aGlzLl95YW1sQXR0cmlidXRlQ29tbWFuZElkcyAmJiB0aGlzLl95YW1sQXR0cmlidXRlQ29tbWFuZElkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaWQgb2YgdGhpcy5feWFtbEF0dHJpYnV0ZUNvbW1hbmRJZHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmU6IE9ic2lkaWFuIFBsdWdpbiBBUEkgaGFzIHVuZG9jdW1lbnRlZCBtZXRob2RcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLmNvbW1hbmRzLnJlbW92ZUNvbW1hbmQoaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3lhbWxBdHRyaWJ1dGVDb21tYW5kSWRzID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MueWFtbEF0dHJpYnV0ZUdlbmVyYXRvcnMgJiYgQXJyYXkuaXNBcnJheSh0aGlzLnNldHRpbmdzLnlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JzKSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGdlbiBvZiB0aGlzLnNldHRpbmdzLnlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWdlbi5hdHRyaWJ1dGVOYW1lIHx8ICFnZW4ucHJvbXB0IHx8ICFnZW4uY29tbWFuZE5hbWUpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBgZ2VuZXJhdGUteWFtbC1hdHRyaWJ1dGUtJHtnZW4uYXR0cmlidXRlTmFtZX1gO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBnZW4uY29tbWFuZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBnZW5lcmF0ZVlhbWxBdHRyaWJ1dGUgfSA9IGF3YWl0IGltcG9ydChcIi4vZmlsZWNoYW5nZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGdlbmVyYXRlWWFtbEF0dHJpYnV0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChtZXNzYWdlcykgPT4gdGhpcy5wcm9jZXNzTWVzc2FnZXMobWVzc2FnZXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuLmF0dHJpYnV0ZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW4ucHJvbXB0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuLm91dHB1dE1vZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3lhbWxBdHRyaWJ1dGVDb21tYW5kSWRzLnB1c2goaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBnZXRTeXN0ZW1NZXNzYWdlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGdldFN5c3RlbU1lc3NhZ2UodGhpcy5zZXR0aW5ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgYWN0aXZhdGVWaWV3KHZpZXdUeXBlOiBzdHJpbmcgPSBWSUVXX1RZUEVfTU9ERUxfU0VUVElOR1MpIHtcclxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UuZGV0YWNoTGVhdmVzT2ZUeXBlKHZpZXdUeXBlKTtcclxuXHJcbiAgICAgICAgbGV0IGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0UmlnaHRMZWFmKGZhbHNlKTtcclxuICAgICAgICBpZiAobGVhZikge1xyXG4gICAgICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiB2aWV3VHlwZSxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5yZXZlYWxMZWFmKGxlYWYpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhZih0cnVlKTtcclxuICAgICAgICAgICAgYXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgdHlwZTogdmlld1R5cGUsXHJcbiAgICAgICAgICAgICAgICBhY3RpdmU6IHRydWUsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBhY3RpdmF0ZUNoYXRWaWV3KCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuYWN0aXZhdGVWaWV3KFZJRVdfVFlQRV9DSEFUKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBsb2FkU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5ncyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfU0VUVElOR1MsIGF3YWl0IHRoaXMubG9hZERhdGEoKSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlcllhbWxBdHRyaWJ1dGVDb21tYW5kcygpOyAvLyBVcGRhdGUgY29tbWFuZHMgYWZ0ZXIgc2F2aW5nIHNldHRpbmdzXHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzTWVzc2FnZXMobWVzc2FnZXM6IE1lc3NhZ2VbXSk6IFByb21pc2U8TWVzc2FnZVtdPiB7XHJcbiAgICAgICAgcmV0dXJuIHByb2Nlc3NNZXNzYWdlcyhtZXNzYWdlcywgdGhpcy5hcHAsIHRoaXMuc2V0dGluZ3MpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBhc3luYyBnZXRDb250ZXh0Tm90ZXNDb250ZW50KGNvbnRleHROb3Rlc1RleHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgcmV0dXJuIGdldENvbnRleHROb3Rlc0NvbnRlbnQoY29udGV4dE5vdGVzVGV4dCwgdGhpcy5hcHApO1xyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIFBsdWdpblNldHRpbmdUYWIsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgTXlQbHVnaW5TZXR0aW5ncyB9IGZyb20gJy4vdHlwZXMnO1xyXG5pbXBvcnQgTXlQbHVnaW4gZnJvbSAnLi9tYWluJztcclxuXHJcbi8qKlxyXG4gKiBQbHVnaW4gU2V0dGluZ3MgVGFiXHJcbiAqIFxyXG4gKiBUaGlzIHRhYiBwcm92aWRlcyBhIHVzZXIgaW50ZXJmYWNlIGZvciBjb25maWd1cmluZyB0aGUgcGx1Z2luIHNldHRpbmdzLlxyXG4gKiBJdCBhdXRvbWF0aWNhbGx5IG9wZW5zIHRoZSBtb2RlbCBzZXR0aW5ncyB2aWV3IHdoZW4gc2V0dGluZ3MgYXJlIGNoYW5nZWQuXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTXlQbHVnaW5TZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XHJcbiAgICBwbHVnaW46IE15UGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IE15UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwLCBwbHVnaW4pO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGlzcGxheSB0aGUgc2V0dGluZ3MgdGFiXHJcbiAgICAgKiBcclxuICAgICAqIFNob3dzIG9ubHkgdGhlIGF1dG8tb3BlbiBzZXR0aW5nIGhlcmUgc2luY2UgYWxsIG90aGVyIHNldHRpbmdzXHJcbiAgICAgKiBhcmUgbWFuYWdlZCBpbiB0aGUgbW9kZWwgc2V0dGluZ3MgdmlldyBmb3IgYmV0dGVyIG9yZ2FuaXphdGlvbi5cclxuICAgICAqL1xyXG4gICAgZGlzcGxheSgpOiB2b2lkIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRhaW5lckVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRhaW5lckVsLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ0FJIEFzc2lzdGFudCBTZXR0aW5ncycgfSk7XHJcblxyXG4gICAgICAgIC8vIEFQSSBLZXlzIFNlY3Rpb25cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdBUEkgS2V5cycgfSk7XHJcblxyXG4gICAgICAgIC8vIE9wZW5BSSBBUEkgS2V5XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdPcGVuQUkgQVBJIEtleScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdFbnRlciB5b3VyIE9wZW5BSSBBUEkga2V5JylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHlvdXIgQVBJIGtleScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MuYXBpS2V5KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haVNldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBBbnRocm9waWMgQVBJIEtleVxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQW50aHJvcGljIEFQSSBLZXknKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnRW50ZXIgeW91ciBBbnRocm9waWMgQVBJIGtleScpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIEFQSSBrZXknKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzLmFwaUtleSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNTZXR0aW5ncy5hcGlLZXkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gR2VtaW5pIEFQSSBLZXlcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0dvb2dsZSBBUEkgS2V5JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0VudGVyIHlvdXIgR29vZ2xlIEFQSSBrZXknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgeW91ciBBUEkga2V5JylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW1pbmlTZXR0aW5ncy5hcGlLZXkpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MuYXBpS2V5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIE9sbGFtYSBTZXJ2ZXIgVVJMXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdPbGxhbWEgU2VydmVyIFVSTCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdFbnRlciB5b3VyIE9sbGFtYSBzZXJ2ZXIgVVJMIChkZWZhdWx0OiBodHRwOi8vbG9jYWxob3N0OjExNDM0KScpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwOi8vbG9jYWxob3N0OjExNDM0JylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vbGxhbWFTZXR0aW5ncy5zZXJ2ZXJVcmwpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3Muc2VydmVyVXJsID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIE1vZGVsIFNldHRpbmdzIFNlY3Rpb25cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdNb2RlbCBTZXR0aW5ncycgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQXV0by1vcGVuIE1vZGVsIFNldHRpbmdzJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0F1dG9tYXRpY2FsbHkgb3BlbiBtb2RlbCBzZXR0aW5ncyB3aGVuIE9ic2lkaWFuIHN0YXJ0cycpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9PcGVuTW9kZWxTZXR0aW5ncylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvT3Blbk1vZGVsU2V0dGluZ3MgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGEgYnV0dG9uIHRvIG9wZW4gbW9kZWwgc2V0dGluZ3NcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ09wZW4gTW9kZWwgU2V0dGluZ3MnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnT3BlbiB0aGUgbW9kZWwgc2V0dGluZ3MgdmlldycpXHJcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ09wZW4nKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFjdGl2YXRlVmlldygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0NoYXQgU2VwYXJhdG9yJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1RoZSBzdHJpbmcgdXNlZCB0byBzZXBhcmF0ZSBjaGF0IG1lc3NhZ2VzLicpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignLS0tLScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRTZXBhcmF0b3IgPz8gJycpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRTZXBhcmF0b3IgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0NoYXQgU3RhcnQgU3RyaW5nJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1RoZSBzdHJpbmcgdGhhdCBpbmRpY2F0ZXMgd2hlcmUgdG8gc3RhcnQgdGFraW5nIHRoZSBub3RlIGZvciBjb250ZXh0LicpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignPT09U1RBUlQ9PT0nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0U3RhcnRTdHJpbmcgPz8gJycpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRTdGFydFN0cmluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2hhdCBFbmQgU3RyaW5nJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1RoZSBzdHJpbmcgdGhhdCBpbmRpY2F0ZXMgd2hlcmUgdG8gZW5kIHRha2luZyB0aGUgbm90ZSBmb3IgY29udGV4dC4nKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgIHRleHQuc2V0UGxhY2Vob2xkZXIoJz09PUVORD09PScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRFbmRTdHJpbmcgPz8gJycpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRFbmRTdHJpbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBUaXRsZSBQcm9tcHRcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1RpdGxlIFByb21wdCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdUaGUgcHJvbXB0IHVzZWQgZm9yIGdlbmVyYXRpbmcgbm90ZSB0aXRsZXMuJylcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignWW91IGFyZSBhIHRpdGxlIGdlbmVyYXRvci4uLicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRpdGxlUHJvbXB0KVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50aXRsZVByb21wdCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFJlc2V0IFByb21wdHMgYW5kIEFsbCBTZXR0aW5ncyAoZXhjZXB0IEFQSSBrZXlzKSB0byBEZWZhdWx0XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdSZXNldCBBbGwgU2V0dGluZ3MgdG8gRGVmYXVsdCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdSZXNldCBhbGwgcGx1Z2luIHNldHRpbmdzIChleGNlcHQgQVBJIGtleXMpIHRvIHRoZWlyIG9yaWdpbmFsIGRlZmF1bHQgdmFsdWVzLicpXHJcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1Jlc2V0JylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBJbXBvcnQgZGVmYXVsdHNcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IERFRkFVTFRfVElUTEVfUFJPTVBUIH0gPSBhd2FpdCBpbXBvcnQoJy4vcHJvbXB0cycpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHsgREVGQVVMVF9TRVRUSU5HUyB9ID0gYXdhaXQgaW1wb3J0KCcuL3R5cGVzJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJlc2VydmUgQVBJIGtleXNcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBvcGVuYWlLZXkgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5hcGlLZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYW50aHJvcGljS2V5ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MuYXBpS2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdlbWluaUtleSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbWluaVNldHRpbmdzLmFwaUtleTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCBhbGwgc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncyA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkoREVGQVVMVF9TRVRUSU5HUykpO1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlc3RvcmUgQVBJIGtleXNcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5hcGlLZXkgPSBvcGVuYWlLZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MuYXBpS2V5ID0gYW50aHJvcGljS2V5O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbWluaVNldHRpbmdzLmFwaUtleSA9IGdlbWluaUtleTtcclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXN0b3JlIHRpdGxlIHByb21wdCBmcm9tIHByb21wdHMudHNcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50aXRsZVByb21wdCA9IERFRkFVTFRfVElUTEVfUFJPTVBUO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpOyAvLyBSZS1yZW5kZXIgdGhlIHNldHRpbmdzIHRvIHNob3cgdXBkYXRlZCB2YWx1ZXNcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdBbGwgc2V0dGluZ3MgKGV4Y2VwdCBBUEkga2V5cykgcmVzZXQgdG8gZGVmYXVsdC4nKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gVGl0bGUgT3V0cHV0IE1vZGVcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1RpdGxlIE91dHB1dCBNb2RlJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSB3aGF0IHRvIGRvIHdpdGggdGhlIGdlbmVyYXRlZCBub3RlIHRpdGxlLicpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3AuYWRkT3B0aW9uKCdjbGlwYm9hcmQnLCAnQ29weSB0byBjbGlwYm9hcmQnKTtcclxuICAgICAgICAgICAgICAgIGRyb3AuYWRkT3B0aW9uKCdyZXBsYWNlLWZpbGVuYW1lJywgJ1JlcGxhY2Ugbm90ZSBmaWxlbmFtZScpO1xyXG4gICAgICAgICAgICAgICAgZHJvcC5hZGRPcHRpb24oJ21ldGFkYXRhJywgJ0luc2VydCBpbnRvIG1ldGFkYXRhJyk7XHJcbiAgICAgICAgICAgICAgICBkcm9wLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnRpdGxlT3V0cHV0TW9kZSA/PyAnY2xpcGJvYXJkJyk7XHJcbiAgICAgICAgICAgICAgICBkcm9wLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGl0bGVPdXRwdXRNb2RlID0gdmFsdWUgYXMgYW55O1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTdW1tYXJ5IE91dHB1dCBNb2RlXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdTdW1tYXJ5IE91dHB1dCBNb2RlJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSB3aGF0IHRvIGRvIHdpdGggdGhlIGdlbmVyYXRlZCBub3RlIHN1bW1hcnkuJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgZHJvcC5hZGRPcHRpb24oJ2NsaXBib2FyZCcsICdDb3B5IHRvIGNsaXBib2FyZCcpO1xyXG4gICAgICAgICAgICAgICAgZHJvcC5hZGRPcHRpb24oJ21ldGFkYXRhJywgJ0luc2VydCBpbnRvIG1ldGFkYXRhJyk7XHJcbiAgICAgICAgICAgICAgICBkcm9wLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnN1bW1hcnlPdXRwdXRNb2RlID8/ICdjbGlwYm9hcmQnKTtcclxuICAgICAgICAgICAgICAgIGRyb3Aub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdW1tYXJ5T3V0cHV0TW9kZSA9IHZhbHVlIGFzIGFueTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdFeHBhbmQgTGlua2VkIE5vdGVzIFJlY3Vyc2l2ZWx5JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0lmIGVuYWJsZWQsIHdoZW4gZmV0Y2hpbmcgYSBub3RlLCBhbHNvIGZldGNoIGFuZCBleHBhbmQgbGlua3Mgd2l0aGluIHRoYXQgbm90ZSByZWN1cnNpdmVseSAocHJldmVudHMgaW5maW5pdGUgbG9vcHMpLicpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGFuZExpbmtlZE5vdGVzUmVjdXJzaXZlbHkgPz8gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwYW5kTGlua2VkTm90ZXNSZWN1cnNpdmVseSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpOyAvLyBSZS1yZW5kZXIgdG8gc2hvdy9oaWRlIHRoZSBzbGlkZXJcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGFuZExpbmtlZE5vdGVzUmVjdXJzaXZlbHkpIHtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgICAgICAuc2V0TmFtZSgnTWF4IExpbmsgRXhwYW5zaW9uIERlcHRoJylcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKCdNYXhpbXVtIGRlcHRoIGZvciByZWN1cnNpdmVseSBleHBhbmRpbmcgbGlua2VkIG5vdGVzICgxLTMpLicpXHJcbiAgICAgICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2xpZGVyLnNldExpbWl0cygxLCAzLCAxKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4TGlua0V4cGFuc2lvbkRlcHRoID8/IDIpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6IG51bWJlcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4TGlua0V4cGFuc2lvbkRlcHRoID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2hhdCBOb3RlIEZvbGRlcicpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdGb2xkZXIgdG8gc2F2ZSBleHBvcnRlZCBjaGF0IG5vdGVzIChyZWxhdGl2ZSB0byB2YXVsdCByb290LCBsZWF2ZSBibGFuayBmb3Igcm9vdCknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHtcclxuICAgICAgICAgICAgICAgIHRleHQuc2V0UGxhY2Vob2xkZXIoJ2UuZy4gQUkgQ2hhdHMnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0Tm90ZUZvbGRlciA/PyAnJylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdE5vdGVGb2xkZXIgPSB2YWx1ZS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gLS0tIFlBTUwgQXR0cmlidXRlIEdlbmVyYXRvcnMgU2VjdGlvbiAtLS1cclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdZQU1MIEF0dHJpYnV0ZSBHZW5lcmF0b3JzJyB9KTtcclxuICAgICAgICBjb25zdCB5YW1sR2VuRGVzYyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6ICdDb25maWd1cmUgY3VzdG9tIFlBTUwgYXR0cmlidXRlIGdlbmVyYXRvcnMuIEVhY2ggZW50cnkgd2lsbCBjcmVhdGUgYSBjb21tYW5kIHRvIGdlbmVyYXRlIGFuZCBpbnNlcnQvdXBkYXRlIGEgWUFNTCBmaWVsZCBpbiB5b3VyIG5vdGVzLicgfSk7XHJcbiAgICAgICAgeWFtbEdlbkRlc2Muc3R5bGUubWFyZ2luQm90dG9tID0gJzFlbSc7XHJcblxyXG4gICAgICAgIC8vIExpc3QgYWxsIGdlbmVyYXRvcnNcclxuICAgICAgICBjb25zdCB5YW1sR2VucyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JzID8/IFtdO1xyXG4gICAgICAgIHlhbWxHZW5zLmZvckVhY2goKGdlbiwgaWR4KSA9PiB7XHJcbiAgICAgICAgICAgIC8vIEF1dG9tYXRpY2FsbHkgZ2VuZXJhdGUgdGhlIGNvbW1hbmQgbmFtZTogJ0dlbmVyYXRlIFlBTUw6IDxhdHRyaWJ1dGVOYW1lPidcclxuICAgICAgICAgICAgY29uc3QgYXV0b0NvbW1hbmROYW1lID0gZ2VuLmF0dHJpYnV0ZU5hbWUgPyBgR2VuZXJhdGUgWUFNTDogJHtnZW4uYXR0cmlidXRlTmFtZX1gIDogYFlBTUwgR2VuZXJhdG9yICMke2lkeCArIDF9YDtcclxuICAgICAgICAgICAgY29uc3Qgc2V0dGluZyA9IG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoYXV0b0NvbW1hbmROYW1lKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoYFlBTUwgZmllbGQ6ICR7Z2VuLmF0dHJpYnV0ZU5hbWV9YClcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignWUFNTCBBdHRyaWJ1dGUgTmFtZScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKGdlbi5hdHRyaWJ1dGVOYW1lKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy55YW1sQXR0cmlidXRlR2VuZXJhdG9yc1tpZHhdLmF0dHJpYnV0ZU5hbWUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEFsc28gdXBkYXRlIHRoZSBjb21tYW5kIG5hbWUgYXV0b21hdGljYWxseVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MueWFtbEF0dHJpYnV0ZUdlbmVyYXRvcnNbaWR4XS5jb21tYW5kTmFtZSA9IHZhbHVlID8gYEdlbmVyYXRlIFlBTUw6ICR7dmFsdWV9YCA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTsgLy8gUmUtcmVuZGVyIHRvIHVwZGF0ZSB0aGUgY29tbWFuZCBuYW1lXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KSlcclxuICAgICAgICAgICAgICAgIC5hZGRUZXh0QXJlYSh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1Byb21wdCBmb3IgTExNJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoZ2VuLnByb21wdClcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy55YW1sQXR0cmlidXRlR2VuZXJhdG9ycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MueWFtbEF0dHJpYnV0ZUdlbmVyYXRvcnNbaWR4XS5wcm9tcHQgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpXHJcbiAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcC5hZGRPcHRpb24oJ2NsaXBib2FyZCcsICdDb3B5IHRvIGNsaXBib2FyZCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3AuYWRkT3B0aW9uKCdtZXRhZGF0YScsICdJbnNlcnQgaW50byBtZXRhZGF0YScpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Auc2V0VmFsdWUoZ2VuLm91dHB1dE1vZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Aub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy55YW1sQXR0cmlidXRlR2VuZXJhdG9ycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MueWFtbEF0dHJpYnV0ZUdlbmVyYXRvcnNbaWR4XS5vdXRwdXRNb2RlID0gdmFsdWUgYXMgYW55O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuYWRkRXh0cmFCdXR0b24oYnRuID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBidG4uc2V0SWNvbignY3Jvc3MnKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuc2V0VG9vbHRpcCgnRGVsZXRlJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MueWFtbEF0dHJpYnV0ZUdlbmVyYXRvcnMuc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBuZXcgZ2VuZXJhdG9yIGJ1dHRvblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ0biA9PiB7XHJcbiAgICAgICAgICAgICAgICBidG4uc2V0QnV0dG9uVGV4dCgnQWRkIFlBTUwgQXR0cmlidXRlIEdlbmVyYXRvcicpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldEN0YSgpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JzKSB0aGlzLnBsdWdpbi5zZXR0aW5ncy55YW1sQXR0cmlidXRlR2VuZXJhdG9ycyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy55YW1sQXR0cmlidXRlR2VuZXJhdG9ycy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZU5hbWU6ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcHJvbXB0OiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG91dHB1dE1vZGU6ICdtZXRhZGF0YScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kTmFtZTogJ05ldyBZQU1MIEdlbmVyYXRvcidcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmRpc3BsYXkoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIE1hcmtkb3duUmVuZGVyZXIsIE1vZGFsLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBNeVBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgY3JlYXRlUHJvdmlkZXIgfSBmcm9tICcuLi8uLi9wcm92aWRlcnMnO1xyXG5pbXBvcnQgeyBDaGF0SGlzdG9yeU1hbmFnZXIsIENoYXRNZXNzYWdlIH0gZnJvbSAnLi9jaGF0L0NoYXRIaXN0b3J5TWFuYWdlcic7XHJcbmltcG9ydCB7IFNldHRpbmdzTW9kYWwgfSBmcm9tICcuL2NoYXQvU2V0dGluZ3NNb2RhbCc7XHJcbmltcG9ydCB7IENvbmZpcm1hdGlvbk1vZGFsIH0gZnJvbSAnLi9jaGF0L0NvbmZpcm1hdGlvbk1vZGFsJztcclxuaW1wb3J0IHsgY3JlYXRlTWVzc2FnZUVsZW1lbnQgfSBmcm9tICcuL2NoYXQvTWVzc2FnZSc7XHJcbmltcG9ydCB7IGNyZWF0ZUFjdGlvbkJ1dHRvbiwgY29weVRvQ2xpcGJvYXJkIH0gZnJvbSAnLi9jaGF0L0J1dHRvbnMnO1xyXG5pbXBvcnQgeyBzYXZlQ2hhdEFzTm90ZSwgbG9hZENoYXRZYW1sQW5kQXBwbHlTZXR0aW5ncyB9IGZyb20gJy4vY2hhdC9jaGF0UGVyc2lzdGVuY2UnO1xyXG5pbXBvcnQgeyByZW5kZXJDaGF0SGlzdG9yeSB9IGZyb20gJy4vY2hhdC9jaGF0SGlzdG9yeVV0aWxzJztcclxuXHJcbmV4cG9ydCBjb25zdCBWSUVXX1RZUEVfQ0hBVCA9ICdjaGF0LXZpZXcnO1xyXG5cclxuZXhwb3J0IGNsYXNzIENoYXRWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xyXG4gICAgcGx1Z2luOiBNeVBsdWdpbjtcclxuICAgIG1lc3NhZ2VzQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIGlucHV0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIGFjdGl2ZVN0cmVhbTogQWJvcnRDb250cm9sbGVyIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIGNoYXRIaXN0b3J5TWFuYWdlcjogQ2hhdEhpc3RvcnlNYW5hZ2VyO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogTXlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihsZWFmKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLmNoYXRIaXN0b3J5TWFuYWdlciA9IG5ldyBDaGF0SGlzdG9yeU1hbmFnZXIodGhpcy5hcHAudmF1bHQsIHRoaXMucGx1Z2luLm1hbmlmZXN0LmlkLCBcImNoYXQtaGlzdG9yeS5qc29uXCIpO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFZJRVdfVFlQRV9DSEFUO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICdBSSBDaGF0JztcclxuICAgIH1cclxuXHJcbiAgICBnZXRJY29uKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICdtZXNzYWdlLXNxdWFyZSc7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG5cclxuICAgICAgICAvLyBMb2FkIHBlcnNpc3RlbnQgY2hhdCBoaXN0b3J5IGJlZm9yZSBVSSBzZXR1cFxyXG4gICAgICAgIGxldCBsb2FkZWRIaXN0b3J5OiBDaGF0TWVzc2FnZVtdID0gW107XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgbG9hZGVkSGlzdG9yeSA9IGF3YWl0IHRoaXMuY2hhdEhpc3RvcnlNYW5hZ2VyLmdldEhpc3RvcnkoKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJGYWlsZWQgdG8gbG9hZCBjaGF0IGhpc3RvcnkuXCIpO1xyXG4gICAgICAgICAgICBsb2FkZWRIaXN0b3J5ID0gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDcmVhdGUgbWFpbiBjb250YWluZXIgd2l0aCBmbGV4IGxheW91dFxyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnYWktY2hhdC12aWV3Jyk7XHJcblxyXG4gICAgICAgIC8vIC0tLSBGQURFRCBIRUxQIE1FU1NBR0UgTkVBUiBUT1AgLS0tXHJcbiAgICAgICAgY29uc3QgZmFkZWRIZWxwID0gY29udGVudEVsLmNyZWF0ZURpdigpO1xyXG4gICAgICAgIGZhZGVkSGVscC5zZXRUZXh0KCdUaXA6IFR5cGUgL2hlbHAgb3IgcHJlc3MgQ3RybCtTaGlmdCtIIGZvciBjaGF0IGNvbW1hbmRzIGFuZCBzaG9ydGN1dHMuJyk7XHJcbiAgICAgICAgZmFkZWRIZWxwLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgICAgIGZhZGVkSGVscC5zdHlsZS5vcGFjaXR5ID0gJzAuNic7XHJcbiAgICAgICAgZmFkZWRIZWxwLnN0eWxlLmZvbnRTaXplID0gJzAuOTVlbSc7XHJcbiAgICAgICAgZmFkZWRIZWxwLnN0eWxlLm1hcmdpbiA9ICcwLjVlbSAwIDAuMmVtIDAnO1xyXG5cclxuICAgICAgICAvLyAtLS0gQlVUVE9OUyBBQk9WRSBDSEFUIFdJTkRPVyAtLS1cclxuICAgICAgICBjb25zdCB0b3BCdXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdhaS1jaGF0LWJ1dHRvbnMnKTtcclxuICAgICAgICAvLyBTZXR0aW5ncyBidXR0b25cclxuICAgICAgICBjb25zdCBzZXR0aW5nc0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIHNldHRpbmdzQnV0dG9uLnNldFRleHQoJ1NldHRpbmdzJyk7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1RvZ2dsZSBtb2RlbCBzZXR0aW5ncycpO1xyXG4gICAgICAgIHRvcEJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChzZXR0aW5nc0J1dHRvbik7XHJcbiAgICAgICAgLy8gQ29weSBBbGwgYnV0dG9uXHJcbiAgICAgICAgY29uc3QgY29weUFsbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGNvcHlBbGxCdXR0b24udGV4dENvbnRlbnQgPSAnQ29weSBBbGwnO1xyXG4gICAgICAgIHRvcEJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjb3B5QWxsQnV0dG9uKTtcclxuICAgICAgICAvLyBTYXZlIGFzIE5vdGUgYnV0dG9uXHJcbiAgICAgICAgY29uc3Qgc2F2ZU5vdGVCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBzYXZlTm90ZUJ1dHRvbi50ZXh0Q29udGVudCA9ICdTYXZlIGFzIE5vdGUnO1xyXG4gICAgICAgIHRvcEJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChzYXZlTm90ZUJ1dHRvbik7XHJcbiAgICAgICAgLy8gQ2xlYXIgYnV0dG9uXHJcbiAgICAgICAgY29uc3QgY2xlYXJCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTtcclxuICAgICAgICBjbGVhckJ1dHRvbi50ZXh0Q29udGVudCA9ICdDbGVhciBDaGF0JztcclxuICAgICAgICB0b3BCdXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoY2xlYXJCdXR0b24pO1xyXG5cclxuICAgICAgICAvLyBNZXNzYWdlcyBjb250YWluZXJcclxuICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdignYWktY2hhdC1tZXNzYWdlcycpO1xyXG4gICAgICAgIC8vIEFsbCBzdHlsaW5nIGZvciBtZXNzYWdlc0NvbnRhaW5lciBpcyBub3cgaGFuZGxlZCBieSAuYWktY2hhdC1tZXNzYWdlcyBpbiBzdHlsZXMuY3NzXHJcblxyXG4gICAgICAgIC8vIC0tLSBJTlBVVCBDT05UQUlORVIgQVQgQk9UVE9NIC0tLVxyXG4gICAgICAgIHRoaXMuaW5wdXRDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdhaS1jaGF0LWlucHV0LWNvbnRhaW5lcicpO1xyXG4gICAgICAgIC8vIFRleHRhcmVhIGZvciBpbnB1dFxyXG4gICAgICAgIGNvbnN0IHRleHRhcmVhID0gdGhpcy5pbnB1dENvbnRhaW5lci5jcmVhdGVFbCgndGV4dGFyZWEnLCB7XHJcbiAgICAgICAgICAgIGNsczogJ2FpLWNoYXQtaW5wdXQnLFxyXG4gICAgICAgICAgICBhdHRyOiB7XHJcbiAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogJ1R5cGUgeW91ciBtZXNzYWdlLi4uJyxcclxuICAgICAgICAgICAgICAgIHJvd3M6ICczJ1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gQWxsIHN0eWxpbmcgZm9yIHRleHRhcmVhIGlzIG5vdyBoYW5kbGVkIGJ5IC5haS1jaGF0LWlucHV0IGluIHN0eWxlcy5jc3NcclxuXHJcbiAgICAgICAgLy8gU2VuZCBidXR0b24gKG5vdyBuZXh0IHRvIHRleHRhcmVhKVxyXG4gICAgICAgIGNvbnN0IHNlbmRCdXR0b24gPSB0aGlzLmlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcbiAgICAgICAgICAgIHRleHQ6ICdTZW5kJyxcclxuICAgICAgICAgICAgY2xzOiAnbW9kLWN0YSdcclxuICAgICAgICB9KTtcclxuICAgICAgICAvLyBTdG9wIGJ1dHRvbiAobm93IG5leHQgdG8gdGV4dGFyZWEsIGhpZGRlbiBpbml0aWFsbHkpXHJcbiAgICAgICAgY29uc3Qgc3RvcEJ1dHRvbiA9IHRoaXMuaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuICAgICAgICAgICAgdGV4dDogJ1N0b3AnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN0b3BCdXR0b24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcblxyXG4gICAgICAgIC8vIC0tLSBUSU5ZIEhFTFAgQlVUVE9OIEFCT1ZFIFNFTkQgQlVUVE9OIC0tLVxyXG4gICAgICAgIGNvbnN0IGhlbHBCdXR0b24gPSB0aGlzLmlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcbiAgICAgICAgICAgIHRleHQ6ICc/JyxcclxuICAgICAgICB9KTtcclxuICAgICAgICBoZWxwQnV0dG9uLnNldEF0dHIoJ2FyaWEtbGFiZWwnLCAnU2hvdyBjaGF0IGhlbHAnKTtcclxuICAgICAgICBoZWxwQnV0dG9uLnN0eWxlLmZvbnRTaXplID0gJzAuOWVtJztcclxuICAgICAgICBoZWxwQnV0dG9uLnN0eWxlLndpZHRoID0gJzEuOGVtJztcclxuICAgICAgICBoZWxwQnV0dG9uLnN0eWxlLmhlaWdodCA9ICcxLjhlbSc7XHJcbiAgICAgICAgaGVscEJ1dHRvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMC4yZW0nO1xyXG4gICAgICAgIGhlbHBCdXR0b24uc3R5bGUub3BhY2l0eSA9ICcwLjcnO1xyXG4gICAgICAgIGhlbHBCdXR0b24uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgICAgIGhlbHBCdXR0b24uc3R5bGUucmlnaHQgPSAnMC41ZW0nO1xyXG4gICAgICAgIGhlbHBCdXR0b24uc3R5bGUudG9wID0gJy0yLjJlbSc7XHJcbiAgICAgICAgaGVscEJ1dHRvbi5zdHlsZS56SW5kZXggPSAnMic7XHJcbiAgICAgICAgaGVscEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgbmV3IENoYXRIZWxwTW9kYWwodGhpcy5hcHApLm9wZW4oKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmlucHV0Q29udGFpbmVyLnN0eWxlLnBvc2l0aW9uID0gJ3JlbGF0aXZlJztcclxuXHJcbiAgICAgICAgLy8gLS0tIEhBTkRMRSBTRU5EIE1FU1NBR0UgLS0tXHJcbiAgICAgICAgY29uc3Qgc2VuZE1lc3NhZ2UgPSBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSB0ZXh0YXJlYS52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmICghY29udGVudCkgcmV0dXJuO1xyXG5cclxuICAgICAgICAgICAgLy8gRGlzYWJsZSBpbnB1dCBhbmQgc2hvdyBzdG9wIGJ1dHRvblxyXG4gICAgICAgICAgICB0ZXh0YXJlYS5kaXNhYmxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHNlbmRCdXR0b24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIHN0b3BCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgdXNlciBtZXNzYWdlXHJcbiAgICAgICAgICAgIGNvbnN0IHVzZXJNZXNzYWdlRWwgPSBhd2FpdCBjcmVhdGVNZXNzYWdlRWxlbWVudCh0aGlzLmFwcCwgJ3VzZXInLCBjb250ZW50LCB0aGlzLmNoYXRIaXN0b3J5TWFuYWdlciwgdGhpcy5wbHVnaW4sIChlbCkgPT4gdGhpcy5yZWdlbmVyYXRlUmVzcG9uc2UoZWwpLCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh1c2VyTWVzc2FnZUVsKTtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxUb3AgPSB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbEhlaWdodDtcclxuICAgICAgICAgICAgdGV4dGFyZWEudmFsdWUgPSAnJztcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAvLyBCdWlsZCBjb250ZXh0IGFuZCBnZXQgY2hhdCBoaXN0b3J5XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IGF3YWl0IHRoaXMuYnVpbGRDb250ZXh0TWVzc2FnZXMoKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgYWxsIGV4aXN0aW5nIG1lc3NhZ2VzXHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlRWxlbWVudHMgPSB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5haS1jaGF0LW1lc3NhZ2UnKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VFbGVtZW50cy5mb3JFYWNoKGVsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByb2xlID0gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCd1c2VyJykgPyAndXNlcicgOiAnYXNzaXN0YW50JztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZWwucXVlcnlTZWxlY3RvcignLm1lc3NhZ2UtY29udGVudCcpPy50ZXh0Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZSwgY29udGVudCB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0ZW1wb3JhcnkgY29udGFpbmVyIGZvciBzdHJlYW1pbmcgZGlzcGxheVxyXG4gICAgICAgICAgICAgICAgY29uc3QgdGVtcENvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgICAgICAgICAgdGVtcENvbnRhaW5lci5hZGRDbGFzcygnYWktY2hhdC1tZXNzYWdlJywgJ2Fzc2lzdGFudCcpO1xyXG4gICAgICAgICAgICAgICAgdGVtcENvbnRhaW5lci5jcmVhdGVEaXYoJ21lc3NhZ2UtY29udGVudCcpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5hcHBlbmRDaGlsZCh0ZW1wQ29udGFpbmVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsVG9wID0gdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxIZWlnaHQ7XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2VDb250ZW50ID0gYXdhaXQgdGhpcy5zdHJlYW1Bc3Npc3RhbnRSZXNwb25zZShtZXNzYWdlcywgdGVtcENvbnRhaW5lcik7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHRlbXBvcmFyeSBjb250YWluZXIgYW5kIGNyZWF0ZSBwZXJtYW5lbnQgbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgdGVtcENvbnRhaW5lci5yZW1vdmUoKTtcclxuICAgICAgICAgICAgICAgIGlmIChyZXNwb25zZUNvbnRlbnQudHJpbSgpICE9PSBcIlwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWVzc2FnZUVsID0gYXdhaXQgY3JlYXRlTWVzc2FnZUVsZW1lbnQodGhpcy5hcHAsICdhc3Npc3RhbnQnLCByZXNwb25zZUNvbnRlbnQsIHRoaXMuY2hhdEhpc3RvcnlNYW5hZ2VyLCB0aGlzLnBsdWdpbiwgKGVsKSA9PiB0aGlzLnJlZ2VuZXJhdGVSZXNwb25zZShlbCksIHRoaXMpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuYXBwZW5kQ2hpbGQobWVzc2FnZUVsKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNoYXRIaXN0b3J5TWFuYWdlci5hZGRNZXNzYWdlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBtZXNzYWdlRWwuZGF0YXNldC50aW1lc3RhbXAgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZW5kZXI6ICdhc3Npc3RhbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiByZXNwb25zZUNvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGlmIChlcnJvci5uYW1lICE9PSAnQWJvcnRFcnJvcicpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNyZWF0ZU1lc3NhZ2VFbGVtZW50KHRoaXMuYXBwLCAnYXNzaXN0YW50JywgYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCwgdGhpcy5jaGF0SGlzdG9yeU1hbmFnZXIsIHRoaXMucGx1Z2luLCAoZWwpID0+IHRoaXMucmVnZW5lcmF0ZVJlc3BvbnNlKGVsKSwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAvLyBSZS1lbmFibGUgaW5wdXQgYW5kIGhpZGUgc3RvcCBidXR0b25cclxuICAgICAgICAgICAgICAgIHRleHRhcmVhLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgc3RvcEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgIHNlbmRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbSA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICAvLyAtLS0gQlVUVE9OIEVWRU5UIExJU1RFTkVSUyAtLS1cclxuICAgICAgICBzZW5kQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VuZE1lc3NhZ2UpO1xyXG4gICAgICAgIHN0b3BCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmFjdGl2ZVN0cmVhbSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVTdHJlYW0uYWJvcnQoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtID0gbnVsbDtcclxuICAgICAgICAgICAgICAgIHRleHRhcmVhLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgc3RvcEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgIHNlbmRCdXR0b24uY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBjb3B5QWxsQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IHRoaXMubWVzc2FnZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmFpLWNoYXQtbWVzc2FnZScpO1xyXG4gICAgICAgICAgICBsZXQgY2hhdENvbnRlbnQgPSAnJztcclxuICAgICAgICAgICAgbWVzc2FnZXMuZm9yRWFjaCgoZWwsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZWwucXVlcnlTZWxlY3RvcignLm1lc3NhZ2UtY29udGVudCcpPy50ZXh0Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgICAgIGNoYXRDb250ZW50ICs9IGNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPCBtZXNzYWdlcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2hhdENvbnRlbnQgKz0gJ1xcblxcbicgKyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0U2VwYXJhdG9yICsgJ1xcblxcbic7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBhd2FpdCBjb3B5VG9DbGlwYm9hcmQoY2hhdENvbnRlbnQpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHNhdmVOb3RlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyO1xyXG4gICAgICAgICAgICBsZXQgbW9kZWwgPSAnJztcclxuICAgICAgICAgICAgaWYgKHByb3ZpZGVyID09PSAnb3BlbmFpJykgbW9kZWwgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5tb2RlbDtcclxuICAgICAgICAgICAgZWxzZSBpZiAocHJvdmlkZXIgPT09ICdhbnRocm9waWMnKSBtb2RlbCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzLm1vZGVsO1xyXG4gICAgICAgICAgICBlbHNlIGlmIChwcm92aWRlciA9PT0gJ2dlbWluaScpIG1vZGVsID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MubW9kZWw7XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHByb3ZpZGVyID09PSAnb2xsYW1hJykgbW9kZWwgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vbGxhbWFTZXR0aW5ncy5tb2RlbDtcclxuICAgICAgICAgICAgYXdhaXQgc2F2ZUNoYXRBc05vdGUoe1xyXG4gICAgICAgICAgICAgICAgYXBwOiB0aGlzLmFwcCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5haS1jaGF0LW1lc3NhZ2UnKSxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzOiB0aGlzLnBsdWdpbi5zZXR0aW5ncyxcclxuICAgICAgICAgICAgICAgIHByb3ZpZGVyLFxyXG4gICAgICAgICAgICAgICAgbW9kZWwsXHJcbiAgICAgICAgICAgICAgICBjaGF0U2VwYXJhdG9yOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0U2VwYXJhdG9yLFxyXG4gICAgICAgICAgICAgICAgY2hhdE5vdGVGb2xkZXI6IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXROb3RlRm9sZGVyXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNsZWFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmNoYXRIaXN0b3J5TWFuYWdlci5jbGVhckhpc3RvcnkoKTtcclxuICAgICAgICAgICAgICAgIC8vIERvIG5vdCBzaG93IGFueSBtZXNzYWdlIGFmdGVyIGNsZWFyaW5nLlxyXG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGNsZWFyIGNoYXQgaGlzdG9yeS5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBzZXR0aW5nc0J1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3NNb2RhbCA9IG5ldyBTZXR0aW5nc01vZGFsKHRoaXMuYXBwLCB0aGlzLnBsdWdpbik7XHJcbiAgICAgICAgICAgIHNldHRpbmdzTW9kYWwub3BlbigpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyAtLS0gU0xBU0ggQ09NTUFORFMgQU5EIEtFWUJPQVJEIFNIT1JUQ1VUUyAtLS1cclxuICAgICAgICBhc3luYyBmdW5jdGlvbiBoYW5kbGVTbGFzaENvbW1hbmQoY21kOiBzdHJpbmcpIHtcclxuICAgICAgICAgICAgc3dpdGNoIChjbWQpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJy9jbGVhcic6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2xlYXJCdXR0b24uY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJy9jb3B5JzpcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjb3B5QWxsQnV0dG9uLmNsaWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICBjYXNlICcvc2F2ZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgc2F2ZU5vdGVCdXR0b24uY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJy9zZXR0aW5ncyc6XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3NCdXR0b24uY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgJy9oZWxwJzpcclxuICAgICAgICAgICAgICAgICAgICBuZXcgQ2hhdEhlbHBNb2RhbCh0aGlzLmFwcCkub3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0ZXh0YXJlYS5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgYXN5bmMgKGUpID0+IHtcclxuICAgICAgICAgICAgLy8gS2V5Ym9hcmQgc2hvcnRjdXRzOiBDdHJsK1NoaWZ0K0MgKENsZWFyKSwgWSAoQ29weSksIFMgKFNhdmUpLCBPIChTZXR0aW5ncyksIEggKEhlbHApXHJcbiAgICAgICAgICAgIGlmIChlLmN0cmxLZXkgJiYgZS5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUua2V5LnRvTG93ZXJDYXNlKCkgPT09ICdjJykgeyBlLnByZXZlbnREZWZhdWx0KCk7IGF3YWl0IGNsZWFyQnV0dG9uLmNsaWNrKCk7IHJldHVybjsgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGUua2V5LnRvTG93ZXJDYXNlKCkgPT09ICd5JykgeyBlLnByZXZlbnREZWZhdWx0KCk7IGF3YWl0IGNvcHlBbGxCdXR0b24uY2xpY2soKTsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gJ3MnKSB7IGUucHJldmVudERlZmF1bHQoKTsgYXdhaXQgc2F2ZU5vdGVCdXR0b24uY2xpY2soKTsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gJ28nKSB7IGUucHJldmVudERlZmF1bHQoKTsgc2V0dGluZ3NCdXR0b24uY2xpY2soKTsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2gnKSB7IGUucHJldmVudERlZmF1bHQoKTsgbmV3IENoYXRIZWxwTW9kYWwodGhpcy5hcHApLm9wZW4oKTsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgLy8gU2xhc2ggY29tbWFuZHNcclxuICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB2YWwgPSB0ZXh0YXJlYS52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgICAgICAgICBpZiAodmFsID09PSAnL2NsZWFyJyB8fCB2YWwgPT09ICcvY29weScgfHwgdmFsID09PSAnL3NhdmUnIHx8IHZhbCA9PT0gJy9zZXR0aW5ncycgfHwgdmFsID09PSAnL2hlbHAnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZVNsYXNoQ29tbWFuZC5jYWxsKHRoaXMsIHZhbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFNoaWZ0K0VudGVyIHdpbGwgZmFsbCB0aHJvdWdoIGFuZCBhY3QgYXMgYSBub3JtYWwgRW50ZXIgKG5ld2xpbmUpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFJlbmRlciBsb2FkZWQgY2hhdCBoaXN0b3J5XHJcbiAgICAgICAgaWYgKGxvYWRlZEhpc3RvcnkubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgICAgIC8vIElmIGxvYWRpbmcgZnJvbSBhIG5vdGUsIGNoZWNrIGZvciBZQU1MIGZyb250bWF0dGVyIGFuZCB1cGRhdGUgc2V0dGluZ3NcclxuICAgICAgICAgICAgY29uc3QgZmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICAgICAgICAgIGlmIChmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBsb2FkQ2hhdFlhbWxBbmRBcHBseVNldHRpbmdzKHtcclxuICAgICAgICAgICAgICAgICAgICBhcHA6IHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAgICAgICAgIHBsdWdpbjogdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHRoaXMucGx1Z2luLnNldHRpbmdzLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGF3YWl0IHJlbmRlckNoYXRIaXN0b3J5KHtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzQ29udGFpbmVyOiB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLFxyXG4gICAgICAgICAgICAgICAgbG9hZGVkSGlzdG9yeSxcclxuICAgICAgICAgICAgICAgIGNoYXRIaXN0b3J5TWFuYWdlcjogdGhpcy5jaGF0SGlzdG9yeU1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICBwbHVnaW46IHRoaXMucGx1Z2luLFxyXG4gICAgICAgICAgICAgICAgcmVnZW5lcmF0ZVJlc3BvbnNlOiAoZWwpID0+IHRoaXMucmVnZW5lcmF0ZVJlc3BvbnNlKGVsKSxcclxuICAgICAgICAgICAgICAgIHNjcm9sbFRvQm90dG9tOiB0cnVlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGFkZE1lc3NhZ2Uocm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IHN0cmluZywgaXNFcnJvcjogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUVsID0gYXdhaXQgY3JlYXRlTWVzc2FnZUVsZW1lbnQodGhpcy5hcHAsIHJvbGUsIGNvbnRlbnQsIHRoaXMuY2hhdEhpc3RvcnlNYW5hZ2VyLCB0aGlzLnBsdWdpbiwgKGVsKSA9PiB0aGlzLnJlZ2VuZXJhdGVSZXNwb25zZShlbCksIHRoaXMpO1xyXG4gICAgICAgIC8vIFRoZSB0aW1lc3RhbXAgZm9yIHRoZSBVSSBlbGVtZW50IGlzIHNldCB3aXRoaW4gY3JlYXRlTWVzc2FnZUVsZW1lbnRcclxuICAgICAgICBjb25zdCB1aVRpbWVzdGFtcCA9IG1lc3NhZ2VFbC5kYXRhc2V0LnRpbWVzdGFtcCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7IC8vIEZhbGxiYWNrLCB0aG91Z2ggY3JlYXRlTWVzc2FnZUVsZW1lbnQgc2hvdWxkIHNldCBpdFxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuYXBwZW5kQ2hpbGQobWVzc2FnZUVsKTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xyXG5cclxuICAgICAgICAvLyBQZXJzaXN0IHRoZSBtZXNzYWdlLCB1c2luZyB0aGUgdGltZXN0YW1wIGZyb20gdGhlIFVJIGVsZW1lbnQgZm9yIGNvbnNpc3RlbmN5XHJcbiAgICAgICAgLy8gdW5sZXNzIGl0J3MgYW4gZXJyb3IgbWVzc2FnZSB0aGF0IHNob3VsZG4ndCBiZSBwZXJzaXN0ZWQgYXMgYSByZWd1bGFyIGNoYXQgZW50cnkuXHJcbiAgICAgICAgLy8gSG93ZXZlciwgdGhlIGN1cnJlbnQgcmVxdWlyZW1lbnQgaXMgdG8gcGVyc2lzdCBlcnJvciBtZXNzYWdlcyB0b28uXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jaGF0SGlzdG9yeU1hbmFnZXIuYWRkTWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHVpVGltZXN0YW1wLCBcclxuICAgICAgICAgICAgICAgIHNlbmRlcjogcm9sZSxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIHNhdmUgY2hhdCBtZXNzYWdlOiBcIiArIGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlU3RyZWFtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtLmFib3J0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyByZWdlbmVyYXRlUmVzcG9uc2UobWVzc2FnZUVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIC8vIERpc2FibGUgaW5wdXQgZHVyaW5nIHJlZ2VuZXJhdGlvblxyXG4gICAgICAgIGNvbnN0IHRleHRhcmVhID0gdGhpcy5pbnB1dENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpO1xyXG4gICAgICAgIGlmICh0ZXh0YXJlYSkgdGV4dGFyZWEuZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBGaW5kIGFsbCBtZXNzYWdlIGVsZW1lbnRzXHJcbiAgICAgICAgY29uc3QgYWxsTWVzc2FnZXMgPSBBcnJheS5mcm9tKHRoaXMubWVzc2FnZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmFpLWNoYXQtbWVzc2FnZScpKTtcclxuICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBhbGxNZXNzYWdlcy5pbmRleE9mKG1lc3NhZ2VFbCk7XHJcbiAgICAgICAgY29uc3QgaXNVc2VyQ2xpY2tlZCA9IG1lc3NhZ2VFbC5jbGFzc0xpc3QuY29udGFpbnMoJ3VzZXInKTtcclxuXHJcbiAgICAgICAgLy8gRmluZCB0aGUgdGFyZ2V0IEFJIG1lc3NhZ2UgdG8gb3ZlcndyaXRlXHJcbiAgICAgICAgbGV0IHRhcmdldEluZGV4ID0gLTE7XHJcbiAgICAgICAgaWYgKGlzVXNlckNsaWNrZWQpIHtcclxuICAgICAgICAgICAgLy8gSWYgdXNlciBtZXNzYWdlOiBmaW5kIHRoZSBuZXh0IEFJIG1lc3NhZ2UgYWZ0ZXIgdGhpcyB1c2VyIG1lc3NhZ2VcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGN1cnJlbnRJbmRleCArIDE7IGkgPCBhbGxNZXNzYWdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFsbE1lc3NhZ2VzW2ldLmNsYXNzTGlzdC5jb250YWlucygnYXNzaXN0YW50JykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYWxsTWVzc2FnZXNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCd1c2VyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gU3RvcCBpZiBhbm90aGVyIHVzZXIgbWVzc2FnZSBpcyBmb3VuZCBmaXJzdFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgQUkgbWVzc2FnZTogdGFyZ2V0IGlzIHRoaXMgbWVzc2FnZVxyXG4gICAgICAgICAgICB0YXJnZXRJbmRleCA9IGN1cnJlbnRJbmRleDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdhdGhlciBjb250ZXh0IHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhlIHJlbGV2YW50IHVzZXIgbWVzc2FnZVxyXG4gICAgICAgIGxldCB1c2VyTXNnSW5kZXggPSBjdXJyZW50SW5kZXg7XHJcbiAgICAgICAgaWYgKCFpc1VzZXJDbGlja2VkKSB7XHJcbiAgICAgICAgICAgIHVzZXJNc2dJbmRleCA9IGN1cnJlbnRJbmRleCAtIDE7XHJcbiAgICAgICAgICAgIHdoaWxlICh1c2VyTXNnSW5kZXggPj0gMCAmJiAhYWxsTWVzc2FnZXNbdXNlck1zZ0luZGV4XS5jbGFzc0xpc3QuY29udGFpbnMoJ3VzZXInKSkge1xyXG4gICAgICAgICAgICAgICAgdXNlck1zZ0luZGV4LS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEJ1aWxkIGNvbnRleHQgbWVzc2FnZXMgYW5kIGluY2x1ZGUgcHJpb3IgY2hhdCBoaXN0b3J5XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCB0aGlzLmJ1aWxkQ29udGV4dE1lc3NhZ2VzKCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdXNlck1zZ0luZGV4OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZWwgPSBhbGxNZXNzYWdlc1tpXTtcclxuICAgICAgICAgICAgY29uc3Qgcm9sZSA9IGVsLmNsYXNzTGlzdC5jb250YWlucygndXNlcicpID8gJ3VzZXInIDogJ2Fzc2lzdGFudCc7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSAoZWwgYXMgSFRNTEVsZW1lbnQpLmRhdGFzZXQucmF3Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGUsIGNvbnRlbnQgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZW1vdmUgdGhlIG9sZCBBSSBtZXNzYWdlIGlmIG92ZXJ3cml0aW5nXHJcbiAgICAgICAgbGV0IG9yaWdpbmFsVGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIGxldCBvcmlnaW5hbENvbnRlbnQgPSAnJztcclxuICAgICAgICBsZXQgaW5zZXJ0QWZ0ZXJOb2RlOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgIGlmICh0YXJnZXRJbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0RWwgPSBhbGxNZXNzYWdlc1t0YXJnZXRJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsVGltZXN0YW1wID0gdGFyZ2V0RWwuZGF0YXNldC50aW1lc3RhbXAgfHwgb3JpZ2luYWxUaW1lc3RhbXA7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsQ29udGVudCA9IHRhcmdldEVsLmRhdGFzZXQucmF3Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgaW5zZXJ0QWZ0ZXJOb2RlID0gdGFyZ2V0RWwucHJldmlvdXNFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgdGFyZ2V0RWwucmVtb3ZlKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc1VzZXJDbGlja2VkKSB7XHJcbiAgICAgICAgICAgIC8vIE5vIEFJIG1lc3NhZ2UgdG8gb3ZlcndyaXRlLCBpbnNlcnQgYWZ0ZXIgdXNlciBtZXNzYWdlXHJcbiAgICAgICAgICAgIGluc2VydEFmdGVyTm9kZSA9IG1lc3NhZ2VFbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBObyB1c2VyIG1lc3NhZ2UgZm91bmQsIGluc2VydCBhdCB0b3BcclxuICAgICAgICAgICAgaW5zZXJ0QWZ0ZXJOb2RlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBuZXcgYXNzaXN0YW50IG1lc3NhZ2UgY29udGFpbmVyIGZvciBzdHJlYW1pbmdcclxuICAgICAgICBjb25zdCBhc3Npc3RhbnRDb250YWluZXIgPSBhd2FpdCBjcmVhdGVNZXNzYWdlRWxlbWVudCh0aGlzLmFwcCwgJ2Fzc2lzdGFudCcsICcnLCB0aGlzLmNoYXRIaXN0b3J5TWFuYWdlciwgdGhpcy5wbHVnaW4sIChlbCkgPT4gdGhpcy5yZWdlbmVyYXRlUmVzcG9uc2UoZWwpLCB0aGlzKTtcclxuICAgICAgICBhc3Npc3RhbnRDb250YWluZXIuZGF0YXNldC50aW1lc3RhbXAgPSBvcmlnaW5hbFRpbWVzdGFtcDtcclxuICAgICAgICBpZiAoaW5zZXJ0QWZ0ZXJOb2RlICYmIGluc2VydEFmdGVyTm9kZS5uZXh0U2libGluZykge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLmluc2VydEJlZm9yZShhc3Npc3RhbnRDb250YWluZXIsIGluc2VydEFmdGVyTm9kZS5uZXh0U2libGluZyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5hcHBlbmRDaGlsZChhc3Npc3RhbnRDb250YWluZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN0cmVhbUFzc2lzdGFudFJlc3BvbnNlKG1lc3NhZ2VzLCBhc3Npc3RhbnRDb250YWluZXIsIG9yaWdpbmFsVGltZXN0YW1wLCBvcmlnaW5hbENvbnRlbnQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvci5uYW1lICE9PSAnQWJvcnRFcnJvcicpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgICAgICBhc3Npc3RhbnRDb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICBpZiAodGV4dGFyZWEpIHtcclxuICAgICAgICAgICAgICAgIHRleHRhcmVhLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBidWlsZENvbnRleHRNZXNzYWdlcygpOiBQcm9taXNlPE1lc3NhZ2VbXT4ge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VzOiBNZXNzYWdlW10gPSBbXHJcbiAgICAgICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHRoaXMucGx1Z2luLmdldFN5c3RlbU1lc3NhZ2UoKSB9XHJcbiAgICAgICAgXTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGNvbnRleHQgbm90ZXMgaWYgZW5hYmxlZFxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb250ZXh0Tm90ZXMgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGV4dE5vdGVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHRDb250ZW50ID0gYXdhaXQgdGhpcy5wbHVnaW4uZ2V0Q29udGV4dE5vdGVzQ29udGVudCh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZXh0Tm90ZXMpO1xyXG4gICAgICAgICAgICBtZXNzYWdlc1swXS5jb250ZW50ICs9IGBcXG5cXG5Db250ZXh0IE5vdGVzOlxcbiR7Y29udGV4dENvbnRlbnR9YDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFkZCBjdXJyZW50IG5vdGUgY29udGVudCBpZiBlbmFibGVkXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlZmVyZW5jZUN1cnJlbnROb3RlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50Tm90ZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGN1cnJlbnRGaWxlKTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGBIZXJlIGlzIHRoZSBjb250ZW50IG9mIHRoZSBjdXJyZW50IG5vdGU6XFxuXFxuJHtjdXJyZW50Tm90ZUNvbnRlbnR9YFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBtZXNzYWdlcztcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIHN0cmVhbUFzc2lzdGFudFJlc3BvbnNlKFxyXG4gICAgICAgIG1lc3NhZ2VzOiBNZXNzYWdlW10sXHJcbiAgICAgICAgY29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuICAgICAgICBvcmlnaW5hbFRpbWVzdGFtcD86IHN0cmluZyxcclxuICAgICAgICBvcmlnaW5hbENvbnRlbnQ/OiBzdHJpbmdcclxuICAgICk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgbGV0IHJlc3BvbnNlQ29udGVudCA9ICcnO1xyXG4gICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IGNyZWF0ZVByb3ZpZGVyKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgYXdhaXQgcHJvdmlkZXIuZ2V0Q29tcGxldGlvbihcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wZXJhdHVyZSxcclxuICAgICAgICAgICAgICAgICAgICBtYXhUb2tlbnM6IHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFRva2VucyxcclxuICAgICAgICAgICAgICAgICAgICBzdHJlYW1DYWxsYmFjazogYXN5bmMgKGNodW5rOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VDb250ZW50ICs9IGNodW5rO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50RWwgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLm1lc3NhZ2UtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudEVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuZGF0YXNldC5yYXdDb250ZW50ID0gcmVzcG9uc2VDb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXI6IHRoaXMuYWN0aXZlU3RyZWFtXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvLyBVcGRhdGUgY2hhdCBoaXN0b3J5IGlmIHdlIGhhdmUgYSB0aW1lc3RhbXBcclxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsVGltZXN0YW1wICYmIHJlc3BvbnNlQ29udGVudC50cmltKCkgIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hhdEhpc3RvcnlNYW5hZ2VyLnVwZGF0ZU1lc3NhZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxUaW1lc3RhbXAsXHJcbiAgICAgICAgICAgICAgICAgICAgJ2Fzc2lzdGFudCcsXHJcbiAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxDb250ZW50IHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQ29udGVudFxyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlQ29udGVudDtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IubmFtZSAhPT0gJ0Fib3J0RXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyAtLS0gSEVMUCBNT0RBTCAtLS1cclxuY2xhc3MgQ2hhdEhlbHBNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgIH1cclxuICAgIG9uT3BlbigpIHtcclxuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCgnQUkgQ2hhdCBIZWxwJyk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICA8ZGl2IHN0eWxlPVwibGluZS1oZWlnaHQ6MS43O2ZvbnQtc2l6ZToxZW07XCI+XHJcbiAgICAgICAgICAgICAgICA8Yj5TbGFzaCBDb21tYW5kczo8L2I+PGJyPlxyXG4gICAgICAgICAgICAgICAgPGNvZGU+L2NsZWFyPC9jb2RlPiBcdTIwMTMgQ2xlYXIgdGhlIGNoYXQ8YnI+XHJcbiAgICAgICAgICAgICAgICA8Y29kZT4vY29weTwvY29kZT4gXHUyMDEzIENvcHkgYWxsIGNoYXQ8YnI+XHJcbiAgICAgICAgICAgICAgICA8Y29kZT4vc2F2ZTwvY29kZT4gXHUyMDEzIFNhdmUgY2hhdCBhcyBub3RlPGJyPlxyXG4gICAgICAgICAgICAgICAgPGNvZGU+L3NldHRpbmdzPC9jb2RlPiBcdTIwMTMgT3BlbiBzZXR0aW5nczxicj5cclxuICAgICAgICAgICAgICAgIDxjb2RlPi9oZWxwPC9jb2RlPiBcdTIwMTMgU2hvdyB0aGlzIGhlbHA8YnI+XHJcbiAgICAgICAgICAgICAgICA8YnI+XHJcbiAgICAgICAgICAgICAgICA8Yj5LZXlib2FyZCBTaG9ydGN1dHMgKHdoZW4gaW5wdXQgaXMgZm9jdXNlZCk6PC9iPjxicj5cclxuICAgICAgICAgICAgICAgIDxjb2RlPkN0cmwrU2hpZnQrQzwvY29kZT4gXHUyMDEzIENsZWFyIGNoYXQ8YnI+XHJcbiAgICAgICAgICAgICAgICA8Y29kZT5DdHJsK1NoaWZ0K1k8L2NvZGU+IFx1MjAxMyBDb3B5IGFsbCBjaGF0PGJyPlxyXG4gICAgICAgICAgICAgICAgPGNvZGU+Q3RybCtTaGlmdCtTPC9jb2RlPiBcdTIwMTMgU2F2ZSBhcyBub3RlPGJyPlxyXG4gICAgICAgICAgICAgICAgPGNvZGU+Q3RybCtTaGlmdCtPPC9jb2RlPiBcdTIwMTMgT3BlbiBzZXR0aW5nczxicj5cclxuICAgICAgICAgICAgICAgIDxjb2RlPkN0cmwrU2hpZnQrSDwvY29kZT4gXHUyMDEzIFNob3cgdGhpcyBoZWxwPGJyPlxyXG4gICAgICAgICAgICAgICAgPGJyPlxyXG4gICAgICAgICAgICAgICAgPGI+T3RoZXI6PC9iPjxicj5cclxuICAgICAgICAgICAgICAgIDxjb2RlPkVudGVyPC9jb2RlPiBcdTIwMTMgU2VuZCBtZXNzYWdlPGJyPlxyXG4gICAgICAgICAgICAgICAgPGNvZGU+U2hpZnQrRW50ZXI8L2NvZGU+IFx1MjAxMyBOZXdsaW5lPGJyPlxyXG4gICAgICAgICAgICAgICAgPGJyPlxyXG4gICAgICAgICAgICAgICAgWW91IGNhbiBhbHNvIHVzZSB0aGUgYnV0dG9ucyBhdCB0aGUgdG9wIG9mIHRoZSBjaGF0IHdpbmRvdy5cclxuICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgYDtcclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgVmF1bHQsIFRGaWxlLCBURm9sZGVyLCBub3JtYWxpemVQYXRoIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENoYXRNZXNzYWdlIHtcclxuICB0aW1lc3RhbXA6IHN0cmluZztcclxuICBzZW5kZXI6IHN0cmluZztcclxuICBjb250ZW50OiBzdHJpbmc7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBDaGF0SGlzdG9yeU1hbmFnZXIge1xyXG4gIHByaXZhdGUgdmF1bHQ6IFZhdWx0O1xyXG4gIHByaXZhdGUgaGlzdG9yeUZpbGVQYXRoOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBoaXN0b3J5OiBDaGF0TWVzc2FnZVtdID0gW107XHJcbiAgcHJpdmF0ZSBpc0xvYWRlZDogYm9vbGVhbiA9IGZhbHNlO1xyXG5cclxuICBjb25zdHJ1Y3Rvcih2YXVsdDogVmF1bHQsIHBsdWdpbklkPzogc3RyaW5nLCBoaXN0b3J5RmlsZVBhdGg/OiBzdHJpbmcpIHtcclxuICAgIHRoaXMudmF1bHQgPSB2YXVsdDtcclxuICAgIGxldCBlZmZlY3RpdmVQbHVnaW5JZCA9IHBsdWdpbklkO1xyXG4gICAgaWYgKCFwbHVnaW5JZCkge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoXCJDUklUSUNBTDogQ2hhdEhpc3RvcnlNYW5hZ2VyIGluc3RhbnRpYXRlZCB3aXRob3V0IHBsdWdpbklkISBVc2luZyBwbGFjZWhvbGRlci4gVGhpcyB3aWxsIGxpa2VseSBsZWFkIHRvIGluY29ycmVjdCBmaWxlIHBhdGhzLlwiKTtcclxuICAgICAgICBlZmZlY3RpdmVQbHVnaW5JZCA9IFwidW5rbm93bi1wbHVnaW4taWQtZXJyb3JcIjsgLy8gUGxhY2Vob2xkZXJcclxuICAgIH1cclxuICAgIGNvbnN0IGZQYXRoID0gaGlzdG9yeUZpbGVQYXRoIHx8IFwiY2hhdC1oaXN0b3J5Lmpzb25cIjtcclxuICAgIC8vIFN0b3JlIGluIHBsdWdpbiBkYXRhIGRpcmVjdG9yeVxyXG4gICAgdGhpcy5oaXN0b3J5RmlsZVBhdGggPSBub3JtYWxpemVQYXRoKGAub2JzaWRpYW4vcGx1Z2lucy8ke2VmZmVjdGl2ZVBsdWdpbklkfS8ke2ZQYXRofWApO1xyXG4gICAgY29uc29sZS5sb2coXCJbQ2hhdEhpc3RvcnlNYW5hZ2VyXSBVc2luZyBoaXN0b3J5IGZpbGUgcGF0aDpcIiwgdGhpcy5oaXN0b3J5RmlsZVBhdGgpO1xyXG4gICAgLy8gU2hvdyBhIE5vdGljZSBpbiBPYnNpZGlhbiBzbyB0aGUgdXNlciBjYW4gc2VlIHRoZSBwYXRoIGV2ZW4gaWYgbG9ncyBhcmUgc3RyaXBwZWRcclxuICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ICE9PSBcInVuZGVmaW5lZFwiICYmIHdpbmRvdy5Ob3RpY2UpIHtcclxuICAgICAgLy8gQHRzLWlnbm9yZVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBlbnN1cmVEaXJlY3RvcnlFeGlzdHMoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBkaXJQYXRoID0gdGhpcy5oaXN0b3J5RmlsZVBhdGguc3Vic3RyaW5nKDAsIHRoaXMuaGlzdG9yeUZpbGVQYXRoLmxhc3RJbmRleE9mKCcvJykpO1xyXG4gICAgaWYgKCFkaXJQYXRoKSByZXR1cm47IC8vIFNob3VsZCBub3QgaGFwcGVuIHdpdGggdGhlIGN1cnJlbnQgcGF0aCBzdHJ1Y3R1cmVcclxuXHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGFic3RyYWN0RmlsZSA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGRpclBhdGgpO1xyXG4gICAgICAgIGlmIChhYnN0cmFjdEZpbGUgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gRGlyZWN0b3J5IGRvZXMgbm90IGV4aXN0LCBjcmVhdGUgaXRcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy52YXVsdC5jcmVhdGVGb2xkZXIoZGlyUGF0aCk7XHJcbiAgICAgICAgfSBlbHNlIGlmICghKGFic3RyYWN0RmlsZSBpbnN0YW5jZW9mIFRGb2xkZXIpKSB7XHJcbiAgICAgICAgICAgIC8vIFBhdGggZXhpc3RzIGJ1dCBpcyBub3QgYSBmb2xkZXIsIHRoaXMgaXMgYW4gZXJyb3JcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcihgUGF0aCAke2RpclBhdGh9IGV4aXN0cyBidXQgaXMgbm90IGEgZm9sZGVyLmApO1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFBhdGggJHtkaXJQYXRofSBleGlzdHMgYnV0IGlzIG5vdCBhIGZvbGRlci5gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgYWJzdHJhY3RGaWxlIGlzIGEgVEZvbGRlciwgZGlyZWN0b3J5IGFscmVhZHkgZXhpc3RzLCBkbyBub3RoaW5nLlxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgIC8vIElmIHRoZSBlcnJvciBpcyBzcGVjaWZpY2FsbHkgXCJmb2xkZXIgYWxyZWFkeSBleGlzdHNcIiwgd2UgY2FuIGFzc3VtZSBpdCdzIHNhZmUgdG8gaWdub3JlLlxyXG4gICAgICAgIC8vIFRoaXMgaGFuZGxlcyBjYXNlcyB3aGVyZSBjcmVhdGVGb2xkZXIgdGhyb3dzIGV2ZW4gaWYgdGhlIGZvbGRlciBpcyBhbHJlYWR5IHRoZXJlLlxyXG4gICAgICAgIGlmIChlLm1lc3NhZ2UgJiYgZS5tZXNzYWdlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoXCJmb2xkZXIgYWxyZWFkeSBleGlzdHNcIikpIHtcclxuICAgICAgICAgICAgLy8gQXNzdW1pbmcgdGhlIEFQSSBpcyBjb3JyZWN0IHRoYXQgdGhlIGZvbGRlciBleGlzdHMuXHJcbiAgICAgICAgICAgIC8vIFRoZSBwcmV2aW91cyBjaGVjayBgdGhpcy52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZGlyUGF0aCkgaW5zdGFuY2VvZiBURm9sZGVyYFxyXG4gICAgICAgICAgICAvLyBtaWdodCBmYWlsIGR1ZSB0byBjYWNoaW5nIG9yIHRpbWluZyBpc3N1ZXMgaW1tZWRpYXRlbHkgYWZ0ZXIgdGhlIGVycm9yLlxyXG4gICAgICAgICAgICAvLyBCeSByZXR1cm5pbmcgaGVyZSwgd2UgYWNjZXB0IHRoYXQgdGhlIGZvbGRlciBleGlzdHMgYXMgcGVyIHRoZSBlcnJvciBtZXNzYWdlLlxyXG4gICAgICAgICAgICByZXR1cm47IFxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBGb3IgYW55IG90aGVyIGVycm9ycywgb3IgaWYgdGhlIHNwZWNpZmljIFwiZm9sZGVyIGFscmVhZHkgZXhpc3RzXCIgbWVzc2FnZSB3YXNuJ3QgZm91bmQuXHJcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGVuc3VyZSBkaXJlY3RvcnkgJHtkaXJQYXRofSBleGlzdHM6YCwgZSk7XHJcbiAgICAgICAgdGhyb3cgZTsgLy8gUmUtdGhyb3cgb3RoZXIgZXJyb3JzXHJcbiAgICB9XHJcbn1cclxuXHJcbiAgYXN5bmMgbG9hZEhpc3RvcnkoKTogUHJvbWlzZTxDaGF0TWVzc2FnZVtdPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAvLyBVc2UgYWRhcHRlci5leGlzdHMgZm9yIHJlbGlhYmxlIGZpbGUgZXhpc3RlbmNlIGNoZWNrXHJcbiAgICAgIGNvbnN0IGV4aXN0cyA9IGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5leGlzdHModGhpcy5oaXN0b3J5RmlsZVBhdGgpO1xyXG4gICAgICBpZiAoZXhpc3RzKSB7XHJcbiAgICAgICAgLy8gVXNlIGFkYXB0ZXIucmVhZCBmb3IgZGlyZWN0IGZpbGUgYWNjZXNzXHJcbiAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5yZWFkKHRoaXMuaGlzdG9yeUZpbGVQYXRoKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgdGhpcy5oaXN0b3J5ID0gSlNPTi5wYXJzZShkYXRhKSBhcyBDaGF0TWVzc2FnZVtdO1xyXG4gICAgICAgIH0gY2F0Y2ggKHBhcnNlRXJyb3IpIHtcclxuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBwYXJzZSBjaGF0IGhpc3Rvcnk6JywgcGFyc2VFcnJvcik7XHJcbiAgICAgICAgICB0aGlzLmhpc3RvcnkgPSBbXTtcclxuICAgICAgICB9XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhpcy5oaXN0b3J5ID0gW107XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgY29uc29sZS5lcnJvcignRmFpbGVkIHRvIGxvYWQgY2hhdCBoaXN0b3J5OicsIGUpO1xyXG4gICAgICB0aGlzLmhpc3RvcnkgPSBbXTtcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzLmhpc3Rvcnk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBhZGRNZXNzYWdlKG1lc3NhZ2U6IENoYXRNZXNzYWdlKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBjb25zdCBjdXJyZW50SGlzdG9yeSA9IGF3YWl0IHRoaXMubG9hZEhpc3RvcnkoKTtcclxuICAgIGN1cnJlbnRIaXN0b3J5LnB1c2gobWVzc2FnZSk7XHJcbiAgICB0aGlzLmhpc3RvcnkgPSBjdXJyZW50SGlzdG9yeTtcclxuICAgIGF3YWl0IHRoaXMuc2F2ZUhpc3RvcnkoKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGdldEhpc3RvcnkoKTogUHJvbWlzZTxDaGF0TWVzc2FnZVtdPiB7XHJcbiAgICByZXR1cm4gYXdhaXQgdGhpcy5sb2FkSGlzdG9yeSgpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgY2xlYXJIaXN0b3J5KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdGhpcy5oaXN0b3J5ID0gW107XHJcbiAgICBhd2FpdCB0aGlzLnNhdmVIaXN0b3J5KCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBkZWxldGVNZXNzYWdlKHRpbWVzdGFtcDogc3RyaW5nLCBzZW5kZXI6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCB0aGlzLmxvYWRIaXN0b3J5KCk7XHJcbiAgICBjb25zdCBpbmRleCA9IHRoaXMuaGlzdG9yeS5maW5kSW5kZXgobXNnID0+IFxyXG4gICAgICBtc2cudGltZXN0YW1wID09PSB0aW1lc3RhbXAgJiYgXHJcbiAgICAgIG1zZy5zZW5kZXIgPT09IHNlbmRlciAmJiBcclxuICAgICAgbXNnLmNvbnRlbnQgPT09IGNvbnRlbnRcclxuICAgICk7XHJcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgIHRoaXMuaGlzdG9yeS5zcGxpY2UoaW5kZXgsIDEpO1xyXG4gICAgICBhd2FpdCB0aGlzLnNhdmVIaXN0b3J5KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBhc3luYyB1cGRhdGVNZXNzYWdlKHRpbWVzdGFtcDogc3RyaW5nLCBzZW5kZXI6IHN0cmluZywgb2xkQ29udGVudDogc3RyaW5nLCBuZXdDb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIGF3YWl0IHRoaXMubG9hZEhpc3RvcnkoKTtcclxuICAgIGNvbnN0IG1lc3NhZ2UgPSB0aGlzLmhpc3RvcnkuZmluZChtc2cgPT4gXHJcbiAgICAgIG1zZy50aW1lc3RhbXAgPT09IHRpbWVzdGFtcCAmJiBcclxuICAgICAgbXNnLnNlbmRlciA9PT0gc2VuZGVyICYmIFxyXG4gICAgICBtc2cuY29udGVudCA9PT0gb2xkQ29udGVudFxyXG4gICAgKTtcclxuICAgIGlmIChtZXNzYWdlKSB7XHJcbiAgICAgIG1lc3NhZ2UuY29udGVudCA9IG5ld0NvbnRlbnQ7XHJcbiAgICAgIGF3YWl0IHRoaXMuc2F2ZUhpc3RvcnkoKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIGNvbnNvbGUud2FybihcIkNoYXRIaXN0b3J5TWFuYWdlcjogdXBkYXRlTWVzc2FnZSBkaWQgbm90IGZpbmQgYSBtYXRjaGluZyBtZXNzYWdlIHRvIHVwZGF0ZS5cIiwge3RpbWVzdGFtcCwgc2VuZGVyLCBvbGRDb250ZW50fSk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGFzeW5jIHNhdmVIaXN0b3J5KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgYXdhaXQgdGhpcy5lbnN1cmVEaXJlY3RvcnlFeGlzdHMoKTtcclxuICAgICAgY29uc3QgZGF0YSA9IEpTT04uc3RyaW5naWZ5KHRoaXMuaGlzdG9yeSwgbnVsbCwgMik7XHJcblxyXG4gICAgICAvLyBDaGVjayBpZiBwYXRoIGV4aXN0cyBhbmQgaXMgYSBmb2xkZXIgKHdoaWNoIHdvdWxkIGJlIGFuIGVycm9yKVxyXG4gICAgICBjb25zdCBhYnN0cmFjdFRhcmdldCA9IHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHRoaXMuaGlzdG9yeUZpbGVQYXRoKTtcclxuICAgICAgaWYgKGFic3RyYWN0VGFyZ2V0IGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgUGF0aCAke3RoaXMuaGlzdG9yeUZpbGVQYXRofSBpcyBhIGRpcmVjdG9yeSwgbm90IGEgZmlsZS5gKTtcclxuICAgICAgfVxyXG5cclxuICAgICAgLy8gVXNlIGFkYXB0ZXIud3JpdGUgd2hpY2ggaGFuZGxlcyBib3RoIGNyZWF0aW9uIGFuZCBtb2RpZmljYXRpb24gYXRvbWljYWxseVxyXG4gICAgICBhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIud3JpdGUodGhpcy5oaXN0b3J5RmlsZVBhdGgsIGRhdGEpO1xyXG5cclxuICAgICAgLy8gQWZ0ZXIgc3VjY2Vzc2Z1bCB3cml0ZSwgdXBkYXRlIHZhdWx0IGNhY2hlIGlmIG5lZWRlZFxyXG4gICAgICBpZiAoIWFic3RyYWN0VGFyZ2V0IHx8ICEoYWJzdHJhY3RUYXJnZXQgaW5zdGFuY2VvZiBURmlsZSkpIHtcclxuICAgICAgICAvLyBGb3JjZSB2YXVsdCB0byByZWNvZ25pemUgdGhlIG5ldyBmaWxlIGluIGl0cyBjYWNoZVxyXG4gICAgICAgIGF3YWl0IHRoaXMudmF1bHQuYWRhcHRlci5leGlzdHModGhpcy5oaXN0b3J5RmlsZVBhdGgpO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBzYXZlIGhpc3RvcnkgdG8gJHt0aGlzLmhpc3RvcnlGaWxlUGF0aH06YCwgZSk7XHJcbiAgICAgIHRocm93IGU7XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBNeVBsdWdpbiBmcm9tICcuLi8uLi9tYWluJztcclxuaW1wb3J0IHsgY3JlYXRlUHJvdmlkZXIgfSBmcm9tICcuLi8uLi8uLi9wcm92aWRlcnMnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFNldHRpbmdzTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgICBwbHVnaW46IE15UGx1Z2luO1xyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KCdBSSBNb2RlbCBTZXR0aW5ncycpO1xyXG4gICAgfVxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnYWktc2V0dGluZ3MtbW9kYWwnKTtcclxuXHJcbiAgICAgICAgLy8gU2V0dGluZ3MgU2VjdGlvblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdBSSBNb2RlbCBTZXR0aW5ncycgfSk7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdocicpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdTeXN0ZW0gTWVzc2FnZScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdTZXQgdGhlIHN5c3RlbSBtZXNzYWdlIGZvciB0aGUgQUknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC4nKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnN5c3RlbU1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3lzdGVtTWVzc2FnZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbmFibGUgU3RyZWFtaW5nJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0VuYWJsZSBvciBkaXNhYmxlIHN0cmVhbWluZyBmb3IgY29tcGxldGlvbnMnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVTdHJlYW1pbmcpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlU3RyZWFtaW5nID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1RlbXBlcmF0dXJlJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1NldCB0aGUgcmFuZG9tbmVzcyBvZiB0aGUgbW9kZWxcXCdzIG91dHB1dCAoMC0xKScpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLCAxLCAwLjEpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGVyYXR1cmUpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBlcmF0dXJlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaHInKTtcclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiAnRGF0ZSBTZXR0aW5ncycgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0luY2x1ZGUgRGF0ZSB3aXRoIFN5c3RlbSBNZXNzYWdlJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0FkZCB0aGUgY3VycmVudCBkYXRlIHRvIHRoZSBzeXN0ZW0gbWVzc2FnZScpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluY2x1ZGVEYXRlV2l0aFN5c3RlbU1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZURhdGVXaXRoU3lzdGVtTWVzc2FnZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdJbmNsdWRlIFRpbWUgd2l0aCBTeXN0ZW0gTWVzc2FnZScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdBZGQgdGhlIGN1cnJlbnQgdGltZSBhbG9uZyB3aXRoIHRoZSBkYXRlIHRvIHRoZSBzeXN0ZW0gbWVzc2FnZScpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluY2x1ZGVUaW1lV2l0aFN5c3RlbU1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZVRpbWVXaXRoU3lzdGVtTWVzc2FnZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2hyJyk7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoNCcsIHsgdGV4dDogJ05vdGUgUmVmZXJlbmNlIFNldHRpbmdzJyB9KTtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbmFibGUgT2JzaWRpYW4gTGlua3MnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnUmVhZCBPYnNpZGlhbiBsaW5rcyBpbiBtZXNzYWdlcyB1c2luZyBbW2ZpbGVuYW1lXV0gc3ludGF4JylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlT2JzaWRpYW5MaW5rcylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVPYnNpZGlhbkxpbmtzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0VuYWJsZSBDb250ZXh0IE5vdGVzJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0F0dGFjaCBzcGVjaWZpZWQgbm90ZSBjb250ZW50IHRvIGNoYXQgbWVzc2FnZXMnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb250ZXh0Tm90ZXMpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ29udGV4dE5vdGVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbnRleHROb3Rlc0NvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ2NvbnRleHQtbm90ZXMtY29udGFpbmVyJyk7XHJcbiAgICAgICAgY29udGV4dE5vdGVzQ29udGFpbmVyLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcyNHB4JztcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGV4dE5vdGVzQ29udGFpbmVyKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ29udGV4dCBOb3RlcycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdOb3RlcyB0byBhdHRhY2ggYXMgY29udGV4dCAoc3VwcG9ydHMgW1tmaWxlbmFtZV1dIGFuZCBbW2ZpbGVuYW1lI2hlYWRlcl1dIHN5bnRheCknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCdbW05vdGUgTmFtZV1dXFxuW1tBbm90aGVyIE5vdGUjSGVhZGVyXV0nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZXh0Tm90ZXMgfHwgJycpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZXh0Tm90ZXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDQ7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdFeHBhbmQgTGlua2VkIE5vdGVzIFJlY3Vyc2l2ZWx5JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0lmIGVuYWJsZWQsIHdoZW4gZmV0Y2hpbmcgYSBub3RlLCBhbHNvIGZldGNoIGFuZCBleHBhbmQgbGlua3Mgd2l0aGluIHRoYXQgbm90ZSByZWN1cnNpdmVseSAocHJldmVudHMgaW5maW5pdGUgbG9vcHMpLicpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGFuZExpbmtlZE5vdGVzUmVjdXJzaXZlbHkgPz8gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwYW5kTGlua2VkTm90ZXNSZWN1cnNpdmVseSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2hyJyk7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMicsIHsgdGV4dDogJ1Byb3ZpZGVyIFNldHRpbmdzJyB9KTtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdBSSBQcm92aWRlcicpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdDaG9vc2Ugd2hpY2ggQUkgcHJvdmlkZXIgdG8gdXNlJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZE9wdGlvbignb3BlbmFpJywgJ09wZW5BSSAoQ2hhdEdQVCknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2FudGhyb3BpYycsICdBbnRocm9waWMgKENsYXVkZSknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaScsICdHb29nbGUgKEdlbWluaSknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ29sbGFtYScsICdPbGxhbWEgKExvY2FsIEFJKScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6ICdvcGVuYWknIHwgJ2FudGhyb3BpYycgfCAnZ2VtaW5pJyB8ICdvbGxhbWEnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAvLyBQcm92aWRlci1zcGVjaWZpYyBzZXR0aW5ncyBhbmQgdGVzdCBjb25uZWN0aW9uXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlcikge1xyXG4gICAgICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm92aWRlclNldHRpbmdzKGNvbnRlbnRFbCwgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MsICdPcGVuQUknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBjcmVhdGVQcm92aWRlcih0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvdmlkZXIudGVzdENvbm5lY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0Lm1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMgPSByZXN1bHQubW9kZWxzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShyZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25PcGVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UocmVzdWx0Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FudGhyb3BpYyc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlclByb3ZpZGVyU2V0dGluZ3MoY29udGVudEVsLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNTZXR0aW5ncywgJ0FudGhyb3BpYycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IGNyZWF0ZVByb3ZpZGVyKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm92aWRlci50ZXN0Q29ubmVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQubW9kZWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzLmF2YWlsYWJsZU1vZGVscyA9IHJlc3VsdC5tb2RlbHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNTZXR0aW5ncy5sYXN0VGVzdFJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHJlc3VsdC5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbk9wZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNTZXR0aW5ncy5sYXN0VGVzdFJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShyZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZ2VtaW5pJzpcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyUHJvdmlkZXJTZXR0aW5ncyhjb250ZW50RWwsIHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbWluaVNldHRpbmdzLCAnR2VtaW5pJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gY3JlYXRlUHJvdmlkZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb3ZpZGVyLnRlc3RDb25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5tb2RlbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzID0gcmVzdWx0Lm1vZGVscztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbWluaVNldHRpbmdzLmxhc3RUZXN0UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UocmVzdWx0Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbWluaVNldHRpbmdzLmxhc3RUZXN0UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHJlc3VsdC5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdvbGxhbWEnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJQcm92aWRlclNldHRpbmdzKGNvbnRlbnRFbCwgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3MsICdPbGxhbWEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBjcmVhdGVQcm92aWRlcih0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvdmlkZXIudGVzdENvbm5lY3Rpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0Lm1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vbGxhbWFTZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMgPSByZXN1bHQubW9kZWxzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShyZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25PcGVuKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UocmVzdWx0Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gQWRkIGhlbHAgdGV4dCBmb3IgT2xsYW1hIHNldHVwXHJcbiAgICAgICAgICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxyXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ICdUbyB1c2UgT2xsYW1hOidcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc3RlcHMgPSBjb250ZW50RWwuY3JlYXRlRWwoJ29sJyk7XHJcbiAgICAgICAgICAgICAgICBzdGVwcy5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICdJbnN0YWxsIE9sbGFtYSBmcm9tIGh0dHBzOi8vb2xsYW1hLmFpJyB9KTtcclxuICAgICAgICAgICAgICAgIHN0ZXBzLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1N0YXJ0IHRoZSBPbGxhbWEgc2VydmVyJyB9KTtcclxuICAgICAgICAgICAgICAgIHN0ZXBzLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1B1bGwgbW9kZWxzIHVzaW5nIFwib2xsYW1hIHB1bGwgbW9kZWwtbmFtZVwiJyB9KTtcclxuICAgICAgICAgICAgICAgIHN0ZXBzLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1Rlc3QgY29ubmVjdGlvbiB0byBzZWUgYXZhaWxhYmxlIG1vZGVscycgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJQcm92aWRlclNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgc2V0dGluZ3M6IGFueSwgcHJvdmlkZXJOYW1lOiBzdHJpbmcsIHRlc3RDb25uZWN0aW9uQ2FsbGJhY2s6ICgpID0+IFByb21pc2U8dm9pZD4pIHtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1Rlc3QgQ29ubmVjdGlvbicpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKGBWZXJpZnkgeW91ciBBUEkga2V5IGFuZCBmZXRjaCBhdmFpbGFibGUgbW9kZWxzIGZvciAke3Byb3ZpZGVyTmFtZX1gKVxyXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cclxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdUZXN0JylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdGluZy4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0ZXN0Q29ubmVjdGlvbkNhbGxiYWNrKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmxhc3RUZXN0UmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzZXR0aW5ncy5sYXN0VGVzdFJlc3VsdC50aW1lc3RhbXApO1xyXG4gICAgICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogYExhc3QgdGVzdDogJHtkYXRlLnRvTG9jYWxlU3RyaW5nKCl9IC0gJHtzZXR0aW5ncy5sYXN0VGVzdFJlc3VsdC5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICBjbHM6IHNldHRpbmdzLmxhc3RUZXN0UmVzdWx0LnN1Y2Nlc3MgPyAnc3VjY2VzcycgOiAnZXJyb3InXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdNb2RlbCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKGBDaG9vc2UgdGhlICR7cHJvdmlkZXJOYW1lfSBtb2RlbCB0byB1c2VgKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb2RlbCBvZiBzZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24obW9kZWwsIG1vZGVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHNldHRpbmdzLm1vZGVsKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubW9kZWwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufSIsICJpbXBvcnQgeyBBcHAsIE1hcmtkb3duUmVuZGVyZXIsIE5vdGljZSwgQ29tcG9uZW50IH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBNZXNzYWdlIGFzIE1lc3NhZ2VUeXBlIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBjcmVhdGVBY3Rpb25CdXR0b24sIGNvcHlUb0NsaXBib2FyZCB9IGZyb20gJy4vQnV0dG9ucyc7XHJcbmltcG9ydCB7IENvbmZpcm1hdGlvbk1vZGFsIH0gZnJvbSAnLi9Db25maXJtYXRpb25Nb2RhbCc7XHJcblxyXG4vKipcclxuICogQmFzZSBNZXNzYWdlIGludGVyZmFjZSBmb3IgY2hhdCBtZXNzYWdlc1xyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBJTWVzc2FnZSB7XHJcbiAgICByb2xlOiBNZXNzYWdlVHlwZVsncm9sZSddO1xyXG4gICAgY29udGVudDogc3RyaW5nO1xyXG4gICAgcmVuZGVyKCk6IFByb21pc2U8dm9pZD47XHJcbiAgICBzZXRDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQ7XHJcbiAgICBnZXRDb250ZW50KCk6IHN0cmluZztcclxuICAgIGRlbGV0ZSgpOiB2b2lkO1xyXG4gICAgZWRpdCgpOiB2b2lkO1xyXG4gICAgY29weSgpOiBQcm9taXNlPHZvaWQ+O1xyXG4gICAgcmVnZW5lcmF0ZSgpOiBQcm9taXNlPHZvaWQ+O1xyXG59XHJcblxyXG4vKipcclxuICogQmFzZSBNZXNzYWdlIGNsYXNzIGltcGxlbWVudGluZyBzaGFyZWQgZnVuY3Rpb25hbGl0eVxyXG4gKi9cclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIE1lc3NhZ2UgZXh0ZW5kcyBDb21wb25lbnQgaW1wbGVtZW50cyBJTWVzc2FnZSB7XHJcbiAgICBwcm90ZWN0ZWQgZWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcm90ZWN0ZWQgY29udGVudEVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJvdGVjdGVkIGFjdGlvbnNFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgIHByb3RlY3RlZCByYXdDb250ZW50OiBzdHJpbmc7XHJcbiAgICBwcm90ZWN0ZWQgYXBwOiBBcHA7XHJcbiAgICBwdWJsaWMgcm9sZTogTWVzc2FnZVR5cGVbJ3JvbGUnXTtcclxuICAgIHB1YmxpYyBjb250ZW50OiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoXHJcbiAgICAgICAgYXBwOiBBcHAsXHJcbiAgICAgICAgcm9sZTogTWVzc2FnZVR5cGVbJ3JvbGUnXSxcclxuICAgICAgICBjb250ZW50OiBzdHJpbmdcclxuICAgICkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XHJcbiAgICAgICAgdGhpcy5yb2xlID0gcm9sZTtcclxuICAgICAgICB0aGlzLmNvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgICAgIHRoaXMucmF3Q29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ3JlYXRlIGJhc2UgbWVzc2FnZSBzdHJ1Y3R1cmVcclxuICAgICAgICB0aGlzLmVsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuYWRkQ2xhc3MoJ2FpLWNoYXQtbWVzc2FnZScsIHJvbGUpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENyZWF0ZSBjb250YWluZXIgZm9yIGNvbnRlbnQgYW5kIGFjdGlvbnNcclxuICAgICAgICBjb25zdCBjb250YWluZXIgPSB0aGlzLmVsZW1lbnQuY3JlYXRlRGl2KCdtZXNzYWdlLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENyZWF0ZSBjb250ZW50IGVsZW1lbnRcclxuICAgICAgICB0aGlzLmNvbnRlbnRFbGVtZW50ID0gY29udGFpbmVyLmNyZWF0ZURpdignbWVzc2FnZS1jb250ZW50Jyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ3JlYXRlIGFjdGlvbnMgY29udGFpbmVyXHJcbiAgICAgICAgdGhpcy5hY3Rpb25zRWxlbWVudCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ21lc3NhZ2UtYWN0aW9ucycpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEFkZCBob3ZlciBiZWhhdmlvclxyXG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNFbGVtZW50LnJlbW92ZUNsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zRWxlbWVudC5hZGRDbGFzcygndmlzaWJsZScpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNFbGVtZW50LnJlbW92ZUNsYXNzKCd2aXNpYmxlJyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc0VsZW1lbnQuYWRkQ2xhc3MoJ2hpZGRlbicpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGFic3RyYWN0IHJlZ2VuZXJhdGUoKTogUHJvbWlzZTx2b2lkPjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgRE9NIGVsZW1lbnQgZm9yIHRoaXMgbWVzc2FnZVxyXG4gICAgICovXHJcbiAgICBnZXRFbGVtZW50KCk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5lbGVtZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IHRoZSByYXcgY29udGVudCBvZiB0aGUgbWVzc2FnZVxyXG4gICAgICovXHJcbiAgICBnZXRDb250ZW50KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMucmF3Q29udGVudDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFVwZGF0ZSB0aGUgbWVzc2FnZSBjb250ZW50XHJcbiAgICAgKi9cclxuICAgIHNldENvbnRlbnQoY29udGVudDogc3RyaW5nKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5yYXdDb250ZW50ID0gY29udGVudDtcclxuICAgICAgICB0aGlzLnJlbmRlcigpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVyIHRoZSBtZXNzYWdlIGNvbnRlbnQgd2l0aCBNYXJrZG93blxyXG4gICAgICovXHJcbiAgICBhc3luYyByZW5kZXIoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudC5lbXB0eSgpO1xyXG4gICAgICAgIGF3YWl0IE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKFxyXG4gICAgICAgICAgICB0aGlzLmFwcCxcclxuICAgICAgICAgICAgdGhpcy5yYXdDb250ZW50LFxyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbGVtZW50LFxyXG4gICAgICAgICAgICAnJyxcclxuICAgICAgICAgICAgdGhpc1xyXG4gICAgICAgICkuY2F0Y2goKGVycm9yKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ01hcmtkb3duIHJlbmRlcmluZyBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsZW1lbnQudGV4dENvbnRlbnQgPSB0aGlzLnJhd0NvbnRlbnQ7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEZWxldGUgdGhpcyBtZXNzYWdlXHJcbiAgICAgKi9cclxuICAgIGRlbGV0ZSgpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFbmFibGUgZWRpdGluZyBvZiB0aGUgbWVzc2FnZVxyXG4gICAgICovXHJcbiAgICBlZGl0KCk6IHZvaWQge1xyXG4gICAgICAgIGlmICh0aGlzLmNvbnRlbnRFbGVtZW50Lmhhc0NsYXNzKCdlZGl0aW5nJykpIHtcclxuICAgICAgICAgICAgLy8gU2F2ZSBlZGl0c1xyXG4gICAgICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IHRoaXMuY29udGVudEVsZW1lbnQucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKTtcclxuICAgICAgICAgICAgaWYgKHRleHRhcmVhKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldENvbnRlbnQodGV4dGFyZWEudmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudC5yZW1vdmVDbGFzcygnZWRpdGluZycpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gU3dpdGNoIHRvIGVkaXQgbW9kZVxyXG4gICAgICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3RleHRhcmVhJyk7XHJcbiAgICAgICAgICAgIHRleHRhcmVhLnZhbHVlID0gdGhpcy5yYXdDb250ZW50O1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbGVtZW50LmVtcHR5KCk7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsZW1lbnQuYXBwZW5kQ2hpbGQodGV4dGFyZWEpO1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbGVtZW50LmFkZENsYXNzKCdlZGl0aW5nJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29weSBtZXNzYWdlIGNvbnRlbnQgdG8gY2xpcGJvYXJkXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGNvcHkoKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgaWYgKHRoaXMucmF3Q29udGVudC50cmltKCkgPT09ICcnKSB7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGNvbnRlbnQgdG8gY29weScpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRoaXMucmF3Q29udGVudCk7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0NvcGllZCB0byBjbGlwYm9hcmQnKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gY29weSB0byBjbGlwYm9hcmQnKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2xpcGJvYXJkIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGUgYSBtZXNzYWdlIGVsZW1lbnQgZm9yIHRoZSBjaGF0XHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlTWVzc2FnZUVsZW1lbnQoXHJcbiAgICBhcHA6IEFwcCxcclxuICAgIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnLFxyXG4gICAgY29udGVudDogc3RyaW5nLFxyXG4gICAgY2hhdEhpc3RvcnlNYW5hZ2VyOiBhbnksXHJcbiAgICBwbHVnaW46IGFueSxcclxuICAgIHJlZ2VuZXJhdGVDYWxsYmFjazogKG1lc3NhZ2VFbDogSFRNTEVsZW1lbnQpID0+IHZvaWQsXHJcbiAgICBwYXJlbnRDb21wb25lbnQ6IENvbXBvbmVudFxyXG4pOiBIVE1MRWxlbWVudCB7XHJcbiAgICBjb25zdCBtZXNzYWdlRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIG1lc3NhZ2VFbC5hZGRDbGFzcygnYWktY2hhdC1tZXNzYWdlJywgcm9sZSk7XHJcbiAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gbWVzc2FnZUVsLmNyZWF0ZURpdignbWVzc2FnZS1jb250YWluZXInKTtcclxuICAgIGNvbnN0IGNvbnRlbnRFbCA9IG1lc3NhZ2VDb250YWluZXIuY3JlYXRlRGl2KCdtZXNzYWdlLWNvbnRlbnQnKTtcclxuICAgIG1lc3NhZ2VFbC5kYXRhc2V0LnJhd0NvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgbWVzc2FnZUVsLmRhdGFzZXQudGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgTWFya2Rvd25SZW5kZXJlci5yZW5kZXIoYXBwLCBjb250ZW50LCBjb250ZW50RWwsICcnLCBwYXJlbnRDb21wb25lbnQpLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgIGNvbnRlbnRFbC50ZXh0Q29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IGFjdGlvbnNFbCA9IG1lc3NhZ2VDb250YWluZXIuY3JlYXRlRGl2KCdtZXNzYWdlLWFjdGlvbnMnKTtcclxuICAgIGFjdGlvbnNFbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgIG1lc3NhZ2VFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWVudGVyJywgKCkgPT4ge1xyXG4gICAgICAgIGFjdGlvbnNFbC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICBhY3Rpb25zRWwuY2xhc3NMaXN0LmFkZCgndmlzaWJsZScpO1xyXG4gICAgfSk7XHJcbiAgICBtZXNzYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcclxuICAgICAgICBhY3Rpb25zRWwuY2xhc3NMaXN0LnJlbW92ZSgndmlzaWJsZScpO1xyXG4gICAgICAgIGFjdGlvbnNFbC5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgIH0pO1xyXG4gICAgLy8gQ29weSBidXR0b25cclxuICAgIGFjdGlvbnNFbC5hcHBlbmRDaGlsZChjcmVhdGVBY3Rpb25CdXR0b24oJ0NvcHknLCAnQ29weSBtZXNzYWdlJywgKCkgPT4ge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRDb250ZW50ID0gbWVzc2FnZUVsLmRhdGFzZXQucmF3Q29udGVudCB8fCAnJztcclxuICAgICAgICBpZiAoY3VycmVudENvbnRlbnQudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBjb250ZW50IHRvIGNvcHknKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb3B5VG9DbGlwYm9hcmQoY3VycmVudENvbnRlbnQpO1xyXG4gICAgfSkpO1xyXG4gICAgLy8gRWRpdCBidXR0b25cclxuICAgIGFjdGlvbnNFbC5hcHBlbmRDaGlsZChjcmVhdGVBY3Rpb25CdXR0b24oJ0VkaXQnLCAnRWRpdCBtZXNzYWdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIGlmICghY29udGVudEVsLmhhc0NsYXNzKCdlZGl0aW5nJykpIHtcclxuICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9IG1lc3NhZ2VFbC5kYXRhc2V0LnJhd0NvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgICAgIHRleHRhcmVhLmNsYXNzTmFtZSA9ICdtZXNzYWdlLWNvbnRlbnQgZWRpdGluZyc7XHJcbiAgICAgICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgICAgICBjb250ZW50RWwuYXBwZW5kQ2hpbGQodGV4dGFyZWEpO1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgICAgICAgICBjb250ZW50RWwuYWRkQ2xhc3MoJ2VkaXRpbmcnKTtcclxuICAgICAgICAgICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGFzeW5jIChlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFbnRlcicgJiYgIWUuc2hpZnRLZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dGFyZWEuYmx1cigpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcignYmx1cicsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9sZENvbnRlbnQgPSBtZXNzYWdlRWwuZGF0YXNldC5yYXdDb250ZW50O1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3Q29udGVudCA9IHRleHRhcmVhLnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBjaGF0SGlzdG9yeU1hbmFnZXIudXBkYXRlTWVzc2FnZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUVsLmRhdGFzZXQudGltZXN0YW1wIHx8IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUVsLmNsYXNzTGlzdC5jb250YWlucygndXNlcicpID8gJ3VzZXInIDogJ2Fzc2lzdGFudCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9sZENvbnRlbnQgfHwgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ld0NvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VFbC5kYXRhc2V0LnJhd0NvbnRlbnQgPSBuZXdDb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKGFwcCwgbmV3Q29udGVudCwgY29udGVudEVsLCAnJywgcGFyZW50Q29tcG9uZW50KTtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50RWwucmVtb3ZlQ2xhc3MoJ2VkaXRpbmcnKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gc2F2ZSBlZGl0ZWQgbWVzc2FnZS4nKTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlRWwuZGF0YXNldC5yYXdDb250ZW50ID0gb2xkQ29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlcihhcHAsIG9sZENvbnRlbnQgfHwgJycsIGNvbnRlbnRFbCwgJycsIHBhcmVudENvbXBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLnJlbW92ZUNsYXNzKCdlZGl0aW5nJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH0pKTtcclxuICAgIC8vIERlbGV0ZSBidXR0b25cclxuICAgIGFjdGlvbnNFbC5hcHBlbmRDaGlsZChjcmVhdGVBY3Rpb25CdXR0b24oJ0RlbGV0ZScsICdEZWxldGUgbWVzc2FnZScsICgpID0+IHtcclxuICAgICAgICBjb25zdCBtb2RhbCA9IG5ldyBDb25maXJtYXRpb25Nb2RhbChhcHAsICdEZWxldGUgbWVzc2FnZScsICdBcmUgeW91IHN1cmUgeW91IHdhbnQgdG8gZGVsZXRlIHRoaXMgbWVzc2FnZT8nLCAoY29uZmlybWVkOiBib29sZWFuKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChjb25maXJtZWQpIHtcclxuICAgICAgICAgICAgICAgIGNoYXRIaXN0b3J5TWFuYWdlci5kZWxldGVNZXNzYWdlKFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VFbC5kYXRhc2V0LnRpbWVzdGFtcCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUVsLmNsYXNzTGlzdC5jb250YWlucygndXNlcicpID8gJ3VzZXInIDogJ2Fzc2lzdGFudCcsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUVsLmRhdGFzZXQucmF3Q29udGVudCB8fCAnJ1xyXG4gICAgICAgICAgICAgICAgKS50aGVuKCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlRWwucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIGRlbGV0ZSBtZXNzYWdlIGZyb20gaGlzdG9yeS4nKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgbW9kYWwub3BlbigpO1xyXG4gICAgfSkpO1xyXG4gICAgLy8gUmVnZW5lcmF0ZSBidXR0b25cclxuICAgIGFjdGlvbnNFbC5hcHBlbmRDaGlsZChjcmVhdGVBY3Rpb25CdXR0b24oJ1JlZ2VuZXJhdGUnLCAnUmVnZW5lcmF0ZSB0aGlzIHJlc3BvbnNlJywgKCkgPT4ge1xyXG4gICAgICAgIHJlZ2VuZXJhdGVDYWxsYmFjayhtZXNzYWdlRWwpO1xyXG4gICAgfSkpO1xyXG4gICAgXHJcbiAgICBtZXNzYWdlQ29udGFpbmVyLmFwcGVuZENoaWxkKGFjdGlvbnNFbCk7XHJcbiAgICByZXR1cm4gbWVzc2FnZUVsO1xyXG59XHJcbiIsICJpbXBvcnQgeyBDb21wb25lbnQsIEJ1dHRvbkNvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSUJ1dHRvbkNvbmZpZyB7XHJcbiAgICBsYWJlbDogc3RyaW5nO1xyXG4gICAgdG9vbHRpcDogc3RyaW5nO1xyXG4gICAgb25DbGljazogKCkgPT4gdm9pZDtcclxuICAgIGNsYXNzTmFtZT86IHN0cmluZztcclxuICAgIGlzSGlkZGVuPzogYm9vbGVhbjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEJ1dHRvbnMgY29tcG9uZW50IGZvciBoYW5kbGluZyBhbGwgYnV0dG9uIGNyZWF0aW9uIGFuZCBzdHlsaW5nXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQnV0dG9ucyBleHRlbmRzIENvbXBvbmVudCB7XHJcbiAgICBwcml2YXRlIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcml2YXRlIHNlbmRCdXR0b246IEJ1dHRvbkNvbXBvbmVudDtcclxuICAgIHByaXZhdGUgc3RvcEJ1dHRvbjogQnV0dG9uQ29tcG9uZW50O1xyXG4gICAgcHJpdmF0ZSBjbGVhckJ1dHRvbjogQnV0dG9uQ29tcG9uZW50O1xyXG4gICAgcHJpdmF0ZSBzZXR0aW5nc0J1dHRvbjogQnV0dG9uQ29tcG9uZW50O1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICB0aGlzLmNvbnRhaW5lci5hZGRDbGFzcygnYWktY2hhdC1idXR0b25zJyk7XHJcbiAgICAgICAgdGhpcy5zZW5kQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudCh0aGlzLmNvbnRhaW5lcilcclxuICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1NlbmQnKVxyXG4gICAgICAgICAgICAuc2V0Q2xhc3MoJ21vZC1jdGEnKTtcclxuICAgICAgICB0aGlzLnNlbmRCdXR0b24uYnV0dG9uRWwuYWRkQ2xhc3MoJ2hpZGRlbi1idXR0b24nKTtcclxuXHJcbiAgICAgICAgdGhpcy5zdG9wQnV0dG9uID0gbmV3IEJ1dHRvbkNvbXBvbmVudCh0aGlzLmNvbnRhaW5lcilcclxuICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1N0b3AnKTtcclxuICAgICAgICB0aGlzLnN0b3BCdXR0b24uYnV0dG9uRWwuYWRkQ2xhc3MoJ2hpZGRlbi1idXR0b24nKTtcclxuXHJcbiAgICAgICAgdGhpcy5jbGVhckJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQodGhpcy5jb250YWluZXIpXHJcbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdDbGVhcicpO1xyXG4gICAgICAgIHRoaXMuY2xlYXJCdXR0b24uYnV0dG9uRWwuYWRkQ2xhc3MoJ2hpZGRlbi1idXR0b24nKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc0J1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQodGhpcy5jb250YWluZXIpXHJcbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdTZXR0aW5ncycpO1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NCdXR0b24uYnV0dG9uRWwuYWRkQ2xhc3MoJ2hpZGRlbi1idXR0b24nKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgYnV0dG9uIGNvbnRhaW5lciBlbGVtZW50XHJcbiAgICAgKi9cclxuICAgIGdldENvbnRhaW5lcigpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY29udGFpbmVyO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNlbmRCdXR0b24oKTogQnV0dG9uQ29tcG9uZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZW5kQnV0dG9uO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFN0b3BCdXR0b24oKTogQnV0dG9uQ29tcG9uZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zdG9wQnV0dG9uO1xyXG4gICAgfVxyXG5cclxuICAgIGdldENsZWFyQnV0dG9uKCk6IEJ1dHRvbkNvbXBvbmVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuY2xlYXJCdXR0b247XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0U2V0dGluZ3NCdXR0b24oKTogQnV0dG9uQ29tcG9uZW50IHtcclxuICAgICAgICByZXR1cm4gdGhpcy5zZXR0aW5nc0J1dHRvbjtcclxuICAgIH1cclxuXHJcbiAgICBzaG93U2VuZEJ1dHRvbigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlbmRCdXR0b24uYnV0dG9uRWwucmVtb3ZlQ2xhc3MoJ2hpZGRlbi1idXR0b24nKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlU2VuZEJ1dHRvbigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNlbmRCdXR0b24uYnV0dG9uRWwuYWRkQ2xhc3MoJ2hpZGRlbi1idXR0b24nKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93U3RvcEJ1dHRvbigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnN0b3BCdXR0b24uYnV0dG9uRWwucmVtb3ZlQ2xhc3MoJ2hpZGRlbi1idXR0b24nKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlU3RvcEJ1dHRvbigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnN0b3BCdXR0b24uYnV0dG9uRWwuYWRkQ2xhc3MoJ2hpZGRlbi1idXR0b24nKTtcclxuICAgIH1cclxuXHJcbiAgICBzaG93Q2xlYXJCdXR0b24oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jbGVhckJ1dHRvbi5idXR0b25FbC5yZW1vdmVDbGFzcygnaGlkZGVuLWJ1dHRvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIGhpZGVDbGVhckJ1dHRvbigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLmNsZWFyQnV0dG9uLmJ1dHRvbkVsLmFkZENsYXNzKCdoaWRkZW4tYnV0dG9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd1NldHRpbmdzQnV0dG9uKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NCdXR0b24uYnV0dG9uRWwucmVtb3ZlQ2xhc3MoJ2hpZGRlbi1idXR0b24nKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlU2V0dGluZ3NCdXR0b24oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc0J1dHRvbi5idXR0b25FbC5hZGRDbGFzcygnaGlkZGVuLWJ1dHRvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGFjdGlvbiBidXR0b25zIGZvciBtZXNzYWdlcyAoY29weSwgZWRpdCwgZGVsZXRlLCByZWdlbmVyYXRlKVxyXG4gICAgICovXHJcbiAgICBjcmVhdGVNZXNzYWdlQWN0aW9ucyhidXR0b25zOiBJQnV0dG9uQ29uZmlnW10pOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgYWN0aW9uc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGFjdGlvbnNDb250YWluZXIuYWRkQ2xhc3MoJ21lc3NhZ2UtYWN0aW9ucycpO1xyXG4gICAgICAgIC8vIFJlbHkgb24gQ1NTIGZvciBkaXNwbGF5IGFuZCBob3ZlciBiZWhhdmlvclxyXG5cclxuICAgICAgICBidXR0b25zLmZvckVhY2goY29uZmlnID0+IHtcclxuICAgICAgICAgICAgY29uc3QgYnV0dG9uID0gdGhpcy5jcmVhdGVCdXR0b24oY29uZmlnKTtcclxuICAgICAgICAgICAgYWN0aW9uc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gYWN0aW9uc0NvbnRhaW5lcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSB0aGUgbWFpbiBjaGF0IGNvbnRyb2wgYnV0dG9ucyAoc2VuZCwgc3RvcCwgY29weSBhbGwsIGNsZWFyLCBzZXR0aW5ncylcclxuICAgICAqL1xyXG4gICAgY3JlYXRlQ2hhdENvbnRyb2xzKGJ1dHRvbnM6IElCdXR0b25Db25maWdbXSk6IEhUTUxFbGVtZW50IHtcclxuICAgICAgICBjb25zdCBjb250cm9sc0NvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGNvbnRyb2xzQ29udGFpbmVyLmFkZENsYXNzKCdhaS1jaGF0LWJ1dHRvbnMnKTtcclxuXHJcbiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGNvbmZpZyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuY3JlYXRlQnV0dG9uKGNvbmZpZyk7XHJcbiAgICAgICAgICAgIGlmIChjb25maWcuaXNIaWRkZW4pIHtcclxuICAgICAgICAgICAgICAgIGJ1dHRvbi5hZGRDbGFzcygnaGlkZGVuLWJ1dHRvbicpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNvbnRyb2xzQ29udGFpbmVyLmFwcGVuZENoaWxkKGJ1dHRvbik7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHJldHVybiBjb250cm9sc0NvbnRhaW5lcjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIHNpbmdsZSBidXR0b24gd2l0aCB0aGUgZ2l2ZW4gY29uZmlndXJhdGlvblxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNyZWF0ZUJ1dHRvbihjb25maWc6IElCdXR0b25Db25maWcpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uLmFkZENsYXNzKCdhaS1jaGF0LWFjdGlvbi1idXR0b24nKTtcclxuICAgICAgICBpZiAoY29uZmlnLmNsYXNzTmFtZSkge1xyXG4gICAgICAgICAgICBidXR0b24uYWRkQ2xhc3MoY29uZmlnLmNsYXNzTmFtZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCBjb25maWcudG9vbHRpcCk7XHJcblxyXG4gICAgICAgIGNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgbGFiZWxFbC50ZXh0Q29udGVudCA9IGNvbmZpZy5sYWJlbDtcclxuICAgICAgICBidXR0b24uYXBwZW5kQ2hpbGQobGFiZWxFbCk7XHJcblxyXG4gICAgICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNvbmZpZy5vbkNsaWNrKTtcclxuICAgICAgICByZXR1cm4gYnV0dG9uO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogU2hvdyBvciBoaWRlIGEgc3BlY2lmaWMgYnV0dG9uIGluIGEgY29udGFpbmVyXHJcbiAgICAgKi9cclxuICAgIHRvZ2dsZUJ1dHRvbihjb250YWluZXI6IEhUTUxFbGVtZW50LCBsYWJlbDogc3RyaW5nLCBzaG93OiBib29sZWFuKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uID0gY29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoYFthcmlhLWxhYmVsPVwiJHtsYWJlbH1cIl1gKTtcclxuICAgICAgICBpZiAoYnV0dG9uIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICAgICAgc2hvdyA/IGJ1dHRvbi5yZW1vdmVDbGFzcygnaGlkZGVuLWJ1dHRvbicpIDogYnV0dG9uLmFkZENsYXNzKCdoaWRkZW4tYnV0dG9uJyk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBVdGlsaXR5IGZvciBjcmVhdGluZyBhY3Rpb24gYnV0dG9ucyBhbmQgY29weWluZyB0byBjbGlwYm9hcmRcclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUFjdGlvbkJ1dHRvbihsYWJlbDogc3RyaW5nLCB0b29sdGlwOiBzdHJpbmcsIGNhbGxiYWNrOiAoKSA9PiB2b2lkKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICBidXR0b24uYWRkQ2xhc3MoJ2FpLWNoYXQtYWN0aW9uLWJ1dHRvbicpO1xyXG4gICAgYnV0dG9uLnNldEF0dHJpYnV0ZSgnYXJpYS1sYWJlbCcsIHRvb2x0aXApO1xyXG4gICAgY29uc3QgbGFiZWxFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3NwYW4nKTtcclxuICAgIGxhYmVsRWwudGV4dENvbnRlbnQgPSBsYWJlbDtcclxuICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChsYWJlbEVsKTtcclxuICAgIGJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGNhbGxiYWNrKTtcclxuICAgIHJldHVybiBidXR0b247XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb3B5VG9DbGlwYm9hcmQodGV4dDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHRleHQpO1xyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAvLyBPcHRpb25hbGx5IGhhbmRsZSBlcnJvclxyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIE1vZGFsIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuZXhwb3J0IGNsYXNzIENvbmZpcm1hdGlvbk1vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcHJpdmF0ZSBvbkNvbmZpcm06IChjb25maXJtZWQ6IGJvb2xlYW4pID0+IHZvaWQ7XHJcbiAgICBwcml2YXRlIG1lc3NhZ2U6IHN0cmluZztcclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCB0aXRsZTogc3RyaW5nLCBtZXNzYWdlOiBzdHJpbmcsIG9uQ29uZmlybTogKGNvbmZpcm1lZDogYm9vbGVhbikgPT4gdm9pZCkge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQodGl0bGUpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZSA9IG1lc3NhZ2U7XHJcbiAgICAgICAgdGhpcy5vbkNvbmZpcm0gPSBvbkNvbmZpcm07XHJcbiAgICB9XHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdwJywgeyB0ZXh0OiB0aGlzLm1lc3NhZ2UgfSk7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdignbW9kYWwtYnV0dG9uLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiAnQ2FuY2VsJyB9KVxyXG4gICAgICAgICAgICAuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uQ29uZmlybShmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuICAgICAgICAgICAgdGV4dDogJ0RlbGV0ZScsXHJcbiAgICAgICAgICAgIGNsczogJ21vZC13YXJuaW5nJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25Db25maXJtKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICB9XHJcbn1cclxuIiwgIi8vIEhhbmRsZXMgY2hhdCBZQU1MIGxvYWQvc2F2ZSBmb3IgY2hhdCBub3Rlc1xyXG5pbXBvcnQgeyBNeVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCAqIGFzIHlhbWwgZnJvbSAnanMteWFtbCc7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gYnVpbGRDaGF0WWFtbChzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncywgcHJvdmlkZXI6IHN0cmluZywgbW9kZWw6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCB5YW1sT2JqID0ge1xyXG4gICAgICAgIHByb3ZpZGVyLFxyXG4gICAgICAgIG1vZGVsLFxyXG4gICAgICAgIHN5c3RlbV9tZXNzYWdlOiBzZXR0aW5ncy5zeXN0ZW1NZXNzYWdlLFxyXG4gICAgICAgIHRlbXBlcmF0dXJlOiBzZXR0aW5ncy50ZW1wZXJhdHVyZVxyXG4gICAgfTtcclxuICAgIHJldHVybiBgLS0tXFxuJHt5YW1sLmR1bXAoeWFtbE9iail9LS0tXFxuYDtcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNhdmVDaGF0QXNOb3RlKHtcclxuICAgIGFwcCxcclxuICAgIG1lc3NhZ2VzLFxyXG4gICAgc2V0dGluZ3MsXHJcbiAgICBwcm92aWRlcixcclxuICAgIG1vZGVsLFxyXG4gICAgY2hhdFNlcGFyYXRvcixcclxuICAgIGNoYXROb3RlRm9sZGVyXHJcbn06IHtcclxuICAgIGFwcDogYW55LFxyXG4gICAgbWVzc2FnZXM6IE5vZGVMaXN0T2Y8RWxlbWVudD4sXHJcbiAgICBzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncyxcclxuICAgIHByb3ZpZGVyOiBzdHJpbmcsXHJcbiAgICBtb2RlbDogc3RyaW5nLFxyXG4gICAgY2hhdFNlcGFyYXRvcjogc3RyaW5nLFxyXG4gICAgY2hhdE5vdGVGb2xkZXI/OiBzdHJpbmdcclxufSkge1xyXG4gICAgbGV0IGNoYXRDb250ZW50ID0gJyc7XHJcbiAgICBtZXNzYWdlcy5mb3JFYWNoKChlbDogRWxlbWVudCwgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIC8vIFByZWZlciByYXcgbWFya2Rvd24gY29udGVudCBpZiBhdmFpbGFibGVcclxuICAgICAgICBjb25zdCByYXdDb250ZW50ID0gKGVsIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LnJhd0NvbnRlbnQ7XHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IHJhd0NvbnRlbnQgIT09IHVuZGVmaW5lZCA/IHJhd0NvbnRlbnQgOiBlbC5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZS1jb250ZW50Jyk/LnRleHRDb250ZW50IHx8ICcnO1xyXG4gICAgICAgIGNoYXRDb250ZW50ICs9IGNvbnRlbnQ7XHJcbiAgICAgICAgaWYgKGluZGV4IDwgbWVzc2FnZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICBjaGF0Q29udGVudCArPSAnXFxuXFxuJyArIGNoYXRTZXBhcmF0b3IgKyAnXFxuXFxuJztcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHlhbWwgPSBidWlsZENoYXRZYW1sKHNldHRpbmdzLCBwcm92aWRlciwgbW9kZWwpO1xyXG4gICAgLy8gUmVtb3ZlIGFueSBleGlzdGluZyBZQU1MIGZyb250bWF0dGVyIGZyb20gY2hhdENvbnRlbnRcclxuICAgIGNoYXRDb250ZW50ID0gY2hhdENvbnRlbnQucmVwbGFjZSgvXi0tLVtcXHNcXFNdKj8tLS1cXG4/LywgJycpO1xyXG4gICAgY29uc3Qgbm90ZUNvbnRlbnQgPSB5YW1sICsgJ1xcbicgKyBjaGF0Q29udGVudC50cmltU3RhcnQoKTtcclxuICAgIC8vIEdlbmVyYXRlIGZpbGVuYW1lIHdpdGggdGltZXN0YW1wXHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgcGFkID0gKG46IG51bWJlcikgPT4gbi50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICBjb25zdCBmaWxlTmFtZSA9IGBDaGF0IEV4cG9ydCAke25vdy5nZXRGdWxsWWVhcigpfS0ke3BhZChub3cuZ2V0TW9udGgoKSsxKX0tJHtwYWQobm93LmdldERhdGUoKSl9ICR7cGFkKG5vdy5nZXRIb3VycygpKX0tJHtwYWQobm93LmdldE1pbnV0ZXMoKSl9Lm1kYDtcclxuICAgIGxldCBmaWxlUGF0aCA9IGZpbGVOYW1lO1xyXG4gICAgY29uc3QgZm9sZGVyID0gY2hhdE5vdGVGb2xkZXI/LnRyaW0oKTtcclxuICAgIGlmIChmb2xkZXIpIHtcclxuICAgICAgICBmaWxlUGF0aCA9IGZvbGRlci5yZXBsYWNlKC9bL1xcXFxdKyQvLCAnJykgKyAnLycgKyBmaWxlTmFtZTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgbm90ZUNvbnRlbnQpO1xyXG4gICAgICAgIG5ldyBOb3RpY2UoYENoYXQgc2F2ZWQgYXMgbm90ZTogJHtmaWxlUGF0aH1gKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gc2F2ZSBjaGF0IGFzIG5vdGUuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEFkZCBhIGZ1bmN0aW9uIGZvciBsb2FkaW5nIFlBTUwgYW5kIGFwcGx5aW5nIHNldHRpbmdzIChzZWUgcHJldmlvdXMgbG9naWMpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkQ2hhdFlhbWxBbmRBcHBseVNldHRpbmdzKHtcclxuICAgIGFwcCxcclxuICAgIHBsdWdpbixcclxuICAgIHNldHRpbmdzLFxyXG4gICAgZmlsZVxyXG59OiB7XHJcbiAgICBhcHA6IGFueSxcclxuICAgIHBsdWdpbjogYW55LFxyXG4gICAgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3MsXHJcbiAgICBmaWxlOiBhbnlcclxufSkge1xyXG4gICAgLy8gUmVhZCBmaWxlIGNvbnRlbnRzXHJcbiAgICBsZXQgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG4gICAgLy8gRXh0cmFjdCBZQU1MIGZyb250bWF0dGVyXHJcbiAgICBjb25zdCB5YW1sTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XHJcbiAgICBsZXQgeWFtbE9iajogYW55ID0ge307XHJcbiAgICBpZiAoeWFtbE1hdGNoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgeWFtbE9iaiA9IHlhbWwubG9hZCh5YW1sTWF0Y2hbMV0pIHx8IHt9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgeWFtbE9iaiA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIEltcHJvdmVkIHByb3ZpZGVyL21vZGVsIHNlbGVjdGlvbiBsb2dpYzogcHJpb3JpdGl6ZSBtb2RlbFxyXG4gICAgbGV0IG5ld1Byb3ZpZGVyID0gc2V0dGluZ3MucHJvdmlkZXI7XHJcbiAgICBsZXQgbmV3TW9kZWwgPSBzZXR0aW5ncy5vcGVuYWlTZXR0aW5ncz8ubW9kZWwgfHwgc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3M/Lm1vZGVsIHx8IHNldHRpbmdzLmdlbWluaVNldHRpbmdzPy5tb2RlbCB8fCBzZXR0aW5ncy5vbGxhbWFTZXR0aW5ncz8ubW9kZWw7XHJcbiAgICBjb25zdCBhdmFpbGFibGVQcm92aWRlcnMgPSBwbHVnaW4uZ2V0QXZhaWxhYmxlUHJvdmlkZXJzID8gcGx1Z2luLmdldEF2YWlsYWJsZVByb3ZpZGVycygpIDogW107XHJcbiAgICAvLyAxLiBJZiBhIG1vZGVsIGlzIHNwZWNpZmllZCwgZmluZCBhIHByb3ZpZGVyIHRoYXQgc3VwcG9ydHMgaXRcclxuICAgIGlmICh5YW1sT2JqLm1vZGVsKSB7XHJcbiAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XHJcbiAgICAgICAgZm9yIChjb25zdCBwcm92IG9mIGF2YWlsYWJsZVByb3ZpZGVycykge1xyXG4gICAgICAgICAgICBjb25zdCBtb2RlbHMgPSBwbHVnaW4uZ2V0TW9kZWxzRm9yUHJvdmlkZXIgPyBwbHVnaW4uZ2V0TW9kZWxzRm9yUHJvdmlkZXIocHJvdikgOiBbXTtcclxuICAgICAgICAgICAgaWYgKG1vZGVscy5pbmNsdWRlcyh5YW1sT2JqLm1vZGVsKSkge1xyXG4gICAgICAgICAgICAgICAgbmV3UHJvdmlkZXIgPSBwcm92O1xyXG4gICAgICAgICAgICAgICAgbmV3TW9kZWwgPSB5YW1sT2JqLm1vZGVsO1xyXG4gICAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gSWYgbm90IGZvdW5kLCBrZWVwIHByZXZpb3VzIHByb3ZpZGVyL21vZGVsXHJcbiAgICB9IGVsc2UgaWYgKHlhbWxPYmoucHJvdmlkZXIgJiYgYXZhaWxhYmxlUHJvdmlkZXJzLmluY2x1ZGVzKHlhbWxPYmoucHJvdmlkZXIpKSB7XHJcbiAgICAgICAgLy8gMi4gSWYgb25seSBwcm92aWRlciBpcyBzcGVjaWZpZWQsIHVzZSBwcmV2aW91cyBtb2RlbCBmb3IgdGhhdCBwcm92aWRlclxyXG4gICAgICAgIG5ld1Byb3ZpZGVyID0geWFtbE9iai5wcm92aWRlcjtcclxuICAgICAgICBzd2l0Y2ggKG5ld1Byb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ29wZW5haSc6XHJcbiAgICAgICAgICAgICAgICBuZXdNb2RlbCA9IHNldHRpbmdzLm9wZW5haVNldHRpbmdzLm1vZGVsO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FudGhyb3BpYyc6XHJcbiAgICAgICAgICAgICAgICBuZXdNb2RlbCA9IHNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzLm1vZGVsO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2dlbWluaSc6XHJcbiAgICAgICAgICAgICAgICBuZXdNb2RlbCA9IHNldHRpbmdzLmdlbWluaVNldHRpbmdzLm1vZGVsO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ29sbGFtYSc6XHJcbiAgICAgICAgICAgICAgICBuZXdNb2RlbCA9IHNldHRpbmdzLm9sbGFtYVNldHRpbmdzLm1vZGVsO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gU3lzdGVtIG1lc3NhZ2VcclxuICAgIGxldCBuZXdTeXN0ZW1NZXNzYWdlID0geWFtbE9iai5zeXN0ZW1fbWVzc2FnZSB8fCBzZXR0aW5ncy5zeXN0ZW1NZXNzYWdlO1xyXG4gICAgLy8gVGVtcGVyYXR1cmVcclxuICAgIGxldCBuZXdUZW1wZXJhdHVyZSA9IHNldHRpbmdzLnRlbXBlcmF0dXJlO1xyXG4gICAgaWYgKHlhbWxPYmoudGVtcGVyYXR1cmUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGNvbnN0IHRlbXBOdW0gPSBwYXJzZUZsb2F0KHlhbWxPYmoudGVtcGVyYXR1cmUpO1xyXG4gICAgICAgIGlmICghaXNOYU4odGVtcE51bSkpIG5ld1RlbXBlcmF0dXJlID0gdGVtcE51bTtcclxuICAgIH1cclxuICAgIC8vIEFwcGx5IHNldHRpbmdzXHJcbiAgICBzZXR0aW5ncy5wcm92aWRlciA9IG5ld1Byb3ZpZGVyO1xyXG4gICAgaWYgKG5ld01vZGVsKSB7XHJcbiAgICAgICAgc3dpdGNoIChuZXdQcm92aWRlcikge1xyXG4gICAgICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MubW9kZWwgPSBuZXdNb2RlbDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdhbnRocm9waWMnOlxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MubW9kZWwgPSBuZXdNb2RlbDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdnZW1pbmknOlxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MubW9kZWwgPSBuZXdNb2RlbDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdvbGxhbWEnOlxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3MubW9kZWwgPSBuZXdNb2RlbDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHNldHRpbmdzLnN5c3RlbU1lc3NhZ2UgPSBuZXdTeXN0ZW1NZXNzYWdlO1xyXG4gICAgc2V0dGluZ3MudGVtcGVyYXR1cmUgPSBuZXdUZW1wZXJhdHVyZTtcclxuICAgIGlmIChwbHVnaW4ub25TZXR0aW5nc0xvYWRlZEZyb21Ob3RlKSB7XHJcbiAgICAgICAgcGx1Z2luLm9uU2V0dGluZ3NMb2FkZWRGcm9tTm90ZShzZXR0aW5ncyk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4ge1xyXG4gICAgICAgIHByb3ZpZGVyOiBuZXdQcm92aWRlcixcclxuICAgICAgICBtb2RlbDogbmV3TW9kZWwsXHJcbiAgICAgICAgc3lzdGVtTWVzc2FnZTogbmV3U3lzdGVtTWVzc2FnZSxcclxuICAgICAgICB0ZW1wZXJhdHVyZTogbmV3VGVtcGVyYXR1cmVcclxuICAgIH07XHJcbn1cclxuIiwgIi8vIEhhbmRsZXMgY2hhdCBoaXN0b3J5IHJlbmRlcmluZyBhbmQgcGVyc2lzdGVuY2VcclxuLy8gaW1wb3J0IHsgQ2hhdE1lc3NhZ2UgfSBmcm9tICcuLi8uLi90eXBlcyc7IC8vIFJlbW92ZSB0aGlzIGxpbmUsIG5vdCBleHBvcnRlZFxyXG5pbXBvcnQgeyBjcmVhdGVNZXNzYWdlRWxlbWVudCB9IGZyb20gJy4vTWVzc2FnZSc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVyQ2hhdEhpc3Rvcnkoe1xyXG4gICAgbWVzc2FnZXNDb250YWluZXIsXHJcbiAgICBsb2FkZWRIaXN0b3J5LFxyXG4gICAgY2hhdEhpc3RvcnlNYW5hZ2VyLFxyXG4gICAgcGx1Z2luLFxyXG4gICAgcmVnZW5lcmF0ZVJlc3BvbnNlLFxyXG4gICAgc2Nyb2xsVG9Cb3R0b20gPSB0cnVlXHJcbn06IHtcclxuICAgIG1lc3NhZ2VzQ29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuICAgIGxvYWRlZEhpc3Rvcnk6IGFueVtdLCAvLyBVc2UgYW55W10gaWYgQ2hhdE1lc3NhZ2UgaXMgbm90IGV4cG9ydGVkXHJcbiAgICBjaGF0SGlzdG9yeU1hbmFnZXI6IGFueSxcclxuICAgIHBsdWdpbjogYW55LFxyXG4gICAgcmVnZW5lcmF0ZVJlc3BvbnNlOiAoZWw6IEhUTUxFbGVtZW50KSA9PiB2b2lkLFxyXG4gICAgc2Nyb2xsVG9Cb3R0b20/OiBib29sZWFuXHJcbn0pIHtcclxuICAgIG1lc3NhZ2VzQ29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICBmb3IgKGNvbnN0IG1zZyBvZiBsb2FkZWRIaXN0b3J5KSB7XHJcbiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT09ICd1c2VyJyB8fCBtc2cuc2VuZGVyID09PSAnYXNzaXN0YW50Jykge1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlRWwgPSBhd2FpdCBjcmVhdGVNZXNzYWdlRWxlbWVudChcclxuICAgICAgICAgICAgICAgIHBsdWdpbi5hcHAsXHJcbiAgICAgICAgICAgICAgICBtc2cuc2VuZGVyIGFzICd1c2VyJyB8ICdhc3Npc3RhbnQnLFxyXG4gICAgICAgICAgICAgICAgbXNnLmNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICBjaGF0SGlzdG9yeU1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICBwbHVnaW4sXHJcbiAgICAgICAgICAgICAgICByZWdlbmVyYXRlUmVzcG9uc2UsXHJcbiAgICAgICAgICAgICAgICBwbHVnaW4gLy8gcGFyZW50Q29tcG9uZW50XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VFbC5kYXRhc2V0LnRpbWVzdGFtcCA9IG1zZy50aW1lc3RhbXA7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VzQ29udGFpbmVyLmFwcGVuZENoaWxkKG1lc3NhZ2VFbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNjcm9sbFRvQm90dG9tKSB7XHJcbiAgICAgICAgbWVzc2FnZXNDb250YWluZXIuc2Nyb2xsVG9wID0gbWVzc2FnZXNDb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIFBhcnNlcyBhIGdpdmVuIHRleHQgc2VsZWN0aW9uIGludG8gYW4gYXJyYXkgb2YgbWVzc2FnZSBvYmplY3RzXHJcbiAqIFxyXG4gKiBUaGUgZnVuY3Rpb24gaW50ZXJwcmV0cyBsaW5lcyBvZiB0ZXh0IHNlcGFyYXRlZCBieSBjaGF0Qm91bmRhcnlTdHJpbmcgKGRlZmF1bHRzIHRvICctLS0tJykgYXMgYm91bmRhcmllc1xyXG4gKiBiZXR3ZWVuIHVzZXIgYW5kIGFzc2lzdGFudCBtZXNzYWdlcy5cclxuICogXHJcbiAqIEBwYXJhbSBzZWxlY3Rpb24gLSBUaGUgdGV4dCBzZWxlY3Rpb24gdG8gcGFyc2VcclxuICogQHBhcmFtIGNoYXRTZXBhcmF0b3IgLSBUaGUgc3RyaW5nIHRoYXQgc2VwYXJhdGVzIHVzZXIgYW5kIGFzc2lzdGFudCBtZXNzYWdlc1xyXG4gKiBAcGFyYW0gY2hhdEJvdW5kYXJ5U3RyaW5nIC0gVGhlIHN0cmluZyB0aGF0IGluZGljYXRlcyB0aGUgc3RhcnQgYW5kIGVuZCBvZiB0aGUgY2hhdFxyXG4gKiBAcmV0dXJucyBBcnJheSBvZiBtZXNzYWdlIG9iamVjdHMgd2l0aCByb2xlcyBhbmQgY29udGVudFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHBhcnNlU2VsZWN0aW9uKFxyXG4gICAgc2VsZWN0aW9uOiBzdHJpbmcsXHJcbiAgICBjaGF0U2VwYXJhdG9yOiBzdHJpbmcsXHJcbiAgICBjaGF0Qm91bmRhcnlTdHJpbmc/OiBzdHJpbmdcclxuKTogTWVzc2FnZVtdIHtcclxuICAgIC8vIElmIG5vIGNoYXRCb3VuZGFyeVN0cmluZyBpcyBwcm92aWRlZCwgc3RhcnQgcGFyc2luZyByaWdodCBhd2F5XHJcbiAgICBsZXQgaW5zaWRlQ2hhdCA9ICFjaGF0Qm91bmRhcnlTdHJpbmc7XHJcblxyXG4gICAgY29uc3QgbGluZXMgPSBzZWxlY3Rpb24uc3BsaXQoJ1xcbicpO1xyXG4gICAgbGV0IG1lc3NhZ2VzOiBNZXNzYWdlW10gPSBbXTtcclxuICAgIGxldCBjdXJyZW50Um9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcgPSAndXNlcic7XHJcbiAgICBsZXQgY3VycmVudENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICBpZiAoY2hhdEJvdW5kYXJ5U3RyaW5nICYmIGxpbmUudHJpbSgpID09PSBjaGF0Qm91bmRhcnlTdHJpbmcpIHtcclxuICAgICAgICAgICAgLy8gSWYgc3RhcnQgYW5kIGVuZCBib3VuZGFyaWVzIGFyZSB0aGUgc2FtZSwgdG9nZ2xlIG9ubHkgb25jZVxyXG4gICAgICAgICAgICBpZiAoIWluc2lkZUNoYXQgJiYgY3VycmVudENvbnRlbnQudHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogY3VycmVudFJvbGUsIGNvbnRlbnQ6IGN1cnJlbnRDb250ZW50LnRyaW0oKSB9KTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW5zaWRlQ2hhdCA9ICFpbnNpZGVDaGF0O1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghaW5zaWRlQ2hhdCkgY29udGludWU7IC8vIElnbm9yZSBsaW5lcyBvdXRzaWRlIG9mIGEgY2hhdFxyXG5cclxuICAgICAgICBpZiAobGluZS50cmltKCkgPT09IGNoYXRTZXBhcmF0b3IpIHtcclxuICAgICAgICAgICAgLy8gSWYgd2UgaGl0IGEgc2VwYXJhdG9yLCBzYXZlIHRoZSBjdXJyZW50IG1lc3NhZ2UgYW5kIHN3aXRjaCByb2xlc1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudENvbnRlbnQudHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogY3VycmVudFJvbGUsIGNvbnRlbnQ6IGN1cnJlbnRDb250ZW50LnRyaW0oKSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50Um9sZSA9IGN1cnJlbnRSb2xlID09PSAndXNlcicgPyAnYXNzaXN0YW50JyA6ICd1c2VyJztcclxuICAgICAgICAgICAgY3VycmVudENvbnRlbnQgPSAnJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJyZW50Q29udGVudCArPSBsaW5lICsgJ1xcbic7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFNhdmUgYW55IHJlbWFpbmluZyBjb250ZW50XHJcbiAgICBpZiAoY3VycmVudENvbnRlbnQudHJpbSgpKSB7XHJcbiAgICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGU6IGN1cnJlbnRSb2xlLCBjb250ZW50OiBjdXJyZW50Q29udGVudC50cmltKCkgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1lc3NhZ2VzO1xyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIFdvcmtzcGFjZUxlYWYsIEl0ZW1WaWV3LCBTZXR0aW5nLCBOb3RpY2UsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgTXlQbHVnaW4gZnJvbSAnLi4vbWFpbic7IC8vIEltcG9ydCBNeVBsdWdpblxyXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlciB9IGZyb20gJy4uLy4uL3Byb3ZpZGVycyc7XHJcblxyXG5jb25zdCBWSUVXX1RZUEVfTU9ERUxfU0VUVElOR1MgPSAnbW9kZWwtc2V0dGluZ3Mtdmlldyc7XHJcblxyXG4vKipcclxuICogQUkgTW9kZWwgU2V0dGluZ3MgVmlld1xyXG4gKlxyXG4gKiBUaGlzIHZpZXcgcHJvdmlkZXMgYSB1c2VyIGludGVyZmFjZSBmb3IgY29uZmlndXJpbmcgQUkgbW9kZWwgc2V0dGluZ3MuXHJcbiAqIEl0IGFsbG93cyB1c2VycyB0bzpcclxuICogLSBTZWxlY3QgdGhlaXIgcHJlZmVycmVkIEFJIHByb3ZpZGVyIChPcGVuQUksIEFudGhyb3BpYywgR2VtaW5pLCBPbGxhbWEpXHJcbiAqIC0gQ29uZmlndXJlIHByb3ZpZGVyLXNwZWNpZmljIHNldHRpbmdzIGxpa2UgQVBJIGtleXMgYW5kIG1vZGVsc1xyXG4gKiAtIEFkanVzdCBjb21tb24gc2V0dGluZ3MgbGlrZSB0ZW1wZXJhdHVyZSBhbmQgdG9rZW4gbGltaXRzXHJcbiAqIC0gVGVzdCBBUEkgY29ubmVjdGlvbnMgYW5kIHJlZnJlc2ggYXZhaWxhYmxlIG1vZGVsc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE1vZGVsU2V0dGluZ3NWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xyXG4gICAgcGx1Z2luOiBNeVBsdWdpbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IE15UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIobGVhZik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gVklFV19UWVBFX01PREVMX1NFVFRJTkdTO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICdBSSBNb2RlbCBTZXR0aW5ncyc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SWNvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAnZmlsZS1zbGlkZXJzJztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIC8vIFNldHRpbmdzIFNlY3Rpb25cclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQUkgTW9kZWwgU2V0dGluZ3MnIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdTeXN0ZW0gTWVzc2FnZScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdTZXQgdGhlIHN5c3RlbSBtZXNzYWdlIGZvciB0aGUgQUknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ1lvdSBhcmUgYSBoZWxwZnVsIGFzc2lzdGFudC4nKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnN5c3RlbU1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3lzdGVtTWVzc2FnZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbmFibGUgU3RyZWFtaW5nJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0VuYWJsZSBvciBkaXNhYmxlIHN0cmVhbWluZyBmb3IgY29tcGxldGlvbnMnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVTdHJlYW1pbmcpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlU3RyZWFtaW5nID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1RlbXBlcmF0dXJlJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1NldCB0aGUgcmFuZG9tbmVzcyBvZiB0aGUgbW9kZWxcXCdzIG91dHB1dCAoMC0xKScpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLCAxLCAwLjEpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGVyYXR1cmUpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBlcmF0dXJlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIERhdGUgU2V0dGluZ3MgU2VjdGlvblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdEYXRlIFNldHRpbmdzJyB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnSW5jbHVkZSBEYXRlIHdpdGggU3lzdGVtIE1lc3NhZ2UnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQWRkIHRoZSBjdXJyZW50IGRhdGUgdG8gdGhlIHN5c3RlbSBtZXNzYWdlJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZURhdGVXaXRoU3lzdGVtTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlRGF0ZVdpdGhTeXN0ZW1NZXNzYWdlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0luY2x1ZGUgVGltZSB3aXRoIFN5c3RlbSBNZXNzYWdlJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0FkZCB0aGUgY3VycmVudCB0aW1lIGFsb25nIHdpdGggdGhlIGRhdGUgdG8gdGhlIHN5c3RlbSBtZXNzYWdlJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZVRpbWVXaXRoU3lzdGVtTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlVGltZVdpdGhTeXN0ZW1NZXNzYWdlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICAgICAgLy8gTm90ZSBSZWZlcmVuY2UgU2V0dGluZ3MgU2VjdGlvblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6ICdOb3RlIFJlZmVyZW5jZSBTZXR0aW5ncycgfSk7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnRW5hYmxlIE9ic2lkaWFuIExpbmtzJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1JlYWQgT2JzaWRpYW4gbGlua3MgaW4gbWVzc2FnZXMgdXNpbmcgW1tmaWxlbmFtZV1dIHN5bnRheCcpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZU9ic2lkaWFuTGlua3MpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlT2JzaWRpYW5MaW5rcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbmFibGUgQ29udGV4dCBOb3RlcycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdBdHRhY2ggc3BlY2lmaWVkIG5vdGUgY29udGVudCB0byBjaGF0IG1lc3NhZ2VzJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ29udGV4dE5vdGVzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvbnRleHROb3RlcyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBjb25zdCBjb250ZXh0Tm90ZXNDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdjb250ZXh0LW5vdGVzLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIGNvbnRleHROb3Rlc0NvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjRweCc7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRleHROb3Rlc0NvbnRhaW5lcilcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0NvbnRleHQgTm90ZXMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnTm90ZXMgdG8gYXR0YWNoIGFzIGNvbnRleHQgKHN1cHBvcnRzIFtbZmlsZW5hbWVdXSBhbmQgW1tmaWxlbmFtZSNoZWFkZXJdXSBzeW50YXgpJylcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignW1tOb3RlIE5hbWVdXVxcbltbQW5vdGhlciBOb3RlI0hlYWRlcl1dJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGV4dE5vdGVzIHx8ICcnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGV4dE5vdGVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEVuYWJsZSBsYXJnZXIgdGV4dCBhcmVhXHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDQ7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwuc3R5bGUud2lkdGggPSAnMTAwJSc7XHJcblxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnRXhwYW5kIExpbmtlZCBOb3RlcyBSZWN1cnNpdmVseScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdJZiBlbmFibGVkLCB3aGVuIGZldGNoaW5nIGEgbm90ZSwgYWxzbyBmZXRjaCBhbmQgZXhwYW5kIGxpbmtzIHdpdGhpbiB0aGF0IG5vdGUgcmVjdXJzaXZlbHkgKHByZXZlbnRzIGluZmluaXRlIGxvb3BzKS4nKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBhbmRMaW5rZWROb3Rlc1JlY3Vyc2l2ZWx5ID8/IGZhbHNlKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGFuZExpbmtlZE5vdGVzUmVjdXJzaXZlbHkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gUHJvdmlkZXItc3BlY2lmaWMgc2V0dGluZ3Mgc2VjdGlvblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdQcm92aWRlciBTZXR0aW5ncycgfSk7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQUkgUHJvdmlkZXInKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIHdoaWNoIEFJIHByb3ZpZGVyIHRvIHVzZScpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ29wZW5haScsICdPcGVuQUkgKENoYXRHUFQpJylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdhbnRocm9waWMnLCAnQW50aHJvcGljIChDbGF1ZGUpJylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdnZW1pbmknLCAnR29vZ2xlIChHZW1pbmkpJylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdvbGxhbWEnLCAnT2xsYW1hIChMb2NhbCBBSSknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlcilcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHwgJ2dlbWluaScgfCAnb2xsYW1hJykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVmcmVzaCB2aWV3IHRvIHNob3cgcHJvdmlkZXItc3BlY2lmaWMgc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbk9wZW4oKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlcikge1xyXG4gICAgICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJPcGVuQUlTZXR0aW5ncyhjb250ZW50RWwpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FudGhyb3BpYyc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckFudGhyb3BpY1NldHRpbmdzKGNvbnRlbnRFbCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZ2VtaW5pJzpcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR2VtaW5pU2V0dGluZ3MoY29udGVudEVsKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdvbGxhbWEnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJPbGxhbWFTZXR0aW5ncyhjb250ZW50RWwpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyUHJvdmlkZXJTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHNldHRpbmdzOiBhbnksIHByb3ZpZGVyTmFtZTogc3RyaW5nLCB0ZXN0Q29ubmVjdGlvbkNhbGxiYWNrOiAoKSA9PiBQcm9taXNlPHZvaWQ+KSB7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdUZXN0IENvbm5lY3Rpb24nKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhgVmVyaWZ5IHlvdXIgQVBJIGtleSBhbmQgZmV0Y2ggYXZhaWxhYmxlIG1vZGVscyBmb3IgJHtwcm92aWRlck5hbWV9YClcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnVGVzdCcpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1Rlc3RpbmcuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRlc3RDb25uZWN0aW9uQ2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdUZXN0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBpZiAoc2V0dGluZ3MubGFzdFRlc3RSZXN1bHQpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHNldHRpbmdzLmxhc3RUZXN0UmVzdWx0LnRpbWVzdGFtcCk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgTGFzdCB0ZXN0OiAke2RhdGUudG9Mb2NhbGVTdHJpbmcoKX0gLSAke3NldHRpbmdzLmxhc3RUZXN0UmVzdWx0Lm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgIGNsczogc2V0dGluZ3MubGFzdFRlc3RSZXN1bHQuc3VjY2VzcyA/ICdzdWNjZXNzJyA6ICdlcnJvcidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ01vZGVsJylcclxuICAgICAgICAgICAgLnNldERlc2MoYENob29zZSB0aGUgJHtwcm92aWRlck5hbWV9IG1vZGVsIHRvIHVzZWApXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIHNldHRpbmdzLmF2YWlsYWJsZU1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihtb2RlbCwgbW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3MubW9kZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5tb2RlbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJPcGVuQUlTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICB0aGlzLnJlbmRlclByb3ZpZGVyU2V0dGluZ3MoY29udGFpbmVyRWwsIHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haVNldHRpbmdzLCAnT3BlbkFJJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IGNyZWF0ZVByb3ZpZGVyKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvdmlkZXIudGVzdENvbm5lY3Rpb24oKTtcclxuXHJcbiAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQubW9kZWxzKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMgPSByZXN1bHQubW9kZWxzO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5sYXN0VGVzdFJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UocmVzdWx0Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbk9wZW4oKTsgLy8gUmVmcmVzaCB2aWV3XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5sYXN0VGVzdFJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHJlc3VsdC5tZXNzYWdlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyQW50aHJvcGljU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJQcm92aWRlclNldHRpbmdzKGNvbnRhaW5lckVsLCB0aGlzLnBsdWdpbi5zZXR0aW5ncy5hbnRocm9waWNTZXR0aW5ncywgJ0FudGhyb3BpYycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBjcmVhdGVQcm92aWRlcih0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb3ZpZGVyLnRlc3RDb25uZWN0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0Lm1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzID0gcmVzdWx0Lm1vZGVscztcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHJlc3VsdC5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMub25PcGVuKCk7IC8vIFJlZnJlc2ggdmlld1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShyZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlckdlbWluaVNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvdmlkZXJTZXR0aW5ncyhjb250YWluZXJFbCwgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MsICdHZW1pbmknLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gY3JlYXRlUHJvdmlkZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm92aWRlci50ZXN0Q29ubmVjdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5tb2RlbHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbWluaVNldHRpbmdzLmF2YWlsYWJsZU1vZGVscyA9IHJlc3VsdC5tb2RlbHM7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbWluaVNldHRpbmdzLmxhc3RUZXN0UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShyZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpOyAvLyBSZWZyZXNoIHZpZXcgdG8gcmVsb2FkIG1vZGVsc1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShyZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlck9sbGFtYVNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvdmlkZXJTZXR0aW5ncyhjb250YWluZXJFbCwgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3MsICdPbGxhbWEnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gY3JlYXRlUHJvdmlkZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm92aWRlci50ZXN0Q29ubmVjdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5tb2RlbHMpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9sbGFtYVNldHRpbmdzLmF2YWlsYWJsZU1vZGVscyA9IHJlc3VsdC5tb2RlbHM7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9sbGFtYVNldHRpbmdzLmxhc3RUZXN0UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShyZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpOyAvLyBSZWZyZXNoIHZpZXdcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9sbGFtYVNldHRpbmdzLmxhc3RUZXN0UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UocmVzdWx0Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBoZWxwIHRleHQgZm9yIE9sbGFtYSBzZXR1cFxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7XHJcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXHJcbiAgICAgICAgICAgIHRleHQ6ICdUbyB1c2UgT2xsYW1hOidcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBzdGVwcyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdvbCcpO1xyXG4gICAgICAgIHN0ZXBzLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ0luc3RhbGwgT2xsYW1hIGZyb20gaHR0cHM6Ly9vbGxhbWEuYWknIH0pO1xyXG4gICAgICAgIHN0ZXBzLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1N0YXJ0IHRoZSBPbGxhbWEgc2VydmVyJyB9KTtcclxuICAgICAgICBzdGVwcy5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICdQdWxsIG1vZGVscyB1c2luZyBcIm9sbGFtYSBwdWxsIG1vZGVsLW5hbWVcIicgfSk7XHJcbiAgICAgICAgc3RlcHMuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAnVGVzdCBjb25uZWN0aW9uIHRvIHNlZSBhdmFpbGFibGUgbW9kZWxzJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbkNsb3NlKCkge1xyXG4gICAgICAgIC8vIENsZWFuIHVwIGFueSByZXNvdXJjZXMgaWYgbmVlZGVkXHJcbiAgICB9XHJcblxyXG59XHJcbiIsICJpbXBvcnQgeyBOb3RpY2UsIFRGaWxlLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IE1lc3NhZ2UsIE15UGx1Z2luU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG4vKipcclxuICogRXh0cmFjdCBjb250ZW50IHVuZGVyIGEgc3BlY2lmaWMgaGVhZGVyIGluIGEgbm90ZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGV4dHJhY3RDb250ZW50VW5kZXJIZWFkZXIoY29udGVudDogc3RyaW5nLCBoZWFkZXJUZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgbGluZXMgPSBjb250ZW50LnNwbGl0KCdcXG4nKTtcclxuICAgIGxldCBmb3VuZEhlYWRlciA9IGZhbHNlO1xyXG4gICAgbGV0IGV4dHJhY3RlZENvbnRlbnQgPSBbXTtcclxuICAgIGxldCBoZWFkZXJMZXZlbCA9IDA7XHJcblxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsaW5lcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcclxuICAgICAgICBjb25zdCBoZWFkZXJNYXRjaCA9IGxpbmUubWF0Y2goL14oIyspXFxzKyguKj8pJC8pO1xyXG4gICAgICAgIGlmIChoZWFkZXJNYXRjaCkge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SGVhZGVyTGV2ZWwgPSBoZWFkZXJNYXRjaFsxXS5sZW5ndGg7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRIZWFkZXJUZXh0ID0gaGVhZGVyTWF0Y2hbMl0udHJpbSgpO1xyXG4gICAgICAgICAgICBpZiAoZm91bmRIZWFkZXIpIHtcclxuICAgICAgICAgICAgICAgIGlmIChjdXJyZW50SGVhZGVyTGV2ZWwgPD0gaGVhZGVyTGV2ZWwpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIGlmIChjdXJyZW50SGVhZGVyVGV4dC50b0xvd2VyQ2FzZSgpID09PSBoZWFkZXJUZXh0LnRvTG93ZXJDYXNlKCkpIHtcclxuICAgICAgICAgICAgICAgIGZvdW5kSGVhZGVyID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIGhlYWRlckxldmVsID0gY3VycmVudEhlYWRlckxldmVsO1xyXG4gICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudC5wdXNoKGxpbmUpO1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGZvdW5kSGVhZGVyKSB7XHJcbiAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQucHVzaChsaW5lKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gZXh0cmFjdGVkQ29udGVudC5qb2luKCdcXG4nKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFByb2Nlc3MgYSBzaW5nbGUgbWVzc2FnZSBjb250ZW50IHRvIGluY2x1ZGUgT2JzaWRpYW4gbm90ZSBjb250ZW50cywgcmVjdXJzaXZlbHkgaWYgZW5hYmxlZFxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NPYnNpZGlhbkxpbmtzKFxyXG4gICAgY29udGVudDogc3RyaW5nLFxyXG4gICAgYXBwOiBBcHAsXHJcbiAgICBzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncyxcclxuICAgIHZpc2l0ZWROb3RlczogU2V0PHN0cmluZz4gPSBuZXcgU2V0KCksXHJcbiAgICBjdXJyZW50RGVwdGg6IG51bWJlciA9IDBcclxuKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIGlmICghc2V0dGluZ3MuZW5hYmxlT2JzaWRpYW5MaW5rcykgcmV0dXJuIGNvbnRlbnQ7XHJcbiAgICBjb25zdCBsaW5rUmVnZXggPSAvXFxbXFxbKC4qPylcXF1cXF0vZztcclxuICAgIGxldCBtYXRjaDtcclxuICAgIGxldCBwcm9jZXNzZWRDb250ZW50ID0gY29udGVudDtcclxuICAgIHdoaWxlICgobWF0Y2ggPSBsaW5rUmVnZXguZXhlYyhjb250ZW50KSkgIT09IG51bGwpIHtcclxuICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMF0gJiYgbWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgY29uc3QgcGFydHMgPSBtYXRjaFsxXS5zcGxpdCgnfCcpO1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhcnRzWzBdLnRyaW0oKTtcclxuICAgICAgICAgICAgY29uc3QgZGlzcGxheVRleHQgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHNbMV0udHJpbSgpIDogZmlsZVBhdGg7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpIHx8IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYCR7ZmlsZVBhdGh9Lm1kYCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxGaWxlcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpO1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbGUgPSBhbGxGaWxlcy5maW5kKGYgPT4gZi5uYW1lID09PSBmaWxlUGF0aCB8fCBmLm5hbWUgPT09IGAke2ZpbGVQYXRofS5tZGAgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZi5iYXNlbmFtZS50b0xvd2VyQ2FzZSgpID09PSBmaWxlUGF0aC50b0xvd2VyQ2FzZSgpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGYucGF0aCA9PT0gZmlsZVBhdGggfHwgZi5wYXRoID09PSBgJHtmaWxlUGF0aH0ubWRgKSB8fCBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyTWF0Y2ggPSBmaWxlUGF0aC5tYXRjaCgvKC4qPykjKC4qKS8pO1xyXG4gICAgICAgICAgICAgICAgbGV0IGV4dHJhY3RlZENvbnRlbnQgPSBcIlwiO1xyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgJiYgZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUHJldmVudCBpbmZpbml0ZSByZWN1cnNpb25cclxuICAgICAgICAgICAgICAgICAgICBpZiAodmlzaXRlZE5vdGVzLmhhcyhmaWxlLnBhdGgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQgPSAnW1JlY3Vyc2l2ZSBsaW5rIG9taXR0ZWQ6IGFscmVhZHkgaW5jbHVkZWRdJztcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpdGVkTm90ZXMuYWRkKGZpbGUucGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IG5vdGVDb250ZW50ID0gYXdhaXQgYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJNYXRjaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudCA9IGV4dHJhY3RDb250ZW50VW5kZXJIZWFkZXIobm90ZUNvbnRlbnQsIGhlYWRlck1hdGNoWzJdLnRyaW0oKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWRDb250ZW50ID0gbm90ZUNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVjdXJzaXZlbHkgZXhwYW5kIGxpbmtzIGlmIGVuYWJsZWQgYW5kIGRlcHRoIG5vdCBleGNlZWRlZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MuZXhwYW5kTGlua2VkTm90ZXNSZWN1cnNpdmVseSAmJiBjdXJyZW50RGVwdGggPCAoc2V0dGluZ3MubWF4TGlua0V4cGFuc2lvbkRlcHRoID8/IDIpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWRDb250ZW50ID0gYXdhaXQgcHJvY2Vzc09ic2lkaWFuTGlua3MoZXh0cmFjdGVkQ29udGVudCwgYXBwLCBzZXR0aW5ncywgdmlzaXRlZE5vdGVzLCBjdXJyZW50RGVwdGggKyAxKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWRDb250ZW50ID0gcHJvY2Vzc2VkQ29udGVudC5yZXBsYWNlKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXRjaFswXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYCR7bWF0Y2hbMF19XFxuXFxuLS0tXFxuTm90ZSBOYW1lOiAke2ZpbGVQYXRofVxcbkNvbnRlbnQ6XFxuJHtleHRyYWN0ZWRDb250ZW50fVxcbi0tLVxcbmBcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBGaWxlIG5vdCBmb3VuZDogJHtmaWxlUGF0aH0uIEVuc3VyZSB0aGUgZmlsZSBuYW1lIGFuZCBwYXRoIGFyZSBjb3JyZWN0LmApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3IgcHJvY2Vzc2luZyBsaW5rIGZvciAke2ZpbGVQYXRofTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByb2Nlc3NlZENvbnRlbnQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcm9jZXNzIGNvbnRleHQgbm90ZXMgc3BlY2lmaWVkIGluIHRoZSBzZXR0aW5nc1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NDb250ZXh0Tm90ZXMoY29udGV4dE5vdGVzVGV4dDogc3RyaW5nLCBhcHA6IEFwcCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBjb25zdCBsaW5rUmVnZXggPSAvXFxbXFxbKC4qPylcXF1cXF0vZztcclxuICAgIGxldCBtYXRjaDtcclxuICAgIGxldCBjb250ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICB3aGlsZSAoKG1hdGNoID0gbGlua1JlZ2V4LmV4ZWMoY29udGV4dE5vdGVzVGV4dCkpICE9PSBudWxsKSB7XHJcbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gbWF0Y2hbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyTWF0Y2ggPSBmaWxlTmFtZS5tYXRjaCgvKC4qPykjKC4qKS8pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUZpbGVOYW1lID0gaGVhZGVyTWF0Y2ggPyBoZWFkZXJNYXRjaFsxXS50cmltKCkgOiBmaWxlTmFtZTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlck5hbWUgPSBoZWFkZXJNYXRjaCA/IGhlYWRlck1hdGNoWzJdLnRyaW0oKSA6IG51bGw7XHJcbiAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYmFzZUZpbGVOYW1lKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgIGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYCR7YmFzZUZpbGVOYW1lfS5tZGApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsRmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gYWxsRmlsZXMuZmluZChmID0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGYuYmFzZW5hbWUudG9Mb3dlckNhc2UoKSA9PT0gYmFzZUZpbGVOYW1lLnRvTG93ZXJDYXNlKCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZi5uYW1lLnRvTG93ZXJDYXNlKCkgPT09IGAke2Jhc2VGaWxlTmFtZS50b0xvd2VyQ2FzZSgpfS5tZGBcclxuICAgICAgICAgICAgICAgICAgICApIHx8IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZmlsZSAmJiBmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RlQ29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRDb250ZW50ICs9IGAtLS1cXG5Gcm9tIG5vdGU6ICR7ZmlsZS5iYXNlbmFtZX1cXG5cXG5gO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChoZWFkZXJOYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlckNvbnRlbnQgPSBleHRyYWN0Q29udGVudFVuZGVySGVhZGVyKG5vdGVDb250ZW50LCBoZWFkZXJOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dENvbnRlbnQgKz0gaGVhZGVyQ29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Q29udGVudCArPSBub3RlQ29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dENvbnRlbnQgKz0gJ1xcblxcbic7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRDb250ZW50ICs9IGBOb3RlIG5vdCBmb3VuZDogJHtmaWxlTmFtZX1cXG5cXG5gO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29udGV4dENvbnRlbnQgKz0gYEVycm9yIHByb2Nlc3Npbmcgbm90ZSAke2ZpbGVOYW1lfTogJHtlcnJvci5tZXNzYWdlfVxcblxcbmA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICByZXR1cm4gY29udGV4dENvbnRlbnQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcm9jZXNzIGFuIGFycmF5IG9mIG1lc3NhZ2VzIHRvIGluY2x1ZGUgT2JzaWRpYW4gbm90ZSBjb250ZW50c1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NNZXNzYWdlcyhtZXNzYWdlczogTWVzc2FnZVtdLCBhcHA6IEFwcCwgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3MpOiBQcm9taXNlPE1lc3NhZ2VbXT4ge1xyXG4gICAgY29uc3QgcHJvY2Vzc2VkTWVzc2FnZXM6IE1lc3NhZ2VbXSA9IFtdO1xyXG4gICAgaWYgKHNldHRpbmdzLmVuYWJsZUNvbnRleHROb3RlcyAmJiBzZXR0aW5ncy5jb250ZXh0Tm90ZXMpIHtcclxuICAgICAgICBjb25zdCBjb250ZXh0Q29udGVudCA9IGF3YWl0IHByb2Nlc3NDb250ZXh0Tm90ZXMoc2V0dGluZ3MuY29udGV4dE5vdGVzLCBhcHApO1xyXG4gICAgICAgIGlmIChjb250ZXh0Q29udGVudCkge1xyXG4gICAgICAgICAgICBpZiAobWVzc2FnZXMubGVuZ3RoID4gMCAmJiBtZXNzYWdlc1swXS5yb2xlID09PSAnc3lzdGVtJykge1xyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkTWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudDogYCR7bWVzc2FnZXNbMF0uY29udGVudH1cXG5cXG5IZXJlIGlzIGFkZGl0aW9uYWwgY29udGV4dDpcXG4ke2NvbnRleHRDb250ZW50fWBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZXMgPSBtZXNzYWdlcy5zbGljZSgxKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZE1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGBIZXJlIGlzIGNvbnRleHQgZm9yIG91ciBjb252ZXJzYXRpb246XFxuJHtjb250ZXh0Q29udGVudH1gXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBtZXNzYWdlcykge1xyXG4gICAgICAgIGNvbnN0IHByb2Nlc3NlZENvbnRlbnQgPSBhd2FpdCBwcm9jZXNzT2JzaWRpYW5MaW5rcyhtZXNzYWdlLmNvbnRlbnQsIGFwcCwgc2V0dGluZ3MsIG5ldyBTZXQoKSk7XHJcbiAgICAgICAgcHJvY2Vzc2VkTWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgIHJvbGU6IG1lc3NhZ2Uucm9sZSxcclxuICAgICAgICAgICAgY29udGVudDogcHJvY2Vzc2VkQ29udGVudFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIHByb2Nlc3NlZE1lc3NhZ2VzO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0Q29udGV4dE5vdGVzQ29udGVudChjb250ZXh0Tm90ZXNUZXh0OiBzdHJpbmcsIGFwcDogQXBwKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIHJldHVybiBwcm9jZXNzQ29udGV4dE5vdGVzKGNvbnRleHROb3Rlc1RleHQsIGFwcCk7XHJcbn1cclxuIiwgImltcG9ydCB7IE15UGx1Z2luU2V0dGluZ3MgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG4vKipcclxuICogR2VuZXJhdGUgdGhlIHN5c3RlbSBtZXNzYWdlIHdpdGggb3B0aW9uYWwgZGF0ZSBhbmQgdGltZSBpbmZvcm1hdGlvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFN5c3RlbU1lc3NhZ2Uoc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3MpOiBzdHJpbmcge1xyXG4gICAgbGV0IHN5c3RlbU1lc3NhZ2UgPSBzZXR0aW5ncy5zeXN0ZW1NZXNzYWdlO1xyXG5cclxuICAgIGlmIChzZXR0aW5ncy5pbmNsdWRlRGF0ZVdpdGhTeXN0ZW1NZXNzYWdlKSB7XHJcbiAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCkuc3BsaXQoJ1QnKVswXTtcclxuICAgICAgICBzeXN0ZW1NZXNzYWdlID0gYCR7c3lzdGVtTWVzc2FnZX1cXG5cXG5UaGUgY3VycmVudCBkYXRlIGlzICR7Y3VycmVudERhdGV9LmA7XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHNldHRpbmdzLmluY2x1ZGVUaW1lV2l0aFN5c3RlbU1lc3NhZ2UpIHtcclxuICAgICAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgICAgIGNvbnN0IHRpbWVab25lT2Zmc2V0ID0gbm93LmdldFRpbWV6b25lT2Zmc2V0KCk7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0SG91cnMgPSBNYXRoLmFicyh0aW1lWm9uZU9mZnNldCkgLyA2MDtcclxuICAgICAgICBjb25zdCBvZmZzZXRNaW51dGVzID0gTWF0aC5hYnModGltZVpvbmVPZmZzZXQpICUgNjA7XHJcbiAgICAgICAgY29uc3Qgc2lnbiA9IHRpbWVab25lT2Zmc2V0ID4gMCA/ICctJyA6ICcrJztcclxuXHJcbiAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBub3cudG9Mb2NhbGVUaW1lU3RyaW5nKCk7XHJcbiAgICAgICAgY29uc3QgdGltZVpvbmVTdHJpbmcgPSBgVVRDJHtzaWdufSR7b2Zmc2V0SG91cnMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfToke29mZnNldE1pbnV0ZXMudG9TdHJpbmcoKS5wYWRTdGFydCgyLCAnMCcpfWA7XHJcbiAgICAgICAgc3lzdGVtTWVzc2FnZSA9IGAke3N5c3RlbU1lc3NhZ2V9XFxuXFxuVGhlIGN1cnJlbnQgdGltZSBpcyAke2N1cnJlbnRUaW1lfSAke3RpbWVab25lU3RyaW5nfS5gO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBzeXN0ZW1NZXNzYWdlO1xyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFhLHNCQUlBLHdCQUdBLCtCQUdBO0FBVmI7QUFBQTtBQUFPLElBQU0sdUJBQXVCO0FBSTdCLElBQU0seUJBQXlCO0FBRy9CLElBQU0sZ0NBQWdDO0FBR3RDLElBQU0sOEJBQ1Q7QUFBQTtBQUFBOzs7QUNYSjtBQUFBO0FBQUE7QUFBQTtBQUFBLElBNE1hO0FBNU1iO0FBQUE7QUFBQTtBQTRNTyxJQUFNLG1CQUFxQztBQUFBLE1BQzlDLHNCQUFzQjtBQUFBLE1BQ3RCLFVBQVU7QUFBQSxNQUNWLGdCQUFnQjtBQUFBLFFBQ1osUUFBUTtBQUFBLFFBQ1IsT0FBTztBQUFBLFFBQ1AsaUJBQWlCLENBQUM7QUFBQSxNQUN0QjtBQUFBLE1BQ0EsbUJBQW1CO0FBQUEsUUFDZixRQUFRO0FBQUEsUUFDUixPQUFPO0FBQUEsUUFDUCxpQkFBaUIsQ0FBQztBQUFBLE1BQ3RCO0FBQUEsTUFDQSxnQkFB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O0FBQUEsRUFFQSxNQUFhLHVCQUF1QixrQkFBMkM7QUFDM0UsV0FBTyx1QkFBdUIsa0JBQWtCLEtBQUssR0FBRztBQUFBLEVBQzVEO0FBQ0o7IiwKICAibmFtZXMiOiBbInR5cGUiLCAic3RhdHVzIiwgImZldGNoIiwgIlJlcXVlc3QiLCAiUmVzcG9uc2UiLCAiSGVhZGVycyIsICJGb3JtRGF0YSIsICJCbG9iIiwgIkZpbGUiLCAiUmVhZGFibGVTdHJlYW0iLCAiX2EiLCAic3RyIiwgIlJlYWRhYmxlU3RyZWFtIiwgIl9hIiwgIl9hIiwgIkZpbGUiLCAidHlwZSIsICJqc29uIiwgIl9hIiwgImZldGNoIiwgIm9wdHMiLCAiUGFnZSIsICJyZXRyeU1lc3NhZ2UiLCAiX2EiLCAiX19jbGFzc1ByaXZhdGVGaWVsZFNldCIsICJfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0IiwgIl9hIiwgIl9CZXRhTWVzc2FnZVN0cmVhbV9nZXRGaW5hbE1lc3NhZ2UiLCAiX0JldGFNZXNzYWdlU3RyZWFtX2dldEZpbmFsVGV4dCIsICJfQmV0YU1lc3NhZ2VTdHJlYW1fYmVnaW5SZXF1ZXN0IiwgIl9CZXRhTWVzc2FnZVN0cmVhbV9hZGRTdHJlYW1FdmVudCIsICJfQmV0YU1lc3NhZ2VTdHJlYW1fZW5kUmVxdWVzdCIsICJfQmV0YU1lc3NhZ2VTdHJlYW1fYWNjdW11bGF0ZU1lc3NhZ2UiLCAiY2h1bmsiLCAiX2EiLCAiX2EiLCAiQmF0Y2hlcyIsICJpbml0X2JhdGNoZXMiLCAiY2hlY2tOZXZlciIsICJKU09OX0JVRl9QUk9QRVJUWSIsICJfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0IiwgIl9fY2xhc3NQcml2YXRlRmllbGRHZXQiLCAiX2EiLCAiX01lc3NhZ2VTdHJlYW1fZ2V0RmluYWxNZXNzYWdlIiwgIl9NZXNzYWdlU3RyZWFtX2dldEZpbmFsVGV4dCIsICJfTWVzc2FnZVN0cmVhbV9iZWdpblJlcXVlc3QiLCAiX01lc3NhZ2VTdHJlYW1fYWRkU3RyZWFtRXZlbnQiLCAiX01lc3NhZ2VTdHJlYW1fZW5kUmVxdWVzdCIsICJfTWVzc2FnZVN0cmVhbV9hY2N1bXVsYXRlTWVzc2FnZSIsICJjaHVuayIsICJNZXNzYWdlcyIsICJERVBSRUNBVEVEX01PREVMUyIsICJpbml0X21lc3NhZ2VzIiwgIkJhdGNoZXMiLCAiX2EiLCAiTW9kZWxzIiwgImluaXRfbW9kZWxzIiwgIl9hIiwgIk1lc3NhZ2VzIiwgIk1vZGVscyIsICJfYSIsICJfYSIsICJfYSIsICJfYSIsICJleGNlcHRpb24iLCAibWFwIiwgInNjaGVtYSIsICJ0eXBlIiwgInN0ciIsICJzdHJpbmciLCAiZXh0ZW5kIiwgImRlYnVnIiwgInByb2Nlc3NNZXNzYWdlcyIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgIkRFRkFVTFRfVElUTEVfUFJPTVBUIiwgIkRFRkFVTFRfU0VUVElOR1MiLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJ0aW1lc3RhbXAiLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJfYSIsICJjb250ZW50IiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAiVklFV19UWVBFX01PREVMX1NFVFRJTkdTIiwgIl9hIiwgImdlbmVyYXRlTm90ZVRpdGxlIiwgImdlbmVyYXRlWWFtbEF0dHJpYnV0ZSJdCn0K
