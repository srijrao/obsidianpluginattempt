/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// main.ts
var main_exports = {};
__export(main_exports, {
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// types.ts
var DEFAULT_SETTINGS = {
  referenceCurrentNote: false,
  provider: "openai",
  openaiSettings: {
    apiKey: "",
    model: "gpt-4o-mini",
    availableModels: []
  },
  anthropicSettings: {
    apiKey: "",
    model: "claude-3-5-sonnet-latest",
    availableModels: []
  },
  geminiSettings: {
    apiKey: "",
    model: "gemini-pro",
    availableModels: []
  },
  ollamaSettings: {
    serverUrl: "http://localhost:11434",
    model: "llama2",
    availableModels: []
  },
  systemMessage: "You are a helpful assistant.",
  temperature: 0.7,
  maxTokens: 1e3,
  includeDateWithSystemMessage: false,
  includeTimeWithSystemMessage: false,
  enableStreaming: true,
  autoOpenModelSettings: true,
  enableObsidianLinks: true,
  chatSeparator: "----",
  chatStartString: void 0,
  chatEndString: void 0,
  enableContextNotes: false,
  contextNotes: ""
};

// providers/base.ts
var ProviderError = class extends Error {
  constructor(type, message, statusCode) {
    super(message);
    __publicField(this, "type");
    __publicField(this, "statusCode");
    this.type = type;
    this.statusCode = statusCode;
    this.name = "ProviderError";
  }
};
var BaseProvider = class {
  /**
   * Handle common HTTP errors
   */
  handleHttpError(error) {
    if (error instanceof Response) {
      const status2 = error.status;
      switch (status2) {
        case 401:
          throw new ProviderError(
            "invalid_api_key" /* InvalidApiKey */,
            "Invalid API key",
            status2
          );
        case 429:
          throw new ProviderError(
            "rate_limit" /* RateLimit */,
            "Rate limit exceeded",
            status2
          );
        case 400:
          throw new ProviderError(
            "invalid_request" /* InvalidRequest */,
            "Invalid request",
            status2
          );
        case 500:
        case 502:
        case 503:
        case 504:
          throw new ProviderError(
            "server_error" /* ServerError */,
            "Server error occurred",
            status2
          );
        default:
          throw new ProviderError(
            "server_error" /* ServerError */,
            `Unknown error occurred: ${status2}`,
            status2
          );
      }
    }
    if (!error.response) {
      throw new ProviderError(
        "network_error" /* NetworkError */,
        "Network error occurred"
      );
    }
    const status = error.response.status;
    switch (status) {
      case 401:
        throw new ProviderError(
          "invalid_api_key" /* InvalidApiKey */,
          "Invalid API key",
          status
        );
      case 429:
        throw new ProviderError(
          "rate_limit" /* RateLimit */,
          "Rate limit exceeded",
          status
        );
      case 400:
        throw new ProviderError(
          "invalid_request" /* InvalidRequest */,
          "Invalid request",
          status
        );
      case 500:
      case 502:
      case 503:
      case 504:
        throw new ProviderError(
          "server_error" /* ServerError */,
          "Server error occurred",
          status
        );
      default:
        throw new ProviderError(
          "server_error" /* ServerError */,
          `Unknown error occurred: ${status}`,
          status
        );
    }
  }
  /**
   * Format error message for connection test results
   */
  formatErrorMessage(error) {
    if (error instanceof ProviderError) {
      switch (error.type) {
        case "invalid_api_key" /* InvalidApiKey */:
          return "Invalid API key. Please check your credentials.";
        case "rate_limit" /* RateLimit */:
          return "Rate limit exceeded. Please try again later.";
        case "network_error" /* NetworkError */:
          return "Network error. Please check your internet connection.";
        default:
          return error.message;
      }
    }
    return error.message || "An unknown error occurred";
  }
  /**
   * Create a standard error response for connection tests
   */
  createErrorResponse(error) {
    return {
      success: false,
      message: this.formatErrorMessage(error)
    };
  }
};

// node_modules/@anthropic-ai/sdk/version.mjs
var VERSION = "0.36.3";

// node_modules/@anthropic-ai/sdk/_shims/registry.mjs
var auto = false;
var kind = void 0;
var fetch2 = void 0;
var Request2 = void 0;
var Response2 = void 0;
var Headers2 = void 0;
var FormData2 = void 0;
var Blob2 = void 0;
var File2 = void 0;
var ReadableStream2 = void 0;
var getMultipartRequestOptions = void 0;
var getDefaultAgent = void 0;
var fileFromPath = void 0;
var isFsReadStream = void 0;
function setShims(shims, options = { auto: false }) {
  if (auto) {
    throw new Error(`you must \`import '@anthropic-ai/sdk/shims/${shims.kind}'\` before importing anything else from @anthropic-ai/sdk`);
  }
  if (kind) {
    throw new Error(`can't \`import '@anthropic-ai/sdk/shims/${shims.kind}'\` after \`import '@anthropic-ai/sdk/shims/${kind}'\``);
  }
  auto = options.auto;
  kind = shims.kind;
  fetch2 = shims.fetch;
  Request2 = shims.Request;
  Response2 = shims.Response;
  Headers2 = shims.Headers;
  FormData2 = shims.FormData;
  Blob2 = shims.Blob;
  File2 = shims.File;
  ReadableStream2 = shims.ReadableStream;
  getMultipartRequestOptions = shims.getMultipartRequestOptions;
  getDefaultAgent = shims.getDefaultAgent;
  fileFromPath = shims.fileFromPath;
  isFsReadStream = shims.isFsReadStream;
}

// node_modules/@anthropic-ai/sdk/_shims/MultipartBody.mjs
var MultipartBody = class {
  constructor(body) {
    this.body = body;
  }
  get [Symbol.toStringTag]() {
    return "MultipartBody";
  }
};

// node_modules/@anthropic-ai/sdk/_shims/web-runtime.mjs
function getRuntime({ manuallyImported } = {}) {
  const recommendation = manuallyImported ? `You may need to use polyfills` : `Add one of these imports before your first \`import \u2026 from '@anthropic-ai/sdk'\`:
- \`import '@anthropic-ai/sdk/shims/node'\` (if you're running on Node)
- \`import '@anthropic-ai/sdk/shims/web'\` (otherwise)
`;
  let _fetch, _Request, _Response, _Headers;
  try {
    _fetch = fetch;
    _Request = Request;
    _Response = Response;
    _Headers = Headers;
  } catch (error) {
    throw new Error(`this environment is missing the following Web Fetch API type: ${error.message}. ${recommendation}`);
  }
  return {
    kind: "web",
    fetch: _fetch,
    Request: _Request,
    Response: _Response,
    Headers: _Headers,
    FormData: (
      // @ts-ignore
      typeof FormData !== "undefined" ? FormData : class FormData {
        // @ts-ignore
        constructor() {
          throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${recommendation}`);
        }
      }
    ),
    Blob: typeof Blob !== "undefined" ? Blob : class Blob {
      constructor() {
        throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${recommendation}`);
      }
    },
    File: (
      // @ts-ignore
      typeof File !== "undefined" ? File : class File {
        // @ts-ignore
        constructor() {
          throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${recommendation}`);
        }
      }
    ),
    ReadableStream: (
      // @ts-ignore
      typeof ReadableStream !== "undefined" ? ReadableStream : class ReadableStream {
        // @ts-ignore
        constructor() {
          throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${recommendation}`);
        }
      }
    ),
    getMultipartRequestOptions: async (form, opts) => ({
      ...opts,
      body: new MultipartBody(form)
    }),
    getDefaultAgent: (url) => void 0,
    fileFromPath: () => {
      throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/anthropics/anthropic-sdk-typescript#file-uploads");
    },
    isFsReadStream: (value) => false
  };
}

// node_modules/@anthropic-ai/sdk/_shims/index.mjs
if (!kind) setShims(getRuntime(), { auto: true });

// node_modules/@anthropic-ai/sdk/error.mjs
var AnthropicError = class extends Error {
};
var APIError = class _APIError extends AnthropicError {
  constructor(status, error, message, headers) {
    super(`${_APIError.makeMessage(status, error, message)}`);
    this.status = status;
    this.headers = headers;
    this.request_id = headers == null ? void 0 : headers["request-id"];
    this.error = error;
  }
  static makeMessage(status, error, message) {
    const msg = (error == null ? void 0 : error.message) ? typeof error.message === "string" ? error.message : JSON.stringify(error.message) : error ? JSON.stringify(error) : message;
    if (status && msg) {
      return `${status} ${msg}`;
    }
    if (status) {
      return `${status} status code (no body)`;
    }
    if (msg) {
      return msg;
    }
    return "(no status code or body)";
  }
  static generate(status, errorResponse, message, headers) {
    if (!status || !headers) {
      return new APIConnectionError({ message, cause: castToError(errorResponse) });
    }
    const error = errorResponse;
    if (status === 400) {
      return new BadRequestError(status, error, message, headers);
    }
    if (status === 401) {
      return new AuthenticationError(status, error, message, headers);
    }
    if (status === 403) {
      return new PermissionDeniedError(status, error, message, headers);
    }
    if (status === 404) {
      return new NotFoundError(status, error, message, headers);
    }
    if (status === 409) {
      return new ConflictError(status, error, message, headers);
    }
    if (status === 422) {
      return new UnprocessableEntityError(status, error, message, headers);
    }
    if (status === 429) {
      return new RateLimitError(status, error, message, headers);
    }
    if (status >= 500) {
      return new InternalServerError(status, error, message, headers);
    }
    return new _APIError(status, error, message, headers);
  }
};
var APIUserAbortError = class extends APIError {
  constructor({ message } = {}) {
    super(void 0, void 0, message || "Request was aborted.", void 0);
  }
};
var APIConnectionError = class extends APIError {
  constructor({ message, cause }) {
    super(void 0, void 0, message || "Connection error.", void 0);
    if (cause)
      this.cause = cause;
  }
};
var APIConnectionTimeoutError = class extends APIConnectionError {
  constructor({ message } = {}) {
    super({ message: message != null ? message : "Request timed out." });
  }
};
var BadRequestError = class extends APIError {
};
var AuthenticationError = class extends APIError {
};
var PermissionDeniedError = class extends APIError {
};
var NotFoundError = class extends APIError {
};
var ConflictError = class extends APIError {
};
var UnprocessableEntityError = class extends APIError {
};
var RateLimitError = class extends APIError {
};
var InternalServerError = class extends APIError {
};

// node_modules/@anthropic-ai/sdk/internal/decoders/line.mjs
var LineDecoder = class _LineDecoder {
  constructor() {
    this.buffer = [];
    this.trailingCR = false;
  }
  decode(chunk) {
    let text = this.decodeText(chunk);
    if (this.trailingCR) {
      text = "\r" + text;
      this.trailingCR = false;
    }
    if (text.endsWith("\r")) {
      this.trailingCR = true;
      text = text.slice(0, -1);
    }
    if (!text) {
      return [];
    }
    const trailingNewline = _LineDecoder.NEWLINE_CHARS.has(text[text.length - 1] || "");
    let lines = text.split(_LineDecoder.NEWLINE_REGEXP);
    if (trailingNewline) {
      lines.pop();
    }
    if (lines.length === 1 && !trailingNewline) {
      this.buffer.push(lines[0]);
      return [];
    }
    if (this.buffer.length > 0) {
      lines = [this.buffer.join("") + lines[0], ...lines.slice(1)];
      this.buffer = [];
    }
    if (!trailingNewline) {
      this.buffer = [lines.pop() || ""];
    }
    return lines;
  }
  decodeText(bytes) {
    var _a2;
    if (bytes == null)
      return "";
    if (typeof bytes === "string")
      return bytes;
    if (typeof Buffer !== "undefined") {
      if (bytes instanceof Buffer) {
        return bytes.toString();
      }
      if (bytes instanceof Uint8Array) {
        return Buffer.from(bytes).toString();
      }
      throw new AnthropicError(`Unexpected: received non-Uint8Array (${bytes.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`);
    }
    if (typeof TextDecoder !== "undefined") {
      if (bytes instanceof Uint8Array || bytes instanceof ArrayBuffer) {
        (_a2 = this.textDecoder) != null ? _a2 : this.textDecoder = new TextDecoder("utf8");
        return this.textDecoder.decode(bytes);
      }
      throw new AnthropicError(`Unexpected: received non-Uint8Array/ArrayBuffer (${bytes.constructor.name}) in a web platform. Please report this error.`);
    }
    throw new AnthropicError(`Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`);
  }
  flush() {
    if (!this.buffer.length && !this.trailingCR) {
      return [];
    }
    const lines = [this.buffer.join("")];
    this.buffer = [];
    this.trailingCR = false;
    return lines;
  }
};
LineDecoder.NEWLINE_CHARS = /* @__PURE__ */ new Set(["\n", "\r"]);
LineDecoder.NEWLINE_REGEXP = /\r\n|[\n\r]/g;

// node_modules/@anthropic-ai/sdk/internal/stream-utils.mjs
function ReadableStreamToAsyncIterable(stream) {
  if (stream[Symbol.asyncIterator])
    return stream;
  const reader = stream.getReader();
  return {
    async next() {
      try {
        const result = await reader.read();
        if (result == null ? void 0 : result.done)
          reader.releaseLock();
        return result;
      } catch (e) {
        reader.releaseLock();
        throw e;
      }
    },
    async return() {
      const cancelPromise = reader.cancel();
      reader.releaseLock();
      await cancelPromise;
      return { done: true, value: void 0 };
    },
    [Symbol.asyncIterator]() {
      return this;
    }
  };
}

// node_modules/@anthropic-ai/sdk/streaming.mjs
var Stream = class _Stream {
  constructor(iterator, controller) {
    this.iterator = iterator;
    this.controller = controller;
  }
  static fromSSEResponse(response, controller) {
    let consumed = false;
    async function* iterator() {
      if (consumed) {
        throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");
      }
      consumed = true;
      let done = false;
      try {
        for await (const sse of _iterSSEMessages(response, controller)) {
          if (sse.event === "completion") {
            try {
              yield JSON.parse(sse.data);
            } catch (e) {
              console.error(`Could not parse message into JSON:`, sse.data);
              console.error(`From chunk:`, sse.raw);
              throw e;
            }
          }
          if (sse.event === "message_start" || sse.event === "message_delta" || sse.event === "message_stop" || sse.event === "content_block_start" || sse.event === "content_block_delta" || sse.event === "content_block_stop") {
            try {
              yield JSON.parse(sse.data);
            } catch (e) {
              console.error(`Could not parse message into JSON:`, sse.data);
              console.error(`From chunk:`, sse.raw);
              throw e;
            }
          }
          if (sse.event === "ping") {
            continue;
          }
          if (sse.event === "error") {
            throw APIError.generate(void 0, `SSE Error: ${sse.data}`, sse.data, createResponseHeaders(response.headers));
          }
        }
        done = true;
      } catch (e) {
        if (e instanceof Error && e.name === "AbortError")
          return;
        throw e;
      } finally {
        if (!done)
          controller.abort();
      }
    }
    return new _Stream(iterator, controller);
  }
  /**
   * Generates a Stream from a newline-separated ReadableStream
   * where each item is a JSON value.
   */
  static fromReadableStream(readableStream, controller) {
    let consumed = false;
    async function* iterLines() {
      const lineDecoder = new LineDecoder();
      const iter = ReadableStreamToAsyncIterable(readableStream);
      for await (const chunk of iter) {
        for (const line of lineDecoder.decode(chunk)) {
          yield line;
        }
      }
      for (const line of lineDecoder.flush()) {
        yield line;
      }
    }
    async function* iterator() {
      if (consumed) {
        throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");
      }
      consumed = true;
      let done = false;
      try {
        for await (const line of iterLines()) {
          if (done)
            continue;
          if (line)
            yield JSON.parse(line);
        }
        done = true;
      } catch (e) {
        if (e instanceof Error && e.name === "AbortError")
          return;
        throw e;
      } finally {
        if (!done)
          controller.abort();
      }
    }
    return new _Stream(iterator, controller);
  }
  [Symbol.asyncIterator]() {
    return this.iterator();
  }
  /**
   * Splits the stream into two streams which can be
   * independently read from at different speeds.
   */
  tee() {
    const left = [];
    const right = [];
    const iterator = this.iterator();
    const teeIterator = (queue) => {
      return {
        next: () => {
          if (queue.length === 0) {
            const result = iterator.next();
            left.push(result);
            right.push(result);
          }
          return queue.shift();
        }
      };
    };
    return [
      new _Stream(() => teeIterator(left), this.controller),
      new _Stream(() => teeIterator(right), this.controller)
    ];
  }
  /**
   * Converts this stream to a newline-separated ReadableStream of
   * JSON stringified values in the stream
   * which can be turned back into a Stream with `Stream.fromReadableStream()`.
   */
  toReadableStream() {
    const self = this;
    let iter;
    const encoder = new TextEncoder();
    return new ReadableStream2({
      async start() {
        iter = self[Symbol.asyncIterator]();
      },
      async pull(ctrl) {
        try {
          const { value, done } = await iter.next();
          if (done)
            return ctrl.close();
          const bytes = encoder.encode(JSON.stringify(value) + "\n");
          ctrl.enqueue(bytes);
        } catch (err) {
          ctrl.error(err);
        }
      },
      async cancel() {
        var _a2;
        await ((_a2 = iter.return) == null ? void 0 : _a2.call(iter));
      }
    });
  }
};
async function* _iterSSEMessages(response, controller) {
  if (!response.body) {
    controller.abort();
    throw new AnthropicError(`Attempted to iterate over a response with no body`);
  }
  const sseDecoder = new SSEDecoder();
  const lineDecoder = new LineDecoder();
  const iter = ReadableStreamToAsyncIterable(response.body);
  for await (const sseChunk of iterSSEChunks(iter)) {
    for (const line of lineDecoder.decode(sseChunk)) {
      const sse = sseDecoder.decode(line);
      if (sse)
        yield sse;
    }
  }
  for (const line of lineDecoder.flush()) {
    const sse = sseDecoder.decode(line);
    if (sse)
      yield sse;
  }
}
async function* iterSSEChunks(iterator) {
  let data = new Uint8Array();
  for await (const chunk of iterator) {
    if (chunk == null) {
      continue;
    }
    const binaryChunk = chunk instanceof ArrayBuffer ? new Uint8Array(chunk) : typeof chunk === "string" ? new TextEncoder().encode(chunk) : chunk;
    let newData = new Uint8Array(data.length + binaryChunk.length);
    newData.set(data);
    newData.set(binaryChunk, data.length);
    data = newData;
    let patternIndex;
    while ((patternIndex = findDoubleNewlineIndex(data)) !== -1) {
      yield data.slice(0, patternIndex);
      data = data.slice(patternIndex);
    }
  }
  if (data.length > 0) {
    yield data;
  }
}
function findDoubleNewlineIndex(buffer) {
  const newline = 10;
  const carriage = 13;
  for (let i = 0; i < buffer.length - 2; i++) {
    if (buffer[i] === newline && buffer[i + 1] === newline) {
      return i + 2;
    }
    if (buffer[i] === carriage && buffer[i + 1] === carriage) {
      return i + 2;
    }
    if (buffer[i] === carriage && buffer[i + 1] === newline && i + 3 < buffer.length && buffer[i + 2] === carriage && buffer[i + 3] === newline) {
      return i + 4;
    }
  }
  return -1;
}
var SSEDecoder = class {
  constructor() {
    this.event = null;
    this.data = [];
    this.chunks = [];
  }
  decode(line) {
    if (line.endsWith("\r")) {
      line = line.substring(0, line.length - 1);
    }
    if (!line) {
      if (!this.event && !this.data.length)
        return null;
      const sse = {
        event: this.event,
        data: this.data.join("\n"),
        raw: this.chunks
      };
      this.event = null;
      this.data = [];
      this.chunks = [];
      return sse;
    }
    this.chunks.push(line);
    if (line.startsWith(":")) {
      return null;
    }
    let [fieldname, _, value] = partition(line, ":");
    if (value.startsWith(" ")) {
      value = value.substring(1);
    }
    if (fieldname === "event") {
      this.event = value;
    } else if (fieldname === "data") {
      this.data.push(value);
    }
    return null;
  }
};
function partition(str, delimiter) {
  const index = str.indexOf(delimiter);
  if (index !== -1) {
    return [str.substring(0, index), delimiter, str.substring(index + delimiter.length)];
  }
  return [str, "", ""];
}

// node_modules/@anthropic-ai/sdk/uploads.mjs
var isResponseLike = (value) => value != null && typeof value === "object" && typeof value.url === "string" && typeof value.blob === "function";
var isFileLike = (value) => value != null && typeof value === "object" && typeof value.name === "string" && typeof value.lastModified === "number" && isBlobLike(value);
var isBlobLike = (value) => value != null && typeof value === "object" && typeof value.size === "number" && typeof value.type === "string" && typeof value.text === "function" && typeof value.slice === "function" && typeof value.arrayBuffer === "function";
async function toFile(value, name, options) {
  var _a2, _b, _c;
  value = await value;
  if (isFileLike(value)) {
    return value;
  }
  if (isResponseLike(value)) {
    const blob = await value.blob();
    name || (name = (_a2 = new URL(value.url).pathname.split(/[\\/]/).pop()) != null ? _a2 : "unknown_file");
    const data = isBlobLike(blob) ? [await blob.arrayBuffer()] : [blob];
    return new File2(data, name, options);
  }
  const bits = await getBytes(value);
  name || (name = (_b = getName(value)) != null ? _b : "unknown_file");
  if (!(options == null ? void 0 : options.type)) {
    const type = (_c = bits[0]) == null ? void 0 : _c.type;
    if (typeof type === "string") {
      options = { ...options, type };
    }
  }
  return new File2(bits, name, options);
}
async function getBytes(value) {
  var _a2;
  let parts = [];
  if (typeof value === "string" || ArrayBuffer.isView(value) || // includes Uint8Array, Buffer, etc.
  value instanceof ArrayBuffer) {
    parts.push(value);
  } else if (isBlobLike(value)) {
    parts.push(await value.arrayBuffer());
  } else if (isAsyncIterableIterator(value)) {
    for await (const chunk of value) {
      parts.push(chunk);
    }
  } else {
    throw new Error(`Unexpected data type: ${typeof value}; constructor: ${(_a2 = value == null ? void 0 : value.constructor) == null ? void 0 : _a2.name}; props: ${propsForError(value)}`);
  }
  return parts;
}
function propsForError(value) {
  const props = Object.getOwnPropertyNames(value);
  return `[${props.map((p) => `"${p}"`).join(", ")}]`;
}
function getName(value) {
  var _a2;
  return getStringFromMaybeBuffer(value.name) || getStringFromMaybeBuffer(value.filename) || // For fs.ReadStream
  ((_a2 = getStringFromMaybeBuffer(value.path)) == null ? void 0 : _a2.split(/[\\/]/).pop());
}
var getStringFromMaybeBuffer = (x) => {
  if (typeof x === "string")
    return x;
  if (typeof Buffer !== "undefined" && x instanceof Buffer)
    return String(x);
  return void 0;
};
var isAsyncIterableIterator = (value) => value != null && typeof value === "object" && typeof value[Symbol.asyncIterator] === "function";
var isMultipartBody = (body) => body && typeof body === "object" && body.body && body[Symbol.toStringTag] === "MultipartBody";

// node_modules/@anthropic-ai/sdk/core.mjs
var __classPrivateFieldSet = function(receiver, state, value, kind2, f) {
  if (kind2 === "m") throw new TypeError("Private method is not writable");
  if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var __classPrivateFieldGet = function(receiver, state, kind2, f) {
  if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _AbstractPage_client;
async function defaultParseResponse(props) {
  const { response } = props;
  if (props.options.stream) {
    debug("response", response.status, response.url, response.headers, response.body);
    if (props.options.__streamClass) {
      return props.options.__streamClass.fromSSEResponse(response, props.controller);
    }
    return Stream.fromSSEResponse(response, props.controller);
  }
  if (response.status === 204) {
    return null;
  }
  if (props.options.__binaryResponse) {
    return response;
  }
  const contentType = response.headers.get("content-type");
  const isJSON = (contentType == null ? void 0 : contentType.includes("application/json")) || (contentType == null ? void 0 : contentType.includes("application/vnd.api+json"));
  if (isJSON) {
    const json = await response.json();
    debug("response", response.status, response.url, response.headers, json);
    return _addRequestID(json, response);
  }
  const text = await response.text();
  debug("response", response.status, response.url, response.headers, text);
  return text;
}
function _addRequestID(value, response) {
  if (!value || typeof value !== "object" || Array.isArray(value)) {
    return value;
  }
  return Object.defineProperty(value, "_request_id", {
    value: response.headers.get("request-id"),
    enumerable: false
  });
}
var APIPromise = class _APIPromise extends Promise {
  constructor(responsePromise, parseResponse = defaultParseResponse) {
    super((resolve) => {
      resolve(null);
    });
    this.responsePromise = responsePromise;
    this.parseResponse = parseResponse;
  }
  _thenUnwrap(transform) {
    return new _APIPromise(this.responsePromise, async (props) => _addRequestID(transform(await this.parseResponse(props), props), props.response));
  }
  /**
   * Gets the raw `Response` instance instead of parsing the response
   * data.
   *
   * If you want to parse the response body but still get the `Response`
   * instance, you can use {@link withResponse()}.
   *
   * ðŸ‘‹ Getting the wrong TypeScript type for `Response`?
   * Try setting `"moduleResolution": "NodeNext"` if you can,
   * or add one of these imports before your first `import â€¦ from '@anthropic-ai/sdk'`:
   * - `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)
   * - `import '@anthropic-ai/sdk/shims/web'` (otherwise)
   */
  asResponse() {
    return this.responsePromise.then((p) => p.response);
  }
  /**
   * Gets the parsed response data, the raw `Response` instance and the ID of the request,
   * returned vie the `request-id` header which is useful for debugging requests and resporting
   * issues to Anthropic.
   *
   * If you just want to get the raw `Response` instance without parsing it,
   * you can use {@link asResponse()}.
   *
   * ðŸ‘‹ Getting the wrong TypeScript type for `Response`?
   * Try setting `"moduleResolution": "NodeNext"` if you can,
   * or add one of these imports before your first `import â€¦ from '@anthropic-ai/sdk'`:
   * - `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)
   * - `import '@anthropic-ai/sdk/shims/web'` (otherwise)
   */
  async withResponse() {
    const [data, response] = await Promise.all([this.parse(), this.asResponse()]);
    return { data, response, request_id: response.headers.get("request-id") };
  }
  parse() {
    if (!this.parsedPromise) {
      this.parsedPromise = this.responsePromise.then(this.parseResponse);
    }
    return this.parsedPromise;
  }
  then(onfulfilled, onrejected) {
    return this.parse().then(onfulfilled, onrejected);
  }
  catch(onrejected) {
    return this.parse().catch(onrejected);
  }
  finally(onfinally) {
    return this.parse().finally(onfinally);
  }
};
var APIClient = class {
  constructor({
    baseURL,
    maxRetries = 2,
    timeout = 6e5,
    // 10 minutes
    httpAgent,
    fetch: overriddenFetch
  }) {
    this.baseURL = baseURL;
    this.maxRetries = validatePositiveInteger("maxRetries", maxRetries);
    this.timeout = validatePositiveInteger("timeout", timeout);
    this.httpAgent = httpAgent;
    this.fetch = overriddenFetch != null ? overriddenFetch : fetch2;
  }
  authHeaders(opts) {
    return {};
  }
  /**
   * Override this to add your own default headers, for example:
   *
   *  {
   *    ...super.defaultHeaders(),
   *    Authorization: 'Bearer 123',
   *  }
   */
  defaultHeaders(opts) {
    return {
      Accept: "application/json",
      "Content-Type": "application/json",
      "User-Agent": this.getUserAgent(),
      ...getPlatformHeaders(),
      ...this.authHeaders(opts)
    };
  }
  /**
   * Override this to add your own headers validation:
   */
  validateHeaders(headers, customHeaders) {
  }
  defaultIdempotencyKey() {
    return `stainless-node-retry-${uuid4()}`;
  }
  get(path, opts) {
    return this.methodRequest("get", path, opts);
  }
  post(path, opts) {
    return this.methodRequest("post", path, opts);
  }
  patch(path, opts) {
    return this.methodRequest("patch", path, opts);
  }
  put(path, opts) {
    return this.methodRequest("put", path, opts);
  }
  delete(path, opts) {
    return this.methodRequest("delete", path, opts);
  }
  methodRequest(method, path, opts) {
    return this.request(Promise.resolve(opts).then(async (opts2) => {
      const body = opts2 && isBlobLike(opts2 == null ? void 0 : opts2.body) ? new DataView(await opts2.body.arrayBuffer()) : (opts2 == null ? void 0 : opts2.body) instanceof DataView ? opts2.body : (opts2 == null ? void 0 : opts2.body) instanceof ArrayBuffer ? new DataView(opts2.body) : opts2 && ArrayBuffer.isView(opts2 == null ? void 0 : opts2.body) ? new DataView(opts2.body.buffer) : opts2 == null ? void 0 : opts2.body;
      return { method, path, ...opts2, body };
    }));
  }
  getAPIList(path, Page2, opts) {
    return this.requestAPIList(Page2, { method: "get", path, ...opts });
  }
  calculateContentLength(body) {
    if (typeof body === "string") {
      if (typeof Buffer !== "undefined") {
        return Buffer.byteLength(body, "utf8").toString();
      }
      if (typeof TextEncoder !== "undefined") {
        const encoder = new TextEncoder();
        const encoded = encoder.encode(body);
        return encoded.length.toString();
      }
    } else if (ArrayBuffer.isView(body)) {
      return body.byteLength.toString();
    }
    return null;
  }
  buildRequest(options, { retryCount = 0 } = {}) {
    var _a2, _b, _c, _d, _e, _f;
    const { method, path, query, headers = {} } = options;
    const body = ArrayBuffer.isView(options.body) || options.__binaryRequest && typeof options.body === "string" ? options.body : isMultipartBody(options.body) ? options.body.body : options.body ? JSON.stringify(options.body, null, 2) : null;
    const contentLength = this.calculateContentLength(body);
    const url = this.buildURL(path, query);
    if ("timeout" in options)
      validatePositiveInteger("timeout", options.timeout);
    const timeout = (_a2 = options.timeout) != null ? _a2 : this.timeout;
    const httpAgent = (_c = (_b = options.httpAgent) != null ? _b : this.httpAgent) != null ? _c : getDefaultAgent(url);
    const minAgentTimeout = timeout + 1e3;
    if (typeof ((_d = httpAgent == null ? void 0 : httpAgent.options) == null ? void 0 : _d.timeout) === "number" && minAgentTimeout > ((_e = httpAgent.options.timeout) != null ? _e : 0)) {
      httpAgent.options.timeout = minAgentTimeout;
    }
    if (this.idempotencyHeader && method !== "get") {
      if (!options.idempotencyKey)
        options.idempotencyKey = this.defaultIdempotencyKey();
      headers[this.idempotencyHeader] = options.idempotencyKey;
    }
    const reqHeaders = this.buildHeaders({ options, headers, contentLength, retryCount });
    const req = {
      method,
      ...body && { body },
      headers: reqHeaders,
      ...httpAgent && { agent: httpAgent },
      // @ts-ignore node-fetch uses a custom AbortSignal type that is
      // not compatible with standard web types
      signal: (_f = options.signal) != null ? _f : null
    };
    return { req, url, timeout };
  }
  buildHeaders({ options, headers, contentLength, retryCount }) {
    const reqHeaders = {};
    if (contentLength) {
      reqHeaders["content-length"] = contentLength;
    }
    const defaultHeaders = this.defaultHeaders(options);
    applyHeadersMut(reqHeaders, defaultHeaders);
    applyHeadersMut(reqHeaders, headers);
    if (isMultipartBody(options.body) && kind !== "node") {
      delete reqHeaders["content-type"];
    }
    if (getHeader(defaultHeaders, "x-stainless-retry-count") === void 0 && getHeader(headers, "x-stainless-retry-count") === void 0) {
      reqHeaders["x-stainless-retry-count"] = String(retryCount);
    }
    this.validateHeaders(reqHeaders, headers);
    return reqHeaders;
  }
  /**
   * Used as a callback for mutating the given `FinalRequestOptions` object.
   */
  async prepareOptions(options) {
  }
  /**
   * Used as a callback for mutating the given `RequestInit` object.
   *
   * This is useful for cases where you want to add certain headers based off of
   * the request properties, e.g. `method` or `url`.
   */
  async prepareRequest(request, { url, options }) {
  }
  parseHeaders(headers) {
    return !headers ? {} : Symbol.iterator in headers ? Object.fromEntries(Array.from(headers).map((header) => [...header])) : { ...headers };
  }
  makeStatusError(status, error, message, headers) {
    return APIError.generate(status, error, message, headers);
  }
  request(options, remainingRetries = null) {
    return new APIPromise(this.makeRequest(options, remainingRetries));
  }
  async makeRequest(optionsInput, retriesRemaining) {
    var _a2, _b, _c;
    const options = await optionsInput;
    const maxRetries = (_a2 = options.maxRetries) != null ? _a2 : this.maxRetries;
    if (retriesRemaining == null) {
      retriesRemaining = maxRetries;
    }
    await this.prepareOptions(options);
    const { req, url, timeout } = this.buildRequest(options, { retryCount: maxRetries - retriesRemaining });
    await this.prepareRequest(req, { url, options });
    debug("request", url, options, req.headers);
    if ((_b = options.signal) == null ? void 0 : _b.aborted) {
      throw new APIUserAbortError();
    }
    const controller = new AbortController();
    const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(castToError);
    if (response instanceof Error) {
      if ((_c = options.signal) == null ? void 0 : _c.aborted) {
        throw new APIUserAbortError();
      }
      if (retriesRemaining) {
        return this.retryRequest(options, retriesRemaining);
      }
      if (response.name === "AbortError") {
        throw new APIConnectionTimeoutError();
      }
      throw new APIConnectionError({ cause: response });
    }
    const responseHeaders = createResponseHeaders(response.headers);
    if (!response.ok) {
      if (retriesRemaining && this.shouldRetry(response)) {
        const retryMessage2 = `retrying, ${retriesRemaining} attempts remaining`;
        debug(`response (error; ${retryMessage2})`, response.status, url, responseHeaders);
        return this.retryRequest(options, retriesRemaining, responseHeaders);
      }
      const errText = await response.text().catch((e) => castToError(e).message);
      const errJSON = safeJSON(errText);
      const errMessage = errJSON ? void 0 : errText;
      const retryMessage = retriesRemaining ? `(error; no more retries left)` : `(error; not retryable)`;
      debug(`response (error; ${retryMessage})`, response.status, url, responseHeaders, errMessage);
      const err = this.makeStatusError(response.status, errJSON, errMessage, responseHeaders);
      throw err;
    }
    return { response, options, controller };
  }
  requestAPIList(Page2, options) {
    const request = this.makeRequest(options, null);
    return new PagePromise(this, request, Page2);
  }
  buildURL(path, query) {
    const url = isAbsoluteURL(path) ? new URL(path) : new URL(this.baseURL + (this.baseURL.endsWith("/") && path.startsWith("/") ? path.slice(1) : path));
    const defaultQuery = this.defaultQuery();
    if (!isEmptyObj(defaultQuery)) {
      query = { ...defaultQuery, ...query };
    }
    if (typeof query === "object" && query && !Array.isArray(query)) {
      url.search = this.stringifyQuery(query);
    }
    return url.toString();
  }
  stringifyQuery(query) {
    return Object.entries(query).filter(([_, value]) => typeof value !== "undefined").map(([key, value]) => {
      if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") {
        return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;
      }
      if (value === null) {
        return `${encodeURIComponent(key)}=`;
      }
      throw new AnthropicError(`Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`);
    }).join("&");
  }
  async fetchWithTimeout(url, init, ms, controller) {
    const { signal, ...options } = init || {};
    if (signal)
      signal.addEventListener("abort", () => controller.abort());
    const timeout = setTimeout(() => controller.abort(), ms);
    const fetchOptions = {
      signal: controller.signal,
      ...options
    };
    if (fetchOptions.method) {
      fetchOptions.method = fetchOptions.method.toUpperCase();
    }
    return (
      // use undefined this binding; fetch errors if bound to something else in browser/cloudflare
      this.fetch.call(void 0, url, fetchOptions).finally(() => {
        clearTimeout(timeout);
      })
    );
  }
  shouldRetry(response) {
    const shouldRetryHeader = response.headers.get("x-should-retry");
    if (shouldRetryHeader === "true")
      return true;
    if (shouldRetryHeader === "false")
      return false;
    if (response.status === 408)
      return true;
    if (response.status === 409)
      return true;
    if (response.status === 429)
      return true;
    if (response.status >= 500)
      return true;
    return false;
  }
  async retryRequest(options, retriesRemaining, responseHeaders) {
    var _a2;
    let timeoutMillis;
    const retryAfterMillisHeader = responseHeaders == null ? void 0 : responseHeaders["retry-after-ms"];
    if (retryAfterMillisHeader) {
      const timeoutMs = parseFloat(retryAfterMillisHeader);
      if (!Number.isNaN(timeoutMs)) {
        timeoutMillis = timeoutMs;
      }
    }
    const retryAfterHeader = responseHeaders == null ? void 0 : responseHeaders["retry-after"];
    if (retryAfterHeader && !timeoutMillis) {
      const timeoutSeconds = parseFloat(retryAfterHeader);
      if (!Number.isNaN(timeoutSeconds)) {
        timeoutMillis = timeoutSeconds * 1e3;
      } else {
        timeoutMillis = Date.parse(retryAfterHeader) - Date.now();
      }
    }
    if (!(timeoutMillis && 0 <= timeoutMillis && timeoutMillis < 60 * 1e3)) {
      const maxRetries = (_a2 = options.maxRetries) != null ? _a2 : this.maxRetries;
      timeoutMillis = this.calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries);
    }
    await sleep(timeoutMillis);
    return this.makeRequest(options, retriesRemaining - 1);
  }
  calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries) {
    const initialRetryDelay = 0.5;
    const maxRetryDelay = 8;
    const numRetries = maxRetries - retriesRemaining;
    const sleepSeconds = Math.min(initialRetryDelay * Math.pow(2, numRetries), maxRetryDelay);
    const jitter = 1 - Math.random() * 0.25;
    return sleepSeconds * jitter * 1e3;
  }
  getUserAgent() {
    return `${this.constructor.name}/JS ${VERSION}`;
  }
};
var AbstractPage = class {
  constructor(client, response, body, options) {
    _AbstractPage_client.set(this, void 0);
    __classPrivateFieldSet(this, _AbstractPage_client, client, "f");
    this.options = options;
    this.response = response;
    this.body = body;
  }
  hasNextPage() {
    const items = this.getPaginatedItems();
    if (!items.length)
      return false;
    return this.nextPageInfo() != null;
  }
  async getNextPage() {
    const nextInfo = this.nextPageInfo();
    if (!nextInfo) {
      throw new AnthropicError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");
    }
    const nextOptions = { ...this.options };
    if ("params" in nextInfo && typeof nextOptions.query === "object") {
      nextOptions.query = { ...nextOptions.query, ...nextInfo.params };
    } else if ("url" in nextInfo) {
      const params = [...Object.entries(nextOptions.query || {}), ...nextInfo.url.searchParams.entries()];
      for (const [key, value] of params) {
        nextInfo.url.searchParams.set(key, value);
      }
      nextOptions.query = void 0;
      nextOptions.path = nextInfo.url.toString();
    }
    return await __classPrivateFieldGet(this, _AbstractPage_client, "f").requestAPIList(this.constructor, nextOptions);
  }
  async *iterPages() {
    let page = this;
    yield page;
    while (page.hasNextPage()) {
      page = await page.getNextPage();
      yield page;
    }
  }
  async *[(_AbstractPage_client = /* @__PURE__ */ new WeakMap(), Symbol.asyncIterator)]() {
    for await (const page of this.iterPages()) {
      for (const item of page.getPaginatedItems()) {
        yield item;
      }
    }
  }
};
var PagePromise = class extends APIPromise {
  constructor(client, request, Page2) {
    super(request, async (props) => new Page2(client, props.response, await defaultParseResponse(props), props.options));
  }
  /**
   * Allow auto-paginating iteration on an unawaited list call, eg:
   *
   *    for await (const item of client.items.list()) {
   *      console.log(item)
   *    }
   */
  async *[Symbol.asyncIterator]() {
    const page = await this;
    for await (const item of page) {
      yield item;
    }
  }
};
var createResponseHeaders = (headers) => {
  return new Proxy(Object.fromEntries(
    // @ts-ignore
    headers.entries()
  ), {
    get(target, name) {
      const key = name.toString();
      return target[key.toLowerCase()] || target[key];
    }
  });
};
var requestOptionsKeys = {
  method: true,
  path: true,
  query: true,
  body: true,
  headers: true,
  maxRetries: true,
  stream: true,
  timeout: true,
  httpAgent: true,
  signal: true,
  idempotencyKey: true,
  __binaryRequest: true,
  __binaryResponse: true,
  __streamClass: true
};
var isRequestOptions = (obj) => {
  return typeof obj === "object" && obj !== null && !isEmptyObj(obj) && Object.keys(obj).every((k) => hasOwn(requestOptionsKeys, k));
};
var getPlatformProperties = () => {
  var _a2, _b;
  if (typeof Deno !== "undefined" && Deno.build != null) {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": normalizePlatform(Deno.build.os),
      "X-Stainless-Arch": normalizeArch(Deno.build.arch),
      "X-Stainless-Runtime": "deno",
      "X-Stainless-Runtime-Version": typeof Deno.version === "string" ? Deno.version : (_b = (_a2 = Deno.version) == null ? void 0 : _a2.deno) != null ? _b : "unknown"
    };
  }
  if (typeof EdgeRuntime !== "undefined") {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": "Unknown",
      "X-Stainless-Arch": `other:${EdgeRuntime}`,
      "X-Stainless-Runtime": "edge",
      "X-Stainless-Runtime-Version": process.version
    };
  }
  if (Object.prototype.toString.call(typeof process !== "undefined" ? process : 0) === "[object process]") {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": normalizePlatform(process.platform),
      "X-Stainless-Arch": normalizeArch(process.arch),
      "X-Stainless-Runtime": "node",
      "X-Stainless-Runtime-Version": process.version
    };
  }
  const browserInfo = getBrowserInfo();
  if (browserInfo) {
    return {
      "X-Stainless-Lang": "js",
      "X-Stainless-Package-Version": VERSION,
      "X-Stainless-OS": "Unknown",
      "X-Stainless-Arch": "unknown",
      "X-Stainless-Runtime": `browser:${browserInfo.browser}`,
      "X-Stainless-Runtime-Version": browserInfo.version
    };
  }
  return {
    "X-Stainless-Lang": "js",
    "X-Stainless-Package-Version": VERSION,
    "X-Stainless-OS": "Unknown",
    "X-Stainless-Arch": "unknown",
    "X-Stainless-Runtime": "unknown",
    "X-Stainless-Runtime-Version": "unknown"
  };
};
function getBrowserInfo() {
  if (typeof navigator === "undefined" || !navigator) {
    return null;
  }
  const browserPatterns = [
    { key: "edge", pattern: /Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "chrome", pattern: /Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "firefox", pattern: /Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "safari", pattern: /(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/ }
  ];
  for (const { key, pattern } of browserPatterns) {
    const match = pattern.exec(navigator.userAgent);
    if (match) {
      const major = match[1] || 0;
      const minor = match[2] || 0;
      const patch = match[3] || 0;
      return { browser: key, version: `${major}.${minor}.${patch}` };
    }
  }
  return null;
}
var normalizeArch = (arch) => {
  if (arch === "x32")
    return "x32";
  if (arch === "x86_64" || arch === "x64")
    return "x64";
  if (arch === "arm")
    return "arm";
  if (arch === "aarch64" || arch === "arm64")
    return "arm64";
  if (arch)
    return `other:${arch}`;
  return "unknown";
};
var normalizePlatform = (platform) => {
  platform = platform.toLowerCase();
  if (platform.includes("ios"))
    return "iOS";
  if (platform === "android")
    return "Android";
  if (platform === "darwin")
    return "MacOS";
  if (platform === "win32")
    return "Windows";
  if (platform === "freebsd")
    return "FreeBSD";
  if (platform === "openbsd")
    return "OpenBSD";
  if (platform === "linux")
    return "Linux";
  if (platform)
    return `Other:${platform}`;
  return "Unknown";
};
var _platformHeaders;
var getPlatformHeaders = () => {
  return _platformHeaders != null ? _platformHeaders : _platformHeaders = getPlatformProperties();
};
var safeJSON = (text) => {
  try {
    return JSON.parse(text);
  } catch (err) {
    return void 0;
  }
};
var startsWithSchemeRegexp = /^[a-z][a-z0-9+.-]*:/i;
var isAbsoluteURL = (url) => {
  return startsWithSchemeRegexp.test(url);
};
var sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));
var validatePositiveInteger = (name, n) => {
  if (typeof n !== "number" || !Number.isInteger(n)) {
    throw new AnthropicError(`${name} must be an integer`);
  }
  if (n < 0) {
    throw new AnthropicError(`${name} must be a positive integer`);
  }
  return n;
};
var castToError = (err) => {
  if (err instanceof Error)
    return err;
  if (typeof err === "object" && err !== null) {
    try {
      return new Error(JSON.stringify(err));
    } catch (e) {
    }
  }
  return new Error(String(err));
};
var readEnv = (env) => {
  var _a2, _b, _c, _d, _e, _f;
  if (typeof process !== "undefined") {
    return (_c = (_b = (_a2 = process.env) == null ? void 0 : _a2[env]) == null ? void 0 : _b.trim()) != null ? _c : void 0;
  }
  if (typeof Deno !== "undefined") {
    return (_f = (_e = (_d = Deno.env) == null ? void 0 : _d.get) == null ? void 0 : _e.call(_d, env)) == null ? void 0 : _f.trim();
  }
  return void 0;
};
function isEmptyObj(obj) {
  if (!obj)
    return true;
  for (const _k in obj)
    return false;
  return true;
}
function hasOwn(obj, key) {
  return Object.prototype.hasOwnProperty.call(obj, key);
}
function applyHeadersMut(targetHeaders, newHeaders) {
  for (const k in newHeaders) {
    if (!hasOwn(newHeaders, k))
      continue;
    const lowerKey = k.toLowerCase();
    if (!lowerKey)
      continue;
    const val = newHeaders[k];
    if (val === null) {
      delete targetHeaders[lowerKey];
    } else if (val !== void 0) {
      targetHeaders[lowerKey] = val;
    }
  }
}
function debug(action, ...args) {
  var _a2;
  if (typeof process !== "undefined" && ((_a2 = process == null ? void 0 : process.env) == null ? void 0 : _a2["DEBUG"]) === "true") {
    console.log(`Anthropic:DEBUG:${action}`, ...args);
  }
}
var uuid4 = () => {
  return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
    const r = Math.random() * 16 | 0;
    const v = c === "x" ? r : r & 3 | 8;
    return v.toString(16);
  });
};
var isRunningInBrowser = () => {
  return (
    // @ts-ignore
    typeof window !== "undefined" && // @ts-ignore
    typeof window.document !== "undefined" && // @ts-ignore
    typeof navigator !== "undefined"
  );
};
var isHeadersProtocol = (headers) => {
  return typeof (headers == null ? void 0 : headers.get) === "function";
};
var getHeader = (headers, header) => {
  var _a2;
  const lowerCasedHeader = header.toLowerCase();
  if (isHeadersProtocol(headers)) {
    const intercapsHeader = ((_a2 = header[0]) == null ? void 0 : _a2.toUpperCase()) + header.substring(1).replace(/([^\w])(\w)/g, (_m, g1, g2) => g1 + g2.toUpperCase());
    for (const key of [header, lowerCasedHeader, header.toUpperCase(), intercapsHeader]) {
      const value = headers.get(key);
      if (value) {
        return value;
      }
    }
  }
  for (const [key, value] of Object.entries(headers)) {
    if (key.toLowerCase() === lowerCasedHeader) {
      if (Array.isArray(value)) {
        if (value.length <= 1)
          return value[0];
        console.warn(`Received ${value.length} entries for the ${header} header, using the first entry.`);
        return value[0];
      }
      return value;
    }
  }
  return void 0;
};

// node_modules/@anthropic-ai/sdk/pagination.mjs
var Page = class extends AbstractPage {
  constructor(client, response, body, options) {
    super(client, response, body, options);
    this.data = body.data || [];
    this.has_more = body.has_more || false;
    this.first_id = body.first_id || null;
    this.last_id = body.last_id || null;
  }
  getPaginatedItems() {
    var _a2;
    return (_a2 = this.data) != null ? _a2 : [];
  }
  // @deprecated Please use `nextPageInfo()` instead
  nextPageParams() {
    const info = this.nextPageInfo();
    if (!info)
      return null;
    if ("params" in info)
      return info.params;
    const params = Object.fromEntries(info.url.searchParams);
    if (!Object.keys(params).length)
      return null;
    return params;
  }
  nextPageInfo() {
    var _a2;
    if ((_a2 = this.options.query) == null ? void 0 : _a2["before_id"]) {
      const firstId = this.first_id;
      if (!firstId) {
        return null;
      }
      return {
        params: {
          before_id: firstId
        }
      };
    }
    const cursor = this.last_id;
    if (!cursor) {
      return null;
    }
    return {
      params: {
        after_id: cursor
      }
    };
  }
};

// node_modules/@anthropic-ai/sdk/resource.mjs
var APIResource = class {
  constructor(client) {
    this._client = client;
  }
};

// node_modules/@anthropic-ai/sdk/resources/beta/models.mjs
var Models = class extends APIResource {
  /**
   * Get a specific model.
   *
   * The Models API response can be used to determine information about a specific
   * model or resolve a model alias to a model ID.
   */
  retrieve(modelId, options) {
    return this._client.get(`/v1/models/${modelId}?beta=true`, options);
  }
  list(query = {}, options) {
    if (isRequestOptions(query)) {
      return this.list({}, query);
    }
    return this._client.getAPIList("/v1/models?beta=true", BetaModelInfosPage, { query, ...options });
  }
};
var BetaModelInfosPage = class extends Page {
};
Models.BetaModelInfosPage = BetaModelInfosPage;

// node_modules/@anthropic-ai/sdk/internal/decoders/jsonl.mjs
var JSONLDecoder = class _JSONLDecoder {
  constructor(iterator, controller) {
    this.iterator = iterator;
    this.controller = controller;
  }
  async *decoder() {
    const lineDecoder = new LineDecoder();
    for await (const chunk of this.iterator) {
      for (const line of lineDecoder.decode(chunk)) {
        yield JSON.parse(line);
      }
    }
    for (const line of lineDecoder.flush()) {
      yield JSON.parse(line);
    }
  }
  [Symbol.asyncIterator]() {
    return this.decoder();
  }
  static fromResponse(response, controller) {
    if (!response.body) {
      controller.abort();
      throw new AnthropicError(`Attempted to iterate over a response with no body`);
    }
    return new _JSONLDecoder(ReadableStreamToAsyncIterable(response.body), controller);
  }
};

// node_modules/@anthropic-ai/sdk/resources/beta/messages/batches.mjs
var Batches = class extends APIResource {
  /**
   * Send a batch of Message creation requests.
   *
   * The Message Batches API can be used to process multiple Messages API requests at
   * once. Once a Message Batch is created, it begins processing immediately. Batches
   * can take up to 24 hours to complete.
   */
  create(params, options) {
    const { betas, ...body } = params;
    return this._client.post("/v1/messages/batches?beta=true", {
      body,
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
  retrieve(messageBatchId, params = {}, options) {
    if (isRequestOptions(params)) {
      return this.retrieve(messageBatchId, {}, params);
    }
    const { betas } = params;
    return this._client.get(`/v1/messages/batches/${messageBatchId}?beta=true`, {
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
  list(params = {}, options) {
    if (isRequestOptions(params)) {
      return this.list({}, params);
    }
    const { betas, ...query } = params;
    return this._client.getAPIList("/v1/messages/batches?beta=true", BetaMessageBatchesPage, {
      query,
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
  delete(messageBatchId, params = {}, options) {
    if (isRequestOptions(params)) {
      return this.delete(messageBatchId, {}, params);
    }
    const { betas } = params;
    return this._client.delete(`/v1/messages/batches/${messageBatchId}?beta=true`, {
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
  cancel(messageBatchId, params = {}, options) {
    if (isRequestOptions(params)) {
      return this.cancel(messageBatchId, {}, params);
    }
    const { betas } = params;
    return this._client.post(`/v1/messages/batches/${messageBatchId}/cancel?beta=true`, {
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
  async results(messageBatchId, params = {}, options) {
    if (isRequestOptions(params)) {
      return this.results(messageBatchId, {}, params);
    }
    const batch = await this.retrieve(messageBatchId);
    if (!batch.results_url) {
      throw new AnthropicError(`No batch \`results_url\`; Has it finished processing? ${batch.processing_status} - ${batch.id}`);
    }
    const { betas } = params;
    return this._client.get(batch.results_url, {
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
        Accept: "application/binary",
        ...options == null ? void 0 : options.headers
      },
      __binaryResponse: true
    })._thenUnwrap((_, props) => JSONLDecoder.fromResponse(props.response, props.controller));
  }
};
var BetaMessageBatchesPage = class extends Page {
};
Batches.BetaMessageBatchesPage = BetaMessageBatchesPage;

// node_modules/@anthropic-ai/sdk/_vendor/partial-json-parser/parser.mjs
var tokenize = (input) => {
  let current = 0;
  let tokens = [];
  while (current < input.length) {
    let char = input[current];
    if (char === "\\") {
      current++;
      continue;
    }
    if (char === "{") {
      tokens.push({
        type: "brace",
        value: "{"
      });
      current++;
      continue;
    }
    if (char === "}") {
      tokens.push({
        type: "brace",
        value: "}"
      });
      current++;
      continue;
    }
    if (char === "[") {
      tokens.push({
        type: "paren",
        value: "["
      });
      current++;
      continue;
    }
    if (char === "]") {
      tokens.push({
        type: "paren",
        value: "]"
      });
      current++;
      continue;
    }
    if (char === ":") {
      tokens.push({
        type: "separator",
        value: ":"
      });
      current++;
      continue;
    }
    if (char === ",") {
      tokens.push({
        type: "delimiter",
        value: ","
      });
      current++;
      continue;
    }
    if (char === '"') {
      let value = "";
      let danglingQuote = false;
      char = input[++current];
      while (char !== '"') {
        if (current === input.length) {
          danglingQuote = true;
          break;
        }
        if (char === "\\") {
          current++;
          if (current === input.length) {
            danglingQuote = true;
            break;
          }
          value += char + input[current];
          char = input[++current];
        } else {
          value += char;
          char = input[++current];
        }
      }
      char = input[++current];
      if (!danglingQuote) {
        tokens.push({
          type: "string",
          value
        });
      }
      continue;
    }
    let WHITESPACE = /\s/;
    if (char && WHITESPACE.test(char)) {
      current++;
      continue;
    }
    let NUMBERS = /[0-9]/;
    if (char && NUMBERS.test(char) || char === "-" || char === ".") {
      let value = "";
      if (char === "-") {
        value += char;
        char = input[++current];
      }
      while (char && NUMBERS.test(char) || char === ".") {
        value += char;
        char = input[++current];
      }
      tokens.push({
        type: "number",
        value
      });
      continue;
    }
    let LETTERS = /[a-z]/i;
    if (char && LETTERS.test(char)) {
      let value = "";
      while (char && LETTERS.test(char)) {
        if (current === input.length) {
          break;
        }
        value += char;
        char = input[++current];
      }
      if (value == "true" || value == "false" || value === "null") {
        tokens.push({
          type: "name",
          value
        });
      } else {
        current++;
        continue;
      }
      continue;
    }
    current++;
  }
  return tokens;
};
var strip = (tokens) => {
  if (tokens.length === 0) {
    return tokens;
  }
  let lastToken = tokens[tokens.length - 1];
  switch (lastToken.type) {
    case "separator":
      tokens = tokens.slice(0, tokens.length - 1);
      return strip(tokens);
      break;
    case "number":
      let lastCharacterOfLastToken = lastToken.value[lastToken.value.length - 1];
      if (lastCharacterOfLastToken === "." || lastCharacterOfLastToken === "-") {
        tokens = tokens.slice(0, tokens.length - 1);
        return strip(tokens);
      }
    case "string":
      let tokenBeforeTheLastToken = tokens[tokens.length - 2];
      if ((tokenBeforeTheLastToken == null ? void 0 : tokenBeforeTheLastToken.type) === "delimiter") {
        tokens = tokens.slice(0, tokens.length - 1);
        return strip(tokens);
      } else if ((tokenBeforeTheLastToken == null ? void 0 : tokenBeforeTheLastToken.type) === "brace" && tokenBeforeTheLastToken.value === "{") {
        tokens = tokens.slice(0, tokens.length - 1);
        return strip(tokens);
      }
      break;
    case "delimiter":
      tokens = tokens.slice(0, tokens.length - 1);
      return strip(tokens);
      break;
  }
  return tokens;
};
var unstrip = (tokens) => {
  let tail = [];
  tokens.map((token) => {
    if (token.type === "brace") {
      if (token.value === "{") {
        tail.push("}");
      } else {
        tail.splice(tail.lastIndexOf("}"), 1);
      }
    }
    if (token.type === "paren") {
      if (token.value === "[") {
        tail.push("]");
      } else {
        tail.splice(tail.lastIndexOf("]"), 1);
      }
    }
  });
  if (tail.length > 0) {
    tail.reverse().map((item) => {
      if (item === "}") {
        tokens.push({
          type: "brace",
          value: "}"
        });
      } else if (item === "]") {
        tokens.push({
          type: "paren",
          value: "]"
        });
      }
    });
  }
  return tokens;
};
var generate = (tokens) => {
  let output = "";
  tokens.map((token) => {
    switch (token.type) {
      case "string":
        output += '"' + token.value + '"';
        break;
      default:
        output += token.value;
        break;
    }
  });
  return output;
};
var partialParse = (input) => JSON.parse(generate(unstrip(strip(tokenize(input)))));

// node_modules/@anthropic-ai/sdk/lib/BetaMessageStream.mjs
var __classPrivateFieldSet2 = function(receiver, state, value, kind2, f) {
  if (kind2 === "m") throw new TypeError("Private method is not writable");
  if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var __classPrivateFieldGet2 = function(receiver, state, kind2, f) {
  if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _BetaMessageStream_instances;
var _BetaMessageStream_currentMessageSnapshot;
var _BetaMessageStream_connectedPromise;
var _BetaMessageStream_resolveConnectedPromise;
var _BetaMessageStream_rejectConnectedPromise;
var _BetaMessageStream_endPromise;
var _BetaMessageStream_resolveEndPromise;
var _BetaMessageStream_rejectEndPromise;
var _BetaMessageStream_listeners;
var _BetaMessageStream_ended;
var _BetaMessageStream_errored;
var _BetaMessageStream_aborted;
var _BetaMessageStream_catchingPromiseCreated;
var _BetaMessageStream_response;
var _BetaMessageStream_request_id;
var _BetaMessageStream_getFinalMessage;
var _BetaMessageStream_getFinalText;
var _BetaMessageStream_handleError;
var _BetaMessageStream_beginRequest;
var _BetaMessageStream_addStreamEvent;
var _BetaMessageStream_endRequest;
var _BetaMessageStream_accumulateMessage;
var JSON_BUF_PROPERTY = "__json_buf";
var BetaMessageStream = class _BetaMessageStream {
  constructor() {
    _BetaMessageStream_instances.add(this);
    this.messages = [];
    this.receivedMessages = [];
    _BetaMessageStream_currentMessageSnapshot.set(this, void 0);
    this.controller = new AbortController();
    _BetaMessageStream_connectedPromise.set(this, void 0);
    _BetaMessageStream_resolveConnectedPromise.set(this, () => {
    });
    _BetaMessageStream_rejectConnectedPromise.set(this, () => {
    });
    _BetaMessageStream_endPromise.set(this, void 0);
    _BetaMessageStream_resolveEndPromise.set(this, () => {
    });
    _BetaMessageStream_rejectEndPromise.set(this, () => {
    });
    _BetaMessageStream_listeners.set(this, {});
    _BetaMessageStream_ended.set(this, false);
    _BetaMessageStream_errored.set(this, false);
    _BetaMessageStream_aborted.set(this, false);
    _BetaMessageStream_catchingPromiseCreated.set(this, false);
    _BetaMessageStream_response.set(this, void 0);
    _BetaMessageStream_request_id.set(this, void 0);
    _BetaMessageStream_handleError.set(this, (error) => {
      __classPrivateFieldSet2(this, _BetaMessageStream_errored, true, "f");
      if (error instanceof Error && error.name === "AbortError") {
        error = new APIUserAbortError();
      }
      if (error instanceof APIUserAbortError) {
        __classPrivateFieldSet2(this, _BetaMessageStream_aborted, true, "f");
        return this._emit("abort", error);
      }
      if (error instanceof AnthropicError) {
        return this._emit("error", error);
      }
      if (error instanceof Error) {
        const anthropicError = new AnthropicError(error.message);
        anthropicError.cause = error;
        return this._emit("error", anthropicError);
      }
      return this._emit("error", new AnthropicError(String(error)));
    });
    __classPrivateFieldSet2(this, _BetaMessageStream_connectedPromise, new Promise((resolve, reject) => {
      __classPrivateFieldSet2(this, _BetaMessageStream_resolveConnectedPromise, resolve, "f");
      __classPrivateFieldSet2(this, _BetaMessageStream_rejectConnectedPromise, reject, "f");
    }), "f");
    __classPrivateFieldSet2(this, _BetaMessageStream_endPromise, new Promise((resolve, reject) => {
      __classPrivateFieldSet2(this, _BetaMessageStream_resolveEndPromise, resolve, "f");
      __classPrivateFieldSet2(this, _BetaMessageStream_rejectEndPromise, reject, "f");
    }), "f");
    __classPrivateFieldGet2(this, _BetaMessageStream_connectedPromise, "f").catch(() => {
    });
    __classPrivateFieldGet2(this, _BetaMessageStream_endPromise, "f").catch(() => {
    });
  }
  get response() {
    return __classPrivateFieldGet2(this, _BetaMessageStream_response, "f");
  }
  get request_id() {
    return __classPrivateFieldGet2(this, _BetaMessageStream_request_id, "f");
  }
  /**
   * Returns the `MessageStream` data, the raw `Response` instance and the ID of the request,
   * returned vie the `request-id` header which is useful for debugging requests and resporting
   * issues to Anthropic.
   *
   * This is the same as the `APIPromise.withResponse()` method.
   *
   * This method will raise an error if you created the stream using `MessageStream.fromReadableStream`
   * as no `Response` is available.
   */
  async withResponse() {
    const response = await __classPrivateFieldGet2(this, _BetaMessageStream_connectedPromise, "f");
    if (!response) {
      throw new Error("Could not resolve a `Response` object");
    }
    return {
      data: this,
      response,
      request_id: response.headers.get("request-id")
    };
  }
  /**
   * Intended for use on the frontend, consuming a stream produced with
   * `.toReadableStream()` on the backend.
   *
   * Note that messages sent to the model do not appear in `.on('message')`
   * in this context.
   */
  static fromReadableStream(stream) {
    const runner = new _BetaMessageStream();
    runner._run(() => runner._fromReadableStream(stream));
    return runner;
  }
  static createMessage(messages, params, options) {
    const runner = new _BetaMessageStream();
    for (const message of params.messages) {
      runner._addMessageParam(message);
    }
    runner._run(() => runner._createMessage(messages, { ...params, stream: true }, { ...options, headers: { ...options == null ? void 0 : options.headers, "X-Stainless-Helper-Method": "stream" } }));
    return runner;
  }
  _run(executor) {
    executor().then(() => {
      this._emitFinal();
      this._emit("end");
    }, __classPrivateFieldGet2(this, _BetaMessageStream_handleError, "f"));
  }
  _addMessageParam(message) {
    this.messages.push(message);
  }
  _addMessage(message, emit = true) {
    this.receivedMessages.push(message);
    if (emit) {
      this._emit("message", message);
    }
  }
  async _createMessage(messages, params, options) {
    var _a2;
    const signal = options == null ? void 0 : options.signal;
    if (signal) {
      if (signal.aborted)
        this.controller.abort();
      signal.addEventListener("abort", () => this.controller.abort());
    }
    __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_beginRequest).call(this);
    const { response, data: stream } = await messages.create({ ...params, stream: true }, { ...options, signal: this.controller.signal }).withResponse();
    this._connected(response);
    for await (const event of stream) {
      __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_addStreamEvent).call(this, event);
    }
    if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
      throw new APIUserAbortError();
    }
    __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_endRequest).call(this);
  }
  _connected(response) {
    if (this.ended)
      return;
    __classPrivateFieldSet2(this, _BetaMessageStream_response, response, "f");
    __classPrivateFieldSet2(this, _BetaMessageStream_request_id, response == null ? void 0 : response.headers.get("request-id"), "f");
    __classPrivateFieldGet2(this, _BetaMessageStream_resolveConnectedPromise, "f").call(this, response);
    this._emit("connect");
  }
  get ended() {
    return __classPrivateFieldGet2(this, _BetaMessageStream_ended, "f");
  }
  get errored() {
    return __classPrivateFieldGet2(this, _BetaMessageStream_errored, "f");
  }
  get aborted() {
    return __classPrivateFieldGet2(this, _BetaMessageStream_aborted, "f");
  }
  abort() {
    this.controller.abort();
  }
  /**
   * Adds the listener function to the end of the listeners array for the event.
   * No checks are made to see if the listener has already been added. Multiple calls passing
   * the same combination of event and listener will result in the listener being added, and
   * called, multiple times.
   * @returns this MessageStream, so that calls can be chained
   */
  on(event, listener) {
    const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] || (__classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] = []);
    listeners.push({ listener });
    return this;
  }
  /**
   * Removes the specified listener from the listener array for the event.
   * off() will remove, at most, one instance of a listener from the listener array. If any single
   * listener has been added multiple times to the listener array for the specified event, then
   * off() must be called multiple times to remove each instance.
   * @returns this MessageStream, so that calls can be chained
   */
  off(event, listener) {
    const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event];
    if (!listeners)
      return this;
    const index = listeners.findIndex((l) => l.listener === listener);
    if (index >= 0)
      listeners.splice(index, 1);
    return this;
  }
  /**
   * Adds a one-time listener function for the event. The next time the event is triggered,
   * this listener is removed and then invoked.
   * @returns this MessageStream, so that calls can be chained
   */
  once(event, listener) {
    const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] || (__classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] = []);
    listeners.push({ listener, once: true });
    return this;
  }
  /**
   * This is similar to `.once()`, but returns a Promise that resolves the next time
   * the event is triggered, instead of calling a listener callback.
   * @returns a Promise that resolves the next time given event is triggered,
   * or rejects if an error is emitted.  (If you request the 'error' event,
   * returns a promise that resolves with the error).
   *
   * Example:
   *
   *   const message = await stream.emitted('message') // rejects if the stream errors
   */
  emitted(event) {
    return new Promise((resolve, reject) => {
      __classPrivateFieldSet2(this, _BetaMessageStream_catchingPromiseCreated, true, "f");
      if (event !== "error")
        this.once("error", reject);
      this.once(event, resolve);
    });
  }
  async done() {
    __classPrivateFieldSet2(this, _BetaMessageStream_catchingPromiseCreated, true, "f");
    await __classPrivateFieldGet2(this, _BetaMessageStream_endPromise, "f");
  }
  get currentMessage() {
    return __classPrivateFieldGet2(this, _BetaMessageStream_currentMessageSnapshot, "f");
  }
  /**
   * @returns a promise that resolves with the the final assistant Message response,
   * or rejects if an error occurred or the stream ended prematurely without producing a Message.
   */
  async finalMessage() {
    await this.done();
    return __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_getFinalMessage).call(this);
  }
  /**
   * @returns a promise that resolves with the the final assistant Message's text response, concatenated
   * together if there are more than one text blocks.
   * Rejects if an error occurred or the stream ended prematurely without producing a Message.
   */
  async finalText() {
    await this.done();
    return __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_getFinalText).call(this);
  }
  _emit(event, ...args) {
    if (__classPrivateFieldGet2(this, _BetaMessageStream_ended, "f"))
      return;
    if (event === "end") {
      __classPrivateFieldSet2(this, _BetaMessageStream_ended, true, "f");
      __classPrivateFieldGet2(this, _BetaMessageStream_resolveEndPromise, "f").call(this);
    }
    const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event];
    if (listeners) {
      __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] = listeners.filter((l) => !l.once);
      listeners.forEach(({ listener }) => listener(...args));
    }
    if (event === "abort") {
      const error = args[0];
      if (!__classPrivateFieldGet2(this, _BetaMessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
        Promise.reject(error);
      }
      __classPrivateFieldGet2(this, _BetaMessageStream_rejectConnectedPromise, "f").call(this, error);
      __classPrivateFieldGet2(this, _BetaMessageStream_rejectEndPromise, "f").call(this, error);
      this._emit("end");
      return;
    }
    if (event === "error") {
      const error = args[0];
      if (!__classPrivateFieldGet2(this, _BetaMessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
        Promise.reject(error);
      }
      __classPrivateFieldGet2(this, _BetaMessageStream_rejectConnectedPromise, "f").call(this, error);
      __classPrivateFieldGet2(this, _BetaMessageStream_rejectEndPromise, "f").call(this, error);
      this._emit("end");
    }
  }
  _emitFinal() {
    const finalMessage = this.receivedMessages.at(-1);
    if (finalMessage) {
      this._emit("finalMessage", __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_getFinalMessage).call(this));
    }
  }
  async _fromReadableStream(readableStream, options) {
    var _a2;
    const signal = options == null ? void 0 : options.signal;
    if (signal) {
      if (signal.aborted)
        this.controller.abort();
      signal.addEventListener("abort", () => this.controller.abort());
    }
    __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_beginRequest).call(this);
    this._connected(null);
    const stream = Stream.fromReadableStream(readableStream, this.controller);
    for await (const event of stream) {
      __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_addStreamEvent).call(this, event);
    }
    if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
      throw new APIUserAbortError();
    }
    __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_endRequest).call(this);
  }
  [(_BetaMessageStream_currentMessageSnapshot = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_connectedPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_resolveConnectedPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_rejectConnectedPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_endPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_resolveEndPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_rejectEndPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_listeners = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_ended = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_errored = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_aborted = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_catchingPromiseCreated = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_response = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_request_id = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_handleError = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_instances = /* @__PURE__ */ new WeakSet(), _BetaMessageStream_getFinalMessage = function _BetaMessageStream_getFinalMessage2() {
    if (this.receivedMessages.length === 0) {
      throw new AnthropicError("stream ended without producing a Message with role=assistant");
    }
    return this.receivedMessages.at(-1);
  }, _BetaMessageStream_getFinalText = function _BetaMessageStream_getFinalText2() {
    if (this.receivedMessages.length === 0) {
      throw new AnthropicError("stream ended without producing a Message with role=assistant");
    }
    const textBlocks = this.receivedMessages.at(-1).content.filter((block) => block.type === "text").map((block) => block.text);
    if (textBlocks.length === 0) {
      throw new AnthropicError("stream ended without producing a content block with type=text");
    }
    return textBlocks.join(" ");
  }, _BetaMessageStream_beginRequest = function _BetaMessageStream_beginRequest2() {
    if (this.ended)
      return;
    __classPrivateFieldSet2(this, _BetaMessageStream_currentMessageSnapshot, void 0, "f");
  }, _BetaMessageStream_addStreamEvent = function _BetaMessageStream_addStreamEvent2(event) {
    var _a2;
    if (this.ended)
      return;
    const messageSnapshot = __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_accumulateMessage).call(this, event);
    this._emit("streamEvent", event, messageSnapshot);
    switch (event.type) {
      case "content_block_delta": {
        const content = messageSnapshot.content.at(-1);
        switch (event.delta.type) {
          case "text_delta": {
            if (content.type === "text") {
              this._emit("text", event.delta.text, content.text || "");
            }
            break;
          }
          case "citations_delta": {
            if (content.type === "text") {
              this._emit("citation", event.delta.citation, (_a2 = content.citations) != null ? _a2 : []);
            }
            break;
          }
          case "input_json_delta": {
            if (content.type === "tool_use" && content.input) {
              this._emit("inputJson", event.delta.partial_json, content.input);
            }
            break;
          }
          default:
            checkNever(event.delta);
        }
        break;
      }
      case "message_stop": {
        this._addMessageParam(messageSnapshot);
        this._addMessage(messageSnapshot, true);
        break;
      }
      case "content_block_stop": {
        this._emit("contentBlock", messageSnapshot.content.at(-1));
        break;
      }
      case "message_start": {
        __classPrivateFieldSet2(this, _BetaMessageStream_currentMessageSnapshot, messageSnapshot, "f");
        break;
      }
      case "content_block_start":
      case "message_delta":
        break;
    }
  }, _BetaMessageStream_endRequest = function _BetaMessageStream_endRequest2() {
    if (this.ended) {
      throw new AnthropicError(`stream has ended, this shouldn't happen`);
    }
    const snapshot = __classPrivateFieldGet2(this, _BetaMessageStream_currentMessageSnapshot, "f");
    if (!snapshot) {
      throw new AnthropicError(`request ended without sending any chunks`);
    }
    __classPrivateFieldSet2(this, _BetaMessageStream_currentMessageSnapshot, void 0, "f");
    return snapshot;
  }, _BetaMessageStream_accumulateMessage = function _BetaMessageStream_accumulateMessage2(event) {
    var _a2;
    let snapshot = __classPrivateFieldGet2(this, _BetaMessageStream_currentMessageSnapshot, "f");
    if (event.type === "message_start") {
      if (snapshot) {
        throw new AnthropicError(`Unexpected event order, got ${event.type} before receiving "message_stop"`);
      }
      return event.message;
    }
    if (!snapshot) {
      throw new AnthropicError(`Unexpected event order, got ${event.type} before "message_start"`);
    }
    switch (event.type) {
      case "message_stop":
        return snapshot;
      case "message_delta":
        snapshot.stop_reason = event.delta.stop_reason;
        snapshot.stop_sequence = event.delta.stop_sequence;
        snapshot.usage.output_tokens = event.usage.output_tokens;
        return snapshot;
      case "content_block_start":
        snapshot.content.push(event.content_block);
        return snapshot;
      case "content_block_delta": {
        const snapshotContent = snapshot.content.at(event.index);
        switch (event.delta.type) {
          case "text_delta": {
            if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
              snapshotContent.text += event.delta.text;
            }
            break;
          }
          case "citations_delta": {
            if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
              (_a2 = snapshotContent.citations) != null ? _a2 : snapshotContent.citations = [];
              snapshotContent.citations.push(event.delta.citation);
            }
            break;
          }
          case "input_json_delta": {
            if ((snapshotContent == null ? void 0 : snapshotContent.type) === "tool_use") {
              let jsonBuf = snapshotContent[JSON_BUF_PROPERTY] || "";
              jsonBuf += event.delta.partial_json;
              Object.defineProperty(snapshotContent, JSON_BUF_PROPERTY, {
                value: jsonBuf,
                enumerable: false,
                writable: true
              });
              if (jsonBuf) {
                snapshotContent.input = partialParse(jsonBuf);
              }
            }
            break;
          }
          default:
            checkNever(event.delta);
        }
        return snapshot;
      }
      case "content_block_stop":
        return snapshot;
    }
  }, Symbol.asyncIterator)]() {
    const pushQueue = [];
    const readQueue = [];
    let done = false;
    this.on("streamEvent", (event) => {
      const reader = readQueue.shift();
      if (reader) {
        reader.resolve(event);
      } else {
        pushQueue.push(event);
      }
    });
    this.on("end", () => {
      done = true;
      for (const reader of readQueue) {
        reader.resolve(void 0);
      }
      readQueue.length = 0;
    });
    this.on("abort", (err) => {
      done = true;
      for (const reader of readQueue) {
        reader.reject(err);
      }
      readQueue.length = 0;
    });
    this.on("error", (err) => {
      done = true;
      for (const reader of readQueue) {
        reader.reject(err);
      }
      readQueue.length = 0;
    });
    return {
      next: async () => {
        if (!pushQueue.length) {
          if (done) {
            return { value: void 0, done: true };
          }
          return new Promise((resolve, reject) => readQueue.push({ resolve, reject })).then((chunk2) => chunk2 ? { value: chunk2, done: false } : { value: void 0, done: true });
        }
        const chunk = pushQueue.shift();
        return { value: chunk, done: false };
      },
      return: async () => {
        this.abort();
        return { value: void 0, done: true };
      }
    };
  }
  toReadableStream() {
    const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);
    return stream.toReadableStream();
  }
};
function checkNever(x) {
}

// node_modules/@anthropic-ai/sdk/resources/beta/messages/messages.mjs
var DEPRECATED_MODELS = {
  "claude-1.3": "November 6th, 2024",
  "claude-1.3-100k": "November 6th, 2024",
  "claude-instant-1.1": "November 6th, 2024",
  "claude-instant-1.1-100k": "November 6th, 2024",
  "claude-instant-1.2": "November 6th, 2024",
  "claude-3-sonnet-20240229": "July 21st, 2025",
  "claude-2.1": "July 21st, 2025",
  "claude-2.0": "July 21st, 2025"
};
var Messages = class extends APIResource {
  constructor() {
    super(...arguments);
    this.batches = new Batches(this._client);
  }
  create(params, options) {
    var _a2, _b;
    const { betas, ...body } = params;
    if (body.model in DEPRECATED_MODELS) {
      console.warn(`The model '${body.model}' is deprecated and will reach end-of-life on ${DEPRECATED_MODELS[body.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);
    }
    return this._client.post("/v1/messages?beta=true", {
      body,
      timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
      ...options,
      headers: {
        ...(betas == null ? void 0 : betas.toString()) != null ? { "anthropic-beta": betas == null ? void 0 : betas.toString() } : void 0,
        ...options == null ? void 0 : options.headers
      },
      stream: (_b = params.stream) != null ? _b : false
    });
  }
  /**
   * Create a Message stream
   */
  stream(body, options) {
    return BetaMessageStream.createMessage(this, body, options);
  }
  /**
   * Count the number of tokens in a Message.
   *
   * The Token Count API can be used to count the number of tokens in a Message,
   * including tools, images, and documents, without creating it.
   */
  countTokens(params, options) {
    const { betas, ...body } = params;
    return this._client.post("/v1/messages/count_tokens?beta=true", {
      body,
      ...options,
      headers: {
        "anthropic-beta": [...betas != null ? betas : [], "token-counting-2024-11-01"].toString(),
        ...options == null ? void 0 : options.headers
      }
    });
  }
};
Messages.Batches = Batches;
Messages.BetaMessageBatchesPage = BetaMessageBatchesPage;

// node_modules/@anthropic-ai/sdk/resources/beta/beta.mjs
var Beta = class extends APIResource {
  constructor() {
    super(...arguments);
    this.models = new Models(this._client);
    this.messages = new Messages(this._client);
  }
};
Beta.Models = Models;
Beta.BetaModelInfosPage = BetaModelInfosPage;
Beta.Messages = Messages;

// node_modules/@anthropic-ai/sdk/resources/completions.mjs
var Completions = class extends APIResource {
  create(body, options) {
    var _a2, _b;
    return this._client.post("/v1/complete", {
      body,
      timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
      ...options,
      stream: (_b = body.stream) != null ? _b : false
    });
  }
};

// node_modules/@anthropic-ai/sdk/resources/messages/batches.mjs
var Batches2 = class extends APIResource {
  /**
   * Send a batch of Message creation requests.
   *
   * The Message Batches API can be used to process multiple Messages API requests at
   * once. Once a Message Batch is created, it begins processing immediately. Batches
   * can take up to 24 hours to complete.
   */
  create(body, options) {
    return this._client.post("/v1/messages/batches", { body, ...options });
  }
  /**
   * This endpoint is idempotent and can be used to poll for Message Batch
   * completion. To access the results of a Message Batch, make a request to the
   * `results_url` field in the response.
   */
  retrieve(messageBatchId, options) {
    return this._client.get(`/v1/messages/batches/${messageBatchId}`, options);
  }
  list(query = {}, options) {
    if (isRequestOptions(query)) {
      return this.list({}, query);
    }
    return this._client.getAPIList("/v1/messages/batches", MessageBatchesPage, { query, ...options });
  }
  /**
   * Delete a Message Batch.
   *
   * Message Batches can only be deleted once they've finished processing. If you'd
   * like to delete an in-progress batch, you must first cancel it.
   */
  delete(messageBatchId, options) {
    return this._client.delete(`/v1/messages/batches/${messageBatchId}`, options);
  }
  /**
   * Batches may be canceled any time before processing ends. Once cancellation is
   * initiated, the batch enters a `canceling` state, at which time the system may
   * complete any in-progress, non-interruptible requests before finalizing
   * cancellation.
   *
   * The number of canceled requests is specified in `request_counts`. To determine
   * which requests were canceled, check the individual results within the batch.
   * Note that cancellation may not result in any canceled requests if they were
   * non-interruptible.
   */
  cancel(messageBatchId, options) {
    return this._client.post(`/v1/messages/batches/${messageBatchId}/cancel`, options);
  }
  /**
   * Streams the results of a Message Batch as a `.jsonl` file.
   *
   * Each line in the file is a JSON object containing the result of a single request
   * in the Message Batch. Results are not guaranteed to be in the same order as
   * requests. Use the `custom_id` field to match results to requests.
   */
  async results(messageBatchId, options) {
    const batch = await this.retrieve(messageBatchId);
    if (!batch.results_url) {
      throw new AnthropicError(`No batch \`results_url\`; Has it finished processing? ${batch.processing_status} - ${batch.id}`);
    }
    return this._client.get(batch.results_url, {
      ...options,
      headers: {
        Accept: "application/binary",
        ...options == null ? void 0 : options.headers
      },
      __binaryResponse: true
    })._thenUnwrap((_, props) => JSONLDecoder.fromResponse(props.response, props.controller));
  }
};
var MessageBatchesPage = class extends Page {
};
Batches2.MessageBatchesPage = MessageBatchesPage;

// node_modules/@anthropic-ai/sdk/lib/MessageStream.mjs
var __classPrivateFieldSet3 = function(receiver, state, value, kind2, f) {
  if (kind2 === "m") throw new TypeError("Private method is not writable");
  if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
  return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
};
var __classPrivateFieldGet3 = function(receiver, state, kind2, f) {
  if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
  if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
  return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
};
var _MessageStream_instances;
var _MessageStream_currentMessageSnapshot;
var _MessageStream_connectedPromise;
var _MessageStream_resolveConnectedPromise;
var _MessageStream_rejectConnectedPromise;
var _MessageStream_endPromise;
var _MessageStream_resolveEndPromise;
var _MessageStream_rejectEndPromise;
var _MessageStream_listeners;
var _MessageStream_ended;
var _MessageStream_errored;
var _MessageStream_aborted;
var _MessageStream_catchingPromiseCreated;
var _MessageStream_response;
var _MessageStream_request_id;
var _MessageStream_getFinalMessage;
var _MessageStream_getFinalText;
var _MessageStream_handleError;
var _MessageStream_beginRequest;
var _MessageStream_addStreamEvent;
var _MessageStream_endRequest;
var _MessageStream_accumulateMessage;
var JSON_BUF_PROPERTY2 = "__json_buf";
var MessageStream = class _MessageStream {
  constructor() {
    _MessageStream_instances.add(this);
    this.messages = [];
    this.receivedMessages = [];
    _MessageStream_currentMessageSnapshot.set(this, void 0);
    this.controller = new AbortController();
    _MessageStream_connectedPromise.set(this, void 0);
    _MessageStream_resolveConnectedPromise.set(this, () => {
    });
    _MessageStream_rejectConnectedPromise.set(this, () => {
    });
    _MessageStream_endPromise.set(this, void 0);
    _MessageStream_resolveEndPromise.set(this, () => {
    });
    _MessageStream_rejectEndPromise.set(this, () => {
    });
    _MessageStream_listeners.set(this, {});
    _MessageStream_ended.set(this, false);
    _MessageStream_errored.set(this, false);
    _MessageStream_aborted.set(this, false);
    _MessageStream_catchingPromiseCreated.set(this, false);
    _MessageStream_response.set(this, void 0);
    _MessageStream_request_id.set(this, void 0);
    _MessageStream_handleError.set(this, (error) => {
      __classPrivateFieldSet3(this, _MessageStream_errored, true, "f");
      if (error instanceof Error && error.name === "AbortError") {
        error = new APIUserAbortError();
      }
      if (error instanceof APIUserAbortError) {
        __classPrivateFieldSet3(this, _MessageStream_aborted, true, "f");
        return this._emit("abort", error);
      }
      if (error instanceof AnthropicError) {
        return this._emit("error", error);
      }
      if (error instanceof Error) {
        const anthropicError = new AnthropicError(error.message);
        anthropicError.cause = error;
        return this._emit("error", anthropicError);
      }
      return this._emit("error", new AnthropicError(String(error)));
    });
    __classPrivateFieldSet3(this, _MessageStream_connectedPromise, new Promise((resolve, reject) => {
      __classPrivateFieldSet3(this, _MessageStream_resolveConnectedPromise, resolve, "f");
      __classPrivateFieldSet3(this, _MessageStream_rejectConnectedPromise, reject, "f");
    }), "f");
    __classPrivateFieldSet3(this, _MessageStream_endPromise, new Promise((resolve, reject) => {
      __classPrivateFieldSet3(this, _MessageStream_resolveEndPromise, resolve, "f");
      __classPrivateFieldSet3(this, _MessageStream_rejectEndPromise, reject, "f");
    }), "f");
    __classPrivateFieldGet3(this, _MessageStream_connectedPromise, "f").catch(() => {
    });
    __classPrivateFieldGet3(this, _MessageStream_endPromise, "f").catch(() => {
    });
  }
  get response() {
    return __classPrivateFieldGet3(this, _MessageStream_response, "f");
  }
  get request_id() {
    return __classPrivateFieldGet3(this, _MessageStream_request_id, "f");
  }
  /**
   * Returns the `MessageStream` data, the raw `Response` instance and the ID of the request,
   * returned vie the `request-id` header which is useful for debugging requests and resporting
   * issues to Anthropic.
   *
   * This is the same as the `APIPromise.withResponse()` method.
   *
   * This method will raise an error if you created the stream using `MessageStream.fromReadableStream`
   * as no `Response` is available.
   */
  async withResponse() {
    const response = await __classPrivateFieldGet3(this, _MessageStream_connectedPromise, "f");
    if (!response) {
      throw new Error("Could not resolve a `Response` object");
    }
    return {
      data: this,
      response,
      request_id: response.headers.get("request-id")
    };
  }
  /**
   * Intended for use on the frontend, consuming a stream produced with
   * `.toReadableStream()` on the backend.
   *
   * Note that messages sent to the model do not appear in `.on('message')`
   * in this context.
   */
  static fromReadableStream(stream) {
    const runner = new _MessageStream();
    runner._run(() => runner._fromReadableStream(stream));
    return runner;
  }
  static createMessage(messages, params, options) {
    const runner = new _MessageStream();
    for (const message of params.messages) {
      runner._addMessageParam(message);
    }
    runner._run(() => runner._createMessage(messages, { ...params, stream: true }, { ...options, headers: { ...options == null ? void 0 : options.headers, "X-Stainless-Helper-Method": "stream" } }));
    return runner;
  }
  _run(executor) {
    executor().then(() => {
      this._emitFinal();
      this._emit("end");
    }, __classPrivateFieldGet3(this, _MessageStream_handleError, "f"));
  }
  _addMessageParam(message) {
    this.messages.push(message);
  }
  _addMessage(message, emit = true) {
    this.receivedMessages.push(message);
    if (emit) {
      this._emit("message", message);
    }
  }
  async _createMessage(messages, params, options) {
    var _a2;
    const signal = options == null ? void 0 : options.signal;
    if (signal) {
      if (signal.aborted)
        this.controller.abort();
      signal.addEventListener("abort", () => this.controller.abort());
    }
    __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_beginRequest).call(this);
    const { response, data: stream } = await messages.create({ ...params, stream: true }, { ...options, signal: this.controller.signal }).withResponse();
    this._connected(response);
    for await (const event of stream) {
      __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_addStreamEvent).call(this, event);
    }
    if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
      throw new APIUserAbortError();
    }
    __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_endRequest).call(this);
  }
  _connected(response) {
    if (this.ended)
      return;
    __classPrivateFieldSet3(this, _MessageStream_response, response, "f");
    __classPrivateFieldSet3(this, _MessageStream_request_id, response == null ? void 0 : response.headers.get("request-id"), "f");
    __classPrivateFieldGet3(this, _MessageStream_resolveConnectedPromise, "f").call(this, response);
    this._emit("connect");
  }
  get ended() {
    return __classPrivateFieldGet3(this, _MessageStream_ended, "f");
  }
  get errored() {
    return __classPrivateFieldGet3(this, _MessageStream_errored, "f");
  }
  get aborted() {
    return __classPrivateFieldGet3(this, _MessageStream_aborted, "f");
  }
  abort() {
    this.controller.abort();
  }
  /**
   * Adds the listener function to the end of the listeners array for the event.
   * No checks are made to see if the listener has already been added. Multiple calls passing
   * the same combination of event and listener will result in the listener being added, and
   * called, multiple times.
   * @returns this MessageStream, so that calls can be chained
   */
  on(event, listener) {
    const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] || (__classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = []);
    listeners.push({ listener });
    return this;
  }
  /**
   * Removes the specified listener from the listener array for the event.
   * off() will remove, at most, one instance of a listener from the listener array. If any single
   * listener has been added multiple times to the listener array for the specified event, then
   * off() must be called multiple times to remove each instance.
   * @returns this MessageStream, so that calls can be chained
   */
  off(event, listener) {
    const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event];
    if (!listeners)
      return this;
    const index = listeners.findIndex((l) => l.listener === listener);
    if (index >= 0)
      listeners.splice(index, 1);
    return this;
  }
  /**
   * Adds a one-time listener function for the event. The next time the event is triggered,
   * this listener is removed and then invoked.
   * @returns this MessageStream, so that calls can be chained
   */
  once(event, listener) {
    const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] || (__classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = []);
    listeners.push({ listener, once: true });
    return this;
  }
  /**
   * This is similar to `.once()`, but returns a Promise that resolves the next time
   * the event is triggered, instead of calling a listener callback.
   * @returns a Promise that resolves the next time given event is triggered,
   * or rejects if an error is emitted.  (If you request the 'error' event,
   * returns a promise that resolves with the error).
   *
   * Example:
   *
   *   const message = await stream.emitted('message') // rejects if the stream errors
   */
  emitted(event) {
    return new Promise((resolve, reject) => {
      __classPrivateFieldSet3(this, _MessageStream_catchingPromiseCreated, true, "f");
      if (event !== "error")
        this.once("error", reject);
      this.once(event, resolve);
    });
  }
  async done() {
    __classPrivateFieldSet3(this, _MessageStream_catchingPromiseCreated, true, "f");
    await __classPrivateFieldGet3(this, _MessageStream_endPromise, "f");
  }
  get currentMessage() {
    return __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
  }
  /**
   * @returns a promise that resolves with the the final assistant Message response,
   * or rejects if an error occurred or the stream ended prematurely without producing a Message.
   */
  async finalMessage() {
    await this.done();
    return __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalMessage).call(this);
  }
  /**
   * @returns a promise that resolves with the the final assistant Message's text response, concatenated
   * together if there are more than one text blocks.
   * Rejects if an error occurred or the stream ended prematurely without producing a Message.
   */
  async finalText() {
    await this.done();
    return __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalText).call(this);
  }
  _emit(event, ...args) {
    if (__classPrivateFieldGet3(this, _MessageStream_ended, "f"))
      return;
    if (event === "end") {
      __classPrivateFieldSet3(this, _MessageStream_ended, true, "f");
      __classPrivateFieldGet3(this, _MessageStream_resolveEndPromise, "f").call(this);
    }
    const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event];
    if (listeners) {
      __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = listeners.filter((l) => !l.once);
      listeners.forEach(({ listener }) => listener(...args));
    }
    if (event === "abort") {
      const error = args[0];
      if (!__classPrivateFieldGet3(this, _MessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
        Promise.reject(error);
      }
      __classPrivateFieldGet3(this, _MessageStream_rejectConnectedPromise, "f").call(this, error);
      __classPrivateFieldGet3(this, _MessageStream_rejectEndPromise, "f").call(this, error);
      this._emit("end");
      return;
    }
    if (event === "error") {
      const error = args[0];
      if (!__classPrivateFieldGet3(this, _MessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
        Promise.reject(error);
      }
      __classPrivateFieldGet3(this, _MessageStream_rejectConnectedPromise, "f").call(this, error);
      __classPrivateFieldGet3(this, _MessageStream_rejectEndPromise, "f").call(this, error);
      this._emit("end");
    }
  }
  _emitFinal() {
    const finalMessage = this.receivedMessages.at(-1);
    if (finalMessage) {
      this._emit("finalMessage", __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalMessage).call(this));
    }
  }
  async _fromReadableStream(readableStream, options) {
    var _a2;
    const signal = options == null ? void 0 : options.signal;
    if (signal) {
      if (signal.aborted)
        this.controller.abort();
      signal.addEventListener("abort", () => this.controller.abort());
    }
    __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_beginRequest).call(this);
    this._connected(null);
    const stream = Stream.fromReadableStream(readableStream, this.controller);
    for await (const event of stream) {
      __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_addStreamEvent).call(this, event);
    }
    if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
      throw new APIUserAbortError();
    }
    __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_endRequest).call(this);
  }
  [(_MessageStream_currentMessageSnapshot = /* @__PURE__ */ new WeakMap(), _MessageStream_connectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_resolveConnectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_rejectConnectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_endPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_resolveEndPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_rejectEndPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_listeners = /* @__PURE__ */ new WeakMap(), _MessageStream_ended = /* @__PURE__ */ new WeakMap(), _MessageStream_errored = /* @__PURE__ */ new WeakMap(), _MessageStream_aborted = /* @__PURE__ */ new WeakMap(), _MessageStream_catchingPromiseCreated = /* @__PURE__ */ new WeakMap(), _MessageStream_response = /* @__PURE__ */ new WeakMap(), _MessageStream_request_id = /* @__PURE__ */ new WeakMap(), _MessageStream_handleError = /* @__PURE__ */ new WeakMap(), _MessageStream_instances = /* @__PURE__ */ new WeakSet(), _MessageStream_getFinalMessage = function _MessageStream_getFinalMessage2() {
    if (this.receivedMessages.length === 0) {
      throw new AnthropicError("stream ended without producing a Message with role=assistant");
    }
    return this.receivedMessages.at(-1);
  }, _MessageStream_getFinalText = function _MessageStream_getFinalText2() {
    if (this.receivedMessages.length === 0) {
      throw new AnthropicError("stream ended without producing a Message with role=assistant");
    }
    const textBlocks = this.receivedMessages.at(-1).content.filter((block) => block.type === "text").map((block) => block.text);
    if (textBlocks.length === 0) {
      throw new AnthropicError("stream ended without producing a content block with type=text");
    }
    return textBlocks.join(" ");
  }, _MessageStream_beginRequest = function _MessageStream_beginRequest2() {
    if (this.ended)
      return;
    __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, void 0, "f");
  }, _MessageStream_addStreamEvent = function _MessageStream_addStreamEvent2(event) {
    var _a2;
    if (this.ended)
      return;
    const messageSnapshot = __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_accumulateMessage).call(this, event);
    this._emit("streamEvent", event, messageSnapshot);
    switch (event.type) {
      case "content_block_delta": {
        const content = messageSnapshot.content.at(-1);
        switch (event.delta.type) {
          case "text_delta": {
            if (content.type === "text") {
              this._emit("text", event.delta.text, content.text || "");
            }
            break;
          }
          case "citations_delta": {
            if (content.type === "text") {
              this._emit("citation", event.delta.citation, (_a2 = content.citations) != null ? _a2 : []);
            }
            break;
          }
          case "input_json_delta": {
            if (content.type === "tool_use" && content.input) {
              this._emit("inputJson", event.delta.partial_json, content.input);
            }
            break;
          }
          default:
            checkNever2(event.delta);
        }
        break;
      }
      case "message_stop": {
        this._addMessageParam(messageSnapshot);
        this._addMessage(messageSnapshot, true);
        break;
      }
      case "content_block_stop": {
        this._emit("contentBlock", messageSnapshot.content.at(-1));
        break;
      }
      case "message_start": {
        __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, messageSnapshot, "f");
        break;
      }
      case "content_block_start":
      case "message_delta":
        break;
    }
  }, _MessageStream_endRequest = function _MessageStream_endRequest2() {
    if (this.ended) {
      throw new AnthropicError(`stream has ended, this shouldn't happen`);
    }
    const snapshot = __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
    if (!snapshot) {
      throw new AnthropicError(`request ended without sending any chunks`);
    }
    __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, void 0, "f");
    return snapshot;
  }, _MessageStream_accumulateMessage = function _MessageStream_accumulateMessage2(event) {
    var _a2;
    let snapshot = __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
    if (event.type === "message_start") {
      if (snapshot) {
        throw new AnthropicError(`Unexpected event order, got ${event.type} before receiving "message_stop"`);
      }
      return event.message;
    }
    if (!snapshot) {
      throw new AnthropicError(`Unexpected event order, got ${event.type} before "message_start"`);
    }
    switch (event.type) {
      case "message_stop":
        return snapshot;
      case "message_delta":
        snapshot.stop_reason = event.delta.stop_reason;
        snapshot.stop_sequence = event.delta.stop_sequence;
        snapshot.usage.output_tokens = event.usage.output_tokens;
        return snapshot;
      case "content_block_start":
        snapshot.content.push(event.content_block);
        return snapshot;
      case "content_block_delta": {
        const snapshotContent = snapshot.content.at(event.index);
        switch (event.delta.type) {
          case "text_delta": {
            if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
              snapshotContent.text += event.delta.text;
            }
            break;
          }
          case "citations_delta": {
            if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
              (_a2 = snapshotContent.citations) != null ? _a2 : snapshotContent.citations = [];
              snapshotContent.citations.push(event.delta.citation);
            }
            break;
          }
          case "input_json_delta": {
            if ((snapshotContent == null ? void 0 : snapshotContent.type) === "tool_use") {
              let jsonBuf = snapshotContent[JSON_BUF_PROPERTY2] || "";
              jsonBuf += event.delta.partial_json;
              Object.defineProperty(snapshotContent, JSON_BUF_PROPERTY2, {
                value: jsonBuf,
                enumerable: false,
                writable: true
              });
              if (jsonBuf) {
                snapshotContent.input = partialParse(jsonBuf);
              }
            }
            break;
          }
          default:
            checkNever2(event.delta);
        }
        return snapshot;
      }
      case "content_block_stop":
        return snapshot;
    }
  }, Symbol.asyncIterator)]() {
    const pushQueue = [];
    const readQueue = [];
    let done = false;
    this.on("streamEvent", (event) => {
      const reader = readQueue.shift();
      if (reader) {
        reader.resolve(event);
      } else {
        pushQueue.push(event);
      }
    });
    this.on("end", () => {
      done = true;
      for (const reader of readQueue) {
        reader.resolve(void 0);
      }
      readQueue.length = 0;
    });
    this.on("abort", (err) => {
      done = true;
      for (const reader of readQueue) {
        reader.reject(err);
      }
      readQueue.length = 0;
    });
    this.on("error", (err) => {
      done = true;
      for (const reader of readQueue) {
        reader.reject(err);
      }
      readQueue.length = 0;
    });
    return {
      next: async () => {
        if (!pushQueue.length) {
          if (done) {
            return { value: void 0, done: true };
          }
          return new Promise((resolve, reject) => readQueue.push({ resolve, reject })).then((chunk2) => chunk2 ? { value: chunk2, done: false } : { value: void 0, done: true });
        }
        const chunk = pushQueue.shift();
        return { value: chunk, done: false };
      },
      return: async () => {
        this.abort();
        return { value: void 0, done: true };
      }
    };
  }
  toReadableStream() {
    const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);
    return stream.toReadableStream();
  }
};
function checkNever2(x) {
}

// node_modules/@anthropic-ai/sdk/resources/messages/messages.mjs
var Messages2 = class extends APIResource {
  constructor() {
    super(...arguments);
    this.batches = new Batches2(this._client);
  }
  create(body, options) {
    var _a2, _b;
    if (body.model in DEPRECATED_MODELS2) {
      console.warn(`The model '${body.model}' is deprecated and will reach end-of-life on ${DEPRECATED_MODELS2[body.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);
    }
    return this._client.post("/v1/messages", {
      body,
      timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
      ...options,
      stream: (_b = body.stream) != null ? _b : false
    });
  }
  /**
   * Create a Message stream
   */
  stream(body, options) {
    return MessageStream.createMessage(this, body, options);
  }
  /**
   * Count the number of tokens in a Message.
   *
   * The Token Count API can be used to count the number of tokens in a Message,
   * including tools, images, and documents, without creating it.
   */
  countTokens(body, options) {
    return this._client.post("/v1/messages/count_tokens", { body, ...options });
  }
};
var DEPRECATED_MODELS2 = {
  "claude-1.3": "November 6th, 2024",
  "claude-1.3-100k": "November 6th, 2024",
  "claude-instant-1.1": "November 6th, 2024",
  "claude-instant-1.1-100k": "November 6th, 2024",
  "claude-instant-1.2": "November 6th, 2024",
  "claude-3-sonnet-20240229": "July 21st, 2025",
  "claude-2.1": "July 21st, 2025",
  "claude-2.0": "July 21st, 2025"
};
Messages2.Batches = Batches2;
Messages2.MessageBatchesPage = MessageBatchesPage;

// node_modules/@anthropic-ai/sdk/resources/models.mjs
var Models2 = class extends APIResource {
  /**
   * Get a specific model.
   *
   * The Models API response can be used to determine information about a specific
   * model or resolve a model alias to a model ID.
   */
  retrieve(modelId, options) {
    return this._client.get(`/v1/models/${modelId}`, options);
  }
  list(query = {}, options) {
    if (isRequestOptions(query)) {
      return this.list({}, query);
    }
    return this._client.getAPIList("/v1/models", ModelInfosPage, { query, ...options });
  }
};
var ModelInfosPage = class extends Page {
};
Models2.ModelInfosPage = ModelInfosPage;

// node_modules/@anthropic-ai/sdk/index.mjs
var _a;
var Anthropic = class extends APIClient {
  /**
   * API Client for interfacing with the Anthropic API.
   *
   * @param {string | null | undefined} [opts.apiKey=process.env['ANTHROPIC_API_KEY'] ?? null]
   * @param {string | null | undefined} [opts.authToken=process.env['ANTHROPIC_AUTH_TOKEN'] ?? null]
   * @param {string} [opts.baseURL=process.env['ANTHROPIC_BASE_URL'] ?? https://api.anthropic.com] - Override the default base URL for the API.
   * @param {number} [opts.timeout=10 minutes] - The maximum amount of time (in milliseconds) the client will wait for a response before timing out.
   * @param {number} [opts.httpAgent] - An HTTP agent used to manage HTTP(s) connections.
   * @param {Core.Fetch} [opts.fetch] - Specify a custom `fetch` function implementation.
   * @param {number} [opts.maxRetries=2] - The maximum number of times the client will retry a request.
   * @param {Core.Headers} opts.defaultHeaders - Default headers to include with every request to the API.
   * @param {Core.DefaultQuery} opts.defaultQuery - Default query parameters to include with every request to the API.
   * @param {boolean} [opts.dangerouslyAllowBrowser=false] - By default, client-side use of this library is not allowed, as it risks exposing your secret API credentials to attackers.
   */
  constructor({ baseURL = readEnv("ANTHROPIC_BASE_URL"), apiKey = ((_a2) => (_a2 = readEnv("ANTHROPIC_API_KEY")) != null ? _a2 : null)(), authToken = ((_b) => (_b = readEnv("ANTHROPIC_AUTH_TOKEN")) != null ? _b : null)(), ...opts } = {}) {
    var _a3;
    const options = {
      apiKey,
      authToken,
      ...opts,
      baseURL: baseURL || `https://api.anthropic.com`
    };
    if (!options.dangerouslyAllowBrowser && isRunningInBrowser()) {
      throw new AnthropicError("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");
    }
    super({
      baseURL: options.baseURL,
      timeout: (_a3 = options.timeout) != null ? _a3 : 6e5,
      httpAgent: options.httpAgent,
      maxRetries: options.maxRetries,
      fetch: options.fetch
    });
    this.completions = new Completions(this);
    this.messages = new Messages2(this);
    this.models = new Models2(this);
    this.beta = new Beta(this);
    this._options = options;
    this.apiKey = apiKey;
    this.authToken = authToken;
  }
  defaultQuery() {
    return this._options.defaultQuery;
  }
  defaultHeaders(opts) {
    return {
      ...super.defaultHeaders(opts),
      ...this._options.dangerouslyAllowBrowser ? { "anthropic-dangerous-direct-browser-access": "true" } : void 0,
      "anthropic-version": "2023-06-01",
      ...this._options.defaultHeaders
    };
  }
  validateHeaders(headers, customHeaders) {
    if (this.apiKey && headers["x-api-key"]) {
      return;
    }
    if (customHeaders["x-api-key"] === null) {
      return;
    }
    if (this.authToken && headers["authorization"]) {
      return;
    }
    if (customHeaders["authorization"] === null) {
      return;
    }
    throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted');
  }
  authHeaders(opts) {
    const apiKeyAuth = this.apiKeyAuth(opts);
    const bearerAuth = this.bearerAuth(opts);
    if (apiKeyAuth != null && !isEmptyObj(apiKeyAuth)) {
      return apiKeyAuth;
    }
    if (bearerAuth != null && !isEmptyObj(bearerAuth)) {
      return bearerAuth;
    }
    return {};
  }
  apiKeyAuth(opts) {
    if (this.apiKey == null) {
      return {};
    }
    return { "X-Api-Key": this.apiKey };
  }
  bearerAuth(opts) {
    if (this.authToken == null) {
      return {};
    }
    return { Authorization: `Bearer ${this.authToken}` };
  }
};
_a = Anthropic;
Anthropic.Anthropic = _a;
Anthropic.HUMAN_PROMPT = "\n\nHuman:";
Anthropic.AI_PROMPT = "\n\nAssistant:";
Anthropic.DEFAULT_TIMEOUT = 6e5;
Anthropic.AnthropicError = AnthropicError;
Anthropic.APIError = APIError;
Anthropic.APIConnectionError = APIConnectionError;
Anthropic.APIConnectionTimeoutError = APIConnectionTimeoutError;
Anthropic.APIUserAbortError = APIUserAbortError;
Anthropic.NotFoundError = NotFoundError;
Anthropic.ConflictError = ConflictError;
Anthropic.RateLimitError = RateLimitError;
Anthropic.BadRequestError = BadRequestError;
Anthropic.AuthenticationError = AuthenticationError;
Anthropic.InternalServerError = InternalServerError;
Anthropic.PermissionDeniedError = PermissionDeniedError;
Anthropic.UnprocessableEntityError = UnprocessableEntityError;
Anthropic.toFile = toFile;
Anthropic.fileFromPath = fileFromPath;
Anthropic.Completions = Completions;
Anthropic.Messages = Messages2;
Anthropic.Models = Models2;
Anthropic.ModelInfosPage = ModelInfosPage;
Anthropic.Beta = Beta;
var { HUMAN_PROMPT, AI_PROMPT } = Anthropic;
var sdk_default = Anthropic;

// providers/anthropic.ts
var AnthropicProvider = class extends BaseProvider {
  constructor(apiKey, model = "claude-3-sonnet-20240229") {
    super();
    __publicField(this, "apiKey");
    __publicField(this, "baseUrl", "https://api.anthropic.com/v1");
    __publicField(this, "model");
    __publicField(this, "client");
    this.apiKey = apiKey;
    this.model = model;
    this.client = new sdk_default({
      apiKey: this.apiKey,
      dangerouslyAllowBrowser: true
      // Required for browser environments
    });
  }
  /**
   * Get a completion from Anthropic
   * 
   * Sends the conversation to Anthropic and streams back the response
   * using the official SDK's streaming support.
   * 
   * @param messages - The conversation history
   * @param options - Settings for this completion
   */
  async getCompletion(messages, options) {
    var _a2, _b, _c;
    try {
      const stream = await this.client.messages.create({
        model: this.model,
        messages: messages.map((msg) => ({
          role: msg.role === "system" ? "user" : msg.role,
          content: msg.content
        })),
        temperature: (_a2 = options.temperature) != null ? _a2 : 0.7,
        max_tokens: (_b = options.maxTokens) != null ? _b : 1e3,
        stream: true
      });
      for await (const chunk of stream) {
        if (chunk.type === "content_block_delta" && ((_c = chunk.delta) == null ? void 0 : _c.type) === "text_delta" && options.streamCallback) {
          options.streamCallback(chunk.delta.text);
        }
      }
    } catch (error) {
      if (error instanceof ProviderError) {
        throw error;
      }
      if (error.name === "AbortError") {
        console.log("Anthropic stream was aborted");
      } else {
        console.error("Error calling Anthropic:", error);
        throw error;
      }
    }
  }
  /**
   * Get available Anthropic models
   * 
   * Returns the list of supported Claude models.
   * Note: Anthropic doesn't have a models endpoint, so we return known models.
   * 
   * @returns List of available model names
   */
  async getAvailableModels() {
    return [
      "claude-3-opus-20240229",
      "claude-3-sonnet-20240229",
      "claude-3-haiku-20240307"
    ];
  }
  /**
   * Test connection to Anthropic
   * 
   * Verifies the API key works by attempting a simple completion.
   * 
   * @returns Test results including success/failure
   */
  async testConnection() {
    try {
      await this.client.messages.create({
        model: this.model,
        messages: [{ role: "user", content: "Hi" }],
        max_tokens: 1
      });
      const models = await this.getAvailableModels();
      return {
        success: true,
        message: "Successfully connected to Anthropic!",
        models
      };
    } catch (error) {
      return this.createErrorResponse(error);
    }
  }
};

// providers/openai.ts
var OpenAIProvider = class extends BaseProvider {
  constructor(apiKey, model = "gpt-4") {
    super();
    __publicField(this, "apiKey");
    __publicField(this, "baseUrl", "https://api.openai.com/v1");
    __publicField(this, "model");
    this.apiKey = apiKey;
    this.model = model;
  }
  /**
   * Get a completion from OpenAI
   * 
   * Sends the conversation to OpenAI and streams back the response.
   * 
   * @param messages - The conversation history
   * @param options - Settings for this completion
   */
  async getCompletion(messages, options) {
    var _a2, _b, _c, _d, _e, _f;
    try {
      const response = await fetch(`${this.baseUrl}/chat/completions`, {
        method: "POST",
        headers: {
          "Authorization": `Bearer ${this.apiKey}`,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          model: this.model,
          messages,
          temperature: (_a2 = options.temperature) != null ? _a2 : 0.7,
          max_tokens: (_b = options.maxTokens) != null ? _b : 1e3,
          stream: true
        }),
        signal: (_c = options.abortController) == null ? void 0 : _c.signal
      });
      if (!response.ok) {
        throw this.handleHttpError(response);
      }
      const reader = (_d = response.body) == null ? void 0 : _d.getReader();
      const decoder = new TextDecoder("utf-8");
      let buffer = "";
      while (true) {
        const { done, value } = await (reader == null ? void 0 : reader.read()) || { done: true, value: void 0 };
        if (done) break;
        buffer += decoder.decode(value, { stream: true });
        const lines = buffer.split("\n");
        buffer = lines.pop() || "";
        for (const line of lines) {
          if (line.startsWith("data: ") && line !== "data: [DONE]") {
            try {
              const data = JSON.parse(line.slice(6));
              const content = (_f = (_e = data.choices[0]) == null ? void 0 : _e.delta) == null ? void 0 : _f.content;
              if (content && options.streamCallback) {
                options.streamCallback(content);
              }
            } catch (e) {
              console.warn("Error parsing OpenAI response chunk:", e);
            }
          }
        }
      }
    } catch (error) {
      if (error instanceof ProviderError) {
        throw error;
      }
      if (error.name === "AbortError") {
        console.log("OpenAI stream was aborted");
      } else {
        console.error("Error calling OpenAI:", error);
        throw error;
      }
    }
  }
  /**
   * Get available OpenAI models
   * 
   * Fetches the list of models from OpenAI's API.
   * Filters to only include chat models (GPT-3.5, GPT-4, etc.)
   * 
   * @returns List of available model names
   */
  async getAvailableModels() {
    try {
      const response = await fetch(`${this.baseUrl}/models`, {
        method: "GET",
        headers: {
          "Authorization": `Bearer ${this.apiKey}`,
          "Content-Type": "application/json"
        }
      });
      if (!response.ok) {
        throw this.handleHttpError(response);
      }
      const data = await response.json();
      return data.data.map((model) => model.id).filter((id) => id.startsWith("gpt-"));
    } catch (error) {
      console.error("Error fetching OpenAI models:", error);
      throw error;
    }
  }
  /**
   * Test connection to OpenAI
   * 
   * Verifies the API key works by attempting to list models.
   * 
   * @returns Test results including success/failure and available models
   */
  async testConnection() {
    try {
      const models = await this.getAvailableModels();
      return {
        success: true,
        message: `Successfully connected to OpenAI! Found ${models.length} available models.`,
        models
      };
    } catch (error) {
      return this.createErrorResponse(error);
    }
  }
};

// providers/gemini.ts
var GeminiProvider = class extends BaseProvider {
  constructor(apiKey, model = "gemini-pro") {
    super();
    __publicField(this, "apiKey");
    __publicField(this, "baseUrl", "https://generativelanguage.googleapis.com/v1");
    __publicField(this, "model");
    this.apiKey = apiKey;
    this.model = model;
  }
  /**
   * Get a completion from Google Gemini
   * 
   * Sends the conversation to Gemini and streams back the response.
   * 
   * @param messages - The conversation history
   * @param options - Settings for this completion
   */
  async getCompletion(messages, options) {
    var _a2, _b, _c, _d, _e, _f, _g, _h;
    try {
      const formattedMessages = this.formatMessages(messages);
      const url = `${this.baseUrl}/models/${this.model}:generateContent?key=${this.apiKey}`;
      const response = await fetch(url, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          contents: formattedMessages,
          generationConfig: {
            temperature: (_a2 = options.temperature) != null ? _a2 : 0.7,
            maxOutputTokens: (_b = options.maxTokens) != null ? _b : 1e3
          }
        }),
        signal: (_c = options.abortController) == null ? void 0 : _c.signal
      });
      if (!response.ok) {
        throw this.handleHttpError(response);
      }
      const data = await response.json();
      console.log("Gemini response:", JSON.stringify(data));
      const text = (_h = (_g = (_f = (_e = (_d = data.candidates) == null ? void 0 : _d[0]) == null ? void 0 : _e.content) == null ? void 0 : _f.parts) == null ? void 0 : _g[0]) == null ? void 0 : _h.text;
      if (text && options.streamCallback) {
        options.streamCallback(text);
      } else {
        console.warn("No text found in Gemini response:", JSON.stringify(data));
      }
    } catch (error) {
      if (error instanceof ProviderError) {
        throw error;
      }
      if (error.name === "AbortError") {
        console.log("Gemini request was aborted");
      } else {
        console.error("Error calling Gemini:", error);
        throw error;
      }
    }
  }
  /**
   * Get available Gemini models
   * 
   * Fetches the list of available models from Google's API.
   * Filters to only include Gemini models.
   * 
   * @returns List of available model names
   */
  async getAvailableModels() {
    try {
      const response = await fetch(`${this.baseUrl}/models?key=${this.apiKey}`, {
        method: "GET",
        headers: {
          "Content-Type": "application/json"
        }
      });
      if (!response.ok) {
        throw this.handleHttpError(response);
      }
      const data = await response.json();
      return data.models.map((model) => model.name.split("/").pop()).filter((id) => id.startsWith("gemini-"));
    } catch (error) {
      console.error("Error fetching Gemini models:", error);
      throw error;
    }
  }
  /**
   * Test connection to Gemini
   * 
   * Verifies the API key works by attempting to list models.
   * 
   * @returns Test results including success/failure and available models
   */
  async testConnection() {
    try {
      const models = await this.getAvailableModels();
      return {
        success: true,
        message: `Successfully connected to Google Gemini! Found ${models.length} available models.`,
        models
      };
    } catch (error) {
      return this.createErrorResponse(error);
    }
  }
  /**
   * Format messages for Gemini API
   * 
   * Converts from the plugin's Message format to Gemini's expected format.
   * 
   * @param messages - Array of messages to format
   * @returns Formatted messages for Gemini API
   */
  formatMessages(messages) {
    const geminiMessages = [];
    const systemMessages = messages.filter((msg) => msg.role === "system");
    const nonSystemMessages = messages.filter((msg) => msg.role !== "system");
    for (const message of systemMessages) {
      geminiMessages.push({
        role: "user",
        parts: [{ text: message.content }]
      });
    }
    for (const message of nonSystemMessages) {
      const role = message.role === "assistant" ? "model" : "user";
      geminiMessages.push({
        role,
        parts: [{ text: message.content }]
      });
    }
    return geminiMessages;
  }
};

// providers/ollama.ts
var OllamaProvider = class extends BaseProvider {
  constructor(serverUrl = "http://localhost:11434", model = "llama2") {
    super();
    __publicField(this, "apiKey", "");
    // Not used for Ollama
    __publicField(this, "baseUrl");
    __publicField(this, "model");
    this.baseUrl = serverUrl.replace(/\/$/, "");
    this.model = model;
  }
  /**
   * Convert messages to Ollama format
   * 
   * @param messages - Standard message format
   * @returns Prompt string in Ollama format
   */
  convertToOllamaFormat(messages) {
    return messages.map((msg) => {
      if (msg.role === "system") {
        return `System: ${msg.content}

`;
      }
      return `${msg.role === "user" ? "Human" : "Assistant"}: ${msg.content}

`;
    }).join("") + "Assistant:";
  }
  /**
   * Get a completion from Ollama
   * 
   * Sends the conversation to the local Ollama server and streams back the response.
   * 
   * @param messages - The conversation history
   * @param options - Settings for this completion
   */
  async getCompletion(messages, options) {
    var _a2, _b, _c, _d;
    try {
      const prompt = this.convertToOllamaFormat(messages);
      const response = await fetch(`${this.baseUrl}/api/generate`, {
        method: "POST",
        headers: {
          "Content-Type": "application/json"
        },
        body: JSON.stringify({
          model: this.model,
          prompt,
          stream: true,
          options: {
            temperature: (_a2 = options.temperature) != null ? _a2 : 0.7,
            num_predict: (_b = options.maxTokens) != null ? _b : 1e3
          }
        }),
        signal: (_c = options.abortController) == null ? void 0 : _c.signal
      });
      if (!response.ok) {
        throw this.handleHttpError(response);
      }
      const reader = (_d = response.body) == null ? void 0 : _d.getReader();
      const decoder = new TextDecoder("utf-8");
      let buffer = "";
      while (true) {
        const { done, value } = await (reader == null ? void 0 : reader.read()) || { done: true, value: void 0 };
        if (done) break;
        buffer += decoder.decode(value, { stream: true });
        const lines = buffer.split("\n");
        buffer = lines.pop() || "";
        for (const line of lines) {
          if (line.trim()) {
            try {
              const data = JSON.parse(line);
              if (data.response && options.streamCallback) {
                options.streamCallback(data.response);
              }
            } catch (e) {
              console.warn("Error parsing Ollama response chunk:", e);
            }
          }
        }
      }
    } catch (error) {
      if (error instanceof ProviderError) {
        throw error;
      }
      if (error.name === "AbortError") {
        console.log("Ollama stream was aborted");
      } else {
        console.error("Error calling Ollama:", error);
        throw error;
      }
    }
  }
  /**
   * Get available Ollama models
   * 
   * Fetches the list of models installed on the local Ollama server.
   * 
   * @returns List of available model names
   */
  async getAvailableModels() {
    var _a2;
    try {
      const response = await fetch(`${this.baseUrl}/api/tags`);
      if (!response.ok) {
        throw this.handleHttpError(response);
      }
      const data = await response.json();
      return ((_a2 = data.models) == null ? void 0 : _a2.map((model) => model.name)) || [];
    } catch (error) {
      console.error("Error fetching Ollama models:", error);
      throw error;
    }
  }
  /**
   * Test connection to Ollama
   * 
   * Verifies the Ollama server is running and accessible.
   * Also checks if any models are installed.
   * 
   * @returns Test results including success/failure and available models
   */
  async testConnection() {
    try {
      const models = await this.getAvailableModels();
      if (models.length === 0) {
        return {
          success: false,
          message: 'Connected to Ollama server, but no models are installed. Use "ollama pull model-name" to install models.',
          models: []
        };
      }
      return {
        success: true,
        message: `Successfully connected to Ollama! Found ${models.length} installed models.`,
        models
      };
    } catch (error) {
      return this.createErrorResponse(error);
    }
  }
};

// providers/index.ts
function createProvider(settings) {
  switch (settings.provider) {
    case "openai":
      return new OpenAIProvider(
        settings.openaiSettings.apiKey,
        settings.openaiSettings.model
      );
    case "anthropic":
      return new AnthropicProvider(
        settings.anthropicSettings.apiKey,
        settings.anthropicSettings.model
      );
    case "gemini":
      return new GeminiProvider(
        settings.geminiSettings.apiKey,
        settings.geminiSettings.model
      );
    case "ollama":
      return new OllamaProvider(
        settings.ollamaSettings.serverUrl,
        settings.ollamaSettings.model
      );
    default:
      throw new Error(`Invalid provider type: ${settings.provider}`);
  }
}

// settings.ts
var import_obsidian = require("obsidian");
var MyPluginSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    __publicField(this, "plugin");
    this.plugin = plugin;
  }
  /**
   * Display the settings tab
   * 
   * Shows only the auto-open setting here since all other settings
   * are managed in the model settings view for better organization.
   */
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "AI Assistant Settings" });
    containerEl.createEl("h3", { text: "API Keys" });
    new import_obsidian.Setting(containerEl).setName("OpenAI API Key").setDesc("Enter your OpenAI API key").addText((text) => text.setPlaceholder("Enter your API key").setValue(this.plugin.settings.openaiSettings.apiKey).onChange(async (value) => {
      this.plugin.settings.openaiSettings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Anthropic API Key").setDesc("Enter your Anthropic API key").addText((text) => text.setPlaceholder("Enter your API key").setValue(this.plugin.settings.anthropicSettings.apiKey).onChange(async (value) => {
      this.plugin.settings.anthropicSettings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Google API Key").setDesc("Enter your Google API key").addText((text) => text.setPlaceholder("Enter your API key").setValue(this.plugin.settings.geminiSettings.apiKey).onChange(async (value) => {
      this.plugin.settings.geminiSettings.apiKey = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Ollama Server URL").setDesc("Enter your Ollama server URL (default: http://localhost:11434)").addText((text) => text.setPlaceholder("http://localhost:11434").setValue(this.plugin.settings.ollamaSettings.serverUrl).onChange(async (value) => {
      this.plugin.settings.ollamaSettings.serverUrl = value;
      await this.plugin.saveSettings();
    }));
    containerEl.createEl("h3", { text: "Model Settings" });
    new import_obsidian.Setting(containerEl).setName("Auto-open Model Settings").setDesc("Automatically open model settings when Obsidian starts").addToggle((toggle) => toggle.setValue(this.plugin.settings.autoOpenModelSettings).onChange(async (value) => {
      this.plugin.settings.autoOpenModelSettings = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian.Setting(containerEl).setName("Open Model Settings").setDesc("Open the model settings view").addButton((button) => button.setButtonText("Open").onClick(() => {
      this.plugin.activateView();
    }));
    new import_obsidian.Setting(containerEl).setName("Chat Separator").setDesc("The string used to separate chat messages.").addText((text) => {
      var _a2;
      text.setPlaceholder("----").setValue((_a2 = this.plugin.settings.chatSeparator) != null ? _a2 : "").onChange(async (value) => {
        this.plugin.settings.chatSeparator = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Chat Start String").setDesc("The string that indicates where to start taking the note for context.").addText((text) => {
      var _a2;
      text.setPlaceholder("===START===").setValue((_a2 = this.plugin.settings.chatStartString) != null ? _a2 : "").onChange(async (value) => {
        this.plugin.settings.chatStartString = value;
        await this.plugin.saveSettings();
      });
    });
    new import_obsidian.Setting(containerEl).setName("Chat End String").setDesc("The string that indicates where to end taking the note for context.").addText((text) => {
      var _a2;
      text.setPlaceholder("===END===").setValue((_a2 = this.plugin.settings.chatEndString) != null ? _a2 : "").onChange(async (value) => {
        this.plugin.settings.chatEndString = value;
        await this.plugin.saveSettings();
      });
    });
  }
};

// chat.ts
var import_obsidian2 = require("obsidian");
var VIEW_TYPE_CHAT = "chat-view";
var SettingsModal = class extends import_obsidian2.Modal {
  constructor(app, plugin) {
    super(app);
    __publicField(this, "plugin");
    this.plugin = plugin;
    this.titleEl.setText("AI Model Settings");
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("ai-settings-modal");
    new import_obsidian2.Setting(contentEl).setName("AI Provider").setDesc("Choose which AI provider to use").addDropdown((dropdown) => {
      dropdown.addOption("openai", "OpenAI (GPT-3.5, GPT-4)").addOption("anthropic", "Anthropic (Claude)").addOption("gemini", "Google (Gemini)").addOption("ollama", "Ollama (Local AI)").setValue(this.plugin.settings.provider).onChange(async (value) => {
        this.plugin.settings.provider = value;
        await this.plugin.saveSettings();
        this.onOpen();
      });
    });
    new import_obsidian2.Setting(contentEl).setName("System Message").setDesc("Set the system message for the AI").addTextArea((text) => text.setPlaceholder("You are a helpful assistant.").setValue(this.plugin.settings.systemMessage).onChange(async (value) => {
      this.plugin.settings.systemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Include Date with System Message").setDesc("Add the current date to the system message").addToggle((toggle) => toggle.setValue(this.plugin.settings.includeDateWithSystemMessage).onChange(async (value) => {
      this.plugin.settings.includeDateWithSystemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Include Time with System Message").setDesc("Add the current time along with the date to the system message").addToggle((toggle) => toggle.setValue(this.plugin.settings.includeTimeWithSystemMessage).onChange(async (value) => {
      this.plugin.settings.includeTimeWithSystemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Enable Obsidian Links").setDesc("Read Obsidian links in messages using [[filename]] syntax").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableObsidianLinks).onChange(async (value) => {
      this.plugin.settings.enableObsidianLinks = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Enable Context Notes").setDesc("Attach specified note content to chat messages").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableContextNotes).onChange(async (value) => {
      this.plugin.settings.enableContextNotes = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Context Notes").setDesc("Notes to attach as context (supports [[filename]] and [[filename#header]] syntax)").addTextArea((text) => {
      text.setPlaceholder("[[Note Name]]\n[[Another Note#Header]]").setValue(this.plugin.settings.contextNotes || "").onChange(async (value) => {
        this.plugin.settings.contextNotes = value;
        await this.plugin.saveSettings();
      });
      text.inputEl.rows = 4;
    });
    new import_obsidian2.Setting(contentEl).setName("Enable Streaming").setDesc("Enable or disable streaming for completions").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableStreaming).onChange(async (value) => {
      this.plugin.settings.enableStreaming = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Temperature").setDesc("Set the randomness of the model's output (0-1)").addSlider((slider) => slider.setLimits(0, 1, 0.1).setValue(this.plugin.settings.temperature).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.temperature = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian2.Setting(contentEl).setName("Max Tokens").setDesc("Set the maximum length of the model's output").addText((text) => text.setPlaceholder("4000").setValue(String(this.plugin.settings.maxTokens)).onChange(async (value) => {
      const numValue = Number(value);
      if (!isNaN(numValue)) {
        this.plugin.settings.maxTokens = numValue;
        await this.plugin.saveSettings();
      }
    }));
    new import_obsidian2.Setting(contentEl).setName("Reference Current Note").setDesc("Include the content of the current note in the chat context.").addToggle((toggle) => toggle.setValue(this.plugin.settings.referenceCurrentNote).onChange(async (value) => {
      this.plugin.settings.referenceCurrentNote = value;
      await this.plugin.saveSettings();
    }));
    contentEl.createEl("h3", { text: `${this.plugin.settings.provider.toUpperCase()} Settings` });
    switch (this.plugin.settings.provider) {
      case "openai": {
        const settings = this.plugin.settings.openaiSettings;
        new import_obsidian2.Setting(contentEl).setName("Model").setDesc("Choose the OpenAI model to use").addDropdown((dropdown) => {
          for (const model of settings.availableModels) {
            dropdown.addOption(model, model);
          }
          dropdown.setValue(settings.model).onChange(async (value) => {
            settings.model = value;
            await this.plugin.saveSettings();
          });
        });
        break;
      }
      case "anthropic": {
        const settings = this.plugin.settings.anthropicSettings;
        new import_obsidian2.Setting(contentEl).setName("Model").setDesc("Choose the Anthropic model to use").addDropdown((dropdown) => {
          for (const model of settings.availableModels) {
            dropdown.addOption(model, model);
          }
          dropdown.setValue(settings.model).onChange(async (value) => {
            settings.model = value;
            await this.plugin.saveSettings();
          });
        });
        break;
      }
      case "gemini": {
        const settings = this.plugin.settings.geminiSettings;
        new import_obsidian2.Setting(contentEl).setName("Model").setDesc("Choose the Gemini model to use").addDropdown((dropdown) => {
          for (const model of settings.availableModels) {
            dropdown.addOption(model, model);
          }
          dropdown.setValue(settings.model).onChange(async (value) => {
            settings.model = value;
            await this.plugin.saveSettings();
          });
        });
        break;
      }
      case "ollama": {
        const settings = this.plugin.settings.ollamaSettings;
        new import_obsidian2.Setting(contentEl).setName("Model").setDesc("Choose the Ollama model to use").addDropdown((dropdown) => {
          for (const model of settings.availableModels) {
            dropdown.addOption(model, model);
          }
          dropdown.setValue(settings.model).onChange(async (value) => {
            settings.model = value;
            await this.plugin.saveSettings();
          });
        });
        break;
      }
    }
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ConfirmationModal = class extends import_obsidian2.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    __publicField(this, "onConfirm");
    __publicField(this, "message");
    this.titleEl.setText(title);
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("p", { text: this.message });
    const buttonContainer = contentEl.createDiv("modal-button-container");
    buttonContainer.style.display = "flex";
    buttonContainer.style.justifyContent = "flex-end";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.marginTop = "16px";
    buttonContainer.createEl("button", { text: "Cancel" }).addEventListener("click", () => {
      this.onConfirm(false);
      this.close();
    });
    const confirmButton = buttonContainer.createEl("button", {
      text: "Delete",
      cls: "mod-warning"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm(true);
      this.close();
    });
  }
  onClose() {
    const { contentEl } = this;
    contentEl.empty();
  }
};
var ChatView = class extends import_obsidian2.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    __publicField(this, "plugin");
    __publicField(this, "messagesContainer");
    __publicField(this, "inputContainer");
    __publicField(this, "activeStream", null);
    __publicField(this, "settingsContainer", null);
    this.plugin = plugin;
  }
  getViewType() {
    return VIEW_TYPE_CHAT;
  }
  getDisplayText() {
    return "AI Chat";
  }
  getIcon() {
    return "message-square";
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("ai-chat-view");
    const settingsButton = document.createElement("button");
    settingsButton.setText("Settings");
    settingsButton.setAttribute("aria-label", "Toggle model settings");
    this.messagesContainer = contentEl.createDiv("ai-chat-messages");
    this.messagesContainer.style.flex = "1";
    this.messagesContainer.style.overflow = "auto";
    this.messagesContainer.style.padding = "16px";
    this.inputContainer = contentEl.createDiv("ai-chat-input-container");
    this.inputContainer.style.borderTop = "1px solid var(--background-modifier-border)";
    this.inputContainer.style.padding = "16px";
    const textarea = this.inputContainer.createEl("textarea", {
      cls: "ai-chat-input",
      attr: {
        placeholder: "Type your message...",
        rows: "3"
      }
    });
    textarea.style.width = "100%";
    textarea.style.resize = "none";
    textarea.style.border = "1px solid var(--background-modifier-border)";
    textarea.style.borderRadius = "4px";
    textarea.style.padding = "8px";
    textarea.style.backgroundColor = "var(--background-primary)";
    textarea.style.color = "var(--text-normal)";
    const buttonContainer = this.inputContainer.createDiv("ai-chat-buttons");
    buttonContainer.style.marginTop = "8px";
    buttonContainer.style.display = "flex";
    buttonContainer.style.gap = "8px";
    buttonContainer.style.justifyContent = "flex-end";
    const sendButton = buttonContainer.createEl("button", {
      text: "Send",
      cls: "mod-cta"
    });
    const stopButton = buttonContainer.createEl("button", {
      text: "Stop"
    });
    stopButton.style.display = "none";
    const copyAllButton = buttonContainer.createEl("button", {
      text: "Copy All"
    });
    copyAllButton.addEventListener("click", async () => {
      const messages = this.messagesContainer.querySelectorAll(".ai-chat-message");
      let chatContent = "";
      messages.forEach((el, index) => {
        var _a2;
        const content = ((_a2 = el.querySelector(".message-content")) == null ? void 0 : _a2.textContent) || "";
        chatContent += content;
        if (index < messages.length - 1) {
          chatContent += "\n\n" + this.plugin.settings.chatSeparator + "\n\n";
        }
      });
      await this.copyToClipboard(chatContent);
    });
    const clearButton = buttonContainer.createEl("button", {
      text: "Clear Chat"
    });
    const sendMessage = async () => {
      const content = textarea.value.trim();
      if (!content) return;
      textarea.disabled = true;
      sendButton.style.display = "none";
      stopButton.style.display = "block";
      this.addMessage("user", content);
      textarea.value = "";
      this.activeStream = new AbortController();
      try {
        const provider = createProvider(this.plugin.settings);
        const messages = [
          { role: "system", content: this.plugin.getSystemMessage() }
        ];
        if (this.plugin.settings.referenceCurrentNote) {
          const currentFile = this.app.workspace.getActiveFile();
          if (currentFile) {
            const currentNoteContent = await this.app.vault.cachedRead(currentFile);
            messages.push({
              role: "system",
              content: `Here is the content of the current note:

${currentNoteContent}`
            });
          }
        }
        const messageElements = this.messagesContainer.querySelectorAll(".ai-chat-message");
        messageElements.forEach((el) => {
          var _a2;
          const role = el.classList.contains("user") ? "user" : "assistant";
          const content2 = ((_a2 = el.querySelector(".message-content")) == null ? void 0 : _a2.textContent) || "";
          messages.push({ role, content: content2 });
        });
        const assistantContainer = this.createMessageElement("assistant", "");
        this.messagesContainer.appendChild(assistantContainer);
        this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
        let responseContent = "";
        await provider.getCompletion(
          messages,
          {
            temperature: this.plugin.settings.temperature,
            maxTokens: this.plugin.settings.maxTokens,
            streamCallback: async (chunk) => {
              responseContent += chunk;
              const contentEl2 = assistantContainer.querySelector(".message-content");
              if (contentEl2) {
                assistantContainer.dataset.rawContent = responseContent;
                contentEl2.empty();
                await import_obsidian2.MarkdownRenderer.render(
                  this.app,
                  responseContent,
                  contentEl2,
                  "",
                  this
                );
                this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
              }
            },
            abortController: this.activeStream
          }
        );
      } catch (error) {
        if (error.name !== "AbortError") {
          new import_obsidian2.Notice(`Error: ${error.message}`);
          this.addMessage("assistant", `Error: ${error.message}`);
        }
      } finally {
        textarea.disabled = false;
        textarea.focus();
        stopButton.style.display = "none";
        sendButton.style.display = "block";
        this.activeStream = null;
      }
    };
    textarea.addEventListener("keydown", (e) => {
      if (e.key === "Enter" && !e.shiftKey) {
        e.preventDefault();
        sendMessage();
      }
    });
    sendButton.addEventListener("click", sendMessage);
    stopButton.addEventListener("click", () => {
      if (this.activeStream) {
        this.activeStream.abort();
        this.activeStream = null;
        textarea.disabled = false;
        textarea.focus();
        stopButton.style.display = "none";
        sendButton.style.display = "block";
      }
    });
    clearButton.addEventListener("click", () => {
      this.messagesContainer.empty();
    });
    buttonContainer.insertBefore(settingsButton, clearButton);
    settingsButton.addEventListener("click", () => {
      const settingsModal = new SettingsModal(this.app, this.plugin);
      settingsModal.open();
    });
    this.addMessage("assistant", "Hello! How can I help you today?");
  }
  createActionButton(icon, label, tooltip, callback) {
    const button = document.createElement("button");
    button.addClass("ai-chat-action-button");
    button.setAttribute("aria-label", tooltip);
    button.style.display = "flex";
    button.style.alignItems = "center";
    button.style.gap = "4px";
    const iconEl = document.createElement("svg");
    iconEl.classList.add("lucide-icon");
    iconEl.innerHTML = `<use href="#lucide-${icon}"></use>`;
    button.appendChild(iconEl);
    const labelEl = document.createElement("span");
    labelEl.textContent = label;
    button.appendChild(labelEl);
    button.addEventListener("click", callback);
    return button;
  }
  async copyToClipboard(text) {
    try {
      await navigator.clipboard.writeText(text);
      new import_obsidian2.Notice("Copied to clipboard");
    } catch (error) {
      new import_obsidian2.Notice("Failed to copy to clipboard");
      console.error("Clipboard error:", error);
    }
  }
  createMessageElement(role, content) {
    const messageEl = document.createElement("div");
    messageEl.addClass("ai-chat-message", role);
    messageEl.style.marginBottom = "16px";
    messageEl.style.padding = "12px";
    messageEl.style.borderRadius = "8px";
    messageEl.style.backgroundColor = role === "user" ? "var(--background-modifier-hover)" : "var(--background-secondary)";
    const messageContainer = messageEl.createDiv("message-container");
    const contentEl = messageContainer.createDiv("message-content");
    contentEl.style.whiteSpace = "pre-wrap";
    messageEl.dataset.rawContent = content;
    import_obsidian2.MarkdownRenderer.render(
      this.app,
      content,
      contentEl,
      "",
      this
    ).catch((error) => {
      console.error("Markdown rendering error:", error);
      contentEl.textContent = content;
    });
    const actionsEl = messageContainer.createDiv("message-actions");
    actionsEl.style.display = "none";
    messageEl.addEventListener("mouseenter", () => {
      actionsEl.style.display = "flex";
    });
    messageEl.addEventListener("mouseleave", () => {
      actionsEl.style.display = "none";
    });
    actionsEl.style.flexWrap = "wrap";
    actionsEl.style.gap = "8px";
    actionsEl.style.marginTop = "8px";
    actionsEl.appendChild(this.createActionButton("copy", "Copy", "Copy message", () => {
      const currentContent = messageEl.dataset.rawContent || "";
      if (currentContent.trim() === "") {
        new import_obsidian2.Notice("No content to copy");
        return;
      }
      this.copyToClipboard(currentContent);
    }));
    actionsEl.appendChild(this.createActionButton("edit", "Edit", "Edit message", () => {
      const wasEditing = contentEl.hasClass("editing");
      if (!wasEditing) {
        const textarea = document.createElement("textarea");
        textarea.value = messageEl.dataset.rawContent || "";
        textarea.style.width = "100%";
        textarea.style.height = `${contentEl.offsetHeight}px`;
        textarea.style.minHeight = "100px";
        contentEl.empty();
        contentEl.appendChild(textarea);
        textarea.focus();
        contentEl.addClass("editing");
      } else {
        const textarea = contentEl.querySelector("textarea");
        if (textarea) {
          messageEl.dataset.rawContent = textarea.value;
          contentEl.empty();
          import_obsidian2.MarkdownRenderer.render(this.app, textarea.value, contentEl, "", this).catch((error) => {
            console.error("Markdown rendering error:", error);
            contentEl.textContent = textarea.value;
          });
          contentEl.removeClass("editing");
        }
      }
    }));
    actionsEl.appendChild(this.createActionButton("trash", "Delete", "Delete message", () => {
      const modal = new ConfirmationModal(
        this.app,
        "Delete message",
        "Are you sure you want to delete this message?",
        async (confirmed) => {
          if (confirmed) {
            messageEl.remove();
          }
        }
      );
      modal.open();
    }));
    if (role === "assistant") {
      actionsEl.appendChild(this.createActionButton("refresh-cw", "Regenerate", "Regenerate response", async () => {
        const currentMessage = messageEl;
        const textarea = this.inputContainer.querySelector("textarea");
        if (textarea) textarea.disabled = true;
        const allMessages = Array.from(this.messagesContainer.querySelectorAll(".ai-chat-message"));
        const currentIndex = allMessages.indexOf(currentMessage);
        const messages = [
          { role: "system", content: this.plugin.getSystemMessage() }
        ];
        for (let i = 0; i < currentIndex; i++) {
          const el = allMessages[i];
          const role2 = el.classList.contains("user") ? "user" : "assistant";
          const content2 = el.dataset.rawContent || "";
          messages.push({ role: role2, content: content2 });
        }
        currentMessage.remove();
        const assistantContainer = this.createMessageElement("assistant", "");
        this.messagesContainer.appendChild(assistantContainer);
        this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
        this.activeStream = new AbortController();
        try {
          const provider = createProvider(this.plugin.settings);
          let responseContent = "";
          await provider.getCompletion(
            messages,
            {
              temperature: this.plugin.settings.temperature,
              maxTokens: this.plugin.settings.maxTokens,
              streamCallback: async (chunk) => {
                responseContent += chunk;
                const contentEl2 = assistantContainer.querySelector(".message-content");
                if (contentEl2) {
                  assistantContainer.dataset.rawContent = responseContent;
                  contentEl2.empty();
                  await import_obsidian2.MarkdownRenderer.render(
                    this.app,
                    responseContent,
                    contentEl2,
                    "",
                    this
                  );
                  this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
                }
              },
              abortController: this.activeStream
            }
          );
        } catch (error) {
          if (error.name !== "AbortError") {
            new import_obsidian2.Notice(`Error: ${error.message}`);
            this.addMessage("assistant", `Error: ${error.message}`);
          }
        } finally {
          if (textarea) {
            textarea.disabled = false;
            textarea.focus();
          }
          this.activeStream = null;
        }
      }));
    }
    messageContainer.appendChild(actionsEl);
    return messageEl;
  }
  addMessage(role, content) {
    const messageEl = this.createMessageElement(role, content);
    this.messagesContainer.appendChild(messageEl);
    this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
  }
  async onClose() {
    if (this.activeStream) {
      this.activeStream.abort();
      this.activeStream = null;
    }
  }
  createSettingsPanel() {
    const container = document.createElement("div");
    container.addClass("ai-chat-settings-panel");
    container.createEl("h3", { text: "AI Model Settings" });
    const providerContainer = container.createDiv();
    providerContainer.createEl("label", { text: "AI Provider" });
    const providerSelect = providerContainer.createEl("select");
    providerSelect.createEl("option", { value: "openai", text: "OpenAI (GPT-3.5, GPT-4)" });
    providerSelect.createEl("option", { value: "anthropic", text: "Anthropic (Claude)" });
    providerSelect.createEl("option", { value: "gemini", text: "Google (Gemini)" });
    providerSelect.createEl("option", { value: "ollama", text: "Ollama (Local AI)" });
    providerSelect.value = this.plugin.settings.provider;
    providerSelect.addEventListener("change", async () => {
      this.plugin.settings.provider = providerSelect.value;
      await this.plugin.saveSettings();
      if (this.settingsContainer) {
        this.settingsContainer.replaceWith(this.createSettingsPanel());
      }
    });
    const systemMessageContainer = container.createDiv();
    systemMessageContainer.createEl("label", { text: "System Message" });
    const systemMessageInput = systemMessageContainer.createEl("textarea");
    systemMessageInput.value = this.plugin.settings.systemMessage;
    systemMessageInput.addEventListener("change", async () => {
      this.plugin.settings.systemMessage = systemMessageInput.value;
      await this.plugin.saveSettings();
    });
    const temperatureContainer = container.createDiv();
    temperatureContainer.createEl("label", { text: "Temperature" });
    const temperatureInput = temperatureContainer.createEl("input", { type: "range" });
    temperatureInput.min = "0";
    temperatureInput.max = "1";
    temperatureInput.step = "0.1";
    temperatureInput.value = String(this.plugin.settings.temperature);
    const temperatureValue = temperatureContainer.createSpan();
    temperatureValue.textContent = String(this.plugin.settings.temperature);
    temperatureInput.addEventListener("input", async () => {
      const value = Number(temperatureInput.value);
      temperatureValue.textContent = String(value);
      this.plugin.settings.temperature = value;
      await this.plugin.saveSettings();
    });
    const maxTokensContainer = container.createDiv();
    maxTokensContainer.createEl("label", { text: "Max Tokens" });
    const maxTokensInput = maxTokensContainer.createEl("input", { type: "number" });
    maxTokensInput.value = String(this.plugin.settings.maxTokens);
    maxTokensInput.addEventListener("change", async () => {
      const value = Number(maxTokensInput.value);
      if (!isNaN(value)) {
        this.plugin.settings.maxTokens = value;
        await this.plugin.saveSettings();
      }
    });
    const providerSettings = container.createDiv();
    providerSettings.createEl("h4", { text: `${this.plugin.settings.provider.toUpperCase()} Settings` });
    switch (this.plugin.settings.provider) {
      case "openai": {
        const settings = this.plugin.settings.openaiSettings;
        const modelSelect = providerSettings.createEl("select");
        settings.availableModels.forEach((model) => {
          modelSelect.createEl("option", { value: model, text: model });
        });
        modelSelect.value = settings.model;
        modelSelect.addEventListener("change", async () => {
          settings.model = modelSelect.value;
          await this.plugin.saveSettings();
        });
        break;
      }
      case "anthropic": {
        const settings = this.plugin.settings.anthropicSettings;
        const modelSelect = providerSettings.createEl("select");
        settings.availableModels.forEach((model) => {
          modelSelect.createEl("option", { value: model, text: model });
        });
        modelSelect.value = settings.model;
        modelSelect.addEventListener("change", async () => {
          settings.model = modelSelect.value;
          await this.plugin.saveSettings();
        });
        break;
      }
      case "gemini": {
        const settings = this.plugin.settings.geminiSettings;
        const modelSelect = providerSettings.createEl("select");
        settings.availableModels.forEach((model) => {
          modelSelect.createEl("option", { value: model, text: model });
        });
        modelSelect.value = settings.model;
        modelSelect.addEventListener("change", async () => {
          settings.model = modelSelect.value;
          await this.plugin.saveSettings();
        });
        break;
      }
      case "ollama": {
        const settings = this.plugin.settings.ollamaSettings;
        const modelSelect = providerSettings.createEl("select");
        settings.availableModels.forEach((model) => {
          modelSelect.createEl("option", { value: model, text: model });
        });
        modelSelect.value = settings.model;
        modelSelect.addEventListener("change", async () => {
          settings.model = modelSelect.value;
          await this.plugin.saveSettings();
        });
        break;
      }
    }
    return container;
  }
};

// main.ts
var VIEW_TYPE_MODEL_SETTINGS = "model-settings-view";
var ModelSettingsView = class extends import_obsidian3.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    __publicField(this, "plugin");
    this.plugin = plugin;
  }
  getViewType() {
    return VIEW_TYPE_MODEL_SETTINGS;
  }
  getDisplayText() {
    return "AI Model Settings";
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "AI Model Settings" });
    contentEl.createEl("h3", { text: "Common Settings" });
    new import_obsidian3.Setting(contentEl).setName("AI Provider").setDesc("Choose which AI provider to use").addDropdown((dropdown) => {
      dropdown.addOption("openai", "OpenAI (GPT-3.5, GPT-4)").addOption("anthropic", "Anthropic (Claude)").addOption("gemini", "Google (Gemini)").addOption("ollama", "Ollama (Local AI)").setValue(this.plugin.settings.provider).onChange(async (value) => {
        this.plugin.settings.provider = value;
        await this.plugin.saveSettings();
        this.onOpen();
      });
    });
    new import_obsidian3.Setting(contentEl).setName("System Message").setDesc("Set the system message for the AI").addTextArea((text) => text.setPlaceholder("You are a helpful assistant.").setValue(this.plugin.settings.systemMessage).onChange(async (value) => {
      this.plugin.settings.systemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Include Date with System Message").setDesc("Add the current date to the system message").addToggle((toggle) => toggle.setValue(this.plugin.settings.includeDateWithSystemMessage).onChange(async (value) => {
      this.plugin.settings.includeDateWithSystemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Include Time with System Message").setDesc("Add the current time along with the date to the system message").addToggle((toggle) => toggle.setValue(this.plugin.settings.includeTimeWithSystemMessage).onChange(async (value) => {
      this.plugin.settings.includeTimeWithSystemMessage = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Enable Obsidian Links").setDesc("Read Obsidian links in messages using [[filename]] syntax").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableObsidianLinks).onChange(async (value) => {
      this.plugin.settings.enableObsidianLinks = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Enable Context Notes").setDesc("Attach specified note content to chat messages").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableContextNotes).onChange(async (value) => {
      this.plugin.settings.enableContextNotes = value;
      await this.plugin.saveSettings();
    }));
    const contextNotesContainer = contentEl.createDiv("context-notes-container");
    contextNotesContainer.style.marginBottom = "24px";
    new import_obsidian3.Setting(contextNotesContainer).setName("Context Notes").setDesc("Notes to attach as context (supports [[filename]] and [[filename#header]] syntax)").addTextArea((text) => {
      text.setPlaceholder("[[Note Name]]\n[[Another Note#Header]]").setValue(this.plugin.settings.contextNotes || "").onChange(async (value) => {
        this.plugin.settings.contextNotes = value;
        await this.plugin.saveSettings();
      });
      text.inputEl.rows = 4;
      text.inputEl.style.width = "100%";
      this.setupNoteAutocomplete(text.inputEl);
    });
    new import_obsidian3.Setting(contentEl).setName("Enable Streaming").setDesc("Enable or disable streaming for completions").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableStreaming).onChange(async (value) => {
      this.plugin.settings.enableStreaming = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Temperature").setDesc("Set the randomness of the model's output (0-1)").addSlider((slider) => slider.setLimits(0, 1, 0.1).setValue(this.plugin.settings.temperature).setDynamicTooltip().onChange(async (value) => {
      this.plugin.settings.temperature = value;
      await this.plugin.saveSettings();
    }));
    new import_obsidian3.Setting(contentEl).setName("Max Tokens").setDesc("Set the maximum length of the model's output").addText((text) => text.setPlaceholder("4000").setValue(String(this.plugin.settings.maxTokens)).onChange(async (value) => {
      const numValue = Number(value);
      if (!isNaN(numValue)) {
        this.plugin.settings.maxTokens = numValue;
        await this.plugin.saveSettings();
      }
    }));
    contentEl.createEl("h3", { text: `${this.plugin.settings.provider.toUpperCase()} Settings` });
    switch (this.plugin.settings.provider) {
      case "openai":
        this.renderOpenAISettings(contentEl);
        break;
      case "anthropic":
        this.renderAnthropicSettings(contentEl);
        break;
      case "gemini":
        this.renderGeminiSettings(contentEl);
        break;
      case "ollama":
        this.renderOllamaSettings(contentEl);
        break;
    }
  }
  renderOpenAISettings(containerEl) {
    const settings = this.plugin.settings.openaiSettings;
    new import_obsidian3.Setting(containerEl).setName("Test Connection").setDesc("Verify your API key and fetch available models").addButton((button) => button.setButtonText("Test").onClick(async () => {
      button.setButtonText("Testing...");
      button.setDisabled(true);
      try {
        const provider = createProvider(this.plugin.settings);
        const result = await provider.testConnection();
        if (result.success && result.models) {
          settings.availableModels = result.models;
          await this.plugin.saveSettings();
          settings.lastTestResult = {
            timestamp: Date.now(),
            success: true,
            message: result.message
          };
          new import_obsidian3.Notice(result.message);
          this.onOpen();
        } else {
          settings.lastTestResult = {
            timestamp: Date.now(),
            success: false,
            message: result.message
          };
          new import_obsidian3.Notice(result.message);
        }
      } catch (error) {
        new import_obsidian3.Notice(`Error: ${error.message}`);
      } finally {
        button.setButtonText("Test");
        button.setDisabled(false);
      }
    }));
    if (settings.lastTestResult) {
      const date = new Date(settings.lastTestResult.timestamp);
      containerEl.createEl("div", {
        text: `Last test: ${date.toLocaleString()} - ${settings.lastTestResult.message}`,
        cls: settings.lastTestResult.success ? "success" : "error"
      });
    }
    new import_obsidian3.Setting(containerEl).setName("Model").setDesc("Choose the OpenAI model to use").addDropdown((dropdown) => {
      for (const model of settings.availableModels) {
        dropdown.addOption(model, model);
      }
      dropdown.setValue(settings.model).onChange(async (value) => {
        settings.model = value;
        await this.plugin.saveSettings();
      });
    });
  }
  renderAnthropicSettings(containerEl) {
    const settings = this.plugin.settings.anthropicSettings;
    new import_obsidian3.Setting(containerEl).setName("Test Connection").setDesc("Verify your API key and fetch available models").addButton((button) => button.setButtonText("Test").onClick(async () => {
      button.setButtonText("Testing...");
      button.setDisabled(true);
      try {
        const provider = createProvider(this.plugin.settings);
        const result = await provider.testConnection();
        if (result.success && result.models) {
          settings.availableModels = result.models;
          await this.plugin.saveSettings();
          settings.lastTestResult = {
            timestamp: Date.now(),
            success: true,
            message: result.message
          };
          new import_obsidian3.Notice(result.message);
          this.onOpen();
        } else {
          settings.lastTestResult = {
            timestamp: Date.now(),
            success: false,
            message: result.message
          };
          new import_obsidian3.Notice(result.message);
        }
      } catch (error) {
        new import_obsidian3.Notice(`Error: ${error.message}`);
      } finally {
        button.setButtonText("Test");
        button.setDisabled(false);
      }
    }));
    if (settings.lastTestResult) {
      const date = new Date(settings.lastTestResult.timestamp);
      containerEl.createEl("div", {
        text: `Last test: ${date.toLocaleString()} - ${settings.lastTestResult.message}`,
        cls: settings.lastTestResult.success ? "success" : "error"
      });
    }
    new import_obsidian3.Setting(containerEl).setName("Model").setDesc("Choose the Anthropic model to use").addDropdown((dropdown) => {
      for (const model of settings.availableModels) {
        dropdown.addOption(model, model);
      }
      dropdown.setValue(settings.model).onChange(async (value) => {
        settings.model = value;
        await this.plugin.saveSettings();
      });
    });
  }
  renderGeminiSettings(containerEl) {
    const settings = this.plugin.settings.geminiSettings;
    new import_obsidian3.Setting(containerEl).setName("Test Connection").setDesc("Verify your API key and fetch available models").addButton((button) => button.setButtonText("Test").onClick(async () => {
      button.setButtonText("Testing...");
      button.setDisabled(true);
      try {
        const provider = createProvider(this.plugin.settings);
        const result = await provider.testConnection();
        if (result.success && result.models) {
          settings.availableModels = result.models;
          await this.plugin.saveSettings();
          settings.lastTestResult = {
            timestamp: Date.now(),
            success: true,
            message: result.message
          };
          new import_obsidian3.Notice(result.message);
          this.onOpen();
        } else {
          settings.lastTestResult = {
            timestamp: Date.now(),
            success: false,
            message: result.message
          };
          new import_obsidian3.Notice(result.message);
        }
      } catch (error) {
        new import_obsidian3.Notice(`Error: ${error.message}`);
      } finally {
        button.setButtonText("Test");
        button.setDisabled(false);
      }
    }));
    if (settings.lastTestResult) {
      const date = new Date(settings.lastTestResult.timestamp);
      containerEl.createEl("div", {
        text: `Last test: ${date.toLocaleString()} - ${settings.lastTestResult.message}`,
        cls: settings.lastTestResult.success ? "success" : "error"
      });
    }
    new import_obsidian3.Setting(containerEl).setName("Model").setDesc("Choose the Gemini model to use").addDropdown((dropdown) => {
      for (const model of settings.availableModels) {
        dropdown.addOption(model, model);
      }
      dropdown.setValue(settings.model).onChange(async (value) => {
        settings.model = value;
        await this.plugin.saveSettings();
      });
    });
  }
  renderOllamaSettings(containerEl) {
    const settings = this.plugin.settings.ollamaSettings;
    new import_obsidian3.Setting(containerEl).setName("Test Connection").setDesc("Check server connection and fetch available models").addButton((button) => button.setButtonText("Test").onClick(async () => {
      button.setButtonText("Testing...");
      button.setDisabled(true);
      try {
        const provider = createProvider(this.plugin.settings);
        const result = await provider.testConnection();
        if (result.success && result.models) {
          settings.availableModels = result.models;
          await this.plugin.saveSettings();
          settings.lastTestResult = {
            timestamp: Date.now(),
            success: true,
            message: result.message
          };
          new import_obsidian3.Notice(result.message);
          this.onOpen();
        } else {
          settings.lastTestResult = {
            timestamp: Date.now(),
            success: false,
            message: result.message
          };
          new import_obsidian3.Notice(result.message);
        }
      } catch (error) {
        new import_obsidian3.Notice(`Error: ${error.message}`);
      } finally {
        button.setButtonText("Test");
        button.setDisabled(false);
      }
    }));
    if (settings.lastTestResult) {
      const date = new Date(settings.lastTestResult.timestamp);
      containerEl.createEl("div", {
        text: `Last test: ${date.toLocaleString()} - ${settings.lastTestResult.message}`,
        cls: settings.lastTestResult.success ? "success" : "error"
      });
    }
    new import_obsidian3.Setting(containerEl).setName("Model").setDesc("Choose the Ollama model to use").addDropdown((dropdown) => {
      for (const model of settings.availableModels) {
        dropdown.addOption(model, model);
      }
      dropdown.setValue(settings.model).onChange(async (value) => {
        settings.model = value;
        await this.plugin.saveSettings();
      });
    });
    containerEl.createEl("div", {
      cls: "setting-item-description",
      text: "To use Ollama:"
    });
    const steps = containerEl.createEl("ol");
    steps.createEl("li", { text: "Install Ollama from https://ollama.ai" });
    steps.createEl("li", { text: "Start the Ollama server" });
    steps.createEl("li", { text: 'Pull models using "ollama pull model-name"' });
    steps.createEl("li", { text: "Test connection to see available models" });
  }
  async onClose() {
  }
  /**
   * Setup autocompletion for notes and headers
   * 
   * @param inputEl The input element to attach autocompletion to
   */
  setupNoteAutocomplete(inputEl) {
    let currentStartPos = 0;
    let currentEndPos = 0;
    let isTypingLink = false;
    let suggestionEl = null;
    const cleanupSuggestions = () => {
      if (suggestionEl && document.body.contains(suggestionEl)) {
        document.body.removeChild(suggestionEl);
        suggestionEl = null;
      }
    };
    inputEl.addEventListener("input", (e) => {
      const cursorPos = inputEl.selectionStart;
      const text = inputEl.value;
      const beforeCursor = text.substring(0, cursorPos);
      const lastOpenBrackets = beforeCursor.lastIndexOf("[[");
      const lastCloseBrackets = beforeCursor.lastIndexOf("]]");
      if (lastOpenBrackets > lastCloseBrackets && lastOpenBrackets !== -1) {
        isTypingLink = true;
        currentStartPos = lastOpenBrackets + 2;
        const afterCursor = text.substring(cursorPos);
        const nextCloseBrackets = afterCursor.indexOf("]]");
        if (nextCloseBrackets !== -1) {
          currentEndPos = cursorPos;
          const linkText = text.substring(currentStartPos, currentEndPos);
          if (linkText.length > 0) {
            cleanupSuggestions();
            this.showNoteSuggestions(inputEl, currentStartPos, currentEndPos);
          }
        }
      } else {
        isTypingLink = false;
        cleanupSuggestions();
      }
    });
    inputEl.addEventListener("keydown", (e) => {
      if (e.key === "Escape") {
        isTypingLink = false;
        cleanupSuggestions();
      }
    });
    document.addEventListener("click", (e) => {
      if (e.target !== inputEl && suggestionEl && !suggestionEl.contains(e.target)) {
        cleanupSuggestions();
      }
    });
  }
  /**
   * Display note and header suggestions
   * 
   * @param inputEl The input element
   * @param startPos The start position of the link text
   * @param endPos The end position of the link text
   */
  showNoteSuggestions(inputEl, startPos, endPos) {
    const linkText = inputEl.value.substring(startPos, endPos);
    if (linkText.length === 0) return;
    const files = this.app.vault.getMarkdownFiles();
    const matchingFiles = files.filter((file) => {
      return file.basename.toLowerCase().includes(linkText.toLowerCase()) || file.path.toLowerCase().includes(linkText.toLowerCase());
    });
    if (matchingFiles.length === 0) return;
    const suggestionEl = document.createElement("div");
    suggestionEl.className = "note-autocomplete-suggestions";
    suggestionEl.style.position = "fixed";
    suggestionEl.style.zIndex = "1000";
    suggestionEl.style.background = "var(--background-primary)";
    suggestionEl.style.border = "1px solid var(--background-modifier-border)";
    suggestionEl.style.borderRadius = "4px";
    suggestionEl.style.boxShadow = "0 2px 8px var(--background-modifier-box-shadow)";
    suggestionEl.style.maxHeight = "200px";
    suggestionEl.style.width = "300px";
    suggestionEl.style.overflow = "auto";
    suggestionEl.style.padding = "8px";
    const debugInfo = document.createElement("div");
    debugInfo.style.fontSize = "10px";
    debugInfo.style.color = "var(--text-muted)";
    debugInfo.style.marginBottom = "4px";
    debugInfo.style.borderBottom = "1px solid var(--background-modifier-border)";
    debugInfo.textContent = `Searching for: "${linkText}" - Found ${matchingFiles.length} matches`;
    suggestionEl.appendChild(debugInfo);
    const rect = inputEl.getBoundingClientRect();
    const lineHeight = parseInt(getComputedStyle(inputEl).lineHeight) || 20;
    const textUpToCursor = inputEl.value.substring(0, endPos);
    const lines = textUpToCursor.split("\n");
    const lineNumber = lines.length - 1;
    suggestionEl.style.left = `${rect.left}px`;
    suggestionEl.style.top = `${rect.top + (lineNumber + 1) * lineHeight}px`;
    matchingFiles.slice(0, 10).forEach((file) => {
      const item = document.createElement("div");
      item.className = "note-autocomplete-item";
      item.textContent = file.basename;
      item.style.padding = "8px 12px";
      item.style.cursor = "pointer";
      item.style.borderRadius = "4px";
      item.addEventListener("mouseenter", () => {
        item.style.backgroundColor = "var(--background-secondary)";
      });
      item.addEventListener("mouseleave", () => {
        item.style.backgroundColor = "";
      });
      item.addEventListener("click", async () => {
        const replacement = file.basename;
        const newValue = inputEl.value.substring(0, startPos - 2) + "[[" + replacement + "]]" + inputEl.value.substring(endPos + 2);
        inputEl.value = newValue;
        this.plugin.settings.contextNotes = inputEl.value;
        await this.plugin.saveSettings();
        document.body.removeChild(suggestionEl);
        const newPos = startPos - 2 + 2 + replacement.length + 2;
        inputEl.setSelectionRange(newPos, newPos);
        inputEl.focus();
      });
      suggestionEl.appendChild(item);
      this.addHeaderSuggestions(file, suggestionEl, startPos, endPos, inputEl);
    });
    document.body.appendChild(suggestionEl);
  }
  /**
   * Add header suggestions for a file
   * 
   * @param file The file to get headers from
   * @param suggestionEl The suggestion container element
   * @param startPos Start position in the input
   * @param endPos End position in the input
   * @param inputEl The input element
   */
  async addHeaderSuggestions(file, suggestionEl, startPos, endPos, inputEl) {
    const cache = this.app.metadataCache.getFileCache(file);
    if (!cache || !cache.headings || cache.headings.length === 0) return;
    const separator = document.createElement("div");
    separator.style.height = "1px";
    separator.style.backgroundColor = "var(--background-modifier-border)";
    separator.style.margin = "4px 0";
    suggestionEl.appendChild(separator);
    const headerLabel = document.createElement("div");
    headerLabel.style.fontSize = "10px";
    headerLabel.style.color = "var(--text-muted)";
    headerLabel.style.padding = "2px 12px";
    headerLabel.textContent = "Headers:";
    suggestionEl.appendChild(headerLabel);
    cache.headings.forEach((heading) => {
      const item = document.createElement("div");
      item.className = "note-autocomplete-item";
      const indent = "&nbsp;".repeat((heading.level - 1) * 2);
      item.innerHTML = `${indent}# ${heading.heading}`;
      item.style.padding = "6px 12px";
      item.style.cursor = "pointer";
      item.style.borderRadius = "4px";
      item.addEventListener("mouseenter", () => {
        item.style.backgroundColor = "var(--background-secondary)";
      });
      item.addEventListener("mouseleave", () => {
        item.style.backgroundColor = "";
      });
      item.addEventListener("click", async () => {
        const replacement = `${file.basename}#${heading.heading}`;
        const newValue = inputEl.value.substring(0, startPos - 2) + "[[" + replacement + "]]" + inputEl.value.substring(endPos + 2);
        inputEl.value = newValue;
        this.plugin.settings.contextNotes = inputEl.value;
        await this.plugin.saveSettings();
        document.body.removeChild(suggestionEl);
        const newPos = startPos - 2 + 2 + replacement.length + 2;
        inputEl.setSelectionRange(newPos, newPos);
        inputEl.focus();
      });
      suggestionEl.appendChild(item);
    });
  }
};
function parseSelection(selection, chatSeparator, chatBoundaryString) {
  let insideChat = !chatBoundaryString;
  const lines = selection.split("\n");
  let messages = [];
  let currentRole = "user";
  let currentContent = "";
  for (const line of lines) {
    if (chatBoundaryString && line.trim() === chatBoundaryString) {
      if (!insideChat && currentContent.trim()) {
        messages.push({ role: currentRole, content: currentContent.trim() });
        currentContent = "";
      }
      insideChat = !insideChat;
      continue;
    }
    if (!insideChat) continue;
    if (line.trim() === chatSeparator) {
      if (currentContent.trim()) {
        messages.push({ role: currentRole, content: currentContent.trim() });
      }
      currentRole = currentRole === "user" ? "assistant" : "user";
      currentContent = "";
    } else {
      currentContent += line + "\n";
    }
  }
  if (currentContent.trim()) {
    messages.push({ role: currentRole, content: currentContent.trim() });
  }
  return messages;
}
var MyPlugin = class extends import_obsidian3.Plugin {
  constructor() {
    super(...arguments);
    __publicField(this, "settings");
    __publicField(this, "modelSettingsView", null);
    __publicField(this, "activeStream", null);
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new MyPluginSettingTab(this.app, this));
    this.registerView(
      VIEW_TYPE_MODEL_SETTINGS,
      (leaf) => new ModelSettingsView(leaf, this)
    );
    this.registerView(
      VIEW_TYPE_CHAT,
      (leaf) => new ChatView(leaf, this)
    );
    this.addRibbonIcon("gear", "Open AI Settings", () => {
      this.activateView();
    });
    this.addRibbonIcon("message-square", "Open AI Chat", () => {
      this.activateChatView();
    });
    this.app.workspace.onLayoutReady(() => {
      if (this.settings.autoOpenModelSettings) {
        this.activateView();
      }
    });
    this.addCommand({
      id: "ai-completion",
      name: "Get AI Completion",
      editorCallback: async (editor) => {
        let text;
        let insertPosition;
        if (editor.somethingSelected()) {
          text = editor.getSelection();
          insertPosition = editor.getCursor("to");
        } else {
          const lineNumber = editor.getCursor().line + 1;
          const documentText = editor.getValue();
          let startIndex = 0;
          let endIndex = editor.posToOffset({
            line: lineNumber,
            ch: editor.getLine(lineNumber).length
            // Include the full cursor line
          });
          if (this.settings.chatStartString) {
            const startStringIndex = documentText.indexOf(this.settings.chatStartString);
            if (startStringIndex !== -1) {
              startIndex = startStringIndex + this.settings.chatStartString.length;
            }
          }
          if (this.settings.chatEndString) {
            const endStringIndex = documentText.indexOf(this.settings.chatEndString, startIndex);
            if (endStringIndex !== -1 && endStringIndex < endIndex) {
              endIndex = endStringIndex;
            }
          }
          if (!this.settings.chatStartString && !this.settings.chatEndString) {
            endIndex = editor.posToOffset({ line: lineNumber, ch: 0 });
          }
          text = documentText.substring(startIndex, endIndex).trim();
          insertPosition = { line: lineNumber + 1, ch: 0 };
        }
        console.log("Extracted text for completion:", text);
        const messages = parseSelection(text, this.settings.chatSeparator);
        if (messages.length === 0) {
          new import_obsidian3.Notice("No valid messages found in the selection.");
          return;
        }
        editor.replaceRange(`

${this.settings.chatSeparator}

`, insertPosition);
        let currentPosition = {
          line: insertPosition.line + 3,
          ch: 0
        };
        this.activeStream = new AbortController();
        try {
          const provider = createProvider(this.settings);
          const processedMessages = await this.processMessages([
            { role: "system", content: this.getSystemMessage() },
            ...messages
          ]);
          let bufferedChunk = "";
          const flushBuffer = () => {
            if (bufferedChunk) {
              editor.replaceRange(bufferedChunk, currentPosition);
              currentPosition = editor.offsetToPos(
                editor.posToOffset(currentPosition) + bufferedChunk.length
              );
              bufferedChunk = "";
            }
          };
          await provider.getCompletion(
            processedMessages,
            {
              temperature: this.settings.temperature,
              maxTokens: this.settings.maxTokens,
              streamCallback: (chunk) => {
                bufferedChunk += chunk;
                setTimeout(flushBuffer, 100);
              },
              abortController: this.activeStream
            }
          );
          flushBuffer();
          editor.replaceRange(`

${this.settings.chatSeparator}

`, currentPosition);
          const newCursorPos = editor.offsetToPos(
            editor.posToOffset(currentPosition) + this.settings.chatSeparator.length + 4
          );
          editor.setCursor(newCursorPos);
        } catch (error) {
          new import_obsidian3.Notice(`Error: ${error.message}`);
          editor.replaceRange(`Error: ${error.message}

${this.settings.chatSeparator}

`, currentPosition);
        } finally {
          this.activeStream = null;
        }
      }
    });
    this.addCommand({
      id: "end-ai-stream",
      name: "End AI Stream",
      callback: () => {
        if (this.activeStream) {
          this.activeStream.abort();
          this.activeStream = null;
          new import_obsidian3.Notice("AI stream ended");
        } else {
          new import_obsidian3.Notice("No active AI stream to end");
        }
      }
    });
    this.addCommand({
      id: "show-ai-settings",
      name: "Show AI Settings",
      callback: () => {
        this.activateView();
      }
    });
    this.addCommand({
      id: "show-ai-chat",
      name: "Show AI Chat",
      callback: () => {
        this.activateChatView();
      }
    });
  }
  getSystemMessage() {
    let systemMessage = this.settings.systemMessage;
    if (this.settings.includeDateWithSystemMessage) {
      const currentDate = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
      systemMessage = `${systemMessage}

The current date is ${currentDate}.`;
    }
    if (this.settings.includeTimeWithSystemMessage) {
      const now = /* @__PURE__ */ new Date();
      const timeZoneOffset = now.getTimezoneOffset();
      const offsetHours = Math.abs(timeZoneOffset) / 60;
      const offsetMinutes = Math.abs(timeZoneOffset) % 60;
      const sign = timeZoneOffset > 0 ? "-" : "+";
      const currentTime = now.toLocaleTimeString();
      const timeZoneString = `UTC${sign}${offsetHours.toString().padStart(2, "0")}:${offsetMinutes.toString().padStart(2, "0")}`;
      systemMessage = `${systemMessage}

The current time is ${currentTime} ${timeZoneString}.`;
    }
    return systemMessage;
  }
  async activateView(viewType = VIEW_TYPE_MODEL_SETTINGS) {
    this.app.workspace.detachLeavesOfType(viewType);
    let leaf = this.app.workspace.getRightLeaf(false);
    if (leaf) {
      await leaf.setViewState({
        type: viewType,
        active: true
      });
      this.app.workspace.revealLeaf(leaf);
    } else {
      leaf = this.app.workspace.getLeaf(true);
      await leaf.setViewState({
        type: viewType,
        active: true
      });
    }
  }
  async activateChatView() {
    await this.activateView(VIEW_TYPE_CHAT);
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  async saveSettings() {
    await this.saveData(this.settings);
  }
  /**
   * Processes a message content to include Obsidian note contents
   * 
   * If a link is found, retrieves the note content and appends it after the link.
   * 
   * @param content The message content to process
   * @returns The processed content with note contents included
   */
  /**
   * Process an array of messages to include Obsidian note contents
   * 
   * @param messages Array of messages to process
   * @returns Promise resolving to processed messages
   */
  async processMessages(messages) {
    const processedMessages = [];
    if (this.settings.enableContextNotes && this.settings.contextNotes) {
      const contextContent = await this.processContextNotes(this.settings.contextNotes);
      if (contextContent) {
        if (messages.length > 0 && messages[0].role === "system") {
          processedMessages.push({
            role: "system",
            content: `${messages[0].content}

Here is additional context:
${contextContent}`
          });
          messages = messages.slice(1);
        } else {
          processedMessages.push({
            role: "system",
            content: `Here is context for our conversation:
${contextContent}`
          });
        }
      }
    }
    for (const message of messages) {
      const processedContent = await this.processObsidianLinks(message.content);
      processedMessages.push({
        role: message.role,
        content: processedContent
      });
    }
    return processedMessages;
  }
  /**
   * Process a single message content to include Obsidian note contents
   * 
   * @param content The message content to process
   * @returns Promise resolving to processed content
   */
  async processObsidianLinks(content) {
    if (!this.settings.enableObsidianLinks) return content;
    const linkRegex = /\[\[(.*?)\]\]/g;
    let match;
    let processedContent = content;
    while ((match = linkRegex.exec(content)) !== null) {
      if (match && match[0] && match[1]) {
        const parts = match[1].split("|");
        const filePath = parts[0].trim();
        const displayText = parts.length > 1 ? parts[1].trim() : filePath;
        try {
          let file = this.app.vault.getAbstractFileByPath(filePath) || this.app.vault.getAbstractFileByPath(`${filePath}.md`);
          if (!file) {
            const allFiles = this.app.vault.getFiles();
            file = allFiles.find((f) => f.name === filePath || f.name === `${filePath}.md` || f.basename.toLowerCase() === filePath.toLowerCase() || f.path === filePath || f.path === `${filePath}.md`) || null;
          }
          const headerMatch = filePath.match(/(.*?)#(.*)/);
          let extractedContent = "";
          if (file && file instanceof import_obsidian3.TFile) {
            const noteContent = await this.app.vault.cachedRead(file);
            if (headerMatch) {
              extractedContent = this.extractContentUnderHeader(
                noteContent,
                headerMatch[2].trim()
              );
            } else {
              extractedContent = noteContent;
            }
            processedContent = processedContent.replace(
              match[0],
              `${match[0]}

---
Note Name: ${filePath}
Content:
${extractedContent}
---
`
            );
          } else {
            new import_obsidian3.Notice(`File not found: ${filePath}. Ensure the file name and path are correct.`);
          }
        } catch (error) {
          new import_obsidian3.Notice(`Error processing link for ${filePath}: ${error.message}`);
        }
      }
    }
    return processedContent;
  }
  /**
   * Extract content under a specific header in a note
   * 
   * @param content The note content
   * @param headerText The header text to find
   * @returns The content under the header until the next header or end of note
   */
  extractContentUnderHeader(content, headerText) {
    const lines = content.split("\n");
    let foundHeader = false;
    let extractedContent = [];
    let headerLevel = 0;
    for (let i = 0; i < lines.length; i++) {
      const line = lines[i];
      const headerMatch = line.match(/^(#+)\s+(.*?)$/);
      if (headerMatch) {
        const currentHeaderLevel = headerMatch[1].length;
        const currentHeaderText = headerMatch[2].trim();
        if (foundHeader) {
          if (currentHeaderLevel <= headerLevel) {
            break;
          }
        } else if (currentHeaderText.toLowerCase() === headerText.toLowerCase()) {
          foundHeader = true;
          headerLevel = currentHeaderLevel;
          extractedContent.push(line);
          continue;
        }
      }
      if (foundHeader) {
        extractedContent.push(line);
      }
    }
    return extractedContent.join("\n");
  }
  /**
   * Process context notes specified in the settings
   * 
   * @param contextNotesText The context notes text with [[note]] syntax
   * @returns The processed context text
   */
  async processContextNotes(contextNotesText) {
    const linkRegex = /\[\[(.*?)\]\]/g;
    let match;
    let contextContent = "";
    while ((match = linkRegex.exec(contextNotesText)) !== null) {
      if (match && match[1]) {
        const fileName = match[1].trim();
        try {
          const headerMatch = fileName.match(/(.*?)#(.*)/);
          const baseFileName = headerMatch ? headerMatch[1].trim() : fileName;
          const headerName = headerMatch ? headerMatch[2].trim() : null;
          let file = this.app.vault.getAbstractFileByPath(baseFileName) || this.app.vault.getAbstractFileByPath(`${baseFileName}.md`);
          if (!file) {
            const allFiles = this.app.vault.getFiles();
            file = allFiles.find(
              (f) => f.basename.toLowerCase() === baseFileName.toLowerCase() || f.name.toLowerCase() === `${baseFileName.toLowerCase()}.md`
            ) || null;
          }
          if (file && file instanceof import_obsidian3.TFile) {
            const noteContent = await this.app.vault.cachedRead(file);
            contextContent += `### From note: ${file.basename}

`;
            if (headerName) {
              const headerContent = this.extractContentUnderHeader(noteContent, headerName);
              contextContent += headerContent;
            } else {
              contextContent += noteContent;
            }
            contextContent += "\n\n";
          } else {
            contextContent += `Note not found: ${fileName}

`;
          }
        } catch (error) {
          contextContent += `Error processing note ${fileName}: ${error.message}

`;
        }
      }
    }
    return contextContent;
  }
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsibWFpbi50cyIsICJ0eXBlcy50cyIsICJwcm92aWRlcnMvYmFzZS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3ZlcnNpb24udHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9fc2hpbXMvcmVnaXN0cnkudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9fc2hpbXMvTXVsdGlwYXJ0Qm9keS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL19zaGltcy93ZWItcnVudGltZS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvX3NoaW1zL2luZGV4Lm1qcyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2Vycm9yLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvaW50ZXJuYWwvZGVjb2RlcnMvbGluZS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2ludGVybmFsL3N0cmVhbS11dGlscy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3N0cmVhbWluZy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3VwbG9hZHMudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9jb3JlLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcGFnaW5hdGlvbi50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL2JldGEvbW9kZWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvaW50ZXJuYWwvZGVjb2RlcnMvanNvbmwudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9yZXNvdXJjZXMvYmV0YS9tZXNzYWdlcy9iYXRjaGVzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvX3ZlbmRvci9wYXJ0aWFsLWpzb24tcGFyc2VyL3BhcnNlci50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2xpYi9CZXRhTWVzc2FnZVN0cmVhbS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9iZXRhL21lc3NhZ2VzL21lc3NhZ2VzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL2JldGEvYmV0YS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9jb21wbGV0aW9ucy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9tZXNzYWdlcy9iYXRjaGVzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvbGliL01lc3NhZ2VTdHJlYW0udHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9yZXNvdXJjZXMvbWVzc2FnZXMvbWVzc2FnZXMudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9yZXNvdXJjZXMvbW9kZWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvaW5kZXgudHMiLCAicHJvdmlkZXJzL2FudGhyb3BpYy50cyIsICJwcm92aWRlcnMvb3BlbmFpLnRzIiwgInByb3ZpZGVycy9nZW1pbmkudHMiLCAicHJvdmlkZXJzL29sbGFtYS50cyIsICJwcm92aWRlcnMvaW5kZXgudHMiLCAic2V0dGluZ3MudHMiLCAiY2hhdC50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHsgQXBwLCBQbHVnaW4sIFNldHRpbmcsIFdvcmtzcGFjZUxlYWYsIEl0ZW1WaWV3LCBOb3RpY2UsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBNeVBsdWdpblNldHRpbmdzLCBNZXNzYWdlLCBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyIH0gZnJvbSAnLi9wcm92aWRlcnMnO1xyXG5pbXBvcnQgeyBNeVBsdWdpblNldHRpbmdUYWIgfSBmcm9tICcuL3NldHRpbmdzJztcclxuaW1wb3J0IHsgQ2hhdFZpZXcsIFZJRVdfVFlQRV9DSEFUIH0gZnJvbSAnLi9jaGF0JztcclxuXHJcbmNvbnN0IFZJRVdfVFlQRV9NT0RFTF9TRVRUSU5HUyA9ICdtb2RlbC1zZXR0aW5ncy12aWV3JztcclxuXHJcbi8qKlxyXG4gKiBBSSBNb2RlbCBTZXR0aW5ncyBWaWV3XHJcbiAqIFxyXG4gKiBUaGlzIHZpZXcgcHJvdmlkZXMgYSB1c2VyIGludGVyZmFjZSBmb3IgY29uZmlndXJpbmcgQUkgbW9kZWwgc2V0dGluZ3MuXHJcbiAqIEl0IGFsbG93cyB1c2VycyB0bzpcclxuICogLSBTZWxlY3QgdGhlaXIgcHJlZmVycmVkIEFJIHByb3ZpZGVyIChPcGVuQUksIEFudGhyb3BpYywgR2VtaW5pLCBPbGxhbWEpXHJcbiAqIC0gQ29uZmlndXJlIHByb3ZpZGVyLXNwZWNpZmljIHNldHRpbmdzIGxpa2UgQVBJIGtleXMgYW5kIG1vZGVsc1xyXG4gKiAtIEFkanVzdCBjb21tb24gc2V0dGluZ3MgbGlrZSB0ZW1wZXJhdHVyZSBhbmQgdG9rZW4gbGltaXRzXHJcbiAqIC0gVGVzdCBBUEkgY29ubmVjdGlvbnMgYW5kIHJlZnJlc2ggYXZhaWxhYmxlIG1vZGVsc1xyXG4gKi9cclxuY2xhc3MgTW9kZWxTZXR0aW5nc1ZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XHJcbiAgICBwbHVnaW46IE15UGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHBsdWdpbjogTXlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihsZWFmKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRWaWV3VHlwZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBWSUVXX1RZUEVfTU9ERUxfU0VUVElOR1M7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ0FJIE1vZGVsIFNldHRpbmdzJztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDInLCB7IHRleHQ6ICdBSSBNb2RlbCBTZXR0aW5ncycgfSk7XHJcblxyXG4gICAgICAgIC8vIENvbW1vbiBTZXR0aW5ncyBTZWN0aW9uXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0NvbW1vbiBTZXR0aW5ncycgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0FJIFByb3ZpZGVyJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSB3aGljaCBBSSBwcm92aWRlciB0byB1c2UnKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdvcGVuYWknLCAnT3BlbkFJIChHUFQtMy41LCBHUFQtNCknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2FudGhyb3BpYycsICdBbnRocm9waWMgKENsYXVkZSknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaScsICdHb29nbGUgKEdlbWluaSknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ29sbGFtYScsICdPbGxhbWEgKExvY2FsIEFJKScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6ICdvcGVuYWknIHwgJ2FudGhyb3BpYycgfCAnZ2VtaW5pJyB8ICdvbGxhbWEnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZWZyZXNoIHZpZXcgdG8gc2hvdyBwcm92aWRlci1zcGVjaWZpYyBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnU3lzdGVtIE1lc3NhZ2UnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnU2V0IHRoZSBzeXN0ZW0gbWVzc2FnZSBmb3IgdGhlIEFJJylcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeXN0ZW1NZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnN5c3RlbU1lc3NhZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnSW5jbHVkZSBEYXRlIHdpdGggU3lzdGVtIE1lc3NhZ2UnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQWRkIHRoZSBjdXJyZW50IGRhdGUgdG8gdGhlIHN5c3RlbSBtZXNzYWdlJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZURhdGVXaXRoU3lzdGVtTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlRGF0ZVdpdGhTeXN0ZW1NZXNzYWdlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0luY2x1ZGUgVGltZSB3aXRoIFN5c3RlbSBNZXNzYWdlJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0FkZCB0aGUgY3VycmVudCB0aW1lIGFsb25nIHdpdGggdGhlIGRhdGUgdG8gdGhlIHN5c3RlbSBtZXNzYWdlJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZVRpbWVXaXRoU3lzdGVtTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlVGltZVdpdGhTeXN0ZW1NZXNzYWdlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0VuYWJsZSBPYnNpZGlhbiBMaW5rcycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdSZWFkIE9ic2lkaWFuIGxpbmtzIGluIG1lc3NhZ2VzIHVzaW5nIFtbZmlsZW5hbWVdXSBzeW50YXgnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVPYnNpZGlhbkxpbmtzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZU9ic2lkaWFuTGlua3MgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnRW5hYmxlIENvbnRleHQgTm90ZXMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQXR0YWNoIHNwZWNpZmllZCBub3RlIGNvbnRlbnQgdG8gY2hhdCBtZXNzYWdlcycpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvbnRleHROb3RlcylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb250ZXh0Tm90ZXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgY29uc3QgY29udGV4dE5vdGVzQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdignY29udGV4dC1ub3Rlcy1jb250YWluZXInKTtcclxuICAgICAgICBjb250ZXh0Tm90ZXNDb250YWluZXIuc3R5bGUubWFyZ2luQm90dG9tID0gJzI0cHgnO1xyXG4gICAgICAgIFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRleHROb3Rlc0NvbnRhaW5lcilcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0NvbnRleHQgTm90ZXMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnTm90ZXMgdG8gYXR0YWNoIGFzIGNvbnRleHQgKHN1cHBvcnRzIFtbZmlsZW5hbWVdXSBhbmQgW1tmaWxlbmFtZSNoZWFkZXJdXSBzeW50YXgpJylcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignW1tOb3RlIE5hbWVdXVxcbltbQW5vdGhlciBOb3RlI0hlYWRlcl1dJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGV4dE5vdGVzIHx8ICcnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGV4dE5vdGVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBFbmFibGUgbGFyZ2VyIHRleHQgYXJlYVxyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnJvd3MgPSA0O1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBBZGQgYXV0b2NvbXBsZXRlIGZ1bmN0aW9uYWxpdHlcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0dXBOb3RlQXV0b2NvbXBsZXRlKHRleHQuaW5wdXRFbCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbmFibGUgU3RyZWFtaW5nJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0VuYWJsZSBvciBkaXNhYmxlIHN0cmVhbWluZyBmb3IgY29tcGxldGlvbnMnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVTdHJlYW1pbmcpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlU3RyZWFtaW5nID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1RlbXBlcmF0dXJlJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1NldCB0aGUgcmFuZG9tbmVzcyBvZiB0aGUgbW9kZWxcXCdzIG91dHB1dCAoMC0xKScpXHJcbiAgICAgICAgICAgIC5hZGRTbGlkZXIoc2xpZGVyID0+IHNsaWRlclxyXG4gICAgICAgICAgICAgICAgLnNldExpbWl0cygwLCAxLCAwLjEpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGVyYXR1cmUpXHJcbiAgICAgICAgICAgICAgICAuc2V0RHluYW1pY1Rvb2x0aXAoKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBlcmF0dXJlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ01heCBUb2tlbnMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnU2V0IHRoZSBtYXhpbXVtIGxlbmd0aCBvZiB0aGUgbW9kZWxcXCdzIG91dHB1dCcpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCc0MDAwJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4VG9rZW5zKSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBudW1WYWx1ZSA9IE51bWJlcih2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFpc05hTihudW1WYWx1ZSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4VG9rZW5zID0gbnVtVmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gUHJvdmlkZXItc3BlY2lmaWMgc2V0dGluZ3Mgc2VjdGlvblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyLnRvVXBwZXJDYXNlKCl9IFNldHRpbmdzYCB9KTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlcikge1xyXG4gICAgICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJPcGVuQUlTZXR0aW5ncyhjb250ZW50RWwpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FudGhyb3BpYyc6XHJcbiAgICAgICAgICAgICAgICB0aGlzLnJlbmRlckFudGhyb3BpY1NldHRpbmdzKGNvbnRlbnRFbCk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZ2VtaW5pJzpcclxuICAgICAgICAgICAgICAgIHRoaXMucmVuZGVyR2VtaW5pU2V0dGluZ3MoY29udGVudEVsKTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdvbGxhbWEnOlxyXG4gICAgICAgICAgICAgICAgdGhpcy5yZW5kZXJPbGxhbWFTZXR0aW5ncyhjb250ZW50RWwpO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyT3BlbkFJU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncztcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdUZXN0IENvbm5lY3Rpb24nKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnVmVyaWZ5IHlvdXIgQVBJIGtleSBhbmQgZmV0Y2ggYXZhaWxhYmxlIG1vZGVscycpXHJcbiAgICAgICAgICAgIC5hZGRCdXR0b24oYnV0dG9uID0+IGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgLnNldEJ1dHRvblRleHQoJ1Rlc3QnKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2xpY2soYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdUZXN0aW5nLi4uJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKHRydWUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IGNyZWF0ZVByb3ZpZGVyKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvdmlkZXIudGVzdENvbm5lY3Rpb24oKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQubW9kZWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMgPSByZXN1bHQubW9kZWxzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5sYXN0VGVzdFJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UocmVzdWx0Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5vbk9wZW4oKTsgLy8gUmVmcmVzaCB2aWV3XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5sYXN0VGVzdFJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHJlc3VsdC5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1Rlc3QnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldERpc2FibGVkKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIGlmIChzZXR0aW5ncy5sYXN0VGVzdFJlc3VsdCkge1xyXG4gICAgICAgICAgICBjb25zdCBkYXRlID0gbmV3IERhdGUoc2V0dGluZ3MubGFzdFRlc3RSZXN1bHQudGltZXN0YW1wKTtcclxuICAgICAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHtcclxuICAgICAgICAgICAgICAgIHRleHQ6IGBMYXN0IHRlc3Q6ICR7ZGF0ZS50b0xvY2FsZVN0cmluZygpfSAtICR7c2V0dGluZ3MubGFzdFRlc3RSZXN1bHQubWVzc2FnZX1gLFxyXG4gICAgICAgICAgICAgICAgY2xzOiBzZXR0aW5ncy5sYXN0VGVzdFJlc3VsdC5zdWNjZXNzID8gJ3N1Y2Nlc3MnIDogJ2Vycm9yJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnTW9kZWwnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIHRoZSBPcGVuQUkgbW9kZWwgdG8gdXNlJylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbW9kZWwgb2Ygc2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG1vZGVsLCBtb2RlbCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5ncy5tb2RlbClcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm1vZGVsID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHJlbmRlckFudGhyb3BpY1NldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3M7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnVGVzdCBDb25uZWN0aW9uJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1ZlcmlmeSB5b3VyIEFQSSBrZXkgYW5kIGZldGNoIGF2YWlsYWJsZSBtb2RlbHMnKVxyXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cclxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdUZXN0JylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdGluZy4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBjcmVhdGVQcm92aWRlcih0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb3ZpZGVyLnRlc3RDb25uZWN0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0Lm1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzID0gcmVzdWx0Lm1vZGVscztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHJlc3VsdC5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25PcGVuKCk7IC8vIFJlZnJlc2ggdmlld1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShyZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdUZXN0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBpZiAoc2V0dGluZ3MubGFzdFRlc3RSZXN1bHQpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHNldHRpbmdzLmxhc3RUZXN0UmVzdWx0LnRpbWVzdGFtcCk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgTGFzdCB0ZXN0OiAke2RhdGUudG9Mb2NhbGVTdHJpbmcoKX0gLSAke3NldHRpbmdzLmxhc3RUZXN0UmVzdWx0Lm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgIGNsczogc2V0dGluZ3MubGFzdFRlc3RSZXN1bHQuc3VjY2VzcyA/ICdzdWNjZXNzJyA6ICdlcnJvcidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ01vZGVsJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSB0aGUgQW50aHJvcGljIG1vZGVsIHRvIHVzZScpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIHNldHRpbmdzLmF2YWlsYWJsZU1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihtb2RlbCwgbW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3MubW9kZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5tb2RlbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSByZW5kZXJHZW1pbmlTZXR0aW5ncyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpIHtcclxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbWluaVNldHRpbmdzO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1Rlc3QgQ29ubmVjdGlvbicpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdWZXJpZnkgeW91ciBBUEkga2V5IGFuZCBmZXRjaCBhdmFpbGFibGUgbW9kZWxzJylcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnVGVzdCcpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1Rlc3RpbmcuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyID0gY3JlYXRlUHJvdmlkZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm92aWRlci50ZXN0Q29ubmVjdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5zdWNjZXNzICYmIHJlc3VsdC5tb2RlbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmF2YWlsYWJsZU1vZGVscyA9IHJlc3VsdC5tb2RlbHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmxhc3RUZXN0UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShyZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpOyAvLyBSZWZyZXNoIHZpZXdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmxhc3RUZXN0UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UocmVzdWx0Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmxhc3RUZXN0UmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzZXR0aW5ncy5sYXN0VGVzdFJlc3VsdC50aW1lc3RhbXApO1xyXG4gICAgICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogYExhc3QgdGVzdDogJHtkYXRlLnRvTG9jYWxlU3RyaW5nKCl9IC0gJHtzZXR0aW5ncy5sYXN0VGVzdFJlc3VsdC5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICBjbHM6IHNldHRpbmdzLmxhc3RUZXN0UmVzdWx0LnN1Y2Nlc3MgPyAnc3VjY2VzcycgOiAnZXJyb3InXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdNb2RlbCcpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdDaG9vc2UgdGhlIEdlbWluaSBtb2RlbCB0byB1c2UnKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb2RlbCBvZiBzZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24obW9kZWwsIG1vZGVsKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHNldHRpbmdzLm1vZGVsKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubW9kZWwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgcmVuZGVyT2xsYW1hU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vbGxhbWFTZXR0aW5ncztcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdUZXN0IENvbm5lY3Rpb24nKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQ2hlY2sgc2VydmVyIGNvbm5lY3Rpb24gYW5kIGZldGNoIGF2YWlsYWJsZSBtb2RlbHMnKVxyXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cclxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdUZXN0JylcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdGluZy4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZCh0cnVlKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBjcmVhdGVQcm92aWRlcih0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHByb3ZpZGVyLnRlc3RDb25uZWN0aW9uKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0Lm1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzID0gcmVzdWx0Lm1vZGVscztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHJlc3VsdC5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMub25PcGVuKCk7IC8vIFJlZnJlc2ggdmlld1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IHJlc3VsdC5tZXNzYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShyZXN1bHQubWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdUZXN0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXREaXNhYmxlZChmYWxzZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICBpZiAoc2V0dGluZ3MubGFzdFRlc3RSZXN1bHQpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IG5ldyBEYXRlKHNldHRpbmdzLmxhc3RUZXN0UmVzdWx0LnRpbWVzdGFtcCk7XHJcbiAgICAgICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0OiBgTGFzdCB0ZXN0OiAke2RhdGUudG9Mb2NhbGVTdHJpbmcoKX0gLSAke3NldHRpbmdzLmxhc3RUZXN0UmVzdWx0Lm1lc3NhZ2V9YCxcclxuICAgICAgICAgICAgICAgIGNsczogc2V0dGluZ3MubGFzdFRlc3RSZXN1bHQuc3VjY2VzcyA/ICdzdWNjZXNzJyA6ICdlcnJvcidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ01vZGVsJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSB0aGUgT2xsYW1hIG1vZGVsIHRvIHVzZScpXHJcbiAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIHNldHRpbmdzLmF2YWlsYWJsZU1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihtb2RlbCwgbW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3MubW9kZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5tb2RlbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBoZWxwIHRleHQgZm9yIE9sbGFtYSBzZXR1cFxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7XHJcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXHJcbiAgICAgICAgICAgIHRleHQ6ICdUbyB1c2UgT2xsYW1hOidcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBzdGVwcyA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdvbCcpO1xyXG4gICAgICAgIHN0ZXBzLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ0luc3RhbGwgT2xsYW1hIGZyb20gaHR0cHM6Ly9vbGxhbWEuYWknIH0pO1xyXG4gICAgICAgIHN0ZXBzLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1N0YXJ0IHRoZSBPbGxhbWEgc2VydmVyJyB9KTtcclxuICAgICAgICBzdGVwcy5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICdQdWxsIG1vZGVscyB1c2luZyBcIm9sbGFtYSBwdWxsIG1vZGVsLW5hbWVcIicgfSk7XHJcbiAgICAgICAgc3RlcHMuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAnVGVzdCBjb25uZWN0aW9uIHRvIHNlZSBhdmFpbGFibGUgbW9kZWxzJyB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbkNsb3NlKCkge1xyXG4gICAgICAgIC8vIENsZWFuIHVwIGFueSByZXNvdXJjZXMgaWYgbmVlZGVkXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBTZXR1cCBhdXRvY29tcGxldGlvbiBmb3Igbm90ZXMgYW5kIGhlYWRlcnNcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIGlucHV0RWwgVGhlIGlucHV0IGVsZW1lbnQgdG8gYXR0YWNoIGF1dG9jb21wbGV0aW9uIHRvXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2V0dXBOb3RlQXV0b2NvbXBsZXRlKGlucHV0RWw6IEhUTUxUZXh0QXJlYUVsZW1lbnQpIHtcclxuICAgICAgICAvLyBDdXJyZW50IGN1cnNvciBwb3NpdGlvbiB0cmFja2luZ1xyXG4gICAgICAgIGxldCBjdXJyZW50U3RhcnRQb3MgPSAwO1xyXG4gICAgICAgIGxldCBjdXJyZW50RW5kUG9zID0gMDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBUcmFjayB3aGVuIHRoZSB1c2VyIGlzIHR5cGluZyBhIGxpbmtcclxuICAgICAgICBsZXQgaXNUeXBpbmdMaW5rID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IHN1Z2dlc3Rpb25FbDogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjbGVhbnVwU3VnZ2VzdGlvbnMgPSAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChzdWdnZXN0aW9uRWwgJiYgZG9jdW1lbnQuYm9keS5jb250YWlucyhzdWdnZXN0aW9uRWwpKSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHN1Z2dlc3Rpb25FbCk7XHJcbiAgICAgICAgICAgICAgICBzdWdnZXN0aW9uRWwgPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBIYW5kbGUgbGluayBkZXRlY3Rpb24gd2l0aCBtYW51YWwgaW5wdXQgdHJhY2tpbmdcclxuICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKGUpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3Vyc29yUG9zID0gaW5wdXRFbC5zZWxlY3Rpb25TdGFydDtcclxuICAgICAgICAgICAgY29uc3QgdGV4dCA9IGlucHV0RWwudmFsdWU7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSdyZSBwb3RlbnRpYWxseSBpbnNpZGUgYSBsaW5rXHJcbiAgICAgICAgICAgIGNvbnN0IGJlZm9yZUN1cnNvciA9IHRleHQuc3Vic3RyaW5nKDAsIGN1cnNvclBvcyk7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhc3RPcGVuQnJhY2tldHMgPSBiZWZvcmVDdXJzb3IubGFzdEluZGV4T2YoXCJbW1wiKTtcclxuICAgICAgICAgICAgY29uc3QgbGFzdENsb3NlQnJhY2tldHMgPSBiZWZvcmVDdXJzb3IubGFzdEluZGV4T2YoXCJdXVwiKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIElmIHdlIGhhdmUgb3BlbiBicmFja2V0cyBhZnRlciB0aGUgbGFzdCBjbG9zZSBicmFja2V0c1xyXG4gICAgICAgICAgICBpZiAobGFzdE9wZW5CcmFja2V0cyA+IGxhc3RDbG9zZUJyYWNrZXRzICYmIGxhc3RPcGVuQnJhY2tldHMgIT09IC0xKSB7XHJcbiAgICAgICAgICAgICAgICBpc1R5cGluZ0xpbmsgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgY3VycmVudFN0YXJ0UG9zID0gbGFzdE9wZW5CcmFja2V0cyArIDI7IC8vIFN0YXJ0IGFmdGVyIHRoZSBbW1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiB3ZSBoYXZlIG1hdGNoaW5nIF1dIGFoZWFkXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhZnRlckN1cnNvciA9IHRleHQuc3Vic3RyaW5nKGN1cnNvclBvcyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0Q2xvc2VCcmFja2V0cyA9IGFmdGVyQ3Vyc29yLmluZGV4T2YoXCJdXVwiKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRDbG9zZUJyYWNrZXRzICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbmRQb3MgPSBjdXJzb3JQb3M7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHRoZSB0ZXh0IGJlaW5nIHR5cGVkIGluc2lkZSBbWyBdXVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmtUZXh0ID0gdGV4dC5zdWJzdHJpbmcoY3VycmVudFN0YXJ0UG9zLCBjdXJyZW50RW5kUG9zKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBTaG93IHN1Z2dlc3Rpb25zIGlmIHdlIGhhdmUgYXQgbGVhc3QgMSBjaGFyYWN0ZXIgdHlwZWRcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGlua1RleHQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBDbGVhbiB1cCBwcmV2aW91cyBzdWdnZXN0aW9uc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjbGVhbnVwU3VnZ2VzdGlvbnMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Tm90ZVN1Z2dlc3Rpb25zKGlucHV0RWwsIGN1cnJlbnRTdGFydFBvcywgY3VycmVudEVuZFBvcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaXNUeXBpbmdMaW5rID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBjbGVhbnVwU3VnZ2VzdGlvbnMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENsb3NlIHN1Z2dlc3Rpb25zIG9uIEVzY2FwZSBrZXlcclxuICAgICAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCAoZTogS2V5Ym9hcmRFdmVudCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXkgPT09ICdFc2NhcGUnKSB7XHJcbiAgICAgICAgICAgICAgICBpc1R5cGluZ0xpbmsgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIGNsZWFudXBTdWdnZXN0aW9ucygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQ2xvc2Ugc3VnZ2VzdGlvbnMgd2hlbiBjbGlja2luZyBvdXRzaWRlIG9yIGZvY3VzaW5nIGVsc2V3aGVyZVxyXG4gICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcclxuICAgICAgICAgICAgaWYgKGUudGFyZ2V0ICE9PSBpbnB1dEVsICYmIHN1Z2dlc3Rpb25FbCAmJiAhc3VnZ2VzdGlvbkVsLmNvbnRhaW5zKGUudGFyZ2V0IGFzIE5vZGUpKSB7XHJcbiAgICAgICAgICAgICAgICBjbGVhbnVwU3VnZ2VzdGlvbnMoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIERpc3BsYXkgbm90ZSBhbmQgaGVhZGVyIHN1Z2dlc3Rpb25zXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBpbnB1dEVsIFRoZSBpbnB1dCBlbGVtZW50XHJcbiAgICAgKiBAcGFyYW0gc3RhcnRQb3MgVGhlIHN0YXJ0IHBvc2l0aW9uIG9mIHRoZSBsaW5rIHRleHRcclxuICAgICAqIEBwYXJhbSBlbmRQb3MgVGhlIGVuZCBwb3NpdGlvbiBvZiB0aGUgbGluayB0ZXh0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgc2hvd05vdGVTdWdnZXN0aW9ucyhpbnB1dEVsOiBIVE1MVGV4dEFyZWFFbGVtZW50LCBzdGFydFBvczogbnVtYmVyLCBlbmRQb3M6IG51bWJlcikge1xyXG4gICAgICAgIC8vIEdldCB0aGUgdGV4dCBiZWluZyB0eXBlZCBpbnNpZGUgW1sgXV1cclxuICAgICAgICBjb25zdCBsaW5rVGV4dCA9IGlucHV0RWwudmFsdWUuc3Vic3RyaW5nKHN0YXJ0UG9zLCBlbmRQb3MpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChsaW5rVGV4dC5sZW5ndGggPT09IDApIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICAvLyBHZXQgYWxsIG1hcmtkb3duIGZpbGVzIGluIHRoZSB2YXVsdFxyXG4gICAgICAgIGNvbnN0IGZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEZpbmQgZmlsZXMgbWF0Y2hpbmcgdGhlIGxpbmsgdGV4dFxyXG4gICAgICAgIGNvbnN0IG1hdGNoaW5nRmlsZXMgPSBmaWxlcy5maWx0ZXIoZmlsZSA9PiB7XHJcbiAgICAgICAgICAgIHJldHVybiBmaWxlLmJhc2VuYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobGlua1RleHQudG9Mb3dlckNhc2UoKSkgfHwgXHJcbiAgICAgICAgICAgICAgICAgICBmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsaW5rVGV4dC50b0xvd2VyQ2FzZSgpKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICBcclxuICAgICAgICBpZiAobWF0Y2hpbmdGaWxlcy5sZW5ndGggPT09IDApIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDcmVhdGUgc3VnZ2VzdGlvbiBlbGVtZW50XHJcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgc3VnZ2VzdGlvbkVsLmNsYXNzTmFtZSA9ICdub3RlLWF1dG9jb21wbGV0ZS1zdWdnZXN0aW9ucyc7XHJcbiAgICAgICAgc3VnZ2VzdGlvbkVsLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJzsgLy8gVXNlIGZpeGVkIHBvc2l0aW9uaW5nXHJcbiAgICAgICAgc3VnZ2VzdGlvbkVsLnN0eWxlLnpJbmRleCA9ICcxMDAwJztcclxuICAgICAgICBzdWdnZXN0aW9uRWwuc3R5bGUuYmFja2dyb3VuZCA9ICd2YXIoLS1iYWNrZ3JvdW5kLXByaW1hcnkpJztcclxuICAgICAgICBzdWdnZXN0aW9uRWwuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xyXG4gICAgICAgIHN1Z2dlc3Rpb25FbC5zdHlsZS5ib3JkZXJSYWRpdXMgPSAnNHB4JztcclxuICAgICAgICBzdWdnZXN0aW9uRWwuc3R5bGUuYm94U2hhZG93ID0gJzAgMnB4IDhweCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJveC1zaGFkb3cpJztcclxuICAgICAgICBzdWdnZXN0aW9uRWwuc3R5bGUubWF4SGVpZ2h0ID0gJzIwMHB4JztcclxuICAgICAgICBzdWdnZXN0aW9uRWwuc3R5bGUud2lkdGggPSAnMzAwcHgnOyAvLyBGaXhlZCB3aWR0aCBmb3IgYmV0dGVyIHZpc2liaWxpdHlcclxuICAgICAgICBzdWdnZXN0aW9uRWwuc3R5bGUub3ZlcmZsb3cgPSAnYXV0byc7XHJcbiAgICAgICAgc3VnZ2VzdGlvbkVsLnN0eWxlLnBhZGRpbmcgPSAnOHB4JztcclxuICAgICAgICBcclxuICAgICAgICAvLyBEZWJ1ZyBpbmZvcm1hdGlvbiBhdCB0aGUgdG9wXHJcbiAgICAgICAgY29uc3QgZGVidWdJbmZvID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgZGVidWdJbmZvLnN0eWxlLmZvbnRTaXplID0gJzEwcHgnO1xyXG4gICAgICAgIGRlYnVnSW5mby5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XHJcbiAgICAgICAgZGVidWdJbmZvLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICc0cHgnO1xyXG4gICAgICAgIGRlYnVnSW5mby5zdHlsZS5ib3JkZXJCb3R0b20gPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XHJcbiAgICAgICAgZGVidWdJbmZvLnRleHRDb250ZW50ID0gYFNlYXJjaGluZyBmb3I6IFwiJHtsaW5rVGV4dH1cIiAtIEZvdW5kICR7bWF0Y2hpbmdGaWxlcy5sZW5ndGh9IG1hdGNoZXNgO1xyXG4gICAgICAgIHN1Z2dlc3Rpb25FbC5hcHBlbmRDaGlsZChkZWJ1Z0luZm8pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFBvc2l0aW9uIHRoZSBlbGVtZW50IGJhc2VkIG9uIGlucHV0IGNvb3JkaW5hdGVzXHJcbiAgICAgICAgY29uc3QgcmVjdCA9IGlucHV0RWwuZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCk7XHJcbiAgICAgICAgY29uc3QgbGluZUhlaWdodCA9IHBhcnNlSW50KGdldENvbXB1dGVkU3R5bGUoaW5wdXRFbCkubGluZUhlaWdodCkgfHwgMjA7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gR2V0IHRleHQgdXAgdG8gY3Vyc29yIHBvc2l0aW9uIHRvIGNhbGN1bGF0ZSB2ZXJ0aWNhbCBwb3NpdGlvblxyXG4gICAgICAgIGNvbnN0IHRleHRVcFRvQ3Vyc29yID0gaW5wdXRFbC52YWx1ZS5zdWJzdHJpbmcoMCwgZW5kUG9zKTtcclxuICAgICAgICBjb25zdCBsaW5lcyA9IHRleHRVcFRvQ3Vyc29yLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICBjb25zdCBsaW5lTnVtYmVyID0gbGluZXMubGVuZ3RoIC0gMTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBQb3NpdGlvbiBiZWxvdyB0aGUgbGluZSB3aGVyZSBjdXJzb3IgaXNcclxuICAgICAgICBzdWdnZXN0aW9uRWwuc3R5bGUubGVmdCA9IGAke3JlY3QubGVmdH1weGA7XHJcbiAgICAgICAgc3VnZ2VzdGlvbkVsLnN0eWxlLnRvcCA9IGAke3JlY3QudG9wICsgKGxpbmVOdW1iZXIgKyAxKSAqIGxpbmVIZWlnaHR9cHhgO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEFkZCBtYXRjaGluZyBmaWxlcyB0byBzdWdnZXN0aW9uIGVsZW1lbnRcclxuICAgICAgICBtYXRjaGluZ0ZpbGVzLnNsaWNlKDAsIDEwKS5mb3JFYWNoKGZpbGUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NOYW1lID0gJ25vdGUtYXV0b2NvbXBsZXRlLWl0ZW0nO1xyXG4gICAgICAgICAgICBpdGVtLnRleHRDb250ZW50ID0gZmlsZS5iYXNlbmFtZTtcclxuICAgICAgICAgICAgaXRlbS5zdHlsZS5wYWRkaW5nID0gJzhweCAxMnB4JztcclxuICAgICAgICAgICAgaXRlbS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XHJcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgc2VsZWN0ZWQgZmlsZSBuYW1lXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXBsYWNlbWVudCA9IGZpbGUuYmFzZW5hbWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdWYWx1ZSA9IFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0RWwudmFsdWUuc3Vic3RyaW5nKDAsIHN0YXJ0UG9zIC0gMikgKyBcclxuICAgICAgICAgICAgICAgICAgICAnW1snICsgcmVwbGFjZW1lbnQgKyAnXV0nICsgXHJcbiAgICAgICAgICAgICAgICAgICAgaW5wdXRFbC52YWx1ZS5zdWJzdHJpbmcoZW5kUG9zICsgMik7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlucHV0RWwudmFsdWUgPSBuZXdWYWx1ZTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gVXBkYXRlIHBsdWdpbiBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGV4dE5vdGVzID0gaW5wdXRFbC52YWx1ZTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgc3VnZ2VzdGlvbiBlbGVtZW50XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5ib2R5LnJlbW92ZUNoaWxkKHN1Z2dlc3Rpb25FbCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFNldCBjdXJzb3IgcG9zaXRpb24gYWZ0ZXIgdGhlIGluc2VydGVkIHRleHRcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld1BvcyA9IHN0YXJ0UG9zIC0gMiArIDIgKyByZXBsYWNlbWVudC5sZW5ndGggKyAyO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbC5zZXRTZWxlY3Rpb25SYW5nZShuZXdQb3MsIG5ld1Bvcyk7XHJcbiAgICAgICAgICAgICAgICBpbnB1dEVsLmZvY3VzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc3VnZ2VzdGlvbkVsLmFwcGVuZENoaWxkKGl0ZW0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQWRkIGhlYWRlcnMgZnJvbSB0aGUgZmlsZSBpZiBhdmFpbGFibGVcclxuICAgICAgICAgICAgdGhpcy5hZGRIZWFkZXJTdWdnZXN0aW9ucyhmaWxlLCBzdWdnZXN0aW9uRWwsIHN0YXJ0UG9zLCBlbmRQb3MsIGlucHV0RWwpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEFkZCBzdWdnZXN0aW9uIGVsZW1lbnQgdG8gdGhlIERPTVxyXG4gICAgICAgIGRvY3VtZW50LmJvZHkuYXBwZW5kQ2hpbGQoc3VnZ2VzdGlvbkVsKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLyoqXHJcbiAgICAgKiBBZGQgaGVhZGVyIHN1Z2dlc3Rpb25zIGZvciBhIGZpbGVcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIGZpbGUgVGhlIGZpbGUgdG8gZ2V0IGhlYWRlcnMgZnJvbVxyXG4gICAgICogQHBhcmFtIHN1Z2dlc3Rpb25FbCBUaGUgc3VnZ2VzdGlvbiBjb250YWluZXIgZWxlbWVudFxyXG4gICAgICogQHBhcmFtIHN0YXJ0UG9zIFN0YXJ0IHBvc2l0aW9uIGluIHRoZSBpbnB1dFxyXG4gICAgICogQHBhcmFtIGVuZFBvcyBFbmQgcG9zaXRpb24gaW4gdGhlIGlucHV0XHJcbiAgICAgKiBAcGFyYW0gaW5wdXRFbCBUaGUgaW5wdXQgZWxlbWVudFxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIGFkZEhlYWRlclN1Z2dlc3Rpb25zKFxyXG4gICAgICAgIGZpbGU6IFRGaWxlLCBcclxuICAgICAgICBzdWdnZXN0aW9uRWw6IEhUTUxFbGVtZW50LCBcclxuICAgICAgICBzdGFydFBvczogbnVtYmVyLCBcclxuICAgICAgICBlbmRQb3M6IG51bWJlciwgXHJcbiAgICAgICAgaW5wdXRFbDogSFRNTFRleHRBcmVhRWxlbWVudFxyXG4gICAgKSB7XHJcbiAgICAgICAgLy8gR2V0IGZpbGUgY2FjaGUgdG8gZXh0cmFjdCBoZWFkZXJzXHJcbiAgICAgICAgY29uc3QgY2FjaGUgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShmaWxlKTtcclxuICAgICAgICBpZiAoIWNhY2hlIHx8ICFjYWNoZS5oZWFkaW5ncyB8fCBjYWNoZS5oZWFkaW5ncy5sZW5ndGggPT09IDApIHJldHVybjtcclxuICAgICAgICBcclxuICAgICAgICAvLyBBZGQgYSBzZXBhcmF0b3JcclxuICAgICAgICBjb25zdCBzZXBhcmF0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBzZXBhcmF0b3Iuc3R5bGUuaGVpZ2h0ID0gJzFweCc7XHJcbiAgICAgICAgc2VwYXJhdG9yLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xyXG4gICAgICAgIHNlcGFyYXRvci5zdHlsZS5tYXJnaW4gPSAnNHB4IDAnO1xyXG4gICAgICAgIHN1Z2dlc3Rpb25FbC5hcHBlbmRDaGlsZChzZXBhcmF0b3IpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEFkZCBhIGxhYmVsIGZvciBoZWFkZXJzXHJcbiAgICAgICAgY29uc3QgaGVhZGVyTGFiZWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBoZWFkZXJMYWJlbC5zdHlsZS5mb250U2l6ZSA9ICcxMHB4JztcclxuICAgICAgICBoZWFkZXJMYWJlbC5zdHlsZS5jb2xvciA9ICd2YXIoLS10ZXh0LW11dGVkKSc7XHJcbiAgICAgICAgaGVhZGVyTGFiZWwuc3R5bGUucGFkZGluZyA9ICcycHggMTJweCc7XHJcbiAgICAgICAgaGVhZGVyTGFiZWwudGV4dENvbnRlbnQgPSAnSGVhZGVyczonO1xyXG4gICAgICAgIHN1Z2dlc3Rpb25FbC5hcHBlbmRDaGlsZChoZWFkZXJMYWJlbCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gQWRkIGhlYWRlcnMgYXMgc3VnZ2VzdGlvbnNcclxuICAgICAgICBjYWNoZS5oZWFkaW5ncy5mb3JFYWNoKGhlYWRpbmcgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBpdGVtID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgIGl0ZW0uY2xhc3NOYW1lID0gJ25vdGUtYXV0b2NvbXBsZXRlLWl0ZW0nO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gSW5kZW50IGJhc2VkIG9uIGhlYWRpbmcgbGV2ZWxcclxuICAgICAgICAgICAgY29uc3QgaW5kZW50ID0gJyZuYnNwOycucmVwZWF0KChoZWFkaW5nLmxldmVsIC0gMSkgKiAyKTtcclxuICAgICAgICAgICAgaXRlbS5pbm5lckhUTUwgPSBgJHtpbmRlbnR9IyAke2hlYWRpbmcuaGVhZGluZ31gO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaXRlbS5zdHlsZS5wYWRkaW5nID0gJzZweCAxMnB4JztcclxuICAgICAgICAgICAgaXRlbS5zdHlsZS5jdXJzb3IgPSAncG9pbnRlcic7XHJcbiAgICAgICAgICAgIGl0ZW0uc3R5bGUuYm9yZGVyUmFkaXVzID0gJzRweCc7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpdGVtLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBpdGVtLnN0eWxlLmJhY2tncm91bmRDb2xvciA9ICd2YXIoLS1iYWNrZ3JvdW5kLXNlY29uZGFyeSknO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGl0ZW0uYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gJyc7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaXRlbS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIC8vIEluc2VydCB0aGUgc2VsZWN0ZWQgZmlsZSBuYW1lIHdpdGggaGVhZGluZ1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVwbGFjZW1lbnQgPSBgJHtmaWxlLmJhc2VuYW1lfSMke2hlYWRpbmcuaGVhZGluZ31gO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3VmFsdWUgPSBcclxuICAgICAgICAgICAgICAgICAgICBpbnB1dEVsLnZhbHVlLnN1YnN0cmluZygwLCBzdGFydFBvcyAtIDIpICsgXHJcbiAgICAgICAgICAgICAgICAgICAgJ1tbJyArIHJlcGxhY2VtZW50ICsgJ11dJyArIFxyXG4gICAgICAgICAgICAgICAgICAgIGlucHV0RWwudmFsdWUuc3Vic3RyaW5nKGVuZFBvcyArIDIpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBpbnB1dEVsLnZhbHVlID0gbmV3VmFsdWU7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSBwbHVnaW4gc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRleHROb3RlcyA9IGlucHV0RWwudmFsdWU7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUmVtb3ZlIHN1Z2dlc3Rpb24gZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5yZW1vdmVDaGlsZChzdWdnZXN0aW9uRWwpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBTZXQgY3Vyc29yIHBvc2l0aW9uIGFmdGVyIHRoZSBpbnNlcnRlZCB0ZXh0XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXdQb3MgPSBzdGFydFBvcyAtIDIgKyAyICsgcmVwbGFjZW1lbnQubGVuZ3RoICsgMjtcclxuICAgICAgICAgICAgICAgIGlucHV0RWwuc2V0U2VsZWN0aW9uUmFuZ2UobmV3UG9zLCBuZXdQb3MpO1xyXG4gICAgICAgICAgICAgICAgaW5wdXRFbC5mb2N1cygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIHN1Z2dlc3Rpb25FbC5hcHBlbmRDaGlsZChpdGVtKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFBhcnNlcyBhIGdpdmVuIHRleHQgc2VsZWN0aW9uIGludG8gYW4gYXJyYXkgb2YgbWVzc2FnZSBvYmplY3RzXHJcbiAqIFxyXG4gKiBUaGUgZnVuY3Rpb24gaW50ZXJwcmV0cyBsaW5lcyBvZiB0ZXh0IHNlcGFyYXRlZCBieSAnLS0tLScgYXMgYm91bmRhcmllc1xyXG4gKiBiZXR3ZWVuIHVzZXIgYW5kIGFzc2lzdGFudCBtZXNzYWdlcy5cclxuICogXHJcbiAqIEBwYXJhbSBzZWxlY3Rpb24gLSBUaGUgdGV4dCBzZWxlY3Rpb24gdG8gcGFyc2VcclxuICogQHJldHVybnMgQXJyYXkgb2YgbWVzc2FnZSBvYmplY3RzIHdpdGggcm9sZXMgYW5kIGNvbnRlbnRcclxuICovXHJcbmZ1bmN0aW9uIHBhcnNlU2VsZWN0aW9uKFxyXG4gICAgc2VsZWN0aW9uOiBzdHJpbmcsXHJcbiAgICBjaGF0U2VwYXJhdG9yOiBzdHJpbmcsXHJcbiAgICBjaGF0Qm91bmRhcnlTdHJpbmc/OiBzdHJpbmdcclxuKTogTWVzc2FnZVtdIHtcclxuICAgIC8vIElmIG5vIGNoYXRCb3VuZGFyeVN0cmluZyBpcyBwcm92aWRlZCwgc3RhcnQgcGFyc2luZyByaWdodCBhd2F5XHJcbiAgICBsZXQgaW5zaWRlQ2hhdCA9ICFjaGF0Qm91bmRhcnlTdHJpbmc7XHJcblxyXG4gICAgY29uc3QgbGluZXMgPSBzZWxlY3Rpb24uc3BsaXQoJ1xcbicpO1xyXG4gICAgbGV0IG1lc3NhZ2VzOiBNZXNzYWdlW10gPSBbXTtcclxuICAgIGxldCBjdXJyZW50Um9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcgPSAndXNlcic7XHJcbiAgICBsZXQgY3VycmVudENvbnRlbnQgPSAnJztcclxuXHJcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICBpZiAoY2hhdEJvdW5kYXJ5U3RyaW5nICYmIGxpbmUudHJpbSgpID09PSBjaGF0Qm91bmRhcnlTdHJpbmcpIHtcclxuICAgICAgICAgICAgLy8gSWYgc3RhcnQgYW5kIGVuZCBib3VuZGFyaWVzIGFyZSB0aGUgc2FtZSwgdG9nZ2xlIG9ubHkgb25jZVxyXG4gICAgICAgICAgICBpZiAoIWluc2lkZUNoYXQgJiYgY3VycmVudENvbnRlbnQudHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogY3VycmVudFJvbGUsIGNvbnRlbnQ6IGN1cnJlbnRDb250ZW50LnRyaW0oKSB9KTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaW5zaWRlQ2hhdCA9ICFpbnNpZGVDaGF0O1xyXG4gICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghaW5zaWRlQ2hhdCkgY29udGludWU7IC8vIElnbm9yZSBsaW5lcyBvdXRzaWRlIG9mIGEgY2hhdFxyXG5cclxuICAgICAgICBpZiAobGluZS50cmltKCkgPT09IGNoYXRTZXBhcmF0b3IpIHtcclxuICAgICAgICAgICAgLy8gSWYgd2UgaGl0IGEgc2VwYXJhdG9yLCBzYXZlIHRoZSBjdXJyZW50IG1lc3NhZ2UgYW5kIHN3aXRjaCByb2xlc1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudENvbnRlbnQudHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlcy5wdXNoKHsgcm9sZTogY3VycmVudFJvbGUsIGNvbnRlbnQ6IGN1cnJlbnRDb250ZW50LnRyaW0oKSB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjdXJyZW50Um9sZSA9IGN1cnJlbnRSb2xlID09PSAndXNlcicgPyAnYXNzaXN0YW50JyA6ICd1c2VyJztcclxuICAgICAgICAgICAgY3VycmVudENvbnRlbnQgPSAnJztcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBjdXJyZW50Q29udGVudCArPSBsaW5lICsgJ1xcbic7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFNhdmUgYW55IHJlbWFpbmluZyBjb250ZW50XHJcbiAgICBpZiAoY3VycmVudENvbnRlbnQudHJpbSgpKSB7XHJcbiAgICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGU6IGN1cnJlbnRSb2xlLCBjb250ZW50OiBjdXJyZW50Q29udGVudC50cmltKCkgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG1lc3NhZ2VzO1xyXG59XHJcblxyXG4vKipcclxuICogQUkgQXNzaXN0YW50IFBsdWdpblxyXG4gKiBcclxuICogVGhpcyBwbHVnaW4gYWRkcyBBSSBjYXBhYmlsaXRpZXMgdG8gT2JzaWRpYW4sIHN1cHBvcnRpbmcgbXVsdGlwbGUgcHJvdmlkZXJzOlxyXG4gKiAtIE9wZW5BSSAoR1BULTMuNSwgR1BULTQpXHJcbiAqIC0gQW50aHJvcGljIChDbGF1ZGUpXHJcbiAqIC0gR29vZ2xlIChHZW1pbmkpXHJcbiAqIC0gT2xsYW1hIChMb2NhbCBBSSlcclxuICogXHJcbiAqIEZlYXR1cmVzOlxyXG4gKiAtIENoYXQgd2l0aCBBSSBtb2RlbHNcclxuICogLSBTdHJlYW0gcmVzcG9uc2VzIGluIHJlYWwtdGltZVxyXG4gKiAtIENvbmZpZ3VyZSBtb2RlbCBzZXR0aW5nc1xyXG4gKiAtIFRlc3QgQVBJIGNvbm5lY3Rpb25zXHJcbiAqIC0gVXNlIGxvY2FsIEFJIG1vZGVscyB0aHJvdWdoIE9sbGFtYVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gICAgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3M7XHJcbiAgICBtb2RlbFNldHRpbmdzVmlldzogTW9kZWxTZXR0aW5nc1ZpZXcgfCBudWxsID0gbnVsbDtcclxuICAgIGFjdGl2ZVN0cmVhbTogQWJvcnRDb250cm9sbGVyIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgYXN5bmMgb25sb2FkKCkge1xyXG4gICAgICAgIGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XHJcblxyXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTXlQbHVnaW5TZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG4gICAgICAgIC8vIFJlZ2lzdGVyIHZpZXdzXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclZpZXcoXHJcbiAgICAgICAgICAgIFZJRVdfVFlQRV9NT0RFTF9TRVRUSU5HUyxcclxuICAgICAgICAgICAgKGxlYWYpID0+IG5ldyBNb2RlbFNldHRpbmdzVmlldyhsZWFmLCB0aGlzKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJWaWV3KFxyXG4gICAgICAgICAgICBWSUVXX1RZUEVfQ0hBVCxcclxuICAgICAgICAgICAgKGxlYWYpID0+IG5ldyBDaGF0VmlldyhsZWFmLCB0aGlzKVxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIC8vIEFkZCByaWJib24gaWNvbnNcclxuICAgICAgICB0aGlzLmFkZFJpYmJvbkljb24oJ2dlYXInLCAnT3BlbiBBSSBTZXR0aW5ncycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZVZpZXcoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRSaWJib25JY29uKCdtZXNzYWdlLXNxdWFyZScsICdPcGVuIEFJIENoYXQnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZhdGVDaGF0VmlldygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmF1dG9PcGVuTW9kZWxTZXR0aW5ncykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZVZpZXcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ2FpLWNvbXBsZXRpb24nLFxyXG4gICAgICAgICAgICBuYW1lOiAnR2V0IEFJIENvbXBsZXRpb24nLFxyXG4gICAgICAgICAgICBlZGl0b3JDYWxsYmFjazogYXN5bmMgKGVkaXRvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgbGV0IHRleHQ6IHN0cmluZztcclxuICAgICAgICAgICAgICAgIGxldCBpbnNlcnRQb3NpdGlvbjtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoZWRpdG9yLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBVc2UgdGhlIHNlbGVjdGVkIHRleHRcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gZWRpdG9yLmdldFNlbGVjdGlvbigpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc2VydFBvc2l0aW9uID0gZWRpdG9yLmdldEN1cnNvcigndG8nKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRmFsbGJhY2sgdG8gZXh0cmFjdGluZyB0ZXh0IHVwIHRvIHRoZSBjdXJyZW50IGN1cnNvciBsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbGluZU51bWJlciA9IGVkaXRvci5nZXRDdXJzb3IoKS5saW5lICsgMTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBkb2N1bWVudFRleHQgPSBlZGl0b3IuZ2V0VmFsdWUoKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgc3RhcnRJbmRleCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGVuZEluZGV4ID0gZWRpdG9yLnBvc1RvT2Zmc2V0KHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGluZTogbGluZU51bWJlcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2g6IGVkaXRvci5nZXRMaW5lKGxpbmVOdW1iZXIpLmxlbmd0aCAvLyBJbmNsdWRlIHRoZSBmdWxsIGN1cnNvciBsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVzZSBjaGF0U3RhcnRTdHJpbmcgYW5kIGNoYXRFbmRTdHJpbmcgaWYgZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmNoYXRTdGFydFN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBzdGFydFN0cmluZ0luZGV4ID0gZG9jdW1lbnRUZXh0LmluZGV4T2YodGhpcy5zZXR0aW5ncy5jaGF0U3RhcnRTdHJpbmcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoc3RhcnRTdHJpbmdJbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0SW5kZXggPSBzdGFydFN0cmluZ0luZGV4ICsgdGhpcy5zZXR0aW5ncy5jaGF0U3RhcnRTdHJpbmcubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5jaGF0RW5kU3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGVuZFN0cmluZ0luZGV4ID0gZG9jdW1lbnRUZXh0LmluZGV4T2YodGhpcy5zZXR0aW5ncy5jaGF0RW5kU3RyaW5nLCBzdGFydEluZGV4KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGVuZFN0cmluZ0luZGV4ICE9PSAtMSAmJiBlbmRTdHJpbmdJbmRleCA8IGVuZEluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBlbmRJbmRleCA9IGVuZFN0cmluZ0luZGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBubyBjaGF0U3RhcnRTdHJpbmcgb3IgY2hhdEVuZFN0cmluZyBpcyBmb3VuZCwgdXNlIHRoZSBlbnRpcmUgZG9jdW1lbnQgdXAgdG8gdGhlIGN1cnNvciBsaW5lXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmNoYXRTdGFydFN0cmluZyAmJiAhdGhpcy5zZXR0aW5ncy5jaGF0RW5kU3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVuZEluZGV4ID0gZWRpdG9yLnBvc1RvT2Zmc2V0KHsgbGluZTogbGluZU51bWJlciwgY2g6IDAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICB0ZXh0ID0gZG9jdW1lbnRUZXh0LnN1YnN0cmluZyhzdGFydEluZGV4LCBlbmRJbmRleCkudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGluc2VydFBvc2l0aW9uID0geyBsaW5lOiBsaW5lTnVtYmVyICsgMSwgY2g6IDAgfTtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBEZWJ1Z2dpbmc6IExvZyB0aGUgZXh0cmFjdGVkIHRleHRcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdFeHRyYWN0ZWQgdGV4dCBmb3IgY29tcGxldGlvbjonLCB0ZXh0KTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBQYXJzZSB0aGUgc2VsZWN0aW9uIGludG8gbWVzc2FnZXNcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gcGFyc2VTZWxlY3Rpb24odGV4dCwgdGhpcy5zZXR0aW5ncy5jaGF0U2VwYXJhdG9yKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBFbnN1cmUgdGhlcmUgYXJlIG1lc3NhZ2VzIHRvIHNlbmRcclxuICAgICAgICAgICAgICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdObyB2YWxpZCBtZXNzYWdlcyBmb3VuZCBpbiB0aGUgc2VsZWN0aW9uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJbnNlcnQgYSBzZXBhcmF0b3IgZm9yIHRoZSBBSSdzIHJlc3BvbnNlXHJcbiAgICAgICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGBcXG5cXG4ke3RoaXMuc2V0dGluZ3MuY2hhdFNlcGFyYXRvcn1cXG5cXG5gLCBpbnNlcnRQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICBsZXQgY3VycmVudFBvc2l0aW9uID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGxpbmU6IGluc2VydFBvc2l0aW9uLmxpbmUgKyAzLFxyXG4gICAgICAgICAgICAgICAgICAgIGNoOiAwXHJcbiAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBjcmVhdGVQcm92aWRlcih0aGlzLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm9jZXNzZWRNZXNzYWdlcyA9IGF3YWl0IHRoaXMucHJvY2Vzc01lc3NhZ2VzKFtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogdGhpcy5nZXRTeXN0ZW1NZXNzYWdlKCkgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgLi4ubWVzc2FnZXNcclxuICAgICAgICAgICAgICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJ1ZmZlcmVkQ2h1bmsgPSAnJzsgLy8gQWNjdW11bGF0ZSBjaHVua3NcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmbHVzaEJ1ZmZlciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGJ1ZmZlcmVkQ2h1bmspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoYnVmZmVyZWRDaHVuaywgY3VycmVudFBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQb3NpdGlvbiA9IGVkaXRvci5vZmZzZXRUb1BvcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucG9zVG9PZmZzZXQoY3VycmVudFBvc2l0aW9uKSArIGJ1ZmZlcmVkQ2h1bmsubGVuZ3RoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnVmZmVyZWRDaHVuayA9ICcnOyAvLyBDbGVhciBidWZmZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByb3ZpZGVyLmdldENvbXBsZXRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZE1lc3NhZ2VzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGhpcy5zZXR0aW5ncy50ZW1wZXJhdHVyZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFRva2VuczogdGhpcy5zZXR0aW5ncy5tYXhUb2tlbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1DYWxsYmFjazogKGNodW5rOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBidWZmZXJlZENodW5rICs9IGNodW5rOyAvLyBBY2N1bXVsYXRlIHRoZSBjaHVua1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIEZsdXNoIGJ1ZmZlciBldmVyeSAxMDBtc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZmx1c2hCdWZmZXIsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYWJvcnRDb250cm9sbGVyOiB0aGlzLmFjdGl2ZVN0cmVhbVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRmluYWwgZmx1c2ggYWZ0ZXIgY29tcGxldGlvblxyXG4gICAgICAgICAgICAgICAgICAgIGZsdXNoQnVmZmVyKCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoYFxcblxcbiR7dGhpcy5zZXR0aW5ncy5jaGF0U2VwYXJhdG9yfVxcblxcbmAsIGN1cnJlbnRQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3Q3Vyc29yUG9zID0gZWRpdG9yLm9mZnNldFRvUG9zKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBlZGl0b3IucG9zVG9PZmZzZXQoY3VycmVudFBvc2l0aW9uKSArIHRoaXMuc2V0dGluZ3MuY2hhdFNlcGFyYXRvci5sZW5ndGggKyA0XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKG5ld0N1cnNvclBvcyk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1cXG5cXG4ke3RoaXMuc2V0dGluZ3MuY2hhdFNlcGFyYXRvcn1cXG5cXG5gLCBjdXJyZW50UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdlbmQtYWktc3RyZWFtJyxcclxuICAgICAgICAgICAgbmFtZTogJ0VuZCBBSSBTdHJlYW0nLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlU3RyZWFtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVTdHJlYW0uYWJvcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQUkgc3RyZWFtIGVuZGVkJyk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ05vIGFjdGl2ZSBBSSBzdHJlYW0gdG8gZW5kJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdzaG93LWFpLXNldHRpbmdzJyxcclxuICAgICAgICAgICAgbmFtZTogJ1Nob3cgQUkgU2V0dGluZ3MnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZVZpZXcoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLmFkZENvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ3Nob3ctYWktY2hhdCcsXHJcbiAgICAgICAgICAgIG5hbWU6ICdTaG93IEFJIENoYXQnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZUNoYXRWaWV3KCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwdWJsaWMgZ2V0U3lzdGVtTWVzc2FnZSgpOiBzdHJpbmcge1xyXG4gICAgICAgIGxldCBzeXN0ZW1NZXNzYWdlID0gdGhpcy5zZXR0aW5ncy5zeXN0ZW1NZXNzYWdlO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5zZXR0aW5ncy5pbmNsdWRlRGF0ZVdpdGhTeXN0ZW1NZXNzYWdlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XHJcbiAgICAgICAgICAgIHN5c3RlbU1lc3NhZ2UgPSBgJHtzeXN0ZW1NZXNzYWdlfVxcblxcblRoZSBjdXJyZW50IGRhdGUgaXMgJHtjdXJyZW50RGF0ZX0uYDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmluY2x1ZGVUaW1lV2l0aFN5c3RlbU1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICAgICAgY29uc3QgdGltZVpvbmVPZmZzZXQgPSBub3cuZ2V0VGltZXpvbmVPZmZzZXQoKTtcclxuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0SG91cnMgPSBNYXRoLmFicyh0aW1lWm9uZU9mZnNldCkgLyA2MDtcclxuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0TWludXRlcyA9IE1hdGguYWJzKHRpbWVab25lT2Zmc2V0KSAlIDYwO1xyXG4gICAgICAgICAgICBjb25zdCBzaWduID0gdGltZVpvbmVPZmZzZXQgPiAwID8gJy0nIDogJysnO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgY3VycmVudFRpbWUgPSBub3cudG9Mb2NhbGVUaW1lU3RyaW5nKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVab25lU3RyaW5nID0gYFVUQyR7c2lnbn0ke29mZnNldEhvdXJzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtvZmZzZXRNaW51dGVzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xyXG4gICAgICAgICAgICBzeXN0ZW1NZXNzYWdlID0gYCR7c3lzdGVtTWVzc2FnZX1cXG5cXG5UaGUgY3VycmVudCB0aW1lIGlzICR7Y3VycmVudFRpbWV9ICR7dGltZVpvbmVTdHJpbmd9LmA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gc3lzdGVtTWVzc2FnZTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBhY3RpdmF0ZVZpZXcodmlld1R5cGU6IHN0cmluZyA9IFZJRVdfVFlQRV9NT0RFTF9TRVRUSU5HUykge1xyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUodmlld1R5cGUpO1xyXG5cclxuICAgICAgICBsZXQgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpO1xyXG4gICAgICAgIGlmIChsZWFmKSB7XHJcbiAgICAgICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcclxuICAgICAgICAgICAgICAgIHR5cGU6IHZpZXdUeXBlLFxyXG4gICAgICAgICAgICAgICAgYWN0aXZlOiB0cnVlLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLnJldmVhbExlYWYobGVhZik7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xyXG4gICAgICAgICAgICBhd2FpdCBsZWFmLnNldFZpZXdTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiB2aWV3VHlwZSxcclxuICAgICAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGFjdGl2YXRlQ2hhdFZpZXcoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hY3RpdmF0ZVZpZXcoVklFV19UWVBFX0NIQVQpO1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBzYXZlU2V0dGluZ3MoKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5zYXZlRGF0YSh0aGlzLnNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFByb2Nlc3NlcyBhIG1lc3NhZ2UgY29udGVudCB0byBpbmNsdWRlIE9ic2lkaWFuIG5vdGUgY29udGVudHNcclxuICAgICAqIFxyXG4gICAgICogSWYgYSBsaW5rIGlzIGZvdW5kLCByZXRyaWV2ZXMgdGhlIG5vdGUgY29udGVudCBhbmQgYXBwZW5kcyBpdCBhZnRlciB0aGUgbGluay5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIGNvbnRlbnQgVGhlIG1lc3NhZ2UgY29udGVudCB0byBwcm9jZXNzXHJcbiAgICAgKiBAcmV0dXJucyBUaGUgcHJvY2Vzc2VkIGNvbnRlbnQgd2l0aCBub3RlIGNvbnRlbnRzIGluY2x1ZGVkXHJcbiAgICAgKi9cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2VzcyBhbiBhcnJheSBvZiBtZXNzYWdlcyB0byBpbmNsdWRlIE9ic2lkaWFuIG5vdGUgY29udGVudHNcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIEFycmF5IG9mIG1lc3NhZ2VzIHRvIHByb2Nlc3NcclxuICAgICAqIEByZXR1cm5zIFByb21pc2UgcmVzb2x2aW5nIHRvIHByb2Nlc3NlZCBtZXNzYWdlc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIHByb2Nlc3NNZXNzYWdlcyhtZXNzYWdlczogTWVzc2FnZVtdKTogUHJvbWlzZTxNZXNzYWdlW10+IHtcclxuICAgICAgICBjb25zdCBwcm9jZXNzZWRNZXNzYWdlczogTWVzc2FnZVtdID0gW107XHJcblxyXG4gICAgICAgIC8vIFByZXBlbmQgY29udGV4dCBub3RlcyBpZiBlbmFibGVkXHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MuZW5hYmxlQ29udGV4dE5vdGVzICYmIHRoaXMuc2V0dGluZ3MuY29udGV4dE5vdGVzKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHRDb250ZW50ID0gYXdhaXQgdGhpcy5wcm9jZXNzQ29udGV4dE5vdGVzKHRoaXMuc2V0dGluZ3MuY29udGV4dE5vdGVzKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChjb250ZXh0Q29udGVudCkge1xyXG4gICAgICAgICAgICAgICAgLy8gQWRkIGNvbnRleHQgYXMgcGFydCBvZiB0aGUgc3lzdGVtIG1lc3NhZ2Ugb3IgYXMgYSBzZXBhcmF0ZSBzeXN0ZW0gbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA+IDAgJiYgbWVzc2FnZXNbMF0ucm9sZSA9PT0gJ3N5c3RlbScpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9jZXNzZWRNZXNzYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGAke21lc3NhZ2VzWzBdLmNvbnRlbnR9XFxuXFxuSGVyZSBpcyBhZGRpdGlvbmFsIGNvbnRleHQ6XFxuJHtjb250ZXh0Q29udGVudH1gXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXMgPSBtZXNzYWdlcy5zbGljZSgxKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkTWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBgSGVyZSBpcyBjb250ZXh0IGZvciBvdXIgY29udmVyc2F0aW9uOlxcbiR7Y29udGV4dENvbnRlbnR9YFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBQcm9jZXNzIHRoZSByZXN0IG9mIHRoZSBtZXNzYWdlcyB3aXRoIE9ic2lkaWFuIGxpbmtzIGlmIGVuYWJsZWRcclxuICAgICAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcclxuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkQ29udGVudCA9IGF3YWl0IHRoaXMucHJvY2Vzc09ic2lkaWFuTGlua3MobWVzc2FnZS5jb250ZW50KTtcclxuICAgICAgICAgICAgcHJvY2Vzc2VkTWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICByb2xlOiBtZXNzYWdlLnJvbGUsXHJcbiAgICAgICAgICAgICAgICBjb250ZW50OiBwcm9jZXNzZWRDb250ZW50XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHByb2Nlc3NlZE1lc3NhZ2VzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2VzcyBhIHNpbmdsZSBtZXNzYWdlIGNvbnRlbnQgdG8gaW5jbHVkZSBPYnNpZGlhbiBub3RlIGNvbnRlbnRzXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBjb250ZW50IFRoZSBtZXNzYWdlIGNvbnRlbnQgdG8gcHJvY2Vzc1xyXG4gICAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gcHJvY2Vzc2VkIGNvbnRlbnRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzT2JzaWRpYW5MaW5rcyhjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIGlmICghdGhpcy5zZXR0aW5ncy5lbmFibGVPYnNpZGlhbkxpbmtzKSByZXR1cm4gY29udGVudDtcclxuXHJcbiAgICAgICAgY29uc3QgbGlua1JlZ2V4ID0gL1xcW1xcWyguKj8pXFxdXFxdL2c7XHJcbiAgICAgICAgbGV0IG1hdGNoO1xyXG4gICAgICAgIGxldCBwcm9jZXNzZWRDb250ZW50ID0gY29udGVudDtcclxuXHJcbiAgICAgICAgd2hpbGUgKChtYXRjaCA9IGxpbmtSZWdleC5leGVjKGNvbnRlbnQpKSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMF0gJiYgbWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgICAgIC8vIFNwbGl0IGJ5IHBpcGUgdG8gaGFuZGxlIFtbcGF0aHxkaXNwbGF5XV0gZm9ybWF0XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwYXJ0cyA9IG1hdGNoWzFdLnNwbGl0KCd8Jyk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBmaWxlUGF0aCA9IHBhcnRzWzBdLnRyaW0oKTsgLy8gR2V0IHRoZSBwYXRoIHBhcnQgKGJlZm9yZSBwaXBlKVxyXG4gICAgICAgICAgICAgICAgY29uc3QgZGlzcGxheVRleHQgPSBwYXJ0cy5sZW5ndGggPiAxID8gcGFydHNbMV0udHJpbSgpIDogZmlsZVBhdGg7IC8vIEdldCBkaXNwbGF5IHRleHQgaWYgcHJlc2VudFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIEF0dGVtcHQgdG8gcmV0cmlldmUgdGhlIGZpbGUgYnkgaXRzIHJlbGF0aXZlIHBhdGhcclxuICAgICAgICAgICAgICAgICAgICBsZXQgZmlsZSA9IHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChmaWxlUGF0aCkgfHwgdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGAke2ZpbGVQYXRofS5tZGApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBJZiBub3QgZm91bmQsIHNlYXJjaCB0aGUgZW50aXJlIHZhdWx0IGZvciBhIG1hdGNoaW5nIGZpbGUgbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICghZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBhbGxGaWxlcyA9IHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpbGUgPSBhbGxGaWxlcy5maW5kKGYgPT4gZi5uYW1lID09PSBmaWxlUGF0aCB8fCBmLm5hbWUgPT09IGAke2ZpbGVQYXRofS5tZGAgfHwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLmJhc2VuYW1lLnRvTG93ZXJDYXNlKCkgPT09IGZpbGVQYXRoLnRvTG93ZXJDYXNlKCkgfHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYucGF0aCA9PT0gZmlsZVBhdGggfHwgZi5wYXRoID09PSBgJHtmaWxlUGF0aH0ubWRgKSB8fCBudWxsO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBoZWFkZXIgaWYgc3BlY2lmaWVkXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyTWF0Y2ggPSBmaWxlUGF0aC5tYXRjaCgvKC4qPykjKC4qKS8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBleHRyYWN0ZWRDb250ZW50ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZSAmJiBmaWxlIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90ZUNvbnRlbnQgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGhlYWRlck1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAvLyBFeHRyYWN0IGNvbnRlbnQgdW5kZXIgdGhlIHNwZWNpZmllZCBoZWFkZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQgPSB0aGlzLmV4dHJhY3RDb250ZW50VW5kZXJIZWFkZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbm90ZUNvbnRlbnQsIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlck1hdGNoWzJdLnRyaW0oKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQgPSBub3RlQ29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkQ29udGVudCA9IHByb2Nlc3NlZENvbnRlbnQucmVwbGFjZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hdGNoWzBdLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYCR7bWF0Y2hbMF19XFxuXFxuLS0tXFxuTm90ZSBOYW1lOiAke2ZpbGVQYXRofVxcbkNvbnRlbnQ6XFxuJHtleHRyYWN0ZWRDb250ZW50fVxcbi0tLVxcbmBcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBGaWxlIG5vdCBmb3VuZDogJHtmaWxlUGF0aH0uIEVuc3VyZSB0aGUgZmlsZSBuYW1lIGFuZCBwYXRoIGFyZSBjb3JyZWN0LmApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3IgcHJvY2Vzc2luZyBsaW5rIGZvciAke2ZpbGVQYXRofTogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBwcm9jZXNzZWRDb250ZW50O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXh0cmFjdCBjb250ZW50IHVuZGVyIGEgc3BlY2lmaWMgaGVhZGVyIGluIGEgbm90ZVxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gY29udGVudCBUaGUgbm90ZSBjb250ZW50XHJcbiAgICAgKiBAcGFyYW0gaGVhZGVyVGV4dCBUaGUgaGVhZGVyIHRleHQgdG8gZmluZFxyXG4gICAgICogQHJldHVybnMgVGhlIGNvbnRlbnQgdW5kZXIgdGhlIGhlYWRlciB1bnRpbCB0aGUgbmV4dCBoZWFkZXIgb3IgZW5kIG9mIG5vdGVcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBleHRyYWN0Q29udGVudFVuZGVySGVhZGVyKGNvbnRlbnQ6IHN0cmluZywgaGVhZGVyVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgIGxldCBmb3VuZEhlYWRlciA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBleHRyYWN0ZWRDb250ZW50ID0gW107XHJcbiAgICAgICAgbGV0IGhlYWRlckxldmVsID0gMDtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxpbmVzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxpbmUgPSBsaW5lc1tpXTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgbGluZSBpcyBhIGhlYWRlclxyXG4gICAgICAgICAgICBjb25zdCBoZWFkZXJNYXRjaCA9IGxpbmUubWF0Y2goL14oIyspXFxzKyguKj8pJC8pO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKGhlYWRlck1hdGNoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SGVhZGVyTGV2ZWwgPSBoZWFkZXJNYXRjaFsxXS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SGVhZGVyVGV4dCA9IGhlYWRlck1hdGNoWzJdLnRyaW0oKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWYgd2UgYWxyZWFkeSBmb3VuZCBvdXIgdGFyZ2V0IGhlYWRlciBhbmQgbm93IGZvdW5kIGFub3RoZXIgaGVhZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gYXQgdGhlIHNhbWUgb3IgaGlnaGVyIGxldmVsLCBzdG9wIGV4dHJhY3Rpb25cclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEhlYWRlckxldmVsIDw9IGhlYWRlckxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudEhlYWRlclRleHQudG9Mb3dlckNhc2UoKSA9PT0gaGVhZGVyVGV4dC50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRm91bmQgb3VyIHRhcmdldCBoZWFkZXJcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZEhlYWRlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgaGVhZGVyTGV2ZWwgPSBjdXJyZW50SGVhZGVyTGV2ZWw7XHJcbiAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudC5wdXNoKGxpbmUpOyAvLyBJbmNsdWRlIHRoZSBoZWFkZXIgaXRzZWxmXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChmb3VuZEhlYWRlcikge1xyXG4gICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudC5wdXNoKGxpbmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBleHRyYWN0ZWRDb250ZW50LmpvaW4oJ1xcbicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2VzcyBjb250ZXh0IG5vdGVzIHNwZWNpZmllZCBpbiB0aGUgc2V0dGluZ3NcclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIGNvbnRleHROb3Rlc1RleHQgVGhlIGNvbnRleHQgbm90ZXMgdGV4dCB3aXRoIFtbbm90ZV1dIHN5bnRheFxyXG4gICAgICogQHJldHVybnMgVGhlIHByb2Nlc3NlZCBjb250ZXh0IHRleHRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBwcm9jZXNzQ29udGV4dE5vdGVzKGNvbnRleHROb3Rlc1RleHQ6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICAgICAgY29uc3QgbGlua1JlZ2V4ID0gL1xcW1xcWyguKj8pXFxdXFxdL2c7XHJcbiAgICAgICAgbGV0IG1hdGNoO1xyXG4gICAgICAgIGxldCBjb250ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICAgICAgXHJcbiAgICAgICAgd2hpbGUgKChtYXRjaCA9IGxpbmtSZWdleC5leGVjKGNvbnRleHROb3Rlc1RleHQpKSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICBpZiAobWF0Y2ggJiYgbWF0Y2hbMV0pIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGZpbGVOYW1lID0gbWF0Y2hbMV0udHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoZXJlJ3MgYSBoZWFkZXIgc3BlY2lmaWVkXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyTWF0Y2ggPSBmaWxlTmFtZS5tYXRjaCgvKC4qPykjKC4qKS8pO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VGaWxlTmFtZSA9IGhlYWRlck1hdGNoID8gaGVhZGVyTWF0Y2hbMV0udHJpbSgpIDogZmlsZU5hbWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgaGVhZGVyTmFtZSA9IGhlYWRlck1hdGNoID8gaGVhZGVyTWF0Y2hbMl0udHJpbSgpIDogbnVsbDtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAvLyBGaW5kIHRoZSBmaWxlXHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoYmFzZUZpbGVOYW1lKSB8fCBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChgJHtiYXNlRmlsZU5hbWV9Lm1kYCk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCFmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbEZpbGVzID0gdGhpcy5hcHAudmF1bHQuZ2V0RmlsZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsZSA9IGFsbEZpbGVzLmZpbmQoZiA9PiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGYuYmFzZW5hbWUudG9Mb3dlckNhc2UoKSA9PT0gYmFzZUZpbGVOYW1lLnRvTG93ZXJDYXNlKCkgfHwgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmLm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gYCR7YmFzZUZpbGVOYW1lLnRvTG93ZXJDYXNlKCl9Lm1kYFxyXG4gICAgICAgICAgICAgICAgICAgICAgICApIHx8IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlICYmIGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RlQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Q29udGVudCArPSBgIyMjIEZyb20gbm90ZTogJHtmaWxlLmJhc2VuYW1lfVxcblxcbmA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXh0cmFjdCBjb250ZW50IHVuZGVyIHRoZSBzcGVjaWZpZWQgaGVhZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJDb250ZW50ID0gdGhpcy5leHRyYWN0Q29udGVudFVuZGVySGVhZGVyKG5vdGVDb250ZW50LCBoZWFkZXJOYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRDb250ZW50ICs9IGhlYWRlckNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZXh0Q29udGVudCArPSBub3RlQ29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dENvbnRlbnQgKz0gJ1xcblxcbic7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dENvbnRlbnQgKz0gYE5vdGUgbm90IGZvdW5kOiAke2ZpbGVOYW1lfVxcblxcbmA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Q29udGVudCArPSBgRXJyb3IgcHJvY2Vzc2luZyBub3RlICR7ZmlsZU5hbWV9OiAke2Vycm9yLm1lc3NhZ2V9XFxuXFxuYDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gY29udGV4dENvbnRlbnQ7XHJcbiAgICB9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBBSSBBc3Npc3RhbnQgUGx1Z2luIFR5cGVzXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIGNvcmUgdHlwZXMgYW5kIGludGVyZmFjZXMgdXNlZCB0aHJvdWdob3V0IHRoZSBwbHVnaW4uXHJcbiAqIFRoZXNlIGRlZmluaXRpb25zIGVuc3VyZSBjb25zaXN0ZW5jeSBhY3Jvc3MgZGlmZmVyZW50IEFJIHByb3ZpZGVycyBhbmRcclxuICogbWFrZSB0aGUgY29kZSBtb3JlIG1haW50YWluYWJsZSBhbmQgdHlwZS1zYWZlLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgY2hhdCBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uXHJcbiAqIFxyXG4gKiBAcHJvcGVydHkgcm9sZSAtIFdobyBzZW50IHRoZSBtZXNzYWdlICgnc3lzdGVtJywgJ3VzZXInLCBvciAnYXNzaXN0YW50JylcclxuICogQHByb3BlcnR5IGNvbnRlbnQgLSBUaGUgYWN0dWFsIHRleHQgY29udGVudCBvZiB0aGUgbWVzc2FnZVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlIHtcclxuICAgIHJvbGU6ICdzeXN0ZW0nIHwgJ3VzZXInIHwgJ2Fzc2lzdGFudCc7XHJcbiAgICBjb250ZW50OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPcHRpb25zIGZvciBnZW5lcmF0aW5nIEFJIGNvbXBsZXRpb25zXHJcbiAqIFxyXG4gKiBUaGVzZSBzZXR0aW5ncyBjb250cm9sIGhvdyB0aGUgQUkgZ2VuZXJhdGVzIGl0cyByZXNwb25zZS5cclxuICogTm90IGFsbCBvcHRpb25zIGFyZSBzdXBwb3J0ZWQgYnkgYWxsIHByb3ZpZGVycy5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbk9wdGlvbnMge1xyXG4gICAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XHJcbiAgICBtYXhUb2tlbnM/OiBudW1iZXI7XHJcbiAgICBzdHJlYW1DYWxsYmFjaz86IChjaHVuazogc3RyaW5nKSA9PiB2b2lkO1xyXG4gICAgYWJvcnRDb250cm9sbGVyPzogQWJvcnRDb250cm9sbGVyO1xyXG59XHJcblxyXG4vKipcclxuICogUmVzdWx0IG9mIHRlc3RpbmcgYW4gQUkgcHJvdmlkZXIgY29ubmVjdGlvblxyXG4gKiBcclxuICogQHByb3BlcnR5IHN1Y2Nlc3MgLSBXaGV0aGVyIHRoZSBjb25uZWN0aW9uIHRlc3QgcGFzc2VkXHJcbiAqIEBwcm9wZXJ0eSBtZXNzYWdlIC0gSHVtYW4tcmVhZGFibGUgcmVzdWx0IG1lc3NhZ2VcclxuICogQHByb3BlcnR5IG1vZGVscyAtIExpc3Qgb2YgYXZhaWxhYmxlIG1vZGVscyAoaWYgdGVzdCBzdWNjZXNzZnVsKVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb25uZWN0aW9uVGVzdFJlc3VsdCB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgbW9kZWxzPzogc3RyaW5nW107XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb21tb24gaW50ZXJmYWNlIGZvciBhbGwgQUkgcHJvdmlkZXJzXHJcbiAqIFxyXG4gKiBUaGlzIGludGVyZmFjZSBlbnN1cmVzIHRoYXQgYWxsIEFJIHByb3ZpZGVycyAoT3BlbkFJLCBBbnRocm9waWMsIGV0Yy4pXHJcbiAqIGltcGxlbWVudCB0aGUgc2FtZSBiYXNpYyBmdW5jdGlvbmFsaXR5LCBtYWtpbmcgaXQgZWFzeSB0byBzd2l0Y2ggYmV0d2VlbiB0aGVtLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBBSVByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgY29tcGxldGlvbiBmcm9tIHRoZSBBSSBtb2RlbFxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgLSBUaGUgY29udmVyc2F0aW9uIGhpc3RvcnlcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gU2V0dGluZ3MgZm9yIHRoaXMgY29tcGxldGlvblxyXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNvbXBsZXRpb24gaXMgZmluaXNoZWRcclxuICAgICAqL1xyXG4gICAgZ2V0Q29tcGxldGlvbihtZXNzYWdlczogTWVzc2FnZVtdLCBvcHRpb25zOiBDb21wbGV0aW9uT3B0aW9ucyk6IFByb21pc2U8dm9pZD47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIG1vZGVscyBmcm9tIHRoaXMgcHJvdmlkZXJcclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gbGlzdCBvZiBtb2RlbCBuYW1lc1xyXG4gICAgICovXHJcbiAgICBnZXRBdmFpbGFibGVNb2RlbHMoKTogUHJvbWlzZTxzdHJpbmdbXT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXN0IHRoZSBjb25uZWN0aW9uIHRvIHRoaXMgcHJvdmlkZXJcclxuICAgICAqIFxyXG4gICAgICogVmVyaWZpZXMgQVBJIGtleXMsIHNlcnZlciBjb25uZWN0aW9ucywgYW5kIHBlcm1pc3Npb25zLlxyXG4gICAgICogQWxzbyBmZXRjaGVzIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBtb2RlbHMgaWYgc3VjY2Vzc2Z1bC5cclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gdGVzdCByZXN1bHRzXHJcbiAgICAgKi9cclxuICAgIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Q29ubmVjdGlvblRlc3RSZXN1bHQ+O1xyXG59XHJcblxyXG4vKipcclxuICogUGx1Z2luIFNldHRpbmdzXHJcbiAqIFxyXG4gKiBUaGVzZSBzZXR0aW5ncyBjb250cm9sIGhvdyB0aGUgQUkgQXNzaXN0YW50IHBsdWdpbiB3b3Jrcy5cclxuICogVGhleSBhcmUgc2F2ZWQgYmV0d2VlbiBzZXNzaW9ucyBhbmQgY2FuIGJlIGNvbmZpZ3VyZWQgaW4gdGhlIHNldHRpbmdzIHRhYi5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgTXlQbHVnaW5TZXR0aW5ncyB7XHJcbiAgICAvKiogV2hpY2ggQUkgcHJvdmlkZXIgdG8gdXNlICovXHJcbiAgICBwcm92aWRlcjogJ29wZW5haScgfCAnYW50aHJvcGljJyB8ICdnZW1pbmknIHwgJ29sbGFtYSc7XHJcbiAgICByZWZlcmVuY2VDdXJyZW50Tm90ZTogYm9vbGVhbjtcclxuXHJcbiAgICAvKiogT3BlbkFJLXNwZWNpZmljIHNldHRpbmdzICovXHJcbiAgICBvcGVuYWlTZXR0aW5nczoge1xyXG4gICAgICAgIGFwaUtleTogc3RyaW5nO1xyXG4gICAgICAgIG1vZGVsOiBzdHJpbmc7XHJcbiAgICAgICAgYXZhaWxhYmxlTW9kZWxzOiBzdHJpbmdbXTtcclxuICAgICAgICBsYXN0VGVzdFJlc3VsdD86IHtcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBudW1iZXI7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiogQW50aHJvcGljLXNwZWNpZmljIHNldHRpbmdzICovXHJcbiAgICBhbnRocm9waWNTZXR0aW5nczoge1xyXG4gICAgICAgIGFwaUtleTogc3RyaW5nO1xyXG4gICAgICAgIG1vZGVsOiBzdHJpbmc7XHJcbiAgICAgICAgYXZhaWxhYmxlTW9kZWxzOiBzdHJpbmdbXTtcclxuICAgICAgICBsYXN0VGVzdFJlc3VsdD86IHtcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBudW1iZXI7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiogR29vZ2xlIEdlbWluaS1zcGVjaWZpYyBzZXR0aW5ncyAqL1xyXG4gICAgZ2VtaW5pU2V0dGluZ3M6IHtcclxuICAgICAgICBhcGlLZXk6IHN0cmluZztcclxuICAgICAgICBtb2RlbDogc3RyaW5nO1xyXG4gICAgICAgIGF2YWlsYWJsZU1vZGVsczogc3RyaW5nW107XHJcbiAgICAgICAgbGFzdFRlc3RSZXN1bHQ/OiB7XHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbnVtYmVyO1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqIE9sbGFtYS1zcGVjaWZpYyBzZXR0aW5ncyAqL1xyXG4gICAgb2xsYW1hU2V0dGluZ3M6IHtcclxuICAgICAgICBzZXJ2ZXJVcmw6IHN0cmluZztcclxuICAgICAgICBtb2RlbDogc3RyaW5nO1xyXG4gICAgICAgIGF2YWlsYWJsZU1vZGVsczogc3RyaW5nW107XHJcbiAgICAgICAgbGFzdFRlc3RSZXN1bHQ/OiB7XHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbnVtYmVyO1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqIFNldHRpbmdzIHRoYXQgYXBwbHkgdG8gYWxsIHByb3ZpZGVycyAqL1xyXG4gICAgc3lzdGVtTWVzc2FnZTogc3RyaW5nO1xyXG4gICAgdGVtcGVyYXR1cmU6IG51bWJlcjtcclxuICAgIG1heFRva2VuczogbnVtYmVyO1xyXG4gICAgaW5jbHVkZURhdGVXaXRoU3lzdGVtTWVzc2FnZTogYm9vbGVhbjtcclxuICAgIGluY2x1ZGVUaW1lV2l0aFN5c3RlbU1lc3NhZ2U6IGJvb2xlYW47XHJcbiAgICBlbmFibGVTdHJlYW1pbmc6IGJvb2xlYW47XHJcbiAgICBhdXRvT3Blbk1vZGVsU2V0dGluZ3M6IGJvb2xlYW47XHJcbiAgICBlbmFibGVPYnNpZGlhbkxpbmtzOiBib29sZWFuO1xyXG4gICAgLyoqIFRoZSBzdHJpbmcgdGhhdCBzZXBhcmF0ZXMgY2hhdCBtZXNzYWdlcyAqL1xyXG4gICAgY2hhdFNlcGFyYXRvcjogc3RyaW5nO1xyXG4gICAgLyoqIFRoZSBzdHJpbmcgdGhhdCBzdGFydHMgY2hhdCBtZXNzYWdlcyBpbiBhIG5vdGUsIGlmIHByZXNlbnQgKi9cclxuICAgIGNoYXRTdGFydFN0cmluZz86IHN0cmluZztcclxuICAgIC8qKiBUaGUgc3RyaW5nIHRoYXQgZW5kcyBjaGF0IG1lc3NhZ2VzIGluIGEgbm90ZSwgaWYgcHJlc2VudCAqL1xyXG4gICAgY2hhdEVuZFN0cmluZz86IHN0cmluZztcclxuICAgIGVuYWJsZUNvbnRleHROb3RlczogYm9vbGVhbjtcclxuICAgIGNvbnRleHROb3Rlczogc3RyaW5nO1xyXG59XHJcblxyXG4vKipcclxuICogRGVmYXVsdCBzZXR0aW5ncyB1c2VkIHdoZW4gaW5pdGlhbGl6aW5nIHRoZSBwbHVnaW5cclxuICovXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NFVFRJTkdTOiBNeVBsdWdpblNldHRpbmdzID0ge1xyXG4gICAgcmVmZXJlbmNlQ3VycmVudE5vdGU6IGZhbHNlLFxyXG4gICAgcHJvdmlkZXI6ICdvcGVuYWknLFxyXG4gICAgb3BlbmFpU2V0dGluZ3M6IHtcclxuICAgICAgICBhcGlLZXk6ICcnLFxyXG4gICAgICAgIG1vZGVsOiAnZ3B0LTRvLW1pbmknLFxyXG4gICAgICAgIGF2YWlsYWJsZU1vZGVsczogW11cclxuICAgIH0sXHJcbiAgICBhbnRocm9waWNTZXR0aW5nczoge1xyXG4gICAgICAgIGFwaUtleTogJycsXHJcbiAgICAgICAgbW9kZWw6ICdjbGF1ZGUtMy01LXNvbm5ldC1sYXRlc3QnLFxyXG4gICAgICAgIGF2YWlsYWJsZU1vZGVsczogW11cclxuICAgIH0sXHJcbiAgICBnZW1pbmlTZXR0aW5nczoge1xyXG4gICAgICAgIGFwaUtleTogJycsXHJcbiAgICAgICAgbW9kZWw6ICdnZW1pbmktcHJvJyxcclxuICAgICAgICBhdmFpbGFibGVNb2RlbHM6IFtdXHJcbiAgICB9LFxyXG4gICAgb2xsYW1hU2V0dGluZ3M6IHtcclxuICAgICAgICBzZXJ2ZXJVcmw6ICdodHRwOi8vbG9jYWxob3N0OjExNDM0JyxcclxuICAgICAgICBtb2RlbDogJ2xsYW1hMicsXHJcbiAgICAgICAgYXZhaWxhYmxlTW9kZWxzOiBbXVxyXG4gICAgfSxcclxuICAgIHN5c3RlbU1lc3NhZ2U6ICdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJyxcclxuICAgIHRlbXBlcmF0dXJlOiAwLjcsXHJcbiAgICBtYXhUb2tlbnM6IDEwMDAsXHJcbiAgICBpbmNsdWRlRGF0ZVdpdGhTeXN0ZW1NZXNzYWdlOiBmYWxzZSxcclxuICAgIGluY2x1ZGVUaW1lV2l0aFN5c3RlbU1lc3NhZ2U6IGZhbHNlLFxyXG4gICAgZW5hYmxlU3RyZWFtaW5nOiB0cnVlLFxyXG4gICAgYXV0b09wZW5Nb2RlbFNldHRpbmdzOiB0cnVlLFxyXG4gICAgZW5hYmxlT2JzaWRpYW5MaW5rczogdHJ1ZSxcclxuICAgIGNoYXRTZXBhcmF0b3I6ICctLS0tJyxcclxuICAgIGNoYXRTdGFydFN0cmluZzogdW5kZWZpbmVkLFxyXG4gICAgY2hhdEVuZFN0cmluZzogdW5kZWZpbmVkLFxyXG4gICAgZW5hYmxlQ29udGV4dE5vdGVzOiBmYWxzZSxcclxuICAgIGNvbnRleHROb3RlczogJydcclxufTtcclxuIiwgIi8qKlxyXG4gKiBCYXNlIEFJIFByb3ZpZGVyIEltcGxlbWVudGF0aW9uXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIGJhc2UgY2xhc3MgZm9yIEFJIHByb3ZpZGVycyB3aXRoIHNoYXJlZCBmdW5jdGlvbmFsaXR5XHJcbiAqIGFuZCBjb21tb24gZXJyb3IgaGFuZGxpbmcgcGF0dGVybnMuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQUlQcm92aWRlciwgTWVzc2FnZSwgQ29tcGxldGlvbk9wdGlvbnMsIENvbm5lY3Rpb25UZXN0UmVzdWx0IH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIENvbW1vbiBlcnJvciB0eXBlcyBhY3Jvc3MgcHJvdmlkZXJzXHJcbiAqL1xyXG5leHBvcnQgZW51bSBQcm92aWRlckVycm9yVHlwZSB7XHJcbiAgICBJbnZhbGlkQXBpS2V5ID0gJ2ludmFsaWRfYXBpX2tleScsXHJcbiAgICBSYXRlTGltaXQgPSAncmF0ZV9saW1pdCcsXHJcbiAgICBJbnZhbGlkUmVxdWVzdCA9ICdpbnZhbGlkX3JlcXVlc3QnLFxyXG4gICAgU2VydmVyRXJyb3IgPSAnc2VydmVyX2Vycm9yJyxcclxuICAgIE5ldHdvcmtFcnJvciA9ICduZXR3b3JrX2Vycm9yJ1xyXG59XHJcblxyXG4vKipcclxuICogQmFzZSBlcnJvciBjbGFzcyBmb3IgcHJvdmlkZXItc3BlY2lmaWMgZXJyb3JzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgUHJvdmlkZXJFcnJvciBleHRlbmRzIEVycm9yIHtcclxuICAgIHR5cGU6IFByb3ZpZGVyRXJyb3JUeXBlO1xyXG4gICAgc3RhdHVzQ29kZT86IG51bWJlcjtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcih0eXBlOiBQcm92aWRlckVycm9yVHlwZSwgbWVzc2FnZTogc3RyaW5nLCBzdGF0dXNDb2RlPzogbnVtYmVyKSB7XHJcbiAgICAgICAgc3VwZXIobWVzc2FnZSk7XHJcbiAgICAgICAgdGhpcy50eXBlID0gdHlwZTtcclxuICAgICAgICB0aGlzLnN0YXR1c0NvZGUgPSBzdGF0dXNDb2RlO1xyXG4gICAgICAgIHRoaXMubmFtZSA9ICdQcm92aWRlckVycm9yJztcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEJhc2UgY2xhc3MgZm9yIEFJIHByb3ZpZGVycyBpbXBsZW1lbnRpbmcgY29tbW9uIGZ1bmN0aW9uYWxpdHlcclxuICovXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBCYXNlUHJvdmlkZXIgaW1wbGVtZW50cyBBSVByb3ZpZGVyIHtcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBhcGlLZXk6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBhYnN0cmFjdCBiYXNlVXJsOiBzdHJpbmc7XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgbW9kZWw6IHN0cmluZztcclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIGNvbXBsZXRpb24gZnJvbSB0aGUgQUkgbW9kZWxcclxuICAgICAqL1xyXG4gICAgYWJzdHJhY3QgZ2V0Q29tcGxldGlvbihtZXNzYWdlczogTWVzc2FnZVtdLCBvcHRpb25zOiBDb21wbGV0aW9uT3B0aW9ucyk6IFByb21pc2U8dm9pZD47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYXZhaWxhYmxlIG1vZGVsc1xyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCBnZXRBdmFpbGFibGVNb2RlbHMoKTogUHJvbWlzZTxzdHJpbmdbXT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXN0IGNvbm5lY3Rpb24gdG8gdGhlIHByb3ZpZGVyXHJcbiAgICAgKi9cclxuICAgIGFic3RyYWN0IHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Q29ubmVjdGlvblRlc3RSZXN1bHQ+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSGFuZGxlIGNvbW1vbiBIVFRQIGVycm9yc1xyXG4gICAgICovXHJcbiAgICBwcm90ZWN0ZWQgaGFuZGxlSHR0cEVycm9yKGVycm9yOiBhbnkpOiBuZXZlciB7XHJcbiAgICAgICAgLy8gSGFuZGxlIFJlc3BvbnNlIG9iamVjdHMgZnJvbSBmZXRjaCBBUElcclxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBSZXNwb25zZSkge1xyXG4gICAgICAgICAgICBjb25zdCBzdGF0dXMgPSBlcnJvci5zdGF0dXM7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoc3RhdHVzKSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQwMTpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuSW52YWxpZEFwaUtleSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ0ludmFsaWQgQVBJIGtleScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQyOTpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuUmF0ZUxpbWl0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnUmF0ZSBsaW1pdCBleGNlZWRlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQwMDpcclxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuSW52YWxpZFJlcXVlc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdJbnZhbGlkIHJlcXVlc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA1MDA6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDUwMjpcclxuICAgICAgICAgICAgICAgIGNhc2UgNTAzOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA1MDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLlNlcnZlckVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnU2VydmVyIGVycm9yIG9jY3VycmVkJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLlNlcnZlckVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBgVW5rbm93biBlcnJvciBvY2N1cnJlZDogJHtzdGF0dXN9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIGVycm9yIG9iamVjdHMgd2l0aCByZXNwb25zZSBwcm9wZXJ0eSAobGlrZSBBeGlvcyBlcnJvcnMpXHJcbiAgICAgICAgaWYgKCFlcnJvci5yZXNwb25zZSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLk5ldHdvcmtFcnJvcixcclxuICAgICAgICAgICAgICAgICdOZXR3b3JrIGVycm9yIG9jY3VycmVkJ1xyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3Qgc3RhdHVzID0gZXJyb3IucmVzcG9uc2Uuc3RhdHVzO1xyXG4gICAgICAgIHN3aXRjaCAoc3RhdHVzKSB7XHJcbiAgICAgICAgICAgIGNhc2UgNDAxOlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuSW52YWxpZEFwaUtleSxcclxuICAgICAgICAgICAgICAgICAgICAnSW52YWxpZCBBUEkga2V5JyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNhc2UgNDI5OlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuUmF0ZUxpbWl0LFxyXG4gICAgICAgICAgICAgICAgICAgICdSYXRlIGxpbWl0IGV4Y2VlZGVkJyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGNhc2UgNDAwOlxyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgUHJvdmlkZXJFcnJvclR5cGUuSW52YWxpZFJlcXVlc3QsXHJcbiAgICAgICAgICAgICAgICAgICAgJ0ludmFsaWQgcmVxdWVzdCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjYXNlIDUwMDpcclxuICAgICAgICAgICAgY2FzZSA1MDI6XHJcbiAgICAgICAgICAgIGNhc2UgNTAzOlxyXG4gICAgICAgICAgICBjYXNlIDUwNDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLlNlcnZlckVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgICdTZXJ2ZXIgZXJyb3Igb2NjdXJyZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLlNlcnZlckVycm9yLFxyXG4gICAgICAgICAgICAgICAgICAgIGBVbmtub3duIGVycm9yIG9jY3VycmVkOiAke3N0YXR1c31gLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBGb3JtYXQgZXJyb3IgbWVzc2FnZSBmb3IgY29ubmVjdGlvbiB0ZXN0IHJlc3VsdHNcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGZvcm1hdEVycm9yTWVzc2FnZShlcnJvcjogYW55KTogc3RyaW5nIHtcclxuICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQcm92aWRlckVycm9yKSB7XHJcbiAgICAgICAgICAgIHN3aXRjaCAoZXJyb3IudHlwZSkge1xyXG4gICAgICAgICAgICAgICAgY2FzZSBQcm92aWRlckVycm9yVHlwZS5JbnZhbGlkQXBpS2V5OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnSW52YWxpZCBBUEkga2V5LiBQbGVhc2UgY2hlY2sgeW91ciBjcmVkZW50aWFscy4nO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBQcm92aWRlckVycm9yVHlwZS5SYXRlTGltaXQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdSYXRlIGxpbWl0IGV4Y2VlZGVkLiBQbGVhc2UgdHJ5IGFnYWluIGxhdGVyLic7XHJcbiAgICAgICAgICAgICAgICBjYXNlIFByb3ZpZGVyRXJyb3JUeXBlLk5ldHdvcmtFcnJvcjpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ05ldHdvcmsgZXJyb3IuIFBsZWFzZSBjaGVjayB5b3VyIGludGVybmV0IGNvbm5lY3Rpb24uJztcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGVycm9yLm1lc3NhZ2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGVycm9yLm1lc3NhZ2UgfHwgJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgc3RhbmRhcmQgZXJyb3IgcmVzcG9uc2UgZm9yIGNvbm5lY3Rpb24gdGVzdHNcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGNyZWF0ZUVycm9yUmVzcG9uc2UoZXJyb3I6IGFueSk6IENvbm5lY3Rpb25UZXN0UmVzdWx0IHtcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgbWVzc2FnZTogdGhpcy5mb3JtYXRFcnJvck1lc3NhZ2UoZXJyb3IpXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG4iLCAiZXhwb3J0IGNvbnN0IFZFUlNJT04gPSAnMC4zNi4zJzsgLy8geC1yZWxlYXNlLXBsZWFzZS12ZXJzaW9uXG4iLCAiLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICovXG5pbXBvcnQgeyB0eXBlIFJlcXVlc3RPcHRpb25zIH0gZnJvbSBcIi4uL2NvcmUuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBTaGltcyB7XG4gIGtpbmQ6IHN0cmluZztcbiAgZmV0Y2g6IGFueTtcbiAgUmVxdWVzdDogYW55O1xuICBSZXNwb25zZTogYW55O1xuICBIZWFkZXJzOiBhbnk7XG4gIEZvcm1EYXRhOiBhbnk7XG4gIEJsb2I6IGFueTtcbiAgRmlsZTogYW55O1xuICBSZWFkYWJsZVN0cmVhbTogYW55O1xuICBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9uczogPFQgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oXG4gICAgZm9ybTogU2hpbXNbJ0Zvcm1EYXRhJ10sXG4gICAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4sXG4gICkgPT4gUHJvbWlzZTxSZXF1ZXN0T3B0aW9uczxUPj47XG4gIGdldERlZmF1bHRBZ2VudDogKHVybDogc3RyaW5nKSA9PiBhbnk7XG4gIGZpbGVGcm9tUGF0aDpcbiAgICB8ICgocGF0aDogc3RyaW5nLCBmaWxlbmFtZT86IHN0cmluZywgb3B0aW9ucz86IHt9KSA9PiBQcm9taXNlPFNoaW1zWydGaWxlJ10+KVxuICAgIHwgKChwYXRoOiBzdHJpbmcsIG9wdGlvbnM/OiB7fSkgPT4gUHJvbWlzZTxTaGltc1snRmlsZSddPik7XG4gIGlzRnNSZWFkU3RyZWFtOiAodmFsdWU6IGFueSkgPT4gYm9vbGVhbjtcbn1cblxuZXhwb3J0IGxldCBhdXRvID0gZmFsc2U7XG5leHBvcnQgbGV0IGtpbmQ6IFNoaW1zWydraW5kJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IGZldGNoOiBTaGltc1snZmV0Y2gnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgUmVxdWVzdDogU2hpbXNbJ1JlcXVlc3QnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgUmVzcG9uc2U6IFNoaW1zWydSZXNwb25zZSddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBIZWFkZXJzOiBTaGltc1snSGVhZGVycyddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBGb3JtRGF0YTogU2hpbXNbJ0Zvcm1EYXRhJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IEJsb2I6IFNoaW1zWydCbG9iJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IEZpbGU6IFNoaW1zWydGaWxlJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IFJlYWRhYmxlU3RyZWFtOiBTaGltc1snUmVhZGFibGVTdHJlYW0nXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnM6IFNoaW1zWydnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBnZXREZWZhdWx0QWdlbnQ6IFNoaW1zWydnZXREZWZhdWx0QWdlbnQnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgZmlsZUZyb21QYXRoOiBTaGltc1snZmlsZUZyb21QYXRoJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IGlzRnNSZWFkU3RyZWFtOiBTaGltc1snaXNGc1JlYWRTdHJlYW0nXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcblxuZXhwb3J0IGZ1bmN0aW9uIHNldFNoaW1zKHNoaW1zOiBTaGltcywgb3B0aW9uczogeyBhdXRvOiBib29sZWFuIH0gPSB7IGF1dG86IGZhbHNlIH0pIHtcbiAgaWYgKGF1dG8pIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgeW91IG11c3QgXFxgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy8ke3NoaW1zLmtpbmR9J1xcYCBiZWZvcmUgaW1wb3J0aW5nIGFueXRoaW5nIGVsc2UgZnJvbSBAYW50aHJvcGljLWFpL3Nka2AsXG4gICAgKTtcbiAgfVxuICBpZiAoa2luZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBjYW4ndCBcXGBpbXBvcnQgJ0BhbnRocm9waWMtYWkvc2RrL3NoaW1zLyR7c2hpbXMua2luZH0nXFxgIGFmdGVyIFxcYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvJHtraW5kfSdcXGBgLFxuICAgICk7XG4gIH1cbiAgYXV0byA9IG9wdGlvbnMuYXV0bztcbiAga2luZCA9IHNoaW1zLmtpbmQ7XG4gIGZldGNoID0gc2hpbXMuZmV0Y2g7XG4gIFJlcXVlc3QgPSBzaGltcy5SZXF1ZXN0O1xuICBSZXNwb25zZSA9IHNoaW1zLlJlc3BvbnNlO1xuICBIZWFkZXJzID0gc2hpbXMuSGVhZGVycztcbiAgRm9ybURhdGEgPSBzaGltcy5Gb3JtRGF0YTtcbiAgQmxvYiA9IHNoaW1zLkJsb2I7XG4gIEZpbGUgPSBzaGltcy5GaWxlO1xuICBSZWFkYWJsZVN0cmVhbSA9IHNoaW1zLlJlYWRhYmxlU3RyZWFtO1xuICBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyA9IHNoaW1zLmdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zO1xuICBnZXREZWZhdWx0QWdlbnQgPSBzaGltcy5nZXREZWZhdWx0QWdlbnQ7XG4gIGZpbGVGcm9tUGF0aCA9IHNoaW1zLmZpbGVGcm9tUGF0aDtcbiAgaXNGc1JlYWRTdHJlYW0gPSBzaGltcy5pc0ZzUmVhZFN0cmVhbTtcbn1cbiIsICIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKi9cbmV4cG9ydCBjbGFzcyBNdWx0aXBhcnRCb2R5IHtcbiAgY29uc3RydWN0b3IocHVibGljIGJvZHk6IGFueSkge31cbiAgZ2V0IFtTeW1ib2wudG9TdHJpbmdUYWddKCk6IHN0cmluZyB7XG4gICAgcmV0dXJuICdNdWx0aXBhcnRCb2R5JztcbiAgfVxufVxuIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuaW1wb3J0IHsgTXVsdGlwYXJ0Qm9keSB9IGZyb20gXCIuL011bHRpcGFydEJvZHkuanNcIjtcbmltcG9ydCB7IHR5cGUgUmVxdWVzdE9wdGlvbnMgfSBmcm9tIFwiLi4vY29yZS5qc1wiO1xuaW1wb3J0IHsgdHlwZSBTaGltcyB9IGZyb20gXCIuL3JlZ2lzdHJ5LmpzXCI7XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRSdW50aW1lKHsgbWFudWFsbHlJbXBvcnRlZCB9OiB7IG1hbnVhbGx5SW1wb3J0ZWQ/OiBib29sZWFuIH0gPSB7fSk6IFNoaW1zIHtcbiAgY29uc3QgcmVjb21tZW5kYXRpb24gPVxuICAgIG1hbnVhbGx5SW1wb3J0ZWQgP1xuICAgICAgYFlvdSBtYXkgbmVlZCB0byB1c2UgcG9seWZpbGxzYFxuICAgIDogYEFkZCBvbmUgb2YgdGhlc2UgaW1wb3J0cyBiZWZvcmUgeW91ciBmaXJzdCBcXGBpbXBvcnQgXHUyMDI2IGZyb20gJ0BhbnRocm9waWMtYWkvc2RrJ1xcYDpcbi0gXFxgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy9ub2RlJ1xcYCAoaWYgeW91J3JlIHJ1bm5pbmcgb24gTm9kZSlcbi0gXFxgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy93ZWInXFxgIChvdGhlcndpc2UpXG5gO1xuXG4gIGxldCBfZmV0Y2gsIF9SZXF1ZXN0LCBfUmVzcG9uc2UsIF9IZWFkZXJzO1xuICB0cnkge1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBfZmV0Y2ggPSBmZXRjaDtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgX1JlcXVlc3QgPSBSZXF1ZXN0O1xuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBfUmVzcG9uc2UgPSBSZXNwb25zZTtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgX0hlYWRlcnMgPSBIZWFkZXJzO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGB0aGlzIGVudmlyb25tZW50IGlzIG1pc3NpbmcgdGhlIGZvbGxvd2luZyBXZWIgRmV0Y2ggQVBJIHR5cGU6ICR7XG4gICAgICAgIChlcnJvciBhcyBhbnkpLm1lc3NhZ2VcbiAgICAgIH0uICR7cmVjb21tZW5kYXRpb259YCxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBraW5kOiAnd2ViJyxcbiAgICBmZXRjaDogX2ZldGNoLFxuICAgIFJlcXVlc3Q6IF9SZXF1ZXN0LFxuICAgIFJlc3BvbnNlOiBfUmVzcG9uc2UsXG4gICAgSGVhZGVyczogX0hlYWRlcnMsXG4gICAgRm9ybURhdGE6XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICB0eXBlb2YgRm9ybURhdGEgIT09ICd1bmRlZmluZWQnID8gRm9ybURhdGEgOiAoXG4gICAgICAgIGNsYXNzIEZvcm1EYXRhIHtcbiAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIGBmaWxlIHVwbG9hZHMgYXJlbid0IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50IHlldCBhcyAnRm9ybURhdGEnIGlzIHVuZGVmaW5lZC4gJHtyZWNvbW1lbmRhdGlvbn1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgQmxvYjpcbiAgICAgIHR5cGVvZiBCbG9iICE9PSAndW5kZWZpbmVkJyA/IEJsb2IgOiAoXG4gICAgICAgIGNsYXNzIEJsb2Ige1xuICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgZmlsZSB1cGxvYWRzIGFyZW4ndCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCB5ZXQgYXMgJ0Jsb2InIGlzIHVuZGVmaW5lZC4gJHtyZWNvbW1lbmRhdGlvbn1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgRmlsZTpcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHR5cGVvZiBGaWxlICE9PSAndW5kZWZpbmVkJyA/IEZpbGUgOiAoXG4gICAgICAgIGNsYXNzIEZpbGUge1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYGZpbGUgdXBsb2FkcyBhcmVuJ3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQgeWV0IGFzICdGaWxlJyBpcyB1bmRlZmluZWQuICR7cmVjb21tZW5kYXRpb259YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApLFxuICAgIFJlYWRhYmxlU3RyZWFtOlxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgdHlwZW9mIFJlYWRhYmxlU3RyZWFtICE9PSAndW5kZWZpbmVkJyA/IFJlYWRhYmxlU3RyZWFtIDogKFxuICAgICAgICBjbGFzcyBSZWFkYWJsZVN0cmVhbSB7XG4gICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgc3RyZWFtaW5nIGlzbid0IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50IHlldCBhcyAnUmVhZGFibGVTdHJlYW0nIGlzIHVuZGVmaW5lZC4gJHtyZWNvbW1lbmRhdGlvbn1gLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICksXG4gICAgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnM6IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgZm9ybTogRm9ybURhdGEsXG4gICAgICBvcHRzOiBSZXF1ZXN0T3B0aW9uczxUPixcbiAgICApOiBQcm9taXNlPFJlcXVlc3RPcHRpb25zPFQ+PiA9PiAoe1xuICAgICAgLi4ub3B0cyxcbiAgICAgIGJvZHk6IG5ldyBNdWx0aXBhcnRCb2R5KGZvcm0pIGFzIGFueSxcbiAgICB9KSxcbiAgICBnZXREZWZhdWx0QWdlbnQ6ICh1cmw6IHN0cmluZykgPT4gdW5kZWZpbmVkLFxuICAgIGZpbGVGcm9tUGF0aDogKCkgPT4ge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAnVGhlIGBmaWxlRnJvbVBhdGhgIGZ1bmN0aW9uIGlzIG9ubHkgc3VwcG9ydGVkIGluIE5vZGUuIFNlZSB0aGUgUkVBRE1FIGZvciBtb3JlIGRldGFpbHM6IGh0dHBzOi8vd3d3LmdpdGh1Yi5jb20vYW50aHJvcGljcy9hbnRocm9waWMtc2RrLXR5cGVzY3JpcHQjZmlsZS11cGxvYWRzJyxcbiAgICAgICk7XG4gICAgfSxcbiAgICBpc0ZzUmVhZFN0cmVhbTogKHZhbHVlOiBhbnkpID0+IGZhbHNlLFxuICB9O1xufVxuIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuaW1wb3J0ICogYXMgc2hpbXMgZnJvbSAnLi9yZWdpc3RyeS5tanMnO1xuaW1wb3J0ICogYXMgYXV0byBmcm9tICdAYW50aHJvcGljLWFpL3Nkay9fc2hpbXMvYXV0by9ydW50aW1lJztcbmlmICghc2hpbXMua2luZCkgc2hpbXMuc2V0U2hpbXMoYXV0by5nZXRSdW50aW1lKCksIHsgYXV0bzogdHJ1ZSB9KTtcbmV4cG9ydCAqIGZyb20gJy4vcmVnaXN0cnkubWpzJztcbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBjYXN0VG9FcnJvciwgSGVhZGVycyB9IGZyb20gXCIuL2NvcmUuanNcIjtcblxuZXhwb3J0IGNsYXNzIEFudGhyb3BpY0Vycm9yIGV4dGVuZHMgRXJyb3Ige31cblxuZXhwb3J0IGNsYXNzIEFQSUVycm9yPFxuICBUU3RhdHVzIGV4dGVuZHMgbnVtYmVyIHwgdW5kZWZpbmVkID0gbnVtYmVyIHwgdW5kZWZpbmVkLFxuICBUSGVhZGVycyBleHRlbmRzIEhlYWRlcnMgfCB1bmRlZmluZWQgPSBIZWFkZXJzIHwgdW5kZWZpbmVkLFxuICBURXJyb3IgZXh0ZW5kcyBPYmplY3QgfCB1bmRlZmluZWQgPSBPYmplY3QgfCB1bmRlZmluZWQsXG4+IGV4dGVuZHMgQW50aHJvcGljRXJyb3Ige1xuICAvKiogSFRUUCBzdGF0dXMgZm9yIHRoZSByZXNwb25zZSB0aGF0IGNhdXNlZCB0aGUgZXJyb3IgKi9cbiAgcmVhZG9ubHkgc3RhdHVzOiBUU3RhdHVzO1xuICAvKiogSFRUUCBoZWFkZXJzIGZvciB0aGUgcmVzcG9uc2UgdGhhdCBjYXVzZWQgdGhlIGVycm9yICovXG4gIHJlYWRvbmx5IGhlYWRlcnM6IFRIZWFkZXJzO1xuICAvKiogSlNPTiBib2R5IG9mIHRoZSByZXNwb25zZSB0aGF0IGNhdXNlZCB0aGUgZXJyb3IgKi9cbiAgcmVhZG9ubHkgZXJyb3I6IFRFcnJvcjtcblxuICByZWFkb25seSByZXF1ZXN0X2lkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKHN0YXR1czogVFN0YXR1cywgZXJyb3I6IFRFcnJvciwgbWVzc2FnZTogc3RyaW5nIHwgdW5kZWZpbmVkLCBoZWFkZXJzOiBUSGVhZGVycykge1xuICAgIHN1cGVyKGAke0FQSUVycm9yLm1ha2VNZXNzYWdlKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UpfWApO1xuICAgIHRoaXMuc3RhdHVzID0gc3RhdHVzO1xuICAgIHRoaXMuaGVhZGVycyA9IGhlYWRlcnM7XG4gICAgdGhpcy5yZXF1ZXN0X2lkID0gaGVhZGVycz8uWydyZXF1ZXN0LWlkJ107XG4gICAgdGhpcy5lcnJvciA9IGVycm9yO1xuICB9XG5cbiAgcHJpdmF0ZSBzdGF0aWMgbWFrZU1lc3NhZ2Uoc3RhdHVzOiBudW1iZXIgfCB1bmRlZmluZWQsIGVycm9yOiBhbnksIG1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCkge1xuICAgIGNvbnN0IG1zZyA9XG4gICAgICBlcnJvcj8ubWVzc2FnZSA/XG4gICAgICAgIHR5cGVvZiBlcnJvci5tZXNzYWdlID09PSAnc3RyaW5nJyA/XG4gICAgICAgICAgZXJyb3IubWVzc2FnZVxuICAgICAgICA6IEpTT04uc3RyaW5naWZ5KGVycm9yLm1lc3NhZ2UpXG4gICAgICA6IGVycm9yID8gSlNPTi5zdHJpbmdpZnkoZXJyb3IpXG4gICAgICA6IG1lc3NhZ2U7XG5cbiAgICBpZiAoc3RhdHVzICYmIG1zZykge1xuICAgICAgcmV0dXJuIGAke3N0YXR1c30gJHttc2d9YDtcbiAgICB9XG4gICAgaWYgKHN0YXR1cykge1xuICAgICAgcmV0dXJuIGAke3N0YXR1c30gc3RhdHVzIGNvZGUgKG5vIGJvZHkpYDtcbiAgICB9XG4gICAgaWYgKG1zZykge1xuICAgICAgcmV0dXJuIG1zZztcbiAgICB9XG4gICAgcmV0dXJuICcobm8gc3RhdHVzIGNvZGUgb3IgYm9keSknO1xuICB9XG5cbiAgc3RhdGljIGdlbmVyYXRlKFxuICAgIHN0YXR1czogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICAgIGVycm9yUmVzcG9uc2U6IE9iamVjdCB8IHVuZGVmaW5lZCxcbiAgICBtZXNzYWdlOiBzdHJpbmcgfCB1bmRlZmluZWQsXG4gICAgaGVhZGVyczogSGVhZGVycyB8IHVuZGVmaW5lZCxcbiAgKTogQVBJRXJyb3Ige1xuICAgIGlmICghc3RhdHVzIHx8ICFoZWFkZXJzKSB7XG4gICAgICByZXR1cm4gbmV3IEFQSUNvbm5lY3Rpb25FcnJvcih7IG1lc3NhZ2UsIGNhdXNlOiBjYXN0VG9FcnJvcihlcnJvclJlc3BvbnNlKSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCBlcnJvciA9IGVycm9yUmVzcG9uc2UgYXMgUmVjb3JkPHN0cmluZywgYW55PjtcblxuICAgIGlmIChzdGF0dXMgPT09IDQwMCkge1xuICAgICAgcmV0dXJuIG5ldyBCYWRSZXF1ZXN0RXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDAxKSB7XG4gICAgICByZXR1cm4gbmV3IEF1dGhlbnRpY2F0aW9uRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDAzKSB7XG4gICAgICByZXR1cm4gbmV3IFBlcm1pc3Npb25EZW5pZWRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDQpIHtcbiAgICAgIHJldHVybiBuZXcgTm90Rm91bmRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDkpIHtcbiAgICAgIHJldHVybiBuZXcgQ29uZmxpY3RFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MjIpIHtcbiAgICAgIHJldHVybiBuZXcgVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQyOSkge1xuICAgICAgcmV0dXJuIG5ldyBSYXRlTGltaXRFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID49IDUwMCkge1xuICAgICAgcmV0dXJuIG5ldyBJbnRlcm5hbFNlcnZlckVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgQVBJRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFQSVVzZXJBYm9ydEVycm9yIGV4dGVuZHMgQVBJRXJyb3I8dW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZD4ge1xuICBjb25zdHJ1Y3Rvcih7IG1lc3NhZ2UgfTogeyBtZXNzYWdlPzogc3RyaW5nIH0gPSB7fSkge1xuICAgIHN1cGVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBtZXNzYWdlIHx8ICdSZXF1ZXN0IHdhcyBhYm9ydGVkLicsIHVuZGVmaW5lZCk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEFQSUNvbm5lY3Rpb25FcnJvciBleHRlbmRzIEFQSUVycm9yPHVuZGVmaW5lZCwgdW5kZWZpbmVkLCB1bmRlZmluZWQ+IHtcbiAgY29uc3RydWN0b3IoeyBtZXNzYWdlLCBjYXVzZSB9OiB7IG1lc3NhZ2U/OiBzdHJpbmcgfCB1bmRlZmluZWQ7IGNhdXNlPzogRXJyb3IgfCB1bmRlZmluZWQgfSkge1xuICAgIHN1cGVyKHVuZGVmaW5lZCwgdW5kZWZpbmVkLCBtZXNzYWdlIHx8ICdDb25uZWN0aW9uIGVycm9yLicsIHVuZGVmaW5lZCk7XG4gICAgLy8gaW4gc29tZSBlbnZpcm9ubWVudHMgdGhlICdjYXVzZScgcHJvcGVydHkgaXMgYWxyZWFkeSBkZWNsYXJlZFxuICAgIC8vIEB0cy1pZ25vcmVcbiAgICBpZiAoY2F1c2UpIHRoaXMuY2F1c2UgPSBjYXVzZTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvciBleHRlbmRzIEFQSUNvbm5lY3Rpb25FcnJvciB7XG4gIGNvbnN0cnVjdG9yKHsgbWVzc2FnZSB9OiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSA9IHt9KSB7XG4gICAgc3VwZXIoeyBtZXNzYWdlOiBtZXNzYWdlID8/ICdSZXF1ZXN0IHRpbWVkIG91dC4nIH0pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCYWRSZXF1ZXN0RXJyb3IgZXh0ZW5kcyBBUElFcnJvcjw0MDAsIEhlYWRlcnM+IHt9XG5cbmV4cG9ydCBjbGFzcyBBdXRoZW50aWNhdGlvbkVycm9yIGV4dGVuZHMgQVBJRXJyb3I8NDAxLCBIZWFkZXJzPiB7fVxuXG5leHBvcnQgY2xhc3MgUGVybWlzc2lvbkRlbmllZEVycm9yIGV4dGVuZHMgQVBJRXJyb3I8NDAzLCBIZWFkZXJzPiB7fVxuXG5leHBvcnQgY2xhc3MgTm90Rm91bmRFcnJvciBleHRlbmRzIEFQSUVycm9yPDQwNCwgSGVhZGVycz4ge31cblxuZXhwb3J0IGNsYXNzIENvbmZsaWN0RXJyb3IgZXh0ZW5kcyBBUElFcnJvcjw0MDksIEhlYWRlcnM+IHt9XG5cbmV4cG9ydCBjbGFzcyBVbnByb2Nlc3NhYmxlRW50aXR5RXJyb3IgZXh0ZW5kcyBBUElFcnJvcjw0MjIsIEhlYWRlcnM+IHt9XG5cbmV4cG9ydCBjbGFzcyBSYXRlTGltaXRFcnJvciBleHRlbmRzIEFQSUVycm9yPDQyOSwgSGVhZGVycz4ge31cblxuZXhwb3J0IGNsYXNzIEludGVybmFsU2VydmVyRXJyb3IgZXh0ZW5kcyBBUElFcnJvcjxudW1iZXIsIEhlYWRlcnM+IHt9XG4iLCAiaW1wb3J0IHsgQW50aHJvcGljRXJyb3IgfSBmcm9tIFwiLi4vLi4vZXJyb3IuanNcIjtcblxuZXhwb3J0IHR5cGUgQnl0ZXMgPSBzdHJpbmcgfCBBcnJheUJ1ZmZlciB8IFVpbnQ4QXJyYXkgfCBCdWZmZXIgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4vKipcbiAqIEEgcmUtaW1wbGVtZW50YXRpb24gb2YgaHR0cHgncyBgTGluZURlY29kZXJgIGluIFB5dGhvbiB0aGF0IGhhbmRsZXMgaW5jcmVtZW50YWxseVxuICogcmVhZGluZyBsaW5lcyBmcm9tIHRleHQuXG4gKlxuICogaHR0cHM6Ly9naXRodWIuY29tL2VuY29kZS9odHRweC9ibG9iLzkyMDMzM2VhOTgxMThlOWNmNjE3ZjI0NjkwNWQ3YjIwMjUxMDk0MWMvaHR0cHgvX2RlY29kZXJzLnB5I0wyNThcbiAqL1xuZXhwb3J0IGNsYXNzIExpbmVEZWNvZGVyIHtcbiAgLy8gcHJldHRpZXItaWdub3JlXG4gIHN0YXRpYyBORVdMSU5FX0NIQVJTID0gbmV3IFNldChbJ1xcbicsICdcXHInXSk7XG4gIHN0YXRpYyBORVdMSU5FX1JFR0VYUCA9IC9cXHJcXG58W1xcblxccl0vZztcblxuICBidWZmZXI6IHN0cmluZ1tdO1xuICB0cmFpbGluZ0NSOiBib29sZWFuO1xuICB0ZXh0RGVjb2RlcjogYW55OyAvLyBUZXh0RGVjb2RlciBmb3VuZCBpbiBicm93c2Vyczsgbm90IHR5cGVkIHRvIGF2b2lkIHB1bGxpbmcgaW4gZWl0aGVyIFwiZG9tXCIgb3IgXCJub2RlXCIgdHlwZXMuXG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB0aGlzLnRyYWlsaW5nQ1IgPSBmYWxzZTtcbiAgfVxuXG4gIGRlY29kZShjaHVuazogQnl0ZXMpOiBzdHJpbmdbXSB7XG4gICAgbGV0IHRleHQgPSB0aGlzLmRlY29kZVRleHQoY2h1bmspO1xuXG4gICAgaWYgKHRoaXMudHJhaWxpbmdDUikge1xuICAgICAgdGV4dCA9ICdcXHInICsgdGV4dDtcbiAgICAgIHRoaXMudHJhaWxpbmdDUiA9IGZhbHNlO1xuICAgIH1cbiAgICBpZiAodGV4dC5lbmRzV2l0aCgnXFxyJykpIHtcbiAgICAgIHRoaXMudHJhaWxpbmdDUiA9IHRydWU7XG4gICAgICB0ZXh0ID0gdGV4dC5zbGljZSgwLCAtMSk7XG4gICAgfVxuXG4gICAgaWYgKCF0ZXh0KSB7XG4gICAgICByZXR1cm4gW107XG4gICAgfVxuXG4gICAgY29uc3QgdHJhaWxpbmdOZXdsaW5lID0gTGluZURlY29kZXIuTkVXTElORV9DSEFSUy5oYXModGV4dFt0ZXh0Lmxlbmd0aCAtIDFdIHx8ICcnKTtcbiAgICBsZXQgbGluZXMgPSB0ZXh0LnNwbGl0KExpbmVEZWNvZGVyLk5FV0xJTkVfUkVHRVhQKTtcblxuICAgIC8vIGlmIHRoZXJlIGlzIGEgdHJhaWxpbmcgbmV3IGxpbmUgdGhlbiB0aGUgbGFzdCBlbnRyeSB3aWxsIGJlIGFuIGVtcHR5XG4gICAgLy8gc3RyaW5nIHdoaWNoIHdlIGRvbid0IGNhcmUgYWJvdXRcbiAgICBpZiAodHJhaWxpbmdOZXdsaW5lKSB7XG4gICAgICBsaW5lcy5wb3AoKTtcbiAgICB9XG5cbiAgICBpZiAobGluZXMubGVuZ3RoID09PSAxICYmICF0cmFpbGluZ05ld2xpbmUpIHtcbiAgICAgIHRoaXMuYnVmZmVyLnB1c2gobGluZXNbMF0hKTtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5idWZmZXIubGVuZ3RoID4gMCkge1xuICAgICAgbGluZXMgPSBbdGhpcy5idWZmZXIuam9pbignJykgKyBsaW5lc1swXSwgLi4ubGluZXMuc2xpY2UoMSldO1xuICAgICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB9XG5cbiAgICBpZiAoIXRyYWlsaW5nTmV3bGluZSkge1xuICAgICAgdGhpcy5idWZmZXIgPSBbbGluZXMucG9wKCkgfHwgJyddO1xuICAgIH1cblxuICAgIHJldHVybiBsaW5lcztcbiAgfVxuXG4gIGRlY29kZVRleHQoYnl0ZXM6IEJ5dGVzKTogc3RyaW5nIHtcbiAgICBpZiAoYnl0ZXMgPT0gbnVsbCkgcmV0dXJuICcnO1xuICAgIGlmICh0eXBlb2YgYnl0ZXMgPT09ICdzdHJpbmcnKSByZXR1cm4gYnl0ZXM7XG5cbiAgICAvLyBOb2RlOlxuICAgIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGJ5dGVzIGluc3RhbmNlb2YgQnVmZmVyKSB7XG4gICAgICAgIHJldHVybiBieXRlcy50b1N0cmluZygpO1xuICAgICAgfVxuICAgICAgaWYgKGJ5dGVzIGluc3RhbmNlb2YgVWludDhBcnJheSkge1xuICAgICAgICByZXR1cm4gQnVmZmVyLmZyb20oYnl0ZXMpLnRvU3RyaW5nKCk7XG4gICAgICB9XG5cbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihcbiAgICAgICAgYFVuZXhwZWN0ZWQ6IHJlY2VpdmVkIG5vbi1VaW50OEFycmF5ICgke2J5dGVzLmNvbnN0cnVjdG9yLm5hbWV9KSBzdHJlYW0gY2h1bmsgaW4gYW4gZW52aXJvbm1lbnQgd2l0aCBhIGdsb2JhbCBcIkJ1ZmZlclwiIGRlZmluZWQsIHdoaWNoIHRoaXMgbGlicmFyeSBhc3N1bWVzIHRvIGJlIE5vZGUuIFBsZWFzZSByZXBvcnQgdGhpcyBlcnJvci5gLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBCcm93c2VyXG4gICAgaWYgKHR5cGVvZiBUZXh0RGVjb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGlmIChieXRlcyBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkgfHwgYnl0ZXMgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikge1xuICAgICAgICB0aGlzLnRleHREZWNvZGVyID8/PSBuZXcgVGV4dERlY29kZXIoJ3V0ZjgnKTtcbiAgICAgICAgcmV0dXJuIHRoaXMudGV4dERlY29kZXIuZGVjb2RlKGJ5dGVzKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICBgVW5leHBlY3RlZDogcmVjZWl2ZWQgbm9uLVVpbnQ4QXJyYXkvQXJyYXlCdWZmZXIgKCR7XG4gICAgICAgICAgKGJ5dGVzIGFzIGFueSkuY29uc3RydWN0b3IubmFtZVxuICAgICAgICB9KSBpbiBhIHdlYiBwbGF0Zm9ybS4gUGxlYXNlIHJlcG9ydCB0aGlzIGVycm9yLmAsXG4gICAgICApO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihcbiAgICAgIGBVbmV4cGVjdGVkOiBuZWl0aGVyIEJ1ZmZlciBub3IgVGV4dERlY29kZXIgYXJlIGF2YWlsYWJsZSBhcyBnbG9iYWxzLiBQbGVhc2UgcmVwb3J0IHRoaXMgZXJyb3IuYCxcbiAgICApO1xuICB9XG5cbiAgZmx1c2goKTogc3RyaW5nW10ge1xuICAgIGlmICghdGhpcy5idWZmZXIubGVuZ3RoICYmICF0aGlzLnRyYWlsaW5nQ1IpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCBsaW5lcyA9IFt0aGlzLmJ1ZmZlci5qb2luKCcnKV07XG4gICAgdGhpcy5idWZmZXIgPSBbXTtcbiAgICB0aGlzLnRyYWlsaW5nQ1IgPSBmYWxzZTtcbiAgICByZXR1cm4gbGluZXM7XG4gIH1cbn1cbiIsICIvKipcbiAqIE1vc3QgYnJvd3NlcnMgZG9uJ3QgeWV0IGhhdmUgYXN5bmMgaXRlcmFibGUgc3VwcG9ydCBmb3IgUmVhZGFibGVTdHJlYW0sXG4gKiBhbmQgTm9kZSBoYXMgYSB2ZXJ5IGRpZmZlcmVudCB3YXkgb2YgcmVhZGluZyBieXRlcyBmcm9tIGl0cyBcIlJlYWRhYmxlU3RyZWFtXCIuXG4gKlxuICogVGhpcyBwb2x5ZmlsbCB3YXMgcHVsbGVkIGZyb20gaHR0cHM6Ly9naXRodWIuY29tL01hdHRpYXNCdWVsZW5zL3dlYi1zdHJlYW1zLXBvbHlmaWxsL3B1bGwvMTIyI2lzc3VlY29tbWVudC0xNjI3MzU0NDkwXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBSZWFkYWJsZVN0cmVhbVRvQXN5bmNJdGVyYWJsZTxUPihzdHJlYW06IGFueSk6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxUPiB7XG4gIGlmIChzdHJlYW1bU3ltYm9sLmFzeW5jSXRlcmF0b3JdKSByZXR1cm4gc3RyZWFtO1xuXG4gIGNvbnN0IHJlYWRlciA9IHN0cmVhbS5nZXRSZWFkZXIoKTtcbiAgcmV0dXJuIHtcbiAgICBhc3luYyBuZXh0KCkge1xuICAgICAgdHJ5IHtcbiAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcmVhZGVyLnJlYWQoKTtcbiAgICAgICAgaWYgKHJlc3VsdD8uZG9uZSkgcmVhZGVyLnJlbGVhc2VMb2NrKCk7IC8vIHJlbGVhc2UgbG9jayB3aGVuIHN0cmVhbSBiZWNvbWVzIGNsb3NlZFxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICByZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIHdoZW4gc3RyZWFtIGJlY29tZXMgZXJyb3JlZFxuICAgICAgICB0aHJvdyBlO1xuICAgICAgfVxuICAgIH0sXG4gICAgYXN5bmMgcmV0dXJuKCkge1xuICAgICAgY29uc3QgY2FuY2VsUHJvbWlzZSA9IHJlYWRlci5jYW5jZWwoKTtcbiAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpO1xuICAgICAgYXdhaXQgY2FuY2VsUHJvbWlzZTtcbiAgICAgIHJldHVybiB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcbiAgICB9LFxuICAgIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKSB7XG4gICAgICByZXR1cm4gdGhpcztcbiAgICB9LFxuICB9O1xufVxuIiwgImltcG9ydCB7IFJlYWRhYmxlU3RyZWFtLCB0eXBlIFJlc3BvbnNlIH0gZnJvbSBcIi4vX3NoaW1zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBBbnRocm9waWNFcnJvciB9IGZyb20gXCIuL2Vycm9yLmpzXCI7XG5pbXBvcnQgeyBMaW5lRGVjb2RlciB9IGZyb20gXCIuL2ludGVybmFsL2RlY29kZXJzL2xpbmUuanNcIjtcbmltcG9ydCB7IFJlYWRhYmxlU3RyZWFtVG9Bc3luY0l0ZXJhYmxlIH0gZnJvbSBcIi4vaW50ZXJuYWwvc3RyZWFtLXV0aWxzLmpzXCI7XG5cbmltcG9ydCB7IGNyZWF0ZVJlc3BvbnNlSGVhZGVycyB9IGZyb20gXCIuL2NvcmUuanNcIjtcbmltcG9ydCB7IEFQSUVycm9yIH0gZnJvbSBcIi4vZXJyb3IuanNcIjtcblxudHlwZSBCeXRlcyA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgVWludDhBcnJheSB8IEJ1ZmZlciB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbmV4cG9ydCB0eXBlIFNlcnZlclNlbnRFdmVudCA9IHtcbiAgZXZlbnQ6IHN0cmluZyB8IG51bGw7XG4gIGRhdGE6IHN0cmluZztcbiAgcmF3OiBzdHJpbmdbXTtcbn07XG5cbmV4cG9ydCBjbGFzcyBTdHJlYW08SXRlbT4gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPEl0ZW0+IHtcbiAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgaXRlcmF0b3I6ICgpID0+IEFzeW5jSXRlcmF0b3I8SXRlbT4sXG4gICAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyLFxuICApIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIgPSBjb250cm9sbGVyO1xuICB9XG5cbiAgc3RhdGljIGZyb21TU0VSZXNwb25zZTxJdGVtPihyZXNwb25zZTogUmVzcG9uc2UsIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcik6IFN0cmVhbTxJdGVtPiB7XG4gICAgbGV0IGNvbnN1bWVkID0gZmFsc2U7XG5cbiAgICBhc3luYyBmdW5jdGlvbiogaXRlcmF0b3IoKTogQXN5bmNJdGVyYXRvcjxJdGVtLCBhbnksIHVuZGVmaW5lZD4ge1xuICAgICAgaWYgKGNvbnN1bWVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGl0ZXJhdGUgb3ZlciBhIGNvbnN1bWVkIHN0cmVhbSwgdXNlIGAudGVlKClgIHRvIHNwbGl0IHRoZSBzdHJlYW0uJyk7XG4gICAgICB9XG4gICAgICBjb25zdW1lZCA9IHRydWU7XG4gICAgICBsZXQgZG9uZSA9IGZhbHNlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBzc2Ugb2YgX2l0ZXJTU0VNZXNzYWdlcyhyZXNwb25zZSwgY29udHJvbGxlcikpIHtcbiAgICAgICAgICBpZiAoc3NlLmV2ZW50ID09PSAnY29tcGxldGlvbicpIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHlpZWxkIEpTT04ucGFyc2Uoc3NlLmRhdGEpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDb3VsZCBub3QgcGFyc2UgbWVzc2FnZSBpbnRvIEpTT046YCwgc3NlLmRhdGEpO1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGcm9tIGNodW5rOmAsIHNzZS5yYXcpO1xuICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChcbiAgICAgICAgICAgIHNzZS5ldmVudCA9PT0gJ21lc3NhZ2Vfc3RhcnQnIHx8XG4gICAgICAgICAgICBzc2UuZXZlbnQgPT09ICdtZXNzYWdlX2RlbHRhJyB8fFxuICAgICAgICAgICAgc3NlLmV2ZW50ID09PSAnbWVzc2FnZV9zdG9wJyB8fFxuICAgICAgICAgICAgc3NlLmV2ZW50ID09PSAnY29udGVudF9ibG9ja19zdGFydCcgfHxcbiAgICAgICAgICAgIHNzZS5ldmVudCA9PT0gJ2NvbnRlbnRfYmxvY2tfZGVsdGEnIHx8XG4gICAgICAgICAgICBzc2UuZXZlbnQgPT09ICdjb250ZW50X2Jsb2NrX3N0b3AnXG4gICAgICAgICAgKSB7XG4gICAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgICB5aWVsZCBKU09OLnBhcnNlKHNzZS5kYXRhKTtcbiAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgQ291bGQgbm90IHBhcnNlIG1lc3NhZ2UgaW50byBKU09OOmAsIHNzZS5kYXRhKTtcbiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgRnJvbSBjaHVuazpgLCBzc2UucmF3KTtcbiAgICAgICAgICAgICAgdGhyb3cgZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoc3NlLmV2ZW50ID09PSAncGluZycpIHtcbiAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzc2UuZXZlbnQgPT09ICdlcnJvcicpIHtcbiAgICAgICAgICAgIHRocm93IEFQSUVycm9yLmdlbmVyYXRlKFxuICAgICAgICAgICAgICB1bmRlZmluZWQsXG4gICAgICAgICAgICAgIGBTU0UgRXJyb3I6ICR7c3NlLmRhdGF9YCxcbiAgICAgICAgICAgICAgc3NlLmRhdGEsXG4gICAgICAgICAgICAgIGNyZWF0ZVJlc3BvbnNlSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKSxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZiB0aGUgdXNlciBjYWxscyBgc3RyZWFtLmNvbnRyb2xsZXIuYWJvcnQoKWAsIHdlIHNob3VsZCBleGl0IHdpdGhvdXQgdGhyb3dpbmcuXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5uYW1lID09PSAnQWJvcnRFcnJvcicpIHJldHVybjtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIElmIHRoZSB1c2VyIGBicmVha2BzLCBhYm9ydCB0aGUgb25nb2luZyByZXF1ZXN0LlxuICAgICAgICBpZiAoIWRvbmUpIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFN0cmVhbShpdGVyYXRvciwgY29udHJvbGxlcik7XG4gIH1cblxuICAvKipcbiAgICogR2VuZXJhdGVzIGEgU3RyZWFtIGZyb20gYSBuZXdsaW5lLXNlcGFyYXRlZCBSZWFkYWJsZVN0cmVhbVxuICAgKiB3aGVyZSBlYWNoIGl0ZW0gaXMgYSBKU09OIHZhbHVlLlxuICAgKi9cbiAgc3RhdGljIGZyb21SZWFkYWJsZVN0cmVhbTxJdGVtPihyZWFkYWJsZVN0cmVhbTogUmVhZGFibGVTdHJlYW0sIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcik6IFN0cmVhbTxJdGVtPiB7XG4gICAgbGV0IGNvbnN1bWVkID0gZmFsc2U7XG5cbiAgICBhc3luYyBmdW5jdGlvbiogaXRlckxpbmVzKCk6IEFzeW5jR2VuZXJhdG9yPHN0cmluZywgdm9pZCwgdW5rbm93bj4ge1xuICAgICAgY29uc3QgbGluZURlY29kZXIgPSBuZXcgTGluZURlY29kZXIoKTtcblxuICAgICAgY29uc3QgaXRlciA9IFJlYWRhYmxlU3RyZWFtVG9Bc3luY0l0ZXJhYmxlPEJ5dGVzPihyZWFkYWJsZVN0cmVhbSk7XG4gICAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGl0ZXIpIHtcbiAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVEZWNvZGVyLmRlY29kZShjaHVuaykpIHtcbiAgICAgICAgICB5aWVsZCBsaW5lO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lRGVjb2Rlci5mbHVzaCgpKSB7XG4gICAgICAgIHlpZWxkIGxpbmU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgYXN5bmMgZnVuY3Rpb24qIGl0ZXJhdG9yKCk6IEFzeW5jSXRlcmF0b3I8SXRlbSwgYW55LCB1bmRlZmluZWQ+IHtcbiAgICAgIGlmIChjb25zdW1lZCkge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0Nhbm5vdCBpdGVyYXRlIG92ZXIgYSBjb25zdW1lZCBzdHJlYW0sIHVzZSBgLnRlZSgpYCB0byBzcGxpdCB0aGUgc3RyZWFtLicpO1xuICAgICAgfVxuICAgICAgY29uc3VtZWQgPSB0cnVlO1xuICAgICAgbGV0IGRvbmUgPSBmYWxzZTtcbiAgICAgIHRyeSB7XG4gICAgICAgIGZvciBhd2FpdCAoY29uc3QgbGluZSBvZiBpdGVyTGluZXMoKSkge1xuICAgICAgICAgIGlmIChkb25lKSBjb250aW51ZTtcbiAgICAgICAgICBpZiAobGluZSkgeWllbGQgSlNPTi5wYXJzZShsaW5lKTtcbiAgICAgICAgfVxuICAgICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIH0gY2F0Y2ggKGUpIHtcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgY2FsbHMgYHN0cmVhbS5jb250cm9sbGVyLmFib3J0KClgLCB3ZSBzaG91bGQgZXhpdCB3aXRob3V0IHRocm93aW5nLlxuICAgICAgICBpZiAoZSBpbnN0YW5jZW9mIEVycm9yICYmIGUubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSByZXR1cm47XG4gICAgICAgIHRocm93IGU7XG4gICAgICB9IGZpbmFsbHkge1xuICAgICAgICAvLyBJZiB0aGUgdXNlciBgYnJlYWtgcywgYWJvcnQgdGhlIG9uZ29pbmcgcmVxdWVzdC5cbiAgICAgICAgaWYgKCFkb25lKSBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBTdHJlYW0oaXRlcmF0b3IsIGNvbnRyb2xsZXIpO1xuICB9XG5cbiAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0l0ZXJhdG9yPEl0ZW0+IHtcbiAgICByZXR1cm4gdGhpcy5pdGVyYXRvcigpO1xuICB9XG5cbiAgLyoqXG4gICAqIFNwbGl0cyB0aGUgc3RyZWFtIGludG8gdHdvIHN0cmVhbXMgd2hpY2ggY2FuIGJlXG4gICAqIGluZGVwZW5kZW50bHkgcmVhZCBmcm9tIGF0IGRpZmZlcmVudCBzcGVlZHMuXG4gICAqL1xuICB0ZWUoKTogW1N0cmVhbTxJdGVtPiwgU3RyZWFtPEl0ZW0+XSB7XG4gICAgY29uc3QgbGVmdDogQXJyYXk8UHJvbWlzZTxJdGVyYXRvclJlc3VsdDxJdGVtPj4+ID0gW107XG4gICAgY29uc3QgcmlnaHQ6IEFycmF5PFByb21pc2U8SXRlcmF0b3JSZXN1bHQ8SXRlbT4+PiA9IFtdO1xuICAgIGNvbnN0IGl0ZXJhdG9yID0gdGhpcy5pdGVyYXRvcigpO1xuXG4gICAgY29uc3QgdGVlSXRlcmF0b3IgPSAocXVldWU6IEFycmF5PFByb21pc2U8SXRlcmF0b3JSZXN1bHQ8SXRlbT4+Pik6IEFzeW5jSXRlcmF0b3I8SXRlbT4gPT4ge1xuICAgICAgcmV0dXJuIHtcbiAgICAgICAgbmV4dDogKCkgPT4ge1xuICAgICAgICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGl0ZXJhdG9yLm5leHQoKTtcbiAgICAgICAgICAgIGxlZnQucHVzaChyZXN1bHQpO1xuICAgICAgICAgICAgcmlnaHQucHVzaChyZXN1bHQpO1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gcXVldWUuc2hpZnQoKSE7XG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH07XG5cbiAgICByZXR1cm4gW1xuICAgICAgbmV3IFN0cmVhbSgoKSA9PiB0ZWVJdGVyYXRvcihsZWZ0KSwgdGhpcy5jb250cm9sbGVyKSxcbiAgICAgIG5ldyBTdHJlYW0oKCkgPT4gdGVlSXRlcmF0b3IocmlnaHQpLCB0aGlzLmNvbnRyb2xsZXIpLFxuICAgIF07XG4gIH1cblxuICAvKipcbiAgICogQ29udmVydHMgdGhpcyBzdHJlYW0gdG8gYSBuZXdsaW5lLXNlcGFyYXRlZCBSZWFkYWJsZVN0cmVhbSBvZlxuICAgKiBKU09OIHN0cmluZ2lmaWVkIHZhbHVlcyBpbiB0aGUgc3RyZWFtXG4gICAqIHdoaWNoIGNhbiBiZSB0dXJuZWQgYmFjayBpbnRvIGEgU3RyZWFtIHdpdGggYFN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW0oKWAuXG4gICAqL1xuICB0b1JlYWRhYmxlU3RyZWFtKCk6IFJlYWRhYmxlU3RyZWFtIHtcbiAgICBjb25zdCBzZWxmID0gdGhpcztcbiAgICBsZXQgaXRlcjogQXN5bmNJdGVyYXRvcjxJdGVtPjtcbiAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG5cbiAgICByZXR1cm4gbmV3IFJlYWRhYmxlU3RyZWFtKHtcbiAgICAgIGFzeW5jIHN0YXJ0KCkge1xuICAgICAgICBpdGVyID0gc2VsZltTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTtcbiAgICAgIH0sXG4gICAgICBhc3luYyBwdWxsKGN0cmw6IGFueSkge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHsgdmFsdWUsIGRvbmUgfSA9IGF3YWl0IGl0ZXIubmV4dCgpO1xuICAgICAgICAgIGlmIChkb25lKSByZXR1cm4gY3RybC5jbG9zZSgpO1xuXG4gICAgICAgICAgY29uc3QgYnl0ZXMgPSBlbmNvZGVyLmVuY29kZShKU09OLnN0cmluZ2lmeSh2YWx1ZSkgKyAnXFxuJyk7XG5cbiAgICAgICAgICBjdHJsLmVucXVldWUoYnl0ZXMpO1xuICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICBjdHJsLmVycm9yKGVycik7XG4gICAgICAgIH1cbiAgICAgIH0sXG4gICAgICBhc3luYyBjYW5jZWwoKSB7XG4gICAgICAgIGF3YWl0IGl0ZXIucmV0dXJuPy4oKTtcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uKiBfaXRlclNTRU1lc3NhZ2VzKFxuICByZXNwb25zZTogUmVzcG9uc2UsXG4gIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcixcbik6IEFzeW5jR2VuZXJhdG9yPFNlcnZlclNlbnRFdmVudCwgdm9pZCwgdW5rbm93bj4ge1xuICBpZiAoIXJlc3BvbnNlLmJvZHkpIHtcbiAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBBdHRlbXB0ZWQgdG8gaXRlcmF0ZSBvdmVyIGEgcmVzcG9uc2Ugd2l0aCBubyBib2R5YCk7XG4gIH1cblxuICBjb25zdCBzc2VEZWNvZGVyID0gbmV3IFNTRURlY29kZXIoKTtcbiAgY29uc3QgbGluZURlY29kZXIgPSBuZXcgTGluZURlY29kZXIoKTtcblxuICBjb25zdCBpdGVyID0gUmVhZGFibGVTdHJlYW1Ub0FzeW5jSXRlcmFibGU8Qnl0ZXM+KHJlc3BvbnNlLmJvZHkpO1xuICBmb3IgYXdhaXQgKGNvbnN0IHNzZUNodW5rIG9mIGl0ZXJTU0VDaHVua3MoaXRlcikpIHtcbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZURlY29kZXIuZGVjb2RlKHNzZUNodW5rKSkge1xuICAgICAgY29uc3Qgc3NlID0gc3NlRGVjb2Rlci5kZWNvZGUobGluZSk7XG4gICAgICBpZiAoc3NlKSB5aWVsZCBzc2U7XG4gICAgfVxuICB9XG5cbiAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVEZWNvZGVyLmZsdXNoKCkpIHtcbiAgICBjb25zdCBzc2UgPSBzc2VEZWNvZGVyLmRlY29kZShsaW5lKTtcbiAgICBpZiAoc3NlKSB5aWVsZCBzc2U7XG4gIH1cbn1cblxuLyoqXG4gKiBHaXZlbiBhbiBhc3luYyBpdGVyYWJsZSBpdGVyYXRvciwgaXRlcmF0ZXMgb3ZlciBpdCBhbmQgeWllbGRzIGZ1bGxcbiAqIFNTRSBjaHVua3MsIGkuZS4geWllbGRzIHdoZW4gYSBkb3VibGUgbmV3LWxpbmUgaXMgZW5jb3VudGVyZWQuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uKiBpdGVyU1NFQ2h1bmtzKGl0ZXJhdG9yOiBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8Qnl0ZXM+KTogQXN5bmNHZW5lcmF0b3I8VWludDhBcnJheT4ge1xuICBsZXQgZGF0YSA9IG5ldyBVaW50OEFycmF5KCk7XG5cbiAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBpdGVyYXRvcikge1xuICAgIGlmIChjaHVuayA9PSBudWxsKSB7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICBjb25zdCBiaW5hcnlDaHVuayA9XG4gICAgICBjaHVuayBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gbmV3IFVpbnQ4QXJyYXkoY2h1bmspXG4gICAgICA6IHR5cGVvZiBjaHVuayA9PT0gJ3N0cmluZycgPyBuZXcgVGV4dEVuY29kZXIoKS5lbmNvZGUoY2h1bmspXG4gICAgICA6IGNodW5rO1xuXG4gICAgbGV0IG5ld0RhdGEgPSBuZXcgVWludDhBcnJheShkYXRhLmxlbmd0aCArIGJpbmFyeUNodW5rLmxlbmd0aCk7XG4gICAgbmV3RGF0YS5zZXQoZGF0YSk7XG4gICAgbmV3RGF0YS5zZXQoYmluYXJ5Q2h1bmssIGRhdGEubGVuZ3RoKTtcbiAgICBkYXRhID0gbmV3RGF0YTtcblxuICAgIGxldCBwYXR0ZXJuSW5kZXg7XG4gICAgd2hpbGUgKChwYXR0ZXJuSW5kZXggPSBmaW5kRG91YmxlTmV3bGluZUluZGV4KGRhdGEpKSAhPT0gLTEpIHtcbiAgICAgIHlpZWxkIGRhdGEuc2xpY2UoMCwgcGF0dGVybkluZGV4KTtcbiAgICAgIGRhdGEgPSBkYXRhLnNsaWNlKHBhdHRlcm5JbmRleCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKGRhdGEubGVuZ3RoID4gMCkge1xuICAgIHlpZWxkIGRhdGE7XG4gIH1cbn1cblxuZnVuY3Rpb24gZmluZERvdWJsZU5ld2xpbmVJbmRleChidWZmZXI6IFVpbnQ4QXJyYXkpOiBudW1iZXIge1xuICAvLyBUaGlzIGZ1bmN0aW9uIHNlYXJjaGVzIHRoZSBidWZmZXIgZm9yIHRoZSBlbmQgcGF0dGVybnMgKFxcclxcciwgXFxuXFxuLCBcXHJcXG5cXHJcXG4pXG4gIC8vIGFuZCByZXR1cm5zIHRoZSBpbmRleCByaWdodCBhZnRlciB0aGUgZmlyc3Qgb2NjdXJyZW5jZSBvZiBhbnkgcGF0dGVybixcbiAgLy8gb3IgLTEgaWYgbm9uZSBvZiB0aGUgcGF0dGVybnMgYXJlIGZvdW5kLlxuICBjb25zdCBuZXdsaW5lID0gMHgwYTsgLy8gXFxuXG4gIGNvbnN0IGNhcnJpYWdlID0gMHgwZDsgLy8gXFxyXG5cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoIC0gMjsgaSsrKSB7XG4gICAgaWYgKGJ1ZmZlcltpXSA9PT0gbmV3bGluZSAmJiBidWZmZXJbaSArIDFdID09PSBuZXdsaW5lKSB7XG4gICAgICAvLyBcXG5cXG5cbiAgICAgIHJldHVybiBpICsgMjtcbiAgICB9XG4gICAgaWYgKGJ1ZmZlcltpXSA9PT0gY2FycmlhZ2UgJiYgYnVmZmVyW2kgKyAxXSA9PT0gY2FycmlhZ2UpIHtcbiAgICAgIC8vIFxcclxcclxuICAgICAgcmV0dXJuIGkgKyAyO1xuICAgIH1cbiAgICBpZiAoXG4gICAgICBidWZmZXJbaV0gPT09IGNhcnJpYWdlICYmXG4gICAgICBidWZmZXJbaSArIDFdID09PSBuZXdsaW5lICYmXG4gICAgICBpICsgMyA8IGJ1ZmZlci5sZW5ndGggJiZcbiAgICAgIGJ1ZmZlcltpICsgMl0gPT09IGNhcnJpYWdlICYmXG4gICAgICBidWZmZXJbaSArIDNdID09PSBuZXdsaW5lXG4gICAgKSB7XG4gICAgICAvLyBcXHJcXG5cXHJcXG5cbiAgICAgIHJldHVybiBpICsgNDtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gLTE7XG59XG5cbmNsYXNzIFNTRURlY29kZXIge1xuICBwcml2YXRlIGRhdGE6IHN0cmluZ1tdO1xuICBwcml2YXRlIGV2ZW50OiBzdHJpbmcgfCBudWxsO1xuICBwcml2YXRlIGNodW5rczogc3RyaW5nW107XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy5ldmVudCA9IG51bGw7XG4gICAgdGhpcy5kYXRhID0gW107XG4gICAgdGhpcy5jaHVua3MgPSBbXTtcbiAgfVxuXG4gIGRlY29kZShsaW5lOiBzdHJpbmcpIHtcbiAgICBpZiAobGluZS5lbmRzV2l0aCgnXFxyJykpIHtcbiAgICAgIGxpbmUgPSBsaW5lLnN1YnN0cmluZygwLCBsaW5lLmxlbmd0aCAtIDEpO1xuICAgIH1cblxuICAgIGlmICghbGluZSkge1xuICAgICAgLy8gZW1wdHkgbGluZSBhbmQgd2UgZGlkbid0IHByZXZpb3VzbHkgZW5jb3VudGVyIGFueSBtZXNzYWdlc1xuICAgICAgaWYgKCF0aGlzLmV2ZW50ICYmICF0aGlzLmRhdGEubGVuZ3RoKSByZXR1cm4gbnVsbDtcblxuICAgICAgY29uc3Qgc3NlOiBTZXJ2ZXJTZW50RXZlbnQgPSB7XG4gICAgICAgIGV2ZW50OiB0aGlzLmV2ZW50LFxuICAgICAgICBkYXRhOiB0aGlzLmRhdGEuam9pbignXFxuJyksXG4gICAgICAgIHJhdzogdGhpcy5jaHVua3MsXG4gICAgICB9O1xuXG4gICAgICB0aGlzLmV2ZW50ID0gbnVsbDtcbiAgICAgIHRoaXMuZGF0YSA9IFtdO1xuICAgICAgdGhpcy5jaHVua3MgPSBbXTtcblxuICAgICAgcmV0dXJuIHNzZTtcbiAgICB9XG5cbiAgICB0aGlzLmNodW5rcy5wdXNoKGxpbmUpO1xuXG4gICAgaWYgKGxpbmUuc3RhcnRzV2l0aCgnOicpKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICBsZXQgW2ZpZWxkbmFtZSwgXywgdmFsdWVdID0gcGFydGl0aW9uKGxpbmUsICc6Jyk7XG5cbiAgICBpZiAodmFsdWUuc3RhcnRzV2l0aCgnICcpKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlLnN1YnN0cmluZygxKTtcbiAgICB9XG5cbiAgICBpZiAoZmllbGRuYW1lID09PSAnZXZlbnQnKSB7XG4gICAgICB0aGlzLmV2ZW50ID0gdmFsdWU7XG4gICAgfSBlbHNlIGlmIChmaWVsZG5hbWUgPT09ICdkYXRhJykge1xuICAgICAgdGhpcy5kYXRhLnB1c2godmFsdWUpO1xuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG59XG5cbi8qKiBUaGlzIGlzIGFuIGludGVybmFsIGhlbHBlciBmdW5jdGlvbiB0aGF0J3MganVzdCB1c2VkIGZvciB0ZXN0aW5nICovXG5leHBvcnQgZnVuY3Rpb24gX2RlY29kZUNodW5rcyhjaHVua3M6IHN0cmluZ1tdKTogc3RyaW5nW10ge1xuICBjb25zdCBkZWNvZGVyID0gbmV3IExpbmVEZWNvZGVyKCk7XG4gIGNvbnN0IGxpbmVzOiBzdHJpbmdbXSA9IFtdO1xuICBmb3IgKGNvbnN0IGNodW5rIG9mIGNodW5rcykge1xuICAgIGxpbmVzLnB1c2goLi4uZGVjb2Rlci5kZWNvZGUoY2h1bmspKTtcbiAgfVxuXG4gIHJldHVybiBsaW5lcztcbn1cblxuZnVuY3Rpb24gcGFydGl0aW9uKHN0cjogc3RyaW5nLCBkZWxpbWl0ZXI6IHN0cmluZyk6IFtzdHJpbmcsIHN0cmluZywgc3RyaW5nXSB7XG4gIGNvbnN0IGluZGV4ID0gc3RyLmluZGV4T2YoZGVsaW1pdGVyKTtcbiAgaWYgKGluZGV4ICE9PSAtMSkge1xuICAgIHJldHVybiBbc3RyLnN1YnN0cmluZygwLCBpbmRleCksIGRlbGltaXRlciwgc3RyLnN1YnN0cmluZyhpbmRleCArIGRlbGltaXRlci5sZW5ndGgpXTtcbiAgfVxuXG4gIHJldHVybiBbc3RyLCAnJywgJyddO1xufVxuIiwgImltcG9ydCB7IHR5cGUgUmVxdWVzdE9wdGlvbnMgfSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5pbXBvcnQge1xuICBGb3JtRGF0YSxcbiAgRmlsZSxcbiAgdHlwZSBCbG9iLFxuICB0eXBlIEZpbGVQcm9wZXJ0eUJhZyxcbiAgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMsXG4gIHR5cGUgRnNSZWFkU3RyZWFtLFxuICBpc0ZzUmVhZFN0cmVhbSxcbn0gZnJvbSBcIi4vX3NoaW1zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBNdWx0aXBhcnRCb2R5IH0gZnJvbSBcIi4vX3NoaW1zL011bHRpcGFydEJvZHkuanNcIjtcbmV4cG9ydCB7IGZpbGVGcm9tUGF0aCB9IGZyb20gXCIuL19zaGltcy9pbmRleC5qc1wiO1xuXG50eXBlIEJsb2JMaWtlUGFydCA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgQXJyYXlCdWZmZXJWaWV3IHwgQmxvYkxpa2UgfCBVaW50OEFycmF5IHwgRGF0YVZpZXc7XG5leHBvcnQgdHlwZSBCbG9iUGFydCA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgQXJyYXlCdWZmZXJWaWV3IHwgQmxvYiB8IFVpbnQ4QXJyYXkgfCBEYXRhVmlldztcblxuLyoqXG4gKiBUeXBpY2FsbHksIHRoaXMgaXMgYSBuYXRpdmUgXCJGaWxlXCIgY2xhc3MuXG4gKlxuICogV2UgcHJvdmlkZSB0aGUge0BsaW5rIHRvRmlsZX0gdXRpbGl0eSB0byBjb252ZXJ0IGEgdmFyaWV0eSBvZiBvYmplY3RzXG4gKiBpbnRvIHRoZSBGaWxlIGNsYXNzLlxuICpcbiAqIEZvciBjb252ZW5pZW5jZSwgeW91IGNhbiBhbHNvIHBhc3MgYSBmZXRjaCBSZXNwb25zZSwgb3IgaW4gTm9kZSxcbiAqIHRoZSByZXN1bHQgb2YgZnMuY3JlYXRlUmVhZFN0cmVhbSgpLlxuICovXG5leHBvcnQgdHlwZSBVcGxvYWRhYmxlID0gRmlsZUxpa2UgfCBSZXNwb25zZUxpa2UgfCBGc1JlYWRTdHJlYW07XG5cbi8qKlxuICogSW50ZW5kZWQgdG8gbWF0Y2ggd2ViLkJsb2IsIG5vZGUuQmxvYiwgbm9kZS1mZXRjaC5CbG9iLCBldGMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmxvYkxpa2Uge1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9CbG9iL3NpemUpICovXG4gIHJlYWRvbmx5IHNpemU6IG51bWJlcjtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYi90eXBlKSAqL1xuICByZWFkb25seSB0eXBlOiBzdHJpbmc7XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2IvdGV4dCkgKi9cbiAgdGV4dCgpOiBQcm9taXNlPHN0cmluZz47XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2Ivc2xpY2UpICovXG4gIHNsaWNlKHN0YXJ0PzogbnVtYmVyLCBlbmQ/OiBudW1iZXIpOiBCbG9iTGlrZTtcbiAgLy8gdW5mb3J0dW5hdGVseSBAdHlwZXMvbm9kZS1mZXRjaEBeMi42LjQgZG9lc24ndCB0eXBlIHRoZSBhcnJheUJ1ZmZlciBtZXRob2Rcbn1cblxuLyoqXG4gKiBJbnRlbmRlZCB0byBtYXRjaCB3ZWIuRmlsZSwgbm9kZS5GaWxlLCBub2RlLWZldGNoLkZpbGUsIGV0Yy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBGaWxlTGlrZSBleHRlbmRzIEJsb2JMaWtlIHtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvRmlsZS9sYXN0TW9kaWZpZWQpICovXG4gIHJlYWRvbmx5IGxhc3RNb2RpZmllZDogbnVtYmVyO1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9GaWxlL25hbWUpICovXG4gIHJlYWRvbmx5IG5hbWU6IHN0cmluZztcbn1cblxuLyoqXG4gKiBJbnRlbmRlZCB0byBtYXRjaCB3ZWIuUmVzcG9uc2UsIG5vZGUuUmVzcG9uc2UsIG5vZGUtZmV0Y2guUmVzcG9uc2UsIGV0Yy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBSZXNwb25zZUxpa2Uge1xuICB1cmw6IHN0cmluZztcbiAgYmxvYigpOiBQcm9taXNlPEJsb2JMaWtlPjtcbn1cblxuZXhwb3J0IGNvbnN0IGlzUmVzcG9uc2VMaWtlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBSZXNwb25zZUxpa2UgPT5cbiAgdmFsdWUgIT0gbnVsbCAmJlxuICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gIHR5cGVvZiB2YWx1ZS51cmwgPT09ICdzdHJpbmcnICYmXG4gIHR5cGVvZiB2YWx1ZS5ibG9iID09PSAnZnVuY3Rpb24nO1xuXG5leHBvcnQgY29uc3QgaXNGaWxlTGlrZSA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgRmlsZUxpa2UgPT5cbiAgdmFsdWUgIT0gbnVsbCAmJlxuICB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmXG4gIHR5cGVvZiB2YWx1ZS5uYW1lID09PSAnc3RyaW5nJyAmJlxuICB0eXBlb2YgdmFsdWUubGFzdE1vZGlmaWVkID09PSAnbnVtYmVyJyAmJlxuICBpc0Jsb2JMaWtlKHZhbHVlKTtcblxuLyoqXG4gKiBUaGUgQmxvYkxpa2UgdHlwZSBvbWl0cyBhcnJheUJ1ZmZlcigpIGJlY2F1c2UgQHR5cGVzL25vZGUtZmV0Y2hAXjIuNi40IGxhY2tzIGl0OyBidXQgdGhpcyBjaGVja1xuICogYWRkcyB0aGUgYXJyYXlCdWZmZXIoKSBtZXRob2QgdHlwZSBiZWNhdXNlIGl0IGlzIGF2YWlsYWJsZSBhbmQgdXNlZCBhdCBydW50aW1lXG4gKi9cbmV4cG9ydCBjb25zdCBpc0Jsb2JMaWtlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBCbG9iTGlrZSAmIHsgYXJyYXlCdWZmZXIoKTogUHJvbWlzZTxBcnJheUJ1ZmZlcj4gfSA9PlxuICB2YWx1ZSAhPSBudWxsICYmXG4gIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgdHlwZW9mIHZhbHVlLnNpemUgPT09ICdudW1iZXInICYmXG4gIHR5cGVvZiB2YWx1ZS50eXBlID09PSAnc3RyaW5nJyAmJlxuICB0eXBlb2YgdmFsdWUudGV4dCA9PT0gJ2Z1bmN0aW9uJyAmJlxuICB0eXBlb2YgdmFsdWUuc2xpY2UgPT09ICdmdW5jdGlvbicgJiZcbiAgdHlwZW9mIHZhbHVlLmFycmF5QnVmZmVyID09PSAnZnVuY3Rpb24nO1xuXG5leHBvcnQgY29uc3QgaXNVcGxvYWRhYmxlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBVcGxvYWRhYmxlID0+IHtcbiAgcmV0dXJuIGlzRmlsZUxpa2UodmFsdWUpIHx8IGlzUmVzcG9uc2VMaWtlKHZhbHVlKSB8fCBpc0ZzUmVhZFN0cmVhbSh2YWx1ZSk7XG59O1xuXG5leHBvcnQgdHlwZSBUb0ZpbGVJbnB1dCA9IFVwbG9hZGFibGUgfCBFeGNsdWRlPEJsb2JMaWtlUGFydCwgc3RyaW5nPiB8IEFzeW5jSXRlcmFibGU8QmxvYkxpa2VQYXJ0PjtcblxuLyoqXG4gKiBIZWxwZXIgZm9yIGNyZWF0aW5nIGEge0BsaW5rIEZpbGV9IHRvIHBhc3MgdG8gYW4gU0RLIHVwbG9hZCBtZXRob2QgZnJvbSBhIHZhcmlldHkgb2YgZGlmZmVyZW50IGRhdGEgZm9ybWF0c1xuICogQHBhcmFtIHZhbHVlIHRoZSByYXcgY29udGVudCBvZiB0aGUgZmlsZS4gIENhbiBiZSBhbiB7QGxpbmsgVXBsb2FkYWJsZX0sIHtAbGluayBCbG9iTGlrZVBhcnR9LCBvciB7QGxpbmsgQXN5bmNJdGVyYWJsZX0gb2Yge0BsaW5rIEJsb2JMaWtlUGFydH1zXG4gKiBAcGFyYW0ge3N0cmluZz19IG5hbWUgdGhlIG5hbWUgb2YgdGhlIGZpbGUuIElmIG9taXR0ZWQsIHRvRmlsZSB3aWxsIHRyeSB0byBkZXRlcm1pbmUgYSBmaWxlIG5hbWUgZnJvbSBiaXRzIGlmIHBvc3NpYmxlXG4gKiBAcGFyYW0ge09iamVjdD19IG9wdGlvbnMgYWRkaXRpb25hbCBwcm9wZXJ0aWVzXG4gKiBAcGFyYW0ge3N0cmluZz19IG9wdGlvbnMudHlwZSB0aGUgTUlNRSB0eXBlIG9mIHRoZSBjb250ZW50XG4gKiBAcGFyYW0ge251bWJlcj19IG9wdGlvbnMubGFzdE1vZGlmaWVkIHRoZSBsYXN0IG1vZGlmaWVkIHRpbWVzdGFtcFxuICogQHJldHVybnMgYSB7QGxpbmsgRmlsZX0gd2l0aCB0aGUgZ2l2ZW4gcHJvcGVydGllc1xuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdG9GaWxlKFxuICB2YWx1ZTogVG9GaWxlSW5wdXQgfCBQcm9taXNlTGlrZTxUb0ZpbGVJbnB1dD4sXG4gIG5hbWU/OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkLFxuICBvcHRpb25zPzogRmlsZVByb3BlcnR5QmFnIHwgdW5kZWZpbmVkLFxuKTogUHJvbWlzZTxGaWxlTGlrZT4ge1xuICAvLyBJZiBpdCdzIGEgcHJvbWlzZSwgcmVzb2x2ZSBpdC5cbiAgdmFsdWUgPSBhd2FpdCB2YWx1ZTtcblxuICAvLyBJZiB3ZSd2ZSBiZWVuIGdpdmVuIGEgYEZpbGVgIHdlIGRvbid0IG5lZWQgdG8gZG8gYW55dGhpbmdcbiAgaWYgKGlzRmlsZUxpa2UodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlO1xuICB9XG5cbiAgaWYgKGlzUmVzcG9uc2VMaWtlKHZhbHVlKSkge1xuICAgIGNvbnN0IGJsb2IgPSBhd2FpdCB2YWx1ZS5ibG9iKCk7XG4gICAgbmFtZSB8fD0gbmV3IFVSTCh2YWx1ZS51cmwpLnBhdGhuYW1lLnNwbGl0KC9bXFxcXC9dLykucG9wKCkgPz8gJ3Vua25vd25fZmlsZSc7XG5cbiAgICAvLyB3ZSBuZWVkIHRvIGNvbnZlcnQgdGhlIGBCbG9iYCBpbnRvIGFuIGFycmF5IGJ1ZmZlciBiZWNhdXNlIHRoZSBgQmxvYmAgY2xhc3NcbiAgICAvLyB0aGF0IGBub2RlLWZldGNoYCBkZWZpbmVzIGlzIGluY29tcGF0aWJsZSB3aXRoIHRoZSB3ZWIgc3RhbmRhcmQgd2hpY2ggcmVzdWx0c1xuICAgIC8vIGluIGBuZXcgRmlsZWAgaW50ZXJwcmV0aW5nIGl0IGFzIGEgc3RyaW5nIGluc3RlYWQgb2YgYmluYXJ5IGRhdGEuXG4gICAgY29uc3QgZGF0YSA9IGlzQmxvYkxpa2UoYmxvYikgPyBbKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSkgYXMgYW55XSA6IFtibG9iXTtcblxuICAgIHJldHVybiBuZXcgRmlsZShkYXRhLCBuYW1lLCBvcHRpb25zKTtcbiAgfVxuXG4gIGNvbnN0IGJpdHMgPSBhd2FpdCBnZXRCeXRlcyh2YWx1ZSk7XG5cbiAgbmFtZSB8fD0gZ2V0TmFtZSh2YWx1ZSkgPz8gJ3Vua25vd25fZmlsZSc7XG5cbiAgaWYgKCFvcHRpb25zPy50eXBlKSB7XG4gICAgY29uc3QgdHlwZSA9IChiaXRzWzBdIGFzIGFueSk/LnR5cGU7XG4gICAgaWYgKHR5cGVvZiB0eXBlID09PSAnc3RyaW5nJykge1xuICAgICAgb3B0aW9ucyA9IHsgLi4ub3B0aW9ucywgdHlwZSB9O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBuZXcgRmlsZShiaXRzLCBuYW1lLCBvcHRpb25zKTtcbn1cblxuYXN5bmMgZnVuY3Rpb24gZ2V0Qnl0ZXModmFsdWU6IFRvRmlsZUlucHV0KTogUHJvbWlzZTxBcnJheTxCbG9iUGFydD4+IHtcbiAgbGV0IHBhcnRzOiBBcnJheTxCbG9iUGFydD4gPSBbXTtcbiAgaWYgKFxuICAgIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHxcbiAgICBBcnJheUJ1ZmZlci5pc1ZpZXcodmFsdWUpIHx8IC8vIGluY2x1ZGVzIFVpbnQ4QXJyYXksIEJ1ZmZlciwgZXRjLlxuICAgIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXJcbiAgKSB7XG4gICAgcGFydHMucHVzaCh2YWx1ZSk7XG4gIH0gZWxzZSBpZiAoaXNCbG9iTGlrZSh2YWx1ZSkpIHtcbiAgICBwYXJ0cy5wdXNoKGF3YWl0IHZhbHVlLmFycmF5QnVmZmVyKCkpO1xuICB9IGVsc2UgaWYgKFxuICAgIGlzQXN5bmNJdGVyYWJsZUl0ZXJhdG9yKHZhbHVlKSAvLyBpbmNsdWRlcyBSZWFkYWJsZSwgUmVhZGFibGVTdHJlYW0sIGV0Yy5cbiAgKSB7XG4gICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiB2YWx1ZSkge1xuICAgICAgcGFydHMucHVzaChjaHVuayBhcyBCbG9iUGFydCk7IC8vIFRPRE8sIGNvbnNpZGVyIHZhbGlkYXRpbmc/XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgIGBVbmV4cGVjdGVkIGRhdGEgdHlwZTogJHt0eXBlb2YgdmFsdWV9OyBjb25zdHJ1Y3RvcjogJHt2YWx1ZT8uY29uc3RydWN0b3JcbiAgICAgICAgPy5uYW1lfTsgcHJvcHM6ICR7cHJvcHNGb3JFcnJvcih2YWx1ZSl9YCxcbiAgICApO1xuICB9XG5cbiAgcmV0dXJuIHBhcnRzO1xufVxuXG5mdW5jdGlvbiBwcm9wc0ZvckVycm9yKHZhbHVlOiBhbnkpOiBzdHJpbmcge1xuICBjb25zdCBwcm9wcyA9IE9iamVjdC5nZXRPd25Qcm9wZXJ0eU5hbWVzKHZhbHVlKTtcbiAgcmV0dXJuIGBbJHtwcm9wcy5tYXAoKHApID0+IGBcIiR7cH1cImApLmpvaW4oJywgJyl9XWA7XG59XG5cbmZ1bmN0aW9uIGdldE5hbWUodmFsdWU6IGFueSk6IHN0cmluZyB8IHVuZGVmaW5lZCB7XG4gIHJldHVybiAoXG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLm5hbWUpIHx8XG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLmZpbGVuYW1lKSB8fFxuICAgIC8vIEZvciBmcy5SZWFkU3RyZWFtXG4gICAgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyKHZhbHVlLnBhdGgpPy5zcGxpdCgvW1xcXFwvXS8pLnBvcCgpXG4gICk7XG59XG5cbmNvbnN0IGdldFN0cmluZ0Zyb21NYXliZUJ1ZmZlciA9ICh4OiBzdHJpbmcgfCBCdWZmZXIgfCB1bmtub3duKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHR5cGVvZiB4ID09PSAnc3RyaW5nJykgcmV0dXJuIHg7XG4gIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJyAmJiB4IGluc3RhbmNlb2YgQnVmZmVyKSByZXR1cm4gU3RyaW5nKHgpO1xuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuY29uc3QgaXNBc3luY0l0ZXJhYmxlSXRlcmF0b3IgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEFzeW5jSXRlcmFibGVJdGVyYXRvcjx1bmtub3duPiA9PlxuICB2YWx1ZSAhPSBudWxsICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIHZhbHVlW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSA9PT0gJ2Z1bmN0aW9uJztcblxuZXhwb3J0IGNvbnN0IGlzTXVsdGlwYXJ0Qm9keSA9IChib2R5OiBhbnkpOiBib2R5IGlzIE11bHRpcGFydEJvZHkgPT5cbiAgYm9keSAmJiB0eXBlb2YgYm9keSA9PT0gJ29iamVjdCcgJiYgYm9keS5ib2R5ICYmIGJvZHlbU3ltYm9sLnRvU3RyaW5nVGFnXSA9PT0gJ011bHRpcGFydEJvZHknO1xuXG4vKipcbiAqIFJldHVybnMgYSBtdWx0aXBhcnQvZm9ybS1kYXRhIHJlcXVlc3QgaWYgYW55IHBhcnQgb2YgdGhlIGdpdmVuIHJlcXVlc3QgYm9keSBjb250YWlucyBhIEZpbGUgLyBCbG9iIHZhbHVlLlxuICogT3RoZXJ3aXNlIHJldHVybnMgdGhlIHJlcXVlc3QgYXMgaXMuXG4gKi9cbmV4cG9ydCBjb25zdCBtYXliZU11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyA9IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBvcHRzOiBSZXF1ZXN0T3B0aW9uczxUPixcbik6IFByb21pc2U8UmVxdWVzdE9wdGlvbnM8VCB8IE11bHRpcGFydEJvZHk+PiA9PiB7XG4gIGlmICghaGFzVXBsb2FkYWJsZVZhbHVlKG9wdHMuYm9keSkpIHJldHVybiBvcHRzO1xuXG4gIGNvbnN0IGZvcm0gPSBhd2FpdCBjcmVhdGVGb3JtKG9wdHMuYm9keSk7XG4gIHJldHVybiBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyhmb3JtLCBvcHRzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMgPSBhc3luYyA8VCA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4sXG4pOiBQcm9taXNlPFJlcXVlc3RPcHRpb25zPFQgfCBNdWx0aXBhcnRCb2R5Pj4gPT4ge1xuICBjb25zdCBmb3JtID0gYXdhaXQgY3JlYXRlRm9ybShvcHRzLmJvZHkpO1xuICByZXR1cm4gZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMoZm9ybSwgb3B0cyk7XG59O1xuXG5leHBvcnQgY29uc3QgY3JlYXRlRm9ybSA9IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KGJvZHk6IFQgfCB1bmRlZmluZWQpOiBQcm9taXNlPEZvcm1EYXRhPiA9PiB7XG4gIGNvbnN0IGZvcm0gPSBuZXcgRm9ybURhdGEoKTtcbiAgYXdhaXQgUHJvbWlzZS5hbGwoT2JqZWN0LmVudHJpZXMoYm9keSB8fCB7fSkubWFwKChba2V5LCB2YWx1ZV0pID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBrZXksIHZhbHVlKSkpO1xuICByZXR1cm4gZm9ybTtcbn07XG5cbmNvbnN0IGhhc1VwbG9hZGFibGVWYWx1ZSA9ICh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4gPT4ge1xuICBpZiAoaXNVcGxvYWRhYmxlKHZhbHVlKSkgcmV0dXJuIHRydWU7XG4gIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkgcmV0dXJuIHZhbHVlLnNvbWUoaGFzVXBsb2FkYWJsZVZhbHVlKTtcbiAgaWYgKHZhbHVlICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICBmb3IgKGNvbnN0IGsgaW4gdmFsdWUpIHtcbiAgICAgIGlmIChoYXNVcGxvYWRhYmxlVmFsdWUoKHZhbHVlIGFzIGFueSlba10pKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIGZhbHNlO1xufTtcblxuY29uc3QgYWRkRm9ybVZhbHVlID0gYXN5bmMgKGZvcm06IEZvcm1EYXRhLCBrZXk6IHN0cmluZywgdmFsdWU6IHVua25vd24pOiBQcm9taXNlPHZvaWQ+ID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHJldHVybjtcbiAgaWYgKHZhbHVlID09IG51bGwpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYFJlY2VpdmVkIG51bGwgZm9yIFwiJHtrZXl9XCI7IHRvIHBhc3MgbnVsbCBpbiBGb3JtRGF0YSwgeW91IG11c3QgdXNlIHRoZSBzdHJpbmcgJ251bGwnYCxcbiAgICApO1xuICB9XG5cbiAgLy8gVE9ETzogbWFrZSBuZXN0ZWQgZm9ybWF0cyBjb25maWd1cmFibGVcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgfHwgdHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykge1xuICAgIGZvcm0uYXBwZW5kKGtleSwgU3RyaW5nKHZhbHVlKSk7XG4gIH0gZWxzZSBpZiAoaXNVcGxvYWRhYmxlKHZhbHVlKSkge1xuICAgIGNvbnN0IGZpbGUgPSBhd2FpdCB0b0ZpbGUodmFsdWUpO1xuICAgIGZvcm0uYXBwZW5kKGtleSwgZmlsZSBhcyBGaWxlKTtcbiAgfSBlbHNlIGlmIChBcnJheS5pc0FycmF5KHZhbHVlKSkge1xuICAgIGF3YWl0IFByb21pc2UuYWxsKHZhbHVlLm1hcCgoZW50cnkpID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBrZXkgKyAnW10nLCBlbnRyeSkpKTtcbiAgfSBlbHNlIGlmICh0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwoXG4gICAgICBPYmplY3QuZW50cmllcyh2YWx1ZSkubWFwKChbbmFtZSwgcHJvcF0pID0+IGFkZEZvcm1WYWx1ZShmb3JtLCBgJHtrZXl9WyR7bmFtZX1dYCwgcHJvcCkpLFxuICAgICk7XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgIGBJbnZhbGlkIHZhbHVlIGdpdmVuIHRvIGZvcm0sIGV4cGVjdGVkIGEgc3RyaW5nLCBudW1iZXIsIGJvb2xlYW4sIG9iamVjdCwgQXJyYXksIEZpbGUgb3IgQmxvYiBidXQgZ290ICR7dmFsdWV9IGluc3RlYWRgLFxuICAgICk7XG4gIH1cbn07XG4iLCAiaW1wb3J0IHsgVkVSU0lPTiB9IGZyb20gXCIuL3ZlcnNpb24uanNcIjtcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuL3N0cmVhbWluZy5qc1wiO1xuaW1wb3J0IHtcbiAgQW50aHJvcGljRXJyb3IsXG4gIEFQSUVycm9yLFxuICBBUElDb25uZWN0aW9uRXJyb3IsXG4gIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IsXG4gIEFQSVVzZXJBYm9ydEVycm9yLFxufSBmcm9tIFwiLi9lcnJvci5qc1wiO1xuaW1wb3J0IHtcbiAga2luZCBhcyBzaGltc0tpbmQsXG4gIHR5cGUgUmVhZGFibGUsXG4gIGdldERlZmF1bHRBZ2VudCxcbiAgdHlwZSBBZ2VudCxcbiAgZmV0Y2gsXG4gIHR5cGUgUmVxdWVzdEluZm8sXG4gIHR5cGUgUmVxdWVzdEluaXQsXG4gIHR5cGUgUmVzcG9uc2UsXG4gIHR5cGUgSGVhZGVyc0luaXQsXG59IGZyb20gXCIuL19zaGltcy9pbmRleC5qc1wiO1xuZXhwb3J0IHsgdHlwZSBSZXNwb25zZSB9O1xuaW1wb3J0IHsgQmxvYkxpa2UsIGlzQmxvYkxpa2UsIGlzTXVsdGlwYXJ0Qm9keSB9IGZyb20gXCIuL3VwbG9hZHMuanNcIjtcbmV4cG9ydCB7XG4gIG1heWJlTXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zLFxuICBtdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMsXG4gIGNyZWF0ZUZvcm0sXG4gIHR5cGUgVXBsb2FkYWJsZSxcbn0gZnJvbSBcIi4vdXBsb2Fkcy5qc1wiO1xuXG5leHBvcnQgdHlwZSBGZXRjaCA9ICh1cmw6IFJlcXVlc3RJbmZvLCBpbml0PzogUmVxdWVzdEluaXQpID0+IFByb21pc2U8UmVzcG9uc2U+O1xuXG50eXBlIFByb21pc2VPclZhbHVlPFQ+ID0gVCB8IFByb21pc2U8VD47XG5cbnR5cGUgQVBJUmVzcG9uc2VQcm9wcyA9IHtcbiAgcmVzcG9uc2U6IFJlc3BvbnNlO1xuICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zO1xuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXI7XG59O1xuXG5hc3luYyBmdW5jdGlvbiBkZWZhdWx0UGFyc2VSZXNwb25zZTxUPihwcm9wczogQVBJUmVzcG9uc2VQcm9wcyk6IFByb21pc2U8V2l0aFJlcXVlc3RJRDxUPj4ge1xuICBjb25zdCB7IHJlc3BvbnNlIH0gPSBwcm9wcztcbiAgaWYgKHByb3BzLm9wdGlvbnMuc3RyZWFtKSB7XG4gICAgZGVidWcoJ3Jlc3BvbnNlJywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS51cmwsIHJlc3BvbnNlLmhlYWRlcnMsIHJlc3BvbnNlLmJvZHkpO1xuXG4gICAgLy8gTm90ZTogdGhlcmUgaXMgYW4gaW52YXJpYW50IGhlcmUgdGhhdCBpc24ndCByZXByZXNlbnRlZCBpbiB0aGUgdHlwZSBzeXN0ZW1cbiAgICAvLyB0aGF0IGlmIHlvdSBzZXQgYHN0cmVhbTogdHJ1ZWAgdGhlIHJlc3BvbnNlIHR5cGUgbXVzdCBhbHNvIGJlIGBTdHJlYW08VD5gXG5cbiAgICBpZiAocHJvcHMub3B0aW9ucy5fX3N0cmVhbUNsYXNzKSB7XG4gICAgICByZXR1cm4gcHJvcHMub3B0aW9ucy5fX3N0cmVhbUNsYXNzLmZyb21TU0VSZXNwb25zZShyZXNwb25zZSwgcHJvcHMuY29udHJvbGxlcikgYXMgYW55O1xuICAgIH1cblxuICAgIHJldHVybiBTdHJlYW0uZnJvbVNTRVJlc3BvbnNlKHJlc3BvbnNlLCBwcm9wcy5jb250cm9sbGVyKSBhcyBhbnk7XG4gIH1cblxuICAvLyBmZXRjaCByZWZ1c2VzIHRvIHJlYWQgdGhlIGJvZHkgd2hlbiB0aGUgc3RhdHVzIGNvZGUgaXMgMjA0LlxuICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSAyMDQpIHtcbiAgICByZXR1cm4gbnVsbCBhcyBXaXRoUmVxdWVzdElEPFQ+O1xuICB9XG5cbiAgaWYgKHByb3BzLm9wdGlvbnMuX19iaW5hcnlSZXNwb25zZSkge1xuICAgIHJldHVybiByZXNwb25zZSBhcyB1bmtub3duIGFzIFdpdGhSZXF1ZXN0SUQ8VD47XG4gIH1cblxuICBjb25zdCBjb250ZW50VHlwZSA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdjb250ZW50LXR5cGUnKTtcbiAgY29uc3QgaXNKU09OID1cbiAgICBjb250ZW50VHlwZT8uaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL2pzb24nKSB8fCBjb250ZW50VHlwZT8uaW5jbHVkZXMoJ2FwcGxpY2F0aW9uL3ZuZC5hcGkranNvbicpO1xuICBpZiAoaXNKU09OKSB7XG4gICAgY29uc3QganNvbiA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcblxuICAgIGRlYnVnKCdyZXNwb25zZScsIHJlc3BvbnNlLnN0YXR1cywgcmVzcG9uc2UudXJsLCByZXNwb25zZS5oZWFkZXJzLCBqc29uKTtcblxuICAgIHJldHVybiBfYWRkUmVxdWVzdElEKGpzb24gYXMgVCwgcmVzcG9uc2UpO1xuICB9XG5cbiAgY29uc3QgdGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKTtcbiAgZGVidWcoJ3Jlc3BvbnNlJywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS51cmwsIHJlc3BvbnNlLmhlYWRlcnMsIHRleHQpO1xuXG4gIC8vIFRPRE8gaGFuZGxlIGJsb2IsIGFycmF5YnVmZmVyLCBvdGhlciBjb250ZW50IHR5cGVzLCBldGMuXG4gIHJldHVybiB0ZXh0IGFzIHVua25vd24gYXMgV2l0aFJlcXVlc3RJRDxUPjtcbn1cblxudHlwZSBXaXRoUmVxdWVzdElEPFQ+ID1cbiAgVCBleHRlbmRzIEFycmF5PGFueT4gfCBSZXNwb25zZSB8IEFic3RyYWN0UGFnZTxhbnk+ID8gVFxuICA6IFQgZXh0ZW5kcyBSZWNvcmQ8c3RyaW5nLCBhbnk+ID8gVCAmIHsgX3JlcXVlc3RfaWQ/OiBzdHJpbmcgfCBudWxsIH1cbiAgOiBUO1xuXG5mdW5jdGlvbiBfYWRkUmVxdWVzdElEPFQ+KHZhbHVlOiBULCByZXNwb25zZTogUmVzcG9uc2UpOiBXaXRoUmVxdWVzdElEPFQ+IHtcbiAgaWYgKCF2YWx1ZSB8fCB0eXBlb2YgdmFsdWUgIT09ICdvYmplY3QnIHx8IEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgcmV0dXJuIHZhbHVlIGFzIFdpdGhSZXF1ZXN0SUQ8VD47XG4gIH1cblxuICByZXR1cm4gT2JqZWN0LmRlZmluZVByb3BlcnR5KHZhbHVlLCAnX3JlcXVlc3RfaWQnLCB7XG4gICAgdmFsdWU6IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdyZXF1ZXN0LWlkJyksXG4gICAgZW51bWVyYWJsZTogZmFsc2UsXG4gIH0pIGFzIFdpdGhSZXF1ZXN0SUQ8VD47XG59XG5cbi8qKlxuICogQSBzdWJjbGFzcyBvZiBgUHJvbWlzZWAgcHJvdmlkaW5nIGFkZGl0aW9uYWwgaGVscGVyIG1ldGhvZHNcbiAqIGZvciBpbnRlcmFjdGluZyB3aXRoIHRoZSBTREsuXG4gKi9cbmV4cG9ydCBjbGFzcyBBUElQcm9taXNlPFQ+IGV4dGVuZHMgUHJvbWlzZTxXaXRoUmVxdWVzdElEPFQ+PiB7XG4gIHByaXZhdGUgcGFyc2VkUHJvbWlzZTogUHJvbWlzZTxXaXRoUmVxdWVzdElEPFQ+PiB8IHVuZGVmaW5lZDtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIHJlc3BvbnNlUHJvbWlzZTogUHJvbWlzZTxBUElSZXNwb25zZVByb3BzPixcbiAgICBwcml2YXRlIHBhcnNlUmVzcG9uc2U6IChcbiAgICAgIHByb3BzOiBBUElSZXNwb25zZVByb3BzLFxuICAgICkgPT4gUHJvbWlzZU9yVmFsdWU8V2l0aFJlcXVlc3RJRDxUPj4gPSBkZWZhdWx0UGFyc2VSZXNwb25zZSxcbiAgKSB7XG4gICAgc3VwZXIoKHJlc29sdmUpID0+IHtcbiAgICAgIC8vIHRoaXMgaXMgbWF5YmUgYSBiaXQgd2VpcmQgYnV0IHRoaXMgaGFzIHRvIGJlIGEgbm8tb3AgdG8gbm90IGltcGxpY2l0bHlcbiAgICAgIC8vIHBhcnNlIHRoZSByZXNwb25zZSBib2R5OyBpbnN0ZWFkIC50aGVuLCAuY2F0Y2gsIC5maW5hbGx5IGFyZSBvdmVycmlkZGVuXG4gICAgICAvLyB0byBwYXJzZSB0aGUgcmVzcG9uc2VcbiAgICAgIHJlc29sdmUobnVsbCBhcyBhbnkpO1xuICAgIH0pO1xuICB9XG5cbiAgX3RoZW5VbndyYXA8VT4odHJhbnNmb3JtOiAoZGF0YTogVCwgcHJvcHM6IEFQSVJlc3BvbnNlUHJvcHMpID0+IFUpOiBBUElQcm9taXNlPFU+IHtcbiAgICByZXR1cm4gbmV3IEFQSVByb21pc2UodGhpcy5yZXNwb25zZVByb21pc2UsIGFzeW5jIChwcm9wcykgPT5cbiAgICAgIF9hZGRSZXF1ZXN0SUQodHJhbnNmb3JtKGF3YWl0IHRoaXMucGFyc2VSZXNwb25zZShwcm9wcyksIHByb3BzKSwgcHJvcHMucmVzcG9uc2UpLFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcmF3IGBSZXNwb25zZWAgaW5zdGFuY2UgaW5zdGVhZCBvZiBwYXJzaW5nIHRoZSByZXNwb25zZVxuICAgKiBkYXRhLlxuICAgKlxuICAgKiBJZiB5b3Ugd2FudCB0byBwYXJzZSB0aGUgcmVzcG9uc2UgYm9keSBidXQgc3RpbGwgZ2V0IHRoZSBgUmVzcG9uc2VgXG4gICAqIGluc3RhbmNlLCB5b3UgY2FuIHVzZSB7QGxpbmsgd2l0aFJlc3BvbnNlKCl9LlxuICAgKlxuICAgKiBcdUQ4M0RcdURDNEIgR2V0dGluZyB0aGUgd3JvbmcgVHlwZVNjcmlwdCB0eXBlIGZvciBgUmVzcG9uc2VgP1xuICAgKiBUcnkgc2V0dGluZyBgXCJtb2R1bGVSZXNvbHV0aW9uXCI6IFwiTm9kZU5leHRcImAgaWYgeW91IGNhbixcbiAgICogb3IgYWRkIG9uZSBvZiB0aGVzZSBpbXBvcnRzIGJlZm9yZSB5b3VyIGZpcnN0IGBpbXBvcnQgXHUyMDI2IGZyb20gJ0BhbnRocm9waWMtYWkvc2RrJ2A6XG4gICAqIC0gYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvbm9kZSdgIChpZiB5b3UncmUgcnVubmluZyBvbiBOb2RlKVxuICAgKiAtIGBpbXBvcnQgJ0BhbnRocm9waWMtYWkvc2RrL3NoaW1zL3dlYidgIChvdGhlcndpc2UpXG4gICAqL1xuICBhc1Jlc3BvbnNlKCk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICByZXR1cm4gdGhpcy5yZXNwb25zZVByb21pc2UudGhlbigocCkgPT4gcC5yZXNwb25zZSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0cyB0aGUgcGFyc2VkIHJlc3BvbnNlIGRhdGEsIHRoZSByYXcgYFJlc3BvbnNlYCBpbnN0YW5jZSBhbmQgdGhlIElEIG9mIHRoZSByZXF1ZXN0LFxuICAgKiByZXR1cm5lZCB2aWUgdGhlIGByZXF1ZXN0LWlkYCBoZWFkZXIgd2hpY2ggaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmcgcmVxdWVzdHMgYW5kIHJlc3BvcnRpbmdcbiAgICogaXNzdWVzIHRvIEFudGhyb3BpYy5cbiAgICpcbiAgICogSWYgeW91IGp1c3Qgd2FudCB0byBnZXQgdGhlIHJhdyBgUmVzcG9uc2VgIGluc3RhbmNlIHdpdGhvdXQgcGFyc2luZyBpdCxcbiAgICogeW91IGNhbiB1c2Uge0BsaW5rIGFzUmVzcG9uc2UoKX0uXG4gICAqXG4gICAqIFx1RDgzRFx1REM0QiBHZXR0aW5nIHRoZSB3cm9uZyBUeXBlU2NyaXB0IHR5cGUgZm9yIGBSZXNwb25zZWA/XG4gICAqIFRyeSBzZXR0aW5nIGBcIm1vZHVsZVJlc29sdXRpb25cIjogXCJOb2RlTmV4dFwiYCBpZiB5b3UgY2FuLFxuICAgKiBvciBhZGQgb25lIG9mIHRoZXNlIGltcG9ydHMgYmVmb3JlIHlvdXIgZmlyc3QgYGltcG9ydCBcdTIwMjYgZnJvbSAnQGFudGhyb3BpYy1haS9zZGsnYDpcbiAgICogLSBgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy9ub2RlJ2AgKGlmIHlvdSdyZSBydW5uaW5nIG9uIE5vZGUpXG4gICAqIC0gYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvd2ViJ2AgKG90aGVyd2lzZSlcbiAgICovXG4gIGFzeW5jIHdpdGhSZXNwb25zZSgpOiBQcm9taXNlPHsgZGF0YTogVDsgcmVzcG9uc2U6IFJlc3BvbnNlOyByZXF1ZXN0X2lkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkIH0+IHtcbiAgICBjb25zdCBbZGF0YSwgcmVzcG9uc2VdID0gYXdhaXQgUHJvbWlzZS5hbGwoW3RoaXMucGFyc2UoKSwgdGhpcy5hc1Jlc3BvbnNlKCldKTtcbiAgICByZXR1cm4geyBkYXRhLCByZXNwb25zZSwgcmVxdWVzdF9pZDogcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3JlcXVlc3QtaWQnKSB9O1xuICB9XG5cbiAgcHJpdmF0ZSBwYXJzZSgpOiBQcm9taXNlPFdpdGhSZXF1ZXN0SUQ8VD4+IHtcbiAgICBpZiAoIXRoaXMucGFyc2VkUHJvbWlzZSkge1xuICAgICAgdGhpcy5wYXJzZWRQcm9taXNlID0gdGhpcy5yZXNwb25zZVByb21pc2UudGhlbih0aGlzLnBhcnNlUmVzcG9uc2UpIGFzIGFueSBhcyBQcm9taXNlPFdpdGhSZXF1ZXN0SUQ8VD4+O1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5wYXJzZWRQcm9taXNlO1xuICB9XG5cbiAgb3ZlcnJpZGUgdGhlbjxUUmVzdWx0MSA9IFdpdGhSZXF1ZXN0SUQ8VD4sIFRSZXN1bHQyID0gbmV2ZXI+KFxuICAgIG9uZnVsZmlsbGVkPzogKCh2YWx1ZTogV2l0aFJlcXVlc3RJRDxUPikgPT4gVFJlc3VsdDEgfCBQcm9taXNlTGlrZTxUUmVzdWx0MT4pIHwgdW5kZWZpbmVkIHwgbnVsbCxcbiAgICBvbnJlamVjdGVkPzogKChyZWFzb246IGFueSkgPT4gVFJlc3VsdDIgfCBQcm9taXNlTGlrZTxUUmVzdWx0Mj4pIHwgdW5kZWZpbmVkIHwgbnVsbCxcbiAgKTogUHJvbWlzZTxUUmVzdWx0MSB8IFRSZXN1bHQyPiB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UoKS50aGVuKG9uZnVsZmlsbGVkLCBvbnJlamVjdGVkKTtcbiAgfVxuXG4gIG92ZXJyaWRlIGNhdGNoPFRSZXN1bHQgPSBuZXZlcj4oXG4gICAgb25yZWplY3RlZD86ICgocmVhc29uOiBhbnkpID0+IFRSZXN1bHQgfCBQcm9taXNlTGlrZTxUUmVzdWx0PikgfCB1bmRlZmluZWQgfCBudWxsLFxuICApOiBQcm9taXNlPFdpdGhSZXF1ZXN0SUQ8VD4gfCBUUmVzdWx0PiB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UoKS5jYXRjaChvbnJlamVjdGVkKTtcbiAgfVxuXG4gIG92ZXJyaWRlIGZpbmFsbHkob25maW5hbGx5PzogKCgpID0+IHZvaWQpIHwgdW5kZWZpbmVkIHwgbnVsbCk6IFByb21pc2U8V2l0aFJlcXVlc3RJRDxUPj4ge1xuICAgIHJldHVybiB0aGlzLnBhcnNlKCkuZmluYWxseShvbmZpbmFsbHkpO1xuICB9XG59XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBUElDbGllbnQge1xuICBiYXNlVVJMOiBzdHJpbmc7XG4gIG1heFJldHJpZXM6IG51bWJlcjtcbiAgdGltZW91dDogbnVtYmVyO1xuICBodHRwQWdlbnQ6IEFnZW50IHwgdW5kZWZpbmVkO1xuXG4gIHByaXZhdGUgZmV0Y2g6IEZldGNoO1xuICBwcm90ZWN0ZWQgaWRlbXBvdGVuY3lIZWFkZXI/OiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Ioe1xuICAgIGJhc2VVUkwsXG4gICAgbWF4UmV0cmllcyA9IDIsXG4gICAgdGltZW91dCA9IDYwMDAwMCwgLy8gMTAgbWludXRlc1xuICAgIGh0dHBBZ2VudCxcbiAgICBmZXRjaDogb3ZlcnJpZGRlbkZldGNoLFxuICB9OiB7XG4gICAgYmFzZVVSTDogc3RyaW5nO1xuICAgIG1heFJldHJpZXM/OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgdGltZW91dDogbnVtYmVyIHwgdW5kZWZpbmVkO1xuICAgIGh0dHBBZ2VudDogQWdlbnQgfCB1bmRlZmluZWQ7XG4gICAgZmV0Y2g6IEZldGNoIHwgdW5kZWZpbmVkO1xuICB9KSB7XG4gICAgdGhpcy5iYXNlVVJMID0gYmFzZVVSTDtcbiAgICB0aGlzLm1heFJldHJpZXMgPSB2YWxpZGF0ZVBvc2l0aXZlSW50ZWdlcignbWF4UmV0cmllcycsIG1heFJldHJpZXMpO1xuICAgIHRoaXMudGltZW91dCA9IHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKCd0aW1lb3V0JywgdGltZW91dCk7XG4gICAgdGhpcy5odHRwQWdlbnQgPSBodHRwQWdlbnQ7XG5cbiAgICB0aGlzLmZldGNoID0gb3ZlcnJpZGRlbkZldGNoID8/IGZldGNoO1xuICB9XG5cbiAgcHJvdGVjdGVkIGF1dGhIZWFkZXJzKG9wdHM6IEZpbmFsUmVxdWVzdE9wdGlvbnMpOiBIZWFkZXJzIHtcbiAgICByZXR1cm4ge307XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhpcyB0byBhZGQgeW91ciBvd24gZGVmYXVsdCBoZWFkZXJzLCBmb3IgZXhhbXBsZTpcbiAgICpcbiAgICogIHtcbiAgICogICAgLi4uc3VwZXIuZGVmYXVsdEhlYWRlcnMoKSxcbiAgICogICAgQXV0aG9yaXphdGlvbjogJ0JlYXJlciAxMjMnLFxuICAgKiAgfVxuICAgKi9cbiAgcHJvdGVjdGVkIGRlZmF1bHRIZWFkZXJzKG9wdHM6IEZpbmFsUmVxdWVzdE9wdGlvbnMpOiBIZWFkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nLFxuICAgICAgJ1VzZXItQWdlbnQnOiB0aGlzLmdldFVzZXJBZ2VudCgpLFxuICAgICAgLi4uZ2V0UGxhdGZvcm1IZWFkZXJzKCksXG4gICAgICAuLi50aGlzLmF1dGhIZWFkZXJzKG9wdHMpLFxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgZGVmYXVsdFF1ZXJ5KCk6IERlZmF1bHRRdWVyeSB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhpcyB0byBhZGQgeW91ciBvd24gaGVhZGVycyB2YWxpZGF0aW9uOlxuICAgKi9cbiAgcHJvdGVjdGVkIHZhbGlkYXRlSGVhZGVycyhoZWFkZXJzOiBIZWFkZXJzLCBjdXN0b21IZWFkZXJzOiBIZWFkZXJzKSB7fVxuXG4gIHByb3RlY3RlZCBkZWZhdWx0SWRlbXBvdGVuY3lLZXkoKTogc3RyaW5nIHtcbiAgICByZXR1cm4gYHN0YWlubGVzcy1ub2RlLXJldHJ5LSR7dXVpZDQoKX1gO1xuICB9XG5cbiAgZ2V0PFJlcSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgnZ2V0JywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBwb3N0PFJlcSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgncG9zdCcsIHBhdGgsIG9wdHMpO1xuICB9XG5cbiAgcGF0Y2g8UmVxLCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdwYXRjaCcsIHBhdGgsIG9wdHMpO1xuICB9XG5cbiAgcHV0PFJlcSwgUnNwPihwYXRoOiBzdHJpbmcsIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+Pik6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMubWV0aG9kUmVxdWVzdCgncHV0JywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBkZWxldGU8UmVxLCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdkZWxldGUnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIHByaXZhdGUgbWV0aG9kUmVxdWVzdDxSZXEsIFJzcD4oXG4gICAgbWV0aG9kOiBIVFRQTWV0aG9kLFxuICAgIHBhdGg6IHN0cmluZyxcbiAgICBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4sXG4gICk6IEFQSVByb21pc2U8UnNwPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdChcbiAgICAgIFByb21pc2UucmVzb2x2ZShvcHRzKS50aGVuKGFzeW5jIChvcHRzKSA9PiB7XG4gICAgICAgIGNvbnN0IGJvZHkgPVxuICAgICAgICAgIG9wdHMgJiYgaXNCbG9iTGlrZShvcHRzPy5ib2R5KSA/IG5ldyBEYXRhVmlldyhhd2FpdCBvcHRzLmJvZHkuYXJyYXlCdWZmZXIoKSlcbiAgICAgICAgICA6IG9wdHM/LmJvZHkgaW5zdGFuY2VvZiBEYXRhVmlldyA/IG9wdHMuYm9keVxuICAgICAgICAgIDogb3B0cz8uYm9keSBpbnN0YW5jZW9mIEFycmF5QnVmZmVyID8gbmV3IERhdGFWaWV3KG9wdHMuYm9keSlcbiAgICAgICAgICA6IG9wdHMgJiYgQXJyYXlCdWZmZXIuaXNWaWV3KG9wdHM/LmJvZHkpID8gbmV3IERhdGFWaWV3KG9wdHMuYm9keS5idWZmZXIpXG4gICAgICAgICAgOiBvcHRzPy5ib2R5O1xuICAgICAgICByZXR1cm4geyBtZXRob2QsIHBhdGgsIC4uLm9wdHMsIGJvZHkgfTtcbiAgICAgIH0pLFxuICAgICk7XG4gIH1cblxuICBnZXRBUElMaXN0PEl0ZW0sIFBhZ2VDbGFzcyBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPiA9IEFic3RyYWN0UGFnZTxJdGVtPj4oXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIFBhZ2U6IG5ldyAoLi4uYXJnczogYW55W10pID0+IFBhZ2VDbGFzcyxcbiAgICBvcHRzPzogUmVxdWVzdE9wdGlvbnM8YW55PixcbiAgKTogUGFnZVByb21pc2U8UGFnZUNsYXNzLCBJdGVtPiB7XG4gICAgcmV0dXJuIHRoaXMucmVxdWVzdEFQSUxpc3QoUGFnZSwgeyBtZXRob2Q6ICdnZXQnLCBwYXRoLCAuLi5vcHRzIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVDb250ZW50TGVuZ3RoKGJvZHk6IHVua25vd24pOiBzdHJpbmcgfCBudWxsIHtcbiAgICBpZiAodHlwZW9mIGJvZHkgPT09ICdzdHJpbmcnKSB7XG4gICAgICBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5ieXRlTGVuZ3RoKGJvZHksICd1dGY4JykudG9TdHJpbmcoKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBUZXh0RW5jb2RlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgICAgY29uc3QgZW5jb2RlciA9IG5ldyBUZXh0RW5jb2RlcigpO1xuICAgICAgICBjb25zdCBlbmNvZGVkID0gZW5jb2Rlci5lbmNvZGUoYm9keSk7XG4gICAgICAgIHJldHVybiBlbmNvZGVkLmxlbmd0aC50b1N0cmluZygpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KGJvZHkpKSB7XG4gICAgICByZXR1cm4gYm9keS5ieXRlTGVuZ3RoLnRvU3RyaW5nKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cblxuICBidWlsZFJlcXVlc3Q8UmVxPihcbiAgICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zPFJlcT4sXG4gICAgeyByZXRyeUNvdW50ID0gMCB9OiB7IHJldHJ5Q291bnQ/OiBudW1iZXIgfSA9IHt9LFxuICApOiB7IHJlcTogUmVxdWVzdEluaXQ7IHVybDogc3RyaW5nOyB0aW1lb3V0OiBudW1iZXIgfSB7XG4gICAgY29uc3QgeyBtZXRob2QsIHBhdGgsIHF1ZXJ5LCBoZWFkZXJzOiBoZWFkZXJzID0ge30gfSA9IG9wdGlvbnM7XG5cbiAgICBjb25zdCBib2R5ID1cbiAgICAgIEFycmF5QnVmZmVyLmlzVmlldyhvcHRpb25zLmJvZHkpIHx8IChvcHRpb25zLl9fYmluYXJ5UmVxdWVzdCAmJiB0eXBlb2Ygb3B0aW9ucy5ib2R5ID09PSAnc3RyaW5nJykgP1xuICAgICAgICBvcHRpb25zLmJvZHlcbiAgICAgIDogaXNNdWx0aXBhcnRCb2R5KG9wdGlvbnMuYm9keSkgPyBvcHRpb25zLmJvZHkuYm9keVxuICAgICAgOiBvcHRpb25zLmJvZHkgPyBKU09OLnN0cmluZ2lmeShvcHRpb25zLmJvZHksIG51bGwsIDIpXG4gICAgICA6IG51bGw7XG4gICAgY29uc3QgY29udGVudExlbmd0aCA9IHRoaXMuY2FsY3VsYXRlQ29udGVudExlbmd0aChib2R5KTtcblxuICAgIGNvbnN0IHVybCA9IHRoaXMuYnVpbGRVUkwocGF0aCEsIHF1ZXJ5KTtcbiAgICBpZiAoJ3RpbWVvdXQnIGluIG9wdGlvbnMpIHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKCd0aW1lb3V0Jywgb3B0aW9ucy50aW1lb3V0KTtcbiAgICBjb25zdCB0aW1lb3V0ID0gb3B0aW9ucy50aW1lb3V0ID8/IHRoaXMudGltZW91dDtcbiAgICBjb25zdCBodHRwQWdlbnQgPSBvcHRpb25zLmh0dHBBZ2VudCA/PyB0aGlzLmh0dHBBZ2VudCA/PyBnZXREZWZhdWx0QWdlbnQodXJsKTtcbiAgICBjb25zdCBtaW5BZ2VudFRpbWVvdXQgPSB0aW1lb3V0ICsgMTAwMDtcbiAgICBpZiAoXG4gICAgICB0eXBlb2YgKGh0dHBBZ2VudCBhcyBhbnkpPy5vcHRpb25zPy50aW1lb3V0ID09PSAnbnVtYmVyJyAmJlxuICAgICAgbWluQWdlbnRUaW1lb3V0ID4gKChodHRwQWdlbnQgYXMgYW55KS5vcHRpb25zLnRpbWVvdXQgPz8gMClcbiAgICApIHtcbiAgICAgIC8vIEFsbG93IGFueSBnaXZlbiByZXF1ZXN0IHRvIGJ1bXAgb3VyIGFnZW50IGFjdGl2ZSBzb2NrZXQgdGltZW91dC5cbiAgICAgIC8vIFRoaXMgbWF5IHNlZW0gc3RyYW5nZSwgYnV0IGxlYWtpbmcgYWN0aXZlIHNvY2tldHMgc2hvdWxkIGJlIHJhcmUgYW5kIG5vdCBwYXJ0aWN1bGFybHkgcHJvYmxlbWF0aWMsXG4gICAgICAvLyBhbmQgd2l0aG91dCBtdXRhdGluZyBhZ2VudCB3ZSB3b3VsZCBuZWVkIHRvIGNyZWF0ZSBtb3JlIG9mIHRoZW0uXG4gICAgICAvLyBUaGlzIHRyYWRlb2ZmIG9wdGltaXplcyBmb3IgcGVyZm9ybWFuY2UuXG4gICAgICAoaHR0cEFnZW50IGFzIGFueSkub3B0aW9ucy50aW1lb3V0ID0gbWluQWdlbnRUaW1lb3V0O1xuICAgIH1cblxuICAgIGlmICh0aGlzLmlkZW1wb3RlbmN5SGVhZGVyICYmIG1ldGhvZCAhPT0gJ2dldCcpIHtcbiAgICAgIGlmICghb3B0aW9ucy5pZGVtcG90ZW5jeUtleSkgb3B0aW9ucy5pZGVtcG90ZW5jeUtleSA9IHRoaXMuZGVmYXVsdElkZW1wb3RlbmN5S2V5KCk7XG4gICAgICBoZWFkZXJzW3RoaXMuaWRlbXBvdGVuY3lIZWFkZXJdID0gb3B0aW9ucy5pZGVtcG90ZW5jeUtleTtcbiAgICB9XG5cbiAgICBjb25zdCByZXFIZWFkZXJzID0gdGhpcy5idWlsZEhlYWRlcnMoeyBvcHRpb25zLCBoZWFkZXJzLCBjb250ZW50TGVuZ3RoLCByZXRyeUNvdW50IH0pO1xuXG4gICAgY29uc3QgcmVxOiBSZXF1ZXN0SW5pdCA9IHtcbiAgICAgIG1ldGhvZCxcbiAgICAgIC4uLihib2R5ICYmIHsgYm9keTogYm9keSBhcyBhbnkgfSksXG4gICAgICBoZWFkZXJzOiByZXFIZWFkZXJzLFxuICAgICAgLi4uKGh0dHBBZ2VudCAmJiB7IGFnZW50OiBodHRwQWdlbnQgfSksXG4gICAgICAvLyBAdHMtaWdub3JlIG5vZGUtZmV0Y2ggdXNlcyBhIGN1c3RvbSBBYm9ydFNpZ25hbCB0eXBlIHRoYXQgaXNcbiAgICAgIC8vIG5vdCBjb21wYXRpYmxlIHdpdGggc3RhbmRhcmQgd2ViIHR5cGVzXG4gICAgICBzaWduYWw6IG9wdGlvbnMuc2lnbmFsID8/IG51bGwsXG4gICAgfTtcblxuICAgIHJldHVybiB7IHJlcSwgdXJsLCB0aW1lb3V0IH07XG4gIH1cblxuICBwcml2YXRlIGJ1aWxkSGVhZGVycyh7XG4gICAgb3B0aW9ucyxcbiAgICBoZWFkZXJzLFxuICAgIGNvbnRlbnRMZW5ndGgsXG4gICAgcmV0cnlDb3VudCxcbiAgfToge1xuICAgIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnM7XG4gICAgaGVhZGVyczogUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZD47XG4gICAgY29udGVudExlbmd0aDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgICByZXRyeUNvdW50OiBudW1iZXI7XG4gIH0pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICBjb25zdCByZXFIZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0ge307XG4gICAgaWYgKGNvbnRlbnRMZW5ndGgpIHtcbiAgICAgIHJlcUhlYWRlcnNbJ2NvbnRlbnQtbGVuZ3RoJ10gPSBjb250ZW50TGVuZ3RoO1xuICAgIH1cblxuICAgIGNvbnN0IGRlZmF1bHRIZWFkZXJzID0gdGhpcy5kZWZhdWx0SGVhZGVycyhvcHRpb25zKTtcbiAgICBhcHBseUhlYWRlcnNNdXQocmVxSGVhZGVycywgZGVmYXVsdEhlYWRlcnMpO1xuICAgIGFwcGx5SGVhZGVyc011dChyZXFIZWFkZXJzLCBoZWFkZXJzKTtcblxuICAgIC8vIGxldCBidWlsdGluIGZldGNoIHNldCB0aGUgQ29udGVudC1UeXBlIGZvciBtdWx0aXBhcnQgYm9kaWVzXG4gICAgaWYgKGlzTXVsdGlwYXJ0Qm9keShvcHRpb25zLmJvZHkpICYmIHNoaW1zS2luZCAhPT0gJ25vZGUnKSB7XG4gICAgICBkZWxldGUgcmVxSGVhZGVyc1snY29udGVudC10eXBlJ107XG4gICAgfVxuXG4gICAgLy8gRG9uJ3Qgc2V0IHRoZSByZXRyeSBjb3VudCBoZWFkZXIgaWYgaXQgd2FzIGFscmVhZHkgc2V0IG9yIHJlbW92ZWQgdGhyb3VnaCBkZWZhdWx0IGhlYWRlcnMgb3IgYnkgdGhlXG4gICAgLy8gY2FsbGVyLiBXZSBjaGVjayBgZGVmYXVsdEhlYWRlcnNgIGFuZCBgaGVhZGVyc2AsIHdoaWNoIGNhbiBjb250YWluIG51bGxzLCBpbnN0ZWFkIG9mIGByZXFIZWFkZXJzYCB0b1xuICAgIC8vIGFjY291bnQgZm9yIHRoZSByZW1vdmFsIGNhc2UuXG4gICAgaWYgKFxuICAgICAgZ2V0SGVhZGVyKGRlZmF1bHRIZWFkZXJzLCAneC1zdGFpbmxlc3MtcmV0cnktY291bnQnKSA9PT0gdW5kZWZpbmVkICYmXG4gICAgICBnZXRIZWFkZXIoaGVhZGVycywgJ3gtc3RhaW5sZXNzLXJldHJ5LWNvdW50JykgPT09IHVuZGVmaW5lZFxuICAgICkge1xuICAgICAgcmVxSGVhZGVyc1sneC1zdGFpbmxlc3MtcmV0cnktY291bnQnXSA9IFN0cmluZyhyZXRyeUNvdW50KTtcbiAgICB9XG5cbiAgICB0aGlzLnZhbGlkYXRlSGVhZGVycyhyZXFIZWFkZXJzLCBoZWFkZXJzKTtcblxuICAgIHJldHVybiByZXFIZWFkZXJzO1xuICB9XG5cbiAgLyoqXG4gICAqIFVzZWQgYXMgYSBjYWxsYmFjayBmb3IgbXV0YXRpbmcgdGhlIGdpdmVuIGBGaW5hbFJlcXVlc3RPcHRpb25zYCBvYmplY3QuXG4gICAqL1xuICBwcm90ZWN0ZWQgYXN5bmMgcHJlcGFyZU9wdGlvbnMob3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge31cblxuICAvKipcbiAgICogVXNlZCBhcyBhIGNhbGxiYWNrIGZvciBtdXRhdGluZyB0aGUgZ2l2ZW4gYFJlcXVlc3RJbml0YCBvYmplY3QuXG4gICAqXG4gICAqIFRoaXMgaXMgdXNlZnVsIGZvciBjYXNlcyB3aGVyZSB5b3Ugd2FudCB0byBhZGQgY2VydGFpbiBoZWFkZXJzIGJhc2VkIG9mZiBvZlxuICAgKiB0aGUgcmVxdWVzdCBwcm9wZXJ0aWVzLCBlLmcuIGBtZXRob2RgIG9yIGB1cmxgLlxuICAgKi9cbiAgcHJvdGVjdGVkIGFzeW5jIHByZXBhcmVSZXF1ZXN0KFxuICAgIHJlcXVlc3Q6IFJlcXVlc3RJbml0LFxuICAgIHsgdXJsLCBvcHRpb25zIH06IHsgdXJsOiBzdHJpbmc7IG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnMgfSxcbiAgKTogUHJvbWlzZTx2b2lkPiB7fVxuXG4gIHByb3RlY3RlZCBwYXJzZUhlYWRlcnMoaGVhZGVyczogSGVhZGVyc0luaXQgfCBudWxsIHwgdW5kZWZpbmVkKTogUmVjb3JkPHN0cmluZywgc3RyaW5nPiB7XG4gICAgcmV0dXJuIChcbiAgICAgICFoZWFkZXJzID8ge31cbiAgICAgIDogU3ltYm9sLml0ZXJhdG9yIGluIGhlYWRlcnMgP1xuICAgICAgICBPYmplY3QuZnJvbUVudHJpZXMoQXJyYXkuZnJvbShoZWFkZXJzIGFzIEl0ZXJhYmxlPHN0cmluZ1tdPikubWFwKChoZWFkZXIpID0+IFsuLi5oZWFkZXJdKSlcbiAgICAgIDogeyAuLi5oZWFkZXJzIH1cbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIG1ha2VTdGF0dXNFcnJvcihcbiAgICBzdGF0dXM6IG51bWJlciB8IHVuZGVmaW5lZCxcbiAgICBlcnJvcjogT2JqZWN0IHwgdW5kZWZpbmVkLFxuICAgIG1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBoZWFkZXJzOiBIZWFkZXJzIHwgdW5kZWZpbmVkLFxuICApOiBBUElFcnJvciB7XG4gICAgcmV0dXJuIEFQSUVycm9yLmdlbmVyYXRlKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICB9XG5cbiAgcmVxdWVzdDxSZXEsIFJzcD4oXG4gICAgb3B0aW9uczogUHJvbWlzZU9yVmFsdWU8RmluYWxSZXF1ZXN0T3B0aW9uczxSZXE+PixcbiAgICByZW1haW5pbmdSZXRyaWVzOiBudW1iZXIgfCBudWxsID0gbnVsbCxcbiAgKTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gbmV3IEFQSVByb21pc2UodGhpcy5tYWtlUmVxdWVzdChvcHRpb25zLCByZW1haW5pbmdSZXRyaWVzKSk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIG1ha2VSZXF1ZXN0PFJlcT4oXG4gICAgb3B0aW9uc0lucHV0OiBQcm9taXNlT3JWYWx1ZTxGaW5hbFJlcXVlc3RPcHRpb25zPFJlcT4+LFxuICAgIHJldHJpZXNSZW1haW5pbmc6IG51bWJlciB8IG51bGwsXG4gICk6IFByb21pc2U8QVBJUmVzcG9uc2VQcm9wcz4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBvcHRpb25zSW5wdXQ7XG4gICAgY29uc3QgbWF4UmV0cmllcyA9IG9wdGlvbnMubWF4UmV0cmllcyA/PyB0aGlzLm1heFJldHJpZXM7XG4gICAgaWYgKHJldHJpZXNSZW1haW5pbmcgPT0gbnVsbCkge1xuICAgICAgcmV0cmllc1JlbWFpbmluZyA9IG1heFJldHJpZXM7XG4gICAgfVxuXG4gICAgYXdhaXQgdGhpcy5wcmVwYXJlT3B0aW9ucyhvcHRpb25zKTtcblxuICAgIGNvbnN0IHsgcmVxLCB1cmwsIHRpbWVvdXQgfSA9IHRoaXMuYnVpbGRSZXF1ZXN0KG9wdGlvbnMsIHsgcmV0cnlDb3VudDogbWF4UmV0cmllcyAtIHJldHJpZXNSZW1haW5pbmcgfSk7XG5cbiAgICBhd2FpdCB0aGlzLnByZXBhcmVSZXF1ZXN0KHJlcSwgeyB1cmwsIG9wdGlvbnMgfSk7XG5cbiAgICBkZWJ1ZygncmVxdWVzdCcsIHVybCwgb3B0aW9ucywgcmVxLmhlYWRlcnMpO1xuXG4gICAgaWYgKG9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJVXNlckFib3J0RXJyb3IoKTtcbiAgICB9XG5cbiAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy5mZXRjaFdpdGhUaW1lb3V0KHVybCwgcmVxLCB0aW1lb3V0LCBjb250cm9sbGVyKS5jYXRjaChjYXN0VG9FcnJvcik7XG5cbiAgICBpZiAocmVzcG9uc2UgaW5zdGFuY2VvZiBFcnJvcikge1xuICAgICAgaWYgKG9wdGlvbnMuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgICAgfVxuICAgICAgaWYgKHJldHJpZXNSZW1haW5pbmcpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmV0cnlSZXF1ZXN0KG9wdGlvbnMsIHJldHJpZXNSZW1haW5pbmcpO1xuICAgICAgfVxuICAgICAgaWYgKHJlc3BvbnNlLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xuICAgICAgICB0aHJvdyBuZXcgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcigpO1xuICAgICAgfVxuICAgICAgdGhyb3cgbmV3IEFQSUNvbm5lY3Rpb25FcnJvcih7IGNhdXNlOiByZXNwb25zZSB9KTtcbiAgICB9XG5cbiAgICBjb25zdCByZXNwb25zZUhlYWRlcnMgPSBjcmVhdGVSZXNwb25zZUhlYWRlcnMocmVzcG9uc2UuaGVhZGVycyk7XG5cbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XG4gICAgICBpZiAocmV0cmllc1JlbWFpbmluZyAmJiB0aGlzLnNob3VsZFJldHJ5KHJlc3BvbnNlKSkge1xuICAgICAgICBjb25zdCByZXRyeU1lc3NhZ2UgPSBgcmV0cnlpbmcsICR7cmV0cmllc1JlbWFpbmluZ30gYXR0ZW1wdHMgcmVtYWluaW5nYDtcbiAgICAgICAgZGVidWcoYHJlc3BvbnNlIChlcnJvcjsgJHtyZXRyeU1lc3NhZ2V9KWAsIHJlc3BvbnNlLnN0YXR1cywgdXJsLCByZXNwb25zZUhlYWRlcnMpO1xuICAgICAgICByZXR1cm4gdGhpcy5yZXRyeVJlcXVlc3Qob3B0aW9ucywgcmV0cmllc1JlbWFpbmluZywgcmVzcG9uc2VIZWFkZXJzKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgZXJyVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoZSkgPT4gY2FzdFRvRXJyb3IoZSkubWVzc2FnZSk7XG4gICAgICBjb25zdCBlcnJKU09OID0gc2FmZUpTT04oZXJyVGV4dCk7XG4gICAgICBjb25zdCBlcnJNZXNzYWdlID0gZXJySlNPTiA/IHVuZGVmaW5lZCA6IGVyclRleHQ7XG4gICAgICBjb25zdCByZXRyeU1lc3NhZ2UgPSByZXRyaWVzUmVtYWluaW5nID8gYChlcnJvcjsgbm8gbW9yZSByZXRyaWVzIGxlZnQpYCA6IGAoZXJyb3I7IG5vdCByZXRyeWFibGUpYDtcblxuICAgICAgZGVidWcoYHJlc3BvbnNlIChlcnJvcjsgJHtyZXRyeU1lc3NhZ2V9KWAsIHJlc3BvbnNlLnN0YXR1cywgdXJsLCByZXNwb25zZUhlYWRlcnMsIGVyck1lc3NhZ2UpO1xuXG4gICAgICBjb25zdCBlcnIgPSB0aGlzLm1ha2VTdGF0dXNFcnJvcihyZXNwb25zZS5zdGF0dXMsIGVyckpTT04sIGVyck1lc3NhZ2UsIHJlc3BvbnNlSGVhZGVycyk7XG4gICAgICB0aHJvdyBlcnI7XG4gICAgfVxuXG4gICAgcmV0dXJuIHsgcmVzcG9uc2UsIG9wdGlvbnMsIGNvbnRyb2xsZXIgfTtcbiAgfVxuXG4gIHJlcXVlc3RBUElMaXN0PEl0ZW0gPSB1bmtub3duLCBQYWdlQ2xhc3MgZXh0ZW5kcyBBYnN0cmFjdFBhZ2U8SXRlbT4gPSBBYnN0cmFjdFBhZ2U8SXRlbT4+KFxuICAgIFBhZ2U6IG5ldyAoLi4uYXJnczogQ29uc3RydWN0b3JQYXJhbWV0ZXJzPHR5cGVvZiBBYnN0cmFjdFBhZ2U+KSA9PiBQYWdlQ2xhc3MsXG4gICAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyxcbiAgKTogUGFnZVByb21pc2U8UGFnZUNsYXNzLCBJdGVtPiB7XG4gICAgY29uc3QgcmVxdWVzdCA9IHRoaXMubWFrZVJlcXVlc3Qob3B0aW9ucywgbnVsbCk7XG4gICAgcmV0dXJuIG5ldyBQYWdlUHJvbWlzZTxQYWdlQ2xhc3MsIEl0ZW0+KHRoaXMsIHJlcXVlc3QsIFBhZ2UpO1xuICB9XG5cbiAgYnVpbGRVUkw8UmVxPihwYXRoOiBzdHJpbmcsIHF1ZXJ5OiBSZXEgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nIHtcbiAgICBjb25zdCB1cmwgPVxuICAgICAgaXNBYnNvbHV0ZVVSTChwYXRoKSA/XG4gICAgICAgIG5ldyBVUkwocGF0aClcbiAgICAgIDogbmV3IFVSTCh0aGlzLmJhc2VVUkwgKyAodGhpcy5iYXNlVVJMLmVuZHNXaXRoKCcvJykgJiYgcGF0aC5zdGFydHNXaXRoKCcvJykgPyBwYXRoLnNsaWNlKDEpIDogcGF0aCkpO1xuXG4gICAgY29uc3QgZGVmYXVsdFF1ZXJ5ID0gdGhpcy5kZWZhdWx0UXVlcnkoKTtcbiAgICBpZiAoIWlzRW1wdHlPYmooZGVmYXVsdFF1ZXJ5KSkge1xuICAgICAgcXVlcnkgPSB7IC4uLmRlZmF1bHRRdWVyeSwgLi4ucXVlcnkgfSBhcyBSZXE7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBxdWVyeSA9PT0gJ29iamVjdCcgJiYgcXVlcnkgJiYgIUFycmF5LmlzQXJyYXkocXVlcnkpKSB7XG4gICAgICB1cmwuc2VhcmNoID0gdGhpcy5zdHJpbmdpZnlRdWVyeShxdWVyeSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik7XG4gICAgfVxuXG4gICAgcmV0dXJuIHVybC50b1N0cmluZygpO1xuICB9XG5cbiAgcHJvdGVjdGVkIHN0cmluZ2lmeVF1ZXJ5KHF1ZXJ5OiBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik6IHN0cmluZyB7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKHF1ZXJ5KVxuICAgICAgLmZpbHRlcigoW18sIHZhbHVlXSkgPT4gdHlwZW9mIHZhbHVlICE9PSAndW5kZWZpbmVkJylcbiAgICAgIC5tYXAoKFtrZXksIHZhbHVlXSkgPT4ge1xuICAgICAgICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgICAgICAgcmV0dXJuIGAke2VuY29kZVVSSUNvbXBvbmVudChrZXkpfT0ke2VuY29kZVVSSUNvbXBvbmVudCh2YWx1ZSl9YDtcbiAgICAgICAgfVxuICAgICAgICBpZiAodmFsdWUgPT09IG51bGwpIHtcbiAgICAgICAgICByZXR1cm4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PWA7XG4gICAgICAgIH1cbiAgICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICAgIGBDYW5ub3Qgc3RyaW5naWZ5IHR5cGUgJHt0eXBlb2YgdmFsdWV9OyBFeHBlY3RlZCBzdHJpbmcsIG51bWJlciwgYm9vbGVhbiwgb3IgbnVsbC4gSWYgeW91IG5lZWQgdG8gcGFzcyBuZXN0ZWQgcXVlcnkgcGFyYW1ldGVycywgeW91IGNhbiBtYW51YWxseSBlbmNvZGUgdGhlbSwgZS5nLiB7IHF1ZXJ5OiB7ICdmb29ba2V5MV0nOiB2YWx1ZTEsICdmb29ba2V5Ml0nOiB2YWx1ZTIgfSB9LCBhbmQgcGxlYXNlIG9wZW4gYSBHaXRIdWIgaXNzdWUgcmVxdWVzdGluZyBiZXR0ZXIgc3VwcG9ydCBmb3IgeW91ciB1c2UgY2FzZS5gLFxuICAgICAgICApO1xuICAgICAgfSlcbiAgICAgIC5qb2luKCcmJyk7XG4gIH1cblxuICBhc3luYyBmZXRjaFdpdGhUaW1lb3V0KFxuICAgIHVybDogUmVxdWVzdEluZm8sXG4gICAgaW5pdDogUmVxdWVzdEluaXQgfCB1bmRlZmluZWQsXG4gICAgbXM6IG51bWJlcixcbiAgICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIsXG4gICk6IFByb21pc2U8UmVzcG9uc2U+IHtcbiAgICBjb25zdCB7IHNpZ25hbCwgLi4ub3B0aW9ucyB9ID0gaW5pdCB8fCB7fTtcbiAgICBpZiAoc2lnbmFsKSBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiBjb250cm9sbGVyLmFib3J0KCkpO1xuXG4gICAgY29uc3QgdGltZW91dCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCBtcyk7XG5cbiAgICBjb25zdCBmZXRjaE9wdGlvbnMgPSB7XG4gICAgICBzaWduYWw6IGNvbnRyb2xsZXIuc2lnbmFsIGFzIGFueSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgfTtcbiAgICBpZiAoZmV0Y2hPcHRpb25zLm1ldGhvZCkge1xuICAgICAgLy8gQ3VzdG9tIG1ldGhvZHMgbGlrZSAncGF0Y2gnIG5lZWQgdG8gYmUgdXBwZXJjYXNlZFxuICAgICAgLy8gU2VlIGh0dHBzOi8vZ2l0aHViLmNvbS9ub2RlanMvdW5kaWNpL2lzc3Vlcy8yMjk0XG4gICAgICBmZXRjaE9wdGlvbnMubWV0aG9kID0gZmV0Y2hPcHRpb25zLm1ldGhvZC50b1VwcGVyQ2FzZSgpO1xuICAgIH1cblxuICAgIHJldHVybiAoXG4gICAgICAvLyB1c2UgdW5kZWZpbmVkIHRoaXMgYmluZGluZzsgZmV0Y2ggZXJyb3JzIGlmIGJvdW5kIHRvIHNvbWV0aGluZyBlbHNlIGluIGJyb3dzZXIvY2xvdWRmbGFyZVxuICAgICAgdGhpcy5mZXRjaC5jYWxsKHVuZGVmaW5lZCwgdXJsLCBmZXRjaE9wdGlvbnMpLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgICBjbGVhclRpbWVvdXQodGltZW91dCk7XG4gICAgICB9KVxuICAgICk7XG4gIH1cblxuICBwcml2YXRlIHNob3VsZFJldHJ5KHJlc3BvbnNlOiBSZXNwb25zZSk6IGJvb2xlYW4ge1xuICAgIC8vIE5vdGUgdGhpcyBpcyBub3QgYSBzdGFuZGFyZCBoZWFkZXIuXG4gICAgY29uc3Qgc2hvdWxkUmV0cnlIZWFkZXIgPSByZXNwb25zZS5oZWFkZXJzLmdldCgneC1zaG91bGQtcmV0cnknKTtcblxuICAgIC8vIElmIHRoZSBzZXJ2ZXIgZXhwbGljaXRseSBzYXlzIHdoZXRoZXIgb3Igbm90IHRvIHJldHJ5LCBvYmV5LlxuICAgIGlmIChzaG91bGRSZXRyeUhlYWRlciA9PT0gJ3RydWUnKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoc2hvdWxkUmV0cnlIZWFkZXIgPT09ICdmYWxzZScpIHJldHVybiBmYWxzZTtcblxuICAgIC8vIFJldHJ5IG9uIHJlcXVlc3QgdGltZW91dHMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA4KSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFJldHJ5IG9uIGxvY2sgdGltZW91dHMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDA5KSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFJldHJ5IG9uIHJhdGUgbGltaXRzLlxuICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDQyOSkgcmV0dXJuIHRydWU7XG5cbiAgICAvLyBSZXRyeSBpbnRlcm5hbCBlcnJvcnMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA+PSA1MDApIHJldHVybiB0cnVlO1xuXG4gICAgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyByZXRyeVJlcXVlc3QoXG4gICAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyxcbiAgICByZXRyaWVzUmVtYWluaW5nOiBudW1iZXIsXG4gICAgcmVzcG9uc2VIZWFkZXJzPzogSGVhZGVycyB8IHVuZGVmaW5lZCxcbiAgKTogUHJvbWlzZTxBUElSZXNwb25zZVByb3BzPiB7XG4gICAgbGV0IHRpbWVvdXRNaWxsaXM6IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAgIC8vIE5vdGUgdGhlIGByZXRyeS1hZnRlci1tc2AgaGVhZGVyIG1heSBub3QgYmUgc3RhbmRhcmQsIGJ1dCBpcyBhIGdvb2QgaWRlYSBhbmQgd2UnZCBsaWtlIHByb2FjdGl2ZSBzdXBwb3J0IGZvciBpdC5cbiAgICBjb25zdCByZXRyeUFmdGVyTWlsbGlzSGVhZGVyID0gcmVzcG9uc2VIZWFkZXJzPy5bJ3JldHJ5LWFmdGVyLW1zJ107XG4gICAgaWYgKHJldHJ5QWZ0ZXJNaWxsaXNIZWFkZXIpIHtcbiAgICAgIGNvbnN0IHRpbWVvdXRNcyA9IHBhcnNlRmxvYXQocmV0cnlBZnRlck1pbGxpc0hlYWRlcik7XG4gICAgICBpZiAoIU51bWJlci5pc05hTih0aW1lb3V0TXMpKSB7XG4gICAgICAgIHRpbWVvdXRNaWxsaXMgPSB0aW1lb3V0TXM7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gQWJvdXQgdGhlIFJldHJ5LUFmdGVyIGhlYWRlcjogaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZW4tVVMvZG9jcy9XZWIvSFRUUC9IZWFkZXJzL1JldHJ5LUFmdGVyXG4gICAgY29uc3QgcmV0cnlBZnRlckhlYWRlciA9IHJlc3BvbnNlSGVhZGVycz8uWydyZXRyeS1hZnRlciddO1xuICAgIGlmIChyZXRyeUFmdGVySGVhZGVyICYmICF0aW1lb3V0TWlsbGlzKSB7XG4gICAgICBjb25zdCB0aW1lb3V0U2Vjb25kcyA9IHBhcnNlRmxvYXQocmV0cnlBZnRlckhlYWRlcik7XG4gICAgICBpZiAoIU51bWJlci5pc05hTih0aW1lb3V0U2Vjb25kcykpIHtcbiAgICAgICAgdGltZW91dE1pbGxpcyA9IHRpbWVvdXRTZWNvbmRzICogMTAwMDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRpbWVvdXRNaWxsaXMgPSBEYXRlLnBhcnNlKHJldHJ5QWZ0ZXJIZWFkZXIpIC0gRGF0ZS5ub3coKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBJZiB0aGUgQVBJIGFza3MgdXMgdG8gd2FpdCBhIGNlcnRhaW4gYW1vdW50IG9mIHRpbWUgKGFuZCBpdCdzIGEgcmVhc29uYWJsZSBhbW91bnQpLFxuICAgIC8vIGp1c3QgZG8gd2hhdCBpdCBzYXlzLCBidXQgb3RoZXJ3aXNlIGNhbGN1bGF0ZSBhIGRlZmF1bHRcbiAgICBpZiAoISh0aW1lb3V0TWlsbGlzICYmIDAgPD0gdGltZW91dE1pbGxpcyAmJiB0aW1lb3V0TWlsbGlzIDwgNjAgKiAxMDAwKSkge1xuICAgICAgY29uc3QgbWF4UmV0cmllcyA9IG9wdGlvbnMubWF4UmV0cmllcyA/PyB0aGlzLm1heFJldHJpZXM7XG4gICAgICB0aW1lb3V0TWlsbGlzID0gdGhpcy5jYWxjdWxhdGVEZWZhdWx0UmV0cnlUaW1lb3V0TWlsbGlzKHJldHJpZXNSZW1haW5pbmcsIG1heFJldHJpZXMpO1xuICAgIH1cbiAgICBhd2FpdCBzbGVlcCh0aW1lb3V0TWlsbGlzKTtcblxuICAgIHJldHVybiB0aGlzLm1ha2VSZXF1ZXN0KG9wdGlvbnMsIHJldHJpZXNSZW1haW5pbmcgLSAxKTtcbiAgfVxuXG4gIHByaXZhdGUgY2FsY3VsYXRlRGVmYXVsdFJldHJ5VGltZW91dE1pbGxpcyhyZXRyaWVzUmVtYWluaW5nOiBudW1iZXIsIG1heFJldHJpZXM6IG51bWJlcik6IG51bWJlciB7XG4gICAgY29uc3QgaW5pdGlhbFJldHJ5RGVsYXkgPSAwLjU7XG4gICAgY29uc3QgbWF4UmV0cnlEZWxheSA9IDguMDtcblxuICAgIGNvbnN0IG51bVJldHJpZXMgPSBtYXhSZXRyaWVzIC0gcmV0cmllc1JlbWFpbmluZztcblxuICAgIC8vIEFwcGx5IGV4cG9uZW50aWFsIGJhY2tvZmYsIGJ1dCBub3QgbW9yZSB0aGFuIHRoZSBtYXguXG4gICAgY29uc3Qgc2xlZXBTZWNvbmRzID0gTWF0aC5taW4oaW5pdGlhbFJldHJ5RGVsYXkgKiBNYXRoLnBvdygyLCBudW1SZXRyaWVzKSwgbWF4UmV0cnlEZWxheSk7XG5cbiAgICAvLyBBcHBseSBzb21lIGppdHRlciwgdGFrZSB1cCB0byBhdCBtb3N0IDI1IHBlcmNlbnQgb2YgdGhlIHJldHJ5IHRpbWUuXG4gICAgY29uc3Qgaml0dGVyID0gMSAtIE1hdGgucmFuZG9tKCkgKiAwLjI1O1xuXG4gICAgcmV0dXJuIHNsZWVwU2Vjb25kcyAqIGppdHRlciAqIDEwMDA7XG4gIH1cblxuICBwcml2YXRlIGdldFVzZXJBZ2VudCgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgJHt0aGlzLmNvbnN0cnVjdG9yLm5hbWV9L0pTICR7VkVSU0lPTn1gO1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIFBhZ2VJbmZvID0geyB1cmw6IFVSTCB9IHwgeyBwYXJhbXM6IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgbnVsbCB9O1xuXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQWJzdHJhY3RQYWdlPEl0ZW0+IGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZTxJdGVtPiB7XG4gICNjbGllbnQ6IEFQSUNsaWVudDtcbiAgcHJvdGVjdGVkIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnM7XG5cbiAgcHJvdGVjdGVkIHJlc3BvbnNlOiBSZXNwb25zZTtcbiAgcHJvdGVjdGVkIGJvZHk6IHVua25vd247XG5cbiAgY29uc3RydWN0b3IoY2xpZW50OiBBUElDbGllbnQsIHJlc3BvbnNlOiBSZXNwb25zZSwgYm9keTogdW5rbm93biwgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucykge1xuICAgIHRoaXMuI2NsaWVudCA9IGNsaWVudDtcbiAgICB0aGlzLm9wdGlvbnMgPSBvcHRpb25zO1xuICAgIHRoaXMucmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLmJvZHkgPSBib2R5O1xuICB9XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIFVzZSBuZXh0UGFnZUluZm8gaW5zdGVhZFxuICAgKi9cbiAgYWJzdHJhY3QgbmV4dFBhZ2VQYXJhbXMoKTogUGFydGlhbDxSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4gfCBudWxsO1xuICBhYnN0cmFjdCBuZXh0UGFnZUluZm8oKTogUGFnZUluZm8gfCBudWxsO1xuXG4gIGFic3RyYWN0IGdldFBhZ2luYXRlZEl0ZW1zKCk6IEl0ZW1bXTtcblxuICBoYXNOZXh0UGFnZSgpOiBib29sZWFuIHtcbiAgICBjb25zdCBpdGVtcyA9IHRoaXMuZ2V0UGFnaW5hdGVkSXRlbXMoKTtcbiAgICBpZiAoIWl0ZW1zLmxlbmd0aCkgcmV0dXJuIGZhbHNlO1xuICAgIHJldHVybiB0aGlzLm5leHRQYWdlSW5mbygpICE9IG51bGw7XG4gIH1cblxuICBhc3luYyBnZXROZXh0UGFnZSgpOiBQcm9taXNlPHRoaXM+IHtcbiAgICBjb25zdCBuZXh0SW5mbyA9IHRoaXMubmV4dFBhZ2VJbmZvKCk7XG4gICAgaWYgKCFuZXh0SW5mbykge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICAnTm8gbmV4dCBwYWdlIGV4cGVjdGVkOyBwbGVhc2UgY2hlY2sgYC5oYXNOZXh0UGFnZSgpYCBiZWZvcmUgY2FsbGluZyBgLmdldE5leHRQYWdlKClgLicsXG4gICAgICApO1xuICAgIH1cbiAgICBjb25zdCBuZXh0T3B0aW9ucyA9IHsgLi4udGhpcy5vcHRpb25zIH07XG4gICAgaWYgKCdwYXJhbXMnIGluIG5leHRJbmZvICYmIHR5cGVvZiBuZXh0T3B0aW9ucy5xdWVyeSA9PT0gJ29iamVjdCcpIHtcbiAgICAgIG5leHRPcHRpb25zLnF1ZXJ5ID0geyAuLi5uZXh0T3B0aW9ucy5xdWVyeSwgLi4ubmV4dEluZm8ucGFyYW1zIH07XG4gICAgfSBlbHNlIGlmICgndXJsJyBpbiBuZXh0SW5mbykge1xuICAgICAgY29uc3QgcGFyYW1zID0gWy4uLk9iamVjdC5lbnRyaWVzKG5leHRPcHRpb25zLnF1ZXJ5IHx8IHt9KSwgLi4ubmV4dEluZm8udXJsLnNlYXJjaFBhcmFtcy5lbnRyaWVzKCldO1xuICAgICAgZm9yIChjb25zdCBba2V5LCB2YWx1ZV0gb2YgcGFyYW1zKSB7XG4gICAgICAgIG5leHRJbmZvLnVybC5zZWFyY2hQYXJhbXMuc2V0KGtleSwgdmFsdWUgYXMgYW55KTtcbiAgICAgIH1cbiAgICAgIG5leHRPcHRpb25zLnF1ZXJ5ID0gdW5kZWZpbmVkO1xuICAgICAgbmV4dE9wdGlvbnMucGF0aCA9IG5leHRJbmZvLnVybC50b1N0cmluZygpO1xuICAgIH1cbiAgICByZXR1cm4gYXdhaXQgdGhpcy4jY2xpZW50LnJlcXVlc3RBUElMaXN0KHRoaXMuY29uc3RydWN0b3IgYXMgYW55LCBuZXh0T3B0aW9ucyk7XG4gIH1cblxuICBhc3luYyAqaXRlclBhZ2VzKCk6IEFzeW5jR2VuZXJhdG9yPHRoaXM+IHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLXRoaXMtYWxpYXNcbiAgICBsZXQgcGFnZTogdGhpcyA9IHRoaXM7XG4gICAgeWllbGQgcGFnZTtcbiAgICB3aGlsZSAocGFnZS5oYXNOZXh0UGFnZSgpKSB7XG4gICAgICBwYWdlID0gYXdhaXQgcGFnZS5nZXROZXh0UGFnZSgpO1xuICAgICAgeWllbGQgcGFnZTtcbiAgICB9XG4gIH1cblxuICBhc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0dlbmVyYXRvcjxJdGVtPiB7XG4gICAgZm9yIGF3YWl0IChjb25zdCBwYWdlIG9mIHRoaXMuaXRlclBhZ2VzKCkpIHtcbiAgICAgIGZvciAoY29uc3QgaXRlbSBvZiBwYWdlLmdldFBhZ2luYXRlZEl0ZW1zKCkpIHtcbiAgICAgICAgeWllbGQgaXRlbTtcbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuLyoqXG4gKiBUaGlzIHN1YmNsYXNzIG9mIFByb21pc2Ugd2lsbCByZXNvbHZlIHRvIGFuIGluc3RhbnRpYXRlZCBQYWdlIG9uY2UgdGhlIHJlcXVlc3QgY29tcGxldGVzLlxuICpcbiAqIEl0IGFsc28gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlIHRvIGFsbG93IGF1dG8tcGFnaW5hdGluZyBpdGVyYXRpb24gb24gYW4gdW5hd2FpdGVkIGxpc3QgY2FsbCwgZWc6XG4gKlxuICogICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGNsaWVudC5pdGVtcy5saXN0KCkpIHtcbiAqICAgICAgY29uc29sZS5sb2coaXRlbSlcbiAqICAgIH1cbiAqL1xuZXhwb3J0IGNsYXNzIFBhZ2VQcm9taXNlPFxuICAgIFBhZ2VDbGFzcyBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPixcbiAgICBJdGVtID0gUmV0dXJuVHlwZTxQYWdlQ2xhc3NbJ2dldFBhZ2luYXRlZEl0ZW1zJ10+W251bWJlcl0sXG4gID5cbiAgZXh0ZW5kcyBBUElQcm9taXNlPFBhZ2VDbGFzcz5cbiAgaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPEl0ZW0+XG57XG4gIGNvbnN0cnVjdG9yKFxuICAgIGNsaWVudDogQVBJQ2xpZW50LFxuICAgIHJlcXVlc3Q6IFByb21pc2U8QVBJUmVzcG9uc2VQcm9wcz4sXG4gICAgUGFnZTogbmV3ICguLi5hcmdzOiBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8dHlwZW9mIEFic3RyYWN0UGFnZT4pID0+IFBhZ2VDbGFzcyxcbiAgKSB7XG4gICAgc3VwZXIoXG4gICAgICByZXF1ZXN0LFxuICAgICAgYXN5bmMgKHByb3BzKSA9PlxuICAgICAgICBuZXcgUGFnZShcbiAgICAgICAgICBjbGllbnQsXG4gICAgICAgICAgcHJvcHMucmVzcG9uc2UsXG4gICAgICAgICAgYXdhaXQgZGVmYXVsdFBhcnNlUmVzcG9uc2UocHJvcHMpLFxuICAgICAgICAgIHByb3BzLm9wdGlvbnMsXG4gICAgICAgICkgYXMgV2l0aFJlcXVlc3RJRDxQYWdlQ2xhc3M+LFxuICAgICk7XG4gIH1cblxuICAvKipcbiAgICogQWxsb3cgYXV0by1wYWdpbmF0aW5nIGl0ZXJhdGlvbiBvbiBhbiB1bmF3YWl0ZWQgbGlzdCBjYWxsLCBlZzpcbiAgICpcbiAgICogICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIGNsaWVudC5pdGVtcy5saXN0KCkpIHtcbiAgICogICAgICBjb25zb2xlLmxvZyhpdGVtKVxuICAgKiAgICB9XG4gICAqL1xuICBhc3luYyAqW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpOiBBc3luY0dlbmVyYXRvcjxJdGVtPiB7XG4gICAgY29uc3QgcGFnZSA9IGF3YWl0IHRoaXM7XG4gICAgZm9yIGF3YWl0IChjb25zdCBpdGVtIG9mIHBhZ2UpIHtcbiAgICAgIHlpZWxkIGl0ZW07XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVSZXNwb25zZUhlYWRlcnMgPSAoXG4gIGhlYWRlcnM6IEF3YWl0ZWQ8UmV0dXJuVHlwZTxGZXRjaD4+WydoZWFkZXJzJ10sXG4pOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+ID0+IHtcbiAgcmV0dXJuIG5ldyBQcm94eShcbiAgICBPYmplY3QuZnJvbUVudHJpZXMoXG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBoZWFkZXJzLmVudHJpZXMoKSxcbiAgICApLFxuICAgIHtcbiAgICAgIGdldCh0YXJnZXQsIG5hbWUpIHtcbiAgICAgICAgY29uc3Qga2V5ID0gbmFtZS50b1N0cmluZygpO1xuICAgICAgICByZXR1cm4gdGFyZ2V0W2tleS50b0xvd2VyQ2FzZSgpXSB8fCB0YXJnZXRba2V5XTtcbiAgICAgIH0sXG4gICAgfSxcbiAgKTtcbn07XG5cbnR5cGUgSFRUUE1ldGhvZCA9ICdnZXQnIHwgJ3Bvc3QnIHwgJ3B1dCcgfCAncGF0Y2gnIHwgJ2RlbGV0ZSc7XG5cbmV4cG9ydCB0eXBlIFJlcXVlc3RDbGllbnQgPSB7IGZldGNoOiBGZXRjaCB9O1xuZXhwb3J0IHR5cGUgSGVhZGVycyA9IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ+O1xuZXhwb3J0IHR5cGUgRGVmYXVsdFF1ZXJ5ID0gUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgdW5kZWZpbmVkPjtcbmV4cG9ydCB0eXBlIEtleXNFbnVtPFQ+ID0geyBbUCBpbiBrZXlvZiBSZXF1aXJlZDxUPl06IHRydWUgfTtcblxuZXhwb3J0IHR5cGUgUmVxdWVzdE9wdGlvbnM8XG4gIFJlcSA9IHVua25vd24gfCBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB8IFJlYWRhYmxlIHwgQmxvYkxpa2UgfCBBcnJheUJ1ZmZlclZpZXcgfCBBcnJheUJ1ZmZlcixcbj4gPSB7XG4gIG1ldGhvZD86IEhUVFBNZXRob2Q7XG4gIHBhdGg/OiBzdHJpbmc7XG4gIHF1ZXJ5PzogUmVxIHwgdW5kZWZpbmVkO1xuICBib2R5PzogUmVxIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgaGVhZGVycz86IEhlYWRlcnMgfCB1bmRlZmluZWQ7XG5cbiAgbWF4UmV0cmllcz86IG51bWJlcjtcbiAgc3RyZWFtPzogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbiAgdGltZW91dD86IG51bWJlcjtcbiAgaHR0cEFnZW50PzogQWdlbnQ7XG4gIHNpZ25hbD86IEFib3J0U2lnbmFsIHwgdW5kZWZpbmVkIHwgbnVsbDtcbiAgaWRlbXBvdGVuY3lLZXk/OiBzdHJpbmc7XG5cbiAgX19iaW5hcnlSZXF1ZXN0PzogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbiAgX19iaW5hcnlSZXNwb25zZT86IGJvb2xlYW4gfCB1bmRlZmluZWQ7XG4gIF9fc3RyZWFtQ2xhc3M/OiB0eXBlb2YgU3RyZWFtO1xufTtcblxuLy8gVGhpcyBpcyByZXF1aXJlZCBzbyB0aGF0IHdlIGNhbiBkZXRlcm1pbmUgaWYgYSBnaXZlbiBvYmplY3QgbWF0Y2hlcyB0aGUgUmVxdWVzdE9wdGlvbnNcbi8vIHR5cGUgYXQgcnVudGltZS4gV2hpbGUgdGhpcyByZXF1aXJlcyBkdXBsaWNhdGlvbiwgaXQgaXMgZW5mb3JjZWQgYnkgdGhlIFR5cGVTY3JpcHRcbi8vIGNvbXBpbGVyIHN1Y2ggdGhhdCBhbnkgbWlzc2luZyAvIGV4dHJhbmVvdXMga2V5cyB3aWxsIGNhdXNlIGFuIGVycm9yLlxuY29uc3QgcmVxdWVzdE9wdGlvbnNLZXlzOiBLZXlzRW51bTxSZXF1ZXN0T3B0aW9ucz4gPSB7XG4gIG1ldGhvZDogdHJ1ZSxcbiAgcGF0aDogdHJ1ZSxcbiAgcXVlcnk6IHRydWUsXG4gIGJvZHk6IHRydWUsXG4gIGhlYWRlcnM6IHRydWUsXG5cbiAgbWF4UmV0cmllczogdHJ1ZSxcbiAgc3RyZWFtOiB0cnVlLFxuICB0aW1lb3V0OiB0cnVlLFxuICBodHRwQWdlbnQ6IHRydWUsXG4gIHNpZ25hbDogdHJ1ZSxcbiAgaWRlbXBvdGVuY3lLZXk6IHRydWUsXG5cbiAgX19iaW5hcnlSZXF1ZXN0OiB0cnVlLFxuICBfX2JpbmFyeVJlc3BvbnNlOiB0cnVlLFxuICBfX3N0cmVhbUNsYXNzOiB0cnVlLFxufTtcblxuZXhwb3J0IGNvbnN0IGlzUmVxdWVzdE9wdGlvbnMgPSAob2JqOiB1bmtub3duKTogb2JqIGlzIFJlcXVlc3RPcHRpb25zID0+IHtcbiAgcmV0dXJuIChcbiAgICB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJlxuICAgIG9iaiAhPT0gbnVsbCAmJlxuICAgICFpc0VtcHR5T2JqKG9iaikgJiZcbiAgICBPYmplY3Qua2V5cyhvYmopLmV2ZXJ5KChrKSA9PiBoYXNPd24ocmVxdWVzdE9wdGlvbnNLZXlzLCBrKSlcbiAgKTtcbn07XG5cbmV4cG9ydCB0eXBlIEZpbmFsUmVxdWVzdE9wdGlvbnM8UmVxID0gdW5rbm93biB8IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgUmVhZGFibGUgfCBEYXRhVmlldz4gPVxuICBSZXF1ZXN0T3B0aW9uczxSZXE+ICYge1xuICAgIG1ldGhvZDogSFRUUE1ldGhvZDtcbiAgICBwYXRoOiBzdHJpbmc7XG4gIH07XG5cbmRlY2xhcmUgY29uc3QgRGVubzogYW55O1xuZGVjbGFyZSBjb25zdCBFZGdlUnVudGltZTogYW55O1xudHlwZSBBcmNoID0gJ3gzMicgfCAneDY0JyB8ICdhcm0nIHwgJ2FybTY0JyB8IGBvdGhlcjoke3N0cmluZ31gIHwgJ3Vua25vd24nO1xudHlwZSBQbGF0Zm9ybU5hbWUgPVxuICB8ICdNYWNPUydcbiAgfCAnTGludXgnXG4gIHwgJ1dpbmRvd3MnXG4gIHwgJ0ZyZWVCU0QnXG4gIHwgJ09wZW5CU0QnXG4gIHwgJ2lPUydcbiAgfCAnQW5kcm9pZCdcbiAgfCBgT3RoZXI6JHtzdHJpbmd9YFxuICB8ICdVbmtub3duJztcbnR5cGUgQnJvd3NlciA9ICdpZScgfCAnZWRnZScgfCAnY2hyb21lJyB8ICdmaXJlZm94JyB8ICdzYWZhcmknO1xudHlwZSBQbGF0Zm9ybVByb3BlcnRpZXMgPSB7XG4gICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJztcbiAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IHN0cmluZztcbiAgJ1gtU3RhaW5sZXNzLU9TJzogUGxhdGZvcm1OYW1lO1xuICAnWC1TdGFpbmxlc3MtQXJjaCc6IEFyY2g7XG4gICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ25vZGUnIHwgJ2Rlbm8nIHwgJ2VkZ2UnIHwgYGJyb3dzZXI6JHtCcm93c2VyfWAgfCAndW5rbm93bic7XG4gICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBzdHJpbmc7XG59O1xuY29uc3QgZ2V0UGxhdGZvcm1Qcm9wZXJ0aWVzID0gKCk6IFBsYXRmb3JtUHJvcGVydGllcyA9PiB7XG4gIGlmICh0eXBlb2YgRGVubyAhPT0gJ3VuZGVmaW5lZCcgJiYgRGVuby5idWlsZCAhPSBudWxsKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICAgJ1gtU3RhaW5sZXNzLU9TJzogbm9ybWFsaXplUGxhdGZvcm0oRGVuby5idWlsZC5vcyksXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6IG5vcm1hbGl6ZUFyY2goRGVuby5idWlsZC5hcmNoKSxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ2Rlbm8nLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6XG4gICAgICAgIHR5cGVvZiBEZW5vLnZlcnNpb24gPT09ICdzdHJpbmcnID8gRGVuby52ZXJzaW9uIDogRGVuby52ZXJzaW9uPy5kZW5vID8/ICd1bmtub3duJyxcbiAgICB9O1xuICB9XG4gIGlmICh0eXBlb2YgRWRnZVJ1bnRpbWUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICAgJ1gtU3RhaW5sZXNzLU9TJzogJ1Vua25vd24nLFxuICAgICAgJ1gtU3RhaW5sZXNzLUFyY2gnOiBgb3RoZXI6JHtFZGdlUnVudGltZX1gLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnZWRnZScsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogcHJvY2Vzcy52ZXJzaW9uLFxuICAgIH07XG4gIH1cbiAgLy8gQ2hlY2sgaWYgTm9kZS5qc1xuICBpZiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyA/IHByb2Nlc3MgOiAwKSA9PT0gJ1tvYmplY3QgcHJvY2Vzc10nKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgICdYLVN0YWlubGVzcy1MYW5nJzogJ2pzJyxcbiAgICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICAgJ1gtU3RhaW5sZXNzLU9TJzogbm9ybWFsaXplUGxhdGZvcm0ocHJvY2Vzcy5wbGF0Zm9ybSksXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6IG5vcm1hbGl6ZUFyY2gocHJvY2Vzcy5hcmNoKSxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ25vZGUnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6IHByb2Nlc3MudmVyc2lvbixcbiAgICB9O1xuICB9XG5cbiAgY29uc3QgYnJvd3NlckluZm8gPSBnZXRCcm93c2VySW5mbygpO1xuICBpZiAoYnJvd3NlckluZm8pIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiAnVW5rbm93bicsXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6ICd1bmtub3duJyxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogYGJyb3dzZXI6JHticm93c2VySW5mby5icm93c2VyfWAsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogYnJvd3NlckluZm8udmVyc2lvbixcbiAgICB9O1xuICB9XG5cbiAgLy8gVE9ETyBhZGQgc3VwcG9ydCBmb3IgQ2xvdWRmbGFyZSB3b3JrZXJzLCBldGMuXG4gIHJldHVybiB7XG4gICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICdYLVN0YWlubGVzcy1QYWNrYWdlLVZlcnNpb24nOiBWRVJTSU9OLFxuICAgICdYLVN0YWlubGVzcy1PUyc6ICdVbmtub3duJyxcbiAgICAnWC1TdGFpbmxlc3MtQXJjaCc6ICd1bmtub3duJyxcbiAgICAnWC1TdGFpbmxlc3MtUnVudGltZSc6ICd1bmtub3duJyxcbiAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogJ3Vua25vd24nLFxuICB9O1xufTtcblxudHlwZSBCcm93c2VySW5mbyA9IHtcbiAgYnJvd3NlcjogQnJvd3NlcjtcbiAgdmVyc2lvbjogc3RyaW5nO1xufTtcblxuZGVjbGFyZSBjb25zdCBuYXZpZ2F0b3I6IHsgdXNlckFnZW50OiBzdHJpbmcgfSB8IHVuZGVmaW5lZDtcblxuLy8gTm90ZTogbW9kaWZpZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vSlMtRGV2VG9vbHMvaG9zdC1lbnZpcm9ubWVudC9ibG9iL2IxYWI3OWVjZGUzN2RiNWQ2ZTE2M2MwNTBlNTRmZTdkMjg3ZDdjOTIvc3JjL2lzb21vcnBoaWMuYnJvd3Nlci50c1xuZnVuY3Rpb24gZ2V0QnJvd3NlckluZm8oKTogQnJvd3NlckluZm8gfCBudWxsIHtcbiAgaWYgKHR5cGVvZiBuYXZpZ2F0b3IgPT09ICd1bmRlZmluZWQnIHx8ICFuYXZpZ2F0b3IpIHtcbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIC8vIE5PVEU6IFRoZSBvcmRlciBtYXR0ZXJzIGhlcmUhXG4gIGNvbnN0IGJyb3dzZXJQYXR0ZXJucyA9IFtcbiAgICB7IGtleTogJ2VkZ2UnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvRWRnZSg/OlxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnaWUnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvTVNJRSg/OlxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnaWUnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvVHJpZGVudCg/Oi4qcnZcXDooXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnY2hyb21lJyBhcyBjb25zdCwgcGF0dGVybjogL0Nocm9tZSg/OlxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/LyB9LFxuICAgIHsga2V5OiAnZmlyZWZveCcgYXMgY29uc3QsIHBhdHRlcm46IC9GaXJlZm94KD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdzYWZhcmknIGFzIGNvbnN0LCBwYXR0ZXJuOiAvKD86VmVyc2lvblxcVysoXFxkKylcXC4oXFxkKykoPzpcXC4oXFxkKykpPyk/KD86XFxXK01vYmlsZVxcUyopP1xcVytTYWZhcmkvIH0sXG4gIF07XG5cbiAgLy8gRmluZCB0aGUgRklSU1QgbWF0Y2hpbmcgYnJvd3NlclxuICBmb3IgKGNvbnN0IHsga2V5LCBwYXR0ZXJuIH0gb2YgYnJvd3NlclBhdHRlcm5zKSB7XG4gICAgY29uc3QgbWF0Y2ggPSBwYXR0ZXJuLmV4ZWMobmF2aWdhdG9yLnVzZXJBZ2VudCk7XG4gICAgaWYgKG1hdGNoKSB7XG4gICAgICBjb25zdCBtYWpvciA9IG1hdGNoWzFdIHx8IDA7XG4gICAgICBjb25zdCBtaW5vciA9IG1hdGNoWzJdIHx8IDA7XG4gICAgICBjb25zdCBwYXRjaCA9IG1hdGNoWzNdIHx8IDA7XG5cbiAgICAgIHJldHVybiB7IGJyb3dzZXI6IGtleSwgdmVyc2lvbjogYCR7bWFqb3J9LiR7bWlub3J9LiR7cGF0Y2h9YCB9O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiBudWxsO1xufVxuXG5jb25zdCBub3JtYWxpemVBcmNoID0gKGFyY2g6IHN0cmluZyk6IEFyY2ggPT4ge1xuICAvLyBOb2RlIGRvY3M6XG4gIC8vIC0gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9wcm9jZXNzLmh0bWwjcHJvY2Vzc2FyY2hcbiAgLy8gRGVubyBkb2NzOlxuICAvLyAtIGh0dHBzOi8vZG9jLmRlbm8ubGFuZC9kZW5vL3N0YWJsZS9+L0Rlbm8uYnVpbGRcbiAgaWYgKGFyY2ggPT09ICd4MzInKSByZXR1cm4gJ3gzMic7XG4gIGlmIChhcmNoID09PSAneDg2XzY0JyB8fCBhcmNoID09PSAneDY0JykgcmV0dXJuICd4NjQnO1xuICBpZiAoYXJjaCA9PT0gJ2FybScpIHJldHVybiAnYXJtJztcbiAgaWYgKGFyY2ggPT09ICdhYXJjaDY0JyB8fCBhcmNoID09PSAnYXJtNjQnKSByZXR1cm4gJ2FybTY0JztcbiAgaWYgKGFyY2gpIHJldHVybiBgb3RoZXI6JHthcmNofWA7XG4gIHJldHVybiAndW5rbm93bic7XG59O1xuXG5jb25zdCBub3JtYWxpemVQbGF0Zm9ybSA9IChwbGF0Zm9ybTogc3RyaW5nKTogUGxhdGZvcm1OYW1lID0+IHtcbiAgLy8gTm9kZSBwbGF0Zm9ybXM6XG4gIC8vIC0gaHR0cHM6Ly9ub2RlanMub3JnL2FwaS9wcm9jZXNzLmh0bWwjcHJvY2Vzc3BsYXRmb3JtXG4gIC8vIERlbm8gcGxhdGZvcm1zOlxuICAvLyAtIGh0dHBzOi8vZG9jLmRlbm8ubGFuZC9kZW5vL3N0YWJsZS9+L0Rlbm8uYnVpbGRcbiAgLy8gLSBodHRwczovL2dpdGh1Yi5jb20vZGVub2xhbmQvZGVuby9pc3N1ZXMvMTQ3OTlcblxuICBwbGF0Zm9ybSA9IHBsYXRmb3JtLnRvTG93ZXJDYXNlKCk7XG5cbiAgLy8gTk9URTogdGhpcyBpT1MgY2hlY2sgaXMgdW50ZXN0ZWQgYW5kIG1heSBub3Qgd29ya1xuICAvLyBOb2RlIGRvZXMgbm90IHdvcmsgbmF0aXZlbHkgb24gSU9TLCB0aGVyZSBpcyBhIGZvcmsgYXRcbiAgLy8gaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy1tb2JpbGUvbm9kZWpzLW1vYmlsZVxuICAvLyBob3dldmVyIGl0IGlzIHVua25vd24gYXQgdGhlIHRpbWUgb2Ygd3JpdGluZyBob3cgdG8gZGV0ZWN0IGlmIGl0IGlzIHJ1bm5pbmdcbiAgaWYgKHBsYXRmb3JtLmluY2x1ZGVzKCdpb3MnKSkgcmV0dXJuICdpT1MnO1xuICBpZiAocGxhdGZvcm0gPT09ICdhbmRyb2lkJykgcmV0dXJuICdBbmRyb2lkJztcbiAgaWYgKHBsYXRmb3JtID09PSAnZGFyd2luJykgcmV0dXJuICdNYWNPUyc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ3dpbjMyJykgcmV0dXJuICdXaW5kb3dzJztcbiAgaWYgKHBsYXRmb3JtID09PSAnZnJlZWJzZCcpIHJldHVybiAnRnJlZUJTRCc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ29wZW5ic2QnKSByZXR1cm4gJ09wZW5CU0QnO1xuICBpZiAocGxhdGZvcm0gPT09ICdsaW51eCcpIHJldHVybiAnTGludXgnO1xuICBpZiAocGxhdGZvcm0pIHJldHVybiBgT3RoZXI6JHtwbGF0Zm9ybX1gO1xuICByZXR1cm4gJ1Vua25vd24nO1xufTtcblxubGV0IF9wbGF0Zm9ybUhlYWRlcnM6IFBsYXRmb3JtUHJvcGVydGllcztcbmNvbnN0IGdldFBsYXRmb3JtSGVhZGVycyA9ICgpID0+IHtcbiAgcmV0dXJuIChfcGxhdGZvcm1IZWFkZXJzID8/PSBnZXRQbGF0Zm9ybVByb3BlcnRpZXMoKSk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2FmZUpTT04gPSAodGV4dDogc3RyaW5nKSA9PiB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIEpTT04ucGFyc2UodGV4dCk7XG4gIH0gY2F0Y2ggKGVycikge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbn07XG5cbi8vIGh0dHBzOi8vdXJsLnNwZWMud2hhdHdnLm9yZy8jdXJsLXNjaGVtZS1zdHJpbmdcbmNvbnN0IHN0YXJ0c1dpdGhTY2hlbWVSZWdleHAgPSAvXlthLXpdW2EtejAtOSsuLV0qOi9pO1xuY29uc3QgaXNBYnNvbHV0ZVVSTCA9ICh1cmw6IHN0cmluZyk6IGJvb2xlYW4gPT4ge1xuICByZXR1cm4gc3RhcnRzV2l0aFNjaGVtZVJlZ2V4cC50ZXN0KHVybCk7XG59O1xuXG5leHBvcnQgY29uc3Qgc2xlZXAgPSAobXM6IG51bWJlcikgPT4gbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcblxuY29uc3QgdmFsaWRhdGVQb3NpdGl2ZUludGVnZXIgPSAobmFtZTogc3RyaW5nLCBuOiB1bmtub3duKTogbnVtYmVyID0+IHtcbiAgaWYgKHR5cGVvZiBuICE9PSAnbnVtYmVyJyB8fCAhTnVtYmVyLmlzSW50ZWdlcihuKSkge1xuICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgJHtuYW1lfSBtdXN0IGJlIGFuIGludGVnZXJgKTtcbiAgfVxuICBpZiAobiA8IDApIHtcbiAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYCR7bmFtZX0gbXVzdCBiZSBhIHBvc2l0aXZlIGludGVnZXJgKTtcbiAgfVxuICByZXR1cm4gbjtcbn07XG5cbmV4cG9ydCBjb25zdCBjYXN0VG9FcnJvciA9IChlcnI6IGFueSk6IEVycm9yID0+IHtcbiAgaWYgKGVyciBpbnN0YW5jZW9mIEVycm9yKSByZXR1cm4gZXJyO1xuICBpZiAodHlwZW9mIGVyciA9PT0gJ29iamVjdCcgJiYgZXJyICE9PSBudWxsKSB7XG4gICAgdHJ5IHtcbiAgICAgIHJldHVybiBuZXcgRXJyb3IoSlNPTi5zdHJpbmdpZnkoZXJyKSk7XG4gICAgfSBjYXRjaCB7fVxuICB9XG4gIHJldHVybiBuZXcgRXJyb3IoU3RyaW5nKGVycikpO1xufTtcblxuZXhwb3J0IGNvbnN0IGVuc3VyZVByZXNlbnQgPSA8VD4odmFsdWU6IFQgfCBudWxsIHwgdW5kZWZpbmVkKTogVCA9PiB7XG4gIGlmICh2YWx1ZSA9PSBudWxsKSB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYEV4cGVjdGVkIGEgdmFsdWUgdG8gYmUgZ2l2ZW4gYnV0IHJlY2VpdmVkICR7dmFsdWV9IGluc3RlYWQuYCk7XG4gIHJldHVybiB2YWx1ZTtcbn07XG5cbi8qKlxuICogUmVhZCBhbiBlbnZpcm9ubWVudCB2YXJpYWJsZS5cbiAqXG4gKiBUcmltcyBiZWdpbm5pbmcgYW5kIHRyYWlsaW5nIHdoaXRlc3BhY2UuXG4gKlxuICogV2lsbCByZXR1cm4gdW5kZWZpbmVkIGlmIHRoZSBlbnZpcm9ubWVudCB2YXJpYWJsZSBkb2Vzbid0IGV4aXN0IG9yIGNhbm5vdCBiZSBhY2Nlc3NlZC5cbiAqL1xuZXhwb3J0IGNvbnN0IHJlYWRFbnYgPSAoZW52OiBzdHJpbmcpOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIHByb2Nlc3MuZW52Py5bZW52XT8udHJpbSgpID8/IHVuZGVmaW5lZDtcbiAgfVxuICBpZiAodHlwZW9mIERlbm8gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIERlbm8uZW52Py5nZXQ/LihlbnYpPy50cmltKCk7XG4gIH1cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbmV4cG9ydCBjb25zdCBjb2VyY2VJbnRlZ2VyID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyID0+IHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHJldHVybiBNYXRoLnJvdW5kKHZhbHVlKTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHJldHVybiBwYXJzZUludCh2YWx1ZSwgMTApO1xuXG4gIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgQ291bGQgbm90IGNvZXJjZSAke3ZhbHVlfSAodHlwZTogJHt0eXBlb2YgdmFsdWV9KSBpbnRvIGEgbnVtYmVyYCk7XG59O1xuXG5leHBvcnQgY29uc3QgY29lcmNlRmxvYXQgPSAodmFsdWU6IHVua25vd24pOiBudW1iZXIgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykgcmV0dXJuIHZhbHVlO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgcmV0dXJuIHBhcnNlRmxvYXQodmFsdWUpO1xuXG4gIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgQ291bGQgbm90IGNvZXJjZSAke3ZhbHVlfSAodHlwZTogJHt0eXBlb2YgdmFsdWV9KSBpbnRvIGEgbnVtYmVyYCk7XG59O1xuXG5leHBvcnQgY29uc3QgY29lcmNlQm9vbGVhbiA9ICh2YWx1ZTogdW5rbm93bik6IGJvb2xlYW4gPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHJldHVybiB2YWx1ZTtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHJldHVybiB2YWx1ZSA9PT0gJ3RydWUnO1xuICByZXR1cm4gQm9vbGVhbih2YWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgbWF5YmVDb2VyY2VJbnRlZ2VyID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBjb2VyY2VJbnRlZ2VyKHZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtYXliZUNvZXJjZUZsb2F0ID0gKHZhbHVlOiB1bmtub3duKTogbnVtYmVyIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBjb2VyY2VGbG9hdCh2YWx1ZSk7XG59O1xuXG5leHBvcnQgY29uc3QgbWF5YmVDb2VyY2VCb29sZWFuID0gKHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICh2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxuICByZXR1cm4gY29lcmNlQm9vbGVhbih2YWx1ZSk7XG59O1xuXG4vLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMzQ0OTEyODdcbmV4cG9ydCBmdW5jdGlvbiBpc0VtcHR5T2JqKG9iajogT2JqZWN0IHwgbnVsbCB8IHVuZGVmaW5lZCk6IGJvb2xlYW4ge1xuICBpZiAoIW9iaikgcmV0dXJuIHRydWU7XG4gIGZvciAoY29uc3QgX2sgaW4gb2JqKSByZXR1cm4gZmFsc2U7XG4gIHJldHVybiB0cnVlO1xufVxuXG4vLyBodHRwczovL2VzbGludC5vcmcvZG9jcy9sYXRlc3QvcnVsZXMvbm8tcHJvdG90eXBlLWJ1aWx0aW5zXG5leHBvcnQgZnVuY3Rpb24gaGFzT3duKG9iajogT2JqZWN0LCBrZXk6IHN0cmluZyk6IGJvb2xlYW4ge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsKG9iaiwga2V5KTtcbn1cblxuLyoqXG4gKiBDb3BpZXMgaGVhZGVycyBmcm9tIFwibmV3SGVhZGVyc1wiIG9udG8gXCJ0YXJnZXRIZWFkZXJzXCIsXG4gKiB1c2luZyBsb3dlci1jYXNlIGZvciBhbGwgcHJvcGVydGllcyxcbiAqIGlnbm9yaW5nIGFueSBrZXlzIHdpdGggdW5kZWZpbmVkIHZhbHVlcyxcbiAqIGFuZCBkZWxldGluZyBhbnkga2V5cyB3aXRoIG51bGwgdmFsdWVzLlxuICovXG5mdW5jdGlvbiBhcHBseUhlYWRlcnNNdXQodGFyZ2V0SGVhZGVyczogSGVhZGVycywgbmV3SGVhZGVyczogSGVhZGVycyk6IHZvaWQge1xuICBmb3IgKGNvbnN0IGsgaW4gbmV3SGVhZGVycykge1xuICAgIGlmICghaGFzT3duKG5ld0hlYWRlcnMsIGspKSBjb250aW51ZTtcbiAgICBjb25zdCBsb3dlcktleSA9IGsudG9Mb3dlckNhc2UoKTtcbiAgICBpZiAoIWxvd2VyS2V5KSBjb250aW51ZTtcblxuICAgIGNvbnN0IHZhbCA9IG5ld0hlYWRlcnNba107XG5cbiAgICBpZiAodmFsID09PSBudWxsKSB7XG4gICAgICBkZWxldGUgdGFyZ2V0SGVhZGVyc1tsb3dlcktleV07XG4gICAgfSBlbHNlIGlmICh2YWwgIT09IHVuZGVmaW5lZCkge1xuICAgICAgdGFyZ2V0SGVhZGVyc1tsb3dlcktleV0gPSB2YWw7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBkZWJ1ZyhhY3Rpb246IHN0cmluZywgLi4uYXJnczogYW55W10pIHtcbiAgaWYgKHR5cGVvZiBwcm9jZXNzICE9PSAndW5kZWZpbmVkJyAmJiBwcm9jZXNzPy5lbnY/LlsnREVCVUcnXSA9PT0gJ3RydWUnKSB7XG4gICAgY29uc29sZS5sb2coYEFudGhyb3BpYzpERUJVRzoke2FjdGlvbn1gLCAuLi5hcmdzKTtcbiAgfVxufVxuXG4vKipcbiAqIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8yMTE3NTIzXG4gKi9cbmNvbnN0IHV1aWQ0ID0gKCkgPT4ge1xuICByZXR1cm4gJ3h4eHh4eHh4LXh4eHgtNHh4eC15eHh4LXh4eHh4eHh4eHh4eCcucmVwbGFjZSgvW3h5XS9nLCAoYykgPT4ge1xuICAgIGNvbnN0IHIgPSAoTWF0aC5yYW5kb20oKSAqIDE2KSB8IDA7XG4gICAgY29uc3QgdiA9IGMgPT09ICd4JyA/IHIgOiAociAmIDB4MykgfCAweDg7XG4gICAgcmV0dXJuIHYudG9TdHJpbmcoMTYpO1xuICB9KTtcbn07XG5cbmV4cG9ydCBjb25zdCBpc1J1bm5pbmdJbkJyb3dzZXIgPSAoKSA9PiB7XG4gIHJldHVybiAoXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiB3aW5kb3cuZG9jdW1lbnQgIT09ICd1bmRlZmluZWQnICYmXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIHR5cGVvZiBuYXZpZ2F0b3IgIT09ICd1bmRlZmluZWQnXG4gICk7XG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIEhlYWRlcnNQcm90b2NvbCB7XG4gIGdldDogKGhlYWRlcjogc3RyaW5nKSA9PiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xufVxuZXhwb3J0IHR5cGUgSGVhZGVyc0xpa2UgPSBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBzdHJpbmdbXSB8IHVuZGVmaW5lZD4gfCBIZWFkZXJzUHJvdG9jb2w7XG5cbmV4cG9ydCBjb25zdCBpc0hlYWRlcnNQcm90b2NvbCA9IChoZWFkZXJzOiBhbnkpOiBoZWFkZXJzIGlzIEhlYWRlcnNQcm90b2NvbCA9PiB7XG4gIHJldHVybiB0eXBlb2YgaGVhZGVycz8uZ2V0ID09PSAnZnVuY3Rpb24nO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldFJlcXVpcmVkSGVhZGVyID0gKGhlYWRlcnM6IEhlYWRlcnNMaWtlIHwgSGVhZGVycywgaGVhZGVyOiBzdHJpbmcpOiBzdHJpbmcgPT4ge1xuICBjb25zdCBmb3VuZEhlYWRlciA9IGdldEhlYWRlcihoZWFkZXJzLCBoZWFkZXIpO1xuICBpZiAoZm91bmRIZWFkZXIgPT09IHVuZGVmaW5lZCkge1xuICAgIHRocm93IG5ldyBFcnJvcihgQ291bGQgbm90IGZpbmQgJHtoZWFkZXJ9IGhlYWRlcmApO1xuICB9XG4gIHJldHVybiBmb3VuZEhlYWRlcjtcbn07XG5cbmV4cG9ydCBjb25zdCBnZXRIZWFkZXIgPSAoaGVhZGVyczogSGVhZGVyc0xpa2UgfCBIZWFkZXJzLCBoZWFkZXI6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gIGNvbnN0IGxvd2VyQ2FzZWRIZWFkZXIgPSBoZWFkZXIudG9Mb3dlckNhc2UoKTtcbiAgaWYgKGlzSGVhZGVyc1Byb3RvY29sKGhlYWRlcnMpKSB7XG4gICAgLy8gdG8gZGVhbCB3aXRoIHRoZSBjYXNlIHdoZXJlIHRoZSBoZWFkZXIgbG9va3MgbGlrZSBTdGFpbmxlc3MtRXZlbnQtSWRcbiAgICBjb25zdCBpbnRlcmNhcHNIZWFkZXIgPVxuICAgICAgaGVhZGVyWzBdPy50b1VwcGVyQ2FzZSgpICtcbiAgICAgIGhlYWRlci5zdWJzdHJpbmcoMSkucmVwbGFjZSgvKFteXFx3XSkoXFx3KS9nLCAoX20sIGcxLCBnMikgPT4gZzEgKyBnMi50b1VwcGVyQ2FzZSgpKTtcbiAgICBmb3IgKGNvbnN0IGtleSBvZiBbaGVhZGVyLCBsb3dlckNhc2VkSGVhZGVyLCBoZWFkZXIudG9VcHBlckNhc2UoKSwgaW50ZXJjYXBzSGVhZGVyXSkge1xuICAgICAgY29uc3QgdmFsdWUgPSBoZWFkZXJzLmdldChrZXkpO1xuICAgICAgaWYgKHZhbHVlKSB7XG4gICAgICAgIHJldHVybiB2YWx1ZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBPYmplY3QuZW50cmllcyhoZWFkZXJzKSkge1xuICAgIGlmIChrZXkudG9Mb3dlckNhc2UoKSA9PT0gbG93ZXJDYXNlZEhlYWRlcikge1xuICAgICAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgICAgIGlmICh2YWx1ZS5sZW5ndGggPD0gMSkgcmV0dXJuIHZhbHVlWzBdO1xuICAgICAgICBjb25zb2xlLndhcm4oYFJlY2VpdmVkICR7dmFsdWUubGVuZ3RofSBlbnRyaWVzIGZvciB0aGUgJHtoZWFkZXJ9IGhlYWRlciwgdXNpbmcgdGhlIGZpcnN0IGVudHJ5LmApO1xuICAgICAgICByZXR1cm4gdmFsdWVbMF07XG4gICAgICB9XG4gICAgICByZXR1cm4gdmFsdWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHVuZGVmaW5lZDtcbn07XG5cbi8qKlxuICogRW5jb2RlcyBhIHN0cmluZyB0byBCYXNlNjQgZm9ybWF0LlxuICovXG5leHBvcnQgY29uc3QgdG9CYXNlNjQgPSAoc3RyOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkKTogc3RyaW5nID0+IHtcbiAgaWYgKCFzdHIpIHJldHVybiAnJztcbiAgaWYgKHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHN0cikudG9TdHJpbmcoJ2Jhc2U2NCcpO1xuICB9XG5cbiAgaWYgKHR5cGVvZiBidG9hICE9PSAndW5kZWZpbmVkJykge1xuICAgIHJldHVybiBidG9hKHN0cik7XG4gIH1cblxuICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoJ0Nhbm5vdCBnZW5lcmF0ZSBiNjQgc3RyaW5nOyBFeHBlY3RlZCBgQnVmZmVyYCBvciBgYnRvYWAgdG8gYmUgZGVmaW5lZCcpO1xufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGlzT2JqKG9iajogdW5rbm93bik6IG9iaiBpcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPiB7XG4gIHJldHVybiBvYmogIT0gbnVsbCAmJiB0eXBlb2Ygb2JqID09PSAnb2JqZWN0JyAmJiAhQXJyYXkuaXNBcnJheShvYmopO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IEFic3RyYWN0UGFnZSwgUmVzcG9uc2UsIEFQSUNsaWVudCwgRmluYWxSZXF1ZXN0T3B0aW9ucywgUGFnZUluZm8gfSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgUGFnZVJlc3BvbnNlPEl0ZW0+IHtcbiAgZGF0YTogQXJyYXk8SXRlbT47XG5cbiAgaGFzX21vcmU6IGJvb2xlYW47XG5cbiAgZmlyc3RfaWQ6IHN0cmluZyB8IG51bGw7XG5cbiAgbGFzdF9pZDogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBQYWdlUGFyYW1zIHtcbiAgLyoqXG4gICAqIE51bWJlciBvZiBpdGVtcyBwZXIgcGFnZS5cbiAgICovXG4gIGxpbWl0PzogbnVtYmVyO1xuXG4gIGJlZm9yZV9pZD86IHN0cmluZztcblxuICBhZnRlcl9pZD86IHN0cmluZztcbn1cblxuZXhwb3J0IGNsYXNzIFBhZ2U8SXRlbT4gZXh0ZW5kcyBBYnN0cmFjdFBhZ2U8SXRlbT4gaW1wbGVtZW50cyBQYWdlUmVzcG9uc2U8SXRlbT4ge1xuICBkYXRhOiBBcnJheTxJdGVtPjtcblxuICBoYXNfbW9yZTogYm9vbGVhbjtcblxuICBmaXJzdF9pZDogc3RyaW5nIHwgbnVsbDtcblxuICBsYXN0X2lkOiBzdHJpbmcgfCBudWxsO1xuXG4gIGNvbnN0cnVjdG9yKGNsaWVudDogQVBJQ2xpZW50LCByZXNwb25zZTogUmVzcG9uc2UsIGJvZHk6IFBhZ2VSZXNwb25zZTxJdGVtPiwgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucykge1xuICAgIHN1cGVyKGNsaWVudCwgcmVzcG9uc2UsIGJvZHksIG9wdGlvbnMpO1xuXG4gICAgdGhpcy5kYXRhID0gYm9keS5kYXRhIHx8IFtdO1xuICAgIHRoaXMuaGFzX21vcmUgPSBib2R5Lmhhc19tb3JlIHx8IGZhbHNlO1xuICAgIHRoaXMuZmlyc3RfaWQgPSBib2R5LmZpcnN0X2lkIHx8IG51bGw7XG4gICAgdGhpcy5sYXN0X2lkID0gYm9keS5sYXN0X2lkIHx8IG51bGw7XG4gIH1cblxuICBnZXRQYWdpbmF0ZWRJdGVtcygpOiBJdGVtW10ge1xuICAgIHJldHVybiB0aGlzLmRhdGEgPz8gW107XG4gIH1cblxuICAvLyBAZGVwcmVjYXRlZCBQbGVhc2UgdXNlIGBuZXh0UGFnZUluZm8oKWAgaW5zdGVhZFxuICBuZXh0UGFnZVBhcmFtcygpOiBQYXJ0aWFsPFBhZ2VQYXJhbXM+IHwgbnVsbCB7XG4gICAgY29uc3QgaW5mbyA9IHRoaXMubmV4dFBhZ2VJbmZvKCk7XG4gICAgaWYgKCFpbmZvKSByZXR1cm4gbnVsbDtcbiAgICBpZiAoJ3BhcmFtcycgaW4gaW5mbykgcmV0dXJuIGluZm8ucGFyYW1zO1xuICAgIGNvbnN0IHBhcmFtcyA9IE9iamVjdC5mcm9tRW50cmllcyhpbmZvLnVybC5zZWFyY2hQYXJhbXMpO1xuICAgIGlmICghT2JqZWN0LmtleXMocGFyYW1zKS5sZW5ndGgpIHJldHVybiBudWxsO1xuICAgIHJldHVybiBwYXJhbXM7XG4gIH1cblxuICBuZXh0UGFnZUluZm8oKTogUGFnZUluZm8gfCBudWxsIHtcbiAgICBpZiAoKHRoaXMub3B0aW9ucy5xdWVyeSBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPik/LlsnYmVmb3JlX2lkJ10pIHtcbiAgICAgIC8vIGluIHJldmVyc2VcbiAgICAgIGNvbnN0IGZpcnN0SWQgPSB0aGlzLmZpcnN0X2lkO1xuICAgICAgaWYgKCFmaXJzdElkKSB7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBwYXJhbXM6IHtcbiAgICAgICAgICBiZWZvcmVfaWQ6IGZpcnN0SWQsXG4gICAgICAgIH0sXG4gICAgICB9O1xuICAgIH1cblxuICAgIGNvbnN0IGN1cnNvciA9IHRoaXMubGFzdF9pZDtcbiAgICBpZiAoIWN1cnNvcikge1xuICAgICAgcmV0dXJuIG51bGw7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIHBhcmFtczoge1xuICAgICAgICBhZnRlcl9pZDogY3Vyc29yLFxuICAgICAgfSxcbiAgICB9O1xuICB9XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBBUElSZXNvdXJjZSB7XG4gIHByb3RlY3RlZCBfY2xpZW50OiBDb3JlLkFQSUNsaWVudDtcblxuICBjb25zdHJ1Y3RvcihjbGllbnQ6IENvcmUuQVBJQ2xpZW50KSB7XG4gICAgdGhpcy5fY2xpZW50ID0gY2xpZW50O1xuICB9XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCB7IGlzUmVxdWVzdE9wdGlvbnMgfSBmcm9tIFwiLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0IHsgUGFnZSwgdHlwZSBQYWdlUGFyYW1zIH0gZnJvbSBcIi4uLy4uL3BhZ2luYXRpb24uanNcIjtcblxuZXhwb3J0IGNsYXNzIE1vZGVscyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIEdldCBhIHNwZWNpZmljIG1vZGVsLlxuICAgKlxuICAgKiBUaGUgTW9kZWxzIEFQSSByZXNwb25zZSBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgaW5mb3JtYXRpb24gYWJvdXQgYSBzcGVjaWZpY1xuICAgKiBtb2RlbCBvciByZXNvbHZlIGEgbW9kZWwgYWxpYXMgdG8gYSBtb2RlbCBJRC5cbiAgICovXG4gIHJldHJpZXZlKG1vZGVsSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8QmV0YU1vZGVsSW5mbz4ge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZ2V0KGAvdjEvbW9kZWxzLyR7bW9kZWxJZH0/YmV0YT10cnVlYCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdCBhdmFpbGFibGUgbW9kZWxzLlxuICAgKlxuICAgKiBUaGUgTW9kZWxzIEFQSSByZXNwb25zZSBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgd2hpY2ggbW9kZWxzIGFyZSBhdmFpbGFibGUgZm9yXG4gICAqIHVzZSBpbiB0aGUgQVBJLiBNb3JlIHJlY2VudGx5IHJlbGVhc2VkIG1vZGVscyBhcmUgbGlzdGVkIGZpcnN0LlxuICAgKi9cbiAgbGlzdChcbiAgICBxdWVyeT86IE1vZGVsTGlzdFBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxCZXRhTW9kZWxJbmZvc1BhZ2UsIEJldGFNb2RlbEluZm8+O1xuICBsaXN0KG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5QYWdlUHJvbWlzZTxCZXRhTW9kZWxJbmZvc1BhZ2UsIEJldGFNb2RlbEluZm8+O1xuICBsaXN0KFxuICAgIHF1ZXJ5OiBNb2RlbExpc3RQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8QmV0YU1vZGVsSW5mb3NQYWdlLCBCZXRhTW9kZWxJbmZvPiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocXVlcnkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5saXN0KHt9LCBxdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZ2V0QVBJTGlzdCgnL3YxL21vZGVscz9iZXRhPXRydWUnLCBCZXRhTW9kZWxJbmZvc1BhZ2UsIHsgcXVlcnksIC4uLm9wdGlvbnMgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJldGFNb2RlbEluZm9zUGFnZSBleHRlbmRzIFBhZ2U8QmV0YU1vZGVsSW5mbz4ge31cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTW9kZWxJbmZvIHtcbiAgLyoqXG4gICAqIFVuaXF1ZSBtb2RlbCBpZGVudGlmaWVyLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCB0aGUgbW9kZWwgd2FzIHJlbGVhc2VkLlxuICAgKiBNYXkgYmUgc2V0IHRvIGFuIGVwb2NoIHZhbHVlIGlmIHRoZSByZWxlYXNlIGRhdGUgaXMgdW5rbm93bi5cbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcblxuICAvKipcbiAgICogQSBodW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgbW9kZWwuXG4gICAqL1xuICBkaXNwbGF5X25hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogT2JqZWN0IHR5cGUuXG4gICAqXG4gICAqIEZvciBNb2RlbHMsIHRoaXMgaXMgYWx3YXlzIGBcIm1vZGVsXCJgLlxuICAgKi9cbiAgdHlwZTogJ21vZGVsJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbExpc3RQYXJhbXMgZXh0ZW5kcyBQYWdlUGFyYW1zIHt9XG5cbk1vZGVscy5CZXRhTW9kZWxJbmZvc1BhZ2UgPSBCZXRhTW9kZWxJbmZvc1BhZ2U7XG5cbmV4cG9ydCBkZWNsYXJlIG5hbWVzcGFjZSBNb2RlbHMge1xuICBleHBvcnQge1xuICAgIHR5cGUgQmV0YU1vZGVsSW5mbyBhcyBCZXRhTW9kZWxJbmZvLFxuICAgIEJldGFNb2RlbEluZm9zUGFnZSBhcyBCZXRhTW9kZWxJbmZvc1BhZ2UsXG4gICAgdHlwZSBNb2RlbExpc3RQYXJhbXMgYXMgTW9kZWxMaXN0UGFyYW1zLFxuICB9O1xufVxuIiwgImltcG9ydCB7IEFudGhyb3BpY0Vycm9yIH0gZnJvbSBcIi4uLy4uL2Vycm9yLmpzXCI7XG5pbXBvcnQgeyBSZWFkYWJsZVN0cmVhbVRvQXN5bmNJdGVyYWJsZSB9IGZyb20gXCIuLi9zdHJlYW0tdXRpbHMuanNcIjtcbmltcG9ydCB7IHR5cGUgUmVzcG9uc2UgfSBmcm9tIFwiLi4vLi4vX3NoaW1zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBMaW5lRGVjb2RlciwgdHlwZSBCeXRlcyB9IGZyb20gXCIuL2xpbmUuanNcIjtcblxuZXhwb3J0IGNsYXNzIEpTT05MRGVjb2RlcjxUPiB7XG4gIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcjtcblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcml2YXRlIGl0ZXJhdG9yOiBBc3luY0l0ZXJhYmxlSXRlcmF0b3I8Qnl0ZXM+LFxuICAgIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcixcbiAgKSB7XG4gICAgdGhpcy5jb250cm9sbGVyID0gY29udHJvbGxlcjtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgKmRlY29kZXIoKTogQXN5bmNJdGVyYXRvcjxULCBhbnksIHVuZGVmaW5lZD4ge1xuICAgIGNvbnN0IGxpbmVEZWNvZGVyID0gbmV3IExpbmVEZWNvZGVyKCk7XG4gICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiB0aGlzLml0ZXJhdG9yKSB7XG4gICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZURlY29kZXIuZGVjb2RlKGNodW5rKSkge1xuICAgICAgICB5aWVsZCBKU09OLnBhcnNlKGxpbmUpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lRGVjb2Rlci5mbHVzaCgpKSB7XG4gICAgICB5aWVsZCBKU09OLnBhcnNlKGxpbmUpO1xuICAgIH1cbiAgfVxuXG4gIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTogQXN5bmNJdGVyYXRvcjxUPiB7XG4gICAgcmV0dXJuIHRoaXMuZGVjb2RlcigpO1xuICB9XG5cbiAgc3RhdGljIGZyb21SZXNwb25zZTxUPihyZXNwb25zZTogUmVzcG9uc2UsIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcik6IEpTT05MRGVjb2RlcjxUPiB7XG4gICAgaWYgKCFyZXNwb25zZS5ib2R5KSB7XG4gICAgICBjb250cm9sbGVyLmFib3J0KCk7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYEF0dGVtcHRlZCB0byBpdGVyYXRlIG92ZXIgYSByZXNwb25zZSB3aXRoIG5vIGJvZHlgKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IEpTT05MRGVjb2RlcihSZWFkYWJsZVN0cmVhbVRvQXN5bmNJdGVyYWJsZTxCeXRlcz4ocmVzcG9uc2UuYm9keSksIGNvbnRyb2xsZXIpO1xuICB9XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vLi4vLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCB7IGlzUmVxdWVzdE9wdGlvbnMgfSBmcm9tIFwiLi4vLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQmV0YUFQSSBmcm9tIFwiLi4vYmV0YS5qc1wiO1xuaW1wb3J0ICogYXMgQmV0YU1lc3NhZ2VzQVBJIGZyb20gXCIuL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgeyBQYWdlLCB0eXBlIFBhZ2VQYXJhbXMgfSBmcm9tIFwiLi4vLi4vLi4vcGFnaW5hdGlvbi5qc1wiO1xuaW1wb3J0IHsgSlNPTkxEZWNvZGVyIH0gZnJvbSBcIi4uLy4uLy4uL2ludGVybmFsL2RlY29kZXJzL2pzb25sLmpzXCI7XG5pbXBvcnQgeyBBbnRocm9waWNFcnJvciB9IGZyb20gXCIuLi8uLi8uLi9lcnJvci5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQmF0Y2hlcyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFNlbmQgYSBiYXRjaCBvZiBNZXNzYWdlIGNyZWF0aW9uIHJlcXVlc3RzLlxuICAgKlxuICAgKiBUaGUgTWVzc2FnZSBCYXRjaGVzIEFQSSBjYW4gYmUgdXNlZCB0byBwcm9jZXNzIG11bHRpcGxlIE1lc3NhZ2VzIEFQSSByZXF1ZXN0cyBhdFxuICAgKiBvbmNlLiBPbmNlIGEgTWVzc2FnZSBCYXRjaCBpcyBjcmVhdGVkLCBpdCBiZWdpbnMgcHJvY2Vzc2luZyBpbW1lZGlhdGVseS4gQmF0Y2hlc1xuICAgKiBjYW4gdGFrZSB1cCB0byAyNCBob3VycyB0byBjb21wbGV0ZS5cbiAgICovXG4gIGNyZWF0ZShwYXJhbXM6IEJhdGNoQ3JlYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoPiB7XG4gICAgY29uc3QgeyBiZXRhcywgLi4uYm9keSB9ID0gcGFyYW1zO1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQucG9zdCgnL3YxL21lc3NhZ2VzL2JhdGNoZXM/YmV0YT10cnVlJywge1xuICAgICAgYm9keSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhbnRocm9waWMtYmV0YSc6IFsuLi4oYmV0YXMgPz8gW10pLCAnbWVzc2FnZS1iYXRjaGVzLTIwMjQtMDktMjQnXS50b1N0cmluZygpLFxuICAgICAgICAuLi5vcHRpb25zPy5oZWFkZXJzLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGVuZHBvaW50IGlzIGlkZW1wb3RlbnQgYW5kIGNhbiBiZSB1c2VkIHRvIHBvbGwgZm9yIE1lc3NhZ2UgQmF0Y2hcbiAgICogY29tcGxldGlvbi4gVG8gYWNjZXNzIHRoZSByZXN1bHRzIG9mIGEgTWVzc2FnZSBCYXRjaCwgbWFrZSBhIHJlcXVlc3QgdG8gdGhlXG4gICAqIGByZXN1bHRzX3VybGAgZmllbGQgaW4gdGhlIHJlc3BvbnNlLlxuICAgKi9cbiAgcmV0cmlldmUoXG4gICAgbWVzc2FnZUJhdGNoSWQ6IHN0cmluZyxcbiAgICBwYXJhbXM/OiBCYXRjaFJldHJpZXZlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaD47XG4gIHJldHJpZXZlKG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2g+O1xuICByZXRyaWV2ZShcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtczogQmF0Y2hSZXRyaWV2ZVBhcmFtcyB8IENvcmUuUmVxdWVzdE9wdGlvbnMgPSB7fSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2g+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhwYXJhbXMpKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXRyaWV2ZShtZXNzYWdlQmF0Y2hJZCwge30sIHBhcmFtcyk7XG4gICAgfVxuICAgIGNvbnN0IHsgYmV0YXMgfSA9IHBhcmFtcztcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmdldChgL3YxL21lc3NhZ2VzL2JhdGNoZXMvJHttZXNzYWdlQmF0Y2hJZH0/YmV0YT10cnVlYCwge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FudGhyb3BpYy1iZXRhJzogWy4uLihiZXRhcyA/PyBbXSksICdtZXNzYWdlLWJhdGNoZXMtMjAyNC0wOS0yNCddLnRvU3RyaW5nKCksXG4gICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3QgYWxsIE1lc3NhZ2UgQmF0Y2hlcyB3aXRoaW4gYSBXb3Jrc3BhY2UuIE1vc3QgcmVjZW50bHkgY3JlYXRlZCBiYXRjaGVzIGFyZVxuICAgKiByZXR1cm5lZCBmaXJzdC5cbiAgICovXG4gIGxpc3QoXG4gICAgcGFyYW1zPzogQmF0Y2hMaXN0UGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UsIEJldGFNZXNzYWdlQmF0Y2g+O1xuICBsaXN0KG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5QYWdlUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoZXNQYWdlLCBCZXRhTWVzc2FnZUJhdGNoPjtcbiAgbGlzdChcbiAgICBwYXJhbXM6IEJhdGNoTGlzdFBhcmFtcyB8IENvcmUuUmVxdWVzdE9wdGlvbnMgPSB7fSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoZXNQYWdlLCBCZXRhTWVzc2FnZUJhdGNoPiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocGFyYW1zKSkge1xuICAgICAgcmV0dXJuIHRoaXMubGlzdCh7fSwgcGFyYW1zKTtcbiAgICB9XG4gICAgY29uc3QgeyBiZXRhcywgLi4ucXVlcnkgfSA9IHBhcmFtcztcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmdldEFQSUxpc3QoJy92MS9tZXNzYWdlcy9iYXRjaGVzP2JldGE9dHJ1ZScsIEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UsIHtcbiAgICAgIHF1ZXJ5LFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FudGhyb3BpYy1iZXRhJzogWy4uLihiZXRhcyA/PyBbXSksICdtZXNzYWdlLWJhdGNoZXMtMjAyNC0wOS0yNCddLnRvU3RyaW5nKCksXG4gICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIE1lc3NhZ2UgQmF0Y2guXG4gICAqXG4gICAqIE1lc3NhZ2UgQmF0Y2hlcyBjYW4gb25seSBiZSBkZWxldGVkIG9uY2UgdGhleSd2ZSBmaW5pc2hlZCBwcm9jZXNzaW5nLiBJZiB5b3UnZFxuICAgKiBsaWtlIHRvIGRlbGV0ZSBhbiBpbi1wcm9ncmVzcyBiYXRjaCwgeW91IG11c3QgZmlyc3QgY2FuY2VsIGl0LlxuICAgKi9cbiAgZGVsZXRlKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgcGFyYW1zPzogQmF0Y2hEZWxldGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxCZXRhRGVsZXRlZE1lc3NhZ2VCYXRjaD47XG4gIGRlbGV0ZShtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxCZXRhRGVsZXRlZE1lc3NhZ2VCYXRjaD47XG4gIGRlbGV0ZShcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtczogQmF0Y2hEZWxldGVQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxCZXRhRGVsZXRlZE1lc3NhZ2VCYXRjaD4ge1xuICAgIGlmIChpc1JlcXVlc3RPcHRpb25zKHBhcmFtcykpIHtcbiAgICAgIHJldHVybiB0aGlzLmRlbGV0ZShtZXNzYWdlQmF0Y2hJZCwge30sIHBhcmFtcyk7XG4gICAgfVxuICAgIGNvbnN0IHsgYmV0YXMgfSA9IHBhcmFtcztcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmRlbGV0ZShgL3YxL21lc3NhZ2VzL2JhdGNoZXMvJHttZXNzYWdlQmF0Y2hJZH0/YmV0YT10cnVlYCwge1xuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FudGhyb3BpYy1iZXRhJzogWy4uLihiZXRhcyA/PyBbXSksICdtZXNzYWdlLWJhdGNoZXMtMjAyNC0wOS0yNCddLnRvU3RyaW5nKCksXG4gICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIEJhdGNoZXMgbWF5IGJlIGNhbmNlbGVkIGFueSB0aW1lIGJlZm9yZSBwcm9jZXNzaW5nIGVuZHMuIE9uY2UgY2FuY2VsbGF0aW9uIGlzXG4gICAqIGluaXRpYXRlZCwgdGhlIGJhdGNoIGVudGVycyBhIGBjYW5jZWxpbmdgIHN0YXRlLCBhdCB3aGljaCB0aW1lIHRoZSBzeXN0ZW0gbWF5XG4gICAqIGNvbXBsZXRlIGFueSBpbi1wcm9ncmVzcywgbm9uLWludGVycnVwdGlibGUgcmVxdWVzdHMgYmVmb3JlIGZpbmFsaXppbmdcbiAgICogY2FuY2VsbGF0aW9uLlxuICAgKlxuICAgKiBUaGUgbnVtYmVyIG9mIGNhbmNlbGVkIHJlcXVlc3RzIGlzIHNwZWNpZmllZCBpbiBgcmVxdWVzdF9jb3VudHNgLiBUbyBkZXRlcm1pbmVcbiAgICogd2hpY2ggcmVxdWVzdHMgd2VyZSBjYW5jZWxlZCwgY2hlY2sgdGhlIGluZGl2aWR1YWwgcmVzdWx0cyB3aXRoaW4gdGhlIGJhdGNoLlxuICAgKiBOb3RlIHRoYXQgY2FuY2VsbGF0aW9uIG1heSBub3QgcmVzdWx0IGluIGFueSBjYW5jZWxlZCByZXF1ZXN0cyBpZiB0aGV5IHdlcmVcbiAgICogbm9uLWludGVycnVwdGlibGUuXG4gICAqL1xuICBjYW5jZWwoXG4gICAgbWVzc2FnZUJhdGNoSWQ6IHN0cmluZyxcbiAgICBwYXJhbXM/OiBCYXRjaENhbmNlbFBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2g+O1xuICBjYW5jZWwobWVzc2FnZUJhdGNoSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaD47XG4gIGNhbmNlbChcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtczogQmF0Y2hDYW5jZWxQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoPiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocGFyYW1zKSkge1xuICAgICAgcmV0dXJuIHRoaXMuY2FuY2VsKG1lc3NhZ2VCYXRjaElkLCB7fSwgcGFyYW1zKTtcbiAgICB9XG4gICAgY29uc3QgeyBiZXRhcyB9ID0gcGFyYW1zO1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQucG9zdChgL3YxL21lc3NhZ2VzL2JhdGNoZXMvJHttZXNzYWdlQmF0Y2hJZH0vY2FuY2VsP2JldGE9dHJ1ZWAsIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhbnRocm9waWMtYmV0YSc6IFsuLi4oYmV0YXMgPz8gW10pLCAnbWVzc2FnZS1iYXRjaGVzLTIwMjQtMDktMjQnXS50b1N0cmluZygpLFxuICAgICAgICAuLi5vcHRpb25zPy5oZWFkZXJzLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTdHJlYW1zIHRoZSByZXN1bHRzIG9mIGEgTWVzc2FnZSBCYXRjaCBhcyBhIGAuanNvbmxgIGZpbGUuXG4gICAqXG4gICAqIEVhY2ggbGluZSBpbiB0aGUgZmlsZSBpcyBhIEpTT04gb2JqZWN0IGNvbnRhaW5pbmcgdGhlIHJlc3VsdCBvZiBhIHNpbmdsZSByZXF1ZXN0XG4gICAqIGluIHRoZSBNZXNzYWdlIEJhdGNoLiBSZXN1bHRzIGFyZSBub3QgZ3VhcmFudGVlZCB0byBiZSBpbiB0aGUgc2FtZSBvcmRlciBhc1xuICAgKiByZXF1ZXN0cy4gVXNlIHRoZSBgY3VzdG9tX2lkYCBmaWVsZCB0byBtYXRjaCByZXN1bHRzIHRvIHJlcXVlc3RzLlxuICAgKi9cbiAgYXN5bmMgcmVzdWx0cyhcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtcz86IEJhdGNoUmVzdWx0c1BhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogUHJvbWlzZTxKU09OTERlY29kZXI8QmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZT4+O1xuICBhc3luYyByZXN1bHRzKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IFByb21pc2U8SlNPTkxEZWNvZGVyPEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2U+PjtcbiAgYXN5bmMgcmVzdWx0cyhcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtczogQmF0Y2hSZXN1bHRzUGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBQcm9taXNlPEpTT05MRGVjb2RlcjxCZXRhTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlPj4ge1xuICAgIGlmIChpc1JlcXVlc3RPcHRpb25zKHBhcmFtcykpIHtcbiAgICAgIHJldHVybiB0aGlzLnJlc3VsdHMobWVzc2FnZUJhdGNoSWQsIHt9LCBwYXJhbXMpO1xuICAgIH1cblxuICAgIGNvbnN0IGJhdGNoID0gYXdhaXQgdGhpcy5yZXRyaWV2ZShtZXNzYWdlQmF0Y2hJZCk7XG4gICAgaWYgKCFiYXRjaC5yZXN1bHRzX3VybCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICBgTm8gYmF0Y2ggXFxgcmVzdWx0c191cmxcXGA7IEhhcyBpdCBmaW5pc2hlZCBwcm9jZXNzaW5nPyAke2JhdGNoLnByb2Nlc3Npbmdfc3RhdHVzfSAtICR7YmF0Y2guaWR9YCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgY29uc3QgeyBiZXRhcyB9ID0gcGFyYW1zO1xuICAgIHJldHVybiB0aGlzLl9jbGllbnRcbiAgICAgIC5nZXQoYmF0Y2gucmVzdWx0c191cmwsIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgICdhbnRocm9waWMtYmV0YSc6IFsuLi4oYmV0YXMgPz8gW10pLCAnbWVzc2FnZS1iYXRjaGVzLTIwMjQtMDktMjQnXS50b1N0cmluZygpLFxuICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2JpbmFyeScsXG4gICAgICAgICAgLi4ub3B0aW9ucz8uaGVhZGVycyxcbiAgICAgICAgfSxcbiAgICAgICAgX19iaW5hcnlSZXNwb25zZTogdHJ1ZSxcbiAgICAgIH0pXG4gICAgICAuX3RoZW5VbndyYXAoKF8sIHByb3BzKSA9PiBKU09OTERlY29kZXIuZnJvbVJlc3BvbnNlKHByb3BzLnJlc3BvbnNlLCBwcm9wcy5jb250cm9sbGVyKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UgZXh0ZW5kcyBQYWdlPEJldGFNZXNzYWdlQmF0Y2g+IHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YURlbGV0ZWRNZXNzYWdlQmF0Y2gge1xuICAvKipcbiAgICogSUQgb2YgdGhlIE1lc3NhZ2UgQmF0Y2guXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBEZWxldGVkIG9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgTWVzc2FnZSBCYXRjaGVzLCB0aGlzIGlzIGFsd2F5cyBgXCJtZXNzYWdlX2JhdGNoX2RlbGV0ZWRcImAuXG4gICAqL1xuICB0eXBlOiAnbWVzc2FnZV9iYXRjaF9kZWxldGVkJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZUJhdGNoIHtcbiAgLyoqXG4gICAqIFVuaXF1ZSBvYmplY3QgaWRlbnRpZmllci5cbiAgICpcbiAgICogVGhlIGZvcm1hdCBhbmQgbGVuZ3RoIG9mIElEcyBtYXkgY2hhbmdlIG92ZXIgdGltZS5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggdGhlIE1lc3NhZ2UgQmF0Y2ggd2FzXG4gICAqIGFyY2hpdmVkIGFuZCBpdHMgcmVzdWx0cyBiZWNhbWUgdW5hdmFpbGFibGUuXG4gICAqL1xuICBhcmNoaXZlZF9hdDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCBjYW5jZWxsYXRpb24gd2FzXG4gICAqIGluaXRpYXRlZCBmb3IgdGhlIE1lc3NhZ2UgQmF0Y2guIFNwZWNpZmllZCBvbmx5IGlmIGNhbmNlbGxhdGlvbiB3YXMgaW5pdGlhdGVkLlxuICAgKi9cbiAgY2FuY2VsX2luaXRpYXRlZF9hdDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCB0aGUgTWVzc2FnZSBCYXRjaCB3YXNcbiAgICogY3JlYXRlZC5cbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCBwcm9jZXNzaW5nIGZvciB0aGVcbiAgICogTWVzc2FnZSBCYXRjaCBlbmRlZC4gU3BlY2lmaWVkIG9ubHkgb25jZSBwcm9jZXNzaW5nIGVuZHMuXG4gICAqXG4gICAqIFByb2Nlc3NpbmcgZW5kcyB3aGVuIGV2ZXJ5IHJlcXVlc3QgaW4gYSBNZXNzYWdlIEJhdGNoIGhhcyBlaXRoZXIgc3VjY2VlZGVkLFxuICAgKiBlcnJvcmVkLCBjYW5jZWxlZCwgb3IgZXhwaXJlZC5cbiAgICovXG4gIGVuZGVkX2F0OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIHRoZSBNZXNzYWdlIEJhdGNoIHdpbGxcbiAgICogZXhwaXJlIGFuZCBlbmQgcHJvY2Vzc2luZywgd2hpY2ggaXMgMjQgaG91cnMgYWZ0ZXIgY3JlYXRpb24uXG4gICAqL1xuICBleHBpcmVzX2F0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFByb2Nlc3Npbmcgc3RhdHVzIG9mIHRoZSBNZXNzYWdlIEJhdGNoLlxuICAgKi9cbiAgcHJvY2Vzc2luZ19zdGF0dXM6ICdpbl9wcm9ncmVzcycgfCAnY2FuY2VsaW5nJyB8ICdlbmRlZCc7XG5cbiAgLyoqXG4gICAqIFRhbGxpZXMgcmVxdWVzdHMgd2l0aGluIHRoZSBNZXNzYWdlIEJhdGNoLCBjYXRlZ29yaXplZCBieSB0aGVpciBzdGF0dXMuXG4gICAqXG4gICAqIFJlcXVlc3RzIHN0YXJ0IGFzIGBwcm9jZXNzaW5nYCBhbmQgbW92ZSB0byBvbmUgb2YgdGhlIG90aGVyIHN0YXR1c2VzIG9ubHkgb25jZVxuICAgKiBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgYmF0Y2ggZW5kcy4gVGhlIHN1bSBvZiBhbGwgdmFsdWVzIGFsd2F5cyBtYXRjaGVzIHRoZVxuICAgKiB0b3RhbCBudW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIGJhdGNoLlxuICAgKi9cbiAgcmVxdWVzdF9jb3VudHM6IEJldGFNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzO1xuXG4gIC8qKlxuICAgKiBVUkwgdG8gYSBgLmpzb25sYCBmaWxlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdHMgb2YgdGhlIE1lc3NhZ2UgQmF0Y2ggcmVxdWVzdHMuXG4gICAqIFNwZWNpZmllZCBvbmx5IG9uY2UgcHJvY2Vzc2luZyBlbmRzLlxuICAgKlxuICAgKiBSZXN1bHRzIGluIHRoZSBmaWxlIGFyZSBub3QgZ3VhcmFudGVlZCB0byBiZSBpbiB0aGUgc2FtZSBvcmRlciBhcyByZXF1ZXN0cy4gVXNlXG4gICAqIHRoZSBgY3VzdG9tX2lkYCBmaWVsZCB0byBtYXRjaCByZXN1bHRzIHRvIHJlcXVlc3RzLlxuICAgKi9cbiAgcmVzdWx0c191cmw6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgTWVzc2FnZSBCYXRjaGVzLCB0aGlzIGlzIGFsd2F5cyBgXCJtZXNzYWdlX2JhdGNoXCJgLlxuICAgKi9cbiAgdHlwZTogJ21lc3NhZ2VfYmF0Y2gnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCB7XG4gIHR5cGU6ICdjYW5jZWxlZCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQge1xuICBlcnJvcjogQmV0YUFQSS5CZXRhRXJyb3JSZXNwb25zZTtcblxuICB0eXBlOiAnZXJyb3JlZCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQge1xuICB0eXBlOiAnZXhwaXJlZCc7XG59XG5cbi8qKlxuICogVGhpcyBpcyBhIHNpbmdsZSBsaW5lIGluIHRoZSByZXNwb25zZSBgLmpzb25sYCBmaWxlIGFuZCBkb2VzIG5vdCByZXByZXNlbnQgdGhlXG4gKiByZXNwb25zZSBhcyBhIHdob2xlLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2Uge1xuICAvKipcbiAgICogRGV2ZWxvcGVyLXByb3ZpZGVkIElEIGNyZWF0ZWQgZm9yIGVhY2ggcmVxdWVzdCBpbiBhIE1lc3NhZ2UgQmF0Y2guIFVzZWZ1bCBmb3JcbiAgICogbWF0Y2hpbmcgcmVzdWx0cyB0byByZXF1ZXN0cywgYXMgcmVzdWx0cyBtYXkgYmUgZ2l2ZW4gb3V0IG9mIHJlcXVlc3Qgb3JkZXIuXG4gICAqXG4gICAqIE11c3QgYmUgdW5pcXVlIGZvciBlYWNoIHJlcXVlc3Qgd2l0aGluIHRoZSBNZXNzYWdlIEJhdGNoLlxuICAgKi9cbiAgY3VzdG9tX2lkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFByb2Nlc3NpbmcgcmVzdWx0IGZvciB0aGlzIHJlcXVlc3QuXG4gICAqXG4gICAqIENvbnRhaW5zIGEgTWVzc2FnZSBvdXRwdXQgaWYgcHJvY2Vzc2luZyB3YXMgc3VjY2Vzc2Z1bCwgYW4gZXJyb3IgcmVzcG9uc2UgaWZcbiAgICogcHJvY2Vzc2luZyBmYWlsZWQsIG9yIHRoZSByZWFzb24gd2h5IHByb2Nlc3Npbmcgd2FzIG5vdCBhdHRlbXB0ZWQsIHN1Y2ggYXNcbiAgICogY2FuY2VsbGF0aW9uIG9yIGV4cGlyYXRpb24uXG4gICAqL1xuICByZXN1bHQ6IEJldGFNZXNzYWdlQmF0Y2hSZXN1bHQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMge1xuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgaGF2ZSBiZWVuIGNhbmNlbGVkLlxuICAgKlxuICAgKiBUaGlzIGlzIHplcm8gdW50aWwgcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIE1lc3NhZ2UgQmF0Y2ggaGFzIGVuZGVkLlxuICAgKi9cbiAgY2FuY2VsZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgZW5jb3VudGVyZWQgYW4gZXJyb3IuXG4gICAqXG4gICAqIFRoaXMgaXMgemVybyB1bnRpbCBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgTWVzc2FnZSBCYXRjaCBoYXMgZW5kZWQuXG4gICAqL1xuICBlcnJvcmVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGhhdmUgZXhwaXJlZC5cbiAgICpcbiAgICogVGhpcyBpcyB6ZXJvIHVudGlsIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBNZXNzYWdlIEJhdGNoIGhhcyBlbmRlZC5cbiAgICovXG4gIGV4cGlyZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgYXJlIHByb2Nlc3NpbmcuXG4gICAqL1xuICBwcm9jZXNzaW5nOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGhhdmUgY29tcGxldGVkIHN1Y2Nlc3NmdWxseS5cbiAgICpcbiAgICogVGhpcyBpcyB6ZXJvIHVudGlsIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBNZXNzYWdlIEJhdGNoIGhhcyBlbmRlZC5cbiAgICovXG4gIHN1Y2NlZWRlZDogbnVtYmVyO1xufVxuXG4vKipcbiAqIFByb2Nlc3NpbmcgcmVzdWx0IGZvciB0aGlzIHJlcXVlc3QuXG4gKlxuICogQ29udGFpbnMgYSBNZXNzYWdlIG91dHB1dCBpZiBwcm9jZXNzaW5nIHdhcyBzdWNjZXNzZnVsLCBhbiBlcnJvciByZXNwb25zZSBpZlxuICogcHJvY2Vzc2luZyBmYWlsZWQsIG9yIHRoZSByZWFzb24gd2h5IHByb2Nlc3Npbmcgd2FzIG5vdCBhdHRlbXB0ZWQsIHN1Y2ggYXNcbiAqIGNhbmNlbGxhdGlvbiBvciBleHBpcmF0aW9uLlxuICovXG5leHBvcnQgdHlwZSBCZXRhTWVzc2FnZUJhdGNoUmVzdWx0ID1cbiAgfCBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0XG4gIHwgQmV0YU1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHRcbiAgfCBCZXRhTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHRcbiAgfCBCZXRhTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdDtcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0IHtcbiAgbWVzc2FnZTogQmV0YU1lc3NhZ2VzQVBJLkJldGFNZXNzYWdlO1xuXG4gIHR5cGU6ICdzdWNjZWVkZWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IExpc3Qgb2YgcmVxdWVzdHMgZm9yIHByb21wdCBjb21wbGV0aW9uLiBFYWNoIGlzIGFuIGluZGl2aWR1YWxcbiAgICogcmVxdWVzdCB0byBjcmVhdGUgYSBNZXNzYWdlLlxuICAgKi9cbiAgcmVxdWVzdHM6IEFycmF5PEJhdGNoQ3JlYXRlUGFyYW1zLlJlcXVlc3Q+O1xuXG4gIC8qKlxuICAgKiBIZWFkZXIgcGFyYW06IE9wdGlvbmFsIGhlYWRlciB0byBzcGVjaWZ5IHRoZSBiZXRhIHZlcnNpb24ocykgeW91IHdhbnQgdG8gdXNlLlxuICAgKi9cbiAgYmV0YXM/OiBBcnJheTxCZXRhQVBJLkFudGhyb3BpY0JldGE+O1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEJhdGNoQ3JlYXRlUGFyYW1zIHtcbiAgZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0IHtcbiAgICAvKipcbiAgICAgKiBEZXZlbG9wZXItcHJvdmlkZWQgSUQgY3JlYXRlZCBmb3IgZWFjaCByZXF1ZXN0IGluIGEgTWVzc2FnZSBCYXRjaC4gVXNlZnVsIGZvclxuICAgICAqIG1hdGNoaW5nIHJlc3VsdHMgdG8gcmVxdWVzdHMsIGFzIHJlc3VsdHMgbWF5IGJlIGdpdmVuIG91dCBvZiByZXF1ZXN0IG9yZGVyLlxuICAgICAqXG4gICAgICogTXVzdCBiZSB1bmlxdWUgZm9yIGVhY2ggcmVxdWVzdCB3aXRoaW4gdGhlIE1lc3NhZ2UgQmF0Y2guXG4gICAgICovXG4gICAgY3VzdG9tX2lkOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBNZXNzYWdlcyBBUEkgY3JlYXRpb24gcGFyYW1ldGVycyBmb3IgdGhlIGluZGl2aWR1YWwgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFNlZSB0aGUgW01lc3NhZ2VzIEFQSSByZWZlcmVuY2VdKC9lbi9hcGkvbWVzc2FnZXMpIGZvciBmdWxsIGRvY3VtZW50YXRpb24gb25cbiAgICAgKiBhdmFpbGFibGUgcGFyYW1ldGVycy5cbiAgICAgKi9cbiAgICBwYXJhbXM6IE9taXQ8QmV0YU1lc3NhZ2VzQVBJLk1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsICdiZXRhcyc+O1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hSZXRyaWV2ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBPcHRpb25hbCBoZWFkZXIgdG8gc3BlY2lmeSB0aGUgYmV0YSB2ZXJzaW9uKHMpIHlvdSB3YW50IHRvIHVzZS5cbiAgICovXG4gIGJldGFzPzogQXJyYXk8QmV0YUFQSS5BbnRocm9waWNCZXRhPjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXRjaExpc3RQYXJhbXMgZXh0ZW5kcyBQYWdlUGFyYW1zIHtcbiAgLyoqXG4gICAqIEhlYWRlciBwYXJhbTogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hEZWxldGVQYXJhbXMge1xuICAvKipcbiAgICogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hDYW5jZWxQYXJhbXMge1xuICAvKipcbiAgICogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hSZXN1bHRzUGFyYW1zIHtcbiAgLyoqXG4gICAqIE9wdGlvbmFsIGhlYWRlciB0byBzcGVjaWZ5IHRoZSBiZXRhIHZlcnNpb24ocykgeW91IHdhbnQgdG8gdXNlLlxuICAgKi9cbiAgYmV0YXM/OiBBcnJheTxCZXRhQVBJLkFudGhyb3BpY0JldGE+O1xufVxuXG5CYXRjaGVzLkJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UgPSBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgQmF0Y2hlcyB7XG4gIGV4cG9ydCB7XG4gICAgdHlwZSBCZXRhRGVsZXRlZE1lc3NhZ2VCYXRjaCBhcyBCZXRhRGVsZXRlZE1lc3NhZ2VCYXRjaCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2ggYXMgQmV0YU1lc3NhZ2VCYXRjaCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0LFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSBhcyBCZXRhTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMgYXMgQmV0YU1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hSZXN1bHQsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQsXG4gICAgQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSBhcyBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlLFxuICAgIHR5cGUgQmF0Y2hDcmVhdGVQYXJhbXMgYXMgQmF0Y2hDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBCYXRjaFJldHJpZXZlUGFyYW1zIGFzIEJhdGNoUmV0cmlldmVQYXJhbXMsXG4gICAgdHlwZSBCYXRjaExpc3RQYXJhbXMgYXMgQmF0Y2hMaXN0UGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hEZWxldGVQYXJhbXMgYXMgQmF0Y2hEZWxldGVQYXJhbXMsXG4gICAgdHlwZSBCYXRjaENhbmNlbFBhcmFtcyBhcyBCYXRjaENhbmNlbFBhcmFtcyxcbiAgICB0eXBlIEJhdGNoUmVzdWx0c1BhcmFtcyBhcyBCYXRjaFJlc3VsdHNQYXJhbXMsXG4gIH07XG59XG4iLCAidHlwZSBUb2tlbiA9IHtcbiAgdHlwZTogc3RyaW5nO1xuICB2YWx1ZTogc3RyaW5nO1xufTtcblxuY29uc3QgdG9rZW5pemUgPSAoaW5wdXQ6IHN0cmluZyk6IFRva2VuW10gPT4ge1xuICAgIGxldCBjdXJyZW50ID0gMDtcbiAgICBsZXQgdG9rZW5zOiBUb2tlbltdID0gW107XG5cbiAgICB3aGlsZSAoY3VycmVudCA8IGlucHV0Lmxlbmd0aCkge1xuICAgICAgbGV0IGNoYXIgPSBpbnB1dFtjdXJyZW50XTtcblxuICAgICAgaWYgKGNoYXIgPT09ICdcXFxcJykge1xuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PT0gJ3snKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnYnJhY2UnLFxuICAgICAgICAgIHZhbHVlOiAneycsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAnfScpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdicmFjZScsXG4gICAgICAgICAgdmFsdWU6ICd9JyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY3VycmVudCsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXIgPT09ICdbJykge1xuICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgdHlwZTogJ3BhcmVuJyxcbiAgICAgICAgICB2YWx1ZTogJ1snLFxuICAgICAgICB9KTtcblxuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PT0gJ10nKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAncGFyZW4nLFxuICAgICAgICAgIHZhbHVlOiAnXScsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAnOicpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdzZXBhcmF0b3InLFxuICAgICAgICAgIHZhbHVlOiAnOicsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAnLCcpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdkZWxpbWl0ZXInLFxuICAgICAgICAgIHZhbHVlOiAnLCcsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAnXCInKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuICAgICAgICBsZXQgZGFuZ2xpbmdRdW90ZSA9IGZhbHNlO1xuXG4gICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuXG4gICAgICAgIHdoaWxlIChjaGFyICE9PSAnXCInKSB7XG4gICAgICAgICAgaWYgKGN1cnJlbnQgPT09IGlucHV0Lmxlbmd0aCkge1xuICAgICAgICAgICAgZGFuZ2xpbmdRdW90ZSA9IHRydWU7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBpZiAoY2hhciA9PT0gJ1xcXFwnKSB7XG4gICAgICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgICAgICBpZiAoY3VycmVudCA9PT0gaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIGRhbmdsaW5nUXVvdGUgPSB0cnVlO1xuICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhbHVlICs9IGNoYXIgKyBpbnB1dFtjdXJyZW50XTtcbiAgICAgICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB2YWx1ZSArPSBjaGFyO1xuICAgICAgICAgICAgY2hhciA9IGlucHV0WysrY3VycmVudF07XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgY2hhciA9IGlucHV0WysrY3VycmVudF07XG5cbiAgICAgICAgaWYgKCFkYW5nbGluZ1F1b3RlKSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IFdISVRFU1BBQ0UgPSAvXFxzLztcbiAgICAgIGlmIChjaGFyICYmIFdISVRFU1BBQ0UudGVzdChjaGFyKSkge1xuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgTlVNQkVSUyA9IC9bMC05XS87XG4gICAgICBpZiAoKGNoYXIgJiYgTlVNQkVSUy50ZXN0KGNoYXIpKSB8fCBjaGFyID09PSAnLScgfHwgY2hhciA9PT0gJy4nKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuXG4gICAgICAgIGlmIChjaGFyID09PSAnLScpIHtcbiAgICAgICAgICB2YWx1ZSArPSBjaGFyO1xuICAgICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuICAgICAgICB9XG5cbiAgICAgICAgd2hpbGUgKChjaGFyICYmIE5VTUJFUlMudGVzdChjaGFyKSkgfHwgY2hhciA9PT0gJy4nKSB7XG4gICAgICAgICAgdmFsdWUgKz0gY2hhcjtcbiAgICAgICAgICBjaGFyID0gaW5wdXRbKytjdXJyZW50XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgfSk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBsZXQgTEVUVEVSUyA9IC9bYS16XS9pO1xuICAgICAgaWYgKGNoYXIgJiYgTEVUVEVSUy50ZXN0KGNoYXIpKSB7XG4gICAgICAgIGxldCB2YWx1ZSA9ICcnO1xuXG4gICAgICAgIHdoaWxlIChjaGFyICYmIExFVFRFUlMudGVzdChjaGFyKSkge1xuICAgICAgICAgIGlmIChjdXJyZW50ID09PSBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICB2YWx1ZSArPSBjaGFyO1xuICAgICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHZhbHVlID09ICd0cnVlJyB8fCB2YWx1ZSA9PSAnZmFsc2UnIHx8IHZhbHVlID09PSAnbnVsbCcpIHtcbiAgICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiAnbmFtZScsXG4gICAgICAgICAgICB2YWx1ZSxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyB1bmtub3duIHRva2VuLCBlLmcuIGBudWxgIHdoaWNoIGlzbid0IHF1aXRlIGBudWxsYFxuICAgICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgfVxuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgY3VycmVudCsrO1xuICAgIH1cblxuICAgIHJldHVybiB0b2tlbnM7XG4gIH0sXG4gIHN0cmlwID0gKHRva2VuczogVG9rZW5bXSk6IFRva2VuW10gPT4ge1xuICAgIGlmICh0b2tlbnMubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gdG9rZW5zO1xuICAgIH1cblxuICAgIGxldCBsYXN0VG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDFdITtcblxuICAgIHN3aXRjaCAobGFzdFRva2VuLnR5cGUpIHtcbiAgICAgIGNhc2UgJ3NlcGFyYXRvcic6XG4gICAgICAgIHRva2VucyA9IHRva2Vucy5zbGljZSgwLCB0b2tlbnMubGVuZ3RoIC0gMSk7XG4gICAgICAgIHJldHVybiBzdHJpcCh0b2tlbnMpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ251bWJlcic6XG4gICAgICAgIGxldCBsYXN0Q2hhcmFjdGVyT2ZMYXN0VG9rZW4gPSBsYXN0VG9rZW4udmFsdWVbbGFzdFRva2VuLnZhbHVlLmxlbmd0aCAtIDFdO1xuICAgICAgICBpZiAobGFzdENoYXJhY3Rlck9mTGFzdFRva2VuID09PSAnLicgfHwgbGFzdENoYXJhY3Rlck9mTGFzdFRva2VuID09PSAnLScpIHtcbiAgICAgICAgICB0b2tlbnMgPSB0b2tlbnMuc2xpY2UoMCwgdG9rZW5zLmxlbmd0aCAtIDEpO1xuICAgICAgICAgIHJldHVybiBzdHJpcCh0b2tlbnMpO1xuICAgICAgICB9XG4gICAgICBjYXNlICdzdHJpbmcnOlxuICAgICAgICBsZXQgdG9rZW5CZWZvcmVUaGVMYXN0VG9rZW4gPSB0b2tlbnNbdG9rZW5zLmxlbmd0aCAtIDJdO1xuICAgICAgICBpZiAodG9rZW5CZWZvcmVUaGVMYXN0VG9rZW4/LnR5cGUgPT09ICdkZWxpbWl0ZXInKSB7XG4gICAgICAgICAgdG9rZW5zID0gdG9rZW5zLnNsaWNlKDAsIHRva2Vucy5sZW5ndGggLSAxKTtcbiAgICAgICAgICByZXR1cm4gc3RyaXAodG9rZW5zKTtcbiAgICAgICAgfSBlbHNlIGlmICh0b2tlbkJlZm9yZVRoZUxhc3RUb2tlbj8udHlwZSA9PT0gJ2JyYWNlJyAmJiB0b2tlbkJlZm9yZVRoZUxhc3RUb2tlbi52YWx1ZSA9PT0gJ3snKSB7XG4gICAgICAgICAgdG9rZW5zID0gdG9rZW5zLnNsaWNlKDAsIHRva2Vucy5sZW5ndGggLSAxKTtcbiAgICAgICAgICByZXR1cm4gc3RyaXAodG9rZW5zKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ2RlbGltaXRlcic6XG4gICAgICAgIHRva2VucyA9IHRva2Vucy5zbGljZSgwLCB0b2tlbnMubGVuZ3RoIC0gMSk7XG4gICAgICAgIHJldHVybiBzdHJpcCh0b2tlbnMpO1xuICAgICAgICBicmVhaztcbiAgICB9XG5cbiAgICByZXR1cm4gdG9rZW5zO1xuICB9LFxuICB1bnN0cmlwID0gKHRva2VuczogVG9rZW5bXSk6IFRva2VuW10gPT4ge1xuICAgIGxldCB0YWlsOiBzdHJpbmdbXSA9IFtdO1xuXG4gICAgdG9rZW5zLm1hcCgodG9rZW4pID0+IHtcbiAgICAgIGlmICh0b2tlbi50eXBlID09PSAnYnJhY2UnKSB7XG4gICAgICAgIGlmICh0b2tlbi52YWx1ZSA9PT0gJ3snKSB7XG4gICAgICAgICAgdGFpbC5wdXNoKCd9Jyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFpbC5zcGxpY2UodGFpbC5sYXN0SW5kZXhPZignfScpLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaWYgKHRva2VuLnR5cGUgPT09ICdwYXJlbicpIHtcbiAgICAgICAgaWYgKHRva2VuLnZhbHVlID09PSAnWycpIHtcbiAgICAgICAgICB0YWlsLnB1c2goJ10nKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0YWlsLnNwbGljZSh0YWlsLmxhc3RJbmRleE9mKCddJyksIDEpO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICBpZiAodGFpbC5sZW5ndGggPiAwKSB7XG4gICAgICB0YWlsLnJldmVyc2UoKS5tYXAoKGl0ZW0pID0+IHtcbiAgICAgICAgaWYgKGl0ZW0gPT09ICd9Jykge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdicmFjZScsXG4gICAgICAgICAgICB2YWx1ZTogJ30nLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9IGVsc2UgaWYgKGl0ZW0gPT09ICddJykge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdwYXJlbicsXG4gICAgICAgICAgICB2YWx1ZTogJ10nLFxuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdG9rZW5zO1xuICB9LFxuICBnZW5lcmF0ZSA9ICh0b2tlbnM6IFRva2VuW10pOiBzdHJpbmcgPT4ge1xuICAgIGxldCBvdXRwdXQgPSAnJztcblxuICAgIHRva2Vucy5tYXAoKHRva2VuKSA9PiB7XG4gICAgICBzd2l0Y2ggKHRva2VuLnR5cGUpIHtcbiAgICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgICBvdXRwdXQgKz0gJ1wiJyArIHRva2VuLnZhbHVlICsgJ1wiJztcbiAgICAgICAgICBicmVhaztcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICBvdXRwdXQgKz0gdG9rZW4udmFsdWU7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gb3V0cHV0O1xuICB9LFxuICBwYXJ0aWFsUGFyc2UgPSAoaW5wdXQ6IHN0cmluZyk6IHVua25vd24gPT4gSlNPTi5wYXJzZShnZW5lcmF0ZSh1bnN0cmlwKHN0cmlwKHRva2VuaXplKGlucHV0KSkpKSk7XG5cbmV4cG9ydCB7IHBhcnRpYWxQYXJzZSB9O1xuIiwgImltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4uL2NvcmUuanNcIjtcbmltcG9ydCB7IEFudGhyb3BpY0Vycm9yLCBBUElVc2VyQWJvcnRFcnJvciB9IGZyb20gXCIuLi9lcnJvci5qc1wiO1xuaW1wb3J0IHtcbiAgdHlwZSBCZXRhQ29udGVudEJsb2NrLFxuICBNZXNzYWdlcyBhcyBCZXRhTWVzc2FnZXMsXG4gIHR5cGUgQmV0YU1lc3NhZ2UsXG4gIHR5cGUgQmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudCBhcyBCZXRhTWVzc2FnZVN0cmVhbUV2ZW50LFxuICB0eXBlIEJldGFNZXNzYWdlUGFyYW0sXG4gIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtcyBhcyBCZXRhTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSBhcyBCZXRhTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2UsXG4gIHR5cGUgQmV0YVRleHRCbG9jayxcbiAgdHlwZSBCZXRhVGV4dENpdGF0aW9uLFxufSBmcm9tIFwiLi4vcmVzb3VyY2VzL2JldGEvbWVzc2FnZXMvbWVzc2FnZXMuanNcIjtcbmltcG9ydCB7IHR5cGUgUmVhZGFibGVTdHJlYW0sIHR5cGUgUmVzcG9uc2UgfSBmcm9tIFwiLi4vX3NoaW1zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tIFwiLi4vc3RyZWFtaW5nLmpzXCI7XG5pbXBvcnQgeyBwYXJ0aWFsUGFyc2UgfSBmcm9tIFwiLi4vX3ZlbmRvci9wYXJ0aWFsLWpzb24tcGFyc2VyL3BhcnNlci5qc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VTdHJlYW1FdmVudHMge1xuICBjb25uZWN0OiAoKSA9PiB2b2lkO1xuICBzdHJlYW1FdmVudDogKGV2ZW50OiBCZXRhTWVzc2FnZVN0cmVhbUV2ZW50LCBzbmFwc2hvdDogQmV0YU1lc3NhZ2UpID0+IHZvaWQ7XG4gIHRleHQ6ICh0ZXh0RGVsdGE6IHN0cmluZywgdGV4dFNuYXBzaG90OiBzdHJpbmcpID0+IHZvaWQ7XG4gIGNpdGF0aW9uOiAoY2l0YXRpb246IEJldGFUZXh0Q2l0YXRpb24sIGNpdGF0aW9uc1NuYXBzaG90OiBCZXRhVGV4dENpdGF0aW9uW10pID0+IHZvaWQ7XG4gIGlucHV0SnNvbjogKHBhcnRpYWxKc29uOiBzdHJpbmcsIGpzb25TbmFwc2hvdDogdW5rbm93bikgPT4gdm9pZDtcbiAgbWVzc2FnZTogKG1lc3NhZ2U6IEJldGFNZXNzYWdlKSA9PiB2b2lkO1xuICBjb250ZW50QmxvY2s6IChjb250ZW50OiBCZXRhQ29udGVudEJsb2NrKSA9PiB2b2lkO1xuICBmaW5hbE1lc3NhZ2U6IChtZXNzYWdlOiBCZXRhTWVzc2FnZSkgPT4gdm9pZDtcbiAgZXJyb3I6IChlcnJvcjogQW50aHJvcGljRXJyb3IpID0+IHZvaWQ7XG4gIGFib3J0OiAoZXJyb3I6IEFQSVVzZXJBYm9ydEVycm9yKSA9PiB2b2lkO1xuICBlbmQ6ICgpID0+IHZvaWQ7XG59XG5cbnR5cGUgTWVzc2FnZVN0cmVhbUV2ZW50TGlzdGVuZXJzPEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4gPSB7XG4gIGxpc3RlbmVyOiBNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XTtcbiAgb25jZT86IGJvb2xlYW47XG59W107XG5cbmNvbnN0IEpTT05fQlVGX1BST1BFUlRZID0gJ19fanNvbl9idWYnO1xuXG5leHBvcnQgY2xhc3MgQmV0YU1lc3NhZ2VTdHJlYW0gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPEJldGFNZXNzYWdlU3RyZWFtRXZlbnQ+IHtcbiAgbWVzc2FnZXM6IEJldGFNZXNzYWdlUGFyYW1bXSA9IFtdO1xuICByZWNlaXZlZE1lc3NhZ2VzOiBCZXRhTWVzc2FnZVtdID0gW107XG4gICNjdXJyZW50TWVzc2FnZVNuYXBzaG90OiBCZXRhTWVzc2FnZSB8IHVuZGVmaW5lZDtcblxuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cbiAgI2Nvbm5lY3RlZFByb21pc2U6IFByb21pc2U8UmVzcG9uc2UgfCBudWxsPjtcbiAgI3Jlc29sdmVDb25uZWN0ZWRQcm9taXNlOiAocmVzcG9uc2U6IFJlc3BvbnNlIHwgbnVsbCkgPT4gdm9pZCA9ICgpID0+IHt9O1xuICAjcmVqZWN0Q29ubmVjdGVkUHJvbWlzZTogKGVycm9yOiBBbnRocm9waWNFcnJvcikgPT4gdm9pZCA9ICgpID0+IHt9O1xuXG4gICNlbmRQcm9taXNlOiBQcm9taXNlPHZvaWQ+O1xuICAjcmVzb2x2ZUVuZFByb21pc2U6ICgpID0+IHZvaWQgPSAoKSA9PiB7fTtcbiAgI3JlamVjdEVuZFByb21pc2U6IChlcnJvcjogQW50aHJvcGljRXJyb3IpID0+IHZvaWQgPSAoKSA9PiB7fTtcblxuICAjbGlzdGVuZXJzOiB7IFtFdmVudCBpbiBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzXT86IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gfSA9IHt9O1xuXG4gICNlbmRlZCA9IGZhbHNlO1xuICAjZXJyb3JlZCA9IGZhbHNlO1xuICAjYWJvcnRlZCA9IGZhbHNlO1xuICAjY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCA9IGZhbHNlO1xuICAjcmVzcG9uc2U6IFJlc3BvbnNlIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgI3JlcXVlc3RfaWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy4jY29ubmVjdGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlPFJlc3BvbnNlIHwgbnVsbD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy4jcmVzb2x2ZUNvbm5lY3RlZFByb21pc2UgPSByZXNvbHZlO1xuICAgICAgdGhpcy4jcmVqZWN0Q29ubmVjdGVkUHJvbWlzZSA9IHJlamVjdDtcbiAgICB9KTtcblxuICAgIHRoaXMuI2VuZFByb21pc2UgPSBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLiNyZXNvbHZlRW5kUHJvbWlzZSA9IHJlc29sdmU7XG4gICAgICB0aGlzLiNyZWplY3RFbmRQcm9taXNlID0gcmVqZWN0O1xuICAgIH0pO1xuXG4gICAgLy8gRG9uJ3QgbGV0IHRoZXNlIHByb21pc2VzIGNhdXNlIHVuaGFuZGxlZCByZWplY3Rpb24gZXJyb3JzLlxuICAgIC8vIHdlIHdpbGwgbWFudWFsbHkgY2F1c2UgYW4gdW5oYW5kbGVkIHJlamVjdGlvbiBlcnJvciBsYXRlclxuICAgIC8vIGlmIHRoZSB1c2VyIGhhc24ndCByZWdpc3RlcmVkIGFueSBlcnJvciBsaXN0ZW5lciBvciBjYWxsZWRcbiAgICAvLyBhbnkgcHJvbWlzZS1yZXR1cm5pbmcgbWV0aG9kLlxuICAgIHRoaXMuI2Nvbm5lY3RlZFByb21pc2UuY2F0Y2goKCkgPT4ge30pO1xuICAgIHRoaXMuI2VuZFByb21pc2UuY2F0Y2goKCkgPT4ge30pO1xuICB9XG5cbiAgZ2V0IHJlc3BvbnNlKCk6IFJlc3BvbnNlIHwgbnVsbCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuI3Jlc3BvbnNlO1xuICB9XG5cbiAgZ2V0IHJlcXVlc3RfaWQoKTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuI3JlcXVlc3RfaWQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYE1lc3NhZ2VTdHJlYW1gIGRhdGEsIHRoZSByYXcgYFJlc3BvbnNlYCBpbnN0YW5jZSBhbmQgdGhlIElEIG9mIHRoZSByZXF1ZXN0LFxuICAgKiByZXR1cm5lZCB2aWUgdGhlIGByZXF1ZXN0LWlkYCBoZWFkZXIgd2hpY2ggaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmcgcmVxdWVzdHMgYW5kIHJlc3BvcnRpbmdcbiAgICogaXNzdWVzIHRvIEFudGhyb3BpYy5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgc2FtZSBhcyB0aGUgYEFQSVByb21pc2Uud2l0aFJlc3BvbnNlKClgIG1ldGhvZC5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgd2lsbCByYWlzZSBhbiBlcnJvciBpZiB5b3UgY3JlYXRlZCB0aGUgc3RyZWFtIHVzaW5nIGBNZXNzYWdlU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbWBcbiAgICogYXMgbm8gYFJlc3BvbnNlYCBpcyBhdmFpbGFibGUuXG4gICAqL1xuICBhc3luYyB3aXRoUmVzcG9uc2UoKTogUHJvbWlzZTx7XG4gICAgZGF0YTogQmV0YU1lc3NhZ2VTdHJlYW07XG4gICAgcmVzcG9uc2U6IFJlc3BvbnNlO1xuICAgIHJlcXVlc3RfaWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG4gIH0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuI2Nvbm5lY3RlZFByb21pc2U7XG4gICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgcmVzb2x2ZSBhIGBSZXNwb25zZWAgb2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IHRoaXMsXG4gICAgICByZXNwb25zZSxcbiAgICAgIHJlcXVlc3RfaWQ6IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdyZXF1ZXN0LWlkJyksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnRlbmRlZCBmb3IgdXNlIG9uIHRoZSBmcm9udGVuZCwgY29uc3VtaW5nIGEgc3RyZWFtIHByb2R1Y2VkIHdpdGhcbiAgICogYC50b1JlYWRhYmxlU3RyZWFtKClgIG9uIHRoZSBiYWNrZW5kLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgbWVzc2FnZXMgc2VudCB0byB0aGUgbW9kZWwgZG8gbm90IGFwcGVhciBpbiBgLm9uKCdtZXNzYWdlJylgXG4gICAqIGluIHRoaXMgY29udGV4dC5cbiAgICovXG4gIHN0YXRpYyBmcm9tUmVhZGFibGVTdHJlYW0oc3RyZWFtOiBSZWFkYWJsZVN0cmVhbSk6IEJldGFNZXNzYWdlU3RyZWFtIHtcbiAgICBjb25zdCBydW5uZXIgPSBuZXcgQmV0YU1lc3NhZ2VTdHJlYW0oKTtcbiAgICBydW5uZXIuX3J1bigoKSA9PiBydW5uZXIuX2Zyb21SZWFkYWJsZVN0cmVhbShzdHJlYW0pKTtcbiAgICByZXR1cm4gcnVubmVyO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZU1lc3NhZ2UoXG4gICAgbWVzc2FnZXM6IEJldGFNZXNzYWdlcyxcbiAgICBwYXJhbXM6IEJldGFNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQmV0YU1lc3NhZ2VTdHJlYW0ge1xuICAgIGNvbnN0IHJ1bm5lciA9IG5ldyBCZXRhTWVzc2FnZVN0cmVhbSgpO1xuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBwYXJhbXMubWVzc2FnZXMpIHtcbiAgICAgIHJ1bm5lci5fYWRkTWVzc2FnZVBhcmFtKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBydW5uZXIuX3J1bigoKSA9PlxuICAgICAgcnVubmVyLl9jcmVhdGVNZXNzYWdlKFxuICAgICAgICBtZXNzYWdlcyxcbiAgICAgICAgeyAuLi5wYXJhbXMsIHN0cmVhbTogdHJ1ZSB9LFxuICAgICAgICB7IC4uLm9wdGlvbnMsIGhlYWRlcnM6IHsgLi4ub3B0aW9ucz8uaGVhZGVycywgJ1gtU3RhaW5sZXNzLUhlbHBlci1NZXRob2QnOiAnc3RyZWFtJyB9IH0sXG4gICAgICApLFxuICAgICk7XG4gICAgcmV0dXJuIHJ1bm5lcjtcbiAgfVxuXG4gIHByb3RlY3RlZCBfcnVuKGV4ZWN1dG9yOiAoKSA9PiBQcm9taXNlPGFueT4pIHtcbiAgICBleGVjdXRvcigpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5fZW1pdEZpbmFsKCk7XG4gICAgICB0aGlzLl9lbWl0KCdlbmQnKTtcbiAgICB9LCB0aGlzLiNoYW5kbGVFcnJvcik7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2FkZE1lc3NhZ2VQYXJhbShtZXNzYWdlOiBCZXRhTWVzc2FnZVBhcmFtKSB7XG4gICAgdGhpcy5tZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9hZGRNZXNzYWdlKG1lc3NhZ2U6IEJldGFNZXNzYWdlLCBlbWl0ID0gdHJ1ZSkge1xuICAgIHRoaXMucmVjZWl2ZWRNZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICAgIGlmIChlbWl0KSB7XG4gICAgICB0aGlzLl9lbWl0KCdtZXNzYWdlJywgbWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIF9jcmVhdGVNZXNzYWdlKFxuICAgIG1lc3NhZ2VzOiBCZXRhTWVzc2FnZXMsXG4gICAgcGFyYW1zOiBCZXRhTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc2lnbmFsID0gb3B0aW9ucz8uc2lnbmFsO1xuICAgIGlmIChzaWduYWwpIHtcbiAgICAgIGlmIChzaWduYWwuYWJvcnRlZCkgdGhpcy5jb250cm9sbGVyLmFib3J0KCk7XG4gICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKSk7XG4gICAgfVxuICAgIHRoaXMuI2JlZ2luUmVxdWVzdCgpO1xuICAgIGNvbnN0IHsgcmVzcG9uc2UsIGRhdGE6IHN0cmVhbSB9ID0gYXdhaXQgbWVzc2FnZXNcbiAgICAgIC5jcmVhdGUoeyAuLi5wYXJhbXMsIHN0cmVhbTogdHJ1ZSB9LCB7IC4uLm9wdGlvbnMsIHNpZ25hbDogdGhpcy5jb250cm9sbGVyLnNpZ25hbCB9KVxuICAgICAgLndpdGhSZXNwb25zZSgpO1xuICAgIHRoaXMuX2Nvbm5lY3RlZChyZXNwb25zZSk7XG4gICAgZm9yIGF3YWl0IChjb25zdCBldmVudCBvZiBzdHJlYW0pIHtcbiAgICAgIHRoaXMuI2FkZFN0cmVhbUV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgaWYgKHN0cmVhbS5jb250cm9sbGVyLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgdGhyb3cgbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuICAgIHRoaXMuI2VuZFJlcXVlc3QoKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfY29ubmVjdGVkKHJlc3BvbnNlOiBSZXNwb25zZSB8IG51bGwpIHtcbiAgICBpZiAodGhpcy5lbmRlZCkgcmV0dXJuO1xuICAgIHRoaXMuI3Jlc3BvbnNlID0gcmVzcG9uc2U7XG4gICAgdGhpcy4jcmVxdWVzdF9pZCA9IHJlc3BvbnNlPy5oZWFkZXJzLmdldCgncmVxdWVzdC1pZCcpO1xuICAgIHRoaXMuI3Jlc29sdmVDb25uZWN0ZWRQcm9taXNlKHJlc3BvbnNlKTtcbiAgICB0aGlzLl9lbWl0KCdjb25uZWN0Jyk7XG4gIH1cblxuICBnZXQgZW5kZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2VuZGVkO1xuICB9XG5cbiAgZ2V0IGVycm9yZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2Vycm9yZWQ7XG4gIH1cblxuICBnZXQgYWJvcnRlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4jYWJvcnRlZDtcbiAgfVxuXG4gIGFib3J0KCkge1xuICAgIHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgdGhlIGxpc3RlbmVyIGZ1bmN0aW9uIHRvIHRoZSBlbmQgb2YgdGhlIGxpc3RlbmVycyBhcnJheSBmb3IgdGhlIGV2ZW50LlxuICAgKiBObyBjaGVja3MgYXJlIG1hZGUgdG8gc2VlIGlmIHRoZSBsaXN0ZW5lciBoYXMgYWxyZWFkeSBiZWVuIGFkZGVkLiBNdWx0aXBsZSBjYWxscyBwYXNzaW5nXG4gICAqIHRoZSBzYW1lIGNvbWJpbmF0aW9uIG9mIGV2ZW50IGFuZCBsaXN0ZW5lciB3aWxsIHJlc3VsdCBpbiB0aGUgbGlzdGVuZXIgYmVpbmcgYWRkZWQsIGFuZFxuICAgKiBjYWxsZWQsIG11bHRpcGxlIHRpbWVzLlxuICAgKiBAcmV0dXJucyB0aGlzIE1lc3NhZ2VTdHJlYW0sIHNvIHRoYXQgY2FsbHMgY2FuIGJlIGNoYWluZWRcbiAgICovXG4gIG9uPEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oZXZlbnQ6IEV2ZW50LCBsaXN0ZW5lcjogTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0pOiB0aGlzIHtcbiAgICBjb25zdCBsaXN0ZW5lcnM6IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gPVxuICAgICAgdGhpcy4jbGlzdGVuZXJzW2V2ZW50XSB8fCAodGhpcy4jbGlzdGVuZXJzW2V2ZW50XSA9IFtdKTtcbiAgICBsaXN0ZW5lcnMucHVzaCh7IGxpc3RlbmVyIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFJlbW92ZXMgdGhlIHNwZWNpZmllZCBsaXN0ZW5lciBmcm9tIHRoZSBsaXN0ZW5lciBhcnJheSBmb3IgdGhlIGV2ZW50LlxuICAgKiBvZmYoKSB3aWxsIHJlbW92ZSwgYXQgbW9zdCwgb25lIGluc3RhbmNlIG9mIGEgbGlzdGVuZXIgZnJvbSB0aGUgbGlzdGVuZXIgYXJyYXkuIElmIGFueSBzaW5nbGVcbiAgICogbGlzdGVuZXIgaGFzIGJlZW4gYWRkZWQgbXVsdGlwbGUgdGltZXMgdG8gdGhlIGxpc3RlbmVyIGFycmF5IGZvciB0aGUgc3BlY2lmaWVkIGV2ZW50LCB0aGVuXG4gICAqIG9mZigpIG11c3QgYmUgY2FsbGVkIG11bHRpcGxlIHRpbWVzIHRvIHJlbW92ZSBlYWNoIGluc3RhbmNlLlxuICAgKiBAcmV0dXJucyB0aGlzIE1lc3NhZ2VTdHJlYW0sIHNvIHRoYXQgY2FsbHMgY2FuIGJlIGNoYWluZWRcbiAgICovXG4gIG9mZjxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+KGV2ZW50OiBFdmVudCwgbGlzdGVuZXI6IE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdKTogdGhpcyB7XG4gICAgY29uc3QgbGlzdGVuZXJzID0gdGhpcy4jbGlzdGVuZXJzW2V2ZW50XTtcbiAgICBpZiAoIWxpc3RlbmVycykgcmV0dXJuIHRoaXM7XG4gICAgY29uc3QgaW5kZXggPSBsaXN0ZW5lcnMuZmluZEluZGV4KChsKSA9PiBsLmxpc3RlbmVyID09PSBsaXN0ZW5lcik7XG4gICAgaWYgKGluZGV4ID49IDApIGxpc3RlbmVycy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIEFkZHMgYSBvbmUtdGltZSBsaXN0ZW5lciBmdW5jdGlvbiBmb3IgdGhlIGV2ZW50LiBUaGUgbmV4dCB0aW1lIHRoZSBldmVudCBpcyB0cmlnZ2VyZWQsXG4gICAqIHRoaXMgbGlzdGVuZXIgaXMgcmVtb3ZlZCBhbmQgdGhlbiBpbnZva2VkLlxuICAgKiBAcmV0dXJucyB0aGlzIE1lc3NhZ2VTdHJlYW0sIHNvIHRoYXQgY2FsbHMgY2FuIGJlIGNoYWluZWRcbiAgICovXG4gIG9uY2U8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihldmVudDogRXZlbnQsIGxpc3RlbmVyOiBNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XSk6IHRoaXMge1xuICAgIGNvbnN0IGxpc3RlbmVyczogTWVzc2FnZVN0cmVhbUV2ZW50TGlzdGVuZXJzPEV2ZW50PiA9XG4gICAgICB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdIHx8ICh0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdID0gW10pO1xuICAgIGxpc3RlbmVycy5wdXNoKHsgbGlzdGVuZXIsIG9uY2U6IHRydWUgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBpcyBzaW1pbGFyIHRvIGAub25jZSgpYCwgYnV0IHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdGhlIG5leHQgdGltZVxuICAgKiB0aGUgZXZlbnQgaXMgdHJpZ2dlcmVkLCBpbnN0ZWFkIG9mIGNhbGxpbmcgYSBsaXN0ZW5lciBjYWxsYmFjay5cbiAgICogQHJldHVybnMgYSBQcm9taXNlIHRoYXQgcmVzb2x2ZXMgdGhlIG5leHQgdGltZSBnaXZlbiBldmVudCBpcyB0cmlnZ2VyZWQsXG4gICAqIG9yIHJlamVjdHMgaWYgYW4gZXJyb3IgaXMgZW1pdHRlZC4gIChJZiB5b3UgcmVxdWVzdCB0aGUgJ2Vycm9yJyBldmVudCxcbiAgICogcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSBlcnJvcikuXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqXG4gICAqICAgY29uc3QgbWVzc2FnZSA9IGF3YWl0IHN0cmVhbS5lbWl0dGVkKCdtZXNzYWdlJykgLy8gcmVqZWN0cyBpZiB0aGUgc3RyZWFtIGVycm9yc1xuICAgKi9cbiAgZW1pdHRlZDxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+KFxuICAgIGV2ZW50OiBFdmVudCxcbiAgKTogUHJvbWlzZTxcbiAgICBQYXJhbWV0ZXJzPE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdPiBleHRlbmRzIFtpbmZlciBQYXJhbV0gPyBQYXJhbVxuICAgIDogUGFyYW1ldGVyczxNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XT4gZXh0ZW5kcyBbXSA/IHZvaWRcbiAgICA6IFBhcmFtZXRlcnM8TWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+XG4gID4ge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLiNjYXRjaGluZ1Byb21pc2VDcmVhdGVkID0gdHJ1ZTtcbiAgICAgIGlmIChldmVudCAhPT0gJ2Vycm9yJykgdGhpcy5vbmNlKCdlcnJvcicsIHJlamVjdCk7XG4gICAgICB0aGlzLm9uY2UoZXZlbnQsIHJlc29sdmUgYXMgYW55KTtcbiAgICB9KTtcbiAgfVxuXG4gIGFzeW5jIGRvbmUoKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCA9IHRydWU7XG4gICAgYXdhaXQgdGhpcy4jZW5kUHJvbWlzZTtcbiAgfVxuXG4gIGdldCBjdXJyZW50TWVzc2FnZSgpOiBCZXRhTWVzc2FnZSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3Q7XG4gIH1cblxuICAjZ2V0RmluYWxNZXNzYWdlKCk6IEJldGFNZXNzYWdlIHtcbiAgICBpZiAodGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKCdzdHJlYW0gZW5kZWQgd2l0aG91dCBwcm9kdWNpbmcgYSBNZXNzYWdlIHdpdGggcm9sZT1hc3Npc3RhbnQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVjZWl2ZWRNZXNzYWdlcy5hdCgtMSkhO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHRoZSBmaW5hbCBhc3Npc3RhbnQgTWVzc2FnZSByZXNwb25zZSxcbiAgICogb3IgcmVqZWN0cyBpZiBhbiBlcnJvciBvY2N1cnJlZCBvciB0aGUgc3RyZWFtIGVuZGVkIHByZW1hdHVyZWx5IHdpdGhvdXQgcHJvZHVjaW5nIGEgTWVzc2FnZS5cbiAgICovXG4gIGFzeW5jIGZpbmFsTWVzc2FnZSgpOiBQcm9taXNlPEJldGFNZXNzYWdlPiB7XG4gICAgYXdhaXQgdGhpcy5kb25lKCk7XG4gICAgcmV0dXJuIHRoaXMuI2dldEZpbmFsTWVzc2FnZSgpO1xuICB9XG5cbiAgI2dldEZpbmFsVGV4dCgpOiBzdHJpbmcge1xuICAgIGlmICh0aGlzLnJlY2VpdmVkTWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoJ3N0cmVhbSBlbmRlZCB3aXRob3V0IHByb2R1Y2luZyBhIE1lc3NhZ2Ugd2l0aCByb2xlPWFzc2lzdGFudCcpO1xuICAgIH1cbiAgICBjb25zdCB0ZXh0QmxvY2tzID0gdGhpcy5yZWNlaXZlZE1lc3NhZ2VzXG4gICAgICAuYXQoLTEpIVxuICAgICAgLmNvbnRlbnQuZmlsdGVyKChibG9jayk6IGJsb2NrIGlzIEJldGFUZXh0QmxvY2sgPT4gYmxvY2sudHlwZSA9PT0gJ3RleHQnKVxuICAgICAgLm1hcCgoYmxvY2spID0+IGJsb2NrLnRleHQpO1xuICAgIGlmICh0ZXh0QmxvY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKCdzdHJlYW0gZW5kZWQgd2l0aG91dCBwcm9kdWNpbmcgYSBjb250ZW50IGJsb2NrIHdpdGggdHlwZT10ZXh0Jyk7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0QmxvY2tzLmpvaW4oJyAnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSB0aGUgZmluYWwgYXNzaXN0YW50IE1lc3NhZ2UncyB0ZXh0IHJlc3BvbnNlLCBjb25jYXRlbmF0ZWRcbiAgICogdG9nZXRoZXIgaWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgdGV4dCBibG9ja3MuXG4gICAqIFJlamVjdHMgaWYgYW4gZXJyb3Igb2NjdXJyZWQgb3IgdGhlIHN0cmVhbSBlbmRlZCBwcmVtYXR1cmVseSB3aXRob3V0IHByb2R1Y2luZyBhIE1lc3NhZ2UuXG4gICAqL1xuICBhc3luYyBmaW5hbFRleHQoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBhd2FpdCB0aGlzLmRvbmUoKTtcbiAgICByZXR1cm4gdGhpcy4jZ2V0RmluYWxUZXh0KCk7XG4gIH1cblxuICAjaGFuZGxlRXJyb3IgPSAoZXJyb3I6IHVua25vd24pID0+IHtcbiAgICB0aGlzLiNlcnJvcmVkID0gdHJ1ZTtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgIGVycm9yID0gbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEFQSVVzZXJBYm9ydEVycm9yKSB7XG4gICAgICB0aGlzLiNhYm9ydGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0aGlzLl9lbWl0KCdhYm9ydCcsIGVycm9yKTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQW50aHJvcGljRXJyb3IpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbnN0IGFudGhyb3BpY0Vycm9yOiBBbnRocm9waWNFcnJvciA9IG5ldyBBbnRocm9waWNFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGFudGhyb3BpY0Vycm9yLmNhdXNlID0gZXJyb3I7XG4gICAgICByZXR1cm4gdGhpcy5fZW1pdCgnZXJyb3InLCBhbnRocm9waWNFcnJvcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9lbWl0KCdlcnJvcicsIG5ldyBBbnRocm9waWNFcnJvcihTdHJpbmcoZXJyb3IpKSk7XG4gIH07XG5cbiAgcHJvdGVjdGVkIF9lbWl0PEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oXG4gICAgZXZlbnQ6IEV2ZW50LFxuICAgIC4uLmFyZ3M6IFBhcmFtZXRlcnM8TWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+XG4gICkge1xuICAgIC8vIG1ha2Ugc3VyZSB3ZSBkb24ndCBlbWl0IGFueSBNZXNzYWdlU3RyZWFtRXZlbnRzIGFmdGVyIGVuZFxuICAgIGlmICh0aGlzLiNlbmRlZCkgcmV0dXJuO1xuXG4gICAgaWYgKGV2ZW50ID09PSAnZW5kJykge1xuICAgICAgdGhpcy4jZW5kZWQgPSB0cnVlO1xuICAgICAgdGhpcy4jcmVzb2x2ZUVuZFByb21pc2UoKTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnM6IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gfCB1bmRlZmluZWQgPSB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIHRoaXMuI2xpc3RlbmVyc1tldmVudF0gPSBsaXN0ZW5lcnMuZmlsdGVyKChsKSA9PiAhbC5vbmNlKSBhcyBhbnk7XG4gICAgICBsaXN0ZW5lcnMuZm9yRWFjaCgoeyBsaXN0ZW5lciB9OiBhbnkpID0+IGxpc3RlbmVyKC4uLmFyZ3MpKTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQgPT09ICdhYm9ydCcpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gYXJnc1swXSBhcyBBUElVc2VyQWJvcnRFcnJvcjtcbiAgICAgIGlmICghdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCAmJiAhbGlzdGVuZXJzPy5sZW5ndGgpIHtcbiAgICAgICAgUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgICAgdGhpcy4jcmVqZWN0Q29ubmVjdGVkUHJvbWlzZShlcnJvcik7XG4gICAgICB0aGlzLiNyZWplY3RFbmRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuX2VtaXQoJ2VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudCA9PT0gJ2Vycm9yJykge1xuICAgICAgLy8gTk9URTogX2VtaXQoJ2Vycm9yJywgZXJyb3IpIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmcm9tICNoYW5kbGVFcnJvcigpLlxuXG4gICAgICBjb25zdCBlcnJvciA9IGFyZ3NbMF0gYXMgQW50aHJvcGljRXJyb3I7XG4gICAgICBpZiAoIXRoaXMuI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgJiYgIWxpc3RlbmVycz8ubGVuZ3RoKSB7XG4gICAgICAgIC8vIFRyaWdnZXIgYW4gdW5oYW5kbGVkIHJlamVjdGlvbiBpZiB0aGUgdXNlciBoYXNuJ3QgcmVnaXN0ZXJlZCBhbnkgZXJyb3IgaGFuZGxlcnMuXG4gICAgICAgIC8vIElmIHlvdSBhcmUgc2VlaW5nIHN0YWNrIHRyYWNlcyBoZXJlLCBtYWtlIHN1cmUgdG8gaGFuZGxlIGVycm9ycyB2aWEgZWl0aGVyOlxuICAgICAgICAvLyAtIHJ1bm5lci5vbignZXJyb3InLCAoKSA9PiAuLi4pXG4gICAgICAgIC8vIC0gYXdhaXQgcnVubmVyLmRvbmUoKVxuICAgICAgICAvLyAtIGF3YWl0IHJ1bm5lci5maW5hbC4uLigpXG4gICAgICAgIC8vIC0gZXRjLlxuICAgICAgICBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgICB0aGlzLiNyZWplY3RDb25uZWN0ZWRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuI3JlamVjdEVuZFByb21pc2UoZXJyb3IpO1xuICAgICAgdGhpcy5fZW1pdCgnZW5kJyk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIF9lbWl0RmluYWwoKSB7XG4gICAgY29uc3QgZmluYWxNZXNzYWdlID0gdGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmF0KC0xKTtcbiAgICBpZiAoZmluYWxNZXNzYWdlKSB7XG4gICAgICB0aGlzLl9lbWl0KCdmaW5hbE1lc3NhZ2UnLCB0aGlzLiNnZXRGaW5hbE1lc3NhZ2UoKSk7XG4gICAgfVxuICB9XG5cbiAgI2JlZ2luUmVxdWVzdCgpIHtcbiAgICBpZiAodGhpcy5lbmRlZCkgcmV0dXJuO1xuICAgIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3QgPSB1bmRlZmluZWQ7XG4gIH1cbiAgI2FkZFN0cmVhbUV2ZW50KGV2ZW50OiBCZXRhTWVzc2FnZVN0cmVhbUV2ZW50KSB7XG4gICAgaWYgKHRoaXMuZW5kZWQpIHJldHVybjtcbiAgICBjb25zdCBtZXNzYWdlU25hcHNob3QgPSB0aGlzLiNhY2N1bXVsYXRlTWVzc2FnZShldmVudCk7XG4gICAgdGhpcy5fZW1pdCgnc3RyZWFtRXZlbnQnLCBldmVudCwgbWVzc2FnZVNuYXBzaG90KTtcblxuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19kZWx0YSc6IHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IG1lc3NhZ2VTbmFwc2hvdC5jb250ZW50LmF0KC0xKSE7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQuZGVsdGEudHlwZSkge1xuICAgICAgICAgIGNhc2UgJ3RleHRfZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZW1pdCgndGV4dCcsIGV2ZW50LmRlbHRhLnRleHQsIGNvbnRlbnQudGV4dCB8fCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSAnY2l0YXRpb25zX2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2VtaXQoJ2NpdGF0aW9uJywgZXZlbnQuZGVsdGEuY2l0YXRpb24sIGNvbnRlbnQuY2l0YXRpb25zID8/IFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlICdpbnB1dF9qc29uX2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ3Rvb2xfdXNlJyAmJiBjb250ZW50LmlucHV0KSB7XG4gICAgICAgICAgICAgIHRoaXMuX2VtaXQoJ2lucHV0SnNvbicsIGV2ZW50LmRlbHRhLnBhcnRpYWxfanNvbiwgY29udGVudC5pbnB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNoZWNrTmV2ZXIoZXZlbnQuZGVsdGEpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnbWVzc2FnZV9zdG9wJzoge1xuICAgICAgICB0aGlzLl9hZGRNZXNzYWdlUGFyYW0obWVzc2FnZVNuYXBzaG90KTtcbiAgICAgICAgdGhpcy5fYWRkTWVzc2FnZShtZXNzYWdlU25hcHNob3QsIHRydWUpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RvcCc6IHtcbiAgICAgICAgdGhpcy5fZW1pdCgnY29udGVudEJsb2NrJywgbWVzc2FnZVNuYXBzaG90LmNvbnRlbnQuYXQoLTEpISk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnbWVzc2FnZV9zdGFydCc6IHtcbiAgICAgICAgdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdCA9IG1lc3NhZ2VTbmFwc2hvdDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX3N0YXJ0JzpcbiAgICAgIGNhc2UgJ21lc3NhZ2VfZGVsdGEnOlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgI2VuZFJlcXVlc3QoKTogQmV0YU1lc3NhZ2Uge1xuICAgIGlmICh0aGlzLmVuZGVkKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYHN0cmVhbSBoYXMgZW5kZWQsIHRoaXMgc2hvdWxkbid0IGhhcHBlbmApO1xuICAgIH1cbiAgICBjb25zdCBzbmFwc2hvdCA9IHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3Q7XG4gICAgaWYgKCFzbmFwc2hvdCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGByZXF1ZXN0IGVuZGVkIHdpdGhvdXQgc2VuZGluZyBhbnkgY2h1bmtzYCk7XG4gICAgfVxuICAgIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3QgPSB1bmRlZmluZWQ7XG4gICAgcmV0dXJuIHNuYXBzaG90O1xuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIF9mcm9tUmVhZGFibGVTdHJlYW0oXG4gICAgcmVhZGFibGVTdHJlYW06IFJlYWRhYmxlU3RyZWFtLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzaWduYWwgPSBvcHRpb25zPy5zaWduYWw7XG4gICAgaWYgKHNpZ25hbCkge1xuICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+IHRoaXMuY29udHJvbGxlci5hYm9ydCgpKTtcbiAgICB9XG4gICAgdGhpcy4jYmVnaW5SZXF1ZXN0KCk7XG4gICAgdGhpcy5fY29ubmVjdGVkKG51bGwpO1xuICAgIGNvbnN0IHN0cmVhbSA9IFN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW08QmV0YU1lc3NhZ2VTdHJlYW1FdmVudD4ocmVhZGFibGVTdHJlYW0sIHRoaXMuY29udHJvbGxlcik7XG4gICAgZm9yIGF3YWl0IChjb25zdCBldmVudCBvZiBzdHJlYW0pIHtcbiAgICAgIHRoaXMuI2FkZFN0cmVhbUV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgaWYgKHN0cmVhbS5jb250cm9sbGVyLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgdGhyb3cgbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuICAgIHRoaXMuI2VuZFJlcXVlc3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNdXRhdGVzIHRoaXMuI2N1cnJlbnRNZXNzYWdlIHdpdGggdGhlIGN1cnJlbnQgZXZlbnQuIEhhbmRsaW5nIHRoZSBhY2N1bXVsYXRpb24gb2YgbXVsdGlwbGUgbWVzc2FnZXNcbiAgICogd2lsbCBiZSBuZWVkZWQgdG8gYmUgaGFuZGxlZCBieSB0aGUgY2FsbGVyLCB0aGlzIG1ldGhvZCB3aWxsIHRocm93IGlmIHlvdSB0cnkgdG8gYWNjdW11bGF0ZSBmb3IgbXVsdGlwbGVcbiAgICogbWVzc2FnZXMuXG4gICAqL1xuICAjYWNjdW11bGF0ZU1lc3NhZ2UoZXZlbnQ6IEJldGFNZXNzYWdlU3RyZWFtRXZlbnQpOiBCZXRhTWVzc2FnZSB7XG4gICAgbGV0IHNuYXBzaG90ID0gdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdDtcblxuICAgIGlmIChldmVudC50eXBlID09PSAnbWVzc2FnZV9zdGFydCcpIHtcbiAgICAgIGlmIChzbmFwc2hvdCkge1xuICAgICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYFVuZXhwZWN0ZWQgZXZlbnQgb3JkZXIsIGdvdCAke2V2ZW50LnR5cGV9IGJlZm9yZSByZWNlaXZpbmcgXCJtZXNzYWdlX3N0b3BcImApO1xuICAgICAgfVxuICAgICAgcmV0dXJuIGV2ZW50Lm1lc3NhZ2U7XG4gICAgfVxuXG4gICAgaWYgKCFzbmFwc2hvdCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBVbmV4cGVjdGVkIGV2ZW50IG9yZGVyLCBnb3QgJHtldmVudC50eXBlfSBiZWZvcmUgXCJtZXNzYWdlX3N0YXJ0XCJgKTtcbiAgICB9XG5cbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgJ21lc3NhZ2Vfc3RvcCc6XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIGNhc2UgJ21lc3NhZ2VfZGVsdGEnOlxuICAgICAgICBzbmFwc2hvdC5zdG9wX3JlYXNvbiA9IGV2ZW50LmRlbHRhLnN0b3BfcmVhc29uO1xuICAgICAgICBzbmFwc2hvdC5zdG9wX3NlcXVlbmNlID0gZXZlbnQuZGVsdGEuc3RvcF9zZXF1ZW5jZTtcbiAgICAgICAgc25hcHNob3QudXNhZ2Uub3V0cHV0X3Rva2VucyA9IGV2ZW50LnVzYWdlLm91dHB1dF90b2tlbnM7XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RhcnQnOlxuICAgICAgICBzbmFwc2hvdC5jb250ZW50LnB1c2goZXZlbnQuY29udGVudF9ibG9jayk7XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfZGVsdGEnOiB7XG4gICAgICAgIGNvbnN0IHNuYXBzaG90Q29udGVudCA9IHNuYXBzaG90LmNvbnRlbnQuYXQoZXZlbnQuaW5kZXgpO1xuXG4gICAgICAgIHN3aXRjaCAoZXZlbnQuZGVsdGEudHlwZSkge1xuICAgICAgICAgIGNhc2UgJ3RleHRfZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoc25hcHNob3RDb250ZW50Py50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgc25hcHNob3RDb250ZW50LnRleHQgKz0gZXZlbnQuZGVsdGEudGV4dDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlICdjaXRhdGlvbnNfZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoc25hcHNob3RDb250ZW50Py50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgc25hcHNob3RDb250ZW50LmNpdGF0aW9ucyA/Pz0gW107XG4gICAgICAgICAgICAgIHNuYXBzaG90Q29udGVudC5jaXRhdGlvbnMucHVzaChldmVudC5kZWx0YS5jaXRhdGlvbik7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSAnaW5wdXRfanNvbl9kZWx0YSc6IHtcbiAgICAgICAgICAgIGlmIChzbmFwc2hvdENvbnRlbnQ/LnR5cGUgPT09ICd0b29sX3VzZScpIHtcbiAgICAgICAgICAgICAgLy8gd2UgbmVlZCB0byBrZWVwIHRyYWNrIG9mIHRoZSByYXcgSlNPTiBzdHJpbmcgYXMgd2VsbCBzbyB0aGF0IHdlIGNhblxuICAgICAgICAgICAgICAvLyByZS1wYXJzZSBpdCBmb3IgZWFjaCBkZWx0YSwgZm9yIG5vdyB3ZSBqdXN0IHN0b3JlIGl0IGFzIGFuIHVudHlwZWRcbiAgICAgICAgICAgICAgLy8gbm9uLWVudW1lcmFibGUgcHJvcGVydHkgb24gdGhlIHNuYXBzaG90XG4gICAgICAgICAgICAgIGxldCBqc29uQnVmID0gKHNuYXBzaG90Q29udGVudCBhcyBhbnkpW0pTT05fQlVGX1BST1BFUlRZXSB8fCAnJztcbiAgICAgICAgICAgICAganNvbkJ1ZiArPSBldmVudC5kZWx0YS5wYXJ0aWFsX2pzb247XG5cbiAgICAgICAgICAgICAgT2JqZWN0LmRlZmluZVByb3BlcnR5KHNuYXBzaG90Q29udGVudCwgSlNPTl9CVUZfUFJPUEVSVFksIHtcbiAgICAgICAgICAgICAgICB2YWx1ZToganNvbkJ1ZixcbiAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICB3cml0YWJsZTogdHJ1ZSxcbiAgICAgICAgICAgICAgfSk7XG5cbiAgICAgICAgICAgICAgaWYgKGpzb25CdWYpIHtcbiAgICAgICAgICAgICAgICBzbmFwc2hvdENvbnRlbnQuaW5wdXQgPSBwYXJ0aWFsUGFyc2UoanNvbkJ1Zik7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2hlY2tOZXZlcihldmVudC5kZWx0YSk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgICAgfVxuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19zdG9wJzpcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgIH1cbiAgfVxuXG4gIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTogQXN5bmNJdGVyYXRvcjxCZXRhTWVzc2FnZVN0cmVhbUV2ZW50PiB7XG4gICAgY29uc3QgcHVzaFF1ZXVlOiBCZXRhTWVzc2FnZVN0cmVhbUV2ZW50W10gPSBbXTtcbiAgICBjb25zdCByZWFkUXVldWU6IHtcbiAgICAgIHJlc29sdmU6IChjaHVuazogQmV0YU1lc3NhZ2VTdHJlYW1FdmVudCB8IHVuZGVmaW5lZCkgPT4gdm9pZDtcbiAgICAgIHJlamVjdDogKGVycm9yOiB1bmtub3duKSA9PiB2b2lkO1xuICAgIH1bXSA9IFtdO1xuICAgIGxldCBkb25lID0gZmFsc2U7XG5cbiAgICB0aGlzLm9uKCdzdHJlYW1FdmVudCcsIChldmVudCkgPT4ge1xuICAgICAgY29uc3QgcmVhZGVyID0gcmVhZFF1ZXVlLnNoaWZ0KCk7XG4gICAgICBpZiAocmVhZGVyKSB7XG4gICAgICAgIHJlYWRlci5yZXNvbHZlKGV2ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHB1c2hRdWV1ZS5wdXNoKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMub24oJ2VuZCcsICgpID0+IHtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgZm9yIChjb25zdCByZWFkZXIgb2YgcmVhZFF1ZXVlKSB7XG4gICAgICAgIHJlYWRlci5yZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgICByZWFkUXVldWUubGVuZ3RoID0gMDtcbiAgICB9KTtcblxuICAgIHRoaXMub24oJ2Fib3J0JywgKGVycikgPT4ge1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICBmb3IgKGNvbnN0IHJlYWRlciBvZiByZWFkUXVldWUpIHtcbiAgICAgICAgcmVhZGVyLnJlamVjdChlcnIpO1xuICAgICAgfVxuICAgICAgcmVhZFF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgZm9yIChjb25zdCByZWFkZXIgb2YgcmVhZFF1ZXVlKSB7XG4gICAgICAgIHJlYWRlci5yZWplY3QoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJlYWRRdWV1ZS5sZW5ndGggPSAwO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHQ6IGFzeW5jICgpOiBQcm9taXNlPEl0ZXJhdG9yUmVzdWx0PEJldGFNZXNzYWdlU3RyZWFtRXZlbnQ+PiA9PiB7XG4gICAgICAgIGlmICghcHVzaFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxCZXRhTWVzc2FnZVN0cmVhbUV2ZW50IHwgdW5kZWZpbmVkPigocmVzb2x2ZSwgcmVqZWN0KSA9PlxuICAgICAgICAgICAgcmVhZFF1ZXVlLnB1c2goeyByZXNvbHZlLCByZWplY3QgfSksXG4gICAgICAgICAgKS50aGVuKChjaHVuaykgPT4gKGNodW5rID8geyB2YWx1ZTogY2h1bmssIGRvbmU6IGZhbHNlIH0gOiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfSkpO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGNodW5rID0gcHVzaFF1ZXVlLnNoaWZ0KCkhO1xuICAgICAgICByZXR1cm4geyB2YWx1ZTogY2h1bmssIGRvbmU6IGZhbHNlIH07XG4gICAgICB9LFxuICAgICAgcmV0dXJuOiBhc3luYyAoKSA9PiB7XG4gICAgICAgIHRoaXMuYWJvcnQoKTtcbiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICAgICAgfSxcbiAgICB9O1xuICB9XG5cbiAgdG9SZWFkYWJsZVN0cmVhbSgpOiBSZWFkYWJsZVN0cmVhbSB7XG4gICAgY29uc3Qgc3RyZWFtID0gbmV3IFN0cmVhbSh0aGlzW1N5bWJvbC5hc3luY0l0ZXJhdG9yXS5iaW5kKHRoaXMpLCB0aGlzLmNvbnRyb2xsZXIpO1xuICAgIHJldHVybiBzdHJlYW0udG9SZWFkYWJsZVN0cmVhbSgpO1xuICB9XG59XG5cbi8vIHVzZWQgdG8gZW5zdXJlIGV4aGF1c3RpdmUgY2FzZSBtYXRjaGluZyB3aXRob3V0IHRocm93aW5nIGEgcnVudGltZSBlcnJvclxuZnVuY3Rpb24gY2hlY2tOZXZlcih4OiBuZXZlcikge31cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gXCIuLi8uLi8uLi9yZXNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgQVBJUHJvbWlzZSB9IGZyb20gXCIuLi8uLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuLi8uLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBNZXNzYWdlc01lc3NhZ2VzQVBJIGZyb20gXCIuL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgKiBhcyBCZXRhQVBJIGZyb20gXCIuLi9iZXRhLmpzXCI7XG5pbXBvcnQgKiBhcyBNZXNzYWdlc0FQSSBmcm9tIFwiLi4vLi4vbWVzc2FnZXMvbWVzc2FnZXMuanNcIjtcbmltcG9ydCAqIGFzIEJhdGNoZXNBUEkgZnJvbSBcIi4vYmF0Y2hlcy5qc1wiO1xuaW1wb3J0IHtcbiAgQmF0Y2hDYW5jZWxQYXJhbXMsXG4gIEJhdGNoQ3JlYXRlUGFyYW1zLFxuICBCYXRjaERlbGV0ZVBhcmFtcyxcbiAgQmF0Y2hMaXN0UGFyYW1zLFxuICBCYXRjaFJlc3VsdHNQYXJhbXMsXG4gIEJhdGNoUmV0cmlldmVQYXJhbXMsXG4gIEJhdGNoZXMsXG4gIEJldGFEZWxldGVkTWVzc2FnZUJhdGNoLFxuICBCZXRhTWVzc2FnZUJhdGNoLFxuICBCZXRhTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQsXG4gIEJldGFNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0LFxuICBCZXRhTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCxcbiAgQmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSxcbiAgQmV0YU1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMsXG4gIEJldGFNZXNzYWdlQmF0Y2hSZXN1bHQsXG4gIEJldGFNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQsXG4gIEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UsXG59IGZyb20gXCIuL2JhdGNoZXMuanNcIjtcbmltcG9ydCB7IFN0cmVhbSB9IGZyb20gXCIuLi8uLi8uLi9zdHJlYW1pbmcuanNcIjtcbmltcG9ydCB7IEJldGFNZXNzYWdlU3RyZWFtIH0gZnJvbSBcIi4uLy4uLy4uL2xpYi9CZXRhTWVzc2FnZVN0cmVhbS5qc1wiO1xuaW1wb3J0IHR5cGUgeyBNb2RlbCB9IGZyb20gXCIuLi8uLi9tZXNzYWdlcy9tZXNzYWdlcy5qc1wiO1xuXG5jb25zdCBERVBSRUNBVEVEX01PREVMUzoge1xuICBbSyBpbiBNb2RlbF0/OiBzdHJpbmc7XG59ID0ge1xuICAnY2xhdWRlLTEuMyc6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLTEuMy0xMDBrJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG4gICdjbGF1ZGUtaW5zdGFudC0xLjEnOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS1pbnN0YW50LTEuMS0xMDBrJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG4gICdjbGF1ZGUtaW5zdGFudC0xLjInOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS0zLXNvbm5ldC0yMDI0MDIyOSc6ICdKdWx5IDIxc3QsIDIwMjUnLFxuICAnY2xhdWRlLTIuMSc6ICdKdWx5IDIxc3QsIDIwMjUnLFxuICAnY2xhdWRlLTIuMCc6ICdKdWx5IDIxc3QsIDIwMjUnLFxufTtcblxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICBiYXRjaGVzOiBCYXRjaGVzQVBJLkJhdGNoZXMgPSBuZXcgQmF0Y2hlc0FQSS5CYXRjaGVzKHRoaXMuX2NsaWVudCk7XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBzdHJ1Y3R1cmVkIGxpc3Qgb2YgaW5wdXQgbWVzc2FnZXMgd2l0aCB0ZXh0IGFuZC9vciBpbWFnZSBjb250ZW50LCBhbmQgdGhlXG4gICAqIG1vZGVsIHdpbGwgZ2VuZXJhdGUgdGhlIG5leHQgbWVzc2FnZSBpbiB0aGUgY29udmVyc2F0aW9uLlxuICAgKlxuICAgKiBUaGUgTWVzc2FnZXMgQVBJIGNhbiBiZSB1c2VkIGZvciBlaXRoZXIgc2luZ2xlIHF1ZXJpZXMgb3Igc3RhdGVsZXNzIG11bHRpLXR1cm5cbiAgICogY29udmVyc2F0aW9ucy5cbiAgICovXG4gIGNyZWF0ZShwYXJhbXM6IE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQVBJUHJvbWlzZTxCZXRhTWVzc2FnZT47XG4gIGNyZWF0ZShcbiAgICBwYXJhbXM6IE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQ+PjtcbiAgY3JlYXRlKFxuICAgIHBhcmFtczogTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2UsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQ+IHwgQmV0YU1lc3NhZ2U+O1xuICBjcmVhdGUoXG4gICAgcGFyYW1zOiBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPEJldGFNZXNzYWdlPiB8IEFQSVByb21pc2U8U3RyZWFtPEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQ+PiB7XG4gICAgY29uc3QgeyBiZXRhcywgLi4uYm9keSB9ID0gcGFyYW1zO1xuXG4gICAgaWYgKGJvZHkubW9kZWwgaW4gREVQUkVDQVRFRF9NT0RFTFMpIHtcbiAgICAgIGNvbnNvbGUud2FybihcbiAgICAgICAgYFRoZSBtb2RlbCAnJHtib2R5Lm1vZGVsfScgaXMgZGVwcmVjYXRlZCBhbmQgd2lsbCByZWFjaCBlbmQtb2YtbGlmZSBvbiAke1xuICAgICAgICAgIERFUFJFQ0FURURfTU9ERUxTW2JvZHkubW9kZWxdXG4gICAgICAgIH1cXG5QbGVhc2UgbWlncmF0ZSB0byBhIG5ld2VyIG1vZGVsLiBWaXNpdCBodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3Jlc291cmNlcy9tb2RlbC1kZXByZWNhdGlvbnMgZm9yIG1vcmUgaW5mb3JtYXRpb24uYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5wb3N0KCcvdjEvbWVzc2FnZXM/YmV0YT10cnVlJywge1xuICAgICAgYm9keSxcbiAgICAgIHRpbWVvdXQ6ICh0aGlzLl9jbGllbnQgYXMgYW55KS5fb3B0aW9ucy50aW1lb3V0ID8/IDYwMDAwMCxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgIC4uLihiZXRhcz8udG9TdHJpbmcoKSAhPSBudWxsID8geyAnYW50aHJvcGljLWJldGEnOiBiZXRhcz8udG9TdHJpbmcoKSB9IDogdW5kZWZpbmVkKSxcbiAgICAgICAgLi4ub3B0aW9ucz8uaGVhZGVycyxcbiAgICAgIH0sXG4gICAgICBzdHJlYW06IHBhcmFtcy5zdHJlYW0gPz8gZmFsc2UsXG4gICAgfSkgYXMgQVBJUHJvbWlzZTxCZXRhTWVzc2FnZT4gfCBBUElQcm9taXNlPFN0cmVhbTxCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50Pj47XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgTWVzc2FnZSBzdHJlYW1cbiAgICovXG4gIHN0cmVhbShib2R5OiBCZXRhTWVzc2FnZVN0cmVhbVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBCZXRhTWVzc2FnZVN0cmVhbSB7XG4gICAgcmV0dXJuIEJldGFNZXNzYWdlU3RyZWFtLmNyZWF0ZU1lc3NhZ2UodGhpcywgYm9keSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogQ291bnQgdGhlIG51bWJlciBvZiB0b2tlbnMgaW4gYSBNZXNzYWdlLlxuICAgKlxuICAgKiBUaGUgVG9rZW4gQ291bnQgQVBJIGNhbiBiZSB1c2VkIHRvIGNvdW50IHRoZSBudW1iZXIgb2YgdG9rZW5zIGluIGEgTWVzc2FnZSxcbiAgICogaW5jbHVkaW5nIHRvb2xzLCBpbWFnZXMsIGFuZCBkb2N1bWVudHMsIHdpdGhvdXQgY3JlYXRpbmcgaXQuXG4gICAqL1xuICBjb3VudFRva2VucyhcbiAgICBwYXJhbXM6IE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPEJldGFNZXNzYWdlVG9rZW5zQ291bnQ+IHtcbiAgICBjb25zdCB7IGJldGFzLCAuLi5ib2R5IH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5wb3N0KCcvdjEvbWVzc2FnZXMvY291bnRfdG9rZW5zP2JldGE9dHJ1ZScsIHtcbiAgICAgIGJvZHksXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYW50aHJvcGljLWJldGEnOiBbLi4uKGJldGFzID8/IFtdKSwgJ3Rva2VuLWNvdW50aW5nLTIwMjQtMTEtMDEnXS50b1N0cmluZygpLFxuICAgICAgICAuLi5vcHRpb25zPy5oZWFkZXJzLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBCZXRhTWVzc2FnZVN0cmVhbVBhcmFtcyA9IE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFCYXNlNjRQREZCbG9jayB7XG4gIHNvdXJjZTogQmV0YUJhc2U2NFBERlNvdXJjZSB8IEJldGFQbGFpblRleHRTb3VyY2UgfCBCZXRhQ29udGVudEJsb2NrU291cmNlO1xuXG4gIHR5cGU6ICdkb2N1bWVudCc7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIGNpdGF0aW9ucz86IEJldGFDaXRhdGlvbnNDb25maWdQYXJhbTtcblxuICBjb250ZXh0Pzogc3RyaW5nIHwgbnVsbDtcblxuICB0aXRsZT86IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUJhc2U2NFBERlNvdXJjZSB7XG4gIGRhdGE6IHN0cmluZztcblxuICBtZWRpYV90eXBlOiAnYXBwbGljYXRpb24vcGRmJztcblxuICB0eXBlOiAnYmFzZTY0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHtcbiAgdHlwZTogJ2VwaGVtZXJhbCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX2NoYXJfaW5kZXg6IG51bWJlcjtcblxuICBzdGFydF9jaGFyX2luZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NoYXJfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX2NoYXJfaW5kZXg6IG51bWJlcjtcblxuICBzdGFydF9jaGFyX2luZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NoYXJfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX2Jsb2NrX2luZGV4OiBudW1iZXI7XG5cbiAgc3RhcnRfYmxvY2tfaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9ibG9ja19pbmRleDogbnVtYmVyO1xuXG4gIHN0YXJ0X2Jsb2NrX2luZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NvbnRlbnRfYmxvY2tfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvbiB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9wYWdlX251bWJlcjogbnVtYmVyO1xuXG4gIHN0YXJ0X3BhZ2VfbnVtYmVyOiBudW1iZXI7XG5cbiAgdHlwZTogJ3BhZ2VfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX3BhZ2VfbnVtYmVyOiBudW1iZXI7XG5cbiAgc3RhcnRfcGFnZV9udW1iZXI6IG51bWJlcjtcblxuICB0eXBlOiAncGFnZV9sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNpdGF0aW9uc0NvbmZpZ1BhcmFtIHtcbiAgZW5hYmxlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNpdGF0aW9uc0RlbHRhIHtcbiAgY2l0YXRpb246IEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvbiB8IEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvbiB8IEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uO1xuXG4gIHR5cGU6ICdjaXRhdGlvbnNfZGVsdGEnO1xufVxuXG5leHBvcnQgdHlwZSBCZXRhQ29udGVudEJsb2NrID0gQmV0YVRleHRCbG9jayB8IEJldGFUb29sVXNlQmxvY2s7XG5cbmV4cG9ydCB0eXBlIEJldGFDb250ZW50QmxvY2tQYXJhbSA9XG4gIHwgQmV0YVRleHRCbG9ja1BhcmFtXG4gIHwgQmV0YUltYWdlQmxvY2tQYXJhbVxuICB8IEJldGFUb29sVXNlQmxvY2tQYXJhbVxuICB8IEJldGFUb29sUmVzdWx0QmxvY2tQYXJhbVxuICB8IEJldGFCYXNlNjRQREZCbG9jaztcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQ29udGVudEJsb2NrU291cmNlIHtcbiAgY29udGVudDogc3RyaW5nIHwgQXJyYXk8QmV0YUNvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQ+O1xuXG4gIHR5cGU6ICdjb250ZW50Jztcbn1cblxuZXhwb3J0IHR5cGUgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQgPSBCZXRhVGV4dEJsb2NrUGFyYW0gfCBCZXRhSW1hZ2VCbG9ja1BhcmFtO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFJbWFnZUJsb2NrUGFyYW0ge1xuICBzb3VyY2U6IEJldGFJbWFnZUJsb2NrUGFyYW0uU291cmNlO1xuXG4gIHR5cGU6ICdpbWFnZSc7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEJldGFJbWFnZUJsb2NrUGFyYW0ge1xuICBleHBvcnQgaW50ZXJmYWNlIFNvdXJjZSB7XG4gICAgZGF0YTogc3RyaW5nO1xuXG4gICAgbWVkaWFfdHlwZTogJ2ltYWdlL2pwZWcnIHwgJ2ltYWdlL3BuZycgfCAnaW1hZ2UvZ2lmJyB8ICdpbWFnZS93ZWJwJztcblxuICAgIHR5cGU6ICdiYXNlNjQnO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUlucHV0SlNPTkRlbHRhIHtcbiAgcGFydGlhbF9qc29uOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2lucHV0X2pzb25fZGVsdGEnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlIHtcbiAgLyoqXG4gICAqIFVuaXF1ZSBvYmplY3QgaWRlbnRpZmllci5cbiAgICpcbiAgICogVGhlIGZvcm1hdCBhbmQgbGVuZ3RoIG9mIElEcyBtYXkgY2hhbmdlIG92ZXIgdGltZS5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIENvbnRlbnQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbC5cbiAgICpcbiAgICogVGhpcyBpcyBhbiBhcnJheSBvZiBjb250ZW50IGJsb2NrcywgZWFjaCBvZiB3aGljaCBoYXMgYSBgdHlwZWAgdGhhdCBkZXRlcm1pbmVzXG4gICAqIGl0cyBzaGFwZS5cbiAgICpcbiAgICogRXhhbXBsZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIkhpLCBJJ20gQ2xhdWRlLlwiIH1dXG4gICAqIGBgYFxuICAgKlxuICAgKiBJZiB0aGUgcmVxdWVzdCBpbnB1dCBgbWVzc2FnZXNgIGVuZGVkIHdpdGggYW4gYGFzc2lzdGFudGAgdHVybiwgdGhlbiB0aGVcbiAgICogcmVzcG9uc2UgYGNvbnRlbnRgIHdpbGwgY29udGludWUgZGlyZWN0bHkgZnJvbSB0aGF0IGxhc3QgdHVybi4gWW91IGNhbiB1c2UgdGhpc1xuICAgKiB0byBjb25zdHJhaW4gdGhlIG1vZGVsJ3Mgb3V0cHV0LlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgdGhlIGlucHV0IGBtZXNzYWdlc2Agd2VyZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiV2hhdCdzIHRoZSBHcmVlayBuYW1lIGZvciBTdW4/IChBKSBTb2wgKEIpIEhlbGlvcyAoQykgU3VuXCJcbiAgICogICB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIlRoZSBiZXN0IGFuc3dlciBpcyAoXCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBUaGVuIHRoZSByZXNwb25zZSBgY29udGVudGAgbWlnaHQgYmU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW3sgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJCKVwiIH1dXG4gICAqIGBgYFxuICAgKi9cbiAgY29udGVudDogQXJyYXk8QmV0YUNvbnRlbnRCbG9jaz47XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1lc3NhZ2VzQVBJLk1vZGVsO1xuXG4gIC8qKlxuICAgKiBDb252ZXJzYXRpb25hbCByb2xlIG9mIHRoZSBnZW5lcmF0ZWQgbWVzc2FnZS5cbiAgICpcbiAgICogVGhpcyB3aWxsIGFsd2F5cyBiZSBgXCJhc3Npc3RhbnRcImAuXG4gICAqL1xuICByb2xlOiAnYXNzaXN0YW50JztcblxuICAvKipcbiAgICogVGhlIHJlYXNvbiB0aGF0IHdlIHN0b3BwZWQuXG4gICAqXG4gICAqIFRoaXMgbWF5IGJlIG9uZSB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAgICpcbiAgICogLSBgXCJlbmRfdHVyblwiYDogdGhlIG1vZGVsIHJlYWNoZWQgYSBuYXR1cmFsIHN0b3BwaW5nIHBvaW50XG4gICAqIC0gYFwibWF4X3Rva2Vuc1wiYDogd2UgZXhjZWVkZWQgdGhlIHJlcXVlc3RlZCBgbWF4X3Rva2Vuc2Agb3IgdGhlIG1vZGVsJ3MgbWF4aW11bVxuICAgKiAtIGBcInN0b3Bfc2VxdWVuY2VcImA6IG9uZSBvZiB5b3VyIHByb3ZpZGVkIGN1c3RvbSBgc3RvcF9zZXF1ZW5jZXNgIHdhcyBnZW5lcmF0ZWRcbiAgICogLSBgXCJ0b29sX3VzZVwiYDogdGhlIG1vZGVsIGludm9rZWQgb25lIG9yIG1vcmUgdG9vbHNcbiAgICpcbiAgICogSW4gbm9uLXN0cmVhbWluZyBtb2RlIHRoaXMgdmFsdWUgaXMgYWx3YXlzIG5vbi1udWxsLiBJbiBzdHJlYW1pbmcgbW9kZSwgaXQgaXNcbiAgICogbnVsbCBpbiB0aGUgYG1lc3NhZ2Vfc3RhcnRgIGV2ZW50IGFuZCBub24tbnVsbCBvdGhlcndpc2UuXG4gICAqL1xuICBzdG9wX3JlYXNvbjogJ2VuZF90dXJuJyB8ICdtYXhfdG9rZW5zJyB8ICdzdG9wX3NlcXVlbmNlJyB8ICd0b29sX3VzZScgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBXaGljaCBjdXN0b20gc3RvcCBzZXF1ZW5jZSB3YXMgZ2VuZXJhdGVkLCBpZiBhbnkuXG4gICAqXG4gICAqIFRoaXMgdmFsdWUgd2lsbCBiZSBhIG5vbi1udWxsIHN0cmluZyBpZiBvbmUgb2YgeW91ciBjdXN0b20gc3RvcCBzZXF1ZW5jZXMgd2FzXG4gICAqIGdlbmVyYXRlZC5cbiAgICovXG4gIHN0b3Bfc2VxdWVuY2U6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgTWVzc2FnZXMsIHRoaXMgaXMgYWx3YXlzIGBcIm1lc3NhZ2VcImAuXG4gICAqL1xuICB0eXBlOiAnbWVzc2FnZSc7XG5cbiAgLyoqXG4gICAqIEJpbGxpbmcgYW5kIHJhdGUtbGltaXQgdXNhZ2UuXG4gICAqXG4gICAqIEFudGhyb3BpYydzIEFQSSBiaWxscyBhbmQgcmF0ZS1saW1pdHMgYnkgdG9rZW4gY291bnRzLCBhcyB0b2tlbnMgcmVwcmVzZW50IHRoZVxuICAgKiB1bmRlcmx5aW5nIGNvc3QgdG8gb3VyIHN5c3RlbXMuXG4gICAqXG4gICAqIFVuZGVyIHRoZSBob29kLCB0aGUgQVBJIHRyYW5zZm9ybXMgcmVxdWVzdHMgaW50byBhIGZvcm1hdCBzdWl0YWJsZSBmb3IgdGhlXG4gICAqIG1vZGVsLiBUaGUgbW9kZWwncyBvdXRwdXQgdGhlbiBnb2VzIHRocm91Z2ggYSBwYXJzaW5nIHN0YWdlIGJlZm9yZSBiZWNvbWluZyBhblxuICAgKiBBUEkgcmVzcG9uc2UuIEFzIGEgcmVzdWx0LCB0aGUgdG9rZW4gY291bnRzIGluIGB1c2FnZWAgd2lsbCBub3QgbWF0Y2ggb25lLXRvLW9uZVxuICAgKiB3aXRoIHRoZSBleGFjdCB2aXNpYmxlIGNvbnRlbnQgb2YgYW4gQVBJIHJlcXVlc3Qgb3IgcmVzcG9uc2UuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBgb3V0cHV0X3Rva2Vuc2Agd2lsbCBiZSBub24temVybywgZXZlbiBmb3IgYW4gZW1wdHkgc3RyaW5nIHJlc3BvbnNlXG4gICAqIGZyb20gQ2xhdWRlLlxuICAgKi9cbiAgdXNhZ2U6IEJldGFVc2FnZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZURlbHRhVXNhZ2Uge1xuICAvKipcbiAgICogVGhlIGN1bXVsYXRpdmUgbnVtYmVyIG9mIG91dHB1dCB0b2tlbnMgd2hpY2ggd2VyZSB1c2VkLlxuICAgKi9cbiAgb3V0cHV0X3Rva2VuczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlUGFyYW0ge1xuICBjb250ZW50OiBzdHJpbmcgfCBBcnJheTxCZXRhQ29udGVudEJsb2NrUGFyYW0+O1xuXG4gIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlVG9rZW5zQ291bnQge1xuICAvKipcbiAgICogVGhlIHRvdGFsIG51bWJlciBvZiB0b2tlbnMgYWNyb3NzIHRoZSBwcm92aWRlZCBsaXN0IG9mIG1lc3NhZ2VzLCBzeXN0ZW0gcHJvbXB0LFxuICAgKiBhbmQgdG9vbHMuXG4gICAqL1xuICBpbnB1dF90b2tlbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWV0YWRhdGEge1xuICAvKipcbiAgICogQW4gZXh0ZXJuYWwgaWRlbnRpZmllciBmb3IgdGhlIHVzZXIgd2hvIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVxdWVzdC5cbiAgICpcbiAgICogVGhpcyBzaG91bGQgYmUgYSB1dWlkLCBoYXNoIHZhbHVlLCBvciBvdGhlciBvcGFxdWUgaWRlbnRpZmllci4gQW50aHJvcGljIG1heSB1c2VcbiAgICogdGhpcyBpZCB0byBoZWxwIGRldGVjdCBhYnVzZS4gRG8gbm90IGluY2x1ZGUgYW55IGlkZW50aWZ5aW5nIGluZm9ybWF0aW9uIHN1Y2ggYXNcbiAgICogbmFtZSwgZW1haWwgYWRkcmVzcywgb3IgcGhvbmUgbnVtYmVyLlxuICAgKi9cbiAgdXNlcl9pZD86IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVBsYWluVGV4dFNvdXJjZSB7XG4gIGRhdGE6IHN0cmluZztcblxuICBtZWRpYV90eXBlOiAndGV4dC9wbGFpbic7XG5cbiAgdHlwZTogJ3RleHQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50IHtcbiAgZGVsdGE6IEJldGFUZXh0RGVsdGEgfCBCZXRhSW5wdXRKU09ORGVsdGEgfCBCZXRhQ2l0YXRpb25zRGVsdGE7XG5cbiAgaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19kZWx0YSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQge1xuICBjb250ZW50X2Jsb2NrOiBCZXRhVGV4dEJsb2NrIHwgQmV0YVRvb2xVc2VCbG9jaztcblxuICBpbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX3N0YXJ0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50IHtcbiAgaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19zdG9wJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnQge1xuICBkZWx0YTogQmV0YVJhd01lc3NhZ2VEZWx0YUV2ZW50LkRlbHRhO1xuXG4gIHR5cGU6ICdtZXNzYWdlX2RlbHRhJztcblxuICAvKipcbiAgICogQmlsbGluZyBhbmQgcmF0ZS1saW1pdCB1c2FnZS5cbiAgICpcbiAgICogQW50aHJvcGljJ3MgQVBJIGJpbGxzIGFuZCByYXRlLWxpbWl0cyBieSB0b2tlbiBjb3VudHMsIGFzIHRva2VucyByZXByZXNlbnQgdGhlXG4gICAqIHVuZGVybHlpbmcgY29zdCB0byBvdXIgc3lzdGVtcy5cbiAgICpcbiAgICogVW5kZXIgdGhlIGhvb2QsIHRoZSBBUEkgdHJhbnNmb3JtcyByZXF1ZXN0cyBpbnRvIGEgZm9ybWF0IHN1aXRhYmxlIGZvciB0aGVcbiAgICogbW9kZWwuIFRoZSBtb2RlbCdzIG91dHB1dCB0aGVuIGdvZXMgdGhyb3VnaCBhIHBhcnNpbmcgc3RhZ2UgYmVmb3JlIGJlY29taW5nIGFuXG4gICAqIEFQSSByZXNwb25zZS4gQXMgYSByZXN1bHQsIHRoZSB0b2tlbiBjb3VudHMgaW4gYHVzYWdlYCB3aWxsIG5vdCBtYXRjaCBvbmUtdG8tb25lXG4gICAqIHdpdGggdGhlIGV4YWN0IHZpc2libGUgY29udGVudCBvZiBhbiBBUEkgcmVxdWVzdCBvciByZXNwb25zZS5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGBvdXRwdXRfdG9rZW5zYCB3aWxsIGJlIG5vbi16ZXJvLCBldmVuIGZvciBhbiBlbXB0eSBzdHJpbmcgcmVzcG9uc2VcbiAgICogZnJvbSBDbGF1ZGUuXG4gICAqL1xuICB1c2FnZTogQmV0YU1lc3NhZ2VEZWx0YVVzYWdlO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudCB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgRGVsdGEge1xuICAgIHN0b3BfcmVhc29uOiAnZW5kX3R1cm4nIHwgJ21heF90b2tlbnMnIHwgJ3N0b3Bfc2VxdWVuY2UnIHwgJ3Rvb2xfdXNlJyB8IG51bGw7XG5cbiAgICBzdG9wX3NlcXVlbmNlOiBzdHJpbmcgfCBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVJhd01lc3NhZ2VTdGFydEV2ZW50IHtcbiAgbWVzc2FnZTogQmV0YU1lc3NhZ2U7XG5cbiAgdHlwZTogJ21lc3NhZ2Vfc3RhcnQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50IHtcbiAgdHlwZTogJ21lc3NhZ2Vfc3RvcCc7XG59XG5cbmV4cG9ydCB0eXBlIEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQgPVxuICB8IEJldGFSYXdNZXNzYWdlU3RhcnRFdmVudFxuICB8IEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudFxuICB8IEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50XG4gIHwgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnRcbiAgfCBCZXRhUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudFxuICB8IEJldGFSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRleHRCbG9jayB7XG4gIC8qKlxuICAgKiBDaXRhdGlvbnMgc3VwcG9ydGluZyB0aGUgdGV4dCBibG9jay5cbiAgICpcbiAgICogVGhlIHR5cGUgb2YgY2l0YXRpb24gcmV0dXJuZWQgd2lsbCBkZXBlbmQgb24gdGhlIHR5cGUgb2YgZG9jdW1lbnQgYmVpbmcgY2l0ZWQuXG4gICAqIENpdGluZyBhIFBERiByZXN1bHRzIGluIGBwYWdlX2xvY2F0aW9uYCwgcGxhaW4gdGV4dCByZXN1bHRzIGluIGBjaGFyX2xvY2F0aW9uYCxcbiAgICogYW5kIGNvbnRlbnQgZG9jdW1lbnQgcmVzdWx0cyBpbiBgY29udGVudF9ibG9ja19sb2NhdGlvbmAuXG4gICAqL1xuICBjaXRhdGlvbnM6IEFycmF5PEJldGFUZXh0Q2l0YXRpb24+IHwgbnVsbDtcblxuICB0ZXh0OiBzdHJpbmc7XG5cbiAgdHlwZTogJ3RleHQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUZXh0QmxvY2tQYXJhbSB7XG4gIHRleHQ6IHN0cmluZztcblxuICB0eXBlOiAndGV4dCc7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIGNpdGF0aW9ucz86IEFycmF5PEJldGFUZXh0Q2l0YXRpb25QYXJhbT4gfCBudWxsO1xufVxuXG5leHBvcnQgdHlwZSBCZXRhVGV4dENpdGF0aW9uID1cbiAgfCBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb25cbiAgfCBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb25cbiAgfCBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbjtcblxuZXhwb3J0IHR5cGUgQmV0YVRleHRDaXRhdGlvblBhcmFtID1cbiAgfCBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbVxuICB8IEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtXG4gIHwgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbTtcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVGV4dERlbHRhIHtcbiAgdGV4dDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0ZXh0X2RlbHRhJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbCB7XG4gIC8qKlxuICAgKiBbSlNPTiBzY2hlbWFdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnLykgZm9yIHRoaXMgdG9vbCdzIGlucHV0LlxuICAgKlxuICAgKiBUaGlzIGRlZmluZXMgdGhlIHNoYXBlIG9mIHRoZSBgaW5wdXRgIHRoYXQgeW91ciB0b29sIGFjY2VwdHMgYW5kIHRoYXQgdGhlIG1vZGVsXG4gICAqIHdpbGwgcHJvZHVjZS5cbiAgICovXG4gIGlucHV0X3NjaGVtYTogQmV0YVRvb2wuSW5wdXRTY2hlbWE7XG5cbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqXG4gICAqIFRoaXMgaXMgaG93IHRoZSB0b29sIHdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBtb2RlbCBhbmQgaW4gdG9vbF91c2UgYmxvY2tzLlxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcblxuICAvKipcbiAgICogRGVzY3JpcHRpb24gb2Ygd2hhdCB0aGlzIHRvb2wgZG9lcy5cbiAgICpcbiAgICogVG9vbCBkZXNjcmlwdGlvbnMgc2hvdWxkIGJlIGFzIGRldGFpbGVkIGFzIHBvc3NpYmxlLiBUaGUgbW9yZSBpbmZvcm1hdGlvbiB0aGF0XG4gICAqIHRoZSBtb2RlbCBoYXMgYWJvdXQgd2hhdCB0aGUgdG9vbCBpcyBhbmQgaG93IHRvIHVzZSBpdCwgdGhlIGJldHRlciBpdCB3aWxsXG4gICAqIHBlcmZvcm0uIFlvdSBjYW4gdXNlIG5hdHVyYWwgbGFuZ3VhZ2UgZGVzY3JpcHRpb25zIHRvIHJlaW5mb3JjZSBpbXBvcnRhbnRcbiAgICogYXNwZWN0cyBvZiB0aGUgdG9vbCBpbnB1dCBKU09OIHNjaGVtYS5cbiAgICovXG4gIGRlc2NyaXB0aW9uPzogc3RyaW5nO1xuXG4gIHR5cGU/OiAnY3VzdG9tJyB8IG51bGw7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQmV0YVRvb2wge1xuICAvKipcbiAgICogW0pTT04gc2NoZW1hXShodHRwczovL2pzb24tc2NoZW1hLm9yZy8pIGZvciB0aGlzIHRvb2wncyBpbnB1dC5cbiAgICpcbiAgICogVGhpcyBkZWZpbmVzIHRoZSBzaGFwZSBvZiB0aGUgYGlucHV0YCB0aGF0IHlvdXIgdG9vbCBhY2NlcHRzIGFuZCB0aGF0IHRoZSBtb2RlbFxuICAgKiB3aWxsIHByb2R1Y2UuXG4gICAqL1xuICBleHBvcnQgaW50ZXJmYWNlIElucHV0U2NoZW1hIHtcbiAgICB0eXBlOiAnb2JqZWN0JztcblxuICAgIHByb3BlcnRpZXM/OiB1bmtub3duIHwgbnVsbDtcbiAgICBbazogc3RyaW5nXTogdW5rbm93bjtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sQmFzaDIwMjQxMDIyIHtcbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqXG4gICAqIFRoaXMgaXMgaG93IHRoZSB0b29sIHdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBtb2RlbCBhbmQgaW4gdG9vbF91c2UgYmxvY2tzLlxuICAgKi9cbiAgbmFtZTogJ2Jhc2gnO1xuXG4gIHR5cGU6ICdiYXNoXzIwMjQxMDIyJztcblxuICBjYWNoZV9jb250cm9sPzogQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG59XG5cbi8qKlxuICogSG93IHRoZSBtb2RlbCBzaG91bGQgdXNlIHRoZSBwcm92aWRlZCB0b29scy4gVGhlIG1vZGVsIGNhbiB1c2UgYSBzcGVjaWZpYyB0b29sLFxuICogYW55IGF2YWlsYWJsZSB0b29sLCBvciBkZWNpZGUgYnkgaXRzZWxmLlxuICovXG5leHBvcnQgdHlwZSBCZXRhVG9vbENob2ljZSA9IEJldGFUb29sQ2hvaWNlQXV0byB8IEJldGFUb29sQ2hvaWNlQW55IHwgQmV0YVRvb2xDaG9pY2VUb29sO1xuXG4vKipcbiAqIFRoZSBtb2RlbCB3aWxsIHVzZSBhbnkgYXZhaWxhYmxlIHRvb2xzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sQ2hvaWNlQW55IHtcbiAgdHlwZTogJ2FueSc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZGlzYWJsZSBwYXJhbGxlbCB0b29sIHVzZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC4gSWYgc2V0IHRvIGB0cnVlYCwgdGhlIG1vZGVsIHdpbGwgb3V0cHV0IGV4YWN0bHkgb25lIHRvb2xcbiAgICogdXNlLlxuICAgKi9cbiAgZGlzYWJsZV9wYXJhbGxlbF90b29sX3VzZT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVGhlIG1vZGVsIHdpbGwgYXV0b21hdGljYWxseSBkZWNpZGUgd2hldGhlciB0byB1c2UgdG9vbHMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2xDaG9pY2VBdXRvIHtcbiAgdHlwZTogJ2F1dG8nO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGRpc2FibGUgcGFyYWxsZWwgdG9vbCB1c2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGBmYWxzZWAuIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBtb2RlbCB3aWxsIG91dHB1dCBhdCBtb3N0IG9uZSB0b29sXG4gICAqIHVzZS5cbiAgICovXG4gIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRoZSBtb2RlbCB3aWxsIHVzZSB0aGUgc3BlY2lmaWVkIHRvb2wgd2l0aCBgdG9vbF9jaG9pY2UubmFtZWAuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2xDaG9pY2VUb29sIHtcbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSB0b29sIHRvIHVzZS5cbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICB0eXBlOiAndG9vbCc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZGlzYWJsZSBwYXJhbGxlbCB0b29sIHVzZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC4gSWYgc2V0IHRvIGB0cnVlYCwgdGhlIG1vZGVsIHdpbGwgb3V0cHV0IGV4YWN0bHkgb25lIHRvb2xcbiAgICogdXNlLlxuICAgKi9cbiAgZGlzYWJsZV9wYXJhbGxlbF90b29sX3VzZT86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyIHtcbiAgLyoqXG4gICAqIFRoZSBoZWlnaHQgb2YgdGhlIGRpc3BsYXkgaW4gcGl4ZWxzLlxuICAgKi9cbiAgZGlzcGxheV9oZWlnaHRfcHg6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIHdpZHRoIG9mIHRoZSBkaXNwbGF5IGluIHBpeGVscy5cbiAgICovXG4gIGRpc3BsYXlfd2lkdGhfcHg6IG51bWJlcjtcblxuICAvKipcbiAgICogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICpcbiAgICogVGhpcyBpcyBob3cgdGhlIHRvb2wgd2lsbCBiZSBjYWxsZWQgYnkgdGhlIG1vZGVsIGFuZCBpbiB0b29sX3VzZSBibG9ja3MuXG4gICAqL1xuICBuYW1lOiAnY29tcHV0ZXInO1xuXG4gIHR5cGU6ICdjb21wdXRlcl8yMDI0MTAyMic7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgWDExIGRpc3BsYXkgbnVtYmVyIChlLmcuIDAsIDEpIGZvciB0aGUgZGlzcGxheS5cbiAgICovXG4gIGRpc3BsYXlfbnVtYmVyPzogbnVtYmVyIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbFJlc3VsdEJsb2NrUGFyYW0ge1xuICB0b29sX3VzZV9pZDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0b29sX3Jlc3VsdCc7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIGNvbnRlbnQ/OiBzdHJpbmcgfCBBcnJheTxCZXRhVGV4dEJsb2NrUGFyYW0gfCBCZXRhSW1hZ2VCbG9ja1BhcmFtPjtcblxuICBpc19lcnJvcj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2xUZXh0RWRpdG9yMjAyNDEwMjIge1xuICAvKipcbiAgICogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICpcbiAgICogVGhpcyBpcyBob3cgdGhlIHRvb2wgd2lsbCBiZSBjYWxsZWQgYnkgdGhlIG1vZGVsIGFuZCBpbiB0b29sX3VzZSBibG9ja3MuXG4gICAqL1xuICBuYW1lOiAnc3RyX3JlcGxhY2VfZWRpdG9yJztcblxuICB0eXBlOiAndGV4dF9lZGl0b3JfMjAyNDEwMjInO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcbn1cblxuZXhwb3J0IHR5cGUgQmV0YVRvb2xVbmlvbiA9XG4gIHwgQmV0YVRvb2xcbiAgfCBCZXRhVG9vbENvbXB1dGVyVXNlMjAyNDEwMjJcbiAgfCBCZXRhVG9vbEJhc2gyMDI0MTAyMlxuICB8IEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyO1xuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sVXNlQmxvY2sge1xuICBpZDogc3RyaW5nO1xuXG4gIGlucHV0OiB1bmtub3duO1xuXG4gIG5hbWU6IHN0cmluZztcblxuICB0eXBlOiAndG9vbF91c2UnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sVXNlQmxvY2tQYXJhbSB7XG4gIGlkOiBzdHJpbmc7XG5cbiAgaW5wdXQ6IHVua25vd247XG5cbiAgbmFtZTogc3RyaW5nO1xuXG4gIHR5cGU6ICd0b29sX3VzZSc7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFVc2FnZSB7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyB1c2VkIHRvIGNyZWF0ZSB0aGUgY2FjaGUgZW50cnkuXG4gICAqL1xuICBjYWNoZV9jcmVhdGlvbl9pbnB1dF90b2tlbnM6IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHJlYWQgZnJvbSB0aGUgY2FjaGUuXG4gICAqL1xuICBjYWNoZV9yZWFkX2lucHV0X3Rva2VuczogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgd2hpY2ggd2VyZSB1c2VkLlxuICAgKi9cbiAgaW5wdXRfdG9rZW5zOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2Ygb3V0cHV0IHRva2VucyB3aGljaCB3ZXJlIHVzZWQuXG4gICAqL1xuICBvdXRwdXRfdG9rZW5zOiBudW1iZXI7XG59XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMgPSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIHwgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZztcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGdlbmVyYXRlIGJlZm9yZSBzdG9wcGluZy5cbiAgICpcbiAgICogTm90ZSB0aGF0IG91ciBtb2RlbHMgbWF5IHN0b3AgX2JlZm9yZV8gcmVhY2hpbmcgdGhpcyBtYXhpbXVtLiBUaGlzIHBhcmFtZXRlclxuICAgKiBvbmx5IHNwZWNpZmllcyB0aGUgYWJzb2x1dGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGdlbmVyYXRlLlxuICAgKlxuICAgKiBEaWZmZXJlbnQgbW9kZWxzIGhhdmUgZGlmZmVyZW50IG1heGltdW0gdmFsdWVzIGZvciB0aGlzIHBhcmFtZXRlci4gU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgZGV0YWlscy5cbiAgICovXG4gIG1heF90b2tlbnM6IG51bWJlcjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogSW5wdXQgbWVzc2FnZXMuXG4gICAqXG4gICAqIE91ciBtb2RlbHMgYXJlIHRyYWluZWQgdG8gb3BlcmF0ZSBvbiBhbHRlcm5hdGluZyBgdXNlcmAgYW5kIGBhc3Npc3RhbnRgXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zLiBXaGVuIGNyZWF0aW5nIGEgbmV3IGBNZXNzYWdlYCwgeW91IHNwZWNpZnkgdGhlIHByaW9yXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zIHdpdGggdGhlIGBtZXNzYWdlc2AgcGFyYW1ldGVyLCBhbmQgdGhlIG1vZGVsIHRoZW4gZ2VuZXJhdGVzXG4gICAqIHRoZSBuZXh0IGBNZXNzYWdlYCBpbiB0aGUgY29udmVyc2F0aW9uLiBDb25zZWN1dGl2ZSBgdXNlcmAgb3IgYGFzc2lzdGFudGAgdHVybnNcbiAgICogaW4geW91ciByZXF1ZXN0IHdpbGwgYmUgY29tYmluZWQgaW50byBhIHNpbmdsZSB0dXJuLlxuICAgKlxuICAgKiBFYWNoIGlucHV0IG1lc3NhZ2UgbXVzdCBiZSBhbiBvYmplY3Qgd2l0aCBhIGByb2xlYCBhbmQgYGNvbnRlbnRgLiBZb3UgY2FuXG4gICAqIHNwZWNpZnkgYSBzaW5nbGUgYHVzZXJgLXJvbGUgbWVzc2FnZSwgb3IgeW91IGNhbiBpbmNsdWRlIG11bHRpcGxlIGB1c2VyYCBhbmRcbiAgICogYGFzc2lzdGFudGAgbWVzc2FnZXMuXG4gICAqXG4gICAqIElmIHRoZSBmaW5hbCBtZXNzYWdlIHVzZXMgdGhlIGBhc3Npc3RhbnRgIHJvbGUsIHRoZSByZXNwb25zZSBjb250ZW50IHdpbGxcbiAgICogY29udGludWUgaW1tZWRpYXRlbHkgZnJvbSB0aGUgY29udGVudCBpbiB0aGF0IG1lc3NhZ2UuIFRoaXMgY2FuIGJlIHVzZWQgdG9cbiAgICogY29uc3RyYWluIHBhcnQgb2YgdGhlIG1vZGVsJ3MgcmVzcG9uc2UuXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHNpbmdsZSBgdXNlcmAgbWVzc2FnZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XVxuICAgKiBgYGBcbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIG11bHRpcGxlIGNvbnZlcnNhdGlvbmFsIHR1cm5zOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8gdGhlcmUuXCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJIaSwgSSdtIENsYXVkZS4gSG93IGNhbiBJIGhlbHAgeW91P1wiIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkNhbiB5b3UgZXhwbGFpbiBMTE1zIGluIHBsYWluIEVuZ2xpc2g/XCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggYSBwYXJ0aWFsbHktZmlsbGVkIHJlc3BvbnNlIGZyb20gQ2xhdWRlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCJXaGF0J3MgdGhlIEdyZWVrIG5hbWUgZm9yIFN1bj8gKEEpIFNvbCAoQikgSGVsaW9zIChDKSBTdW5cIlxuICAgKiAgIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiVGhlIGJlc3QgYW5zd2VyIGlzIChcIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBgY29udGVudGAgbWF5IGJlIGVpdGhlciBhIHNpbmdsZSBgc3RyaW5nYCBvciBhbiBhcnJheSBvZlxuICAgKiBjb250ZW50IGJsb2Nrcywgd2hlcmUgZWFjaCBibG9jayBoYXMgYSBzcGVjaWZpYyBgdHlwZWAuIFVzaW5nIGEgYHN0cmluZ2AgZm9yXG4gICAqIGBjb250ZW50YCBpcyBzaG9ydGhhbmQgZm9yIGFuIGFycmF5IG9mIG9uZSBjb250ZW50IGJsb2NrIG9mIHR5cGUgYFwidGV4dFwiYC4gVGhlXG4gICAqIGZvbGxvd2luZyBpbnB1dCBtZXNzYWdlcyBhcmUgZXF1aXZhbGVudDpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1cbiAgICogYGBgXG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBbeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XSB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBTdGFydGluZyB3aXRoIENsYXVkZSAzIG1vZGVscywgeW91IGNhbiBhbHNvIHNlbmQgaW1hZ2UgY29udGVudCBibG9ja3M6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICoge1xuICAgKiAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICBcImNvbnRlbnRcIjogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBcInR5cGVcIjogXCJpbWFnZVwiLFxuICAgKiAgICAgICBcInNvdXJjZVwiOiB7XG4gICAqICAgICAgICAgXCJ0eXBlXCI6IFwiYmFzZTY0XCIsXG4gICAqICAgICAgICAgXCJtZWRpYV90eXBlXCI6IFwiaW1hZ2UvanBlZ1wiLFxuICAgKiAgICAgICAgIFwiZGF0YVwiOiBcIi85ai80QUFRU2taSlJnLi4uXCJcbiAgICogICAgICAgfVxuICAgKiAgICAgfSxcbiAgICogICAgIHsgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJXaGF0IGlzIGluIHRoaXMgaW1hZ2U/XCIgfVxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogV2UgY3VycmVudGx5IHN1cHBvcnQgdGhlIGBiYXNlNjRgIHNvdXJjZSB0eXBlIGZvciBpbWFnZXMsIGFuZCB0aGUgYGltYWdlL2pwZWdgLFxuICAgKiBgaW1hZ2UvcG5nYCwgYGltYWdlL2dpZmAsIGFuZCBgaW1hZ2Uvd2VicGAgbWVkaWEgdHlwZXMuXG4gICAqXG4gICAqIFNlZSBbZXhhbXBsZXNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1leGFtcGxlcyN2aXNpb24pIGZvclxuICAgKiBtb3JlIGlucHV0IGV4YW1wbGVzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgaWYgeW91IHdhbnQgdG8gaW5jbHVkZSBhXG4gICAqIFtzeXN0ZW0gcHJvbXB0XShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3N5c3RlbS1wcm9tcHRzKSwgeW91IGNhbiB1c2VcbiAgICogdGhlIHRvcC1sZXZlbCBgc3lzdGVtYCBwYXJhbWV0ZXIgXHUyMDE0IHRoZXJlIGlzIG5vIGBcInN5c3RlbVwiYCByb2xlIGZvciBpbnB1dFxuICAgKiBtZXNzYWdlcyBpbiB0aGUgTWVzc2FnZXMgQVBJLlxuICAgKi9cbiAgbWVzc2FnZXM6IEFycmF5PEJldGFNZXNzYWdlUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBUaGUgbW9kZWwgdGhhdCB3aWxsIGNvbXBsZXRlIHlvdXIgcHJvbXB0LlxcblxcblNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGFkZGl0aW9uYWxcbiAgICogZGV0YWlscyBhbmQgb3B0aW9ucy5cbiAgICovXG4gIG1vZGVsOiBNZXNzYWdlc0FQSS5Nb2RlbDtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogQW4gb2JqZWN0IGRlc2NyaWJpbmcgbWV0YWRhdGEgYWJvdXQgdGhlIHJlcXVlc3QuXG4gICAqL1xuICBtZXRhZGF0YT86IEJldGFNZXRhZGF0YTtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogQ3VzdG9tIHRleHQgc2VxdWVuY2VzIHRoYXQgd2lsbCBjYXVzZSB0aGUgbW9kZWwgdG8gc3RvcCBnZW5lcmF0aW5nLlxuICAgKlxuICAgKiBPdXIgbW9kZWxzIHdpbGwgbm9ybWFsbHkgc3RvcCB3aGVuIHRoZXkgaGF2ZSBuYXR1cmFsbHkgY29tcGxldGVkIHRoZWlyIHR1cm4sXG4gICAqIHdoaWNoIHdpbGwgcmVzdWx0IGluIGEgcmVzcG9uc2UgYHN0b3BfcmVhc29uYCBvZiBgXCJlbmRfdHVyblwiYC5cbiAgICpcbiAgICogSWYgeW91IHdhbnQgdGhlIG1vZGVsIHRvIHN0b3AgZ2VuZXJhdGluZyB3aGVuIGl0IGVuY291bnRlcnMgY3VzdG9tIHN0cmluZ3Mgb2ZcbiAgICogdGV4dCwgeW91IGNhbiB1c2UgdGhlIGBzdG9wX3NlcXVlbmNlc2AgcGFyYW1ldGVyLiBJZiB0aGUgbW9kZWwgZW5jb3VudGVycyBvbmUgb2ZcbiAgICogdGhlIGN1c3RvbSBzZXF1ZW5jZXMsIHRoZSByZXNwb25zZSBgc3RvcF9yZWFzb25gIHZhbHVlIHdpbGwgYmUgYFwic3RvcF9zZXF1ZW5jZVwiYFxuICAgKiBhbmQgdGhlIHJlc3BvbnNlIGBzdG9wX3NlcXVlbmNlYCB2YWx1ZSB3aWxsIGNvbnRhaW4gdGhlIG1hdGNoZWQgc3RvcCBzZXF1ZW5jZS5cbiAgICovXG4gIHN0b3Bfc2VxdWVuY2VzPzogQXJyYXk8c3RyaW5nPjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnRcbiAgICogZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLXN0cmVhbWluZykgZm9yXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW0/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBTeXN0ZW0gcHJvbXB0LlxuICAgKlxuICAgKiBBIHN5c3RlbSBwcm9tcHQgaXMgYSB3YXkgb2YgcHJvdmlkaW5nIGNvbnRleHQgYW5kIGluc3RydWN0aW9ucyB0byBDbGF1ZGUsIHN1Y2hcbiAgICogYXMgc3BlY2lmeWluZyBhIHBhcnRpY3VsYXIgZ29hbCBvciByb2xlLiBTZWUgb3VyXG4gICAqIFtndWlkZSB0byBzeXN0ZW0gcHJvbXB0c10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9zeXN0ZW0tcHJvbXB0cykuXG4gICAqL1xuICBzeXN0ZW0/OiBzdHJpbmcgfCBBcnJheTxCZXRhVGV4dEJsb2NrUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBBbW91bnQgb2YgcmFuZG9tbmVzcyBpbmplY3RlZCBpbnRvIHRoZSByZXNwb25zZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYDEuMGAuIFJhbmdlcyBmcm9tIGAwLjBgIHRvIGAxLjBgLiBVc2UgYHRlbXBlcmF0dXJlYCBjbG9zZXIgdG8gYDAuMGBcbiAgICogZm9yIGFuYWx5dGljYWwgLyBtdWx0aXBsZSBjaG9pY2UsIGFuZCBjbG9zZXIgdG8gYDEuMGAgZm9yIGNyZWF0aXZlIGFuZFxuICAgKiBnZW5lcmF0aXZlIHRhc2tzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgZXZlbiB3aXRoIGB0ZW1wZXJhdHVyZWAgb2YgYDAuMGAsIHRoZSByZXN1bHRzIHdpbGwgbm90IGJlIGZ1bGx5XG4gICAqIGRldGVybWluaXN0aWMuXG4gICAqL1xuICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogSG93IHRoZSBtb2RlbCBzaG91bGQgdXNlIHRoZSBwcm92aWRlZCB0b29scy4gVGhlIG1vZGVsIGNhbiB1c2UgYVxuICAgKiBzcGVjaWZpYyB0b29sLCBhbnkgYXZhaWxhYmxlIHRvb2wsIG9yIGRlY2lkZSBieSBpdHNlbGYuXG4gICAqL1xuICB0b29sX2Nob2ljZT86IEJldGFUb29sQ2hvaWNlO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBEZWZpbml0aW9ucyBvZiB0b29scyB0aGF0IHRoZSBtb2RlbCBtYXkgdXNlLlxuICAgKlxuICAgKiBJZiB5b3UgaW5jbHVkZSBgdG9vbHNgIGluIHlvdXIgQVBJIHJlcXVlc3QsIHRoZSBtb2RlbCBtYXkgcmV0dXJuIGB0b29sX3VzZWBcbiAgICogY29udGVudCBibG9ja3MgdGhhdCByZXByZXNlbnQgdGhlIG1vZGVsJ3MgdXNlIG9mIHRob3NlIHRvb2xzLiBZb3UgY2FuIHRoZW4gcnVuXG4gICAqIHRob3NlIHRvb2xzIHVzaW5nIHRoZSB0b29sIGlucHV0IGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgYW5kIHRoZW4gb3B0aW9uYWxseVxuICAgKiByZXR1cm4gcmVzdWx0cyBiYWNrIHRvIHRoZSBtb2RlbCB1c2luZyBgdG9vbF9yZXN1bHRgIGNvbnRlbnQgYmxvY2tzLlxuICAgKlxuICAgKiBFYWNoIHRvb2wgZGVmaW5pdGlvbiBpbmNsdWRlczpcbiAgICpcbiAgICogLSBgbmFtZWA6IE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqIC0gYGRlc2NyaXB0aW9uYDogT3B0aW9uYWwsIGJ1dCBzdHJvbmdseS1yZWNvbW1lbmRlZCBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbC5cbiAgICogLSBgaW5wdXRfc2NoZW1hYDogW0pTT04gc2NoZW1hXShodHRwczovL2pzb24tc2NoZW1hLm9yZy8pIGZvciB0aGUgdG9vbCBgaW5wdXRgXG4gICAqICAgc2hhcGUgdGhhdCB0aGUgbW9kZWwgd2lsbCBwcm9kdWNlIGluIGB0b29sX3VzZWAgb3V0cHV0IGNvbnRlbnQgYmxvY2tzLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgeW91IGRlZmluZWQgYHRvb2xzYCBhczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJuYW1lXCI6IFwiZ2V0X3N0b2NrX3ByaWNlXCIsXG4gICAqICAgICBcImRlc2NyaXB0aW9uXCI6IFwiR2V0IHRoZSBjdXJyZW50IHN0b2NrIHByaWNlIGZvciBhIGdpdmVuIHRpY2tlciBzeW1ib2wuXCIsXG4gICAqICAgICBcImlucHV0X3NjaGVtYVwiOiB7XG4gICAqICAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiLFxuICAgKiAgICAgICBcInByb3BlcnRpZXNcIjoge1xuICAgKiAgICAgICAgIFwidGlja2VyXCI6IHtcbiAgICogICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxuICAgKiAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSBzdG9jayB0aWNrZXIgc3ltYm9sLCBlLmcuIEFBUEwgZm9yIEFwcGxlIEluYy5cIlxuICAgKiAgICAgICAgIH1cbiAgICogICAgICAgfSxcbiAgICogICAgICAgXCJyZXF1aXJlZFwiOiBbXCJ0aWNrZXJcIl1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEFuZCB0aGVuIGFza2VkIHRoZSBtb2RlbCBcIldoYXQncyB0aGUgUyZQIDUwMCBhdCB0b2RheT9cIiwgdGhlIG1vZGVsIG1pZ2h0IHByb2R1Y2VcbiAgICogYHRvb2xfdXNlYCBjb250ZW50IGJsb2NrcyBpbiB0aGUgcmVzcG9uc2UgbGlrZSB0aGlzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInR5cGVcIjogXCJ0b29sX3VzZVwiLFxuICAgKiAgICAgXCJpZFwiOiBcInRvb2x1XzAxRDdGTHJmaDRHWXE3eVQxVUxGZXlNVlwiLFxuICAgKiAgICAgXCJuYW1lXCI6IFwiZ2V0X3N0b2NrX3ByaWNlXCIsXG4gICAqICAgICBcImlucHV0XCI6IHsgXCJ0aWNrZXJcIjogXCJeR1NQQ1wiIH1cbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFlvdSBtaWdodCB0aGVuIHJ1biB5b3VyIGBnZXRfc3RvY2tfcHJpY2VgIHRvb2wgd2l0aCBge1widGlja2VyXCI6IFwiXkdTUENcIn1gIGFzIGFuXG4gICAqIGlucHV0LCBhbmQgcmV0dXJuIHRoZSBmb2xsb3dpbmcgYmFjayB0byB0aGUgbW9kZWwgaW4gYSBzdWJzZXF1ZW50IGB1c2VyYFxuICAgKiBtZXNzYWdlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInR5cGVcIjogXCJ0b29sX3Jlc3VsdFwiLFxuICAgKiAgICAgXCJ0b29sX3VzZV9pZFwiOiBcInRvb2x1XzAxRDdGTHJmaDRHWXE3eVQxVUxGZXlNVlwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiMjU5Ljc1IFVTRFwiXG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBUb29scyBjYW4gYmUgdXNlZCBmb3Igd29ya2Zsb3dzIHRoYXQgaW5jbHVkZSBydW5uaW5nIGNsaWVudC1zaWRlIHRvb2xzIGFuZFxuICAgKiBmdW5jdGlvbnMsIG9yIG1vcmUgZ2VuZXJhbGx5IHdoZW5ldmVyIHlvdSB3YW50IHRoZSBtb2RlbCB0byBwcm9kdWNlIGEgcGFydGljdWxhclxuICAgKiBKU09OIHN0cnVjdHVyZSBvZiBvdXRwdXQuXG4gICAqXG4gICAqIFNlZSBvdXIgW2d1aWRlXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3Rvb2wtdXNlKSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgdG9vbHM/OiBBcnJheTxCZXRhVG9vbFVuaW9uPjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogT25seSBzYW1wbGUgZnJvbSB0aGUgdG9wIEsgb3B0aW9ucyBmb3IgZWFjaCBzdWJzZXF1ZW50IHRva2VuLlxuICAgKlxuICAgKiBVc2VkIHRvIHJlbW92ZSBcImxvbmcgdGFpbFwiIGxvdyBwcm9iYWJpbGl0eSByZXNwb25zZXMuXG4gICAqIFtMZWFybiBtb3JlIHRlY2huaWNhbCBkZXRhaWxzIGhlcmVdKGh0dHBzOi8vdG93YXJkc2RhdGFzY2llbmNlLmNvbS9ob3ctdG8tc2FtcGxlLWZyb20tbGFuZ3VhZ2UtbW9kZWxzLTY4MmJjZWI5NzI3NykuXG4gICAqXG4gICAqIFJlY29tbWVuZGVkIGZvciBhZHZhbmNlZCB1c2UgY2FzZXMgb25seS4gWW91IHVzdWFsbHkgb25seSBuZWVkIHRvIHVzZVxuICAgKiBgdGVtcGVyYXR1cmVgLlxuICAgKi9cbiAgdG9wX2s/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IFVzZSBudWNsZXVzIHNhbXBsaW5nLlxuICAgKlxuICAgKiBJbiBudWNsZXVzIHNhbXBsaW5nLCB3ZSBjb21wdXRlIHRoZSBjdW11bGF0aXZlIGRpc3RyaWJ1dGlvbiBvdmVyIGFsbCB0aGUgb3B0aW9uc1xuICAgKiBmb3IgZWFjaCBzdWJzZXF1ZW50IHRva2VuIGluIGRlY3JlYXNpbmcgcHJvYmFiaWxpdHkgb3JkZXIgYW5kIGN1dCBpdCBvZmYgb25jZSBpdFxuICAgKiByZWFjaGVzIGEgcGFydGljdWxhciBwcm9iYWJpbGl0eSBzcGVjaWZpZWQgYnkgYHRvcF9wYC4gWW91IHNob3VsZCBlaXRoZXIgYWx0ZXJcbiAgICogYHRlbXBlcmF0dXJlYCBvciBgdG9wX3BgLCBidXQgbm90IGJvdGguXG4gICAqXG4gICAqIFJlY29tbWVuZGVkIGZvciBhZHZhbmNlZCB1c2UgY2FzZXMgb25seS4gWW91IHVzdWFsbHkgb25seSBuZWVkIHRvIHVzZVxuICAgKiBgdGVtcGVyYXR1cmVgLlxuICAgKi9cbiAgdG9wX3A/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEhlYWRlciBwYXJhbTogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgTWVzc2FnZUNyZWF0ZVBhcmFtcyB7XG4gIGV4cG9ydCB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBNZXNzYWdlc01lc3NhZ2VzQVBJLk1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBNZXNzYWdlc01lc3NhZ2VzQVBJLk1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBleHRlbmRzIE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50XG4gICAqIGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1zdHJlYW1pbmcpIGZvclxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtPzogZmFsc2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyBleHRlbmRzIE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50XG4gICAqIGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1zdHJlYW1pbmcpIGZvclxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtOiB0cnVlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyB7XG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBJbnB1dCBtZXNzYWdlcy5cbiAgICpcbiAgICogT3VyIG1vZGVscyBhcmUgdHJhaW5lZCB0byBvcGVyYXRlIG9uIGFsdGVybmF0aW5nIGB1c2VyYCBhbmQgYGFzc2lzdGFudGBcbiAgICogY29udmVyc2F0aW9uYWwgdHVybnMuIFdoZW4gY3JlYXRpbmcgYSBuZXcgYE1lc3NhZ2VgLCB5b3Ugc3BlY2lmeSB0aGUgcHJpb3JcbiAgICogY29udmVyc2F0aW9uYWwgdHVybnMgd2l0aCB0aGUgYG1lc3NhZ2VzYCBwYXJhbWV0ZXIsIGFuZCB0aGUgbW9kZWwgdGhlbiBnZW5lcmF0ZXNcbiAgICogdGhlIG5leHQgYE1lc3NhZ2VgIGluIHRoZSBjb252ZXJzYXRpb24uIENvbnNlY3V0aXZlIGB1c2VyYCBvciBgYXNzaXN0YW50YCB0dXJuc1xuICAgKiBpbiB5b3VyIHJlcXVlc3Qgd2lsbCBiZSBjb21iaW5lZCBpbnRvIGEgc2luZ2xlIHR1cm4uXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBtdXN0IGJlIGFuIG9iamVjdCB3aXRoIGEgYHJvbGVgIGFuZCBgY29udGVudGAuIFlvdSBjYW5cbiAgICogc3BlY2lmeSBhIHNpbmdsZSBgdXNlcmAtcm9sZSBtZXNzYWdlLCBvciB5b3UgY2FuIGluY2x1ZGUgbXVsdGlwbGUgYHVzZXJgIGFuZFxuICAgKiBgYXNzaXN0YW50YCBtZXNzYWdlcy5cbiAgICpcbiAgICogSWYgdGhlIGZpbmFsIG1lc3NhZ2UgdXNlcyB0aGUgYGFzc2lzdGFudGAgcm9sZSwgdGhlIHJlc3BvbnNlIGNvbnRlbnQgd2lsbFxuICAgKiBjb250aW51ZSBpbW1lZGlhdGVseSBmcm9tIHRoZSBjb250ZW50IGluIHRoYXQgbWVzc2FnZS4gVGhpcyBjYW4gYmUgdXNlZCB0b1xuICAgKiBjb25zdHJhaW4gcGFydCBvZiB0aGUgbW9kZWwncyByZXNwb25zZS5cbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIGEgc2luZ2xlIGB1c2VyYCBtZXNzYWdlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1dXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggbXVsdGlwbGUgY29udmVyc2F0aW9uYWwgdHVybnM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbyB0aGVyZS5cIiB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIkhpLCBJJ20gQ2xhdWRlLiBIb3cgY2FuIEkgaGVscCB5b3U/XCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiQ2FuIHlvdSBleHBsYWluIExMTXMgaW4gcGxhaW4gRW5nbGlzaD9cIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHBhcnRpYWxseS1maWxsZWQgcmVzcG9uc2UgZnJvbSBDbGF1ZGU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIldoYXQncyB0aGUgR3JlZWsgbmFtZSBmb3IgU3VuPyAoQSkgU29sIChCKSBIZWxpb3MgKEMpIFN1blwiXG4gICAqICAgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJUaGUgYmVzdCBhbnN3ZXIgaXMgKFwiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogRWFjaCBpbnB1dCBtZXNzYWdlIGBjb250ZW50YCBtYXkgYmUgZWl0aGVyIGEgc2luZ2xlIGBzdHJpbmdgIG9yIGFuIGFycmF5IG9mXG4gICAqIGNvbnRlbnQgYmxvY2tzLCB3aGVyZSBlYWNoIGJsb2NrIGhhcyBhIHNwZWNpZmljIGB0eXBlYC4gVXNpbmcgYSBgc3RyaW5nYCBmb3JcbiAgICogYGNvbnRlbnRgIGlzIHNob3J0aGFuZCBmb3IgYW4gYXJyYXkgb2Ygb25lIGNvbnRlbnQgYmxvY2sgb2YgdHlwZSBgXCJ0ZXh0XCJgLiBUaGVcbiAgICogZm9sbG93aW5nIGlucHV0IG1lc3NhZ2VzIGFyZSBlcXVpdmFsZW50OlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfVxuICAgKiBgYGBcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1dIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFN0YXJ0aW5nIHdpdGggQ2xhdWRlIDMgbW9kZWxzLCB5b3UgY2FuIGFsc28gc2VuZCBpbWFnZSBjb250ZW50IGJsb2NrczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7XG4gICAqICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgIFwiY29udGVudFwiOiBbXG4gICAqICAgICB7XG4gICAqICAgICAgIFwidHlwZVwiOiBcImltYWdlXCIsXG4gICAqICAgICAgIFwic291cmNlXCI6IHtcbiAgICogICAgICAgICBcInR5cGVcIjogXCJiYXNlNjRcIixcbiAgICogICAgICAgICBcIm1lZGlhX3R5cGVcIjogXCJpbWFnZS9qcGVnXCIsXG4gICAqICAgICAgICAgXCJkYXRhXCI6IFwiLzlqLzRBQVFTa1pKUmcuLi5cIlxuICAgKiAgICAgICB9XG4gICAqICAgICB9LFxuICAgKiAgICAgeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIldoYXQgaXMgaW4gdGhpcyBpbWFnZT9cIiB9XG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBXZSBjdXJyZW50bHkgc3VwcG9ydCB0aGUgYGJhc2U2NGAgc291cmNlIHR5cGUgZm9yIGltYWdlcywgYW5kIHRoZSBgaW1hZ2UvanBlZ2AsXG4gICAqIGBpbWFnZS9wbmdgLCBgaW1hZ2UvZ2lmYCwgYW5kIGBpbWFnZS93ZWJwYCBtZWRpYSB0eXBlcy5cbiAgICpcbiAgICogU2VlIFtleGFtcGxlc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLWV4YW1wbGVzI3Zpc2lvbikgZm9yXG4gICAqIG1vcmUgaW5wdXQgZXhhbXBsZXMuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBpZiB5b3Ugd2FudCB0byBpbmNsdWRlIGFcbiAgICogW3N5c3RlbSBwcm9tcHRdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3Mvc3lzdGVtLXByb21wdHMpLCB5b3UgY2FuIHVzZVxuICAgKiB0aGUgdG9wLWxldmVsIGBzeXN0ZW1gIHBhcmFtZXRlciBcdTIwMTQgdGhlcmUgaXMgbm8gYFwic3lzdGVtXCJgIHJvbGUgZm9yIGlucHV0XG4gICAqIG1lc3NhZ2VzIGluIHRoZSBNZXNzYWdlcyBBUEkuXG4gICAqL1xuICBtZXNzYWdlczogQXJyYXk8QmV0YU1lc3NhZ2VQYXJhbT47XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1lc3NhZ2VzQVBJLk1vZGVsO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBTeXN0ZW0gcHJvbXB0LlxuICAgKlxuICAgKiBBIHN5c3RlbSBwcm9tcHQgaXMgYSB3YXkgb2YgcHJvdmlkaW5nIGNvbnRleHQgYW5kIGluc3RydWN0aW9ucyB0byBDbGF1ZGUsIHN1Y2hcbiAgICogYXMgc3BlY2lmeWluZyBhIHBhcnRpY3VsYXIgZ29hbCBvciByb2xlLiBTZWUgb3VyXG4gICAqIFtndWlkZSB0byBzeXN0ZW0gcHJvbXB0c10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9zeXN0ZW0tcHJvbXB0cykuXG4gICAqL1xuICBzeXN0ZW0/OiBzdHJpbmcgfCBBcnJheTxCZXRhVGV4dEJsb2NrUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBIb3cgdGhlIG1vZGVsIHNob3VsZCB1c2UgdGhlIHByb3ZpZGVkIHRvb2xzLiBUaGUgbW9kZWwgY2FuIHVzZSBhXG4gICAqIHNwZWNpZmljIHRvb2wsIGFueSBhdmFpbGFibGUgdG9vbCwgb3IgZGVjaWRlIGJ5IGl0c2VsZi5cbiAgICovXG4gIHRvb2xfY2hvaWNlPzogQmV0YVRvb2xDaG9pY2U7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IERlZmluaXRpb25zIG9mIHRvb2xzIHRoYXQgdGhlIG1vZGVsIG1heSB1c2UuXG4gICAqXG4gICAqIElmIHlvdSBpbmNsdWRlIGB0b29sc2AgaW4geW91ciBBUEkgcmVxdWVzdCwgdGhlIG1vZGVsIG1heSByZXR1cm4gYHRvb2xfdXNlYFxuICAgKiBjb250ZW50IGJsb2NrcyB0aGF0IHJlcHJlc2VudCB0aGUgbW9kZWwncyB1c2Ugb2YgdGhvc2UgdG9vbHMuIFlvdSBjYW4gdGhlbiBydW5cbiAgICogdGhvc2UgdG9vbHMgdXNpbmcgdGhlIHRvb2wgaW5wdXQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBhbmQgdGhlbiBvcHRpb25hbGx5XG4gICAqIHJldHVybiByZXN1bHRzIGJhY2sgdG8gdGhlIG1vZGVsIHVzaW5nIGB0b29sX3Jlc3VsdGAgY29udGVudCBibG9ja3MuXG4gICAqXG4gICAqIEVhY2ggdG9vbCBkZWZpbml0aW9uIGluY2x1ZGVzOlxuICAgKlxuICAgKiAtIGBuYW1lYDogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICogLSBgZGVzY3JpcHRpb25gOiBPcHRpb25hbCwgYnV0IHN0cm9uZ2x5LXJlY29tbWVuZGVkIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sLlxuICAgKiAtIGBpbnB1dF9zY2hlbWFgOiBbSlNPTiBzY2hlbWFdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnLykgZm9yIHRoZSB0b29sIGBpbnB1dGBcbiAgICogICBzaGFwZSB0aGF0IHRoZSBtb2RlbCB3aWxsIHByb2R1Y2UgaW4gYHRvb2xfdXNlYCBvdXRwdXQgY29udGVudCBibG9ja3MuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBpZiB5b3UgZGVmaW5lZCBgdG9vbHNgIGFzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcIm5hbWVcIjogXCJnZXRfc3RvY2tfcHJpY2VcIixcbiAgICogICAgIFwiZGVzY3JpcHRpb25cIjogXCJHZXQgdGhlIGN1cnJlbnQgc3RvY2sgcHJpY2UgZm9yIGEgZ2l2ZW4gdGlja2VyIHN5bWJvbC5cIixcbiAgICogICAgIFwiaW5wdXRfc2NoZW1hXCI6IHtcbiAgICogICAgICAgXCJ0eXBlXCI6IFwib2JqZWN0XCIsXG4gICAqICAgICAgIFwicHJvcGVydGllc1wiOiB7XG4gICAqICAgICAgICAgXCJ0aWNrZXJcIjoge1xuICAgKiAgICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXG4gICAqICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIHN0b2NrIHRpY2tlciBzeW1ib2wsIGUuZy4gQUFQTCBmb3IgQXBwbGUgSW5jLlwiXG4gICAqICAgICAgICAgfVxuICAgKiAgICAgICB9LFxuICAgKiAgICAgICBcInJlcXVpcmVkXCI6IFtcInRpY2tlclwiXVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogQW5kIHRoZW4gYXNrZWQgdGhlIG1vZGVsIFwiV2hhdCdzIHRoZSBTJlAgNTAwIGF0IHRvZGF5P1wiLCB0aGUgbW9kZWwgbWlnaHQgcHJvZHVjZVxuICAgKiBgdG9vbF91c2VgIGNvbnRlbnQgYmxvY2tzIGluIHRoZSByZXNwb25zZSBsaWtlIHRoaXM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwidHlwZVwiOiBcInRvb2xfdXNlXCIsXG4gICAqICAgICBcImlkXCI6IFwidG9vbHVfMDFEN0ZMcmZoNEdZcTd5VDFVTEZleU1WXCIsXG4gICAqICAgICBcIm5hbWVcIjogXCJnZXRfc3RvY2tfcHJpY2VcIixcbiAgICogICAgIFwiaW5wdXRcIjogeyBcInRpY2tlclwiOiBcIl5HU1BDXCIgfVxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogWW91IG1pZ2h0IHRoZW4gcnVuIHlvdXIgYGdldF9zdG9ja19wcmljZWAgdG9vbCB3aXRoIGB7XCJ0aWNrZXJcIjogXCJeR1NQQ1wifWAgYXMgYW5cbiAgICogaW5wdXQsIGFuZCByZXR1cm4gdGhlIGZvbGxvd2luZyBiYWNrIHRvIHRoZSBtb2RlbCBpbiBhIHN1YnNlcXVlbnQgYHVzZXJgXG4gICAqIG1lc3NhZ2U6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwidHlwZVwiOiBcInRvb2xfcmVzdWx0XCIsXG4gICAqICAgICBcInRvb2xfdXNlX2lkXCI6IFwidG9vbHVfMDFEN0ZMcmZoNEdZcTd5VDFVTEZleU1WXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCIyNTkuNzUgVVNEXCJcbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFRvb2xzIGNhbiBiZSB1c2VkIGZvciB3b3JrZmxvd3MgdGhhdCBpbmNsdWRlIHJ1bm5pbmcgY2xpZW50LXNpZGUgdG9vbHMgYW5kXG4gICAqIGZ1bmN0aW9ucywgb3IgbW9yZSBnZW5lcmFsbHkgd2hlbmV2ZXIgeW91IHdhbnQgdGhlIG1vZGVsIHRvIHByb2R1Y2UgYSBwYXJ0aWN1bGFyXG4gICAqIEpTT04gc3RydWN0dXJlIG9mIG91dHB1dC5cbiAgICpcbiAgICogU2VlIG91ciBbZ3VpZGVdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvdG9vbC11c2UpIGZvciBtb3JlIGRldGFpbHMuXG4gICAqL1xuICB0b29scz86IEFycmF5PEJldGFUb29sIHwgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyIHwgQmV0YVRvb2xCYXNoMjAyNDEwMjIgfCBCZXRhVG9vbFRleHRFZGl0b3IyMDI0MTAyMj47XG5cbiAgLyoqXG4gICAqIEhlYWRlciBwYXJhbTogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbk1lc3NhZ2VzLkJhdGNoZXMgPSBCYXRjaGVzO1xuTWVzc2FnZXMuQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSA9IEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2U7XG5cbmV4cG9ydCBkZWNsYXJlIG5hbWVzcGFjZSBNZXNzYWdlcyB7XG4gIGV4cG9ydCB7XG4gICAgdHlwZSBCZXRhQmFzZTY0UERGQmxvY2sgYXMgQmV0YUJhc2U2NFBERkJsb2NrLFxuICAgIHR5cGUgQmV0YUJhc2U2NFBERlNvdXJjZSBhcyBCZXRhQmFzZTY0UERGU291cmNlLFxuICAgIHR5cGUgQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCBhcyBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uIGFzIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvbixcbiAgICB0eXBlIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtIGFzIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24gYXMgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtIGFzIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb24gYXMgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0gYXMgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25zQ29uZmlnUGFyYW0gYXMgQmV0YUNpdGF0aW9uc0NvbmZpZ1BhcmFtLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uc0RlbHRhIGFzIEJldGFDaXRhdGlvbnNEZWx0YSxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2sgYXMgQmV0YUNvbnRlbnRCbG9jayxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2tQYXJhbSBhcyBCZXRhQ29udGVudEJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhQ29udGVudEJsb2NrU291cmNlIGFzIEJldGFDb250ZW50QmxvY2tTb3VyY2UsXG4gICAgdHlwZSBCZXRhQ29udGVudEJsb2NrU291cmNlQ29udGVudCBhcyBCZXRhQ29udGVudEJsb2NrU291cmNlQ29udGVudCxcbiAgICB0eXBlIEJldGFJbWFnZUJsb2NrUGFyYW0gYXMgQmV0YUltYWdlQmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFJbnB1dEpTT05EZWx0YSBhcyBCZXRhSW5wdXRKU09ORGVsdGEsXG4gICAgdHlwZSBCZXRhTWVzc2FnZSBhcyBCZXRhTWVzc2FnZSxcbiAgICB0eXBlIEJldGFNZXNzYWdlRGVsdGFVc2FnZSBhcyBCZXRhTWVzc2FnZURlbHRhVXNhZ2UsXG4gICAgdHlwZSBCZXRhTWVzc2FnZVBhcmFtIGFzIEJldGFNZXNzYWdlUGFyYW0sXG4gICAgdHlwZSBCZXRhTWVzc2FnZVRva2Vuc0NvdW50IGFzIEJldGFNZXNzYWdlVG9rZW5zQ291bnQsXG4gICAgdHlwZSBCZXRhTWV0YWRhdGEgYXMgQmV0YU1ldGFkYXRhLFxuICAgIHR5cGUgQmV0YVBsYWluVGV4dFNvdXJjZSBhcyBCZXRhUGxhaW5UZXh0U291cmNlLFxuICAgIHR5cGUgQmV0YVJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQgYXMgQmV0YVJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCBhcyBCZXRhUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgICB0eXBlIEJldGFSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQgYXMgQmV0YVJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCxcbiAgICB0eXBlIEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudCBhcyBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3TWVzc2FnZVN0YXJ0RXZlbnQgYXMgQmV0YVJhd01lc3NhZ2VTdGFydEV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd01lc3NhZ2VTdG9wRXZlbnQgYXMgQmV0YVJhd01lc3NhZ2VTdG9wRXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50IGFzIEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQsXG4gICAgdHlwZSBCZXRhVGV4dEJsb2NrIGFzIEJldGFUZXh0QmxvY2ssXG4gICAgdHlwZSBCZXRhVGV4dEJsb2NrUGFyYW0gYXMgQmV0YVRleHRCbG9ja1BhcmFtLFxuICAgIHR5cGUgQmV0YVRleHRDaXRhdGlvbiBhcyBCZXRhVGV4dENpdGF0aW9uLFxuICAgIHR5cGUgQmV0YVRleHRDaXRhdGlvblBhcmFtIGFzIEJldGFUZXh0Q2l0YXRpb25QYXJhbSxcbiAgICB0eXBlIEJldGFUZXh0RGVsdGEgYXMgQmV0YVRleHREZWx0YSxcbiAgICB0eXBlIEJldGFUb29sIGFzIEJldGFUb29sLFxuICAgIHR5cGUgQmV0YVRvb2xCYXNoMjAyNDEwMjIgYXMgQmV0YVRvb2xCYXNoMjAyNDEwMjIsXG4gICAgdHlwZSBCZXRhVG9vbENob2ljZSBhcyBCZXRhVG9vbENob2ljZSxcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlQW55IGFzIEJldGFUb29sQ2hvaWNlQW55LFxuICAgIHR5cGUgQmV0YVRvb2xDaG9pY2VBdXRvIGFzIEJldGFUb29sQ2hvaWNlQXV0byxcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlVG9vbCBhcyBCZXRhVG9vbENob2ljZVRvb2wsXG4gICAgdHlwZSBCZXRhVG9vbENvbXB1dGVyVXNlMjAyNDEwMjIgYXMgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyLFxuICAgIHR5cGUgQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtIGFzIEJldGFUb29sUmVzdWx0QmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyIGFzIEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyLFxuICAgIHR5cGUgQmV0YVRvb2xVbmlvbiBhcyBCZXRhVG9vbFVuaW9uLFxuICAgIHR5cGUgQmV0YVRvb2xVc2VCbG9jayBhcyBCZXRhVG9vbFVzZUJsb2NrLFxuICAgIHR5cGUgQmV0YVRvb2xVc2VCbG9ja1BhcmFtIGFzIEJldGFUb29sVXNlQmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFVc2FnZSBhcyBCZXRhVXNhZ2UsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMgYXMgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICB9O1xuXG4gIGV4cG9ydCB7XG4gICAgQmF0Y2hlcyBhcyBCYXRjaGVzLFxuICAgIHR5cGUgQmV0YURlbGV0ZWRNZXNzYWdlQmF0Y2ggYXMgQmV0YURlbGV0ZWRNZXNzYWdlQmF0Y2gsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoIGFzIEJldGFNZXNzYWdlQmF0Y2gsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0LFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UgYXMgQmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzIGFzIEJldGFNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoUmVzdWx0LFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0LFxuICAgIEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UgYXMgQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSxcbiAgICB0eXBlIEJhdGNoQ3JlYXRlUGFyYW1zIGFzIEJhdGNoQ3JlYXRlUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hSZXRyaWV2ZVBhcmFtcyBhcyBCYXRjaFJldHJpZXZlUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hMaXN0UGFyYW1zIGFzIEJhdGNoTGlzdFBhcmFtcyxcbiAgICB0eXBlIEJhdGNoRGVsZXRlUGFyYW1zIGFzIEJhdGNoRGVsZXRlUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hDYW5jZWxQYXJhbXMgYXMgQmF0Y2hDYW5jZWxQYXJhbXMsXG4gICAgdHlwZSBCYXRjaFJlc3VsdHNQYXJhbXMgYXMgQmF0Y2hSZXN1bHRzUGFyYW1zLFxuICB9O1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSBcIi4uLy4uL3Jlc291cmNlLmpzXCI7XG5pbXBvcnQgKiBhcyBNb2RlbHNBUEkgZnJvbSBcIi4vbW9kZWxzLmpzXCI7XG5pbXBvcnQgeyBCZXRhTW9kZWxJbmZvLCBCZXRhTW9kZWxJbmZvc1BhZ2UsIE1vZGVsTGlzdFBhcmFtcywgTW9kZWxzIH0gZnJvbSBcIi4vbW9kZWxzLmpzXCI7XG5pbXBvcnQgKiBhcyBNZXNzYWdlc0FQSSBmcm9tIFwiLi9tZXNzYWdlcy9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHtcbiAgQmV0YUJhc2U2NFBERkJsb2NrLFxuICBCZXRhQmFzZTY0UERGU291cmNlLFxuICBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsLFxuICBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb24sXG4gIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtLFxuICBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbixcbiAgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSxcbiAgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uLFxuICBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbSxcbiAgQmV0YUNpdGF0aW9uc0NvbmZpZ1BhcmFtLFxuICBCZXRhQ2l0YXRpb25zRGVsdGEsXG4gIEJldGFDb250ZW50QmxvY2ssXG4gIEJldGFDb250ZW50QmxvY2tQYXJhbSxcbiAgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZSxcbiAgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQsXG4gIEJldGFJbWFnZUJsb2NrUGFyYW0sXG4gIEJldGFJbnB1dEpTT05EZWx0YSxcbiAgQmV0YU1lc3NhZ2UsXG4gIEJldGFNZXNzYWdlRGVsdGFVc2FnZSxcbiAgQmV0YU1lc3NhZ2VQYXJhbSxcbiAgQmV0YU1lc3NhZ2VUb2tlbnNDb3VudCxcbiAgQmV0YU1ldGFkYXRhLFxuICBCZXRhUGxhaW5UZXh0U291cmNlLFxuICBCZXRhUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gIEJldGFSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gIEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudCxcbiAgQmV0YVJhd01lc3NhZ2VTdGFydEV2ZW50LFxuICBCZXRhUmF3TWVzc2FnZVN0b3BFdmVudCxcbiAgQmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudCxcbiAgQmV0YVRleHRCbG9jayxcbiAgQmV0YVRleHRCbG9ja1BhcmFtLFxuICBCZXRhVGV4dENpdGF0aW9uLFxuICBCZXRhVGV4dENpdGF0aW9uUGFyYW0sXG4gIEJldGFUZXh0RGVsdGEsXG4gIEJldGFUb29sLFxuICBCZXRhVG9vbEJhc2gyMDI0MTAyMixcbiAgQmV0YVRvb2xDaG9pY2UsXG4gIEJldGFUb29sQ2hvaWNlQW55LFxuICBCZXRhVG9vbENob2ljZUF1dG8sXG4gIEJldGFUb29sQ2hvaWNlVG9vbCxcbiAgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyLFxuICBCZXRhVG9vbFJlc3VsdEJsb2NrUGFyYW0sXG4gIEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyLFxuICBCZXRhVG9vbFVuaW9uLFxuICBCZXRhVG9vbFVzZUJsb2NrLFxuICBCZXRhVG9vbFVzZUJsb2NrUGFyYW0sXG4gIEJldGFVc2FnZSxcbiAgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICBNZXNzYWdlcyxcbn0gZnJvbSBcIi4vbWVzc2FnZXMvbWVzc2FnZXMuanNcIjtcblxuZXhwb3J0IGNsYXNzIEJldGEgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIG1vZGVsczogTW9kZWxzQVBJLk1vZGVscyA9IG5ldyBNb2RlbHNBUEkuTW9kZWxzKHRoaXMuX2NsaWVudCk7XG4gIG1lc3NhZ2VzOiBNZXNzYWdlc0FQSS5NZXNzYWdlcyA9IG5ldyBNZXNzYWdlc0FQSS5NZXNzYWdlcyh0aGlzLl9jbGllbnQpO1xufVxuXG5leHBvcnQgdHlwZSBBbnRocm9waWNCZXRhID1cbiAgfCAoc3RyaW5nICYge30pXG4gIHwgJ21lc3NhZ2UtYmF0Y2hlcy0yMDI0LTA5LTI0J1xuICB8ICdwcm9tcHQtY2FjaGluZy0yMDI0LTA3LTMxJ1xuICB8ICdjb21wdXRlci11c2UtMjAyNC0xMC0yMidcbiAgfCAncGRmcy0yMDI0LTA5LTI1J1xuICB8ICd0b2tlbi1jb3VudGluZy0yMDI0LTExLTAxJztcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQVBJRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2FwaV9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUF1dGhlbnRpY2F0aW9uRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2F1dGhlbnRpY2F0aW9uX2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQmlsbGluZ0Vycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdiaWxsaW5nX2Vycm9yJztcbn1cblxuZXhwb3J0IHR5cGUgQmV0YUVycm9yID1cbiAgfCBCZXRhSW52YWxpZFJlcXVlc3RFcnJvclxuICB8IEJldGFBdXRoZW50aWNhdGlvbkVycm9yXG4gIHwgQmV0YUJpbGxpbmdFcnJvclxuICB8IEJldGFQZXJtaXNzaW9uRXJyb3JcbiAgfCBCZXRhTm90Rm91bmRFcnJvclxuICB8IEJldGFSYXRlTGltaXRFcnJvclxuICB8IEJldGFHYXRld2F5VGltZW91dEVycm9yXG4gIHwgQmV0YUFQSUVycm9yXG4gIHwgQmV0YU92ZXJsb2FkZWRFcnJvcjtcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhRXJyb3JSZXNwb25zZSB7XG4gIGVycm9yOiBCZXRhRXJyb3I7XG5cbiAgdHlwZTogJ2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhR2F0ZXdheVRpbWVvdXRFcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAndGltZW91dF9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUludmFsaWRSZXF1ZXN0RXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2ludmFsaWRfcmVxdWVzdF9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU5vdEZvdW5kRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ25vdF9mb3VuZF9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU92ZXJsb2FkZWRFcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAnb3ZlcmxvYWRlZF9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVBlcm1pc3Npb25FcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAncGVybWlzc2lvbl9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVJhdGVMaW1pdEVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdyYXRlX2xpbWl0X2Vycm9yJztcbn1cblxuQmV0YS5Nb2RlbHMgPSBNb2RlbHM7XG5CZXRhLkJldGFNb2RlbEluZm9zUGFnZSA9IEJldGFNb2RlbEluZm9zUGFnZTtcbkJldGEuTWVzc2FnZXMgPSBNZXNzYWdlcztcblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIEJldGEge1xuICBleHBvcnQge1xuICAgIHR5cGUgQW50aHJvcGljQmV0YSBhcyBBbnRocm9waWNCZXRhLFxuICAgIHR5cGUgQmV0YUFQSUVycm9yIGFzIEJldGFBUElFcnJvcixcbiAgICB0eXBlIEJldGFBdXRoZW50aWNhdGlvbkVycm9yIGFzIEJldGFBdXRoZW50aWNhdGlvbkVycm9yLFxuICAgIHR5cGUgQmV0YUJpbGxpbmdFcnJvciBhcyBCZXRhQmlsbGluZ0Vycm9yLFxuICAgIHR5cGUgQmV0YUVycm9yIGFzIEJldGFFcnJvcixcbiAgICB0eXBlIEJldGFFcnJvclJlc3BvbnNlIGFzIEJldGFFcnJvclJlc3BvbnNlLFxuICAgIHR5cGUgQmV0YUdhdGV3YXlUaW1lb3V0RXJyb3IgYXMgQmV0YUdhdGV3YXlUaW1lb3V0RXJyb3IsXG4gICAgdHlwZSBCZXRhSW52YWxpZFJlcXVlc3RFcnJvciBhcyBCZXRhSW52YWxpZFJlcXVlc3RFcnJvcixcbiAgICB0eXBlIEJldGFOb3RGb3VuZEVycm9yIGFzIEJldGFOb3RGb3VuZEVycm9yLFxuICAgIHR5cGUgQmV0YU92ZXJsb2FkZWRFcnJvciBhcyBCZXRhT3ZlcmxvYWRlZEVycm9yLFxuICAgIHR5cGUgQmV0YVBlcm1pc3Npb25FcnJvciBhcyBCZXRhUGVybWlzc2lvbkVycm9yLFxuICAgIHR5cGUgQmV0YVJhdGVMaW1pdEVycm9yIGFzIEJldGFSYXRlTGltaXRFcnJvcixcbiAgfTtcblxuICBleHBvcnQge1xuICAgIE1vZGVscyBhcyBNb2RlbHMsXG4gICAgdHlwZSBCZXRhTW9kZWxJbmZvIGFzIEJldGFNb2RlbEluZm8sXG4gICAgQmV0YU1vZGVsSW5mb3NQYWdlIGFzIEJldGFNb2RlbEluZm9zUGFnZSxcbiAgICB0eXBlIE1vZGVsTGlzdFBhcmFtcyBhcyBNb2RlbExpc3RQYXJhbXMsXG4gIH07XG5cbiAgZXhwb3J0IHtcbiAgICBNZXNzYWdlcyBhcyBNZXNzYWdlcyxcbiAgICB0eXBlIEJldGFCYXNlNjRQREZCbG9jayBhcyBCZXRhQmFzZTY0UERGQmxvY2ssXG4gICAgdHlwZSBCZXRhQmFzZTY0UERGU291cmNlIGFzIEJldGFCYXNlNjRQREZTb3VyY2UsXG4gICAgdHlwZSBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIGFzIEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwsXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb24gYXMgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0gYXMgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbiBhcyBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbixcbiAgICB0eXBlIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0gYXMgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSxcbiAgICB0eXBlIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvbiBhcyBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb24sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbSBhcyBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbSxcbiAgICB0eXBlIEJldGFDaXRhdGlvbnNDb25maWdQYXJhbSBhcyBCZXRhQ2l0YXRpb25zQ29uZmlnUGFyYW0sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25zRGVsdGEgYXMgQmV0YUNpdGF0aW9uc0RlbHRhLFxuICAgIHR5cGUgQmV0YUNvbnRlbnRCbG9jayBhcyBCZXRhQ29udGVudEJsb2NrLFxuICAgIHR5cGUgQmV0YUNvbnRlbnRCbG9ja1BhcmFtIGFzIEJldGFDb250ZW50QmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2tTb3VyY2UgYXMgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZSxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2tTb3VyY2VDb250ZW50IGFzIEJldGFDb250ZW50QmxvY2tTb3VyY2VDb250ZW50LFxuICAgIHR5cGUgQmV0YUltYWdlQmxvY2tQYXJhbSBhcyBCZXRhSW1hZ2VCbG9ja1BhcmFtLFxuICAgIHR5cGUgQmV0YUlucHV0SlNPTkRlbHRhIGFzIEJldGFJbnB1dEpTT05EZWx0YSxcbiAgICB0eXBlIEJldGFNZXNzYWdlIGFzIEJldGFNZXNzYWdlLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VEZWx0YVVzYWdlIGFzIEJldGFNZXNzYWdlRGVsdGFVc2FnZSxcbiAgICB0eXBlIEJldGFNZXNzYWdlUGFyYW0gYXMgQmV0YU1lc3NhZ2VQYXJhbSxcbiAgICB0eXBlIEJldGFNZXNzYWdlVG9rZW5zQ291bnQgYXMgQmV0YU1lc3NhZ2VUb2tlbnNDb3VudCxcbiAgICB0eXBlIEJldGFNZXRhZGF0YSBhcyBCZXRhTWV0YWRhdGEsXG4gICAgdHlwZSBCZXRhUGxhaW5UZXh0U291cmNlIGFzIEJldGFQbGFpblRleHRTb3VyY2UsXG4gICAgdHlwZSBCZXRhUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCBhcyBCZXRhUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgICB0eXBlIEJldGFSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50IGFzIEJldGFSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCBhcyBCZXRhUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd01lc3NhZ2VEZWx0YUV2ZW50IGFzIEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudCxcbiAgICB0eXBlIEJldGFSYXdNZXNzYWdlU3RhcnRFdmVudCBhcyBCZXRhUmF3TWVzc2FnZVN0YXJ0RXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3TWVzc2FnZVN0b3BFdmVudCBhcyBCZXRhUmF3TWVzc2FnZVN0b3BFdmVudCxcbiAgICB0eXBlIEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQgYXMgQmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudCxcbiAgICB0eXBlIEJldGFUZXh0QmxvY2sgYXMgQmV0YVRleHRCbG9jayxcbiAgICB0eXBlIEJldGFUZXh0QmxvY2tQYXJhbSBhcyBCZXRhVGV4dEJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhVGV4dENpdGF0aW9uIGFzIEJldGFUZXh0Q2l0YXRpb24sXG4gICAgdHlwZSBCZXRhVGV4dENpdGF0aW9uUGFyYW0gYXMgQmV0YVRleHRDaXRhdGlvblBhcmFtLFxuICAgIHR5cGUgQmV0YVRleHREZWx0YSBhcyBCZXRhVGV4dERlbHRhLFxuICAgIHR5cGUgQmV0YVRvb2wgYXMgQmV0YVRvb2wsXG4gICAgdHlwZSBCZXRhVG9vbEJhc2gyMDI0MTAyMiBhcyBCZXRhVG9vbEJhc2gyMDI0MTAyMixcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlIGFzIEJldGFUb29sQ2hvaWNlLFxuICAgIHR5cGUgQmV0YVRvb2xDaG9pY2VBbnkgYXMgQmV0YVRvb2xDaG9pY2VBbnksXG4gICAgdHlwZSBCZXRhVG9vbENob2ljZUF1dG8gYXMgQmV0YVRvb2xDaG9pY2VBdXRvLFxuICAgIHR5cGUgQmV0YVRvb2xDaG9pY2VUb29sIGFzIEJldGFUb29sQ2hvaWNlVG9vbCxcbiAgICB0eXBlIEJldGFUb29sQ29tcHV0ZXJVc2UyMDI0MTAyMiBhcyBCZXRhVG9vbENvbXB1dGVyVXNlMjAyNDEwMjIsXG4gICAgdHlwZSBCZXRhVG9vbFJlc3VsdEJsb2NrUGFyYW0gYXMgQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtLFxuICAgIHR5cGUgQmV0YVRvb2xUZXh0RWRpdG9yMjAyNDEwMjIgYXMgQmV0YVRvb2xUZXh0RWRpdG9yMjAyNDEwMjIsXG4gICAgdHlwZSBCZXRhVG9vbFVuaW9uIGFzIEJldGFUb29sVW5pb24sXG4gICAgdHlwZSBCZXRhVG9vbFVzZUJsb2NrIGFzIEJldGFUb29sVXNlQmxvY2ssXG4gICAgdHlwZSBCZXRhVG9vbFVzZUJsb2NrUGFyYW0gYXMgQmV0YVRvb2xVc2VCbG9ja1BhcmFtLFxuICAgIHR5cGUgQmV0YVVzYWdlIGFzIEJldGFVc2FnZSxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICB0eXBlIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyBhcyBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMsXG4gIH07XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCB7IEFQSVByb21pc2UgfSBmcm9tIFwiLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29tcGxldGlvbnNBUEkgZnJvbSBcIi4vY29tcGxldGlvbnMuanNcIjtcbmltcG9ydCAqIGFzIE1lc3NhZ2VzQVBJIGZyb20gXCIuL21lc3NhZ2VzL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tIFwiLi4vc3RyZWFtaW5nLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBDb21wbGV0aW9ucyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIFtMZWdhY3ldIENyZWF0ZSBhIFRleHQgQ29tcGxldGlvbi5cbiAgICpcbiAgICogVGhlIFRleHQgQ29tcGxldGlvbnMgQVBJIGlzIGEgbGVnYWN5IEFQSS4gV2UgcmVjb21tZW5kIHVzaW5nIHRoZVxuICAgKiBbTWVzc2FnZXMgQVBJXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMpIGdvaW5nIGZvcndhcmQuXG4gICAqXG4gICAqIEZ1dHVyZSBtb2RlbHMgYW5kIGZlYXR1cmVzIHdpbGwgbm90IGJlIGNvbXBhdGlibGUgd2l0aCBUZXh0IENvbXBsZXRpb25zLiBTZWUgb3VyXG4gICAqIFttaWdyYXRpb24gZ3VpZGVdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9taWdyYXRpbmctZnJvbS10ZXh0LWNvbXBsZXRpb25zLXRvLW1lc3NhZ2VzKVxuICAgKiBmb3IgZ3VpZGFuY2UgaW4gbWlncmF0aW5nIGZyb20gVGV4dCBDb21wbGV0aW9ucyB0byBNZXNzYWdlcy5cbiAgICovXG4gIGNyZWF0ZShib2R5OiBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IEFQSVByb21pc2U8Q29tcGxldGlvbj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxDb21wbGV0aW9uPj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08Q29tcGxldGlvbj4gfCBDb21wbGV0aW9uPjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8Q29tcGxldGlvbj4gfCBBUElQcm9taXNlPFN0cmVhbTxDb21wbGV0aW9uPj4ge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQucG9zdCgnL3YxL2NvbXBsZXRlJywge1xuICAgICAgYm9keSxcbiAgICAgIHRpbWVvdXQ6ICh0aGlzLl9jbGllbnQgYXMgYW55KS5fb3B0aW9ucy50aW1lb3V0ID8/IDYwMDAwMCxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBzdHJlYW06IGJvZHkuc3RyZWFtID8/IGZhbHNlLFxuICAgIH0pIGFzIEFQSVByb21pc2U8Q29tcGxldGlvbj4gfCBBUElQcm9taXNlPFN0cmVhbTxDb21wbGV0aW9uPj47XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uIHtcbiAgLyoqXG4gICAqIFVuaXF1ZSBvYmplY3QgaWRlbnRpZmllci5cbiAgICpcbiAgICogVGhlIGZvcm1hdCBhbmQgbGVuZ3RoIG9mIElEcyBtYXkgY2hhbmdlIG92ZXIgdGltZS5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSByZXN1bHRpbmcgY29tcGxldGlvbiB1cCB0byBhbmQgZXhjbHVkaW5nIHRoZSBzdG9wIHNlcXVlbmNlcy5cbiAgICovXG4gIGNvbXBsZXRpb246IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gICAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gICAqL1xuICBtb2RlbDogTWVzc2FnZXNBUEkuTW9kZWw7XG5cbiAgLyoqXG4gICAqIFRoZSByZWFzb24gdGhhdCB3ZSBzdG9wcGVkLlxuICAgKlxuICAgKiBUaGlzIG1heSBiZSBvbmUgdGhlIGZvbGxvd2luZyB2YWx1ZXM6XG4gICAqXG4gICAqIC0gYFwic3RvcF9zZXF1ZW5jZVwiYDogd2UgcmVhY2hlZCBhIHN0b3Agc2VxdWVuY2UgXHUyMDE0IGVpdGhlciBwcm92aWRlZCBieSB5b3UgdmlhIHRoZVxuICAgKiAgIGBzdG9wX3NlcXVlbmNlc2AgcGFyYW1ldGVyLCBvciBhIHN0b3Agc2VxdWVuY2UgYnVpbHQgaW50byB0aGUgbW9kZWxcbiAgICogLSBgXCJtYXhfdG9rZW5zXCJgOiB3ZSBleGNlZWRlZCBgbWF4X3Rva2Vuc190b19zYW1wbGVgIG9yIHRoZSBtb2RlbCdzIG1heGltdW1cbiAgICovXG4gIHN0b3BfcmVhc29uOiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBPYmplY3QgdHlwZS5cbiAgICpcbiAgICogRm9yIFRleHQgQ29tcGxldGlvbnMsIHRoaXMgaXMgYWx3YXlzIGBcImNvbXBsZXRpb25cImAuXG4gICAqL1xuICB0eXBlOiAnY29tcGxldGlvbic7XG59XG5cbmV4cG9ydCB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXMgPSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIHwgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZztcblxuZXhwb3J0IGludGVyZmFjZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGdlbmVyYXRlIGJlZm9yZSBzdG9wcGluZy5cbiAgICpcbiAgICogTm90ZSB0aGF0IG91ciBtb2RlbHMgbWF5IHN0b3AgX2JlZm9yZV8gcmVhY2hpbmcgdGhpcyBtYXhpbXVtLiBUaGlzIHBhcmFtZXRlclxuICAgKiBvbmx5IHNwZWNpZmllcyB0aGUgYWJzb2x1dGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGdlbmVyYXRlLlxuICAgKi9cbiAgbWF4X3Rva2Vuc190b19zYW1wbGU6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gICAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gICAqL1xuICBtb2RlbDogTWVzc2FnZXNBUEkuTW9kZWw7XG5cbiAgLyoqXG4gICAqIFRoZSBwcm9tcHQgdGhhdCB5b3Ugd2FudCBDbGF1ZGUgdG8gY29tcGxldGUuXG4gICAqXG4gICAqIEZvciBwcm9wZXIgcmVzcG9uc2UgZ2VuZXJhdGlvbiB5b3Ugd2lsbCBuZWVkIHRvIGZvcm1hdCB5b3VyIHByb21wdCB1c2luZ1xuICAgKiBhbHRlcm5hdGluZyBgXFxuXFxuSHVtYW46YCBhbmQgYFxcblxcbkFzc2lzdGFudDpgIGNvbnZlcnNhdGlvbmFsIHR1cm5zLiBGb3IgZXhhbXBsZTpcbiAgICpcbiAgICogYGBgXG4gICAqIFwiXFxuXFxuSHVtYW46IHt1c2VyUXVlc3Rpb259XFxuXFxuQXNzaXN0YW50OlwiXG4gICAqIGBgYFxuICAgKlxuICAgKiBTZWUgW3Byb21wdCB2YWxpZGF0aW9uXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvcHJvbXB0LXZhbGlkYXRpb24pIGFuZFxuICAgKiBvdXIgZ3VpZGUgdG9cbiAgICogW3Byb21wdCBkZXNpZ25dKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvaW50cm8tdG8tcHJvbXB0aW5nKSBmb3IgbW9yZVxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgcHJvbXB0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBkZXNjcmliaW5nIG1ldGFkYXRhIGFib3V0IHRoZSByZXF1ZXN0LlxuICAgKi9cbiAgbWV0YWRhdGE/OiBNZXNzYWdlc0FQSS5NZXRhZGF0YTtcblxuICAvKipcbiAgICogU2VxdWVuY2VzIHRoYXQgd2lsbCBjYXVzZSB0aGUgbW9kZWwgdG8gc3RvcCBnZW5lcmF0aW5nLlxuICAgKlxuICAgKiBPdXIgbW9kZWxzIHN0b3Agb24gYFwiXFxuXFxuSHVtYW46XCJgLCBhbmQgbWF5IGluY2x1ZGUgYWRkaXRpb25hbCBidWlsdC1pbiBzdG9wXG4gICAqIHNlcXVlbmNlcyBpbiB0aGUgZnV0dXJlLiBCeSBwcm92aWRpbmcgdGhlIHN0b3Bfc2VxdWVuY2VzIHBhcmFtZXRlciwgeW91IG1heVxuICAgKiBpbmNsdWRlIGFkZGl0aW9uYWwgc3RyaW5ncyB0aGF0IHdpbGwgY2F1c2UgdGhlIG1vZGVsIHRvIHN0b3AgZ2VuZXJhdGluZy5cbiAgICovXG4gIHN0b3Bfc2VxdWVuY2VzPzogQXJyYXk8c3RyaW5nPjtcblxuICAvKipcbiAgICogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnQgZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL3N0cmVhbWluZykgZm9yIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW0/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBBbW91bnQgb2YgcmFuZG9tbmVzcyBpbmplY3RlZCBpbnRvIHRoZSByZXNwb25zZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYDEuMGAuIFJhbmdlcyBmcm9tIGAwLjBgIHRvIGAxLjBgLiBVc2UgYHRlbXBlcmF0dXJlYCBjbG9zZXIgdG8gYDAuMGBcbiAgICogZm9yIGFuYWx5dGljYWwgLyBtdWx0aXBsZSBjaG9pY2UsIGFuZCBjbG9zZXIgdG8gYDEuMGAgZm9yIGNyZWF0aXZlIGFuZFxuICAgKiBnZW5lcmF0aXZlIHRhc2tzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgZXZlbiB3aXRoIGB0ZW1wZXJhdHVyZWAgb2YgYDAuMGAsIHRoZSByZXN1bHRzIHdpbGwgbm90IGJlIGZ1bGx5XG4gICAqIGRldGVybWluaXN0aWMuXG4gICAqL1xuICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcblxuICAvKipcbiAgICogT25seSBzYW1wbGUgZnJvbSB0aGUgdG9wIEsgb3B0aW9ucyBmb3IgZWFjaCBzdWJzZXF1ZW50IHRva2VuLlxuICAgKlxuICAgKiBVc2VkIHRvIHJlbW92ZSBcImxvbmcgdGFpbFwiIGxvdyBwcm9iYWJpbGl0eSByZXNwb25zZXMuXG4gICAqIFtMZWFybiBtb3JlIHRlY2huaWNhbCBkZXRhaWxzIGhlcmVdKGh0dHBzOi8vdG93YXJkc2RhdGFzY2llbmNlLmNvbS9ob3ctdG8tc2FtcGxlLWZyb20tbGFuZ3VhZ2UtbW9kZWxzLTY4MmJjZWI5NzI3NykuXG4gICAqXG4gICAqIFJlY29tbWVuZGVkIGZvciBhZHZhbmNlZCB1c2UgY2FzZXMgb25seS4gWW91IHVzdWFsbHkgb25seSBuZWVkIHRvIHVzZVxuICAgKiBgdGVtcGVyYXR1cmVgLlxuICAgKi9cbiAgdG9wX2s/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFVzZSBudWNsZXVzIHNhbXBsaW5nLlxuICAgKlxuICAgKiBJbiBudWNsZXVzIHNhbXBsaW5nLCB3ZSBjb21wdXRlIHRoZSBjdW11bGF0aXZlIGRpc3RyaWJ1dGlvbiBvdmVyIGFsbCB0aGUgb3B0aW9uc1xuICAgKiBmb3IgZWFjaCBzdWJzZXF1ZW50IHRva2VuIGluIGRlY3JlYXNpbmcgcHJvYmFiaWxpdHkgb3JkZXIgYW5kIGN1dCBpdCBvZmYgb25jZSBpdFxuICAgKiByZWFjaGVzIGEgcGFydGljdWxhciBwcm9iYWJpbGl0eSBzcGVjaWZpZWQgYnkgYHRvcF9wYC4gWW91IHNob3VsZCBlaXRoZXIgYWx0ZXJcbiAgICogYHRlbXBlcmF0dXJlYCBvciBgdG9wX3BgLCBidXQgbm90IGJvdGguXG4gICAqXG4gICAqIFJlY29tbWVuZGVkIGZvciBhZHZhbmNlZCB1c2UgY2FzZXMgb25seS4gWW91IHVzdWFsbHkgb25seSBuZWVkIHRvIHVzZVxuICAgKiBgdGVtcGVyYXR1cmVgLlxuICAgKi9cbiAgdG9wX3A/OiBudW1iZXI7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCB1c2UgYEFudGhyb3BpYy5NZXNzYWdlcy5NZXRhZGF0YWAgaW5zdGVhZFxuICAgKi9cbiAgZXhwb3J0IHR5cGUgTWV0YWRhdGEgPSBNZXNzYWdlc0FQSS5NZXRhZGF0YTtcblxuICBleHBvcnQgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gQ29tcGxldGlvbnNBUEkuQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgZXhwb3J0IHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyA9IENvbXBsZXRpb25zQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBleHRlbmRzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50IGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9zdHJlYW1pbmcpIGZvciBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtPzogZmFsc2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyBleHRlbmRzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50IGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9zdHJlYW1pbmcpIGZvciBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtOiB0cnVlO1xufVxuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgQ29tcGxldGlvbnMge1xuICBleHBvcnQge1xuICAgIHR5cGUgQ29tcGxldGlvbiBhcyBDb21wbGV0aW9uLFxuICAgIHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyBhcyBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zLFxuICAgIHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBhcyBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICAgIHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyBhcyBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICB9O1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSBcIi4uLy4uL3Jlc291cmNlLmpzXCI7XG5pbXBvcnQgeyBpc1JlcXVlc3RPcHRpb25zIH0gZnJvbSBcIi4uLy4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4uLy4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIFNoYXJlZCBmcm9tIFwiLi4vc2hhcmVkLmpzXCI7XG5pbXBvcnQgKiBhcyBNZXNzYWdlc0FQSSBmcm9tIFwiLi9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHsgUGFnZSwgdHlwZSBQYWdlUGFyYW1zIH0gZnJvbSBcIi4uLy4uL3BhZ2luYXRpb24uanNcIjtcbmltcG9ydCB7IEpTT05MRGVjb2RlciB9IGZyb20gXCIuLi8uLi9pbnRlcm5hbC9kZWNvZGVycy9qc29ubC5qc1wiO1xuaW1wb3J0IHsgQW50aHJvcGljRXJyb3IgfSBmcm9tIFwiLi4vLi4vZXJyb3IuanNcIjtcblxuZXhwb3J0IGNsYXNzIEJhdGNoZXMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBTZW5kIGEgYmF0Y2ggb2YgTWVzc2FnZSBjcmVhdGlvbiByZXF1ZXN0cy5cbiAgICpcbiAgICogVGhlIE1lc3NhZ2UgQmF0Y2hlcyBBUEkgY2FuIGJlIHVzZWQgdG8gcHJvY2VzcyBtdWx0aXBsZSBNZXNzYWdlcyBBUEkgcmVxdWVzdHMgYXRcbiAgICogb25jZS4gT25jZSBhIE1lc3NhZ2UgQmF0Y2ggaXMgY3JlYXRlZCwgaXQgYmVnaW5zIHByb2Nlc3NpbmcgaW1tZWRpYXRlbHkuIEJhdGNoZXNcbiAgICogY2FuIHRha2UgdXAgdG8gMjQgaG91cnMgdG8gY29tcGxldGUuXG4gICAqL1xuICBjcmVhdGUoYm9keTogQmF0Y2hDcmVhdGVQYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPE1lc3NhZ2VCYXRjaD4ge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQucG9zdCgnL3YxL21lc3NhZ2VzL2JhdGNoZXMnLCB7IGJvZHksIC4uLm9wdGlvbnMgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBlbmRwb2ludCBpcyBpZGVtcG90ZW50IGFuZCBjYW4gYmUgdXNlZCB0byBwb2xsIGZvciBNZXNzYWdlIEJhdGNoXG4gICAqIGNvbXBsZXRpb24uIFRvIGFjY2VzcyB0aGUgcmVzdWx0cyBvZiBhIE1lc3NhZ2UgQmF0Y2gsIG1ha2UgYSByZXF1ZXN0IHRvIHRoZVxuICAgKiBgcmVzdWx0c191cmxgIGZpZWxkIGluIHRoZSByZXNwb25zZS5cbiAgICovXG4gIHJldHJpZXZlKG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPE1lc3NhZ2VCYXRjaD4ge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZ2V0KGAvdjEvbWVzc2FnZXMvYmF0Y2hlcy8ke21lc3NhZ2VCYXRjaElkfWAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3QgYWxsIE1lc3NhZ2UgQmF0Y2hlcyB3aXRoaW4gYSBXb3Jrc3BhY2UuIE1vc3QgcmVjZW50bHkgY3JlYXRlZCBiYXRjaGVzIGFyZVxuICAgKiByZXR1cm5lZCBmaXJzdC5cbiAgICovXG4gIGxpc3QoXG4gICAgcXVlcnk/OiBCYXRjaExpc3RQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8TWVzc2FnZUJhdGNoZXNQYWdlLCBNZXNzYWdlQmF0Y2g+O1xuICBsaXN0KG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5QYWdlUHJvbWlzZTxNZXNzYWdlQmF0Y2hlc1BhZ2UsIE1lc3NhZ2VCYXRjaD47XG4gIGxpc3QoXG4gICAgcXVlcnk6IEJhdGNoTGlzdFBhcmFtcyB8IENvcmUuUmVxdWVzdE9wdGlvbnMgPSB7fSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxNZXNzYWdlQmF0Y2hlc1BhZ2UsIE1lc3NhZ2VCYXRjaD4ge1xuICAgIGlmIChpc1JlcXVlc3RPcHRpb25zKHF1ZXJ5KSkge1xuICAgICAgcmV0dXJuIHRoaXMubGlzdCh7fSwgcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmdldEFQSUxpc3QoJy92MS9tZXNzYWdlcy9iYXRjaGVzJywgTWVzc2FnZUJhdGNoZXNQYWdlLCB7IHF1ZXJ5LCAuLi5vcHRpb25zIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIERlbGV0ZSBhIE1lc3NhZ2UgQmF0Y2guXG4gICAqXG4gICAqIE1lc3NhZ2UgQmF0Y2hlcyBjYW4gb25seSBiZSBkZWxldGVkIG9uY2UgdGhleSd2ZSBmaW5pc2hlZCBwcm9jZXNzaW5nLiBJZiB5b3UnZFxuICAgKiBsaWtlIHRvIGRlbGV0ZSBhbiBpbi1wcm9ncmVzcyBiYXRjaCwgeW91IG11c3QgZmlyc3QgY2FuY2VsIGl0LlxuICAgKi9cbiAgZGVsZXRlKG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPERlbGV0ZWRNZXNzYWdlQmF0Y2g+IHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmRlbGV0ZShgL3YxL21lc3NhZ2VzL2JhdGNoZXMvJHttZXNzYWdlQmF0Y2hJZH1gLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCYXRjaGVzIG1heSBiZSBjYW5jZWxlZCBhbnkgdGltZSBiZWZvcmUgcHJvY2Vzc2luZyBlbmRzLiBPbmNlIGNhbmNlbGxhdGlvbiBpc1xuICAgKiBpbml0aWF0ZWQsIHRoZSBiYXRjaCBlbnRlcnMgYSBgY2FuY2VsaW5nYCBzdGF0ZSwgYXQgd2hpY2ggdGltZSB0aGUgc3lzdGVtIG1heVxuICAgKiBjb21wbGV0ZSBhbnkgaW4tcHJvZ3Jlc3MsIG5vbi1pbnRlcnJ1cHRpYmxlIHJlcXVlc3RzIGJlZm9yZSBmaW5hbGl6aW5nXG4gICAqIGNhbmNlbGxhdGlvbi5cbiAgICpcbiAgICogVGhlIG51bWJlciBvZiBjYW5jZWxlZCByZXF1ZXN0cyBpcyBzcGVjaWZpZWQgaW4gYHJlcXVlc3RfY291bnRzYC4gVG8gZGV0ZXJtaW5lXG4gICAqIHdoaWNoIHJlcXVlc3RzIHdlcmUgY2FuY2VsZWQsIGNoZWNrIHRoZSBpbmRpdmlkdWFsIHJlc3VsdHMgd2l0aGluIHRoZSBiYXRjaC5cbiAgICogTm90ZSB0aGF0IGNhbmNlbGxhdGlvbiBtYXkgbm90IHJlc3VsdCBpbiBhbnkgY2FuY2VsZWQgcmVxdWVzdHMgaWYgdGhleSB3ZXJlXG4gICAqIG5vbi1pbnRlcnJ1cHRpYmxlLlxuICAgKi9cbiAgY2FuY2VsKG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPE1lc3NhZ2VCYXRjaD4ge1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQucG9zdChgL3YxL21lc3NhZ2VzL2JhdGNoZXMvJHttZXNzYWdlQmF0Y2hJZH0vY2FuY2VsYCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogU3RyZWFtcyB0aGUgcmVzdWx0cyBvZiBhIE1lc3NhZ2UgQmF0Y2ggYXMgYSBgLmpzb25sYCBmaWxlLlxuICAgKlxuICAgKiBFYWNoIGxpbmUgaW4gdGhlIGZpbGUgaXMgYSBKU09OIG9iamVjdCBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgYSBzaW5nbGUgcmVxdWVzdFxuICAgKiBpbiB0aGUgTWVzc2FnZSBCYXRjaC4gUmVzdWx0cyBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgaW4gdGhlIHNhbWUgb3JkZXIgYXNcbiAgICogcmVxdWVzdHMuIFVzZSB0aGUgYGN1c3RvbV9pZGAgZmllbGQgdG8gbWF0Y2ggcmVzdWx0cyB0byByZXF1ZXN0cy5cbiAgICovXG4gIGFzeW5jIHJlc3VsdHMoXG4gICAgbWVzc2FnZUJhdGNoSWQ6IHN0cmluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogUHJvbWlzZTxKU09OTERlY29kZXI8TWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlPj4ge1xuICAgIGNvbnN0IGJhdGNoID0gYXdhaXQgdGhpcy5yZXRyaWV2ZShtZXNzYWdlQmF0Y2hJZCk7XG4gICAgaWYgKCFiYXRjaC5yZXN1bHRzX3VybCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICBgTm8gYmF0Y2ggXFxgcmVzdWx0c191cmxcXGA7IEhhcyBpdCBmaW5pc2hlZCBwcm9jZXNzaW5nPyAke2JhdGNoLnByb2Nlc3Npbmdfc3RhdHVzfSAtICR7YmF0Y2guaWR9YCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudFxuICAgICAgLmdldChiYXRjaC5yZXN1bHRzX3VybCwge1xuICAgICAgICAuLi5vcHRpb25zLFxuICAgICAgICBoZWFkZXJzOiB7XG4gICAgICAgICAgQWNjZXB0OiAnYXBwbGljYXRpb24vYmluYXJ5JyxcbiAgICAgICAgICAuLi5vcHRpb25zPy5oZWFkZXJzLFxuICAgICAgICB9LFxuICAgICAgICBfX2JpbmFyeVJlc3BvbnNlOiB0cnVlLFxuICAgICAgfSlcbiAgICAgIC5fdGhlblVud3JhcCgoXywgcHJvcHMpID0+IEpTT05MRGVjb2Rlci5mcm9tUmVzcG9uc2UocHJvcHMucmVzcG9uc2UsIHByb3BzLmNvbnRyb2xsZXIpKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgTWVzc2FnZUJhdGNoZXNQYWdlIGV4dGVuZHMgUGFnZTxNZXNzYWdlQmF0Y2g+IHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgRGVsZXRlZE1lc3NhZ2VCYXRjaCB7XG4gIC8qKlxuICAgKiBJRCBvZiB0aGUgTWVzc2FnZSBCYXRjaC5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIERlbGV0ZWQgb2JqZWN0IHR5cGUuXG4gICAqXG4gICAqIEZvciBNZXNzYWdlIEJhdGNoZXMsIHRoaXMgaXMgYWx3YXlzIGBcIm1lc3NhZ2VfYmF0Y2hfZGVsZXRlZFwiYC5cbiAgICovXG4gIHR5cGU6ICdtZXNzYWdlX2JhdGNoX2RlbGV0ZWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VCYXRjaCB7XG4gIC8qKlxuICAgKiBVbmlxdWUgb2JqZWN0IGlkZW50aWZpZXIuXG4gICAqXG4gICAqIFRoZSBmb3JtYXQgYW5kIGxlbmd0aCBvZiBJRHMgbWF5IGNoYW5nZSBvdmVyIHRpbWUuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIHRoZSBNZXNzYWdlIEJhdGNoIHdhc1xuICAgKiBhcmNoaXZlZCBhbmQgaXRzIHJlc3VsdHMgYmVjYW1lIHVuYXZhaWxhYmxlLlxuICAgKi9cbiAgYXJjaGl2ZWRfYXQ6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggY2FuY2VsbGF0aW9uIHdhc1xuICAgKiBpbml0aWF0ZWQgZm9yIHRoZSBNZXNzYWdlIEJhdGNoLiBTcGVjaWZpZWQgb25seSBpZiBjYW5jZWxsYXRpb24gd2FzIGluaXRpYXRlZC5cbiAgICovXG4gIGNhbmNlbF9pbml0aWF0ZWRfYXQ6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggdGhlIE1lc3NhZ2UgQmF0Y2ggd2FzXG4gICAqIGNyZWF0ZWQuXG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggcHJvY2Vzc2luZyBmb3IgdGhlXG4gICAqIE1lc3NhZ2UgQmF0Y2ggZW5kZWQuIFNwZWNpZmllZCBvbmx5IG9uY2UgcHJvY2Vzc2luZyBlbmRzLlxuICAgKlxuICAgKiBQcm9jZXNzaW5nIGVuZHMgd2hlbiBldmVyeSByZXF1ZXN0IGluIGEgTWVzc2FnZSBCYXRjaCBoYXMgZWl0aGVyIHN1Y2NlZWRlZCxcbiAgICogZXJyb3JlZCwgY2FuY2VsZWQsIG9yIGV4cGlyZWQuXG4gICAqL1xuICBlbmRlZF9hdDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCB0aGUgTWVzc2FnZSBCYXRjaCB3aWxsXG4gICAqIGV4cGlyZSBhbmQgZW5kIHByb2Nlc3NpbmcsIHdoaWNoIGlzIDI0IGhvdXJzIGFmdGVyIGNyZWF0aW9uLlxuICAgKi9cbiAgZXhwaXJlc19hdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBQcm9jZXNzaW5nIHN0YXR1cyBvZiB0aGUgTWVzc2FnZSBCYXRjaC5cbiAgICovXG4gIHByb2Nlc3Npbmdfc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnIHwgJ2NhbmNlbGluZycgfCAnZW5kZWQnO1xuXG4gIC8qKlxuICAgKiBUYWxsaWVzIHJlcXVlc3RzIHdpdGhpbiB0aGUgTWVzc2FnZSBCYXRjaCwgY2F0ZWdvcml6ZWQgYnkgdGhlaXIgc3RhdHVzLlxuICAgKlxuICAgKiBSZXF1ZXN0cyBzdGFydCBhcyBgcHJvY2Vzc2luZ2AgYW5kIG1vdmUgdG8gb25lIG9mIHRoZSBvdGhlciBzdGF0dXNlcyBvbmx5IG9uY2VcbiAgICogcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIGJhdGNoIGVuZHMuIFRoZSBzdW0gb2YgYWxsIHZhbHVlcyBhbHdheXMgbWF0Y2hlcyB0aGVcbiAgICogdG90YWwgbnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBiYXRjaC5cbiAgICovXG4gIHJlcXVlc3RfY291bnRzOiBNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzO1xuXG4gIC8qKlxuICAgKiBVUkwgdG8gYSBgLmpzb25sYCBmaWxlIGNvbnRhaW5pbmcgdGhlIHJlc3VsdHMgb2YgdGhlIE1lc3NhZ2UgQmF0Y2ggcmVxdWVzdHMuXG4gICAqIFNwZWNpZmllZCBvbmx5IG9uY2UgcHJvY2Vzc2luZyBlbmRzLlxuICAgKlxuICAgKiBSZXN1bHRzIGluIHRoZSBmaWxlIGFyZSBub3QgZ3VhcmFudGVlZCB0byBiZSBpbiB0aGUgc2FtZSBvcmRlciBhcyByZXF1ZXN0cy4gVXNlXG4gICAqIHRoZSBgY3VzdG9tX2lkYCBmaWVsZCB0byBtYXRjaCByZXN1bHRzIHRvIHJlcXVlc3RzLlxuICAgKi9cbiAgcmVzdWx0c191cmw6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgTWVzc2FnZSBCYXRjaGVzLCB0aGlzIGlzIGFsd2F5cyBgXCJtZXNzYWdlX2JhdGNoXCJgLlxuICAgKi9cbiAgdHlwZTogJ21lc3NhZ2VfYmF0Y2gnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0IHtcbiAgdHlwZTogJ2NhbmNlbGVkJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0IHtcbiAgZXJyb3I6IFNoYXJlZC5FcnJvclJlc3BvbnNlO1xuXG4gIHR5cGU6ICdlcnJvcmVkJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0IHtcbiAgdHlwZTogJ2V4cGlyZWQnO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSBzaW5nbGUgbGluZSBpbiB0aGUgcmVzcG9uc2UgYC5qc29ubGAgZmlsZSBhbmQgZG9lcyBub3QgcmVwcmVzZW50IHRoZVxuICogcmVzcG9uc2UgYXMgYSB3aG9sZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2Uge1xuICAvKipcbiAgICogRGV2ZWxvcGVyLXByb3ZpZGVkIElEIGNyZWF0ZWQgZm9yIGVhY2ggcmVxdWVzdCBpbiBhIE1lc3NhZ2UgQmF0Y2guIFVzZWZ1bCBmb3JcbiAgICogbWF0Y2hpbmcgcmVzdWx0cyB0byByZXF1ZXN0cywgYXMgcmVzdWx0cyBtYXkgYmUgZ2l2ZW4gb3V0IG9mIHJlcXVlc3Qgb3JkZXIuXG4gICAqXG4gICAqIE11c3QgYmUgdW5pcXVlIGZvciBlYWNoIHJlcXVlc3Qgd2l0aGluIHRoZSBNZXNzYWdlIEJhdGNoLlxuICAgKi9cbiAgY3VzdG9tX2lkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFByb2Nlc3NpbmcgcmVzdWx0IGZvciB0aGlzIHJlcXVlc3QuXG4gICAqXG4gICAqIENvbnRhaW5zIGEgTWVzc2FnZSBvdXRwdXQgaWYgcHJvY2Vzc2luZyB3YXMgc3VjY2Vzc2Z1bCwgYW4gZXJyb3IgcmVzcG9uc2UgaWZcbiAgICogcHJvY2Vzc2luZyBmYWlsZWQsIG9yIHRoZSByZWFzb24gd2h5IHByb2Nlc3Npbmcgd2FzIG5vdCBhdHRlbXB0ZWQsIHN1Y2ggYXNcbiAgICogY2FuY2VsbGF0aW9uIG9yIGV4cGlyYXRpb24uXG4gICAqL1xuICByZXN1bHQ6IE1lc3NhZ2VCYXRjaFJlc3VsdDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzIHtcbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGhhdmUgYmVlbiBjYW5jZWxlZC5cbiAgICpcbiAgICogVGhpcyBpcyB6ZXJvIHVudGlsIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBNZXNzYWdlIEJhdGNoIGhhcyBlbmRlZC5cbiAgICovXG4gIGNhbmNlbGVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGVuY291bnRlcmVkIGFuIGVycm9yLlxuICAgKlxuICAgKiBUaGlzIGlzIHplcm8gdW50aWwgcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIE1lc3NhZ2UgQmF0Y2ggaGFzIGVuZGVkLlxuICAgKi9cbiAgZXJyb3JlZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIE1lc3NhZ2UgQmF0Y2ggdGhhdCBoYXZlIGV4cGlyZWQuXG4gICAqXG4gICAqIFRoaXMgaXMgemVybyB1bnRpbCBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgTWVzc2FnZSBCYXRjaCBoYXMgZW5kZWQuXG4gICAqL1xuICBleHBpcmVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGFyZSBwcm9jZXNzaW5nLlxuICAgKi9cbiAgcHJvY2Vzc2luZzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIE1lc3NhZ2UgQmF0Y2ggdGhhdCBoYXZlIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuXG4gICAqXG4gICAqIFRoaXMgaXMgemVybyB1bnRpbCBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgTWVzc2FnZSBCYXRjaCBoYXMgZW5kZWQuXG4gICAqL1xuICBzdWNjZWVkZWQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBQcm9jZXNzaW5nIHJlc3VsdCBmb3IgdGhpcyByZXF1ZXN0LlxuICpcbiAqIENvbnRhaW5zIGEgTWVzc2FnZSBvdXRwdXQgaWYgcHJvY2Vzc2luZyB3YXMgc3VjY2Vzc2Z1bCwgYW4gZXJyb3IgcmVzcG9uc2UgaWZcbiAqIHByb2Nlc3NpbmcgZmFpbGVkLCBvciB0aGUgcmVhc29uIHdoeSBwcm9jZXNzaW5nIHdhcyBub3QgYXR0ZW1wdGVkLCBzdWNoIGFzXG4gKiBjYW5jZWxsYXRpb24gb3IgZXhwaXJhdGlvbi5cbiAqL1xuZXhwb3J0IHR5cGUgTWVzc2FnZUJhdGNoUmVzdWx0ID1cbiAgfCBNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHRcbiAgfCBNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0XG4gIHwgTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHRcbiAgfCBNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0O1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCB7XG4gIG1lc3NhZ2U6IE1lc3NhZ2VzQVBJLk1lc3NhZ2U7XG5cbiAgdHlwZTogJ3N1Y2NlZWRlZCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogTGlzdCBvZiByZXF1ZXN0cyBmb3IgcHJvbXB0IGNvbXBsZXRpb24uIEVhY2ggaXMgYW4gaW5kaXZpZHVhbCByZXF1ZXN0IHRvIGNyZWF0ZVxuICAgKiBhIE1lc3NhZ2UuXG4gICAqL1xuICByZXF1ZXN0czogQXJyYXk8QmF0Y2hDcmVhdGVQYXJhbXMuUmVxdWVzdD47XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgQmF0Y2hDcmVhdGVQYXJhbXMge1xuICBleHBvcnQgaW50ZXJmYWNlIFJlcXVlc3Qge1xuICAgIC8qKlxuICAgICAqIERldmVsb3Blci1wcm92aWRlZCBJRCBjcmVhdGVkIGZvciBlYWNoIHJlcXVlc3QgaW4gYSBNZXNzYWdlIEJhdGNoLiBVc2VmdWwgZm9yXG4gICAgICogbWF0Y2hpbmcgcmVzdWx0cyB0byByZXF1ZXN0cywgYXMgcmVzdWx0cyBtYXkgYmUgZ2l2ZW4gb3V0IG9mIHJlcXVlc3Qgb3JkZXIuXG4gICAgICpcbiAgICAgKiBNdXN0IGJlIHVuaXF1ZSBmb3IgZWFjaCByZXF1ZXN0IHdpdGhpbiB0aGUgTWVzc2FnZSBCYXRjaC5cbiAgICAgKi9cbiAgICBjdXN0b21faWQ6IHN0cmluZztcblxuICAgIC8qKlxuICAgICAqIE1lc3NhZ2VzIEFQSSBjcmVhdGlvbiBwYXJhbWV0ZXJzIGZvciB0aGUgaW5kaXZpZHVhbCByZXF1ZXN0LlxuICAgICAqXG4gICAgICogU2VlIHRoZSBbTWVzc2FnZXMgQVBJIHJlZmVyZW5jZV0oL2VuL2FwaS9tZXNzYWdlcykgZm9yIGZ1bGwgZG9jdW1lbnRhdGlvbiBvblxuICAgICAqIGF2YWlsYWJsZSBwYXJhbWV0ZXJzLlxuICAgICAqL1xuICAgIHBhcmFtczogTWVzc2FnZXNBUEkuTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZztcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoTGlzdFBhcmFtcyBleHRlbmRzIFBhZ2VQYXJhbXMge31cblxuQmF0Y2hlcy5NZXNzYWdlQmF0Y2hlc1BhZ2UgPSBNZXNzYWdlQmF0Y2hlc1BhZ2U7XG5cbmV4cG9ydCBkZWNsYXJlIG5hbWVzcGFjZSBCYXRjaGVzIHtcbiAgZXhwb3J0IHtcbiAgICB0eXBlIERlbGV0ZWRNZXNzYWdlQmF0Y2ggYXMgRGVsZXRlZE1lc3NhZ2VCYXRjaCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaCBhcyBNZXNzYWdlQmF0Y2gsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCBhcyBNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQgYXMgTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQgYXMgTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSBhcyBNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzIGFzIE1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hSZXN1bHQgYXMgTWVzc2FnZUJhdGNoUmVzdWx0LFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0IGFzIE1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCxcbiAgICBNZXNzYWdlQmF0Y2hlc1BhZ2UgYXMgTWVzc2FnZUJhdGNoZXNQYWdlLFxuICAgIHR5cGUgQmF0Y2hDcmVhdGVQYXJhbXMgYXMgQmF0Y2hDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBCYXRjaExpc3RQYXJhbXMgYXMgQmF0Y2hMaXN0UGFyYW1zLFxuICB9O1xufVxuIiwgImltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4uL2NvcmUuanNcIjtcbmltcG9ydCB7IEFudGhyb3BpY0Vycm9yLCBBUElVc2VyQWJvcnRFcnJvciB9IGZyb20gXCIuLi9lcnJvci5qc1wiO1xuaW1wb3J0IHtcbiAgdHlwZSBDb250ZW50QmxvY2ssXG4gIE1lc3NhZ2VzLFxuICB0eXBlIE1lc3NhZ2UsXG4gIHR5cGUgTWVzc2FnZVN0cmVhbUV2ZW50LFxuICB0eXBlIE1lc3NhZ2VQYXJhbSxcbiAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlLFxuICB0eXBlIFRleHRCbG9jayxcbiAgdHlwZSBUZXh0Q2l0YXRpb24sXG59IGZyb20gXCIuLi9yZXNvdXJjZXMvbWVzc2FnZXMuanNcIjtcbmltcG9ydCB7IHR5cGUgUmVhZGFibGVTdHJlYW0sIHR5cGUgUmVzcG9uc2UgfSBmcm9tIFwiLi4vX3NoaW1zL2luZGV4LmpzXCI7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tIFwiLi4vc3RyZWFtaW5nLmpzXCI7XG5pbXBvcnQgeyBwYXJ0aWFsUGFyc2UgfSBmcm9tIFwiLi4vX3ZlbmRvci9wYXJ0aWFsLWpzb24tcGFyc2VyL3BhcnNlci5qc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VTdHJlYW1FdmVudHMge1xuICBjb25uZWN0OiAoKSA9PiB2b2lkO1xuICBzdHJlYW1FdmVudDogKGV2ZW50OiBNZXNzYWdlU3RyZWFtRXZlbnQsIHNuYXBzaG90OiBNZXNzYWdlKSA9PiB2b2lkO1xuICB0ZXh0OiAodGV4dERlbHRhOiBzdHJpbmcsIHRleHRTbmFwc2hvdDogc3RyaW5nKSA9PiB2b2lkO1xuICBjaXRhdGlvbjogKGNpdGF0aW9uOiBUZXh0Q2l0YXRpb24sIGNpdGF0aW9uc1NuYXBzaG90OiBUZXh0Q2l0YXRpb25bXSkgPT4gdm9pZDtcbiAgaW5wdXRKc29uOiAocGFydGlhbEpzb246IHN0cmluZywganNvblNuYXBzaG90OiB1bmtub3duKSA9PiB2b2lkO1xuICBtZXNzYWdlOiAobWVzc2FnZTogTWVzc2FnZSkgPT4gdm9pZDtcbiAgY29udGVudEJsb2NrOiAoY29udGVudDogQ29udGVudEJsb2NrKSA9PiB2b2lkO1xuICBmaW5hbE1lc3NhZ2U6IChtZXNzYWdlOiBNZXNzYWdlKSA9PiB2b2lkO1xuICBlcnJvcjogKGVycm9yOiBBbnRocm9waWNFcnJvcikgPT4gdm9pZDtcbiAgYWJvcnQ6IChlcnJvcjogQVBJVXNlckFib3J0RXJyb3IpID0+IHZvaWQ7XG4gIGVuZDogKCkgPT4gdm9pZDtcbn1cblxudHlwZSBNZXNzYWdlU3RyZWFtRXZlbnRMaXN0ZW5lcnM8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPiA9IHtcbiAgbGlzdGVuZXI6IE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdO1xuICBvbmNlPzogYm9vbGVhbjtcbn1bXTtcblxuY29uc3QgSlNPTl9CVUZfUFJPUEVSVFkgPSAnX19qc29uX2J1Zic7XG5cbmV4cG9ydCBjbGFzcyBNZXNzYWdlU3RyZWFtIGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZTxNZXNzYWdlU3RyZWFtRXZlbnQ+IHtcbiAgbWVzc2FnZXM6IE1lc3NhZ2VQYXJhbVtdID0gW107XG4gIHJlY2VpdmVkTWVzc2FnZXM6IE1lc3NhZ2VbXSA9IFtdO1xuICAjY3VycmVudE1lc3NhZ2VTbmFwc2hvdDogTWVzc2FnZSB8IHVuZGVmaW5lZDtcblxuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG5cbiAgI2Nvbm5lY3RlZFByb21pc2U6IFByb21pc2U8UmVzcG9uc2UgfCBudWxsPjtcbiAgI3Jlc29sdmVDb25uZWN0ZWRQcm9taXNlOiAocmVzcG9uc2U6IFJlc3BvbnNlIHwgbnVsbCkgPT4gdm9pZCA9ICgpID0+IHt9O1xuICAjcmVqZWN0Q29ubmVjdGVkUHJvbWlzZTogKGVycm9yOiBBbnRocm9waWNFcnJvcikgPT4gdm9pZCA9ICgpID0+IHt9O1xuXG4gICNlbmRQcm9taXNlOiBQcm9taXNlPHZvaWQ+O1xuICAjcmVzb2x2ZUVuZFByb21pc2U6ICgpID0+IHZvaWQgPSAoKSA9PiB7fTtcbiAgI3JlamVjdEVuZFByb21pc2U6IChlcnJvcjogQW50aHJvcGljRXJyb3IpID0+IHZvaWQgPSAoKSA9PiB7fTtcblxuICAjbGlzdGVuZXJzOiB7IFtFdmVudCBpbiBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzXT86IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gfSA9IHt9O1xuXG4gICNlbmRlZCA9IGZhbHNlO1xuICAjZXJyb3JlZCA9IGZhbHNlO1xuICAjYWJvcnRlZCA9IGZhbHNlO1xuICAjY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCA9IGZhbHNlO1xuICAjcmVzcG9uc2U6IFJlc3BvbnNlIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgI3JlcXVlc3RfaWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3IoKSB7XG4gICAgdGhpcy4jY29ubmVjdGVkUHJvbWlzZSA9IG5ldyBQcm9taXNlPFJlc3BvbnNlIHwgbnVsbD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy4jcmVzb2x2ZUNvbm5lY3RlZFByb21pc2UgPSByZXNvbHZlO1xuICAgICAgdGhpcy4jcmVqZWN0Q29ubmVjdGVkUHJvbWlzZSA9IHJlamVjdDtcbiAgICB9KTtcblxuICAgIHRoaXMuI2VuZFByb21pc2UgPSBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICB0aGlzLiNyZXNvbHZlRW5kUHJvbWlzZSA9IHJlc29sdmU7XG4gICAgICB0aGlzLiNyZWplY3RFbmRQcm9taXNlID0gcmVqZWN0O1xuICAgIH0pO1xuXG4gICAgLy8gRG9uJ3QgbGV0IHRoZXNlIHByb21pc2VzIGNhdXNlIHVuaGFuZGxlZCByZWplY3Rpb24gZXJyb3JzLlxuICAgIC8vIHdlIHdpbGwgbWFudWFsbHkgY2F1c2UgYW4gdW5oYW5kbGVkIHJlamVjdGlvbiBlcnJvciBsYXRlclxuICAgIC8vIGlmIHRoZSB1c2VyIGhhc24ndCByZWdpc3RlcmVkIGFueSBlcnJvciBsaXN0ZW5lciBvciBjYWxsZWRcbiAgICAvLyBhbnkgcHJvbWlzZS1yZXR1cm5pbmcgbWV0aG9kLlxuICAgIHRoaXMuI2Nvbm5lY3RlZFByb21pc2UuY2F0Y2goKCkgPT4ge30pO1xuICAgIHRoaXMuI2VuZFByb21pc2UuY2F0Y2goKCkgPT4ge30pO1xuICB9XG5cbiAgZ2V0IHJlc3BvbnNlKCk6IFJlc3BvbnNlIHwgbnVsbCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuI3Jlc3BvbnNlO1xuICB9XG5cbiAgZ2V0IHJlcXVlc3RfaWQoKTogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuI3JlcXVlc3RfaWQ7XG4gIH1cblxuICAvKipcbiAgICogUmV0dXJucyB0aGUgYE1lc3NhZ2VTdHJlYW1gIGRhdGEsIHRoZSByYXcgYFJlc3BvbnNlYCBpbnN0YW5jZSBhbmQgdGhlIElEIG9mIHRoZSByZXF1ZXN0LFxuICAgKiByZXR1cm5lZCB2aWUgdGhlIGByZXF1ZXN0LWlkYCBoZWFkZXIgd2hpY2ggaXMgdXNlZnVsIGZvciBkZWJ1Z2dpbmcgcmVxdWVzdHMgYW5kIHJlc3BvcnRpbmdcbiAgICogaXNzdWVzIHRvIEFudGhyb3BpYy5cbiAgICpcbiAgICogVGhpcyBpcyB0aGUgc2FtZSBhcyB0aGUgYEFQSVByb21pc2Uud2l0aFJlc3BvbnNlKClgIG1ldGhvZC5cbiAgICpcbiAgICogVGhpcyBtZXRob2Qgd2lsbCByYWlzZSBhbiBlcnJvciBpZiB5b3UgY3JlYXRlZCB0aGUgc3RyZWFtIHVzaW5nIGBNZXNzYWdlU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbWBcbiAgICogYXMgbm8gYFJlc3BvbnNlYCBpcyBhdmFpbGFibGUuXG4gICAqL1xuICBhc3luYyB3aXRoUmVzcG9uc2UoKTogUHJvbWlzZTx7XG4gICAgZGF0YTogTWVzc2FnZVN0cmVhbTtcbiAgICByZXNwb25zZTogUmVzcG9uc2U7XG4gICAgcmVxdWVzdF9pZDogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcbiAgfT4ge1xuICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgdGhpcy4jY29ubmVjdGVkUHJvbWlzZTtcbiAgICBpZiAoIXJlc3BvbnNlKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NvdWxkIG5vdCByZXNvbHZlIGEgYFJlc3BvbnNlYCBvYmplY3QnKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgZGF0YTogdGhpcyxcbiAgICAgIHJlc3BvbnNlLFxuICAgICAgcmVxdWVzdF9pZDogcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3JlcXVlc3QtaWQnKSxcbiAgICB9O1xuICB9XG5cbiAgLyoqXG4gICAqIEludGVuZGVkIGZvciB1c2Ugb24gdGhlIGZyb250ZW5kLCBjb25zdW1pbmcgYSBzdHJlYW0gcHJvZHVjZWQgd2l0aFxuICAgKiBgLnRvUmVhZGFibGVTdHJlYW0oKWAgb24gdGhlIGJhY2tlbmQuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBtZXNzYWdlcyBzZW50IHRvIHRoZSBtb2RlbCBkbyBub3QgYXBwZWFyIGluIGAub24oJ21lc3NhZ2UnKWBcbiAgICogaW4gdGhpcyBjb250ZXh0LlxuICAgKi9cbiAgc3RhdGljIGZyb21SZWFkYWJsZVN0cmVhbShzdHJlYW06IFJlYWRhYmxlU3RyZWFtKTogTWVzc2FnZVN0cmVhbSB7XG4gICAgY29uc3QgcnVubmVyID0gbmV3IE1lc3NhZ2VTdHJlYW0oKTtcbiAgICBydW5uZXIuX3J1bigoKSA9PiBydW5uZXIuX2Zyb21SZWFkYWJsZVN0cmVhbShzdHJlYW0pKTtcbiAgICByZXR1cm4gcnVubmVyO1xuICB9XG5cbiAgc3RhdGljIGNyZWF0ZU1lc3NhZ2UoXG4gICAgbWVzc2FnZXM6IE1lc3NhZ2VzLFxuICAgIHBhcmFtczogTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2UsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IE1lc3NhZ2VTdHJlYW0ge1xuICAgIGNvbnN0IHJ1bm5lciA9IG5ldyBNZXNzYWdlU3RyZWFtKCk7XG4gICAgZm9yIChjb25zdCBtZXNzYWdlIG9mIHBhcmFtcy5tZXNzYWdlcykge1xuICAgICAgcnVubmVyLl9hZGRNZXNzYWdlUGFyYW0obWVzc2FnZSk7XG4gICAgfVxuICAgIHJ1bm5lci5fcnVuKCgpID0+XG4gICAgICBydW5uZXIuX2NyZWF0ZU1lc3NhZ2UoXG4gICAgICAgIG1lc3NhZ2VzLFxuICAgICAgICB7IC4uLnBhcmFtcywgc3RyZWFtOiB0cnVlIH0sXG4gICAgICAgIHsgLi4ub3B0aW9ucywgaGVhZGVyczogeyAuLi5vcHRpb25zPy5oZWFkZXJzLCAnWC1TdGFpbmxlc3MtSGVscGVyLU1ldGhvZCc6ICdzdHJlYW0nIH0gfSxcbiAgICAgICksXG4gICAgKTtcbiAgICByZXR1cm4gcnVubmVyO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9ydW4oZXhlY3V0b3I6ICgpID0+IFByb21pc2U8YW55Pikge1xuICAgIGV4ZWN1dG9yKCkudGhlbigoKSA9PiB7XG4gICAgICB0aGlzLl9lbWl0RmluYWwoKTtcbiAgICAgIHRoaXMuX2VtaXQoJ2VuZCcpO1xuICAgIH0sIHRoaXMuI2hhbmRsZUVycm9yKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfYWRkTWVzc2FnZVBhcmFtKG1lc3NhZ2U6IE1lc3NhZ2VQYXJhbSkge1xuICAgIHRoaXMubWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfYWRkTWVzc2FnZShtZXNzYWdlOiBNZXNzYWdlLCBlbWl0ID0gdHJ1ZSkge1xuICAgIHRoaXMucmVjZWl2ZWRNZXNzYWdlcy5wdXNoKG1lc3NhZ2UpO1xuICAgIGlmIChlbWl0KSB7XG4gICAgICB0aGlzLl9lbWl0KCdtZXNzYWdlJywgbWVzc2FnZSk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIGFzeW5jIF9jcmVhdGVNZXNzYWdlKFxuICAgIG1lc3NhZ2VzOiBNZXNzYWdlcyxcbiAgICBwYXJhbXM6IE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHNpZ25hbCA9IG9wdGlvbnM/LnNpZ25hbDtcbiAgICBpZiAoc2lnbmFsKSB7XG4gICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT4gdGhpcy5jb250cm9sbGVyLmFib3J0KCkpO1xuICAgIH1cbiAgICB0aGlzLiNiZWdpblJlcXVlc3QoKTtcbiAgICBjb25zdCB7IHJlc3BvbnNlLCBkYXRhOiBzdHJlYW0gfSA9IGF3YWl0IG1lc3NhZ2VzXG4gICAgICAuY3JlYXRlKHsgLi4ucGFyYW1zLCBzdHJlYW06IHRydWUgfSwgeyAuLi5vcHRpb25zLCBzaWduYWw6IHRoaXMuY29udHJvbGxlci5zaWduYWwgfSlcbiAgICAgIC53aXRoUmVzcG9uc2UoKTtcbiAgICB0aGlzLl9jb25uZWN0ZWQocmVzcG9uc2UpO1xuICAgIGZvciBhd2FpdCAoY29uc3QgZXZlbnQgb2Ygc3RyZWFtKSB7XG4gICAgICB0aGlzLiNhZGRTdHJlYW1FdmVudChldmVudCk7XG4gICAgfVxuICAgIGlmIChzdHJlYW0uY29udHJvbGxlci5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgIH1cbiAgICB0aGlzLiNlbmRSZXF1ZXN0KCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2Nvbm5lY3RlZChyZXNwb25zZTogUmVzcG9uc2UgfCBudWxsKSB7XG4gICAgaWYgKHRoaXMuZW5kZWQpIHJldHVybjtcbiAgICB0aGlzLiNyZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgIHRoaXMuI3JlcXVlc3RfaWQgPSByZXNwb25zZT8uaGVhZGVycy5nZXQoJ3JlcXVlc3QtaWQnKTtcbiAgICB0aGlzLiNyZXNvbHZlQ29ubmVjdGVkUHJvbWlzZShyZXNwb25zZSk7XG4gICAgdGhpcy5fZW1pdCgnY29ubmVjdCcpO1xuICB9XG5cbiAgZ2V0IGVuZGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLiNlbmRlZDtcbiAgfVxuXG4gIGdldCBlcnJvcmVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLiNlcnJvcmVkO1xuICB9XG5cbiAgZ2V0IGFib3J0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2Fib3J0ZWQ7XG4gIH1cblxuICBhYm9ydCgpIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHRoZSBsaXN0ZW5lciBmdW5jdGlvbiB0byB0aGUgZW5kIG9mIHRoZSBsaXN0ZW5lcnMgYXJyYXkgZm9yIHRoZSBldmVudC5cbiAgICogTm8gY2hlY2tzIGFyZSBtYWRlIHRvIHNlZSBpZiB0aGUgbGlzdGVuZXIgaGFzIGFscmVhZHkgYmVlbiBhZGRlZC4gTXVsdGlwbGUgY2FsbHMgcGFzc2luZ1xuICAgKiB0aGUgc2FtZSBjb21iaW5hdGlvbiBvZiBldmVudCBhbmQgbGlzdGVuZXIgd2lsbCByZXN1bHQgaW4gdGhlIGxpc3RlbmVyIGJlaW5nIGFkZGVkLCBhbmRcbiAgICogY2FsbGVkLCBtdWx0aXBsZSB0aW1lcy5cbiAgICogQHJldHVybnMgdGhpcyBNZXNzYWdlU3RyZWFtLCBzbyB0aGF0IGNhbGxzIGNhbiBiZSBjaGFpbmVkXG4gICAqL1xuICBvbjxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+KGV2ZW50OiBFdmVudCwgbGlzdGVuZXI6IE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdKTogdGhpcyB7XG4gICAgY29uc3QgbGlzdGVuZXJzOiBNZXNzYWdlU3RyZWFtRXZlbnRMaXN0ZW5lcnM8RXZlbnQ+ID1cbiAgICAgIHRoaXMuI2xpc3RlbmVyc1tldmVudF0gfHwgKHRoaXMuI2xpc3RlbmVyc1tldmVudF0gPSBbXSk7XG4gICAgbGlzdGVuZXJzLnB1c2goeyBsaXN0ZW5lciB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgbGlzdGVuZXIgZnJvbSB0aGUgbGlzdGVuZXIgYXJyYXkgZm9yIHRoZSBldmVudC5cbiAgICogb2ZmKCkgd2lsbCByZW1vdmUsIGF0IG1vc3QsIG9uZSBpbnN0YW5jZSBvZiBhIGxpc3RlbmVyIGZyb20gdGhlIGxpc3RlbmVyIGFycmF5LiBJZiBhbnkgc2luZ2xlXG4gICAqIGxpc3RlbmVyIGhhcyBiZWVuIGFkZGVkIG11bHRpcGxlIHRpbWVzIHRvIHRoZSBsaXN0ZW5lciBhcnJheSBmb3IgdGhlIHNwZWNpZmllZCBldmVudCwgdGhlblxuICAgKiBvZmYoKSBtdXN0IGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyB0byByZW1vdmUgZWFjaCBpbnN0YW5jZS5cbiAgICogQHJldHVybnMgdGhpcyBNZXNzYWdlU3RyZWFtLCBzbyB0aGF0IGNhbGxzIGNhbiBiZSBjaGFpbmVkXG4gICAqL1xuICBvZmY8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihldmVudDogRXZlbnQsIGxpc3RlbmVyOiBNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XSk6IHRoaXMge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuI2xpc3RlbmVyc1tldmVudF07XG4gICAgaWYgKCFsaXN0ZW5lcnMpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmZpbmRJbmRleCgobCkgPT4gbC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpO1xuICAgIGlmIChpbmRleCA+PSAwKSBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgb25lLXRpbWUgbGlzdGVuZXIgZnVuY3Rpb24gZm9yIHRoZSBldmVudC4gVGhlIG5leHQgdGltZSB0aGUgZXZlbnQgaXMgdHJpZ2dlcmVkLFxuICAgKiB0aGlzIGxpc3RlbmVyIGlzIHJlbW92ZWQgYW5kIHRoZW4gaW52b2tlZC5cbiAgICogQHJldHVybnMgdGhpcyBNZXNzYWdlU3RyZWFtLCBzbyB0aGF0IGNhbGxzIGNhbiBiZSBjaGFpbmVkXG4gICAqL1xuICBvbmNlPEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oZXZlbnQ6IEV2ZW50LCBsaXN0ZW5lcjogTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0pOiB0aGlzIHtcbiAgICBjb25zdCBsaXN0ZW5lcnM6IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gPVxuICAgICAgdGhpcy4jbGlzdGVuZXJzW2V2ZW50XSB8fCAodGhpcy4jbGlzdGVuZXJzW2V2ZW50XSA9IFtdKTtcbiAgICBsaXN0ZW5lcnMucHVzaCh7IGxpc3RlbmVyLCBvbmNlOiB0cnVlIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgc2ltaWxhciB0byBgLm9uY2UoKWAsIGJ1dCByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRoZSBuZXh0IHRpbWVcbiAgICogdGhlIGV2ZW50IGlzIHRyaWdnZXJlZCwgaW5zdGVhZCBvZiBjYWxsaW5nIGEgbGlzdGVuZXIgY2FsbGJhY2suXG4gICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRoZSBuZXh0IHRpbWUgZ2l2ZW4gZXZlbnQgaXMgdHJpZ2dlcmVkLFxuICAgKiBvciByZWplY3RzIGlmIGFuIGVycm9yIGlzIGVtaXR0ZWQuICAoSWYgeW91IHJlcXVlc3QgdGhlICdlcnJvcicgZXZlbnQsXG4gICAqIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZXJyb3IpLlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKlxuICAgKiAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBzdHJlYW0uZW1pdHRlZCgnbWVzc2FnZScpIC8vIHJlamVjdHMgaWYgdGhlIHN0cmVhbSBlcnJvcnNcbiAgICovXG4gIGVtaXR0ZWQ8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihcbiAgICBldmVudDogRXZlbnQsXG4gICk6IFByb21pc2U8XG4gICAgUGFyYW1ldGVyczxNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XT4gZXh0ZW5kcyBbaW5mZXIgUGFyYW1dID8gUGFyYW1cbiAgICA6IFBhcmFtZXRlcnM8TWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+IGV4dGVuZHMgW10gPyB2b2lkXG4gICAgOiBQYXJhbWV0ZXJzPE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdPlxuICA+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCA9IHRydWU7XG4gICAgICBpZiAoZXZlbnQgIT09ICdlcnJvcicpIHRoaXMub25jZSgnZXJyb3InLCByZWplY3QpO1xuICAgICAgdGhpcy5vbmNlKGV2ZW50LCByZXNvbHZlIGFzIGFueSk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkb25lKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgPSB0cnVlO1xuICAgIGF3YWl0IHRoaXMuI2VuZFByb21pc2U7XG4gIH1cblxuICBnZXQgY3VycmVudE1lc3NhZ2UoKTogTWVzc2FnZSB8IHVuZGVmaW5lZCB7XG4gICAgcmV0dXJuIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3Q7XG4gIH1cblxuICAjZ2V0RmluYWxNZXNzYWdlKCk6IE1lc3NhZ2Uge1xuICAgIGlmICh0aGlzLnJlY2VpdmVkTWVzc2FnZXMubGVuZ3RoID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoJ3N0cmVhbSBlbmRlZCB3aXRob3V0IHByb2R1Y2luZyBhIE1lc3NhZ2Ugd2l0aCByb2xlPWFzc2lzdGFudCcpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmF0KC0xKSE7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgdGhlIGZpbmFsIGFzc2lzdGFudCBNZXNzYWdlIHJlc3BvbnNlLFxuICAgKiBvciByZWplY3RzIGlmIGFuIGVycm9yIG9jY3VycmVkIG9yIHRoZSBzdHJlYW0gZW5kZWQgcHJlbWF0dXJlbHkgd2l0aG91dCBwcm9kdWNpbmcgYSBNZXNzYWdlLlxuICAgKi9cbiAgYXN5bmMgZmluYWxNZXNzYWdlKCk6IFByb21pc2U8TWVzc2FnZT4ge1xuICAgIGF3YWl0IHRoaXMuZG9uZSgpO1xuICAgIHJldHVybiB0aGlzLiNnZXRGaW5hbE1lc3NhZ2UoKTtcbiAgfVxuXG4gICNnZXRGaW5hbFRleHQoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKCdzdHJlYW0gZW5kZWQgd2l0aG91dCBwcm9kdWNpbmcgYSBNZXNzYWdlIHdpdGggcm9sZT1hc3Npc3RhbnQnKTtcbiAgICB9XG4gICAgY29uc3QgdGV4dEJsb2NrcyA9IHRoaXMucmVjZWl2ZWRNZXNzYWdlc1xuICAgICAgLmF0KC0xKSFcbiAgICAgIC5jb250ZW50LmZpbHRlcigoYmxvY2spOiBibG9jayBpcyBUZXh0QmxvY2sgPT4gYmxvY2sudHlwZSA9PT0gJ3RleHQnKVxuICAgICAgLm1hcCgoYmxvY2spID0+IGJsb2NrLnRleHQpO1xuICAgIGlmICh0ZXh0QmxvY2tzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKCdzdHJlYW0gZW5kZWQgd2l0aG91dCBwcm9kdWNpbmcgYSBjb250ZW50IGJsb2NrIHdpdGggdHlwZT10ZXh0Jyk7XG4gICAgfVxuICAgIHJldHVybiB0ZXh0QmxvY2tzLmpvaW4oJyAnKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSB0aGUgZmluYWwgYXNzaXN0YW50IE1lc3NhZ2UncyB0ZXh0IHJlc3BvbnNlLCBjb25jYXRlbmF0ZWRcbiAgICogdG9nZXRoZXIgaWYgdGhlcmUgYXJlIG1vcmUgdGhhbiBvbmUgdGV4dCBibG9ja3MuXG4gICAqIFJlamVjdHMgaWYgYW4gZXJyb3Igb2NjdXJyZWQgb3IgdGhlIHN0cmVhbSBlbmRlZCBwcmVtYXR1cmVseSB3aXRob3V0IHByb2R1Y2luZyBhIE1lc3NhZ2UuXG4gICAqL1xuICBhc3luYyBmaW5hbFRleHQoKTogUHJvbWlzZTxzdHJpbmc+IHtcbiAgICBhd2FpdCB0aGlzLmRvbmUoKTtcbiAgICByZXR1cm4gdGhpcy4jZ2V0RmluYWxUZXh0KCk7XG4gIH1cblxuICAjaGFuZGxlRXJyb3IgPSAoZXJyb3I6IHVua25vd24pID0+IHtcbiAgICB0aGlzLiNlcnJvcmVkID0gdHJ1ZTtcbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBFcnJvciAmJiBlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcbiAgICAgIGVycm9yID0gbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEFQSVVzZXJBYm9ydEVycm9yKSB7XG4gICAgICB0aGlzLiNhYm9ydGVkID0gdHJ1ZTtcbiAgICAgIHJldHVybiB0aGlzLl9lbWl0KCdhYm9ydCcsIGVycm9yKTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgQW50aHJvcGljRXJyb3IpIHtcbiAgICAgIHJldHVybiB0aGlzLl9lbWl0KCdlcnJvcicsIGVycm9yKTtcbiAgICB9XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcbiAgICAgIGNvbnN0IGFudGhyb3BpY0Vycm9yOiBBbnRocm9waWNFcnJvciA9IG5ldyBBbnRocm9waWNFcnJvcihlcnJvci5tZXNzYWdlKTtcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGFudGhyb3BpY0Vycm9yLmNhdXNlID0gZXJyb3I7XG4gICAgICByZXR1cm4gdGhpcy5fZW1pdCgnZXJyb3InLCBhbnRocm9waWNFcnJvcik7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9lbWl0KCdlcnJvcicsIG5ldyBBbnRocm9waWNFcnJvcihTdHJpbmcoZXJyb3IpKSk7XG4gIH07XG5cbiAgcHJvdGVjdGVkIF9lbWl0PEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oXG4gICAgZXZlbnQ6IEV2ZW50LFxuICAgIC4uLmFyZ3M6IFBhcmFtZXRlcnM8TWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+XG4gICkge1xuICAgIC8vIG1ha2Ugc3VyZSB3ZSBkb24ndCBlbWl0IGFueSBNZXNzYWdlU3RyZWFtRXZlbnRzIGFmdGVyIGVuZFxuICAgIGlmICh0aGlzLiNlbmRlZCkgcmV0dXJuO1xuXG4gICAgaWYgKGV2ZW50ID09PSAnZW5kJykge1xuICAgICAgdGhpcy4jZW5kZWQgPSB0cnVlO1xuICAgICAgdGhpcy4jcmVzb2x2ZUVuZFByb21pc2UoKTtcbiAgICB9XG5cbiAgICBjb25zdCBsaXN0ZW5lcnM6IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gfCB1bmRlZmluZWQgPSB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdO1xuICAgIGlmIChsaXN0ZW5lcnMpIHtcbiAgICAgIHRoaXMuI2xpc3RlbmVyc1tldmVudF0gPSBsaXN0ZW5lcnMuZmlsdGVyKChsKSA9PiAhbC5vbmNlKSBhcyBhbnk7XG4gICAgICBsaXN0ZW5lcnMuZm9yRWFjaCgoeyBsaXN0ZW5lciB9OiBhbnkpID0+IGxpc3RlbmVyKC4uLmFyZ3MpKTtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQgPT09ICdhYm9ydCcpIHtcbiAgICAgIGNvbnN0IGVycm9yID0gYXJnc1swXSBhcyBBUElVc2VyQWJvcnRFcnJvcjtcbiAgICAgIGlmICghdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCAmJiAhbGlzdGVuZXJzPy5sZW5ndGgpIHtcbiAgICAgICAgUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgICAgdGhpcy4jcmVqZWN0Q29ubmVjdGVkUHJvbWlzZShlcnJvcik7XG4gICAgICB0aGlzLiNyZWplY3RFbmRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuX2VtaXQoJ2VuZCcpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGlmIChldmVudCA9PT0gJ2Vycm9yJykge1xuICAgICAgLy8gTk9URTogX2VtaXQoJ2Vycm9yJywgZXJyb3IpIHNob3VsZCBvbmx5IGJlIGNhbGxlZCBmcm9tICNoYW5kbGVFcnJvcigpLlxuXG4gICAgICBjb25zdCBlcnJvciA9IGFyZ3NbMF0gYXMgQW50aHJvcGljRXJyb3I7XG4gICAgICBpZiAoIXRoaXMuI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgJiYgIWxpc3RlbmVycz8ubGVuZ3RoKSB7XG4gICAgICAgIC8vIFRyaWdnZXIgYW4gdW5oYW5kbGVkIHJlamVjdGlvbiBpZiB0aGUgdXNlciBoYXNuJ3QgcmVnaXN0ZXJlZCBhbnkgZXJyb3IgaGFuZGxlcnMuXG4gICAgICAgIC8vIElmIHlvdSBhcmUgc2VlaW5nIHN0YWNrIHRyYWNlcyBoZXJlLCBtYWtlIHN1cmUgdG8gaGFuZGxlIGVycm9ycyB2aWEgZWl0aGVyOlxuICAgICAgICAvLyAtIHJ1bm5lci5vbignZXJyb3InLCAoKSA9PiAuLi4pXG4gICAgICAgIC8vIC0gYXdhaXQgcnVubmVyLmRvbmUoKVxuICAgICAgICAvLyAtIGF3YWl0IHJ1bm5lci5maW5hbC4uLigpXG4gICAgICAgIC8vIC0gZXRjLlxuICAgICAgICBQcm9taXNlLnJlamVjdChlcnJvcik7XG4gICAgICB9XG4gICAgICB0aGlzLiNyZWplY3RDb25uZWN0ZWRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuI3JlamVjdEVuZFByb21pc2UoZXJyb3IpO1xuICAgICAgdGhpcy5fZW1pdCgnZW5kJyk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIF9lbWl0RmluYWwoKSB7XG4gICAgY29uc3QgZmluYWxNZXNzYWdlID0gdGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmF0KC0xKTtcbiAgICBpZiAoZmluYWxNZXNzYWdlKSB7XG4gICAgICB0aGlzLl9lbWl0KCdmaW5hbE1lc3NhZ2UnLCB0aGlzLiNnZXRGaW5hbE1lc3NhZ2UoKSk7XG4gICAgfVxuICB9XG5cbiAgI2JlZ2luUmVxdWVzdCgpIHtcbiAgICBpZiAodGhpcy5lbmRlZCkgcmV0dXJuO1xuICAgIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3QgPSB1bmRlZmluZWQ7XG4gIH1cbiAgI2FkZFN0cmVhbUV2ZW50KGV2ZW50OiBNZXNzYWdlU3RyZWFtRXZlbnQpIHtcbiAgICBpZiAodGhpcy5lbmRlZCkgcmV0dXJuO1xuICAgIGNvbnN0IG1lc3NhZ2VTbmFwc2hvdCA9IHRoaXMuI2FjY3VtdWxhdGVNZXNzYWdlKGV2ZW50KTtcbiAgICB0aGlzLl9lbWl0KCdzdHJlYW1FdmVudCcsIGV2ZW50LCBtZXNzYWdlU25hcHNob3QpO1xuXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX2RlbHRhJzoge1xuICAgICAgICBjb25zdCBjb250ZW50ID0gbWVzc2FnZVNuYXBzaG90LmNvbnRlbnQuYXQoLTEpITtcbiAgICAgICAgc3dpdGNoIChldmVudC5kZWx0YS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAndGV4dF9kZWx0YSc6IHtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICB0aGlzLl9lbWl0KCd0ZXh0JywgZXZlbnQuZGVsdGEudGV4dCwgY29udGVudC50ZXh0IHx8ICcnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlICdjaXRhdGlvbnNfZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZW1pdCgnY2l0YXRpb24nLCBldmVudC5kZWx0YS5jaXRhdGlvbiwgY29udGVudC5jaXRhdGlvbnMgPz8gW10pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgJ2lucHV0X2pzb25fZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAndG9vbF91c2UnICYmIGNvbnRlbnQuaW5wdXQpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZW1pdCgnaW5wdXRKc29uJywgZXZlbnQuZGVsdGEucGFydGlhbF9qc29uLCBjb250ZW50LmlucHV0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgY2hlY2tOZXZlcihldmVudC5kZWx0YSk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdtZXNzYWdlX3N0b3AnOiB7XG4gICAgICAgIHRoaXMuX2FkZE1lc3NhZ2VQYXJhbShtZXNzYWdlU25hcHNob3QpO1xuICAgICAgICB0aGlzLl9hZGRNZXNzYWdlKG1lc3NhZ2VTbmFwc2hvdCwgdHJ1ZSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19zdG9wJzoge1xuICAgICAgICB0aGlzLl9lbWl0KCdjb250ZW50QmxvY2snLCBtZXNzYWdlU25hcHNob3QuY29udGVudC5hdCgtMSkhKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdtZXNzYWdlX3N0YXJ0Jzoge1xuICAgICAgICB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90ID0gbWVzc2FnZVNuYXBzaG90O1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RhcnQnOlxuICAgICAgY2FzZSAnbWVzc2FnZV9kZWx0YSc6XG4gICAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuICAjZW5kUmVxdWVzdCgpOiBNZXNzYWdlIHtcbiAgICBpZiAodGhpcy5lbmRlZCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBzdHJlYW0gaGFzIGVuZGVkLCB0aGlzIHNob3VsZG4ndCBoYXBwZW5gKTtcbiAgICB9XG4gICAgY29uc3Qgc25hcHNob3QgPSB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90O1xuICAgIGlmICghc25hcHNob3QpIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgcmVxdWVzdCBlbmRlZCB3aXRob3V0IHNlbmRpbmcgYW55IGNodW5rc2ApO1xuICAgIH1cbiAgICB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90ID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiBzbmFwc2hvdDtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBfZnJvbVJlYWRhYmxlU3RyZWFtKFxuICAgIHJlYWRhYmxlU3RyZWFtOiBSZWFkYWJsZVN0cmVhbSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc2lnbmFsID0gb3B0aW9ucz8uc2lnbmFsO1xuICAgIGlmIChzaWduYWwpIHtcbiAgICAgIGlmIChzaWduYWwuYWJvcnRlZCkgdGhpcy5jb250cm9sbGVyLmFib3J0KCk7XG4gICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKSk7XG4gICAgfVxuICAgIHRoaXMuI2JlZ2luUmVxdWVzdCgpO1xuICAgIHRoaXMuX2Nvbm5lY3RlZChudWxsKTtcbiAgICBjb25zdCBzdHJlYW0gPSBTdHJlYW0uZnJvbVJlYWRhYmxlU3RyZWFtPE1lc3NhZ2VTdHJlYW1FdmVudD4ocmVhZGFibGVTdHJlYW0sIHRoaXMuY29udHJvbGxlcik7XG4gICAgZm9yIGF3YWl0IChjb25zdCBldmVudCBvZiBzdHJlYW0pIHtcbiAgICAgIHRoaXMuI2FkZFN0cmVhbUV2ZW50KGV2ZW50KTtcbiAgICB9XG4gICAgaWYgKHN0cmVhbS5jb250cm9sbGVyLnNpZ25hbD8uYWJvcnRlZCkge1xuICAgICAgdGhyb3cgbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgfVxuICAgIHRoaXMuI2VuZFJlcXVlc3QoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBNdXRhdGVzIHRoaXMuI2N1cnJlbnRNZXNzYWdlIHdpdGggdGhlIGN1cnJlbnQgZXZlbnQuIEhhbmRsaW5nIHRoZSBhY2N1bXVsYXRpb24gb2YgbXVsdGlwbGUgbWVzc2FnZXNcbiAgICogd2lsbCBiZSBuZWVkZWQgdG8gYmUgaGFuZGxlZCBieSB0aGUgY2FsbGVyLCB0aGlzIG1ldGhvZCB3aWxsIHRocm93IGlmIHlvdSB0cnkgdG8gYWNjdW11bGF0ZSBmb3IgbXVsdGlwbGVcbiAgICogbWVzc2FnZXMuXG4gICAqL1xuICAjYWNjdW11bGF0ZU1lc3NhZ2UoZXZlbnQ6IE1lc3NhZ2VTdHJlYW1FdmVudCk6IE1lc3NhZ2Uge1xuICAgIGxldCBzbmFwc2hvdCA9IHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3Q7XG5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ21lc3NhZ2Vfc3RhcnQnKSB7XG4gICAgICBpZiAoc25hcHNob3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBVbmV4cGVjdGVkIGV2ZW50IG9yZGVyLCBnb3QgJHtldmVudC50eXBlfSBiZWZvcmUgcmVjZWl2aW5nIFwibWVzc2FnZV9zdG9wXCJgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBldmVudC5tZXNzYWdlO1xuICAgIH1cblxuICAgIGlmICghc25hcHNob3QpIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgVW5leHBlY3RlZCBldmVudCBvcmRlciwgZ290ICR7ZXZlbnQudHlwZX0gYmVmb3JlIFwibWVzc2FnZV9zdGFydFwiYCk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICBjYXNlICdtZXNzYWdlX3N0b3AnOlxuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgICBjYXNlICdtZXNzYWdlX2RlbHRhJzpcbiAgICAgICAgc25hcHNob3Quc3RvcF9yZWFzb24gPSBldmVudC5kZWx0YS5zdG9wX3JlYXNvbjtcbiAgICAgICAgc25hcHNob3Quc3RvcF9zZXF1ZW5jZSA9IGV2ZW50LmRlbHRhLnN0b3Bfc2VxdWVuY2U7XG4gICAgICAgIHNuYXBzaG90LnVzYWdlLm91dHB1dF90b2tlbnMgPSBldmVudC51c2FnZS5vdXRwdXRfdG9rZW5zO1xuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX3N0YXJ0JzpcbiAgICAgICAgc25hcHNob3QuY29udGVudC5wdXNoKGV2ZW50LmNvbnRlbnRfYmxvY2spO1xuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX2RlbHRhJzoge1xuICAgICAgICBjb25zdCBzbmFwc2hvdENvbnRlbnQgPSBzbmFwc2hvdC5jb250ZW50LmF0KGV2ZW50LmluZGV4KTtcblxuICAgICAgICBzd2l0Y2ggKGV2ZW50LmRlbHRhLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICd0ZXh0X2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKHNuYXBzaG90Q29udGVudD8udHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgIHNuYXBzaG90Q29udGVudC50ZXh0ICs9IGV2ZW50LmRlbHRhLnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSAnY2l0YXRpb25zX2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKHNuYXBzaG90Q29udGVudD8udHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgIHNuYXBzaG90Q29udGVudC5jaXRhdGlvbnMgPz89IFtdO1xuICAgICAgICAgICAgICBzbmFwc2hvdENvbnRlbnQuY2l0YXRpb25zLnB1c2goZXZlbnQuZGVsdGEuY2l0YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgJ2lucHV0X2pzb25fZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoc25hcHNob3RDb250ZW50Py50eXBlID09PSAndG9vbF91c2UnKSB7XG4gICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiB0aGUgcmF3IEpTT04gc3RyaW5nIGFzIHdlbGwgc28gdGhhdCB3ZSBjYW5cbiAgICAgICAgICAgICAgLy8gcmUtcGFyc2UgaXQgZm9yIGVhY2ggZGVsdGEsIGZvciBub3cgd2UganVzdCBzdG9yZSBpdCBhcyBhbiB1bnR5cGVkXG4gICAgICAgICAgICAgIC8vIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5IG9uIHRoZSBzbmFwc2hvdFxuICAgICAgICAgICAgICBsZXQganNvbkJ1ZiA9IChzbmFwc2hvdENvbnRlbnQgYXMgYW55KVtKU09OX0JVRl9QUk9QRVJUWV0gfHwgJyc7XG4gICAgICAgICAgICAgIGpzb25CdWYgKz0gZXZlbnQuZGVsdGEucGFydGlhbF9qc29uO1xuXG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzbmFwc2hvdENvbnRlbnQsIEpTT05fQlVGX1BST1BFUlRZLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGpzb25CdWYsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGlmIChqc29uQnVmKSB7XG4gICAgICAgICAgICAgICAgc25hcHNob3RDb250ZW50LmlucHV0ID0gcGFydGlhbFBhcnNlKGpzb25CdWYpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNoZWNrTmV2ZXIoZXZlbnQuZGVsdGEpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgICAgfVxuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19zdG9wJzpcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgIH1cbiAgfVxuXG4gIFtTeW1ib2wuYXN5bmNJdGVyYXRvcl0oKTogQXN5bmNJdGVyYXRvcjxNZXNzYWdlU3RyZWFtRXZlbnQ+IHtcbiAgICBjb25zdCBwdXNoUXVldWU6IE1lc3NhZ2VTdHJlYW1FdmVudFtdID0gW107XG4gICAgY29uc3QgcmVhZFF1ZXVlOiB7XG4gICAgICByZXNvbHZlOiAoY2h1bms6IE1lc3NhZ2VTdHJlYW1FdmVudCB8IHVuZGVmaW5lZCkgPT4gdm9pZDtcbiAgICAgIHJlamVjdDogKGVycm9yOiB1bmtub3duKSA9PiB2b2lkO1xuICAgIH1bXSA9IFtdO1xuICAgIGxldCBkb25lID0gZmFsc2U7XG5cbiAgICB0aGlzLm9uKCdzdHJlYW1FdmVudCcsIChldmVudCkgPT4ge1xuICAgICAgY29uc3QgcmVhZGVyID0gcmVhZFF1ZXVlLnNoaWZ0KCk7XG4gICAgICBpZiAocmVhZGVyKSB7XG4gICAgICAgIHJlYWRlci5yZXNvbHZlKGV2ZW50KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHB1c2hRdWV1ZS5wdXNoKGV2ZW50KTtcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIHRoaXMub24oJ2VuZCcsICgpID0+IHtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgZm9yIChjb25zdCByZWFkZXIgb2YgcmVhZFF1ZXVlKSB7XG4gICAgICAgIHJlYWRlci5yZXNvbHZlKHVuZGVmaW5lZCk7XG4gICAgICB9XG4gICAgICByZWFkUXVldWUubGVuZ3RoID0gMDtcbiAgICB9KTtcblxuICAgIHRoaXMub24oJ2Fib3J0JywgKGVycikgPT4ge1xuICAgICAgZG9uZSA9IHRydWU7XG4gICAgICBmb3IgKGNvbnN0IHJlYWRlciBvZiByZWFkUXVldWUpIHtcbiAgICAgICAgcmVhZGVyLnJlamVjdChlcnIpO1xuICAgICAgfVxuICAgICAgcmVhZFF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uKCdlcnJvcicsIChlcnIpID0+IHtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgZm9yIChjb25zdCByZWFkZXIgb2YgcmVhZFF1ZXVlKSB7XG4gICAgICAgIHJlYWRlci5yZWplY3QoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJlYWRRdWV1ZS5sZW5ndGggPSAwO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtcbiAgICAgIG5leHQ6IGFzeW5jICgpOiBQcm9taXNlPEl0ZXJhdG9yUmVzdWx0PE1lc3NhZ2VTdHJlYW1FdmVudD4+ID0+IHtcbiAgICAgICAgaWYgKCFwdXNoUXVldWUubGVuZ3RoKSB7XG4gICAgICAgICAgaWYgKGRvbmUpIHtcbiAgICAgICAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlPE1lc3NhZ2VTdHJlYW1FdmVudCB8IHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT5cbiAgICAgICAgICAgIHJlYWRRdWV1ZS5wdXNoKHsgcmVzb2x2ZSwgcmVqZWN0IH0pLFxuICAgICAgICAgICkudGhlbigoY2h1bmspID0+IChjaHVuayA/IHsgdmFsdWU6IGNodW5rLCBkb25lOiBmYWxzZSB9IDogeyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaHVuayA9IHB1c2hRdWV1ZS5zaGlmdCgpITtcbiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IGNodW5rLCBkb25lOiBmYWxzZSB9O1xuICAgICAgfSxcbiAgICAgIHJldHVybjogYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aGlzLmFib3J0KCk7XG4gICAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHRvUmVhZGFibGVTdHJlYW0oKTogUmVhZGFibGVTdHJlYW0ge1xuICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBTdHJlYW0odGhpc1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0uYmluZCh0aGlzKSwgdGhpcy5jb250cm9sbGVyKTtcbiAgICByZXR1cm4gc3RyZWFtLnRvUmVhZGFibGVTdHJlYW0oKTtcbiAgfVxufVxuXG4vLyB1c2VkIHRvIGVuc3VyZSBleGhhdXN0aXZlIGNhc2UgbWF0Y2hpbmcgd2l0aG91dCB0aHJvd2luZyBhIHJ1bnRpbWUgZXJyb3JcbmZ1bmN0aW9uIGNoZWNrTmV2ZXIoeDogbmV2ZXIpIHt9XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCB7IEFQSVByb21pc2UgfSBmcm9tIFwiLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgTWVzc2FnZXNBUEkgZnJvbSBcIi4vbWVzc2FnZXMuanNcIjtcbmltcG9ydCAqIGFzIEJhdGNoZXNBUEkgZnJvbSBcIi4vYmF0Y2hlcy5qc1wiO1xuaW1wb3J0IHtcbiAgQmF0Y2hDcmVhdGVQYXJhbXMsXG4gIEJhdGNoTGlzdFBhcmFtcyxcbiAgQmF0Y2hlcyxcbiAgRGVsZXRlZE1lc3NhZ2VCYXRjaCxcbiAgTWVzc2FnZUJhdGNoLFxuICBNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCxcbiAgTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCxcbiAgTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCxcbiAgTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlLFxuICBNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzLFxuICBNZXNzYWdlQmF0Y2hSZXN1bHQsXG4gIE1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCxcbiAgTWVzc2FnZUJhdGNoZXNQYWdlLFxufSBmcm9tIFwiLi9iYXRjaGVzLmpzXCI7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tIFwiLi4vLi4vc3RyZWFtaW5nLmpzXCI7XG5pbXBvcnQgeyBNZXNzYWdlU3RyZWFtIH0gZnJvbSBcIi4uLy4uL2xpYi9NZXNzYWdlU3RyZWFtLmpzXCI7XG5cbmV4cG9ydCB7IE1lc3NhZ2VTdHJlYW0gfSBmcm9tIFwiLi4vLi4vbGliL01lc3NhZ2VTdHJlYW0uanNcIjtcblxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICBiYXRjaGVzOiBCYXRjaGVzQVBJLkJhdGNoZXMgPSBuZXcgQmF0Y2hlc0FQSS5CYXRjaGVzKHRoaXMuX2NsaWVudCk7XG5cbiAgLyoqXG4gICAqIFNlbmQgYSBzdHJ1Y3R1cmVkIGxpc3Qgb2YgaW5wdXQgbWVzc2FnZXMgd2l0aCB0ZXh0IGFuZC9vciBpbWFnZSBjb250ZW50LCBhbmQgdGhlXG4gICAqIG1vZGVsIHdpbGwgZ2VuZXJhdGUgdGhlIG5leHQgbWVzc2FnZSBpbiB0aGUgY29udmVyc2F0aW9uLlxuICAgKlxuICAgKiBUaGUgTWVzc2FnZXMgQVBJIGNhbiBiZSB1c2VkIGZvciBlaXRoZXIgc2luZ2xlIHF1ZXJpZXMgb3Igc3RhdGVsZXNzIG11bHRpLXR1cm5cbiAgICogY29udmVyc2F0aW9ucy5cbiAgICovXG4gIGNyZWF0ZShib2R5OiBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IEFQSVByb21pc2U8TWVzc2FnZT47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxSYXdNZXNzYWdlU3RyZWFtRXZlbnQ+PjtcbiAgY3JlYXRlKFxuICAgIGJvZHk6IE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxSYXdNZXNzYWdlU3RyZWFtRXZlbnQ+IHwgTWVzc2FnZT47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPE1lc3NhZ2U+IHwgQVBJUHJvbWlzZTxTdHJlYW08UmF3TWVzc2FnZVN0cmVhbUV2ZW50Pj4ge1xuICAgIGlmIChib2R5Lm1vZGVsIGluIERFUFJFQ0FURURfTU9ERUxTKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBUaGUgbW9kZWwgJyR7Ym9keS5tb2RlbH0nIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgcmVhY2ggZW5kLW9mLWxpZmUgb24gJHtcbiAgICAgICAgICBERVBSRUNBVEVEX01PREVMU1tib2R5Lm1vZGVsXVxuICAgICAgICB9XFxuUGxlYXNlIG1pZ3JhdGUgdG8gYSBuZXdlciBtb2RlbC4gVmlzaXQgaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9yZXNvdXJjZXMvbW9kZWwtZGVwcmVjYXRpb25zIGZvciBtb3JlIGluZm9ybWF0aW9uLmAsXG4gICAgICApO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoJy92MS9tZXNzYWdlcycsIHtcbiAgICAgIGJvZHksXG4gICAgICB0aW1lb3V0OiAodGhpcy5fY2xpZW50IGFzIGFueSkuX29wdGlvbnMudGltZW91dCA/PyA2MDAwMDAsXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgc3RyZWFtOiBib2R5LnN0cmVhbSA/PyBmYWxzZSxcbiAgICB9KSBhcyBBUElQcm9taXNlPE1lc3NhZ2U+IHwgQVBJUHJvbWlzZTxTdHJlYW08UmF3TWVzc2FnZVN0cmVhbUV2ZW50Pj47XG4gIH1cblxuICAvKipcbiAgICogQ3JlYXRlIGEgTWVzc2FnZSBzdHJlYW1cbiAgICovXG4gIHN0cmVhbShib2R5OiBNZXNzYWdlU3RyZWFtUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IE1lc3NhZ2VTdHJlYW0ge1xuICAgIHJldHVybiBNZXNzYWdlU3RyZWFtLmNyZWF0ZU1lc3NhZ2UodGhpcywgYm9keSwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogQ291bnQgdGhlIG51bWJlciBvZiB0b2tlbnMgaW4gYSBNZXNzYWdlLlxuICAgKlxuICAgKiBUaGUgVG9rZW4gQ291bnQgQVBJIGNhbiBiZSB1c2VkIHRvIGNvdW50IHRoZSBudW1iZXIgb2YgdG9rZW5zIGluIGEgTWVzc2FnZSxcbiAgICogaW5jbHVkaW5nIHRvb2xzLCBpbWFnZXMsIGFuZCBkb2N1bWVudHMsIHdpdGhvdXQgY3JlYXRpbmcgaXQuXG4gICAqL1xuICBjb3VudFRva2VucyhcbiAgICBib2R5OiBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxNZXNzYWdlVG9rZW5zQ291bnQ+IHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoJy92MS9tZXNzYWdlcy9jb3VudF90b2tlbnMnLCB7IGJvZHksIC4uLm9wdGlvbnMgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXNlNjRQREZTb3VyY2Uge1xuICBkYXRhOiBzdHJpbmc7XG5cbiAgbWVkaWFfdHlwZTogJ2FwcGxpY2F0aW9uL3BkZic7XG5cbiAgdHlwZTogJ2Jhc2U2NCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2FjaGVDb250cm9sRXBoZW1lcmFsIHtcbiAgdHlwZTogJ2VwaGVtZXJhbCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2l0YXRpb25DaGFyTG9jYXRpb24ge1xuICBjaXRlZF90ZXh0OiBzdHJpbmc7XG5cbiAgZG9jdW1lbnRfaW5kZXg6IG51bWJlcjtcblxuICBkb2N1bWVudF90aXRsZTogc3RyaW5nIHwgbnVsbDtcblxuICBlbmRfY2hhcl9pbmRleDogbnVtYmVyO1xuXG4gIHN0YXJ0X2NoYXJfaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY2hhcl9sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbSB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9jaGFyX2luZGV4OiBudW1iZXI7XG5cbiAgc3RhcnRfY2hhcl9pbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjaGFyX2xvY2F0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX2Jsb2NrX2luZGV4OiBudW1iZXI7XG5cbiAgc3RhcnRfYmxvY2tfaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX2Jsb2NrX2luZGV4OiBudW1iZXI7XG5cbiAgc3RhcnRfYmxvY2tfaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2l0YXRpb25QYWdlTG9jYXRpb24ge1xuICBjaXRlZF90ZXh0OiBzdHJpbmc7XG5cbiAgZG9jdW1lbnRfaW5kZXg6IG51bWJlcjtcblxuICBkb2N1bWVudF90aXRsZTogc3RyaW5nIHwgbnVsbDtcblxuICBlbmRfcGFnZV9udW1iZXI6IG51bWJlcjtcblxuICBzdGFydF9wYWdlX251bWJlcjogbnVtYmVyO1xuXG4gIHR5cGU6ICdwYWdlX2xvY2F0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX3BhZ2VfbnVtYmVyOiBudW1iZXI7XG5cbiAgc3RhcnRfcGFnZV9udW1iZXI6IG51bWJlcjtcblxuICB0eXBlOiAncGFnZV9sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2l0YXRpb25zQ29uZmlnUGFyYW0ge1xuICBlbmFibGVkPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBDaXRhdGlvbnNEZWx0YSB7XG4gIGNpdGF0aW9uOiBDaXRhdGlvbkNoYXJMb2NhdGlvbiB8IENpdGF0aW9uUGFnZUxvY2F0aW9uIHwgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbjtcblxuICB0eXBlOiAnY2l0YXRpb25zX2RlbHRhJztcbn1cblxuZXhwb3J0IHR5cGUgQ29udGVudEJsb2NrID0gVGV4dEJsb2NrIHwgVG9vbFVzZUJsb2NrO1xuXG5leHBvcnQgdHlwZSBDb250ZW50QmxvY2tEZWx0YUV2ZW50ID0gUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudDtcblxuZXhwb3J0IHR5cGUgQ29udGVudEJsb2NrUGFyYW0gPVxuICB8IFRleHRCbG9ja1BhcmFtXG4gIHwgSW1hZ2VCbG9ja1BhcmFtXG4gIHwgVG9vbFVzZUJsb2NrUGFyYW1cbiAgfCBUb29sUmVzdWx0QmxvY2tQYXJhbVxuICB8IERvY3VtZW50QmxvY2tQYXJhbTtcblxuZXhwb3J0IGludGVyZmFjZSBDb250ZW50QmxvY2tTb3VyY2Uge1xuICBjb250ZW50OiBzdHJpbmcgfCBBcnJheTxDb250ZW50QmxvY2tTb3VyY2VDb250ZW50PjtcblxuICB0eXBlOiAnY29udGVudCc7XG59XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQgPSBUZXh0QmxvY2tQYXJhbSB8IEltYWdlQmxvY2tQYXJhbTtcblxuZXhwb3J0IHR5cGUgQ29udGVudEJsb2NrU3RhcnRFdmVudCA9IFJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQ7XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRCbG9ja1N0b3BFdmVudCA9IFJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudDtcblxuZXhwb3J0IGludGVyZmFjZSBEb2N1bWVudEJsb2NrUGFyYW0ge1xuICBzb3VyY2U6IEJhc2U2NFBERlNvdXJjZSB8IFBsYWluVGV4dFNvdXJjZSB8IENvbnRlbnRCbG9ja1NvdXJjZTtcblxuICB0eXBlOiAnZG9jdW1lbnQnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIGNpdGF0aW9ucz86IENpdGF0aW9uc0NvbmZpZ1BhcmFtO1xuXG4gIGNvbnRleHQ/OiBzdHJpbmcgfCBudWxsO1xuXG4gIHRpdGxlPzogc3RyaW5nIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJbWFnZUJsb2NrUGFyYW0ge1xuICBzb3VyY2U6IEltYWdlQmxvY2tQYXJhbS5Tb3VyY2U7XG5cbiAgdHlwZTogJ2ltYWdlJztcblxuICBjYWNoZV9jb250cm9sPzogQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBJbWFnZUJsb2NrUGFyYW0ge1xuICBleHBvcnQgaW50ZXJmYWNlIFNvdXJjZSB7XG4gICAgZGF0YTogc3RyaW5nO1xuXG4gICAgbWVkaWFfdHlwZTogJ2ltYWdlL2pwZWcnIHwgJ2ltYWdlL3BuZycgfCAnaW1hZ2UvZ2lmJyB8ICdpbWFnZS93ZWJwJztcblxuICAgIHR5cGU6ICdiYXNlNjQnO1xuICB9XG59XG5cbmV4cG9ydCB0eXBlIElucHV0SnNvbkRlbHRhID0gSW5wdXRKU09ORGVsdGE7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW5wdXRKU09ORGVsdGEge1xuICBwYXJ0aWFsX2pzb246IHN0cmluZztcblxuICB0eXBlOiAnaW5wdXRfanNvbl9kZWx0YSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBVbmlxdWUgb2JqZWN0IGlkZW50aWZpZXIuXG4gICAqXG4gICAqIFRoZSBmb3JtYXQgYW5kIGxlbmd0aCBvZiBJRHMgbWF5IGNoYW5nZSBvdmVyIHRpbWUuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBDb250ZW50IGdlbmVyYXRlZCBieSB0aGUgbW9kZWwuXG4gICAqXG4gICAqIFRoaXMgaXMgYW4gYXJyYXkgb2YgY29udGVudCBibG9ja3MsIGVhY2ggb2Ygd2hpY2ggaGFzIGEgYHR5cGVgIHRoYXQgZGV0ZXJtaW5lc1xuICAgKiBpdHMgc2hhcGUuXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW3sgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJIaSwgSSdtIENsYXVkZS5cIiB9XVxuICAgKiBgYGBcbiAgICpcbiAgICogSWYgdGhlIHJlcXVlc3QgaW5wdXQgYG1lc3NhZ2VzYCBlbmRlZCB3aXRoIGFuIGBhc3Npc3RhbnRgIHR1cm4sIHRoZW4gdGhlXG4gICAqIHJlc3BvbnNlIGBjb250ZW50YCB3aWxsIGNvbnRpbnVlIGRpcmVjdGx5IGZyb20gdGhhdCBsYXN0IHR1cm4uIFlvdSBjYW4gdXNlIHRoaXNcbiAgICogdG8gY29uc3RyYWluIHRoZSBtb2RlbCdzIG91dHB1dC5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGlmIHRoZSBpbnB1dCBgbWVzc2FnZXNgIHdlcmU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIldoYXQncyB0aGUgR3JlZWsgbmFtZSBmb3IgU3VuPyAoQSkgU29sIChCKSBIZWxpb3MgKEMpIFN1blwiXG4gICAqICAgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJUaGUgYmVzdCBhbnN3ZXIgaXMgKFwiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogVGhlbiB0aGUgcmVzcG9uc2UgYGNvbnRlbnRgIG1pZ2h0IGJlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiQilcIiB9XVxuICAgKiBgYGBcbiAgICovXG4gIGNvbnRlbnQ6IEFycmF5PENvbnRlbnRCbG9jaz47XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1vZGVsO1xuXG4gIC8qKlxuICAgKiBDb252ZXJzYXRpb25hbCByb2xlIG9mIHRoZSBnZW5lcmF0ZWQgbWVzc2FnZS5cbiAgICpcbiAgICogVGhpcyB3aWxsIGFsd2F5cyBiZSBgXCJhc3Npc3RhbnRcImAuXG4gICAqL1xuICByb2xlOiAnYXNzaXN0YW50JztcblxuICAvKipcbiAgICogVGhlIHJlYXNvbiB0aGF0IHdlIHN0b3BwZWQuXG4gICAqXG4gICAqIFRoaXMgbWF5IGJlIG9uZSB0aGUgZm9sbG93aW5nIHZhbHVlczpcbiAgICpcbiAgICogLSBgXCJlbmRfdHVyblwiYDogdGhlIG1vZGVsIHJlYWNoZWQgYSBuYXR1cmFsIHN0b3BwaW5nIHBvaW50XG4gICAqIC0gYFwibWF4X3Rva2Vuc1wiYDogd2UgZXhjZWVkZWQgdGhlIHJlcXVlc3RlZCBgbWF4X3Rva2Vuc2Agb3IgdGhlIG1vZGVsJ3MgbWF4aW11bVxuICAgKiAtIGBcInN0b3Bfc2VxdWVuY2VcImA6IG9uZSBvZiB5b3VyIHByb3ZpZGVkIGN1c3RvbSBgc3RvcF9zZXF1ZW5jZXNgIHdhcyBnZW5lcmF0ZWRcbiAgICogLSBgXCJ0b29sX3VzZVwiYDogdGhlIG1vZGVsIGludm9rZWQgb25lIG9yIG1vcmUgdG9vbHNcbiAgICpcbiAgICogSW4gbm9uLXN0cmVhbWluZyBtb2RlIHRoaXMgdmFsdWUgaXMgYWx3YXlzIG5vbi1udWxsLiBJbiBzdHJlYW1pbmcgbW9kZSwgaXQgaXNcbiAgICogbnVsbCBpbiB0aGUgYG1lc3NhZ2Vfc3RhcnRgIGV2ZW50IGFuZCBub24tbnVsbCBvdGhlcndpc2UuXG4gICAqL1xuICBzdG9wX3JlYXNvbjogJ2VuZF90dXJuJyB8ICdtYXhfdG9rZW5zJyB8ICdzdG9wX3NlcXVlbmNlJyB8ICd0b29sX3VzZScgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBXaGljaCBjdXN0b20gc3RvcCBzZXF1ZW5jZSB3YXMgZ2VuZXJhdGVkLCBpZiBhbnkuXG4gICAqXG4gICAqIFRoaXMgdmFsdWUgd2lsbCBiZSBhIG5vbi1udWxsIHN0cmluZyBpZiBvbmUgb2YgeW91ciBjdXN0b20gc3RvcCBzZXF1ZW5jZXMgd2FzXG4gICAqIGdlbmVyYXRlZC5cbiAgICovXG4gIHN0b3Bfc2VxdWVuY2U6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIE9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgTWVzc2FnZXMsIHRoaXMgaXMgYWx3YXlzIGBcIm1lc3NhZ2VcImAuXG4gICAqL1xuICB0eXBlOiAnbWVzc2FnZSc7XG5cbiAgLyoqXG4gICAqIEJpbGxpbmcgYW5kIHJhdGUtbGltaXQgdXNhZ2UuXG4gICAqXG4gICAqIEFudGhyb3BpYydzIEFQSSBiaWxscyBhbmQgcmF0ZS1saW1pdHMgYnkgdG9rZW4gY291bnRzLCBhcyB0b2tlbnMgcmVwcmVzZW50IHRoZVxuICAgKiB1bmRlcmx5aW5nIGNvc3QgdG8gb3VyIHN5c3RlbXMuXG4gICAqXG4gICAqIFVuZGVyIHRoZSBob29kLCB0aGUgQVBJIHRyYW5zZm9ybXMgcmVxdWVzdHMgaW50byBhIGZvcm1hdCBzdWl0YWJsZSBmb3IgdGhlXG4gICAqIG1vZGVsLiBUaGUgbW9kZWwncyBvdXRwdXQgdGhlbiBnb2VzIHRocm91Z2ggYSBwYXJzaW5nIHN0YWdlIGJlZm9yZSBiZWNvbWluZyBhblxuICAgKiBBUEkgcmVzcG9uc2UuIEFzIGEgcmVzdWx0LCB0aGUgdG9rZW4gY291bnRzIGluIGB1c2FnZWAgd2lsbCBub3QgbWF0Y2ggb25lLXRvLW9uZVxuICAgKiB3aXRoIHRoZSBleGFjdCB2aXNpYmxlIGNvbnRlbnQgb2YgYW4gQVBJIHJlcXVlc3Qgb3IgcmVzcG9uc2UuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBgb3V0cHV0X3Rva2Vuc2Agd2lsbCBiZSBub24temVybywgZXZlbiBmb3IgYW4gZW1wdHkgc3RyaW5nIHJlc3BvbnNlXG4gICAqIGZyb20gQ2xhdWRlLlxuICAgKi9cbiAgdXNhZ2U6IFVzYWdlO1xufVxuXG5leHBvcnQgdHlwZSBNZXNzYWdlRGVsdGFFdmVudCA9IFJhd01lc3NhZ2VEZWx0YUV2ZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VEZWx0YVVzYWdlIHtcbiAgLyoqXG4gICAqIFRoZSBjdW11bGF0aXZlIG51bWJlciBvZiBvdXRwdXQgdG9rZW5zIHdoaWNoIHdlcmUgdXNlZC5cbiAgICovXG4gIG91dHB1dF90b2tlbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlUGFyYW0ge1xuICBjb250ZW50OiBzdHJpbmcgfCBBcnJheTxDb250ZW50QmxvY2tQYXJhbT47XG5cbiAgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCc7XG59XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VTdGFydEV2ZW50ID0gUmF3TWVzc2FnZVN0YXJ0RXZlbnQ7XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VTdG9wRXZlbnQgPSBSYXdNZXNzYWdlU3RvcEV2ZW50O1xuXG5leHBvcnQgdHlwZSBNZXNzYWdlU3RyZWFtRXZlbnQgPSBSYXdNZXNzYWdlU3RyZWFtRXZlbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZVRva2Vuc0NvdW50IHtcbiAgLyoqXG4gICAqIFRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIGFjcm9zcyB0aGUgcHJvdmlkZWQgbGlzdCBvZiBtZXNzYWdlcywgc3lzdGVtIHByb21wdCxcbiAgICogYW5kIHRvb2xzLlxuICAgKi9cbiAgaW5wdXRfdG9rZW5zOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWV0YWRhdGEge1xuICAvKipcbiAgICogQW4gZXh0ZXJuYWwgaWRlbnRpZmllciBmb3IgdGhlIHVzZXIgd2hvIGlzIGFzc29jaWF0ZWQgd2l0aCB0aGUgcmVxdWVzdC5cbiAgICpcbiAgICogVGhpcyBzaG91bGQgYmUgYSB1dWlkLCBoYXNoIHZhbHVlLCBvciBvdGhlciBvcGFxdWUgaWRlbnRpZmllci4gQW50aHJvcGljIG1heSB1c2VcbiAgICogdGhpcyBpZCB0byBoZWxwIGRldGVjdCBhYnVzZS4gRG8gbm90IGluY2x1ZGUgYW55IGlkZW50aWZ5aW5nIGluZm9ybWF0aW9uIHN1Y2ggYXNcbiAgICogbmFtZSwgZW1haWwgYWRkcmVzcywgb3IgcGhvbmUgbnVtYmVyLlxuICAgKi9cbiAgdXNlcl9pZD86IHN0cmluZyB8IG51bGw7XG59XG5cbi8qKlxuICogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICogZGV0YWlscyBhbmQgb3B0aW9ucy5cbiAqL1xuZXhwb3J0IHR5cGUgTW9kZWwgPVxuICB8IChzdHJpbmcgJiB7fSlcbiAgfCAnY2xhdWRlLTMtNS1oYWlrdS1sYXRlc3QnXG4gIHwgJ2NsYXVkZS0zLTUtaGFpa3UtMjAyNDEwMjInXG4gIHwgJ2NsYXVkZS0zLTUtc29ubmV0LWxhdGVzdCdcbiAgfCAnY2xhdWRlLTMtNS1zb25uZXQtMjAyNDEwMjInXG4gIHwgJ2NsYXVkZS0zLTUtc29ubmV0LTIwMjQwNjIwJ1xuICB8ICdjbGF1ZGUtMy1vcHVzLWxhdGVzdCdcbiAgfCAnY2xhdWRlLTMtb3B1cy0yMDI0MDIyOSdcbiAgfCAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5J1xuICB8ICdjbGF1ZGUtMy1oYWlrdS0yMDI0MDMwNydcbiAgfCAnY2xhdWRlLTIuMSdcbiAgfCAnY2xhdWRlLTIuMCc7XG5cbmNvbnN0IERFUFJFQ0FURURfTU9ERUxTOiB7XG4gIFtLIGluIE1vZGVsXT86IHN0cmluZztcbn0gPSB7XG4gICdjbGF1ZGUtMS4zJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG4gICdjbGF1ZGUtMS4zLTEwMGsnOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS1pbnN0YW50LTEuMSc6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLWluc3RhbnQtMS4xLTEwMGsnOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS1pbnN0YW50LTEuMic6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5JzogJ0p1bHkgMjFzdCwgMjAyNScsXG4gICdjbGF1ZGUtMi4xJzogJ0p1bHkgMjFzdCwgMjAyNScsXG4gICdjbGF1ZGUtMi4wJzogJ0p1bHkgMjFzdCwgMjAyNScsXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIFBsYWluVGV4dFNvdXJjZSB7XG4gIGRhdGE6IHN0cmluZztcblxuICBtZWRpYV90eXBlOiAndGV4dC9wbGFpbic7XG5cbiAgdHlwZTogJ3RleHQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQge1xuICBkZWx0YTogVGV4dERlbHRhIHwgSW5wdXRKU09ORGVsdGEgfCBDaXRhdGlvbnNEZWx0YTtcblxuICBpbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX2RlbHRhJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50IHtcbiAgY29udGVudF9ibG9jazogVGV4dEJsb2NrIHwgVG9vbFVzZUJsb2NrO1xuXG4gIGluZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NvbnRlbnRfYmxvY2tfc3RhcnQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCB7XG4gIGluZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NvbnRlbnRfYmxvY2tfc3RvcCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF3TWVzc2FnZURlbHRhRXZlbnQge1xuICBkZWx0YTogUmF3TWVzc2FnZURlbHRhRXZlbnQuRGVsdGE7XG5cbiAgdHlwZTogJ21lc3NhZ2VfZGVsdGEnO1xuXG4gIC8qKlxuICAgKiBCaWxsaW5nIGFuZCByYXRlLWxpbWl0IHVzYWdlLlxuICAgKlxuICAgKiBBbnRocm9waWMncyBBUEkgYmlsbHMgYW5kIHJhdGUtbGltaXRzIGJ5IHRva2VuIGNvdW50cywgYXMgdG9rZW5zIHJlcHJlc2VudCB0aGVcbiAgICogdW5kZXJseWluZyBjb3N0IHRvIG91ciBzeXN0ZW1zLlxuICAgKlxuICAgKiBVbmRlciB0aGUgaG9vZCwgdGhlIEFQSSB0cmFuc2Zvcm1zIHJlcXVlc3RzIGludG8gYSBmb3JtYXQgc3VpdGFibGUgZm9yIHRoZVxuICAgKiBtb2RlbC4gVGhlIG1vZGVsJ3Mgb3V0cHV0IHRoZW4gZ29lcyB0aHJvdWdoIGEgcGFyc2luZyBzdGFnZSBiZWZvcmUgYmVjb21pbmcgYW5cbiAgICogQVBJIHJlc3BvbnNlLiBBcyBhIHJlc3VsdCwgdGhlIHRva2VuIGNvdW50cyBpbiBgdXNhZ2VgIHdpbGwgbm90IG1hdGNoIG9uZS10by1vbmVcbiAgICogd2l0aCB0aGUgZXhhY3QgdmlzaWJsZSBjb250ZW50IG9mIGFuIEFQSSByZXF1ZXN0IG9yIHJlc3BvbnNlLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgYG91dHB1dF90b2tlbnNgIHdpbGwgYmUgbm9uLXplcm8sIGV2ZW4gZm9yIGFuIGVtcHR5IHN0cmluZyByZXNwb25zZVxuICAgKiBmcm9tIENsYXVkZS5cbiAgICovXG4gIHVzYWdlOiBNZXNzYWdlRGVsdGFVc2FnZTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBSYXdNZXNzYWdlRGVsdGFFdmVudCB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgRGVsdGEge1xuICAgIHN0b3BfcmVhc29uOiAnZW5kX3R1cm4nIHwgJ21heF90b2tlbnMnIHwgJ3N0b3Bfc2VxdWVuY2UnIHwgJ3Rvb2xfdXNlJyB8IG51bGw7XG5cbiAgICBzdG9wX3NlcXVlbmNlOiBzdHJpbmcgfCBudWxsO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF3TWVzc2FnZVN0YXJ0RXZlbnQge1xuICBtZXNzYWdlOiBNZXNzYWdlO1xuXG4gIHR5cGU6ICdtZXNzYWdlX3N0YXJ0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSYXdNZXNzYWdlU3RvcEV2ZW50IHtcbiAgdHlwZTogJ21lc3NhZ2Vfc3RvcCc7XG59XG5cbmV4cG9ydCB0eXBlIFJhd01lc3NhZ2VTdHJlYW1FdmVudCA9XG4gIHwgUmF3TWVzc2FnZVN0YXJ0RXZlbnRcbiAgfCBSYXdNZXNzYWdlRGVsdGFFdmVudFxuICB8IFJhd01lc3NhZ2VTdG9wRXZlbnRcbiAgfCBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50XG4gIHwgUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudFxuICB8IFJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudDtcblxuZXhwb3J0IGludGVyZmFjZSBUZXh0QmxvY2sge1xuICAvKipcbiAgICogQ2l0YXRpb25zIHN1cHBvcnRpbmcgdGhlIHRleHQgYmxvY2suXG4gICAqXG4gICAqIFRoZSB0eXBlIG9mIGNpdGF0aW9uIHJldHVybmVkIHdpbGwgZGVwZW5kIG9uIHRoZSB0eXBlIG9mIGRvY3VtZW50IGJlaW5nIGNpdGVkLlxuICAgKiBDaXRpbmcgYSBQREYgcmVzdWx0cyBpbiBgcGFnZV9sb2NhdGlvbmAsIHBsYWluIHRleHQgcmVzdWx0cyBpbiBgY2hhcl9sb2NhdGlvbmAsXG4gICAqIGFuZCBjb250ZW50IGRvY3VtZW50IHJlc3VsdHMgaW4gYGNvbnRlbnRfYmxvY2tfbG9jYXRpb25gLlxuICAgKi9cbiAgY2l0YXRpb25zOiBBcnJheTxUZXh0Q2l0YXRpb24+IHwgbnVsbDtcblxuICB0ZXh0OiBzdHJpbmc7XG5cbiAgdHlwZTogJ3RleHQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRleHRCbG9ja1BhcmFtIHtcbiAgdGV4dDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0ZXh0JztcblxuICBjYWNoZV9jb250cm9sPzogQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcblxuICBjaXRhdGlvbnM/OiBBcnJheTxUZXh0Q2l0YXRpb25QYXJhbT4gfCBudWxsO1xufVxuXG5leHBvcnQgdHlwZSBUZXh0Q2l0YXRpb24gPSBDaXRhdGlvbkNoYXJMb2NhdGlvbiB8IENpdGF0aW9uUGFnZUxvY2F0aW9uIHwgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbjtcblxuZXhwb3J0IHR5cGUgVGV4dENpdGF0aW9uUGFyYW0gPVxuICB8IENpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW1cbiAgfCBDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtXG4gIHwgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtO1xuXG5leHBvcnQgaW50ZXJmYWNlIFRleHREZWx0YSB7XG4gIHRleHQ6IHN0cmluZztcblxuICB0eXBlOiAndGV4dF9kZWx0YSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbCB7XG4gIC8qKlxuICAgKiBbSlNPTiBzY2hlbWFdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnLykgZm9yIHRoaXMgdG9vbCdzIGlucHV0LlxuICAgKlxuICAgKiBUaGlzIGRlZmluZXMgdGhlIHNoYXBlIG9mIHRoZSBgaW5wdXRgIHRoYXQgeW91ciB0b29sIGFjY2VwdHMgYW5kIHRoYXQgdGhlIG1vZGVsXG4gICAqIHdpbGwgcHJvZHVjZS5cbiAgICovXG4gIGlucHV0X3NjaGVtYTogVG9vbC5JbnB1dFNjaGVtYTtcblxuICAvKipcbiAgICogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICpcbiAgICogVGhpcyBpcyBob3cgdGhlIHRvb2wgd2lsbCBiZSBjYWxsZWQgYnkgdGhlIG1vZGVsIGFuZCBpbiB0b29sX3VzZSBibG9ja3MuXG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG5cbiAgY2FjaGVfY29udHJvbD86IENhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG5cbiAgLyoqXG4gICAqIERlc2NyaXB0aW9uIG9mIHdoYXQgdGhpcyB0b29sIGRvZXMuXG4gICAqXG4gICAqIFRvb2wgZGVzY3JpcHRpb25zIHNob3VsZCBiZSBhcyBkZXRhaWxlZCBhcyBwb3NzaWJsZS4gVGhlIG1vcmUgaW5mb3JtYXRpb24gdGhhdFxuICAgKiB0aGUgbW9kZWwgaGFzIGFib3V0IHdoYXQgdGhlIHRvb2wgaXMgYW5kIGhvdyB0byB1c2UgaXQsIHRoZSBiZXR0ZXIgaXQgd2lsbFxuICAgKiBwZXJmb3JtLiBZb3UgY2FuIHVzZSBuYXR1cmFsIGxhbmd1YWdlIGRlc2NyaXB0aW9ucyB0byByZWluZm9yY2UgaW1wb3J0YW50XG4gICAqIGFzcGVjdHMgb2YgdGhlIHRvb2wgaW5wdXQgSlNPTiBzY2hlbWEuXG4gICAqL1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBUb29sIHtcbiAgLyoqXG4gICAqIFtKU09OIHNjaGVtYV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvKSBmb3IgdGhpcyB0b29sJ3MgaW5wdXQuXG4gICAqXG4gICAqIFRoaXMgZGVmaW5lcyB0aGUgc2hhcGUgb2YgdGhlIGBpbnB1dGAgdGhhdCB5b3VyIHRvb2wgYWNjZXB0cyBhbmQgdGhhdCB0aGUgbW9kZWxcbiAgICogd2lsbCBwcm9kdWNlLlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBJbnB1dFNjaGVtYSB7XG4gICAgdHlwZTogJ29iamVjdCc7XG5cbiAgICBwcm9wZXJ0aWVzPzogdW5rbm93biB8IG51bGw7XG4gICAgW2s6IHN0cmluZ106IHVua25vd247XG4gIH1cbn1cblxuLyoqXG4gKiBIb3cgdGhlIG1vZGVsIHNob3VsZCB1c2UgdGhlIHByb3ZpZGVkIHRvb2xzLiBUaGUgbW9kZWwgY2FuIHVzZSBhIHNwZWNpZmljIHRvb2wsXG4gKiBhbnkgYXZhaWxhYmxlIHRvb2wsIG9yIGRlY2lkZSBieSBpdHNlbGYuXG4gKi9cbmV4cG9ydCB0eXBlIFRvb2xDaG9pY2UgPSBUb29sQ2hvaWNlQXV0byB8IFRvb2xDaG9pY2VBbnkgfCBUb29sQ2hvaWNlVG9vbDtcblxuLyoqXG4gKiBUaGUgbW9kZWwgd2lsbCB1c2UgYW55IGF2YWlsYWJsZSB0b29scy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUb29sQ2hvaWNlQW55IHtcbiAgdHlwZTogJ2FueSc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZGlzYWJsZSBwYXJhbGxlbCB0b29sIHVzZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC4gSWYgc2V0IHRvIGB0cnVlYCwgdGhlIG1vZGVsIHdpbGwgb3V0cHV0IGV4YWN0bHkgb25lIHRvb2xcbiAgICogdXNlLlxuICAgKi9cbiAgZGlzYWJsZV9wYXJhbGxlbF90b29sX3VzZT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVGhlIG1vZGVsIHdpbGwgYXV0b21hdGljYWxseSBkZWNpZGUgd2hldGhlciB0byB1c2UgdG9vbHMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbENob2ljZUF1dG8ge1xuICB0eXBlOiAnYXV0byc7XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gZGlzYWJsZSBwYXJhbGxlbCB0b29sIHVzZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYGZhbHNlYC4gSWYgc2V0IHRvIGB0cnVlYCwgdGhlIG1vZGVsIHdpbGwgb3V0cHV0IGF0IG1vc3Qgb25lIHRvb2xcbiAgICogdXNlLlxuICAgKi9cbiAgZGlzYWJsZV9wYXJhbGxlbF90b29sX3VzZT86IGJvb2xlYW47XG59XG5cbi8qKlxuICogVGhlIG1vZGVsIHdpbGwgdXNlIHRoZSBzcGVjaWZpZWQgdG9vbCB3aXRoIGB0b29sX2Nob2ljZS5uYW1lYC5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBUb29sQ2hvaWNlVG9vbCB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0byB1c2UuXG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3Rvb2wnO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGRpc2FibGUgcGFyYWxsZWwgdG9vbCB1c2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGBmYWxzZWAuIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBtb2RlbCB3aWxsIG91dHB1dCBleGFjdGx5IG9uZSB0b29sXG4gICAqIHVzZS5cbiAgICovXG4gIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xSZXN1bHRCbG9ja1BhcmFtIHtcbiAgdG9vbF91c2VfaWQ6IHN0cmluZztcblxuICB0eXBlOiAndG9vbF9yZXN1bHQnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIGNvbnRlbnQ/OiBzdHJpbmcgfCBBcnJheTxUZXh0QmxvY2tQYXJhbSB8IEltYWdlQmxvY2tQYXJhbT47XG5cbiAgaXNfZXJyb3I/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xVc2VCbG9jayB7XG4gIGlkOiBzdHJpbmc7XG5cbiAgaW5wdXQ6IHVua25vd247XG5cbiAgbmFtZTogc3RyaW5nO1xuXG4gIHR5cGU6ICd0b29sX3VzZSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbFVzZUJsb2NrUGFyYW0ge1xuICBpZDogc3RyaW5nO1xuXG4gIGlucHV0OiB1bmtub3duO1xuXG4gIG5hbWU6IHN0cmluZztcblxuICB0eXBlOiAndG9vbF91c2UnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFVzYWdlIHtcbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHVzZWQgdG8gY3JlYXRlIHRoZSBjYWNoZSBlbnRyeS5cbiAgICovXG4gIGNhY2hlX2NyZWF0aW9uX2lucHV0X3Rva2VuczogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgcmVhZCBmcm9tIHRoZSBjYWNoZS5cbiAgICovXG4gIGNhY2hlX3JlYWRfaW5wdXRfdG9rZW5zOiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyB3aGljaCB3ZXJlIHVzZWQuXG4gICAqL1xuICBpbnB1dF90b2tlbnM6IG51bWJlcjtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBvdXRwdXQgdG9rZW5zIHdoaWNoIHdlcmUgdXNlZC5cbiAgICovXG4gIG91dHB1dF90b2tlbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtcyA9IE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgfCBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlIHtcbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnMgdG8gZ2VuZXJhdGUgYmVmb3JlIHN0b3BwaW5nLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgb3VyIG1vZGVscyBtYXkgc3RvcCBfYmVmb3JlXyByZWFjaGluZyB0aGlzIG1heGltdW0uIFRoaXMgcGFyYW1ldGVyXG4gICAqIG9ubHkgc3BlY2lmaWVzIHRoZSBhYnNvbHV0ZSBtYXhpbXVtIG51bWJlciBvZiB0b2tlbnMgdG8gZ2VuZXJhdGUuXG4gICAqXG4gICAqIERpZmZlcmVudCBtb2RlbHMgaGF2ZSBkaWZmZXJlbnQgbWF4aW11bSB2YWx1ZXMgZm9yIHRoaXMgcGFyYW1ldGVyLiBTZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBkZXRhaWxzLlxuICAgKi9cbiAgbWF4X3Rva2VuczogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBJbnB1dCBtZXNzYWdlcy5cbiAgICpcbiAgICogT3VyIG1vZGVscyBhcmUgdHJhaW5lZCB0byBvcGVyYXRlIG9uIGFsdGVybmF0aW5nIGB1c2VyYCBhbmQgYGFzc2lzdGFudGBcbiAgICogY29udmVyc2F0aW9uYWwgdHVybnMuIFdoZW4gY3JlYXRpbmcgYSBuZXcgYE1lc3NhZ2VgLCB5b3Ugc3BlY2lmeSB0aGUgcHJpb3JcbiAgICogY29udmVyc2F0aW9uYWwgdHVybnMgd2l0aCB0aGUgYG1lc3NhZ2VzYCBwYXJhbWV0ZXIsIGFuZCB0aGUgbW9kZWwgdGhlbiBnZW5lcmF0ZXNcbiAgICogdGhlIG5leHQgYE1lc3NhZ2VgIGluIHRoZSBjb252ZXJzYXRpb24uIENvbnNlY3V0aXZlIGB1c2VyYCBvciBgYXNzaXN0YW50YCB0dXJuc1xuICAgKiBpbiB5b3VyIHJlcXVlc3Qgd2lsbCBiZSBjb21iaW5lZCBpbnRvIGEgc2luZ2xlIHR1cm4uXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBtdXN0IGJlIGFuIG9iamVjdCB3aXRoIGEgYHJvbGVgIGFuZCBgY29udGVudGAuIFlvdSBjYW5cbiAgICogc3BlY2lmeSBhIHNpbmdsZSBgdXNlcmAtcm9sZSBtZXNzYWdlLCBvciB5b3UgY2FuIGluY2x1ZGUgbXVsdGlwbGUgYHVzZXJgIGFuZFxuICAgKiBgYXNzaXN0YW50YCBtZXNzYWdlcy5cbiAgICpcbiAgICogSWYgdGhlIGZpbmFsIG1lc3NhZ2UgdXNlcyB0aGUgYGFzc2lzdGFudGAgcm9sZSwgdGhlIHJlc3BvbnNlIGNvbnRlbnQgd2lsbFxuICAgKiBjb250aW51ZSBpbW1lZGlhdGVseSBmcm9tIHRoZSBjb250ZW50IGluIHRoYXQgbWVzc2FnZS4gVGhpcyBjYW4gYmUgdXNlZCB0b1xuICAgKiBjb25zdHJhaW4gcGFydCBvZiB0aGUgbW9kZWwncyByZXNwb25zZS5cbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIGEgc2luZ2xlIGB1c2VyYCBtZXNzYWdlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1dXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggbXVsdGlwbGUgY29udmVyc2F0aW9uYWwgdHVybnM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbyB0aGVyZS5cIiB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIkhpLCBJJ20gQ2xhdWRlLiBIb3cgY2FuIEkgaGVscCB5b3U/XCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiQ2FuIHlvdSBleHBsYWluIExMTXMgaW4gcGxhaW4gRW5nbGlzaD9cIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHBhcnRpYWxseS1maWxsZWQgcmVzcG9uc2UgZnJvbSBDbGF1ZGU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIldoYXQncyB0aGUgR3JlZWsgbmFtZSBmb3IgU3VuPyAoQSkgU29sIChCKSBIZWxpb3MgKEMpIFN1blwiXG4gICAqICAgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJUaGUgYmVzdCBhbnN3ZXIgaXMgKFwiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogRWFjaCBpbnB1dCBtZXNzYWdlIGBjb250ZW50YCBtYXkgYmUgZWl0aGVyIGEgc2luZ2xlIGBzdHJpbmdgIG9yIGFuIGFycmF5IG9mXG4gICAqIGNvbnRlbnQgYmxvY2tzLCB3aGVyZSBlYWNoIGJsb2NrIGhhcyBhIHNwZWNpZmljIGB0eXBlYC4gVXNpbmcgYSBgc3RyaW5nYCBmb3JcbiAgICogYGNvbnRlbnRgIGlzIHNob3J0aGFuZCBmb3IgYW4gYXJyYXkgb2Ygb25lIGNvbnRlbnQgYmxvY2sgb2YgdHlwZSBgXCJ0ZXh0XCJgLiBUaGVcbiAgICogZm9sbG93aW5nIGlucHV0IG1lc3NhZ2VzIGFyZSBlcXVpdmFsZW50OlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfVxuICAgKiBgYGBcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1dIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFN0YXJ0aW5nIHdpdGggQ2xhdWRlIDMgbW9kZWxzLCB5b3UgY2FuIGFsc28gc2VuZCBpbWFnZSBjb250ZW50IGJsb2NrczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7XG4gICAqICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgIFwiY29udGVudFwiOiBbXG4gICAqICAgICB7XG4gICAqICAgICAgIFwidHlwZVwiOiBcImltYWdlXCIsXG4gICAqICAgICAgIFwic291cmNlXCI6IHtcbiAgICogICAgICAgICBcInR5cGVcIjogXCJiYXNlNjRcIixcbiAgICogICAgICAgICBcIm1lZGlhX3R5cGVcIjogXCJpbWFnZS9qcGVnXCIsXG4gICAqICAgICAgICAgXCJkYXRhXCI6IFwiLzlqLzRBQVFTa1pKUmcuLi5cIlxuICAgKiAgICAgICB9XG4gICAqICAgICB9LFxuICAgKiAgICAgeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIldoYXQgaXMgaW4gdGhpcyBpbWFnZT9cIiB9XG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBXZSBjdXJyZW50bHkgc3VwcG9ydCB0aGUgYGJhc2U2NGAgc291cmNlIHR5cGUgZm9yIGltYWdlcywgYW5kIHRoZSBgaW1hZ2UvanBlZ2AsXG4gICAqIGBpbWFnZS9wbmdgLCBgaW1hZ2UvZ2lmYCwgYW5kIGBpbWFnZS93ZWJwYCBtZWRpYSB0eXBlcy5cbiAgICpcbiAgICogU2VlIFtleGFtcGxlc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLWV4YW1wbGVzI3Zpc2lvbikgZm9yXG4gICAqIG1vcmUgaW5wdXQgZXhhbXBsZXMuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBpZiB5b3Ugd2FudCB0byBpbmNsdWRlIGFcbiAgICogW3N5c3RlbSBwcm9tcHRdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3Mvc3lzdGVtLXByb21wdHMpLCB5b3UgY2FuIHVzZVxuICAgKiB0aGUgdG9wLWxldmVsIGBzeXN0ZW1gIHBhcmFtZXRlciBcdTIwMTQgdGhlcmUgaXMgbm8gYFwic3lzdGVtXCJgIHJvbGUgZm9yIGlucHV0XG4gICAqIG1lc3NhZ2VzIGluIHRoZSBNZXNzYWdlcyBBUEkuXG4gICAqL1xuICBtZXNzYWdlczogQXJyYXk8TWVzc2FnZVBhcmFtPjtcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gICAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gICAqL1xuICBtb2RlbDogTW9kZWw7XG5cbiAgLyoqXG4gICAqIEFuIG9iamVjdCBkZXNjcmliaW5nIG1ldGFkYXRhIGFib3V0IHRoZSByZXF1ZXN0LlxuICAgKi9cbiAgbWV0YWRhdGE/OiBNZXRhZGF0YTtcblxuICAvKipcbiAgICogQ3VzdG9tIHRleHQgc2VxdWVuY2VzIHRoYXQgd2lsbCBjYXVzZSB0aGUgbW9kZWwgdG8gc3RvcCBnZW5lcmF0aW5nLlxuICAgKlxuICAgKiBPdXIgbW9kZWxzIHdpbGwgbm9ybWFsbHkgc3RvcCB3aGVuIHRoZXkgaGF2ZSBuYXR1cmFsbHkgY29tcGxldGVkIHRoZWlyIHR1cm4sXG4gICAqIHdoaWNoIHdpbGwgcmVzdWx0IGluIGEgcmVzcG9uc2UgYHN0b3BfcmVhc29uYCBvZiBgXCJlbmRfdHVyblwiYC5cbiAgICpcbiAgICogSWYgeW91IHdhbnQgdGhlIG1vZGVsIHRvIHN0b3AgZ2VuZXJhdGluZyB3aGVuIGl0IGVuY291bnRlcnMgY3VzdG9tIHN0cmluZ3Mgb2ZcbiAgICogdGV4dCwgeW91IGNhbiB1c2UgdGhlIGBzdG9wX3NlcXVlbmNlc2AgcGFyYW1ldGVyLiBJZiB0aGUgbW9kZWwgZW5jb3VudGVycyBvbmUgb2ZcbiAgICogdGhlIGN1c3RvbSBzZXF1ZW5jZXMsIHRoZSByZXNwb25zZSBgc3RvcF9yZWFzb25gIHZhbHVlIHdpbGwgYmUgYFwic3RvcF9zZXF1ZW5jZVwiYFxuICAgKiBhbmQgdGhlIHJlc3BvbnNlIGBzdG9wX3NlcXVlbmNlYCB2YWx1ZSB3aWxsIGNvbnRhaW4gdGhlIG1hdGNoZWQgc3RvcCBzZXF1ZW5jZS5cbiAgICovXG4gIHN0b3Bfc2VxdWVuY2VzPzogQXJyYXk8c3RyaW5nPjtcblxuICAvKipcbiAgICogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnQgZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLXN0cmVhbWluZykgZm9yXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW0/OiBib29sZWFuO1xuXG4gIC8qKlxuICAgKiBTeXN0ZW0gcHJvbXB0LlxuICAgKlxuICAgKiBBIHN5c3RlbSBwcm9tcHQgaXMgYSB3YXkgb2YgcHJvdmlkaW5nIGNvbnRleHQgYW5kIGluc3RydWN0aW9ucyB0byBDbGF1ZGUsIHN1Y2hcbiAgICogYXMgc3BlY2lmeWluZyBhIHBhcnRpY3VsYXIgZ29hbCBvciByb2xlLiBTZWUgb3VyXG4gICAqIFtndWlkZSB0byBzeXN0ZW0gcHJvbXB0c10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9zeXN0ZW0tcHJvbXB0cykuXG4gICAqL1xuICBzeXN0ZW0/OiBzdHJpbmcgfCBBcnJheTxUZXh0QmxvY2tQYXJhbT47XG5cbiAgLyoqXG4gICAqIEFtb3VudCBvZiByYW5kb21uZXNzIGluamVjdGVkIGludG8gdGhlIHJlc3BvbnNlLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgMS4wYC4gUmFuZ2VzIGZyb20gYDAuMGAgdG8gYDEuMGAuIFVzZSBgdGVtcGVyYXR1cmVgIGNsb3NlciB0byBgMC4wYFxuICAgKiBmb3IgYW5hbHl0aWNhbCAvIG11bHRpcGxlIGNob2ljZSwgYW5kIGNsb3NlciB0byBgMS4wYCBmb3IgY3JlYXRpdmUgYW5kXG4gICAqIGdlbmVyYXRpdmUgdGFza3MuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBldmVuIHdpdGggYHRlbXBlcmF0dXJlYCBvZiBgMC4wYCwgdGhlIHJlc3VsdHMgd2lsbCBub3QgYmUgZnVsbHlcbiAgICogZGV0ZXJtaW5pc3RpYy5cbiAgICovXG4gIHRlbXBlcmF0dXJlPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBIb3cgdGhlIG1vZGVsIHNob3VsZCB1c2UgdGhlIHByb3ZpZGVkIHRvb2xzLiBUaGUgbW9kZWwgY2FuIHVzZSBhIHNwZWNpZmljIHRvb2wsXG4gICAqIGFueSBhdmFpbGFibGUgdG9vbCwgb3IgZGVjaWRlIGJ5IGl0c2VsZi5cbiAgICovXG4gIHRvb2xfY2hvaWNlPzogVG9vbENob2ljZTtcblxuICAvKipcbiAgICogRGVmaW5pdGlvbnMgb2YgdG9vbHMgdGhhdCB0aGUgbW9kZWwgbWF5IHVzZS5cbiAgICpcbiAgICogSWYgeW91IGluY2x1ZGUgYHRvb2xzYCBpbiB5b3VyIEFQSSByZXF1ZXN0LCB0aGUgbW9kZWwgbWF5IHJldHVybiBgdG9vbF91c2VgXG4gICAqIGNvbnRlbnQgYmxvY2tzIHRoYXQgcmVwcmVzZW50IHRoZSBtb2RlbCdzIHVzZSBvZiB0aG9zZSB0b29scy4gWW91IGNhbiB0aGVuIHJ1blxuICAgKiB0aG9zZSB0b29scyB1c2luZyB0aGUgdG9vbCBpbnB1dCBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGFuZCB0aGVuIG9wdGlvbmFsbHlcbiAgICogcmV0dXJuIHJlc3VsdHMgYmFjayB0byB0aGUgbW9kZWwgdXNpbmcgYHRvb2xfcmVzdWx0YCBjb250ZW50IGJsb2Nrcy5cbiAgICpcbiAgICogRWFjaCB0b29sIGRlZmluaXRpb24gaW5jbHVkZXM6XG4gICAqXG4gICAqIC0gYG5hbWVgOiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKiAtIGBkZXNjcmlwdGlvbmA6IE9wdGlvbmFsLCBidXQgc3Ryb25nbHktcmVjb21tZW5kZWQgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wuXG4gICAqIC0gYGlucHV0X3NjaGVtYWA6IFtKU09OIHNjaGVtYV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvKSBmb3IgdGhlIHRvb2wgYGlucHV0YFxuICAgKiAgIHNoYXBlIHRoYXQgdGhlIG1vZGVsIHdpbGwgcHJvZHVjZSBpbiBgdG9vbF91c2VgIG91dHB1dCBjb250ZW50IGJsb2Nrcy5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGlmIHlvdSBkZWZpbmVkIGB0b29sc2AgYXM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwibmFtZVwiOiBcImdldF9zdG9ja19wcmljZVwiLFxuICAgKiAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkdldCB0aGUgY3VycmVudCBzdG9jayBwcmljZSBmb3IgYSBnaXZlbiB0aWNrZXIgc3ltYm9sLlwiLFxuICAgKiAgICAgXCJpbnB1dF9zY2hlbWFcIjoge1xuICAgKiAgICAgICBcInR5cGVcIjogXCJvYmplY3RcIixcbiAgICogICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcbiAgICogICAgICAgICBcInRpY2tlclwiOiB7XG4gICAqICAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcbiAgICogICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgc3RvY2sgdGlja2VyIHN5bWJvbCwgZS5nLiBBQVBMIGZvciBBcHBsZSBJbmMuXCJcbiAgICogICAgICAgICB9XG4gICAqICAgICAgIH0sXG4gICAqICAgICAgIFwicmVxdWlyZWRcIjogW1widGlja2VyXCJdXG4gICAqICAgICB9XG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBBbmQgdGhlbiBhc2tlZCB0aGUgbW9kZWwgXCJXaGF0J3MgdGhlIFMmUCA1MDAgYXQgdG9kYXk/XCIsIHRoZSBtb2RlbCBtaWdodCBwcm9kdWNlXG4gICAqIGB0b29sX3VzZWAgY29udGVudCBibG9ja3MgaW4gdGhlIHJlc3BvbnNlIGxpa2UgdGhpczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJ0eXBlXCI6IFwidG9vbF91c2VcIixcbiAgICogICAgIFwiaWRcIjogXCJ0b29sdV8wMUQ3RkxyZmg0R1lxN3lUMVVMRmV5TVZcIixcbiAgICogICAgIFwibmFtZVwiOiBcImdldF9zdG9ja19wcmljZVwiLFxuICAgKiAgICAgXCJpbnB1dFwiOiB7IFwidGlja2VyXCI6IFwiXkdTUENcIiB9XG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBZb3UgbWlnaHQgdGhlbiBydW4geW91ciBgZ2V0X3N0b2NrX3ByaWNlYCB0b29sIHdpdGggYHtcInRpY2tlclwiOiBcIl5HU1BDXCJ9YCBhcyBhblxuICAgKiBpbnB1dCwgYW5kIHJldHVybiB0aGUgZm9sbG93aW5nIGJhY2sgdG8gdGhlIG1vZGVsIGluIGEgc3Vic2VxdWVudCBgdXNlcmBcbiAgICogbWVzc2FnZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJ0eXBlXCI6IFwidG9vbF9yZXN1bHRcIixcbiAgICogICAgIFwidG9vbF91c2VfaWRcIjogXCJ0b29sdV8wMUQ3RkxyZmg0R1lxN3lUMVVMRmV5TVZcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIjI1OS43NSBVU0RcIlxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogVG9vbHMgY2FuIGJlIHVzZWQgZm9yIHdvcmtmbG93cyB0aGF0IGluY2x1ZGUgcnVubmluZyBjbGllbnQtc2lkZSB0b29scyBhbmRcbiAgICogZnVuY3Rpb25zLCBvciBtb3JlIGdlbmVyYWxseSB3aGVuZXZlciB5b3Ugd2FudCB0aGUgbW9kZWwgdG8gcHJvZHVjZSBhIHBhcnRpY3VsYXJcbiAgICogSlNPTiBzdHJ1Y3R1cmUgb2Ygb3V0cHV0LlxuICAgKlxuICAgKiBTZWUgb3VyIFtndWlkZV0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy90b29sLXVzZSkgZm9yIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIHRvb2xzPzogQXJyYXk8VG9vbD47XG5cbiAgLyoqXG4gICAqIE9ubHkgc2FtcGxlIGZyb20gdGhlIHRvcCBLIG9wdGlvbnMgZm9yIGVhY2ggc3Vic2VxdWVudCB0b2tlbi5cbiAgICpcbiAgICogVXNlZCB0byByZW1vdmUgXCJsb25nIHRhaWxcIiBsb3cgcHJvYmFiaWxpdHkgcmVzcG9uc2VzLlxuICAgKiBbTGVhcm4gbW9yZSB0ZWNobmljYWwgZGV0YWlscyBoZXJlXShodHRwczovL3Rvd2FyZHNkYXRhc2NpZW5jZS5jb20vaG93LXRvLXNhbXBsZS1mcm9tLWxhbmd1YWdlLW1vZGVscy02ODJiY2ViOTcyNzcpLlxuICAgKlxuICAgKiBSZWNvbW1lbmRlZCBmb3IgYWR2YW5jZWQgdXNlIGNhc2VzIG9ubHkuIFlvdSB1c3VhbGx5IG9ubHkgbmVlZCB0byB1c2VcbiAgICogYHRlbXBlcmF0dXJlYC5cbiAgICovXG4gIHRvcF9rPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBVc2UgbnVjbGV1cyBzYW1wbGluZy5cbiAgICpcbiAgICogSW4gbnVjbGV1cyBzYW1wbGluZywgd2UgY29tcHV0ZSB0aGUgY3VtdWxhdGl2ZSBkaXN0cmlidXRpb24gb3ZlciBhbGwgdGhlIG9wdGlvbnNcbiAgICogZm9yIGVhY2ggc3Vic2VxdWVudCB0b2tlbiBpbiBkZWNyZWFzaW5nIHByb2JhYmlsaXR5IG9yZGVyIGFuZCBjdXQgaXQgb2ZmIG9uY2UgaXRcbiAgICogcmVhY2hlcyBhIHBhcnRpY3VsYXIgcHJvYmFiaWxpdHkgc3BlY2lmaWVkIGJ5IGB0b3BfcGAuIFlvdSBzaG91bGQgZWl0aGVyIGFsdGVyXG4gICAqIGB0ZW1wZXJhdHVyZWAgb3IgYHRvcF9wYCwgYnV0IG5vdCBib3RoLlxuICAgKlxuICAgKiBSZWNvbW1lbmRlZCBmb3IgYWR2YW5jZWQgdXNlIGNhc2VzIG9ubHkuIFlvdSB1c3VhbGx5IG9ubHkgbmVlZCB0byB1c2VcbiAgICogYHRlbXBlcmF0dXJlYC5cbiAgICovXG4gIHRvcF9wPzogbnVtYmVyO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGBBbnRocm9waWMuTWVzc2FnZXMuVG9vbENob2ljZUF1dG9gIGluc3RlYWRcbiAgICovXG4gIGV4cG9ydCB0eXBlIE1ldGFkYXRhID0gTWVzc2FnZXNBUEkuTWV0YWRhdGE7XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBgQW50aHJvcGljLk1lc3NhZ2VzLlRvb2xDaG9pY2VBdXRvYCBpbnN0ZWFkXG4gICAqL1xuICBleHBvcnQgdHlwZSBUb29sQ2hvaWNlQXV0byA9IE1lc3NhZ2VzQVBJLlRvb2xDaG9pY2VBdXRvO1xuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCB1c2UgYEFudGhyb3BpYy5NZXNzYWdlcy5Ub29sQ2hvaWNlQW55YCBpbnN0ZWFkXG4gICAqL1xuICBleHBvcnQgdHlwZSBUb29sQ2hvaWNlQW55ID0gTWVzc2FnZXNBUEkuVG9vbENob2ljZUFueTtcblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGBBbnRocm9waWMuTWVzc2FnZXMuVG9vbENob2ljZVRvb2xgIGluc3RlYWRcbiAgICovXG4gIGV4cG9ydCB0eXBlIFRvb2xDaG9pY2VUb29sID0gTWVzc2FnZXNBUEkuVG9vbENob2ljZVRvb2w7XG5cbiAgZXhwb3J0IHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IE1lc3NhZ2VzQVBJLk1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBNZXNzYWdlc0FQSS5NZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgZXh0ZW5kcyBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudCBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtc3RyZWFtaW5nKSBmb3JcbiAgICogZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbT86IGZhbHNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgZXh0ZW5kcyBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudCBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtc3RyZWFtaW5nKSBmb3JcbiAgICogZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbTogdHJ1ZTtcbn1cblxuZXhwb3J0IHR5cGUgTWVzc2FnZVN0cmVhbVBhcmFtcyA9IE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlO1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyB7XG4gIC8qKlxuICAgKiBJbnB1dCBtZXNzYWdlcy5cbiAgICpcbiAgICogT3VyIG1vZGVscyBhcmUgdHJhaW5lZCB0byBvcGVyYXRlIG9uIGFsdGVybmF0aW5nIGB1c2VyYCBhbmQgYGFzc2lzdGFudGBcbiAgICogY29udmVyc2F0aW9uYWwgdHVybnMuIFdoZW4gY3JlYXRpbmcgYSBuZXcgYE1lc3NhZ2VgLCB5b3Ugc3BlY2lmeSB0aGUgcHJpb3JcbiAgICogY29udmVyc2F0aW9uYWwgdHVybnMgd2l0aCB0aGUgYG1lc3NhZ2VzYCBwYXJhbWV0ZXIsIGFuZCB0aGUgbW9kZWwgdGhlbiBnZW5lcmF0ZXNcbiAgICogdGhlIG5leHQgYE1lc3NhZ2VgIGluIHRoZSBjb252ZXJzYXRpb24uIENvbnNlY3V0aXZlIGB1c2VyYCBvciBgYXNzaXN0YW50YCB0dXJuc1xuICAgKiBpbiB5b3VyIHJlcXVlc3Qgd2lsbCBiZSBjb21iaW5lZCBpbnRvIGEgc2luZ2xlIHR1cm4uXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBtdXN0IGJlIGFuIG9iamVjdCB3aXRoIGEgYHJvbGVgIGFuZCBgY29udGVudGAuIFlvdSBjYW5cbiAgICogc3BlY2lmeSBhIHNpbmdsZSBgdXNlcmAtcm9sZSBtZXNzYWdlLCBvciB5b3UgY2FuIGluY2x1ZGUgbXVsdGlwbGUgYHVzZXJgIGFuZFxuICAgKiBgYXNzaXN0YW50YCBtZXNzYWdlcy5cbiAgICpcbiAgICogSWYgdGhlIGZpbmFsIG1lc3NhZ2UgdXNlcyB0aGUgYGFzc2lzdGFudGAgcm9sZSwgdGhlIHJlc3BvbnNlIGNvbnRlbnQgd2lsbFxuICAgKiBjb250aW51ZSBpbW1lZGlhdGVseSBmcm9tIHRoZSBjb250ZW50IGluIHRoYXQgbWVzc2FnZS4gVGhpcyBjYW4gYmUgdXNlZCB0b1xuICAgKiBjb25zdHJhaW4gcGFydCBvZiB0aGUgbW9kZWwncyByZXNwb25zZS5cbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIGEgc2luZ2xlIGB1c2VyYCBtZXNzYWdlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1dXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggbXVsdGlwbGUgY29udmVyc2F0aW9uYWwgdHVybnM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbyB0aGVyZS5cIiB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIkhpLCBJJ20gQ2xhdWRlLiBIb3cgY2FuIEkgaGVscCB5b3U/XCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiQ2FuIHlvdSBleHBsYWluIExMTXMgaW4gcGxhaW4gRW5nbGlzaD9cIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHBhcnRpYWxseS1maWxsZWQgcmVzcG9uc2UgZnJvbSBDbGF1ZGU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIldoYXQncyB0aGUgR3JlZWsgbmFtZSBmb3IgU3VuPyAoQSkgU29sIChCKSBIZWxpb3MgKEMpIFN1blwiXG4gICAqICAgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJUaGUgYmVzdCBhbnN3ZXIgaXMgKFwiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogRWFjaCBpbnB1dCBtZXNzYWdlIGBjb250ZW50YCBtYXkgYmUgZWl0aGVyIGEgc2luZ2xlIGBzdHJpbmdgIG9yIGFuIGFycmF5IG9mXG4gICAqIGNvbnRlbnQgYmxvY2tzLCB3aGVyZSBlYWNoIGJsb2NrIGhhcyBhIHNwZWNpZmljIGB0eXBlYC4gVXNpbmcgYSBgc3RyaW5nYCBmb3JcbiAgICogYGNvbnRlbnRgIGlzIHNob3J0aGFuZCBmb3IgYW4gYXJyYXkgb2Ygb25lIGNvbnRlbnQgYmxvY2sgb2YgdHlwZSBgXCJ0ZXh0XCJgLiBUaGVcbiAgICogZm9sbG93aW5nIGlucHV0IG1lc3NhZ2VzIGFyZSBlcXVpdmFsZW50OlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfVxuICAgKiBgYGBcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1dIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFN0YXJ0aW5nIHdpdGggQ2xhdWRlIDMgbW9kZWxzLCB5b3UgY2FuIGFsc28gc2VuZCBpbWFnZSBjb250ZW50IGJsb2NrczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7XG4gICAqICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgIFwiY29udGVudFwiOiBbXG4gICAqICAgICB7XG4gICAqICAgICAgIFwidHlwZVwiOiBcImltYWdlXCIsXG4gICAqICAgICAgIFwic291cmNlXCI6IHtcbiAgICogICAgICAgICBcInR5cGVcIjogXCJiYXNlNjRcIixcbiAgICogICAgICAgICBcIm1lZGlhX3R5cGVcIjogXCJpbWFnZS9qcGVnXCIsXG4gICAqICAgICAgICAgXCJkYXRhXCI6IFwiLzlqLzRBQVFTa1pKUmcuLi5cIlxuICAgKiAgICAgICB9XG4gICAqICAgICB9LFxuICAgKiAgICAgeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIldoYXQgaXMgaW4gdGhpcyBpbWFnZT9cIiB9XG4gICAqICAgXVxuICAgKiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBXZSBjdXJyZW50bHkgc3VwcG9ydCB0aGUgYGJhc2U2NGAgc291cmNlIHR5cGUgZm9yIGltYWdlcywgYW5kIHRoZSBgaW1hZ2UvanBlZ2AsXG4gICAqIGBpbWFnZS9wbmdgLCBgaW1hZ2UvZ2lmYCwgYW5kIGBpbWFnZS93ZWJwYCBtZWRpYSB0eXBlcy5cbiAgICpcbiAgICogU2VlIFtleGFtcGxlc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLWV4YW1wbGVzI3Zpc2lvbikgZm9yXG4gICAqIG1vcmUgaW5wdXQgZXhhbXBsZXMuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBpZiB5b3Ugd2FudCB0byBpbmNsdWRlIGFcbiAgICogW3N5c3RlbSBwcm9tcHRdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3Mvc3lzdGVtLXByb21wdHMpLCB5b3UgY2FuIHVzZVxuICAgKiB0aGUgdG9wLWxldmVsIGBzeXN0ZW1gIHBhcmFtZXRlciBcdTIwMTQgdGhlcmUgaXMgbm8gYFwic3lzdGVtXCJgIHJvbGUgZm9yIGlucHV0XG4gICAqIG1lc3NhZ2VzIGluIHRoZSBNZXNzYWdlcyBBUEkuXG4gICAqL1xuICBtZXNzYWdlczogQXJyYXk8TWVzc2FnZVBhcmFtPjtcblxuICAvKipcbiAgICogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gICAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gICAqL1xuICBtb2RlbDogTW9kZWw7XG5cbiAgLyoqXG4gICAqIFN5c3RlbSBwcm9tcHQuXG4gICAqXG4gICAqIEEgc3lzdGVtIHByb21wdCBpcyBhIHdheSBvZiBwcm92aWRpbmcgY29udGV4dCBhbmQgaW5zdHJ1Y3Rpb25zIHRvIENsYXVkZSwgc3VjaFxuICAgKiBhcyBzcGVjaWZ5aW5nIGEgcGFydGljdWxhciBnb2FsIG9yIHJvbGUuIFNlZSBvdXJcbiAgICogW2d1aWRlIHRvIHN5c3RlbSBwcm9tcHRzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3N5c3RlbS1wcm9tcHRzKS5cbiAgICovXG4gIHN5c3RlbT86IHN0cmluZyB8IEFycmF5PFRleHRCbG9ja1BhcmFtPjtcblxuICAvKipcbiAgICogSG93IHRoZSBtb2RlbCBzaG91bGQgdXNlIHRoZSBwcm92aWRlZCB0b29scy4gVGhlIG1vZGVsIGNhbiB1c2UgYSBzcGVjaWZpYyB0b29sLFxuICAgKiBhbnkgYXZhaWxhYmxlIHRvb2wsIG9yIGRlY2lkZSBieSBpdHNlbGYuXG4gICAqL1xuICB0b29sX2Nob2ljZT86IFRvb2xDaG9pY2U7XG5cbiAgLyoqXG4gICAqIERlZmluaXRpb25zIG9mIHRvb2xzIHRoYXQgdGhlIG1vZGVsIG1heSB1c2UuXG4gICAqXG4gICAqIElmIHlvdSBpbmNsdWRlIGB0b29sc2AgaW4geW91ciBBUEkgcmVxdWVzdCwgdGhlIG1vZGVsIG1heSByZXR1cm4gYHRvb2xfdXNlYFxuICAgKiBjb250ZW50IGJsb2NrcyB0aGF0IHJlcHJlc2VudCB0aGUgbW9kZWwncyB1c2Ugb2YgdGhvc2UgdG9vbHMuIFlvdSBjYW4gdGhlbiBydW5cbiAgICogdGhvc2UgdG9vbHMgdXNpbmcgdGhlIHRvb2wgaW5wdXQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBhbmQgdGhlbiBvcHRpb25hbGx5XG4gICAqIHJldHVybiByZXN1bHRzIGJhY2sgdG8gdGhlIG1vZGVsIHVzaW5nIGB0b29sX3Jlc3VsdGAgY29udGVudCBibG9ja3MuXG4gICAqXG4gICAqIEVhY2ggdG9vbCBkZWZpbml0aW9uIGluY2x1ZGVzOlxuICAgKlxuICAgKiAtIGBuYW1lYDogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICogLSBgZGVzY3JpcHRpb25gOiBPcHRpb25hbCwgYnV0IHN0cm9uZ2x5LXJlY29tbWVuZGVkIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sLlxuICAgKiAtIGBpbnB1dF9zY2hlbWFgOiBbSlNPTiBzY2hlbWFdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnLykgZm9yIHRoZSB0b29sIGBpbnB1dGBcbiAgICogICBzaGFwZSB0aGF0IHRoZSBtb2RlbCB3aWxsIHByb2R1Y2UgaW4gYHRvb2xfdXNlYCBvdXRwdXQgY29udGVudCBibG9ja3MuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBpZiB5b3UgZGVmaW5lZCBgdG9vbHNgIGFzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcIm5hbWVcIjogXCJnZXRfc3RvY2tfcHJpY2VcIixcbiAgICogICAgIFwiZGVzY3JpcHRpb25cIjogXCJHZXQgdGhlIGN1cnJlbnQgc3RvY2sgcHJpY2UgZm9yIGEgZ2l2ZW4gdGlja2VyIHN5bWJvbC5cIixcbiAgICogICAgIFwiaW5wdXRfc2NoZW1hXCI6IHtcbiAgICogICAgICAgXCJ0eXBlXCI6IFwib2JqZWN0XCIsXG4gICAqICAgICAgIFwicHJvcGVydGllc1wiOiB7XG4gICAqICAgICAgICAgXCJ0aWNrZXJcIjoge1xuICAgKiAgICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXG4gICAqICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIHN0b2NrIHRpY2tlciBzeW1ib2wsIGUuZy4gQUFQTCBmb3IgQXBwbGUgSW5jLlwiXG4gICAqICAgICAgICAgfVxuICAgKiAgICAgICB9LFxuICAgKiAgICAgICBcInJlcXVpcmVkXCI6IFtcInRpY2tlclwiXVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogQW5kIHRoZW4gYXNrZWQgdGhlIG1vZGVsIFwiV2hhdCdzIHRoZSBTJlAgNTAwIGF0IHRvZGF5P1wiLCB0aGUgbW9kZWwgbWlnaHQgcHJvZHVjZVxuICAgKiBgdG9vbF91c2VgIGNvbnRlbnQgYmxvY2tzIGluIHRoZSByZXNwb25zZSBsaWtlIHRoaXM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwidHlwZVwiOiBcInRvb2xfdXNlXCIsXG4gICAqICAgICBcImlkXCI6IFwidG9vbHVfMDFEN0ZMcmZoNEdZcTd5VDFVTEZleU1WXCIsXG4gICAqICAgICBcIm5hbWVcIjogXCJnZXRfc3RvY2tfcHJpY2VcIixcbiAgICogICAgIFwiaW5wdXRcIjogeyBcInRpY2tlclwiOiBcIl5HU1BDXCIgfVxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogWW91IG1pZ2h0IHRoZW4gcnVuIHlvdXIgYGdldF9zdG9ja19wcmljZWAgdG9vbCB3aXRoIGB7XCJ0aWNrZXJcIjogXCJeR1NQQ1wifWAgYXMgYW5cbiAgICogaW5wdXQsIGFuZCByZXR1cm4gdGhlIGZvbGxvd2luZyBiYWNrIHRvIHRoZSBtb2RlbCBpbiBhIHN1YnNlcXVlbnQgYHVzZXJgXG4gICAqIG1lc3NhZ2U6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwidHlwZVwiOiBcInRvb2xfcmVzdWx0XCIsXG4gICAqICAgICBcInRvb2xfdXNlX2lkXCI6IFwidG9vbHVfMDFEN0ZMcmZoNEdZcTd5VDFVTEZleU1WXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCIyNTkuNzUgVVNEXCJcbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFRvb2xzIGNhbiBiZSB1c2VkIGZvciB3b3JrZmxvd3MgdGhhdCBpbmNsdWRlIHJ1bm5pbmcgY2xpZW50LXNpZGUgdG9vbHMgYW5kXG4gICAqIGZ1bmN0aW9ucywgb3IgbW9yZSBnZW5lcmFsbHkgd2hlbmV2ZXIgeW91IHdhbnQgdGhlIG1vZGVsIHRvIHByb2R1Y2UgYSBwYXJ0aWN1bGFyXG4gICAqIEpTT04gc3RydWN0dXJlIG9mIG91dHB1dC5cbiAgICpcbiAgICogU2VlIG91ciBbZ3VpZGVdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvdG9vbC11c2UpIGZvciBtb3JlIGRldGFpbHMuXG4gICAqL1xuICB0b29scz86IEFycmF5PFRvb2w+O1xufVxuXG5NZXNzYWdlcy5CYXRjaGVzID0gQmF0Y2hlcztcbk1lc3NhZ2VzLk1lc3NhZ2VCYXRjaGVzUGFnZSA9IE1lc3NhZ2VCYXRjaGVzUGFnZTtcblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIE1lc3NhZ2VzIHtcbiAgZXhwb3J0IHtcbiAgICB0eXBlIEJhc2U2NFBERlNvdXJjZSBhcyBCYXNlNjRQREZTb3VyY2UsXG4gICAgdHlwZSBDYWNoZUNvbnRyb2xFcGhlbWVyYWwgYXMgQ2FjaGVDb250cm9sRXBoZW1lcmFsLFxuICAgIHR5cGUgQ2l0YXRpb25DaGFyTG9jYXRpb24gYXMgQ2l0YXRpb25DaGFyTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtIGFzIENpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uIGFzIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0gYXMgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtLFxuICAgIHR5cGUgQ2l0YXRpb25QYWdlTG9jYXRpb24gYXMgQ2l0YXRpb25QYWdlTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtIGFzIENpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBDaXRhdGlvbnNDb25maWdQYXJhbSBhcyBDaXRhdGlvbnNDb25maWdQYXJhbSxcbiAgICB0eXBlIENpdGF0aW9uc0RlbHRhIGFzIENpdGF0aW9uc0RlbHRhLFxuICAgIHR5cGUgQ29udGVudEJsb2NrIGFzIENvbnRlbnRCbG9jayxcbiAgICB0eXBlIENvbnRlbnRCbG9ja0RlbHRhRXZlbnQgYXMgQ29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1BhcmFtIGFzIENvbnRlbnRCbG9ja1BhcmFtLFxuICAgIHR5cGUgQ29udGVudEJsb2NrU291cmNlIGFzIENvbnRlbnRCbG9ja1NvdXJjZSxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQgYXMgQ29udGVudEJsb2NrU291cmNlQ29udGVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1N0YXJ0RXZlbnQgYXMgQ29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1N0b3BFdmVudCBhcyBDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gICAgdHlwZSBEb2N1bWVudEJsb2NrUGFyYW0gYXMgRG9jdW1lbnRCbG9ja1BhcmFtLFxuICAgIHR5cGUgSW1hZ2VCbG9ja1BhcmFtIGFzIEltYWdlQmxvY2tQYXJhbSxcbiAgICB0eXBlIElucHV0SnNvbkRlbHRhIGFzIElucHV0SnNvbkRlbHRhLFxuICAgIHR5cGUgSW5wdXRKU09ORGVsdGEgYXMgSW5wdXRKU09ORGVsdGEsXG4gICAgdHlwZSBNZXNzYWdlIGFzIE1lc3NhZ2UsXG4gICAgdHlwZSBNZXNzYWdlRGVsdGFFdmVudCBhcyBNZXNzYWdlRGVsdGFFdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VEZWx0YVVzYWdlIGFzIE1lc3NhZ2VEZWx0YVVzYWdlLFxuICAgIHR5cGUgTWVzc2FnZVBhcmFtIGFzIE1lc3NhZ2VQYXJhbSxcbiAgICB0eXBlIE1lc3NhZ2VTdGFydEV2ZW50IGFzIE1lc3NhZ2VTdGFydEV2ZW50LFxuICAgIHR5cGUgTWVzc2FnZVN0b3BFdmVudCBhcyBNZXNzYWdlU3RvcEV2ZW50LFxuICAgIHR5cGUgTWVzc2FnZVN0cmVhbUV2ZW50IGFzIE1lc3NhZ2VTdHJlYW1FdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VUb2tlbnNDb3VudCBhcyBNZXNzYWdlVG9rZW5zQ291bnQsXG4gICAgdHlwZSBNZXRhZGF0YSBhcyBNZXRhZGF0YSxcbiAgICB0eXBlIE1vZGVsIGFzIE1vZGVsLFxuICAgIHR5cGUgUGxhaW5UZXh0U291cmNlIGFzIFBsYWluVGV4dFNvdXJjZSxcbiAgICB0eXBlIFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQgYXMgUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgICB0eXBlIFJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQgYXMgUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgICB0eXBlIFJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCBhcyBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gICAgdHlwZSBSYXdNZXNzYWdlRGVsdGFFdmVudCBhcyBSYXdNZXNzYWdlRGVsdGFFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VTdGFydEV2ZW50IGFzIFJhd01lc3NhZ2VTdGFydEV2ZW50LFxuICAgIHR5cGUgUmF3TWVzc2FnZVN0b3BFdmVudCBhcyBSYXdNZXNzYWdlU3RvcEV2ZW50LFxuICAgIHR5cGUgUmF3TWVzc2FnZVN0cmVhbUV2ZW50IGFzIFJhd01lc3NhZ2VTdHJlYW1FdmVudCxcbiAgICB0eXBlIFRleHRCbG9jayBhcyBUZXh0QmxvY2ssXG4gICAgdHlwZSBUZXh0QmxvY2tQYXJhbSBhcyBUZXh0QmxvY2tQYXJhbSxcbiAgICB0eXBlIFRleHRDaXRhdGlvbiBhcyBUZXh0Q2l0YXRpb24sXG4gICAgdHlwZSBUZXh0Q2l0YXRpb25QYXJhbSBhcyBUZXh0Q2l0YXRpb25QYXJhbSxcbiAgICB0eXBlIFRleHREZWx0YSBhcyBUZXh0RGVsdGEsXG4gICAgdHlwZSBUb29sIGFzIFRvb2wsXG4gICAgdHlwZSBUb29sQ2hvaWNlIGFzIFRvb2xDaG9pY2UsXG4gICAgdHlwZSBUb29sQ2hvaWNlQW55IGFzIFRvb2xDaG9pY2VBbnksXG4gICAgdHlwZSBUb29sQ2hvaWNlQXV0byBhcyBUb29sQ2hvaWNlQXV0byxcbiAgICB0eXBlIFRvb2xDaG9pY2VUb29sIGFzIFRvb2xDaG9pY2VUb29sLFxuICAgIHR5cGUgVG9vbFJlc3VsdEJsb2NrUGFyYW0gYXMgVG9vbFJlc3VsdEJsb2NrUGFyYW0sXG4gICAgdHlwZSBUb29sVXNlQmxvY2sgYXMgVG9vbFVzZUJsb2NrLFxuICAgIHR5cGUgVG9vbFVzZUJsb2NrUGFyYW0gYXMgVG9vbFVzZUJsb2NrUGFyYW0sXG4gICAgdHlwZSBVc2FnZSBhcyBVc2FnZSxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICB0eXBlIE1lc3NhZ2VTdHJlYW1QYXJhbXMgYXMgTWVzc2FnZVN0cmVhbVBhcmFtcyxcbiAgICB0eXBlIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyBhcyBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMsXG4gIH07XG5cbiAgZXhwb3J0IHtcbiAgICBCYXRjaGVzIGFzIEJhdGNoZXMsXG4gICAgdHlwZSBEZWxldGVkTWVzc2FnZUJhdGNoIGFzIERlbGV0ZWRNZXNzYWdlQmF0Y2gsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2ggYXMgTWVzc2FnZUJhdGNoLFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQgYXMgTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0IGFzIE1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0IGFzIE1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UgYXMgTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlLFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyBhcyBNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzLFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoUmVzdWx0IGFzIE1lc3NhZ2VCYXRjaFJlc3VsdCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCBhcyBNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQsXG4gICAgTWVzc2FnZUJhdGNoZXNQYWdlIGFzIE1lc3NhZ2VCYXRjaGVzUGFnZSxcbiAgICB0eXBlIEJhdGNoQ3JlYXRlUGFyYW1zIGFzIEJhdGNoQ3JlYXRlUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hMaXN0UGFyYW1zIGFzIEJhdGNoTGlzdFBhcmFtcyxcbiAgfTtcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gXCIuLi9yZXNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgaXNSZXF1ZXN0T3B0aW9ucyB9IGZyb20gXCIuLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuLi9jb3JlLmpzXCI7XG5pbXBvcnQgeyBQYWdlLCB0eXBlIFBhZ2VQYXJhbXMgfSBmcm9tIFwiLi4vcGFnaW5hdGlvbi5qc1wiO1xuXG5leHBvcnQgY2xhc3MgTW9kZWxzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogR2V0IGEgc3BlY2lmaWMgbW9kZWwuXG4gICAqXG4gICAqIFRoZSBNb2RlbHMgQVBJIHJlc3BvbnNlIGNhbiBiZSB1c2VkIHRvIGRldGVybWluZSBpbmZvcm1hdGlvbiBhYm91dCBhIHNwZWNpZmljXG4gICAqIG1vZGVsIG9yIHJlc29sdmUgYSBtb2RlbCBhbGlhcyB0byBhIG1vZGVsIElELlxuICAgKi9cbiAgcmV0cmlldmUobW9kZWxJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxNb2RlbEluZm8+IHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmdldChgL3YxL21vZGVscy8ke21vZGVsSWR9YCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogTGlzdCBhdmFpbGFibGUgbW9kZWxzLlxuICAgKlxuICAgKiBUaGUgTW9kZWxzIEFQSSByZXNwb25zZSBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgd2hpY2ggbW9kZWxzIGFyZSBhdmFpbGFibGUgZm9yXG4gICAqIHVzZSBpbiB0aGUgQVBJLiBNb3JlIHJlY2VudGx5IHJlbGVhc2VkIG1vZGVscyBhcmUgbGlzdGVkIGZpcnN0LlxuICAgKi9cbiAgbGlzdChxdWVyeT86IE1vZGVsTGlzdFBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLlBhZ2VQcm9taXNlPE1vZGVsSW5mb3NQYWdlLCBNb2RlbEluZm8+O1xuICBsaXN0KG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5QYWdlUHJvbWlzZTxNb2RlbEluZm9zUGFnZSwgTW9kZWxJbmZvPjtcbiAgbGlzdChcbiAgICBxdWVyeTogTW9kZWxMaXN0UGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPE1vZGVsSW5mb3NQYWdlLCBNb2RlbEluZm8+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhxdWVyeSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmxpc3Qoe30sIHF1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5nZXRBUElMaXN0KCcvdjEvbW9kZWxzJywgTW9kZWxJbmZvc1BhZ2UsIHsgcXVlcnksIC4uLm9wdGlvbnMgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1vZGVsSW5mb3NQYWdlIGV4dGVuZHMgUGFnZTxNb2RlbEluZm8+IHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxJbmZvIHtcbiAgLyoqXG4gICAqIFVuaXF1ZSBtb2RlbCBpZGVudGlmaWVyLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCB0aGUgbW9kZWwgd2FzIHJlbGVhc2VkLlxuICAgKiBNYXkgYmUgc2V0IHRvIGFuIGVwb2NoIHZhbHVlIGlmIHRoZSByZWxlYXNlIGRhdGUgaXMgdW5rbm93bi5cbiAgICovXG4gIGNyZWF0ZWRfYXQ6IHN0cmluZztcblxuICAvKipcbiAgICogQSBodW1hbi1yZWFkYWJsZSBuYW1lIGZvciB0aGUgbW9kZWwuXG4gICAqL1xuICBkaXNwbGF5X25hbWU6IHN0cmluZztcblxuICAvKipcbiAgICogT2JqZWN0IHR5cGUuXG4gICAqXG4gICAqIEZvciBNb2RlbHMsIHRoaXMgaXMgYWx3YXlzIGBcIm1vZGVsXCJgLlxuICAgKi9cbiAgdHlwZTogJ21vZGVsJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNb2RlbExpc3RQYXJhbXMgZXh0ZW5kcyBQYWdlUGFyYW1zIHt9XG5cbk1vZGVscy5Nb2RlbEluZm9zUGFnZSA9IE1vZGVsSW5mb3NQYWdlO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgTW9kZWxzIHtcbiAgZXhwb3J0IHtcbiAgICB0eXBlIE1vZGVsSW5mbyBhcyBNb2RlbEluZm8sXG4gICAgTW9kZWxJbmZvc1BhZ2UgYXMgTW9kZWxJbmZvc1BhZ2UsXG4gICAgdHlwZSBNb2RlbExpc3RQYXJhbXMgYXMgTW9kZWxMaXN0UGFyYW1zLFxuICB9O1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IHR5cGUgQWdlbnQgfSBmcm9tIFwiLi9fc2hpbXMvaW5kZXguanNcIjtcbmltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgRXJyb3JzIGZyb20gXCIuL2Vycm9yLmpzXCI7XG5pbXBvcnQgKiBhcyBQYWdpbmF0aW9uIGZyb20gXCIuL3BhZ2luYXRpb24uanNcIjtcbmltcG9ydCB7IHR5cGUgUGFnZVBhcmFtcywgUGFnZVJlc3BvbnNlIH0gZnJvbSBcIi4vcGFnaW5hdGlvbi5qc1wiO1xuaW1wb3J0ICogYXMgVXBsb2FkcyBmcm9tIFwiLi91cGxvYWRzLmpzXCI7XG5pbXBvcnQgKiBhcyBBUEkgZnJvbSBcIi4vcmVzb3VyY2VzL2luZGV4LmpzXCI7XG5pbXBvcnQge1xuICBDb21wbGV0aW9uLFxuICBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zLFxuICBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICBDb21wbGV0aW9ucyxcbn0gZnJvbSBcIi4vcmVzb3VyY2VzL2NvbXBsZXRpb25zLmpzXCI7XG5pbXBvcnQgeyBNb2RlbEluZm8sIE1vZGVsSW5mb3NQYWdlLCBNb2RlbExpc3RQYXJhbXMsIE1vZGVscyB9IGZyb20gXCIuL3Jlc291cmNlcy9tb2RlbHMuanNcIjtcbmltcG9ydCB7XG4gIEFudGhyb3BpY0JldGEsXG4gIEJldGEsXG4gIEJldGFBUElFcnJvcixcbiAgQmV0YUF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gIEJldGFCaWxsaW5nRXJyb3IsXG4gIEJldGFFcnJvcixcbiAgQmV0YUVycm9yUmVzcG9uc2UsXG4gIEJldGFHYXRld2F5VGltZW91dEVycm9yLFxuICBCZXRhSW52YWxpZFJlcXVlc3RFcnJvcixcbiAgQmV0YU5vdEZvdW5kRXJyb3IsXG4gIEJldGFPdmVybG9hZGVkRXJyb3IsXG4gIEJldGFQZXJtaXNzaW9uRXJyb3IsXG4gIEJldGFSYXRlTGltaXRFcnJvcixcbn0gZnJvbSBcIi4vcmVzb3VyY2VzL2JldGEvYmV0YS5qc1wiO1xuaW1wb3J0IHtcbiAgQmFzZTY0UERGU291cmNlLFxuICBDYWNoZUNvbnRyb2xFcGhlbWVyYWwsXG4gIENpdGF0aW9uQ2hhckxvY2F0aW9uLFxuICBDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtLFxuICBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uLFxuICBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0sXG4gIENpdGF0aW9uUGFnZUxvY2F0aW9uLFxuICBDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtLFxuICBDaXRhdGlvbnNDb25maWdQYXJhbSxcbiAgQ2l0YXRpb25zRGVsdGEsXG4gIENvbnRlbnRCbG9jayxcbiAgQ29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgQ29udGVudEJsb2NrUGFyYW0sXG4gIENvbnRlbnRCbG9ja1NvdXJjZSxcbiAgQ29udGVudEJsb2NrU291cmNlQ29udGVudCxcbiAgQ29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgQ29udGVudEJsb2NrU3RvcEV2ZW50LFxuICBEb2N1bWVudEJsb2NrUGFyYW0sXG4gIEltYWdlQmxvY2tQYXJhbSxcbiAgSW5wdXRKU09ORGVsdGEsXG4gIE1lc3NhZ2UsXG4gIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyxcbiAgTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgTWVzc2FnZURlbHRhRXZlbnQsXG4gIE1lc3NhZ2VEZWx0YVVzYWdlLFxuICBNZXNzYWdlUGFyYW0sXG4gIE1lc3NhZ2VTdGFydEV2ZW50LFxuICBNZXNzYWdlU3RvcEV2ZW50LFxuICBNZXNzYWdlU3RyZWFtRXZlbnQsXG4gIE1lc3NhZ2VTdHJlYW1QYXJhbXMsXG4gIE1lc3NhZ2VUb2tlbnNDb3VudCxcbiAgTWVzc2FnZXMsXG4gIE1ldGFkYXRhLFxuICBNb2RlbCxcbiAgUGxhaW5UZXh0U291cmNlLFxuICBSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50LFxuICBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50LFxuICBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gIFJhd01lc3NhZ2VEZWx0YUV2ZW50LFxuICBSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgUmF3TWVzc2FnZVN0b3BFdmVudCxcbiAgUmF3TWVzc2FnZVN0cmVhbUV2ZW50LFxuICBUZXh0QmxvY2ssXG4gIFRleHRCbG9ja1BhcmFtLFxuICBUZXh0Q2l0YXRpb24sXG4gIFRleHRDaXRhdGlvblBhcmFtLFxuICBUZXh0RGVsdGEsXG4gIFRvb2wsXG4gIFRvb2xDaG9pY2UsXG4gIFRvb2xDaG9pY2VBbnksXG4gIFRvb2xDaG9pY2VBdXRvLFxuICBUb29sQ2hvaWNlVG9vbCxcbiAgVG9vbFJlc3VsdEJsb2NrUGFyYW0sXG4gIFRvb2xVc2VCbG9jayxcbiAgVG9vbFVzZUJsb2NrUGFyYW0sXG4gIFVzYWdlLFxufSBmcm9tIFwiLi9yZXNvdXJjZXMvbWVzc2FnZXMvbWVzc2FnZXMuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBDbGllbnRPcHRpb25zIHtcbiAgLyoqXG4gICAqIERlZmF1bHRzIHRvIHByb2Nlc3MuZW52WydBTlRIUk9QSUNfQVBJX0tFWSddLlxuICAgKi9cbiAgYXBpS2V5Pzogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogRGVmYXVsdHMgdG8gcHJvY2Vzcy5lbnZbJ0FOVEhST1BJQ19BVVRIX1RPS0VOJ10uXG4gICAqL1xuICBhdXRoVG9rZW4/OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGUgZGVmYXVsdCBiYXNlIFVSTCBmb3IgdGhlIEFQSSwgZS5nLiwgXCJodHRwczovL2FwaS5leGFtcGxlLmNvbS92Mi9cIlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBwcm9jZXNzLmVudlsnQU5USFJPUElDX0JBU0VfVVJMJ10uXG4gICAqL1xuICBiYXNlVVJMPzogc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gYW1vdW50IG9mIHRpbWUgKGluIG1pbGxpc2Vjb25kcykgdGhhdCB0aGUgY2xpZW50IHNob3VsZCB3YWl0IGZvciBhIHJlc3BvbnNlXG4gICAqIGZyb20gdGhlIHNlcnZlciBiZWZvcmUgdGltaW5nIG91dCBhIHNpbmdsZSByZXF1ZXN0LlxuICAgKlxuICAgKiBOb3RlIHRoYXQgcmVxdWVzdCB0aW1lb3V0cyBhcmUgcmV0cmllZCBieSBkZWZhdWx0LCBzbyBpbiBhIHdvcnN0LWNhc2Ugc2NlbmFyaW8geW91IG1heSB3YWl0XG4gICAqIG11Y2ggbG9uZ2VyIHRoYW4gdGhpcyB0aW1lb3V0IGJlZm9yZSB0aGUgcHJvbWlzZSBzdWNjZWVkcyBvciBmYWlscy5cbiAgICovXG4gIHRpbWVvdXQ/OiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIEFuIEhUVFAgYWdlbnQgdXNlZCB0byBtYW5hZ2UgSFRUUChTKSBjb25uZWN0aW9ucy5cbiAgICpcbiAgICogSWYgbm90IHByb3ZpZGVkLCBhbiBhZ2VudCB3aWxsIGJlIGNvbnN0cnVjdGVkIGJ5IGRlZmF1bHQgaW4gdGhlIE5vZGUuanMgZW52aXJvbm1lbnQsXG4gICAqIG90aGVyd2lzZSBubyBhZ2VudCBpcyB1c2VkLlxuICAgKi9cbiAgaHR0cEFnZW50PzogQWdlbnQgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFNwZWNpZnkgYSBjdXN0b20gYGZldGNoYCBmdW5jdGlvbiBpbXBsZW1lbnRhdGlvbi5cbiAgICpcbiAgICogSWYgbm90IHByb3ZpZGVkLCB3ZSB1c2UgYG5vZGUtZmV0Y2hgIG9uIE5vZGUuanMgYW5kIG90aGVyd2lzZSBleHBlY3QgdGhhdCBgZmV0Y2hgIGlzXG4gICAqIGRlZmluZWQgZ2xvYmFsbHkuXG4gICAqL1xuICBmZXRjaD86IENvcmUuRmV0Y2ggfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0aW1lcyB0aGF0IHRoZSBjbGllbnQgd2lsbCByZXRyeSBhIHJlcXVlc3QgaW4gY2FzZSBvZiBhXG4gICAqIHRlbXBvcmFyeSBmYWlsdXJlLCBsaWtlIGEgbmV0d29yayBlcnJvciBvciBhIDVYWCBlcnJvciBmcm9tIHRoZSBzZXJ2ZXIuXG4gICAqXG4gICAqIEBkZWZhdWx0IDJcbiAgICovXG4gIG1heFJldHJpZXM/OiBudW1iZXIgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIERlZmF1bHQgaGVhZGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKlxuICAgKiBUaGVzZSBjYW4gYmUgcmVtb3ZlZCBpbiBpbmRpdmlkdWFsIHJlcXVlc3RzIGJ5IGV4cGxpY2l0bHkgc2V0dGluZyB0aGVcbiAgICogaGVhZGVyIHRvIGB1bmRlZmluZWRgIG9yIGBudWxsYCBpbiByZXF1ZXN0IG9wdGlvbnMuXG4gICAqL1xuICBkZWZhdWx0SGVhZGVycz86IENvcmUuSGVhZGVycyB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogRGVmYXVsdCBxdWVyeSBwYXJhbWV0ZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqXG4gICAqIFRoZXNlIGNhbiBiZSByZW1vdmVkIGluIGluZGl2aWR1YWwgcmVxdWVzdHMgYnkgZXhwbGljaXRseSBzZXR0aW5nIHRoZVxuICAgKiBwYXJhbSB0byBgdW5kZWZpbmVkYCBpbiByZXF1ZXN0IG9wdGlvbnMuXG4gICAqL1xuICBkZWZhdWx0UXVlcnk/OiBDb3JlLkRlZmF1bHRRdWVyeSB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogQnkgZGVmYXVsdCwgY2xpZW50LXNpZGUgdXNlIG9mIHRoaXMgbGlicmFyeSBpcyBub3QgYWxsb3dlZCwgYXMgaXQgcmlza3MgZXhwb3NpbmcgeW91ciBzZWNyZXQgQVBJIGNyZWRlbnRpYWxzIHRvIGF0dGFja2Vycy5cbiAgICogT25seSBzZXQgdGhpcyBvcHRpb24gdG8gYHRydWVgIGlmIHlvdSB1bmRlcnN0YW5kIHRoZSByaXNrcyBhbmQgaGF2ZSBhcHByb3ByaWF0ZSBtaXRpZ2F0aW9ucyBpbiBwbGFjZS5cbiAgICovXG4gIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyPzogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbn1cblxuLyoqXG4gKiBBUEkgQ2xpZW50IGZvciBpbnRlcmZhY2luZyB3aXRoIHRoZSBBbnRocm9waWMgQVBJLlxuICovXG5leHBvcnQgY2xhc3MgQW50aHJvcGljIGV4dGVuZHMgQ29yZS5BUElDbGllbnQge1xuICBhcGlLZXk6IHN0cmluZyB8IG51bGw7XG4gIGF1dGhUb2tlbjogc3RyaW5nIHwgbnVsbDtcblxuICBwcml2YXRlIF9vcHRpb25zOiBDbGllbnRPcHRpb25zO1xuXG4gIC8qKlxuICAgKiBBUEkgQ2xpZW50IGZvciBpbnRlcmZhY2luZyB3aXRoIHRoZSBBbnRocm9waWMgQVBJLlxuICAgKlxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bGwgfCB1bmRlZmluZWR9IFtvcHRzLmFwaUtleT1wcm9jZXNzLmVudlsnQU5USFJPUElDX0FQSV9LRVknXSA/PyBudWxsXVxuICAgKiBAcGFyYW0ge3N0cmluZyB8IG51bGwgfCB1bmRlZmluZWR9IFtvcHRzLmF1dGhUb2tlbj1wcm9jZXNzLmVudlsnQU5USFJPUElDX0FVVEhfVE9LRU4nXSA/PyBudWxsXVxuICAgKiBAcGFyYW0ge3N0cmluZ30gW29wdHMuYmFzZVVSTD1wcm9jZXNzLmVudlsnQU5USFJPUElDX0JBU0VfVVJMJ10gPz8gaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbV0gLSBPdmVycmlkZSB0aGUgZGVmYXVsdCBiYXNlIFVSTCBmb3IgdGhlIEFQSS5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLnRpbWVvdXQ9MTAgbWludXRlc10gLSBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSAoaW4gbWlsbGlzZWNvbmRzKSB0aGUgY2xpZW50IHdpbGwgd2FpdCBmb3IgYSByZXNwb25zZSBiZWZvcmUgdGltaW5nIG91dC5cbiAgICogQHBhcmFtIHtudW1iZXJ9IFtvcHRzLmh0dHBBZ2VudF0gLSBBbiBIVFRQIGFnZW50IHVzZWQgdG8gbWFuYWdlIEhUVFAocykgY29ubmVjdGlvbnMuXG4gICAqIEBwYXJhbSB7Q29yZS5GZXRjaH0gW29wdHMuZmV0Y2hdIC0gU3BlY2lmeSBhIGN1c3RvbSBgZmV0Y2hgIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMubWF4UmV0cmllcz0yXSAtIFRoZSBtYXhpbXVtIG51bWJlciBvZiB0aW1lcyB0aGUgY2xpZW50IHdpbGwgcmV0cnkgYSByZXF1ZXN0LlxuICAgKiBAcGFyYW0ge0NvcmUuSGVhZGVyc30gb3B0cy5kZWZhdWx0SGVhZGVycyAtIERlZmF1bHQgaGVhZGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge0NvcmUuRGVmYXVsdFF1ZXJ5fSBvcHRzLmRlZmF1bHRRdWVyeSAtIERlZmF1bHQgcXVlcnkgcGFyYW1ldGVycyB0byBpbmNsdWRlIHdpdGggZXZlcnkgcmVxdWVzdCB0byB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge2Jvb2xlYW59IFtvcHRzLmRhbmdlcm91c2x5QWxsb3dCcm93c2VyPWZhbHNlXSAtIEJ5IGRlZmF1bHQsIGNsaWVudC1zaWRlIHVzZSBvZiB0aGlzIGxpYnJhcnkgaXMgbm90IGFsbG93ZWQsIGFzIGl0IHJpc2tzIGV4cG9zaW5nIHlvdXIgc2VjcmV0IEFQSSBjcmVkZW50aWFscyB0byBhdHRhY2tlcnMuXG4gICAqL1xuICBjb25zdHJ1Y3Rvcih7XG4gICAgYmFzZVVSTCA9IENvcmUucmVhZEVudignQU5USFJPUElDX0JBU0VfVVJMJyksXG4gICAgYXBpS2V5ID0gQ29yZS5yZWFkRW52KCdBTlRIUk9QSUNfQVBJX0tFWScpID8/IG51bGwsXG4gICAgYXV0aFRva2VuID0gQ29yZS5yZWFkRW52KCdBTlRIUk9QSUNfQVVUSF9UT0tFTicpID8/IG51bGwsXG4gICAgLi4ub3B0c1xuICB9OiBDbGllbnRPcHRpb25zID0ge30pIHtcbiAgICBjb25zdCBvcHRpb25zOiBDbGllbnRPcHRpb25zID0ge1xuICAgICAgYXBpS2V5LFxuICAgICAgYXV0aFRva2VuLFxuICAgICAgLi4ub3B0cyxcbiAgICAgIGJhc2VVUkw6IGJhc2VVUkwgfHwgYGh0dHBzOi8vYXBpLmFudGhyb3BpYy5jb21gLFxuICAgIH07XG5cbiAgICBpZiAoIW9wdGlvbnMuZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXIgJiYgQ29yZS5pc1J1bm5pbmdJbkJyb3dzZXIoKSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9ycy5BbnRocm9waWNFcnJvcihcbiAgICAgICAgXCJJdCBsb29rcyBsaWtlIHlvdSdyZSBydW5uaW5nIGluIGEgYnJvd3Nlci1saWtlIGVudmlyb25tZW50LlxcblxcblRoaXMgaXMgZGlzYWJsZWQgYnkgZGVmYXVsdCwgYXMgaXQgcmlza3MgZXhwb3NpbmcgeW91ciBzZWNyZXQgQVBJIGNyZWRlbnRpYWxzIHRvIGF0dGFja2Vycy5cXG5JZiB5b3UgdW5kZXJzdGFuZCB0aGUgcmlza3MgYW5kIGhhdmUgYXBwcm9wcmlhdGUgbWl0aWdhdGlvbnMgaW4gcGxhY2UsXFxueW91IGNhbiBzZXQgdGhlIGBkYW5nZXJvdXNseUFsbG93QnJvd3NlcmAgb3B0aW9uIHRvIGB0cnVlYCwgZS5nLixcXG5cXG5uZXcgQW50aHJvcGljKHsgYXBpS2V5LCBkYW5nZXJvdXNseUFsbG93QnJvd3NlcjogdHJ1ZSB9KTtcXG5cIixcbiAgICAgICk7XG4gICAgfVxuXG4gICAgc3VwZXIoe1xuICAgICAgYmFzZVVSTDogb3B0aW9ucy5iYXNlVVJMISxcbiAgICAgIHRpbWVvdXQ6IG9wdGlvbnMudGltZW91dCA/PyA2MDAwMDAgLyogMTAgbWludXRlcyAqLyxcbiAgICAgIGh0dHBBZ2VudDogb3B0aW9ucy5odHRwQWdlbnQsXG4gICAgICBtYXhSZXRyaWVzOiBvcHRpb25zLm1heFJldHJpZXMsXG4gICAgICBmZXRjaDogb3B0aW9ucy5mZXRjaCxcbiAgICB9KTtcblxuICAgIHRoaXMuX29wdGlvbnMgPSBvcHRpb25zO1xuXG4gICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XG4gICAgdGhpcy5hdXRoVG9rZW4gPSBhdXRoVG9rZW47XG4gIH1cblxuICBjb21wbGV0aW9uczogQVBJLkNvbXBsZXRpb25zID0gbmV3IEFQSS5Db21wbGV0aW9ucyh0aGlzKTtcbiAgbWVzc2FnZXM6IEFQSS5NZXNzYWdlcyA9IG5ldyBBUEkuTWVzc2FnZXModGhpcyk7XG4gIG1vZGVsczogQVBJLk1vZGVscyA9IG5ldyBBUEkuTW9kZWxzKHRoaXMpO1xuICBiZXRhOiBBUEkuQmV0YSA9IG5ldyBBUEkuQmV0YSh0aGlzKTtcblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgZGVmYXVsdFF1ZXJ5KCk6IENvcmUuRGVmYXVsdFF1ZXJ5IHwgdW5kZWZpbmVkIHtcbiAgICByZXR1cm4gdGhpcy5fb3B0aW9ucy5kZWZhdWx0UXVlcnk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgZGVmYXVsdEhlYWRlcnMob3B0czogQ29yZS5GaW5hbFJlcXVlc3RPcHRpb25zKTogQ29yZS5IZWFkZXJzIHtcbiAgICByZXR1cm4ge1xuICAgICAgLi4uc3VwZXIuZGVmYXVsdEhlYWRlcnMob3B0cyksXG4gICAgICAuLi4odGhpcy5fb3B0aW9ucy5kYW5nZXJvdXNseUFsbG93QnJvd3NlciA/XG4gICAgICAgIHsgJ2FudGhyb3BpYy1kYW5nZXJvdXMtZGlyZWN0LWJyb3dzZXItYWNjZXNzJzogJ3RydWUnIH1cbiAgICAgIDogdW5kZWZpbmVkKSxcbiAgICAgICdhbnRocm9waWMtdmVyc2lvbic6ICcyMDIzLTA2LTAxJyxcbiAgICAgIC4uLnRoaXMuX29wdGlvbnMuZGVmYXVsdEhlYWRlcnMsXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvdmVycmlkZSB2YWxpZGF0ZUhlYWRlcnMoaGVhZGVyczogQ29yZS5IZWFkZXJzLCBjdXN0b21IZWFkZXJzOiBDb3JlLkhlYWRlcnMpIHtcbiAgICBpZiAodGhpcy5hcGlLZXkgJiYgaGVhZGVyc1sneC1hcGkta2V5J10pIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG4gICAgaWYgKGN1c3RvbUhlYWRlcnNbJ3gtYXBpLWtleSddID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuYXV0aFRva2VuICYmIGhlYWRlcnNbJ2F1dGhvcml6YXRpb24nXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY3VzdG9tSGVhZGVyc1snYXV0aG9yaXphdGlvbiddID09PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgJ0NvdWxkIG5vdCByZXNvbHZlIGF1dGhlbnRpY2F0aW9uIG1ldGhvZC4gRXhwZWN0ZWQgZWl0aGVyIGFwaUtleSBvciBhdXRoVG9rZW4gdG8gYmUgc2V0LiBPciBmb3Igb25lIG9mIHRoZSBcIlgtQXBpLUtleVwiIG9yIFwiQXV0aG9yaXphdGlvblwiIGhlYWRlcnMgdG8gYmUgZXhwbGljaXRseSBvbWl0dGVkJyxcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIGF1dGhIZWFkZXJzKG9wdHM6IENvcmUuRmluYWxSZXF1ZXN0T3B0aW9ucyk6IENvcmUuSGVhZGVycyB7XG4gICAgY29uc3QgYXBpS2V5QXV0aCA9IHRoaXMuYXBpS2V5QXV0aChvcHRzKTtcbiAgICBjb25zdCBiZWFyZXJBdXRoID0gdGhpcy5iZWFyZXJBdXRoKG9wdHMpO1xuXG4gICAgaWYgKGFwaUtleUF1dGggIT0gbnVsbCAmJiAhQ29yZS5pc0VtcHR5T2JqKGFwaUtleUF1dGgpKSB7XG4gICAgICByZXR1cm4gYXBpS2V5QXV0aDtcbiAgICB9XG5cbiAgICBpZiAoYmVhcmVyQXV0aCAhPSBudWxsICYmICFDb3JlLmlzRW1wdHlPYmooYmVhcmVyQXV0aCkpIHtcbiAgICAgIHJldHVybiBiZWFyZXJBdXRoO1xuICAgIH1cbiAgICByZXR1cm4ge307XG4gIH1cblxuICBwcm90ZWN0ZWQgYXBpS2V5QXV0aChvcHRzOiBDb3JlLkZpbmFsUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkhlYWRlcnMge1xuICAgIGlmICh0aGlzLmFwaUtleSA9PSBudWxsKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHJldHVybiB7ICdYLUFwaS1LZXknOiB0aGlzLmFwaUtleSB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIGJlYXJlckF1dGgob3B0czogQ29yZS5GaW5hbFJlcXVlc3RPcHRpb25zKTogQ29yZS5IZWFkZXJzIHtcbiAgICBpZiAodGhpcy5hdXRoVG9rZW4gPT0gbnVsbCkge1xuICAgICAgcmV0dXJuIHt9O1xuICAgIH1cbiAgICByZXR1cm4geyBBdXRob3JpemF0aW9uOiBgQmVhcmVyICR7dGhpcy5hdXRoVG9rZW59YCB9O1xuICB9XG5cbiAgc3RhdGljIEFudGhyb3BpYyA9IHRoaXM7XG4gIHN0YXRpYyBIVU1BTl9QUk9NUFQgPSAnXFxuXFxuSHVtYW46JztcbiAgc3RhdGljIEFJX1BST01QVCA9ICdcXG5cXG5Bc3Npc3RhbnQ6JztcbiAgc3RhdGljIERFRkFVTFRfVElNRU9VVCA9IDYwMDAwMDsgLy8gMTAgbWludXRlc1xuXG4gIHN0YXRpYyBBbnRocm9waWNFcnJvciA9IEVycm9ycy5BbnRocm9waWNFcnJvcjtcbiAgc3RhdGljIEFQSUVycm9yID0gRXJyb3JzLkFQSUVycm9yO1xuICBzdGF0aWMgQVBJQ29ubmVjdGlvbkVycm9yID0gRXJyb3JzLkFQSUNvbm5lY3Rpb25FcnJvcjtcbiAgc3RhdGljIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IgPSBFcnJvcnMuQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcjtcbiAgc3RhdGljIEFQSVVzZXJBYm9ydEVycm9yID0gRXJyb3JzLkFQSVVzZXJBYm9ydEVycm9yO1xuICBzdGF0aWMgTm90Rm91bmRFcnJvciA9IEVycm9ycy5Ob3RGb3VuZEVycm9yO1xuICBzdGF0aWMgQ29uZmxpY3RFcnJvciA9IEVycm9ycy5Db25mbGljdEVycm9yO1xuICBzdGF0aWMgUmF0ZUxpbWl0RXJyb3IgPSBFcnJvcnMuUmF0ZUxpbWl0RXJyb3I7XG4gIHN0YXRpYyBCYWRSZXF1ZXN0RXJyb3IgPSBFcnJvcnMuQmFkUmVxdWVzdEVycm9yO1xuICBzdGF0aWMgQXV0aGVudGljYXRpb25FcnJvciA9IEVycm9ycy5BdXRoZW50aWNhdGlvbkVycm9yO1xuICBzdGF0aWMgSW50ZXJuYWxTZXJ2ZXJFcnJvciA9IEVycm9ycy5JbnRlcm5hbFNlcnZlckVycm9yO1xuICBzdGF0aWMgUGVybWlzc2lvbkRlbmllZEVycm9yID0gRXJyb3JzLlBlcm1pc3Npb25EZW5pZWRFcnJvcjtcbiAgc3RhdGljIFVucHJvY2Vzc2FibGVFbnRpdHlFcnJvciA9IEVycm9ycy5VbnByb2Nlc3NhYmxlRW50aXR5RXJyb3I7XG5cbiAgc3RhdGljIHRvRmlsZSA9IFVwbG9hZHMudG9GaWxlO1xuICBzdGF0aWMgZmlsZUZyb21QYXRoID0gVXBsb2Fkcy5maWxlRnJvbVBhdGg7XG59XG5cbkFudGhyb3BpYy5Db21wbGV0aW9ucyA9IENvbXBsZXRpb25zO1xuQW50aHJvcGljLk1lc3NhZ2VzID0gTWVzc2FnZXM7XG5BbnRocm9waWMuTW9kZWxzID0gTW9kZWxzO1xuQW50aHJvcGljLk1vZGVsSW5mb3NQYWdlID0gTW9kZWxJbmZvc1BhZ2U7XG5BbnRocm9waWMuQmV0YSA9IEJldGE7XG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgQW50aHJvcGljIHtcbiAgZXhwb3J0IHR5cGUgUmVxdWVzdE9wdGlvbnMgPSBDb3JlLlJlcXVlc3RPcHRpb25zO1xuXG4gIGV4cG9ydCBpbXBvcnQgUGFnZSA9IFBhZ2luYXRpb24uUGFnZTtcbiAgZXhwb3J0IHsgdHlwZSBQYWdlUGFyYW1zIGFzIFBhZ2VQYXJhbXMsIHR5cGUgUGFnZVJlc3BvbnNlIGFzIFBhZ2VSZXNwb25zZSB9O1xuXG4gIGV4cG9ydCB7XG4gICAgQ29tcGxldGlvbnMgYXMgQ29tcGxldGlvbnMsXG4gICAgdHlwZSBDb21wbGV0aW9uIGFzIENvbXBsZXRpb24sXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gIH07XG5cbiAgZXhwb3J0IHtcbiAgICBNZXNzYWdlcyBhcyBNZXNzYWdlcyxcbiAgICB0eXBlIEJhc2U2NFBERlNvdXJjZSBhcyBCYXNlNjRQREZTb3VyY2UsXG4gICAgdHlwZSBDYWNoZUNvbnRyb2xFcGhlbWVyYWwgYXMgQ2FjaGVDb250cm9sRXBoZW1lcmFsLFxuICAgIHR5cGUgQ2l0YXRpb25DaGFyTG9jYXRpb24gYXMgQ2l0YXRpb25DaGFyTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtIGFzIENpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uIGFzIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0gYXMgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtLFxuICAgIHR5cGUgQ2l0YXRpb25QYWdlTG9jYXRpb24gYXMgQ2l0YXRpb25QYWdlTG9jYXRpb24sXG4gICAgdHlwZSBDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtIGFzIENpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBDaXRhdGlvbnNDb25maWdQYXJhbSBhcyBDaXRhdGlvbnNDb25maWdQYXJhbSxcbiAgICB0eXBlIENpdGF0aW9uc0RlbHRhIGFzIENpdGF0aW9uc0RlbHRhLFxuICAgIHR5cGUgQ29udGVudEJsb2NrIGFzIENvbnRlbnRCbG9jayxcbiAgICB0eXBlIENvbnRlbnRCbG9ja0RlbHRhRXZlbnQgYXMgQ29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1BhcmFtIGFzIENvbnRlbnRCbG9ja1BhcmFtLFxuICAgIHR5cGUgQ29udGVudEJsb2NrU291cmNlIGFzIENvbnRlbnRCbG9ja1NvdXJjZSxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQgYXMgQ29udGVudEJsb2NrU291cmNlQ29udGVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1N0YXJ0RXZlbnQgYXMgQ29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1N0b3BFdmVudCBhcyBDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gICAgdHlwZSBEb2N1bWVudEJsb2NrUGFyYW0gYXMgRG9jdW1lbnRCbG9ja1BhcmFtLFxuICAgIHR5cGUgSW1hZ2VCbG9ja1BhcmFtIGFzIEltYWdlQmxvY2tQYXJhbSxcbiAgICB0eXBlIElucHV0SlNPTkRlbHRhIGFzIElucHV0SlNPTkRlbHRhLFxuICAgIHR5cGUgTWVzc2FnZSBhcyBNZXNzYWdlLFxuICAgIHR5cGUgTWVzc2FnZURlbHRhRXZlbnQgYXMgTWVzc2FnZURlbHRhRXZlbnQsXG4gICAgdHlwZSBNZXNzYWdlRGVsdGFVc2FnZSBhcyBNZXNzYWdlRGVsdGFVc2FnZSxcbiAgICB0eXBlIE1lc3NhZ2VQYXJhbSBhcyBNZXNzYWdlUGFyYW0sXG4gICAgdHlwZSBNZXNzYWdlU3RhcnRFdmVudCBhcyBNZXNzYWdlU3RhcnRFdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VTdG9wRXZlbnQgYXMgTWVzc2FnZVN0b3BFdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VTdHJlYW1FdmVudCBhcyBNZXNzYWdlU3RyZWFtRXZlbnQsXG4gICAgdHlwZSBNZXNzYWdlVG9rZW5zQ291bnQgYXMgTWVzc2FnZVRva2Vuc0NvdW50LFxuICAgIHR5cGUgTWV0YWRhdGEgYXMgTWV0YWRhdGEsXG4gICAgdHlwZSBNb2RlbCBhcyBNb2RlbCxcbiAgICB0eXBlIFBsYWluVGV4dFNvdXJjZSBhcyBQbGFpblRleHRTb3VyY2UsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50IGFzIFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50IGFzIFJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQgYXMgUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50LFxuICAgIHR5cGUgUmF3TWVzc2FnZURlbHRhRXZlbnQgYXMgUmF3TWVzc2FnZURlbHRhRXZlbnQsXG4gICAgdHlwZSBSYXdNZXNzYWdlU3RhcnRFdmVudCBhcyBSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VTdG9wRXZlbnQgYXMgUmF3TWVzc2FnZVN0b3BFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VTdHJlYW1FdmVudCBhcyBSYXdNZXNzYWdlU3RyZWFtRXZlbnQsXG4gICAgdHlwZSBUZXh0QmxvY2sgYXMgVGV4dEJsb2NrLFxuICAgIHR5cGUgVGV4dEJsb2NrUGFyYW0gYXMgVGV4dEJsb2NrUGFyYW0sXG4gICAgdHlwZSBUZXh0Q2l0YXRpb24gYXMgVGV4dENpdGF0aW9uLFxuICAgIHR5cGUgVGV4dENpdGF0aW9uUGFyYW0gYXMgVGV4dENpdGF0aW9uUGFyYW0sXG4gICAgdHlwZSBUZXh0RGVsdGEgYXMgVGV4dERlbHRhLFxuICAgIHR5cGUgVG9vbCBhcyBUb29sLFxuICAgIHR5cGUgVG9vbENob2ljZSBhcyBUb29sQ2hvaWNlLFxuICAgIHR5cGUgVG9vbENob2ljZUFueSBhcyBUb29sQ2hvaWNlQW55LFxuICAgIHR5cGUgVG9vbENob2ljZUF1dG8gYXMgVG9vbENob2ljZUF1dG8sXG4gICAgdHlwZSBUb29sQ2hvaWNlVG9vbCBhcyBUb29sQ2hvaWNlVG9vbCxcbiAgICB0eXBlIFRvb2xSZXN1bHRCbG9ja1BhcmFtIGFzIFRvb2xSZXN1bHRCbG9ja1BhcmFtLFxuICAgIHR5cGUgVG9vbFVzZUJsb2NrIGFzIFRvb2xVc2VCbG9jayxcbiAgICB0eXBlIFRvb2xVc2VCbG9ja1BhcmFtIGFzIFRvb2xVc2VCbG9ja1BhcmFtLFxuICAgIHR5cGUgVXNhZ2UgYXMgVXNhZ2UsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlU3RyZWFtUGFyYW1zIGFzIE1lc3NhZ2VTdHJlYW1QYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMgYXMgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICB9O1xuXG4gIGV4cG9ydCB7XG4gICAgTW9kZWxzIGFzIE1vZGVscyxcbiAgICB0eXBlIE1vZGVsSW5mbyBhcyBNb2RlbEluZm8sXG4gICAgTW9kZWxJbmZvc1BhZ2UgYXMgTW9kZWxJbmZvc1BhZ2UsXG4gICAgdHlwZSBNb2RlbExpc3RQYXJhbXMgYXMgTW9kZWxMaXN0UGFyYW1zLFxuICB9O1xuXG4gIGV4cG9ydCB7XG4gICAgQmV0YSBhcyBCZXRhLFxuICAgIHR5cGUgQW50aHJvcGljQmV0YSBhcyBBbnRocm9waWNCZXRhLFxuICAgIHR5cGUgQmV0YUFQSUVycm9yIGFzIEJldGFBUElFcnJvcixcbiAgICB0eXBlIEJldGFBdXRoZW50aWNhdGlvbkVycm9yIGFzIEJldGFBdXRoZW50aWNhdGlvbkVycm9yLFxuICAgIHR5cGUgQmV0YUJpbGxpbmdFcnJvciBhcyBCZXRhQmlsbGluZ0Vycm9yLFxuICAgIHR5cGUgQmV0YUVycm9yIGFzIEJldGFFcnJvcixcbiAgICB0eXBlIEJldGFFcnJvclJlc3BvbnNlIGFzIEJldGFFcnJvclJlc3BvbnNlLFxuICAgIHR5cGUgQmV0YUdhdGV3YXlUaW1lb3V0RXJyb3IgYXMgQmV0YUdhdGV3YXlUaW1lb3V0RXJyb3IsXG4gICAgdHlwZSBCZXRhSW52YWxpZFJlcXVlc3RFcnJvciBhcyBCZXRhSW52YWxpZFJlcXVlc3RFcnJvcixcbiAgICB0eXBlIEJldGFOb3RGb3VuZEVycm9yIGFzIEJldGFOb3RGb3VuZEVycm9yLFxuICAgIHR5cGUgQmV0YU92ZXJsb2FkZWRFcnJvciBhcyBCZXRhT3ZlcmxvYWRlZEVycm9yLFxuICAgIHR5cGUgQmV0YVBlcm1pc3Npb25FcnJvciBhcyBCZXRhUGVybWlzc2lvbkVycm9yLFxuICAgIHR5cGUgQmV0YVJhdGVMaW1pdEVycm9yIGFzIEJldGFSYXRlTGltaXRFcnJvcixcbiAgfTtcblxuICBleHBvcnQgdHlwZSBBUElFcnJvck9iamVjdCA9IEFQSS5BUElFcnJvck9iamVjdDtcbiAgZXhwb3J0IHR5cGUgQXV0aGVudGljYXRpb25FcnJvciA9IEFQSS5BdXRoZW50aWNhdGlvbkVycm9yO1xuICBleHBvcnQgdHlwZSBCaWxsaW5nRXJyb3IgPSBBUEkuQmlsbGluZ0Vycm9yO1xuICBleHBvcnQgdHlwZSBFcnJvck9iamVjdCA9IEFQSS5FcnJvck9iamVjdDtcbiAgZXhwb3J0IHR5cGUgRXJyb3JSZXNwb25zZSA9IEFQSS5FcnJvclJlc3BvbnNlO1xuICBleHBvcnQgdHlwZSBHYXRld2F5VGltZW91dEVycm9yID0gQVBJLkdhdGV3YXlUaW1lb3V0RXJyb3I7XG4gIGV4cG9ydCB0eXBlIEludmFsaWRSZXF1ZXN0RXJyb3IgPSBBUEkuSW52YWxpZFJlcXVlc3RFcnJvcjtcbiAgZXhwb3J0IHR5cGUgTm90Rm91bmRFcnJvciA9IEFQSS5Ob3RGb3VuZEVycm9yO1xuICBleHBvcnQgdHlwZSBPdmVybG9hZGVkRXJyb3IgPSBBUEkuT3ZlcmxvYWRlZEVycm9yO1xuICBleHBvcnQgdHlwZSBQZXJtaXNzaW9uRXJyb3IgPSBBUEkuUGVybWlzc2lvbkVycm9yO1xuICBleHBvcnQgdHlwZSBSYXRlTGltaXRFcnJvciA9IEFQSS5SYXRlTGltaXRFcnJvcjtcbn1cbmV4cG9ydCBjb25zdCB7IEhVTUFOX1BST01QVCwgQUlfUFJPTVBUIH0gPSBBbnRocm9waWM7XG5cbmV4cG9ydCB7IHRvRmlsZSwgZmlsZUZyb21QYXRoIH0gZnJvbSBcIi4vdXBsb2Fkcy5qc1wiO1xuZXhwb3J0IHtcbiAgQW50aHJvcGljRXJyb3IsXG4gIEFQSUVycm9yLFxuICBBUElDb25uZWN0aW9uRXJyb3IsXG4gIEFQSUNvbm5lY3Rpb25UaW1lb3V0RXJyb3IsXG4gIEFQSVVzZXJBYm9ydEVycm9yLFxuICBOb3RGb3VuZEVycm9yLFxuICBDb25mbGljdEVycm9yLFxuICBSYXRlTGltaXRFcnJvcixcbiAgQmFkUmVxdWVzdEVycm9yLFxuICBBdXRoZW50aWNhdGlvbkVycm9yLFxuICBJbnRlcm5hbFNlcnZlckVycm9yLFxuICBQZXJtaXNzaW9uRGVuaWVkRXJyb3IsXG4gIFVucHJvY2Vzc2FibGVFbnRpdHlFcnJvcixcbn0gZnJvbSBcIi4vZXJyb3IuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgQW50aHJvcGljO1xuIiwgIi8qKlxyXG4gKiBBbnRocm9waWMgUHJvdmlkZXIgSW1wbGVtZW50YXRpb25cclxuICogXHJcbiAqIFRoaXMgZmlsZSBjb250YWlucyB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIEFudGhyb3BpYyBwcm92aWRlcixcclxuICogd2hpY2ggYWxsb3dzIHRoZSBwbHVnaW4gdG8gaW50ZXJhY3Qgd2l0aCBBbnRocm9waWMncyBBUEkgKENsYXVkZSBtb2RlbHMpXHJcbiAqIHVzaW5nIHRoZSBvZmZpY2lhbCBBbnRocm9waWMgVHlwZVNjcmlwdCBTREsuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTWVzc2FnZSwgQ29tcGxldGlvbk9wdGlvbnMsIENvbm5lY3Rpb25UZXN0UmVzdWx0IH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBCYXNlUHJvdmlkZXIsIFByb3ZpZGVyRXJyb3IgfSBmcm9tICcuL2Jhc2UnO1xyXG5pbXBvcnQgQW50aHJvcGljIGZyb20gJ0BhbnRocm9waWMtYWkvc2RrJztcclxuXHJcbi8qKlxyXG4gKiBJbXBsZW1lbnRzIHRoZSBBbnRocm9waWMgcHJvdmlkZXIgZnVuY3Rpb25hbGl0eVxyXG4gKiBcclxuICogSGFuZGxlcyBjb21tdW5pY2F0aW9uIHdpdGggQW50aHJvcGljJ3MgQVBJLCBpbmNsdWRpbmc6XHJcbiAqIC0gQ2hhdCBjb21wbGV0aW9uc1xyXG4gKiAtIE1vZGVsIGxpc3RpbmdcclxuICogLSBDb25uZWN0aW9uIHRlc3RpbmdcclxuICogLSBTdHJlYW1pbmcgcmVzcG9uc2VzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQW50aHJvcGljUHJvdmlkZXIgZXh0ZW5kcyBCYXNlUHJvdmlkZXIge1xyXG4gICAgcHJvdGVjdGVkIGFwaUtleTogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIGJhc2VVcmwgPSAnaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbS92MSc7XHJcbiAgICBwcm90ZWN0ZWQgbW9kZWw6IHN0cmluZztcclxuICAgIHByaXZhdGUgY2xpZW50OiBBbnRocm9waWM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBpS2V5OiBzdHJpbmcsIG1vZGVsOiBzdHJpbmcgPSAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5Jykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xyXG4gICAgICAgIHRoaXMuY2xpZW50ID0gbmV3IEFudGhyb3BpYyh7XHJcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5hcGlLZXksXHJcbiAgICAgICAgICAgIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyOiB0cnVlIC8vIFJlcXVpcmVkIGZvciBicm93c2VyIGVudmlyb25tZW50c1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgY29tcGxldGlvbiBmcm9tIEFudGhyb3BpY1xyXG4gICAgICogXHJcbiAgICAgKiBTZW5kcyB0aGUgY29udmVyc2F0aW9uIHRvIEFudGhyb3BpYyBhbmQgc3RyZWFtcyBiYWNrIHRoZSByZXNwb25zZVxyXG4gICAgICogdXNpbmcgdGhlIG9mZmljaWFsIFNESydzIHN0cmVhbWluZyBzdXBwb3J0LlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgLSBUaGUgY29udmVyc2F0aW9uIGhpc3RvcnlcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gU2V0dGluZ3MgZm9yIHRoaXMgY29tcGxldGlvblxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRDb21wbGV0aW9uKG1lc3NhZ2VzOiBNZXNzYWdlW10sIG9wdGlvbnM6IENvbXBsZXRpb25PcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3Qgc3RyZWFtID0gYXdhaXQgdGhpcy5jbGllbnQubWVzc2FnZXMuY3JlYXRlKHtcclxuICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZXM6IG1lc3NhZ2VzLm1hcChtc2cgPT4gKHtcclxuICAgICAgICAgICAgICAgICAgICByb2xlOiBtc2cucm9sZSA9PT0gJ3N5c3RlbScgPyAndXNlcicgOiBtc2cucm9sZSxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBtc2cuY29udGVudFxyXG4gICAgICAgICAgICAgICAgfSkpLFxyXG4gICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IG9wdGlvbnMudGVtcGVyYXR1cmUgPz8gMC43LFxyXG4gICAgICAgICAgICAgICAgbWF4X3Rva2Vuczogb3B0aW9ucy5tYXhUb2tlbnMgPz8gMTAwMCxcclxuICAgICAgICAgICAgICAgIHN0cmVhbTogdHJ1ZVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2Ygc3RyZWFtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY2h1bmsudHlwZSA9PT0gJ2NvbnRlbnRfYmxvY2tfZGVsdGEnICYmIGNodW5rLmRlbHRhPy50eXBlID09PSAndGV4dF9kZWx0YScgJiYgb3B0aW9ucy5zdHJlYW1DYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2soY2h1bmsuZGVsdGEudGV4dCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQcm92aWRlckVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnQW50aHJvcGljIHN0cmVhbSB3YXMgYWJvcnRlZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2FsbGluZyBBbnRocm9waWM6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYXZhaWxhYmxlIEFudGhyb3BpYyBtb2RlbHNcclxuICAgICAqIFxyXG4gICAgICogUmV0dXJucyB0aGUgbGlzdCBvZiBzdXBwb3J0ZWQgQ2xhdWRlIG1vZGVscy5cclxuICAgICAqIE5vdGU6IEFudGhyb3BpYyBkb2Vzbid0IGhhdmUgYSBtb2RlbHMgZW5kcG9pbnQsIHNvIHdlIHJldHVybiBrbm93biBtb2RlbHMuXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIExpc3Qgb2YgYXZhaWxhYmxlIG1vZGVsIG5hbWVzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEF2YWlsYWJsZU1vZGVscygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcbiAgICAgICAgcmV0dXJuIFtcclxuICAgICAgICAgICAgJ2NsYXVkZS0zLW9wdXMtMjAyNDAyMjknLFxyXG4gICAgICAgICAgICAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5JyxcclxuICAgICAgICAgICAgJ2NsYXVkZS0zLWhhaWt1LTIwMjQwMzA3J1xyXG4gICAgICAgIF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXN0IGNvbm5lY3Rpb24gdG8gQW50aHJvcGljXHJcbiAgICAgKiBcclxuICAgICAqIFZlcmlmaWVzIHRoZSBBUEkga2V5IHdvcmtzIGJ5IGF0dGVtcHRpbmcgYSBzaW1wbGUgY29tcGxldGlvbi5cclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMgVGVzdCByZXN1bHRzIGluY2x1ZGluZyBzdWNjZXNzL2ZhaWx1cmVcclxuICAgICAqL1xyXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxDb25uZWN0aW9uVGVzdFJlc3VsdD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIFRlc3QgdGhlIGNvbm5lY3Rpb24gYnkgc2VuZGluZyBhIG1pbmltYWwgbWVzc2FnZVxyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmNsaWVudC5tZXNzYWdlcy5jcmVhdGUoe1xyXG4gICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlczogW3sgcm9sZTogJ3VzZXInLCBjb250ZW50OiAnSGknIH1dLFxyXG4gICAgICAgICAgICAgICAgbWF4X3Rva2VuczogMVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IHRoaXMuZ2V0QXZhaWxhYmxlTW9kZWxzKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogJ1N1Y2Nlc3NmdWxseSBjb25uZWN0ZWQgdG8gQW50aHJvcGljIScsXHJcbiAgICAgICAgICAgICAgICBtb2RlbHNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFcnJvclJlc3BvbnNlKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBPcGVuQUkgUHJvdmlkZXIgSW1wbGVtZW50YXRpb25cclxuICogXHJcbiAqIFRoaXMgZmlsZSBjb250YWlucyB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIE9wZW5BSSBwcm92aWRlcixcclxuICogd2hpY2ggYWxsb3dzIHRoZSBwbHVnaW4gdG8gaW50ZXJhY3Qgd2l0aCBPcGVuQUkncyBBUEkgKEdQVC0zLjUsIEdQVC00LCBldGMuKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IE1lc3NhZ2UsIENvbXBsZXRpb25PcHRpb25zLCBDb25uZWN0aW9uVGVzdFJlc3VsdCB9IGZyb20gJy4uL3R5cGVzJztcclxuaW1wb3J0IHsgQmFzZVByb3ZpZGVyLCBQcm92aWRlckVycm9yLCBQcm92aWRlckVycm9yVHlwZSB9IGZyb20gJy4vYmFzZSc7XHJcblxyXG5pbnRlcmZhY2UgT3BlbkFJUmVzcG9uc2Uge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIG9iamVjdDogc3RyaW5nO1xyXG4gICAgY3JlYXRlZDogbnVtYmVyO1xyXG4gICAgbW9kZWw6IHN0cmluZztcclxuICAgIHN5c3RlbV9maW5nZXJwcmludDogc3RyaW5nO1xyXG4gICAgY2hvaWNlczogQXJyYXk8e1xyXG4gICAgICAgIGluZGV4OiBudW1iZXI7XHJcbiAgICAgICAgbWVzc2FnZToge1xyXG4gICAgICAgICAgICByb2xlOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHN0cmluZztcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZpbmlzaF9yZWFzb246IHN0cmluZztcclxuICAgIH0+O1xyXG4gICAgdXNhZ2U6IHtcclxuICAgICAgICBwcm9tcHRfdG9rZW5zOiBudW1iZXI7XHJcbiAgICAgICAgY29tcGxldGlvbl90b2tlbnM6IG51bWJlcjtcclxuICAgICAgICB0b3RhbF90b2tlbnM6IG51bWJlcjtcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbXBsZW1lbnRzIHRoZSBPcGVuQUkgcHJvdmlkZXIgZnVuY3Rpb25hbGl0eVxyXG4gKiBcclxuICogSGFuZGxlcyBjb21tdW5pY2F0aW9uIHdpdGggT3BlbkFJJ3MgQVBJLCBpbmNsdWRpbmc6XHJcbiAqIC0gQ2hhdCBjb21wbGV0aW9uc1xyXG4gKiAtIE1vZGVsIGxpc3RpbmdcclxuICogLSBDb25uZWN0aW9uIHRlc3RpbmdcclxuICogLSBTdHJlYW1pbmcgcmVzcG9uc2VzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT3BlbkFJUHJvdmlkZXIgZXh0ZW5kcyBCYXNlUHJvdmlkZXIge1xyXG4gICAgcHJvdGVjdGVkIGFwaUtleTogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIGJhc2VVcmwgPSAnaHR0cHM6Ly9hcGkub3BlbmFpLmNvbS92MSc7XHJcbiAgICBwcm90ZWN0ZWQgbW9kZWw6IHN0cmluZztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcGlLZXk6IHN0cmluZywgbW9kZWw6IHN0cmluZyA9ICdncHQtNCcpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xyXG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIGNvbXBsZXRpb24gZnJvbSBPcGVuQUlcclxuICAgICAqIFxyXG4gICAgICogU2VuZHMgdGhlIGNvbnZlcnNhdGlvbiB0byBPcGVuQUkgYW5kIHN0cmVhbXMgYmFjayB0aGUgcmVzcG9uc2UuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyAtIFRoZSBjb252ZXJzYXRpb24gaGlzdG9yeVxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBTZXR0aW5ncyBmb3IgdGhpcyBjb21wbGV0aW9uXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldENvbXBsZXRpb24obWVzc2FnZXM6IE1lc3NhZ2VbXSwgb3B0aW9uczogQ29tcGxldGlvbk9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVybH0vY2hhdC9jb21wbGV0aW9uc2AsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAsXHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlcyxcclxuICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogb3B0aW9ucy50ZW1wZXJhdHVyZSA/PyAwLjcsXHJcbiAgICAgICAgICAgICAgICAgICAgbWF4X3Rva2Vuczogb3B0aW9ucy5tYXhUb2tlbnMgPz8gMTAwMCxcclxuICAgICAgICAgICAgICAgICAgICBzdHJlYW06IHRydWVcclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLmFib3J0Q29udHJvbGxlcj8uc2lnbmFsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVIdHRwRXJyb3IocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZWFkZXIgPSByZXNwb25zZS5ib2R5Py5nZXRSZWFkZXIoKTtcclxuICAgICAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTtcclxuICAgICAgICAgICAgbGV0IGJ1ZmZlciA9ICcnO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlcj8ucmVhZCgpIHx8IHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKGRvbmUpIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ1ZmZlciArPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGJ1ZmZlci5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICBidWZmZXIgPSBsaW5lcy5wb3AoKSB8fCAnJztcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGluZS5zdGFydHNXaXRoKCdkYXRhOiAnKSAmJiBsaW5lICE9PSAnZGF0YTogW0RPTkVdJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IEpTT04ucGFyc2UobGluZS5zbGljZSg2KSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gZGF0YS5jaG9pY2VzWzBdPy5kZWx0YT8uY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50ICYmIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN0cmVhbUNhbGxiYWNrKGNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIHBhcnNpbmcgT3BlbkFJIHJlc3BvbnNlIGNodW5rOicsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUHJvdmlkZXJFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ09wZW5BSSBzdHJlYW0gd2FzIGFib3J0ZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhbGxpbmcgT3BlbkFJOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGF2YWlsYWJsZSBPcGVuQUkgbW9kZWxzXHJcbiAgICAgKiBcclxuICAgICAqIEZldGNoZXMgdGhlIGxpc3Qgb2YgbW9kZWxzIGZyb20gT3BlbkFJJ3MgQVBJLlxyXG4gICAgICogRmlsdGVycyB0byBvbmx5IGluY2x1ZGUgY2hhdCBtb2RlbHMgKEdQVC0zLjUsIEdQVC00LCBldGMuKVxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJucyBMaXN0IG9mIGF2YWlsYWJsZSBtb2RlbCBuYW1lc1xyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRBdmFpbGFibGVNb2RlbHMoKTogUHJvbWlzZTxzdHJpbmdbXT4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9tb2RlbHNgLCB7XHJcbiAgICAgICAgICAgICAgICBtZXRob2Q6ICdHRVQnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdBdXRob3JpemF0aW9uJzogYEJlYXJlciAke3RoaXMuYXBpS2V5fWAsXHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlSHR0cEVycm9yKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEuZGF0YVxyXG4gICAgICAgICAgICAgICAgLm1hcCgobW9kZWw6IGFueSkgPT4gbW9kZWwuaWQpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChpZDogc3RyaW5nKSA9PiBpZC5zdGFydHNXaXRoKCdncHQtJykpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIE9wZW5BSSBtb2RlbHM6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXN0IGNvbm5lY3Rpb24gdG8gT3BlbkFJXHJcbiAgICAgKiBcclxuICAgICAqIFZlcmlmaWVzIHRoZSBBUEkga2V5IHdvcmtzIGJ5IGF0dGVtcHRpbmcgdG8gbGlzdCBtb2RlbHMuXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIFRlc3QgcmVzdWx0cyBpbmNsdWRpbmcgc3VjY2Vzcy9mYWlsdXJlIGFuZCBhdmFpbGFibGUgbW9kZWxzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Q29ubmVjdGlvblRlc3RSZXN1bHQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBtb2RlbHMgPSBhd2FpdCB0aGlzLmdldEF2YWlsYWJsZU1vZGVscygpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIE9wZW5BSSEgRm91bmQgJHttb2RlbHMubGVuZ3RofSBhdmFpbGFibGUgbW9kZWxzLmAsXHJcbiAgICAgICAgICAgICAgICBtb2RlbHNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFcnJvclJlc3BvbnNlKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBHb29nbGUgR2VtaW5pIFByb3ZpZGVyIEltcGxlbWVudGF0aW9uXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBHb29nbGUgR2VtaW5pIHByb3ZpZGVyLFxyXG4gKiB3aGljaCBhbGxvd3MgdGhlIHBsdWdpbiB0byBpbnRlcmFjdCB3aXRoIEdvb2dsZSdzIEdlbWluaSBBUEkuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTWVzc2FnZSwgQ29tcGxldGlvbk9wdGlvbnMsIENvbm5lY3Rpb25UZXN0UmVzdWx0IH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBCYXNlUHJvdmlkZXIsIFByb3ZpZGVyRXJyb3IsIFByb3ZpZGVyRXJyb3JUeXBlIH0gZnJvbSAnLi9iYXNlJztcclxuXHJcbmludGVyZmFjZSBHZW1pbmlSZXNwb25zZSB7XHJcbiAgICBjYW5kaWRhdGVzOiBBcnJheTx7XHJcbiAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICBwYXJ0czogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nO1xyXG4gICAgICAgICAgICB9PjtcclxuICAgICAgICAgICAgcm9sZTogc3RyaW5nO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZmluaXNoUmVhc29uOiBzdHJpbmc7XHJcbiAgICAgICAgaW5kZXg6IG51bWJlcjtcclxuICAgICAgICBzYWZldHlSYXRpbmdzOiBBcnJheTxhbnk+O1xyXG4gICAgfT47XHJcbiAgICBwcm9tcHRGZWVkYmFjazoge1xyXG4gICAgICAgIHNhZmV0eVJhdGluZ3M6IEFycmF5PGFueT47XHJcbiAgICB9O1xyXG59XHJcblxyXG4vKipcclxuICogSW1wbGVtZW50cyB0aGUgR29vZ2xlIEdlbWluaSBwcm92aWRlciBmdW5jdGlvbmFsaXR5XHJcbiAqIFxyXG4gKiBIYW5kbGVzIGNvbW11bmljYXRpb24gd2l0aCBHb29nbGUncyBHZW1pbmkgQVBJLCBpbmNsdWRpbmc6XHJcbiAqIC0gQ2hhdCBjb21wbGV0aW9uc1xyXG4gKiAtIE1vZGVsIGxpc3RpbmdcclxuICogLSBDb25uZWN0aW9uIHRlc3RpbmdcclxuICogLSBTdHJlYW1pbmcgcmVzcG9uc2VzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgR2VtaW5pUHJvdmlkZXIgZXh0ZW5kcyBCYXNlUHJvdmlkZXIge1xyXG4gICAgcHJvdGVjdGVkIGFwaUtleTogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIGJhc2VVcmwgPSAnaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjEnO1xyXG4gICAgcHJvdGVjdGVkIG1vZGVsOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBpS2V5OiBzdHJpbmcsIG1vZGVsOiBzdHJpbmcgPSAnZ2VtaW5pLXBybycpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xyXG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIGNvbXBsZXRpb24gZnJvbSBHb29nbGUgR2VtaW5pXHJcbiAgICAgKiBcclxuICAgICAqIFNlbmRzIHRoZSBjb252ZXJzYXRpb24gdG8gR2VtaW5pIGFuZCBzdHJlYW1zIGJhY2sgdGhlIHJlc3BvbnNlLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgLSBUaGUgY29udmVyc2F0aW9uIGhpc3RvcnlcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gU2V0dGluZ3MgZm9yIHRoaXMgY29tcGxldGlvblxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRDb21wbGV0aW9uKG1lc3NhZ2VzOiBNZXNzYWdlW10sIG9wdGlvbnM6IENvbXBsZXRpb25PcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gRm9ybWF0IG1lc3NhZ2VzIGZvciBHZW1pbmkgQVBJXHJcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZE1lc3NhZ2VzID0gdGhpcy5mb3JtYXRNZXNzYWdlcyhtZXNzYWdlcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBGb3IgY2hhdCBtb2RlbHMsIHdlIHNob3VsZCB1c2UgdGhlIGdlbmVyYXRlQ29udGVudCBlbmRwb2ludFxyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9L21vZGVscy8ke3RoaXMubW9kZWx9OmdlbmVyYXRlQ29udGVudD9rZXk9JHt0aGlzLmFwaUtleX1gO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVXNlIG5vbi1zdHJlYW1pbmcgdmVyc2lvbiBmb3IgY2hhdCBjb21wbGV0aW9uc1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50czogZm9ybWF0dGVkTWVzc2FnZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogb3B0aW9ucy50ZW1wZXJhdHVyZSA/PyAwLjcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heE91dHB1dFRva2Vuczogb3B0aW9ucy5tYXhUb2tlbnMgPz8gMTAwMFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLmFib3J0Q29udHJvbGxlcj8uc2lnbmFsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVIdHRwRXJyb3IocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBGb3Igbm9uLXN0cmVhbWluZyByZXNwb25zZSwgcGFyc2UgdGhlIEpTT04gZGlyZWN0bHlcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dlbWluaSByZXNwb25zZTonLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSB0ZXh0IGZyb20gdGhlIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBkYXRhLmNhbmRpZGF0ZXM/LlswXT8uY29udGVudD8ucGFydHM/LlswXT8udGV4dDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh0ZXh0ICYmIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIC8vIEV2ZW4gdGhvdWdoIGl0J3Mgbm90IHN0cmVhbWluZywgd2UgdXNlIHRoZSBzdHJlYW1DYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgLy8gdG8gbWFpbnRhaW4gY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBleGlzdGluZyBpbnRlcmZhY2VcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2sodGV4dCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIHRleHQgZm91bmQgaW4gR2VtaW5pIHJlc3BvbnNlOicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFByb3ZpZGVyRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHZW1pbmkgcmVxdWVzdCB3YXMgYWJvcnRlZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2FsbGluZyBHZW1pbmk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYXZhaWxhYmxlIEdlbWluaSBtb2RlbHNcclxuICAgICAqIFxyXG4gICAgICogRmV0Y2hlcyB0aGUgbGlzdCBvZiBhdmFpbGFibGUgbW9kZWxzIGZyb20gR29vZ2xlJ3MgQVBJLlxyXG4gICAgICogRmlsdGVycyB0byBvbmx5IGluY2x1ZGUgR2VtaW5pIG1vZGVscy5cclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMgTGlzdCBvZiBhdmFpbGFibGUgbW9kZWwgbmFtZXNcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0QXZhaWxhYmxlTW9kZWxzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVybH0vbW9kZWxzP2tleT0ke3RoaXMuYXBpS2V5fWAsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlSHR0cEVycm9yKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEubW9kZWxzXHJcbiAgICAgICAgICAgICAgICAubWFwKChtb2RlbDogYW55KSA9PiBtb2RlbC5uYW1lLnNwbGl0KCcvJykucG9wKCkpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChpZDogc3RyaW5nKSA9PiBpZC5zdGFydHNXaXRoKCdnZW1pbmktJykpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIEdlbWluaSBtb2RlbHM6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXN0IGNvbm5lY3Rpb24gdG8gR2VtaW5pXHJcbiAgICAgKiBcclxuICAgICAqIFZlcmlmaWVzIHRoZSBBUEkga2V5IHdvcmtzIGJ5IGF0dGVtcHRpbmcgdG8gbGlzdCBtb2RlbHMuXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIFRlc3QgcmVzdWx0cyBpbmNsdWRpbmcgc3VjY2Vzcy9mYWlsdXJlIGFuZCBhdmFpbGFibGUgbW9kZWxzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Q29ubmVjdGlvblRlc3RSZXN1bHQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBtb2RlbHMgPSBhd2FpdCB0aGlzLmdldEF2YWlsYWJsZU1vZGVscygpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIEdvb2dsZSBHZW1pbmkhIEZvdW5kICR7bW9kZWxzLmxlbmd0aH0gYXZhaWxhYmxlIG1vZGVscy5gLFxyXG4gICAgICAgICAgICAgICAgbW9kZWxzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3JSZXNwb25zZShlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm9ybWF0IG1lc3NhZ2VzIGZvciBHZW1pbmkgQVBJXHJcbiAgICAgKiBcclxuICAgICAqIENvbnZlcnRzIGZyb20gdGhlIHBsdWdpbidzIE1lc3NhZ2UgZm9ybWF0IHRvIEdlbWluaSdzIGV4cGVjdGVkIGZvcm1hdC5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIC0gQXJyYXkgb2YgbWVzc2FnZXMgdG8gZm9ybWF0XHJcbiAgICAgKiBAcmV0dXJucyBGb3JtYXR0ZWQgbWVzc2FnZXMgZm9yIEdlbWluaSBBUElcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBmb3JtYXRNZXNzYWdlcyhtZXNzYWdlczogTWVzc2FnZVtdKTogQXJyYXk8YW55PiB7XHJcbiAgICAgICAgLy8gVGhlIEdlbWluaSBBUEkgZXhwZWN0cyBhIGNoYXQgZm9ybWF0IHdoZXJlOlxyXG4gICAgICAgIC8vIDEuIFN5c3RlbSBtZXNzYWdlcyBzaG91bGQgYmUgc2VudCBhcyB1c2VyIG1lc3NhZ2VzIHRoYXQgY29tZSBmaXJzdFxyXG4gICAgICAgIC8vIDIuIEVhY2ggbWVzc2FnZSBuZWVkcyB0byBoYXZlIGEgcm9sZSBhbmQgcGFydHMgYXJyYXlcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBnZW1pbmlNZXNzYWdlcyA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEZpcnN0LCBmaW5kIGFuZCBwcm9jZXNzIHN5c3RlbSBtZXNzYWdlc1xyXG4gICAgICAgIGNvbnN0IHN5c3RlbU1lc3NhZ2VzID0gbWVzc2FnZXMuZmlsdGVyKG1zZyA9PiBtc2cucm9sZSA9PT0gJ3N5c3RlbScpO1xyXG4gICAgICAgIGNvbnN0IG5vblN5c3RlbU1lc3NhZ2VzID0gbWVzc2FnZXMuZmlsdGVyKG1zZyA9PiBtc2cucm9sZSAhPT0gJ3N5c3RlbScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEFkZCBzeXN0ZW0gbWVzc2FnZXMgZmlyc3QgYXMgdXNlciBtZXNzYWdlc1xyXG4gICAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBzeXN0ZW1NZXNzYWdlcykge1xyXG4gICAgICAgICAgICBnZW1pbmlNZXNzYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgICAgICAgICAgIHBhcnRzOiBbeyB0ZXh0OiBtZXNzYWdlLmNvbnRlbnQgfV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRoZW4gYWRkIHRoZSByZWd1bGFyIGNvbnZlcnNhdGlvbiBtZXNzYWdlc1xyXG4gICAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBub25TeXN0ZW1NZXNzYWdlcykge1xyXG4gICAgICAgICAgICAvLyBHZW1pbmkgb25seSBzdXBwb3J0cyAndXNlcicgYW5kICdtb2RlbCcgcm9sZXNcclxuICAgICAgICAgICAgY29uc3Qgcm9sZSA9IG1lc3NhZ2Uucm9sZSA9PT0gJ2Fzc2lzdGFudCcgPyAnbW9kZWwnIDogJ3VzZXInO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZ2VtaW5pTWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICByb2xlOiByb2xlLFxyXG4gICAgICAgICAgICAgICAgcGFydHM6IFt7IHRleHQ6IG1lc3NhZ2UuY29udGVudCB9XVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGdlbWluaU1lc3NhZ2VzO1xyXG4gICAgfVxyXG59XHJcbiIsICIvKipcclxuICogT2xsYW1hIFByb3ZpZGVyIEltcGxlbWVudGF0aW9uXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBPbGxhbWEgcHJvdmlkZXIsXHJcbiAqIHdoaWNoIGFsbG93cyB0aGUgcGx1Z2luIHRvIGludGVyYWN0IHdpdGggYSBsb2NhbCBPbGxhbWEgc2VydmVyXHJcbiAqIHJ1bm5pbmcgQUkgbW9kZWxzIGxpa2UgTGxhbWEsIE1pc3RyYWwsIGV0Yy5cclxuICovXHJcblxyXG5pbXBvcnQgeyBNZXNzYWdlLCBDb21wbGV0aW9uT3B0aW9ucywgQ29ubmVjdGlvblRlc3RSZXN1bHQgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IEJhc2VQcm92aWRlciwgUHJvdmlkZXJFcnJvciwgUHJvdmlkZXJFcnJvclR5cGUgfSBmcm9tICcuL2Jhc2UnO1xyXG5cclxuaW50ZXJmYWNlIE9sbGFtYVJlc3BvbnNlIHtcclxuICAgIG1vZGVsOiBzdHJpbmc7XHJcbiAgICBjcmVhdGVkX2F0OiBzdHJpbmc7XHJcbiAgICByZXNwb25zZTogc3RyaW5nO1xyXG4gICAgZG9uZTogYm9vbGVhbjtcclxuICAgIGNvbnRleHQ/OiBudW1iZXJbXTtcclxuICAgIHRvdGFsX2R1cmF0aW9uPzogbnVtYmVyO1xyXG4gICAgbG9hZF9kdXJhdGlvbj86IG51bWJlcjtcclxuICAgIHByb21wdF9ldmFsX2R1cmF0aW9uPzogbnVtYmVyO1xyXG4gICAgZXZhbF9kdXJhdGlvbj86IG51bWJlcjtcclxuICAgIGV2YWxfY291bnQ/OiBudW1iZXI7XHJcbn1cclxuXHJcbmludGVyZmFjZSBPbGxhbWFNb2RlbCB7XHJcbiAgICBuYW1lOiBzdHJpbmc7XHJcbiAgICBtb2RpZmllZF9hdDogc3RyaW5nO1xyXG4gICAgc2l6ZTogbnVtYmVyO1xyXG4gICAgZGlnZXN0OiBzdHJpbmc7XHJcbiAgICBkZXRhaWxzOiB7XHJcbiAgICAgICAgZm9ybWF0OiBzdHJpbmc7XHJcbiAgICAgICAgZmFtaWx5OiBzdHJpbmc7XHJcbiAgICAgICAgcGFyYW1ldGVyX3NpemU6IHN0cmluZztcclxuICAgICAgICBxdWFudGl6YXRpb25fbGV2ZWw6IHN0cmluZztcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbXBsZW1lbnRzIHRoZSBPbGxhbWEgcHJvdmlkZXIgZnVuY3Rpb25hbGl0eVxyXG4gKiBcclxuICogSGFuZGxlcyBjb21tdW5pY2F0aW9uIHdpdGggYSBsb2NhbCBPbGxhbWEgc2VydmVyLCBpbmNsdWRpbmc6XHJcbiAqIC0gQ2hhdCBjb21wbGV0aW9uc1xyXG4gKiAtIE1vZGVsIGxpc3RpbmdcclxuICogLSBDb25uZWN0aW9uIHRlc3RpbmdcclxuICogLSBTdHJlYW1pbmcgcmVzcG9uc2VzXHJcbiAqIFxyXG4gKiBSZXF1aXJlcyBPbGxhbWEgdG8gYmUgaW5zdGFsbGVkIGFuZCBydW5uaW5nIGxvY2FsbHk6XHJcbiAqIDEuIEluc3RhbGwgT2xsYW1hIGZyb20gaHR0cHM6Ly9vbGxhbWEuYWlcclxuICogMi4gU3RhcnQgdGhlIE9sbGFtYSBzZXJ2ZXJcclxuICogMy4gUHVsbCB5b3VyIGRlc2lyZWQgbW9kZWxzIHVzaW5nICdvbGxhbWEgcHVsbCBtb2RlbC1uYW1lJ1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE9sbGFtYVByb3ZpZGVyIGV4dGVuZHMgQmFzZVByb3ZpZGVyIHtcclxuICAgIHByb3RlY3RlZCBhcGlLZXk6IHN0cmluZyA9ICcnOyAvLyBOb3QgdXNlZCBmb3IgT2xsYW1hXHJcbiAgICBwcm90ZWN0ZWQgYmFzZVVybDogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIG1vZGVsOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3Ioc2VydmVyVXJsOiBzdHJpbmcgPSAnaHR0cDovL2xvY2FsaG9zdDoxMTQzNCcsIG1vZGVsOiBzdHJpbmcgPSAnbGxhbWEyJykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5iYXNlVXJsID0gc2VydmVyVXJsLnJlcGxhY2UoL1xcLyQvLCAnJyk7IC8vIFJlbW92ZSB0cmFpbGluZyBzbGFzaCBpZiBwcmVzZW50XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29udmVydCBtZXNzYWdlcyB0byBPbGxhbWEgZm9ybWF0XHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyAtIFN0YW5kYXJkIG1lc3NhZ2UgZm9ybWF0XHJcbiAgICAgKiBAcmV0dXJucyBQcm9tcHQgc3RyaW5nIGluIE9sbGFtYSBmb3JtYXRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjb252ZXJ0VG9PbGxhbWFGb3JtYXQobWVzc2FnZXM6IE1lc3NhZ2VbXSk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VzLm1hcChtc2cgPT4ge1xyXG4gICAgICAgICAgICBpZiAobXNnLnJvbGUgPT09ICdzeXN0ZW0nKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYFN5c3RlbTogJHttc2cuY29udGVudH1cXG5cXG5gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiBgJHttc2cucm9sZSA9PT0gJ3VzZXInID8gJ0h1bWFuJyA6ICdBc3Npc3RhbnQnfTogJHttc2cuY29udGVudH1cXG5cXG5gO1xyXG4gICAgICAgIH0pLmpvaW4oJycpICsgJ0Fzc2lzdGFudDonO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgY29tcGxldGlvbiBmcm9tIE9sbGFtYVxyXG4gICAgICogXHJcbiAgICAgKiBTZW5kcyB0aGUgY29udmVyc2F0aW9uIHRvIHRoZSBsb2NhbCBPbGxhbWEgc2VydmVyIGFuZCBzdHJlYW1zIGJhY2sgdGhlIHJlc3BvbnNlLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgLSBUaGUgY29udmVyc2F0aW9uIGhpc3RvcnlcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gU2V0dGluZ3MgZm9yIHRoaXMgY29tcGxldGlvblxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRDb21wbGV0aW9uKG1lc3NhZ2VzOiBNZXNzYWdlW10sIG9wdGlvbnM6IENvbXBsZXRpb25PcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvbXB0ID0gdGhpcy5jb252ZXJ0VG9PbGxhbWFGb3JtYXQobWVzc2FnZXMpO1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVybH0vYXBpL2dlbmVyYXRlYCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICBwcm9tcHQsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IG9wdGlvbnMudGVtcGVyYXR1cmUgPz8gMC43LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBudW1fcHJlZGljdDogb3B0aW9ucy5tYXhUb2tlbnMgPz8gMTAwMFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLmFib3J0Q29udHJvbGxlcj8uc2lnbmFsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVIdHRwRXJyb3IocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCByZWFkZXIgPSByZXNwb25zZS5ib2R5Py5nZXRSZWFkZXIoKTtcclxuICAgICAgICAgICAgY29uc3QgZGVjb2RlciA9IG5ldyBUZXh0RGVjb2RlcigndXRmLTgnKTtcclxuICAgICAgICAgICAgbGV0IGJ1ZmZlciA9ICcnO1xyXG5cclxuICAgICAgICAgICAgd2hpbGUgKHRydWUpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZG9uZSwgdmFsdWUgfSA9IGF3YWl0IHJlYWRlcj8ucmVhZCgpIHx8IHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKGRvbmUpIGJyZWFrO1xyXG5cclxuICAgICAgICAgICAgICAgIGJ1ZmZlciArPSBkZWNvZGVyLmRlY29kZSh2YWx1ZSwgeyBzdHJlYW06IHRydWUgfSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBsaW5lcyA9IGJ1ZmZlci5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgICAgICAgICBidWZmZXIgPSBsaW5lcy5wb3AoKSB8fCAnJztcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAobGluZS50cmltKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRhdGE6IE9sbGFtYVJlc3BvbnNlID0gSlNPTi5wYXJzZShsaW5lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkYXRhLnJlc3BvbnNlICYmIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN0cmVhbUNhbGxiYWNrKGRhdGEucmVzcG9uc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIHBhcnNpbmcgT2xsYW1hIHJlc3BvbnNlIGNodW5rOicsIGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUHJvdmlkZXJFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ09sbGFtYSBzdHJlYW0gd2FzIGFib3J0ZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhbGxpbmcgT2xsYW1hOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGF2YWlsYWJsZSBPbGxhbWEgbW9kZWxzXHJcbiAgICAgKiBcclxuICAgICAqIEZldGNoZXMgdGhlIGxpc3Qgb2YgbW9kZWxzIGluc3RhbGxlZCBvbiB0aGUgbG9jYWwgT2xsYW1hIHNlcnZlci5cclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMgTGlzdCBvZiBhdmFpbGFibGUgbW9kZWwgbmFtZXNcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0QXZhaWxhYmxlTW9kZWxzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVybH0vYXBpL3RhZ3NgKTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlSHR0cEVycm9yKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuIChkYXRhLm1vZGVscyBhcyBPbGxhbWFNb2RlbFtdKT8ubWFwKG1vZGVsID0+IG1vZGVsLm5hbWUpIHx8IFtdO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIE9sbGFtYSBtb2RlbHM6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXN0IGNvbm5lY3Rpb24gdG8gT2xsYW1hXHJcbiAgICAgKiBcclxuICAgICAqIFZlcmlmaWVzIHRoZSBPbGxhbWEgc2VydmVyIGlzIHJ1bm5pbmcgYW5kIGFjY2Vzc2libGUuXHJcbiAgICAgKiBBbHNvIGNoZWNrcyBpZiBhbnkgbW9kZWxzIGFyZSBpbnN0YWxsZWQuXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIFRlc3QgcmVzdWx0cyBpbmNsdWRpbmcgc3VjY2Vzcy9mYWlsdXJlIGFuZCBhdmFpbGFibGUgbW9kZWxzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Q29ubmVjdGlvblRlc3RSZXN1bHQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBtb2RlbHMgPSBhd2FpdCB0aGlzLmdldEF2YWlsYWJsZU1vZGVscygpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKG1vZGVscy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogJ0Nvbm5lY3RlZCB0byBPbGxhbWEgc2VydmVyLCBidXQgbm8gbW9kZWxzIGFyZSBpbnN0YWxsZWQuIFVzZSBcIm9sbGFtYSBwdWxsIG1vZGVsLW5hbWVcIiB0byBpbnN0YWxsIG1vZGVscy4nLFxyXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsczogW11cclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYFN1Y2Nlc3NmdWxseSBjb25uZWN0ZWQgdG8gT2xsYW1hISBGb3VuZCAke21vZGVscy5sZW5ndGh9IGluc3RhbGxlZCBtb2RlbHMuYCxcclxuICAgICAgICAgICAgICAgIG1vZGVsc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVycm9yUmVzcG9uc2UoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEFJIFByb3ZpZGVycyBJbmRleFxyXG4gKiBcclxuICogVGhpcyBmaWxlIGV4cG9ydHMgYWxsIEFJIHByb3ZpZGVyIGltcGxlbWVudGF0aW9ucyBhbmQgc2hhcmVkIHR5cGVzLlxyXG4gKiBJbXBvcnQgcHJvdmlkZXJzIGZyb20gdGhpcyBmaWxlIHJhdGhlciB0aGFuIGRpcmVjdGx5IGZyb20gdGhlaXIgbW9kdWxlcy5cclxuICovXHJcblxyXG5pbXBvcnQgeyBNeVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBCYXNlUHJvdmlkZXIsIFByb3ZpZGVyRXJyb3IsIFByb3ZpZGVyRXJyb3JUeXBlIH0gZnJvbSAnLi9iYXNlJztcclxuaW1wb3J0IHsgQW50aHJvcGljUHJvdmlkZXIgfSBmcm9tICcuL2FudGhyb3BpYyc7XHJcbmltcG9ydCB7IE9wZW5BSVByb3ZpZGVyIH0gZnJvbSAnLi9vcGVuYWknO1xyXG5pbXBvcnQgeyBHZW1pbmlQcm92aWRlciB9IGZyb20gJy4vZ2VtaW5pJztcclxuaW1wb3J0IHsgT2xsYW1hUHJvdmlkZXIgfSBmcm9tICcuL29sbGFtYSc7XHJcblxyXG5leHBvcnQgeyBCYXNlUHJvdmlkZXIsIFByb3ZpZGVyRXJyb3IsIFByb3ZpZGVyRXJyb3JUeXBlIH07XHJcbmV4cG9ydCB7IEFudGhyb3BpY1Byb3ZpZGVyIH07XHJcbmV4cG9ydCB7IE9wZW5BSVByb3ZpZGVyIH07XHJcbmV4cG9ydCB7IEdlbWluaVByb3ZpZGVyIH07XHJcbmV4cG9ydCB7IE9sbGFtYVByb3ZpZGVyIH07XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhbiBBSSBwcm92aWRlciBpbnN0YW5jZSBiYXNlZCBvbiB0aGUgcGx1Z2luIHNldHRpbmdzXHJcbiAqIFxyXG4gKiBAcGFyYW0gc2V0dGluZ3MgVGhlIHBsdWdpbiBzZXR0aW5ncyBjb250YWluaW5nIHByb3ZpZGVyIGNvbmZpZ3VyYXRpb25cclxuICogQHJldHVybnMgVGhlIGFwcHJvcHJpYXRlIHByb3ZpZGVyIGluc3RhbmNlXHJcbiAqIEB0aHJvd3MgRXJyb3IgaWYgdGhlIHByb3ZpZGVyIHR5cGUgaXMgaW52YWxpZFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZVByb3ZpZGVyKHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzKTogQmFzZVByb3ZpZGVyIHtcclxuICAgIHN3aXRjaCAoc2V0dGluZ3MucHJvdmlkZXIpIHtcclxuICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE9wZW5BSVByb3ZpZGVyKFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MuYXBpS2V5LFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MubW9kZWxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBjYXNlICdhbnRocm9waWMnOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEFudGhyb3BpY1Byb3ZpZGVyKFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MuYXBpS2V5LFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MubW9kZWxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBjYXNlICdnZW1pbmknOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IEdlbWluaVByb3ZpZGVyKFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MuYXBpS2V5LFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MubW9kZWxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBjYXNlICdvbGxhbWEnOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE9sbGFtYVByb3ZpZGVyKFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3Muc2VydmVyVXJsLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3MubW9kZWxcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEludmFsaWQgcHJvdmlkZXIgdHlwZTogJHtzZXR0aW5ncy5wcm92aWRlcn1gKTtcclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBNeVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCBNeVBsdWdpbiBmcm9tICcuL21haW4nO1xyXG5cclxuLyoqXHJcbiAqIFBsdWdpbiBTZXR0aW5ncyBUYWJcclxuICogXHJcbiAqIFRoaXMgdGFiIHByb3ZpZGVzIGEgdXNlciBpbnRlcmZhY2UgZm9yIGNvbmZpZ3VyaW5nIHRoZSBwbHVnaW4gc2V0dGluZ3MuXHJcbiAqIEl0IGF1dG9tYXRpY2FsbHkgb3BlbnMgdGhlIG1vZGVsIHNldHRpbmdzIHZpZXcgd2hlbiBzZXR0aW5ncyBhcmUgY2hhbmdlZC5cclxuICovXHJcbmV4cG9ydCBjbGFzcyBNeVBsdWdpblNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcclxuICAgIHBsdWdpbjogTXlQbHVnaW47XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogTXlQbHVnaW4pIHtcclxuICAgICAgICBzdXBlcihhcHAsIHBsdWdpbik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBEaXNwbGF5IHRoZSBzZXR0aW5ncyB0YWJcclxuICAgICAqIFxyXG4gICAgICogU2hvd3Mgb25seSB0aGUgYXV0by1vcGVuIHNldHRpbmcgaGVyZSBzaW5jZSBhbGwgb3RoZXIgc2V0dGluZ3NcclxuICAgICAqIGFyZSBtYW5hZ2VkIGluIHRoZSBtb2RlbCBzZXR0aW5ncyB2aWV3IGZvciBiZXR0ZXIgb3JnYW5pemF0aW9uLlxyXG4gICAgICovXHJcbiAgICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQUkgQXNzaXN0YW50IFNldHRpbmdzJyB9KTtcclxuXHJcbiAgICAgICAgLy8gQVBJIEtleXMgU2VjdGlvblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FQSSBLZXlzJyB9KTtcclxuXHJcbiAgICAgICAgLy8gT3BlbkFJIEFQSSBLZXlcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ09wZW5BSSBBUEkgS2V5JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0VudGVyIHlvdXIgT3BlbkFJIEFQSSBrZXknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignRW50ZXIgeW91ciBBUEkga2V5JylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5hcGlLZXkpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MuYXBpS2V5ID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIEFudGhyb3BpYyBBUEkgS2V5XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdBbnRocm9waWMgQVBJIEtleScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdFbnRlciB5b3VyIEFudGhyb3BpYyBBUEkga2V5JylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ0VudGVyIHlvdXIgQVBJIGtleScpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MuYXBpS2V5KVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzLmFwaUtleSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBHZW1pbmkgQVBJIEtleVxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnR29vZ2xlIEFQSSBLZXknKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnRW50ZXIgeW91ciBHb29nbGUgQVBJIGtleScpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdFbnRlciB5b3VyIEFQSSBrZXknKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbWluaVNldHRpbmdzLmFwaUtleSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW1pbmlTZXR0aW5ncy5hcGlLZXkgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gT2xsYW1hIFNlcnZlciBVUkxcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ09sbGFtYSBTZXJ2ZXIgVVJMJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0VudGVyIHlvdXIgT2xsYW1hIHNlcnZlciBVUkwgKGRlZmF1bHQ6IGh0dHA6Ly9sb2NhbGhvc3Q6MTE0MzQpJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIoJ2h0dHA6Ly9sb2NhbGhvc3Q6MTE0MzQnKVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9sbGFtYVNldHRpbmdzLnNlcnZlclVybClcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vbGxhbWFTZXR0aW5ncy5zZXJ2ZXJVcmwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gTW9kZWwgU2V0dGluZ3MgU2VjdGlvblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ01vZGVsIFNldHRpbmdzJyB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdBdXRvLW9wZW4gTW9kZWwgU2V0dGluZ3MnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQXV0b21hdGljYWxseSBvcGVuIG1vZGVsIHNldHRpbmdzIHdoZW4gT2JzaWRpYW4gc3RhcnRzJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuYXV0b09wZW5Nb2RlbFNldHRpbmdzKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmF1dG9PcGVuTW9kZWxTZXR0aW5ncyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBBZGQgYSBidXR0b24gdG8gb3BlbiBtb2RlbCBzZXR0aW5nc1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnT3BlbiBNb2RlbCBTZXR0aW5ncycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdPcGVuIHRoZSBtb2RlbCBzZXR0aW5ncyB2aWV3JylcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnT3BlbicpXHJcbiAgICAgICAgICAgICAgICAub25DbGljaygoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uYWN0aXZhdGVWaWV3KCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2hhdCBTZXBhcmF0b3InKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIHN0cmluZyB1c2VkIHRvIHNlcGFyYXRlIGNoYXQgbWVzc2FnZXMuJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCctLS0tJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdFNlcGFyYXRvciA/PyAnJylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdFNlcGFyYXRvciA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ2hhdCBTdGFydCBTdHJpbmcnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIHN0cmluZyB0aGF0IGluZGljYXRlcyB3aGVyZSB0byBzdGFydCB0YWtpbmcgdGhlIG5vdGUgZm9yIGNvbnRleHQuJylcclxuICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCc9PT1TVEFSVD09PScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRTdGFydFN0cmluZyA/PyAnJylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdFN0YXJ0U3RyaW5nID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdDaGF0IEVuZCBTdHJpbmcnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnVGhlIHN0cmluZyB0aGF0IGluZGljYXRlcyB3aGVyZSB0byBlbmQgdGFraW5nIHRoZSBub3RlIGZvciBjb250ZXh0LicpXHJcbiAgICAgICAgICAgIC5hZGRUZXh0KHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignPT09RU5EPT09JylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdEVuZFN0cmluZyA/PyAnJylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdEVuZFN0cmluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCB7IEl0ZW1WaWV3LCBXb3Jrc3BhY2VMZWFmLCBOb3RpY2UsIE1vZGFsLCBBcHAsIFNldHRpbmcsIE1hcmtkb3duUmVuZGVyZXIgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCBNeVBsdWdpbiBmcm9tICcuL21haW4nO1xyXG5pbXBvcnQgeyBNZXNzYWdlIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyIH0gZnJvbSAnLi9wcm92aWRlcnMnO1xyXG5cclxuZXhwb3J0IGNvbnN0IFZJRVdfVFlQRV9DSEFUID0gJ2NoYXQtdmlldyc7XHJcblxyXG5jbGFzcyBTZXR0aW5nc01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBNeVBsdWdpbjtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoJ0FJIE1vZGVsIFNldHRpbmdzJyk7XHJcbiAgICB9XHJcblxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnYWktc2V0dGluZ3MtbW9kYWwnKTtcclxuICAgIFxyXG4gICAgICAgIC8vIFByb3ZpZGVyIHNlbGVjdGlvblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0FJIFByb3ZpZGVyJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSB3aGljaCBBSSBwcm92aWRlciB0byB1c2UnKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAuYWRkT3B0aW9uKCdvcGVuYWknLCAnT3BlbkFJIChHUFQtMy41LCBHUFQtNCknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2FudGhyb3BpYycsICdBbnRocm9waWMgKENsYXVkZSknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ2dlbWluaScsICdHb29nbGUgKEdlbWluaSknKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGRPcHRpb24oJ29sbGFtYScsICdPbGxhbWEgKExvY2FsIEFJKScpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWU6ICdvcGVuYWknIHwgJ2FudGhyb3BpYycgfCAnZ2VtaW5pJyB8ICdvbGxhbWEnKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm9uT3BlbigpOyAvLyBSZWZyZXNoIHZpZXcgdG8gc2hvdyBwcm92aWRlci1zcGVjaWZpYyBzZXR0aW5nc1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgIFxyXG4gICAgICAgIC8vIFN5c3RlbSBtZXNzYWdlXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnU3lzdGVtIE1lc3NhZ2UnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnU2V0IHRoZSBzeXN0ZW0gbWVzc2FnZSBmb3IgdGhlIEFJJylcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeXN0ZW1NZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnN5c3RlbU1lc3NhZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIFxyXG4gICAgICAgIC8vIEluY2x1ZGUgZGF0ZSB3aXRoIHN5c3RlbSBtZXNzYWdlXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnSW5jbHVkZSBEYXRlIHdpdGggU3lzdGVtIE1lc3NhZ2UnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQWRkIHRoZSBjdXJyZW50IGRhdGUgdG8gdGhlIHN5c3RlbSBtZXNzYWdlJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZURhdGVXaXRoU3lzdGVtTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlRGF0ZVdpdGhTeXN0ZW1NZXNzYWdlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICBcclxuICAgICAgICAvLyBJbmNsdWRlIHRpbWUgd2l0aCBzeXN0ZW0gbWVzc2FnZVxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0luY2x1ZGUgVGltZSB3aXRoIFN5c3RlbSBNZXNzYWdlJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0FkZCB0aGUgY3VycmVudCB0aW1lIGFsb25nIHdpdGggdGhlIGRhdGUgdG8gdGhlIHN5c3RlbSBtZXNzYWdlJylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZVRpbWVXaXRoU3lzdGVtTWVzc2FnZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlVGltZVdpdGhTeXN0ZW1NZXNzYWdlID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICBcclxuICAgICAgICAvLyBFbmFibGUgT2JzaWRpYW4gbGlua3NcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbmFibGUgT2JzaWRpYW4gTGlua3MnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnUmVhZCBPYnNpZGlhbiBsaW5rcyBpbiBtZXNzYWdlcyB1c2luZyBbW2ZpbGVuYW1lXV0gc3ludGF4JylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlT2JzaWRpYW5MaW5rcylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVPYnNpZGlhbkxpbmtzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICBcclxuICAgICAgICAvLyBFbmFibGUgY29udGV4dCBub3Rlc1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0VuYWJsZSBDb250ZXh0IE5vdGVzJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0F0dGFjaCBzcGVjaWZpZWQgbm90ZSBjb250ZW50IHRvIGNoYXQgbWVzc2FnZXMnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb250ZXh0Tm90ZXMpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ29udGV4dE5vdGVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICBcclxuICAgICAgICAvLyBDb250ZXh0IG5vdGVzXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnQ29udGV4dCBOb3RlcycpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdOb3RlcyB0byBhdHRhY2ggYXMgY29udGV4dCAoc3VwcG9ydHMgW1tmaWxlbmFtZV1dIGFuZCBbW2ZpbGVuYW1lI2hlYWRlcl1dIHN5bnRheCknKVxyXG4gICAgICAgICAgICAuYWRkVGV4dEFyZWEodGV4dCA9PiB7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LnNldFBsYWNlaG9sZGVyKCdbW05vdGUgTmFtZV1dXFxuW1tBbm90aGVyIE5vdGUjSGVhZGVyXV0nKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZXh0Tm90ZXMgfHwgJycpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb250ZXh0Tm90ZXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB0ZXh0LmlucHV0RWwucm93cyA9IDQ7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgXHJcbiAgICAgICAgLy8gRW5hYmxlIHN0cmVhbWluZ1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0VuYWJsZSBTdHJlYW1pbmcnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnRW5hYmxlIG9yIGRpc2FibGUgc3RyZWFtaW5nIGZvciBjb21wbGV0aW9ucycpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVN0cmVhbWluZylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVTdHJlYW1pbmcgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIFxyXG4gICAgICAgIC8vIFRlbXBlcmF0dXJlXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnVGVtcGVyYXR1cmUnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnU2V0IHRoZSByYW5kb21uZXNzIG9mIHRoZSBtb2RlbFxcJ3Mgb3V0cHV0ICgwLTEpJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAsIDEsIDAuMSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wZXJhdHVyZSlcclxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGVyYXR1cmUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIFxyXG4gICAgICAgIC8vIE1heCB0b2tlbnNcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdNYXggVG9rZW5zJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1NldCB0aGUgbWF4aW11bSBsZW5ndGggb2YgdGhlIG1vZGVsXFwncyBvdXRwdXQnKVxyXG4gICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRleHRcclxuICAgICAgICAgICAgICAgIC5zZXRQbGFjZWhvbGRlcignNDAwMCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoU3RyaW5nKHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFRva2VucykpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbnVtVmFsdWUgPSBOdW1iZXIodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICghaXNOYU4obnVtVmFsdWUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFRva2VucyA9IG51bVZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcbiAgICBcclxuICAgICAgICAvLyBBZGQgXCJSZWZlcmVuY2UgQ3VycmVudCBOb3RlXCIgdG9nZ2xlXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnUmVmZXJlbmNlIEN1cnJlbnQgTm90ZScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdJbmNsdWRlIHRoZSBjb250ZW50IG9mIHRoZSBjdXJyZW50IG5vdGUgaW4gdGhlIGNoYXQgY29udGV4dC4nKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWZlcmVuY2VDdXJyZW50Tm90ZSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWZlcmVuY2VDdXJyZW50Tm90ZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgXHJcbiAgICAgICAgLy8gUHJvdmlkZXItc3BlY2lmaWMgc2V0dGluZ3NcclxuICAgICAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiBgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlci50b1VwcGVyQ2FzZSgpfSBTZXR0aW5nc2AgfSk7XHJcbiAgICBcclxuICAgICAgICBzd2l0Y2ggKHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ29wZW5haSc6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3M7XHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ01vZGVsJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIHRoZSBPcGVuQUkgbW9kZWwgdG8gdXNlJylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIHNldHRpbmdzLmF2YWlsYWJsZU1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG1vZGVsLCBtb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5ncy5tb2RlbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5tb2RlbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlICdhbnRocm9waWMnOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzO1xyXG4gICAgICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXROYW1lKCdNb2RlbCcpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSB0aGUgQW50aHJvcGljIG1vZGVsIHRvIHVzZScpXHJcbiAgICAgICAgICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3Bkb3duID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIChjb25zdCBtb2RlbCBvZiBzZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihtb2RlbCwgbW9kZWwpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUoc2V0dGluZ3MubW9kZWwpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubW9kZWwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAnZ2VtaW5pJzoge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW1pbmlTZXR0aW5ncztcclxuICAgICAgICAgICAgICAgIG5ldyBTZXR0aW5nKGNvbnRlbnRFbClcclxuICAgICAgICAgICAgICAgICAgICAuc2V0TmFtZSgnTW9kZWwnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXREZXNjKCdDaG9vc2UgdGhlIEdlbWluaSBtb2RlbCB0byB1c2UnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5hZGREcm9wZG93bihkcm9wZG93biA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbW9kZWwgb2Ygc2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24obW9kZWwsIG1vZGVsKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLnNldFZhbHVlKHNldHRpbmdzLm1vZGVsKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm1vZGVsID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgJ29sbGFtYSc6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3M7XHJcbiAgICAgICAgICAgICAgICBuZXcgU2V0dGluZyhjb250ZW50RWwpXHJcbiAgICAgICAgICAgICAgICAgICAgLnNldE5hbWUoJ01vZGVsJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0RGVzYygnQ2hvb3NlIHRoZSBPbGxhbWEgbW9kZWwgdG8gdXNlJylcclxuICAgICAgICAgICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IG1vZGVsIG9mIHNldHRpbmdzLmF2YWlsYWJsZU1vZGVscykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd24uYWRkT3B0aW9uKG1vZGVsLCBtb2RlbCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgZHJvcGRvd25cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShzZXR0aW5ncy5tb2RlbClcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5tb2RlbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBvbkNsb3NlKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59XHJcblxyXG5jbGFzcyBDb25maXJtYXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHByaXZhdGUgb25Db25maXJtOiAoY29uZmlybWVkOiBib29sZWFuKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSBtZXNzYWdlOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBwOiBBcHAsIHRpdGxlOiBzdHJpbmcsIG1lc3NhZ2U6IHN0cmluZywgb25Db25maXJtOiAoY29uZmlybWVkOiBib29sZWFuKSA9PiB2b2lkKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCh0aXRsZSk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlID0gbWVzc2FnZTtcclxuICAgICAgICB0aGlzLm9uQ29uZmlybSA9IG9uQ29uZmlybTtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcblxyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGhpcy5tZXNzYWdlIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBidXR0b25Db250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdtb2RhbC1idXR0b24tY29udGFpbmVyJyk7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmp1c3RpZnlDb250ZW50ID0gJ2ZsZXgtZW5kJztcclxuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUuZ2FwID0gJzhweCc7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLm1hcmdpblRvcCA9ICcxNnB4JztcclxuXHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdDYW5jZWwnIH0pXHJcbiAgICAgICAgICAgIC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgICAgIHRoaXMub25Db25maXJtKGZhbHNlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGNvbnN0IGNvbmZpcm1CdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuICAgICAgICAgICAgdGV4dDogJ0RlbGV0ZScsXHJcbiAgICAgICAgICAgIGNsczogJ21vZC13YXJuaW5nJ1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIGNvbmZpcm1CdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMub25Db25maXJtKHRydWUpO1xyXG4gICAgICAgICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICBjb25zdCB7IGNvbnRlbnRFbCB9ID0gdGhpcztcclxuICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIENoYXRWaWV3IGV4dGVuZHMgSXRlbVZpZXcge1xyXG4gICAgcGx1Z2luOiBNeVBsdWdpbjtcclxuICAgIG1lc3NhZ2VzQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIGlucHV0Q29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIGFjdGl2ZVN0cmVhbTogQWJvcnRDb250cm9sbGVyIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBNeVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGxlYWYpO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFZpZXdUeXBlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIFZJRVdfVFlQRV9DSEFUO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICdBSSBDaGF0JztcclxuICAgIH1cclxuXHJcbiAgICBnZXRJY29uKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICdtZXNzYWdlLXNxdWFyZSc7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBzZXR0aW5nc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHJcbiAgICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBtYWluIGNvbnRhaW5lciB3aXRoIGZsZXggbGF5b3V0XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdhaS1jaGF0LXZpZXcnKTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIHNldHRpbmdzIGJ1dHRvbiBpbiB0aGUgYnV0dG9uIGNvbnRhaW5lciAod2lsbCBiZSBhZGRlZCBsYXRlcilcclxuICAgICAgICBjb25zdCBzZXR0aW5nc0J1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIHNldHRpbmdzQnV0dG9uLnNldFRleHQoJ1NldHRpbmdzJyk7XHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1RvZ2dsZSBtb2RlbCBzZXR0aW5ncycpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFdlJ2xsIGFkZCB0aGlzIGJ1dHRvbiB0byB0aGUgYnV0dG9uIGNvbnRhaW5lciBsYXRlclxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIE1lc3NhZ2VzIGNvbnRhaW5lclxyXG4gICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdhaS1jaGF0LW1lc3NhZ2VzJyk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zdHlsZS5mbGV4ID0gJzEnO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuc3R5bGUub3ZlcmZsb3cgPSAnYXV0byc7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzE2cHgnO1xyXG5cclxuICAgICAgICAvLyBJbnB1dCBjb250YWluZXIgYXQgYm90dG9tXHJcbiAgICAgICAgdGhpcy5pbnB1dENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ2FpLWNoYXQtaW5wdXQtY29udGFpbmVyJyk7XHJcbiAgICAgICAgdGhpcy5pbnB1dENvbnRhaW5lci5zdHlsZS5ib3JkZXJUb3AgPSAnMXB4IHNvbGlkIHZhcigtLWJhY2tncm91bmQtbW9kaWZpZXItYm9yZGVyKSc7XHJcbiAgICAgICAgdGhpcy5pbnB1dENvbnRhaW5lci5zdHlsZS5wYWRkaW5nID0gJzE2cHgnO1xyXG5cclxuICAgICAgICAvLyBUZXh0YXJlYSBmb3IgaW5wdXRcclxuICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IHRoaXMuaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xyXG4gICAgICAgICAgICBjbHM6ICdhaS1jaGF0LWlucHV0JyxcclxuICAgICAgICAgICAgYXR0cjoge1xyXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdUeXBlIHlvdXIgbWVzc2FnZS4uLicsXHJcbiAgICAgICAgICAgICAgICByb3dzOiAnMydcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTdHlsZSB0aGUgdGV4dGFyZWFcclxuICAgICAgICB0ZXh0YXJlYS5zdHlsZS53aWR0aCA9ICcxMDAlJztcclxuICAgICAgICB0ZXh0YXJlYS5zdHlsZS5yZXNpemUgPSAnbm9uZSc7XHJcbiAgICAgICAgdGV4dGFyZWEuc3R5bGUuYm9yZGVyID0gJzFweCBzb2xpZCB2YXIoLS1iYWNrZ3JvdW5kLW1vZGlmaWVyLWJvcmRlciknO1xyXG4gICAgICAgIHRleHRhcmVhLnN0eWxlLmJvcmRlclJhZGl1cyA9ICc0cHgnO1xyXG4gICAgICAgIHRleHRhcmVhLnN0eWxlLnBhZGRpbmcgPSAnOHB4JztcclxuICAgICAgICB0ZXh0YXJlYS5zdHlsZS5iYWNrZ3JvdW5kQ29sb3IgPSAndmFyKC0tYmFja2dyb3VuZC1wcmltYXJ5KSc7XHJcbiAgICAgICAgdGV4dGFyZWEuc3R5bGUuY29sb3IgPSAndmFyKC0tdGV4dC1ub3JtYWwpJztcclxuXHJcbiAgICAgICAgLy8gQnV0dG9uIGNvbnRhaW5lclxyXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IHRoaXMuaW5wdXRDb250YWluZXIuY3JlYXRlRGl2KCdhaS1jaGF0LWJ1dHRvbnMnKTtcclxuICAgICAgICBidXR0b25Db250YWluZXIuc3R5bGUubWFyZ2luVG9wID0gJzhweCc7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgYnV0dG9uQ29udGFpbmVyLnN0eWxlLmdhcCA9ICc4cHgnO1xyXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5zdHlsZS5qdXN0aWZ5Q29udGVudCA9ICdmbGV4LWVuZCc7XHJcblxyXG4gICAgICAgIC8vIFNlbmQgYnV0dG9uXHJcbiAgICAgICAgY29uc3Qgc2VuZEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICB0ZXh0OiAnU2VuZCcsXHJcbiAgICAgICAgICAgIGNsczogJ21vZC1jdGEnXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIFN0b3AgYnV0dG9uIChoaWRkZW4gaW5pdGlhbGx5KVxyXG4gICAgICAgIGNvbnN0IHN0b3BCdXR0b24gPSBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuICAgICAgICAgICAgdGV4dDogJ1N0b3AnLFxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHN0b3BCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuXHJcbiAgICAgICAgLy8gQ29weSBBbGwgYnV0dG9uXHJcbiAgICAgICAgY29uc3QgY29weUFsbEJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICB0ZXh0OiAnQ29weSBBbGwnXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgY29weUFsbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgbWVzc2FnZXMgPSB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnF1ZXJ5U2VsZWN0b3JBbGwoJy5haS1jaGF0LW1lc3NhZ2UnKTtcclxuICAgICAgICAgICAgbGV0IGNoYXRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VzLmZvckVhY2goKGVsLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY29udGVudCA9IGVsLnF1ZXJ5U2VsZWN0b3IoJy5tZXNzYWdlLWNvbnRlbnQnKT8udGV4dENvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICBjaGF0Q29udGVudCArPSBjb250ZW50O1xyXG4gICAgICAgICAgICAgICAgaWYgKGluZGV4IDwgbWVzc2FnZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoYXRDb250ZW50ICs9ICdcXG5cXG4nICsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdFNlcGFyYXRvciArICdcXG5cXG4nO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jb3B5VG9DbGlwYm9hcmQoY2hhdENvbnRlbnQpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBDbGVhciBidXR0b25cclxuICAgICAgICBjb25zdCBjbGVhckJ1dHRvbiA9IGJ1dHRvbkNvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgICAgICB0ZXh0OiAnQ2xlYXIgQ2hhdCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gSGFuZGxlIHNlbmQgbWVzc2FnZVxyXG4gICAgICAgIGNvbnN0IHNlbmRNZXNzYWdlID0gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gdGV4dGFyZWEudmFsdWUudHJpbSgpO1xyXG4gICAgICAgICAgICBpZiAoIWNvbnRlbnQpIHJldHVybjtcclxuXHJcbiAgICAgICAgICAgIC8vIERpc2FibGUgaW5wdXQgYW5kIHNob3cgc3RvcCBidXR0b25cclxuICAgICAgICAgICAgdGV4dGFyZWEuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICBzZW5kQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgIHN0b3BCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcblxyXG4gICAgICAgICAgICAvLyBBZGQgdXNlciBtZXNzYWdlXHJcbiAgICAgICAgICAgIHRoaXMuYWRkTWVzc2FnZSgndXNlcicsIGNvbnRlbnQpO1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9ICcnO1xyXG5cclxuICAgICAgICAgICAgLy8gQ3JlYXRlIGFib3J0IGNvbnRyb2xsZXIgZm9yIHN0cmVhbWluZ1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbSA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuXHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IGNyZWF0ZVByb3ZpZGVyKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzOiBNZXNzYWdlW10gPSBbXHJcbiAgICAgICAgICAgICAgICAgICAgeyByb2xlOiAnc3lzdGVtJywgY29udGVudDogdGhpcy5wbHVnaW4uZ2V0U3lzdGVtTWVzc2FnZSgpIH1cclxuICAgICAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gSW5jbHVkZSB0aGUgY3VycmVudCBub3RlJ3MgY29udGVudCBpZiB0aGUgdG9nZ2xlIGlzIGVuYWJsZWRcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWZlcmVuY2VDdXJyZW50Tm90ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoY3VycmVudEZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY3VycmVudE5vdGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChjdXJyZW50RmlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBgSGVyZSBpcyB0aGUgY29udGVudCBvZiB0aGUgY3VycmVudCBub3RlOlxcblxcbiR7Y3VycmVudE5vdGVDb250ZW50fWBcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIEdldCBhbGwgZXhpc3RpbmcgbWVzc2FnZXNcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VFbGVtZW50cyA9IHRoaXMubWVzc2FnZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmFpLWNoYXQtbWVzc2FnZScpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUVsZW1lbnRzLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvbGUgPSBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3VzZXInKSA/ICd1c2VyJyA6ICdhc3Npc3RhbnQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBlbC5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZS1jb250ZW50Jyk/LnRleHRDb250ZW50IHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goeyByb2xlLCBjb250ZW50IH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFzc2lzdGFudCBtZXNzYWdlIGNvbnRhaW5lciBmb3Igc3RyZWFtaW5nXHJcbiAgICAgICAgICAgICAgICBjb25zdCBhc3Npc3RhbnRDb250YWluZXIgPSB0aGlzLmNyZWF0ZU1lc3NhZ2VFbGVtZW50KCdhc3Npc3RhbnQnLCAnJyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLmFwcGVuZENoaWxkKGFzc2lzdGFudENvbnRhaW5lcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCByZXNwb25zZUNvbnRlbnQgPSAnJztcclxuICAgICAgICAgICAgICAgIGF3YWl0IHByb3ZpZGVyLmdldENvbXBsZXRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXMsXHJcbiAgICAgICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGVyYXR1cmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heFRva2VuczogdGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4VG9rZW5zLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdHJlYW1DYWxsYmFjazogYXN5bmMgKGNodW5rOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQ29udGVudCArPSBjaHVuaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IGFzc2lzdGFudENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZS1jb250ZW50JykgYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudEVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBkYXRhIGF0dHJpYnV0ZSB3aXRoIHRoZSBjdXJyZW50IGNvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3Npc3RhbnRDb250YWluZXIuZGF0YXNldC5yYXdDb250ZW50ID0gcmVzcG9uc2VDb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbmRlciBNYXJrZG93biBjb250ZW50IGR5bmFtaWNhbGx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXIoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRFbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsVG9wID0gdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0Q29udHJvbGxlcjogdGhpcy5hY3RpdmVTdHJlYW1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgIT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCBgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgIC8vIFJlLWVuYWJsZSBpbnB1dCBhbmQgaGlkZSBzdG9wIGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgdGV4dGFyZWEuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRleHRhcmVhLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICBzdG9wQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgICAgICAgICBzZW5kQnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVTdHJlYW0gPSBudWxsO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgLy8gRXZlbnQgbGlzdGVuZXJzXHJcbiAgICAgICAgdGV4dGFyZWEuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIChlKSA9PiB7XHJcbiAgICAgICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgc2VuZE1lc3NhZ2UoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBzZW5kQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgc2VuZE1lc3NhZ2UpO1xyXG5cclxuICAgICAgICBzdG9wQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpZiAodGhpcy5hY3RpdmVTdHJlYW0pIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtLmFib3J0KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGV4dGFyZWEuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIHN0b3BCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgICAgIHNlbmRCdXR0b24uc3R5bGUuZGlzcGxheSA9ICdibG9jayc7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY2xlYXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuZW1wdHkoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQWRkIHNldHRpbmdzIGJ1dHRvbiB0byB0aGUgYnV0dG9uIGNvbnRhaW5lclxyXG4gICAgICAgIGJ1dHRvbkNvbnRhaW5lci5pbnNlcnRCZWZvcmUoc2V0dGluZ3NCdXR0b24sIGNsZWFyQnV0dG9uKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBTZXR0aW5ncyBidXR0b24gY2xpY2sgaGFuZGxlclxyXG4gICAgICAgIHNldHRpbmdzQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzZXR0aW5nc01vZGFsID0gbmV3IFNldHRpbmdzTW9kYWwodGhpcy5hcHAsIHRoaXMucGx1Z2luKTtcclxuICAgICAgICAgICAgc2V0dGluZ3NNb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBpbml0aWFsIHN5c3RlbSBtZXNzYWdlXHJcbiAgICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCAnSGVsbG8hIEhvdyBjYW4gSSBoZWxwIHlvdSB0b2RheT8nKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZUFjdGlvbkJ1dHRvbihpY29uOiBzdHJpbmcsIGxhYmVsOiBzdHJpbmcsIHRvb2x0aXA6IHN0cmluZywgY2FsbGJhY2s6ICgpID0+IHZvaWQpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgYnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICAgICAgYnV0dG9uLmFkZENsYXNzKCdhaS1jaGF0LWFjdGlvbi1idXR0b24nKTtcclxuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgdG9vbHRpcCk7XHJcbiAgICAgICAgYnV0dG9uLnN0eWxlLmRpc3BsYXkgPSAnZmxleCc7XHJcbiAgICAgICAgYnV0dG9uLnN0eWxlLmFsaWduSXRlbXMgPSAnY2VudGVyJztcclxuICAgICAgICBidXR0b24uc3R5bGUuZ2FwID0gJzRweCc7IC8vIEFkZCBzcGFjaW5nIGJldHdlZW4gaWNvbiBhbmQgbGFiZWxcclxuXHJcbiAgICAgICAgLy8gQWRkIGljb25cclxuICAgICAgICBjb25zdCBpY29uRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzdmcnKTtcclxuICAgICAgICBpY29uRWwuY2xhc3NMaXN0LmFkZCgnbHVjaWRlLWljb24nKTtcclxuICAgICAgICBpY29uRWwuaW5uZXJIVE1MID0gYDx1c2UgaHJlZj1cIiNsdWNpZGUtJHtpY29ufVwiPjwvdXNlPmA7XHJcbiAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKGljb25FbCk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBsYWJlbFxyXG4gICAgICAgIGNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICAgICAgbGFiZWxFbC50ZXh0Q29udGVudCA9IGxhYmVsO1xyXG4gICAgICAgIGJ1dHRvbi5hcHBlbmRDaGlsZChsYWJlbEVsKTtcclxuXHJcbiAgICAgICAgYnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgY2FsbGJhY2spO1xyXG4gICAgICAgIHJldHVybiBidXR0b247XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBjb3B5VG9DbGlwYm9hcmQodGV4dDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQodGV4dCk7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0NvcGllZCB0byBjbGlwYm9hcmQnKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gY29weSB0byBjbGlwYm9hcmQnKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2xpcGJvYXJkIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBjcmVhdGVNZXNzYWdlRWxlbWVudChyb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JywgY29udGVudDogc3RyaW5nKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VFbCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIG1lc3NhZ2VFbC5hZGRDbGFzcygnYWktY2hhdC1tZXNzYWdlJywgcm9sZSk7XHJcbiAgICAgICAgbWVzc2FnZUVsLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcxNnB4JztcclxuICAgICAgICBtZXNzYWdlRWwuc3R5bGUucGFkZGluZyA9ICcxMnB4JztcclxuICAgICAgICBtZXNzYWdlRWwuc3R5bGUuYm9yZGVyUmFkaXVzID0gJzhweCc7XHJcbiAgICAgICAgbWVzc2FnZUVsLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IHJvbGUgPT09ICd1c2VyJyBcclxuICAgICAgICAgICAgPyAndmFyKC0tYmFja2dyb3VuZC1tb2RpZmllci1ob3ZlciknXHJcbiAgICAgICAgICAgIDogJ3ZhcigtLWJhY2tncm91bmQtc2Vjb25kYXJ5KSc7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBtZXNzYWdlIGNvbnRhaW5lciB3aXRoIGNvbnRlbnQgYW5kIGFjdGlvbnNcclxuICAgICAgICBjb25zdCBtZXNzYWdlQ29udGFpbmVyID0gbWVzc2FnZUVsLmNyZWF0ZURpdignbWVzc2FnZS1jb250YWluZXInKTtcclxuXHJcbiAgICAgICAgLy8gQ3JlYXRlIGNvbnRlbnQgZWxlbWVudFxyXG4gICAgICAgIGNvbnN0IGNvbnRlbnRFbCA9IG1lc3NhZ2VDb250YWluZXIuY3JlYXRlRGl2KCdtZXNzYWdlLWNvbnRlbnQnKTtcclxuICAgICAgICBjb250ZW50RWwuc3R5bGUud2hpdGVTcGFjZSA9ICdwcmUtd3JhcCc7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU3RvcmUgdGhlIHJhdyBNYXJrZG93biBjb250ZW50IGFzIGEgZGF0YSBhdHRyaWJ1dGVcclxuICAgICAgICBtZXNzYWdlRWwuZGF0YXNldC5yYXdDb250ZW50ID0gY29udGVudDtcclxuXHJcbiAgICAgICAgLy8gUmVuZGVyIE1hcmtkb3duIGNvbnRlbnRcclxuICAgICAgICBNYXJrZG93blJlbmRlcmVyLnJlbmRlcihcclxuICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgIGNvbnRlbnQsXHJcbiAgICAgICAgICAgIGNvbnRlbnRFbCxcclxuICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgIHRoaXNcclxuICAgICAgICApLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNYXJrZG93biByZW5kZXJpbmcgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICBjb250ZW50RWwudGV4dENvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBDcmVhdGUgYWN0aW9ucyBjb250YWluZXJcclxuICAgICAgICBjb25zdCBhY3Rpb25zRWwgPSBtZXNzYWdlQ29udGFpbmVyLmNyZWF0ZURpdignbWVzc2FnZS1hY3Rpb25zJyk7XHJcbiAgICAgICAgYWN0aW9uc0VsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcblxyXG4gICAgICAgIC8vIEFkZCBob3ZlciBiZWhhdmlvciB0byB0aGUgbWVzc2FnZSBlbGVtZW50XHJcbiAgICAgICAgbWVzc2FnZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZW50ZXInLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGFjdGlvbnNFbC5zdHlsZS5kaXNwbGF5ID0gJ2ZsZXgnO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG1lc3NhZ2VFbC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWxlYXZlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBhY3Rpb25zRWwuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgYWN0aW9uc0VsLnN0eWxlLmZsZXhXcmFwID0gJ3dyYXAnO1xyXG4gICAgICAgIGFjdGlvbnNFbC5zdHlsZS5nYXAgPSAnOHB4JztcclxuICAgICAgICBhY3Rpb25zRWwuc3R5bGUubWFyZ2luVG9wID0gJzhweCc7XHJcblxyXG4gICAgICAgIC8vIEFkZCBjb3B5IGJ1dHRvblxyXG4gICAgICAgIGFjdGlvbnNFbC5hcHBlbmRDaGlsZCh0aGlzLmNyZWF0ZUFjdGlvbkJ1dHRvbignY29weScsICdDb3B5JywgJ0NvcHkgbWVzc2FnZScsICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudENvbnRlbnQgPSBtZXNzYWdlRWwuZGF0YXNldC5yYXdDb250ZW50IHx8ICcnO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudENvbnRlbnQudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gY29udGVudCB0byBjb3B5Jyk7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5jb3B5VG9DbGlwYm9hcmQoY3VycmVudENvbnRlbnQpO1xyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGVkaXQgYnV0dG9uXHJcbiAgICAgICAgYWN0aW9uc0VsLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQWN0aW9uQnV0dG9uKCdlZGl0JywgJ0VkaXQnLCAnRWRpdCBtZXNzYWdlJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCB3YXNFZGl0aW5nID0gY29udGVudEVsLmhhc0NsYXNzKCdlZGl0aW5nJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAoIXdhc0VkaXRpbmcpIHtcclxuICAgICAgICAgICAgICAgIC8vIFN3aXRjaCB0byBlZGl0IG1vZGVcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcclxuICAgICAgICAgICAgICAgIHRleHRhcmVhLnZhbHVlID0gbWVzc2FnZUVsLmRhdGFzZXQucmF3Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgICAgIHRleHRhcmVhLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgICAgICAgICAgdGV4dGFyZWEuc3R5bGUuaGVpZ2h0ID0gYCR7Y29udGVudEVsLm9mZnNldEhlaWdodH1weGA7XHJcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5zdHlsZS5taW5IZWlnaHQgPSAnMTAwcHgnO1xyXG4gICAgICAgICAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICBjb250ZW50RWwuYXBwZW5kQ2hpbGQodGV4dGFyZWEpO1xyXG4gICAgICAgICAgICAgICAgdGV4dGFyZWEuZm9jdXMoKTtcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRFbC5hZGRDbGFzcygnZWRpdGluZycpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gU2F2ZSBlZGl0c1xyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBjb250ZW50RWwucXVlcnlTZWxlY3RvcigndGV4dGFyZWEnKTtcclxuICAgICAgICAgICAgICAgIGlmICh0ZXh0YXJlYSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgZGF0YSBhdHRyaWJ1dGUgd2l0aCB0aGUgbmV3IGNvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlRWwuZGF0YXNldC5yYXdDb250ZW50ID0gdGV4dGFyZWEudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgTWFya2Rvd25SZW5kZXJlci5yZW5kZXIodGhpcy5hcHAsIHRleHRhcmVhLnZhbHVlLCBjb250ZW50RWwsICcnLCB0aGlzKS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignTWFya2Rvd24gcmVuZGVyaW5nIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLnRleHRDb250ZW50ID0gdGV4dGFyZWEudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLnJlbW92ZUNsYXNzKCdlZGl0aW5nJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIC8vIEFkZCBkZWxldGUgYnV0dG9uXHJcbiAgICAgICAgYWN0aW9uc0VsLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQWN0aW9uQnV0dG9uKCd0cmFzaCcsICdEZWxldGUnLCAnRGVsZXRlIG1lc3NhZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGFsID0gbmV3IENvbmZpcm1hdGlvbk1vZGFsKFxyXG4gICAgICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICAgICAnRGVsZXRlIG1lc3NhZ2UnLFxyXG4gICAgICAgICAgICAgICAgJ0FyZSB5b3Ugc3VyZSB5b3Ugd2FudCB0byBkZWxldGUgdGhpcyBtZXNzYWdlPycsXHJcbiAgICAgICAgICAgICAgICBhc3luYyAoY29uZmlybWVkKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGNvbmZpcm1lZCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlRWwucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBtb2RhbC5vcGVuKCk7XHJcbiAgICAgICAgfSkpO1xyXG5cclxuICAgICAgICAvLyBBZGQgcmVmcmVzaCBidXR0b24gZm9yIGFzc2lzdGFudCBtZXNzYWdlc1xyXG4gICAgICAgIGlmIChyb2xlID09PSAnYXNzaXN0YW50Jykge1xyXG4gICAgICAgICAgICBhY3Rpb25zRWwuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVBY3Rpb25CdXR0b24oJ3JlZnJlc2gtY3cnLCAnUmVnZW5lcmF0ZScsICdSZWdlbmVyYXRlIHJlc3BvbnNlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gRmluZCB0aGlzIG1lc3NhZ2UgZWxlbWVudFxyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudE1lc3NhZ2UgPSBtZXNzYWdlRWw7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIERpc2FibGUgaW5wdXQgZHVyaW5nIHJlZ2VuZXJhdGlvblxyXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSB0aGlzLmlucHV0Q29udGFpbmVyLnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XHJcbiAgICAgICAgICAgICAgICBpZiAodGV4dGFyZWEpIHRleHRhcmVhLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gRmluZCBhbGwgcHJldmlvdXMgbWVzc2FnZXMgdG8gbWFpbnRhaW4gY29udGV4dFxyXG4gICAgICAgICAgICAgICAgY29uc3QgYWxsTWVzc2FnZXMgPSBBcnJheS5mcm9tKHRoaXMubWVzc2FnZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmFpLWNoYXQtbWVzc2FnZScpKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IGFsbE1lc3NhZ2VzLmluZGV4T2YoY3VycmVudE1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBHZXQgc3lzdGVtIG1lc3NhZ2UgYW5kIGFsbCBwcmV2aW91cyBtZXNzYWdlcyB1cCB0byBjdXJyZW50XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlczogTWVzc2FnZVtdID0gW1xyXG4gICAgICAgICAgICAgICAgICAgIHsgcm9sZTogJ3N5c3RlbScsIGNvbnRlbnQ6IHRoaXMucGx1Z2luLmdldFN5c3RlbU1lc3NhZ2UoKSB9XHJcbiAgICAgICAgICAgICAgICBdO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGN1cnJlbnRJbmRleDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZWwgPSBhbGxNZXNzYWdlc1tpXTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCByb2xlID0gZWwuY2xhc3NMaXN0LmNvbnRhaW5zKCd1c2VyJykgPyAndXNlcicgOiAnYXNzaXN0YW50JztcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50ID0gKGVsIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LnJhd0NvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGUsIGNvbnRlbnQgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgY3VycmVudCByZXNwb25zZVxyXG4gICAgICAgICAgICAgICAgY3VycmVudE1lc3NhZ2UucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBuZXcgYXNzaXN0YW50IG1lc3NhZ2UgZm9yIHN0cmVhbWluZ1xyXG4gICAgICAgICAgICAgICAgY29uc3QgYXNzaXN0YW50Q29udGFpbmVyID0gdGhpcy5jcmVhdGVNZXNzYWdlRWxlbWVudCgnYXNzaXN0YW50JywgJycpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5hcHBlbmRDaGlsZChhc3Npc3RhbnRDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxUb3AgPSB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbEhlaWdodDtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIGFib3J0IGNvbnRyb2xsZXIgZm9yIHN0cmVhbWluZ1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVTdHJlYW0gPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBjcmVhdGVQcm92aWRlcih0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlc3BvbnNlQ29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHByb3ZpZGVyLmdldENvbXBsZXRpb24oXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGVyYXR1cmUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhUb2tlbnM6IHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFRva2VucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbUNhbGxiYWNrOiBhc3luYyAoY2h1bms6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3BvbnNlQ29udGVudCArPSBjaHVuaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50RWwgPSBhc3Npc3RhbnRDb250YWluZXIucXVlcnlTZWxlY3RvcignLm1lc3NhZ2UtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50RWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBkYXRhIGF0dHJpYnV0ZSB3aXRoIHRoZSBjdXJyZW50IGNvbnRlbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYXNzaXN0YW50Q29udGFpbmVyLmRhdGFzZXQucmF3Q29udGVudCA9IHJlc3BvbnNlQ29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlbmRlciBNYXJrZG93biBjb250ZW50IGR5bmFtaWNhbGx5XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VDb250ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsVG9wID0gdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxIZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGFib3J0Q29udHJvbGxlcjogdGhpcy5hY3RpdmVTdHJlYW1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChlcnJvci5uYW1lICE9PSAnQWJvcnRFcnJvcicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hZGRNZXNzYWdlKCdhc3Npc3RhbnQnLCBgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFJlLWVuYWJsZSBpbnB1dFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0ZXh0YXJlYSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0YXJlYS5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEFwcGVuZCBhY3Rpb25zIGNvbnRhaW5lciB0byBtZXNzYWdlIGNvbnRhaW5lclxyXG4gICAgICAgIG1lc3NhZ2VDb250YWluZXIuYXBwZW5kQ2hpbGQoYWN0aW9uc0VsKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1lc3NhZ2VFbDtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFkZE1lc3NhZ2Uocm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VFbCA9IHRoaXMuY3JlYXRlTWVzc2FnZUVsZW1lbnQocm9sZSwgY29udGVudCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5hcHBlbmRDaGlsZChtZXNzYWdlRWwpO1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsVG9wID0gdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxIZWlnaHQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgb25DbG9zZSgpIHtcclxuICAgICAgICBpZiAodGhpcy5hY3RpdmVTdHJlYW0pIHtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVTdHJlYW0uYWJvcnQoKTtcclxuICAgICAgICAgICAgdGhpcy5hY3RpdmVTdHJlYW0gPSBudWxsO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGNyZWF0ZVNldHRpbmdzUGFuZWwoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xyXG4gICAgICAgIGNvbnRhaW5lci5hZGRDbGFzcygnYWktY2hhdC1zZXR0aW5ncy1wYW5lbCcpO1xyXG5cclxuICAgICAgICAvLyBBZGQgc2V0dGluZ3MgdGl0bGVcclxuICAgICAgICBjb250YWluZXIuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQUkgTW9kZWwgU2V0dGluZ3MnIH0pO1xyXG5cclxuICAgICAgICAvLyBQcm92aWRlciBzZWxlY3Rpb25cclxuICAgICAgICBjb25zdCBwcm92aWRlckNvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoKTtcclxuICAgICAgICBwcm92aWRlckNvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IHRleHQ6ICdBSSBQcm92aWRlcicgfSk7XHJcbiAgICAgICAgY29uc3QgcHJvdmlkZXJTZWxlY3QgPSBwcm92aWRlckNvbnRhaW5lci5jcmVhdGVFbCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgcHJvdmlkZXJTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdmFsdWU6ICdvcGVuYWknLCB0ZXh0OiAnT3BlbkFJIChHUFQtMy41LCBHUFQtNCknIH0pO1xyXG4gICAgICAgIHByb3ZpZGVyU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHZhbHVlOiAnYW50aHJvcGljJywgdGV4dDogJ0FudGhyb3BpYyAoQ2xhdWRlKScgfSk7XHJcbiAgICAgICAgcHJvdmlkZXJTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdmFsdWU6ICdnZW1pbmknLCB0ZXh0OiAnR29vZ2xlIChHZW1pbmkpJyB9KTtcclxuICAgICAgICBwcm92aWRlclNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB2YWx1ZTogJ29sbGFtYScsIHRleHQ6ICdPbGxhbWEgKExvY2FsIEFJKScgfSk7XHJcbiAgICAgICAgcHJvdmlkZXJTZWxlY3QudmFsdWUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlcjtcclxuICAgICAgICBwcm92aWRlclNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyID0gcHJvdmlkZXJTZWxlY3QudmFsdWUgYXMgYW55O1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgLy8gUmVmcmVzaCBzZXR0aW5ncyBwYW5lbCB0byBzaG93IHByb3ZpZGVyLXNwZWNpZmljIHNldHRpbmdzXHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzQ29udGFpbmVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzQ29udGFpbmVyLnJlcGxhY2VXaXRoKHRoaXMuY3JlYXRlU2V0dGluZ3NQYW5lbCgpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTeXN0ZW0gbWVzc2FnZVxyXG4gICAgICAgIGNvbnN0IHN5c3RlbU1lc3NhZ2VDb250YWluZXIgPSBjb250YWluZXIuY3JlYXRlRGl2KCk7XHJcbiAgICAgICAgc3lzdGVtTWVzc2FnZUNvbnRhaW5lci5jcmVhdGVFbCgnbGFiZWwnLCB7IHRleHQ6ICdTeXN0ZW0gTWVzc2FnZScgfSk7XHJcbiAgICAgICAgY29uc3Qgc3lzdGVtTWVzc2FnZUlucHV0ID0gc3lzdGVtTWVzc2FnZUNvbnRhaW5lci5jcmVhdGVFbCgndGV4dGFyZWEnKTtcclxuICAgICAgICBzeXN0ZW1NZXNzYWdlSW5wdXQudmFsdWUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeXN0ZW1NZXNzYWdlO1xyXG4gICAgICAgIHN5c3RlbU1lc3NhZ2VJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnN5c3RlbU1lc3NhZ2UgPSBzeXN0ZW1NZXNzYWdlSW5wdXQudmFsdWU7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBUZW1wZXJhdHVyZVxyXG4gICAgICAgIGNvbnN0IHRlbXBlcmF0dXJlQ29udGFpbmVyID0gY29udGFpbmVyLmNyZWF0ZURpdigpO1xyXG4gICAgICAgIHRlbXBlcmF0dXJlQ29udGFpbmVyLmNyZWF0ZUVsKCdsYWJlbCcsIHsgdGV4dDogJ1RlbXBlcmF0dXJlJyB9KTtcclxuICAgICAgICBjb25zdCB0ZW1wZXJhdHVyZUlucHV0ID0gdGVtcGVyYXR1cmVDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAncmFuZ2UnIH0pO1xyXG4gICAgICAgIHRlbXBlcmF0dXJlSW5wdXQubWluID0gJzAnO1xyXG4gICAgICAgIHRlbXBlcmF0dXJlSW5wdXQubWF4ID0gJzEnO1xyXG4gICAgICAgIHRlbXBlcmF0dXJlSW5wdXQuc3RlcCA9ICcwLjEnO1xyXG4gICAgICAgIHRlbXBlcmF0dXJlSW5wdXQudmFsdWUgPSBTdHJpbmcodGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGVyYXR1cmUpO1xyXG4gICAgICAgIGNvbnN0IHRlbXBlcmF0dXJlVmFsdWUgPSB0ZW1wZXJhdHVyZUNvbnRhaW5lci5jcmVhdGVTcGFuKCk7XHJcbiAgICAgICAgdGVtcGVyYXR1cmVWYWx1ZS50ZXh0Q29udGVudCA9IFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wZXJhdHVyZSk7XHJcbiAgICAgICAgdGVtcGVyYXR1cmVJbnB1dC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBOdW1iZXIodGVtcGVyYXR1cmVJbnB1dC52YWx1ZSk7XHJcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlVmFsdWUudGV4dENvbnRlbnQgPSBTdHJpbmcodmFsdWUpO1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wZXJhdHVyZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gTWF4IHRva2Vuc1xyXG4gICAgICAgIGNvbnN0IG1heFRva2Vuc0NvbnRhaW5lciA9IGNvbnRhaW5lci5jcmVhdGVEaXYoKTtcclxuICAgICAgICBtYXhUb2tlbnNDb250YWluZXIuY3JlYXRlRWwoJ2xhYmVsJywgeyB0ZXh0OiAnTWF4IFRva2VucycgfSk7XHJcbiAgICAgICAgY29uc3QgbWF4VG9rZW5zSW5wdXQgPSBtYXhUb2tlbnNDb250YWluZXIuY3JlYXRlRWwoJ2lucHV0JywgeyB0eXBlOiAnbnVtYmVyJyB9KTtcclxuICAgICAgICBtYXhUb2tlbnNJbnB1dC52YWx1ZSA9IFN0cmluZyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhUb2tlbnMpO1xyXG4gICAgICAgIG1heFRva2Vuc0lucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBOdW1iZXIobWF4VG9rZW5zSW5wdXQudmFsdWUpO1xyXG4gICAgICAgICAgICBpZiAoIWlzTmFOKHZhbHVlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubWF4VG9rZW5zID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBQcm92aWRlci1zcGVjaWZpYyBzZXR0aW5nc1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyU2V0dGluZ3MgPSBjb250YWluZXIuY3JlYXRlRGl2KCk7XHJcbiAgICAgICAgcHJvdmlkZXJTZXR0aW5ncy5jcmVhdGVFbCgnaDQnLCB7IHRleHQ6IGAke3RoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyLnRvVXBwZXJDYXNlKCl9IFNldHRpbmdzYCB9KTtcclxuXHJcbiAgICAgICAgc3dpdGNoICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5wcm92aWRlcikge1xyXG4gICAgICAgICAgICBjYXNlICdvcGVuYWknOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haVNldHRpbmdzO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9kZWxTZWxlY3QgPSBwcm92aWRlclNldHRpbmdzLmNyZWF0ZUVsKCdzZWxlY3QnKTtcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmF2YWlsYWJsZU1vZGVscy5mb3JFYWNoKG1vZGVsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbFNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB2YWx1ZTogbW9kZWwsIHRleHQ6IG1vZGVsIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBtb2RlbFNlbGVjdC52YWx1ZSA9IHNldHRpbmdzLm1vZGVsO1xyXG4gICAgICAgICAgICAgICAgbW9kZWxTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm1vZGVsID0gbW9kZWxTZWxlY3QudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGNhc2UgJ2FudGhyb3BpYyc6IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3M7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtb2RlbFNlbGVjdCA9IHByb3ZpZGVyU2V0dGluZ3MuY3JlYXRlRWwoJ3NlbGVjdCcpO1xyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzLmZvckVhY2gobW9kZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsU2VsZWN0LmNyZWF0ZUVsKCdvcHRpb24nLCB7IHZhbHVlOiBtb2RlbCwgdGV4dDogbW9kZWwgfSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG1vZGVsU2VsZWN0LnZhbHVlID0gc2V0dGluZ3MubW9kZWw7XHJcbiAgICAgICAgICAgICAgICBtb2RlbFNlbGVjdC5hZGRFdmVudExpc3RlbmVyKCdjaGFuZ2UnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubW9kZWwgPSBtb2RlbFNlbGVjdC52YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY2FzZSAnZ2VtaW5pJzoge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5nZW1pbmlTZXR0aW5ncztcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVsU2VsZWN0ID0gcHJvdmlkZXJTZXR0aW5ncy5jcmVhdGVFbCgnc2VsZWN0Jyk7XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMuZm9yRWFjaChtb2RlbCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWxTZWxlY3QuY3JlYXRlRWwoJ29wdGlvbicsIHsgdmFsdWU6IG1vZGVsLCB0ZXh0OiBtb2RlbCB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgbW9kZWxTZWxlY3QudmFsdWUgPSBzZXR0aW5ncy5tb2RlbDtcclxuICAgICAgICAgICAgICAgIG1vZGVsU2VsZWN0LmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5tb2RlbCA9IG1vZGVsU2VsZWN0LnZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjYXNlICdvbGxhbWEnOiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm9sbGFtYVNldHRpbmdzO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbW9kZWxTZWxlY3QgPSBwcm92aWRlclNldHRpbmdzLmNyZWF0ZUVsKCdzZWxlY3QnKTtcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmF2YWlsYWJsZU1vZGVscy5mb3JFYWNoKG1vZGVsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbFNlbGVjdC5jcmVhdGVFbCgnb3B0aW9uJywgeyB2YWx1ZTogbW9kZWwsIHRleHQ6IG1vZGVsIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICBtb2RlbFNlbGVjdC52YWx1ZSA9IHNldHRpbmdzLm1vZGVsO1xyXG4gICAgICAgICAgICAgICAgbW9kZWxTZWxlY3QuYWRkRXZlbnRMaXN0ZW5lcignY2hhbmdlJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLm1vZGVsID0gbW9kZWxTZWxlY3QudmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY29udGFpbmVyO1xyXG4gICAgfVxyXG59XHJcbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLElBQUFBLG1CQUE2RTs7O0FDZ0t0RSxJQUFNLG1CQUFxQztBQUFBLEVBQzlDLHNCQUFzQjtBQUFBLEVBQ3RCLFVBQVU7QUFBQSxFQUNWLGdCQUFnQjtBQUFBLElBQ1osUUFBUTtBQUFBLElBQ1IsT0FBTztBQUFBLElBQ1AsaUJBQWlCLENBQUM7QUFBQSxFQUN0QjtBQUFBLEVBQ0EsbUJBQW1CO0FBQUEsSUFDZixRQUFRO0FBQUEsSUFDUixPQUFPO0FBQUEsSUFDUCxpQkFBaUIsQ0FBQztBQUFBLEVBQ3RCO0FBQUEsRUFDQSxnQkFBZ0I7QUFBQSxJQUNaLFFBQVE7QUFBQSxJQUNSLE9BQU87QUFBQSxJQUNQLGlCQUFpQixDQUFDO0FBQUEsRUFDdEI7QUFBQSxFQUNBLGdCQUFnQjtBQUFBLElBQ1osV0FBVztBQUFBLElBQ1gsT0FBTztBQUFBLElBQ1AsaUJBQWlCLENBQUM7QUFBQSxFQUN0QjtBQUFBLEVBQ0EsZUFBZTtBQUFBLEVBQ2YsYUFBYTtBQUFBLEVBQ2IsV0FBVztBQUFBLEVBQ1gsOEJBQThCO0FBQUEsRUFDOUIsOEJBQThCO0FBQUEsRUFDOUIsaUJBQWlCO0FBQUEsRUFDakIsdUJBQXVCO0FBQUEsRUFDdkIscUJBQXFCO0FBQUEsRUFDckIsZUFBZTtBQUFBLEVBQ2YsaUJBQWlCO0FBQUEsRUFDakIsZUFBZTtBQUFBLEVBQ2Ysb0JBQW9CO0FBQUEsRUFDcEIsY0FBYztBQUNsQjs7O0FDN0tPLElBQU0sZ0JBQU4sY0FBNEIsTUFBTTtBQUFBLEVBSXJDLFlBQVksTUFBeUIsU0FBaUIsWUFBcUI7QUFDdkUsVUFBTSxPQUFPO0FBSmpCO0FBQ0E7QUFJSSxTQUFLLE9BQU87QUFDWixTQUFLLGFBQWE7QUFDbEIsU0FBSyxPQUFPO0FBQUEs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QUVBLGNBQUksUUFBUSxnQkFBZ0Isd0JBQU87QUFDL0Isa0JBQU0sY0FBYyxNQUFNLEtBQUssSUFBSSxNQUFNLFdBQVcsSUFBSTtBQUV4RCw4QkFBa0Isa0JBQWtCLEtBQUssUUFBUTtBQUFBO0FBQUE7QUFFakQsZ0JBQUksWUFBWTtBQUVaLG9CQUFNLGdCQUFnQixLQUFLLDBCQUEwQixhQUFhLFVBQVU7QUFDNUUsZ0NBQWtCO0FBQUEsWUFDdEIsT0FBTztBQUNILGdDQUFrQjtBQUFBLFlBQ3RCO0FBRUEsOEJBQWtCO0FBQUEsVUFDdEIsT0FBTztBQUNILDhCQUFrQixtQkFBbUIsUUFBUTtBQUFBO0FBQUE7QUFBQSxVQUNqRDtBQUFBLFFBQ0osU0FBUyxPQUFPO0FBQ1osNEJBQWtCLHlCQUF5QixRQUFRLEtBQUssTUFBTSxPQUFPO0FBQUE7QUFBQTtBQUFBLFFBQ3pFO0FBQUEsTUFDSjtBQUFBLElBQ0o7QUFFQSxXQUFPO0FBQUEsRUFDWDtBQUNKOyIsCiAgIm5hbWVzIjogWyJpbXBvcnRfb2JzaWRpYW4iLCAic3RhdHVzIiwgImZldGNoIiwgIlJlcXVlc3QiLCAiUmVzcG9uc2UiLCAiSGVhZGVycyIsICJGb3JtRGF0YSIsICJCbG9iIiwgIkZpbGUiLCAiUmVhZGFibGVTdHJlYW0iLCAiX2EiLCAiUmVhZGFibGVTdHJlYW0iLCAiX2EiLCAiX2EiLCAiRmlsZSIsICJmZXRjaCIsICJvcHRzIiwgIlBhZ2UiLCAiX2EiLCAicmV0cnlNZXNzYWdlIiwgIl9hIiwgIl9hIiwgIl9hIiwgIl9hIiwgIl9fY2xhc3NQcml2YXRlRmllbGRTZXQiLCAiX19jbGFzc1ByaXZhdGVGaWVsZEdldCIsICJfYSIsICJfQmV0YU1lc3NhZ2VTdHJlYW1fZ2V0RmluYWxNZXNzYWdlIiwgIl9CZXRhTWVzc2FnZVN0cmVhbV9nZXRGaW5hbFRleHQiLCAiX0JldGFNZXNzYWdlU3RyZWFtX2JlZ2luUmVxdWVzdCIsICJfQmV0YU1lc3NhZ2VTdHJlYW1fYWRkU3RyZWFtRXZlbnQiLCAiX0JldGFNZXNzYWdlU3RyZWFtX2VuZFJlcXVlc3QiLCAiX0JldGFNZXNzYWdlU3RyZWFtX2FjY3VtdWxhdGVNZXNzYWdlIiwgImNodW5rIiwgIl9hIiwgIl9hIiwgIkJhdGNoZXMiLCAiSlNPTl9CVUZfUFJPUEVSVFkiLCAiX19jbGFzc1ByaXZhdGVGaWVsZFNldCIsICJfX2NsYXNzUHJpdmF0ZUZpZWxkR2V0IiwgIl9hIiwgIl9NZXNzYWdlU3RyZWFtX2dldEZpbmFsTWVzc2FnZSIsICJfTWVzc2FnZVN0cmVhbV9nZXRGaW5hbFRleHQiLCAiX01lc3NhZ2VTdHJlYW1fYmVnaW5SZXF1ZXN0IiwgIl9NZXNzYWdlU3RyZWFtX2FkZFN0cmVhbUV2ZW50IiwgImNoZWNrTmV2ZXIiLCAiX01lc3NhZ2VTdHJlYW1fZW5kUmVxdWVzdCIsICJfTWVzc2FnZVN0cmVhbV9hY2N1bXVsYXRlTWVzc2FnZSIsICJjaHVuayIsICJNZXNzYWdlcyIsICJCYXRjaGVzIiwgIl9hIiwgIkRFUFJFQ0FURURfTU9ERUxTIiwgIk1vZGVscyIsICJfYSIsICJNZXNzYWdlcyIsICJNb2RlbHMiLCAiX2EiLCAiX2EiLCAiX2EiLCAiX2EiLCAiX2EiLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgImNvbnRlbnQiLCAiY29udGVudEVsIiwgInJvbGUiXQp9Cg==
