/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);
var __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== "symbol" ? key + "" : key, value);

// src/promptConstants.ts
var promptConstants_exports = {};
__export(promptConstants_exports, {
  AGENT_SYSTEM_PROMPT: () => AGENT_SYSTEM_PROMPT,
  DEFAULT_GENERAL_SYSTEM_PROMPT: () => DEFAULT_GENERAL_SYSTEM_PROMPT,
  DEFAULT_SUMMARY_PROMPT: () => DEFAULT_SUMMARY_PROMPT,
  DEFAULT_TITLE_PROMPT: () => DEFAULT_TITLE_PROMPT,
  DEFAULT_YAML_SYSTEM_MESSAGE: () => DEFAULT_YAML_SYSTEM_MESSAGE
});
var DEFAULT_TITLE_PROMPT, DEFAULT_SUMMARY_PROMPT, DEFAULT_GENERAL_SYSTEM_PROMPT, AGENT_SYSTEM_PROMPT, DEFAULT_YAML_SYSTEM_MESSAGE;
var init_promptConstants = __esm({
  "src/promptConstants.ts"() {
    DEFAULT_TITLE_PROMPT = "You are a title generator. You will give succinct titles that do not contain backslashes, forward slashes, or colons. Only generate a title as your response.";
    DEFAULT_SUMMARY_PROMPT = "Summarize the note content in 1-2 sentences, focusing on the main ideas and purpose.";
    DEFAULT_GENERAL_SYSTEM_PROMPT = "You are a helpful assistant.";
    AGENT_SYSTEM_PROMPT = `
You are an AI assistant with access to tools. Use tools immediately without asking permission.

When you need to use a tool, respond ONLY with a JSON command in this format:

{
  "action": "tool_name",
  "parameters": { /* tool-specific parameters */ },
  "requestId": "unique_id"
}

Available tools:
1. file_write - Write/modify file contents (use "filename" parameter for the file path). Usually md files unless otherwise specified.
2. file_read - Read file contents (use "filePath" parameter)  
3. file_select - Search for files programmatically (use "query" parameter to search by filename/content)
4. file_diff - Compare and suggest changes to files

Context awareness:
- Remember files mentioned/created in this conversation
- When user refers to "the file", "that note", or similar, use file_select to find it
- Use descriptive keywords from the conversation for searches

Examples:
- "create a note about X" \u2192 file_write immediately
- "delete the note about X" \u2192 file_select with query="X" to find the file first
- "read that file" \u2192 file_select to find the referenced file, then file_read
`;
    DEFAULT_YAML_SYSTEM_MESSAGE = "You are an assistant that generates YAML attribute values for Obsidian notes. Read the note and generate a value for the specified YAML field. Only output the value, not the key or extra text.";
  }
});

// src/types.ts
var types_exports = {};
__export(types_exports, {
  DEFAULT_SETTINGS: () => DEFAULT_SETTINGS
});
var DEFAULT_SETTINGS;
var init_types = __esm({
  "src/types.ts"() {
    init_promptConstants();
    DEFAULT_SETTINGS = {
      referenceCurrentNote: false,
      provider: "openai",
      selectedModel: void 0,
      availableModels: [],
      openaiSettings: {
        apiKey: "",
        model: "gpt-4.1",
        availableModels: []
      },
      anthropicSettings: {
        apiKey: "",
        model: "claude-3-5-sonnet-latest",
        availableModels: []
      },
      geminiSettings: {
        apiKey: "",
        model: "gemini-2.5-flash-preview-05-20",
        availableModels: []
      },
      ollamaSettings: {
        serverUrl: "http://localhost:11434",
        model: "llama2",
        availableModels: []
      },
      systemMessage: DEFAULT_GENERAL_SYSTEM_PROMPT,
      temperature: 0.7,
      maxTokens: 1e3,
      includeDateWithSystemMessage: false,
      includeTimeWithSystemMessage: false,
      enableStreaming: true,
      autoOpenModelSettings: true,
      enableObsidianLinks: true,
      titleOutputMode: "clipboard",
      summaryOutputMode: "clipboard",
      chatSeparator: "----",
      chatStartString: void 0,
      chatEndString: void 0,
      enableContextNotes: false,
      contextNotes: "",
      titlePrompt: DEFAULT_TITLE_PROMPT,
      summaryPrompt: DEFAULT_SUMMARY_PROMPT,
      maxSessions: 10,
      autoSaveSessions: true,
      sessions: [],
      activeSessionId: void 0,
      expandLinkedNotesRecursively: false,
      maxLinkExpansionDepth: 2,
      chatNoteFolder: "",
      // Default to vault root
      yamlAttributeGenerators: [
        {
          attributeName: "summary",
          prompt: DEFAULT_SUMMARY_PROMPT,
          outputMode: "metadata",
          commandName: "Generate YAML: summary"
        }
      ],
      providerConfigExpanded: {
        openai: false,
        anthropic: false,
        gemini: false,
        ollama: false
      },
      generalSectionsExpanded: {
        "AI Model Settings": true,
        "Date Settings": true,
        "Note Reference Settings": true,
        "Provider Configuration": true,
        // For the main group of provider configs
        "AI Model Configuration": true
      },
      modelSettingPresets: [
        {
          name: "Default",
          selectedModel: void 0,
          systemMessage: DEFAULT_GENERAL_SYSTEM_PROMPT,
          temperature: 0.7,
          maxTokens: 1e3,
          enableStreaming: true
        }
      ],
      agentMode: {
        enabled: false,
        maxToolCalls: 5,
        timeoutMs: 3e4
      }
    };
  }
});

// providers/base.ts
var ProviderError, BaseProvider;
var init_base = __esm({
  "providers/base.ts"() {
    ProviderError = class extends Error {
      constructor(type2, message, statusCode) {
        super(message);
        __publicField(this, "type");
        __publicField(this, "statusCode");
        this.type = type2;
        this.statusCode = statusCode;
        this.name = "ProviderError";
      }
    };
    BaseProvider = class {
      /**
       * Handle common HTTP errors
       */
      handleHttpError(error) {
        if (error instanceof Response) {
          const status2 = error.status;
          switch (status2) {
            case 401:
              throw new ProviderError(
                "invalid_api_key" /* InvalidApiKey */,
                "Invalid API key",
                status2
              );
            case 429:
              throw new ProviderError(
                "rate_limit" /* RateLimit */,
                "Rate limit exceeded",
                status2
              );
            case 400:
              throw new ProviderError(
                "invalid_request" /* InvalidRequest */,
                "Invalid request",
                status2
              );
            case 500:
            case 502:
            case 503:
            case 504:
              throw new ProviderError(
                "server_error" /* ServerError */,
                "Server error occurred",
                status2
              );
            default:
              throw new ProviderError(
                "server_error" /* ServerError */,
                `Unknown error occurred: ${status2}`,
                status2
              );
          }
        }
        if (!error.response) {
          throw new ProviderError(
            "network_error" /* NetworkError */,
            "Network error occurred"
          );
        }
        const status = error.response.status;
        switch (status) {
          case 401:
            throw new ProviderError(
              "invalid_api_key" /* InvalidApiKey */,
              "Invalid API key",
              status
            );
          case 429:
            throw new ProviderError(
              "rate_limit" /* RateLimit */,
              "Rate limit exceeded",
              status
            );
          case 400:
            throw new ProviderError(
              "invalid_request" /* InvalidRequest */,
              "Invalid request",
              status
            );
          case 500:
          case 502:
          case 503:
          case 504:
            throw new ProviderError(
              "server_error" /* ServerError */,
              "Server error occurred",
              status
            );
          default:
            throw new ProviderError(
              "server_error" /* ServerError */,
              `Unknown error occurred: ${status}`,
              status
            );
        }
      }
      /**
       * Format error message for connection test results
       */
      formatErrorMessage(error) {
        if (error instanceof ProviderError) {
          switch (error.type) {
            case "invalid_api_key" /* InvalidApiKey */:
              return "Invalid API key. Please check your credentials.";
            case "rate_limit" /* RateLimit */:
              return "Rate limit exceeded. Please try again later.";
            case "network_error" /* NetworkError */:
              return "Network error. Please check your internet connection.";
            default:
              return error.message;
          }
        }
        return error.message || "An unknown error occurred";
      }
      /**
       * Create a standard error response for connection tests
       */
      createErrorResponse(error) {
        return {
          success: false,
          message: this.formatErrorMessage(error)
        };
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/version.mjs
var VERSION;
var init_version = __esm({
  "node_modules/@anthropic-ai/sdk/version.mjs"() {
    VERSION = "0.36.3";
  }
});

// node_modules/@anthropic-ai/sdk/_shims/registry.mjs
function setShims(shims, options = { auto: false }) {
  if (auto) {
    throw new Error(`you must \`import '@anthropic-ai/sdk/shims/${shims.kind}'\` before importing anything else from @anthropic-ai/sdk`);
  }
  if (kind) {
    throw new Error(`can't \`import '@anthropic-ai/sdk/shims/${shims.kind}'\` after \`import '@anthropic-ai/sdk/shims/${kind}'\``);
  }
  auto = options.auto;
  kind = shims.kind;
  fetch2 = shims.fetch;
  Request2 = shims.Request;
  Response2 = shims.Response;
  Headers2 = shims.Headers;
  FormData2 = shims.FormData;
  Blob2 = shims.Blob;
  File2 = shims.File;
  ReadableStream2 = shims.ReadableStream;
  getMultipartRequestOptions = shims.getMultipartRequestOptions;
  getDefaultAgent = shims.getDefaultAgent;
  fileFromPath = shims.fileFromPath;
  isFsReadStream = shims.isFsReadStream;
}
var auto, kind, fetch2, Request2, Response2, Headers2, FormData2, Blob2, File2, ReadableStream2, getMultipartRequestOptions, getDefaultAgent, fileFromPath, isFsReadStream;
var init_registry = __esm({
  "node_modules/@anthropic-ai/sdk/_shims/registry.mjs"() {
    auto = false;
    kind = void 0;
    fetch2 = void 0;
    Request2 = void 0;
    Response2 = void 0;
    Headers2 = void 0;
    FormData2 = void 0;
    Blob2 = void 0;
    File2 = void 0;
    ReadableStream2 = void 0;
    getMultipartRequestOptions = void 0;
    getDefaultAgent = void 0;
    fileFromPath = void 0;
    isFsReadStream = void 0;
  }
});

// node_modules/@anthropic-ai/sdk/_shims/MultipartBody.mjs
var MultipartBody;
var init_MultipartBody = __esm({
  "node_modules/@anthropic-ai/sdk/_shims/MultipartBody.mjs"() {
    MultipartBody = class {
      constructor(body) {
        this.body = body;
      }
      get [Symbol.toStringTag]() {
        return "MultipartBody";
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/_shims/web-runtime.mjs
function getRuntime({ manuallyImported } = {}) {
  const recommendation = manuallyImported ? `You may need to use polyfills` : `Add one of these imports before your first \`import \u2026 from '@anthropic-ai/sdk'\`:
- \`import '@anthropic-ai/sdk/shims/node'\` (if you're running on Node)
- \`import '@anthropic-ai/sdk/shims/web'\` (otherwise)
`;
  let _fetch, _Request, _Response, _Headers;
  try {
    _fetch = fetch;
    _Request = Request;
    _Response = Response;
    _Headers = Headers;
  } catch (error) {
    throw new Error(`this environment is missing the following Web Fetch API type: ${error.message}. ${recommendation}`);
  }
  return {
    kind: "web",
    fetch: _fetch,
    Request: _Request,
    Response: _Response,
    Headers: _Headers,
    FormData: (
      // @ts-ignore
      typeof FormData !== "undefined" ? FormData : class FormData {
        // @ts-ignore
        constructor() {
          throw new Error(`file uploads aren't supported in this environment yet as 'FormData' is undefined. ${recommendation}`);
        }
      }
    ),
    Blob: typeof Blob !== "undefined" ? Blob : class Blob {
      constructor() {
        throw new Error(`file uploads aren't supported in this environment yet as 'Blob' is undefined. ${recommendation}`);
      }
    },
    File: (
      // @ts-ignore
      typeof File !== "undefined" ? File : class File {
        // @ts-ignore
        constructor() {
          throw new Error(`file uploads aren't supported in this environment yet as 'File' is undefined. ${recommendation}`);
        }
      }
    ),
    ReadableStream: (
      // @ts-ignore
      typeof ReadableStream !== "undefined" ? ReadableStream : class ReadableStream {
        // @ts-ignore
        constructor() {
          throw new Error(`streaming isn't supported in this environment yet as 'ReadableStream' is undefined. ${recommendation}`);
        }
      }
    ),
    getMultipartRequestOptions: async (form, opts) => ({
      ...opts,
      body: new MultipartBody(form)
    }),
    getDefaultAgent: (url) => void 0,
    fileFromPath: () => {
      throw new Error("The `fileFromPath` function is only supported in Node. See the README for more details: https://www.github.com/anthropics/anthropic-sdk-typescript#file-uploads");
    },
    isFsReadStream: (value) => false
  };
}
var init_web_runtime = __esm({
  "node_modules/@anthropic-ai/sdk/_shims/web-runtime.mjs"() {
    init_MultipartBody();
  }
});

// node_modules/@anthropic-ai/sdk/_shims/auto/runtime.mjs
var init_runtime = __esm({
  "node_modules/@anthropic-ai/sdk/_shims/auto/runtime.mjs"() {
    init_web_runtime();
  }
});

// node_modules/@anthropic-ai/sdk/_shims/index.mjs
var init_shims = __esm({
  "node_modules/@anthropic-ai/sdk/_shims/index.mjs"() {
    init_registry();
    init_runtime();
    init_registry();
    if (!kind) setShims(getRuntime(), { auto: true });
  }
});

// node_modules/@anthropic-ai/sdk/error.mjs
var AnthropicError, APIError, APIUserAbortError, APIConnectionError, APIConnectionTimeoutError, BadRequestError, AuthenticationError, PermissionDeniedError, NotFoundError, ConflictError, UnprocessableEntityError, RateLimitError, InternalServerError;
var init_error = __esm({
  "node_modules/@anthropic-ai/sdk/error.mjs"() {
    init_core();
    AnthropicError = class extends Error {
    };
    APIError = class _APIError extends AnthropicError {
      constructor(status, error, message, headers) {
        super(`${_APIError.makeMessage(status, error, message)}`);
        this.status = status;
        this.headers = headers;
        this.request_id = headers == null ? void 0 : headers["request-id"];
        this.error = error;
      }
      static makeMessage(status, error, message) {
        const msg = (error == null ? void 0 : error.message) ? typeof error.message === "string" ? error.message : JSON.stringify(error.message) : error ? JSON.stringify(error) : message;
        if (status && msg) {
          return `${status} ${msg}`;
        }
        if (status) {
          return `${status} status code (no body)`;
        }
        if (msg) {
          return msg;
        }
        return "(no status code or body)";
      }
      static generate(status, errorResponse, message, headers) {
        if (!status || !headers) {
          return new APIConnectionError({ message, cause: castToError(errorResponse) });
        }
        const error = errorResponse;
        if (status === 400) {
          return new BadRequestError(status, error, message, headers);
        }
        if (status === 401) {
          return new AuthenticationError(status, error, message, headers);
        }
        if (status === 403) {
          return new PermissionDeniedError(status, error, message, headers);
        }
        if (status === 404) {
          return new NotFoundError(status, error, message, headers);
        }
        if (status === 409) {
          return new ConflictError(status, error, message, headers);
        }
        if (status === 422) {
          return new UnprocessableEntityError(status, error, message, headers);
        }
        if (status === 429) {
          return new RateLimitError(status, error, message, headers);
        }
        if (status >= 500) {
          return new InternalServerError(status, error, message, headers);
        }
        return new _APIError(status, error, message, headers);
      }
    };
    APIUserAbortError = class extends APIError {
      constructor({ message } = {}) {
        super(void 0, void 0, message || "Request was aborted.", void 0);
      }
    };
    APIConnectionError = class extends APIError {
      constructor({ message, cause }) {
        super(void 0, void 0, message || "Connection error.", void 0);
        if (cause)
          this.cause = cause;
      }
    };
    APIConnectionTimeoutError = class extends APIConnectionError {
      constructor({ message } = {}) {
        super({ message: message != null ? message : "Request timed out." });
      }
    };
    BadRequestError = class extends APIError {
    };
    AuthenticationError = class extends APIError {
    };
    PermissionDeniedError = class extends APIError {
    };
    NotFoundError = class extends APIError {
    };
    ConflictError = class extends APIError {
    };
    UnprocessableEntityError = class extends APIError {
    };
    RateLimitError = class extends APIError {
    };
    InternalServerError = class extends APIError {
    };
  }
});

// node_modules/@anthropic-ai/sdk/internal/decoders/line.mjs
var LineDecoder;
var init_line = __esm({
  "node_modules/@anthropic-ai/sdk/internal/decoders/line.mjs"() {
    init_error();
    LineDecoder = class _LineDecoder {
      constructor() {
        this.buffer = [];
        this.trailingCR = false;
      }
      decode(chunk) {
        let text = this.decodeText(chunk);
        if (this.trailingCR) {
          text = "\r" + text;
          this.trailingCR = false;
        }
        if (text.endsWith("\r")) {
          this.trailingCR = true;
          text = text.slice(0, -1);
        }
        if (!text) {
          return [];
        }
        const trailingNewline = _LineDecoder.NEWLINE_CHARS.has(text[text.length - 1] || "");
        let lines = text.split(_LineDecoder.NEWLINE_REGEXP);
        if (trailingNewline) {
          lines.pop();
        }
        if (lines.length === 1 && !trailingNewline) {
          this.buffer.push(lines[0]);
          return [];
        }
        if (this.buffer.length > 0) {
          lines = [this.buffer.join("") + lines[0], ...lines.slice(1)];
          this.buffer = [];
        }
        if (!trailingNewline) {
          this.buffer = [lines.pop() || ""];
        }
        return lines;
      }
      decodeText(bytes) {
        var _a2;
        if (bytes == null)
          return "";
        if (typeof bytes === "string")
          return bytes;
        if (typeof Buffer !== "undefined") {
          if (bytes instanceof Buffer) {
            return bytes.toString();
          }
          if (bytes instanceof Uint8Array) {
            return Buffer.from(bytes).toString();
          }
          throw new AnthropicError(`Unexpected: received non-Uint8Array (${bytes.constructor.name}) stream chunk in an environment with a global "Buffer" defined, which this library assumes to be Node. Please report this error.`);
        }
        if (typeof TextDecoder !== "undefined") {
          if (bytes instanceof Uint8Array || bytes instanceof ArrayBuffer) {
            (_a2 = this.textDecoder) != null ? _a2 : this.textDecoder = new TextDecoder("utf8");
            return this.textDecoder.decode(bytes);
          }
          throw new AnthropicError(`Unexpected: received non-Uint8Array/ArrayBuffer (${bytes.constructor.name}) in a web platform. Please report this error.`);
        }
        throw new AnthropicError(`Unexpected: neither Buffer nor TextDecoder are available as globals. Please report this error.`);
      }
      flush() {
        if (!this.buffer.length && !this.trailingCR) {
          return [];
        }
        const lines = [this.buffer.join("")];
        this.buffer = [];
        this.trailingCR = false;
        return lines;
      }
    };
    LineDecoder.NEWLINE_CHARS = /* @__PURE__ */ new Set(["\n", "\r"]);
    LineDecoder.NEWLINE_REGEXP = /\r\n|[\n\r]/g;
  }
});

// node_modules/@anthropic-ai/sdk/internal/stream-utils.mjs
function ReadableStreamToAsyncIterable(stream) {
  if (stream[Symbol.asyncIterator])
    return stream;
  const reader = stream.getReader();
  return {
    async next() {
      try {
        const result = await reader.read();
        if (result == null ? void 0 : result.done)
          reader.releaseLock();
        return result;
      } catch (e) {
        reader.releaseLock();
        throw e;
      }
    },
    async return() {
      const cancelPromise = reader.cancel();
      reader.releaseLock();
      await cancelPromise;
      return { done: true, value: void 0 };
    },
    [Symbol.asyncIterator]() {
      return this;
    }
  };
}
var init_stream_utils = __esm({
  "node_modules/@anthropic-ai/sdk/internal/stream-utils.mjs"() {
  }
});

// node_modules/@anthropic-ai/sdk/streaming.mjs
async function* _iterSSEMessages(response, controller) {
  if (!response.body) {
    controller.abort();
    throw new AnthropicError(`Attempted to iterate over a response with no body`);
  }
  const sseDecoder = new SSEDecoder();
  const lineDecoder = new LineDecoder();
  const iter = ReadableStreamToAsyncIterable(response.body);
  for await (const sseChunk of iterSSEChunks(iter)) {
    for (const line of lineDecoder.decode(sseChunk)) {
      const sse = sseDecoder.decode(line);
      if (sse)
        yield sse;
    }
  }
  for (const line of lineDecoder.flush()) {
    const sse = sseDecoder.decode(line);
    if (sse)
      yield sse;
  }
}
async function* iterSSEChunks(iterator) {
  let data = new Uint8Array();
  for await (const chunk of iterator) {
    if (chunk == null) {
      continue;
    }
    const binaryChunk = chunk instanceof ArrayBuffer ? new Uint8Array(chunk) : typeof chunk === "string" ? new TextEncoder().encode(chunk) : chunk;
    let newData = new Uint8Array(data.length + binaryChunk.length);
    newData.set(data);
    newData.set(binaryChunk, data.length);
    data = newData;
    let patternIndex;
    while ((patternIndex = findDoubleNewlineIndex(data)) !== -1) {
      yield data.slice(0, patternIndex);
      data = data.slice(patternIndex);
    }
  }
  if (data.length > 0) {
    yield data;
  }
}
function findDoubleNewlineIndex(buffer) {
  const newline = 10;
  const carriage = 13;
  for (let i = 0; i < buffer.length - 2; i++) {
    if (buffer[i] === newline && buffer[i + 1] === newline) {
      return i + 2;
    }
    if (buffer[i] === carriage && buffer[i + 1] === carriage) {
      return i + 2;
    }
    if (buffer[i] === carriage && buffer[i + 1] === newline && i + 3 < buffer.length && buffer[i + 2] === carriage && buffer[i + 3] === newline) {
      return i + 4;
    }
  }
  return -1;
}
function partition(str2, delimiter) {
  const index = str2.indexOf(delimiter);
  if (index !== -1) {
    return [str2.substring(0, index), delimiter, str2.substring(index + delimiter.length)];
  }
  return [str2, "", ""];
}
var Stream, SSEDecoder;
var init_streaming = __esm({
  "node_modules/@anthropic-ai/sdk/streaming.mjs"() {
    init_shims();
    init_error();
    init_line();
    init_stream_utils();
    init_core();
    init_error();
    Stream = class _Stream {
      constructor(iterator, controller) {
        this.iterator = iterator;
        this.controller = controller;
      }
      static fromSSEResponse(response, controller) {
        let consumed = false;
        async function* iterator() {
          if (consumed) {
            throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");
          }
          consumed = true;
          let done = false;
          try {
            for await (const sse of _iterSSEMessages(response, controller)) {
              if (sse.event === "completion") {
                try {
                  yield JSON.parse(sse.data);
                } catch (e) {
                  console.error(`Could not parse message into JSON:`, sse.data);
                  console.error(`From chunk:`, sse.raw);
                  throw e;
                }
              }
              if (sse.event === "message_start" || sse.event === "message_delta" || sse.event === "message_stop" || sse.event === "content_block_start" || sse.event === "content_block_delta" || sse.event === "content_block_stop") {
                try {
                  yield JSON.parse(sse.data);
                } catch (e) {
                  console.error(`Could not parse message into JSON:`, sse.data);
                  console.error(`From chunk:`, sse.raw);
                  throw e;
                }
              }
              if (sse.event === "ping") {
                continue;
              }
              if (sse.event === "error") {
                throw APIError.generate(void 0, `SSE Error: ${sse.data}`, sse.data, createResponseHeaders(response.headers));
              }
            }
            done = true;
          } catch (e) {
            if (e instanceof Error && e.name === "AbortError")
              return;
            throw e;
          } finally {
            if (!done)
              controller.abort();
          }
        }
        return new _Stream(iterator, controller);
      }
      /**
       * Generates a Stream from a newline-separated ReadableStream
       * where each item is a JSON value.
       */
      static fromReadableStream(readableStream, controller) {
        let consumed = false;
        async function* iterLines() {
          const lineDecoder = new LineDecoder();
          const iter = ReadableStreamToAsyncIterable(readableStream);
          for await (const chunk of iter) {
            for (const line of lineDecoder.decode(chunk)) {
              yield line;
            }
          }
          for (const line of lineDecoder.flush()) {
            yield line;
          }
        }
        async function* iterator() {
          if (consumed) {
            throw new Error("Cannot iterate over a consumed stream, use `.tee()` to split the stream.");
          }
          consumed = true;
          let done = false;
          try {
            for await (const line of iterLines()) {
              if (done)
                continue;
              if (line)
                yield JSON.parse(line);
            }
            done = true;
          } catch (e) {
            if (e instanceof Error && e.name === "AbortError")
              return;
            throw e;
          } finally {
            if (!done)
              controller.abort();
          }
        }
        return new _Stream(iterator, controller);
      }
      [Symbol.asyncIterator]() {
        return this.iterator();
      }
      /**
       * Splits the stream into two streams which can be
       * independently read from at different speeds.
       */
      tee() {
        const left = [];
        const right = [];
        const iterator = this.iterator();
        const teeIterator = (queue) => {
          return {
            next: () => {
              if (queue.length === 0) {
                const result = iterator.next();
                left.push(result);
                right.push(result);
              }
              return queue.shift();
            }
          };
        };
        return [
          new _Stream(() => teeIterator(left), this.controller),
          new _Stream(() => teeIterator(right), this.controller)
        ];
      }
      /**
       * Converts this stream to a newline-separated ReadableStream of
       * JSON stringified values in the stream
       * which can be turned back into a Stream with `Stream.fromReadableStream()`.
       */
      toReadableStream() {
        const self = this;
        let iter;
        const encoder = new TextEncoder();
        return new ReadableStream2({
          async start() {
            iter = self[Symbol.asyncIterator]();
          },
          async pull(ctrl) {
            try {
              const { value, done } = await iter.next();
              if (done)
                return ctrl.close();
              const bytes = encoder.encode(JSON.stringify(value) + "\n");
              ctrl.enqueue(bytes);
            } catch (err) {
              ctrl.error(err);
            }
          },
          async cancel() {
            var _a2;
            await ((_a2 = iter.return) == null ? void 0 : _a2.call(iter));
          }
        });
      }
    };
    SSEDecoder = class {
      constructor() {
        this.event = null;
        this.data = [];
        this.chunks = [];
      }
      decode(line) {
        if (line.endsWith("\r")) {
          line = line.substring(0, line.length - 1);
        }
        if (!line) {
          if (!this.event && !this.data.length)
            return null;
          const sse = {
            event: this.event,
            data: this.data.join("\n"),
            raw: this.chunks
          };
          this.event = null;
          this.data = [];
          this.chunks = [];
          return sse;
        }
        this.chunks.push(line);
        if (line.startsWith(":")) {
          return null;
        }
        let [fieldname, _, value] = partition(line, ":");
        if (value.startsWith(" ")) {
          value = value.substring(1);
        }
        if (fieldname === "event") {
          this.event = value;
        } else if (fieldname === "data") {
          this.data.push(value);
        }
        return null;
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/uploads.mjs
async function toFile(value, name, options) {
  var _a2, _b, _c;
  value = await value;
  if (isFileLike(value)) {
    return value;
  }
  if (isResponseLike(value)) {
    const blob = await value.blob();
    name || (name = (_a2 = new URL(value.url).pathname.split(/[\\/]/).pop()) != null ? _a2 : "unknown_file");
    const data = isBlobLike(blob) ? [await blob.arrayBuffer()] : [blob];
    return new File2(data, name, options);
  }
  const bits = await getBytes(value);
  name || (name = (_b = getName(value)) != null ? _b : "unknown_file");
  if (!(options == null ? void 0 : options.type)) {
    const type2 = (_c = bits[0]) == null ? void 0 : _c.type;
    if (typeof type2 === "string") {
      options = { ...options, type: type2 };
    }
  }
  return new File2(bits, name, options);
}
async function getBytes(value) {
  var _a2;
  let parts = [];
  if (typeof value === "string" || ArrayBuffer.isView(value) || // includes Uint8Array, Buffer, etc.
  value instanceof ArrayBuffer) {
    parts.push(value);
  } else if (isBlobLike(value)) {
    parts.push(await value.arrayBuffer());
  } else if (isAsyncIterableIterator(value)) {
    for await (const chunk of value) {
      parts.push(chunk);
    }
  } else {
    throw new Error(`Unexpected data type: ${typeof value}; constructor: ${(_a2 = value == null ? void 0 : value.constructor) == null ? void 0 : _a2.name}; props: ${propsForError(value)}`);
  }
  return parts;
}
function propsForError(value) {
  const props = Object.getOwnPropertyNames(value);
  return `[${props.map((p) => `"${p}"`).join(", ")}]`;
}
function getName(value) {
  var _a2;
  return getStringFromMaybeBuffer(value.name) || getStringFromMaybeBuffer(value.filename) || // For fs.ReadStream
  ((_a2 = getStringFromMaybeBuffer(value.path)) == null ? void 0 : _a2.split(/[\\/]/).pop());
}
var isResponseLike, isFileLike, isBlobLike, getStringFromMaybeBuffer, isAsyncIterableIterator, isMultipartBody;
var init_uploads = __esm({
  "node_modules/@anthropic-ai/sdk/uploads.mjs"() {
    init_shims();
    init_shims();
    isResponseLike = (value) => value != null && typeof value === "object" && typeof value.url === "string" && typeof value.blob === "function";
    isFileLike = (value) => value != null && typeof value === "object" && typeof value.name === "string" && typeof value.lastModified === "number" && isBlobLike(value);
    isBlobLike = (value) => value != null && typeof value === "object" && typeof value.size === "number" && typeof value.type === "string" && typeof value.text === "function" && typeof value.slice === "function" && typeof value.arrayBuffer === "function";
    getStringFromMaybeBuffer = (x) => {
      if (typeof x === "string")
        return x;
      if (typeof Buffer !== "undefined" && x instanceof Buffer)
        return String(x);
      return void 0;
    };
    isAsyncIterableIterator = (value) => value != null && typeof value === "object" && typeof value[Symbol.asyncIterator] === "function";
    isMultipartBody = (body) => body && typeof body === "object" && body.body && body[Symbol.toStringTag] === "MultipartBody";
  }
});

// node_modules/@anthropic-ai/sdk/core.mjs
async function defaultParseResponse(props) {
  const { response } = props;
  if (props.options.stream) {
    debug("response", response.status, response.url, response.headers, response.body);
    if (props.options.__streamClass) {
      return props.options.__streamClass.fromSSEResponse(response, props.controller);
    }
    return Stream.fromSSEResponse(response, props.controller);
  }
  if (response.status === 204) {
    return null;
  }
  if (props.options.__binaryResponse) {
    return response;
  }
  const contentType = response.headers.get("content-type");
  const isJSON = (contentType == null ? void 0 : contentType.includes("application/json")) || (contentType == null ? void 0 : contentType.includes("application/vnd.api+json"));
  if (isJSON) {
    const json2 = await response.json();
    debug("response", response.status, response.url, response.headers, json2);
    return _addRequestID(json2, response);
  }
  const text = await response.text();
  debug("response", response.status, response.url, response.headers, text);
  return text;
}
function _addRequestID(value, response) {
  if (!value || typeof value !== "object" || Array.isArray(value)) {
    return value;
  }
  return Object.defineProperty(value, "_request_id", {
    value: response.headers.get("request-id"),
    enumerable: false
  });
}
function getBrowserInfo() {
  if (typeof navigator === "undefined" || !navigator) {
    return null;
  }
  const browserPatterns = [
    { key: "edge", pattern: /Edge(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /MSIE(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "ie", pattern: /Trident(?:.*rv\:(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "chrome", pattern: /Chrome(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "firefox", pattern: /Firefox(?:\W+(\d+)\.(\d+)(?:\.(\d+))?)?/ },
    { key: "safari", pattern: /(?:Version\W+(\d+)\.(\d+)(?:\.(\d+))?)?(?:\W+Mobile\S*)?\W+Safari/ }
  ];
  for (const { key, pattern } of browserPatterns) {
    const match = pattern.exec(navigator.userAgent);
    if (match) {
      const major = match[1] || 0;
      const minor = match[2] || 0;
      const patch = match[3] || 0;
      return { browser: key, version: `${major}.${minor}.${patch}` };
    }
  }
  return null;
}
function isEmptyObj(obj) {
  if (!obj)
    return true;
  for (const _k in obj)
    return false;
  return true;
}
function hasOwn(obj, key) {
  return Object.prototype.hasOwnProperty.call(obj, key);
}
function applyHeadersMut(targetHeaders, newHeaders) {
  for (const k in newHeaders) {
    if (!hasOwn(newHeaders, k))
      continue;
    const lowerKey = k.toLowerCase();
    if (!lowerKey)
      continue;
    const val = newHeaders[k];
    if (val === null) {
      delete targetHeaders[lowerKey];
    } else if (val !== void 0) {
      targetHeaders[lowerKey] = val;
    }
  }
}
function debug(action, ...args) {
  var _a2;
  if (typeof process !== "undefined" && ((_a2 = process == null ? void 0 : process.env) == null ? void 0 : _a2["DEBUG"]) === "true") {
    console.log(`Anthropic:DEBUG:${action}`, ...args);
  }
}
var __classPrivateFieldSet, __classPrivateFieldGet, _AbstractPage_client, APIPromise, APIClient, AbstractPage, PagePromise, createResponseHeaders, requestOptionsKeys, isRequestOptions, getPlatformProperties, normalizeArch, normalizePlatform, _platformHeaders, getPlatformHeaders, safeJSON, startsWithSchemeRegexp, isAbsoluteURL, sleep, validatePositiveInteger, castToError, readEnv, uuid4, isRunningInBrowser, isHeadersProtocol, getHeader;
var init_core = __esm({
  "node_modules/@anthropic-ai/sdk/core.mjs"() {
    init_version();
    init_streaming();
    init_error();
    init_shims();
    init_uploads();
    __classPrivateFieldSet = function(receiver, state, value, kind2, f) {
      if (kind2 === "m") throw new TypeError("Private method is not writable");
      if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
      if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
      return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
    };
    __classPrivateFieldGet = function(receiver, state, kind2, f) {
      if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
      if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
      return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
    };
    APIPromise = class _APIPromise extends Promise {
      constructor(responsePromise, parseResponse = defaultParseResponse) {
        super((resolve) => {
          resolve(null);
        });
        this.responsePromise = responsePromise;
        this.parseResponse = parseResponse;
      }
      _thenUnwrap(transform) {
        return new _APIPromise(this.responsePromise, async (props) => _addRequestID(transform(await this.parseResponse(props), props), props.response));
      }
      /**
       * Gets the raw `Response` instance instead of parsing the response
       * data.
       *
       * If you want to parse the response body but still get the `Response`
       * instance, you can use {@link withResponse()}.
       *
       * 👋 Getting the wrong TypeScript type for `Response`?
       * Try setting `"moduleResolution": "NodeNext"` if you can,
       * or add one of these imports before your first `import … from '@anthropic-ai/sdk'`:
       * - `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)
       * - `import '@anthropic-ai/sdk/shims/web'` (otherwise)
       */
      asResponse() {
        return this.responsePromise.then((p) => p.response);
      }
      /**
       * Gets the parsed response data, the raw `Response` instance and the ID of the request,
       * returned vie the `request-id` header which is useful for debugging requests and resporting
       * issues to Anthropic.
       *
       * If you just want to get the raw `Response` instance without parsing it,
       * you can use {@link asResponse()}.
       *
       * 👋 Getting the wrong TypeScript type for `Response`?
       * Try setting `"moduleResolution": "NodeNext"` if you can,
       * or add one of these imports before your first `import … from '@anthropic-ai/sdk'`:
       * - `import '@anthropic-ai/sdk/shims/node'` (if you're running on Node)
       * - `import '@anthropic-ai/sdk/shims/web'` (otherwise)
       */
      async withResponse() {
        const [data, response] = await Promise.all([this.parse(), this.asResponse()]);
        return { data, response, request_id: response.headers.get("request-id") };
      }
      parse() {
        if (!this.parsedPromise) {
          this.parsedPromise = this.responsePromise.then(this.parseResponse);
        }
        return this.parsedPromise;
      }
      then(onfulfilled, onrejected) {
        return this.parse().then(onfulfilled, onrejected);
      }
      catch(onrejected) {
        return this.parse().catch(onrejected);
      }
      finally(onfinally) {
        return this.parse().finally(onfinally);
      }
    };
    APIClient = class {
      constructor({
        baseURL,
        maxRetries = 2,
        timeout = 6e5,
        // 10 minutes
        httpAgent,
        fetch: overriddenFetch
      }) {
        this.baseURL = baseURL;
        this.maxRetries = validatePositiveInteger("maxRetries", maxRetries);
        this.timeout = validatePositiveInteger("timeout", timeout);
        this.httpAgent = httpAgent;
        this.fetch = overriddenFetch != null ? overriddenFetch : fetch2;
      }
      authHeaders(opts) {
        return {};
      }
      /**
       * Override this to add your own default headers, for example:
       *
       *  {
       *    ...super.defaultHeaders(),
       *    Authorization: 'Bearer 123',
       *  }
       */
      defaultHeaders(opts) {
        return {
          Accept: "application/json",
          "Content-Type": "application/json",
          "User-Agent": this.getUserAgent(),
          ...getPlatformHeaders(),
          ...this.authHeaders(opts)
        };
      }
      /**
       * Override this to add your own headers validation:
       */
      validateHeaders(headers, customHeaders) {
      }
      defaultIdempotencyKey() {
        return `stainless-node-retry-${uuid4()}`;
      }
      get(path, opts) {
        return this.methodRequest("get", path, opts);
      }
      post(path, opts) {
        return this.methodRequest("post", path, opts);
      }
      patch(path, opts) {
        return this.methodRequest("patch", path, opts);
      }
      put(path, opts) {
        return this.methodRequest("put", path, opts);
      }
      delete(path, opts) {
        return this.methodRequest("delete", path, opts);
      }
      methodRequest(method, path, opts) {
        return this.request(Promise.resolve(opts).then(async (opts2) => {
          const body = opts2 && isBlobLike(opts2 == null ? void 0 : opts2.body) ? new DataView(await opts2.body.arrayBuffer()) : (opts2 == null ? void 0 : opts2.body) instanceof DataView ? opts2.body : (opts2 == null ? void 0 : opts2.body) instanceof ArrayBuffer ? new DataView(opts2.body) : opts2 && ArrayBuffer.isView(opts2 == null ? void 0 : opts2.body) ? new DataView(opts2.body.buffer) : opts2 == null ? void 0 : opts2.body;
          return { method, path, ...opts2, body };
        }));
      }
      getAPIList(path, Page2, opts) {
        return this.requestAPIList(Page2, { method: "get", path, ...opts });
      }
      calculateContentLength(body) {
        if (typeof body === "string") {
          if (typeof Buffer !== "undefined") {
            return Buffer.byteLength(body, "utf8").toString();
          }
          if (typeof TextEncoder !== "undefined") {
            const encoder = new TextEncoder();
            const encoded = encoder.encode(body);
            return encoded.length.toString();
          }
        } else if (ArrayBuffer.isView(body)) {
          return body.byteLength.toString();
        }
        return null;
      }
      buildRequest(options, { retryCount = 0 } = {}) {
        var _a2, _b, _c, _d, _e, _f;
        const { method, path, query, headers = {} } = options;
        const body = ArrayBuffer.isView(options.body) || options.__binaryRequest && typeof options.body === "string" ? options.body : isMultipartBody(options.body) ? options.body.body : options.body ? JSON.stringify(options.body, null, 2) : null;
        const contentLength = this.calculateContentLength(body);
        const url = this.buildURL(path, query);
        if ("timeout" in options)
          validatePositiveInteger("timeout", options.timeout);
        const timeout = (_a2 = options.timeout) != null ? _a2 : this.timeout;
        const httpAgent = (_c = (_b = options.httpAgent) != null ? _b : this.httpAgent) != null ? _c : getDefaultAgent(url);
        const minAgentTimeout = timeout + 1e3;
        if (typeof ((_d = httpAgent == null ? void 0 : httpAgent.options) == null ? void 0 : _d.timeout) === "number" && minAgentTimeout > ((_e = httpAgent.options.timeout) != null ? _e : 0)) {
          httpAgent.options.timeout = minAgentTimeout;
        }
        if (this.idempotencyHeader && method !== "get") {
          if (!options.idempotencyKey)
            options.idempotencyKey = this.defaultIdempotencyKey();
          headers[this.idempotencyHeader] = options.idempotencyKey;
        }
        const reqHeaders = this.buildHeaders({ options, headers, contentLength, retryCount });
        const req = {
          method,
          ...body && { body },
          headers: reqHeaders,
          ...httpAgent && { agent: httpAgent },
          // @ts-ignore node-fetch uses a custom AbortSignal type that is
          // not compatible with standard web types
          signal: (_f = options.signal) != null ? _f : null
        };
        return { req, url, timeout };
      }
      buildHeaders({ options, headers, contentLength, retryCount }) {
        const reqHeaders = {};
        if (contentLength) {
          reqHeaders["content-length"] = contentLength;
        }
        const defaultHeaders = this.defaultHeaders(options);
        applyHeadersMut(reqHeaders, defaultHeaders);
        applyHeadersMut(reqHeaders, headers);
        if (isMultipartBody(options.body) && kind !== "node") {
          delete reqHeaders["content-type"];
        }
        if (getHeader(defaultHeaders, "x-stainless-retry-count") === void 0 && getHeader(headers, "x-stainless-retry-count") === void 0) {
          reqHeaders["x-stainless-retry-count"] = String(retryCount);
        }
        this.validateHeaders(reqHeaders, headers);
        return reqHeaders;
      }
      /**
       * Used as a callback for mutating the given `FinalRequestOptions` object.
       */
      async prepareOptions(options) {
      }
      /**
       * Used as a callback for mutating the given `RequestInit` object.
       *
       * This is useful for cases where you want to add certain headers based off of
       * the request properties, e.g. `method` or `url`.
       */
      async prepareRequest(request, { url, options }) {
      }
      parseHeaders(headers) {
        return !headers ? {} : Symbol.iterator in headers ? Object.fromEntries(Array.from(headers).map((header) => [...header])) : { ...headers };
      }
      makeStatusError(status, error, message, headers) {
        return APIError.generate(status, error, message, headers);
      }
      request(options, remainingRetries = null) {
        return new APIPromise(this.makeRequest(options, remainingRetries));
      }
      async makeRequest(optionsInput, retriesRemaining) {
        var _a2, _b, _c;
        const options = await optionsInput;
        const maxRetries = (_a2 = options.maxRetries) != null ? _a2 : this.maxRetries;
        if (retriesRemaining == null) {
          retriesRemaining = maxRetries;
        }
        await this.prepareOptions(options);
        const { req, url, timeout } = this.buildRequest(options, { retryCount: maxRetries - retriesRemaining });
        await this.prepareRequest(req, { url, options });
        debug("request", url, options, req.headers);
        if ((_b = options.signal) == null ? void 0 : _b.aborted) {
          throw new APIUserAbortError();
        }
        const controller = new AbortController();
        const response = await this.fetchWithTimeout(url, req, timeout, controller).catch(castToError);
        if (response instanceof Error) {
          if ((_c = options.signal) == null ? void 0 : _c.aborted) {
            throw new APIUserAbortError();
          }
          if (retriesRemaining) {
            return this.retryRequest(options, retriesRemaining);
          }
          if (response.name === "AbortError") {
            throw new APIConnectionTimeoutError();
          }
          throw new APIConnectionError({ cause: response });
        }
        const responseHeaders = createResponseHeaders(response.headers);
        if (!response.ok) {
          if (retriesRemaining && this.shouldRetry(response)) {
            const retryMessage2 = `retrying, ${retriesRemaining} attempts remaining`;
            debug(`response (error; ${retryMessage2})`, response.status, url, responseHeaders);
            return this.retryRequest(options, retriesRemaining, responseHeaders);
          }
          const errText = await response.text().catch((e) => castToError(e).message);
          const errJSON = safeJSON(errText);
          const errMessage = errJSON ? void 0 : errText;
          const retryMessage = retriesRemaining ? `(error; no more retries left)` : `(error; not retryable)`;
          debug(`response (error; ${retryMessage})`, response.status, url, responseHeaders, errMessage);
          const err = this.makeStatusError(response.status, errJSON, errMessage, responseHeaders);
          throw err;
        }
        return { response, options, controller };
      }
      requestAPIList(Page2, options) {
        const request = this.makeRequest(options, null);
        return new PagePromise(this, request, Page2);
      }
      buildURL(path, query) {
        const url = isAbsoluteURL(path) ? new URL(path) : new URL(this.baseURL + (this.baseURL.endsWith("/") && path.startsWith("/") ? path.slice(1) : path));
        const defaultQuery = this.defaultQuery();
        if (!isEmptyObj(defaultQuery)) {
          query = { ...defaultQuery, ...query };
        }
        if (typeof query === "object" && query && !Array.isArray(query)) {
          url.search = this.stringifyQuery(query);
        }
        return url.toString();
      }
      stringifyQuery(query) {
        return Object.entries(query).filter(([_, value]) => typeof value !== "undefined").map(([key, value]) => {
          if (typeof value === "string" || typeof value === "number" || typeof value === "boolean") {
            return `${encodeURIComponent(key)}=${encodeURIComponent(value)}`;
          }
          if (value === null) {
            return `${encodeURIComponent(key)}=`;
          }
          throw new AnthropicError(`Cannot stringify type ${typeof value}; Expected string, number, boolean, or null. If you need to pass nested query parameters, you can manually encode them, e.g. { query: { 'foo[key1]': value1, 'foo[key2]': value2 } }, and please open a GitHub issue requesting better support for your use case.`);
        }).join("&");
      }
      async fetchWithTimeout(url, init, ms, controller) {
        const { signal, ...options } = init || {};
        if (signal)
          signal.addEventListener("abort", () => controller.abort());
        const timeout = setTimeout(() => controller.abort(), ms);
        const fetchOptions = {
          signal: controller.signal,
          ...options
        };
        if (fetchOptions.method) {
          fetchOptions.method = fetchOptions.method.toUpperCase();
        }
        return (
          // use undefined this binding; fetch errors if bound to something else in browser/cloudflare
          this.fetch.call(void 0, url, fetchOptions).finally(() => {
            clearTimeout(timeout);
          })
        );
      }
      shouldRetry(response) {
        const shouldRetryHeader = response.headers.get("x-should-retry");
        if (shouldRetryHeader === "true")
          return true;
        if (shouldRetryHeader === "false")
          return false;
        if (response.status === 408)
          return true;
        if (response.status === 409)
          return true;
        if (response.status === 429)
          return true;
        if (response.status >= 500)
          return true;
        return false;
      }
      async retryRequest(options, retriesRemaining, responseHeaders) {
        var _a2;
        let timeoutMillis;
        const retryAfterMillisHeader = responseHeaders == null ? void 0 : responseHeaders["retry-after-ms"];
        if (retryAfterMillisHeader) {
          const timeoutMs = parseFloat(retryAfterMillisHeader);
          if (!Number.isNaN(timeoutMs)) {
            timeoutMillis = timeoutMs;
          }
        }
        const retryAfterHeader = responseHeaders == null ? void 0 : responseHeaders["retry-after"];
        if (retryAfterHeader && !timeoutMillis) {
          const timeoutSeconds = parseFloat(retryAfterHeader);
          if (!Number.isNaN(timeoutSeconds)) {
            timeoutMillis = timeoutSeconds * 1e3;
          } else {
            timeoutMillis = Date.parse(retryAfterHeader) - Date.now();
          }
        }
        if (!(timeoutMillis && 0 <= timeoutMillis && timeoutMillis < 60 * 1e3)) {
          const maxRetries = (_a2 = options.maxRetries) != null ? _a2 : this.maxRetries;
          timeoutMillis = this.calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries);
        }
        await sleep(timeoutMillis);
        return this.makeRequest(options, retriesRemaining - 1);
      }
      calculateDefaultRetryTimeoutMillis(retriesRemaining, maxRetries) {
        const initialRetryDelay = 0.5;
        const maxRetryDelay = 8;
        const numRetries = maxRetries - retriesRemaining;
        const sleepSeconds = Math.min(initialRetryDelay * Math.pow(2, numRetries), maxRetryDelay);
        const jitter = 1 - Math.random() * 0.25;
        return sleepSeconds * jitter * 1e3;
      }
      getUserAgent() {
        return `${this.constructor.name}/JS ${VERSION}`;
      }
    };
    AbstractPage = class {
      constructor(client, response, body, options) {
        _AbstractPage_client.set(this, void 0);
        __classPrivateFieldSet(this, _AbstractPage_client, client, "f");
        this.options = options;
        this.response = response;
        this.body = body;
      }
      hasNextPage() {
        const items = this.getPaginatedItems();
        if (!items.length)
          return false;
        return this.nextPageInfo() != null;
      }
      async getNextPage() {
        const nextInfo = this.nextPageInfo();
        if (!nextInfo) {
          throw new AnthropicError("No next page expected; please check `.hasNextPage()` before calling `.getNextPage()`.");
        }
        const nextOptions = { ...this.options };
        if ("params" in nextInfo && typeof nextOptions.query === "object") {
          nextOptions.query = { ...nextOptions.query, ...nextInfo.params };
        } else if ("url" in nextInfo) {
          const params = [...Object.entries(nextOptions.query || {}), ...nextInfo.url.searchParams.entries()];
          for (const [key, value] of params) {
            nextInfo.url.searchParams.set(key, value);
          }
          nextOptions.query = void 0;
          nextOptions.path = nextInfo.url.toString();
        }
        return await __classPrivateFieldGet(this, _AbstractPage_client, "f").requestAPIList(this.constructor, nextOptions);
      }
      async *iterPages() {
        let page = this;
        yield page;
        while (page.hasNextPage()) {
          page = await page.getNextPage();
          yield page;
        }
      }
      async *[(_AbstractPage_client = /* @__PURE__ */ new WeakMap(), Symbol.asyncIterator)]() {
        for await (const page of this.iterPages()) {
          for (const item of page.getPaginatedItems()) {
            yield item;
          }
        }
      }
    };
    PagePromise = class extends APIPromise {
      constructor(client, request, Page2) {
        super(request, async (props) => new Page2(client, props.response, await defaultParseResponse(props), props.options));
      }
      /**
       * Allow auto-paginating iteration on an unawaited list call, eg:
       *
       *    for await (const item of client.items.list()) {
       *      console.log(item)
       *    }
       */
      async *[Symbol.asyncIterator]() {
        const page = await this;
        for await (const item of page) {
          yield item;
        }
      }
    };
    createResponseHeaders = (headers) => {
      return new Proxy(Object.fromEntries(
        // @ts-ignore
        headers.entries()
      ), {
        get(target, name) {
          const key = name.toString();
          return target[key.toLowerCase()] || target[key];
        }
      });
    };
    requestOptionsKeys = {
      method: true,
      path: true,
      query: true,
      body: true,
      headers: true,
      maxRetries: true,
      stream: true,
      timeout: true,
      httpAgent: true,
      signal: true,
      idempotencyKey: true,
      __binaryRequest: true,
      __binaryResponse: true,
      __streamClass: true
    };
    isRequestOptions = (obj) => {
      return typeof obj === "object" && obj !== null && !isEmptyObj(obj) && Object.keys(obj).every((k) => hasOwn(requestOptionsKeys, k));
    };
    getPlatformProperties = () => {
      var _a2, _b;
      if (typeof Deno !== "undefined" && Deno.build != null) {
        return {
          "X-Stainless-Lang": "js",
          "X-Stainless-Package-Version": VERSION,
          "X-Stainless-OS": normalizePlatform(Deno.build.os),
          "X-Stainless-Arch": normalizeArch(Deno.build.arch),
          "X-Stainless-Runtime": "deno",
          "X-Stainless-Runtime-Version": typeof Deno.version === "string" ? Deno.version : (_b = (_a2 = Deno.version) == null ? void 0 : _a2.deno) != null ? _b : "unknown"
        };
      }
      if (typeof EdgeRuntime !== "undefined") {
        return {
          "X-Stainless-Lang": "js",
          "X-Stainless-Package-Version": VERSION,
          "X-Stainless-OS": "Unknown",
          "X-Stainless-Arch": `other:${EdgeRuntime}`,
          "X-Stainless-Runtime": "edge",
          "X-Stainless-Runtime-Version": process.version
        };
      }
      if (Object.prototype.toString.call(typeof process !== "undefined" ? process : 0) === "[object process]") {
        return {
          "X-Stainless-Lang": "js",
          "X-Stainless-Package-Version": VERSION,
          "X-Stainless-OS": normalizePlatform(process.platform),
          "X-Stainless-Arch": normalizeArch(process.arch),
          "X-Stainless-Runtime": "node",
          "X-Stainless-Runtime-Version": process.version
        };
      }
      const browserInfo = getBrowserInfo();
      if (browserInfo) {
        return {
          "X-Stainless-Lang": "js",
          "X-Stainless-Package-Version": VERSION,
          "X-Stainless-OS": "Unknown",
          "X-Stainless-Arch": "unknown",
          "X-Stainless-Runtime": `browser:${browserInfo.browser}`,
          "X-Stainless-Runtime-Version": browserInfo.version
        };
      }
      return {
        "X-Stainless-Lang": "js",
        "X-Stainless-Package-Version": VERSION,
        "X-Stainless-OS": "Unknown",
        "X-Stainless-Arch": "unknown",
        "X-Stainless-Runtime": "unknown",
        "X-Stainless-Runtime-Version": "unknown"
      };
    };
    normalizeArch = (arch) => {
      if (arch === "x32")
        return "x32";
      if (arch === "x86_64" || arch === "x64")
        return "x64";
      if (arch === "arm")
        return "arm";
      if (arch === "aarch64" || arch === "arm64")
        return "arm64";
      if (arch)
        return `other:${arch}`;
      return "unknown";
    };
    normalizePlatform = (platform) => {
      platform = platform.toLowerCase();
      if (platform.includes("ios"))
        return "iOS";
      if (platform === "android")
        return "Android";
      if (platform === "darwin")
        return "MacOS";
      if (platform === "win32")
        return "Windows";
      if (platform === "freebsd")
        return "FreeBSD";
      if (platform === "openbsd")
        return "OpenBSD";
      if (platform === "linux")
        return "Linux";
      if (platform)
        return `Other:${platform}`;
      return "Unknown";
    };
    getPlatformHeaders = () => {
      return _platformHeaders != null ? _platformHeaders : _platformHeaders = getPlatformProperties();
    };
    safeJSON = (text) => {
      try {
        return JSON.parse(text);
      } catch (err) {
        return void 0;
      }
    };
    startsWithSchemeRegexp = /^[a-z][a-z0-9+.-]*:/i;
    isAbsoluteURL = (url) => {
      return startsWithSchemeRegexp.test(url);
    };
    sleep = (ms) => new Promise((resolve) => setTimeout(resolve, ms));
    validatePositiveInteger = (name, n) => {
      if (typeof n !== "number" || !Number.isInteger(n)) {
        throw new AnthropicError(`${name} must be an integer`);
      }
      if (n < 0) {
        throw new AnthropicError(`${name} must be a positive integer`);
      }
      return n;
    };
    castToError = (err) => {
      if (err instanceof Error)
        return err;
      if (typeof err === "object" && err !== null) {
        try {
          return new Error(JSON.stringify(err));
        } catch (e) {
        }
      }
      return new Error(String(err));
    };
    readEnv = (env) => {
      var _a2, _b, _c, _d, _e, _f;
      if (typeof process !== "undefined") {
        return (_c = (_b = (_a2 = process.env) == null ? void 0 : _a2[env]) == null ? void 0 : _b.trim()) != null ? _c : void 0;
      }
      if (typeof Deno !== "undefined") {
        return (_f = (_e = (_d = Deno.env) == null ? void 0 : _d.get) == null ? void 0 : _e.call(_d, env)) == null ? void 0 : _f.trim();
      }
      return void 0;
    };
    uuid4 = () => {
      return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g, (c) => {
        const r = Math.random() * 16 | 0;
        const v = c === "x" ? r : r & 3 | 8;
        return v.toString(16);
      });
    };
    isRunningInBrowser = () => {
      return (
        // @ts-ignore
        typeof window !== "undefined" && // @ts-ignore
        typeof window.document !== "undefined" && // @ts-ignore
        typeof navigator !== "undefined"
      );
    };
    isHeadersProtocol = (headers) => {
      return typeof (headers == null ? void 0 : headers.get) === "function";
    };
    getHeader = (headers, header) => {
      var _a2;
      const lowerCasedHeader = header.toLowerCase();
      if (isHeadersProtocol(headers)) {
        const intercapsHeader = ((_a2 = header[0]) == null ? void 0 : _a2.toUpperCase()) + header.substring(1).replace(/([^\w])(\w)/g, (_m, g1, g2) => g1 + g2.toUpperCase());
        for (const key of [header, lowerCasedHeader, header.toUpperCase(), intercapsHeader]) {
          const value = headers.get(key);
          if (value) {
            return value;
          }
        }
      }
      for (const [key, value] of Object.entries(headers)) {
        if (key.toLowerCase() === lowerCasedHeader) {
          if (Array.isArray(value)) {
            if (value.length <= 1)
              return value[0];
            console.warn(`Received ${value.length} entries for the ${header} header, using the first entry.`);
            return value[0];
          }
          return value;
        }
      }
      return void 0;
    };
  }
});

// node_modules/@anthropic-ai/sdk/pagination.mjs
var Page;
var init_pagination = __esm({
  "node_modules/@anthropic-ai/sdk/pagination.mjs"() {
    init_core();
    Page = class extends AbstractPage {
      constructor(client, response, body, options) {
        super(client, response, body, options);
        this.data = body.data || [];
        this.has_more = body.has_more || false;
        this.first_id = body.first_id || null;
        this.last_id = body.last_id || null;
      }
      getPaginatedItems() {
        var _a2;
        return (_a2 = this.data) != null ? _a2 : [];
      }
      // @deprecated Please use `nextPageInfo()` instead
      nextPageParams() {
        const info = this.nextPageInfo();
        if (!info)
          return null;
        if ("params" in info)
          return info.params;
        const params = Object.fromEntries(info.url.searchParams);
        if (!Object.keys(params).length)
          return null;
        return params;
      }
      nextPageInfo() {
        var _a2;
        if ((_a2 = this.options.query) == null ? void 0 : _a2["before_id"]) {
          const firstId = this.first_id;
          if (!firstId) {
            return null;
          }
          return {
            params: {
              before_id: firstId
            }
          };
        }
        const cursor = this.last_id;
        if (!cursor) {
          return null;
        }
        return {
          params: {
            after_id: cursor
          }
        };
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/resources/shared.mjs
var init_shared = __esm({
  "node_modules/@anthropic-ai/sdk/resources/shared.mjs"() {
  }
});

// node_modules/@anthropic-ai/sdk/resource.mjs
var APIResource;
var init_resource = __esm({
  "node_modules/@anthropic-ai/sdk/resource.mjs"() {
    APIResource = class {
      constructor(client) {
        this._client = client;
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/resources/beta/models.mjs
var Models, BetaModelInfosPage;
var init_models = __esm({
  "node_modules/@anthropic-ai/sdk/resources/beta/models.mjs"() {
    init_resource();
    init_core();
    init_pagination();
    Models = class extends APIResource {
      /**
       * Get a specific model.
       *
       * The Models API response can be used to determine information about a specific
       * model or resolve a model alias to a model ID.
       */
      retrieve(modelId, options) {
        return this._client.get(`/v1/models/${modelId}?beta=true`, options);
      }
      list(query = {}, options) {
        if (isRequestOptions(query)) {
          return this.list({}, query);
        }
        return this._client.getAPIList("/v1/models?beta=true", BetaModelInfosPage, { query, ...options });
      }
    };
    BetaModelInfosPage = class extends Page {
    };
    Models.BetaModelInfosPage = BetaModelInfosPage;
  }
});

// node_modules/@anthropic-ai/sdk/internal/decoders/jsonl.mjs
var JSONLDecoder;
var init_jsonl = __esm({
  "node_modules/@anthropic-ai/sdk/internal/decoders/jsonl.mjs"() {
    init_error();
    init_stream_utils();
    init_line();
    JSONLDecoder = class _JSONLDecoder {
      constructor(iterator, controller) {
        this.iterator = iterator;
        this.controller = controller;
      }
      async *decoder() {
        const lineDecoder = new LineDecoder();
        for await (const chunk of this.iterator) {
          for (const line of lineDecoder.decode(chunk)) {
            yield JSON.parse(line);
          }
        }
        for (const line of lineDecoder.flush()) {
          yield JSON.parse(line);
        }
      }
      [Symbol.asyncIterator]() {
        return this.decoder();
      }
      static fromResponse(response, controller) {
        if (!response.body) {
          controller.abort();
          throw new AnthropicError(`Attempted to iterate over a response with no body`);
        }
        return new _JSONLDecoder(ReadableStreamToAsyncIterable(response.body), controller);
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/resources/beta/messages/batches.mjs
var Batches, BetaMessageBatchesPage;
var init_batches = __esm({
  "node_modules/@anthropic-ai/sdk/resources/beta/messages/batches.mjs"() {
    init_resource();
    init_core();
    init_pagination();
    init_jsonl();
    init_error();
    Batches = class extends APIResource {
      /**
       * Send a batch of Message creation requests.
       *
       * The Message Batches API can be used to process multiple Messages API requests at
       * once. Once a Message Batch is created, it begins processing immediately. Batches
       * can take up to 24 hours to complete.
       */
      create(params, options) {
        const { betas, ...body } = params;
        return this._client.post("/v1/messages/batches?beta=true", {
          body,
          ...options,
          headers: {
            "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
            ...options == null ? void 0 : options.headers
          }
        });
      }
      retrieve(messageBatchId, params = {}, options) {
        if (isRequestOptions(params)) {
          return this.retrieve(messageBatchId, {}, params);
        }
        const { betas } = params;
        return this._client.get(`/v1/messages/batches/${messageBatchId}?beta=true`, {
          ...options,
          headers: {
            "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
            ...options == null ? void 0 : options.headers
          }
        });
      }
      list(params = {}, options) {
        if (isRequestOptions(params)) {
          return this.list({}, params);
        }
        const { betas, ...query } = params;
        return this._client.getAPIList("/v1/messages/batches?beta=true", BetaMessageBatchesPage, {
          query,
          ...options,
          headers: {
            "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
            ...options == null ? void 0 : options.headers
          }
        });
      }
      delete(messageBatchId, params = {}, options) {
        if (isRequestOptions(params)) {
          return this.delete(messageBatchId, {}, params);
        }
        const { betas } = params;
        return this._client.delete(`/v1/messages/batches/${messageBatchId}?beta=true`, {
          ...options,
          headers: {
            "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
            ...options == null ? void 0 : options.headers
          }
        });
      }
      cancel(messageBatchId, params = {}, options) {
        if (isRequestOptions(params)) {
          return this.cancel(messageBatchId, {}, params);
        }
        const { betas } = params;
        return this._client.post(`/v1/messages/batches/${messageBatchId}/cancel?beta=true`, {
          ...options,
          headers: {
            "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
            ...options == null ? void 0 : options.headers
          }
        });
      }
      async results(messageBatchId, params = {}, options) {
        if (isRequestOptions(params)) {
          return this.results(messageBatchId, {}, params);
        }
        const batch = await this.retrieve(messageBatchId);
        if (!batch.results_url) {
          throw new AnthropicError(`No batch \`results_url\`; Has it finished processing? ${batch.processing_status} - ${batch.id}`);
        }
        const { betas } = params;
        return this._client.get(batch.results_url, {
          ...options,
          headers: {
            "anthropic-beta": [...betas != null ? betas : [], "message-batches-2024-09-24"].toString(),
            Accept: "application/binary",
            ...options == null ? void 0 : options.headers
          },
          __binaryResponse: true
        })._thenUnwrap((_, props) => JSONLDecoder.fromResponse(props.response, props.controller));
      }
    };
    BetaMessageBatchesPage = class extends Page {
    };
    Batches.BetaMessageBatchesPage = BetaMessageBatchesPage;
  }
});

// node_modules/@anthropic-ai/sdk/_vendor/partial-json-parser/parser.mjs
var tokenize, strip, unstrip, generate, partialParse;
var init_parser = __esm({
  "node_modules/@anthropic-ai/sdk/_vendor/partial-json-parser/parser.mjs"() {
    tokenize = (input) => {
      let current = 0;
      let tokens = [];
      while (current < input.length) {
        let char = input[current];
        if (char === "\\") {
          current++;
          continue;
        }
        if (char === "{") {
          tokens.push({
            type: "brace",
            value: "{"
          });
          current++;
          continue;
        }
        if (char === "}") {
          tokens.push({
            type: "brace",
            value: "}"
          });
          current++;
          continue;
        }
        if (char === "[") {
          tokens.push({
            type: "paren",
            value: "["
          });
          current++;
          continue;
        }
        if (char === "]") {
          tokens.push({
            type: "paren",
            value: "]"
          });
          current++;
          continue;
        }
        if (char === ":") {
          tokens.push({
            type: "separator",
            value: ":"
          });
          current++;
          continue;
        }
        if (char === ",") {
          tokens.push({
            type: "delimiter",
            value: ","
          });
          current++;
          continue;
        }
        if (char === '"') {
          let value = "";
          let danglingQuote = false;
          char = input[++current];
          while (char !== '"') {
            if (current === input.length) {
              danglingQuote = true;
              break;
            }
            if (char === "\\") {
              current++;
              if (current === input.length) {
                danglingQuote = true;
                break;
              }
              value += char + input[current];
              char = input[++current];
            } else {
              value += char;
              char = input[++current];
            }
          }
          char = input[++current];
          if (!danglingQuote) {
            tokens.push({
              type: "string",
              value
            });
          }
          continue;
        }
        let WHITESPACE = /\s/;
        if (char && WHITESPACE.test(char)) {
          current++;
          continue;
        }
        let NUMBERS = /[0-9]/;
        if (char && NUMBERS.test(char) || char === "-" || char === ".") {
          let value = "";
          if (char === "-") {
            value += char;
            char = input[++current];
          }
          while (char && NUMBERS.test(char) || char === ".") {
            value += char;
            char = input[++current];
          }
          tokens.push({
            type: "number",
            value
          });
          continue;
        }
        let LETTERS = /[a-z]/i;
        if (char && LETTERS.test(char)) {
          let value = "";
          while (char && LETTERS.test(char)) {
            if (current === input.length) {
              break;
            }
            value += char;
            char = input[++current];
          }
          if (value == "true" || value == "false" || value === "null") {
            tokens.push({
              type: "name",
              value
            });
          } else {
            current++;
            continue;
          }
          continue;
        }
        current++;
      }
      return tokens;
    };
    strip = (tokens) => {
      if (tokens.length === 0) {
        return tokens;
      }
      let lastToken = tokens[tokens.length - 1];
      switch (lastToken.type) {
        case "separator":
          tokens = tokens.slice(0, tokens.length - 1);
          return strip(tokens);
          break;
        case "number":
          let lastCharacterOfLastToken = lastToken.value[lastToken.value.length - 1];
          if (lastCharacterOfLastToken === "." || lastCharacterOfLastToken === "-") {
            tokens = tokens.slice(0, tokens.length - 1);
            return strip(tokens);
          }
        case "string":
          let tokenBeforeTheLastToken = tokens[tokens.length - 2];
          if ((tokenBeforeTheLastToken == null ? void 0 : tokenBeforeTheLastToken.type) === "delimiter") {
            tokens = tokens.slice(0, tokens.length - 1);
            return strip(tokens);
          } else if ((tokenBeforeTheLastToken == null ? void 0 : tokenBeforeTheLastToken.type) === "brace" && tokenBeforeTheLastToken.value === "{") {
            tokens = tokens.slice(0, tokens.length - 1);
            return strip(tokens);
          }
          break;
        case "delimiter":
          tokens = tokens.slice(0, tokens.length - 1);
          return strip(tokens);
          break;
      }
      return tokens;
    };
    unstrip = (tokens) => {
      let tail = [];
      tokens.map((token) => {
        if (token.type === "brace") {
          if (token.value === "{") {
            tail.push("}");
          } else {
            tail.splice(tail.lastIndexOf("}"), 1);
          }
        }
        if (token.type === "paren") {
          if (token.value === "[") {
            tail.push("]");
          } else {
            tail.splice(tail.lastIndexOf("]"), 1);
          }
        }
      });
      if (tail.length > 0) {
        tail.reverse().map((item) => {
          if (item === "}") {
            tokens.push({
              type: "brace",
              value: "}"
            });
          } else if (item === "]") {
            tokens.push({
              type: "paren",
              value: "]"
            });
          }
        });
      }
      return tokens;
    };
    generate = (tokens) => {
      let output = "";
      tokens.map((token) => {
        switch (token.type) {
          case "string":
            output += '"' + token.value + '"';
            break;
          default:
            output += token.value;
            break;
        }
      });
      return output;
    };
    partialParse = (input) => JSON.parse(generate(unstrip(strip(tokenize(input)))));
  }
});

// node_modules/@anthropic-ai/sdk/lib/BetaMessageStream.mjs
function checkNever(x) {
}
var __classPrivateFieldSet2, __classPrivateFieldGet2, _BetaMessageStream_instances, _BetaMessageStream_currentMessageSnapshot, _BetaMessageStream_connectedPromise, _BetaMessageStream_resolveConnectedPromise, _BetaMessageStream_rejectConnectedPromise, _BetaMessageStream_endPromise, _BetaMessageStream_resolveEndPromise, _BetaMessageStream_rejectEndPromise, _BetaMessageStream_listeners, _BetaMessageStream_ended, _BetaMessageStream_errored, _BetaMessageStream_aborted, _BetaMessageStream_catchingPromiseCreated, _BetaMessageStream_response, _BetaMessageStream_request_id, _BetaMessageStream_getFinalMessage, _BetaMessageStream_getFinalText, _BetaMessageStream_handleError, _BetaMessageStream_beginRequest, _BetaMessageStream_addStreamEvent, _BetaMessageStream_endRequest, _BetaMessageStream_accumulateMessage, JSON_BUF_PROPERTY, BetaMessageStream;
var init_BetaMessageStream = __esm({
  "node_modules/@anthropic-ai/sdk/lib/BetaMessageStream.mjs"() {
    init_error();
    init_streaming();
    init_parser();
    __classPrivateFieldSet2 = function(receiver, state, value, kind2, f) {
      if (kind2 === "m") throw new TypeError("Private method is not writable");
      if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
      if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
      return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
    };
    __classPrivateFieldGet2 = function(receiver, state, kind2, f) {
      if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
      if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
      return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
    };
    JSON_BUF_PROPERTY = "__json_buf";
    BetaMessageStream = class _BetaMessageStream {
      constructor() {
        _BetaMessageStream_instances.add(this);
        this.messages = [];
        this.receivedMessages = [];
        _BetaMessageStream_currentMessageSnapshot.set(this, void 0);
        this.controller = new AbortController();
        _BetaMessageStream_connectedPromise.set(this, void 0);
        _BetaMessageStream_resolveConnectedPromise.set(this, () => {
        });
        _BetaMessageStream_rejectConnectedPromise.set(this, () => {
        });
        _BetaMessageStream_endPromise.set(this, void 0);
        _BetaMessageStream_resolveEndPromise.set(this, () => {
        });
        _BetaMessageStream_rejectEndPromise.set(this, () => {
        });
        _BetaMessageStream_listeners.set(this, {});
        _BetaMessageStream_ended.set(this, false);
        _BetaMessageStream_errored.set(this, false);
        _BetaMessageStream_aborted.set(this, false);
        _BetaMessageStream_catchingPromiseCreated.set(this, false);
        _BetaMessageStream_response.set(this, void 0);
        _BetaMessageStream_request_id.set(this, void 0);
        _BetaMessageStream_handleError.set(this, (error) => {
          __classPrivateFieldSet2(this, _BetaMessageStream_errored, true, "f");
          if (error instanceof Error && error.name === "AbortError") {
            error = new APIUserAbortError();
          }
          if (error instanceof APIUserAbortError) {
            __classPrivateFieldSet2(this, _BetaMessageStream_aborted, true, "f");
            return this._emit("abort", error);
          }
          if (error instanceof AnthropicError) {
            return this._emit("error", error);
          }
          if (error instanceof Error) {
            const anthropicError = new AnthropicError(error.message);
            anthropicError.cause = error;
            return this._emit("error", anthropicError);
          }
          return this._emit("error", new AnthropicError(String(error)));
        });
        __classPrivateFieldSet2(this, _BetaMessageStream_connectedPromise, new Promise((resolve, reject) => {
          __classPrivateFieldSet2(this, _BetaMessageStream_resolveConnectedPromise, resolve, "f");
          __classPrivateFieldSet2(this, _BetaMessageStream_rejectConnectedPromise, reject, "f");
        }), "f");
        __classPrivateFieldSet2(this, _BetaMessageStream_endPromise, new Promise((resolve, reject) => {
          __classPrivateFieldSet2(this, _BetaMessageStream_resolveEndPromise, resolve, "f");
          __classPrivateFieldSet2(this, _BetaMessageStream_rejectEndPromise, reject, "f");
        }), "f");
        __classPrivateFieldGet2(this, _BetaMessageStream_connectedPromise, "f").catch(() => {
        });
        __classPrivateFieldGet2(this, _BetaMessageStream_endPromise, "f").catch(() => {
        });
      }
      get response() {
        return __classPrivateFieldGet2(this, _BetaMessageStream_response, "f");
      }
      get request_id() {
        return __classPrivateFieldGet2(this, _BetaMessageStream_request_id, "f");
      }
      /**
       * Returns the `MessageStream` data, the raw `Response` instance and the ID of the request,
       * returned vie the `request-id` header which is useful for debugging requests and resporting
       * issues to Anthropic.
       *
       * This is the same as the `APIPromise.withResponse()` method.
       *
       * This method will raise an error if you created the stream using `MessageStream.fromReadableStream`
       * as no `Response` is available.
       */
      async withResponse() {
        const response = await __classPrivateFieldGet2(this, _BetaMessageStream_connectedPromise, "f");
        if (!response) {
          throw new Error("Could not resolve a `Response` object");
        }
        return {
          data: this,
          response,
          request_id: response.headers.get("request-id")
        };
      }
      /**
       * Intended for use on the frontend, consuming a stream produced with
       * `.toReadableStream()` on the backend.
       *
       * Note that messages sent to the model do not appear in `.on('message')`
       * in this context.
       */
      static fromReadableStream(stream) {
        const runner = new _BetaMessageStream();
        runner._run(() => runner._fromReadableStream(stream));
        return runner;
      }
      static createMessage(messages, params, options) {
        const runner = new _BetaMessageStream();
        for (const message of params.messages) {
          runner._addMessageParam(message);
        }
        runner._run(() => runner._createMessage(messages, { ...params, stream: true }, { ...options, headers: { ...options == null ? void 0 : options.headers, "X-Stainless-Helper-Method": "stream" } }));
        return runner;
      }
      _run(executor) {
        executor().then(() => {
          this._emitFinal();
          this._emit("end");
        }, __classPrivateFieldGet2(this, _BetaMessageStream_handleError, "f"));
      }
      _addMessageParam(message) {
        this.messages.push(message);
      }
      _addMessage(message, emit = true) {
        this.receivedMessages.push(message);
        if (emit) {
          this._emit("message", message);
        }
      }
      async _createMessage(messages, params, options) {
        var _a2;
        const signal = options == null ? void 0 : options.signal;
        if (signal) {
          if (signal.aborted)
            this.controller.abort();
          signal.addEventListener("abort", () => this.controller.abort());
        }
        __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_beginRequest).call(this);
        const { response, data: stream } = await messages.create({ ...params, stream: true }, { ...options, signal: this.controller.signal }).withResponse();
        this._connected(response);
        for await (const event of stream) {
          __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_addStreamEvent).call(this, event);
        }
        if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
          throw new APIUserAbortError();
        }
        __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_endRequest).call(this);
      }
      _connected(response) {
        if (this.ended)
          return;
        __classPrivateFieldSet2(this, _BetaMessageStream_response, response, "f");
        __classPrivateFieldSet2(this, _BetaMessageStream_request_id, response == null ? void 0 : response.headers.get("request-id"), "f");
        __classPrivateFieldGet2(this, _BetaMessageStream_resolveConnectedPromise, "f").call(this, response);
        this._emit("connect");
      }
      get ended() {
        return __classPrivateFieldGet2(this, _BetaMessageStream_ended, "f");
      }
      get errored() {
        return __classPrivateFieldGet2(this, _BetaMessageStream_errored, "f");
      }
      get aborted() {
        return __classPrivateFieldGet2(this, _BetaMessageStream_aborted, "f");
      }
      abort() {
        this.controller.abort();
      }
      /**
       * Adds the listener function to the end of the listeners array for the event.
       * No checks are made to see if the listener has already been added. Multiple calls passing
       * the same combination of event and listener will result in the listener being added, and
       * called, multiple times.
       * @returns this MessageStream, so that calls can be chained
       */
      on(event, listener) {
        const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] || (__classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] = []);
        listeners.push({ listener });
        return this;
      }
      /**
       * Removes the specified listener from the listener array for the event.
       * off() will remove, at most, one instance of a listener from the listener array. If any single
       * listener has been added multiple times to the listener array for the specified event, then
       * off() must be called multiple times to remove each instance.
       * @returns this MessageStream, so that calls can be chained
       */
      off(event, listener) {
        const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event];
        if (!listeners)
          return this;
        const index = listeners.findIndex((l) => l.listener === listener);
        if (index >= 0)
          listeners.splice(index, 1);
        return this;
      }
      /**
       * Adds a one-time listener function for the event. The next time the event is triggered,
       * this listener is removed and then invoked.
       * @returns this MessageStream, so that calls can be chained
       */
      once(event, listener) {
        const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] || (__classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] = []);
        listeners.push({ listener, once: true });
        return this;
      }
      /**
       * This is similar to `.once()`, but returns a Promise that resolves the next time
       * the event is triggered, instead of calling a listener callback.
       * @returns a Promise that resolves the next time given event is triggered,
       * or rejects if an error is emitted.  (If you request the 'error' event,
       * returns a promise that resolves with the error).
       *
       * Example:
       *
       *   const message = await stream.emitted('message') // rejects if the stream errors
       */
      emitted(event) {
        return new Promise((resolve, reject) => {
          __classPrivateFieldSet2(this, _BetaMessageStream_catchingPromiseCreated, true, "f");
          if (event !== "error")
            this.once("error", reject);
          this.once(event, resolve);
        });
      }
      async done() {
        __classPrivateFieldSet2(this, _BetaMessageStream_catchingPromiseCreated, true, "f");
        await __classPrivateFieldGet2(this, _BetaMessageStream_endPromise, "f");
      }
      get currentMessage() {
        return __classPrivateFieldGet2(this, _BetaMessageStream_currentMessageSnapshot, "f");
      }
      /**
       * @returns a promise that resolves with the the final assistant Message response,
       * or rejects if an error occurred or the stream ended prematurely without producing a Message.
       */
      async finalMessage() {
        await this.done();
        return __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_getFinalMessage).call(this);
      }
      /**
       * @returns a promise that resolves with the the final assistant Message's text response, concatenated
       * together if there are more than one text blocks.
       * Rejects if an error occurred or the stream ended prematurely without producing a Message.
       */
      async finalText() {
        await this.done();
        return __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_getFinalText).call(this);
      }
      _emit(event, ...args) {
        if (__classPrivateFieldGet2(this, _BetaMessageStream_ended, "f"))
          return;
        if (event === "end") {
          __classPrivateFieldSet2(this, _BetaMessageStream_ended, true, "f");
          __classPrivateFieldGet2(this, _BetaMessageStream_resolveEndPromise, "f").call(this);
        }
        const listeners = __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event];
        if (listeners) {
          __classPrivateFieldGet2(this, _BetaMessageStream_listeners, "f")[event] = listeners.filter((l) => !l.once);
          listeners.forEach(({ listener }) => listener(...args));
        }
        if (event === "abort") {
          const error = args[0];
          if (!__classPrivateFieldGet2(this, _BetaMessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
            Promise.reject(error);
          }
          __classPrivateFieldGet2(this, _BetaMessageStream_rejectConnectedPromise, "f").call(this, error);
          __classPrivateFieldGet2(this, _BetaMessageStream_rejectEndPromise, "f").call(this, error);
          this._emit("end");
          return;
        }
        if (event === "error") {
          const error = args[0];
          if (!__classPrivateFieldGet2(this, _BetaMessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
            Promise.reject(error);
          }
          __classPrivateFieldGet2(this, _BetaMessageStream_rejectConnectedPromise, "f").call(this, error);
          __classPrivateFieldGet2(this, _BetaMessageStream_rejectEndPromise, "f").call(this, error);
          this._emit("end");
        }
      }
      _emitFinal() {
        const finalMessage = this.receivedMessages.at(-1);
        if (finalMessage) {
          this._emit("finalMessage", __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_getFinalMessage).call(this));
        }
      }
      async _fromReadableStream(readableStream, options) {
        var _a2;
        const signal = options == null ? void 0 : options.signal;
        if (signal) {
          if (signal.aborted)
            this.controller.abort();
          signal.addEventListener("abort", () => this.controller.abort());
        }
        __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_beginRequest).call(this);
        this._connected(null);
        const stream = Stream.fromReadableStream(readableStream, this.controller);
        for await (const event of stream) {
          __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_addStreamEvent).call(this, event);
        }
        if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
          throw new APIUserAbortError();
        }
        __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_endRequest).call(this);
      }
      [(_BetaMessageStream_currentMessageSnapshot = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_connectedPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_resolveConnectedPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_rejectConnectedPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_endPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_resolveEndPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_rejectEndPromise = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_listeners = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_ended = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_errored = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_aborted = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_catchingPromiseCreated = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_response = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_request_id = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_handleError = /* @__PURE__ */ new WeakMap(), _BetaMessageStream_instances = /* @__PURE__ */ new WeakSet(), _BetaMessageStream_getFinalMessage = function _BetaMessageStream_getFinalMessage2() {
        if (this.receivedMessages.length === 0) {
          throw new AnthropicError("stream ended without producing a Message with role=assistant");
        }
        return this.receivedMessages.at(-1);
      }, _BetaMessageStream_getFinalText = function _BetaMessageStream_getFinalText2() {
        if (this.receivedMessages.length === 0) {
          throw new AnthropicError("stream ended without producing a Message with role=assistant");
        }
        const textBlocks = this.receivedMessages.at(-1).content.filter((block) => block.type === "text").map((block) => block.text);
        if (textBlocks.length === 0) {
          throw new AnthropicError("stream ended without producing a content block with type=text");
        }
        return textBlocks.join(" ");
      }, _BetaMessageStream_beginRequest = function _BetaMessageStream_beginRequest2() {
        if (this.ended)
          return;
        __classPrivateFieldSet2(this, _BetaMessageStream_currentMessageSnapshot, void 0, "f");
      }, _BetaMessageStream_addStreamEvent = function _BetaMessageStream_addStreamEvent2(event) {
        var _a2;
        if (this.ended)
          return;
        const messageSnapshot = __classPrivateFieldGet2(this, _BetaMessageStream_instances, "m", _BetaMessageStream_accumulateMessage).call(this, event);
        this._emit("streamEvent", event, messageSnapshot);
        switch (event.type) {
          case "content_block_delta": {
            const content = messageSnapshot.content.at(-1);
            switch (event.delta.type) {
              case "text_delta": {
                if (content.type === "text") {
                  this._emit("text", event.delta.text, content.text || "");
                }
                break;
              }
              case "citations_delta": {
                if (content.type === "text") {
                  this._emit("citation", event.delta.citation, (_a2 = content.citations) != null ? _a2 : []);
                }
                break;
              }
              case "input_json_delta": {
                if (content.type === "tool_use" && content.input) {
                  this._emit("inputJson", event.delta.partial_json, content.input);
                }
                break;
              }
              default:
                checkNever(event.delta);
            }
            break;
          }
          case "message_stop": {
            this._addMessageParam(messageSnapshot);
            this._addMessage(messageSnapshot, true);
            break;
          }
          case "content_block_stop": {
            this._emit("contentBlock", messageSnapshot.content.at(-1));
            break;
          }
          case "message_start": {
            __classPrivateFieldSet2(this, _BetaMessageStream_currentMessageSnapshot, messageSnapshot, "f");
            break;
          }
          case "content_block_start":
          case "message_delta":
            break;
        }
      }, _BetaMessageStream_endRequest = function _BetaMessageStream_endRequest2() {
        if (this.ended) {
          throw new AnthropicError(`stream has ended, this shouldn't happen`);
        }
        const snapshot = __classPrivateFieldGet2(this, _BetaMessageStream_currentMessageSnapshot, "f");
        if (!snapshot) {
          throw new AnthropicError(`request ended without sending any chunks`);
        }
        __classPrivateFieldSet2(this, _BetaMessageStream_currentMessageSnapshot, void 0, "f");
        return snapshot;
      }, _BetaMessageStream_accumulateMessage = function _BetaMessageStream_accumulateMessage2(event) {
        var _a2;
        let snapshot = __classPrivateFieldGet2(this, _BetaMessageStream_currentMessageSnapshot, "f");
        if (event.type === "message_start") {
          if (snapshot) {
            throw new AnthropicError(`Unexpected event order, got ${event.type} before receiving "message_stop"`);
          }
          return event.message;
        }
        if (!snapshot) {
          throw new AnthropicError(`Unexpected event order, got ${event.type} before "message_start"`);
        }
        switch (event.type) {
          case "message_stop":
            return snapshot;
          case "message_delta":
            snapshot.stop_reason = event.delta.stop_reason;
            snapshot.stop_sequence = event.delta.stop_sequence;
            snapshot.usage.output_tokens = event.usage.output_tokens;
            return snapshot;
          case "content_block_start":
            snapshot.content.push(event.content_block);
            return snapshot;
          case "content_block_delta": {
            const snapshotContent = snapshot.content.at(event.index);
            switch (event.delta.type) {
              case "text_delta": {
                if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
                  snapshotContent.text += event.delta.text;
                }
                break;
              }
              case "citations_delta": {
                if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
                  (_a2 = snapshotContent.citations) != null ? _a2 : snapshotContent.citations = [];
                  snapshotContent.citations.push(event.delta.citation);
                }
                break;
              }
              case "input_json_delta": {
                if ((snapshotContent == null ? void 0 : snapshotContent.type) === "tool_use") {
                  let jsonBuf = snapshotContent[JSON_BUF_PROPERTY] || "";
                  jsonBuf += event.delta.partial_json;
                  Object.defineProperty(snapshotContent, JSON_BUF_PROPERTY, {
                    value: jsonBuf,
                    enumerable: false,
                    writable: true
                  });
                  if (jsonBuf) {
                    snapshotContent.input = partialParse(jsonBuf);
                  }
                }
                break;
              }
              default:
                checkNever(event.delta);
            }
            return snapshot;
          }
          case "content_block_stop":
            return snapshot;
        }
      }, Symbol.asyncIterator)]() {
        const pushQueue = [];
        const readQueue = [];
        let done = false;
        this.on("streamEvent", (event) => {
          const reader = readQueue.shift();
          if (reader) {
            reader.resolve(event);
          } else {
            pushQueue.push(event);
          }
        });
        this.on("end", () => {
          done = true;
          for (const reader of readQueue) {
            reader.resolve(void 0);
          }
          readQueue.length = 0;
        });
        this.on("abort", (err) => {
          done = true;
          for (const reader of readQueue) {
            reader.reject(err);
          }
          readQueue.length = 0;
        });
        this.on("error", (err) => {
          done = true;
          for (const reader of readQueue) {
            reader.reject(err);
          }
          readQueue.length = 0;
        });
        return {
          next: async () => {
            if (!pushQueue.length) {
              if (done) {
                return { value: void 0, done: true };
              }
              return new Promise((resolve, reject) => readQueue.push({ resolve, reject })).then((chunk2) => chunk2 ? { value: chunk2, done: false } : { value: void 0, done: true });
            }
            const chunk = pushQueue.shift();
            return { value: chunk, done: false };
          },
          return: async () => {
            this.abort();
            return { value: void 0, done: true };
          }
        };
      }
      toReadableStream() {
        const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);
        return stream.toReadableStream();
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/resources/beta/messages/messages.mjs
var DEPRECATED_MODELS, Messages;
var init_messages = __esm({
  "node_modules/@anthropic-ai/sdk/resources/beta/messages/messages.mjs"() {
    init_resource();
    init_batches();
    init_batches();
    init_BetaMessageStream();
    DEPRECATED_MODELS = {
      "claude-1.3": "November 6th, 2024",
      "claude-1.3-100k": "November 6th, 2024",
      "claude-instant-1.1": "November 6th, 2024",
      "claude-instant-1.1-100k": "November 6th, 2024",
      "claude-instant-1.2": "November 6th, 2024",
      "claude-3-sonnet-20240229": "July 21st, 2025",
      "claude-2.1": "July 21st, 2025",
      "claude-2.0": "July 21st, 2025"
    };
    Messages = class extends APIResource {
      constructor() {
        super(...arguments);
        this.batches = new Batches(this._client);
      }
      create(params, options) {
        var _a2, _b;
        const { betas, ...body } = params;
        if (body.model in DEPRECATED_MODELS) {
          console.warn(`The model '${body.model}' is deprecated and will reach end-of-life on ${DEPRECATED_MODELS[body.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);
        }
        return this._client.post("/v1/messages?beta=true", {
          body,
          timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
          ...options,
          headers: {
            ...(betas == null ? void 0 : betas.toString()) != null ? { "anthropic-beta": betas == null ? void 0 : betas.toString() } : void 0,
            ...options == null ? void 0 : options.headers
          },
          stream: (_b = params.stream) != null ? _b : false
        });
      }
      /**
       * Create a Message stream
       */
      stream(body, options) {
        return BetaMessageStream.createMessage(this, body, options);
      }
      /**
       * Count the number of tokens in a Message.
       *
       * The Token Count API can be used to count the number of tokens in a Message,
       * including tools, images, and documents, without creating it.
       */
      countTokens(params, options) {
        const { betas, ...body } = params;
        return this._client.post("/v1/messages/count_tokens?beta=true", {
          body,
          ...options,
          headers: {
            "anthropic-beta": [...betas != null ? betas : [], "token-counting-2024-11-01"].toString(),
            ...options == null ? void 0 : options.headers
          }
        });
      }
    };
    Messages.Batches = Batches;
    Messages.BetaMessageBatchesPage = BetaMessageBatchesPage;
  }
});

// node_modules/@anthropic-ai/sdk/resources/beta/beta.mjs
var Beta;
var init_beta = __esm({
  "node_modules/@anthropic-ai/sdk/resources/beta/beta.mjs"() {
    init_resource();
    init_models();
    init_models();
    init_messages();
    init_messages();
    Beta = class extends APIResource {
      constructor() {
        super(...arguments);
        this.models = new Models(this._client);
        this.messages = new Messages(this._client);
      }
    };
    Beta.Models = Models;
    Beta.BetaModelInfosPage = BetaModelInfosPage;
    Beta.Messages = Messages;
  }
});

// node_modules/@anthropic-ai/sdk/resources/completions.mjs
var Completions;
var init_completions = __esm({
  "node_modules/@anthropic-ai/sdk/resources/completions.mjs"() {
    init_resource();
    Completions = class extends APIResource {
      create(body, options) {
        var _a2, _b;
        return this._client.post("/v1/complete", {
          body,
          timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
          ...options,
          stream: (_b = body.stream) != null ? _b : false
        });
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/resources/messages/batches.mjs
var Batches2, MessageBatchesPage;
var init_batches2 = __esm({
  "node_modules/@anthropic-ai/sdk/resources/messages/batches.mjs"() {
    init_resource();
    init_core();
    init_pagination();
    init_jsonl();
    init_error();
    Batches2 = class extends APIResource {
      /**
       * Send a batch of Message creation requests.
       *
       * The Message Batches API can be used to process multiple Messages API requests at
       * once. Once a Message Batch is created, it begins processing immediately. Batches
       * can take up to 24 hours to complete.
       */
      create(body, options) {
        return this._client.post("/v1/messages/batches", { body, ...options });
      }
      /**
       * This endpoint is idempotent and can be used to poll for Message Batch
       * completion. To access the results of a Message Batch, make a request to the
       * `results_url` field in the response.
       */
      retrieve(messageBatchId, options) {
        return this._client.get(`/v1/messages/batches/${messageBatchId}`, options);
      }
      list(query = {}, options) {
        if (isRequestOptions(query)) {
          return this.list({}, query);
        }
        return this._client.getAPIList("/v1/messages/batches", MessageBatchesPage, { query, ...options });
      }
      /**
       * Delete a Message Batch.
       *
       * Message Batches can only be deleted once they've finished processing. If you'd
       * like to delete an in-progress batch, you must first cancel it.
       */
      delete(messageBatchId, options) {
        return this._client.delete(`/v1/messages/batches/${messageBatchId}`, options);
      }
      /**
       * Batches may be canceled any time before processing ends. Once cancellation is
       * initiated, the batch enters a `canceling` state, at which time the system may
       * complete any in-progress, non-interruptible requests before finalizing
       * cancellation.
       *
       * The number of canceled requests is specified in `request_counts`. To determine
       * which requests were canceled, check the individual results within the batch.
       * Note that cancellation may not result in any canceled requests if they were
       * non-interruptible.
       */
      cancel(messageBatchId, options) {
        return this._client.post(`/v1/messages/batches/${messageBatchId}/cancel`, options);
      }
      /**
       * Streams the results of a Message Batch as a `.jsonl` file.
       *
       * Each line in the file is a JSON object containing the result of a single request
       * in the Message Batch. Results are not guaranteed to be in the same order as
       * requests. Use the `custom_id` field to match results to requests.
       */
      async results(messageBatchId, options) {
        const batch = await this.retrieve(messageBatchId);
        if (!batch.results_url) {
          throw new AnthropicError(`No batch \`results_url\`; Has it finished processing? ${batch.processing_status} - ${batch.id}`);
        }
        return this._client.get(batch.results_url, {
          ...options,
          headers: {
            Accept: "application/binary",
            ...options == null ? void 0 : options.headers
          },
          __binaryResponse: true
        })._thenUnwrap((_, props) => JSONLDecoder.fromResponse(props.response, props.controller));
      }
    };
    MessageBatchesPage = class extends Page {
    };
    Batches2.MessageBatchesPage = MessageBatchesPage;
  }
});

// node_modules/@anthropic-ai/sdk/lib/MessageStream.mjs
function checkNever2(x) {
}
var __classPrivateFieldSet3, __classPrivateFieldGet3, _MessageStream_instances, _MessageStream_currentMessageSnapshot, _MessageStream_connectedPromise, _MessageStream_resolveConnectedPromise, _MessageStream_rejectConnectedPromise, _MessageStream_endPromise, _MessageStream_resolveEndPromise, _MessageStream_rejectEndPromise, _MessageStream_listeners, _MessageStream_ended, _MessageStream_errored, _MessageStream_aborted, _MessageStream_catchingPromiseCreated, _MessageStream_response, _MessageStream_request_id, _MessageStream_getFinalMessage, _MessageStream_getFinalText, _MessageStream_handleError, _MessageStream_beginRequest, _MessageStream_addStreamEvent, _MessageStream_endRequest, _MessageStream_accumulateMessage, JSON_BUF_PROPERTY2, MessageStream;
var init_MessageStream = __esm({
  "node_modules/@anthropic-ai/sdk/lib/MessageStream.mjs"() {
    init_error();
    init_streaming();
    init_parser();
    __classPrivateFieldSet3 = function(receiver, state, value, kind2, f) {
      if (kind2 === "m") throw new TypeError("Private method is not writable");
      if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a setter");
      if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot write private member to an object whose class did not declare it");
      return kind2 === "a" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value), value;
    };
    __classPrivateFieldGet3 = function(receiver, state, kind2, f) {
      if (kind2 === "a" && !f) throw new TypeError("Private accessor was defined without a getter");
      if (typeof state === "function" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError("Cannot read private member from an object whose class did not declare it");
      return kind2 === "m" ? f : kind2 === "a" ? f.call(receiver) : f ? f.value : state.get(receiver);
    };
    JSON_BUF_PROPERTY2 = "__json_buf";
    MessageStream = class _MessageStream {
      constructor() {
        _MessageStream_instances.add(this);
        this.messages = [];
        this.receivedMessages = [];
        _MessageStream_currentMessageSnapshot.set(this, void 0);
        this.controller = new AbortController();
        _MessageStream_connectedPromise.set(this, void 0);
        _MessageStream_resolveConnectedPromise.set(this, () => {
        });
        _MessageStream_rejectConnectedPromise.set(this, () => {
        });
        _MessageStream_endPromise.set(this, void 0);
        _MessageStream_resolveEndPromise.set(this, () => {
        });
        _MessageStream_rejectEndPromise.set(this, () => {
        });
        _MessageStream_listeners.set(this, {});
        _MessageStream_ended.set(this, false);
        _MessageStream_errored.set(this, false);
        _MessageStream_aborted.set(this, false);
        _MessageStream_catchingPromiseCreated.set(this, false);
        _MessageStream_response.set(this, void 0);
        _MessageStream_request_id.set(this, void 0);
        _MessageStream_handleError.set(this, (error) => {
          __classPrivateFieldSet3(this, _MessageStream_errored, true, "f");
          if (error instanceof Error && error.name === "AbortError") {
            error = new APIUserAbortError();
          }
          if (error instanceof APIUserAbortError) {
            __classPrivateFieldSet3(this, _MessageStream_aborted, true, "f");
            return this._emit("abort", error);
          }
          if (error instanceof AnthropicError) {
            return this._emit("error", error);
          }
          if (error instanceof Error) {
            const anthropicError = new AnthropicError(error.message);
            anthropicError.cause = error;
            return this._emit("error", anthropicError);
          }
          return this._emit("error", new AnthropicError(String(error)));
        });
        __classPrivateFieldSet3(this, _MessageStream_connectedPromise, new Promise((resolve, reject) => {
          __classPrivateFieldSet3(this, _MessageStream_resolveConnectedPromise, resolve, "f");
          __classPrivateFieldSet3(this, _MessageStream_rejectConnectedPromise, reject, "f");
        }), "f");
        __classPrivateFieldSet3(this, _MessageStream_endPromise, new Promise((resolve, reject) => {
          __classPrivateFieldSet3(this, _MessageStream_resolveEndPromise, resolve, "f");
          __classPrivateFieldSet3(this, _MessageStream_rejectEndPromise, reject, "f");
        }), "f");
        __classPrivateFieldGet3(this, _MessageStream_connectedPromise, "f").catch(() => {
        });
        __classPrivateFieldGet3(this, _MessageStream_endPromise, "f").catch(() => {
        });
      }
      get response() {
        return __classPrivateFieldGet3(this, _MessageStream_response, "f");
      }
      get request_id() {
        return __classPrivateFieldGet3(this, _MessageStream_request_id, "f");
      }
      /**
       * Returns the `MessageStream` data, the raw `Response` instance and the ID of the request,
       * returned vie the `request-id` header which is useful for debugging requests and resporting
       * issues to Anthropic.
       *
       * This is the same as the `APIPromise.withResponse()` method.
       *
       * This method will raise an error if you created the stream using `MessageStream.fromReadableStream`
       * as no `Response` is available.
       */
      async withResponse() {
        const response = await __classPrivateFieldGet3(this, _MessageStream_connectedPromise, "f");
        if (!response) {
          throw new Error("Could not resolve a `Response` object");
        }
        return {
          data: this,
          response,
          request_id: response.headers.get("request-id")
        };
      }
      /**
       * Intended for use on the frontend, consuming a stream produced with
       * `.toReadableStream()` on the backend.
       *
       * Note that messages sent to the model do not appear in `.on('message')`
       * in this context.
       */
      static fromReadableStream(stream) {
        const runner = new _MessageStream();
        runner._run(() => runner._fromReadableStream(stream));
        return runner;
      }
      static createMessage(messages, params, options) {
        const runner = new _MessageStream();
        for (const message of params.messages) {
          runner._addMessageParam(message);
        }
        runner._run(() => runner._createMessage(messages, { ...params, stream: true }, { ...options, headers: { ...options == null ? void 0 : options.headers, "X-Stainless-Helper-Method": "stream" } }));
        return runner;
      }
      _run(executor) {
        executor().then(() => {
          this._emitFinal();
          this._emit("end");
        }, __classPrivateFieldGet3(this, _MessageStream_handleError, "f"));
      }
      _addMessageParam(message) {
        this.messages.push(message);
      }
      _addMessage(message, emit = true) {
        this.receivedMessages.push(message);
        if (emit) {
          this._emit("message", message);
        }
      }
      async _createMessage(messages, params, options) {
        var _a2;
        const signal = options == null ? void 0 : options.signal;
        if (signal) {
          if (signal.aborted)
            this.controller.abort();
          signal.addEventListener("abort", () => this.controller.abort());
        }
        __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_beginRequest).call(this);
        const { response, data: stream } = await messages.create({ ...params, stream: true }, { ...options, signal: this.controller.signal }).withResponse();
        this._connected(response);
        for await (const event of stream) {
          __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_addStreamEvent).call(this, event);
        }
        if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
          throw new APIUserAbortError();
        }
        __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_endRequest).call(this);
      }
      _connected(response) {
        if (this.ended)
          return;
        __classPrivateFieldSet3(this, _MessageStream_response, response, "f");
        __classPrivateFieldSet3(this, _MessageStream_request_id, response == null ? void 0 : response.headers.get("request-id"), "f");
        __classPrivateFieldGet3(this, _MessageStream_resolveConnectedPromise, "f").call(this, response);
        this._emit("connect");
      }
      get ended() {
        return __classPrivateFieldGet3(this, _MessageStream_ended, "f");
      }
      get errored() {
        return __classPrivateFieldGet3(this, _MessageStream_errored, "f");
      }
      get aborted() {
        return __classPrivateFieldGet3(this, _MessageStream_aborted, "f");
      }
      abort() {
        this.controller.abort();
      }
      /**
       * Adds the listener function to the end of the listeners array for the event.
       * No checks are made to see if the listener has already been added. Multiple calls passing
       * the same combination of event and listener will result in the listener being added, and
       * called, multiple times.
       * @returns this MessageStream, so that calls can be chained
       */
      on(event, listener) {
        const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] || (__classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = []);
        listeners.push({ listener });
        return this;
      }
      /**
       * Removes the specified listener from the listener array for the event.
       * off() will remove, at most, one instance of a listener from the listener array. If any single
       * listener has been added multiple times to the listener array for the specified event, then
       * off() must be called multiple times to remove each instance.
       * @returns this MessageStream, so that calls can be chained
       */
      off(event, listener) {
        const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event];
        if (!listeners)
          return this;
        const index = listeners.findIndex((l) => l.listener === listener);
        if (index >= 0)
          listeners.splice(index, 1);
        return this;
      }
      /**
       * Adds a one-time listener function for the event. The next time the event is triggered,
       * this listener is removed and then invoked.
       * @returns this MessageStream, so that calls can be chained
       */
      once(event, listener) {
        const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] || (__classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = []);
        listeners.push({ listener, once: true });
        return this;
      }
      /**
       * This is similar to `.once()`, but returns a Promise that resolves the next time
       * the event is triggered, instead of calling a listener callback.
       * @returns a Promise that resolves the next time given event is triggered,
       * or rejects if an error is emitted.  (If you request the 'error' event,
       * returns a promise that resolves with the error).
       *
       * Example:
       *
       *   const message = await stream.emitted('message') // rejects if the stream errors
       */
      emitted(event) {
        return new Promise((resolve, reject) => {
          __classPrivateFieldSet3(this, _MessageStream_catchingPromiseCreated, true, "f");
          if (event !== "error")
            this.once("error", reject);
          this.once(event, resolve);
        });
      }
      async done() {
        __classPrivateFieldSet3(this, _MessageStream_catchingPromiseCreated, true, "f");
        await __classPrivateFieldGet3(this, _MessageStream_endPromise, "f");
      }
      get currentMessage() {
        return __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
      }
      /**
       * @returns a promise that resolves with the the final assistant Message response,
       * or rejects if an error occurred or the stream ended prematurely without producing a Message.
       */
      async finalMessage() {
        await this.done();
        return __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalMessage).call(this);
      }
      /**
       * @returns a promise that resolves with the the final assistant Message's text response, concatenated
       * together if there are more than one text blocks.
       * Rejects if an error occurred or the stream ended prematurely without producing a Message.
       */
      async finalText() {
        await this.done();
        return __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalText).call(this);
      }
      _emit(event, ...args) {
        if (__classPrivateFieldGet3(this, _MessageStream_ended, "f"))
          return;
        if (event === "end") {
          __classPrivateFieldSet3(this, _MessageStream_ended, true, "f");
          __classPrivateFieldGet3(this, _MessageStream_resolveEndPromise, "f").call(this);
        }
        const listeners = __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event];
        if (listeners) {
          __classPrivateFieldGet3(this, _MessageStream_listeners, "f")[event] = listeners.filter((l) => !l.once);
          listeners.forEach(({ listener }) => listener(...args));
        }
        if (event === "abort") {
          const error = args[0];
          if (!__classPrivateFieldGet3(this, _MessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
            Promise.reject(error);
          }
          __classPrivateFieldGet3(this, _MessageStream_rejectConnectedPromise, "f").call(this, error);
          __classPrivateFieldGet3(this, _MessageStream_rejectEndPromise, "f").call(this, error);
          this._emit("end");
          return;
        }
        if (event === "error") {
          const error = args[0];
          if (!__classPrivateFieldGet3(this, _MessageStream_catchingPromiseCreated, "f") && !(listeners == null ? void 0 : listeners.length)) {
            Promise.reject(error);
          }
          __classPrivateFieldGet3(this, _MessageStream_rejectConnectedPromise, "f").call(this, error);
          __classPrivateFieldGet3(this, _MessageStream_rejectEndPromise, "f").call(this, error);
          this._emit("end");
        }
      }
      _emitFinal() {
        const finalMessage = this.receivedMessages.at(-1);
        if (finalMessage) {
          this._emit("finalMessage", __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_getFinalMessage).call(this));
        }
      }
      async _fromReadableStream(readableStream, options) {
        var _a2;
        const signal = options == null ? void 0 : options.signal;
        if (signal) {
          if (signal.aborted)
            this.controller.abort();
          signal.addEventListener("abort", () => this.controller.abort());
        }
        __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_beginRequest).call(this);
        this._connected(null);
        const stream = Stream.fromReadableStream(readableStream, this.controller);
        for await (const event of stream) {
          __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_addStreamEvent).call(this, event);
        }
        if ((_a2 = stream.controller.signal) == null ? void 0 : _a2.aborted) {
          throw new APIUserAbortError();
        }
        __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_endRequest).call(this);
      }
      [(_MessageStream_currentMessageSnapshot = /* @__PURE__ */ new WeakMap(), _MessageStream_connectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_resolveConnectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_rejectConnectedPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_endPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_resolveEndPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_rejectEndPromise = /* @__PURE__ */ new WeakMap(), _MessageStream_listeners = /* @__PURE__ */ new WeakMap(), _MessageStream_ended = /* @__PURE__ */ new WeakMap(), _MessageStream_errored = /* @__PURE__ */ new WeakMap(), _MessageStream_aborted = /* @__PURE__ */ new WeakMap(), _MessageStream_catchingPromiseCreated = /* @__PURE__ */ new WeakMap(), _MessageStream_response = /* @__PURE__ */ new WeakMap(), _MessageStream_request_id = /* @__PURE__ */ new WeakMap(), _MessageStream_handleError = /* @__PURE__ */ new WeakMap(), _MessageStream_instances = /* @__PURE__ */ new WeakSet(), _MessageStream_getFinalMessage = function _MessageStream_getFinalMessage2() {
        if (this.receivedMessages.length === 0) {
          throw new AnthropicError("stream ended without producing a Message with role=assistant");
        }
        return this.receivedMessages.at(-1);
      }, _MessageStream_getFinalText = function _MessageStream_getFinalText2() {
        if (this.receivedMessages.length === 0) {
          throw new AnthropicError("stream ended without producing a Message with role=assistant");
        }
        const textBlocks = this.receivedMessages.at(-1).content.filter((block) => block.type === "text").map((block) => block.text);
        if (textBlocks.length === 0) {
          throw new AnthropicError("stream ended without producing a content block with type=text");
        }
        return textBlocks.join(" ");
      }, _MessageStream_beginRequest = function _MessageStream_beginRequest2() {
        if (this.ended)
          return;
        __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, void 0, "f");
      }, _MessageStream_addStreamEvent = function _MessageStream_addStreamEvent2(event) {
        var _a2;
        if (this.ended)
          return;
        const messageSnapshot = __classPrivateFieldGet3(this, _MessageStream_instances, "m", _MessageStream_accumulateMessage).call(this, event);
        this._emit("streamEvent", event, messageSnapshot);
        switch (event.type) {
          case "content_block_delta": {
            const content = messageSnapshot.content.at(-1);
            switch (event.delta.type) {
              case "text_delta": {
                if (content.type === "text") {
                  this._emit("text", event.delta.text, content.text || "");
                }
                break;
              }
              case "citations_delta": {
                if (content.type === "text") {
                  this._emit("citation", event.delta.citation, (_a2 = content.citations) != null ? _a2 : []);
                }
                break;
              }
              case "input_json_delta": {
                if (content.type === "tool_use" && content.input) {
                  this._emit("inputJson", event.delta.partial_json, content.input);
                }
                break;
              }
              default:
                checkNever2(event.delta);
            }
            break;
          }
          case "message_stop": {
            this._addMessageParam(messageSnapshot);
            this._addMessage(messageSnapshot, true);
            break;
          }
          case "content_block_stop": {
            this._emit("contentBlock", messageSnapshot.content.at(-1));
            break;
          }
          case "message_start": {
            __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, messageSnapshot, "f");
            break;
          }
          case "content_block_start":
          case "message_delta":
            break;
        }
      }, _MessageStream_endRequest = function _MessageStream_endRequest2() {
        if (this.ended) {
          throw new AnthropicError(`stream has ended, this shouldn't happen`);
        }
        const snapshot = __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
        if (!snapshot) {
          throw new AnthropicError(`request ended without sending any chunks`);
        }
        __classPrivateFieldSet3(this, _MessageStream_currentMessageSnapshot, void 0, "f");
        return snapshot;
      }, _MessageStream_accumulateMessage = function _MessageStream_accumulateMessage2(event) {
        var _a2;
        let snapshot = __classPrivateFieldGet3(this, _MessageStream_currentMessageSnapshot, "f");
        if (event.type === "message_start") {
          if (snapshot) {
            throw new AnthropicError(`Unexpected event order, got ${event.type} before receiving "message_stop"`);
          }
          return event.message;
        }
        if (!snapshot) {
          throw new AnthropicError(`Unexpected event order, got ${event.type} before "message_start"`);
        }
        switch (event.type) {
          case "message_stop":
            return snapshot;
          case "message_delta":
            snapshot.stop_reason = event.delta.stop_reason;
            snapshot.stop_sequence = event.delta.stop_sequence;
            snapshot.usage.output_tokens = event.usage.output_tokens;
            return snapshot;
          case "content_block_start":
            snapshot.content.push(event.content_block);
            return snapshot;
          case "content_block_delta": {
            const snapshotContent = snapshot.content.at(event.index);
            switch (event.delta.type) {
              case "text_delta": {
                if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
                  snapshotContent.text += event.delta.text;
                }
                break;
              }
              case "citations_delta": {
                if ((snapshotContent == null ? void 0 : snapshotContent.type) === "text") {
                  (_a2 = snapshotContent.citations) != null ? _a2 : snapshotContent.citations = [];
                  snapshotContent.citations.push(event.delta.citation);
                }
                break;
              }
              case "input_json_delta": {
                if ((snapshotContent == null ? void 0 : snapshotContent.type) === "tool_use") {
                  let jsonBuf = snapshotContent[JSON_BUF_PROPERTY2] || "";
                  jsonBuf += event.delta.partial_json;
                  Object.defineProperty(snapshotContent, JSON_BUF_PROPERTY2, {
                    value: jsonBuf,
                    enumerable: false,
                    writable: true
                  });
                  if (jsonBuf) {
                    snapshotContent.input = partialParse(jsonBuf);
                  }
                }
                break;
              }
              default:
                checkNever2(event.delta);
            }
            return snapshot;
          }
          case "content_block_stop":
            return snapshot;
        }
      }, Symbol.asyncIterator)]() {
        const pushQueue = [];
        const readQueue = [];
        let done = false;
        this.on("streamEvent", (event) => {
          const reader = readQueue.shift();
          if (reader) {
            reader.resolve(event);
          } else {
            pushQueue.push(event);
          }
        });
        this.on("end", () => {
          done = true;
          for (const reader of readQueue) {
            reader.resolve(void 0);
          }
          readQueue.length = 0;
        });
        this.on("abort", (err) => {
          done = true;
          for (const reader of readQueue) {
            reader.reject(err);
          }
          readQueue.length = 0;
        });
        this.on("error", (err) => {
          done = true;
          for (const reader of readQueue) {
            reader.reject(err);
          }
          readQueue.length = 0;
        });
        return {
          next: async () => {
            if (!pushQueue.length) {
              if (done) {
                return { value: void 0, done: true };
              }
              return new Promise((resolve, reject) => readQueue.push({ resolve, reject })).then((chunk2) => chunk2 ? { value: chunk2, done: false } : { value: void 0, done: true });
            }
            const chunk = pushQueue.shift();
            return { value: chunk, done: false };
          },
          return: async () => {
            this.abort();
            return { value: void 0, done: true };
          }
        };
      }
      toReadableStream() {
        const stream = new Stream(this[Symbol.asyncIterator].bind(this), this.controller);
        return stream.toReadableStream();
      }
    };
  }
});

// node_modules/@anthropic-ai/sdk/resources/messages/messages.mjs
var Messages2, DEPRECATED_MODELS2;
var init_messages2 = __esm({
  "node_modules/@anthropic-ai/sdk/resources/messages/messages.mjs"() {
    init_resource();
    init_batches2();
    init_batches2();
    init_MessageStream();
    Messages2 = class extends APIResource {
      constructor() {
        super(...arguments);
        this.batches = new Batches2(this._client);
      }
      create(body, options) {
        var _a2, _b;
        if (body.model in DEPRECATED_MODELS2) {
          console.warn(`The model '${body.model}' is deprecated and will reach end-of-life on ${DEPRECATED_MODELS2[body.model]}
Please migrate to a newer model. Visit https://docs.anthropic.com/en/docs/resources/model-deprecations for more information.`);
        }
        return this._client.post("/v1/messages", {
          body,
          timeout: (_a2 = this._client._options.timeout) != null ? _a2 : 6e5,
          ...options,
          stream: (_b = body.stream) != null ? _b : false
        });
      }
      /**
       * Create a Message stream
       */
      stream(body, options) {
        return MessageStream.createMessage(this, body, options);
      }
      /**
       * Count the number of tokens in a Message.
       *
       * The Token Count API can be used to count the number of tokens in a Message,
       * including tools, images, and documents, without creating it.
       */
      countTokens(body, options) {
        return this._client.post("/v1/messages/count_tokens", { body, ...options });
      }
    };
    DEPRECATED_MODELS2 = {
      "claude-1.3": "November 6th, 2024",
      "claude-1.3-100k": "November 6th, 2024",
      "claude-instant-1.1": "November 6th, 2024",
      "claude-instant-1.1-100k": "November 6th, 2024",
      "claude-instant-1.2": "November 6th, 2024",
      "claude-3-sonnet-20240229": "July 21st, 2025",
      "claude-2.1": "July 21st, 2025",
      "claude-2.0": "July 21st, 2025"
    };
    Messages2.Batches = Batches2;
    Messages2.MessageBatchesPage = MessageBatchesPage;
  }
});

// node_modules/@anthropic-ai/sdk/resources/models.mjs
var Models2, ModelInfosPage;
var init_models2 = __esm({
  "node_modules/@anthropic-ai/sdk/resources/models.mjs"() {
    init_resource();
    init_core();
    init_pagination();
    Models2 = class extends APIResource {
      /**
       * Get a specific model.
       *
       * The Models API response can be used to determine information about a specific
       * model or resolve a model alias to a model ID.
       */
      retrieve(modelId, options) {
        return this._client.get(`/v1/models/${modelId}`, options);
      }
      list(query = {}, options) {
        if (isRequestOptions(query)) {
          return this.list({}, query);
        }
        return this._client.getAPIList("/v1/models", ModelInfosPage, { query, ...options });
      }
    };
    ModelInfosPage = class extends Page {
    };
    Models2.ModelInfosPage = ModelInfosPage;
  }
});

// node_modules/@anthropic-ai/sdk/resources/index.mjs
var init_resources = __esm({
  "node_modules/@anthropic-ai/sdk/resources/index.mjs"() {
    init_shared();
    init_beta();
    init_completions();
    init_messages2();
    init_models2();
  }
});

// node_modules/@anthropic-ai/sdk/index.mjs
var _a, Anthropic, HUMAN_PROMPT, AI_PROMPT, sdk_default;
var init_sdk = __esm({
  "node_modules/@anthropic-ai/sdk/index.mjs"() {
    init_core();
    init_error();
    init_uploads();
    init_resources();
    init_completions();
    init_models2();
    init_beta();
    init_messages2();
    Anthropic = class extends APIClient {
      /**
       * API Client for interfacing with the Anthropic API.
       *
       * @param {string | null | undefined} [opts.apiKey=process.env['ANTHROPIC_API_KEY'] ?? null]
       * @param {string | null | undefined} [opts.authToken=process.env['ANTHROPIC_AUTH_TOKEN'] ?? null]
       * @param {string} [opts.baseURL=process.env['ANTHROPIC_BASE_URL'] ?? https://api.anthropic.com] - Override the default base URL for the API.
       * @param {number} [opts.timeout=10 minutes] - The maximum amount of time (in milliseconds) the client will wait for a response before timing out.
       * @param {number} [opts.httpAgent] - An HTTP agent used to manage HTTP(s) connections.
       * @param {Core.Fetch} [opts.fetch] - Specify a custom `fetch` function implementation.
       * @param {number} [opts.maxRetries=2] - The maximum number of times the client will retry a request.
       * @param {Core.Headers} opts.defaultHeaders - Default headers to include with every request to the API.
       * @param {Core.DefaultQuery} opts.defaultQuery - Default query parameters to include with every request to the API.
       * @param {boolean} [opts.dangerouslyAllowBrowser=false] - By default, client-side use of this library is not allowed, as it risks exposing your secret API credentials to attackers.
       */
      constructor({ baseURL = readEnv("ANTHROPIC_BASE_URL"), apiKey = ((_a2) => (_a2 = readEnv("ANTHROPIC_API_KEY")) != null ? _a2 : null)(), authToken = ((_b) => (_b = readEnv("ANTHROPIC_AUTH_TOKEN")) != null ? _b : null)(), ...opts } = {}) {
        var _a3;
        const options = {
          apiKey,
          authToken,
          ...opts,
          baseURL: baseURL || `https://api.anthropic.com`
        };
        if (!options.dangerouslyAllowBrowser && isRunningInBrowser()) {
          throw new AnthropicError("It looks like you're running in a browser-like environment.\n\nThis is disabled by default, as it risks exposing your secret API credentials to attackers.\nIf you understand the risks and have appropriate mitigations in place,\nyou can set the `dangerouslyAllowBrowser` option to `true`, e.g.,\n\nnew Anthropic({ apiKey, dangerouslyAllowBrowser: true });\n");
        }
        super({
          baseURL: options.baseURL,
          timeout: (_a3 = options.timeout) != null ? _a3 : 6e5,
          httpAgent: options.httpAgent,
          maxRetries: options.maxRetries,
          fetch: options.fetch
        });
        this.completions = new Completions(this);
        this.messages = new Messages2(this);
        this.models = new Models2(this);
        this.beta = new Beta(this);
        this._options = options;
        this.apiKey = apiKey;
        this.authToken = authToken;
      }
      defaultQuery() {
        return this._options.defaultQuery;
      }
      defaultHeaders(opts) {
        return {
          ...super.defaultHeaders(opts),
          ...this._options.dangerouslyAllowBrowser ? { "anthropic-dangerous-direct-browser-access": "true" } : void 0,
          "anthropic-version": "2023-06-01",
          ...this._options.defaultHeaders
        };
      }
      validateHeaders(headers, customHeaders) {
        if (this.apiKey && headers["x-api-key"]) {
          return;
        }
        if (customHeaders["x-api-key"] === null) {
          return;
        }
        if (this.authToken && headers["authorization"]) {
          return;
        }
        if (customHeaders["authorization"] === null) {
          return;
        }
        throw new Error('Could not resolve authentication method. Expected either apiKey or authToken to be set. Or for one of the "X-Api-Key" or "Authorization" headers to be explicitly omitted');
      }
      authHeaders(opts) {
        const apiKeyAuth = this.apiKeyAuth(opts);
        const bearerAuth = this.bearerAuth(opts);
        if (apiKeyAuth != null && !isEmptyObj(apiKeyAuth)) {
          return apiKeyAuth;
        }
        if (bearerAuth != null && !isEmptyObj(bearerAuth)) {
          return bearerAuth;
        }
        return {};
      }
      apiKeyAuth(opts) {
        if (this.apiKey == null) {
          return {};
        }
        return { "X-Api-Key": this.apiKey };
      }
      bearerAuth(opts) {
        if (this.authToken == null) {
          return {};
        }
        return { Authorization: `Bearer ${this.authToken}` };
      }
    };
    _a = Anthropic;
    Anthropic.Anthropic = _a;
    Anthropic.HUMAN_PROMPT = "\n\nHuman:";
    Anthropic.AI_PROMPT = "\n\nAssistant:";
    Anthropic.DEFAULT_TIMEOUT = 6e5;
    Anthropic.AnthropicError = AnthropicError;
    Anthropic.APIError = APIError;
    Anthropic.APIConnectionError = APIConnectionError;
    Anthropic.APIConnectionTimeoutError = APIConnectionTimeoutError;
    Anthropic.APIUserAbortError = APIUserAbortError;
    Anthropic.NotFoundError = NotFoundError;
    Anthropic.ConflictError = ConflictError;
    Anthropic.RateLimitError = RateLimitError;
    Anthropic.BadRequestError = BadRequestError;
    Anthropic.AuthenticationError = AuthenticationError;
    Anthropic.InternalServerError = InternalServerError;
    Anthropic.PermissionDeniedError = PermissionDeniedError;
    Anthropic.UnprocessableEntityError = UnprocessableEntityError;
    Anthropic.toFile = toFile;
    Anthropic.fileFromPath = fileFromPath;
    Anthropic.Completions = Completions;
    Anthropic.Messages = Messages2;
    Anthropic.Models = Models2;
    Anthropic.ModelInfosPage = ModelInfosPage;
    Anthropic.Beta = Beta;
    ({ HUMAN_PROMPT, AI_PROMPT } = Anthropic);
    sdk_default = Anthropic;
  }
});

// providers/anthropic.ts
function estimateTokenCount(messages) {
  const CHARS_PER_TOKEN = 4;
  const totalChars = messages.reduce((total, msg) => {
    return total + msg.content.length;
  }, 0);
  return Math.ceil(totalChars / CHARS_PER_TOKEN);
}
var MODEL_CONTEXT_WINDOWS, MODEL_OUTPUT_TOKEN_LIMITS, AnthropicProvider;
var init_anthropic = __esm({
  "providers/anthropic.ts"() {
    init_base();
    init_sdk();
    MODEL_CONTEXT_WINDOWS = {
      "claude-3-opus-20240229": 2e5,
      "claude-3-sonnet-20240229": 2e5,
      "claude-3-haiku-20240307": 2e5,
      "claude-3-7-sonnet-20250219": 2e5,
      "claude-3-5-sonnet-20241022": 2e5,
      "claude-3-5-sonnet-20240620": 2e5,
      "claude-3-5-haiku-20241022": 2e5
    };
    MODEL_OUTPUT_TOKEN_LIMITS = {
      "claude-3-7-sonnet-20250219": 64e3,
      "claude-3-5-sonnet-20241022": 8192,
      "claude-3-5-sonnet-20240620": 8192,
      "claude-3-5-haiku-20241022": 8192,
      "claude-3-opus-20240229": 4096,
      "claude-3-sonnet-20240229": 8192,
      // fallback for older sonnet
      "claude-3-haiku-20240307": 4096
      // fallback for older haiku
    };
    AnthropicProvider = class extends BaseProvider {
      constructor(apiKey, model = "claude-3-sonnet-20240229") {
        super();
        __publicField(this, "apiKey");
        __publicField(this, "baseUrl", "https://api.anthropic.com/v1");
        __publicField(this, "model");
        __publicField(this, "client");
        this.apiKey = apiKey;
        this.model = model;
        this.client = new sdk_default({
          apiKey: this.apiKey,
          dangerouslyAllowBrowser: true
          // Required for browser environments
        });
      }
      /**
       * Get a completion from Anthropic
       * 
       * Sends the conversation to Anthropic and streams back the response
       * using the official SDK's streaming support.
       * 
       * Automatically adjusts max_tokens if the request would exceed the model's context window.
       * 
       * @param messages - The conversation history
       * @param options - Settings for this completion
       */
      async getCompletion(messages, options) {
        var _a2, _b, _c, _d;
        try {
          const contextWindow = (_a2 = MODEL_CONTEXT_WINDOWS[this.model]) != null ? _a2 : 2e5;
          const outputTokenLimit = MODEL_OUTPUT_TOKEN_LIMITS[this.model];
          const inputTokens = estimateTokenCount(messages);
          let maxTokens = (_b = options.maxTokens) != null ? _b : 1e3;
          if (inputTokens + maxTokens > contextWindow) {
            const adjustedMaxTokens = contextWindow - inputTokens;
            if (adjustedMaxTokens <= 0) {
              throw new ProviderError(
                "invalid_request" /* InvalidRequest */,
                `Input is too long for ${this.model}'s context window. Estimated input tokens: ${inputTokens}, context window: ${contextWindow}`
              );
            }
            console.log(
              `Adjusting max_tokens from ${maxTokens} to ${adjustedMaxTokens} to fit within ${this.model}'s context window`
            );
            maxTokens = adjustedMaxTokens;
          }
          if (outputTokenLimit && maxTokens > outputTokenLimit) {
            console.log(
              `Capping max_tokens from ${maxTokens} to model output limit ${outputTokenLimit} for ${this.model}`
            );
            maxTokens = outputTokenLimit;
          }
          const { systemPrompt, anthropicMessages } = this.formatMessages(messages);
          const requestParams = {
            model: this.model,
            messages: anthropicMessages,
            temperature: (_c = options.temperature) != null ? _c : 0.7,
            max_tokens: maxTokens,
            stream: true
          };
          if (systemPrompt) {
            requestParams.system = systemPrompt;
          }
          const stream = await this.client.messages.create(requestParams);
          try {
            if (stream && typeof stream === "object") {
              if (stream.on && typeof stream.on === "function") {
                await new Promise((resolve, reject) => {
                  stream.on("content_block_delta", (chunk) => {
                    var _a3;
                    if (((_a3 = chunk.delta) == null ? void 0 : _a3.type) === "text_delta" && options.streamCallback) {
                      options.streamCallback(chunk.delta.text);
                    }
                  });
                  stream.on("end", resolve);
                  stream.on("error", reject);
                });
              } else if (Symbol.asyncIterator in stream) {
                for await (const chunk of stream) {
                  if (chunk.type === "content_block_delta" && ((_d = chunk.delta) == null ? void 0 : _d.type) === "text_delta" && options.streamCallback) {
                    options.streamCallback(chunk.delta.text);
                  }
                }
              } else if (options.streamCallback) {
                console.warn("Anthropic response is not a stream, handling as regular response");
                if ("content" in stream && typeof stream.content === "string") {
                  options.streamCallback(stream.content);
                }
              }
            }
          } catch (streamError) {
            console.error("Error processing Anthropic stream:", streamError);
            throw streamError;
          }
        } catch (error) {
          if (error instanceof ProviderError) {
            throw error;
          }
          if (error.name === "AbortError") {
            console.log("Anthropic stream was aborted");
          } else {
            console.error("Error calling Anthropic:", error);
            throw error;
          }
        }
      }
      /**
       * Get available Anthropic models
       * 
       * Returns the list of supported Claude models.
       * Note: Anthropic doesn't have a models endpoint, so we return known models.
       * This list is based on the models defined in MODEL_CONTEXT_WINDOWS.
       * 
       * @returns List of available model names
       */
      async getAvailableModels() {
        try {
          return Object.keys(MODEL_CONTEXT_WINDOWS);
        } catch (error) {
          console.error("Error getting Anthropic models:", error);
          throw error;
        }
      }
      /**
       * Format messages for Anthropic API
       * 
       * Converts from the plugin's Message format to Anthropic's expected format.
       * Handles system messages specially as Anthropic has a different format.
       * 
       * @param messages - Array of messages to format
       * @returns Formatted messages and system prompt for Anthropic API
       */
      formatMessages(messages) {
        const systemMessages = messages.filter((msg) => msg.role === "system");
        const nonSystemMessages = messages.filter((msg) => msg.role !== "system");
        const systemPrompt = systemMessages.length > 0 ? systemMessages.map((msg) => msg.content).join("\n\n") : void 0;
        const anthropicMessages = nonSystemMessages.map((msg) => {
          const role = msg.role === "user" || msg.role === "assistant" ? msg.role : "user";
          return { role, content: msg.content };
        });
        return { systemPrompt, anthropicMessages };
      }
      /**
       * Test connection to Anthropic
       * 
       * Verifies the API key works by attempting a simple completion.
       * 
       * @returns Test results including success/failure
       */
      async testConnection() {
        try {
          await this.client.messages.create({
            model: this.model,
            messages: [{ role: "user", content: "Hi" }],
            max_tokens: 1
          });
          const models = await this.getAvailableModels();
          return {
            success: true,
            message: "Successfully connected to Anthropic!",
            models
          };
        } catch (error) {
          return this.createErrorResponse(error);
        }
      }
    };
  }
});

// providers/openai.ts
var OpenAIProvider;
var init_openai = __esm({
  "providers/openai.ts"() {
    init_base();
    OpenAIProvider = class extends BaseProvider {
      constructor(apiKey, model = "gpt-4", baseUrl) {
        super();
        __publicField(this, "apiKey");
        __publicField(this, "baseUrl");
        __publicField(this, "model");
        this.apiKey = apiKey;
        this.model = model;
        this.baseUrl = baseUrl || "https://api.openai.com/v1";
      }
      /**
       * Get a completion from OpenAI
       * 
       * Sends the conversation to OpenAI and streams back the response.
       * 
       * @param messages - The conversation history
       * @param options - Settings for this completion
       */
      async getCompletion(messages, options) {
        var _a2, _b, _c, _d, _e, _f;
        try {
          const response = await fetch(`${this.baseUrl}/chat/completions`, {
            method: "POST",
            headers: {
              "Authorization": `Bearer ${this.apiKey}`,
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              model: this.model,
              messages,
              temperature: (_a2 = options.temperature) != null ? _a2 : 0.7,
              max_tokens: (_b = options.maxTokens) != null ? _b : 1e3,
              stream: true
            }),
            signal: (_c = options.abortController) == null ? void 0 : _c.signal
          });
          if (!response.ok) {
            throw this.handleHttpError(response);
          }
          const reader = (_d = response.body) == null ? void 0 : _d.getReader();
          const decoder = new TextDecoder("utf-8");
          let buffer = "";
          while (true) {
            const { done, value } = await (reader == null ? void 0 : reader.read()) || { done: true, value: void 0 };
            if (done) break;
            buffer += decoder.decode(value, { stream: true });
            const lines = buffer.split("\n");
            buffer = lines.pop() || "";
            for (const line of lines) {
              if (line.startsWith("data: ") && line !== "data: [DONE]") {
                try {
                  const data = JSON.parse(line.slice(6));
                  const content = (_f = (_e = data.choices[0]) == null ? void 0 : _e.delta) == null ? void 0 : _f.content;
                  if (content && options.streamCallback) {
                    options.streamCallback(content);
                  }
                } catch (e) {
                  console.warn("Error parsing OpenAI response chunk:", e);
                }
              }
            }
          }
        } catch (error) {
          if (error instanceof ProviderError) {
            throw error;
          }
          if (error.name === "AbortError") {
            console.log("OpenAI stream was aborted");
          } else {
            console.error("Error calling OpenAI:", error);
            throw error;
          }
        }
      }
      /**
       * Get available OpenAI models
       * 
       * Fetches the list of models from OpenAI's API.
       * Filters to only include chat models (GPT-3.5, GPT-4, etc.)
       * 
       * @returns List of available model names
       */
      async getAvailableModels() {
        try {
          const response = await fetch(`${this.baseUrl}/models`, {
            method: "GET",
            headers: {
              "Authorization": `Bearer ${this.apiKey}`,
              "Content-Type": "application/json"
            }
          });
          if (!response.ok) {
            throw this.handleHttpError(response);
          }
          const data = await response.json();
          return data.data.map((model) => model.id).filter((id) => id.startsWith("gpt-"));
        } catch (error) {
          console.error("Error fetching OpenAI models:", error);
          throw error;
        }
      }
      /**
       * Test connection to OpenAI
       * 
       * Verifies the API key works by attempting to list models.
       * 
       * @returns Test results including success/failure and available models
       */
      async testConnection() {
        try {
          const models = await this.getAvailableModels();
          return {
            success: true,
            message: `Successfully connected to OpenAI! Found ${models.length} available models.`,
            models
          };
        } catch (error) {
          return this.createErrorResponse(error);
        }
      }
    };
  }
});

// providers/gemini.ts
var GeminiProvider;
var init_gemini = __esm({
  "providers/gemini.ts"() {
    init_base();
    GeminiProvider = class extends BaseProvider {
      constructor(apiKey, model = "gemini-pro") {
        super();
        __publicField(this, "apiKey");
        __publicField(this, "baseUrl", "https://generativelanguage.googleapis.com/v1");
        __publicField(this, "model");
        this.apiKey = apiKey;
        this.model = model;
      }
      /**
       * Get a completion from Google Gemini
       * 
       * Sends the conversation to Gemini and streams back the response.
       * 
       * @param messages - The conversation history
       * @param options - Settings for this completion
       */
      async getCompletion(messages, options) {
        var _a2, _b, _c, _d, _e, _f, _g, _h;
        try {
          const formattedMessages = this.formatMessages(messages);
          const url = `${this.baseUrl}/models/${this.model}:generateContent?key=${this.apiKey}`;
          const response = await fetch(url, {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              contents: formattedMessages,
              generationConfig: {
                temperature: (_a2 = options.temperature) != null ? _a2 : 0.7,
                maxOutputTokens: (_b = options.maxTokens) != null ? _b : 1e3
              }
            }),
            signal: (_c = options.abortController) == null ? void 0 : _c.signal
          });
          if (!response.ok) {
            throw this.handleHttpError(response);
          }
          const data = await response.json();
          console.log("Gemini response:", JSON.stringify(data));
          const text = (_h = (_g = (_f = (_e = (_d = data.candidates) == null ? void 0 : _d[0]) == null ? void 0 : _e.content) == null ? void 0 : _f.parts) == null ? void 0 : _g[0]) == null ? void 0 : _h.text;
          if (text && options.streamCallback) {
            options.streamCallback(text);
          } else {
            console.warn("No text found in Gemini response:", JSON.stringify(data));
          }
        } catch (error) {
          if (error instanceof ProviderError) {
            throw error;
          }
          if (error.name === "AbortError") {
            console.log("Gemini request was aborted");
          } else {
            console.error("Error calling Gemini:", error);
            throw error;
          }
        }
      }
      /**
       * Get available Gemini models
       * 
       * Fetches the list of available models from Google's API.
       * Filters to only include Gemini models.
       * 
       * @returns List of available model names
       */
      async getAvailableModels() {
        try {
          const response = await fetch(`${this.baseUrl}/models?key=${this.apiKey}`, {
            method: "GET",
            headers: {
              "Content-Type": "application/json"
            }
          });
          if (!response.ok) {
            throw this.handleHttpError(response);
          }
          const data = await response.json();
          return data.models.map((model) => model.name.split("/").pop()).filter((id) => id.startsWith("gemini-"));
        } catch (error) {
          console.error("Error fetching Gemini models:", error);
          throw error;
        }
      }
      /**
       * Test connection to Gemini
       * 
       * Verifies the API key works by attempting to list models.
       * 
       * @returns Test results including success/failure and available models
       */
      async testConnection() {
        try {
          const models = await this.getAvailableModels();
          return {
            success: true,
            message: `Successfully connected to Google Gemini! Found ${models.length} available models.`,
            models
          };
        } catch (error) {
          return this.createErrorResponse(error);
        }
      }
      /**
       * Format messages for Gemini API
       * 
       * Converts from the plugin's Message format to Gemini's expected format.
       * 
       * @param messages - Array of messages to format
       * @returns Formatted messages for Gemini API
       */
      formatMessages(messages) {
        const geminiMessages = [];
        const systemMessages = messages.filter((msg) => msg.role === "system");
        const nonSystemMessages = messages.filter((msg) => msg.role !== "system");
        for (const message of systemMessages) {
          geminiMessages.push({
            role: "user",
            parts: [{ text: message.content }]
          });
        }
        for (const message of nonSystemMessages) {
          const role = message.role === "assistant" ? "model" : "user";
          geminiMessages.push({
            role,
            parts: [{ text: message.content }]
          });
        }
        return geminiMessages;
      }
    };
  }
});

// providers/ollama.ts
var OllamaProvider;
var init_ollama = __esm({
  "providers/ollama.ts"() {
    init_base();
    OllamaProvider = class extends BaseProvider {
      constructor(serverUrl = "http://localhost:11434", model = "llama2") {
        super();
        __publicField(this, "apiKey", "");
        // Not used for Ollama
        __publicField(this, "baseUrl");
        __publicField(this, "model");
        this.baseUrl = serverUrl.replace(/\/$/, "");
        this.model = model;
      }
      /**
       * Convert messages to Ollama format
       * 
       * @param messages - Standard message format
       * @returns Prompt string in Ollama format
       */
      convertToOllamaFormat(messages) {
        return messages.map((msg) => {
          if (msg.role === "system") {
            return `System: ${msg.content}

`;
          }
          return `${msg.role === "user" ? "Human" : "Assistant"}: ${msg.content}

`;
        }).join("") + "Assistant:";
      }
      /**
       * Get a completion from Ollama
       * 
       * Sends the conversation to the local Ollama server and streams back the response.
       * 
       * @param messages - The conversation history
       * @param options - Settings for this completion
       */
      async getCompletion(messages, options) {
        var _a2, _b, _c, _d;
        try {
          const prompt = this.convertToOllamaFormat(messages);
          const response = await fetch(`${this.baseUrl}/api/generate`, {
            method: "POST",
            headers: {
              "Content-Type": "application/json"
            },
            body: JSON.stringify({
              model: this.model,
              prompt,
              stream: true,
              options: {
                temperature: (_a2 = options.temperature) != null ? _a2 : 0.7,
                num_predict: (_b = options.maxTokens) != null ? _b : 1e3
              }
            }),
            signal: (_c = options.abortController) == null ? void 0 : _c.signal
          });
          if (!response.ok) {
            throw this.handleHttpError(response);
          }
          const reader = (_d = response.body) == null ? void 0 : _d.getReader();
          const decoder = new TextDecoder("utf-8");
          let buffer = "";
          while (true) {
            const { done, value } = await (reader == null ? void 0 : reader.read()) || { done: true, value: void 0 };
            if (done) break;
            buffer += decoder.decode(value, { stream: true });
            const lines = buffer.split("\n");
            buffer = lines.pop() || "";
            for (const line of lines) {
              if (line.trim()) {
                try {
                  const data = JSON.parse(line);
                  if (data.response && options.streamCallback) {
                    options.streamCallback(data.response);
                  }
                } catch (e) {
                  console.warn("Error parsing Ollama response chunk:", e);
                }
              }
            }
          }
        } catch (error) {
          if (error instanceof ProviderError) {
            throw error;
          }
          if (error.name === "AbortError") {
            console.log("Ollama stream was aborted");
          } else {
            console.error("Error calling Ollama:", error);
            throw error;
          }
        }
      }
      /**
       * Get available Ollama models
       * 
       * Fetches the list of models installed on the local Ollama server.
       * 
       * @returns List of available model names
       */
      async getAvailableModels() {
        var _a2;
        try {
          const response = await fetch(`${this.baseUrl}/api/tags`);
          if (!response.ok) {
            throw this.handleHttpError(response);
          }
          const data = await response.json();
          return ((_a2 = data.models) == null ? void 0 : _a2.map((model) => model.name)) || [];
        } catch (error) {
          console.error("Error fetching Ollama models:", error);
          throw error;
        }
      }
      /**
       * Test connection to Ollama
       * 
       * Verifies the Ollama server is running and accessible.
       * Also checks if any models are installed.
       * 
       * @returns Test results including success/failure and available models
       */
      async testConnection() {
        try {
          const models = await this.getAvailableModels();
          if (models.length === 0) {
            return {
              success: false,
              message: 'Connected to Ollama server, but no models are installed. Use "ollama pull model-name" to install models.',
              models: []
            };
          }
          return {
            success: true,
            message: `Successfully connected to Ollama! Found ${models.length} installed models.`,
            models
          };
        } catch (error) {
          return this.createErrorResponse(error);
        }
      }
    };
  }
});

// providers/index.ts
function createProvider(settings) {
  switch (settings.provider) {
    case "openai":
      return new OpenAIProvider(
        settings.openaiSettings.apiKey,
        settings.openaiSettings.model,
        settings.openaiSettings.baseUrl
      );
    case "anthropic":
      return new AnthropicProvider(
        settings.anthropicSettings.apiKey,
        settings.anthropicSettings.model
      );
    case "gemini":
      return new GeminiProvider(
        settings.geminiSettings.apiKey,
        settings.geminiSettings.model
      );
    case "ollama":
      return new OllamaProvider(
        settings.ollamaSettings.serverUrl,
        settings.ollamaSettings.model
      );
    default:
      throw new Error(`Invalid provider type: ${settings.provider}`);
  }
}
function createProviderFromUnifiedModel(settings, unifiedModelId) {
  const [providerType, modelId] = unifiedModelId.split(":", 2);
  switch (providerType) {
    case "openai":
      return new OpenAIProvider(settings.openaiSettings.apiKey, modelId, settings.openaiSettings.baseUrl);
    case "anthropic":
      return new AnthropicProvider(settings.anthropicSettings.apiKey, modelId);
    case "gemini":
      return new GeminiProvider(settings.geminiSettings.apiKey, modelId);
    case "ollama":
      return new OllamaProvider(settings.ollamaSettings.serverUrl, modelId);
    default:
      throw new Error(`Invalid provider type: ${providerType}`);
  }
}
async function getAllAvailableModels(settings) {
  const allModels = [];
  const getProviderDisplayName = (provider) => {
    switch (provider) {
      case "openai":
        return "OpenAI";
      case "anthropic":
        return "Anthropic";
      case "gemini":
        return "Google";
      case "ollama":
        return "Ollama";
      default:
        return provider;
    }
  };
  if (settings.openaiSettings.apiKey && settings.openaiSettings.availableModels.length > 0) {
    settings.openaiSettings.availableModels.forEach((model) => {
      allModels.push({
        id: `openai:${model}`,
        name: `${model} (${getProviderDisplayName("openai")})`,
        provider: "openai",
        modelId: model
      });
    });
  }
  if (settings.anthropicSettings.apiKey && settings.anthropicSettings.availableModels.length > 0) {
    settings.anthropicSettings.availableModels.forEach((model) => {
      allModels.push({
        id: `anthropic:${model}`,
        name: `${model} (${getProviderDisplayName("anthropic")})`,
        provider: "anthropic",
        modelId: model
      });
    });
  }
  if (settings.geminiSettings.apiKey && settings.geminiSettings.availableModels.length > 0) {
    settings.geminiSettings.availableModels.forEach((model) => {
      allModels.push({
        id: `gemini:${model}`,
        name: `${model} (${getProviderDisplayName("gemini")})`,
        provider: "gemini",
        modelId: model
      });
    });
  }
  if (settings.ollamaSettings.serverUrl && settings.ollamaSettings.availableModels.length > 0) {
    settings.ollamaSettings.availableModels.forEach((model) => {
      allModels.push({
        id: `ollama:${model}`,
        name: `${model} (${getProviderDisplayName("ollama")})`,
        provider: "ollama",
        modelId: model
      });
    });
  }
  return allModels;
}
function getProviderFromUnifiedModel(unifiedModelId) {
  const [providerType] = unifiedModelId.split(":", 2);
  return providerType;
}
function getModelIdFromUnifiedModel(unifiedModelId) {
  const [, modelId] = unifiedModelId.split(":", 2);
  return modelId;
}
var init_providers = __esm({
  "providers/index.ts"() {
    init_base();
    init_anthropic();
    init_openai();
    init_gemini();
    init_ollama();
  }
});

// src/components/chat/SettingsSections.ts
var SettingsSections_exports = {};
__export(SettingsSections_exports, {
  SettingsSections: () => SettingsSections
});
var import_obsidian, SettingsSections;
var init_SettingsSections = __esm({
  "src/components/chat/SettingsSections.ts"() {
    import_obsidian = require("obsidian");
    init_providers();
    SettingsSections = class {
      constructor(plugin) {
        __publicField(this, "plugin");
        this.plugin = plugin;
      }
      /**
       * AI Model Settings Section
       */
      async renderAIModelSettings(containerEl, onRefresh) {
        while (containerEl.firstChild) containerEl.removeChild(containerEl.firstChild);
        if (this.plugin.settings.modelSettingPresets && this.plugin.settings.modelSettingPresets.length > 0) {
          const presetContainer = containerEl.createDiv();
          presetContainer.addClass("model-preset-buttons");
          presetContainer.createEl("div", { text: "Presets:", cls: "setting-item-name" });
          this.plugin.settings.modelSettingPresets.forEach((preset, idx) => {
            const btn = presetContainer.createEl("button", { text: preset.name });
            btn.style.marginRight = "0.5em";
            btn.onclick = async () => {
              if (preset.selectedModel !== void 0) this.plugin.settings.selectedModel = preset.selectedModel;
              if (preset.systemMessage !== void 0) this.plugin.settings.systemMessage = preset.systemMessage;
              if (preset.temperature !== void 0) this.plugin.settings.temperature = preset.temperature;
              if (preset.maxTokens !== void 0) this.plugin.settings.maxTokens = preset.maxTokens;
              if (preset.enableStreaming !== void 0) this.plugin.settings.enableStreaming = preset.enableStreaming;
              await this.plugin.saveSettings();
              if (onRefresh) {
                if (window._aiModelSettingsRefreshTimeout) {
                  clearTimeout(window._aiModelSettingsRefreshTimeout);
                }
                window._aiModelSettingsRefreshTimeout = setTimeout(() => {
                  onRefresh();
                  window._aiModelSettingsRefreshTimeout = null;
                }, 50);
              }
              new import_obsidian.Notice(`Applied preset: ${preset.name}`);
            };
          });
        }
        new import_obsidian.Setting(containerEl).setName("System Message").setDesc("Set the system message for the AI").addTextArea((text) => text.setPlaceholder("You are a helpful assistant.").setValue(this.plugin.settings.systemMessage).onChange(async (value) => {
          this.plugin.settings.systemMessage = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(containerEl).setName("Enable Streaming").setDesc("Enable or disable streaming for completions").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableStreaming).onChange(async (value) => {
          this.plugin.settings.enableStreaming = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(containerEl).setName("Temperature").setDesc("Set the randomness of the model's output (0-1)").addSlider((slider) => slider.setLimits(0, 1, 0.1).setValue(this.plugin.settings.temperature).setDynamicTooltip().onChange(async (value) => {
          this.plugin.settings.temperature = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(containerEl).setName("Refresh Available Models").setDesc("Test connections to all configured providers and refresh available models").addButton((button) => button.setButtonText("Refresh Models").onClick(async () => {
          button.setButtonText("Refreshing...");
          button.setDisabled(true);
          try {
            await this.refreshAllAvailableModels();
            new import_obsidian.Notice("Successfully refreshed available models");
            if (onRefresh) onRefresh();
          } catch (error) {
            new import_obsidian.Notice(`Error refreshing models: ${error.message}`);
          } finally {
            button.setButtonText("Refresh Models");
            button.setDisabled(false);
          }
        }));
        await this.renderUnifiedModelDropdown(containerEl);
      }
      /**
       * Date Settings Section
       */
      renderDateSettings(containerEl) {
        new import_obsidian.Setting(containerEl).setName("Include Date with System Message").setDesc("Add the current date to the system message").addToggle((toggle) => toggle.setValue(this.plugin.settings.includeDateWithSystemMessage).onChange(async (value) => {
          this.plugin.settings.includeDateWithSystemMessage = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(containerEl).setName("Include Time with System Message").setDesc("Add the current time along with the date to the system message").addToggle((toggle) => toggle.setValue(this.plugin.settings.includeTimeWithSystemMessage).onChange(async (value) => {
          this.plugin.settings.includeTimeWithSystemMessage = value;
          await this.plugin.saveSettings();
        }));
      }
      /**
       * Note Reference Settings Section
       */
      renderNoteReferenceSettings(containerEl) {
        new import_obsidian.Setting(containerEl).setName("Enable Obsidian Links").setDesc("Read Obsidian links in messages using [[filename]] syntax").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableObsidianLinks).onChange(async (value) => {
          this.plugin.settings.enableObsidianLinks = value;
          await this.plugin.saveSettings();
        }));
        new import_obsidian.Setting(containerEl).setName("Enable Context Notes").setDesc("Attach specified note content to chat messages").addToggle((toggle) => toggle.setValue(this.plugin.settings.enableContextNotes).onChange(async (value) => {
          this.plugin.settings.enableContextNotes = value;
          await this.plugin.saveSettings();
        }));
        const contextNotesContainer = containerEl.createDiv("context-notes-container");
        contextNotesContainer.style.marginBottom = "24px";
        new import_obsidian.Setting(contextNotesContainer).setName("Context Notes").setDesc("Notes to attach as context (supports [[filename]] and [[filename#header]] syntax)").addTextArea((text) => {
          text.setPlaceholder("[[Note Name]]\n[[Another Note#Header]]").setValue(this.plugin.settings.contextNotes || "").onChange(async (value) => {
            this.plugin.settings.contextNotes = value;
            await this.plugin.saveSettings();
          });
          text.inputEl.rows = 4;
          text.inputEl.style.width = "100%";
        });
        new import_obsidian.Setting(containerEl).setName("Expand Linked Notes Recursively").setDesc("If enabled, when fetching a note, also fetch and expand links within that note recursively (prevents infinite loops).").addToggle((toggle) => {
          var _a2;
          return toggle.setValue((_a2 = this.plugin.settings.expandLinkedNotesRecursively) != null ? _a2 : false).onChange(async (value) => {
            this.plugin.settings.expandLinkedNotesRecursively = value;
            await this.plugin.saveSettings();
          });
        });
      }
      /**
       * Provider Configuration Section
       */
      renderProviderConfiguration(containerEl) {
        containerEl.createEl("p", {
          text: "API keys are configured in the main plugin settings. Use the test buttons below to verify connections and refresh available models.",
          cls: "setting-item-description"
        });
        this.renderOpenAIConfig(containerEl);
        this.renderAnthropicConfig(containerEl);
        this.renderGeminiConfig(containerEl);
        this.renderOllamaConfig(containerEl);
      }
      /**
       * Renders the unified model selection dropdown
       */
      async renderUnifiedModelDropdown(containerEl) {
        if (!this.plugin.settings.availableModels || this.plugin.settings.availableModels.length === 0) {
          this.plugin.settings.availableModels = await getAllAvailableModels(this.plugin.settings);
          await this.plugin.saveSettings();
        }
        new import_obsidian.Setting(containerEl).setName("Selected Model").setDesc("Choose from all available models across all configured providers").addDropdown((dropdown) => {
          if (!this.plugin.settings.availableModels || this.plugin.settings.availableModels.length === 0) {
            dropdown.addOption("", "No models available - configure providers below");
          } else {
            dropdown.addOption("", "Select a model...");
            const modelsByProvider = {};
            this.plugin.settings.availableModels.forEach((model) => {
              if (!modelsByProvider[model.provider]) {
                modelsByProvider[model.provider] = [];
              }
              modelsByProvider[model.provider].push(model);
            });
            Object.entries(modelsByProvider).forEach(([provider, models]) => {
              models.forEach((model) => {
                dropdown.addOption(model.id, model.name);
              });
            });
          }
          dropdown.setValue(this.plugin.settings.selectedModel || "").onChange(async (value) => {
            this.plugin.settings.selectedModel = value;
            if (value) {
              const provider = getProviderFromUnifiedModel(value);
              this.plugin.settings.provider = provider;
            }
            await this.plugin.saveSettings();
          });
        });
        if (this.plugin.settings.selectedModel && this.plugin.settings.availableModels) {
          const selectedModel = this.plugin.settings.availableModels.find(
            (model) => model.id === this.plugin.settings.selectedModel
          );
          if (selectedModel) {
            const infoEl = containerEl.createEl("div", { cls: "setting-item-description" });
            infoEl.setText(`Currently using: ${selectedModel.name}`);
          }
        }
      }
      /**
       * Refreshes available models from all configured providers
       */
      async refreshAllAvailableModels() {
        const providers = ["openai", "anthropic", "gemini", "ollama"];
        for (const providerType of providers) {
          try {
            const originalProvider = this.plugin.settings.provider;
            this.plugin.settings.provider = providerType;
            const providerInstance = createProvider(this.plugin.settings);
            const result = await providerInstance.testConnection();
            this.plugin.settings.provider = originalProvider;
            const providerSettings = this.plugin.settings[`${providerType}Settings`];
            if (result.success && result.models) {
              providerSettings.availableModels = result.models;
              providerSettings.lastTestResult = {
                timestamp: Date.now(),
                success: true,
                message: result.message
              };
            } else {
              providerSettings.lastTestResult = {
                timestamp: Date.now(),
                success: false,
                message: result.message
              };
            }
          } catch (error) {
            console.error(`Error testing ${providerType}:`, error);
          }
        }
        this.plugin.settings.availableModels = await getAllAvailableModels(this.plugin.settings);
        await this.plugin.saveSettings();
      }
      /**
       * Renders a collapsible section for provider configuration.
       * @param containerEl The HTML element to render the section into.
       * @param providerType The type of the provider (e.g., 'openai', 'anthropic').
       * @param displayName The display name of the provider (e.g., 'OpenAI', 'Anthropic').
       * @param renderSpecificSettings A callback function to render provider-specific settings.
       */
      _renderCollapsibleProviderConfig(containerEl, providerType, displayName, renderSpecificSettings) {
        const collapsibleContainer = containerEl.createDiv({ cls: "provider-collapsible" });
        const headerEl = collapsibleContainer.createEl("div", {
          cls: "provider-header",
          text: `\u25B6 ${displayName} Configuration`
        });
        Object.assign(headerEl.style, {
          cursor: "pointer",
          userSelect: "none",
          padding: "8px 0",
          fontWeight: "bold"
        });
        const contentEl = collapsibleContainer.createDiv({ cls: "provider-content" });
        contentEl.style.display = "none";
        contentEl.style.paddingLeft = "16px";
        let isExpanded = false;
        headerEl.addEventListener("click", () => {
          isExpanded = !isExpanded;
          contentEl.style.display = isExpanded ? "block" : "none";
          headerEl.textContent = `${isExpanded ? "\u25BC" : "\u25B6"} ${displayName} Configuration`;
        });
        const settings = this.plugin.settings[`${providerType}Settings`];
        const apiKeyStatus = settings.apiKey ? `API Key: ${settings.apiKey.substring(0, 8)}...` : "No API Key configured";
        const serverUrlStatus = settings.serverUrl ? `Server URL: ${settings.serverUrl}` : "No Server URL configured";
        contentEl.createEl("div", {
          cls: "setting-item-description",
          text: `${settings.apiKey ? apiKeyStatus : serverUrlStatus} (Configure in main plugin settings)`
        });
        if (renderSpecificSettings) {
          renderSpecificSettings(contentEl);
        }
        this.renderProviderTestSection(contentEl, providerType, displayName);
      }
      /**
       * Renders the OpenAI configuration section.
       * @param containerEl The HTML element to render the section into.
       */
      renderOpenAIConfig(containerEl) {
        this._renderCollapsibleProviderConfig(containerEl, "openai", "OpenAI", (contentEl) => {
          new import_obsidian.Setting(contentEl).setName("OpenAI Base URL").setDesc("Custom base URL for OpenAI API (optional)").addText((text) => text.setPlaceholder("https://api.openai.com/v1").setValue(this.plugin.settings.openaiSettings.baseUrl || "").onChange(async (value) => {
            this.plugin.settings.openaiSettings.baseUrl = value;
            await this.plugin.saveSettings();
          }));
        });
      }
      /**
       * Renders the Anthropic configuration section.
       * @param containerEl The HTML element to render the section into.
       */
      renderAnthropicConfig(containerEl) {
        this._renderCollapsibleProviderConfig(containerEl, "anthropic", "Anthropic");
      }
      /**
       * Renders the Gemini configuration section.
       * @param containerEl The HTML element to render the section into.
       */
      renderGeminiConfig(containerEl) {
        this._renderCollapsibleProviderConfig(containerEl, "gemini", "Gemini");
      }
      /**
       * Renders the Ollama configuration section.
       * @param containerEl The HTML element to render the section into.
       */
      renderOllamaConfig(containerEl) {
        this._renderCollapsibleProviderConfig(containerEl, "ollama", "Ollama", (contentEl) => {
          contentEl.createEl("div", {
            cls: "setting-item-description",
            text: "To use Ollama:"
          });
          const steps = contentEl.createEl("ol");
          steps.createEl("li", { text: "Install Ollama from https://ollama.ai" });
          steps.createEl("li", { text: "Start the Ollama server" });
          steps.createEl("li", { text: 'Pull models using "ollama pull model-name"' });
          steps.createEl("li", { text: "Test connection to see available models" });
        });
      }
      /**
       * Renders the provider connection test section.
       * @param containerEl The HTML element to render the section into.
       * @param provider The internal identifier for the provider (e.g., 'openai').
       * @param displayName The user-friendly name of the provider (e.g., 'OpenAI').
       */
      renderProviderTestSection(containerEl, provider, displayName) {
        const settings = this.plugin.settings[`${provider}Settings`];
        new import_obsidian.Setting(containerEl).setName("Test Connection").setDesc(`Verify your API key and fetch available models for ${displayName}`).addButton((button) => button.setButtonText("Test").onClick(async () => {
          button.setButtonText("Testing...");
          button.setDisabled(true);
          try {
            const originalProvider = this.plugin.settings.provider;
            this.plugin.settings.provider = provider;
            const providerInstance = createProvider(this.plugin.settings);
            const result = await providerInstance.testConnection();
            this.plugin.settings.provider = originalProvider;
            if (result.success && result.models) {
              settings.availableModels = result.models;
              settings.lastTestResult = {
                timestamp: Date.now(),
                success: true,
                message: result.message
              };
              await this.plugin.saveSettings();
              this.plugin.settings.availableModels = await getAllAvailableModels(this.plugin.settings);
              await this.plugin.saveSettings();
              new import_obsidian.Notice(result.message);
            } else {
              settings.lastTestResult = {
                timestamp: Date.now(),
                success: false,
                message: result.message
              };
              new import_obsidian.Notice(result.message);
            }
          } catch (error) {
            new import_obsidian.Notice(`Error: ${error.message}`);
          } finally {
            button.setButtonText("Test");
            button.setDisabled(false);
          }
        }));
        if (settings.lastTestResult) {
          const date = new Date(settings.lastTestResult.timestamp);
          containerEl.createEl("div", {
            text: `Last test: ${date.toLocaleString()} - ${settings.lastTestResult.message}`,
            cls: settings.lastTestResult.success ? "success" : "error"
          });
        }
        if (settings.availableModels && settings.availableModels.length > 0) {
          containerEl.createEl("div", {
            text: `Available models: ${settings.availableModels.map((m) => m.name || m.id).join(", ")}`,
            cls: "setting-item-description"
          });
        }
      }
      /**
       * Renders all settings sections in order for a modal or view.
       * @param containerEl The HTML element to render the sections into.
       * @param options Optional settings, e.g., onRefresh callback.
       */
      async renderAllSettings(containerEl, options) {
        await this.renderAIModelSettings(containerEl, options == null ? void 0 : options.onRefresh);
        this.renderDateSettings(containerEl);
        this.renderNoteReferenceSettings(containerEl);
        this.renderProviderConfiguration(containerEl);
      }
    };
  }
});

// src/components/chat/Buttons.ts
function createActionButton(label, tooltip, callback) {
  const button = document.createElement("button");
  button.addClass("ai-chat-action-button");
  button.setAttribute("aria-label", tooltip);
  const labelEl = document.createElement("span");
  labelEl.textContent = label;
  button.appendChild(labelEl);
  button.addEventListener("click", callback);
  return button;
}
async function copyToClipboard(text) {
  try {
    await navigator.clipboard.writeText(text);
  } catch (error) {
  }
}
var import_obsidian4;
var init_Buttons = __esm({
  "src/components/chat/Buttons.ts"() {
    import_obsidian4 = require("obsidian");
  }
});

// node_modules/js-yaml/dist/js-yaml.mjs
function isNothing(subject) {
  return typeof subject === "undefined" || subject === null;
}
function isObject(subject) {
  return typeof subject === "object" && subject !== null;
}
function toArray(sequence) {
  if (Array.isArray(sequence)) return sequence;
  else if (isNothing(sequence)) return [];
  return [sequence];
}
function extend(target, source) {
  var index, length, key, sourceKeys;
  if (source) {
    sourceKeys = Object.keys(source);
    for (index = 0, length = sourceKeys.length; index < length; index += 1) {
      key = sourceKeys[index];
      target[key] = source[key];
    }
  }
  return target;
}
function repeat(string, count) {
  var result = "", cycle;
  for (cycle = 0; cycle < count; cycle += 1) {
    result += string;
  }
  return result;
}
function isNegativeZero(number) {
  return number === 0 && Number.NEGATIVE_INFINITY === 1 / number;
}
function formatError(exception2, compact) {
  var where = "", message = exception2.reason || "(unknown reason)";
  if (!exception2.mark) return message;
  if (exception2.mark.name) {
    where += 'in "' + exception2.mark.name + '" ';
  }
  where += "(" + (exception2.mark.line + 1) + ":" + (exception2.mark.column + 1) + ")";
  if (!compact && exception2.mark.snippet) {
    where += "\n\n" + exception2.mark.snippet;
  }
  return message + " " + where;
}
function YAMLException$1(reason, mark) {
  Error.call(this);
  this.name = "YAMLException";
  this.reason = reason;
  this.mark = mark;
  this.message = formatError(this, false);
  if (Error.captureStackTrace) {
    Error.captureStackTrace(this, this.constructor);
  } else {
    this.stack = new Error().stack || "";
  }
}
function getLine(buffer, lineStart, lineEnd, position, maxLineLength) {
  var head = "";
  var tail = "";
  var maxHalfLength = Math.floor(maxLineLength / 2) - 1;
  if (position - lineStart > maxHalfLength) {
    head = " ... ";
    lineStart = position - maxHalfLength + head.length;
  }
  if (lineEnd - position > maxHalfLength) {
    tail = " ...";
    lineEnd = position + maxHalfLength - tail.length;
  }
  return {
    str: head + buffer.slice(lineStart, lineEnd).replace(/\t/g, "\u2192") + tail,
    pos: position - lineStart + head.length
    // relative position
  };
}
function padStart(string, max) {
  return common.repeat(" ", max - string.length) + string;
}
function makeSnippet(mark, options) {
  options = Object.create(options || null);
  if (!mark.buffer) return null;
  if (!options.maxLength) options.maxLength = 79;
  if (typeof options.indent !== "number") options.indent = 1;
  if (typeof options.linesBefore !== "number") options.linesBefore = 3;
  if (typeof options.linesAfter !== "number") options.linesAfter = 2;
  var re = /\r?\n|\r|\0/g;
  var lineStarts = [0];
  var lineEnds = [];
  var match;
  var foundLineNo = -1;
  while (match = re.exec(mark.buffer)) {
    lineEnds.push(match.index);
    lineStarts.push(match.index + match[0].length);
    if (mark.position <= match.index && foundLineNo < 0) {
      foundLineNo = lineStarts.length - 2;
    }
  }
  if (foundLineNo < 0) foundLineNo = lineStarts.length - 1;
  var result = "", i, line;
  var lineNoLength = Math.min(mark.line + options.linesAfter, lineEnds.length).toString().length;
  var maxLineLength = options.maxLength - (options.indent + lineNoLength + 3);
  for (i = 1; i <= options.linesBefore; i++) {
    if (foundLineNo - i < 0) break;
    line = getLine(
      mark.buffer,
      lineStarts[foundLineNo - i],
      lineEnds[foundLineNo - i],
      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo - i]),
      maxLineLength
    );
    result = common.repeat(" ", options.indent) + padStart((mark.line - i + 1).toString(), lineNoLength) + " | " + line.str + "\n" + result;
  }
  line = getLine(mark.buffer, lineStarts[foundLineNo], lineEnds[foundLineNo], mark.position, maxLineLength);
  result += common.repeat(" ", options.indent) + padStart((mark.line + 1).toString(), lineNoLength) + " | " + line.str + "\n";
  result += common.repeat("-", options.indent + lineNoLength + 3 + line.pos) + "^\n";
  for (i = 1; i <= options.linesAfter; i++) {
    if (foundLineNo + i >= lineEnds.length) break;
    line = getLine(
      mark.buffer,
      lineStarts[foundLineNo + i],
      lineEnds[foundLineNo + i],
      mark.position - (lineStarts[foundLineNo] - lineStarts[foundLineNo + i]),
      maxLineLength
    );
    result += common.repeat(" ", options.indent) + padStart((mark.line + i + 1).toString(), lineNoLength) + " | " + line.str + "\n";
  }
  return result.replace(/\n$/, "");
}
function compileStyleAliases(map2) {
  var result = {};
  if (map2 !== null) {
    Object.keys(map2).forEach(function(style) {
      map2[style].forEach(function(alias) {
        result[String(alias)] = style;
      });
    });
  }
  return result;
}
function Type$1(tag, options) {
  options = options || {};
  Object.keys(options).forEach(function(name) {
    if (TYPE_CONSTRUCTOR_OPTIONS.indexOf(name) === -1) {
      throw new exception('Unknown option "' + name + '" is met in definition of "' + tag + '" YAML type.');
    }
  });
  this.options = options;
  this.tag = tag;
  this.kind = options["kind"] || null;
  this.resolve = options["resolve"] || function() {
    return true;
  };
  this.construct = options["construct"] || function(data) {
    return data;
  };
  this.instanceOf = options["instanceOf"] || null;
  this.predicate = options["predicate"] || null;
  this.represent = options["represent"] || null;
  this.representName = options["representName"] || null;
  this.defaultStyle = options["defaultStyle"] || null;
  this.multi = options["multi"] || false;
  this.styleAliases = compileStyleAliases(options["styleAliases"] || null);
  if (YAML_NODE_KINDS.indexOf(this.kind) === -1) {
    throw new exception('Unknown kind "' + this.kind + '" is specified for "' + tag + '" YAML type.');
  }
}
function compileList(schema2, name) {
  var result = [];
  schema2[name].forEach(function(currentType) {
    var newIndex = result.length;
    result.forEach(function(previousType, previousIndex) {
      if (previousType.tag === currentType.tag && previousType.kind === currentType.kind && previousType.multi === currentType.multi) {
        newIndex = previousIndex;
      }
    });
    result[newIndex] = currentType;
  });
  return result;
}
function compileMap() {
  var result = {
    scalar: {},
    sequence: {},
    mapping: {},
    fallback: {},
    multi: {
      scalar: [],
      sequence: [],
      mapping: [],
      fallback: []
    }
  }, index, length;
  function collectType(type2) {
    if (type2.multi) {
      result.multi[type2.kind].push(type2);
      result.multi["fallback"].push(type2);
    } else {
      result[type2.kind][type2.tag] = result["fallback"][type2.tag] = type2;
    }
  }
  for (index = 0, length = arguments.length; index < length; index += 1) {
    arguments[index].forEach(collectType);
  }
  return result;
}
function Schema$1(definition) {
  return this.extend(definition);
}
function resolveYamlNull(data) {
  if (data === null) return true;
  var max = data.length;
  return max === 1 && data === "~" || max === 4 && (data === "null" || data === "Null" || data === "NULL");
}
function constructYamlNull() {
  return null;
}
function isNull(object) {
  return object === null;
}
function resolveYamlBoolean(data) {
  if (data === null) return false;
  var max = data.length;
  return max === 4 && (data === "true" || data === "True" || data === "TRUE") || max === 5 && (data === "false" || data === "False" || data === "FALSE");
}
function constructYamlBoolean(data) {
  return data === "true" || data === "True" || data === "TRUE";
}
function isBoolean(object) {
  return Object.prototype.toString.call(object) === "[object Boolean]";
}
function isHexCode(c) {
  return 48 <= c && c <= 57 || 65 <= c && c <= 70 || 97 <= c && c <= 102;
}
function isOctCode(c) {
  return 48 <= c && c <= 55;
}
function isDecCode(c) {
  return 48 <= c && c <= 57;
}
function resolveYamlInteger(data) {
  if (data === null) return false;
  var max = data.length, index = 0, hasDigits = false, ch;
  if (!max) return false;
  ch = data[index];
  if (ch === "-" || ch === "+") {
    ch = data[++index];
  }
  if (ch === "0") {
    if (index + 1 === max) return true;
    ch = data[++index];
    if (ch === "b") {
      index++;
      for (; index < max; index++) {
        ch = data[index];
        if (ch === "_") continue;
        if (ch !== "0" && ch !== "1") return false;
        hasDigits = true;
      }
      return hasDigits && ch !== "_";
    }
    if (ch === "x") {
      index++;
      for (; index < max; index++) {
        ch = data[index];
        if (ch === "_") continue;
        if (!isHexCode(data.charCodeAt(index))) return false;
        hasDigits = true;
      }
      return hasDigits && ch !== "_";
    }
    if (ch === "o") {
      index++;
      for (; index < max; index++) {
        ch = data[index];
        if (ch === "_") continue;
        if (!isOctCode(data.charCodeAt(index))) return false;
        hasDigits = true;
      }
      return hasDigits && ch !== "_";
    }
  }
  if (ch === "_") return false;
  for (; index < max; index++) {
    ch = data[index];
    if (ch === "_") continue;
    if (!isDecCode(data.charCodeAt(index))) {
      return false;
    }
    hasDigits = true;
  }
  if (!hasDigits || ch === "_") return false;
  return true;
}
function constructYamlInteger(data) {
  var value = data, sign = 1, ch;
  if (value.indexOf("_") !== -1) {
    value = value.replace(/_/g, "");
  }
  ch = value[0];
  if (ch === "-" || ch === "+") {
    if (ch === "-") sign = -1;
    value = value.slice(1);
    ch = value[0];
  }
  if (value === "0") return 0;
  if (ch === "0") {
    if (value[1] === "b") return sign * parseInt(value.slice(2), 2);
    if (value[1] === "x") return sign * parseInt(value.slice(2), 16);
    if (value[1] === "o") return sign * parseInt(value.slice(2), 8);
  }
  return sign * parseInt(value, 10);
}
function isInteger(object) {
  return Object.prototype.toString.call(object) === "[object Number]" && (object % 1 === 0 && !common.isNegativeZero(object));
}
function resolveYamlFloat(data) {
  if (data === null) return false;
  if (!YAML_FLOAT_PATTERN.test(data) || // Quick hack to not allow integers end with `_`
  // Probably should update regexp & check speed
  data[data.length - 1] === "_") {
    return false;
  }
  return true;
}
function constructYamlFloat(data) {
  var value, sign;
  value = data.replace(/_/g, "").toLowerCase();
  sign = value[0] === "-" ? -1 : 1;
  if ("+-".indexOf(value[0]) >= 0) {
    value = value.slice(1);
  }
  if (value === ".inf") {
    return sign === 1 ? Number.POSITIVE_INFINITY : Number.NEGATIVE_INFINITY;
  } else if (value === ".nan") {
    return NaN;
  }
  return sign * parseFloat(value, 10);
}
function representYamlFloat(object, style) {
  var res;
  if (isNaN(object)) {
    switch (style) {
      case "lowercase":
        return ".nan";
      case "uppercase":
        return ".NAN";
      case "camelcase":
        return ".NaN";
    }
  } else if (Number.POSITIVE_INFINITY === object) {
    switch (style) {
      case "lowercase":
        return ".inf";
      case "uppercase":
        return ".INF";
      case "camelcase":
        return ".Inf";
    }
  } else if (Number.NEGATIVE_INFINITY === object) {
    switch (style) {
      case "lowercase":
        return "-.inf";
      case "uppercase":
        return "-.INF";
      case "camelcase":
        return "-.Inf";
    }
  } else if (common.isNegativeZero(object)) {
    return "-0.0";
  }
  res = object.toString(10);
  return SCIENTIFIC_WITHOUT_DOT.test(res) ? res.replace("e", ".e") : res;
}
function isFloat(object) {
  return Object.prototype.toString.call(object) === "[object Number]" && (object % 1 !== 0 || common.isNegativeZero(object));
}
function resolveYamlTimestamp(data) {
  if (data === null) return false;
  if (YAML_DATE_REGEXP.exec(data) !== null) return true;
  if (YAML_TIMESTAMP_REGEXP.exec(data) !== null) return true;
  return false;
}
function constructYamlTimestamp(data) {
  var match, year, month, day, hour, minute, second, fraction = 0, delta = null, tz_hour, tz_minute, date;
  match = YAML_DATE_REGEXP.exec(data);
  if (match === null) match = YAML_TIMESTAMP_REGEXP.exec(data);
  if (match === null) throw new Error("Date resolve error");
  year = +match[1];
  month = +match[2] - 1;
  day = +match[3];
  if (!match[4]) {
    return new Date(Date.UTC(year, month, day));
  }
  hour = +match[4];
  minute = +match[5];
  second = +match[6];
  if (match[7]) {
    fraction = match[7].slice(0, 3);
    while (fraction.length < 3) {
      fraction += "0";
    }
    fraction = +fraction;
  }
  if (match[9]) {
    tz_hour = +match[10];
    tz_minute = +(match[11] || 0);
    delta = (tz_hour * 60 + tz_minute) * 6e4;
    if (match[9] === "-") delta = -delta;
  }
  date = new Date(Date.UTC(year, month, day, hour, minute, second, fraction));
  if (delta) date.setTime(date.getTime() - delta);
  return date;
}
function representYamlTimestamp(object) {
  return object.toISOString();
}
function resolveYamlMerge(data) {
  return data === "<<" || data === null;
}
function resolveYamlBinary(data) {
  if (data === null) return false;
  var code, idx, bitlen = 0, max = data.length, map2 = BASE64_MAP;
  for (idx = 0; idx < max; idx++) {
    code = map2.indexOf(data.charAt(idx));
    if (code > 64) continue;
    if (code < 0) return false;
    bitlen += 6;
  }
  return bitlen % 8 === 0;
}
function constructYamlBinary(data) {
  var idx, tailbits, input = data.replace(/[\r\n=]/g, ""), max = input.length, map2 = BASE64_MAP, bits = 0, result = [];
  for (idx = 0; idx < max; idx++) {
    if (idx % 4 === 0 && idx) {
      result.push(bits >> 16 & 255);
      result.push(bits >> 8 & 255);
      result.push(bits & 255);
    }
    bits = bits << 6 | map2.indexOf(input.charAt(idx));
  }
  tailbits = max % 4 * 6;
  if (tailbits === 0) {
    result.push(bits >> 16 & 255);
    result.push(bits >> 8 & 255);
    result.push(bits & 255);
  } else if (tailbits === 18) {
    result.push(bits >> 10 & 255);
    result.push(bits >> 2 & 255);
  } else if (tailbits === 12) {
    result.push(bits >> 4 & 255);
  }
  return new Uint8Array(result);
}
function representYamlBinary(object) {
  var result = "", bits = 0, idx, tail, max = object.length, map2 = BASE64_MAP;
  for (idx = 0; idx < max; idx++) {
    if (idx % 3 === 0 && idx) {
      result += map2[bits >> 18 & 63];
      result += map2[bits >> 12 & 63];
      result += map2[bits >> 6 & 63];
      result += map2[bits & 63];
    }
    bits = (bits << 8) + object[idx];
  }
  tail = max % 3;
  if (tail === 0) {
    result += map2[bits >> 18 & 63];
    result += map2[bits >> 12 & 63];
    result += map2[bits >> 6 & 63];
    result += map2[bits & 63];
  } else if (tail === 2) {
    result += map2[bits >> 10 & 63];
    result += map2[bits >> 4 & 63];
    result += map2[bits << 2 & 63];
    result += map2[64];
  } else if (tail === 1) {
    result += map2[bits >> 2 & 63];
    result += map2[bits << 4 & 63];
    result += map2[64];
    result += map2[64];
  }
  return result;
}
function isBinary(obj) {
  return Object.prototype.toString.call(obj) === "[object Uint8Array]";
}
function resolveYamlOmap(data) {
  if (data === null) return true;
  var objectKeys = [], index, length, pair, pairKey, pairHasKey, object = data;
  for (index = 0, length = object.length; index < length; index += 1) {
    pair = object[index];
    pairHasKey = false;
    if (_toString$2.call(pair) !== "[object Object]") return false;
    for (pairKey in pair) {
      if (_hasOwnProperty$3.call(pair, pairKey)) {
        if (!pairHasKey) pairHasKey = true;
        else return false;
      }
    }
    if (!pairHasKey) return false;
    if (objectKeys.indexOf(pairKey) === -1) objectKeys.push(pairKey);
    else return false;
  }
  return true;
}
function constructYamlOmap(data) {
  return data !== null ? data : [];
}
function resolveYamlPairs(data) {
  if (data === null) return true;
  var index, length, pair, keys, result, object = data;
  result = new Array(object.length);
  for (index = 0, length = object.length; index < length; index += 1) {
    pair = object[index];
    if (_toString$1.call(pair) !== "[object Object]") return false;
    keys = Object.keys(pair);
    if (keys.length !== 1) return false;
    result[index] = [keys[0], pair[keys[0]]];
  }
  return true;
}
function constructYamlPairs(data) {
  if (data === null) return [];
  var index, length, pair, keys, result, object = data;
  result = new Array(object.length);
  for (index = 0, length = object.length; index < length; index += 1) {
    pair = object[index];
    keys = Object.keys(pair);
    result[index] = [keys[0], pair[keys[0]]];
  }
  return result;
}
function resolveYamlSet(data) {
  if (data === null) return true;
  var key, object = data;
  for (key in object) {
    if (_hasOwnProperty$2.call(object, key)) {
      if (object[key] !== null) return false;
    }
  }
  return true;
}
function constructYamlSet(data) {
  return data !== null ? data : {};
}
function _class(obj) {
  return Object.prototype.toString.call(obj);
}
function is_EOL(c) {
  return c === 10 || c === 13;
}
function is_WHITE_SPACE(c) {
  return c === 9 || c === 32;
}
function is_WS_OR_EOL(c) {
  return c === 9 || c === 32 || c === 10 || c === 13;
}
function is_FLOW_INDICATOR(c) {
  return c === 44 || c === 91 || c === 93 || c === 123 || c === 125;
}
function fromHexCode(c) {
  var lc;
  if (48 <= c && c <= 57) {
    return c - 48;
  }
  lc = c | 32;
  if (97 <= lc && lc <= 102) {
    return lc - 97 + 10;
  }
  return -1;
}
function escapedHexLen(c) {
  if (c === 120) {
    return 2;
  }
  if (c === 117) {
    return 4;
  }
  if (c === 85) {
    return 8;
  }
  return 0;
}
function fromDecimalCode(c) {
  if (48 <= c && c <= 57) {
    return c - 48;
  }
  return -1;
}
function simpleEscapeSequence(c) {
  return c === 48 ? "\0" : c === 97 ? "\x07" : c === 98 ? "\b" : c === 116 ? "	" : c === 9 ? "	" : c === 110 ? "\n" : c === 118 ? "\v" : c === 102 ? "\f" : c === 114 ? "\r" : c === 101 ? "\x1B" : c === 32 ? " " : c === 34 ? '"' : c === 47 ? "/" : c === 92 ? "\\" : c === 78 ? "\x85" : c === 95 ? "\xA0" : c === 76 ? "\u2028" : c === 80 ? "\u2029" : "";
}
function charFromCodepoint(c) {
  if (c <= 65535) {
    return String.fromCharCode(c);
  }
  return String.fromCharCode(
    (c - 65536 >> 10) + 55296,
    (c - 65536 & 1023) + 56320
  );
}
function State$1(input, options) {
  this.input = input;
  this.filename = options["filename"] || null;
  this.schema = options["schema"] || _default;
  this.onWarning = options["onWarning"] || null;
  this.legacy = options["legacy"] || false;
  this.json = options["json"] || false;
  this.listener = options["listener"] || null;
  this.implicitTypes = this.schema.compiledImplicit;
  this.typeMap = this.schema.compiledTypeMap;
  this.length = input.length;
  this.position = 0;
  this.line = 0;
  this.lineStart = 0;
  this.lineIndent = 0;
  this.firstTabInLine = -1;
  this.documents = [];
}
function generateError(state, message) {
  var mark = {
    name: state.filename,
    buffer: state.input.slice(0, -1),
    // omit trailing \0
    position: state.position,
    line: state.line,
    column: state.position - state.lineStart
  };
  mark.snippet = snippet(mark);
  return new exception(message, mark);
}
function throwError(state, message) {
  throw generateError(state, message);
}
function throwWarning(state, message) {
  if (state.onWarning) {
    state.onWarning.call(null, generateError(state, message));
  }
}
function captureSegment(state, start, end, checkJson) {
  var _position, _length, _character, _result;
  if (start < end) {
    _result = state.input.slice(start, end);
    if (checkJson) {
      for (_position = 0, _length = _result.length; _position < _length; _position += 1) {
        _character = _result.charCodeAt(_position);
        if (!(_character === 9 || 32 <= _character && _character <= 1114111)) {
          throwError(state, "expected valid JSON character");
        }
      }
    } else if (PATTERN_NON_PRINTABLE.test(_result)) {
      throwError(state, "the stream contains non-printable characters");
    }
    state.result += _result;
  }
}
function mergeMappings(state, destination, source, overridableKeys) {
  var sourceKeys, key, index, quantity;
  if (!common.isObject(source)) {
    throwError(state, "cannot merge mappings; the provided source object is unacceptable");
  }
  sourceKeys = Object.keys(source);
  for (index = 0, quantity = sourceKeys.length; index < quantity; index += 1) {
    key = sourceKeys[index];
    if (!_hasOwnProperty$1.call(destination, key)) {
      destination[key] = source[key];
      overridableKeys[key] = true;
    }
  }
}
function storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, startLine, startLineStart, startPos) {
  var index, quantity;
  if (Array.isArray(keyNode)) {
    keyNode = Array.prototype.slice.call(keyNode);
    for (index = 0, quantity = keyNode.length; index < quantity; index += 1) {
      if (Array.isArray(keyNode[index])) {
        throwError(state, "nested arrays are not supported inside keys");
      }
      if (typeof keyNode === "object" && _class(keyNode[index]) === "[object Object]") {
        keyNode[index] = "[object Object]";
      }
    }
  }
  if (typeof keyNode === "object" && _class(keyNode) === "[object Object]") {
    keyNode = "[object Object]";
  }
  keyNode = String(keyNode);
  if (_result === null) {
    _result = {};
  }
  if (keyTag === "tag:yaml.org,2002:merge") {
    if (Array.isArray(valueNode)) {
      for (index = 0, quantity = valueNode.length; index < quantity; index += 1) {
        mergeMappings(state, _result, valueNode[index], overridableKeys);
      }
    } else {
      mergeMappings(state, _result, valueNode, overridableKeys);
    }
  } else {
    if (!state.json && !_hasOwnProperty$1.call(overridableKeys, keyNode) && _hasOwnProperty$1.call(_result, keyNode)) {
      state.line = startLine || state.line;
      state.lineStart = startLineStart || state.lineStart;
      state.position = startPos || state.position;
      throwError(state, "duplicated mapping key");
    }
    if (keyNode === "__proto__") {
      Object.defineProperty(_result, keyNode, {
        configurable: true,
        enumerable: true,
        writable: true,
        value: valueNode
      });
    } else {
      _result[keyNode] = valueNode;
    }
    delete overridableKeys[keyNode];
  }
  return _result;
}
function readLineBreak(state) {
  var ch;
  ch = state.input.charCodeAt(state.position);
  if (ch === 10) {
    state.position++;
  } else if (ch === 13) {
    state.position++;
    if (state.input.charCodeAt(state.position) === 10) {
      state.position++;
    }
  } else {
    throwError(state, "a line break is expected");
  }
  state.line += 1;
  state.lineStart = state.position;
  state.firstTabInLine = -1;
}
function skipSeparationSpace(state, allowComments, checkIndent) {
  var lineBreaks = 0, ch = state.input.charCodeAt(state.position);
  while (ch !== 0) {
    while (is_WHITE_SPACE(ch)) {
      if (ch === 9 && state.firstTabInLine === -1) {
        state.firstTabInLine = state.position;
      }
      ch = state.input.charCodeAt(++state.position);
    }
    if (allowComments && ch === 35) {
      do {
        ch = state.input.charCodeAt(++state.position);
      } while (ch !== 10 && ch !== 13 && ch !== 0);
    }
    if (is_EOL(ch)) {
      readLineBreak(state);
      ch = state.input.charCodeAt(state.position);
      lineBreaks++;
      state.lineIndent = 0;
      while (ch === 32) {
        state.lineIndent++;
        ch = state.input.charCodeAt(++state.position);
      }
    } else {
      break;
    }
  }
  if (checkIndent !== -1 && lineBreaks !== 0 && state.lineIndent < checkIndent) {
    throwWarning(state, "deficient indentation");
  }
  return lineBreaks;
}
function testDocumentSeparator(state) {
  var _position = state.position, ch;
  ch = state.input.charCodeAt(_position);
  if ((ch === 45 || ch === 46) && ch === state.input.charCodeAt(_position + 1) && ch === state.input.charCodeAt(_position + 2)) {
    _position += 3;
    ch = state.input.charCodeAt(_position);
    if (ch === 0 || is_WS_OR_EOL(ch)) {
      return true;
    }
  }
  return false;
}
function writeFoldedLines(state, count) {
  if (count === 1) {
    state.result += " ";
  } else if (count > 1) {
    state.result += common.repeat("\n", count - 1);
  }
}
function readPlainScalar(state, nodeIndent, withinFlowCollection) {
  var preceding, following, captureStart, captureEnd, hasPendingContent, _line, _lineStart, _lineIndent, _kind = state.kind, _result = state.result, ch;
  ch = state.input.charCodeAt(state.position);
  if (is_WS_OR_EOL(ch) || is_FLOW_INDICATOR(ch) || ch === 35 || ch === 38 || ch === 42 || ch === 33 || ch === 124 || ch === 62 || ch === 39 || ch === 34 || ch === 37 || ch === 64 || ch === 96) {
    return false;
  }
  if (ch === 63 || ch === 45) {
    following = state.input.charCodeAt(state.position + 1);
    if (is_WS_OR_EOL(following) || withinFlowCollection && is_FLOW_INDICATOR(following)) {
      return false;
    }
  }
  state.kind = "scalar";
  state.result = "";
  captureStart = captureEnd = state.position;
  hasPendingContent = false;
  while (ch !== 0) {
    if (ch === 58) {
      following = state.input.charCodeAt(state.position + 1);
      if (is_WS_OR_EOL(following) || withinFlowCollection && is_FLOW_INDICATOR(following)) {
        break;
      }
    } else if (ch === 35) {
      preceding = state.input.charCodeAt(state.position - 1);
      if (is_WS_OR_EOL(preceding)) {
        break;
      }
    } else if (state.position === state.lineStart && testDocumentSeparator(state) || withinFlowCollection && is_FLOW_INDICATOR(ch)) {
      break;
    } else if (is_EOL(ch)) {
      _line = state.line;
      _lineStart = state.lineStart;
      _lineIndent = state.lineIndent;
      skipSeparationSpace(state, false, -1);
      if (state.lineIndent >= nodeIndent) {
        hasPendingContent = true;
        ch = state.input.charCodeAt(state.position);
        continue;
      } else {
        state.position = captureEnd;
        state.line = _line;
        state.lineStart = _lineStart;
        state.lineIndent = _lineIndent;
        break;
      }
    }
    if (hasPendingContent) {
      captureSegment(state, captureStart, captureEnd, false);
      writeFoldedLines(state, state.line - _line);
      captureStart = captureEnd = state.position;
      hasPendingContent = false;
    }
    if (!is_WHITE_SPACE(ch)) {
      captureEnd = state.position + 1;
    }
    ch = state.input.charCodeAt(++state.position);
  }
  captureSegment(state, captureStart, captureEnd, false);
  if (state.result) {
    return true;
  }
  state.kind = _kind;
  state.result = _result;
  return false;
}
function readSingleQuotedScalar(state, nodeIndent) {
  var ch, captureStart, captureEnd;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 39) {
    return false;
  }
  state.kind = "scalar";
  state.result = "";
  state.position++;
  captureStart = captureEnd = state.position;
  while ((ch = state.input.charCodeAt(state.position)) !== 0) {
    if (ch === 39) {
      captureSegment(state, captureStart, state.position, true);
      ch = state.input.charCodeAt(++state.position);
      if (ch === 39) {
        captureStart = state.position;
        state.position++;
        captureEnd = state.position;
      } else {
        return true;
      }
    } else if (is_EOL(ch)) {
      captureSegment(state, captureStart, captureEnd, true);
      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));
      captureStart = captureEnd = state.position;
    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {
      throwError(state, "unexpected end of the document within a single quoted scalar");
    } else {
      state.position++;
      captureEnd = state.position;
    }
  }
  throwError(state, "unexpected end of the stream within a single quoted scalar");
}
function readDoubleQuotedScalar(state, nodeIndent) {
  var captureStart, captureEnd, hexLength, hexResult, tmp, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 34) {
    return false;
  }
  state.kind = "scalar";
  state.result = "";
  state.position++;
  captureStart = captureEnd = state.position;
  while ((ch = state.input.charCodeAt(state.position)) !== 0) {
    if (ch === 34) {
      captureSegment(state, captureStart, state.position, true);
      state.position++;
      return true;
    } else if (ch === 92) {
      captureSegment(state, captureStart, state.position, true);
      ch = state.input.charCodeAt(++state.position);
      if (is_EOL(ch)) {
        skipSeparationSpace(state, false, nodeIndent);
      } else if (ch < 256 && simpleEscapeCheck[ch]) {
        state.result += simpleEscapeMap[ch];
        state.position++;
      } else if ((tmp = escapedHexLen(ch)) > 0) {
        hexLength = tmp;
        hexResult = 0;
        for (; hexLength > 0; hexLength--) {
          ch = state.input.charCodeAt(++state.position);
          if ((tmp = fromHexCode(ch)) >= 0) {
            hexResult = (hexResult << 4) + tmp;
          } else {
            throwError(state, "expected hexadecimal character");
          }
        }
        state.result += charFromCodepoint(hexResult);
        state.position++;
      } else {
        throwError(state, "unknown escape sequence");
      }
      captureStart = captureEnd = state.position;
    } else if (is_EOL(ch)) {
      captureSegment(state, captureStart, captureEnd, true);
      writeFoldedLines(state, skipSeparationSpace(state, false, nodeIndent));
      captureStart = captureEnd = state.position;
    } else if (state.position === state.lineStart && testDocumentSeparator(state)) {
      throwError(state, "unexpected end of the document within a double quoted scalar");
    } else {
      state.position++;
      captureEnd = state.position;
    }
  }
  throwError(state, "unexpected end of the stream within a double quoted scalar");
}
function readFlowCollection(state, nodeIndent) {
  var readNext = true, _line, _lineStart, _pos, _tag = state.tag, _result, _anchor = state.anchor, following, terminator, isPair, isExplicitPair, isMapping, overridableKeys = /* @__PURE__ */ Object.create(null), keyNode, keyTag, valueNode, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch === 91) {
    terminator = 93;
    isMapping = false;
    _result = [];
  } else if (ch === 123) {
    terminator = 125;
    isMapping = true;
    _result = {};
  } else {
    return false;
  }
  if (state.anchor !== null) {
    state.anchorMap[state.anchor] = _result;
  }
  ch = state.input.charCodeAt(++state.position);
  while (ch !== 0) {
    skipSeparationSpace(state, true, nodeIndent);
    ch = state.input.charCodeAt(state.position);
    if (ch === terminator) {
      state.position++;
      state.tag = _tag;
      state.anchor = _anchor;
      state.kind = isMapping ? "mapping" : "sequence";
      state.result = _result;
      return true;
    } else if (!readNext) {
      throwError(state, "missed comma between flow collection entries");
    } else if (ch === 44) {
      throwError(state, "expected the node content, but found ','");
    }
    keyTag = keyNode = valueNode = null;
    isPair = isExplicitPair = false;
    if (ch === 63) {
      following = state.input.charCodeAt(state.position + 1);
      if (is_WS_OR_EOL(following)) {
        isPair = isExplicitPair = true;
        state.position++;
        skipSeparationSpace(state, true, nodeIndent);
      }
    }
    _line = state.line;
    _lineStart = state.lineStart;
    _pos = state.position;
    composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);
    keyTag = state.tag;
    keyNode = state.result;
    skipSeparationSpace(state, true, nodeIndent);
    ch = state.input.charCodeAt(state.position);
    if ((isExplicitPair || state.line === _line) && ch === 58) {
      isPair = true;
      ch = state.input.charCodeAt(++state.position);
      skipSeparationSpace(state, true, nodeIndent);
      composeNode(state, nodeIndent, CONTEXT_FLOW_IN, false, true);
      valueNode = state.result;
    }
    if (isMapping) {
      storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos);
    } else if (isPair) {
      _result.push(storeMappingPair(state, null, overridableKeys, keyTag, keyNode, valueNode, _line, _lineStart, _pos));
    } else {
      _result.push(keyNode);
    }
    skipSeparationSpace(state, true, nodeIndent);
    ch = state.input.charCodeAt(state.position);
    if (ch === 44) {
      readNext = true;
      ch = state.input.charCodeAt(++state.position);
    } else {
      readNext = false;
    }
  }
  throwError(state, "unexpected end of the stream within a flow collection");
}
function readBlockScalar(state, nodeIndent) {
  var captureStart, folding, chomping = CHOMPING_CLIP, didReadContent = false, detectedIndent = false, textIndent = nodeIndent, emptyLines = 0, atMoreIndented = false, tmp, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch === 124) {
    folding = false;
  } else if (ch === 62) {
    folding = true;
  } else {
    return false;
  }
  state.kind = "scalar";
  state.result = "";
  while (ch !== 0) {
    ch = state.input.charCodeAt(++state.position);
    if (ch === 43 || ch === 45) {
      if (CHOMPING_CLIP === chomping) {
        chomping = ch === 43 ? CHOMPING_KEEP : CHOMPING_STRIP;
      } else {
        throwError(state, "repeat of a chomping mode identifier");
      }
    } else if ((tmp = fromDecimalCode(ch)) >= 0) {
      if (tmp === 0) {
        throwError(state, "bad explicit indentation width of a block scalar; it cannot be less than one");
      } else if (!detectedIndent) {
        textIndent = nodeIndent + tmp - 1;
        detectedIndent = true;
      } else {
        throwError(state, "repeat of an indentation width identifier");
      }
    } else {
      break;
    }
  }
  if (is_WHITE_SPACE(ch)) {
    do {
      ch = state.input.charCodeAt(++state.position);
    } while (is_WHITE_SPACE(ch));
    if (ch === 35) {
      do {
        ch = state.input.charCodeAt(++state.position);
      } while (!is_EOL(ch) && ch !== 0);
    }
  }
  while (ch !== 0) {
    readLineBreak(state);
    state.lineIndent = 0;
    ch = state.input.charCodeAt(state.position);
    while ((!detectedIndent || state.lineIndent < textIndent) && ch === 32) {
      state.lineIndent++;
      ch = state.input.charCodeAt(++state.position);
    }
    if (!detectedIndent && state.lineIndent > textIndent) {
      textIndent = state.lineIndent;
    }
    if (is_EOL(ch)) {
      emptyLines++;
      continue;
    }
    if (state.lineIndent < textIndent) {
      if (chomping === CHOMPING_KEEP) {
        state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
      } else if (chomping === CHOMPING_CLIP) {
        if (didReadContent) {
          state.result += "\n";
        }
      }
      break;
    }
    if (folding) {
      if (is_WHITE_SPACE(ch)) {
        atMoreIndented = true;
        state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
      } else if (atMoreIndented) {
        atMoreIndented = false;
        state.result += common.repeat("\n", emptyLines + 1);
      } else if (emptyLines === 0) {
        if (didReadContent) {
          state.result += " ";
        }
      } else {
        state.result += common.repeat("\n", emptyLines);
      }
    } else {
      state.result += common.repeat("\n", didReadContent ? 1 + emptyLines : emptyLines);
    }
    didReadContent = true;
    detectedIndent = true;
    emptyLines = 0;
    captureStart = state.position;
    while (!is_EOL(ch) && ch !== 0) {
      ch = state.input.charCodeAt(++state.position);
    }
    captureSegment(state, captureStart, state.position, false);
  }
  return true;
}
function readBlockSequence(state, nodeIndent) {
  var _line, _tag = state.tag, _anchor = state.anchor, _result = [], following, detected = false, ch;
  if (state.firstTabInLine !== -1) return false;
  if (state.anchor !== null) {
    state.anchorMap[state.anchor] = _result;
  }
  ch = state.input.charCodeAt(state.position);
  while (ch !== 0) {
    if (state.firstTabInLine !== -1) {
      state.position = state.firstTabInLine;
      throwError(state, "tab characters must not be used in indentation");
    }
    if (ch !== 45) {
      break;
    }
    following = state.input.charCodeAt(state.position + 1);
    if (!is_WS_OR_EOL(following)) {
      break;
    }
    detected = true;
    state.position++;
    if (skipSeparationSpace(state, true, -1)) {
      if (state.lineIndent <= nodeIndent) {
        _result.push(null);
        ch = state.input.charCodeAt(state.position);
        continue;
      }
    }
    _line = state.line;
    composeNode(state, nodeIndent, CONTEXT_BLOCK_IN, false, true);
    _result.push(state.result);
    skipSeparationSpace(state, true, -1);
    ch = state.input.charCodeAt(state.position);
    if ((state.line === _line || state.lineIndent > nodeIndent) && ch !== 0) {
      throwError(state, "bad indentation of a sequence entry");
    } else if (state.lineIndent < nodeIndent) {
      break;
    }
  }
  if (detected) {
    state.tag = _tag;
    state.anchor = _anchor;
    state.kind = "sequence";
    state.result = _result;
    return true;
  }
  return false;
}
function readBlockMapping(state, nodeIndent, flowIndent) {
  var following, allowCompact, _line, _keyLine, _keyLineStart, _keyPos, _tag = state.tag, _anchor = state.anchor, _result = {}, overridableKeys = /* @__PURE__ */ Object.create(null), keyTag = null, keyNode = null, valueNode = null, atExplicitKey = false, detected = false, ch;
  if (state.firstTabInLine !== -1) return false;
  if (state.anchor !== null) {
    state.anchorMap[state.anchor] = _result;
  }
  ch = state.input.charCodeAt(state.position);
  while (ch !== 0) {
    if (!atExplicitKey && state.firstTabInLine !== -1) {
      state.position = state.firstTabInLine;
      throwError(state, "tab characters must not be used in indentation");
    }
    following = state.input.charCodeAt(state.position + 1);
    _line = state.line;
    if ((ch === 63 || ch === 58) && is_WS_OR_EOL(following)) {
      if (ch === 63) {
        if (atExplicitKey) {
          storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);
          keyTag = keyNode = valueNode = null;
        }
        detected = true;
        atExplicitKey = true;
        allowCompact = true;
      } else if (atExplicitKey) {
        atExplicitKey = false;
        allowCompact = true;
      } else {
        throwError(state, "incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line");
      }
      state.position += 1;
      ch = following;
    } else {
      _keyLine = state.line;
      _keyLineStart = state.lineStart;
      _keyPos = state.position;
      if (!composeNode(state, flowIndent, CONTEXT_FLOW_OUT, false, true)) {
        break;
      }
      if (state.line === _line) {
        ch = state.input.charCodeAt(state.position);
        while (is_WHITE_SPACE(ch)) {
          ch = state.input.charCodeAt(++state.position);
        }
        if (ch === 58) {
          ch = state.input.charCodeAt(++state.position);
          if (!is_WS_OR_EOL(ch)) {
            throwError(state, "a whitespace character is expected after the key-value separator within a block mapping");
          }
          if (atExplicitKey) {
            storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);
            keyTag = keyNode = valueNode = null;
          }
          detected = true;
          atExplicitKey = false;
          allowCompact = false;
          keyTag = state.tag;
          keyNode = state.result;
        } else if (detected) {
          throwError(state, "can not read an implicit mapping pair; a colon is missed");
        } else {
          state.tag = _tag;
          state.anchor = _anchor;
          return true;
        }
      } else if (detected) {
        throwError(state, "can not read a block mapping entry; a multiline key may not be an implicit key");
      } else {
        state.tag = _tag;
        state.anchor = _anchor;
        return true;
      }
    }
    if (state.line === _line || state.lineIndent > nodeIndent) {
      if (atExplicitKey) {
        _keyLine = state.line;
        _keyLineStart = state.lineStart;
        _keyPos = state.position;
      }
      if (composeNode(state, nodeIndent, CONTEXT_BLOCK_OUT, true, allowCompact)) {
        if (atExplicitKey) {
          keyNode = state.result;
        } else {
          valueNode = state.result;
        }
      }
      if (!atExplicitKey) {
        storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, valueNode, _keyLine, _keyLineStart, _keyPos);
        keyTag = keyNode = valueNode = null;
      }
      skipSeparationSpace(state, true, -1);
      ch = state.input.charCodeAt(state.position);
    }
    if ((state.line === _line || state.lineIndent > nodeIndent) && ch !== 0) {
      throwError(state, "bad indentation of a mapping entry");
    } else if (state.lineIndent < nodeIndent) {
      break;
    }
  }
  if (atExplicitKey) {
    storeMappingPair(state, _result, overridableKeys, keyTag, keyNode, null, _keyLine, _keyLineStart, _keyPos);
  }
  if (detected) {
    state.tag = _tag;
    state.anchor = _anchor;
    state.kind = "mapping";
    state.result = _result;
  }
  return detected;
}
function readTagProperty(state) {
  var _position, isVerbatim = false, isNamed = false, tagHandle, tagName, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 33) return false;
  if (state.tag !== null) {
    throwError(state, "duplication of a tag property");
  }
  ch = state.input.charCodeAt(++state.position);
  if (ch === 60) {
    isVerbatim = true;
    ch = state.input.charCodeAt(++state.position);
  } else if (ch === 33) {
    isNamed = true;
    tagHandle = "!!";
    ch = state.input.charCodeAt(++state.position);
  } else {
    tagHandle = "!";
  }
  _position = state.position;
  if (isVerbatim) {
    do {
      ch = state.input.charCodeAt(++state.position);
    } while (ch !== 0 && ch !== 62);
    if (state.position < state.length) {
      tagName = state.input.slice(_position, state.position);
      ch = state.input.charCodeAt(++state.position);
    } else {
      throwError(state, "unexpected end of the stream within a verbatim tag");
    }
  } else {
    while (ch !== 0 && !is_WS_OR_EOL(ch)) {
      if (ch === 33) {
        if (!isNamed) {
          tagHandle = state.input.slice(_position - 1, state.position + 1);
          if (!PATTERN_TAG_HANDLE.test(tagHandle)) {
            throwError(state, "named tag handle cannot contain such characters");
          }
          isNamed = true;
          _position = state.position + 1;
        } else {
          throwError(state, "tag suffix cannot contain exclamation marks");
        }
      }
      ch = state.input.charCodeAt(++state.position);
    }
    tagName = state.input.slice(_position, state.position);
    if (PATTERN_FLOW_INDICATORS.test(tagName)) {
      throwError(state, "tag suffix cannot contain flow indicator characters");
    }
  }
  if (tagName && !PATTERN_TAG_URI.test(tagName)) {
    throwError(state, "tag name cannot contain such characters: " + tagName);
  }
  try {
    tagName = decodeURIComponent(tagName);
  } catch (err) {
    throwError(state, "tag name is malformed: " + tagName);
  }
  if (isVerbatim) {
    state.tag = tagName;
  } else if (_hasOwnProperty$1.call(state.tagMap, tagHandle)) {
    state.tag = state.tagMap[tagHandle] + tagName;
  } else if (tagHandle === "!") {
    state.tag = "!" + tagName;
  } else if (tagHandle === "!!") {
    state.tag = "tag:yaml.org,2002:" + tagName;
  } else {
    throwError(state, 'undeclared tag handle "' + tagHandle + '"');
  }
  return true;
}
function readAnchorProperty(state) {
  var _position, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 38) return false;
  if (state.anchor !== null) {
    throwError(state, "duplication of an anchor property");
  }
  ch = state.input.charCodeAt(++state.position);
  _position = state.position;
  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {
    ch = state.input.charCodeAt(++state.position);
  }
  if (state.position === _position) {
    throwError(state, "name of an anchor node must contain at least one character");
  }
  state.anchor = state.input.slice(_position, state.position);
  return true;
}
function readAlias(state) {
  var _position, alias, ch;
  ch = state.input.charCodeAt(state.position);
  if (ch !== 42) return false;
  ch = state.input.charCodeAt(++state.position);
  _position = state.position;
  while (ch !== 0 && !is_WS_OR_EOL(ch) && !is_FLOW_INDICATOR(ch)) {
    ch = state.input.charCodeAt(++state.position);
  }
  if (state.position === _position) {
    throwError(state, "name of an alias node must contain at least one character");
  }
  alias = state.input.slice(_position, state.position);
  if (!_hasOwnProperty$1.call(state.anchorMap, alias)) {
    throwError(state, 'unidentified alias "' + alias + '"');
  }
  state.result = state.anchorMap[alias];
  skipSeparationSpace(state, true, -1);
  return true;
}
function composeNode(state, parentIndent, nodeContext, allowToSeek, allowCompact) {
  var allowBlockStyles, allowBlockScalars, allowBlockCollections, indentStatus = 1, atNewLine = false, hasContent = false, typeIndex, typeQuantity, typeList, type2, flowIndent, blockIndent;
  if (state.listener !== null) {
    state.listener("open", state);
  }
  state.tag = null;
  state.anchor = null;
  state.kind = null;
  state.result = null;
  allowBlockStyles = allowBlockScalars = allowBlockCollections = CONTEXT_BLOCK_OUT === nodeContext || CONTEXT_BLOCK_IN === nodeContext;
  if (allowToSeek) {
    if (skipSeparationSpace(state, true, -1)) {
      atNewLine = true;
      if (state.lineIndent > parentIndent) {
        indentStatus = 1;
      } else if (state.lineIndent === parentIndent) {
        indentStatus = 0;
      } else if (state.lineIndent < parentIndent) {
        indentStatus = -1;
      }
    }
  }
  if (indentStatus === 1) {
    while (readTagProperty(state) || readAnchorProperty(state)) {
      if (skipSeparationSpace(state, true, -1)) {
        atNewLine = true;
        allowBlockCollections = allowBlockStyles;
        if (state.lineIndent > parentIndent) {
          indentStatus = 1;
        } else if (state.lineIndent === parentIndent) {
          indentStatus = 0;
        } else if (state.lineIndent < parentIndent) {
          indentStatus = -1;
        }
      } else {
        allowBlockCollections = false;
      }
    }
  }
  if (allowBlockCollections) {
    allowBlockCollections = atNewLine || allowCompact;
  }
  if (indentStatus === 1 || CONTEXT_BLOCK_OUT === nodeContext) {
    if (CONTEXT_FLOW_IN === nodeContext || CONTEXT_FLOW_OUT === nodeContext) {
      flowIndent = parentIndent;
    } else {
      flowIndent = parentIndent + 1;
    }
    blockIndent = state.position - state.lineStart;
    if (indentStatus === 1) {
      if (allowBlockCollections && (readBlockSequence(state, blockIndent) || readBlockMapping(state, blockIndent, flowIndent)) || readFlowCollection(state, flowIndent)) {
        hasContent = true;
      } else {
        if (allowBlockScalars && readBlockScalar(state, flowIndent) || readSingleQuotedScalar(state, flowIndent) || readDoubleQuotedScalar(state, flowIndent)) {
          hasContent = true;
        } else if (readAlias(state)) {
          hasContent = true;
          if (state.tag !== null || state.anchor !== null) {
            throwError(state, "alias node should not have any properties");
          }
        } else if (readPlainScalar(state, flowIndent, CONTEXT_FLOW_IN === nodeContext)) {
          hasContent = true;
          if (state.tag === null) {
            state.tag = "?";
          }
        }
        if (state.anchor !== null) {
          state.anchorMap[state.anchor] = state.result;
        }
      }
    } else if (indentStatus === 0) {
      hasContent = allowBlockCollections && readBlockSequence(state, blockIndent);
    }
  }
  if (state.tag === null) {
    if (state.anchor !== null) {
      state.anchorMap[state.anchor] = state.result;
    }
  } else if (state.tag === "?") {
    if (state.result !== null && state.kind !== "scalar") {
      throwError(state, 'unacceptable node kind for !<?> tag; it should be "scalar", not "' + state.kind + '"');
    }
    for (typeIndex = 0, typeQuantity = state.implicitTypes.length; typeIndex < typeQuantity; typeIndex += 1) {
      type2 = state.implicitTypes[typeIndex];
      if (type2.resolve(state.result)) {
        state.result = type2.construct(state.result);
        state.tag = type2.tag;
        if (state.anchor !== null) {
          state.anchorMap[state.anchor] = state.result;
        }
        break;
      }
    }
  } else if (state.tag !== "!") {
    if (_hasOwnProperty$1.call(state.typeMap[state.kind || "fallback"], state.tag)) {
      type2 = state.typeMap[state.kind || "fallback"][state.tag];
    } else {
      type2 = null;
      typeList = state.typeMap.multi[state.kind || "fallback"];
      for (typeIndex = 0, typeQuantity = typeList.length; typeIndex < typeQuantity; typeIndex += 1) {
        if (state.tag.slice(0, typeList[typeIndex].tag.length) === typeList[typeIndex].tag) {
          type2 = typeList[typeIndex];
          break;
        }
      }
    }
    if (!type2) {
      throwError(state, "unknown tag !<" + state.tag + ">");
    }
    if (state.result !== null && type2.kind !== state.kind) {
      throwError(state, "unacceptable node kind for !<" + state.tag + '> tag; it should be "' + type2.kind + '", not "' + state.kind + '"');
    }
    if (!type2.resolve(state.result, state.tag)) {
      throwError(state, "cannot resolve a node with !<" + state.tag + "> explicit tag");
    } else {
      state.result = type2.construct(state.result, state.tag);
      if (state.anchor !== null) {
        state.anchorMap[state.anchor] = state.result;
      }
    }
  }
  if (state.listener !== null) {
    state.listener("close", state);
  }
  return state.tag !== null || state.anchor !== null || hasContent;
}
function readDocument(state) {
  var documentStart = state.position, _position, directiveName, directiveArgs, hasDirectives = false, ch;
  state.version = null;
  state.checkLineBreaks = state.legacy;
  state.tagMap = /* @__PURE__ */ Object.create(null);
  state.anchorMap = /* @__PURE__ */ Object.create(null);
  while ((ch = state.input.charCodeAt(state.position)) !== 0) {
    skipSeparationSpace(state, true, -1);
    ch = state.input.charCodeAt(state.position);
    if (state.lineIndent > 0 || ch !== 37) {
      break;
    }
    hasDirectives = true;
    ch = state.input.charCodeAt(++state.position);
    _position = state.position;
    while (ch !== 0 && !is_WS_OR_EOL(ch)) {
      ch = state.input.charCodeAt(++state.position);
    }
    directiveName = state.input.slice(_position, state.position);
    directiveArgs = [];
    if (directiveName.length < 1) {
      throwError(state, "directive name must not be less than one character in length");
    }
    while (ch !== 0) {
      while (is_WHITE_SPACE(ch)) {
        ch = state.input.charCodeAt(++state.position);
      }
      if (ch === 35) {
        do {
          ch = state.input.charCodeAt(++state.position);
        } while (ch !== 0 && !is_EOL(ch));
        break;
      }
      if (is_EOL(ch)) break;
      _position = state.position;
      while (ch !== 0 && !is_WS_OR_EOL(ch)) {
        ch = state.input.charCodeAt(++state.position);
      }
      directiveArgs.push(state.input.slice(_position, state.position));
    }
    if (ch !== 0) readLineBreak(state);
    if (_hasOwnProperty$1.call(directiveHandlers, directiveName)) {
      directiveHandlers[directiveName](state, directiveName, directiveArgs);
    } else {
      throwWarning(state, 'unknown document directive "' + directiveName + '"');
    }
  }
  skipSeparationSpace(state, true, -1);
  if (state.lineIndent === 0 && state.input.charCodeAt(state.position) === 45 && state.input.charCodeAt(state.position + 1) === 45 && state.input.charCodeAt(state.position + 2) === 45) {
    state.position += 3;
    skipSeparationSpace(state, true, -1);
  } else if (hasDirectives) {
    throwError(state, "directives end mark is expected");
  }
  composeNode(state, state.lineIndent - 1, CONTEXT_BLOCK_OUT, false, true);
  skipSeparationSpace(state, true, -1);
  if (state.checkLineBreaks && PATTERN_NON_ASCII_LINE_BREAKS.test(state.input.slice(documentStart, state.position))) {
    throwWarning(state, "non-ASCII line breaks are interpreted as content");
  }
  state.documents.push(state.result);
  if (state.position === state.lineStart && testDocumentSeparator(state)) {
    if (state.input.charCodeAt(state.position) === 46) {
      state.position += 3;
      skipSeparationSpace(state, true, -1);
    }
    return;
  }
  if (state.position < state.length - 1) {
    throwError(state, "end of the stream or a document separator is expected");
  } else {
    return;
  }
}
function loadDocuments(input, options) {
  input = String(input);
  options = options || {};
  if (input.length !== 0) {
    if (input.charCodeAt(input.length - 1) !== 10 && input.charCodeAt(input.length - 1) !== 13) {
      input += "\n";
    }
    if (input.charCodeAt(0) === 65279) {
      input = input.slice(1);
    }
  }
  var state = new State$1(input, options);
  var nullpos = input.indexOf("\0");
  if (nullpos !== -1) {
    state.position = nullpos;
    throwError(state, "null byte is not allowed in input");
  }
  state.input += "\0";
  while (state.input.charCodeAt(state.position) === 32) {
    state.lineIndent += 1;
    state.position += 1;
  }
  while (state.position < state.length - 1) {
    readDocument(state);
  }
  return state.documents;
}
function loadAll$1(input, iterator, options) {
  if (iterator !== null && typeof iterator === "object" && typeof options === "undefined") {
    options = iterator;
    iterator = null;
  }
  var documents = loadDocuments(input, options);
  if (typeof iterator !== "function") {
    return documents;
  }
  for (var index = 0, length = documents.length; index < length; index += 1) {
    iterator(documents[index]);
  }
}
function load$1(input, options) {
  var documents = loadDocuments(input, options);
  if (documents.length === 0) {
    return void 0;
  } else if (documents.length === 1) {
    return documents[0];
  }
  throw new exception("expected a single document in the stream, but found more");
}
function compileStyleMap(schema2, map2) {
  var result, keys, index, length, tag, style, type2;
  if (map2 === null) return {};
  result = {};
  keys = Object.keys(map2);
  for (index = 0, length = keys.length; index < length; index += 1) {
    tag = keys[index];
    style = String(map2[tag]);
    if (tag.slice(0, 2) === "!!") {
      tag = "tag:yaml.org,2002:" + tag.slice(2);
    }
    type2 = schema2.compiledTypeMap["fallback"][tag];
    if (type2 && _hasOwnProperty.call(type2.styleAliases, style)) {
      style = type2.styleAliases[style];
    }
    result[tag] = style;
  }
  return result;
}
function encodeHex(character) {
  var string, handle, length;
  string = character.toString(16).toUpperCase();
  if (character <= 255) {
    handle = "x";
    length = 2;
  } else if (character <= 65535) {
    handle = "u";
    length = 4;
  } else if (character <= 4294967295) {
    handle = "U";
    length = 8;
  } else {
    throw new exception("code point within a string may not be greater than 0xFFFFFFFF");
  }
  return "\\" + handle + common.repeat("0", length - string.length) + string;
}
function State(options) {
  this.schema = options["schema"] || _default;
  this.indent = Math.max(1, options["indent"] || 2);
  this.noArrayIndent = options["noArrayIndent"] || false;
  this.skipInvalid = options["skipInvalid"] || false;
  this.flowLevel = common.isNothing(options["flowLevel"]) ? -1 : options["flowLevel"];
  this.styleMap = compileStyleMap(this.schema, options["styles"] || null);
  this.sortKeys = options["sortKeys"] || false;
  this.lineWidth = options["lineWidth"] || 80;
  this.noRefs = options["noRefs"] || false;
  this.noCompatMode = options["noCompatMode"] || false;
  this.condenseFlow = options["condenseFlow"] || false;
  this.quotingType = options["quotingType"] === '"' ? QUOTING_TYPE_DOUBLE : QUOTING_TYPE_SINGLE;
  this.forceQuotes = options["forceQuotes"] || false;
  this.replacer = typeof options["replacer"] === "function" ? options["replacer"] : null;
  this.implicitTypes = this.schema.compiledImplicit;
  this.explicitTypes = this.schema.compiledExplicit;
  this.tag = null;
  this.result = "";
  this.duplicates = [];
  this.usedDuplicates = null;
}
function indentString(string, spaces) {
  var ind = common.repeat(" ", spaces), position = 0, next = -1, result = "", line, length = string.length;
  while (position < length) {
    next = string.indexOf("\n", position);
    if (next === -1) {
      line = string.slice(position);
      position = length;
    } else {
      line = string.slice(position, next + 1);
      position = next + 1;
    }
    if (line.length && line !== "\n") result += ind;
    result += line;
  }
  return result;
}
function generateNextLine(state, level) {
  return "\n" + common.repeat(" ", state.indent * level);
}
function testImplicitResolving(state, str2) {
  var index, length, type2;
  for (index = 0, length = state.implicitTypes.length; index < length; index += 1) {
    type2 = state.implicitTypes[index];
    if (type2.resolve(str2)) {
      return true;
    }
  }
  return false;
}
function isWhitespace(c) {
  return c === CHAR_SPACE || c === CHAR_TAB;
}
function isPrintable(c) {
  return 32 <= c && c <= 126 || 161 <= c && c <= 55295 && c !== 8232 && c !== 8233 || 57344 <= c && c <= 65533 && c !== CHAR_BOM || 65536 <= c && c <= 1114111;
}
function isNsCharOrWhitespace(c) {
  return isPrintable(c) && c !== CHAR_BOM && c !== CHAR_CARRIAGE_RETURN && c !== CHAR_LINE_FEED;
}
function isPlainSafe(c, prev, inblock) {
  var cIsNsCharOrWhitespace = isNsCharOrWhitespace(c);
  var cIsNsChar = cIsNsCharOrWhitespace && !isWhitespace(c);
  return (
    // ns-plain-safe
    (inblock ? (
      // c = flow-in
      cIsNsCharOrWhitespace
    ) : cIsNsCharOrWhitespace && c !== CHAR_COMMA && c !== CHAR_LEFT_SQUARE_BRACKET && c !== CHAR_RIGHT_SQUARE_BRACKET && c !== CHAR_LEFT_CURLY_BRACKET && c !== CHAR_RIGHT_CURLY_BRACKET) && c !== CHAR_SHARP && !(prev === CHAR_COLON && !cIsNsChar) || isNsCharOrWhitespace(prev) && !isWhitespace(prev) && c === CHAR_SHARP || prev === CHAR_COLON && cIsNsChar
  );
}
function isPlainSafeFirst(c) {
  return isPrintable(c) && c !== CHAR_BOM && !isWhitespace(c) && c !== CHAR_MINUS && c !== CHAR_QUESTION && c !== CHAR_COLON && c !== CHAR_COMMA && c !== CHAR_LEFT_SQUARE_BRACKET && c !== CHAR_RIGHT_SQUARE_BRACKET && c !== CHAR_LEFT_CURLY_BRACKET && c !== CHAR_RIGHT_CURLY_BRACKET && c !== CHAR_SHARP && c !== CHAR_AMPERSAND && c !== CHAR_ASTERISK && c !== CHAR_EXCLAMATION && c !== CHAR_VERTICAL_LINE && c !== CHAR_EQUALS && c !== CHAR_GREATER_THAN && c !== CHAR_SINGLE_QUOTE && c !== CHAR_DOUBLE_QUOTE && c !== CHAR_PERCENT && c !== CHAR_COMMERCIAL_AT && c !== CHAR_GRAVE_ACCENT;
}
function isPlainSafeLast(c) {
  return !isWhitespace(c) && c !== CHAR_COLON;
}
function codePointAt(string, pos) {
  var first = string.charCodeAt(pos), second;
  if (first >= 55296 && first <= 56319 && pos + 1 < string.length) {
    second = string.charCodeAt(pos + 1);
    if (second >= 56320 && second <= 57343) {
      return (first - 55296) * 1024 + second - 56320 + 65536;
    }
  }
  return first;
}
function needIndentIndicator(string) {
  var leadingSpaceRe = /^\n* /;
  return leadingSpaceRe.test(string);
}
function chooseScalarStyle(string, singleLineOnly, indentPerLevel, lineWidth, testAmbiguousType, quotingType, forceQuotes, inblock) {
  var i;
  var char = 0;
  var prevChar = null;
  var hasLineBreak = false;
  var hasFoldableLine = false;
  var shouldTrackWidth = lineWidth !== -1;
  var previousLineBreak = -1;
  var plain = isPlainSafeFirst(codePointAt(string, 0)) && isPlainSafeLast(codePointAt(string, string.length - 1));
  if (singleLineOnly || forceQuotes) {
    for (i = 0; i < string.length; char >= 65536 ? i += 2 : i++) {
      char = codePointAt(string, i);
      if (!isPrintable(char)) {
        return STYLE_DOUBLE;
      }
      plain = plain && isPlainSafe(char, prevChar, inblock);
      prevChar = char;
    }
  } else {
    for (i = 0; i < string.length; char >= 65536 ? i += 2 : i++) {
      char = codePointAt(string, i);
      if (char === CHAR_LINE_FEED) {
        hasLineBreak = true;
        if (shouldTrackWidth) {
          hasFoldableLine = hasFoldableLine || // Foldable line = too long, and not more-indented.
          i - previousLineBreak - 1 > lineWidth && string[previousLineBreak + 1] !== " ";
          previousLineBreak = i;
        }
      } else if (!isPrintable(char)) {
        return STYLE_DOUBLE;
      }
      plain = plain && isPlainSafe(char, prevChar, inblock);
      prevChar = char;
    }
    hasFoldableLine = hasFoldableLine || shouldTrackWidth && (i - previousLineBreak - 1 > lineWidth && string[previousLineBreak + 1] !== " ");
  }
  if (!hasLineBreak && !hasFoldableLine) {
    if (plain && !forceQuotes && !testAmbiguousType(string)) {
      return STYLE_PLAIN;
    }
    return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;
  }
  if (indentPerLevel > 9 && needIndentIndicator(string)) {
    return STYLE_DOUBLE;
  }
  if (!forceQuotes) {
    return hasFoldableLine ? STYLE_FOLDED : STYLE_LITERAL;
  }
  return quotingType === QUOTING_TYPE_DOUBLE ? STYLE_DOUBLE : STYLE_SINGLE;
}
function writeScalar(state, string, level, iskey, inblock) {
  state.dump = function() {
    if (string.length === 0) {
      return state.quotingType === QUOTING_TYPE_DOUBLE ? '""' : "''";
    }
    if (!state.noCompatMode) {
      if (DEPRECATED_BOOLEANS_SYNTAX.indexOf(string) !== -1 || DEPRECATED_BASE60_SYNTAX.test(string)) {
        return state.quotingType === QUOTING_TYPE_DOUBLE ? '"' + string + '"' : "'" + string + "'";
      }
    }
    var indent = state.indent * Math.max(1, level);
    var lineWidth = state.lineWidth === -1 ? -1 : Math.max(Math.min(state.lineWidth, 40), state.lineWidth - indent);
    var singleLineOnly = iskey || state.flowLevel > -1 && level >= state.flowLevel;
    function testAmbiguity(string2) {
      return testImplicitResolving(state, string2);
    }
    switch (chooseScalarStyle(
      string,
      singleLineOnly,
      state.indent,
      lineWidth,
      testAmbiguity,
      state.quotingType,
      state.forceQuotes && !iskey,
      inblock
    )) {
      case STYLE_PLAIN:
        return string;
      case STYLE_SINGLE:
        return "'" + string.replace(/'/g, "''") + "'";
      case STYLE_LITERAL:
        return "|" + blockHeader(string, state.indent) + dropEndingNewline(indentString(string, indent));
      case STYLE_FOLDED:
        return ">" + blockHeader(string, state.indent) + dropEndingNewline(indentString(foldString(string, lineWidth), indent));
      case STYLE_DOUBLE:
        return '"' + escapeString(string) + '"';
      default:
        throw new exception("impossible error: invalid scalar style");
    }
  }();
}
function blockHeader(string, indentPerLevel) {
  var indentIndicator = needIndentIndicator(string) ? String(indentPerLevel) : "";
  var clip = string[string.length - 1] === "\n";
  var keep = clip && (string[string.length - 2] === "\n" || string === "\n");
  var chomp = keep ? "+" : clip ? "" : "-";
  return indentIndicator + chomp + "\n";
}
function dropEndingNewline(string) {
  return string[string.length - 1] === "\n" ? string.slice(0, -1) : string;
}
function foldString(string, width) {
  var lineRe = /(\n+)([^\n]*)/g;
  var result = function() {
    var nextLF = string.indexOf("\n");
    nextLF = nextLF !== -1 ? nextLF : string.length;
    lineRe.lastIndex = nextLF;
    return foldLine(string.slice(0, nextLF), width);
  }();
  var prevMoreIndented = string[0] === "\n" || string[0] === " ";
  var moreIndented;
  var match;
  while (match = lineRe.exec(string)) {
    var prefix = match[1], line = match[2];
    moreIndented = line[0] === " ";
    result += prefix + (!prevMoreIndented && !moreIndented && line !== "" ? "\n" : "") + foldLine(line, width);
    prevMoreIndented = moreIndented;
  }
  return result;
}
function foldLine(line, width) {
  if (line === "" || line[0] === " ") return line;
  var breakRe = / [^ ]/g;
  var match;
  var start = 0, end, curr = 0, next = 0;
  var result = "";
  while (match = breakRe.exec(line)) {
    next = match.index;
    if (next - start > width) {
      end = curr > start ? curr : next;
      result += "\n" + line.slice(start, end);
      start = end + 1;
    }
    curr = next;
  }
  result += "\n";
  if (line.length - start > width && curr > start) {
    result += line.slice(start, curr) + "\n" + line.slice(curr + 1);
  } else {
    result += line.slice(start);
  }
  return result.slice(1);
}
function escapeString(string) {
  var result = "";
  var char = 0;
  var escapeSeq;
  for (var i = 0; i < string.length; char >= 65536 ? i += 2 : i++) {
    char = codePointAt(string, i);
    escapeSeq = ESCAPE_SEQUENCES[char];
    if (!escapeSeq && isPrintable(char)) {
      result += string[i];
      if (char >= 65536) result += string[i + 1];
    } else {
      result += escapeSeq || encodeHex(char);
    }
  }
  return result;
}
function writeFlowSequence(state, level, object) {
  var _result = "", _tag = state.tag, index, length, value;
  for (index = 0, length = object.length; index < length; index += 1) {
    value = object[index];
    if (state.replacer) {
      value = state.replacer.call(object, String(index), value);
    }
    if (writeNode(state, level, value, false, false) || typeof value === "undefined" && writeNode(state, level, null, false, false)) {
      if (_result !== "") _result += "," + (!state.condenseFlow ? " " : "");
      _result += state.dump;
    }
  }
  state.tag = _tag;
  state.dump = "[" + _result + "]";
}
function writeBlockSequence(state, level, object, compact) {
  var _result = "", _tag = state.tag, index, length, value;
  for (index = 0, length = object.length; index < length; index += 1) {
    value = object[index];
    if (state.replacer) {
      value = state.replacer.call(object, String(index), value);
    }
    if (writeNode(state, level + 1, value, true, true, false, true) || typeof value === "undefined" && writeNode(state, level + 1, null, true, true, false, true)) {
      if (!compact || _result !== "") {
        _result += generateNextLine(state, level);
      }
      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
        _result += "-";
      } else {
        _result += "- ";
      }
      _result += state.dump;
    }
  }
  state.tag = _tag;
  state.dump = _result || "[]";
}
function writeFlowMapping(state, level, object) {
  var _result = "", _tag = state.tag, objectKeyList = Object.keys(object), index, length, objectKey, objectValue, pairBuffer;
  for (index = 0, length = objectKeyList.length; index < length; index += 1) {
    pairBuffer = "";
    if (_result !== "") pairBuffer += ", ";
    if (state.condenseFlow) pairBuffer += '"';
    objectKey = objectKeyList[index];
    objectValue = object[objectKey];
    if (state.replacer) {
      objectValue = state.replacer.call(object, objectKey, objectValue);
    }
    if (!writeNode(state, level, objectKey, false, false)) {
      continue;
    }
    if (state.dump.length > 1024) pairBuffer += "? ";
    pairBuffer += state.dump + (state.condenseFlow ? '"' : "") + ":" + (state.condenseFlow ? "" : " ");
    if (!writeNode(state, level, objectValue, false, false)) {
      continue;
    }
    pairBuffer += state.dump;
    _result += pairBuffer;
  }
  state.tag = _tag;
  state.dump = "{" + _result + "}";
}
function writeBlockMapping(state, level, object, compact) {
  var _result = "", _tag = state.tag, objectKeyList = Object.keys(object), index, length, objectKey, objectValue, explicitPair, pairBuffer;
  if (state.sortKeys === true) {
    objectKeyList.sort();
  } else if (typeof state.sortKeys === "function") {
    objectKeyList.sort(state.sortKeys);
  } else if (state.sortKeys) {
    throw new exception("sortKeys must be a boolean or a function");
  }
  for (index = 0, length = objectKeyList.length; index < length; index += 1) {
    pairBuffer = "";
    if (!compact || _result !== "") {
      pairBuffer += generateNextLine(state, level);
    }
    objectKey = objectKeyList[index];
    objectValue = object[objectKey];
    if (state.replacer) {
      objectValue = state.replacer.call(object, objectKey, objectValue);
    }
    if (!writeNode(state, level + 1, objectKey, true, true, true)) {
      continue;
    }
    explicitPair = state.tag !== null && state.tag !== "?" || state.dump && state.dump.length > 1024;
    if (explicitPair) {
      if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
        pairBuffer += "?";
      } else {
        pairBuffer += "? ";
      }
    }
    pairBuffer += state.dump;
    if (explicitPair) {
      pairBuffer += generateNextLine(state, level);
    }
    if (!writeNode(state, level + 1, objectValue, true, explicitPair)) {
      continue;
    }
    if (state.dump && CHAR_LINE_FEED === state.dump.charCodeAt(0)) {
      pairBuffer += ":";
    } else {
      pairBuffer += ": ";
    }
    pairBuffer += state.dump;
    _result += pairBuffer;
  }
  state.tag = _tag;
  state.dump = _result || "{}";
}
function detectType(state, object, explicit) {
  var _result, typeList, index, length, type2, style;
  typeList = explicit ? state.explicitTypes : state.implicitTypes;
  for (index = 0, length = typeList.length; index < length; index += 1) {
    type2 = typeList[index];
    if ((type2.instanceOf || type2.predicate) && (!type2.instanceOf || typeof object === "object" && object instanceof type2.instanceOf) && (!type2.predicate || type2.predicate(object))) {
      if (explicit) {
        if (type2.multi && type2.representName) {
          state.tag = type2.representName(object);
        } else {
          state.tag = type2.tag;
        }
      } else {
        state.tag = "?";
      }
      if (type2.represent) {
        style = state.styleMap[type2.tag] || type2.defaultStyle;
        if (_toString.call(type2.represent) === "[object Function]") {
          _result = type2.represent(object, style);
        } else if (_hasOwnProperty.call(type2.represent, style)) {
          _result = type2.represent[style](object, style);
        } else {
          throw new exception("!<" + type2.tag + '> tag resolver accepts not "' + style + '" style');
        }
        state.dump = _result;
      }
      return true;
    }
  }
  return false;
}
function writeNode(state, level, object, block, compact, iskey, isblockseq) {
  state.tag = null;
  state.dump = object;
  if (!detectType(state, object, false)) {
    detectType(state, object, true);
  }
  var type2 = _toString.call(state.dump);
  var inblock = block;
  var tagStr;
  if (block) {
    block = state.flowLevel < 0 || state.flowLevel > level;
  }
  var objectOrArray = type2 === "[object Object]" || type2 === "[object Array]", duplicateIndex, duplicate;
  if (objectOrArray) {
    duplicateIndex = state.duplicates.indexOf(object);
    duplicate = duplicateIndex !== -1;
  }
  if (state.tag !== null && state.tag !== "?" || duplicate || state.indent !== 2 && level > 0) {
    compact = false;
  }
  if (duplicate && state.usedDuplicates[duplicateIndex]) {
    state.dump = "*ref_" + duplicateIndex;
  } else {
    if (objectOrArray && duplicate && !state.usedDuplicates[duplicateIndex]) {
      state.usedDuplicates[duplicateIndex] = true;
    }
    if (type2 === "[object Object]") {
      if (block && Object.keys(state.dump).length !== 0) {
        writeBlockMapping(state, level, state.dump, compact);
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + state.dump;
        }
      } else {
        writeFlowMapping(state, level, state.dump);
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + " " + state.dump;
        }
      }
    } else if (type2 === "[object Array]") {
      if (block && state.dump.length !== 0) {
        if (state.noArrayIndent && !isblockseq && level > 0) {
          writeBlockSequence(state, level - 1, state.dump, compact);
        } else {
          writeBlockSequence(state, level, state.dump, compact);
        }
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + state.dump;
        }
      } else {
        writeFlowSequence(state, level, state.dump);
        if (duplicate) {
          state.dump = "&ref_" + duplicateIndex + " " + state.dump;
        }
      }
    } else if (type2 === "[object String]") {
      if (state.tag !== "?") {
        writeScalar(state, state.dump, level, iskey, inblock);
      }
    } else if (type2 === "[object Undefined]") {
      return false;
    } else {
      if (state.skipInvalid) return false;
      throw new exception("unacceptable kind of an object to dump " + type2);
    }
    if (state.tag !== null && state.tag !== "?") {
      tagStr = encodeURI(
        state.tag[0] === "!" ? state.tag.slice(1) : state.tag
      ).replace(/!/g, "%21");
      if (state.tag[0] === "!") {
        tagStr = "!" + tagStr;
      } else if (tagStr.slice(0, 18) === "tag:yaml.org,2002:") {
        tagStr = "!!" + tagStr.slice(18);
      } else {
        tagStr = "!<" + tagStr + ">";
      }
      state.dump = tagStr + " " + state.dump;
    }
  }
  return true;
}
function getDuplicateReferences(object, state) {
  var objects = [], duplicatesIndexes = [], index, length;
  inspectNode(object, objects, duplicatesIndexes);
  for (index = 0, length = duplicatesIndexes.length; index < length; index += 1) {
    state.duplicates.push(objects[duplicatesIndexes[index]]);
  }
  state.usedDuplicates = new Array(length);
}
function inspectNode(object, objects, duplicatesIndexes) {
  var objectKeyList, index, length;
  if (object !== null && typeof object === "object") {
    index = objects.indexOf(object);
    if (index !== -1) {
      if (duplicatesIndexes.indexOf(index) === -1) {
        duplicatesIndexes.push(index);
      }
    } else {
      objects.push(object);
      if (Array.isArray(object)) {
        for (index = 0, length = object.length; index < length; index += 1) {
          inspectNode(object[index], objects, duplicatesIndexes);
        }
      } else {
        objectKeyList = Object.keys(object);
        for (index = 0, length = objectKeyList.length; index < length; index += 1) {
          inspectNode(object[objectKeyList[index]], objects, duplicatesIndexes);
        }
      }
    }
  }
}
function dump$1(input, options) {
  options = options || {};
  var state = new State(options);
  if (!state.noRefs) getDuplicateReferences(input, state);
  var value = input;
  if (state.replacer) {
    value = state.replacer.call({ "": value }, "", value);
  }
  if (writeNode(state, 0, value, true, true)) return state.dump + "\n";
  return "";
}
function renamed(from, to) {
  return function() {
    throw new Error("Function yaml." + from + " is removed in js-yaml 4. Use yaml." + to + " instead, which is now safe by default.");
  };
}
var isNothing_1, isObject_1, toArray_1, repeat_1, isNegativeZero_1, extend_1, common, exception, snippet, TYPE_CONSTRUCTOR_OPTIONS, YAML_NODE_KINDS, type, schema, str, seq, map, failsafe, _null, bool, int, YAML_FLOAT_PATTERN, SCIENTIFIC_WITHOUT_DOT, float, json, core, YAML_DATE_REGEXP, YAML_TIMESTAMP_REGEXP, timestamp, merge, BASE64_MAP, binary, _hasOwnProperty$3, _toString$2, omap, _toString$1, pairs, _hasOwnProperty$2, set, _default, _hasOwnProperty$1, CONTEXT_FLOW_IN, CONTEXT_FLOW_OUT, CONTEXT_BLOCK_IN, CONTEXT_BLOCK_OUT, CHOMPING_CLIP, CHOMPING_STRIP, CHOMPING_KEEP, PATTERN_NON_PRINTABLE, PATTERN_NON_ASCII_LINE_BREAKS, PATTERN_FLOW_INDICATORS, PATTERN_TAG_HANDLE, PATTERN_TAG_URI, simpleEscapeCheck, simpleEscapeMap, i, directiveHandlers, loadAll_1, load_1, loader, _toString, _hasOwnProperty, CHAR_BOM, CHAR_TAB, CHAR_LINE_FEED, CHAR_CARRIAGE_RETURN, CHAR_SPACE, CHAR_EXCLAMATION, CHAR_DOUBLE_QUOTE, CHAR_SHARP, CHAR_PERCENT, CHAR_AMPERSAND, CHAR_SINGLE_QUOTE, CHAR_ASTERISK, CHAR_COMMA, CHAR_MINUS, CHAR_COLON, CHAR_EQUALS, CHAR_GREATER_THAN, CHAR_QUESTION, CHAR_COMMERCIAL_AT, CHAR_LEFT_SQUARE_BRACKET, CHAR_RIGHT_SQUARE_BRACKET, CHAR_GRAVE_ACCENT, CHAR_LEFT_CURLY_BRACKET, CHAR_VERTICAL_LINE, CHAR_RIGHT_CURLY_BRACKET, ESCAPE_SEQUENCES, DEPRECATED_BOOLEANS_SYNTAX, DEPRECATED_BASE60_SYNTAX, QUOTING_TYPE_SINGLE, QUOTING_TYPE_DOUBLE, STYLE_PLAIN, STYLE_SINGLE, STYLE_LITERAL, STYLE_FOLDED, STYLE_DOUBLE, dump_1, dumper, load, loadAll, dump, safeLoad, safeLoadAll, safeDump;
var init_js_yaml = __esm({
  "node_modules/js-yaml/dist/js-yaml.mjs"() {
    isNothing_1 = isNothing;
    isObject_1 = isObject;
    toArray_1 = toArray;
    repeat_1 = repeat;
    isNegativeZero_1 = isNegativeZero;
    extend_1 = extend;
    common = {
      isNothing: isNothing_1,
      isObject: isObject_1,
      toArray: toArray_1,
      repeat: repeat_1,
      isNegativeZero: isNegativeZero_1,
      extend: extend_1
    };
    YAMLException$1.prototype = Object.create(Error.prototype);
    YAMLException$1.prototype.constructor = YAMLException$1;
    YAMLException$1.prototype.toString = function toString(compact) {
      return this.name + ": " + formatError(this, compact);
    };
    exception = YAMLException$1;
    snippet = makeSnippet;
    TYPE_CONSTRUCTOR_OPTIONS = [
      "kind",
      "multi",
      "resolve",
      "construct",
      "instanceOf",
      "predicate",
      "represent",
      "representName",
      "defaultStyle",
      "styleAliases"
    ];
    YAML_NODE_KINDS = [
      "scalar",
      "sequence",
      "mapping"
    ];
    type = Type$1;
    Schema$1.prototype.extend = function extend2(definition) {
      var implicit = [];
      var explicit = [];
      if (definition instanceof type) {
        explicit.push(definition);
      } else if (Array.isArray(definition)) {
        explicit = explicit.concat(definition);
      } else if (definition && (Array.isArray(definition.implicit) || Array.isArray(definition.explicit))) {
        if (definition.implicit) implicit = implicit.concat(definition.implicit);
        if (definition.explicit) explicit = explicit.concat(definition.explicit);
      } else {
        throw new exception("Schema.extend argument should be a Type, [ Type ], or a schema definition ({ implicit: [...], explicit: [...] })");
      }
      implicit.forEach(function(type$1) {
        if (!(type$1 instanceof type)) {
          throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");
        }
        if (type$1.loadKind && type$1.loadKind !== "scalar") {
          throw new exception("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.");
        }
        if (type$1.multi) {
          throw new exception("There is a multi type in the implicit list of a schema. Multi tags can only be listed as explicit.");
        }
      });
      explicit.forEach(function(type$1) {
        if (!(type$1 instanceof type)) {
          throw new exception("Specified list of YAML types (or a single Type object) contains a non-Type object.");
        }
      });
      var result = Object.create(Schema$1.prototype);
      result.implicit = (this.implicit || []).concat(implicit);
      result.explicit = (this.explicit || []).concat(explicit);
      result.compiledImplicit = compileList(result, "implicit");
      result.compiledExplicit = compileList(result, "explicit");
      result.compiledTypeMap = compileMap(result.compiledImplicit, result.compiledExplicit);
      return result;
    };
    schema = Schema$1;
    str = new type("tag:yaml.org,2002:str", {
      kind: "scalar",
      construct: function(data) {
        return data !== null ? data : "";
      }
    });
    seq = new type("tag:yaml.org,2002:seq", {
      kind: "sequence",
      construct: function(data) {
        return data !== null ? data : [];
      }
    });
    map = new type("tag:yaml.org,2002:map", {
      kind: "mapping",
      construct: function(data) {
        return data !== null ? data : {};
      }
    });
    failsafe = new schema({
      explicit: [
        str,
        seq,
        map
      ]
    });
    _null = new type("tag:yaml.org,2002:null", {
      kind: "scalar",
      resolve: resolveYamlNull,
      construct: constructYamlNull,
      predicate: isNull,
      represent: {
        canonical: function() {
          return "~";
        },
        lowercase: function() {
          return "null";
        },
        uppercase: function() {
          return "NULL";
        },
        camelcase: function() {
          return "Null";
        },
        empty: function() {
          return "";
        }
      },
      defaultStyle: "lowercase"
    });
    bool = new type("tag:yaml.org,2002:bool", {
      kind: "scalar",
      resolve: resolveYamlBoolean,
      construct: constructYamlBoolean,
      predicate: isBoolean,
      represent: {
        lowercase: function(object) {
          return object ? "true" : "false";
        },
        uppercase: function(object) {
          return object ? "TRUE" : "FALSE";
        },
        camelcase: function(object) {
          return object ? "True" : "False";
        }
      },
      defaultStyle: "lowercase"
    });
    int = new type("tag:yaml.org,2002:int", {
      kind: "scalar",
      resolve: resolveYamlInteger,
      construct: constructYamlInteger,
      predicate: isInteger,
      represent: {
        binary: function(obj) {
          return obj >= 0 ? "0b" + obj.toString(2) : "-0b" + obj.toString(2).slice(1);
        },
        octal: function(obj) {
          return obj >= 0 ? "0o" + obj.toString(8) : "-0o" + obj.toString(8).slice(1);
        },
        decimal: function(obj) {
          return obj.toString(10);
        },
        /* eslint-disable max-len */
        hexadecimal: function(obj) {
          return obj >= 0 ? "0x" + obj.toString(16).toUpperCase() : "-0x" + obj.toString(16).toUpperCase().slice(1);
        }
      },
      defaultStyle: "decimal",
      styleAliases: {
        binary: [2, "bin"],
        octal: [8, "oct"],
        decimal: [10, "dec"],
        hexadecimal: [16, "hex"]
      }
    });
    YAML_FLOAT_PATTERN = new RegExp(
      // 2.5e4, 2.5 and integers
      "^(?:[-+]?(?:[0-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$"
    );
    SCIENTIFIC_WITHOUT_DOT = /^[-+]?[0-9]+e/;
    float = new type("tag:yaml.org,2002:float", {
      kind: "scalar",
      resolve: resolveYamlFloat,
      construct: constructYamlFloat,
      predicate: isFloat,
      represent: representYamlFloat,
      defaultStyle: "lowercase"
    });
    json = failsafe.extend({
      implicit: [
        _null,
        bool,
        int,
        float
      ]
    });
    core = json;
    YAML_DATE_REGEXP = new RegExp(
      "^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"
    );
    YAML_TIMESTAMP_REGEXP = new RegExp(
      "^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$"
    );
    timestamp = new type("tag:yaml.org,2002:timestamp", {
      kind: "scalar",
      resolve: resolveYamlTimestamp,
      construct: constructYamlTimestamp,
      instanceOf: Date,
      represent: representYamlTimestamp
    });
    merge = new type("tag:yaml.org,2002:merge", {
      kind: "scalar",
      resolve: resolveYamlMerge
    });
    BASE64_MAP = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=\n\r";
    binary = new type("tag:yaml.org,2002:binary", {
      kind: "scalar",
      resolve: resolveYamlBinary,
      construct: constructYamlBinary,
      predicate: isBinary,
      represent: representYamlBinary
    });
    _hasOwnProperty$3 = Object.prototype.hasOwnProperty;
    _toString$2 = Object.prototype.toString;
    omap = new type("tag:yaml.org,2002:omap", {
      kind: "sequence",
      resolve: resolveYamlOmap,
      construct: constructYamlOmap
    });
    _toString$1 = Object.prototype.toString;
    pairs = new type("tag:yaml.org,2002:pairs", {
      kind: "sequence",
      resolve: resolveYamlPairs,
      construct: constructYamlPairs
    });
    _hasOwnProperty$2 = Object.prototype.hasOwnProperty;
    set = new type("tag:yaml.org,2002:set", {
      kind: "mapping",
      resolve: resolveYamlSet,
      construct: constructYamlSet
    });
    _default = core.extend({
      implicit: [
        timestamp,
        merge
      ],
      explicit: [
        binary,
        omap,
        pairs,
        set
      ]
    });
    _hasOwnProperty$1 = Object.prototype.hasOwnProperty;
    CONTEXT_FLOW_IN = 1;
    CONTEXT_FLOW_OUT = 2;
    CONTEXT_BLOCK_IN = 3;
    CONTEXT_BLOCK_OUT = 4;
    CHOMPING_CLIP = 1;
    CHOMPING_STRIP = 2;
    CHOMPING_KEEP = 3;
    PATTERN_NON_PRINTABLE = /[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/;
    PATTERN_NON_ASCII_LINE_BREAKS = /[\x85\u2028\u2029]/;
    PATTERN_FLOW_INDICATORS = /[,\[\]\{\}]/;
    PATTERN_TAG_HANDLE = /^(?:!|!!|![a-z\-]+!)$/i;
    PATTERN_TAG_URI = /^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;
    simpleEscapeCheck = new Array(256);
    simpleEscapeMap = new Array(256);
    for (i = 0; i < 256; i++) {
      simpleEscapeCheck[i] = simpleEscapeSequence(i) ? 1 : 0;
      simpleEscapeMap[i] = simpleEscapeSequence(i);
    }
    directiveHandlers = {
      YAML: function handleYamlDirective(state, name, args) {
        var match, major, minor;
        if (state.version !== null) {
          throwError(state, "duplication of %YAML directive");
        }
        if (args.length !== 1) {
          throwError(state, "YAML directive accepts exactly one argument");
        }
        match = /^([0-9]+)\.([0-9]+)$/.exec(args[0]);
        if (match === null) {
          throwError(state, "ill-formed argument of the YAML directive");
        }
        major = parseInt(match[1], 10);
        minor = parseInt(match[2], 10);
        if (major !== 1) {
          throwError(state, "unacceptable YAML version of the document");
        }
        state.version = args[0];
        state.checkLineBreaks = minor < 2;
        if (minor !== 1 && minor !== 2) {
          throwWarning(state, "unsupported YAML version of the document");
        }
      },
      TAG: function handleTagDirective(state, name, args) {
        var handle, prefix;
        if (args.length !== 2) {
          throwError(state, "TAG directive accepts exactly two arguments");
        }
        handle = args[0];
        prefix = args[1];
        if (!PATTERN_TAG_HANDLE.test(handle)) {
          throwError(state, "ill-formed tag handle (first argument) of the TAG directive");
        }
        if (_hasOwnProperty$1.call(state.tagMap, handle)) {
          throwError(state, 'there is a previously declared suffix for "' + handle + '" tag handle');
        }
        if (!PATTERN_TAG_URI.test(prefix)) {
          throwError(state, "ill-formed tag prefix (second argument) of the TAG directive");
        }
        try {
          prefix = decodeURIComponent(prefix);
        } catch (err) {
          throwError(state, "tag prefix is malformed: " + prefix);
        }
        state.tagMap[handle] = prefix;
      }
    };
    loadAll_1 = loadAll$1;
    load_1 = load$1;
    loader = {
      loadAll: loadAll_1,
      load: load_1
    };
    _toString = Object.prototype.toString;
    _hasOwnProperty = Object.prototype.hasOwnProperty;
    CHAR_BOM = 65279;
    CHAR_TAB = 9;
    CHAR_LINE_FEED = 10;
    CHAR_CARRIAGE_RETURN = 13;
    CHAR_SPACE = 32;
    CHAR_EXCLAMATION = 33;
    CHAR_DOUBLE_QUOTE = 34;
    CHAR_SHARP = 35;
    CHAR_PERCENT = 37;
    CHAR_AMPERSAND = 38;
    CHAR_SINGLE_QUOTE = 39;
    CHAR_ASTERISK = 42;
    CHAR_COMMA = 44;
    CHAR_MINUS = 45;
    CHAR_COLON = 58;
    CHAR_EQUALS = 61;
    CHAR_GREATER_THAN = 62;
    CHAR_QUESTION = 63;
    CHAR_COMMERCIAL_AT = 64;
    CHAR_LEFT_SQUARE_BRACKET = 91;
    CHAR_RIGHT_SQUARE_BRACKET = 93;
    CHAR_GRAVE_ACCENT = 96;
    CHAR_LEFT_CURLY_BRACKET = 123;
    CHAR_VERTICAL_LINE = 124;
    CHAR_RIGHT_CURLY_BRACKET = 125;
    ESCAPE_SEQUENCES = {};
    ESCAPE_SEQUENCES[0] = "\\0";
    ESCAPE_SEQUENCES[7] = "\\a";
    ESCAPE_SEQUENCES[8] = "\\b";
    ESCAPE_SEQUENCES[9] = "\\t";
    ESCAPE_SEQUENCES[10] = "\\n";
    ESCAPE_SEQUENCES[11] = "\\v";
    ESCAPE_SEQUENCES[12] = "\\f";
    ESCAPE_SEQUENCES[13] = "\\r";
    ESCAPE_SEQUENCES[27] = "\\e";
    ESCAPE_SEQUENCES[34] = '\\"';
    ESCAPE_SEQUENCES[92] = "\\\\";
    ESCAPE_SEQUENCES[133] = "\\N";
    ESCAPE_SEQUENCES[160] = "\\_";
    ESCAPE_SEQUENCES[8232] = "\\L";
    ESCAPE_SEQUENCES[8233] = "\\P";
    DEPRECATED_BOOLEANS_SYNTAX = [
      "y",
      "Y",
      "yes",
      "Yes",
      "YES",
      "on",
      "On",
      "ON",
      "n",
      "N",
      "no",
      "No",
      "NO",
      "off",
      "Off",
      "OFF"
    ];
    DEPRECATED_BASE60_SYNTAX = /^[-+]?[0-9_]+(?::[0-9_]+)+(?:\.[0-9_]*)?$/;
    QUOTING_TYPE_SINGLE = 1;
    QUOTING_TYPE_DOUBLE = 2;
    STYLE_PLAIN = 1;
    STYLE_SINGLE = 2;
    STYLE_LITERAL = 3;
    STYLE_FOLDED = 4;
    STYLE_DOUBLE = 5;
    dump_1 = dump$1;
    dumper = {
      dump: dump_1
    };
    load = loader.load;
    loadAll = loader.loadAll;
    dump = dumper.dump;
    safeLoad = renamed("safeLoad", "load");
    safeLoadAll = renamed("safeLoadAll", "loadAll");
    safeDump = renamed("safeDump", "dump");
  }
});

// src/components/chat/chatPersistence.ts
function buildChatYaml(settings, provider, model) {
  if (settings.selectedModel) {
    const providerType = getProviderFromUnifiedModel(settings.selectedModel);
    const modelId = getModelIdFromUnifiedModel(settings.selectedModel);
    const yamlObj = {
      provider: providerType,
      model: modelId,
      unified_model: settings.selectedModel,
      // Add unified model ID for future compatibility
      system_message: settings.systemMessage,
      temperature: settings.temperature
    };
    return `---
${dump(yamlObj)}---
`;
  } else {
    const yamlObj = {
      provider: provider || settings.provider,
      model: model || getCurrentModelForProvider(settings),
      system_message: settings.systemMessage,
      temperature: settings.temperature
    };
    return `---
${dump(yamlObj)}---
`;
  }
}
function getCurrentModelForProvider(settings) {
  switch (settings.provider) {
    case "openai":
      return settings.openaiSettings.model;
    case "anthropic":
      return settings.anthropicSettings.model;
    case "gemini":
      return settings.geminiSettings.model;
    case "ollama":
      return settings.ollamaSettings.model;
    default:
      return "";
  }
}
async function saveChatAsNote({
  app,
  messages,
  settings,
  provider,
  model,
  chatSeparator,
  chatNoteFolder
}) {
  let chatContent = "";
  messages.forEach((el, index) => {
    var _a2;
    const rawContent = el.dataset.rawContent;
    const content = rawContent !== void 0 ? rawContent : ((_a2 = el.querySelector(".message-content")) == null ? void 0 : _a2.textContent) || "";
    chatContent += content;
    if (index < messages.length - 1) {
      chatContent += "\n\n" + chatSeparator + "\n\n";
    }
  });
  const yaml = buildChatYaml(settings, provider, model);
  chatContent = chatContent.replace(/^---[\s\S]*?---\n?/, "");
  const noteContent = yaml + "\n" + chatContent.trimStart();
  const now = /* @__PURE__ */ new Date();
  const pad = (n) => n.toString().padStart(2, "0");
  const fileName = `Chat Export ${now.getFullYear()}-${pad(now.getMonth() + 1)}-${pad(now.getDate())} ${pad(now.getHours())}-${pad(now.getMinutes())}.md`;
  let filePath = fileName;
  const folder = chatNoteFolder == null ? void 0 : chatNoteFolder.trim();
  if (folder) {
    filePath = folder.replace(/[/\\]+$/, "") + "/" + fileName;
  }
  try {
    await app.vault.create(filePath, noteContent);
    new import_obsidian7.Notice(`Chat saved as note: ${filePath}`);
  } catch (e) {
    new import_obsidian7.Notice("Failed to save chat as note.");
  }
}
async function loadChatYamlAndApplySettings({
  app,
  plugin,
  settings,
  file
}) {
  let content = await app.vault.read(file);
  const yamlMatch = content.match(/^---\n([\s\S]*?)\n---/);
  let yamlObj = {};
  if (yamlMatch) {
    try {
      yamlObj = load(yamlMatch[1]) || {};
    } catch (e) {
      yamlObj = {};
    }
  }
  if (yamlObj.unified_model) {
    settings.selectedModel = yamlObj.unified_model;
  } else if (yamlObj.provider && yamlObj.model) {
    const unifiedModelId = `${yamlObj.provider}:${yamlObj.model}`;
    settings.selectedModel = unifiedModelId;
    settings.provider = yamlObj.provider;
    switch (yamlObj.provider) {
      case "openai":
        settings.openaiSettings.model = yamlObj.model;
        break;
      case "anthropic":
        settings.anthropicSettings.model = yamlObj.model;
        break;
      case "gemini":
        settings.geminiSettings.model = yamlObj.model;
        break;
      case "ollama":
        settings.ollamaSettings.model = yamlObj.model;
        break;
    }
  }
  let newSystemMessage = yamlObj.system_message || settings.systemMessage;
  let newTemperature = settings.temperature;
  if (yamlObj.temperature !== void 0) {
    const tempNum = parseFloat(yamlObj.temperature);
    if (!isNaN(tempNum)) newTemperature = tempNum;
  }
  settings.systemMessage = newSystemMessage;
  settings.temperature = newTemperature;
  if (plugin.onSettingsLoadedFromNote) {
    plugin.onSettingsLoadedFromNote(settings);
  }
  return {
    provider: yamlObj.provider,
    model: yamlObj.model,
    unifiedModel: settings.selectedModel,
    systemMessage: newSystemMessage,
    temperature: newTemperature
  };
}
var import_obsidian7;
var init_chatPersistence = __esm({
  "src/components/chat/chatPersistence.ts"() {
    import_obsidian7 = require("obsidian");
    init_js_yaml();
    init_providers();
  }
});

// src/components/chat/ChatHelpModal.ts
var import_obsidian8, ChatHelpModal;
var init_ChatHelpModal = __esm({
  "src/components/chat/ChatHelpModal.ts"() {
    import_obsidian8 = require("obsidian");
    ChatHelpModal = class extends import_obsidian8.Modal {
      constructor(app) {
        super(app);
      }
      createCollapsibleSection(title, contentCallback, expanded = true) {
        const sectionContainer = createDiv();
        sectionContainer.addClass("ai-collapsible-section");
        const header = createDiv();
        header.addClass("ai-collapsible-header");
        const arrow = createSpan();
        arrow.addClass("ai-collapsible-arrow");
        arrow.textContent = expanded ? "\u25BC" : "\u25B6";
        const titleSpan = createSpan();
        titleSpan.textContent = title;
        header.appendChild(arrow);
        header.appendChild(titleSpan);
        const content = createDiv();
        content.addClass("ai-collapsible-content");
        content.style.display = expanded ? "block" : "none";
        header.addEventListener("click", () => {
          const isExpanded = content.style.display !== "none";
          content.style.display = isExpanded ? "none" : "block";
          arrow.textContent = isExpanded ? "\u25B6" : "\u25BC";
        });
        sectionContainer.appendChild(header);
        sectionContainer.appendChild(content);
        const originalContent = this.contentEl;
        this.contentEl = content;
        contentCallback();
        this.contentEl = originalContent;
        return sectionContainer;
      }
      onOpen() {
        this.titleEl.setText("AI Chat Help");
        this.contentEl.empty();
        this.contentEl.appendChild(this.createCollapsibleSection("Slash Commands", () => {
          this.contentEl.innerHTML = `
                <code>/clear</code> \u2013 Clear the chat<br>
                <code>/copy</code> \u2013 Copy all chat<br>
                <code>/save</code> \u2013 Save chat as note<br>
                <code>/settings</code> \u2013 Open settings<br>
                <code>/help</code> \u2013 Show this help<br>
                <br>
            `;
        }));
        this.contentEl.appendChild(this.createCollapsibleSection("Keyboard Shortcuts (when input is focused)", () => {
          this.contentEl.innerHTML = `
                <code>Ctrl+Shift+C</code> \u2013 Clear chat<br>
                <code>Ctrl+Shift+Y</code> \u2013 Copy all chat<br>
                <code>Ctrl+Shift+S</code> \u2013 Save as note<br>
                <code>Ctrl+Shift+O</code> \u2013 Open settings<br>
                <code>Ctrl+Shift+H</code> \u2013 Show this help<br>
                <br>
            `;
        }));
        this.contentEl.appendChild(this.createCollapsibleSection("Other", () => {
          this.contentEl.innerHTML = `
                <code>Enter</code> \u2013 Send message<br>
                <code>Shift+Enter</code> \u2013 Newline<br>
                <br>
                You can also use the buttons at the top of the chat window.
            `;
        }));
        this.contentEl.appendChild(this.createCollapsibleSection("Reference Current Note", () => {
          this.contentEl.innerHTML = `
                <strong>What is it?</strong><br>
                When enabled, the AI can see the content of your currently active note during chat. This helps the AI give more relevant, context-aware responses.<br><br>

                <strong>How to use:</strong><br>
                <ul style="margin-top:0;margin-bottom:0.5em;">
                  <li>Click the <code>\u{1F4DD}</code> button at the top of the chat window to toggle referencing the current note.</li>
                  <li>Or use the slash command <code>/ref</code> or keyboard shortcut <code>Ctrl+Shift+R</code>.</li>
                  <li>The name of the referenced note will appear in faded small text below the buttons when enabled.</li>
                </ul>

                <strong>Notes:</strong><br>
                - When referencing is enabled, the AI receives:<br>
                <ul style="margin-top:0;margin-bottom:0.5em;">
                  <li>The system prompt (always)</li>
                  <li>Context notes (if enabled in settings)</li>
                  <li>The content of the currently active note</li>
                  <li>The chat history (all previous user/assistant messages)</li>
                </ul>
                - Only the currently active note is shared in addition to the above context.<br>
                - You can turn this on or off at any time.<br>
                - No other notes or personal data are accessed.<br>
                - The <code>\u{1F4DD}</code> button will show "On" or "Off" to indicate the current state.
            `;
        }));
      }
    };
  }
});

// src/components/chat/SettingsModal.ts
var SettingsModal_exports = {};
__export(SettingsModal_exports, {
  SettingsModal: () => SettingsModal
});
var import_obsidian9, SettingsModal;
var init_SettingsModal = __esm({
  "src/components/chat/SettingsModal.ts"() {
    import_obsidian9 = require("obsidian");
    init_SettingsSections();
    SettingsModal = class extends import_obsidian9.Modal {
      constructor(app, plugin) {
        super(app);
        __publicField(this, "plugin");
        __publicField(this, "settingsSections");
        __publicField(this, "_onSettingsChange", () => {
          this.onOpen();
        });
        this.plugin = plugin;
        this.settingsSections = new SettingsSections(plugin);
        this.titleEl.setText("AI Model Settings");
        this.plugin.onSettingsChange(this._onSettingsChange);
      }
      async onOpen() {
        const { contentEl } = this;
        contentEl.empty();
        contentEl.addClass("ai-settings-modal");
        await this.settingsSections.renderAllSettings(contentEl, { onRefresh: () => this.onOpen() });
      }
      onClose() {
        this.plugin.offSettingsChange(this._onSettingsChange);
        this.contentEl.empty();
      }
    };
  }
});

// src/components/chat/eventHandlers.ts
function handleCopyAll(messagesContainer, plugin) {
  return async () => {
    const messages = messagesContainer.querySelectorAll(".ai-chat-message");
    let chatContent = "";
    messages.forEach((el, index) => {
      var _a2;
      const content = ((_a2 = el.querySelector(".message-content")) == null ? void 0 : _a2.textContent) || "";
      chatContent += content;
      if (index < messages.length - 1) {
        chatContent += "\n\n" + plugin.settings.chatSeparator + "\n\n";
      }
    });
    await copyToClipboard(chatContent);
  };
}
function handleSaveNote(messagesContainer, plugin, app) {
  return async () => {
    await saveChatAsNote({
      app,
      messages: messagesContainer.querySelectorAll(".ai-chat-message"),
      settings: plugin.settings,
      chatSeparator: plugin.settings.chatSeparator,
      chatNoteFolder: plugin.settings.chatNoteFolder
    });
  };
}
function handleClearChat(messagesContainer, chatHistoryManager) {
  return async () => {
    messagesContainer.empty();
    try {
      await chatHistoryManager.clearHistory();
    } catch (e) {
      new import_obsidian10.Notice("Failed to clear chat history.");
    }
  };
}
function handleSettings(app, plugin) {
  return () => {
    const { SettingsModal: SettingsModal2 } = (init_SettingsModal(), __toCommonJS(SettingsModal_exports));
    const settingsModal = new SettingsModal2(app, plugin);
    settingsModal.open();
  };
}
function handleHelp(app) {
  return () => {
    new ChatHelpModal(app).open();
  };
}
var import_obsidian10;
var init_eventHandlers = __esm({
  "src/components/chat/eventHandlers.ts"() {
    init_Buttons();
    init_chatPersistence();
    init_ChatHelpModal();
    import_obsidian10 = require("obsidian");
  }
});

// src/components/chat/inputHandler.ts
var inputHandler_exports = {};
__export(inputHandler_exports, {
  setupInputHandler: () => setupInputHandler
});
function setupInputHandler(textarea, sendMessage, handleSlashCommand, app, plugin, sendButton, stopButton) {
  textarea.addEventListener("keydown", async (e) => {
    if (e.ctrlKey && e.shiftKey) {
      if (e.key.toLowerCase() === "c") {
        e.preventDefault();
        await handleSlashCommand("/clear");
        return;
      }
      if (e.key.toLowerCase() === "y") {
        e.preventDefault();
        await handleSlashCommand("/copy");
        return;
      }
      if (e.key.toLowerCase() === "s") {
        e.preventDefault();
        await handleSlashCommand("/save");
        return;
      }
      if (e.key.toLowerCase() === "o") {
        e.preventDefault();
        await handleSlashCommand("/settings");
        return;
      }
      if (e.key.toLowerCase() === "h") {
        e.preventDefault();
        handleHelp(app)();
        return;
      }
      if (e.key.toLowerCase() === "r") {
        e.preventDefault();
        await handleSlashCommand("/ref");
        return;
      }
    }
    if (e.key === "Enter" && !e.shiftKey) {
      const val = textarea.value.trim();
      if (val === "/clear" || val === "/copy" || val === "/save" || val === "/settings" || val === "/help" || val === "/ref") {
        e.preventDefault();
        await handleSlashCommand(val);
        textarea.value = "";
        return;
      }
      await sendMessage();
      e.preventDefault();
    }
  });
}
var init_inputHandler = __esm({
  "src/components/chat/inputHandler.ts"() {
    init_eventHandlers();
  }
});

// src/filechanger.ts
var filechanger_exports = {};
__export(filechanger_exports, {
  generateNoteTitle: () => generateNoteTitle,
  generateYamlAttribute: () => generateYamlAttribute,
  upsertYamlField: () => upsertYamlField
});
function generateTableOfContents(noteContent) {
  const headerLines = noteContent.split("\n").filter((line) => /^#{1,6}\s+.+/.test(line));
  if (headerLines.length === 0) return "";
  return headerLines.map((line) => {
    const match = line.match(/^(#{1,6})\s+(.+)/);
    if (!match) return "";
    const level = match[1].length;
    const title = match[2].trim();
    return `${"  ".repeat(level - 1)}- ${title}`;
  }).join("\n");
}
function debug2(...args) {
  if (DEBUG) {
    console.log("[DEBUG]", ...args);
  }
}
async function generateNoteTitle(app, settings, processMessages2) {
  var _a2, _b;
  debug2("Starting generateNoteTitle");
  const activeFile = app.workspace.getActiveFile();
  if (!activeFile) {
    new import_obsidian20.Notice("No active note found.");
    return;
  }
  let noteContent = await app.vault.cachedRead(activeFile);
  noteContent = noteContent.slice(0, 15e3);
  const toc = generateTableOfContents(noteContent);
  const prompt = DEFAULT_TITLE_PROMPT;
  const userContent = (toc && toc.trim().length > 0 ? "Table of Contents:\n" + toc + "\n\n" : "") + noteContent;
  try {
    debug2("Provider:", settings.provider);
    const provider = settings.selectedModel ? createProviderFromUnifiedModel(settings, settings.selectedModel) : createProvider(settings);
    const messages = [
      { role: "system", content: prompt },
      { role: "user", content: userContent }
    ];
    debug2("Original messages:", JSON.stringify(messages));
    const originalEnableContextNotes = settings.enableContextNotes;
    debug2("Original enableContextNotes:", originalEnableContextNotes);
    settings.enableContextNotes = false;
    try {
      const processedMessages = await processMessages2(messages);
      debug2("Processed messages:", JSON.stringify(processedMessages));
      settings.enableContextNotes = originalEnableContextNotes;
      if (!processedMessages || processedMessages.length === 0) {
        debug2("No processed messages!");
        new import_obsidian20.Notice("No valid messages to send to the model. Please check your note content.");
        return;
      }
      debug2("Calling provider.getCompletion");
      let resultBuffer = "";
      await provider.getCompletion(processedMessages, {
        temperature: 0,
        streamCallback: (chunk) => {
          resultBuffer += chunk;
        }
      });
      debug2("Result from provider (buffered):", resultBuffer);
      let title = resultBuffer.trim();
      debug2("Extracted title before sanitization:", title);
      title = title.replace(/[\\/:]/g, "").trim();
      debug2("Sanitized title:", title);
      if (title && typeof title === "string" && title.length > 0) {
        const outputMode = (_a2 = settings.titleOutputMode) != null ? _a2 : "clipboard";
        debug2("Output mode:", outputMode);
        if (outputMode === "replace-filename") {
          const file = app.workspace.getActiveFile();
          if (file) {
            const ext = file.extension ? "." + file.extension : "";
            const sanitized = title;
            const parentPath = file.parent ? file.parent.path : "";
            const newPath = parentPath ? parentPath + "/" + sanitized + ext : sanitized + ext;
            if (file.path !== newPath) {
              await app.fileManager.renameFile(file, newPath);
              new import_obsidian20.Notice(`Note renamed to: ${sanitized}${ext}`);
            } else {
              new import_obsidian20.Notice(`Note title is already: ${sanitized}${ext}`);
            }
          }
        } else if (outputMode === "metadata") {
          const file = app.workspace.getActiveFile();
          if (file) {
            await upsertYamlField(app, file, "title", title);
            new import_obsidian20.Notice(`Inserted title into metadata: ${title}`);
          }
        } else {
          try {
            await navigator.clipboard.writeText(title);
            new import_obsidian20.Notice(`Generated title (copied): ${title}`);
          } catch (e) {
            new import_obsidian20.Notice(`Generated title: ${title}`);
          }
        }
      } else {
        debug2("No title generated after sanitization.");
        new import_obsidian20.Notice("No title generated.");
      }
    } catch (processError) {
      debug2("Error in processMessages or provider.getCompletion:", processError);
      settings.enableContextNotes = originalEnableContextNotes;
      throw processError;
    }
  } catch (err) {
    new import_obsidian20.Notice("Error generating title: " + ((_b = err == null ? void 0 : err.message) != null ? _b : err));
  }
}
async function generateYamlAttribute(app, settings, processMessages2, attributeName, prompt, outputMode = "metadata") {
  debug2(`Starting generateYamlAttribute for ${attributeName}`);
  const activeFile = app.workspace.getActiveFile();
  if (!activeFile) {
    new import_obsidian20.Notice("No active note found.");
    return;
  }
  let noteContent = await app.vault.cachedRead(activeFile);
  noteContent = noteContent.slice(0, 15e3);
  const messages = [
    { role: "system", content: DEFAULT_YAML_SYSTEM_MESSAGE },
    { role: "user", content: prompt + "\n\n" + noteContent }
  ];
  debug2("Original messages:", JSON.stringify(messages));
  const originalEnableContextNotes = settings.enableContextNotes;
  debug2("Original enableContextNotes:", originalEnableContextNotes);
  settings.enableContextNotes = false;
  try {
    const processedMessages = await processMessages2(messages);
    debug2("Processed messages:", JSON.stringify(processedMessages));
    settings.enableContextNotes = originalEnableContextNotes;
    if (!processedMessages || processedMessages.length === 0) {
      debug2("No processed messages!");
      new import_obsidian20.Notice("No valid messages to send to the model. Please check your note content.");
      return;
    }
    debug2("Calling provider.getCompletion");
    const provider = settings.selectedModel ? createProviderFromUnifiedModel(settings, settings.selectedModel) : createProvider(settings);
    let resultBuffer = "";
    await provider.getCompletion(processedMessages, {
      temperature: 0,
      streamCallback: (chunk) => {
        resultBuffer += chunk;
      }
    });
    debug2("Result from provider (buffered):", resultBuffer);
    let value = resultBuffer.trim();
    debug2("Extracted value before sanitization:", value);
    value = value.replace(/[\\/]/g, "").trim();
    debug2("Sanitized value:", value);
    if (value && typeof value === "string" && value.length > 0) {
      debug2("Output mode:", outputMode);
      if (outputMode === "metadata") {
        await upsertYamlField(app, activeFile, attributeName, value);
        new import_obsidian20.Notice(`Inserted ${attributeName} into metadata: ${value}`);
      } else {
        try {
          await navigator.clipboard.writeText(value);
          new import_obsidian20.Notice(`Generated ${attributeName} (copied): ${value}`);
        } catch (e) {
          new import_obsidian20.Notice(`Generated ${attributeName}: ${value}`);
        }
      }
    } else {
      debug2(`No value generated for ${attributeName} after sanitization.`);
      new import_obsidian20.Notice(`No value generated for ${attributeName}.`);
    }
  } catch (processError) {
    debug2("Error in processMessages or provider.getCompletion:", processError);
    settings.enableContextNotes = originalEnableContextNotes;
    throw processError;
  }
}
async function upsertYamlField(app, file, field, value) {
  let content = await app.vault.read(file);
  let newContent = content;
  const frontmatterRegex = /^---\n([\s\S]*?)\n---/;
  const match = content.match(frontmatterRegex);
  if (match) {
    let yamlObj = {};
    try {
      yamlObj = load(match[1]) || {};
    } catch (e) {
      yamlObj = {};
    }
    yamlObj[field] = value;
    const newYaml = dump(yamlObj, { lineWidth: -1 }).trim();
    newContent = content.replace(frontmatterRegex, `---
${newYaml}
---`);
  } else {
    const newYaml = dump({ [field]: value }, { lineWidth: -1 }).trim();
    newContent = `---
${newYaml}
---
` + content;
  }
  await app.vault.modify(file, newContent);
}
var import_obsidian20, DEBUG;
var init_filechanger = __esm({
  "src/filechanger.ts"() {
    import_obsidian20 = require("obsidian");
    init_providers();
    init_promptConstants();
    init_js_yaml();
    DEBUG = true;
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  VIEW_TYPE_MODEL_SETTINGS: () => VIEW_TYPE_MODEL_SETTINGS,
  default: () => MyPlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian21 = require("obsidian");
init_types();
init_providers();

// src/settings.ts
var import_obsidian2 = require("obsidian");
init_SettingsSections();

// src/components/chat/CollapsibleSection.ts
var CollapsibleSectionRenderer = class {
  /**
   * Creates a collapsible section with a header that can be toggled
   */
  static createCollapsibleSection(containerEl, title, contentCallback, plugin, settingsType) {
    var _a2;
    plugin.settings[settingsType] = plugin.settings[settingsType] || {};
    let isExpanded = (_a2 = plugin.settings[settingsType][title]) != null ? _a2 : false;
    const collapsibleContainer = containerEl.createEl("div");
    collapsibleContainer.addClass("ai-collapsible-section");
    const headerEl = collapsibleContainer.createEl("div");
    headerEl.addClass("ai-collapsible-header");
    const arrow = headerEl.createEl("span");
    arrow.addClass("ai-collapsible-arrow");
    arrow.textContent = isExpanded ? "\u25BC" : "\u25B6";
    const titleSpan = headerEl.createEl("span");
    titleSpan.textContent = title;
    const contentEl = collapsibleContainer.createEl("div");
    contentEl.addClass("ai-collapsible-content");
    contentEl.style.display = isExpanded ? "block" : "none";
    headerEl.addEventListener("click", async () => {
      isExpanded = !isExpanded;
      contentEl.style.display = isExpanded ? "block" : "none";
      arrow.textContent = isExpanded ? "\u25BC" : "\u25B6";
      plugin.settings[settingsType][title] = isExpanded;
      await plugin.saveSettings();
    });
    const result = contentCallback(contentEl);
    if (result instanceof Promise) {
      result.catch((error) => console.error("Error in collapsible section:", error));
    }
  }
};

// src/settings.ts
var MyPluginSettingTab = class extends import_obsidian2.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    __publicField(this, "plugin");
    __publicField(this, "settingsSections");
    this.plugin = plugin;
    this.settingsSections = new SettingsSections(this.plugin);
  }
  /**
   * Creates a text input setting.
   * @param containerEl The HTML element to append the setting to.
   * @param name The name of the setting.
   * @param desc The description of the setting.
   * @param placeholder The placeholder text for the input.
   * @param getValue A function to get the current value of the setting.
   * @param setValue A function to set the new value of the setting.
   * @param options Additional options for the text input (e.g., trim, undefinedIfEmpty, isTextArea).
   */
  createTextSetting(containerEl, name, desc, placeholder, getValue, setValue, options) {
    new import_obsidian2.Setting(containerEl).setName(name).setDesc(desc).then((setting) => {
      const textInputOptions = {
        trim: options == null ? void 0 : options.trim,
        undefinedIfEmpty: options == null ? void 0 : options.undefinedIfEmpty
      };
      if (options == null ? void 0 : options.isTextArea) {
        setting.addTextArea((text) => this.configureTextInput(text, placeholder, getValue, setValue, textInputOptions));
      } else {
        setting.addText((text) => this.configureTextInput(text, placeholder, getValue, setValue, textInputOptions));
      }
    });
  }
  /**
   * Configures a text input (either single-line or multi-line).
   * @param textComponent The TextComponent or TextAreaComponent to configure.
   * @param placeholder The placeholder text.
   * @param getValue A function to get the current value.
   * @param setValue A function to set the new value.
   * @param options Additional options for processing the input value (e.g., trim, undefinedIfEmpty).
   */
  configureTextInput(textComponent, placeholder, getValue, setValue, options) {
    var _a2;
    textComponent.setPlaceholder(placeholder).setValue((_a2 = getValue()) != null ? _a2 : "").onChange(async (value) => {
      let processedValue = value;
      if (options == null ? void 0 : options.trim) {
        processedValue = processedValue.trim();
      }
      if ((options == null ? void 0 : options.undefinedIfEmpty) && processedValue === "") {
        processedValue = void 0;
      }
      await setValue(processedValue);
    });
  }
  /**
   * Creates a dropdown setting.
   * @param containerEl The HTML element to append the setting to.
   * @param name The name of the setting.
   * @param desc The description of the setting.
   * @param options A record of option values to display names.
   * @param getValue A function to get the current value of the setting.
   * @param setValue A function to set the new value of the setting.
   */
  createDropdownSetting(containerEl, name, desc, options, getValue, setValue) {
    new import_obsidian2.Setting(containerEl).setName(name).setDesc(desc).addDropdown((drop) => {
      Object.entries(options).forEach(([key, display]) => drop.addOption(key, display));
      drop.setValue(getValue());
      drop.onChange(async (value) => {
        await setValue(value);
      });
    });
  }
  /**
   * Creates a toggle (checkbox) setting.
   * @param containerEl The HTML element to append the setting to.
   * @param name The name of the setting.
   * @param desc The description of the setting.
   * @param getValue A function to get the current boolean value.
   * @param setValue A function to set the new boolean value.
   * @param onChangeCallback An optional callback to run after the value changes and settings are saved.
   */
  createToggleSetting(containerEl, name, desc, getValue, setValue, onChangeCallback) {
    new import_obsidian2.Setting(containerEl).setName(name).setDesc(desc).addToggle((toggle) => toggle.setValue(getValue()).onChange(async (value) => {
      await setValue(value);
      if (onChangeCallback) {
        onChangeCallback();
      }
    }));
  }
  /**
   * Creates a slider setting.
   * @param containerEl The HTML element to append the setting to.
   * @param name The name of the setting.
   * @param desc The description of the setting.
   * @param limits An object defining min, max, and step for the slider.
   * @param getValue A function to get the current numeric value.
   * @param setValue A function to set the new numeric value.
   */
  createSliderSetting(containerEl, name, desc, limits, getValue, setValue) {
    new import_obsidian2.Setting(containerEl).setName(name).setDesc(desc).addSlider((slider) => {
      slider.setLimits(limits.min, limits.max, limits.step).setValue(getValue()).setDynamicTooltip().onChange(async (value) => {
        await setValue(value);
      });
    });
  }
  /**
   * Renders the YAML Attribute Generators section.
   * @param containerEl The HTML element to append the section to.
   */
  renderYamlAttributeGenerators(containerEl) {
    var _a2;
    containerEl.createEl("h3", { text: "YAML Attribute Generators" });
    containerEl.createEl("div", { text: "Configure custom YAML attribute generators. Each entry will create a command to generate and insert/update a YAML field in your notes." }).style.marginBottom = "1em";
    const yamlGens = (_a2 = this.plugin.settings.yamlAttributeGenerators) != null ? _a2 : [];
    yamlGens.forEach((gen, idx) => {
      const autoCommandName = gen.attributeName ? `Generate YAML: ${gen.attributeName}` : `YAML Generator #${idx + 1}`;
      new import_obsidian2.Setting(containerEl).setName(autoCommandName).setDesc(`YAML field: ${gen.attributeName}`).addText((text) => this.configureTextInput(text, "YAML Attribute Name", () => gen.attributeName, async (value) => {
        if (this.plugin.settings.yamlAttributeGenerators) {
          this.plugin.settings.yamlAttributeGenerators[idx].attributeName = value != null ? value : "";
          this.plugin.settings.yamlAttributeGenerators[idx].commandName = value ? `Generate YAML: ${value}` : "";
          await this.plugin.saveSettings();
          this.display();
        }
      })).addTextArea((text) => this.configureTextInput(text, "Prompt for LLM", () => gen.prompt, async (value) => {
        if (this.plugin.settings.yamlAttributeGenerators) {
          this.plugin.settings.yamlAttributeGenerators[idx].prompt = value != null ? value : "";
          await this.plugin.saveSettings();
        }
      })).addDropdown((drop) => {
        drop.addOption("clipboard", "Copy to clipboard");
        drop.addOption("metadata", "Insert into metadata");
        drop.setValue(gen.outputMode);
        drop.onChange(async (value) => {
          if (this.plugin.settings.yamlAttributeGenerators) {
            this.plugin.settings.yamlAttributeGenerators[idx].outputMode = value;
            await this.plugin.saveSettings();
          }
        });
      }).addExtraButton((btn) => {
        btn.setIcon("cross").setTooltip("Delete").onClick(async () => {
          if (this.plugin.settings.yamlAttributeGenerators) {
            this.plugin.settings.yamlAttributeGenerators.splice(idx, 1);
            await this.plugin.saveSettings();
            this.display();
          }
        });
      });
    });
    new import_obsidian2.Setting(containerEl).addButton((btn) => {
      btn.setButtonText("Add YAML Attribute Generator").setCta().onClick(async () => {
        if (!this.plugin.settings.yamlAttributeGenerators) this.plugin.settings.yamlAttributeGenerators = [];
        this.plugin.settings.yamlAttributeGenerators.push({
          attributeName: "",
          prompt: "",
          outputMode: "metadata",
          commandName: "New YAML Generator"
        });
        await this.plugin.saveSettings();
        this.display();
      });
    });
  }
  /**
   * Renders the Model Setting Presets section.
   * @param containerEl The HTML element to append the section to.
   */
  renderModelSettingPresets(containerEl) {
    containerEl.createEl("h3", { text: "Model Setting Presets" });
    containerEl.createEl("div", {
      text: "Presets let you save and quickly apply common model settings (model, temperature, system message, etc). You can add, edit, or remove presets here. In the AI Model Settings panel, you will see buttons for each preset above the model selection. Clicking a preset button will instantly apply those settings. This is useful for switching between different model configurations with one click.",
      cls: "setting-item-description",
      attr: { style: "margin-bottom: 0.5em;" }
    });
    const presetList = this.plugin.settings.modelSettingPresets || [];
    presetList.forEach((preset, idx) => {
      const setting = new import_obsidian2.Setting(containerEl).setName(preset.name).setDesc("Edit or remove this preset");
      this.configureTextInput(setting.addText((text) => text), "Preset Name", () => preset.name, async (value) => {
        preset.name = value != null ? value : "";
        await this.plugin.saveSettings();
        this.display();
      });
      this.configureTextInput(setting.addText((text) => text), "Model ID (provider:model)", () => preset.selectedModel || "", async (value) => {
        preset.selectedModel = value != null ? value : "";
        await this.plugin.saveSettings();
      });
      this.configureTextInput(setting.addTextArea((text) => text), "System message", () => preset.systemMessage || "", async (value) => {
        preset.systemMessage = value != null ? value : "";
        await this.plugin.saveSettings();
      });
      this.createSliderSetting(setting.controlEl, "Temperature", "", { min: 0, max: 1, step: 0.1 }, () => {
        var _a2;
        return (_a2 = preset.temperature) != null ? _a2 : 0.7;
      }, async (value) => {
        preset.temperature = value;
        await this.plugin.saveSettings();
      });
      this.configureTextInput(setting.addText((text) => text), "Max tokens", () => {
        var _a2;
        return ((_a2 = preset.maxTokens) == null ? void 0 : _a2.toString()) || "";
      }, async (value) => {
        const num = parseInt(value != null ? value : "", 10);
        preset.maxTokens = isNaN(num) ? void 0 : num;
        await this.plugin.saveSettings();
      });
      this.createToggleSetting(setting.controlEl, "Enable Streaming", "", () => {
        var _a2;
        return (_a2 = preset.enableStreaming) != null ? _a2 : true;
      }, async (value) => {
        preset.enableStreaming = value;
        await this.plugin.saveSettings();
      });
      setting.addExtraButton(
        (btn) => btn.setIcon("cross").setTooltip("Delete").onClick(async () => {
          var _a2;
          (_a2 = this.plugin.settings.modelSettingPresets) == null ? void 0 : _a2.splice(idx, 1);
          await this.plugin.saveSettings();
          this.display();
        })
      );
    });
    new import_obsidian2.Setting(containerEl).addButton(
      (btn) => btn.setButtonText("Add Preset").setCta().onClick(async () => {
        if (!this.plugin.settings.modelSettingPresets) this.plugin.settings.modelSettingPresets = [];
        this.plugin.settings.modelSettingPresets.push(JSON.parse(JSON.stringify({
          name: `Preset ${this.plugin.settings.modelSettingPresets.length + 1}`,
          selectedModel: this.plugin.settings.selectedModel,
          systemMessage: this.plugin.settings.systemMessage,
          temperature: this.plugin.settings.temperature,
          maxTokens: this.plugin.settings.maxTokens,
          enableStreaming: this.plugin.settings.enableStreaming
        })));
        await this.plugin.saveSettings();
        this.display();
      })
    );
  }
  /**
   * Display the settings tab.
   * This method orchestrates the rendering of all setting sections.
   */
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h2", { text: "AI Assistant Settings" });
    containerEl.createEl("h3", { text: "API Keys" });
    this.createTextSetting(
      containerEl,
      "OpenAI API Key",
      "Enter your OpenAI API key",
      "Enter your API key",
      () => this.plugin.settings.openaiSettings.apiKey,
      async (value) => {
        this.plugin.settings.openaiSettings.apiKey = value != null ? value : "";
        await this.plugin.saveSettings();
      }
    );
    this.createTextSetting(
      containerEl,
      "OpenAI Base URL",
      "Custom base URL for OpenAI API (optional, leave empty for default)",
      "https://api.openai.com/v1",
      () => this.plugin.settings.openaiSettings.baseUrl || "",
      async (value) => {
        this.plugin.settings.openaiSettings.baseUrl = value;
        await this.plugin.saveSettings();
      },
      { trim: true, undefinedIfEmpty: true }
    );
    this.createTextSetting(
      containerEl,
      "Anthropic API Key",
      "Enter your Anthropic API key",
      "Enter your API key",
      () => this.plugin.settings.anthropicSettings.apiKey,
      async (value) => {
        this.plugin.settings.anthropicSettings.apiKey = value != null ? value : "";
        await this.plugin.saveSettings();
      }
    );
    this.createTextSetting(
      containerEl,
      "Google API Key",
      "Enter your Google API key",
      "Enter your API key",
      () => this.plugin.settings.geminiSettings.apiKey,
      async (value) => {
        this.plugin.settings.geminiSettings.apiKey = value != null ? value : "";
        await this.plugin.saveSettings();
      }
    );
    this.createTextSetting(
      containerEl,
      "Ollama Server URL",
      "Enter your Ollama server URL (default: http://localhost:11434)",
      "http://localhost:11434",
      () => this.plugin.settings.ollamaSettings.serverUrl,
      async (value) => {
        this.plugin.settings.ollamaSettings.serverUrl = value != null ? value : "";
        await this.plugin.saveSettings();
      }
    );
    CollapsibleSectionRenderer.createCollapsibleSection(
      containerEl,
      "AI Model Settings",
      async (sectionEl) => {
        await this.settingsSections.renderAIModelSettings(sectionEl, () => this.display());
      },
      this.plugin,
      "generalSectionsExpanded"
    );
    this.createTextSetting(
      containerEl,
      "Chat Separator",
      "The string used to separate chat messages.",
      "----",
      () => {
        var _a2;
        return (_a2 = this.plugin.settings.chatSeparator) != null ? _a2 : "";
      },
      async (value) => {
        this.plugin.settings.chatSeparator = value != null ? value : "";
        await this.plugin.saveSettings();
      }
    );
    this.createTextSetting(
      containerEl,
      "Chat Start String",
      "The string that indicates where to start taking the note for context.",
      "===START===",
      () => {
        var _a2;
        return (_a2 = this.plugin.settings.chatStartString) != null ? _a2 : "";
      },
      async (value) => {
        this.plugin.settings.chatStartString = value != null ? value : "";
        await this.plugin.saveSettings();
      }
    );
    this.createTextSetting(
      containerEl,
      "Chat End String",
      "The string that indicates where to end taking the note for context.",
      "===END===",
      () => {
        var _a2;
        return (_a2 = this.plugin.settings.chatEndString) != null ? _a2 : "";
      },
      async (value) => {
        this.plugin.settings.chatEndString = value != null ? value : "";
        await this.plugin.saveSettings();
      }
    );
    this.createTextSetting(
      containerEl,
      "Title Prompt",
      "The prompt used for generating note titles.",
      "You are a title generator...",
      () => this.plugin.settings.titlePrompt,
      async (value) => {
        this.plugin.settings.titlePrompt = value != null ? value : "";
        await this.plugin.saveSettings();
      },
      { isTextArea: true }
    );
    new import_obsidian2.Setting(containerEl).setName("Reset All Settings to Default").setDesc("Reset all plugin settings (except API keys) to their original default values.").addButton((button) => button.setButtonText("Reset").onClick(async () => {
      const { DEFAULT_SETTINGS: DEFAULT_SETTINGS2 } = await Promise.resolve().then(() => (init_types(), types_exports));
      const { DEFAULT_TITLE_PROMPT: DEFAULT_TITLE_PROMPT2 } = await Promise.resolve().then(() => (init_promptConstants(), promptConstants_exports));
      const preservedApiKeys = {
        openai: this.plugin.settings.openaiSettings.apiKey,
        anthropic: this.plugin.settings.anthropicSettings.apiKey,
        gemini: this.plugin.settings.geminiSettings.apiKey
      };
      this.plugin.settings = JSON.parse(JSON.stringify(DEFAULT_SETTINGS2));
      this.plugin.settings.openaiSettings.apiKey = preservedApiKeys.openai;
      this.plugin.settings.anthropicSettings.apiKey = preservedApiKeys.anthropic;
      this.plugin.settings.geminiSettings.apiKey = preservedApiKeys.gemini;
      this.plugin.settings.titlePrompt = DEFAULT_TITLE_PROMPT2;
      await this.plugin.saveSettings();
      this.display();
      if (typeof this.plugin.activateView === "function") {
        setTimeout(() => {
          this.plugin.activateView(VIEW_TYPE_MODEL_SETTINGS);
        }, 100);
      }
      new import_obsidian2.Notice("All settings (except API keys) reset to default.");
    }));
    this.createDropdownSetting(
      containerEl,
      "Title Output Mode",
      "Choose what to do with the generated note title.",
      { "clipboard": "Copy to clipboard", "replace-filename": "Replace note filename", "metadata": "Insert into metadata" },
      () => {
        var _a2;
        return (_a2 = this.plugin.settings.titleOutputMode) != null ? _a2 : "clipboard";
      },
      async (value) => {
        this.plugin.settings.titleOutputMode = value;
        await this.plugin.saveSettings();
      }
    );
    this.createDropdownSetting(
      containerEl,
      "Summary Output Mode",
      "Choose what to do with the generated note summary.",
      { "clipboard": "Copy to clipboard", "metadata": "Insert into metadata" },
      () => {
        var _a2;
        return (_a2 = this.plugin.settings.summaryOutputMode) != null ? _a2 : "clipboard";
      },
      async (value) => {
        this.plugin.settings.summaryOutputMode = value;
        await this.plugin.saveSettings();
      }
    );
    this.createToggleSetting(
      containerEl,
      "Expand Linked Notes Recursively",
      "If enabled, when fetching a note, also fetch and expand links within that note recursively (prevents infinite loops).",
      () => {
        var _a2;
        return (_a2 = this.plugin.settings.expandLinkedNotesRecursively) != null ? _a2 : false;
      },
      async (value) => {
        this.plugin.settings.expandLinkedNotesRecursively = value;
        await this.plugin.saveSettings();
      },
      () => this.display()
    );
    if (this.plugin.settings.expandLinkedNotesRecursively) {
      this.createSliderSetting(
        containerEl,
        "Max Link Expansion Depth",
        "Maximum depth for recursively expanding linked notes (1-3).",
        { min: 1, max: 3, step: 1 },
        () => {
          var _a2;
          return (_a2 = this.plugin.settings.maxLinkExpansionDepth) != null ? _a2 : 2;
        },
        async (value) => {
          this.plugin.settings.maxLinkExpansionDepth = value;
          await this.plugin.saveSettings();
        }
      );
    }
    this.createTextSetting(
      containerEl,
      "Chat Note Folder",
      "Folder to save exported chat notes (relative to vault root, leave blank for root)",
      "e.g. AI Chats",
      () => {
        var _a2;
        return (_a2 = this.plugin.settings.chatNoteFolder) != null ? _a2 : "";
      },
      async (value) => {
        this.plugin.settings.chatNoteFolder = value != null ? value : "";
        await this.plugin.saveSettings();
      },
      { trim: true }
    );
    this.renderYamlAttributeGenerators(containerEl);
    this.renderModelSettingPresets(containerEl);
  }
};

// src/components/chat.ts
var import_obsidian17 = require("obsidian");
init_providers();

// src/components/chat/ChatHistoryManager.ts
var import_obsidian3 = require("obsidian");
var ChatHistoryManager = class {
  constructor(vault, pluginId, historyFilePath) {
    __publicField(this, "vault");
    __publicField(this, "historyFilePath");
    __publicField(this, "history", []);
    __publicField(this, "isLoaded", false);
    this.vault = vault;
    let effectivePluginId = pluginId;
    if (!pluginId) {
      console.error("CRITICAL: ChatHistoryManager instantiated without pluginId! Using placeholder. This will likely lead to incorrect file paths.");
      effectivePluginId = "unknown-plugin-id-error";
    }
    const fPath = historyFilePath || "chat-history.json";
    this.historyFilePath = (0, import_obsidian3.normalizePath)(`.obsidian/plugins/${effectivePluginId}/${fPath}`);
    console.log("[ChatHistoryManager] Using history file path:", this.historyFilePath);
    if (typeof window !== "undefined" && window.Notice) {
    }
  }
  async ensureDirectoryExists() {
    const dirPath = this.historyFilePath.substring(0, this.historyFilePath.lastIndexOf("/"));
    if (!dirPath) return;
    try {
      const abstractFile = this.vault.getAbstractFileByPath(dirPath);
      if (abstractFile === null) {
        await this.vault.createFolder(dirPath);
      } else if (!(abstractFile instanceof import_obsidian3.TFolder)) {
        console.error(`Path ${dirPath} exists but is not a folder.`);
        throw new Error(`Path ${dirPath} exists but is not a folder.`);
      }
    } catch (e) {
      if (e.message && e.message.toLowerCase().includes("folder already exists")) {
        return;
      }
      console.error(`Failed to ensure directory ${dirPath} exists:`, e);
      throw e;
    }
  }
  async loadHistory() {
    try {
      const exists = await this.vault.adapter.exists(this.historyFilePath);
      if (exists) {
        const data = await this.vault.adapter.read(this.historyFilePath);
        try {
          this.history = JSON.parse(data);
        } catch (parseError) {
          console.error("Failed to parse chat history:", parseError);
          this.history = [];
        }
      } else {
        this.history = [];
      }
    } catch (e) {
      console.error("Failed to load chat history:", e);
      this.history = [];
    }
    return this.history;
  }
  async addMessage(message) {
    const currentHistory = await this.loadHistory();
    currentHistory.push(message);
    this.history = currentHistory;
    await this.saveHistory();
  }
  async getHistory() {
    return await this.loadHistory();
  }
  async clearHistory() {
    this.history = [];
    await this.saveHistory();
  }
  async deleteMessage(timestamp2, sender, content) {
    await this.loadHistory();
    const index = this.history.findIndex(
      (msg) => msg.timestamp === timestamp2 && msg.sender === sender && msg.content === content
    );
    if (index !== -1) {
      this.history.splice(index, 1);
      await this.saveHistory();
    }
  }
  async updateMessage(timestamp2, sender, oldContent, newContent) {
    await this.loadHistory();
    const message = this.history.find(
      (msg) => msg.timestamp === timestamp2 && msg.sender === sender && msg.content === oldContent
    );
    if (message) {
      message.content = newContent;
      await this.saveHistory();
    } else {
      console.warn("ChatHistoryManager: updateMessage did not find a matching message to update.", { timestamp: timestamp2, sender, oldContent });
    }
  }
  async saveHistory() {
    try {
      await this.ensureDirectoryExists();
      const data = JSON.stringify(this.history, null, 2);
      const abstractTarget = this.vault.getAbstractFileByPath(this.historyFilePath);
      if (abstractTarget instanceof import_obsidian3.TFolder) {
        throw new Error(`Path ${this.historyFilePath} is a directory, not a file.`);
      }
      await this.vault.adapter.write(this.historyFilePath, data);
      if (!abstractTarget || !(abstractTarget instanceof import_obsidian3.TFile)) {
        await this.vault.adapter.exists(this.historyFilePath);
      }
    } catch (e) {
      console.error(`Failed to save history to ${this.historyFilePath}:`, e);
      throw e;
    }
  }
};

// src/components/chat/Message.ts
var import_obsidian6 = require("obsidian");
init_Buttons();

// src/components/chat/ConfirmationModal.ts
var import_obsidian5 = require("obsidian");
var ConfirmationModal = class extends import_obsidian5.Modal {
  constructor(app, title, message, onConfirm) {
    super(app);
    __publicField(this, "onConfirm");
    __publicField(this, "message");
    this.titleEl.setText(title);
    this.message = message;
    this.onConfirm = onConfirm;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.createEl("p", { text: this.message });
    const buttonContainer = contentEl.createDiv("modal-button-container");
    buttonContainer.createEl("button", { text: "Cancel" }).addEventListener("click", () => {
      this.onConfirm(false);
      this.close();
    });
    const confirmButton = buttonContainer.createEl("button", {
      text: "Delete",
      cls: "mod-warning"
    });
    confirmButton.addEventListener("click", () => {
      this.onConfirm(true);
      this.close();
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/components/chat/Message.ts
function createMessageElement(app, role, content, chatHistoryManager, plugin, regenerateCallback, parentComponent) {
  const messageEl = document.createElement("div");
  messageEl.addClass("ai-chat-message", role);
  const messageContainer = messageEl.createDiv("message-container");
  const contentEl = messageContainer.createDiv("message-content");
  messageEl.dataset.rawContent = content;
  messageEl.dataset.timestamp = (/* @__PURE__ */ new Date()).toISOString();
  import_obsidian6.MarkdownRenderer.render(app, content, contentEl, "", parentComponent).catch((error) => {
    contentEl.textContent = content;
  });
  const actionsEl = messageContainer.createDiv("message-actions");
  actionsEl.classList.add("hidden");
  messageEl.addEventListener("mouseenter", () => {
    actionsEl.classList.remove("hidden");
    actionsEl.classList.add("visible");
  });
  messageEl.addEventListener("mouseleave", () => {
    actionsEl.classList.remove("visible");
    actionsEl.classList.add("hidden");
  });
  actionsEl.appendChild(createActionButton("Copy", "Copy message", () => {
    const currentContent = messageEl.dataset.rawContent || "";
    if (currentContent.trim() === "") {
      new import_obsidian6.Notice("No content to copy");
      return;
    }
    copyToClipboard(currentContent);
  }));
  actionsEl.appendChild(createActionButton("Edit", "Edit message", async () => {
    if (!contentEl.hasClass("editing")) {
      const textarea = document.createElement("textarea");
      textarea.value = messageEl.dataset.rawContent || "";
      textarea.className = "message-content editing";
      contentEl.empty();
      contentEl.appendChild(textarea);
      textarea.focus();
      contentEl.addClass("editing");
      textarea.addEventListener("keydown", async (e) => {
        if (e.key === "Enter" && !e.shiftKey) {
          e.preventDefault();
          textarea.blur();
        }
      });
      textarea.addEventListener("blur", async () => {
        const oldContent = messageEl.dataset.rawContent;
        const newContent = textarea.value;
        try {
          await chatHistoryManager.updateMessage(
            messageEl.dataset.timestamp || (/* @__PURE__ */ new Date()).toISOString(),
            messageEl.classList.contains("user") ? "user" : "assistant",
            oldContent || "",
            newContent
          );
          messageEl.dataset.rawContent = newContent;
          contentEl.empty();
          await import_obsidian6.MarkdownRenderer.render(app, newContent, contentEl, "", parentComponent);
          contentEl.removeClass("editing");
        } catch (e) {
          new import_obsidian6.Notice("Failed to save edited message.");
          messageEl.dataset.rawContent = oldContent || "";
          contentEl.empty();
          await import_obsidian6.MarkdownRenderer.render(app, oldContent || "", contentEl, "", parentComponent);
          contentEl.removeClass("editing");
        }
      });
    }
  }));
  actionsEl.appendChild(createActionButton("Delete", "Delete message", () => {
    const modal = new ConfirmationModal(app, "Delete message", "Are you sure you want to delete this message?", (confirmed) => {
      if (confirmed) {
        chatHistoryManager.deleteMessage(
          messageEl.dataset.timestamp || (/* @__PURE__ */ new Date()).toISOString(),
          messageEl.classList.contains("user") ? "user" : "assistant",
          messageEl.dataset.rawContent || ""
        ).then(() => {
          messageEl.remove();
        }).catch(() => {
          new import_obsidian6.Notice("Failed to delete message from history.");
        });
      }
    });
    modal.open();
  }));
  actionsEl.appendChild(createActionButton("Regenerate", "Regenerate this response", () => {
    regenerateCallback(messageEl);
  }));
  messageContainer.appendChild(actionsEl);
  return messageEl;
}

// src/components/chat/ui.ts
function createChatUI(app, contentEl) {
  const fadedHelp = contentEl.createDiv();
  fadedHelp.setText("Tip: Type /help or press Ctrl+Shift+H for chat commands and shortcuts.");
  fadedHelp.style.textAlign = "center";
  fadedHelp.style.opacity = "0.6";
  fadedHelp.style.fontSize = "0.95em";
  fadedHelp.style.margin = "0.5em 0 0.2em 0";
  const topButtonContainer = contentEl.createDiv("ai-chat-buttons");
  const settingsButton = document.createElement("button");
  settingsButton.setText("Settings");
  settingsButton.setAttribute("aria-label", "Toggle model settings");
  topButtonContainer.appendChild(settingsButton);
  const copyAllButton = document.createElement("button");
  copyAllButton.textContent = "Copy All";
  topButtonContainer.appendChild(copyAllButton);
  const saveNoteButton = document.createElement("button");
  saveNoteButton.textContent = "Save as Note";
  topButtonContainer.appendChild(saveNoteButton);
  const clearButton = document.createElement("button");
  clearButton.textContent = "Clear Chat";
  topButtonContainer.appendChild(clearButton);
  const referenceNoteButton = document.createElement("button");
  referenceNoteButton.setText("\u{1F4DD}");
  referenceNoteButton.setAttribute("aria-label", "Toggle referencing current note");
  referenceNoteButton.addClass("ai-chat-reference-button");
  referenceNoteButton.style.fontSize = "0.85em";
  referenceNoteButton.style.fontFamily = "inherit";
  referenceNoteButton.style.width = "1.8em";
  referenceNoteButton.style.height = "1.8em";
  referenceNoteButton.style.marginBottom = "0.2em";
  referenceNoteButton.style.opacity = "0.7";
  topButtonContainer.appendChild(referenceNoteButton);
  const referenceNoteIndicator = document.createElement("div");
  referenceNoteIndicator.className = "ai-reference-note-indicator";
  referenceNoteIndicator.style.textAlign = "center";
  referenceNoteIndicator.style.opacity = "0.5";
  referenceNoteIndicator.style.fontSize = "0.85em";
  referenceNoteIndicator.style.margin = "0.1em 0 0.2em 0";
  referenceNoteIndicator.style.display = "none";
  topButtonContainer.appendChild(referenceNoteIndicator);
  const messagesContainer = contentEl.createDiv("ai-chat-messages");
  const inputContainer = contentEl.createDiv("ai-chat-input-container");
  const textarea = inputContainer.createEl("textarea", {
    cls: "ai-chat-input",
    attr: {
      placeholder: "Type your message...",
      rows: "3"
    }
  });
  const sendButton = inputContainer.createEl("button", {
    text: "Send",
    cls: "mod-cta"
  });
  const stopButton = inputContainer.createEl("button", {
    text: "Stop"
  });
  stopButton.classList.add("hidden");
  const helpButton = inputContainer.createEl("button", {
    text: "?"
  });
  helpButton.setAttr("aria-label", "Show chat help");
  helpButton.style.fontSize = "0.9em";
  helpButton.style.width = "1.8em";
  helpButton.style.height = "1.8em";
  helpButton.style.marginBottom = "0.2em";
  helpButton.style.opacity = "0.7";
  helpButton.style.position = "absolute";
  helpButton.style.right = "0.5em";
  helpButton.style.top = "-2.2em";
  helpButton.style.zIndex = "2";
  const agentModeButton = inputContainer.createEl("button", {
    text: "\u{1F916}"
  });
  agentModeButton.setAttr("aria-label", "Toggle Agent Mode");
  agentModeButton.style.fontSize = "0.9em";
  agentModeButton.style.width = "1.8em";
  agentModeButton.style.height = "1.8em";
  agentModeButton.style.marginBottom = "0.2em";
  agentModeButton.style.opacity = "0.7";
  agentModeButton.style.position = "absolute";
  agentModeButton.style.right = "2.8em";
  agentModeButton.style.top = "-2.2em";
  agentModeButton.style.zIndex = "2";
  inputContainer.appendChild(agentModeButton);
  inputContainer.style.position = "relative";
  [topButtonContainer.querySelectorAll("button")].forEach((btns) => {
    btns.forEach((btn) => {
      btn.style.fontSize = "0.85em";
      btn.style.fontFamily = "inherit";
    });
  });
  return {
    contentEl,
    fadedHelp,
    topButtonContainer,
    settingsButton,
    copyAllButton,
    saveNoteButton,
    clearButton,
    messagesContainer,
    inputContainer,
    textarea,
    sendButton,
    stopButton,
    helpButton,
    agentModeButton,
    // <-- add to return object
    referenceNoteButton,
    referenceNoteIndicator
  };
}

// src/components/chat.ts
init_eventHandlers();
init_chatPersistence();

// src/components/chat/chatHistoryUtils.ts
async function renderChatHistory({
  messagesContainer,
  loadedHistory,
  chatHistoryManager,
  plugin,
  regenerateResponse,
  scrollToBottom = true
}) {
  messagesContainer.empty();
  for (const msg of loadedHistory) {
    if (msg.sender === "user" || msg.sender === "assistant") {
      const messageEl = await createMessageElement(
        plugin.app,
        msg.sender,
        msg.content,
        chatHistoryManager,
        plugin,
        regenerateResponse,
        plugin
        // parentComponent
      );
      messageEl.dataset.timestamp = msg.timestamp;
      messagesContainer.appendChild(messageEl);
    }
  }
  if (scrollToBottom) {
    messagesContainer.scrollTop = messagesContainer.scrollHeight;
  }
}

// src/components/chat/AgentResponseHandler.ts
var import_obsidian16 = require("obsidian");

// src/components/chat/CommandParser.ts
var CommandParser = class {
  /**
   * Parse AI response to extract tool commands and regular text
   * @param response The AI response string
   * @returns Object containing separated text and commands
   */
  parseResponse(response) {
    const commands = [];
    let cleanText = response;
    console.log("CommandParser: Parsing response:", response);
    const extractedCommands = this.extractCommands(response);
    console.log("CommandParser: Extracted commands:", extractedCommands);
    for (const command of extractedCommands) {
      if (this.validateCommand(command.command)) {
        console.log("CommandParser: Valid command found:", command.command);
        commands.push(command.command);
        cleanText = cleanText.replace(command.originalText, "").trim();
      } else {
        console.log("CommandParser: Invalid command:", command.command);
      }
    }
    console.log("CommandParser: Final result - text:", cleanText, "commands:", commands);
    return {
      text: cleanText,
      commands
    };
  }
  /**
   * Validate that a command has the required structure
   * @param command The command to validate
   * @returns True if command is valid
   */
  validateCommand(command) {
    if (!command || typeof command !== "object") {
      return false;
    }
    if (!command.action || typeof command.action !== "string") {
      return false;
    }
    if (!command.parameters || typeof command.parameters !== "object") {
      return false;
    }
    const validActions = ["file_select", "file_diff", "file_read", "file_write", "thought"];
    if (!validActions.includes(command.action)) {
      return false;
    }
    return true;
  }
  /**
   * Extract JSON commands from text
   * @param text The text to extract commands from
   * @returns Array of extracted commands with their original text
   */
  extractCommands(text) {
    const commands = [];
    try {
      const parsed = JSON.parse(text.trim());
      if (parsed.action) {
        let parameters = parsed.parameters;
        if (!parameters) {
          parameters = { ...parsed };
          delete parameters.action;
          delete parameters.requestId;
        }
        commands.push({
          command: {
            action: parsed.action,
            parameters,
            requestId: parsed.requestId || this.generateRequestId()
          },
          originalText: text.trim()
        });
        return commands;
      }
    } catch (error) {
    }
    const patterns = [
      /```json\s*(\{[\s\S]*?\})\s*```/g,
      // JSON in code blocks
      /```\s*(\{[\s\S]*?\})\s*```/g,
      // JSON in generic code blocks
      /(\{[\s\S]*?\})/g
      // Any JSON-like objects
    ];
    for (const pattern of patterns) {
      let match;
      while ((match = pattern.exec(text)) !== null) {
        const jsonText = match[1];
        const originalText = match[0];
        try {
          const parsed = JSON.parse(jsonText);
          if (parsed.action) {
            let parameters = parsed.parameters;
            if (!parameters) {
              parameters = { ...parsed };
              delete parameters.action;
              delete parameters.requestId;
            }
            commands.push({
              command: {
                action: parsed.action,
                parameters,
                requestId: parsed.requestId || this.generateRequestId()
              },
              originalText
            });
          }
        } catch (error) {
          continue;
        }
      }
      pattern.lastIndex = 0;
    }
    return commands;
  }
  /**
   * Generate a unique request ID
   * @returns A unique request ID string
   */
  generateRequestId() {
    return `req_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;
  }
};

// src/components/chat/ToolRegistry.ts
var ToolRegistry = class {
  constructor() {
    __publicField(this, "tools", /* @__PURE__ */ new Map());
  }
  register(tool) {
    this.tools.set(tool.name, tool);
  }
  async execute(command) {
    const tool = this.tools.get(command.action);
    if (!tool) {
      return {
        success: false,
        error: `Tool not found: ${command.action}`,
        requestId: command.requestId
      };
    }
    try {
      const result = await tool.execute(command.parameters, {});
      return {
        ...result,
        requestId: command.requestId
      };
    } catch (error) {
      return {
        success: false,
        error: error.message || String(error),
        requestId: command.requestId
      };
    }
  }
  getAvailableTools() {
    return Array.from(this.tools.values());
  }
};

// src/components/chat/tools/FileSelectTool.ts
var FileSelectTool = class {
  constructor(app) {
    this.app = app;
    __publicField(this, "name", "file_select");
    __publicField(this, "description", "Search and select files from the vault programmatically");
    __publicField(this, "parameters", {
      query: {
        type: "string",
        description: "Search query to find files (searches filename and path)",
        required: false
      },
      filterType: {
        type: "string",
        enum: ["markdown", "image", "all"],
        description: "Type of files to show",
        default: "markdown"
      },
      maxResults: {
        type: "number",
        description: "Maximum number of results to return",
        default: 10
      }
    });
  }
  async execute(params, context) {
    const { query = "", filterType = "markdown", maxResults = 10 } = params;
    try {
      const allFiles = filterType === "markdown" ? this.app.vault.getMarkdownFiles() : filterType === "image" ? this.app.vault.getFiles().filter((f) => {
        var _a2;
        return ["png", "jpg", "jpeg", "gif", "svg", "webp"].includes((_a2 = f.extension) == null ? void 0 : _a2.toLowerCase());
      }) : this.app.vault.getFiles();
      let matchingFiles = allFiles;
      if (query.trim()) {
        const normalizedQuery = query.toLowerCase();
        const queryWords = normalizedQuery.split(/\s+/).filter((word) => word.length > 0);
        matchingFiles = [];
        for (const file of allFiles) {
          const searchText = `${file.path} ${file.basename}`.toLowerCase();
          const searchTextNormalized = searchText.replace(/_/g, " ");
          if (queryWords.every(
            (word) => searchText.includes(word) || searchTextNormalized.includes(word)
          )) {
            matchingFiles.push(file);
            if (matchingFiles.length >= maxResults) {
              break;
            }
          }
        }
      }
      if (matchingFiles.length === 0) {
        return {
          success: false,
          error: `No files found matching query: "${query}"`
        };
      }
      const limitedFiles = matchingFiles.sort((a, b) => {
        var _a2, _b;
        return (((_a2 = b.stat) == null ? void 0 : _a2.mtime) || 0) - (((_b = a.stat) == null ? void 0 : _b.mtime) || 0);
      }).slice(0, maxResults);
      const files = limitedFiles.map((file) => {
        var _a2, _b, _c;
        return {
          path: file.path,
          name: file.name,
          basename: file.basename,
          extension: file.extension,
          size: ((_a2 = file.stat) == null ? void 0 : _a2.size) || 0,
          created: ((_b = file.stat) == null ? void 0 : _b.ctime) || 0,
          modified: ((_c = file.stat) == null ? void 0 : _c.mtime) || 0
        };
      });
      return {
        success: true,
        data: {
          files,
          count: files.length,
          query: query || "all files"
        }
      };
    } catch (error) {
      return {
        success: false,
        error: `Failed to search files: ${error.message}`
      };
    }
  }
  getFileFilter(filterType) {
    switch (filterType) {
      case "markdown":
        return (file) => file.extension === "md";
      case "image":
        return (file) => {
          var _a2;
          return ["png", "jpg", "jpeg", "gif", "svg", "webp"].includes((_a2 = file.extension) == null ? void 0 : _a2.toLowerCase());
        };
      case "all":
      default:
        return () => true;
    }
  }
};

// src/components/chat/tools/FileReadTool.ts
var import_obsidian12 = require("obsidian");

// src/components/FileChooserModal.ts
var import_obsidian11 = require("obsidian");
init_js_yaml();
function getVaultItem(app, path, type2) {
  const item = app.vault.getAbstractFileByPath(path);
  if (!item) {
    return null;
  }
  if (type2 === "file" && item instanceof import_obsidian11.TFile) {
    return item;
  }
  if (type2 === "folder" && item instanceof import_obsidian11.TFolder) {
    return item;
  }
  return null;
}
function itemNotFoundError(path, type2) {
  return `${type2.charAt(0).toUpperCase() + type2.slice(1)} not found or is not a ${type2}: "${path}"`;
}
async function createFile(app, filePath, content = "") {
  try {
    await app.vault.create(filePath, content);
    return `Created file '${filePath}'.`;
  } catch (err) {
    return `Failed to create file: ${(err == null ? void 0 : err.message) || err}`;
  }
}
async function readFile(app, filePath) {
  const file = getVaultItem(app, filePath, "file");
  if (!file) return itemNotFoundError(filePath, "file");
  try {
    return await app.vault.read(file);
  } catch (err) {
    return `Failed to read file: ${(err == null ? void 0 : err.message) || err}`;
  }
}
async function writeFile(app, filePath, content) {
  const file = getVaultItem(app, filePath, "file");
  if (!file) return itemNotFoundError(filePath, "file");
  try {
    await app.vault.modify(file, content);
    return `Wrote to file '${filePath}'.`;
  } catch (err) {
    return `Failed to write file: ${(err == null ? void 0 : err.message) || err}`;
  }
}

// src/components/chat/tools/FileReadTool.ts
var FileReadTool = class {
  constructor(app) {
    this.app = app;
    __publicField(this, "name", "file_read");
    __publicField(this, "description", "Read file contents from the vault");
    __publicField(this, "parameters", {
      filePath: {
        type: "string",
        description: "Path to the file to read (relative to vault root)",
        required: true
      },
      maxSize: {
        type: "number",
        description: "Maximum file size in bytes (default 1MB)",
        default: 1024 * 1024
      }
    });
  }
  async execute(params, context) {
    var _a2, _b, _c;
    const { filePath, maxSize = 1024 * 1024 } = params;
    if (!filePath) {
      return {
        success: false,
        error: "filePath parameter is required"
      };
    }
    try {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (file && file instanceof import_obsidian12.TFile && ((_a2 = file.stat) == null ? void 0 : _a2.size) && file.stat.size > maxSize) {
        return {
          success: false,
          error: `File too large (${file.stat.size} bytes, max ${maxSize} bytes): ${filePath}`
        };
      }
      const content = await readFile(this.app, filePath);
      if (content.startsWith("File not found") || content.startsWith("Failed to read")) {
        return {
          success: false,
          error: content
        };
      }
      return {
        success: true,
        data: {
          content,
          filePath,
          size: file instanceof import_obsidian12.TFile ? ((_b = file.stat) == null ? void 0 : _b.size) || 0 : 0,
          modified: file instanceof import_obsidian12.TFile ? ((_c = file.stat) == null ? void 0 : _c.mtime) || 0 : 0,
          extension: file instanceof import_obsidian12.TFile ? file.extension : void 0
        }
      };
    } catch (error) {
      return {
        success: false,
        error: `Failed to read file: ${error.message}`
      };
    }
  }
};

// src/components/chat/tools/FileWriteTool.ts
var import_obsidian13 = require("obsidian");
var FileWriteTool = class {
  constructor(app) {
    this.app = app;
    __publicField(this, "name", "file_write");
    __publicField(this, "description", "Write/modify file contents in the vault");
    __publicField(this, "parameters", {
      filePath: {
        type: "string",
        description: "Path to the file to write (relative to vault root)",
        required: true
      },
      content: {
        type: "string",
        description: "Content to write to the file",
        required: true
      },
      createIfNotExists: {
        type: "boolean",
        description: "Whether to create the file if it does not exist",
        default: true
      },
      backup: {
        type: "boolean",
        description: "Whether to create a backup before modifying existing files",
        default: true
      }
    });
  }
  async execute(params, context) {
    const filePath = params.filePath || params.filename;
    const { content, createIfNotExists = true, backup = true } = params;
    if (!filePath) {
      return {
        success: false,
        error: "filePath or filename parameter is required"
      };
    }
    if (content === void 0 || content === null) {
      return {
        success: false,
        error: "content parameter is required"
      };
    }
    try {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (!file) {
        if (!createIfNotExists) {
          return {
            success: false,
            error: `File not found and createIfNotExists is false: ${filePath}`
          };
        }
        const result2 = await createFile(this.app, filePath, content);
        if (result2.startsWith("Failed to create")) {
          return {
            success: false,
            error: result2
          };
        }
        return {
          success: true,
          data: {
            action: "created",
            filePath,
            size: content.length
          }
        };
      }
      if (!(file instanceof import_obsidian13.TFile)) {
        return {
          success: false,
          error: `Path is not a file: ${filePath}`
        };
      }
      if (backup) {
        const backupPath = `${filePath}.backup.${Date.now()}`;
        const originalContent = await this.app.vault.read(file);
        try {
          await createFile(this.app, backupPath, originalContent);
        } catch (error) {
          console.warn(`Failed to create backup for ${filePath}:`, error);
        }
      }
      const result = await writeFile(this.app, filePath, content);
      if (result.startsWith("Failed to write")) {
        return {
          success: false,
          error: result
        };
      }
      return {
        success: true,
        data: {
          action: "modified",
          filePath,
          size: content.length,
          backupCreated: backup
        }
      };
    } catch (error) {
      return {
        success: false,
        error: `Failed to write file: ${error.message}`
      };
    }
  }
};

// src/components/chat/tools/FileDiffTool.ts
var import_obsidian15 = require("obsidian");

// src/components/chat/filediffhandler.ts
var import_obsidian14 = require("obsidian");
function createSuggestionBlock(suggestionText) {
  return `\`\`\`suggestion
${suggestionText}
\`\`\``;
}
async function insertFileChangeSuggestion(vault, file, suggestionText, position) {
  const content = await vault.read(file);
  const lines = content.split("\n");
  const suggestionBlock = createSuggestionBlock(suggestionText);
  if (position !== void 0 && position >= 0 && position <= lines.length) {
    lines.splice(position, 0, suggestionBlock);
  } else {
    lines.push(suggestionBlock);
  }
  await vault.modify(file, lines.join("\n"));
}
var FileChangeSuggestionsModal = class extends import_obsidian14.Modal {
  constructor(app, suggestions) {
    super(app);
    __publicField(this, "suggestions");
    this.suggestions = suggestions;
  }
  onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.createEl("h2", { text: "File Change Suggestions" });
    this.suggestions.forEach((s) => {
      const container = contentEl.createDiv("suggestion-container");
      container.createEl("h4", { text: s.file.path });
      container.createEl("pre", { text: s.suggestionText });
      const btnRow = container.createDiv("suggestion-btn-row");
      const acceptBtn = btnRow.createEl("button", { text: "Accept" });
      const rejectBtn = btnRow.createEl("button", { text: "Reject" });
      acceptBtn.onclick = () => {
        var _a2;
        (_a2 = s.onAccept) == null ? void 0 : _a2.call(s);
        new import_obsidian14.Notice("Suggestion accepted");
        this.close();
      };
      rejectBtn.onclick = () => {
        var _a2;
        (_a2 = s.onReject) == null ? void 0 : _a2.call(s);
        new import_obsidian14.Notice("Suggestion rejected");
        this.close();
      };
    });
  }
  onClose() {
    this.contentEl.empty();
  }
};
function showFileChangeSuggestionsModal(app, suggestions) {
  new FileChangeSuggestionsModal(app, suggestions).open();
}
function formatSuggestionForDisplay(suggestionText) {
  const html = suggestionText.split("\n").map((line) => {
    if (line.startsWith("+")) return `<span class="suggestion-add">${line}</span>`;
    if (line.startsWith("-")) return `<span class="suggestion-remove">${line}</span>`;
    return line;
  }).join("<br>");
  return `<pre>${html}</pre>`;
}

// src/components/chat/tools/FileDiffTool.ts
var FileDiffTool = class {
  constructor(app) {
    this.app = app;
    __publicField(this, "name", "file_diff");
    __publicField(this, "description", "Compare and suggest changes to files");
    __publicField(this, "parameters", {
      filePath: {
        type: "string",
        description: "Path to the file to compare/modify (relative to vault root)",
        required: true
      },
      originalContent: {
        type: "string",
        description: "Original content for comparison (if not provided, reads from file)",
        required: false
      },
      suggestedContent: {
        type: "string",
        description: "Suggested new content for the file",
        required: true
      },
      action: {
        type: "string",
        enum: ["compare", "apply", "suggest"],
        description: "Action to perform: compare files, apply changes, or show suggestion UI",
        default: "suggest"
      },
      insertPosition: {
        type: "number",
        description: "Line number to insert suggestion at (for suggest action)",
        required: false
      }
    });
  }
  async execute(params, context) {
    const { filePath, originalContent, suggestedContent, action = "suggest", insertPosition } = params;
    if (!filePath) {
      return {
        success: false,
        error: "filePath parameter is required"
      };
    }
    if (!suggestedContent) {
      return {
        success: false,
        error: "suggestedContent parameter is required"
      };
    }
    try {
      const file = this.app.vault.getAbstractFileByPath(filePath);
      if (!file || !(file instanceof import_obsidian15.TFile)) {
        return {
          success: false,
          error: `File not found: ${filePath}`
        };
      }
      const currentContent = originalContent || await this.app.vault.read(file);
      switch (action) {
        case "compare":
          return this.compareFiles(currentContent, suggestedContent, filePath);
        case "apply":
          return this.applyChanges(file, suggestedContent);
        case "suggest":
        default:
          return this.showSuggestion(file, currentContent, suggestedContent, insertPosition);
      }
    } catch (error) {
      return {
        success: false,
        error: `Failed to process file diff: ${error.message}`
      };
    }
  }
  compareFiles(originalContent, suggestedContent, filePath) {
    const diff = this.generateDiff(originalContent, suggestedContent);
    return {
      success: true,
      data: {
        action: "compare",
        filePath,
        diff,
        formattedDiff: formatSuggestionForDisplay(diff),
        hasChanges: diff.length > 0
      }
    };
  }
  async applyChanges(file, suggestedContent) {
    try {
      await this.app.vault.modify(file, suggestedContent);
      return {
        success: true,
        data: {
          action: "apply",
          filePath: file.path,
          size: suggestedContent.length
        }
      };
    } catch (error) {
      return {
        success: false,
        error: `Failed to apply changes: ${error.message}`
      };
    }
  }
  async showSuggestion(file, originalContent, suggestedContent, insertPosition) {
    const diff = this.generateDiff(originalContent, suggestedContent);
    if (diff.length === 0) {
      return {
        success: true,
        data: {
          action: "suggest",
          filePath: file.path,
          message: "No changes detected"
        }
      };
    }
    try {
      const suggestion = {
        file,
        suggestionText: diff,
        onAccept: () => {
          this.app.vault.modify(file, suggestedContent);
        },
        onReject: () => {
        }
      };
      showFileChangeSuggestionsModal(this.app, [suggestion]);
      if (insertPosition !== void 0) {
        await insertFileChangeSuggestion(this.app.vault, file, diff, insertPosition);
      }
      return {
        success: true,
        data: {
          action: "suggest",
          filePath: file.path,
          diff,
          suggestionInserted: insertPosition !== void 0
        }
      };
    } catch (error) {
      return {
        success: false,
        error: `Failed to show suggestion: ${error.message}`
      };
    }
  }
  generateDiff(original, suggested) {
    const originalLines = original.split("\n");
    const suggestedLines = suggested.split("\n");
    const diff = [];
    const maxLines = Math.max(originalLines.length, suggestedLines.length);
    for (let i = 0; i < maxLines; i++) {
      const originalLine = originalLines[i] || "";
      const suggestedLine = suggestedLines[i] || "";
      if (originalLine !== suggestedLine) {
        if (originalLine && !suggestedLine) {
          diff.push(`-${originalLine}`);
        } else if (!originalLine && suggestedLine) {
          diff.push(`+${suggestedLine}`);
        } else if (originalLine !== suggestedLine) {
          diff.push(`-${originalLine}`);
          diff.push(`+${suggestedLine}`);
        }
      }
    }
    return diff.join("\n");
  }
};

// src/components/chat/tools/ThoughtTool.ts
var ThoughtTool = class {
  constructor(app) {
    this.app = app;
    __publicField(this, "name", "thought");
    __publicField(this, "description", "Record and display AI reasoning steps and thought processes");
    __publicField(this, "parameters", {
      thought: {
        type: "string",
        description: "The thought or reasoning step to record",
        required: true
      },
      step: {
        type: "number",
        description: "Current step number in the thought process",
        required: false
      },
      totalSteps: {
        type: "number",
        description: "Total expected steps in the thought process",
        required: false
      },
      category: {
        type: "string",
        enum: ["analysis", "planning", "problem-solving", "reflection", "conclusion"],
        description: "Category of thought for better organization",
        default: "analysis"
      },
      confidence: {
        type: "number",
        description: "Confidence level in this thought (1-10 scale)",
        default: 7,
        minimum: 1,
        maximum: 10
      }
    });
  }
  async execute(params, context) {
    const {
      thought,
      step,
      totalSteps,
      category = "analysis",
      confidence = 7
    } = params;
    if (!thought || thought.trim().length === 0) {
      return {
        success: false,
        error: "Thought content cannot be empty"
      };
    }
    try {
      const timestamp2 = (/* @__PURE__ */ new Date()).toLocaleTimeString();
      const stepInfo = step && totalSteps ? `Step ${step}/${totalSteps}` : step ? `Step ${step}` : "";
      const confidenceBar = "\u25CF".repeat(Math.floor(confidence)) + "\u25CB".repeat(10 - Math.floor(confidence));
      const thoughtData = {
        timestamp: timestamp2,
        thought: thought.trim(),
        step,
        totalSteps,
        category,
        confidence,
        formattedThought: this.formatThought(thought.trim(), stepInfo, category, confidence, timestamp2)
      };
      console.log("ThoughtTool: Recording thought:", thoughtData);
      return {
        success: true,
        data: thoughtData
      };
    } catch (error) {
      return {
        success: false,
        error: `Failed to record thought: ${error.message}`
      };
    }
  }
  formatThought(thought, stepInfo, category, confidence, timestamp2) {
    const categoryEmoji = this.getCategoryEmoji(category);
    const confidenceDisplay = `${confidence}/10`;
    let formatted = `${categoryEmoji} **${category.toUpperCase()}**`;
    if (stepInfo) {
      formatted += ` | ${stepInfo}`;
    }
    formatted += ` | Confidence: ${confidenceDisplay} | ${timestamp2}
`;
    formatted += `> ${thought}`;
    return formatted;
  }
  getCategoryEmoji(category) {
    switch (category) {
      case "analysis":
        return "\u{1F50D}";
      case "planning":
        return "\u{1F4CB}";
      case "problem-solving":
        return "\u{1F9E9}";
      case "reflection":
        return "\u{1F914}";
      case "conclusion":
        return "\u2705";
      default:
        return "\u{1F4AD}";
    }
  }
  /**
   * Helper method to validate confidence range
   */
  validateConfidence(confidence) {
    return Math.max(1, Math.min(10, Math.floor(confidence)));
  }
};

// src/components/chat/AgentResponseHandler.ts
var AgentResponseHandler = class {
  constructor(context) {
    this.context = context;
    __publicField(this, "commandParser");
    __publicField(this, "toolRegistry");
    __publicField(this, "executionCount", 0);
    this.commandParser = new CommandParser();
    this.toolRegistry = new ToolRegistry();
    this.initializeTools();
  }
  initializeTools() {
    this.toolRegistry.register(new FileSelectTool(this.context.app));
    this.toolRegistry.register(new FileReadTool(this.context.app));
    this.toolRegistry.register(new FileWriteTool(this.context.app));
    this.toolRegistry.register(new FileDiffTool(this.context.app));
    this.toolRegistry.register(new ThoughtTool(this.context.app));
  }
  /**
   * Process an AI response and handle any tool commands
   * @param response The AI response text
   * @returns Object containing processed text and execution results
   */
  async processResponse(response) {
    console.log("AgentResponseHandler: Processing response, agent mode enabled:", this.context.plugin.isAgentModeEnabled());
    console.log("AgentResponseHandler: Response content:", response);
    if (!this.context.plugin.isAgentModeEnabled()) {
      console.log("AgentResponseHandler: Agent mode disabled, returning original response");
      return {
        processedText: response,
        toolResults: [],
        hasTools: false
      };
    }
    const { text, commands } = this.commandParser.parseResponse(response);
    console.log("AgentResponseHandler: Parsed text:", text);
    console.log("AgentResponseHandler: Found commands:", commands);
    let thoughtResultDisplay = "";
    const userRequest = text && text.trim().length > 0 ? text : response;
    const thoughtTool = new ThoughtTool(this.context.app);
    const thoughtResult = await thoughtTool.execute({
      thought: `Agent reasoning: Received user request: "${userRequest}". Determining next actions.`,
      category: "analysis",
      confidence: 7
    }, this.context);
    if (thoughtResult.success && thoughtResult.data && thoughtResult.data.formattedThought) {
      thoughtResultDisplay = `
${thoughtResult.data.formattedThought}
`;
      if (this.context.messagesContainer) {
        const div = document.createElement("div");
        div.className = "ai-chat-message thought-tool";
        div.innerHTML = `<div class="message-content">${thoughtResult.data.formattedThought}</div>`;
        this.context.messagesContainer.appendChild(div);
      }
    }
    if (commands.length === 0) {
      console.log("AgentResponseHandler: No commands found, returning original text");
      return {
        processedText: (thoughtResultDisplay ? thoughtResultDisplay + "\n" : "") + text,
        toolResults: [],
        hasTools: false
      };
    }
    const agentSettings = this.context.plugin.getAgentModeSettings();
    if (this.executionCount >= agentSettings.maxToolCalls) {
      new import_obsidian16.Notice(`Agent mode: Maximum tool calls (${agentSettings.maxToolCalls}) reached`);
      return {
        processedText: text + "\n\n*[Tool execution limit reached]*",
        toolResults: [],
        hasTools: true
      };
    }
    const toolResults = [];
    for (const command of commands) {
      try {
        const result = await this.executeToolWithTimeout(command, agentSettings.timeoutMs);
        toolResults.push({ command, result });
        this.executionCount++;
        this.context.onToolResult(result, command);
        if (this.executionCount >= agentSettings.maxToolCalls) {
          break;
        }
      } catch (error) {
        const errorResult = {
          success: false,
          error: `Tool execution failed: ${error.message}`,
          requestId: command.requestId
        };
        toolResults.push({ command, result: errorResult });
        this.context.onToolResult(errorResult, command);
      }
    }
    return {
      processedText: (thoughtResultDisplay ? thoughtResultDisplay + "\n" : "") + text,
      toolResults,
      hasTools: true
    };
  }
  /**
   * Execute a tool command with timeout
   */
  async executeToolWithTimeout(command, timeoutMs) {
    return new Promise((resolve, reject) => {
      const timeout = setTimeout(() => {
        reject(new Error(`Tool execution timed out after ${timeoutMs}ms`));
      }, timeoutMs);
      this.toolRegistry.execute(command).then((result) => {
        clearTimeout(timeout);
        resolve(result);
      }).catch((error) => {
        clearTimeout(timeout);
        reject(error);
      });
    });
  }
  /**
   * Reset execution count (call at start of new conversation)
   */
  resetExecutionCount() {
    this.executionCount = 0;
  }
  /**
   * Get available tools information
   */
  getAvailableTools() {
    return this.toolRegistry.getAvailableTools();
  }
  /**
   * Get tool execution statistics
   */
  getExecutionStats() {
    const agentSettings = this.context.plugin.getAgentModeSettings();
    return {
      executionCount: this.executionCount,
      maxToolCalls: agentSettings.maxToolCalls,
      remaining: Math.max(0, agentSettings.maxToolCalls - this.executionCount)
    };
  }
  /**
   * Create a message with tool execution results for context
   */
  createToolResultMessage(toolResults) {
    if (toolResults.length === 0) {
      return null;
    }
    const resultText = toolResults.map(({ command, result }) => {
      const status = result.success ? "\u2713" : "\u2717";
      const data = result.success ? JSON.stringify(result.data, null, 2) : result.error;
      return `${status} Tool: ${command.action}
Parameters: ${JSON.stringify(command.parameters, null, 2)}
Result: ${data}`;
    }).join("\n\n");
    return {
      role: "system",
      content: `Tool execution results:

${resultText}`
    };
  }
  /**
   * Helper to ensure a file path is relative to the vault root and strips .md extension for Obsidian links
   */
  getRelativePath(filePath) {
    const adapter = this.context.app.vault.adapter;
    const vaultRoot = (adapter == null ? void 0 : adapter.basePath) ? adapter.basePath.replace(/\\/g, "/") : "";
    let relPath = filePath.replace(/\\/g, "/");
    if (vaultRoot && relPath.startsWith(vaultRoot)) {
      relPath = relPath.slice(vaultRoot.length);
      if (relPath.startsWith("/")) relPath = relPath.slice(1);
    }
    if (relPath.toLowerCase().endsWith(".md")) {
      relPath = relPath.slice(0, -3);
    }
    return relPath;
  }
  /**
   * Format tool results for display in chat
   */
  formatToolResultsForDisplay(toolResults) {
    if (toolResults.length === 0) {
      return "";
    }
    const resultText = toolResults.map(({ command, result }) => {
      const status = result.success ? "\u2705" : "\u274C";
      const action = command.action.replace("_", " ");
      if (result.success) {
        let context = "";
        if (result.data) {
          switch (command.action) {
            case "file_write":
            case "file_read":
            case "file_diff":
              if (result.data.filePath) {
                const relPath = this.getRelativePath(result.data.filePath);
                context = ` [[${relPath}]]`;
              }
              break;
            case "file_select":
              if (result.data.count !== void 0) {
                context = ` [[${result.data.count} files found]]`;
              }
              break;
            case "thought":
              if (result.data && result.data.formattedThought) {
                return result.data.formattedThought;
              }
              break;
          }
        }
        return `${status} **${action}** completed successfully${context}`;
      } else {
        return `${status} **${action}** failed: ${result.error}`;
      }
    }).join("\n");
    return `

**Tool Execution:**
${resultText}`;
  }
};

// src/components/chat.ts
var VIEW_TYPE_CHAT = "chat-view";
var ChatView = class extends import_obsidian17.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    __publicField(this, "plugin");
    __publicField(this, "chatHistoryManager");
    __publicField(this, "messagesContainer");
    __publicField(this, "inputContainer");
    __publicField(this, "activeStream", null);
    __publicField(this, "referenceNoteIndicator");
    // Add this property
    __publicField(this, "agentResponseHandler", null);
    this.plugin = plugin;
    this.chatHistoryManager = new ChatHistoryManager(this.app.vault, this.plugin.manifest.id, "chat-history.json");
  }
  getViewType() {
    return VIEW_TYPE_CHAT;
  }
  getDisplayText() {
    return "AI Chat";
  }
  getIcon() {
    return "message-square";
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    contentEl.addClass("ai-chat-view");
    let loadedHistory = [];
    try {
      loadedHistory = await this.chatHistoryManager.getHistory();
    } catch (e) {
      new import_obsidian17.Notice("Failed to load chat history.");
      loadedHistory = [];
    }
    const ui = createChatUI(this.app, contentEl);
    this.messagesContainer = ui.messagesContainer;
    this.inputContainer = ui.inputContainer;
    this.referenceNoteIndicator = ui.referenceNoteIndicator;
    this.updateReferenceNoteIndicator();
    const textarea = ui.textarea;
    const sendButton = ui.sendButton;
    const stopButton = ui.stopButton;
    ui.copyAllButton.addEventListener("click", handleCopyAll(this.messagesContainer, this.plugin));
    ui.saveNoteButton.addEventListener("click", handleSaveNote(this.messagesContainer, this.plugin, this.app));
    ui.clearButton.addEventListener("click", handleClearChat(this.messagesContainer, this.chatHistoryManager));
    ui.settingsButton.addEventListener("click", handleSettings(this.app, this.plugin));
    ui.helpButton.addEventListener("click", handleHelp(this.app));
    ui.referenceNoteButton.addEventListener("click", () => {
      this.plugin.settings.referenceCurrentNote = !this.plugin.settings.referenceCurrentNote;
      this.plugin.saveSettings();
      this.updateReferenceNoteIndicator();
    });
    this.agentResponseHandler = new AgentResponseHandler({
      app: this.app,
      plugin: this.plugin,
      messagesContainer: this.messagesContainer,
      onToolResult: (toolResult, command) => {
        if (toolResult.success) {
          console.log(`Tool ${command.action} completed successfully`, toolResult.data);
        } else {
          console.error(`Tool ${command.action} failed:`, toolResult.error);
        }
      }
    });
    ui.agentModeButton.addEventListener("click", async () => {
      const isCurrentlyEnabled = this.plugin.isAgentModeEnabled();
      await this.plugin.setAgentModeEnabled(!isCurrentlyEnabled);
      if (this.plugin.isAgentModeEnabled()) {
        ui.agentModeButton.classList.add("active");
        ui.agentModeButton.setAttribute("title", "Agent Mode: ON - AI can use tools");
        new import_obsidian17.Notice("Agent Mode enabled - AI can now use tools");
        if (this.agentResponseHandler) {
          this.agentResponseHandler.resetExecutionCount();
        }
      } else {
        ui.agentModeButton.classList.remove("active");
        ui.agentModeButton.setAttribute("title", "Agent Mode: OFF - Regular chat");
        new import_obsidian17.Notice("Agent Mode disabled");
      }
    });
    if (this.plugin.isAgentModeEnabled()) {
      ui.agentModeButton.classList.add("active");
      ui.agentModeButton.setAttribute("title", "Agent Mode: ON - AI can use tools");
    } else {
      ui.agentModeButton.classList.remove("active");
      ui.agentModeButton.setAttribute("title", "Agent Mode: OFF - Regular chat");
    }
    const sendMessage = async () => {
      const content = textarea.value.trim();
      if (!content) return;
      textarea.disabled = true;
      sendButton.classList.add("hidden");
      stopButton.classList.remove("hidden");
      const userMessageEl = await createMessageElement(this.app, "user", content, this.chatHistoryManager, this.plugin, (el) => this.regenerateResponse(el), this);
      this.messagesContainer.appendChild(userMessageEl);
      this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
      textarea.value = "";
      try {
        const messages = await this.buildContextMessages();
        const messageElements = this.messagesContainer.querySelectorAll(".ai-chat-message");
        messageElements.forEach((el) => {
          var _a2;
          const role = el.classList.contains("user") ? "user" : "assistant";
          const content2 = ((_a2 = el.querySelector(".message-content")) == null ? void 0 : _a2.textContent) || "";
          messages.push({ role, content: content2 });
        });
        const tempContainer = document.createElement("div");
        tempContainer.addClass("ai-chat-message", "assistant");
        tempContainer.createDiv("message-content");
        this.messagesContainer.appendChild(tempContainer);
        this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
        const responseContent = await this.streamAssistantResponse(messages, tempContainer);
        tempContainer.remove();
        if (responseContent.trim() !== "") {
          const messageEl = await createMessageElement(this.app, "assistant", responseContent, this.chatHistoryManager, this.plugin, (el) => this.regenerateResponse(el), this);
          this.messagesContainer.appendChild(messageEl);
          await this.chatHistoryManager.addMessage({
            timestamp: messageEl.dataset.timestamp || (/* @__PURE__ */ new Date()).toISOString(),
            sender: "assistant",
            content: responseContent
          });
        }
      } catch (error) {
        if (error.name !== "AbortError") {
          new import_obsidian17.Notice(`Error: ${error.message}`);
          await createMessageElement(this.app, "assistant", `Error: ${error.message}`, this.chatHistoryManager, this.plugin, (el) => this.regenerateResponse(el), this);
        }
      } finally {
        textarea.disabled = false;
        textarea.focus();
        stopButton.classList.add("hidden");
        sendButton.classList.remove("hidden");
        this.activeStream = null;
      }
    };
    sendButton.addEventListener("click", sendMessage);
    stopButton.addEventListener("click", () => {
      if (this.activeStream) {
        this.activeStream.abort();
        this.activeStream = null;
        textarea.disabled = false;
        textarea.focus();
        stopButton.classList.add("hidden");
        sendButton.classList.remove("hidden");
      }
    });
    Promise.resolve().then(() => (init_inputHandler(), inputHandler_exports)).then(({ setupInputHandler: setupInputHandler2 }) => {
      setupInputHandler2(
        textarea,
        sendMessage,
        async (cmd) => {
          switch (cmd) {
            case "/clear":
              ui.clearButton.click();
              break;
            case "/copy":
              ui.copyAllButton.click();
              break;
            case "/save":
              ui.saveNoteButton.click();
              break;
            case "/settings":
              ui.settingsButton.click();
              break;
            case "/help":
              ui.helpButton.click();
              break;
            case "/ref":
              ui.referenceNoteButton.click();
              break;
          }
        },
        this.app,
        this.plugin,
        sendButton,
        stopButton
      );
    });
    if (loadedHistory.length > 0) {
      this.messagesContainer.empty();
      const file = this.app.workspace.getActiveFile();
      if (file) {
        await loadChatYamlAndApplySettings({
          app: this.app,
          plugin: this.plugin,
          settings: this.plugin.settings,
          file
        });
      }
      await renderChatHistory({
        messagesContainer: this.messagesContainer,
        loadedHistory,
        chatHistoryManager: this.chatHistoryManager,
        plugin: this.plugin,
        regenerateResponse: (el) => this.regenerateResponse(el),
        scrollToBottom: true
      });
    }
    this.updateReferenceNoteIndicator();
    this.registerEvent(this.app.workspace.on("active-leaf-change", () => {
      this.updateReferenceNoteIndicator();
    }));
    this.plugin.onSettingsChange(() => {
      this.updateReferenceNoteIndicator();
    });
  }
  async addMessage(role, content, isError = false) {
    const messageEl = await createMessageElement(this.app, role, content, this.chatHistoryManager, this.plugin, (el) => this.regenerateResponse(el), this);
    const uiTimestamp = messageEl.dataset.timestamp || (/* @__PURE__ */ new Date()).toISOString();
    this.messagesContainer.appendChild(messageEl);
    this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
    try {
      await this.chatHistoryManager.addMessage({
        timestamp: uiTimestamp,
        sender: role,
        content
      });
    } catch (e) {
      new import_obsidian17.Notice("Failed to save chat message: " + e.message);
    }
  }
  async onClose() {
    if (this.activeStream) {
      this.activeStream.abort();
      this.activeStream = null;
    }
  }
  async regenerateResponse(messageEl) {
    const textarea = this.inputContainer.querySelector("textarea");
    if (textarea) textarea.disabled = true;
    const allMessages = Array.from(this.messagesContainer.querySelectorAll(".ai-chat-message"));
    const currentIndex = allMessages.indexOf(messageEl);
    const isUserClicked = messageEl.classList.contains("user");
    let targetIndex = -1;
    if (isUserClicked) {
      for (let i = currentIndex + 1; i < allMessages.length; i++) {
        if (allMessages[i].classList.contains("assistant")) {
          targetIndex = i;
          break;
        }
        if (allMessages[i].classList.contains("user")) {
          break;
        }
      }
    } else {
      targetIndex = currentIndex;
    }
    let userMsgIndex = currentIndex;
    if (!isUserClicked) {
      userMsgIndex = currentIndex - 1;
      while (userMsgIndex >= 0 && !allMessages[userMsgIndex].classList.contains("user")) {
        userMsgIndex--;
      }
    }
    const messages = await this.buildContextMessages();
    for (let i = 0; i <= userMsgIndex; i++) {
      const el = allMessages[i];
      const role = el.classList.contains("user") ? "user" : "assistant";
      const content = el.dataset.rawContent || "";
      messages.push({ role, content });
    }
    let originalTimestamp = (/* @__PURE__ */ new Date()).toISOString();
    let originalContent = "";
    let insertAfterNode = null;
    if (targetIndex !== -1) {
      const targetEl = allMessages[targetIndex];
      originalTimestamp = targetEl.dataset.timestamp || originalTimestamp;
      originalContent = targetEl.dataset.rawContent || "";
      insertAfterNode = targetEl.previousElementSibling;
      targetEl.remove();
    } else if (isUserClicked) {
      insertAfterNode = messageEl;
    } else {
      insertAfterNode = null;
    }
    const assistantContainer = await createMessageElement(this.app, "assistant", "", this.chatHistoryManager, this.plugin, (el) => this.regenerateResponse(el), this);
    assistantContainer.dataset.timestamp = originalTimestamp;
    if (insertAfterNode && insertAfterNode.nextSibling) {
      this.messagesContainer.insertBefore(assistantContainer, insertAfterNode.nextSibling);
    } else {
      this.messagesContainer.appendChild(assistantContainer);
    }
    this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
    try {
      await this.streamAssistantResponse(messages, assistantContainer, originalTimestamp, originalContent);
    } catch (error) {
      if (error.name !== "AbortError") {
        new import_obsidian17.Notice(`Error: ${error.message}`);
        assistantContainer.remove();
      }
    } finally {
      if (textarea) {
        textarea.disabled = false;
        textarea.focus();
      }
      this.activeStream = null;
    }
  }
  updateReferenceNoteIndicator() {
    if (!this.referenceNoteIndicator) return;
    const currentFile = this.app.workspace.getActiveFile();
    const isReferenceEnabled = this.plugin.settings.referenceCurrentNote;
    const button = this.referenceNoteIndicator.previousElementSibling;
    if (isReferenceEnabled && currentFile) {
      this.referenceNoteIndicator.setText(`\u{1F4DD} Referencing: ${currentFile.basename}`);
      this.referenceNoteIndicator.style.display = "block";
      if (button && button.getAttribute("aria-label") === "Toggle referencing current note") {
        button.setText("\u{1F4DD}");
        button.classList.add("active");
      }
    } else {
      this.referenceNoteIndicator.style.display = "none";
      if (button && button.getAttribute("aria-label") === "Toggle referencing current note") {
        button.setText("\u{1F4DD}");
        button.classList.remove("active");
      }
    }
  }
  async buildContextMessages() {
    const messages = [
      { role: "system", content: this.plugin.getSystemMessage() }
    ];
    if (this.plugin.settings.enableContextNotes && this.plugin.settings.contextNotes) {
      const contextContent = await this.plugin.getContextNotesContent(this.plugin.settings.contextNotes);
      messages[0].content += `

Context Notes:
${contextContent}`;
    }
    if (this.plugin.settings.referenceCurrentNote) {
      const currentFile = this.app.workspace.getActiveFile();
      if (currentFile) {
        const currentNoteContent = await this.app.vault.cachedRead(currentFile);
        messages.push({
          role: "system",
          content: `Here is the content of the current note:

${currentNoteContent}`
        });
      }
    }
    return messages;
  }
  async streamAssistantResponse(messages, container, originalTimestamp, originalContent) {
    let responseContent = "";
    this.activeStream = new AbortController();
    if (this.plugin.isAgentModeEnabled()) {
      const { AGENT_SYSTEM_PROMPT: AGENT_SYSTEM_PROMPT2 } = await Promise.resolve().then(() => (init_promptConstants(), promptConstants_exports));
      const systemMessageIndex = messages.findIndex((msg) => msg.role === "system");
      if (systemMessageIndex !== -1) {
        messages[systemMessageIndex].content = AGENT_SYSTEM_PROMPT2 + "\n\n" + messages[systemMessageIndex].content;
      }
    }
    try {
      const provider = this.plugin.settings.selectedModel ? createProviderFromUnifiedModel(this.plugin.settings, this.plugin.settings.selectedModel) : createProvider(this.plugin.settings);
      await provider.getCompletion(
        messages,
        {
          temperature: this.plugin.settings.temperature,
          maxTokens: this.plugin.settings.maxTokens,
          streamCallback: async (chunk) => {
            responseContent += chunk;
            const contentEl = container.querySelector(".message-content");
            if (contentEl) {
              container.dataset.rawContent = responseContent;
              contentEl.empty();
              await import_obsidian17.MarkdownRenderer.render(
                this.app,
                responseContent,
                contentEl,
                "",
                this
              );
              this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
            }
          },
          abortController: this.activeStream
        }
      );
      if (this.plugin.isAgentModeEnabled() && this.agentResponseHandler) {
        const agentResult = await this.agentResponseHandler.processResponse(responseContent);
        if (agentResult.hasTools) {
          const finalContent = agentResult.processedText + this.agentResponseHandler.formatToolResultsForDisplay(agentResult.toolResults);
          const contentEl = container.querySelector(".message-content");
          if (contentEl) {
            container.dataset.rawContent = finalContent;
            contentEl.empty();
            await import_obsidian17.MarkdownRenderer.render(
              this.app,
              finalContent,
              contentEl,
              "",
              this
            );
            this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
          }
          const toolResultMessage = this.agentResponseHandler.createToolResultMessage(agentResult.toolResults);
          if (toolResultMessage) {
            console.log("Tool results for context:", toolResultMessage);
          }
          responseContent = finalContent;
        }
      }
      if (originalTimestamp && responseContent.trim() !== "") {
        await this.chatHistoryManager.updateMessage(
          originalTimestamp,
          "assistant",
          originalContent || "",
          responseContent
        );
      }
      return responseContent;
    } catch (error) {
      if (error.name !== "AbortError") {
        throw error;
      }
      return "";
    }
  }
  clearMessages() {
    this.messagesContainer.empty();
  }
  scrollMessagesToBottom() {
    this.messagesContainer.scrollTop = this.messagesContainer.scrollHeight;
  }
};

// src/components/parseSelection.ts
function parseSelection(selection, chatSeparator, chatBoundaryString) {
  let insideChat = !chatBoundaryString;
  const lines = selection.split("\n");
  let messages = [];
  let currentRole = "user";
  let currentContent = "";
  for (const line of lines) {
    if (chatBoundaryString && line.trim() === chatBoundaryString) {
      if (!insideChat && currentContent.trim()) {
        messages.push({ role: currentRole, content: currentContent.trim() });
        currentContent = "";
      }
      insideChat = !insideChat;
      continue;
    }
    if (!insideChat) continue;
    if (line.trim() === chatSeparator) {
      if (currentContent.trim()) {
        messages.push({ role: currentRole, content: currentContent.trim() });
      }
      currentRole = currentRole === "user" ? "assistant" : "user";
      currentContent = "";
    } else {
      currentContent += line + "\n";
    }
  }
  if (currentContent.trim()) {
    messages.push({ role: currentRole, content: currentContent.trim() });
  }
  return messages;
}

// src/components/ModelSettingsView.ts
var import_obsidian18 = require("obsidian");
var VIEW_TYPE_MODEL_SETTINGS2 = "model-settings-view";
var ModelSettingsView = class extends import_obsidian18.ItemView {
  constructor(leaf, plugin) {
    super(leaf);
    __publicField(this, "plugin");
    __publicField(this, "_onSettingsChange", () => {
      this.onOpen();
    });
    this.plugin = plugin;
  }
  getViewType() {
    return VIEW_TYPE_MODEL_SETTINGS2;
  }
  getDisplayText() {
    return "AI Model Settings";
  }
  getIcon() {
    return "file-sliders";
  }
  async onOpen() {
    const { contentEl } = this;
    contentEl.empty();
    this.plugin.offSettingsChange(this._onSettingsChange);
    this.plugin.onSettingsChange(this._onSettingsChange);
    const settingsSections = new (await Promise.resolve().then(() => (init_SettingsSections(), SettingsSections_exports))).SettingsSections(this.plugin);
    await settingsSections.renderAllSettings(contentEl, { onRefresh: () => this.onOpen() });
  }
  async onClose() {
    this.plugin.offSettingsChange(this._onSettingsChange);
  }
};

// src/components/noteUtils.ts
var import_obsidian19 = require("obsidian");
function extractContentUnderHeader(content, headerText) {
  const lines = content.split("\n");
  let foundHeader = false;
  let extractedContent = [];
  let headerLevel = 0;
  for (let i = 0; i < lines.length; i++) {
    const line = lines[i];
    const headerMatch = line.match(/^(#+)\s+(.*?)$/);
    if (headerMatch) {
      const currentHeaderLevel = headerMatch[1].length;
      const currentHeaderText = headerMatch[2].trim();
      if (foundHeader) {
        if (currentHeaderLevel <= headerLevel) {
          break;
        }
      } else if (currentHeaderText.toLowerCase() === headerText.toLowerCase()) {
        foundHeader = true;
        headerLevel = currentHeaderLevel;
        extractedContent.push(line);
        continue;
      }
    }
    if (foundHeader) {
      extractedContent.push(line);
    }
  }
  return extractedContent.join("\n");
}
async function processObsidianLinks(content, app, settings, visitedNotes = /* @__PURE__ */ new Set(), currentDepth = 0) {
  var _a2;
  if (!settings.enableObsidianLinks) return content;
  const linkRegex = /\[\[(.*?)\]\]/g;
  let match;
  let processedContent = content;
  while ((match = linkRegex.exec(content)) !== null) {
    if (match && match[0] && match[1]) {
      const parts = match[1].split("|");
      const filePath = parts[0].trim();
      const displayText = parts.length > 1 ? parts[1].trim() : filePath;
      try {
        let file = app.vault.getAbstractFileByPath(filePath) || app.vault.getAbstractFileByPath(`${filePath}.md`);
        if (!file) {
          const allFiles = app.vault.getFiles();
          file = allFiles.find((f) => f.name === filePath || f.name === `${filePath}.md` || f.basename.toLowerCase() === filePath.toLowerCase() || f.path === filePath || f.path === `${filePath}.md`) || null;
        }
        const headerMatch = filePath.match(/(.*?)#(.*)/);
        let extractedContent = "";
        if (file && file instanceof import_obsidian19.TFile) {
          if (visitedNotes.has(file.path)) {
            extractedContent = "[Recursive link omitted: already included]";
          } else {
            visitedNotes.add(file.path);
            const noteContent = await app.vault.cachedRead(file);
            if (headerMatch) {
              extractedContent = extractContentUnderHeader(noteContent, headerMatch[2].trim());
            } else {
              extractedContent = noteContent;
            }
            if (settings.expandLinkedNotesRecursively && currentDepth < ((_a2 = settings.maxLinkExpansionDepth) != null ? _a2 : 2)) {
              extractedContent = await processObsidianLinks(extractedContent, app, settings, visitedNotes, currentDepth + 1);
            }
          }
          processedContent = processedContent.replace(
            match[0],
            `${match[0]}

---
Note Name: ${filePath}
Content:
${extractedContent}
---
`
          );
        } else {
          new import_obsidian19.Notice(`File not found: ${filePath}. Ensure the file name and path are correct.`);
        }
      } catch (error) {
        new import_obsidian19.Notice(`Error processing link for ${filePath}: ${error.message}`);
      }
    }
  }
  return processedContent;
}
async function processContextNotes(contextNotesText, app) {
  const linkRegex = /\[\[(.*?)\]\]/g;
  let match;
  let contextContent = "";
  while ((match = linkRegex.exec(contextNotesText)) !== null) {
    if (match && match[1]) {
      const fileName = match[1].trim();
      try {
        const headerMatch = fileName.match(/(.*?)#(.*)/);
        const baseFileName = headerMatch ? headerMatch[1].trim() : fileName;
        const headerName = headerMatch ? headerMatch[2].trim() : null;
        let file = app.vault.getAbstractFileByPath(baseFileName) || app.vault.getAbstractFileByPath(`${baseFileName}.md`);
        if (!file) {
          const allFiles = app.vault.getFiles();
          file = allFiles.find(
            (f) => f.basename.toLowerCase() === baseFileName.toLowerCase() || f.name.toLowerCase() === `${baseFileName.toLowerCase()}.md`
          ) || null;
        }
        if (file && file instanceof import_obsidian19.TFile) {
          const noteContent = await app.vault.cachedRead(file);
          contextContent += `---
From note: ${file.basename}

`;
          if (headerName) {
            const headerContent = extractContentUnderHeader(noteContent, headerName);
            contextContent += headerContent;
          } else {
            contextContent += noteContent;
          }
          contextContent += "\n\n";
        } else {
          contextContent += `Note not found: ${fileName}

`;
        }
      } catch (error) {
        contextContent += `Error processing note ${fileName}: ${error.message}

`;
      }
    }
  }
  return contextContent;
}
async function processMessages(messages, app, settings) {
  const processedMessages = [];
  if (settings.enableContextNotes && settings.contextNotes) {
    const contextContent = await processContextNotes(settings.contextNotes, app);
    if (contextContent) {
      if (messages.length > 0 && messages[0].role === "system") {
        processedMessages.push({
          role: "system",
          content: `${messages[0].content}

Here is additional context:
${contextContent}`
        });
        messages = messages.slice(1);
      } else {
        processedMessages.push({
          role: "system",
          content: `Here is context for our conversation:
${contextContent}`
        });
      }
    }
  }
  for (const message of messages) {
    const processedContent = await processObsidianLinks(message.content, app, settings, /* @__PURE__ */ new Set());
    processedMessages.push({
      role: message.role,
      content: processedContent
    });
  }
  return processedMessages;
}
async function getContextNotesContent(contextNotesText, app) {
  return processContextNotes(contextNotesText, app);
}

// src/components/systemMessage.ts
function getSystemMessage(settings) {
  let systemMessage = settings.systemMessage;
  if (settings.includeDateWithSystemMessage) {
    const currentDate = (/* @__PURE__ */ new Date()).toISOString().split("T")[0];
    systemMessage = `${systemMessage}

The current date is ${currentDate}.`;
  }
  if (settings.includeTimeWithSystemMessage) {
    const now = /* @__PURE__ */ new Date();
    const timeZoneOffset = now.getTimezoneOffset();
    const offsetHours = Math.abs(timeZoneOffset) / 60;
    const offsetMinutes = Math.abs(timeZoneOffset) % 60;
    const sign = timeZoneOffset > 0 ? "-" : "+";
    const currentTime = now.toLocaleTimeString();
    const timeZoneString = `UTC${sign}${offsetHours.toString().padStart(2, "0")}:${offsetMinutes.toString().padStart(2, "0")}`;
    systemMessage = `${systemMessage}

The current time is ${currentTime} ${timeZoneString}.`;
  }
  return systemMessage;
}

// src/main.ts
var VIEW_TYPE_MODEL_SETTINGS = "model-settings-view";
var _MyPlugin = class _MyPlugin extends import_obsidian21.Plugin {
  constructor() {
    super(...arguments);
    __publicField(this, "settings");
    __publicField(this, "modelSettingsView", null);
    __publicField(this, "activeStream", null);
    __publicField(this, "_yamlAttributeCommandIds", []);
    __publicField(this, "settingsListeners", []);
  }
  onSettingsChange(listener) {
    this.settingsListeners.push(listener);
  }
  offSettingsChange(listener) {
    this.settingsListeners = this.settingsListeners.filter((l) => l !== listener);
  }
  emitSettingsChange() {
    for (const listener of this.settingsListeners) {
      try {
        listener();
      } catch (e) {
        console.error(e);
      }
    }
  }
  /**
   * Registers a command with Obsidian, optionally adding a ribbon icon.
   * @param options Command options including id, name, callback/editorCallback.
   * @param ribbonIcon Optional icon ID for a ribbon button.
   * @param ribbonTitle Optional tooltip title for the ribbon button.
   */
  registerCommand(options, ribbonIcon, ribbonTitle) {
    this.addCommand(options);
    if (ribbonIcon && ribbonTitle) {
      this.addRibbonIcon(ribbonIcon, ribbonTitle, options.callback || (() => {
      }));
    }
  }
  // --- Agent Mode State Integration ---
  getAgentModeSettings() {
    return this.settings.agentMode || {
      enabled: false,
      maxToolCalls: 5,
      timeoutMs: 3e4
    };
  }
  isAgentModeEnabled() {
    return this.getAgentModeSettings().enabled;
  }
  async setAgentModeEnabled(enabled) {
    if (!this.settings.agentMode) {
      this.settings.agentMode = {
        enabled: false,
        maxToolCalls: 5,
        timeoutMs: 3e4
      };
    }
    this.settings.agentMode.enabled = enabled;
    await this.saveSettings();
    this.emitSettingsChange();
  }
  /**
   * Helper to insert a separator with correct spacing in the editor.
   * @param editor The editor instance.
   * @param position The position to insert the separator.
   * @param separator The separator string.
   * @returns The line number after the inserted separator.
   */
  insertSeparator(editor, position, separator) {
    var _a2;
    const lineContent = (_a2 = editor.getLine(position.line)) != null ? _a2 : "";
    const prefix = lineContent.trim() !== "" ? "\n" : "";
    editor.replaceRange(`${prefix}
${separator}
`, position);
    return position.line + (prefix ? 1 : 0) + 2;
  }
  /**
   * Helper to move the cursor after inserting text in the editor.
   * @param editor The editor instance.
   * @param startPos The starting position of the insertion.
   * @param insertText The text that was inserted.
   */
  moveCursorAfterInsert(editor, startPos, insertText) {
    const lines = insertText.split("\n");
    if (lines.length === 1) {
      editor.setCursor({
        line: startPos.line,
        ch: startPos.ch + insertText.length
      });
    } else {
      editor.setCursor({
        line: startPos.line + lines.length - 1,
        ch: lines[lines.length - 1].length
      });
    }
  }
  /**
   * Helper to show an Obsidian notice.
   * @param message The message to display.
   */
  showNotice(message) {
    new import_obsidian21.Notice(message);
  }
  /**
   * Helper for clipboard actions with a notice.
   * @param text The text to copy.
   * @param successMsg The message to show on success.
   * @param failMsg The message to show on failure.
   */
  async copyToClipboard(text, successMsg, failMsg) {
    try {
      await navigator.clipboard.writeText(text);
      this.showNotice(successMsg);
    } catch (error) {
      this.showNotice(failMsg);
      console.error("Clipboard error:", error);
    }
  }
  /**
   * Helper to activate the chat view and load messages into it.
   * @param messages An array of messages to load.
   */
  async activateChatViewAndLoadMessages(messages) {
    await this.activateView(VIEW_TYPE_CHAT);
    const leaves = this.app.workspace.getLeavesOfType(VIEW_TYPE_CHAT);
    if (!leaves.length) {
      this.showNotice("Could not find chat view.");
      return;
    }
    const chatView = leaves[0].view;
    chatView.clearMessages();
    for (const msg of messages) {
      if (msg.role === "user" || msg.role === "assistant") {
        await chatView["addMessage"](msg.role, msg.content);
      }
    }
    chatView.scrollMessagesToBottom();
    this.showNotice("Loaded chat note into chat.");
  }
  /**
   * Registers a view type with Obsidian.
   * @param viewType The type of the view.
   * @param viewCreator The function that creates the view.
   */
  registerPluginView(viewType, viewCreator) {
    if (!_MyPlugin.registeredViewTypes.has(viewType)) {
      this.registerView(viewType, viewCreator);
      _MyPlugin.registeredViewTypes.add(viewType);
    }
  }
  /**
   * Handles the AI completion logic for the editor.
   * Extracts text, sends to AI, and streams response back to editor.
   * @param editor The editor instance.
   */
  async handleAICompletion(editor) {
    var _a2, _b;
    let text;
    let insertPosition;
    if (editor.somethingSelected()) {
      text = editor.getSelection();
      insertPosition = editor.getCursor("to");
    } else {
      const currentLineNumber = editor.getCursor().line;
      let lines = [];
      for (let i = 0; i <= currentLineNumber; i++) {
        lines.push(editor.getLine(i));
      }
      const chatStartString = this.settings.chatStartString;
      if (chatStartString) {
        const startIdx = lines.findIndex((line) => line.trim() === chatStartString.trim());
        if (startIdx !== -1) {
          lines = lines.slice(startIdx + 1);
        }
      }
      text = lines.join("\n");
      insertPosition = { line: currentLineNumber + 1, ch: 0 };
    }
    const messages = parseSelection(text, this.settings.chatSeparator);
    if (messages.length === 0) {
      this.showNotice("No valid messages found in the selection.");
      return;
    }
    const sepLine = this.insertSeparator(editor, insertPosition, this.settings.chatSeparator);
    let currentPosition = { line: sepLine, ch: 0 };
    this.activeStream = new AbortController();
    try {
      const provider = this.settings.selectedModel ? createProviderFromUnifiedModel(this.settings, this.settings.selectedModel) : createProvider(this.settings);
      const processedMessages = await this.processMessages([
        { role: "system", content: this.getSystemMessage() },
        ...messages
      ]);
      let bufferedChunk = "";
      const flushBuffer = () => {
        if (bufferedChunk) {
          editor.replaceRange(bufferedChunk, currentPosition);
          currentPosition = editor.offsetToPos(
            editor.posToOffset(currentPosition) + bufferedChunk.length
          );
          bufferedChunk = "";
        }
      };
      await provider.getCompletion(
        processedMessages,
        {
          temperature: this.settings.temperature,
          maxTokens: this.settings.maxTokens,
          streamCallback: (chunk) => {
            bufferedChunk += chunk;
            setTimeout(flushBuffer, 100);
          },
          abortController: this.activeStream
        }
      );
      flushBuffer();
      const endLineContent = (_a2 = editor.getLine(currentPosition.line)) != null ? _a2 : "";
      const endPrefix = endLineContent.trim() !== "" ? "\n" : "";
      editor.replaceRange(`${endPrefix}
${this.settings.chatSeparator}

`, currentPosition);
      const newCursorPos = editor.offsetToPos(
        editor.posToOffset(currentPosition) + (endPrefix ? 1 : 0) + 1 + this.settings.chatSeparator.length + 1
      );
      editor.setCursor(newCursorPos);
    } catch (error) {
      this.showNotice(`Error: ${error.message}`);
      const errLineContent = (_b = editor.getLine(currentPosition.line)) != null ? _b : "";
      const errPrefix = errLineContent.trim() !== "" ? "\n" : "";
      editor.replaceRange(`Error: ${error.message}
${errPrefix}
${this.settings.chatSeparator}

`, currentPosition);
    } finally {
      this.activeStream = null;
    }
  }
  async onload() {
    await this.loadSettings();
    this.addSettingTab(new MyPluginSettingTab(this.app, this));
    this.registerPluginView(VIEW_TYPE_MODEL_SETTINGS, (leaf) => new ModelSettingsView(leaf, this));
    this.registerPluginView(VIEW_TYPE_CHAT, (leaf) => new ChatView(leaf, this));
    this.registerCommand({
      id: "show-ai-settings",
      name: "Show AI Settings",
      callback: () => this.activateView(VIEW_TYPE_MODEL_SETTINGS)
    }, "file-sliders", "Open AI Settings");
    this.registerCommand({
      id: "show-ai-chat",
      name: "Show AI Chat",
      callback: () => this.activateView(VIEW_TYPE_CHAT)
    }, "message-square", "Open AI Chat");
    this.app.workspace.onLayoutReady(() => {
      if (this.settings.autoOpenModelSettings) {
        this.activateView(VIEW_TYPE_MODEL_SETTINGS);
      }
    });
    this.registerCommand({
      id: "ai-completion",
      name: "Get AI Completion",
      editorCallback: (editor) => this.handleAICompletion(editor)
    });
    this.registerCommand({
      id: "end-ai-stream",
      name: "End AI Stream",
      callback: () => {
        if (this.activeStream) {
          this.activeStream.abort();
          this.activeStream = null;
          this.showNotice("AI stream ended");
        } else {
          this.showNotice("No active AI stream to end");
        }
      }
    });
    this.registerCommand({
      id: "copy-active-note-name",
      name: "Copy Active Note Name",
      callback: async () => {
        const activeFile = this.app.workspace.getActiveFile();
        if (activeFile) {
          const noteName = `[[${activeFile.basename}]]`;
          await this.copyToClipboard(noteName, `Copied to clipboard: ${noteName}`, "Failed to copy to clipboard");
        } else {
          this.showNotice("No active note found");
        }
      }
    });
    this.registerCommand({
      id: "insert-chat-start-string",
      name: "Insert Chat Start String",
      editorCallback: (editor) => {
        var _a2;
        const chatStartString = (_a2 = this.settings.chatStartString) != null ? _a2 : "";
        if (!chatStartString) {
          this.showNotice("chatStartString is not set in settings.");
          return;
        }
        const cursor = editor.getCursor();
        editor.replaceRange(chatStartString, cursor);
        this.moveCursorAfterInsert(editor, cursor, chatStartString);
      }
    });
    this.registerCommand({
      id: "generate-note-title",
      name: "Generate Note Title",
      callback: async () => {
        const { generateNoteTitle: generateNoteTitle2 } = await Promise.resolve().then(() => (init_filechanger(), filechanger_exports));
        await generateNoteTitle2(
          this.app,
          this.settings,
          (messages) => this.processMessages(messages)
        );
      }
    });
    this.registerCommand({
      id: "load-chat-note-into-chat",
      name: "Load Chat Note into Chat",
      callback: async () => {
        let file = this.app.workspace.getActiveFile();
        if (!file) {
          this.showNotice("No active note found. Please open a note to load as chat.");
          return;
        }
        let content = await this.app.vault.read(file);
        const messages = parseSelection(content, this.settings.chatSeparator);
        if (!messages.length) {
          this.showNotice("No chat messages found in the selected note.");
          return;
        }
        await this.activateChatViewAndLoadMessages(messages);
      }
    });
    this.registerYamlAttributeCommands();
  }
  /**
   * Register YAML attribute generator commands dynamically based on settings.
   * Unregisters previous commands before registering new ones.
   */
  registerYamlAttributeCommands() {
    if (this._yamlAttributeCommandIds && this._yamlAttributeCommandIds.length > 0) {
      for (const id of this._yamlAttributeCommandIds) {
        this.app.commands.removeCommand(id);
      }
    }
    this._yamlAttributeCommandIds = [];
    if (this.settings.yamlAttributeGenerators && Array.isArray(this.settings.yamlAttributeGenerators)) {
      for (const gen of this.settings.yamlAttributeGenerators) {
        if (!gen.attributeName || !gen.prompt || !gen.commandName) continue;
        const id = `generate-yaml-attribute-${gen.attributeName}`;
        this.registerCommand({
          // Use the new registerCommand
          id,
          name: gen.commandName,
          callback: async () => {
            const { generateYamlAttribute: generateYamlAttribute2 } = await Promise.resolve().then(() => (init_filechanger(), filechanger_exports));
            await generateYamlAttribute2(
              this.app,
              this.settings,
              (messages) => this.processMessages(messages),
              gen.attributeName,
              gen.prompt,
              gen.outputMode
            );
          }
        });
        this._yamlAttributeCommandIds.push(id);
      }
    }
  }
  /**
   * Retrieves the system message based on current plugin settings.
   * @returns The system message string.
   */
  getSystemMessage() {
    return getSystemMessage(this.settings);
  }
  /**
   * Activates and reveals a specific view type in the workspace.
   * @param viewType The type of view to activate.
   * @param reveal Whether to reveal the leaf after setting its view state. Defaults to true.
   */
  async activateView(viewType, reveal = true) {
    this.app.workspace.detachLeavesOfType(viewType);
    let leaf = this.app.workspace.getRightLeaf(false) || this.app.workspace.getLeaf(true);
    await leaf.setViewState({
      type: viewType,
      active: true
    });
    if (reveal) {
      this.app.workspace.revealLeaf(leaf);
    }
  }
  /**
   * Loads plugin settings from data.
   */
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
  }
  /**
   * Saves plugin settings to data.
   * Also re-registers YAML attribute commands and emits a settings change event.
   */
  async saveSettings() {
    await this.saveData(this.settings);
    this.registerYamlAttributeCommands();
    this.emitSettingsChange();
  }
  /**
   * Processes an array of messages, potentially adding context notes.
   * @param messages The messages to process.
   * @returns A promise that resolves to the processed messages.
   */
  async processMessages(messages) {
    return processMessages(messages, this.app, this.settings);
  }
  /**
   * Retrieves content from context notes.
   * @param contextNotesText The text containing context note links.
   * @returns A promise that resolves to the combined content of context notes.
   */
  async getContextNotesContent(contextNotesText) {
    return getContextNotesContent(contextNotesText, this.app);
  }
  /**
   * Called when the plugin is unloaded.
   * Unregisters views to prevent issues on reload.
   */
  onunload() {
    _MyPlugin.registeredViewTypes.delete(VIEW_TYPE_MODEL_SETTINGS);
    _MyPlugin.registeredViewTypes.delete(VIEW_TYPE_CHAT);
  }
};
__publicField(_MyPlugin, "registeredViewTypes", /* @__PURE__ */ new Set());
var MyPlugin = _MyPlugin;
/*! Bundled license information:

js-yaml/dist/js-yaml.mjs:
  (*! js-yaml 4.1.0 https://github.com/nodeca/js-yaml @license MIT *)
*/
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3Byb21wdENvbnN0YW50cy50cyIsICJzcmMvdHlwZXMudHMiLCAicHJvdmlkZXJzL2Jhc2UudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy92ZXJzaW9uLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvX3NoaW1zL3JlZ2lzdHJ5LnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvX3NoaW1zL011bHRpcGFydEJvZHkudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9fc2hpbXMvd2ViLXJ1bnRpbWUudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL19zaGltcy9hdXRvL3J1bnRpbWUubWpzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9fc2hpbXMvaW5kZXgubWpzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvZXJyb3IudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9pbnRlcm5hbC9kZWNvZGVycy9saW5lLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvaW50ZXJuYWwvc3RyZWFtLXV0aWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvc3RyZWFtaW5nLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvdXBsb2Fkcy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2NvcmUudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9wYWdpbmF0aW9uLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL3NoYXJlZC50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL2JldGEvbW9kZWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvaW50ZXJuYWwvZGVjb2RlcnMvanNvbmwudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9yZXNvdXJjZXMvYmV0YS9tZXNzYWdlcy9iYXRjaGVzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvX3ZlbmRvci9wYXJ0aWFsLWpzb24tcGFyc2VyL3BhcnNlci50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL2xpYi9CZXRhTWVzc2FnZVN0cmVhbS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9iZXRhL21lc3NhZ2VzL21lc3NhZ2VzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL2JldGEvYmV0YS50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9jb21wbGV0aW9ucy50cyIsICJub2RlX21vZHVsZXMvQGFudGhyb3BpYy1haS9zZGsvc3JjL3Jlc291cmNlcy9tZXNzYWdlcy9iYXRjaGVzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvbGliL01lc3NhZ2VTdHJlYW0udHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9yZXNvdXJjZXMvbWVzc2FnZXMvbWVzc2FnZXMudHMiLCAibm9kZV9tb2R1bGVzL0BhbnRocm9waWMtYWkvc2RrL3NyYy9yZXNvdXJjZXMvbW9kZWxzLnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvcmVzb3VyY2VzL2luZGV4LnRzIiwgIm5vZGVfbW9kdWxlcy9AYW50aHJvcGljLWFpL3Nkay9zcmMvaW5kZXgudHMiLCAicHJvdmlkZXJzL2FudGhyb3BpYy50cyIsICJwcm92aWRlcnMvb3BlbmFpLnRzIiwgInByb3ZpZGVycy9nZW1pbmkudHMiLCAicHJvdmlkZXJzL29sbGFtYS50cyIsICJwcm92aWRlcnMvaW5kZXgudHMiLCAic3JjL2NvbXBvbmVudHMvY2hhdC9TZXR0aW5nc1NlY3Rpb25zLnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvQnV0dG9ucy50cyIsICJub2RlX21vZHVsZXMvanMteWFtbC9kaXN0L2pzLXlhbWwubWpzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvY2hhdFBlcnNpc3RlbmNlLnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvQ2hhdEhlbHBNb2RhbC50cyIsICJzcmMvY29tcG9uZW50cy9jaGF0L1NldHRpbmdzTW9kYWwudHMiLCAic3JjL2NvbXBvbmVudHMvY2hhdC9ldmVudEhhbmRsZXJzLnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvaW5wdXRIYW5kbGVyLnRzIiwgInNyYy9maWxlY2hhbmdlci50cyIsICJzcmMvbWFpbi50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL2NvbXBvbmVudHMvY2hhdC9Db2xsYXBzaWJsZVNlY3Rpb24udHMiLCAic3JjL2NvbXBvbmVudHMvY2hhdC50cyIsICJzcmMvY29tcG9uZW50cy9jaGF0L0NoYXRIaXN0b3J5TWFuYWdlci50cyIsICJzcmMvY29tcG9uZW50cy9jaGF0L01lc3NhZ2UudHMiLCAic3JjL2NvbXBvbmVudHMvY2hhdC9Db25maXJtYXRpb25Nb2RhbC50cyIsICJzcmMvY29tcG9uZW50cy9jaGF0L3VpLnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvY2hhdEhpc3RvcnlVdGlscy50cyIsICJzcmMvY29tcG9uZW50cy9jaGF0L0FnZW50UmVzcG9uc2VIYW5kbGVyLnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvQ29tbWFuZFBhcnNlci50cyIsICJzcmMvY29tcG9uZW50cy9jaGF0L1Rvb2xSZWdpc3RyeS50cyIsICJzcmMvY29tcG9uZW50cy9jaGF0L3Rvb2xzL0ZpbGVTZWxlY3RUb29sLnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvdG9vbHMvRmlsZVJlYWRUb29sLnRzIiwgInNyYy9jb21wb25lbnRzL0ZpbGVDaG9vc2VyTW9kYWwudHMiLCAic3JjL2NvbXBvbmVudHMvY2hhdC90b29scy9GaWxlV3JpdGVUb29sLnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvdG9vbHMvRmlsZURpZmZUb29sLnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvZmlsZWRpZmZoYW5kbGVyLnRzIiwgInNyYy9jb21wb25lbnRzL2NoYXQvdG9vbHMvVGhvdWdodFRvb2wudHMiLCAic3JjL2NvbXBvbmVudHMvcGFyc2VTZWxlY3Rpb24udHMiLCAic3JjL2NvbXBvbmVudHMvTW9kZWxTZXR0aW5nc1ZpZXcudHMiLCAic3JjL2NvbXBvbmVudHMvbm90ZVV0aWxzLnRzIiwgInNyYy9jb21wb25lbnRzL3N5c3RlbU1lc3NhZ2UudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbImV4cG9ydCBjb25zdCBERUZBVUxUX1RJVExFX1BST01QVCA9IFwiWW91IGFyZSBhIHRpdGxlIGdlbmVyYXRvci4gWW91IHdpbGwgZ2l2ZSBzdWNjaW5jdCB0aXRsZXMgdGhhdCBkbyBub3QgY29udGFpbiBiYWNrc2xhc2hlcywgZm9yd2FyZCBzbGFzaGVzLCBvciBjb2xvbnMuIE9ubHkgZ2VuZXJhdGUgYSB0aXRsZSBhcyB5b3VyIHJlc3BvbnNlLlwiO1xyXG5cclxuLy8gVGhlIFlBTUwgc3lzdGVtIG1lc3NhZ2Ugbm93IGNvdmVycyBjb25jaXNlbmVzcywgZm9yYmlkZGVuIGNoYXJhY3RlcnMsIGFuZCBvdXRwdXQgZm9ybWF0LlxyXG4vLyBUaGlzIHN1bW1hcnkgcHJvbXB0IGlzIG5vdyBmb2N1c2VkIG9uIHN1bW1hcml6YXRpb24gaW50ZW50IG9ubHkuXHJcbmV4cG9ydCBjb25zdCBERUZBVUxUX1NVTU1BUllfUFJPTVBUID0gXCJTdW1tYXJpemUgdGhlIG5vdGUgY29udGVudCBpbiAxLTIgc2VudGVuY2VzLCBmb2N1c2luZyBvbiB0aGUgbWFpbiBpZGVhcyBhbmQgcHVycG9zZS5cIjtcclxuXHJcbi8vIEdlbmVyYWwgc3lzdGVtIHByb21wdCBmb3IgdGhlIGFzc2lzdGFudFxyXG5cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfR0VORVJBTF9TWVNURU1fUFJPTVBUID0gXCJZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuXCI7XHJcblxyXG5leHBvcnQgY29uc3QgQUdFTlRfU1lTVEVNX1BST01QVCA9IGBcclxuWW91IGFyZSBhbiBBSSBhc3Npc3RhbnQgd2l0aCBhY2Nlc3MgdG8gdG9vbHMuIFVzZSB0b29scyBpbW1lZGlhdGVseSB3aXRob3V0IGFza2luZyBwZXJtaXNzaW9uLlxyXG5cclxuV2hlbiB5b3UgbmVlZCB0byB1c2UgYSB0b29sLCByZXNwb25kIE9OTFkgd2l0aCBhIEpTT04gY29tbWFuZCBpbiB0aGlzIGZvcm1hdDpcclxuXHJcbntcclxuICBcImFjdGlvblwiOiBcInRvb2xfbmFtZVwiLFxyXG4gIFwicGFyYW1ldGVyc1wiOiB7IC8qIHRvb2wtc3BlY2lmaWMgcGFyYW1ldGVycyAqLyB9LFxyXG4gIFwicmVxdWVzdElkXCI6IFwidW5pcXVlX2lkXCJcclxufVxyXG5cclxuQXZhaWxhYmxlIHRvb2xzOlxyXG4xLiBmaWxlX3dyaXRlIC0gV3JpdGUvbW9kaWZ5IGZpbGUgY29udGVudHMgKHVzZSBcImZpbGVuYW1lXCIgcGFyYW1ldGVyIGZvciB0aGUgZmlsZSBwYXRoKS4gVXN1YWxseSBtZCBmaWxlcyB1bmxlc3Mgb3RoZXJ3aXNlIHNwZWNpZmllZC5cclxuMi4gZmlsZV9yZWFkIC0gUmVhZCBmaWxlIGNvbnRlbnRzICh1c2UgXCJmaWxlUGF0aFwiIHBhcmFtZXRlcikgIFxyXG4zLiBmaWxlX3NlbGVjdCAtIFNlYXJjaCBmb3IgZmlsZXMgcHJvZ3JhbW1hdGljYWxseSAodXNlIFwicXVlcnlcIiBwYXJhbWV0ZXIgdG8gc2VhcmNoIGJ5IGZpbGVuYW1lL2NvbnRlbnQpXHJcbjQuIGZpbGVfZGlmZiAtIENvbXBhcmUgYW5kIHN1Z2dlc3QgY2hhbmdlcyB0byBmaWxlc1xyXG5cclxuQ29udGV4dCBhd2FyZW5lc3M6XHJcbi0gUmVtZW1iZXIgZmlsZXMgbWVudGlvbmVkL2NyZWF0ZWQgaW4gdGhpcyBjb252ZXJzYXRpb25cclxuLSBXaGVuIHVzZXIgcmVmZXJzIHRvIFwidGhlIGZpbGVcIiwgXCJ0aGF0IG5vdGVcIiwgb3Igc2ltaWxhciwgdXNlIGZpbGVfc2VsZWN0IHRvIGZpbmQgaXRcclxuLSBVc2UgZGVzY3JpcHRpdmUga2V5d29yZHMgZnJvbSB0aGUgY29udmVyc2F0aW9uIGZvciBzZWFyY2hlc1xyXG5cclxuRXhhbXBsZXM6XHJcbi0gXCJjcmVhdGUgYSBub3RlIGFib3V0IFhcIiBcdTIxOTIgZmlsZV93cml0ZSBpbW1lZGlhdGVseVxyXG4tIFwiZGVsZXRlIHRoZSBub3RlIGFib3V0IFhcIiBcdTIxOTIgZmlsZV9zZWxlY3Qgd2l0aCBxdWVyeT1cIlhcIiB0byBmaW5kIHRoZSBmaWxlIGZpcnN0XHJcbi0gXCJyZWFkIHRoYXQgZmlsZVwiIFx1MjE5MiBmaWxlX3NlbGVjdCB0byBmaW5kIHRoZSByZWZlcmVuY2VkIGZpbGUsIHRoZW4gZmlsZV9yZWFkXHJcbmA7XHJcblxyXG4vLyBEZWZhdWx0IHN5c3RlbSBtZXNzYWdlIGZvciBZQU1MIGF0dHJpYnV0ZSBnZW5lcmF0aW9uICh1c2VkIGluIGZpbGVjaGFuZ2VyLnRzKVxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9ZQU1MX1NZU1RFTV9NRVNTQUdFID1cclxuICAgIFwiWW91IGFyZSBhbiBhc3Npc3RhbnQgdGhhdCBnZW5lcmF0ZXMgWUFNTCBhdHRyaWJ1dGUgdmFsdWVzIGZvciBPYnNpZGlhbiBub3Rlcy4gXCIgK1xyXG4gICAgXCJSZWFkIHRoZSBub3RlIGFuZCBnZW5lcmF0ZSBhIHZhbHVlIGZvciB0aGUgc3BlY2lmaWVkIFlBTUwgZmllbGQuIFwiICtcclxuICAgIFwiT25seSBvdXRwdXQgdGhlIHZhbHVlLCBub3QgdGhlIGtleSBvciBleHRyYSB0ZXh0LlwiO1xyXG4iLCAiaW1wb3J0IHsgREVGQVVMVF9USVRMRV9QUk9NUFQsIERFRkFVTFRfU1VNTUFSWV9QUk9NUFQsIERFRkFVTFRfWUFNTF9TWVNURU1fTUVTU0FHRSwgREVGQVVMVF9HRU5FUkFMX1NZU1RFTV9QUk9NUFQgfSBmcm9tIFwiLi9wcm9tcHRDb25zdGFudHNcIjtcclxuXHJcbi8qKlxyXG4gKiBBSSBBc3Npc3RhbnQgUGx1Z2luIFR5cGVzXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIGNvcmUgdHlwZXMgYW5kIGludGVyZmFjZXMgdXNlZCB0aHJvdWdob3V0IHRoZSBwbHVnaW4uXHJcbiAqIFRoZXNlIGRlZmluaXRpb25zIGVuc3VyZSBjb25zaXN0ZW5jeSBhY3Jvc3MgZGlmZmVyZW50IEFJIHByb3ZpZGVycyBhbmRcclxuICogbWFrZSB0aGUgY29kZSBtb3JlIG1haW50YWluYWJsZSBhbmQgdHlwZS1zYWZlLlxyXG4gKi9cclxuXHJcbi8qKlxyXG4gKiBSZXByZXNlbnRzIGEgY2hhdCBtZXNzYWdlIGluIGEgY29udmVyc2F0aW9uXHJcbiAqIFxyXG4gKiBAcHJvcGVydHkgcm9sZSAtIFdobyBzZW50IHRoZSBtZXNzYWdlICgnc3lzdGVtJywgJ3VzZXInLCBvciAnYXNzaXN0YW50JylcclxuICogQHByb3BlcnR5IGNvbnRlbnQgLSBUaGUgYWN0dWFsIHRleHQgY29udGVudCBvZiB0aGUgbWVzc2FnZVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlIHtcclxuICAgIHJvbGU6ICdzeXN0ZW0nIHwgJ3VzZXInIHwgJ2Fzc2lzdGFudCc7XHJcbiAgICBjb250ZW50OiBzdHJpbmc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPcHRpb25zIGZvciBnZW5lcmF0aW5nIEFJIGNvbXBsZXRpb25zXHJcbiAqIFxyXG4gKiBUaGVzZSBzZXR0aW5ncyBjb250cm9sIGhvdyB0aGUgQUkgZ2VuZXJhdGVzIGl0cyByZXNwb25zZS5cclxuICogTm90IGFsbCBvcHRpb25zIGFyZSBzdXBwb3J0ZWQgYnkgYWxsIHByb3ZpZGVycy5cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbk9wdGlvbnMge1xyXG4gICAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XHJcbiAgICBtYXhUb2tlbnM/OiBudW1iZXI7XHJcbiAgICBzdHJlYW1DYWxsYmFjaz86IChjaHVuazogc3RyaW5nKSA9PiB2b2lkO1xyXG4gICAgYWJvcnRDb250cm9sbGVyPzogQWJvcnRDb250cm9sbGVyO1xyXG59XHJcblxyXG4vKipcclxuICogUmVzdWx0IG9mIHRlc3RpbmcgYW4gQUkgcHJvdmlkZXIgY29ubmVjdGlvblxyXG4gKiBcclxuICogQHByb3BlcnR5IHN1Y2Nlc3MgLSBXaGV0aGVyIHRoZSBjb25uZWN0aW9uIHRlc3QgcGFzc2VkXHJcbiAqIEBwcm9wZXJ0eSBtZXNzYWdlIC0gSHVtYW4tcmVhZGFibGUgcmVzdWx0IG1lc3NhZ2VcclxuICogQHByb3BlcnR5IG1vZGVscyAtIExpc3Qgb2YgYXZhaWxhYmxlIG1vZGVscyAoaWYgdGVzdCBzdWNjZXNzZnVsKVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBDb25uZWN0aW9uVGVzdFJlc3VsdCB7XHJcbiAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgbWVzc2FnZTogc3RyaW5nO1xyXG4gICAgbW9kZWxzPzogc3RyaW5nW107XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb21tb24gaW50ZXJmYWNlIGZvciBhbGwgQUkgcHJvdmlkZXJzXHJcbiAqIFxyXG4gKiBUaGlzIGludGVyZmFjZSBlbnN1cmVzIHRoYXQgYWxsIEFJIHByb3ZpZGVycyAoT3BlbkFJLCBBbnRocm9waWMsIGV0Yy4pXHJcbiAqIGltcGxlbWVudCB0aGUgc2FtZSBiYXNpYyBmdW5jdGlvbmFsaXR5LCBtYWtpbmcgaXQgZWFzeSB0byBzd2l0Y2ggYmV0d2VlbiB0aGVtLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBBSVByb3ZpZGVyIHtcclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgY29tcGxldGlvbiBmcm9tIHRoZSBBSSBtb2RlbFxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgLSBUaGUgY29udmVyc2F0aW9uIGhpc3RvcnlcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gU2V0dGluZ3MgZm9yIHRoaXMgY29tcGxldGlvblxyXG4gICAgICogQHJldHVybnMgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHdoZW4gdGhlIGNvbXBsZXRpb24gaXMgZmluaXNoZWRcclxuICAgICAqL1xyXG4gICAgZ2V0Q29tcGxldGlvbihtZXNzYWdlczogTWVzc2FnZVtdLCBvcHRpb25zOiBDb21wbGV0aW9uT3B0aW9ucyk6IFByb21pc2U8dm9pZD47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGxpc3Qgb2YgYXZhaWxhYmxlIG1vZGVscyBmcm9tIHRoaXMgcHJvdmlkZXJcclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gbGlzdCBvZiBtb2RlbCBuYW1lc1xyXG4gICAgICovXHJcbiAgICBnZXRBdmFpbGFibGVNb2RlbHMoKTogUHJvbWlzZTxzdHJpbmdbXT47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXN0IHRoZSBjb25uZWN0aW9uIHRvIHRoaXMgcHJvdmlkZXJcclxuICAgICAqIFxyXG4gICAgICogVmVyaWZpZXMgQVBJIGtleXMsIHNlcnZlciBjb25uZWN0aW9ucywgYW5kIHBlcm1pc3Npb25zLlxyXG4gICAgICogQWxzbyBmZXRjaGVzIHRoZSBsaXN0IG9mIGF2YWlsYWJsZSBtb2RlbHMgaWYgc3VjY2Vzc2Z1bC5cclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMgUHJvbWlzZSByZXNvbHZpbmcgdG8gdGVzdCByZXN1bHRzXHJcbiAgICAgKi9cclxuICAgIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Q29ubmVjdGlvblRlc3RSZXN1bHQ+O1xyXG59XHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyBhIHVuaWZpZWQgbW9kZWwgZnJvbSBhbnkgcHJvdmlkZXJcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgVW5pZmllZE1vZGVsIHtcclxuICAgIGlkOiBzdHJpbmc7ICAgICAgICAgICAvLyBVbmlxdWUgaWRlbnRpZmllciAoZS5nLiwgXCJvcGVuYWk6Z3B0LTRcIiwgXCJhbnRocm9waWM6Y2xhdWRlLTMtNS1zb25uZXQtbGF0ZXN0XCIpXHJcbiAgICBuYW1lOiBzdHJpbmc7ICAgICAgICAgLy8gRGlzcGxheSBuYW1lIChlLmcuLCBcIkdQVC00IChPcGVuQUkpXCIsIFwiQ2xhdWRlIDMuNSBTb25uZXQgKEFudGhyb3BpYylcIilcclxuICAgIHByb3ZpZGVyOiAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHwgJ2dlbWluaScgfCAnb2xsYW1hJztcclxuICAgIG1vZGVsSWQ6IHN0cmluZzsgICAgICAvLyBUaGUgYWN0dWFsIG1vZGVsIElEIGZvciB0aGUgcHJvdmlkZXIgKGUuZy4sIFwiZ3B0LTRcIiwgXCJjbGF1ZGUtMy01LXNvbm5ldC1sYXRlc3RcIilcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBZQU1MIGF0dHJpYnV0ZSBnZW5lcmF0b3IgZm9yIHRoZSBzZXR0aW5ncyBVSVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBZYW1sQXR0cmlidXRlR2VuZXJhdG9yIHtcclxuICAgIGF0dHJpYnV0ZU5hbWU6IHN0cmluZzsgLy8gVGhlIFlBTUwgZmllbGQgdG8gaW5zZXJ0L3VwZGF0ZVxyXG4gICAgcHJvbXB0OiBzdHJpbmc7ICAgICAgICAvLyBUaGUgTExNIHByb21wdCB0byB1c2UgZm9yIGdlbmVyYXRpbmcgdGhlIHZhbHVlXHJcbiAgICBvdXRwdXRNb2RlOiBcImNsaXBib2FyZFwiIHwgXCJtZXRhZGF0YVwiOyAvLyBPdXRwdXQgbW9kZVxyXG4gICAgY29tbWFuZE5hbWU6IHN0cmluZzsgICAvLyBUaGUgbmFtZS9sYWJlbCBmb3IgdGhlIGNvbW1hbmRcclxufVxyXG5cclxuLyoqXHJcbiAqIFJlcHJlc2VudHMgYSBwcmVzZXQgZm9yIG1vZGVsIHNldHRpbmdzXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsU2V0dGluZ1ByZXNldCB7XHJcbiAgICBuYW1lOiBzdHJpbmc7IC8vIERpc3BsYXkgbmFtZSBmb3IgdGhlIHByZXNldFxyXG4gICAgc2VsZWN0ZWRNb2RlbD86IHN0cmluZztcclxuICAgIHN5c3RlbU1lc3NhZ2U/OiBzdHJpbmc7XHJcbiAgICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcclxuICAgIG1heFRva2Vucz86IG51bWJlcjtcclxuICAgIGVuYWJsZVN0cmVhbWluZz86IGJvb2xlYW47XHJcbiAgICAvLyBBZGQgbW9yZSBmaWVsZHMgYXMgbmVlZGVkXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQbHVnaW4gU2V0dGluZ3NcclxuICogXHJcbiAqIFRoZXNlIHNldHRpbmdzIGNvbnRyb2wgaG93IHRoZSBBSSBBc3Npc3RhbnQgcGx1Z2luIHdvcmtzLlxyXG4gKiBUaGV5IGFyZSBzYXZlZCBiZXR3ZWVuIHNlc3Npb25zIGFuZCBjYW4gYmUgY29uZmlndXJlZCBpbiB0aGUgc2V0dGluZ3MgdGFiLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBNeVBsdWdpblNldHRpbmdzIHtcclxuICAgIC8qKiBXaGljaCBBSSBwcm92aWRlciB0byB1c2UgKi9cclxuICAgIHByb3ZpZGVyOiAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHwgJ2dlbWluaScgfCAnb2xsYW1hJztcclxuICAgIHJlZmVyZW5jZUN1cnJlbnROb3RlOiBib29sZWFuO1xyXG5cclxuICAgIC8qKiBTZWxlY3RlZCB1bmlmaWVkIG1vZGVsIChuZXcgdW5pZmllZCBhcHByb2FjaCkgKi9cclxuICAgIHNlbGVjdGVkTW9kZWw/OiBzdHJpbmc7IC8vIEZvcm1hdDogXCJwcm92aWRlcjptb2RlbElkXCIgKGUuZy4sIFwib3BlbmFpOmdwdC00XCIpXHJcbiAgICBcclxuICAgIC8qKiBBdmFpbGFibGUgdW5pZmllZCBtb2RlbHMgZnJvbSBhbGwgcHJvdmlkZXJzICovXHJcbiAgICBhdmFpbGFibGVNb2RlbHM/OiBVbmlmaWVkTW9kZWxbXTsgICAgLyoqIE9wZW5BSS1zcGVjaWZpYyBzZXR0aW5ncyAqL1xyXG4gICAgb3BlbmFpU2V0dGluZ3M6IHtcclxuICAgICAgICBhcGlLZXk6IHN0cmluZztcclxuICAgICAgICBiYXNlVXJsPzogc3RyaW5nO1xyXG4gICAgICAgIG1vZGVsOiBzdHJpbmc7XHJcbiAgICAgICAgYXZhaWxhYmxlTW9kZWxzOiBzdHJpbmdbXTtcclxuICAgICAgICBsYXN0VGVzdFJlc3VsdD86IHtcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBudW1iZXI7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiogQW50aHJvcGljLXNwZWNpZmljIHNldHRpbmdzICovXHJcbiAgICBhbnRocm9waWNTZXR0aW5nczoge1xyXG4gICAgICAgIGFwaUtleTogc3RyaW5nO1xyXG4gICAgICAgIG1vZGVsOiBzdHJpbmc7XHJcbiAgICAgICAgYXZhaWxhYmxlTW9kZWxzOiBzdHJpbmdbXTtcclxuICAgICAgICBsYXN0VGVzdFJlc3VsdD86IHtcclxuICAgICAgICAgICAgdGltZXN0YW1wOiBudW1iZXI7XHJcbiAgICAgICAgICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHN0cmluZztcclxuICAgICAgICB9O1xyXG4gICAgfTtcclxuXHJcbiAgICAvKiogR29vZ2xlIEdlbWluaS1zcGVjaWZpYyBzZXR0aW5ncyAqL1xyXG4gICAgZ2VtaW5pU2V0dGluZ3M6IHtcclxuICAgICAgICBhcGlLZXk6IHN0cmluZztcclxuICAgICAgICBtb2RlbDogc3RyaW5nO1xyXG4gICAgICAgIGF2YWlsYWJsZU1vZGVsczogc3RyaW5nW107XHJcbiAgICAgICAgbGFzdFRlc3RSZXN1bHQ/OiB7XHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbnVtYmVyO1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqIE9sbGFtYS1zcGVjaWZpYyBzZXR0aW5ncyAqL1xyXG4gICAgb2xsYW1hU2V0dGluZ3M6IHtcclxuICAgICAgICBzZXJ2ZXJVcmw6IHN0cmluZztcclxuICAgICAgICBtb2RlbDogc3RyaW5nO1xyXG4gICAgICAgIGF2YWlsYWJsZU1vZGVsczogc3RyaW5nW107XHJcbiAgICAgICAgbGFzdFRlc3RSZXN1bHQ/OiB7XHJcbiAgICAgICAgICAgIHRpbWVzdGFtcDogbnVtYmVyO1xyXG4gICAgICAgICAgICBzdWNjZXNzOiBib29sZWFuO1xyXG4gICAgICAgICAgICBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICAgICAgfTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqIFNldHRpbmdzIHRoYXQgYXBwbHkgdG8gYWxsIHByb3ZpZGVycyAqL1xyXG4gICAgc3lzdGVtTWVzc2FnZTogc3RyaW5nO1xyXG4gICAgdGVtcGVyYXR1cmU6IG51bWJlcjtcclxuICAgIG1heFRva2VuczogbnVtYmVyO1xyXG4gICAgaW5jbHVkZURhdGVXaXRoU3lzdGVtTWVzc2FnZTogYm9vbGVhbjtcclxuICAgIGluY2x1ZGVUaW1lV2l0aFN5c3RlbU1lc3NhZ2U6IGJvb2xlYW47XHJcbiAgICBlbmFibGVTdHJlYW1pbmc6IGJvb2xlYW47XHJcbiAgICBhdXRvT3Blbk1vZGVsU2V0dGluZ3M6IGJvb2xlYW47XHJcbiAgICBlbmFibGVPYnNpZGlhbkxpbmtzOiBib29sZWFuO1xyXG4gICAgLyoqIE91dHB1dCBtb2RlIGZvciBnZW5lcmF0ZWQgbm90ZSB0aXRsZTogY2xpcGJvYXJkLCByZXBsYWNlLWZpbGVuYW1lLCBvciBtZXRhZGF0YSAqL1xyXG4gICAgdGl0bGVPdXRwdXRNb2RlPzogXCJjbGlwYm9hcmRcIiB8IFwicmVwbGFjZS1maWxlbmFtZVwiIHwgXCJtZXRhZGF0YVwiO1xyXG4gICAgLyoqIE91dHB1dCBtb2RlIGZvciBnZW5lcmF0ZWQgbm90ZSBzdW1tYXJ5OiBjbGlwYm9hcmQgb3IgbWV0YWRhdGEgKi9cclxuICAgIHN1bW1hcnlPdXRwdXRNb2RlPzogXCJjbGlwYm9hcmRcIiB8IFwibWV0YWRhdGFcIjtcclxuICAgIC8qKiBUaGUgc3RyaW5nIHRoYXQgc2VwYXJhdGVzIGNoYXQgbWVzc2FnZXMgKi9cclxuICAgIGNoYXRTZXBhcmF0b3I6IHN0cmluZztcclxuICAgIC8qKiBUaGUgc3RyaW5nIHRoYXQgc3RhcnRzIGNoYXQgbWVzc2FnZXMgaW4gYSBub3RlLCBpZiBwcmVzZW50ICovXHJcbiAgICBjaGF0U3RhcnRTdHJpbmc/OiBzdHJpbmc7XHJcbiAgICAvKiogVGhlIHN0cmluZyB0aGF0IGVuZHMgY2hhdCBtZXNzYWdlcyBpbiBhIG5vdGUsIGlmIHByZXNlbnQgKi9cclxuICAgIGNoYXRFbmRTdHJpbmc/OiBzdHJpbmc7XHJcbiAgICBlbmFibGVDb250ZXh0Tm90ZXM6IGJvb2xlYW47XHJcbiAgICBjb250ZXh0Tm90ZXM6IHN0cmluZztcclxuXHJcbiAgICAvKiogUHJvbXB0cyBmb3IgdGl0bGUgYW5kIHN1bW1hcnkgZ2VuZXJhdGlvbiAqL1xyXG4gICAgdGl0bGVQcm9tcHQ6IHN0cmluZztcclxuICAgIHN1bW1hcnlQcm9tcHQ6IHN0cmluZztcclxuXHJcbiAgICAvKiogQ2hhdCBoaXN0b3J5IHNldHRpbmdzICovXHJcbiAgICBtYXhTZXNzaW9uczogbnVtYmVyO1xyXG4gICAgYXV0b1NhdmVTZXNzaW9uczogYm9vbGVhbjtcclxuICAgIHNlc3Npb25zOiBDaGF0U2Vzc2lvbltdO1xyXG4gICAgYWN0aXZlU2Vzc2lvbklkPzogc3RyaW5nO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogSWYgdHJ1ZSwgcmVjdXJzaXZlbHkgZXhwYW5kIGxpbmtzIHdpdGhpbiBmZXRjaGVkIG5vdGVzICh3aXRoIGxvb3AgcHJvdGVjdGlvbilcclxuICAgICAqL1xyXG4gICAgZXhwYW5kTGlua2VkTm90ZXNSZWN1cnNpdmVseT86IGJvb2xlYW47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBNYXhpbXVtIGRlcHRoIGZvciByZWN1cnNpdmVseSBleHBhbmRpbmcgbGlua2VkIG5vdGVzLiAwID0gbm8gcmVjdXJzaW9uLCAxID0gZGlyZWN0IGxpbmtzIG9ubHksIGV0Yy5cclxuICAgICAqL1xyXG4gICAgbWF4TGlua0V4cGFuc2lvbkRlcHRoPzogbnVtYmVyO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm9sZGVyIHBhdGggKHJlbGF0aXZlIHRvIHZhdWx0IHJvb3QpIHdoZXJlIGNoYXQgbm90ZXMgd2lsbCBiZSBzYXZlZC4gSWYgZW1wdHksIHNhdmVzIHRvIHZhdWx0IHJvb3QuXHJcbiAgICAgKi9cclxuICAgIGNoYXROb3RlRm9sZGVyPzogc3RyaW5nO1xyXG5cclxuICAgIC8qKiBZQU1MIGF0dHJpYnV0ZSBnZW5lcmF0b3JzIGZvciB0aGUgc2V0dGluZ3MgVUkgKi9cclxuICAgIHlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JzPzogWWFtbEF0dHJpYnV0ZUdlbmVyYXRvcltdO1xyXG5cclxuICAgIC8qKiBTdG9yZXMgdGhlIGV4cGFuZGVkIHN0YXRlIG9mIHByb3ZpZGVyIGNvbmZpZ3VyYXRpb24gc2VjdGlvbnMgKi9cclxuICAgIHByb3ZpZGVyQ29uZmlnRXhwYW5kZWQ/OiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPjtcclxuXHJcbiAgICAvKiogU3RvcmVzIHRoZSBleHBhbmRlZCBzdGF0ZSBvZiBnZW5lcmFsIGNvbGxhcHNpYmxlIHNlY3Rpb25zIGluIHNldHRpbmdzICovXHJcbiAgICBnZW5lcmFsU2VjdGlvbnNFeHBhbmRlZD86IFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+O1xyXG5cclxuICAgIC8qKiBNb2RlbCBzZXR0aW5nIHByZXNldHMgKi9cclxuICAgIG1vZGVsU2V0dGluZ1ByZXNldHM/OiBNb2RlbFNldHRpbmdQcmVzZXRbXTtcclxuXHJcbiAgICAvKiogQWdlbnQgTW9kZSBzZXR0aW5ncyAqL1xyXG4gICAgYWdlbnRNb2RlPzogQWdlbnRNb2RlU2V0dGluZ3M7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEZWZhdWx0IHNldHRpbmdzIHVzZWQgd2hlbiBpbml0aWFsaXppbmcgdGhlIHBsdWdpblxyXG4gKi9cclxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1M6IE15UGx1Z2luU2V0dGluZ3MgPSB7XHJcbiAgICByZWZlcmVuY2VDdXJyZW50Tm90ZTogZmFsc2UsXHJcbiAgICBwcm92aWRlcjogJ29wZW5haScsXHJcbiAgICBzZWxlY3RlZE1vZGVsOiB1bmRlZmluZWQsXHJcbiAgICBhdmFpbGFibGVNb2RlbHM6IFtdLFxyXG4gICAgb3BlbmFpU2V0dGluZ3M6IHtcclxuICAgICAgICBhcGlLZXk6ICcnLFxyXG4gICAgICAgIG1vZGVsOiAnZ3B0LTQuMScsXHJcbiAgICAgICAgYXZhaWxhYmxlTW9kZWxzOiBbXVxyXG4gICAgfSxcclxuICAgIGFudGhyb3BpY1NldHRpbmdzOiB7XHJcbiAgICAgICAgYXBpS2V5OiAnJyxcclxuICAgICAgICBtb2RlbDogJ2NsYXVkZS0zLTUtc29ubmV0LWxhdGVzdCcsXHJcbiAgICAgICAgYXZhaWxhYmxlTW9kZWxzOiBbXVxyXG4gICAgfSxcclxuICAgIGdlbWluaVNldHRpbmdzOiB7XHJcbiAgICAgICAgYXBpS2V5OiAnJyxcclxuICAgICAgICBtb2RlbDogJ2dlbWluaS0yLjUtZmxhc2gtcHJldmlldy0wNS0yMCcsXHJcbiAgICAgICAgYXZhaWxhYmxlTW9kZWxzOiBbXVxyXG4gICAgfSxcclxuICAgIG9sbGFtYVNldHRpbmdzOiB7XHJcbiAgICAgICAgc2VydmVyVXJsOiAnaHR0cDovL2xvY2FsaG9zdDoxMTQzNCcsXHJcbiAgICAgICAgbW9kZWw6ICdsbGFtYTInLFxyXG4gICAgICAgIGF2YWlsYWJsZU1vZGVsczogW11cclxuICAgIH0sXHJcbiAgICBzeXN0ZW1NZXNzYWdlOiBERUZBVUxUX0dFTkVSQUxfU1lTVEVNX1BST01QVCxcclxuICAgIHRlbXBlcmF0dXJlOiAwLjcsXHJcbiAgICBtYXhUb2tlbnM6IDEwMDAsXHJcbiAgICBpbmNsdWRlRGF0ZVdpdGhTeXN0ZW1NZXNzYWdlOiBmYWxzZSxcclxuICAgIGluY2x1ZGVUaW1lV2l0aFN5c3RlbU1lc3NhZ2U6IGZhbHNlLFxyXG4gICAgZW5hYmxlU3RyZWFtaW5nOiB0cnVlLFxyXG4gICAgYXV0b09wZW5Nb2RlbFNldHRpbmdzOiB0cnVlLFxyXG4gICAgZW5hYmxlT2JzaWRpYW5MaW5rczogdHJ1ZSxcclxuICAgIHRpdGxlT3V0cHV0TW9kZTogXCJjbGlwYm9hcmRcIixcclxuICAgIHN1bW1hcnlPdXRwdXRNb2RlOiBcImNsaXBib2FyZFwiLFxyXG4gICAgY2hhdFNlcGFyYXRvcjogJy0tLS0nLFxyXG4gICAgY2hhdFN0YXJ0U3RyaW5nOiB1bmRlZmluZWQsXHJcbiAgICBjaGF0RW5kU3RyaW5nOiB1bmRlZmluZWQsXHJcbiAgICBlbmFibGVDb250ZXh0Tm90ZXM6IGZhbHNlLFxyXG4gICAgY29udGV4dE5vdGVzOiAnJyxcclxuXHJcbiAgICB0aXRsZVByb21wdDogREVGQVVMVF9USVRMRV9QUk9NUFQsXHJcbiAgICBzdW1tYXJ5UHJvbXB0OiBERUZBVUxUX1NVTU1BUllfUFJPTVBULFxyXG5cclxuICAgIG1heFNlc3Npb25zOiAxMCxcclxuICAgIGF1dG9TYXZlU2Vzc2lvbnM6IHRydWUsXHJcbiAgICBzZXNzaW9uczogW10sXHJcbiAgICBhY3RpdmVTZXNzaW9uSWQ6IHVuZGVmaW5lZCxcclxuXHJcbiAgICBleHBhbmRMaW5rZWROb3Rlc1JlY3Vyc2l2ZWx5OiBmYWxzZSxcclxuICAgIG1heExpbmtFeHBhbnNpb25EZXB0aDogMixcclxuXHJcbiAgICBjaGF0Tm90ZUZvbGRlcjogJycsIC8vIERlZmF1bHQgdG8gdmF1bHQgcm9vdFxyXG5cclxuICAgIHlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JzOiBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBhdHRyaWJ1dGVOYW1lOiBcInN1bW1hcnlcIixcclxuICAgICAgICAgICAgcHJvbXB0OiBERUZBVUxUX1NVTU1BUllfUFJPTVBULFxyXG4gICAgICAgICAgICBvdXRwdXRNb2RlOiBcIm1ldGFkYXRhXCIsXHJcbiAgICAgICAgICAgIGNvbW1hbmROYW1lOiBcIkdlbmVyYXRlIFlBTUw6IHN1bW1hcnlcIlxyXG4gICAgICAgIH1cclxuICAgIF0sXHJcbiAgICBwcm92aWRlckNvbmZpZ0V4cGFuZGVkOiB7XHJcbiAgICAgICAgb3BlbmFpOiBmYWxzZSxcclxuICAgICAgICBhbnRocm9waWM6IGZhbHNlLFxyXG4gICAgICAgIGdlbWluaTogZmFsc2UsXHJcbiAgICAgICAgb2xsYW1hOiBmYWxzZSxcclxuICAgIH0sXHJcbiAgICBnZW5lcmFsU2VjdGlvbnNFeHBhbmRlZDoge1xyXG4gICAgICAgIFwiQUkgTW9kZWwgU2V0dGluZ3NcIjogdHJ1ZSxcclxuICAgICAgICBcIkRhdGUgU2V0dGluZ3NcIjogdHJ1ZSxcclxuICAgICAgICBcIk5vdGUgUmVmZXJlbmNlIFNldHRpbmdzXCI6IHRydWUsXHJcbiAgICAgICAgXCJQcm92aWRlciBDb25maWd1cmF0aW9uXCI6IHRydWUsIC8vIEZvciB0aGUgbWFpbiBncm91cCBvZiBwcm92aWRlciBjb25maWdzXHJcbiAgICAgICAgXCJBSSBNb2RlbCBDb25maWd1cmF0aW9uXCI6IHRydWUgXHJcbiAgICB9LFxyXG4gICAgbW9kZWxTZXR0aW5nUHJlc2V0czogW1xyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgbmFtZTogXCJEZWZhdWx0XCIsXHJcbiAgICAgICAgICAgIHNlbGVjdGVkTW9kZWw6IHVuZGVmaW5lZCxcclxuICAgICAgICAgICAgc3lzdGVtTWVzc2FnZTogREVGQVVMVF9HRU5FUkFMX1NZU1RFTV9QUk9NUFQsXHJcbiAgICAgICAgICAgIHRlbXBlcmF0dXJlOiAwLjcsXHJcbiAgICAgICAgICAgIG1heFRva2VuczogMTAwMCxcclxuICAgICAgICAgICAgZW5hYmxlU3RyZWFtaW5nOiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgXSxcclxuICAgIGFnZW50TW9kZToge1xyXG4gICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgIG1heFRvb2xDYWxsczogNSxcclxuICAgICAgICB0aW1lb3V0TXM6IDMwMDAwXHJcbiAgICB9XHJcbn07XHJcblxyXG4vKipcclxuICogUmVwcmVzZW50cyBhIGNoYXQgc2Vzc2lvblxyXG4gKiBcclxuICogQHByb3BlcnR5IGlkIC0gVW5pcXVlIGlkZW50aWZpZXIgZm9yIHRoZSBzZXNzaW9uXHJcbiAqIEBwcm9wZXJ0eSBuYW1lIC0gSHVtYW4tcmVhZGFibGUgbmFtZSBmb3IgdGhlIHNlc3Npb25cclxuICogQHByb3BlcnR5IGNyZWF0ZWQgLSBUaW1lc3RhbXAgd2hlbiB0aGUgc2Vzc2lvbiB3YXMgY3JlYXRlZFxyXG4gKiBAcHJvcGVydHkgbGFzdFVwZGF0ZWQgLSBUaW1lc3RhbXAgd2hlbiB0aGUgc2Vzc2lvbiB3YXMgbGFzdCB1cGRhdGVkXHJcbiAqIEBwcm9wZXJ0eSBtZXNzYWdlcyAtIExpc3Qgb2YgbWVzc2FnZXMgaW4gdGhlIHNlc3Npb25cclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgQ2hhdFNlc3Npb24ge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIG5hbWU6IHN0cmluZztcclxuICAgIGNyZWF0ZWQ6IG51bWJlcjtcclxuICAgIGxhc3RVcGRhdGVkOiBudW1iZXI7XHJcbiAgICBtZXNzYWdlczogTWVzc2FnZVtdO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEFnZW50TW9kZVNldHRpbmdzIHtcclxuICAgIGVuYWJsZWQ6IGJvb2xlYW47XHJcbiAgICBtYXhUb29sQ2FsbHM6IG51bWJlcjtcclxuICAgIHRpbWVvdXRNczogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xDb21tYW5kIHtcclxuICAgIGFjdGlvbjogc3RyaW5nO1xyXG4gICAgcGFyYW1ldGVyczogUmVjb3JkPHN0cmluZywgYW55PjtcclxuICAgIHJlcXVlc3RJZD86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGludGVyZmFjZSBUb29sUmVzdWx0IHtcclxuICAgIHN1Y2Nlc3M6IGJvb2xlYW47XHJcbiAgICBkYXRhPzogYW55O1xyXG4gICAgZXJyb3I/OiBzdHJpbmc7XHJcbiAgICByZXF1ZXN0SWQ/OiBzdHJpbmc7XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBCYXNlIEFJIFByb3ZpZGVyIEltcGxlbWVudGF0aW9uXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIGJhc2UgY2xhc3MgZm9yIEFJIHByb3ZpZGVycyB3aXRoIHNoYXJlZCBmdW5jdGlvbmFsaXR5XHJcbiAqIGFuZCBjb21tb24gZXJyb3IgaGFuZGxpbmcgcGF0dGVybnMuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQUlQcm92aWRlciwgTWVzc2FnZSwgQ29tcGxldGlvbk9wdGlvbnMsIENvbm5lY3Rpb25UZXN0UmVzdWx0IH0gZnJvbSAnLi4vc3JjL3R5cGVzJztcclxuXHJcbi8qKlxyXG4gKiBDb21tb24gZXJyb3IgdHlwZXMgYWNyb3NzIHByb3ZpZGVyc1xyXG4gKi9cclxuZXhwb3J0IGVudW0gUHJvdmlkZXJFcnJvclR5cGUge1xyXG4gICAgSW52YWxpZEFwaUtleSA9ICdpbnZhbGlkX2FwaV9rZXknLFxyXG4gICAgUmF0ZUxpbWl0ID0gJ3JhdGVfbGltaXQnLFxyXG4gICAgSW52YWxpZFJlcXVlc3QgPSAnaW52YWxpZF9yZXF1ZXN0JyxcclxuICAgIFNlcnZlckVycm9yID0gJ3NlcnZlcl9lcnJvcicsXHJcbiAgICBOZXR3b3JrRXJyb3IgPSAnbmV0d29ya19lcnJvcidcclxufVxyXG5cclxuLyoqXHJcbiAqIEJhc2UgZXJyb3IgY2xhc3MgZm9yIHByb3ZpZGVyLXNwZWNpZmljIGVycm9yc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFByb3ZpZGVyRXJyb3IgZXh0ZW5kcyBFcnJvciB7XHJcbiAgICB0eXBlOiBQcm92aWRlckVycm9yVHlwZTtcclxuICAgIHN0YXR1c0NvZGU/OiBudW1iZXI7XHJcblxyXG4gICAgY29uc3RydWN0b3IodHlwZTogUHJvdmlkZXJFcnJvclR5cGUsIG1lc3NhZ2U6IHN0cmluZywgc3RhdHVzQ29kZT86IG51bWJlcikge1xyXG4gICAgICAgIHN1cGVyKG1lc3NhZ2UpO1xyXG4gICAgICAgIHRoaXMudHlwZSA9IHR5cGU7XHJcbiAgICAgICAgdGhpcy5zdGF0dXNDb2RlID0gc3RhdHVzQ29kZTtcclxuICAgICAgICB0aGlzLm5hbWUgPSAnUHJvdmlkZXJFcnJvcic7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCYXNlIGNsYXNzIGZvciBBSSBwcm92aWRlcnMgaW1wbGVtZW50aW5nIGNvbW1vbiBmdW5jdGlvbmFsaXR5XHJcbiAqL1xyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgQmFzZVByb3ZpZGVyIGltcGxlbWVudHMgQUlQcm92aWRlciB7XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgYXBpS2V5OiBzdHJpbmc7XHJcbiAgICBwcm90ZWN0ZWQgYWJzdHJhY3QgYmFzZVVybDogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIGFic3RyYWN0IG1vZGVsOiBzdHJpbmc7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYSBjb21wbGV0aW9uIGZyb20gdGhlIEFJIG1vZGVsXHJcbiAgICAgKi9cclxuICAgIGFic3RyYWN0IGdldENvbXBsZXRpb24obWVzc2FnZXM6IE1lc3NhZ2VbXSwgb3B0aW9uczogQ29tcGxldGlvbk9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGF2YWlsYWJsZSBtb2RlbHNcclxuICAgICAqL1xyXG4gICAgYWJzdHJhY3QgZ2V0QXZhaWxhYmxlTW9kZWxzKCk6IFByb21pc2U8c3RyaW5nW10+O1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGVzdCBjb25uZWN0aW9uIHRvIHRoZSBwcm92aWRlclxyXG4gICAgICovXHJcbiAgICBhYnN0cmFjdCB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPENvbm5lY3Rpb25UZXN0UmVzdWx0PjtcclxuXHJcbiAgICAvKipcclxuICAgICAqIEhhbmRsZSBjb21tb24gSFRUUCBlcnJvcnNcclxuICAgICAqL1xyXG4gICAgcHJvdGVjdGVkIGhhbmRsZUh0dHBFcnJvcihlcnJvcjogYW55KTogbmV2ZXIge1xyXG4gICAgICAgIC8vIEhhbmRsZSBSZXNwb25zZSBvYmplY3RzIGZyb20gZmV0Y2ggQVBJXHJcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgY29uc3Qgc3RhdHVzID0gZXJyb3Iuc3RhdHVzO1xyXG4gICAgICAgICAgICBzd2l0Y2ggKHN0YXR1cykge1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0MDE6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLkludmFsaWRBcGlLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICdJbnZhbGlkIEFQSSBrZXknLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0Mjk6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLlJhdGVMaW1pdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ1JhdGUgbGltaXQgZXhjZWVkZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgY2FzZSA0MDA6XHJcbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLkludmFsaWRSZXF1ZXN0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAnSW52YWxpZCByZXF1ZXN0JyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIGNhc2UgNTAwOlxyXG4gICAgICAgICAgICAgICAgY2FzZSA1MDI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDUwMzpcclxuICAgICAgICAgICAgICAgIGNhc2UgNTA0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm92aWRlckVycm9yVHlwZS5TZXJ2ZXJFcnJvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgJ1NlcnZlciBlcnJvciBvY2N1cnJlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm92aWRlckVycm9yVHlwZS5TZXJ2ZXJFcnJvcixcclxuICAgICAgICAgICAgICAgICAgICAgICAgYFVua25vd24gZXJyb3Igb2NjdXJyZWQ6ICR7c3RhdHVzfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEhhbmRsZSBlcnJvciBvYmplY3RzIHdpdGggcmVzcG9uc2UgcHJvcGVydHkgKGxpa2UgQXhpb3MgZXJyb3JzKVxyXG4gICAgICAgIGlmICghZXJyb3IucmVzcG9uc2UpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFByb3ZpZGVyRXJyb3IoXHJcbiAgICAgICAgICAgICAgICBQcm92aWRlckVycm9yVHlwZS5OZXR3b3JrRXJyb3IsXHJcbiAgICAgICAgICAgICAgICAnTmV0d29yayBlcnJvciBvY2N1cnJlZCdcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHN0YXR1cyA9IGVycm9yLnJlc3BvbnNlLnN0YXR1cztcclxuICAgICAgICBzd2l0Y2ggKHN0YXR1cykge1xyXG4gICAgICAgICAgICBjYXNlIDQwMTpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLkludmFsaWRBcGlLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgJ0ludmFsaWQgQVBJIGtleScsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjYXNlIDQyOTpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLlJhdGVMaW1pdCxcclxuICAgICAgICAgICAgICAgICAgICAnUmF0ZSBsaW1pdCBleGNlZWRlZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RhdHVzXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBjYXNlIDQwMDpcclxuICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgIFByb3ZpZGVyRXJyb3JUeXBlLkludmFsaWRSZXF1ZXN0LFxyXG4gICAgICAgICAgICAgICAgICAgICdJbnZhbGlkIHJlcXVlc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0YXR1c1xyXG4gICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgY2FzZSA1MDA6XHJcbiAgICAgICAgICAgIGNhc2UgNTAyOlxyXG4gICAgICAgICAgICBjYXNlIDUwMzpcclxuICAgICAgICAgICAgY2FzZSA1MDQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBQcm92aWRlckVycm9yVHlwZS5TZXJ2ZXJFcnJvcixcclxuICAgICAgICAgICAgICAgICAgICAnU2VydmVyIGVycm9yIG9jY3VycmVkJyxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgUHJvdmlkZXJFcnJvcihcclxuICAgICAgICAgICAgICAgICAgICBQcm92aWRlckVycm9yVHlwZS5TZXJ2ZXJFcnJvcixcclxuICAgICAgICAgICAgICAgICAgICBgVW5rbm93biBlcnJvciBvY2N1cnJlZDogJHtzdGF0dXN9YCxcclxuICAgICAgICAgICAgICAgICAgICBzdGF0dXNcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm9ybWF0IGVycm9yIG1lc3NhZ2UgZm9yIGNvbm5lY3Rpb24gdGVzdCByZXN1bHRzXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBmb3JtYXRFcnJvck1lc3NhZ2UoZXJyb3I6IGFueSk6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUHJvdmlkZXJFcnJvcikge1xyXG4gICAgICAgICAgICBzd2l0Y2ggKGVycm9yLnR5cGUpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgUHJvdmlkZXJFcnJvclR5cGUuSW52YWxpZEFwaUtleTpcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gJ0ludmFsaWQgQVBJIGtleS4gUGxlYXNlIGNoZWNrIHlvdXIgY3JlZGVudGlhbHMuJztcclxuICAgICAgICAgICAgICAgIGNhc2UgUHJvdmlkZXJFcnJvclR5cGUuUmF0ZUxpbWl0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAnUmF0ZSBsaW1pdCBleGNlZWRlZC4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci4nO1xyXG4gICAgICAgICAgICAgICAgY2FzZSBQcm92aWRlckVycm9yVHlwZS5OZXR3b3JrRXJyb3I6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuICdOZXR3b3JrIGVycm9yLiBQbGVhc2UgY2hlY2sgeW91ciBpbnRlcm5ldCBjb25uZWN0aW9uLic7XHJcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBlcnJvci5tZXNzYWdlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBlcnJvci5tZXNzYWdlIHx8ICdBbiB1bmtub3duIGVycm9yIG9jY3VycmVkJztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhIHN0YW5kYXJkIGVycm9yIHJlc3BvbnNlIGZvciBjb25uZWN0aW9uIHRlc3RzXHJcbiAgICAgKi9cclxuICAgIHByb3RlY3RlZCBjcmVhdGVFcnJvclJlc3BvbnNlKGVycm9yOiBhbnkpOiBDb25uZWN0aW9uVGVzdFJlc3VsdCB7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgIG1lc3NhZ2U6IHRoaXMuZm9ybWF0RXJyb3JNZXNzYWdlKGVycm9yKVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuIiwgImV4cG9ydCBjb25zdCBWRVJTSU9OID0gJzAuMzYuMyc7IC8vIHgtcmVsZWFzZS1wbGVhc2UtdmVyc2lvblxuIiwgIi8qKlxuICogRGlzY2xhaW1lcjogbW9kdWxlcyBpbiBfc2hpbXMgYXJlbid0IGludGVuZGVkIHRvIGJlIGltcG9ydGVkIGJ5IFNESyB1c2Vycy5cbiAqL1xuaW1wb3J0IHsgdHlwZSBSZXF1ZXN0T3B0aW9ucyB9IGZyb20gXCIuLi9jb3JlLmpzXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgU2hpbXMge1xuICBraW5kOiBzdHJpbmc7XG4gIGZldGNoOiBhbnk7XG4gIFJlcXVlc3Q6IGFueTtcbiAgUmVzcG9uc2U6IGFueTtcbiAgSGVhZGVyczogYW55O1xuICBGb3JtRGF0YTogYW55O1xuICBCbG9iOiBhbnk7XG4gIEZpbGU6IGFueTtcbiAgUmVhZGFibGVTdHJlYW06IGFueTtcbiAgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnM6IDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICAgIGZvcm06IFNoaW1zWydGb3JtRGF0YSddLFxuICAgIG9wdHM6IFJlcXVlc3RPcHRpb25zPFQ+LFxuICApID0+IFByb21pc2U8UmVxdWVzdE9wdGlvbnM8VD4+O1xuICBnZXREZWZhdWx0QWdlbnQ6ICh1cmw6IHN0cmluZykgPT4gYW55O1xuICBmaWxlRnJvbVBhdGg6XG4gICAgfCAoKHBhdGg6IHN0cmluZywgZmlsZW5hbWU/OiBzdHJpbmcsIG9wdGlvbnM/OiB7fSkgPT4gUHJvbWlzZTxTaGltc1snRmlsZSddPilcbiAgICB8ICgocGF0aDogc3RyaW5nLCBvcHRpb25zPzoge30pID0+IFByb21pc2U8U2hpbXNbJ0ZpbGUnXT4pO1xuICBpc0ZzUmVhZFN0cmVhbTogKHZhbHVlOiBhbnkpID0+IGJvb2xlYW47XG59XG5cbmV4cG9ydCBsZXQgYXV0byA9IGZhbHNlO1xuZXhwb3J0IGxldCBraW5kOiBTaGltc1sna2luZCddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBmZXRjaDogU2hpbXNbJ2ZldGNoJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IFJlcXVlc3Q6IFNoaW1zWydSZXF1ZXN0J10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IFJlc3BvbnNlOiBTaGltc1snUmVzcG9uc2UnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgSGVhZGVyczogU2hpbXNbJ0hlYWRlcnMnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgRm9ybURhdGE6IFNoaW1zWydGb3JtRGF0YSddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBCbG9iOiBTaGltc1snQmxvYiddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBGaWxlOiBTaGltc1snRmlsZSddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBSZWFkYWJsZVN0cmVhbTogU2hpbXNbJ1JlYWRhYmxlU3RyZWFtJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IGdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zOiBTaGltc1snZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMnXSB8IHVuZGVmaW5lZCA9IHVuZGVmaW5lZDtcbmV4cG9ydCBsZXQgZ2V0RGVmYXVsdEFnZW50OiBTaGltc1snZ2V0RGVmYXVsdEFnZW50J10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5leHBvcnQgbGV0IGZpbGVGcm9tUGF0aDogU2hpbXNbJ2ZpbGVGcm9tUGF0aCddIHwgdW5kZWZpbmVkID0gdW5kZWZpbmVkO1xuZXhwb3J0IGxldCBpc0ZzUmVhZFN0cmVhbTogU2hpbXNbJ2lzRnNSZWFkU3RyZWFtJ10gfCB1bmRlZmluZWQgPSB1bmRlZmluZWQ7XG5cbmV4cG9ydCBmdW5jdGlvbiBzZXRTaGltcyhzaGltczogU2hpbXMsIG9wdGlvbnM6IHsgYXV0bzogYm9vbGVhbiB9ID0geyBhdXRvOiBmYWxzZSB9KSB7XG4gIGlmIChhdXRvKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYHlvdSBtdXN0IFxcYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvJHtzaGltcy5raW5kfSdcXGAgYmVmb3JlIGltcG9ydGluZyBhbnl0aGluZyBlbHNlIGZyb20gQGFudGhyb3BpYy1haS9zZGtgLFxuICAgICk7XG4gIH1cbiAgaWYgKGtpbmQpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgY2FuJ3QgXFxgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy8ke3NoaW1zLmtpbmR9J1xcYCBhZnRlciBcXGBpbXBvcnQgJ0BhbnRocm9waWMtYWkvc2RrL3NoaW1zLyR7a2luZH0nXFxgYCxcbiAgICApO1xuICB9XG4gIGF1dG8gPSBvcHRpb25zLmF1dG87XG4gIGtpbmQgPSBzaGltcy5raW5kO1xuICBmZXRjaCA9IHNoaW1zLmZldGNoO1xuICBSZXF1ZXN0ID0gc2hpbXMuUmVxdWVzdDtcbiAgUmVzcG9uc2UgPSBzaGltcy5SZXNwb25zZTtcbiAgSGVhZGVycyA9IHNoaW1zLkhlYWRlcnM7XG4gIEZvcm1EYXRhID0gc2hpbXMuRm9ybURhdGE7XG4gIEJsb2IgPSBzaGltcy5CbG9iO1xuICBGaWxlID0gc2hpbXMuRmlsZTtcbiAgUmVhZGFibGVTdHJlYW0gPSBzaGltcy5SZWFkYWJsZVN0cmVhbTtcbiAgZ2V0TXVsdGlwYXJ0UmVxdWVzdE9wdGlvbnMgPSBzaGltcy5nZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucztcbiAgZ2V0RGVmYXVsdEFnZW50ID0gc2hpbXMuZ2V0RGVmYXVsdEFnZW50O1xuICBmaWxlRnJvbVBhdGggPSBzaGltcy5maWxlRnJvbVBhdGg7XG4gIGlzRnNSZWFkU3RyZWFtID0gc2hpbXMuaXNGc1JlYWRTdHJlYW07XG59XG4iLCAiLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICovXG5leHBvcnQgY2xhc3MgTXVsdGlwYXJ0Qm9keSB7XG4gIGNvbnN0cnVjdG9yKHB1YmxpYyBib2R5OiBhbnkpIHt9XG4gIGdldCBbU3ltYm9sLnRvU3RyaW5nVGFnXSgpOiBzdHJpbmcge1xuICAgIHJldHVybiAnTXVsdGlwYXJ0Qm9keSc7XG4gIH1cbn1cbiIsICIvKipcbiAqIERpc2NsYWltZXI6IG1vZHVsZXMgaW4gX3NoaW1zIGFyZW4ndCBpbnRlbmRlZCB0byBiZSBpbXBvcnRlZCBieSBTREsgdXNlcnMuXG4gKi9cbmltcG9ydCB7IE11bHRpcGFydEJvZHkgfSBmcm9tIFwiLi9NdWx0aXBhcnRCb2R5LmpzXCI7XG5pbXBvcnQgeyB0eXBlIFJlcXVlc3RPcHRpb25zIH0gZnJvbSBcIi4uL2NvcmUuanNcIjtcbmltcG9ydCB7IHR5cGUgU2hpbXMgfSBmcm9tIFwiLi9yZWdpc3RyeS5qc1wiO1xuXG5leHBvcnQgZnVuY3Rpb24gZ2V0UnVudGltZSh7IG1hbnVhbGx5SW1wb3J0ZWQgfTogeyBtYW51YWxseUltcG9ydGVkPzogYm9vbGVhbiB9ID0ge30pOiBTaGltcyB7XG4gIGNvbnN0IHJlY29tbWVuZGF0aW9uID1cbiAgICBtYW51YWxseUltcG9ydGVkID9cbiAgICAgIGBZb3UgbWF5IG5lZWQgdG8gdXNlIHBvbHlmaWxsc2BcbiAgICA6IGBBZGQgb25lIG9mIHRoZXNlIGltcG9ydHMgYmVmb3JlIHlvdXIgZmlyc3QgXFxgaW1wb3J0IFx1MjAyNiBmcm9tICdAYW50aHJvcGljLWFpL3NkaydcXGA6XG4tIFxcYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvbm9kZSdcXGAgKGlmIHlvdSdyZSBydW5uaW5nIG9uIE5vZGUpXG4tIFxcYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvd2ViJ1xcYCAob3RoZXJ3aXNlKVxuYDtcblxuICBsZXQgX2ZldGNoLCBfUmVxdWVzdCwgX1Jlc3BvbnNlLCBfSGVhZGVycztcbiAgdHJ5IHtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgX2ZldGNoID0gZmV0Y2g7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIF9SZXF1ZXN0ID0gUmVxdWVzdDtcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgX1Jlc3BvbnNlID0gUmVzcG9uc2U7XG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIF9IZWFkZXJzID0gSGVhZGVycztcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICBgdGhpcyBlbnZpcm9ubWVudCBpcyBtaXNzaW5nIHRoZSBmb2xsb3dpbmcgV2ViIEZldGNoIEFQSSB0eXBlOiAke1xuICAgICAgICAoZXJyb3IgYXMgYW55KS5tZXNzYWdlXG4gICAgICB9LiAke3JlY29tbWVuZGF0aW9ufWAsXG4gICAgKTtcbiAgfVxuXG4gIHJldHVybiB7XG4gICAga2luZDogJ3dlYicsXG4gICAgZmV0Y2g6IF9mZXRjaCxcbiAgICBSZXF1ZXN0OiBfUmVxdWVzdCxcbiAgICBSZXNwb25zZTogX1Jlc3BvbnNlLFxuICAgIEhlYWRlcnM6IF9IZWFkZXJzLFxuICAgIEZvcm1EYXRhOlxuICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgdHlwZW9mIEZvcm1EYXRhICE9PSAndW5kZWZpbmVkJyA/IEZvcm1EYXRhIDogKFxuICAgICAgICBjbGFzcyBGb3JtRGF0YSB7XG4gICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgIGNvbnN0cnVjdG9yKCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgICAgICAgICBgZmlsZSB1cGxvYWRzIGFyZW4ndCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCB5ZXQgYXMgJ0Zvcm1EYXRhJyBpcyB1bmRlZmluZWQuICR7cmVjb21tZW5kYXRpb259YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApLFxuICAgIEJsb2I6XG4gICAgICB0eXBlb2YgQmxvYiAhPT0gJ3VuZGVmaW5lZCcgPyBCbG9iIDogKFxuICAgICAgICBjbGFzcyBCbG9iIHtcbiAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYGZpbGUgdXBsb2FkcyBhcmVuJ3Qgc3VwcG9ydGVkIGluIHRoaXMgZW52aXJvbm1lbnQgeWV0IGFzICdCbG9iJyBpcyB1bmRlZmluZWQuICR7cmVjb21tZW5kYXRpb259YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApLFxuICAgIEZpbGU6XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICB0eXBlb2YgRmlsZSAhPT0gJ3VuZGVmaW5lZCcgPyBGaWxlIDogKFxuICAgICAgICBjbGFzcyBGaWxlIHtcbiAgICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgICAgY29uc3RydWN0b3IoKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAgICAgICAgIGBmaWxlIHVwbG9hZHMgYXJlbid0IHN1cHBvcnRlZCBpbiB0aGlzIGVudmlyb25tZW50IHlldCBhcyAnRmlsZScgaXMgdW5kZWZpbmVkLiAke3JlY29tbWVuZGF0aW9ufWAsXG4gICAgICAgICAgICApO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgKSxcbiAgICBSZWFkYWJsZVN0cmVhbTpcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIHR5cGVvZiBSZWFkYWJsZVN0cmVhbSAhPT0gJ3VuZGVmaW5lZCcgPyBSZWFkYWJsZVN0cmVhbSA6IChcbiAgICAgICAgY2xhc3MgUmVhZGFibGVTdHJlYW0ge1xuICAgICAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgICAgICBjb25zdHJ1Y3RvcigpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgICAgICAgYHN0cmVhbWluZyBpc24ndCBzdXBwb3J0ZWQgaW4gdGhpcyBlbnZpcm9ubWVudCB5ZXQgYXMgJ1JlYWRhYmxlU3RyZWFtJyBpcyB1bmRlZmluZWQuICR7cmVjb21tZW5kYXRpb259YCxcbiAgICAgICAgICAgICk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApLFxuICAgIGdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zOiBhc3luYyA8VCA9IFJlY29yZDxzdHJpbmcsIHVua25vd24+PihcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGZvcm06IEZvcm1EYXRhLFxuICAgICAgb3B0czogUmVxdWVzdE9wdGlvbnM8VD4sXG4gICAgKTogUHJvbWlzZTxSZXF1ZXN0T3B0aW9uczxUPj4gPT4gKHtcbiAgICAgIC4uLm9wdHMsXG4gICAgICBib2R5OiBuZXcgTXVsdGlwYXJ0Qm9keShmb3JtKSBhcyBhbnksXG4gICAgfSksXG4gICAgZ2V0RGVmYXVsdEFnZW50OiAodXJsOiBzdHJpbmcpID0+IHVuZGVmaW5lZCxcbiAgICBmaWxlRnJvbVBhdGg6ICgpID0+IHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihcbiAgICAgICAgJ1RoZSBgZmlsZUZyb21QYXRoYCBmdW5jdGlvbiBpcyBvbmx5IHN1cHBvcnRlZCBpbiBOb2RlLiBTZWUgdGhlIFJFQURNRSBmb3IgbW9yZSBkZXRhaWxzOiBodHRwczovL3d3dy5naXRodWIuY29tL2FudGhyb3BpY3MvYW50aHJvcGljLXNkay10eXBlc2NyaXB0I2ZpbGUtdXBsb2FkcycsXG4gICAgICApO1xuICAgIH0sXG4gICAgaXNGc1JlYWRTdHJlYW06ICh2YWx1ZTogYW55KSA9PiBmYWxzZSxcbiAgfTtcbn1cbiIsICJleHBvcnQgKiBmcm9tIFwiLi4vd2ViLXJ1bnRpbWUubWpzXCI7XG4vLyMgc291cmNlTWFwcGluZ1VSTD1ydW50aW1lLm1qcy5tYXAiLCAiLyoqXG4gKiBEaXNjbGFpbWVyOiBtb2R1bGVzIGluIF9zaGltcyBhcmVuJ3QgaW50ZW5kZWQgdG8gYmUgaW1wb3J0ZWQgYnkgU0RLIHVzZXJzLlxuICovXG5pbXBvcnQgKiBhcyBzaGltcyBmcm9tICcuL3JlZ2lzdHJ5Lm1qcyc7XG5pbXBvcnQgKiBhcyBhdXRvIGZyb20gJ0BhbnRocm9waWMtYWkvc2RrL19zaGltcy9hdXRvL3J1bnRpbWUnO1xuaWYgKCFzaGltcy5raW5kKSBzaGltcy5zZXRTaGltcyhhdXRvLmdldFJ1bnRpbWUoKSwgeyBhdXRvOiB0cnVlIH0pO1xuZXhwb3J0ICogZnJvbSAnLi9yZWdpc3RyeS5tanMnO1xuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IGNhc3RUb0Vycm9yLCBIZWFkZXJzIH0gZnJvbSBcIi4vY29yZS5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQW50aHJvcGljRXJyb3IgZXh0ZW5kcyBFcnJvciB7fVxuXG5leHBvcnQgY2xhc3MgQVBJRXJyb3I8XG4gIFRTdGF0dXMgZXh0ZW5kcyBudW1iZXIgfCB1bmRlZmluZWQgPSBudW1iZXIgfCB1bmRlZmluZWQsXG4gIFRIZWFkZXJzIGV4dGVuZHMgSGVhZGVycyB8IHVuZGVmaW5lZCA9IEhlYWRlcnMgfCB1bmRlZmluZWQsXG4gIFRFcnJvciBleHRlbmRzIE9iamVjdCB8IHVuZGVmaW5lZCA9IE9iamVjdCB8IHVuZGVmaW5lZCxcbj4gZXh0ZW5kcyBBbnRocm9waWNFcnJvciB7XG4gIC8qKiBIVFRQIHN0YXR1cyBmb3IgdGhlIHJlc3BvbnNlIHRoYXQgY2F1c2VkIHRoZSBlcnJvciAqL1xuICByZWFkb25seSBzdGF0dXM6IFRTdGF0dXM7XG4gIC8qKiBIVFRQIGhlYWRlcnMgZm9yIHRoZSByZXNwb25zZSB0aGF0IGNhdXNlZCB0aGUgZXJyb3IgKi9cbiAgcmVhZG9ubHkgaGVhZGVyczogVEhlYWRlcnM7XG4gIC8qKiBKU09OIGJvZHkgb2YgdGhlIHJlc3BvbnNlIHRoYXQgY2F1c2VkIHRoZSBlcnJvciAqL1xuICByZWFkb25seSBlcnJvcjogVEVycm9yO1xuXG4gIHJlYWRvbmx5IHJlcXVlc3RfaWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbiAgY29uc3RydWN0b3Ioc3RhdHVzOiBUU3RhdHVzLCBlcnJvcjogVEVycm9yLCBtZXNzYWdlOiBzdHJpbmcgfCB1bmRlZmluZWQsIGhlYWRlcnM6IFRIZWFkZXJzKSB7XG4gICAgc3VwZXIoYCR7QVBJRXJyb3IubWFrZU1lc3NhZ2Uoc3RhdHVzLCBlcnJvciwgbWVzc2FnZSl9YCk7XG4gICAgdGhpcy5zdGF0dXMgPSBzdGF0dXM7XG4gICAgdGhpcy5oZWFkZXJzID0gaGVhZGVycztcbiAgICB0aGlzLnJlcXVlc3RfaWQgPSBoZWFkZXJzPy5bJ3JlcXVlc3QtaWQnXTtcbiAgICB0aGlzLmVycm9yID0gZXJyb3I7XG4gIH1cblxuICBwcml2YXRlIHN0YXRpYyBtYWtlTWVzc2FnZShzdGF0dXM6IG51bWJlciB8IHVuZGVmaW5lZCwgZXJyb3I6IGFueSwgbWVzc2FnZTogc3RyaW5nIHwgdW5kZWZpbmVkKSB7XG4gICAgY29uc3QgbXNnID1cbiAgICAgIGVycm9yPy5tZXNzYWdlID9cbiAgICAgICAgdHlwZW9mIGVycm9yLm1lc3NhZ2UgPT09ICdzdHJpbmcnID9cbiAgICAgICAgICBlcnJvci5tZXNzYWdlXG4gICAgICAgIDogSlNPTi5zdHJpbmdpZnkoZXJyb3IubWVzc2FnZSlcbiAgICAgIDogZXJyb3IgPyBKU09OLnN0cmluZ2lmeShlcnJvcilcbiAgICAgIDogbWVzc2FnZTtcblxuICAgIGlmIChzdGF0dXMgJiYgbXNnKSB7XG4gICAgICByZXR1cm4gYCR7c3RhdHVzfSAke21zZ31gO1xuICAgIH1cbiAgICBpZiAoc3RhdHVzKSB7XG4gICAgICByZXR1cm4gYCR7c3RhdHVzfSBzdGF0dXMgY29kZSAobm8gYm9keSlgO1xuICAgIH1cbiAgICBpZiAobXNnKSB7XG4gICAgICByZXR1cm4gbXNnO1xuICAgIH1cbiAgICByZXR1cm4gJyhubyBzdGF0dXMgY29kZSBvciBib2R5KSc7XG4gIH1cblxuICBzdGF0aWMgZ2VuZXJhdGUoXG4gICAgc3RhdHVzOiBudW1iZXIgfCB1bmRlZmluZWQsXG4gICAgZXJyb3JSZXNwb25zZTogT2JqZWN0IHwgdW5kZWZpbmVkLFxuICAgIG1lc3NhZ2U6IHN0cmluZyB8IHVuZGVmaW5lZCxcbiAgICBoZWFkZXJzOiBIZWFkZXJzIHwgdW5kZWZpbmVkLFxuICApOiBBUElFcnJvciB7XG4gICAgaWYgKCFzdGF0dXMgfHwgIWhlYWRlcnMpIHtcbiAgICAgIHJldHVybiBuZXcgQVBJQ29ubmVjdGlvbkVycm9yKHsgbWVzc2FnZSwgY2F1c2U6IGNhc3RUb0Vycm9yKGVycm9yUmVzcG9uc2UpIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IGVycm9yID0gZXJyb3JSZXNwb25zZSBhcyBSZWNvcmQ8c3RyaW5nLCBhbnk+O1xuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDAwKSB7XG4gICAgICByZXR1cm4gbmV3IEJhZFJlcXVlc3RFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDEpIHtcbiAgICAgIHJldHVybiBuZXcgQXV0aGVudGljYXRpb25FcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdHVzID09PSA0MDMpIHtcbiAgICAgIHJldHVybiBuZXcgUGVybWlzc2lvbkRlbmllZEVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQwNCkge1xuICAgICAgcmV0dXJuIG5ldyBOb3RGb3VuZEVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQwOSkge1xuICAgICAgcmV0dXJuIG5ldyBDb25mbGljdEVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPT09IDQyMikge1xuICAgICAgcmV0dXJuIG5ldyBVbnByb2Nlc3NhYmxlRW50aXR5RXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgaWYgKHN0YXR1cyA9PT0gNDI5KSB7XG4gICAgICByZXR1cm4gbmV3IFJhdGVMaW1pdEVycm9yKHN0YXR1cywgZXJyb3IsIG1lc3NhZ2UsIGhlYWRlcnMpO1xuICAgIH1cblxuICAgIGlmIChzdGF0dXMgPj0gNTAwKSB7XG4gICAgICByZXR1cm4gbmV3IEludGVybmFsU2VydmVyRXJyb3Ioc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBBUElFcnJvcihzdGF0dXMsIGVycm9yLCBtZXNzYWdlLCBoZWFkZXJzKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQVBJVXNlckFib3J0RXJyb3IgZXh0ZW5kcyBBUElFcnJvcjx1bmRlZmluZWQsIHVuZGVmaW5lZCwgdW5kZWZpbmVkPiB7XG4gIGNvbnN0cnVjdG9yKHsgbWVzc2FnZSB9OiB7IG1lc3NhZ2U/OiBzdHJpbmcgfSA9IHt9KSB7XG4gICAgc3VwZXIodW5kZWZpbmVkLCB1bmRlZmluZWQsIG1lc3NhZ2UgfHwgJ1JlcXVlc3Qgd2FzIGFib3J0ZWQuJywgdW5kZWZpbmVkKTtcbiAgfVxufVxuXG5leHBvcnQgY2xhc3MgQVBJQ29ubmVjdGlvbkVycm9yIGV4dGVuZHMgQVBJRXJyb3I8dW5kZWZpbmVkLCB1bmRlZmluZWQsIHVuZGVmaW5lZD4ge1xuICBjb25zdHJ1Y3Rvcih7IG1lc3NhZ2UsIGNhdXNlIH06IHsgbWVzc2FnZT86IHN0cmluZyB8IHVuZGVmaW5lZDsgY2F1c2U/OiBFcnJvciB8IHVuZGVmaW5lZCB9KSB7XG4gICAgc3VwZXIodW5kZWZpbmVkLCB1bmRlZmluZWQsIG1lc3NhZ2UgfHwgJ0Nvbm5lY3Rpb24gZXJyb3IuJywgdW5kZWZpbmVkKTtcbiAgICAvLyBpbiBzb21lIGVudmlyb25tZW50cyB0aGUgJ2NhdXNlJyBwcm9wZXJ0eSBpcyBhbHJlYWR5IGRlY2xhcmVkXG4gICAgLy8gQHRzLWlnbm9yZVxuICAgIGlmIChjYXVzZSkgdGhpcy5jYXVzZSA9IGNhdXNlO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBBUElDb25uZWN0aW9uVGltZW91dEVycm9yIGV4dGVuZHMgQVBJQ29ubmVjdGlvbkVycm9yIHtcbiAgY29uc3RydWN0b3IoeyBtZXNzYWdlIH06IHsgbWVzc2FnZT86IHN0cmluZyB9ID0ge30pIHtcbiAgICBzdXBlcih7IG1lc3NhZ2U6IG1lc3NhZ2UgPz8gJ1JlcXVlc3QgdGltZWQgb3V0LicgfSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIEJhZFJlcXVlc3RFcnJvciBleHRlbmRzIEFQSUVycm9yPDQwMCwgSGVhZGVycz4ge31cblxuZXhwb3J0IGNsYXNzIEF1dGhlbnRpY2F0aW9uRXJyb3IgZXh0ZW5kcyBBUElFcnJvcjw0MDEsIEhlYWRlcnM+IHt9XG5cbmV4cG9ydCBjbGFzcyBQZXJtaXNzaW9uRGVuaWVkRXJyb3IgZXh0ZW5kcyBBUElFcnJvcjw0MDMsIEhlYWRlcnM+IHt9XG5cbmV4cG9ydCBjbGFzcyBOb3RGb3VuZEVycm9yIGV4dGVuZHMgQVBJRXJyb3I8NDA0LCBIZWFkZXJzPiB7fVxuXG5leHBvcnQgY2xhc3MgQ29uZmxpY3RFcnJvciBleHRlbmRzIEFQSUVycm9yPDQwOSwgSGVhZGVycz4ge31cblxuZXhwb3J0IGNsYXNzIFVucHJvY2Vzc2FibGVFbnRpdHlFcnJvciBleHRlbmRzIEFQSUVycm9yPDQyMiwgSGVhZGVycz4ge31cblxuZXhwb3J0IGNsYXNzIFJhdGVMaW1pdEVycm9yIGV4dGVuZHMgQVBJRXJyb3I8NDI5LCBIZWFkZXJzPiB7fVxuXG5leHBvcnQgY2xhc3MgSW50ZXJuYWxTZXJ2ZXJFcnJvciBleHRlbmRzIEFQSUVycm9yPG51bWJlciwgSGVhZGVycz4ge31cbiIsICJpbXBvcnQgeyBBbnRocm9waWNFcnJvciB9IGZyb20gXCIuLi8uLi9lcnJvci5qc1wiO1xuXG5leHBvcnQgdHlwZSBCeXRlcyA9IHN0cmluZyB8IEFycmF5QnVmZmVyIHwgVWludDhBcnJheSB8IEJ1ZmZlciB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbi8qKlxuICogQSByZS1pbXBsZW1lbnRhdGlvbiBvZiBodHRweCdzIGBMaW5lRGVjb2RlcmAgaW4gUHl0aG9uIHRoYXQgaGFuZGxlcyBpbmNyZW1lbnRhbGx5XG4gKiByZWFkaW5nIGxpbmVzIGZyb20gdGV4dC5cbiAqXG4gKiBodHRwczovL2dpdGh1Yi5jb20vZW5jb2RlL2h0dHB4L2Jsb2IvOTIwMzMzZWE5ODExOGU5Y2Y2MTdmMjQ2OTA1ZDdiMjAyNTEwOTQxYy9odHRweC9fZGVjb2RlcnMucHkjTDI1OFxuICovXG5leHBvcnQgY2xhc3MgTGluZURlY29kZXIge1xuICAvLyBwcmV0dGllci1pZ25vcmVcbiAgc3RhdGljIE5FV0xJTkVfQ0hBUlMgPSBuZXcgU2V0KFsnXFxuJywgJ1xcciddKTtcbiAgc3RhdGljIE5FV0xJTkVfUkVHRVhQID0gL1xcclxcbnxbXFxuXFxyXS9nO1xuXG4gIGJ1ZmZlcjogc3RyaW5nW107XG4gIHRyYWlsaW5nQ1I6IGJvb2xlYW47XG4gIHRleHREZWNvZGVyOiBhbnk7IC8vIFRleHREZWNvZGVyIGZvdW5kIGluIGJyb3dzZXJzOyBub3QgdHlwZWQgdG8gYXZvaWQgcHVsbGluZyBpbiBlaXRoZXIgXCJkb21cIiBvciBcIm5vZGVcIiB0eXBlcy5cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgIHRoaXMudHJhaWxpbmdDUiA9IGZhbHNlO1xuICB9XG5cbiAgZGVjb2RlKGNodW5rOiBCeXRlcyk6IHN0cmluZ1tdIHtcbiAgICBsZXQgdGV4dCA9IHRoaXMuZGVjb2RlVGV4dChjaHVuayk7XG5cbiAgICBpZiAodGhpcy50cmFpbGluZ0NSKSB7XG4gICAgICB0ZXh0ID0gJ1xccicgKyB0ZXh0O1xuICAgICAgdGhpcy50cmFpbGluZ0NSID0gZmFsc2U7XG4gICAgfVxuICAgIGlmICh0ZXh0LmVuZHNXaXRoKCdcXHInKSkge1xuICAgICAgdGhpcy50cmFpbGluZ0NSID0gdHJ1ZTtcbiAgICAgIHRleHQgPSB0ZXh0LnNsaWNlKDAsIC0xKTtcbiAgICB9XG5cbiAgICBpZiAoIXRleHQpIHtcbiAgICAgIHJldHVybiBbXTtcbiAgICB9XG5cbiAgICBjb25zdCB0cmFpbGluZ05ld2xpbmUgPSBMaW5lRGVjb2Rlci5ORVdMSU5FX0NIQVJTLmhhcyh0ZXh0W3RleHQubGVuZ3RoIC0gMV0gfHwgJycpO1xuICAgIGxldCBsaW5lcyA9IHRleHQuc3BsaXQoTGluZURlY29kZXIuTkVXTElORV9SRUdFWFApO1xuXG4gICAgLy8gaWYgdGhlcmUgaXMgYSB0cmFpbGluZyBuZXcgbGluZSB0aGVuIHRoZSBsYXN0IGVudHJ5IHdpbGwgYmUgYW4gZW1wdHlcbiAgICAvLyBzdHJpbmcgd2hpY2ggd2UgZG9uJ3QgY2FyZSBhYm91dFxuICAgIGlmICh0cmFpbGluZ05ld2xpbmUpIHtcbiAgICAgIGxpbmVzLnBvcCgpO1xuICAgIH1cblxuICAgIGlmIChsaW5lcy5sZW5ndGggPT09IDEgJiYgIXRyYWlsaW5nTmV3bGluZSkge1xuICAgICAgdGhpcy5idWZmZXIucHVzaChsaW5lc1swXSEpO1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmJ1ZmZlci5sZW5ndGggPiAwKSB7XG4gICAgICBsaW5lcyA9IFt0aGlzLmJ1ZmZlci5qb2luKCcnKSArIGxpbmVzWzBdLCAuLi5saW5lcy5zbGljZSgxKV07XG4gICAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgIH1cblxuICAgIGlmICghdHJhaWxpbmdOZXdsaW5lKSB7XG4gICAgICB0aGlzLmJ1ZmZlciA9IFtsaW5lcy5wb3AoKSB8fCAnJ107XG4gICAgfVxuXG4gICAgcmV0dXJuIGxpbmVzO1xuICB9XG5cbiAgZGVjb2RlVGV4dChieXRlczogQnl0ZXMpOiBzdHJpbmcge1xuICAgIGlmIChieXRlcyA9PSBudWxsKSByZXR1cm4gJyc7XG4gICAgaWYgKHR5cGVvZiBieXRlcyA9PT0gJ3N0cmluZycpIHJldHVybiBieXRlcztcblxuICAgIC8vIE5vZGU6XG4gICAgaWYgKHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICBpZiAoYnl0ZXMgaW5zdGFuY2VvZiBCdWZmZXIpIHtcbiAgICAgICAgcmV0dXJuIGJ5dGVzLnRvU3RyaW5nKCk7XG4gICAgICB9XG4gICAgICBpZiAoYnl0ZXMgaW5zdGFuY2VvZiBVaW50OEFycmF5KSB7XG4gICAgICAgIHJldHVybiBCdWZmZXIuZnJvbShieXRlcykudG9TdHJpbmcoKTtcbiAgICAgIH1cblxuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgICBgVW5leHBlY3RlZDogcmVjZWl2ZWQgbm9uLVVpbnQ4QXJyYXkgKCR7Ynl0ZXMuY29uc3RydWN0b3IubmFtZX0pIHN0cmVhbSBjaHVuayBpbiBhbiBlbnZpcm9ubWVudCB3aXRoIGEgZ2xvYmFsIFwiQnVmZmVyXCIgZGVmaW5lZCwgd2hpY2ggdGhpcyBsaWJyYXJ5IGFzc3VtZXMgdG8gYmUgTm9kZS4gUGxlYXNlIHJlcG9ydCB0aGlzIGVycm9yLmAsXG4gICAgICApO1xuICAgIH1cblxuICAgIC8vIEJyb3dzZXJcbiAgICBpZiAodHlwZW9mIFRleHREZWNvZGVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgaWYgKGJ5dGVzIGluc3RhbmNlb2YgVWludDhBcnJheSB8fCBieXRlcyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHRoaXMudGV4dERlY29kZXIgPz89IG5ldyBUZXh0RGVjb2RlcigndXRmOCcpO1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0RGVjb2Rlci5kZWNvZGUoYnl0ZXMpO1xuICAgICAgfVxuXG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoXG4gICAgICAgIGBVbmV4cGVjdGVkOiByZWNlaXZlZCBub24tVWludDhBcnJheS9BcnJheUJ1ZmZlciAoJHtcbiAgICAgICAgICAoYnl0ZXMgYXMgYW55KS5jb25zdHJ1Y3Rvci5uYW1lXG4gICAgICAgIH0pIGluIGEgd2ViIHBsYXRmb3JtLiBQbGVhc2UgcmVwb3J0IHRoaXMgZXJyb3IuYCxcbiAgICAgICk7XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKFxuICAgICAgYFVuZXhwZWN0ZWQ6IG5laXRoZXIgQnVmZmVyIG5vciBUZXh0RGVjb2RlciBhcmUgYXZhaWxhYmxlIGFzIGdsb2JhbHMuIFBsZWFzZSByZXBvcnQgdGhpcyBlcnJvci5gLFxuICAgICk7XG4gIH1cblxuICBmbHVzaCgpOiBzdHJpbmdbXSB7XG4gICAgaWYgKCF0aGlzLmJ1ZmZlci5sZW5ndGggJiYgIXRoaXMudHJhaWxpbmdDUikge1xuICAgICAgcmV0dXJuIFtdO1xuICAgIH1cblxuICAgIGNvbnN0IGxpbmVzID0gW3RoaXMuYnVmZmVyLmpvaW4oJycpXTtcbiAgICB0aGlzLmJ1ZmZlciA9IFtdO1xuICAgIHRoaXMudHJhaWxpbmdDUiA9IGZhbHNlO1xuICAgIHJldHVybiBsaW5lcztcbiAgfVxufVxuIiwgIi8qKlxuICogTW9zdCBicm93c2VycyBkb24ndCB5ZXQgaGF2ZSBhc3luYyBpdGVyYWJsZSBzdXBwb3J0IGZvciBSZWFkYWJsZVN0cmVhbSxcbiAqIGFuZCBOb2RlIGhhcyBhIHZlcnkgZGlmZmVyZW50IHdheSBvZiByZWFkaW5nIGJ5dGVzIGZyb20gaXRzIFwiUmVhZGFibGVTdHJlYW1cIi5cbiAqXG4gKiBUaGlzIHBvbHlmaWxsIHdhcyBwdWxsZWQgZnJvbSBodHRwczovL2dpdGh1Yi5jb20vTWF0dGlhc0J1ZWxlbnMvd2ViLXN0cmVhbXMtcG9seWZpbGwvcHVsbC8xMjIjaXNzdWVjb21tZW50LTE2MjczNTQ0OTBcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIFJlYWRhYmxlU3RyZWFtVG9Bc3luY0l0ZXJhYmxlPFQ+KHN0cmVhbTogYW55KTogQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPFQ+IHtcbiAgaWYgKHN0cmVhbVtTeW1ib2wuYXN5bmNJdGVyYXRvcl0pIHJldHVybiBzdHJlYW07XG5cbiAgY29uc3QgcmVhZGVyID0gc3RyZWFtLmdldFJlYWRlcigpO1xuICByZXR1cm4ge1xuICAgIGFzeW5jIG5leHQoKSB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCByZWFkZXIucmVhZCgpO1xuICAgICAgICBpZiAocmVzdWx0Py5kb25lKSByZWFkZXIucmVsZWFzZUxvY2soKTsgLy8gcmVsZWFzZSBsb2NrIHdoZW4gc3RyZWFtIGJlY29tZXMgY2xvc2VkXG4gICAgICAgIHJldHVybiByZXN1bHQ7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIHJlYWRlci5yZWxlYXNlTG9jaygpOyAvLyByZWxlYXNlIGxvY2sgd2hlbiBzdHJlYW0gYmVjb21lcyBlcnJvcmVkXG4gICAgICAgIHRocm93IGU7XG4gICAgICB9XG4gICAgfSxcbiAgICBhc3luYyByZXR1cm4oKSB7XG4gICAgICBjb25zdCBjYW5jZWxQcm9taXNlID0gcmVhZGVyLmNhbmNlbCgpO1xuICAgICAgcmVhZGVyLnJlbGVhc2VMb2NrKCk7XG4gICAgICBhd2FpdCBjYW5jZWxQcm9taXNlO1xuICAgICAgcmV0dXJuIHsgZG9uZTogdHJ1ZSwgdmFsdWU6IHVuZGVmaW5lZCB9O1xuICAgIH0sXG4gICAgW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpIHtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH0sXG4gIH07XG59XG4iLCAiaW1wb3J0IHsgUmVhZGFibGVTdHJlYW0sIHR5cGUgUmVzcG9uc2UgfSBmcm9tIFwiLi9fc2hpbXMvaW5kZXguanNcIjtcbmltcG9ydCB7IEFudGhyb3BpY0Vycm9yIH0gZnJvbSBcIi4vZXJyb3IuanNcIjtcbmltcG9ydCB7IExpbmVEZWNvZGVyIH0gZnJvbSBcIi4vaW50ZXJuYWwvZGVjb2RlcnMvbGluZS5qc1wiO1xuaW1wb3J0IHsgUmVhZGFibGVTdHJlYW1Ub0FzeW5jSXRlcmFibGUgfSBmcm9tIFwiLi9pbnRlcm5hbC9zdHJlYW0tdXRpbHMuanNcIjtcblxuaW1wb3J0IHsgY3JlYXRlUmVzcG9uc2VIZWFkZXJzIH0gZnJvbSBcIi4vY29yZS5qc1wiO1xuaW1wb3J0IHsgQVBJRXJyb3IgfSBmcm9tIFwiLi9lcnJvci5qc1wiO1xuXG50eXBlIEJ5dGVzID0gc3RyaW5nIHwgQXJyYXlCdWZmZXIgfCBVaW50OEFycmF5IHwgQnVmZmVyIHwgbnVsbCB8IHVuZGVmaW5lZDtcblxuZXhwb3J0IHR5cGUgU2VydmVyU2VudEV2ZW50ID0ge1xuICBldmVudDogc3RyaW5nIHwgbnVsbDtcbiAgZGF0YTogc3RyaW5nO1xuICByYXc6IHN0cmluZ1tdO1xufTtcblxuZXhwb3J0IGNsYXNzIFN0cmVhbTxJdGVtPiBpbXBsZW1lbnRzIEFzeW5jSXRlcmFibGU8SXRlbT4ge1xuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBpdGVyYXRvcjogKCkgPT4gQXN5bmNJdGVyYXRvcjxJdGVtPixcbiAgICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIsXG4gICkge1xuICAgIHRoaXMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7XG4gIH1cblxuICBzdGF0aWMgZnJvbVNTRVJlc3BvbnNlPEl0ZW0+KHJlc3BvbnNlOiBSZXNwb25zZSwgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyKTogU3RyZWFtPEl0ZW0+IHtcbiAgICBsZXQgY29uc3VtZWQgPSBmYWxzZTtcblxuICAgIGFzeW5jIGZ1bmN0aW9uKiBpdGVyYXRvcigpOiBBc3luY0l0ZXJhdG9yPEl0ZW0sIGFueSwgdW5kZWZpbmVkPiB7XG4gICAgICBpZiAoY29uc3VtZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3QgaXRlcmF0ZSBvdmVyIGEgY29uc3VtZWQgc3RyZWFtLCB1c2UgYC50ZWUoKWAgdG8gc3BsaXQgdGhlIHN0cmVhbS4nKTtcbiAgICAgIH1cbiAgICAgIGNvbnN1bWVkID0gdHJ1ZTtcbiAgICAgIGxldCBkb25lID0gZmFsc2U7XG4gICAgICB0cnkge1xuICAgICAgICBmb3IgYXdhaXQgKGNvbnN0IHNzZSBvZiBfaXRlclNTRU1lc3NhZ2VzKHJlc3BvbnNlLCBjb250cm9sbGVyKSkge1xuICAgICAgICAgIGlmIChzc2UuZXZlbnQgPT09ICdjb21wbGV0aW9uJykge1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgeWllbGQgSlNPTi5wYXJzZShzc2UuZGF0YSk7XG4gICAgICAgICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYENvdWxkIG5vdCBwYXJzZSBtZXNzYWdlIGludG8gSlNPTjpgLCBzc2UuZGF0YSk7XG4gICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYEZyb20gY2h1bms6YCwgc3NlLnJhdyk7XG4gICAgICAgICAgICAgIHRocm93IGU7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKFxuICAgICAgICAgICAgc3NlLmV2ZW50ID09PSAnbWVzc2FnZV9zdGFydCcgfHxcbiAgICAgICAgICAgIHNzZS5ldmVudCA9PT0gJ21lc3NhZ2VfZGVsdGEnIHx8XG4gICAgICAgICAgICBzc2UuZXZlbnQgPT09ICdtZXNzYWdlX3N0b3AnIHx8XG4gICAgICAgICAgICBzc2UuZXZlbnQgPT09ICdjb250ZW50X2Jsb2NrX3N0YXJ0JyB8fFxuICAgICAgICAgICAgc3NlLmV2ZW50ID09PSAnY29udGVudF9ibG9ja19kZWx0YScgfHxcbiAgICAgICAgICAgIHNzZS5ldmVudCA9PT0gJ2NvbnRlbnRfYmxvY2tfc3RvcCdcbiAgICAgICAgICApIHtcbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgIHlpZWxkIEpTT04ucGFyc2Uoc3NlLmRhdGEpO1xuICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBDb3VsZCBub3QgcGFyc2UgbWVzc2FnZSBpbnRvIEpTT046YCwgc3NlLmRhdGEpO1xuICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBGcm9tIGNodW5rOmAsIHNzZS5yYXcpO1xuICAgICAgICAgICAgICB0aHJvdyBlO1xuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cblxuICAgICAgICAgIGlmIChzc2UuZXZlbnQgPT09ICdwaW5nJykge1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKHNzZS5ldmVudCA9PT0gJ2Vycm9yJykge1xuICAgICAgICAgICAgdGhyb3cgQVBJRXJyb3IuZ2VuZXJhdGUoXG4gICAgICAgICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgYFNTRSBFcnJvcjogJHtzc2UuZGF0YX1gLFxuICAgICAgICAgICAgICBzc2UuZGF0YSxcbiAgICAgICAgICAgICAgY3JlYXRlUmVzcG9uc2VIZWFkZXJzKHJlc3BvbnNlLmhlYWRlcnMpLFxuICAgICAgICAgICAgKTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZG9uZSA9IHRydWU7XG4gICAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIC8vIElmIHRoZSB1c2VyIGNhbGxzIGBzdHJlYW0uY29udHJvbGxlci5hYm9ydCgpYCwgd2Ugc2hvdWxkIGV4aXQgd2l0aG91dCB0aHJvd2luZy5cbiAgICAgICAgaWYgKGUgaW5zdGFuY2VvZiBFcnJvciAmJiBlLm5hbWUgPT09ICdBYm9ydEVycm9yJykgcmV0dXJuO1xuICAgICAgICB0aHJvdyBlO1xuICAgICAgfSBmaW5hbGx5IHtcbiAgICAgICAgLy8gSWYgdGhlIHVzZXIgYGJyZWFrYHMsIGFib3J0IHRoZSBvbmdvaW5nIHJlcXVlc3QuXG4gICAgICAgIGlmICghZG9uZSkgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgU3RyZWFtKGl0ZXJhdG9yLCBjb250cm9sbGVyKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZW5lcmF0ZXMgYSBTdHJlYW0gZnJvbSBhIG5ld2xpbmUtc2VwYXJhdGVkIFJlYWRhYmxlU3RyZWFtXG4gICAqIHdoZXJlIGVhY2ggaXRlbSBpcyBhIEpTT04gdmFsdWUuXG4gICAqL1xuICBzdGF0aWMgZnJvbVJlYWRhYmxlU3RyZWFtPEl0ZW0+KHJlYWRhYmxlU3RyZWFtOiBSZWFkYWJsZVN0cmVhbSwgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyKTogU3RyZWFtPEl0ZW0+IHtcbiAgICBsZXQgY29uc3VtZWQgPSBmYWxzZTtcblxuICAgIGFzeW5jIGZ1bmN0aW9uKiBpdGVyTGluZXMoKTogQXN5bmNHZW5lcmF0b3I8c3RyaW5nLCB2b2lkLCB1bmtub3duPiB7XG4gICAgICBjb25zdCBsaW5lRGVjb2RlciA9IG5ldyBMaW5lRGVjb2RlcigpO1xuXG4gICAgICBjb25zdCBpdGVyID0gUmVhZGFibGVTdHJlYW1Ub0FzeW5jSXRlcmFibGU8Qnl0ZXM+KHJlYWRhYmxlU3RyZWFtKTtcbiAgICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgaXRlcikge1xuICAgICAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZURlY29kZXIuZGVjb2RlKGNodW5rKSkge1xuICAgICAgICAgIHlpZWxkIGxpbmU7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVEZWNvZGVyLmZsdXNoKCkpIHtcbiAgICAgICAgeWllbGQgbGluZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBhc3luYyBmdW5jdGlvbiogaXRlcmF0b3IoKTogQXN5bmNJdGVyYXRvcjxJdGVtLCBhbnksIHVuZGVmaW5lZD4ge1xuICAgICAgaWYgKGNvbnN1bWVkKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignQ2Fubm90IGl0ZXJhdGUgb3ZlciBhIGNvbnN1bWVkIHN0cmVhbSwgdXNlIGAudGVlKClgIHRvIHNwbGl0IHRoZSBzdHJlYW0uJyk7XG4gICAgICB9XG4gICAgICBjb25zdW1lZCA9IHRydWU7XG4gICAgICBsZXQgZG9uZSA9IGZhbHNlO1xuICAgICAgdHJ5IHtcbiAgICAgICAgZm9yIGF3YWl0IChjb25zdCBsaW5lIG9mIGl0ZXJMaW5lcygpKSB7XG4gICAgICAgICAgaWYgKGRvbmUpIGNvbnRpbnVlO1xuICAgICAgICAgIGlmIChsaW5lKSB5aWVsZCBKU09OLnBhcnNlKGxpbmUpO1xuICAgICAgICB9XG4gICAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgfSBjYXRjaCAoZSkge1xuICAgICAgICAvLyBJZiB0aGUgdXNlciBjYWxscyBgc3RyZWFtLmNvbnRyb2xsZXIuYWJvcnQoKWAsIHdlIHNob3VsZCBleGl0IHdpdGhvdXQgdGhyb3dpbmcuXG4gICAgICAgIGlmIChlIGluc3RhbmNlb2YgRXJyb3IgJiYgZS5uYW1lID09PSAnQWJvcnRFcnJvcicpIHJldHVybjtcbiAgICAgICAgdGhyb3cgZTtcbiAgICAgIH0gZmluYWxseSB7XG4gICAgICAgIC8vIElmIHRoZSB1c2VyIGBicmVha2BzLCBhYm9ydCB0aGUgb25nb2luZyByZXF1ZXN0LlxuICAgICAgICBpZiAoIWRvbmUpIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IFN0cmVhbShpdGVyYXRvciwgY29udHJvbGxlcik7XG4gIH1cblxuICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk6IEFzeW5jSXRlcmF0b3I8SXRlbT4ge1xuICAgIHJldHVybiB0aGlzLml0ZXJhdG9yKCk7XG4gIH1cblxuICAvKipcbiAgICogU3BsaXRzIHRoZSBzdHJlYW0gaW50byB0d28gc3RyZWFtcyB3aGljaCBjYW4gYmVcbiAgICogaW5kZXBlbmRlbnRseSByZWFkIGZyb20gYXQgZGlmZmVyZW50IHNwZWVkcy5cbiAgICovXG4gIHRlZSgpOiBbU3RyZWFtPEl0ZW0+LCBTdHJlYW08SXRlbT5dIHtcbiAgICBjb25zdCBsZWZ0OiBBcnJheTxQcm9taXNlPEl0ZXJhdG9yUmVzdWx0PEl0ZW0+Pj4gPSBbXTtcbiAgICBjb25zdCByaWdodDogQXJyYXk8UHJvbWlzZTxJdGVyYXRvclJlc3VsdDxJdGVtPj4+ID0gW107XG4gICAgY29uc3QgaXRlcmF0b3IgPSB0aGlzLml0ZXJhdG9yKCk7XG5cbiAgICBjb25zdCB0ZWVJdGVyYXRvciA9IChxdWV1ZTogQXJyYXk8UHJvbWlzZTxJdGVyYXRvclJlc3VsdDxJdGVtPj4+KTogQXN5bmNJdGVyYXRvcjxJdGVtPiA9PiB7XG4gICAgICByZXR1cm4ge1xuICAgICAgICBuZXh0OiAoKSA9PiB7XG4gICAgICAgICAgaWYgKHF1ZXVlLmxlbmd0aCA9PT0gMCkge1xuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gaXRlcmF0b3IubmV4dCgpO1xuICAgICAgICAgICAgbGVmdC5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgICByaWdodC5wdXNoKHJlc3VsdCk7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBxdWV1ZS5zaGlmdCgpITtcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfTtcblxuICAgIHJldHVybiBbXG4gICAgICBuZXcgU3RyZWFtKCgpID0+IHRlZUl0ZXJhdG9yKGxlZnQpLCB0aGlzLmNvbnRyb2xsZXIpLFxuICAgICAgbmV3IFN0cmVhbSgoKSA9PiB0ZWVJdGVyYXRvcihyaWdodCksIHRoaXMuY29udHJvbGxlciksXG4gICAgXTtcbiAgfVxuXG4gIC8qKlxuICAgKiBDb252ZXJ0cyB0aGlzIHN0cmVhbSB0byBhIG5ld2xpbmUtc2VwYXJhdGVkIFJlYWRhYmxlU3RyZWFtIG9mXG4gICAqIEpTT04gc3RyaW5naWZpZWQgdmFsdWVzIGluIHRoZSBzdHJlYW1cbiAgICogd2hpY2ggY2FuIGJlIHR1cm5lZCBiYWNrIGludG8gYSBTdHJlYW0gd2l0aCBgU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbSgpYC5cbiAgICovXG4gIHRvUmVhZGFibGVTdHJlYW0oKTogUmVhZGFibGVTdHJlYW0ge1xuICAgIGNvbnN0IHNlbGYgPSB0aGlzO1xuICAgIGxldCBpdGVyOiBBc3luY0l0ZXJhdG9yPEl0ZW0+O1xuICAgIGNvbnN0IGVuY29kZXIgPSBuZXcgVGV4dEVuY29kZXIoKTtcblxuICAgIHJldHVybiBuZXcgUmVhZGFibGVTdHJlYW0oe1xuICAgICAgYXN5bmMgc3RhcnQoKSB7XG4gICAgICAgIGl0ZXIgPSBzZWxmW1N5bWJvbC5hc3luY0l0ZXJhdG9yXSgpO1xuICAgICAgfSxcbiAgICAgIGFzeW5jIHB1bGwoY3RybDogYW55KSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgeyB2YWx1ZSwgZG9uZSB9ID0gYXdhaXQgaXRlci5uZXh0KCk7XG4gICAgICAgICAgaWYgKGRvbmUpIHJldHVybiBjdHJsLmNsb3NlKCk7XG5cbiAgICAgICAgICBjb25zdCBieXRlcyA9IGVuY29kZXIuZW5jb2RlKEpTT04uc3RyaW5naWZ5KHZhbHVlKSArICdcXG4nKTtcblxuICAgICAgICAgIGN0cmwuZW5xdWV1ZShieXRlcyk7XG4gICAgICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgICAgIGN0cmwuZXJyb3IoZXJyKTtcbiAgICAgICAgfVxuICAgICAgfSxcbiAgICAgIGFzeW5jIGNhbmNlbCgpIHtcbiAgICAgICAgYXdhaXQgaXRlci5yZXR1cm4/LigpO1xuICAgICAgfSxcbiAgICB9KTtcbiAgfVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24qIF9pdGVyU1NFTWVzc2FnZXMoXG4gIHJlc3BvbnNlOiBSZXNwb25zZSxcbiAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyLFxuKTogQXN5bmNHZW5lcmF0b3I8U2VydmVyU2VudEV2ZW50LCB2b2lkLCB1bmtub3duPiB7XG4gIGlmICghcmVzcG9uc2UuYm9keSkge1xuICAgIGNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYEF0dGVtcHRlZCB0byBpdGVyYXRlIG92ZXIgYSByZXNwb25zZSB3aXRoIG5vIGJvZHlgKTtcbiAgfVxuXG4gIGNvbnN0IHNzZURlY29kZXIgPSBuZXcgU1NFRGVjb2RlcigpO1xuICBjb25zdCBsaW5lRGVjb2RlciA9IG5ldyBMaW5lRGVjb2RlcigpO1xuXG4gIGNvbnN0IGl0ZXIgPSBSZWFkYWJsZVN0cmVhbVRvQXN5bmNJdGVyYWJsZTxCeXRlcz4ocmVzcG9uc2UuYm9keSk7XG4gIGZvciBhd2FpdCAoY29uc3Qgc3NlQ2h1bmsgb2YgaXRlclNTRUNodW5rcyhpdGVyKSkge1xuICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lRGVjb2Rlci5kZWNvZGUoc3NlQ2h1bmspKSB7XG4gICAgICBjb25zdCBzc2UgPSBzc2VEZWNvZGVyLmRlY29kZShsaW5lKTtcbiAgICAgIGlmIChzc2UpIHlpZWxkIHNzZTtcbiAgICB9XG4gIH1cblxuICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZURlY29kZXIuZmx1c2goKSkge1xuICAgIGNvbnN0IHNzZSA9IHNzZURlY29kZXIuZGVjb2RlKGxpbmUpO1xuICAgIGlmIChzc2UpIHlpZWxkIHNzZTtcbiAgfVxufVxuXG4vKipcbiAqIEdpdmVuIGFuIGFzeW5jIGl0ZXJhYmxlIGl0ZXJhdG9yLCBpdGVyYXRlcyBvdmVyIGl0IGFuZCB5aWVsZHMgZnVsbFxuICogU1NFIGNodW5rcywgaS5lLiB5aWVsZHMgd2hlbiBhIGRvdWJsZSBuZXctbGluZSBpcyBlbmNvdW50ZXJlZC5cbiAqL1xuYXN5bmMgZnVuY3Rpb24qIGl0ZXJTU0VDaHVua3MoaXRlcmF0b3I6IEFzeW5jSXRlcmFibGVJdGVyYXRvcjxCeXRlcz4pOiBBc3luY0dlbmVyYXRvcjxVaW50OEFycmF5PiB7XG4gIGxldCBkYXRhID0gbmV3IFVpbnQ4QXJyYXkoKTtcblxuICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIGl0ZXJhdG9yKSB7XG4gICAgaWYgKGNodW5rID09IG51bGwpIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IGJpbmFyeUNodW5rID1cbiAgICAgIGNodW5rIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgPyBuZXcgVWludDhBcnJheShjaHVuaylcbiAgICAgIDogdHlwZW9mIGNodW5rID09PSAnc3RyaW5nJyA/IG5ldyBUZXh0RW5jb2RlcigpLmVuY29kZShjaHVuaylcbiAgICAgIDogY2h1bms7XG5cbiAgICBsZXQgbmV3RGF0YSA9IG5ldyBVaW50OEFycmF5KGRhdGEubGVuZ3RoICsgYmluYXJ5Q2h1bmsubGVuZ3RoKTtcbiAgICBuZXdEYXRhLnNldChkYXRhKTtcbiAgICBuZXdEYXRhLnNldChiaW5hcnlDaHVuaywgZGF0YS5sZW5ndGgpO1xuICAgIGRhdGEgPSBuZXdEYXRhO1xuXG4gICAgbGV0IHBhdHRlcm5JbmRleDtcbiAgICB3aGlsZSAoKHBhdHRlcm5JbmRleCA9IGZpbmREb3VibGVOZXdsaW5lSW5kZXgoZGF0YSkpICE9PSAtMSkge1xuICAgICAgeWllbGQgZGF0YS5zbGljZSgwLCBwYXR0ZXJuSW5kZXgpO1xuICAgICAgZGF0YSA9IGRhdGEuc2xpY2UocGF0dGVybkluZGV4KTtcbiAgICB9XG4gIH1cblxuICBpZiAoZGF0YS5sZW5ndGggPiAwKSB7XG4gICAgeWllbGQgZGF0YTtcbiAgfVxufVxuXG5mdW5jdGlvbiBmaW5kRG91YmxlTmV3bGluZUluZGV4KGJ1ZmZlcjogVWludDhBcnJheSk6IG51bWJlciB7XG4gIC8vIFRoaXMgZnVuY3Rpb24gc2VhcmNoZXMgdGhlIGJ1ZmZlciBmb3IgdGhlIGVuZCBwYXR0ZXJucyAoXFxyXFxyLCBcXG5cXG4sIFxcclxcblxcclxcbilcbiAgLy8gYW5kIHJldHVybnMgdGhlIGluZGV4IHJpZ2h0IGFmdGVyIHRoZSBmaXJzdCBvY2N1cnJlbmNlIG9mIGFueSBwYXR0ZXJuLFxuICAvLyBvciAtMSBpZiBub25lIG9mIHRoZSBwYXR0ZXJucyBhcmUgZm91bmQuXG4gIGNvbnN0IG5ld2xpbmUgPSAweDBhOyAvLyBcXG5cbiAgY29uc3QgY2FycmlhZ2UgPSAweDBkOyAvLyBcXHJcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IGJ1ZmZlci5sZW5ndGggLSAyOyBpKyspIHtcbiAgICBpZiAoYnVmZmVyW2ldID09PSBuZXdsaW5lICYmIGJ1ZmZlcltpICsgMV0gPT09IG5ld2xpbmUpIHtcbiAgICAgIC8vIFxcblxcblxuICAgICAgcmV0dXJuIGkgKyAyO1xuICAgIH1cbiAgICBpZiAoYnVmZmVyW2ldID09PSBjYXJyaWFnZSAmJiBidWZmZXJbaSArIDFdID09PSBjYXJyaWFnZSkge1xuICAgICAgLy8gXFxyXFxyXG4gICAgICByZXR1cm4gaSArIDI7XG4gICAgfVxuICAgIGlmIChcbiAgICAgIGJ1ZmZlcltpXSA9PT0gY2FycmlhZ2UgJiZcbiAgICAgIGJ1ZmZlcltpICsgMV0gPT09IG5ld2xpbmUgJiZcbiAgICAgIGkgKyAzIDwgYnVmZmVyLmxlbmd0aCAmJlxuICAgICAgYnVmZmVyW2kgKyAyXSA9PT0gY2FycmlhZ2UgJiZcbiAgICAgIGJ1ZmZlcltpICsgM10gPT09IG5ld2xpbmVcbiAgICApIHtcbiAgICAgIC8vIFxcclxcblxcclxcblxuICAgICAgcmV0dXJuIGkgKyA0O1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiAtMTtcbn1cblxuY2xhc3MgU1NFRGVjb2RlciB7XG4gIHByaXZhdGUgZGF0YTogc3RyaW5nW107XG4gIHByaXZhdGUgZXZlbnQ6IHN0cmluZyB8IG51bGw7XG4gIHByaXZhdGUgY2h1bmtzOiBzdHJpbmdbXTtcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICB0aGlzLmV2ZW50ID0gbnVsbDtcbiAgICB0aGlzLmRhdGEgPSBbXTtcbiAgICB0aGlzLmNodW5rcyA9IFtdO1xuICB9XG5cbiAgZGVjb2RlKGxpbmU6IHN0cmluZykge1xuICAgIGlmIChsaW5lLmVuZHNXaXRoKCdcXHInKSkge1xuICAgICAgbGluZSA9IGxpbmUuc3Vic3RyaW5nKDAsIGxpbmUubGVuZ3RoIC0gMSk7XG4gICAgfVxuXG4gICAgaWYgKCFsaW5lKSB7XG4gICAgICAvLyBlbXB0eSBsaW5lIGFuZCB3ZSBkaWRuJ3QgcHJldmlvdXNseSBlbmNvdW50ZXIgYW55IG1lc3NhZ2VzXG4gICAgICBpZiAoIXRoaXMuZXZlbnQgJiYgIXRoaXMuZGF0YS5sZW5ndGgpIHJldHVybiBudWxsO1xuXG4gICAgICBjb25zdCBzc2U6IFNlcnZlclNlbnRFdmVudCA9IHtcbiAgICAgICAgZXZlbnQ6IHRoaXMuZXZlbnQsXG4gICAgICAgIGRhdGE6IHRoaXMuZGF0YS5qb2luKCdcXG4nKSxcbiAgICAgICAgcmF3OiB0aGlzLmNodW5rcyxcbiAgICAgIH07XG5cbiAgICAgIHRoaXMuZXZlbnQgPSBudWxsO1xuICAgICAgdGhpcy5kYXRhID0gW107XG4gICAgICB0aGlzLmNodW5rcyA9IFtdO1xuXG4gICAgICByZXR1cm4gc3NlO1xuICAgIH1cblxuICAgIHRoaXMuY2h1bmtzLnB1c2gobGluZSk7XG5cbiAgICBpZiAobGluZS5zdGFydHNXaXRoKCc6JykpIHtcbiAgICAgIHJldHVybiBudWxsO1xuICAgIH1cblxuICAgIGxldCBbZmllbGRuYW1lLCBfLCB2YWx1ZV0gPSBwYXJ0aXRpb24obGluZSwgJzonKTtcblxuICAgIGlmICh2YWx1ZS5zdGFydHNXaXRoKCcgJykpIHtcbiAgICAgIHZhbHVlID0gdmFsdWUuc3Vic3RyaW5nKDEpO1xuICAgIH1cblxuICAgIGlmIChmaWVsZG5hbWUgPT09ICdldmVudCcpIHtcbiAgICAgIHRoaXMuZXZlbnQgPSB2YWx1ZTtcbiAgICB9IGVsc2UgaWYgKGZpZWxkbmFtZSA9PT0gJ2RhdGEnKSB7XG4gICAgICB0aGlzLmRhdGEucHVzaCh2YWx1ZSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG51bGw7XG4gIH1cbn1cblxuLyoqIFRoaXMgaXMgYW4gaW50ZXJuYWwgaGVscGVyIGZ1bmN0aW9uIHRoYXQncyBqdXN0IHVzZWQgZm9yIHRlc3RpbmcgKi9cbmV4cG9ydCBmdW5jdGlvbiBfZGVjb2RlQ2h1bmtzKGNodW5rczogc3RyaW5nW10pOiBzdHJpbmdbXSB7XG4gIGNvbnN0IGRlY29kZXIgPSBuZXcgTGluZURlY29kZXIoKTtcbiAgY29uc3QgbGluZXM6IHN0cmluZ1tdID0gW107XG4gIGZvciAoY29uc3QgY2h1bmsgb2YgY2h1bmtzKSB7XG4gICAgbGluZXMucHVzaCguLi5kZWNvZGVyLmRlY29kZShjaHVuaykpO1xuICB9XG5cbiAgcmV0dXJuIGxpbmVzO1xufVxuXG5mdW5jdGlvbiBwYXJ0aXRpb24oc3RyOiBzdHJpbmcsIGRlbGltaXRlcjogc3RyaW5nKTogW3N0cmluZywgc3RyaW5nLCBzdHJpbmddIHtcbiAgY29uc3QgaW5kZXggPSBzdHIuaW5kZXhPZihkZWxpbWl0ZXIpO1xuICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgcmV0dXJuIFtzdHIuc3Vic3RyaW5nKDAsIGluZGV4KSwgZGVsaW1pdGVyLCBzdHIuc3Vic3RyaW5nKGluZGV4ICsgZGVsaW1pdGVyLmxlbmd0aCldO1xuICB9XG5cbiAgcmV0dXJuIFtzdHIsICcnLCAnJ107XG59XG4iLCAiaW1wb3J0IHsgdHlwZSBSZXF1ZXN0T3B0aW9ucyB9IGZyb20gXCIuL2NvcmUuanNcIjtcbmltcG9ydCB7XG4gIEZvcm1EYXRhLFxuICBGaWxlLFxuICB0eXBlIEJsb2IsXG4gIHR5cGUgRmlsZVByb3BlcnR5QmFnLFxuICBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyxcbiAgdHlwZSBGc1JlYWRTdHJlYW0sXG4gIGlzRnNSZWFkU3RyZWFtLFxufSBmcm9tIFwiLi9fc2hpbXMvaW5kZXguanNcIjtcbmltcG9ydCB7IE11bHRpcGFydEJvZHkgfSBmcm9tIFwiLi9fc2hpbXMvTXVsdGlwYXJ0Qm9keS5qc1wiO1xuZXhwb3J0IHsgZmlsZUZyb21QYXRoIH0gZnJvbSBcIi4vX3NoaW1zL2luZGV4LmpzXCI7XG5cbnR5cGUgQmxvYkxpa2VQYXJ0ID0gc3RyaW5nIHwgQXJyYXlCdWZmZXIgfCBBcnJheUJ1ZmZlclZpZXcgfCBCbG9iTGlrZSB8IFVpbnQ4QXJyYXkgfCBEYXRhVmlldztcbmV4cG9ydCB0eXBlIEJsb2JQYXJ0ID0gc3RyaW5nIHwgQXJyYXlCdWZmZXIgfCBBcnJheUJ1ZmZlclZpZXcgfCBCbG9iIHwgVWludDhBcnJheSB8IERhdGFWaWV3O1xuXG4vKipcbiAqIFR5cGljYWxseSwgdGhpcyBpcyBhIG5hdGl2ZSBcIkZpbGVcIiBjbGFzcy5cbiAqXG4gKiBXZSBwcm92aWRlIHRoZSB7QGxpbmsgdG9GaWxlfSB1dGlsaXR5IHRvIGNvbnZlcnQgYSB2YXJpZXR5IG9mIG9iamVjdHNcbiAqIGludG8gdGhlIEZpbGUgY2xhc3MuXG4gKlxuICogRm9yIGNvbnZlbmllbmNlLCB5b3UgY2FuIGFsc28gcGFzcyBhIGZldGNoIFJlc3BvbnNlLCBvciBpbiBOb2RlLFxuICogdGhlIHJlc3VsdCBvZiBmcy5jcmVhdGVSZWFkU3RyZWFtKCkuXG4gKi9cbmV4cG9ydCB0eXBlIFVwbG9hZGFibGUgPSBGaWxlTGlrZSB8IFJlc3BvbnNlTGlrZSB8IEZzUmVhZFN0cmVhbTtcblxuLyoqXG4gKiBJbnRlbmRlZCB0byBtYXRjaCB3ZWIuQmxvYiwgbm9kZS5CbG9iLCBub2RlLWZldGNoLkJsb2IsIGV0Yy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCbG9iTGlrZSB7XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0Jsb2Ivc2l6ZSkgKi9cbiAgcmVhZG9ubHkgc2l6ZTogbnVtYmVyO1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9CbG9iL3R5cGUpICovXG4gIHJlYWRvbmx5IHR5cGU6IHN0cmluZztcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYi90ZXh0KSAqL1xuICB0ZXh0KCk6IFByb21pc2U8c3RyaW5nPjtcbiAgLyoqIFtNRE4gUmVmZXJlbmNlXShodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9kb2NzL1dlYi9BUEkvQmxvYi9zbGljZSkgKi9cbiAgc2xpY2Uoc3RhcnQ/OiBudW1iZXIsIGVuZD86IG51bWJlcik6IEJsb2JMaWtlO1xuICAvLyB1bmZvcnR1bmF0ZWx5IEB0eXBlcy9ub2RlLWZldGNoQF4yLjYuNCBkb2Vzbid0IHR5cGUgdGhlIGFycmF5QnVmZmVyIG1ldGhvZFxufVxuXG4vKipcbiAqIEludGVuZGVkIHRvIG1hdGNoIHdlYi5GaWxlLCBub2RlLkZpbGUsIG5vZGUtZmV0Y2guRmlsZSwgZXRjLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEZpbGVMaWtlIGV4dGVuZHMgQmxvYkxpa2Uge1xuICAvKiogW01ETiBSZWZlcmVuY2VdKGh0dHBzOi8vZGV2ZWxvcGVyLm1vemlsbGEub3JnL2RvY3MvV2ViL0FQSS9GaWxlL2xhc3RNb2RpZmllZCkgKi9cbiAgcmVhZG9ubHkgbGFzdE1vZGlmaWVkOiBudW1iZXI7XG4gIC8qKiBbTUROIFJlZmVyZW5jZV0oaHR0cHM6Ly9kZXZlbG9wZXIubW96aWxsYS5vcmcvZG9jcy9XZWIvQVBJL0ZpbGUvbmFtZSkgKi9cbiAgcmVhZG9ubHkgbmFtZTogc3RyaW5nO1xufVxuXG4vKipcbiAqIEludGVuZGVkIHRvIG1hdGNoIHdlYi5SZXNwb25zZSwgbm9kZS5SZXNwb25zZSwgbm9kZS1mZXRjaC5SZXNwb25zZSwgZXRjLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFJlc3BvbnNlTGlrZSB7XG4gIHVybDogc3RyaW5nO1xuICBibG9iKCk6IFByb21pc2U8QmxvYkxpa2U+O1xufVxuXG5leHBvcnQgY29uc3QgaXNSZXNwb25zZUxpa2UgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIFJlc3BvbnNlTGlrZSA9PlxuICB2YWx1ZSAhPSBudWxsICYmXG4gIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgdHlwZW9mIHZhbHVlLnVybCA9PT0gJ3N0cmluZycgJiZcbiAgdHlwZW9mIHZhbHVlLmJsb2IgPT09ICdmdW5jdGlvbic7XG5cbmV4cG9ydCBjb25zdCBpc0ZpbGVMaWtlID0gKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBGaWxlTGlrZSA9PlxuICB2YWx1ZSAhPSBudWxsICYmXG4gIHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcgJiZcbiAgdHlwZW9mIHZhbHVlLm5hbWUgPT09ICdzdHJpbmcnICYmXG4gIHR5cGVvZiB2YWx1ZS5sYXN0TW9kaWZpZWQgPT09ICdudW1iZXInICYmXG4gIGlzQmxvYkxpa2UodmFsdWUpO1xuXG4vKipcbiAqIFRoZSBCbG9iTGlrZSB0eXBlIG9taXRzIGFycmF5QnVmZmVyKCkgYmVjYXVzZSBAdHlwZXMvbm9kZS1mZXRjaEBeMi42LjQgbGFja3MgaXQ7IGJ1dCB0aGlzIGNoZWNrXG4gKiBhZGRzIHRoZSBhcnJheUJ1ZmZlcigpIG1ldGhvZCB0eXBlIGJlY2F1c2UgaXQgaXMgYXZhaWxhYmxlIGFuZCB1c2VkIGF0IHJ1bnRpbWVcbiAqL1xuZXhwb3J0IGNvbnN0IGlzQmxvYkxpa2UgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIEJsb2JMaWtlICYgeyBhcnJheUJ1ZmZlcigpOiBQcm9taXNlPEFycmF5QnVmZmVyPiB9ID0+XG4gIHZhbHVlICE9IG51bGwgJiZcbiAgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJlxuICB0eXBlb2YgdmFsdWUuc2l6ZSA9PT0gJ251bWJlcicgJiZcbiAgdHlwZW9mIHZhbHVlLnR5cGUgPT09ICdzdHJpbmcnICYmXG4gIHR5cGVvZiB2YWx1ZS50ZXh0ID09PSAnZnVuY3Rpb24nICYmXG4gIHR5cGVvZiB2YWx1ZS5zbGljZSA9PT0gJ2Z1bmN0aW9uJyAmJlxuICB0eXBlb2YgdmFsdWUuYXJyYXlCdWZmZXIgPT09ICdmdW5jdGlvbic7XG5cbmV4cG9ydCBjb25zdCBpc1VwbG9hZGFibGUgPSAodmFsdWU6IGFueSk6IHZhbHVlIGlzIFVwbG9hZGFibGUgPT4ge1xuICByZXR1cm4gaXNGaWxlTGlrZSh2YWx1ZSkgfHwgaXNSZXNwb25zZUxpa2UodmFsdWUpIHx8IGlzRnNSZWFkU3RyZWFtKHZhbHVlKTtcbn07XG5cbmV4cG9ydCB0eXBlIFRvRmlsZUlucHV0ID0gVXBsb2FkYWJsZSB8IEV4Y2x1ZGU8QmxvYkxpa2VQYXJ0LCBzdHJpbmc+IHwgQXN5bmNJdGVyYWJsZTxCbG9iTGlrZVBhcnQ+O1xuXG4vKipcbiAqIEhlbHBlciBmb3IgY3JlYXRpbmcgYSB7QGxpbmsgRmlsZX0gdG8gcGFzcyB0byBhbiBTREsgdXBsb2FkIG1ldGhvZCBmcm9tIGEgdmFyaWV0eSBvZiBkaWZmZXJlbnQgZGF0YSBmb3JtYXRzXG4gKiBAcGFyYW0gdmFsdWUgdGhlIHJhdyBjb250ZW50IG9mIHRoZSBmaWxlLiAgQ2FuIGJlIGFuIHtAbGluayBVcGxvYWRhYmxlfSwge0BsaW5rIEJsb2JMaWtlUGFydH0sIG9yIHtAbGluayBBc3luY0l0ZXJhYmxlfSBvZiB7QGxpbmsgQmxvYkxpa2VQYXJ0fXNcbiAqIEBwYXJhbSB7c3RyaW5nPX0gbmFtZSB0aGUgbmFtZSBvZiB0aGUgZmlsZS4gSWYgb21pdHRlZCwgdG9GaWxlIHdpbGwgdHJ5IHRvIGRldGVybWluZSBhIGZpbGUgbmFtZSBmcm9tIGJpdHMgaWYgcG9zc2libGVcbiAqIEBwYXJhbSB7T2JqZWN0PX0gb3B0aW9ucyBhZGRpdGlvbmFsIHByb3BlcnRpZXNcbiAqIEBwYXJhbSB7c3RyaW5nPX0gb3B0aW9ucy50eXBlIHRoZSBNSU1FIHR5cGUgb2YgdGhlIGNvbnRlbnRcbiAqIEBwYXJhbSB7bnVtYmVyPX0gb3B0aW9ucy5sYXN0TW9kaWZpZWQgdGhlIGxhc3QgbW9kaWZpZWQgdGltZXN0YW1wXG4gKiBAcmV0dXJucyBhIHtAbGluayBGaWxlfSB3aXRoIHRoZSBnaXZlbiBwcm9wZXJ0aWVzXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiB0b0ZpbGUoXG4gIHZhbHVlOiBUb0ZpbGVJbnB1dCB8IFByb21pc2VMaWtlPFRvRmlsZUlucHV0PixcbiAgbmFtZT86IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQsXG4gIG9wdGlvbnM/OiBGaWxlUHJvcGVydHlCYWcgfCB1bmRlZmluZWQsXG4pOiBQcm9taXNlPEZpbGVMaWtlPiB7XG4gIC8vIElmIGl0J3MgYSBwcm9taXNlLCByZXNvbHZlIGl0LlxuICB2YWx1ZSA9IGF3YWl0IHZhbHVlO1xuXG4gIC8vIElmIHdlJ3ZlIGJlZW4gZ2l2ZW4gYSBgRmlsZWAgd2UgZG9uJ3QgbmVlZCB0byBkbyBhbnl0aGluZ1xuICBpZiAoaXNGaWxlTGlrZSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWU7XG4gIH1cblxuICBpZiAoaXNSZXNwb25zZUxpa2UodmFsdWUpKSB7XG4gICAgY29uc3QgYmxvYiA9IGF3YWl0IHZhbHVlLmJsb2IoKTtcbiAgICBuYW1lIHx8PSBuZXcgVVJMKHZhbHVlLnVybCkucGF0aG5hbWUuc3BsaXQoL1tcXFxcL10vKS5wb3AoKSA/PyAndW5rbm93bl9maWxlJztcblxuICAgIC8vIHdlIG5lZWQgdG8gY29udmVydCB0aGUgYEJsb2JgIGludG8gYW4gYXJyYXkgYnVmZmVyIGJlY2F1c2UgdGhlIGBCbG9iYCBjbGFzc1xuICAgIC8vIHRoYXQgYG5vZGUtZmV0Y2hgIGRlZmluZXMgaXMgaW5jb21wYXRpYmxlIHdpdGggdGhlIHdlYiBzdGFuZGFyZCB3aGljaCByZXN1bHRzXG4gICAgLy8gaW4gYG5ldyBGaWxlYCBpbnRlcnByZXRpbmcgaXQgYXMgYSBzdHJpbmcgaW5zdGVhZCBvZiBiaW5hcnkgZGF0YS5cbiAgICBjb25zdCBkYXRhID0gaXNCbG9iTGlrZShibG9iKSA/IFsoYXdhaXQgYmxvYi5hcnJheUJ1ZmZlcigpKSBhcyBhbnldIDogW2Jsb2JdO1xuXG4gICAgcmV0dXJuIG5ldyBGaWxlKGRhdGEsIG5hbWUsIG9wdGlvbnMpO1xuICB9XG5cbiAgY29uc3QgYml0cyA9IGF3YWl0IGdldEJ5dGVzKHZhbHVlKTtcblxuICBuYW1lIHx8PSBnZXROYW1lKHZhbHVlKSA/PyAndW5rbm93bl9maWxlJztcblxuICBpZiAoIW9wdGlvbnM/LnR5cGUpIHtcbiAgICBjb25zdCB0eXBlID0gKGJpdHNbMF0gYXMgYW55KT8udHlwZTtcbiAgICBpZiAodHlwZW9mIHR5cGUgPT09ICdzdHJpbmcnKSB7XG4gICAgICBvcHRpb25zID0geyAuLi5vcHRpb25zLCB0eXBlIH07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG5ldyBGaWxlKGJpdHMsIG5hbWUsIG9wdGlvbnMpO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRCeXRlcyh2YWx1ZTogVG9GaWxlSW5wdXQpOiBQcm9taXNlPEFycmF5PEJsb2JQYXJ0Pj4ge1xuICBsZXQgcGFydHM6IEFycmF5PEJsb2JQYXJ0PiA9IFtdO1xuICBpZiAoXG4gICAgdHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fFxuICAgIEFycmF5QnVmZmVyLmlzVmlldyh2YWx1ZSkgfHwgLy8gaW5jbHVkZXMgVWludDhBcnJheSwgQnVmZmVyLCBldGMuXG4gICAgdmFsdWUgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlclxuICApIHtcbiAgICBwYXJ0cy5wdXNoKHZhbHVlKTtcbiAgfSBlbHNlIGlmIChpc0Jsb2JMaWtlKHZhbHVlKSkge1xuICAgIHBhcnRzLnB1c2goYXdhaXQgdmFsdWUuYXJyYXlCdWZmZXIoKSk7XG4gIH0gZWxzZSBpZiAoXG4gICAgaXNBc3luY0l0ZXJhYmxlSXRlcmF0b3IodmFsdWUpIC8vIGluY2x1ZGVzIFJlYWRhYmxlLCBSZWFkYWJsZVN0cmVhbSwgZXRjLlxuICApIHtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGNodW5rIG9mIHZhbHVlKSB7XG4gICAgICBwYXJ0cy5wdXNoKGNodW5rIGFzIEJsb2JQYXJ0KTsgLy8gVE9ETywgY29uc2lkZXIgdmFsaWRhdGluZz9cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKFxuICAgICAgYFVuZXhwZWN0ZWQgZGF0YSB0eXBlOiAke3R5cGVvZiB2YWx1ZX07IGNvbnN0cnVjdG9yOiAke3ZhbHVlPy5jb25zdHJ1Y3RvclxuICAgICAgICA/Lm5hbWV9OyBwcm9wczogJHtwcm9wc0ZvckVycm9yKHZhbHVlKX1gLFxuICAgICk7XG4gIH1cblxuICByZXR1cm4gcGFydHM7XG59XG5cbmZ1bmN0aW9uIHByb3BzRm9yRXJyb3IodmFsdWU6IGFueSk6IHN0cmluZyB7XG4gIGNvbnN0IHByb3BzID0gT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXModmFsdWUpO1xuICByZXR1cm4gYFske3Byb3BzLm1hcCgocCkgPT4gYFwiJHtwfVwiYCkuam9pbignLCAnKX1dYDtcbn1cblxuZnVuY3Rpb24gZ2V0TmFtZSh2YWx1ZTogYW55KTogc3RyaW5nIHwgdW5kZWZpbmVkIHtcbiAgcmV0dXJuIChcbiAgICBnZXRTdHJpbmdGcm9tTWF5YmVCdWZmZXIodmFsdWUubmFtZSkgfHxcbiAgICBnZXRTdHJpbmdGcm9tTWF5YmVCdWZmZXIodmFsdWUuZmlsZW5hbWUpIHx8XG4gICAgLy8gRm9yIGZzLlJlYWRTdHJlYW1cbiAgICBnZXRTdHJpbmdGcm9tTWF5YmVCdWZmZXIodmFsdWUucGF0aCk/LnNwbGl0KC9bXFxcXC9dLykucG9wKClcbiAgKTtcbn1cblxuY29uc3QgZ2V0U3RyaW5nRnJvbU1heWJlQnVmZmVyID0gKHg6IHN0cmluZyB8IEJ1ZmZlciB8IHVua25vd24pOiBzdHJpbmcgfCB1bmRlZmluZWQgPT4ge1xuICBpZiAodHlwZW9mIHggPT09ICdzdHJpbmcnKSByZXR1cm4geDtcbiAgaWYgKHR5cGVvZiBCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHggaW5zdGFuY2VvZiBCdWZmZXIpIHJldHVybiBTdHJpbmcoeCk7XG4gIHJldHVybiB1bmRlZmluZWQ7XG59O1xuXG5jb25zdCBpc0FzeW5jSXRlcmFibGVJdGVyYXRvciA9ICh2YWx1ZTogYW55KTogdmFsdWUgaXMgQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPHVua25vd24+ID0+XG4gIHZhbHVlICE9IG51bGwgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB0eXBlb2YgdmFsdWVbU3ltYm9sLmFzeW5jSXRlcmF0b3JdID09PSAnZnVuY3Rpb24nO1xuXG5leHBvcnQgY29uc3QgaXNNdWx0aXBhcnRCb2R5ID0gKGJvZHk6IGFueSk6IGJvZHkgaXMgTXVsdGlwYXJ0Qm9keSA9PlxuICBib2R5ICYmIHR5cGVvZiBib2R5ID09PSAnb2JqZWN0JyAmJiBib2R5LmJvZHkgJiYgYm9keVtTeW1ib2wudG9TdHJpbmdUYWddID09PSAnTXVsdGlwYXJ0Qm9keSc7XG5cbi8qKlxuICogUmV0dXJucyBhIG11bHRpcGFydC9mb3JtLWRhdGEgcmVxdWVzdCBpZiBhbnkgcGFydCBvZiB0aGUgZ2l2ZW4gcmVxdWVzdCBib2R5IGNvbnRhaW5zIGEgRmlsZSAvIEJsb2IgdmFsdWUuXG4gKiBPdGhlcndpc2UgcmV0dXJucyB0aGUgcmVxdWVzdCBhcyBpcy5cbiAqL1xuZXhwb3J0IGNvbnN0IG1heWJlTXVsdGlwYXJ0Rm9ybVJlcXVlc3RPcHRpb25zID0gYXN5bmMgPFQgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oXG4gIG9wdHM6IFJlcXVlc3RPcHRpb25zPFQ+LFxuKTogUHJvbWlzZTxSZXF1ZXN0T3B0aW9uczxUIHwgTXVsdGlwYXJ0Qm9keT4+ID0+IHtcbiAgaWYgKCFoYXNVcGxvYWRhYmxlVmFsdWUob3B0cy5ib2R5KSkgcmV0dXJuIG9wdHM7XG5cbiAgY29uc3QgZm9ybSA9IGF3YWl0IGNyZWF0ZUZvcm0ob3B0cy5ib2R5KTtcbiAgcmV0dXJuIGdldE11bHRpcGFydFJlcXVlc3RPcHRpb25zKGZvcm0sIG9wdHMpO1xufTtcblxuZXhwb3J0IGNvbnN0IG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyA9IGFzeW5jIDxUID0gUmVjb3JkPHN0cmluZywgdW5rbm93bj4+KFxuICBvcHRzOiBSZXF1ZXN0T3B0aW9uczxUPixcbik6IFByb21pc2U8UmVxdWVzdE9wdGlvbnM8VCB8IE11bHRpcGFydEJvZHk+PiA9PiB7XG4gIGNvbnN0IGZvcm0gPSBhd2FpdCBjcmVhdGVGb3JtKG9wdHMuYm9keSk7XG4gIHJldHVybiBnZXRNdWx0aXBhcnRSZXF1ZXN0T3B0aW9ucyhmb3JtLCBvcHRzKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjcmVhdGVGb3JtID0gYXN5bmMgPFQgPSBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPj4oYm9keTogVCB8IHVuZGVmaW5lZCk6IFByb21pc2U8Rm9ybURhdGE+ID0+IHtcbiAgY29uc3QgZm9ybSA9IG5ldyBGb3JtRGF0YSgpO1xuICBhd2FpdCBQcm9taXNlLmFsbChPYmplY3QuZW50cmllcyhib2R5IHx8IHt9KS5tYXAoKFtrZXksIHZhbHVlXSkgPT4gYWRkRm9ybVZhbHVlKGZvcm0sIGtleSwgdmFsdWUpKSk7XG4gIHJldHVybiBmb3JtO1xufTtcblxuY29uc3QgaGFzVXBsb2FkYWJsZVZhbHVlID0gKHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiA9PiB7XG4gIGlmIChpc1VwbG9hZGFibGUodmFsdWUpKSByZXR1cm4gdHJ1ZTtcbiAgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSByZXR1cm4gdmFsdWUuc29tZShoYXNVcGxvYWRhYmxlVmFsdWUpO1xuICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0Jykge1xuICAgIGZvciAoY29uc3QgayBpbiB2YWx1ZSkge1xuICAgICAgaWYgKGhhc1VwbG9hZGFibGVWYWx1ZSgodmFsdWUgYXMgYW55KVtrXSkpIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuICByZXR1cm4gZmFsc2U7XG59O1xuXG5jb25zdCBhZGRGb3JtVmFsdWUgPSBhc3luYyAoZm9ybTogRm9ybURhdGEsIGtleTogc3RyaW5nLCB2YWx1ZTogdW5rbm93bik6IFByb21pc2U8dm9pZD4gPT4ge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkgcmV0dXJuO1xuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICBgUmVjZWl2ZWQgbnVsbCBmb3IgXCIke2tleX1cIjsgdG8gcGFzcyBudWxsIGluIEZvcm1EYXRhLCB5b3UgbXVzdCB1c2UgdGhlIHN0cmluZyAnbnVsbCdgLFxuICAgICk7XG4gIH1cblxuICAvLyBUT0RPOiBtYWtlIG5lc3RlZCBmb3JtYXRzIGNvbmZpZ3VyYWJsZVxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJyB8fCB0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ2Jvb2xlYW4nKSB7XG4gICAgZm9ybS5hcHBlbmQoa2V5LCBTdHJpbmcodmFsdWUpKTtcbiAgfSBlbHNlIGlmIChpc1VwbG9hZGFibGUodmFsdWUpKSB7XG4gICAgY29uc3QgZmlsZSA9IGF3YWl0IHRvRmlsZSh2YWx1ZSk7XG4gICAgZm9ybS5hcHBlbmQoa2V5LCBmaWxlIGFzIEZpbGUpO1xuICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkodmFsdWUpKSB7XG4gICAgYXdhaXQgUHJvbWlzZS5hbGwodmFsdWUubWFwKChlbnRyeSkgPT4gYWRkRm9ybVZhbHVlKGZvcm0sIGtleSArICdbXScsIGVudHJ5KSkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ29iamVjdCcpIHtcbiAgICBhd2FpdCBQcm9taXNlLmFsbChcbiAgICAgIE9iamVjdC5lbnRyaWVzKHZhbHVlKS5tYXAoKFtuYW1lLCBwcm9wXSkgPT4gYWRkRm9ybVZhbHVlKGZvcm0sIGAke2tleX1bJHtuYW1lfV1gLCBwcm9wKSksXG4gICAgKTtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgYEludmFsaWQgdmFsdWUgZ2l2ZW4gdG8gZm9ybSwgZXhwZWN0ZWQgYSBzdHJpbmcsIG51bWJlciwgYm9vbGVhbiwgb2JqZWN0LCBBcnJheSwgRmlsZSBvciBCbG9iIGJ1dCBnb3QgJHt2YWx1ZX0gaW5zdGVhZGAsXG4gICAgKTtcbiAgfVxufTtcbiIsICJpbXBvcnQgeyBWRVJTSU9OIH0gZnJvbSBcIi4vdmVyc2lvbi5qc1wiO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSBcIi4vc3RyZWFtaW5nLmpzXCI7XG5pbXBvcnQge1xuICBBbnRocm9waWNFcnJvcixcbiAgQVBJRXJyb3IsXG4gIEFQSUNvbm5lY3Rpb25FcnJvcixcbiAgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcixcbiAgQVBJVXNlckFib3J0RXJyb3IsXG59IGZyb20gXCIuL2Vycm9yLmpzXCI7XG5pbXBvcnQge1xuICBraW5kIGFzIHNoaW1zS2luZCxcbiAgdHlwZSBSZWFkYWJsZSxcbiAgZ2V0RGVmYXVsdEFnZW50LFxuICB0eXBlIEFnZW50LFxuICBmZXRjaCxcbiAgdHlwZSBSZXF1ZXN0SW5mbyxcbiAgdHlwZSBSZXF1ZXN0SW5pdCxcbiAgdHlwZSBSZXNwb25zZSxcbiAgdHlwZSBIZWFkZXJzSW5pdCxcbn0gZnJvbSBcIi4vX3NoaW1zL2luZGV4LmpzXCI7XG5leHBvcnQgeyB0eXBlIFJlc3BvbnNlIH07XG5pbXBvcnQgeyBCbG9iTGlrZSwgaXNCbG9iTGlrZSwgaXNNdWx0aXBhcnRCb2R5IH0gZnJvbSBcIi4vdXBsb2Fkcy5qc1wiO1xuZXhwb3J0IHtcbiAgbWF5YmVNdWx0aXBhcnRGb3JtUmVxdWVzdE9wdGlvbnMsXG4gIG11bHRpcGFydEZvcm1SZXF1ZXN0T3B0aW9ucyxcbiAgY3JlYXRlRm9ybSxcbiAgdHlwZSBVcGxvYWRhYmxlLFxufSBmcm9tIFwiLi91cGxvYWRzLmpzXCI7XG5cbmV4cG9ydCB0eXBlIEZldGNoID0gKHVybDogUmVxdWVzdEluZm8sIGluaXQ/OiBSZXF1ZXN0SW5pdCkgPT4gUHJvbWlzZTxSZXNwb25zZT47XG5cbnR5cGUgUHJvbWlzZU9yVmFsdWU8VD4gPSBUIHwgUHJvbWlzZTxUPjtcblxudHlwZSBBUElSZXNwb25zZVByb3BzID0ge1xuICByZXNwb25zZTogUmVzcG9uc2U7XG4gIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnM7XG4gIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcjtcbn07XG5cbmFzeW5jIGZ1bmN0aW9uIGRlZmF1bHRQYXJzZVJlc3BvbnNlPFQ+KHByb3BzOiBBUElSZXNwb25zZVByb3BzKTogUHJvbWlzZTxXaXRoUmVxdWVzdElEPFQ+PiB7XG4gIGNvbnN0IHsgcmVzcG9uc2UgfSA9IHByb3BzO1xuICBpZiAocHJvcHMub3B0aW9ucy5zdHJlYW0pIHtcbiAgICBkZWJ1ZygncmVzcG9uc2UnLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnVybCwgcmVzcG9uc2UuaGVhZGVycywgcmVzcG9uc2UuYm9keSk7XG5cbiAgICAvLyBOb3RlOiB0aGVyZSBpcyBhbiBpbnZhcmlhbnQgaGVyZSB0aGF0IGlzbid0IHJlcHJlc2VudGVkIGluIHRoZSB0eXBlIHN5c3RlbVxuICAgIC8vIHRoYXQgaWYgeW91IHNldCBgc3RyZWFtOiB0cnVlYCB0aGUgcmVzcG9uc2UgdHlwZSBtdXN0IGFsc28gYmUgYFN0cmVhbTxUPmBcblxuICAgIGlmIChwcm9wcy5vcHRpb25zLl9fc3RyZWFtQ2xhc3MpIHtcbiAgICAgIHJldHVybiBwcm9wcy5vcHRpb25zLl9fc3RyZWFtQ2xhc3MuZnJvbVNTRVJlc3BvbnNlKHJlc3BvbnNlLCBwcm9wcy5jb250cm9sbGVyKSBhcyBhbnk7XG4gICAgfVxuXG4gICAgcmV0dXJuIFN0cmVhbS5mcm9tU1NFUmVzcG9uc2UocmVzcG9uc2UsIHByb3BzLmNvbnRyb2xsZXIpIGFzIGFueTtcbiAgfVxuXG4gIC8vIGZldGNoIHJlZnVzZXMgdG8gcmVhZCB0aGUgYm9keSB3aGVuIHRoZSBzdGF0dXMgY29kZSBpcyAyMDQuXG4gIGlmIChyZXNwb25zZS5zdGF0dXMgPT09IDIwNCkge1xuICAgIHJldHVybiBudWxsIGFzIFdpdGhSZXF1ZXN0SUQ8VD47XG4gIH1cblxuICBpZiAocHJvcHMub3B0aW9ucy5fX2JpbmFyeVJlc3BvbnNlKSB7XG4gICAgcmV0dXJuIHJlc3BvbnNlIGFzIHVua25vd24gYXMgV2l0aFJlcXVlc3RJRDxUPjtcbiAgfVxuXG4gIGNvbnN0IGNvbnRlbnRUeXBlID0gcmVzcG9uc2UuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpO1xuICBjb25zdCBpc0pTT04gPVxuICAgIGNvbnRlbnRUeXBlPy5pbmNsdWRlcygnYXBwbGljYXRpb24vanNvbicpIHx8IGNvbnRlbnRUeXBlPy5pbmNsdWRlcygnYXBwbGljYXRpb24vdm5kLmFwaStqc29uJyk7XG4gIGlmIChpc0pTT04pIHtcbiAgICBjb25zdCBqc29uID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xuXG4gICAgZGVidWcoJ3Jlc3BvbnNlJywgcmVzcG9uc2Uuc3RhdHVzLCByZXNwb25zZS51cmwsIHJlc3BvbnNlLmhlYWRlcnMsIGpzb24pO1xuXG4gICAgcmV0dXJuIF9hZGRSZXF1ZXN0SUQoanNvbiBhcyBULCByZXNwb25zZSk7XG4gIH1cblxuICBjb25zdCB0ZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpO1xuICBkZWJ1ZygncmVzcG9uc2UnLCByZXNwb25zZS5zdGF0dXMsIHJlc3BvbnNlLnVybCwgcmVzcG9uc2UuaGVhZGVycywgdGV4dCk7XG5cbiAgLy8gVE9ETyBoYW5kbGUgYmxvYiwgYXJyYXlidWZmZXIsIG90aGVyIGNvbnRlbnQgdHlwZXMsIGV0Yy5cbiAgcmV0dXJuIHRleHQgYXMgdW5rbm93biBhcyBXaXRoUmVxdWVzdElEPFQ+O1xufVxuXG50eXBlIFdpdGhSZXF1ZXN0SUQ8VD4gPVxuICBUIGV4dGVuZHMgQXJyYXk8YW55PiB8IFJlc3BvbnNlIHwgQWJzdHJhY3RQYWdlPGFueT4gPyBUXG4gIDogVCBleHRlbmRzIFJlY29yZDxzdHJpbmcsIGFueT4gPyBUICYgeyBfcmVxdWVzdF9pZD86IHN0cmluZyB8IG51bGwgfVxuICA6IFQ7XG5cbmZ1bmN0aW9uIF9hZGRSZXF1ZXN0SUQ8VD4odmFsdWU6IFQsIHJlc3BvbnNlOiBSZXNwb25zZSk6IFdpdGhSZXF1ZXN0SUQ8VD4ge1xuICBpZiAoIXZhbHVlIHx8IHR5cGVvZiB2YWx1ZSAhPT0gJ29iamVjdCcgfHwgQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICByZXR1cm4gdmFsdWUgYXMgV2l0aFJlcXVlc3RJRDxUPjtcbiAgfVxuXG4gIHJldHVybiBPYmplY3QuZGVmaW5lUHJvcGVydHkodmFsdWUsICdfcmVxdWVzdF9pZCcsIHtcbiAgICB2YWx1ZTogcmVzcG9uc2UuaGVhZGVycy5nZXQoJ3JlcXVlc3QtaWQnKSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgfSkgYXMgV2l0aFJlcXVlc3RJRDxUPjtcbn1cblxuLyoqXG4gKiBBIHN1YmNsYXNzIG9mIGBQcm9taXNlYCBwcm92aWRpbmcgYWRkaXRpb25hbCBoZWxwZXIgbWV0aG9kc1xuICogZm9yIGludGVyYWN0aW5nIHdpdGggdGhlIFNESy5cbiAqL1xuZXhwb3J0IGNsYXNzIEFQSVByb21pc2U8VD4gZXh0ZW5kcyBQcm9taXNlPFdpdGhSZXF1ZXN0SUQ8VD4+IHtcbiAgcHJpdmF0ZSBwYXJzZWRQcm9taXNlOiBQcm9taXNlPFdpdGhSZXF1ZXN0SUQ8VD4+IHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgcmVzcG9uc2VQcm9taXNlOiBQcm9taXNlPEFQSVJlc3BvbnNlUHJvcHM+LFxuICAgIHByaXZhdGUgcGFyc2VSZXNwb25zZTogKFxuICAgICAgcHJvcHM6IEFQSVJlc3BvbnNlUHJvcHMsXG4gICAgKSA9PiBQcm9taXNlT3JWYWx1ZTxXaXRoUmVxdWVzdElEPFQ+PiA9IGRlZmF1bHRQYXJzZVJlc3BvbnNlLFxuICApIHtcbiAgICBzdXBlcigocmVzb2x2ZSkgPT4ge1xuICAgICAgLy8gdGhpcyBpcyBtYXliZSBhIGJpdCB3ZWlyZCBidXQgdGhpcyBoYXMgdG8gYmUgYSBuby1vcCB0byBub3QgaW1wbGljaXRseVxuICAgICAgLy8gcGFyc2UgdGhlIHJlc3BvbnNlIGJvZHk7IGluc3RlYWQgLnRoZW4sIC5jYXRjaCwgLmZpbmFsbHkgYXJlIG92ZXJyaWRkZW5cbiAgICAgIC8vIHRvIHBhcnNlIHRoZSByZXNwb25zZVxuICAgICAgcmVzb2x2ZShudWxsIGFzIGFueSk7XG4gICAgfSk7XG4gIH1cblxuICBfdGhlblVud3JhcDxVPih0cmFuc2Zvcm06IChkYXRhOiBULCBwcm9wczogQVBJUmVzcG9uc2VQcm9wcykgPT4gVSk6IEFQSVByb21pc2U8VT4ge1xuICAgIHJldHVybiBuZXcgQVBJUHJvbWlzZSh0aGlzLnJlc3BvbnNlUHJvbWlzZSwgYXN5bmMgKHByb3BzKSA9PlxuICAgICAgX2FkZFJlcXVlc3RJRCh0cmFuc2Zvcm0oYXdhaXQgdGhpcy5wYXJzZVJlc3BvbnNlKHByb3BzKSwgcHJvcHMpLCBwcm9wcy5yZXNwb25zZSksXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSByYXcgYFJlc3BvbnNlYCBpbnN0YW5jZSBpbnN0ZWFkIG9mIHBhcnNpbmcgdGhlIHJlc3BvbnNlXG4gICAqIGRhdGEuXG4gICAqXG4gICAqIElmIHlvdSB3YW50IHRvIHBhcnNlIHRoZSByZXNwb25zZSBib2R5IGJ1dCBzdGlsbCBnZXQgdGhlIGBSZXNwb25zZWBcbiAgICogaW5zdGFuY2UsIHlvdSBjYW4gdXNlIHtAbGluayB3aXRoUmVzcG9uc2UoKX0uXG4gICAqXG4gICAqIFx1RDgzRFx1REM0QiBHZXR0aW5nIHRoZSB3cm9uZyBUeXBlU2NyaXB0IHR5cGUgZm9yIGBSZXNwb25zZWA/XG4gICAqIFRyeSBzZXR0aW5nIGBcIm1vZHVsZVJlc29sdXRpb25cIjogXCJOb2RlTmV4dFwiYCBpZiB5b3UgY2FuLFxuICAgKiBvciBhZGQgb25lIG9mIHRoZXNlIGltcG9ydHMgYmVmb3JlIHlvdXIgZmlyc3QgYGltcG9ydCBcdTIwMjYgZnJvbSAnQGFudGhyb3BpYy1haS9zZGsnYDpcbiAgICogLSBgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy9ub2RlJ2AgKGlmIHlvdSdyZSBydW5uaW5nIG9uIE5vZGUpXG4gICAqIC0gYGltcG9ydCAnQGFudGhyb3BpYy1haS9zZGsvc2hpbXMvd2ViJ2AgKG90aGVyd2lzZSlcbiAgICovXG4gIGFzUmVzcG9uc2UoKTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICAgIHJldHVybiB0aGlzLnJlc3BvbnNlUHJvbWlzZS50aGVuKChwKSA9PiBwLnJlc3BvbnNlKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBHZXRzIHRoZSBwYXJzZWQgcmVzcG9uc2UgZGF0YSwgdGhlIHJhdyBgUmVzcG9uc2VgIGluc3RhbmNlIGFuZCB0aGUgSUQgb2YgdGhlIHJlcXVlc3QsXG4gICAqIHJldHVybmVkIHZpZSB0aGUgYHJlcXVlc3QtaWRgIGhlYWRlciB3aGljaCBpcyB1c2VmdWwgZm9yIGRlYnVnZ2luZyByZXF1ZXN0cyBhbmQgcmVzcG9ydGluZ1xuICAgKiBpc3N1ZXMgdG8gQW50aHJvcGljLlxuICAgKlxuICAgKiBJZiB5b3UganVzdCB3YW50IHRvIGdldCB0aGUgcmF3IGBSZXNwb25zZWAgaW5zdGFuY2Ugd2l0aG91dCBwYXJzaW5nIGl0LFxuICAgKiB5b3UgY2FuIHVzZSB7QGxpbmsgYXNSZXNwb25zZSgpfS5cbiAgICpcbiAgICogXHVEODNEXHVEQzRCIEdldHRpbmcgdGhlIHdyb25nIFR5cGVTY3JpcHQgdHlwZSBmb3IgYFJlc3BvbnNlYD9cbiAgICogVHJ5IHNldHRpbmcgYFwibW9kdWxlUmVzb2x1dGlvblwiOiBcIk5vZGVOZXh0XCJgIGlmIHlvdSBjYW4sXG4gICAqIG9yIGFkZCBvbmUgb2YgdGhlc2UgaW1wb3J0cyBiZWZvcmUgeW91ciBmaXJzdCBgaW1wb3J0IFx1MjAyNiBmcm9tICdAYW50aHJvcGljLWFpL3NkaydgOlxuICAgKiAtIGBpbXBvcnQgJ0BhbnRocm9waWMtYWkvc2RrL3NoaW1zL25vZGUnYCAoaWYgeW91J3JlIHJ1bm5pbmcgb24gTm9kZSlcbiAgICogLSBgaW1wb3J0ICdAYW50aHJvcGljLWFpL3Nkay9zaGltcy93ZWInYCAob3RoZXJ3aXNlKVxuICAgKi9cbiAgYXN5bmMgd2l0aFJlc3BvbnNlKCk6IFByb21pc2U8eyBkYXRhOiBUOyByZXNwb25zZTogUmVzcG9uc2U7IHJlcXVlc3RfaWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQgfT4ge1xuICAgIGNvbnN0IFtkYXRhLCByZXNwb25zZV0gPSBhd2FpdCBQcm9taXNlLmFsbChbdGhpcy5wYXJzZSgpLCB0aGlzLmFzUmVzcG9uc2UoKV0pO1xuICAgIHJldHVybiB7IGRhdGEsIHJlc3BvbnNlLCByZXF1ZXN0X2lkOiByZXNwb25zZS5oZWFkZXJzLmdldCgncmVxdWVzdC1pZCcpIH07XG4gIH1cblxuICBwcml2YXRlIHBhcnNlKCk6IFByb21pc2U8V2l0aFJlcXVlc3RJRDxUPj4ge1xuICAgIGlmICghdGhpcy5wYXJzZWRQcm9taXNlKSB7XG4gICAgICB0aGlzLnBhcnNlZFByb21pc2UgPSB0aGlzLnJlc3BvbnNlUHJvbWlzZS50aGVuKHRoaXMucGFyc2VSZXNwb25zZSkgYXMgYW55IGFzIFByb21pc2U8V2l0aFJlcXVlc3RJRDxUPj47XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnBhcnNlZFByb21pc2U7XG4gIH1cblxuICBvdmVycmlkZSB0aGVuPFRSZXN1bHQxID0gV2l0aFJlcXVlc3RJRDxUPiwgVFJlc3VsdDIgPSBuZXZlcj4oXG4gICAgb25mdWxmaWxsZWQ/OiAoKHZhbHVlOiBXaXRoUmVxdWVzdElEPFQ+KSA9PiBUUmVzdWx0MSB8IFByb21pc2VMaWtlPFRSZXN1bHQxPikgfCB1bmRlZmluZWQgfCBudWxsLFxuICAgIG9ucmVqZWN0ZWQ/OiAoKHJlYXNvbjogYW55KSA9PiBUUmVzdWx0MiB8IFByb21pc2VMaWtlPFRSZXN1bHQyPikgfCB1bmRlZmluZWQgfCBudWxsLFxuICApOiBQcm9taXNlPFRSZXN1bHQxIHwgVFJlc3VsdDI+IHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZSgpLnRoZW4ob25mdWxmaWxsZWQsIG9ucmVqZWN0ZWQpO1xuICB9XG5cbiAgb3ZlcnJpZGUgY2F0Y2g8VFJlc3VsdCA9IG5ldmVyPihcbiAgICBvbnJlamVjdGVkPzogKChyZWFzb246IGFueSkgPT4gVFJlc3VsdCB8IFByb21pc2VMaWtlPFRSZXN1bHQ+KSB8IHVuZGVmaW5lZCB8IG51bGwsXG4gICk6IFByb21pc2U8V2l0aFJlcXVlc3RJRDxUPiB8IFRSZXN1bHQ+IHtcbiAgICByZXR1cm4gdGhpcy5wYXJzZSgpLmNhdGNoKG9ucmVqZWN0ZWQpO1xuICB9XG5cbiAgb3ZlcnJpZGUgZmluYWxseShvbmZpbmFsbHk/OiAoKCkgPT4gdm9pZCkgfCB1bmRlZmluZWQgfCBudWxsKTogUHJvbWlzZTxXaXRoUmVxdWVzdElEPFQ+PiB7XG4gICAgcmV0dXJuIHRoaXMucGFyc2UoKS5maW5hbGx5KG9uZmluYWxseSk7XG4gIH1cbn1cblxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIEFQSUNsaWVudCB7XG4gIGJhc2VVUkw6IHN0cmluZztcbiAgbWF4UmV0cmllczogbnVtYmVyO1xuICB0aW1lb3V0OiBudW1iZXI7XG4gIGh0dHBBZ2VudDogQWdlbnQgfCB1bmRlZmluZWQ7XG5cbiAgcHJpdmF0ZSBmZXRjaDogRmV0Y2g7XG4gIHByb3RlY3RlZCBpZGVtcG90ZW5jeUhlYWRlcj86IHN0cmluZztcblxuICBjb25zdHJ1Y3Rvcih7XG4gICAgYmFzZVVSTCxcbiAgICBtYXhSZXRyaWVzID0gMixcbiAgICB0aW1lb3V0ID0gNjAwMDAwLCAvLyAxMCBtaW51dGVzXG4gICAgaHR0cEFnZW50LFxuICAgIGZldGNoOiBvdmVycmlkZGVuRmV0Y2gsXG4gIH06IHtcbiAgICBiYXNlVVJMOiBzdHJpbmc7XG4gICAgbWF4UmV0cmllcz86IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgICB0aW1lb3V0OiBudW1iZXIgfCB1bmRlZmluZWQ7XG4gICAgaHR0cEFnZW50OiBBZ2VudCB8IHVuZGVmaW5lZDtcbiAgICBmZXRjaDogRmV0Y2ggfCB1bmRlZmluZWQ7XG4gIH0pIHtcbiAgICB0aGlzLmJhc2VVUkwgPSBiYXNlVVJMO1xuICAgIHRoaXMubWF4UmV0cmllcyA9IHZhbGlkYXRlUG9zaXRpdmVJbnRlZ2VyKCdtYXhSZXRyaWVzJywgbWF4UmV0cmllcyk7XG4gICAgdGhpcy50aW1lb3V0ID0gdmFsaWRhdGVQb3NpdGl2ZUludGVnZXIoJ3RpbWVvdXQnLCB0aW1lb3V0KTtcbiAgICB0aGlzLmh0dHBBZ2VudCA9IGh0dHBBZ2VudDtcblxuICAgIHRoaXMuZmV0Y2ggPSBvdmVycmlkZGVuRmV0Y2ggPz8gZmV0Y2g7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXV0aEhlYWRlcnMob3B0czogRmluYWxSZXF1ZXN0T3B0aW9ucyk6IEhlYWRlcnMge1xuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGlzIHRvIGFkZCB5b3VyIG93biBkZWZhdWx0IGhlYWRlcnMsIGZvciBleGFtcGxlOlxuICAgKlxuICAgKiAge1xuICAgKiAgICAuLi5zdXBlci5kZWZhdWx0SGVhZGVycygpLFxuICAgKiAgICBBdXRob3JpemF0aW9uOiAnQmVhcmVyIDEyMycsXG4gICAqICB9XG4gICAqL1xuICBwcm90ZWN0ZWQgZGVmYXVsdEhlYWRlcnMob3B0czogRmluYWxSZXF1ZXN0T3B0aW9ucyk6IEhlYWRlcnMge1xuICAgIHJldHVybiB7XG4gICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9qc29uJyxcbiAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbicsXG4gICAgICAnVXNlci1BZ2VudCc6IHRoaXMuZ2V0VXNlckFnZW50KCksXG4gICAgICAuLi5nZXRQbGF0Zm9ybUhlYWRlcnMoKSxcbiAgICAgIC4uLnRoaXMuYXV0aEhlYWRlcnMob3B0cyksXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBkZWZhdWx0UXVlcnkoKTogRGVmYXVsdFF1ZXJ5IHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBPdmVycmlkZSB0aGlzIHRvIGFkZCB5b3VyIG93biBoZWFkZXJzIHZhbGlkYXRpb246XG4gICAqL1xuICBwcm90ZWN0ZWQgdmFsaWRhdGVIZWFkZXJzKGhlYWRlcnM6IEhlYWRlcnMsIGN1c3RvbUhlYWRlcnM6IEhlYWRlcnMpIHt9XG5cbiAgcHJvdGVjdGVkIGRlZmF1bHRJZGVtcG90ZW5jeUtleSgpOiBzdHJpbmcge1xuICAgIHJldHVybiBgc3RhaW5sZXNzLW5vZGUtcmV0cnktJHt1dWlkNCgpfWA7XG4gIH1cblxuICBnZXQ8UmVxLCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdnZXQnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIHBvc3Q8UmVxLCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdwb3N0JywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBwYXRjaDxSZXEsIFJzcD4ocGF0aDogc3RyaW5nLCBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4pOiBBUElQcm9taXNlPFJzcD4ge1xuICAgIHJldHVybiB0aGlzLm1ldGhvZFJlcXVlc3QoJ3BhdGNoJywgcGF0aCwgb3B0cyk7XG4gIH1cblxuICBwdXQ8UmVxLCBSc3A+KHBhdGg6IHN0cmluZywgb3B0cz86IFByb21pc2VPclZhbHVlPFJlcXVlc3RPcHRpb25zPFJlcT4+KTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5tZXRob2RSZXF1ZXN0KCdwdXQnLCBwYXRoLCBvcHRzKTtcbiAgfVxuXG4gIGRlbGV0ZTxSZXEsIFJzcD4ocGF0aDogc3RyaW5nLCBvcHRzPzogUHJvbWlzZU9yVmFsdWU8UmVxdWVzdE9wdGlvbnM8UmVxPj4pOiBBUElQcm9taXNlPFJzcD4ge1xuICAgIHJldHVybiB0aGlzLm1ldGhvZFJlcXVlc3QoJ2RlbGV0ZScsIHBhdGgsIG9wdHMpO1xuICB9XG5cbiAgcHJpdmF0ZSBtZXRob2RSZXF1ZXN0PFJlcSwgUnNwPihcbiAgICBtZXRob2Q6IEhUVFBNZXRob2QsXG4gICAgcGF0aDogc3RyaW5nLFxuICAgIG9wdHM/OiBQcm9taXNlT3JWYWx1ZTxSZXF1ZXN0T3B0aW9uczxSZXE+PixcbiAgKTogQVBJUHJvbWlzZTxSc3A+IHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0KFxuICAgICAgUHJvbWlzZS5yZXNvbHZlKG9wdHMpLnRoZW4oYXN5bmMgKG9wdHMpID0+IHtcbiAgICAgICAgY29uc3QgYm9keSA9XG4gICAgICAgICAgb3B0cyAmJiBpc0Jsb2JMaWtlKG9wdHM/LmJvZHkpID8gbmV3IERhdGFWaWV3KGF3YWl0IG9wdHMuYm9keS5hcnJheUJ1ZmZlcigpKVxuICAgICAgICAgIDogb3B0cz8uYm9keSBpbnN0YW5jZW9mIERhdGFWaWV3ID8gb3B0cy5ib2R5XG4gICAgICAgICAgOiBvcHRzPy5ib2R5IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIgPyBuZXcgRGF0YVZpZXcob3B0cy5ib2R5KVxuICAgICAgICAgIDogb3B0cyAmJiBBcnJheUJ1ZmZlci5pc1ZpZXcob3B0cz8uYm9keSkgPyBuZXcgRGF0YVZpZXcob3B0cy5ib2R5LmJ1ZmZlcilcbiAgICAgICAgICA6IG9wdHM/LmJvZHk7XG4gICAgICAgIHJldHVybiB7IG1ldGhvZCwgcGF0aCwgLi4ub3B0cywgYm9keSB9O1xuICAgICAgfSksXG4gICAgKTtcbiAgfVxuXG4gIGdldEFQSUxpc3Q8SXRlbSwgUGFnZUNsYXNzIGV4dGVuZHMgQWJzdHJhY3RQYWdlPEl0ZW0+ID0gQWJzdHJhY3RQYWdlPEl0ZW0+PihcbiAgICBwYXRoOiBzdHJpbmcsXG4gICAgUGFnZTogbmV3ICguLi5hcmdzOiBhbnlbXSkgPT4gUGFnZUNsYXNzLFxuICAgIG9wdHM/OiBSZXF1ZXN0T3B0aW9uczxhbnk+LFxuICApOiBQYWdlUHJvbWlzZTxQYWdlQ2xhc3MsIEl0ZW0+IHtcbiAgICByZXR1cm4gdGhpcy5yZXF1ZXN0QVBJTGlzdChQYWdlLCB7IG1ldGhvZDogJ2dldCcsIHBhdGgsIC4uLm9wdHMgfSk7XG4gIH1cblxuICBwcml2YXRlIGNhbGN1bGF0ZUNvbnRlbnRMZW5ndGgoYm9keTogdW5rbm93bik6IHN0cmluZyB8IG51bGwge1xuICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGlmICh0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICByZXR1cm4gQnVmZmVyLmJ5dGVMZW5ndGgoYm9keSwgJ3V0ZjgnKS50b1N0cmluZygpO1xuICAgICAgfVxuXG4gICAgICBpZiAodHlwZW9mIFRleHRFbmNvZGVyICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICBjb25zdCBlbmNvZGVyID0gbmV3IFRleHRFbmNvZGVyKCk7XG4gICAgICAgIGNvbnN0IGVuY29kZWQgPSBlbmNvZGVyLmVuY29kZShib2R5KTtcbiAgICAgICAgcmV0dXJuIGVuY29kZWQubGVuZ3RoLnRvU3RyaW5nKCk7XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcoYm9keSkpIHtcbiAgICAgIHJldHVybiBib2R5LmJ5dGVMZW5ndGgudG9TdHJpbmcoKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbnVsbDtcbiAgfVxuXG4gIGJ1aWxkUmVxdWVzdDxSZXE+KFxuICAgIG9wdGlvbnM6IEZpbmFsUmVxdWVzdE9wdGlvbnM8UmVxPixcbiAgICB7IHJldHJ5Q291bnQgPSAwIH06IHsgcmV0cnlDb3VudD86IG51bWJlciB9ID0ge30sXG4gICk6IHsgcmVxOiBSZXF1ZXN0SW5pdDsgdXJsOiBzdHJpbmc7IHRpbWVvdXQ6IG51bWJlciB9IHtcbiAgICBjb25zdCB7IG1ldGhvZCwgcGF0aCwgcXVlcnksIGhlYWRlcnM6IGhlYWRlcnMgPSB7fSB9ID0gb3B0aW9ucztcblxuICAgIGNvbnN0IGJvZHkgPVxuICAgICAgQXJyYXlCdWZmZXIuaXNWaWV3KG9wdGlvbnMuYm9keSkgfHwgKG9wdGlvbnMuX19iaW5hcnlSZXF1ZXN0ICYmIHR5cGVvZiBvcHRpb25zLmJvZHkgPT09ICdzdHJpbmcnKSA/XG4gICAgICAgIG9wdGlvbnMuYm9keVxuICAgICAgOiBpc011bHRpcGFydEJvZHkob3B0aW9ucy5ib2R5KSA/IG9wdGlvbnMuYm9keS5ib2R5XG4gICAgICA6IG9wdGlvbnMuYm9keSA/IEpTT04uc3RyaW5naWZ5KG9wdGlvbnMuYm9keSwgbnVsbCwgMilcbiAgICAgIDogbnVsbDtcbiAgICBjb25zdCBjb250ZW50TGVuZ3RoID0gdGhpcy5jYWxjdWxhdGVDb250ZW50TGVuZ3RoKGJvZHkpO1xuXG4gICAgY29uc3QgdXJsID0gdGhpcy5idWlsZFVSTChwYXRoISwgcXVlcnkpO1xuICAgIGlmICgndGltZW91dCcgaW4gb3B0aW9ucykgdmFsaWRhdGVQb3NpdGl2ZUludGVnZXIoJ3RpbWVvdXQnLCBvcHRpb25zLnRpbWVvdXQpO1xuICAgIGNvbnN0IHRpbWVvdXQgPSBvcHRpb25zLnRpbWVvdXQgPz8gdGhpcy50aW1lb3V0O1xuICAgIGNvbnN0IGh0dHBBZ2VudCA9IG9wdGlvbnMuaHR0cEFnZW50ID8/IHRoaXMuaHR0cEFnZW50ID8/IGdldERlZmF1bHRBZ2VudCh1cmwpO1xuICAgIGNvbnN0IG1pbkFnZW50VGltZW91dCA9IHRpbWVvdXQgKyAxMDAwO1xuICAgIGlmIChcbiAgICAgIHR5cGVvZiAoaHR0cEFnZW50IGFzIGFueSk/Lm9wdGlvbnM/LnRpbWVvdXQgPT09ICdudW1iZXInICYmXG4gICAgICBtaW5BZ2VudFRpbWVvdXQgPiAoKGh0dHBBZ2VudCBhcyBhbnkpLm9wdGlvbnMudGltZW91dCA/PyAwKVxuICAgICkge1xuICAgICAgLy8gQWxsb3cgYW55IGdpdmVuIHJlcXVlc3QgdG8gYnVtcCBvdXIgYWdlbnQgYWN0aXZlIHNvY2tldCB0aW1lb3V0LlxuICAgICAgLy8gVGhpcyBtYXkgc2VlbSBzdHJhbmdlLCBidXQgbGVha2luZyBhY3RpdmUgc29ja2V0cyBzaG91bGQgYmUgcmFyZSBhbmQgbm90IHBhcnRpY3VsYXJseSBwcm9ibGVtYXRpYyxcbiAgICAgIC8vIGFuZCB3aXRob3V0IG11dGF0aW5nIGFnZW50IHdlIHdvdWxkIG5lZWQgdG8gY3JlYXRlIG1vcmUgb2YgdGhlbS5cbiAgICAgIC8vIFRoaXMgdHJhZGVvZmYgb3B0aW1pemVzIGZvciBwZXJmb3JtYW5jZS5cbiAgICAgIChodHRwQWdlbnQgYXMgYW55KS5vcHRpb25zLnRpbWVvdXQgPSBtaW5BZ2VudFRpbWVvdXQ7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuaWRlbXBvdGVuY3lIZWFkZXIgJiYgbWV0aG9kICE9PSAnZ2V0Jykge1xuICAgICAgaWYgKCFvcHRpb25zLmlkZW1wb3RlbmN5S2V5KSBvcHRpb25zLmlkZW1wb3RlbmN5S2V5ID0gdGhpcy5kZWZhdWx0SWRlbXBvdGVuY3lLZXkoKTtcbiAgICAgIGhlYWRlcnNbdGhpcy5pZGVtcG90ZW5jeUhlYWRlcl0gPSBvcHRpb25zLmlkZW1wb3RlbmN5S2V5O1xuICAgIH1cblxuICAgIGNvbnN0IHJlcUhlYWRlcnMgPSB0aGlzLmJ1aWxkSGVhZGVycyh7IG9wdGlvbnMsIGhlYWRlcnMsIGNvbnRlbnRMZW5ndGgsIHJldHJ5Q291bnQgfSk7XG5cbiAgICBjb25zdCByZXE6IFJlcXVlc3RJbml0ID0ge1xuICAgICAgbWV0aG9kLFxuICAgICAgLi4uKGJvZHkgJiYgeyBib2R5OiBib2R5IGFzIGFueSB9KSxcbiAgICAgIGhlYWRlcnM6IHJlcUhlYWRlcnMsXG4gICAgICAuLi4oaHR0cEFnZW50ICYmIHsgYWdlbnQ6IGh0dHBBZ2VudCB9KSxcbiAgICAgIC8vIEB0cy1pZ25vcmUgbm9kZS1mZXRjaCB1c2VzIGEgY3VzdG9tIEFib3J0U2lnbmFsIHR5cGUgdGhhdCBpc1xuICAgICAgLy8gbm90IGNvbXBhdGlibGUgd2l0aCBzdGFuZGFyZCB3ZWIgdHlwZXNcbiAgICAgIHNpZ25hbDogb3B0aW9ucy5zaWduYWwgPz8gbnVsbCxcbiAgICB9O1xuXG4gICAgcmV0dXJuIHsgcmVxLCB1cmwsIHRpbWVvdXQgfTtcbiAgfVxuXG4gIHByaXZhdGUgYnVpbGRIZWFkZXJzKHtcbiAgICBvcHRpb25zLFxuICAgIGhlYWRlcnMsXG4gICAgY29udGVudExlbmd0aCxcbiAgICByZXRyeUNvdW50LFxuICB9OiB7XG4gICAgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucztcbiAgICBoZWFkZXJzOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkPjtcbiAgICBjb250ZW50TGVuZ3RoOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuICAgIHJldHJ5Q291bnQ6IG51bWJlcjtcbiAgfSk6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4ge1xuICAgIGNvbnN0IHJlcUhlYWRlcnM6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPSB7fTtcbiAgICBpZiAoY29udGVudExlbmd0aCkge1xuICAgICAgcmVxSGVhZGVyc1snY29udGVudC1sZW5ndGgnXSA9IGNvbnRlbnRMZW5ndGg7XG4gICAgfVxuXG4gICAgY29uc3QgZGVmYXVsdEhlYWRlcnMgPSB0aGlzLmRlZmF1bHRIZWFkZXJzKG9wdGlvbnMpO1xuICAgIGFwcGx5SGVhZGVyc011dChyZXFIZWFkZXJzLCBkZWZhdWx0SGVhZGVycyk7XG4gICAgYXBwbHlIZWFkZXJzTXV0KHJlcUhlYWRlcnMsIGhlYWRlcnMpO1xuXG4gICAgLy8gbGV0IGJ1aWx0aW4gZmV0Y2ggc2V0IHRoZSBDb250ZW50LVR5cGUgZm9yIG11bHRpcGFydCBib2RpZXNcbiAgICBpZiAoaXNNdWx0aXBhcnRCb2R5KG9wdGlvbnMuYm9keSkgJiYgc2hpbXNLaW5kICE9PSAnbm9kZScpIHtcbiAgICAgIGRlbGV0ZSByZXFIZWFkZXJzWydjb250ZW50LXR5cGUnXTtcbiAgICB9XG5cbiAgICAvLyBEb24ndCBzZXQgdGhlIHJldHJ5IGNvdW50IGhlYWRlciBpZiBpdCB3YXMgYWxyZWFkeSBzZXQgb3IgcmVtb3ZlZCB0aHJvdWdoIGRlZmF1bHQgaGVhZGVycyBvciBieSB0aGVcbiAgICAvLyBjYWxsZXIuIFdlIGNoZWNrIGBkZWZhdWx0SGVhZGVyc2AgYW5kIGBoZWFkZXJzYCwgd2hpY2ggY2FuIGNvbnRhaW4gbnVsbHMsIGluc3RlYWQgb2YgYHJlcUhlYWRlcnNgIHRvXG4gICAgLy8gYWNjb3VudCBmb3IgdGhlIHJlbW92YWwgY2FzZS5cbiAgICBpZiAoXG4gICAgICBnZXRIZWFkZXIoZGVmYXVsdEhlYWRlcnMsICd4LXN0YWlubGVzcy1yZXRyeS1jb3VudCcpID09PSB1bmRlZmluZWQgJiZcbiAgICAgIGdldEhlYWRlcihoZWFkZXJzLCAneC1zdGFpbmxlc3MtcmV0cnktY291bnQnKSA9PT0gdW5kZWZpbmVkXG4gICAgKSB7XG4gICAgICByZXFIZWFkZXJzWyd4LXN0YWlubGVzcy1yZXRyeS1jb3VudCddID0gU3RyaW5nKHJldHJ5Q291bnQpO1xuICAgIH1cblxuICAgIHRoaXMudmFsaWRhdGVIZWFkZXJzKHJlcUhlYWRlcnMsIGhlYWRlcnMpO1xuXG4gICAgcmV0dXJuIHJlcUhlYWRlcnM7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCBhcyBhIGNhbGxiYWNrIGZvciBtdXRhdGluZyB0aGUgZ2l2ZW4gYEZpbmFsUmVxdWVzdE9wdGlvbnNgIG9iamVjdC5cbiAgICovXG4gIHByb3RlY3RlZCBhc3luYyBwcmVwYXJlT3B0aW9ucyhvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7fVxuXG4gIC8qKlxuICAgKiBVc2VkIGFzIGEgY2FsbGJhY2sgZm9yIG11dGF0aW5nIHRoZSBnaXZlbiBgUmVxdWVzdEluaXRgIG9iamVjdC5cbiAgICpcbiAgICogVGhpcyBpcyB1c2VmdWwgZm9yIGNhc2VzIHdoZXJlIHlvdSB3YW50IHRvIGFkZCBjZXJ0YWluIGhlYWRlcnMgYmFzZWQgb2ZmIG9mXG4gICAqIHRoZSByZXF1ZXN0IHByb3BlcnRpZXMsIGUuZy4gYG1ldGhvZGAgb3IgYHVybGAuXG4gICAqL1xuICBwcm90ZWN0ZWQgYXN5bmMgcHJlcGFyZVJlcXVlc3QoXG4gICAgcmVxdWVzdDogUmVxdWVzdEluaXQsXG4gICAgeyB1cmwsIG9wdGlvbnMgfTogeyB1cmw6IHN0cmluZzsgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucyB9LFxuICApOiBQcm9taXNlPHZvaWQ+IHt9XG5cbiAgcHJvdGVjdGVkIHBhcnNlSGVhZGVycyhoZWFkZXJzOiBIZWFkZXJzSW5pdCB8IG51bGwgfCB1bmRlZmluZWQpOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+IHtcbiAgICByZXR1cm4gKFxuICAgICAgIWhlYWRlcnMgPyB7fVxuICAgICAgOiBTeW1ib2wuaXRlcmF0b3IgaW4gaGVhZGVycyA/XG4gICAgICAgIE9iamVjdC5mcm9tRW50cmllcyhBcnJheS5mcm9tKGhlYWRlcnMgYXMgSXRlcmFibGU8c3RyaW5nW10+KS5tYXAoKGhlYWRlcikgPT4gWy4uLmhlYWRlcl0pKVxuICAgICAgOiB7IC4uLmhlYWRlcnMgfVxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgbWFrZVN0YXR1c0Vycm9yKFxuICAgIHN0YXR1czogbnVtYmVyIHwgdW5kZWZpbmVkLFxuICAgIGVycm9yOiBPYmplY3QgfCB1bmRlZmluZWQsXG4gICAgbWVzc2FnZTogc3RyaW5nIHwgdW5kZWZpbmVkLFxuICAgIGhlYWRlcnM6IEhlYWRlcnMgfCB1bmRlZmluZWQsXG4gICk6IEFQSUVycm9yIHtcbiAgICByZXR1cm4gQVBJRXJyb3IuZ2VuZXJhdGUoc3RhdHVzLCBlcnJvciwgbWVzc2FnZSwgaGVhZGVycyk7XG4gIH1cblxuICByZXF1ZXN0PFJlcSwgUnNwPihcbiAgICBvcHRpb25zOiBQcm9taXNlT3JWYWx1ZTxGaW5hbFJlcXVlc3RPcHRpb25zPFJlcT4+LFxuICAgIHJlbWFpbmluZ1JldHJpZXM6IG51bWJlciB8IG51bGwgPSBudWxsLFxuICApOiBBUElQcm9taXNlPFJzcD4ge1xuICAgIHJldHVybiBuZXcgQVBJUHJvbWlzZSh0aGlzLm1ha2VSZXF1ZXN0KG9wdGlvbnMsIHJlbWFpbmluZ1JldHJpZXMpKTtcbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgbWFrZVJlcXVlc3Q8UmVxPihcbiAgICBvcHRpb25zSW5wdXQ6IFByb21pc2VPclZhbHVlPEZpbmFsUmVxdWVzdE9wdGlvbnM8UmVxPj4sXG4gICAgcmV0cmllc1JlbWFpbmluZzogbnVtYmVyIHwgbnVsbCxcbiAgKTogUHJvbWlzZTxBUElSZXNwb25zZVByb3BzPiB7XG4gICAgY29uc3Qgb3B0aW9ucyA9IGF3YWl0IG9wdGlvbnNJbnB1dDtcbiAgICBjb25zdCBtYXhSZXRyaWVzID0gb3B0aW9ucy5tYXhSZXRyaWVzID8/IHRoaXMubWF4UmV0cmllcztcbiAgICBpZiAocmV0cmllc1JlbWFpbmluZyA9PSBudWxsKSB7XG4gICAgICByZXRyaWVzUmVtYWluaW5nID0gbWF4UmV0cmllcztcbiAgICB9XG5cbiAgICBhd2FpdCB0aGlzLnByZXBhcmVPcHRpb25zKG9wdGlvbnMpO1xuXG4gICAgY29uc3QgeyByZXEsIHVybCwgdGltZW91dCB9ID0gdGhpcy5idWlsZFJlcXVlc3Qob3B0aW9ucywgeyByZXRyeUNvdW50OiBtYXhSZXRyaWVzIC0gcmV0cmllc1JlbWFpbmluZyB9KTtcblxuICAgIGF3YWl0IHRoaXMucHJlcGFyZVJlcXVlc3QocmVxLCB7IHVybCwgb3B0aW9ucyB9KTtcblxuICAgIGRlYnVnKCdyZXF1ZXN0JywgdXJsLCBvcHRpb25zLCByZXEuaGVhZGVycyk7XG5cbiAgICBpZiAob3B0aW9ucy5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKCk7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLmZldGNoV2l0aFRpbWVvdXQodXJsLCByZXEsIHRpbWVvdXQsIGNvbnRyb2xsZXIpLmNhdGNoKGNhc3RUb0Vycm9yKTtcblxuICAgIGlmIChyZXNwb25zZSBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBpZiAob3B0aW9ucy5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFQSVVzZXJBYm9ydEVycm9yKCk7XG4gICAgICB9XG4gICAgICBpZiAocmV0cmllc1JlbWFpbmluZykge1xuICAgICAgICByZXR1cm4gdGhpcy5yZXRyeVJlcXVlc3Qob3B0aW9ucywgcmV0cmllc1JlbWFpbmluZyk7XG4gICAgICB9XG4gICAgICBpZiAocmVzcG9uc2UubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICAgIHRocm93IG5ldyBBUElDb25uZWN0aW9uVGltZW91dEVycm9yKCk7XG4gICAgICB9XG4gICAgICB0aHJvdyBuZXcgQVBJQ29ubmVjdGlvbkVycm9yKHsgY2F1c2U6IHJlc3BvbnNlIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHJlc3BvbnNlSGVhZGVycyA9IGNyZWF0ZVJlc3BvbnNlSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcblxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcbiAgICAgIGlmIChyZXRyaWVzUmVtYWluaW5nICYmIHRoaXMuc2hvdWxkUmV0cnkocmVzcG9uc2UpKSB7XG4gICAgICAgIGNvbnN0IHJldHJ5TWVzc2FnZSA9IGByZXRyeWluZywgJHtyZXRyaWVzUmVtYWluaW5nfSBhdHRlbXB0cyByZW1haW5pbmdgO1xuICAgICAgICBkZWJ1ZyhgcmVzcG9uc2UgKGVycm9yOyAke3JldHJ5TWVzc2FnZX0pYCwgcmVzcG9uc2Uuc3RhdHVzLCB1cmwsIHJlc3BvbnNlSGVhZGVycyk7XG4gICAgICAgIHJldHVybiB0aGlzLnJldHJ5UmVxdWVzdChvcHRpb25zLCByZXRyaWVzUmVtYWluaW5nLCByZXNwb25zZUhlYWRlcnMpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBlcnJUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpLmNhdGNoKChlKSA9PiBjYXN0VG9FcnJvcihlKS5tZXNzYWdlKTtcbiAgICAgIGNvbnN0IGVyckpTT04gPSBzYWZlSlNPTihlcnJUZXh0KTtcbiAgICAgIGNvbnN0IGVyck1lc3NhZ2UgPSBlcnJKU09OID8gdW5kZWZpbmVkIDogZXJyVGV4dDtcbiAgICAgIGNvbnN0IHJldHJ5TWVzc2FnZSA9IHJldHJpZXNSZW1haW5pbmcgPyBgKGVycm9yOyBubyBtb3JlIHJldHJpZXMgbGVmdClgIDogYChlcnJvcjsgbm90IHJldHJ5YWJsZSlgO1xuXG4gICAgICBkZWJ1ZyhgcmVzcG9uc2UgKGVycm9yOyAke3JldHJ5TWVzc2FnZX0pYCwgcmVzcG9uc2Uuc3RhdHVzLCB1cmwsIHJlc3BvbnNlSGVhZGVycywgZXJyTWVzc2FnZSk7XG5cbiAgICAgIGNvbnN0IGVyciA9IHRoaXMubWFrZVN0YXR1c0Vycm9yKHJlc3BvbnNlLnN0YXR1cywgZXJySlNPTiwgZXJyTWVzc2FnZSwgcmVzcG9uc2VIZWFkZXJzKTtcbiAgICAgIHRocm93IGVycjtcbiAgICB9XG5cbiAgICByZXR1cm4geyByZXNwb25zZSwgb3B0aW9ucywgY29udHJvbGxlciB9O1xuICB9XG5cbiAgcmVxdWVzdEFQSUxpc3Q8SXRlbSA9IHVua25vd24sIFBhZ2VDbGFzcyBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPiA9IEFic3RyYWN0UGFnZTxJdGVtPj4oXG4gICAgUGFnZTogbmV3ICguLi5hcmdzOiBDb25zdHJ1Y3RvclBhcmFtZXRlcnM8dHlwZW9mIEFic3RyYWN0UGFnZT4pID0+IFBhZ2VDbGFzcyxcbiAgICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zLFxuICApOiBQYWdlUHJvbWlzZTxQYWdlQ2xhc3MsIEl0ZW0+IHtcbiAgICBjb25zdCByZXF1ZXN0ID0gdGhpcy5tYWtlUmVxdWVzdChvcHRpb25zLCBudWxsKTtcbiAgICByZXR1cm4gbmV3IFBhZ2VQcm9taXNlPFBhZ2VDbGFzcywgSXRlbT4odGhpcywgcmVxdWVzdCwgUGFnZSk7XG4gIH1cblxuICBidWlsZFVSTDxSZXE+KHBhdGg6IHN0cmluZywgcXVlcnk6IFJlcSB8IG51bGwgfCB1bmRlZmluZWQpOiBzdHJpbmcge1xuICAgIGNvbnN0IHVybCA9XG4gICAgICBpc0Fic29sdXRlVVJMKHBhdGgpID9cbiAgICAgICAgbmV3IFVSTChwYXRoKVxuICAgICAgOiBuZXcgVVJMKHRoaXMuYmFzZVVSTCArICh0aGlzLmJhc2VVUkwuZW5kc1dpdGgoJy8nKSAmJiBwYXRoLnN0YXJ0c1dpdGgoJy8nKSA/IHBhdGguc2xpY2UoMSkgOiBwYXRoKSk7XG5cbiAgICBjb25zdCBkZWZhdWx0UXVlcnkgPSB0aGlzLmRlZmF1bHRRdWVyeSgpO1xuICAgIGlmICghaXNFbXB0eU9iaihkZWZhdWx0UXVlcnkpKSB7XG4gICAgICBxdWVyeSA9IHsgLi4uZGVmYXVsdFF1ZXJ5LCAuLi5xdWVyeSB9IGFzIFJlcTtcbiAgICB9XG5cbiAgICBpZiAodHlwZW9mIHF1ZXJ5ID09PSAnb2JqZWN0JyAmJiBxdWVyeSAmJiAhQXJyYXkuaXNBcnJheShxdWVyeSkpIHtcbiAgICAgIHVybC5zZWFyY2ggPSB0aGlzLnN0cmluZ2lmeVF1ZXJ5KHF1ZXJ5IGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KTtcbiAgICB9XG5cbiAgICByZXR1cm4gdXJsLnRvU3RyaW5nKCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgc3RyaW5naWZ5UXVlcnkocXVlcnk6IFJlY29yZDxzdHJpbmcsIHVua25vd24+KTogc3RyaW5nIHtcbiAgICByZXR1cm4gT2JqZWN0LmVudHJpZXMocXVlcnkpXG4gICAgICAuZmlsdGVyKChbXywgdmFsdWVdKSA9PiB0eXBlb2YgdmFsdWUgIT09ICd1bmRlZmluZWQnKVxuICAgICAgLm1hcCgoW2tleSwgdmFsdWVdKSA9PiB7XG4gICAgICAgIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnIHx8IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgfHwgdHlwZW9mIHZhbHVlID09PSAnYm9vbGVhbicpIHtcbiAgICAgICAgICByZXR1cm4gYCR7ZW5jb2RlVVJJQ29tcG9uZW50KGtleSl9PSR7ZW5jb2RlVVJJQ29tcG9uZW50KHZhbHVlKX1gO1xuICAgICAgICB9XG4gICAgICAgIGlmICh2YWx1ZSA9PT0gbnVsbCkge1xuICAgICAgICAgIHJldHVybiBgJHtlbmNvZGVVUklDb21wb25lbnQoa2V5KX09YDtcbiAgICAgICAgfVxuICAgICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoXG4gICAgICAgICAgYENhbm5vdCBzdHJpbmdpZnkgdHlwZSAke3R5cGVvZiB2YWx1ZX07IEV4cGVjdGVkIHN0cmluZywgbnVtYmVyLCBib29sZWFuLCBvciBudWxsLiBJZiB5b3UgbmVlZCB0byBwYXNzIG5lc3RlZCBxdWVyeSBwYXJhbWV0ZXJzLCB5b3UgY2FuIG1hbnVhbGx5IGVuY29kZSB0aGVtLCBlLmcuIHsgcXVlcnk6IHsgJ2Zvb1trZXkxXSc6IHZhbHVlMSwgJ2Zvb1trZXkyXSc6IHZhbHVlMiB9IH0sIGFuZCBwbGVhc2Ugb3BlbiBhIEdpdEh1YiBpc3N1ZSByZXF1ZXN0aW5nIGJldHRlciBzdXBwb3J0IGZvciB5b3VyIHVzZSBjYXNlLmAsXG4gICAgICAgICk7XG4gICAgICB9KVxuICAgICAgLmpvaW4oJyYnKTtcbiAgfVxuXG4gIGFzeW5jIGZldGNoV2l0aFRpbWVvdXQoXG4gICAgdXJsOiBSZXF1ZXN0SW5mbyxcbiAgICBpbml0OiBSZXF1ZXN0SW5pdCB8IHVuZGVmaW5lZCxcbiAgICBtczogbnVtYmVyLFxuICAgIGNvbnRyb2xsZXI6IEFib3J0Q29udHJvbGxlcixcbiAgKTogUHJvbWlzZTxSZXNwb25zZT4ge1xuICAgIGNvbnN0IHsgc2lnbmFsLCAuLi5vcHRpb25zIH0gPSBpbml0IHx8IHt9O1xuICAgIGlmIChzaWduYWwpIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+IGNvbnRyb2xsZXIuYWJvcnQoKSk7XG5cbiAgICBjb25zdCB0aW1lb3V0ID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIG1zKTtcblxuICAgIGNvbnN0IGZldGNoT3B0aW9ucyA9IHtcbiAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwgYXMgYW55LFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICB9O1xuICAgIGlmIChmZXRjaE9wdGlvbnMubWV0aG9kKSB7XG4gICAgICAvLyBDdXN0b20gbWV0aG9kcyBsaWtlICdwYXRjaCcgbmVlZCB0byBiZSB1cHBlcmNhc2VkXG4gICAgICAvLyBTZWUgaHR0cHM6Ly9naXRodWIuY29tL25vZGVqcy91bmRpY2kvaXNzdWVzLzIyOTRcbiAgICAgIGZldGNoT3B0aW9ucy5tZXRob2QgPSBmZXRjaE9wdGlvbnMubWV0aG9kLnRvVXBwZXJDYXNlKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIChcbiAgICAgIC8vIHVzZSB1bmRlZmluZWQgdGhpcyBiaW5kaW5nOyBmZXRjaCBlcnJvcnMgaWYgYm91bmQgdG8gc29tZXRoaW5nIGVsc2UgaW4gYnJvd3Nlci9jbG91ZGZsYXJlXG4gICAgICB0aGlzLmZldGNoLmNhbGwodW5kZWZpbmVkLCB1cmwsIGZldGNoT3B0aW9ucykuZmluYWxseSgoKSA9PiB7XG4gICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcbiAgICAgIH0pXG4gICAgKTtcbiAgfVxuXG4gIHByaXZhdGUgc2hvdWxkUmV0cnkocmVzcG9uc2U6IFJlc3BvbnNlKTogYm9vbGVhbiB7XG4gICAgLy8gTm90ZSB0aGlzIGlzIG5vdCBhIHN0YW5kYXJkIGhlYWRlci5cbiAgICBjb25zdCBzaG91bGRSZXRyeUhlYWRlciA9IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCd4LXNob3VsZC1yZXRyeScpO1xuXG4gICAgLy8gSWYgdGhlIHNlcnZlciBleHBsaWNpdGx5IHNheXMgd2hldGhlciBvciBub3QgdG8gcmV0cnksIG9iZXkuXG4gICAgaWYgKHNob3VsZFJldHJ5SGVhZGVyID09PSAndHJ1ZScpIHJldHVybiB0cnVlO1xuICAgIGlmIChzaG91bGRSZXRyeUhlYWRlciA9PT0gJ2ZhbHNlJykgcmV0dXJuIGZhbHNlO1xuXG4gICAgLy8gUmV0cnkgb24gcmVxdWVzdCB0aW1lb3V0cy5cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDgpIHJldHVybiB0cnVlO1xuXG4gICAgLy8gUmV0cnkgb24gbG9jayB0aW1lb3V0cy5cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID09PSA0MDkpIHJldHVybiB0cnVlO1xuXG4gICAgLy8gUmV0cnkgb24gcmF0ZSBsaW1pdHMuXG4gICAgaWYgKHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSByZXR1cm4gdHJ1ZTtcblxuICAgIC8vIFJldHJ5IGludGVybmFsIGVycm9ycy5cbiAgICBpZiAocmVzcG9uc2Uuc3RhdHVzID49IDUwMCkgcmV0dXJuIHRydWU7XG5cbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIHJldHJ5UmVxdWVzdChcbiAgICBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zLFxuICAgIHJldHJpZXNSZW1haW5pbmc6IG51bWJlcixcbiAgICByZXNwb25zZUhlYWRlcnM/OiBIZWFkZXJzIHwgdW5kZWZpbmVkLFxuICApOiBQcm9taXNlPEFQSVJlc3BvbnNlUHJvcHM+IHtcbiAgICBsZXQgdGltZW91dE1pbGxpczogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gICAgLy8gTm90ZSB0aGUgYHJldHJ5LWFmdGVyLW1zYCBoZWFkZXIgbWF5IG5vdCBiZSBzdGFuZGFyZCwgYnV0IGlzIGEgZ29vZCBpZGVhIGFuZCB3ZSdkIGxpa2UgcHJvYWN0aXZlIHN1cHBvcnQgZm9yIGl0LlxuICAgIGNvbnN0IHJldHJ5QWZ0ZXJNaWxsaXNIZWFkZXIgPSByZXNwb25zZUhlYWRlcnM/LlsncmV0cnktYWZ0ZXItbXMnXTtcbiAgICBpZiAocmV0cnlBZnRlck1pbGxpc0hlYWRlcikge1xuICAgICAgY29uc3QgdGltZW91dE1zID0gcGFyc2VGbG9hdChyZXRyeUFmdGVyTWlsbGlzSGVhZGVyKTtcbiAgICAgIGlmICghTnVtYmVyLmlzTmFOKHRpbWVvdXRNcykpIHtcbiAgICAgICAgdGltZW91dE1pbGxpcyA9IHRpbWVvdXRNcztcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyBBYm91dCB0aGUgUmV0cnktQWZ0ZXIgaGVhZGVyOiBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9IVFRQL0hlYWRlcnMvUmV0cnktQWZ0ZXJcbiAgICBjb25zdCByZXRyeUFmdGVySGVhZGVyID0gcmVzcG9uc2VIZWFkZXJzPy5bJ3JldHJ5LWFmdGVyJ107XG4gICAgaWYgKHJldHJ5QWZ0ZXJIZWFkZXIgJiYgIXRpbWVvdXRNaWxsaXMpIHtcbiAgICAgIGNvbnN0IHRpbWVvdXRTZWNvbmRzID0gcGFyc2VGbG9hdChyZXRyeUFmdGVySGVhZGVyKTtcbiAgICAgIGlmICghTnVtYmVyLmlzTmFOKHRpbWVvdXRTZWNvbmRzKSkge1xuICAgICAgICB0aW1lb3V0TWlsbGlzID0gdGltZW91dFNlY29uZHMgKiAxMDAwO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGltZW91dE1pbGxpcyA9IERhdGUucGFyc2UocmV0cnlBZnRlckhlYWRlcikgLSBEYXRlLm5vdygpO1xuICAgICAgfVxuICAgIH1cblxuICAgIC8vIElmIHRoZSBBUEkgYXNrcyB1cyB0byB3YWl0IGEgY2VydGFpbiBhbW91bnQgb2YgdGltZSAoYW5kIGl0J3MgYSByZWFzb25hYmxlIGFtb3VudCksXG4gICAgLy8ganVzdCBkbyB3aGF0IGl0IHNheXMsIGJ1dCBvdGhlcndpc2UgY2FsY3VsYXRlIGEgZGVmYXVsdFxuICAgIGlmICghKHRpbWVvdXRNaWxsaXMgJiYgMCA8PSB0aW1lb3V0TWlsbGlzICYmIHRpbWVvdXRNaWxsaXMgPCA2MCAqIDEwMDApKSB7XG4gICAgICBjb25zdCBtYXhSZXRyaWVzID0gb3B0aW9ucy5tYXhSZXRyaWVzID8/IHRoaXMubWF4UmV0cmllcztcbiAgICAgIHRpbWVvdXRNaWxsaXMgPSB0aGlzLmNhbGN1bGF0ZURlZmF1bHRSZXRyeVRpbWVvdXRNaWxsaXMocmV0cmllc1JlbWFpbmluZywgbWF4UmV0cmllcyk7XG4gICAgfVxuICAgIGF3YWl0IHNsZWVwKHRpbWVvdXRNaWxsaXMpO1xuXG4gICAgcmV0dXJuIHRoaXMubWFrZVJlcXVlc3Qob3B0aW9ucywgcmV0cmllc1JlbWFpbmluZyAtIDEpO1xuICB9XG5cbiAgcHJpdmF0ZSBjYWxjdWxhdGVEZWZhdWx0UmV0cnlUaW1lb3V0TWlsbGlzKHJldHJpZXNSZW1haW5pbmc6IG51bWJlciwgbWF4UmV0cmllczogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBpbml0aWFsUmV0cnlEZWxheSA9IDAuNTtcbiAgICBjb25zdCBtYXhSZXRyeURlbGF5ID0gOC4wO1xuXG4gICAgY29uc3QgbnVtUmV0cmllcyA9IG1heFJldHJpZXMgLSByZXRyaWVzUmVtYWluaW5nO1xuXG4gICAgLy8gQXBwbHkgZXhwb25lbnRpYWwgYmFja29mZiwgYnV0IG5vdCBtb3JlIHRoYW4gdGhlIG1heC5cbiAgICBjb25zdCBzbGVlcFNlY29uZHMgPSBNYXRoLm1pbihpbml0aWFsUmV0cnlEZWxheSAqIE1hdGgucG93KDIsIG51bVJldHJpZXMpLCBtYXhSZXRyeURlbGF5KTtcblxuICAgIC8vIEFwcGx5IHNvbWUgaml0dGVyLCB0YWtlIHVwIHRvIGF0IG1vc3QgMjUgcGVyY2VudCBvZiB0aGUgcmV0cnkgdGltZS5cbiAgICBjb25zdCBqaXR0ZXIgPSAxIC0gTWF0aC5yYW5kb20oKSAqIDAuMjU7XG5cbiAgICByZXR1cm4gc2xlZXBTZWNvbmRzICogaml0dGVyICogMTAwMDtcbiAgfVxuXG4gIHByaXZhdGUgZ2V0VXNlckFnZW50KCk6IHN0cmluZyB7XG4gICAgcmV0dXJuIGAke3RoaXMuY29uc3RydWN0b3IubmFtZX0vSlMgJHtWRVJTSU9OfWA7XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgUGFnZUluZm8gPSB7IHVybDogVVJMIH0gfCB7IHBhcmFtczogUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBudWxsIH07XG5cbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBBYnN0cmFjdFBhZ2U8SXRlbT4gaW1wbGVtZW50cyBBc3luY0l0ZXJhYmxlPEl0ZW0+IHtcbiAgI2NsaWVudDogQVBJQ2xpZW50O1xuICBwcm90ZWN0ZWQgb3B0aW9uczogRmluYWxSZXF1ZXN0T3B0aW9ucztcblxuICBwcm90ZWN0ZWQgcmVzcG9uc2U6IFJlc3BvbnNlO1xuICBwcm90ZWN0ZWQgYm9keTogdW5rbm93bjtcblxuICBjb25zdHJ1Y3RvcihjbGllbnQ6IEFQSUNsaWVudCwgcmVzcG9uc2U6IFJlc3BvbnNlLCBib2R5OiB1bmtub3duLCBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zKSB7XG4gICAgdGhpcy4jY2xpZW50ID0gY2xpZW50O1xuICAgIHRoaXMub3B0aW9ucyA9IG9wdGlvbnM7XG4gICAgdGhpcy5yZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgIHRoaXMuYm9keSA9IGJvZHk7XG4gIH1cblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgVXNlIG5leHRQYWdlSW5mbyBpbnN0ZWFkXG4gICAqL1xuICBhYnN0cmFjdCBuZXh0UGFnZVBhcmFtcygpOiBQYXJ0aWFsPFJlY29yZDxzdHJpbmcsIHVua25vd24+PiB8IG51bGw7XG4gIGFic3RyYWN0IG5leHRQYWdlSW5mbygpOiBQYWdlSW5mbyB8IG51bGw7XG5cbiAgYWJzdHJhY3QgZ2V0UGFnaW5hdGVkSXRlbXMoKTogSXRlbVtdO1xuXG4gIGhhc05leHRQYWdlKCk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IGl0ZW1zID0gdGhpcy5nZXRQYWdpbmF0ZWRJdGVtcygpO1xuICAgIGlmICghaXRlbXMubGVuZ3RoKSByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRoaXMubmV4dFBhZ2VJbmZvKCkgIT0gbnVsbDtcbiAgfVxuXG4gIGFzeW5jIGdldE5leHRQYWdlKCk6IFByb21pc2U8dGhpcz4ge1xuICAgIGNvbnN0IG5leHRJbmZvID0gdGhpcy5uZXh0UGFnZUluZm8oKTtcbiAgICBpZiAoIW5leHRJbmZvKSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoXG4gICAgICAgICdObyBuZXh0IHBhZ2UgZXhwZWN0ZWQ7IHBsZWFzZSBjaGVjayBgLmhhc05leHRQYWdlKClgIGJlZm9yZSBjYWxsaW5nIGAuZ2V0TmV4dFBhZ2UoKWAuJyxcbiAgICAgICk7XG4gICAgfVxuICAgIGNvbnN0IG5leHRPcHRpb25zID0geyAuLi50aGlzLm9wdGlvbnMgfTtcbiAgICBpZiAoJ3BhcmFtcycgaW4gbmV4dEluZm8gJiYgdHlwZW9mIG5leHRPcHRpb25zLnF1ZXJ5ID09PSAnb2JqZWN0Jykge1xuICAgICAgbmV4dE9wdGlvbnMucXVlcnkgPSB7IC4uLm5leHRPcHRpb25zLnF1ZXJ5LCAuLi5uZXh0SW5mby5wYXJhbXMgfTtcbiAgICB9IGVsc2UgaWYgKCd1cmwnIGluIG5leHRJbmZvKSB7XG4gICAgICBjb25zdCBwYXJhbXMgPSBbLi4uT2JqZWN0LmVudHJpZXMobmV4dE9wdGlvbnMucXVlcnkgfHwge30pLCAuLi5uZXh0SW5mby51cmwuc2VhcmNoUGFyYW1zLmVudHJpZXMoKV07XG4gICAgICBmb3IgKGNvbnN0IFtrZXksIHZhbHVlXSBvZiBwYXJhbXMpIHtcbiAgICAgICAgbmV4dEluZm8udXJsLnNlYXJjaFBhcmFtcy5zZXQoa2V5LCB2YWx1ZSBhcyBhbnkpO1xuICAgICAgfVxuICAgICAgbmV4dE9wdGlvbnMucXVlcnkgPSB1bmRlZmluZWQ7XG4gICAgICBuZXh0T3B0aW9ucy5wYXRoID0gbmV4dEluZm8udXJsLnRvU3RyaW5nKCk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCB0aGlzLiNjbGllbnQucmVxdWVzdEFQSUxpc3QodGhpcy5jb25zdHJ1Y3RvciBhcyBhbnksIG5leHRPcHRpb25zKTtcbiAgfVxuXG4gIGFzeW5jICppdGVyUGFnZXMoKTogQXN5bmNHZW5lcmF0b3I8dGhpcz4ge1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tdGhpcy1hbGlhc1xuICAgIGxldCBwYWdlOiB0aGlzID0gdGhpcztcbiAgICB5aWVsZCBwYWdlO1xuICAgIHdoaWxlIChwYWdlLmhhc05leHRQYWdlKCkpIHtcbiAgICAgIHBhZ2UgPSBhd2FpdCBwYWdlLmdldE5leHRQYWdlKCk7XG4gICAgICB5aWVsZCBwYWdlO1xuICAgIH1cbiAgfVxuXG4gIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk6IEFzeW5jR2VuZXJhdG9yPEl0ZW0+IHtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IHBhZ2Ugb2YgdGhpcy5pdGVyUGFnZXMoKSkge1xuICAgICAgZm9yIChjb25zdCBpdGVtIG9mIHBhZ2UuZ2V0UGFnaW5hdGVkSXRlbXMoKSkge1xuICAgICAgICB5aWVsZCBpdGVtO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG4vKipcbiAqIFRoaXMgc3ViY2xhc3Mgb2YgUHJvbWlzZSB3aWxsIHJlc29sdmUgdG8gYW4gaW5zdGFudGlhdGVkIFBhZ2Ugb25jZSB0aGUgcmVxdWVzdCBjb21wbGV0ZXMuXG4gKlxuICogSXQgYWxzbyBpbXBsZW1lbnRzIEFzeW5jSXRlcmFibGUgdG8gYWxsb3cgYXV0by1wYWdpbmF0aW5nIGl0ZXJhdGlvbiBvbiBhbiB1bmF3YWl0ZWQgbGlzdCBjYWxsLCBlZzpcbiAqXG4gKiAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgY2xpZW50Lml0ZW1zLmxpc3QoKSkge1xuICogICAgICBjb25zb2xlLmxvZyhpdGVtKVxuICogICAgfVxuICovXG5leHBvcnQgY2xhc3MgUGFnZVByb21pc2U8XG4gICAgUGFnZUNsYXNzIGV4dGVuZHMgQWJzdHJhY3RQYWdlPEl0ZW0+LFxuICAgIEl0ZW0gPSBSZXR1cm5UeXBlPFBhZ2VDbGFzc1snZ2V0UGFnaW5hdGVkSXRlbXMnXT5bbnVtYmVyXSxcbiAgPlxuICBleHRlbmRzIEFQSVByb21pc2U8UGFnZUNsYXNzPlxuICBpbXBsZW1lbnRzIEFzeW5jSXRlcmFibGU8SXRlbT5cbntcbiAgY29uc3RydWN0b3IoXG4gICAgY2xpZW50OiBBUElDbGllbnQsXG4gICAgcmVxdWVzdDogUHJvbWlzZTxBUElSZXNwb25zZVByb3BzPixcbiAgICBQYWdlOiBuZXcgKC4uLmFyZ3M6IENvbnN0cnVjdG9yUGFyYW1ldGVyczx0eXBlb2YgQWJzdHJhY3RQYWdlPikgPT4gUGFnZUNsYXNzLFxuICApIHtcbiAgICBzdXBlcihcbiAgICAgIHJlcXVlc3QsXG4gICAgICBhc3luYyAocHJvcHMpID0+XG4gICAgICAgIG5ldyBQYWdlKFxuICAgICAgICAgIGNsaWVudCxcbiAgICAgICAgICBwcm9wcy5yZXNwb25zZSxcbiAgICAgICAgICBhd2FpdCBkZWZhdWx0UGFyc2VSZXNwb25zZShwcm9wcyksXG4gICAgICAgICAgcHJvcHMub3B0aW9ucyxcbiAgICAgICAgKSBhcyBXaXRoUmVxdWVzdElEPFBhZ2VDbGFzcz4sXG4gICAgKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBbGxvdyBhdXRvLXBhZ2luYXRpbmcgaXRlcmF0aW9uIG9uIGFuIHVuYXdhaXRlZCBsaXN0IGNhbGwsIGVnOlxuICAgKlxuICAgKiAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgY2xpZW50Lml0ZW1zLmxpc3QoKSkge1xuICAgKiAgICAgIGNvbnNvbGUubG9nKGl0ZW0pXG4gICAqICAgIH1cbiAgICovXG4gIGFzeW5jICpbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk6IEFzeW5jR2VuZXJhdG9yPEl0ZW0+IHtcbiAgICBjb25zdCBwYWdlID0gYXdhaXQgdGhpcztcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGl0ZW0gb2YgcGFnZSkge1xuICAgICAgeWllbGQgaXRlbTtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGNvbnN0IGNyZWF0ZVJlc3BvbnNlSGVhZGVycyA9IChcbiAgaGVhZGVyczogQXdhaXRlZDxSZXR1cm5UeXBlPEZldGNoPj5bJ2hlYWRlcnMnXSxcbik6IFJlY29yZDxzdHJpbmcsIHN0cmluZz4gPT4ge1xuICByZXR1cm4gbmV3IFByb3h5KFxuICAgIE9iamVjdC5mcm9tRW50cmllcyhcbiAgICAgIC8vIEB0cy1pZ25vcmVcbiAgICAgIGhlYWRlcnMuZW50cmllcygpLFxuICAgICksXG4gICAge1xuICAgICAgZ2V0KHRhcmdldCwgbmFtZSkge1xuICAgICAgICBjb25zdCBrZXkgPSBuYW1lLnRvU3RyaW5nKCk7XG4gICAgICAgIHJldHVybiB0YXJnZXRba2V5LnRvTG93ZXJDYXNlKCldIHx8IHRhcmdldFtrZXldO1xuICAgICAgfSxcbiAgICB9LFxuICApO1xufTtcblxudHlwZSBIVFRQTWV0aG9kID0gJ2dldCcgfCAncG9zdCcgfCAncHV0JyB8ICdwYXRjaCcgfCAnZGVsZXRlJztcblxuZXhwb3J0IHR5cGUgUmVxdWVzdENsaWVudCA9IHsgZmV0Y2g6IEZldGNoIH07XG5leHBvcnQgdHlwZSBIZWFkZXJzID0gUmVjb3JkPHN0cmluZywgc3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZD47XG5leHBvcnQgdHlwZSBEZWZhdWx0UXVlcnkgPSBSZWNvcmQ8c3RyaW5nLCBzdHJpbmcgfCB1bmRlZmluZWQ+O1xuZXhwb3J0IHR5cGUgS2V5c0VudW08VD4gPSB7IFtQIGluIGtleW9mIFJlcXVpcmVkPFQ+XTogdHJ1ZSB9O1xuXG5leHBvcnQgdHlwZSBSZXF1ZXN0T3B0aW9uczxcbiAgUmVxID0gdW5rbm93biB8IFJlY29yZDxzdHJpbmcsIHVua25vd24+IHwgUmVhZGFibGUgfCBCbG9iTGlrZSB8IEFycmF5QnVmZmVyVmlldyB8IEFycmF5QnVmZmVyLFxuPiA9IHtcbiAgbWV0aG9kPzogSFRUUE1ldGhvZDtcbiAgcGF0aD86IHN0cmluZztcbiAgcXVlcnk/OiBSZXEgfCB1bmRlZmluZWQ7XG4gIGJvZHk/OiBSZXEgfCBudWxsIHwgdW5kZWZpbmVkO1xuICBoZWFkZXJzPzogSGVhZGVycyB8IHVuZGVmaW5lZDtcblxuICBtYXhSZXRyaWVzPzogbnVtYmVyO1xuICBzdHJlYW0/OiBib29sZWFuIHwgdW5kZWZpbmVkO1xuICB0aW1lb3V0PzogbnVtYmVyO1xuICBodHRwQWdlbnQ/OiBBZ2VudDtcbiAgc2lnbmFsPzogQWJvcnRTaWduYWwgfCB1bmRlZmluZWQgfCBudWxsO1xuICBpZGVtcG90ZW5jeUtleT86IHN0cmluZztcblxuICBfX2JpbmFyeVJlcXVlc3Q/OiBib29sZWFuIHwgdW5kZWZpbmVkO1xuICBfX2JpbmFyeVJlc3BvbnNlPzogYm9vbGVhbiB8IHVuZGVmaW5lZDtcbiAgX19zdHJlYW1DbGFzcz86IHR5cGVvZiBTdHJlYW07XG59O1xuXG4vLyBUaGlzIGlzIHJlcXVpcmVkIHNvIHRoYXQgd2UgY2FuIGRldGVybWluZSBpZiBhIGdpdmVuIG9iamVjdCBtYXRjaGVzIHRoZSBSZXF1ZXN0T3B0aW9uc1xuLy8gdHlwZSBhdCBydW50aW1lLiBXaGlsZSB0aGlzIHJlcXVpcmVzIGR1cGxpY2F0aW9uLCBpdCBpcyBlbmZvcmNlZCBieSB0aGUgVHlwZVNjcmlwdFxuLy8gY29tcGlsZXIgc3VjaCB0aGF0IGFueSBtaXNzaW5nIC8gZXh0cmFuZW91cyBrZXlzIHdpbGwgY2F1c2UgYW4gZXJyb3IuXG5jb25zdCByZXF1ZXN0T3B0aW9uc0tleXM6IEtleXNFbnVtPFJlcXVlc3RPcHRpb25zPiA9IHtcbiAgbWV0aG9kOiB0cnVlLFxuICBwYXRoOiB0cnVlLFxuICBxdWVyeTogdHJ1ZSxcbiAgYm9keTogdHJ1ZSxcbiAgaGVhZGVyczogdHJ1ZSxcblxuICBtYXhSZXRyaWVzOiB0cnVlLFxuICBzdHJlYW06IHRydWUsXG4gIHRpbWVvdXQ6IHRydWUsXG4gIGh0dHBBZ2VudDogdHJ1ZSxcbiAgc2lnbmFsOiB0cnVlLFxuICBpZGVtcG90ZW5jeUtleTogdHJ1ZSxcblxuICBfX2JpbmFyeVJlcXVlc3Q6IHRydWUsXG4gIF9fYmluYXJ5UmVzcG9uc2U6IHRydWUsXG4gIF9fc3RyZWFtQ2xhc3M6IHRydWUsXG59O1xuXG5leHBvcnQgY29uc3QgaXNSZXF1ZXN0T3B0aW9ucyA9IChvYmo6IHVua25vd24pOiBvYmogaXMgUmVxdWVzdE9wdGlvbnMgPT4ge1xuICByZXR1cm4gKFxuICAgIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmXG4gICAgb2JqICE9PSBudWxsICYmXG4gICAgIWlzRW1wdHlPYmoob2JqKSAmJlxuICAgIE9iamVjdC5rZXlzKG9iaikuZXZlcnkoKGspID0+IGhhc093bihyZXF1ZXN0T3B0aW9uc0tleXMsIGspKVxuICApO1xufTtcblxuZXhwb3J0IHR5cGUgRmluYWxSZXF1ZXN0T3B0aW9uczxSZXEgPSB1bmtub3duIHwgUmVjb3JkPHN0cmluZywgdW5rbm93bj4gfCBSZWFkYWJsZSB8IERhdGFWaWV3PiA9XG4gIFJlcXVlc3RPcHRpb25zPFJlcT4gJiB7XG4gICAgbWV0aG9kOiBIVFRQTWV0aG9kO1xuICAgIHBhdGg6IHN0cmluZztcbiAgfTtcblxuZGVjbGFyZSBjb25zdCBEZW5vOiBhbnk7XG5kZWNsYXJlIGNvbnN0IEVkZ2VSdW50aW1lOiBhbnk7XG50eXBlIEFyY2ggPSAneDMyJyB8ICd4NjQnIHwgJ2FybScgfCAnYXJtNjQnIHwgYG90aGVyOiR7c3RyaW5nfWAgfCAndW5rbm93bic7XG50eXBlIFBsYXRmb3JtTmFtZSA9XG4gIHwgJ01hY09TJ1xuICB8ICdMaW51eCdcbiAgfCAnV2luZG93cydcbiAgfCAnRnJlZUJTRCdcbiAgfCAnT3BlbkJTRCdcbiAgfCAnaU9TJ1xuICB8ICdBbmRyb2lkJ1xuICB8IGBPdGhlcjoke3N0cmluZ31gXG4gIHwgJ1Vua25vd24nO1xudHlwZSBCcm93c2VyID0gJ2llJyB8ICdlZGdlJyB8ICdjaHJvbWUnIHwgJ2ZpcmVmb3gnIHwgJ3NhZmFyaSc7XG50eXBlIFBsYXRmb3JtUHJvcGVydGllcyA9IHtcbiAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnO1xuICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogc3RyaW5nO1xuICAnWC1TdGFpbmxlc3MtT1MnOiBQbGF0Zm9ybU5hbWU7XG4gICdYLVN0YWlubGVzcy1BcmNoJzogQXJjaDtcbiAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnbm9kZScgfCAnZGVubycgfCAnZWRnZScgfCBgYnJvd3Nlcjoke0Jyb3dzZXJ9YCB8ICd1bmtub3duJztcbiAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUtVmVyc2lvbic6IHN0cmluZztcbn07XG5jb25zdCBnZXRQbGF0Zm9ybVByb3BlcnRpZXMgPSAoKTogUGxhdGZvcm1Qcm9wZXJ0aWVzID0+IHtcbiAgaWYgKHR5cGVvZiBEZW5vICE9PSAndW5kZWZpbmVkJyAmJiBEZW5vLmJ1aWxkICE9IG51bGwpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiBub3JtYWxpemVQbGF0Zm9ybShEZW5vLmJ1aWxkLm9zKSxcbiAgICAgICdYLVN0YWlubGVzcy1BcmNoJzogbm9ybWFsaXplQXJjaChEZW5vLmJ1aWxkLmFyY2gpLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnZGVubycsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzpcbiAgICAgICAgdHlwZW9mIERlbm8udmVyc2lvbiA9PT0gJ3N0cmluZycgPyBEZW5vLnZlcnNpb24gOiBEZW5vLnZlcnNpb24/LmRlbm8gPz8gJ3Vua25vd24nLFxuICAgIH07XG4gIH1cbiAgaWYgKHR5cGVvZiBFZGdlUnVudGltZSAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiAnVW5rbm93bicsXG4gICAgICAnWC1TdGFpbmxlc3MtQXJjaCc6IGBvdGhlcjoke0VkZ2VSdW50aW1lfWAsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZSc6ICdlZGdlJyxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBwcm9jZXNzLnZlcnNpb24sXG4gICAgfTtcbiAgfVxuICAvLyBDaGVjayBpZiBOb2RlLmpzXG4gIGlmIChPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnID8gcHJvY2VzcyA6IDApID09PSAnW29iamVjdCBwcm9jZXNzXScpIHtcbiAgICByZXR1cm4ge1xuICAgICAgJ1gtU3RhaW5sZXNzLUxhbmcnOiAnanMnLFxuICAgICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgICAnWC1TdGFpbmxlc3MtT1MnOiBub3JtYWxpemVQbGF0Zm9ybShwcm9jZXNzLnBsYXRmb3JtKSxcbiAgICAgICdYLVN0YWlubGVzcy1BcmNoJzogbm9ybWFsaXplQXJjaChwcm9jZXNzLmFyY2gpLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiAnbm9kZScsXG4gICAgICAnWC1TdGFpbmxlc3MtUnVudGltZS1WZXJzaW9uJzogcHJvY2Vzcy52ZXJzaW9uLFxuICAgIH07XG4gIH1cblxuICBjb25zdCBicm93c2VySW5mbyA9IGdldEJyb3dzZXJJbmZvKCk7XG4gIGlmIChicm93c2VySW5mbykge1xuICAgIHJldHVybiB7XG4gICAgICAnWC1TdGFpbmxlc3MtTGFuZyc6ICdqcycsXG4gICAgICAnWC1TdGFpbmxlc3MtUGFja2FnZS1WZXJzaW9uJzogVkVSU0lPTixcbiAgICAgICdYLVN0YWlubGVzcy1PUyc6ICdVbmtub3duJyxcbiAgICAgICdYLVN0YWlubGVzcy1BcmNoJzogJ3Vua25vd24nLFxuICAgICAgJ1gtU3RhaW5sZXNzLVJ1bnRpbWUnOiBgYnJvd3Nlcjoke2Jyb3dzZXJJbmZvLmJyb3dzZXJ9YCxcbiAgICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiBicm93c2VySW5mby52ZXJzaW9uLFxuICAgIH07XG4gIH1cblxuICAvLyBUT0RPIGFkZCBzdXBwb3J0IGZvciBDbG91ZGZsYXJlIHdvcmtlcnMsIGV0Yy5cbiAgcmV0dXJuIHtcbiAgICAnWC1TdGFpbmxlc3MtTGFuZyc6ICdqcycsXG4gICAgJ1gtU3RhaW5sZXNzLVBhY2thZ2UtVmVyc2lvbic6IFZFUlNJT04sXG4gICAgJ1gtU3RhaW5sZXNzLU9TJzogJ1Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1BcmNoJzogJ3Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1SdW50aW1lJzogJ3Vua25vd24nLFxuICAgICdYLVN0YWlubGVzcy1SdW50aW1lLVZlcnNpb24nOiAndW5rbm93bicsXG4gIH07XG59O1xuXG50eXBlIEJyb3dzZXJJbmZvID0ge1xuICBicm93c2VyOiBCcm93c2VyO1xuICB2ZXJzaW9uOiBzdHJpbmc7XG59O1xuXG5kZWNsYXJlIGNvbnN0IG5hdmlnYXRvcjogeyB1c2VyQWdlbnQ6IHN0cmluZyB9IHwgdW5kZWZpbmVkO1xuXG4vLyBOb3RlOiBtb2RpZmllZCBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9KUy1EZXZUb29scy9ob3N0LWVudmlyb25tZW50L2Jsb2IvYjFhYjc5ZWNkZTM3ZGI1ZDZlMTYzYzA1MGU1NGZlN2QyODdkN2M5Mi9zcmMvaXNvbW9ycGhpYy5icm93c2VyLnRzXG5mdW5jdGlvbiBnZXRCcm93c2VySW5mbygpOiBCcm93c2VySW5mbyB8IG51bGwge1xuICBpZiAodHlwZW9mIG5hdmlnYXRvciA9PT0gJ3VuZGVmaW5lZCcgfHwgIW5hdmlnYXRvcikge1xuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgLy8gTk9URTogVGhlIG9yZGVyIG1hdHRlcnMgaGVyZSFcbiAgY29uc3QgYnJvd3NlclBhdHRlcm5zID0gW1xuICAgIHsga2V5OiAnZWRnZScgYXMgY29uc3QsIHBhdHRlcm46IC9FZGdlKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdpZScgYXMgY29uc3QsIHBhdHRlcm46IC9NU0lFKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdpZScgYXMgY29uc3QsIHBhdHRlcm46IC9UcmlkZW50KD86LipydlxcOihcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdjaHJvbWUnIGFzIGNvbnN0LCBwYXR0ZXJuOiAvQ2hyb21lKD86XFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8vIH0sXG4gICAgeyBrZXk6ICdmaXJlZm94JyBhcyBjb25zdCwgcGF0dGVybjogL0ZpcmVmb3goPzpcXFcrKFxcZCspXFwuKFxcZCspKD86XFwuKFxcZCspKT8pPy8gfSxcbiAgICB7IGtleTogJ3NhZmFyaScgYXMgY29uc3QsIHBhdHRlcm46IC8oPzpWZXJzaW9uXFxXKyhcXGQrKVxcLihcXGQrKSg/OlxcLihcXGQrKSk/KT8oPzpcXFcrTW9iaWxlXFxTKik/XFxXK1NhZmFyaS8gfSxcbiAgXTtcblxuICAvLyBGaW5kIHRoZSBGSVJTVCBtYXRjaGluZyBicm93c2VyXG4gIGZvciAoY29uc3QgeyBrZXksIHBhdHRlcm4gfSBvZiBicm93c2VyUGF0dGVybnMpIHtcbiAgICBjb25zdCBtYXRjaCA9IHBhdHRlcm4uZXhlYyhuYXZpZ2F0b3IudXNlckFnZW50KTtcbiAgICBpZiAobWF0Y2gpIHtcbiAgICAgIGNvbnN0IG1ham9yID0gbWF0Y2hbMV0gfHwgMDtcbiAgICAgIGNvbnN0IG1pbm9yID0gbWF0Y2hbMl0gfHwgMDtcbiAgICAgIGNvbnN0IHBhdGNoID0gbWF0Y2hbM10gfHwgMDtcblxuICAgICAgcmV0dXJuIHsgYnJvd3Nlcjoga2V5LCB2ZXJzaW9uOiBgJHttYWpvcn0uJHttaW5vcn0uJHtwYXRjaH1gIH07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIG51bGw7XG59XG5cbmNvbnN0IG5vcm1hbGl6ZUFyY2ggPSAoYXJjaDogc3RyaW5nKTogQXJjaCA9PiB7XG4gIC8vIE5vZGUgZG9jczpcbiAgLy8gLSBodHRwczovL25vZGVqcy5vcmcvYXBpL3Byb2Nlc3MuaHRtbCNwcm9jZXNzYXJjaFxuICAvLyBEZW5vIGRvY3M6XG4gIC8vIC0gaHR0cHM6Ly9kb2MuZGVuby5sYW5kL2Rlbm8vc3RhYmxlL34vRGVuby5idWlsZFxuICBpZiAoYXJjaCA9PT0gJ3gzMicpIHJldHVybiAneDMyJztcbiAgaWYgKGFyY2ggPT09ICd4ODZfNjQnIHx8IGFyY2ggPT09ICd4NjQnKSByZXR1cm4gJ3g2NCc7XG4gIGlmIChhcmNoID09PSAnYXJtJykgcmV0dXJuICdhcm0nO1xuICBpZiAoYXJjaCA9PT0gJ2FhcmNoNjQnIHx8IGFyY2ggPT09ICdhcm02NCcpIHJldHVybiAnYXJtNjQnO1xuICBpZiAoYXJjaCkgcmV0dXJuIGBvdGhlcjoke2FyY2h9YDtcbiAgcmV0dXJuICd1bmtub3duJztcbn07XG5cbmNvbnN0IG5vcm1hbGl6ZVBsYXRmb3JtID0gKHBsYXRmb3JtOiBzdHJpbmcpOiBQbGF0Zm9ybU5hbWUgPT4ge1xuICAvLyBOb2RlIHBsYXRmb3JtczpcbiAgLy8gLSBodHRwczovL25vZGVqcy5vcmcvYXBpL3Byb2Nlc3MuaHRtbCNwcm9jZXNzcGxhdGZvcm1cbiAgLy8gRGVubyBwbGF0Zm9ybXM6XG4gIC8vIC0gaHR0cHM6Ly9kb2MuZGVuby5sYW5kL2Rlbm8vc3RhYmxlL34vRGVuby5idWlsZFxuICAvLyAtIGh0dHBzOi8vZ2l0aHViLmNvbS9kZW5vbGFuZC9kZW5vL2lzc3Vlcy8xNDc5OVxuXG4gIHBsYXRmb3JtID0gcGxhdGZvcm0udG9Mb3dlckNhc2UoKTtcblxuICAvLyBOT1RFOiB0aGlzIGlPUyBjaGVjayBpcyB1bnRlc3RlZCBhbmQgbWF5IG5vdCB3b3JrXG4gIC8vIE5vZGUgZG9lcyBub3Qgd29yayBuYXRpdmVseSBvbiBJT1MsIHRoZXJlIGlzIGEgZm9yayBhdFxuICAvLyBodHRwczovL2dpdGh1Yi5jb20vbm9kZWpzLW1vYmlsZS9ub2RlanMtbW9iaWxlXG4gIC8vIGhvd2V2ZXIgaXQgaXMgdW5rbm93biBhdCB0aGUgdGltZSBvZiB3cml0aW5nIGhvdyB0byBkZXRlY3QgaWYgaXQgaXMgcnVubmluZ1xuICBpZiAocGxhdGZvcm0uaW5jbHVkZXMoJ2lvcycpKSByZXR1cm4gJ2lPUyc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ2FuZHJvaWQnKSByZXR1cm4gJ0FuZHJvaWQnO1xuICBpZiAocGxhdGZvcm0gPT09ICdkYXJ3aW4nKSByZXR1cm4gJ01hY09TJztcbiAgaWYgKHBsYXRmb3JtID09PSAnd2luMzInKSByZXR1cm4gJ1dpbmRvd3MnO1xuICBpZiAocGxhdGZvcm0gPT09ICdmcmVlYnNkJykgcmV0dXJuICdGcmVlQlNEJztcbiAgaWYgKHBsYXRmb3JtID09PSAnb3BlbmJzZCcpIHJldHVybiAnT3BlbkJTRCc7XG4gIGlmIChwbGF0Zm9ybSA9PT0gJ2xpbnV4JykgcmV0dXJuICdMaW51eCc7XG4gIGlmIChwbGF0Zm9ybSkgcmV0dXJuIGBPdGhlcjoke3BsYXRmb3JtfWA7XG4gIHJldHVybiAnVW5rbm93bic7XG59O1xuXG5sZXQgX3BsYXRmb3JtSGVhZGVyczogUGxhdGZvcm1Qcm9wZXJ0aWVzO1xuY29uc3QgZ2V0UGxhdGZvcm1IZWFkZXJzID0gKCkgPT4ge1xuICByZXR1cm4gKF9wbGF0Zm9ybUhlYWRlcnMgPz89IGdldFBsYXRmb3JtUHJvcGVydGllcygpKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzYWZlSlNPTiA9ICh0ZXh0OiBzdHJpbmcpID0+IHtcbiAgdHJ5IHtcbiAgICByZXR1cm4gSlNPTi5wYXJzZSh0ZXh0KTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgfVxufTtcblxuLy8gaHR0cHM6Ly91cmwuc3BlYy53aGF0d2cub3JnLyN1cmwtc2NoZW1lLXN0cmluZ1xuY29uc3Qgc3RhcnRzV2l0aFNjaGVtZVJlZ2V4cCA9IC9eW2Etel1bYS16MC05Ky4tXSo6L2k7XG5jb25zdCBpc0Fic29sdXRlVVJMID0gKHVybDogc3RyaW5nKTogYm9vbGVhbiA9PiB7XG4gIHJldHVybiBzdGFydHNXaXRoU2NoZW1lUmVnZXhwLnRlc3QodXJsKTtcbn07XG5cbmV4cG9ydCBjb25zdCBzbGVlcCA9IChtczogbnVtYmVyKSA9PiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCBtcykpO1xuXG5jb25zdCB2YWxpZGF0ZVBvc2l0aXZlSW50ZWdlciA9IChuYW1lOiBzdHJpbmcsIG46IHVua25vd24pOiBudW1iZXIgPT4ge1xuICBpZiAodHlwZW9mIG4gIT09ICdudW1iZXInIHx8ICFOdW1iZXIuaXNJbnRlZ2VyKG4pKSB7XG4gICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGAke25hbWV9IG11c3QgYmUgYW4gaW50ZWdlcmApO1xuICB9XG4gIGlmIChuIDwgMCkge1xuICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgJHtuYW1lfSBtdXN0IGJlIGEgcG9zaXRpdmUgaW50ZWdlcmApO1xuICB9XG4gIHJldHVybiBuO1xufTtcblxuZXhwb3J0IGNvbnN0IGNhc3RUb0Vycm9yID0gKGVycjogYW55KTogRXJyb3IgPT4ge1xuICBpZiAoZXJyIGluc3RhbmNlb2YgRXJyb3IpIHJldHVybiBlcnI7XG4gIGlmICh0eXBlb2YgZXJyID09PSAnb2JqZWN0JyAmJiBlcnIgIT09IG51bGwpIHtcbiAgICB0cnkge1xuICAgICAgcmV0dXJuIG5ldyBFcnJvcihKU09OLnN0cmluZ2lmeShlcnIpKTtcbiAgICB9IGNhdGNoIHt9XG4gIH1cbiAgcmV0dXJuIG5ldyBFcnJvcihTdHJpbmcoZXJyKSk7XG59O1xuXG5leHBvcnQgY29uc3QgZW5zdXJlUHJlc2VudCA9IDxUPih2YWx1ZTogVCB8IG51bGwgfCB1bmRlZmluZWQpOiBUID0+IHtcbiAgaWYgKHZhbHVlID09IG51bGwpIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgRXhwZWN0ZWQgYSB2YWx1ZSB0byBiZSBnaXZlbiBidXQgcmVjZWl2ZWQgJHt2YWx1ZX0gaW5zdGVhZC5gKTtcbiAgcmV0dXJuIHZhbHVlO1xufTtcblxuLyoqXG4gKiBSZWFkIGFuIGVudmlyb25tZW50IHZhcmlhYmxlLlxuICpcbiAqIFRyaW1zIGJlZ2lubmluZyBhbmQgdHJhaWxpbmcgd2hpdGVzcGFjZS5cbiAqXG4gKiBXaWxsIHJldHVybiB1bmRlZmluZWQgaWYgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlIGRvZXNuJ3QgZXhpc3Qgb3IgY2Fubm90IGJlIGFjY2Vzc2VkLlxuICovXG5leHBvcnQgY29uc3QgcmVhZEVudiA9IChlbnY6IHN0cmluZyk6IHN0cmluZyB8IHVuZGVmaW5lZCA9PiB7XG4gIGlmICh0eXBlb2YgcHJvY2VzcyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gcHJvY2Vzcy5lbnY/LltlbnZdPy50cmltKCkgPz8gdW5kZWZpbmVkO1xuICB9XG4gIGlmICh0eXBlb2YgRGVubyAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gRGVuby5lbnY/LmdldD8uKGVudik/LnRyaW0oKTtcbiAgfVxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuZXhwb3J0IGNvbnN0IGNvZXJjZUludGVnZXIgPSAodmFsdWU6IHVua25vd24pOiBudW1iZXIgPT4ge1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykgcmV0dXJuIE1hdGgucm91bmQodmFsdWUpO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgcmV0dXJuIHBhcnNlSW50KHZhbHVlLCAxMCk7XG5cbiAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBDb3VsZCBub3QgY29lcmNlICR7dmFsdWV9ICh0eXBlOiAke3R5cGVvZiB2YWx1ZX0pIGludG8gYSBudW1iZXJgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjb2VyY2VGbG9hdCA9ICh2YWx1ZTogdW5rbm93bik6IG51bWJlciA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdudW1iZXInKSByZXR1cm4gdmFsdWU7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdzdHJpbmcnKSByZXR1cm4gcGFyc2VGbG9hdCh2YWx1ZSk7XG5cbiAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBDb3VsZCBub3QgY29lcmNlICR7dmFsdWV9ICh0eXBlOiAke3R5cGVvZiB2YWx1ZX0pIGludG8gYSBudW1iZXJgKTtcbn07XG5cbmV4cG9ydCBjb25zdCBjb2VyY2VCb29sZWFuID0gKHZhbHVlOiB1bmtub3duKTogYm9vbGVhbiA9PiB7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICdib29sZWFuJykgcmV0dXJuIHZhbHVlO1xuICBpZiAodHlwZW9mIHZhbHVlID09PSAnc3RyaW5nJykgcmV0dXJuIHZhbHVlID09PSAndHJ1ZSc7XG4gIHJldHVybiBCb29sZWFuKHZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtYXliZUNvZXJjZUludGVnZXIgPSAodmFsdWU6IHVua25vd24pOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGNvZXJjZUludGVnZXIodmFsdWUpO1xufTtcblxuZXhwb3J0IGNvbnN0IG1heWJlQ29lcmNlRmxvYXQgPSAodmFsdWU6IHVua25vd24pOiBudW1iZXIgfCB1bmRlZmluZWQgPT4ge1xuICBpZiAodmFsdWUgPT09IHVuZGVmaW5lZCkge1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH1cbiAgcmV0dXJuIGNvZXJjZUZsb2F0KHZhbHVlKTtcbn07XG5cbmV4cG9ydCBjb25zdCBtYXliZUNvZXJjZUJvb2xlYW4gPSAodmFsdWU6IHVua25vd24pOiBib29sZWFuIHwgdW5kZWZpbmVkID0+IHtcbiAgaWYgKHZhbHVlID09PSB1bmRlZmluZWQpIHtcbiAgICByZXR1cm4gdW5kZWZpbmVkO1xuICB9XG4gIHJldHVybiBjb2VyY2VCb29sZWFuKHZhbHVlKTtcbn07XG5cbi8vIGh0dHBzOi8vc3RhY2tvdmVyZmxvdy5jb20vYS8zNDQ5MTI4N1xuZXhwb3J0IGZ1bmN0aW9uIGlzRW1wdHlPYmoob2JqOiBPYmplY3QgfCBudWxsIHwgdW5kZWZpbmVkKTogYm9vbGVhbiB7XG4gIGlmICghb2JqKSByZXR1cm4gdHJ1ZTtcbiAgZm9yIChjb25zdCBfayBpbiBvYmopIHJldHVybiBmYWxzZTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbi8vIGh0dHBzOi8vZXNsaW50Lm9yZy9kb2NzL2xhdGVzdC9ydWxlcy9uby1wcm90b3R5cGUtYnVpbHRpbnNcbmV4cG9ydCBmdW5jdGlvbiBoYXNPd24ob2JqOiBPYmplY3QsIGtleTogc3RyaW5nKTogYm9vbGVhbiB7XG4gIHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqLCBrZXkpO1xufVxuXG4vKipcbiAqIENvcGllcyBoZWFkZXJzIGZyb20gXCJuZXdIZWFkZXJzXCIgb250byBcInRhcmdldEhlYWRlcnNcIixcbiAqIHVzaW5nIGxvd2VyLWNhc2UgZm9yIGFsbCBwcm9wZXJ0aWVzLFxuICogaWdub3JpbmcgYW55IGtleXMgd2l0aCB1bmRlZmluZWQgdmFsdWVzLFxuICogYW5kIGRlbGV0aW5nIGFueSBrZXlzIHdpdGggbnVsbCB2YWx1ZXMuXG4gKi9cbmZ1bmN0aW9uIGFwcGx5SGVhZGVyc011dCh0YXJnZXRIZWFkZXJzOiBIZWFkZXJzLCBuZXdIZWFkZXJzOiBIZWFkZXJzKTogdm9pZCB7XG4gIGZvciAoY29uc3QgayBpbiBuZXdIZWFkZXJzKSB7XG4gICAgaWYgKCFoYXNPd24obmV3SGVhZGVycywgaykpIGNvbnRpbnVlO1xuICAgIGNvbnN0IGxvd2VyS2V5ID0gay50b0xvd2VyQ2FzZSgpO1xuICAgIGlmICghbG93ZXJLZXkpIGNvbnRpbnVlO1xuXG4gICAgY29uc3QgdmFsID0gbmV3SGVhZGVyc1trXTtcblxuICAgIGlmICh2YWwgPT09IG51bGwpIHtcbiAgICAgIGRlbGV0ZSB0YXJnZXRIZWFkZXJzW2xvd2VyS2V5XTtcbiAgICB9IGVsc2UgaWYgKHZhbCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICB0YXJnZXRIZWFkZXJzW2xvd2VyS2V5XSA9IHZhbDtcbiAgICB9XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYnVnKGFjdGlvbjogc3RyaW5nLCAuLi5hcmdzOiBhbnlbXSkge1xuICBpZiAodHlwZW9mIHByb2Nlc3MgIT09ICd1bmRlZmluZWQnICYmIHByb2Nlc3M/LmVudj8uWydERUJVRyddID09PSAndHJ1ZScpIHtcbiAgICBjb25zb2xlLmxvZyhgQW50aHJvcGljOkRFQlVHOiR7YWN0aW9ufWAsIC4uLmFyZ3MpO1xuICB9XG59XG5cbi8qKlxuICogaHR0cHM6Ly9zdGFja292ZXJmbG93LmNvbS9hLzIxMTc1MjNcbiAqL1xuY29uc3QgdXVpZDQgPSAoKSA9PiB7XG4gIHJldHVybiAneHh4eHh4eHgteHh4eC00eHh4LXl4eHgteHh4eHh4eHh4eHh4Jy5yZXBsYWNlKC9beHldL2csIChjKSA9PiB7XG4gICAgY29uc3QgciA9IChNYXRoLnJhbmRvbSgpICogMTYpIHwgMDtcbiAgICBjb25zdCB2ID0gYyA9PT0gJ3gnID8gciA6IChyICYgMHgzKSB8IDB4ODtcbiAgICByZXR1cm4gdi50b1N0cmluZygxNik7XG4gIH0pO1xufTtcblxuZXhwb3J0IGNvbnN0IGlzUnVubmluZ0luQnJvd3NlciA9ICgpID0+IHtcbiAgcmV0dXJuIChcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdHlwZW9mIHdpbmRvdyAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdHlwZW9mIHdpbmRvdy5kb2N1bWVudCAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgdHlwZW9mIG5hdmlnYXRvciAhPT0gJ3VuZGVmaW5lZCdcbiAgKTtcbn07XG5cbmV4cG9ydCBpbnRlcmZhY2UgSGVhZGVyc1Byb3RvY29sIHtcbiAgZ2V0OiAoaGVhZGVyOiBzdHJpbmcpID0+IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG59XG5leHBvcnQgdHlwZSBIZWFkZXJzTGlrZSA9IFJlY29yZDxzdHJpbmcsIHN0cmluZyB8IHN0cmluZ1tdIHwgdW5kZWZpbmVkPiB8IEhlYWRlcnNQcm90b2NvbDtcblxuZXhwb3J0IGNvbnN0IGlzSGVhZGVyc1Byb3RvY29sID0gKGhlYWRlcnM6IGFueSk6IGhlYWRlcnMgaXMgSGVhZGVyc1Byb3RvY29sID0+IHtcbiAgcmV0dXJuIHR5cGVvZiBoZWFkZXJzPy5nZXQgPT09ICdmdW5jdGlvbic7XG59O1xuXG5leHBvcnQgY29uc3QgZ2V0UmVxdWlyZWRIZWFkZXIgPSAoaGVhZGVyczogSGVhZGVyc0xpa2UgfCBIZWFkZXJzLCBoZWFkZXI6IHN0cmluZyk6IHN0cmluZyA9PiB7XG4gIGNvbnN0IGZvdW5kSGVhZGVyID0gZ2V0SGVhZGVyKGhlYWRlcnMsIGhlYWRlcik7XG4gIGlmIChmb3VuZEhlYWRlciA9PT0gdW5kZWZpbmVkKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKGBDb3VsZCBub3QgZmluZCAke2hlYWRlcn0gaGVhZGVyYCk7XG4gIH1cbiAgcmV0dXJuIGZvdW5kSGVhZGVyO1xufTtcblxuZXhwb3J0IGNvbnN0IGdldEhlYWRlciA9IChoZWFkZXJzOiBIZWFkZXJzTGlrZSB8IEhlYWRlcnMsIGhlYWRlcjogc3RyaW5nKTogc3RyaW5nIHwgdW5kZWZpbmVkID0+IHtcbiAgY29uc3QgbG93ZXJDYXNlZEhlYWRlciA9IGhlYWRlci50b0xvd2VyQ2FzZSgpO1xuICBpZiAoaXNIZWFkZXJzUHJvdG9jb2woaGVhZGVycykpIHtcbiAgICAvLyB0byBkZWFsIHdpdGggdGhlIGNhc2Ugd2hlcmUgdGhlIGhlYWRlciBsb29rcyBsaWtlIFN0YWlubGVzcy1FdmVudC1JZFxuICAgIGNvbnN0IGludGVyY2Fwc0hlYWRlciA9XG4gICAgICBoZWFkZXJbMF0/LnRvVXBwZXJDYXNlKCkgK1xuICAgICAgaGVhZGVyLnN1YnN0cmluZygxKS5yZXBsYWNlKC8oW15cXHddKShcXHcpL2csIChfbSwgZzEsIGcyKSA9PiBnMSArIGcyLnRvVXBwZXJDYXNlKCkpO1xuICAgIGZvciAoY29uc3Qga2V5IG9mIFtoZWFkZXIsIGxvd2VyQ2FzZWRIZWFkZXIsIGhlYWRlci50b1VwcGVyQ2FzZSgpLCBpbnRlcmNhcHNIZWFkZXJdKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IGhlYWRlcnMuZ2V0KGtleSk7XG4gICAgICBpZiAodmFsdWUpIHtcbiAgICAgICAgcmV0dXJuIHZhbHVlO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGZvciAoY29uc3QgW2tleSwgdmFsdWVdIG9mIE9iamVjdC5lbnRyaWVzKGhlYWRlcnMpKSB7XG4gICAgaWYgKGtleS50b0xvd2VyQ2FzZSgpID09PSBsb3dlckNhc2VkSGVhZGVyKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZSkpIHtcbiAgICAgICAgaWYgKHZhbHVlLmxlbmd0aCA8PSAxKSByZXR1cm4gdmFsdWVbMF07XG4gICAgICAgIGNvbnNvbGUud2FybihgUmVjZWl2ZWQgJHt2YWx1ZS5sZW5ndGh9IGVudHJpZXMgZm9yIHRoZSAke2hlYWRlcn0gaGVhZGVyLCB1c2luZyB0aGUgZmlyc3QgZW50cnkuYCk7XG4gICAgICAgIHJldHVybiB2YWx1ZVswXTtcbiAgICAgIH1cbiAgICAgIHJldHVybiB2YWx1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gdW5kZWZpbmVkO1xufTtcblxuLyoqXG4gKiBFbmNvZGVzIGEgc3RyaW5nIHRvIEJhc2U2NCBmb3JtYXQuXG4gKi9cbmV4cG9ydCBjb25zdCB0b0Jhc2U2NCA9IChzdHI6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQpOiBzdHJpbmcgPT4ge1xuICBpZiAoIXN0cikgcmV0dXJuICcnO1xuICBpZiAodHlwZW9mIEJ1ZmZlciAhPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICByZXR1cm4gQnVmZmVyLmZyb20oc3RyKS50b1N0cmluZygnYmFzZTY0Jyk7XG4gIH1cblxuICBpZiAodHlwZW9mIGJ0b2EgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgcmV0dXJuIGJ0b2Eoc3RyKTtcbiAgfVxuXG4gIHRocm93IG5ldyBBbnRocm9waWNFcnJvcignQ2Fubm90IGdlbmVyYXRlIGI2NCBzdHJpbmc7IEV4cGVjdGVkIGBCdWZmZXJgIG9yIGBidG9hYCB0byBiZSBkZWZpbmVkJyk7XG59O1xuXG5leHBvcnQgZnVuY3Rpb24gaXNPYmoob2JqOiB1bmtub3duKTogb2JqIGlzIFJlY29yZDxzdHJpbmcsIHVua25vd24+IHtcbiAgcmV0dXJuIG9iaiAhPSBudWxsICYmIHR5cGVvZiBvYmogPT09ICdvYmplY3QnICYmICFBcnJheS5pc0FycmF5KG9iaik7XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQWJzdHJhY3RQYWdlLCBSZXNwb25zZSwgQVBJQ2xpZW50LCBGaW5hbFJlcXVlc3RPcHRpb25zLCBQYWdlSW5mbyB9IGZyb20gXCIuL2NvcmUuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBQYWdlUmVzcG9uc2U8SXRlbT4ge1xuICBkYXRhOiBBcnJheTxJdGVtPjtcblxuICBoYXNfbW9yZTogYm9vbGVhbjtcblxuICBmaXJzdF9pZDogc3RyaW5nIHwgbnVsbDtcblxuICBsYXN0X2lkOiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBhZ2VQYXJhbXMge1xuICAvKipcbiAgICogTnVtYmVyIG9mIGl0ZW1zIHBlciBwYWdlLlxuICAgKi9cbiAgbGltaXQ/OiBudW1iZXI7XG5cbiAgYmVmb3JlX2lkPzogc3RyaW5nO1xuXG4gIGFmdGVyX2lkPzogc3RyaW5nO1xufVxuXG5leHBvcnQgY2xhc3MgUGFnZTxJdGVtPiBleHRlbmRzIEFic3RyYWN0UGFnZTxJdGVtPiBpbXBsZW1lbnRzIFBhZ2VSZXNwb25zZTxJdGVtPiB7XG4gIGRhdGE6IEFycmF5PEl0ZW0+O1xuXG4gIGhhc19tb3JlOiBib29sZWFuO1xuXG4gIGZpcnN0X2lkOiBzdHJpbmcgfCBudWxsO1xuXG4gIGxhc3RfaWQ6IHN0cmluZyB8IG51bGw7XG5cbiAgY29uc3RydWN0b3IoY2xpZW50OiBBUElDbGllbnQsIHJlc3BvbnNlOiBSZXNwb25zZSwgYm9keTogUGFnZVJlc3BvbnNlPEl0ZW0+LCBvcHRpb25zOiBGaW5hbFJlcXVlc3RPcHRpb25zKSB7XG4gICAgc3VwZXIoY2xpZW50LCByZXNwb25zZSwgYm9keSwgb3B0aW9ucyk7XG5cbiAgICB0aGlzLmRhdGEgPSBib2R5LmRhdGEgfHwgW107XG4gICAgdGhpcy5oYXNfbW9yZSA9IGJvZHkuaGFzX21vcmUgfHwgZmFsc2U7XG4gICAgdGhpcy5maXJzdF9pZCA9IGJvZHkuZmlyc3RfaWQgfHwgbnVsbDtcbiAgICB0aGlzLmxhc3RfaWQgPSBib2R5Lmxhc3RfaWQgfHwgbnVsbDtcbiAgfVxuXG4gIGdldFBhZ2luYXRlZEl0ZW1zKCk6IEl0ZW1bXSB7XG4gICAgcmV0dXJuIHRoaXMuZGF0YSA/PyBbXTtcbiAgfVxuXG4gIC8vIEBkZXByZWNhdGVkIFBsZWFzZSB1c2UgYG5leHRQYWdlSW5mbygpYCBpbnN0ZWFkXG4gIG5leHRQYWdlUGFyYW1zKCk6IFBhcnRpYWw8UGFnZVBhcmFtcz4gfCBudWxsIHtcbiAgICBjb25zdCBpbmZvID0gdGhpcy5uZXh0UGFnZUluZm8oKTtcbiAgICBpZiAoIWluZm8pIHJldHVybiBudWxsO1xuICAgIGlmICgncGFyYW1zJyBpbiBpbmZvKSByZXR1cm4gaW5mby5wYXJhbXM7XG4gICAgY29uc3QgcGFyYW1zID0gT2JqZWN0LmZyb21FbnRyaWVzKGluZm8udXJsLnNlYXJjaFBhcmFtcyk7XG4gICAgaWYgKCFPYmplY3Qua2V5cyhwYXJhbXMpLmxlbmd0aCkgcmV0dXJuIG51bGw7XG4gICAgcmV0dXJuIHBhcmFtcztcbiAgfVxuXG4gIG5leHRQYWdlSW5mbygpOiBQYWdlSW5mbyB8IG51bGwge1xuICAgIGlmICgodGhpcy5vcHRpb25zLnF1ZXJ5IGFzIFJlY29yZDxzdHJpbmcsIHVua25vd24+KT8uWydiZWZvcmVfaWQnXSkge1xuICAgICAgLy8gaW4gcmV2ZXJzZVxuICAgICAgY29uc3QgZmlyc3RJZCA9IHRoaXMuZmlyc3RfaWQ7XG4gICAgICBpZiAoIWZpcnN0SWQpIHtcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICB9XG5cbiAgICAgIHJldHVybiB7XG4gICAgICAgIHBhcmFtczoge1xuICAgICAgICAgIGJlZm9yZV9pZDogZmlyc3RJZCxcbiAgICAgICAgfSxcbiAgICAgIH07XG4gICAgfVxuXG4gICAgY29uc3QgY3Vyc29yID0gdGhpcy5sYXN0X2lkO1xuICAgIGlmICghY3Vyc29yKSB7XG4gICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgcGFyYW1zOiB7XG4gICAgICAgIGFmdGVyX2lkOiBjdXJzb3IsXG4gICAgICB9LFxuICAgIH07XG4gIH1cbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5leHBvcnQgaW50ZXJmYWNlIEFQSUVycm9yT2JqZWN0IHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdhcGlfZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhlbnRpY2F0aW9uRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2F1dGhlbnRpY2F0aW9uX2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCaWxsaW5nRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2JpbGxpbmdfZXJyb3InO1xufVxuXG5leHBvcnQgdHlwZSBFcnJvck9iamVjdCA9XG4gIHwgSW52YWxpZFJlcXVlc3RFcnJvclxuICB8IEF1dGhlbnRpY2F0aW9uRXJyb3JcbiAgfCBCaWxsaW5nRXJyb3JcbiAgfCBQZXJtaXNzaW9uRXJyb3JcbiAgfCBOb3RGb3VuZEVycm9yXG4gIHwgUmF0ZUxpbWl0RXJyb3JcbiAgfCBHYXRld2F5VGltZW91dEVycm9yXG4gIHwgQVBJRXJyb3JPYmplY3RcbiAgfCBPdmVybG9hZGVkRXJyb3I7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRXJyb3JSZXNwb25zZSB7XG4gIGVycm9yOiBFcnJvck9iamVjdDtcblxuICB0eXBlOiAnZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEdhdGV3YXlUaW1lb3V0RXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3RpbWVvdXRfZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEludmFsaWRSZXF1ZXN0RXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2ludmFsaWRfcmVxdWVzdF9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTm90Rm91bmRFcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAnbm90X2ZvdW5kX2Vycm9yJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBPdmVybG9hZGVkRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ292ZXJsb2FkZWRfZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFBlcm1pc3Npb25FcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAncGVybWlzc2lvbl9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF0ZUxpbWl0RXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3JhdGVfbGltaXRfZXJyb3InO1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4vY29yZS5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQVBJUmVzb3VyY2Uge1xuICBwcm90ZWN0ZWQgX2NsaWVudDogQ29yZS5BUElDbGllbnQ7XG5cbiAgY29uc3RydWN0b3IoY2xpZW50OiBDb3JlLkFQSUNsaWVudCkge1xuICAgIHRoaXMuX2NsaWVudCA9IGNsaWVudDtcbiAgfVxufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSBcIi4uLy4uL3Jlc291cmNlLmpzXCI7XG5pbXBvcnQgeyBpc1JlcXVlc3RPcHRpb25zIH0gZnJvbSBcIi4uLy4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4uLy4uL2NvcmUuanNcIjtcbmltcG9ydCB7IFBhZ2UsIHR5cGUgUGFnZVBhcmFtcyB9IGZyb20gXCIuLi8uLi9wYWdpbmF0aW9uLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBNb2RlbHMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBHZXQgYSBzcGVjaWZpYyBtb2RlbC5cbiAgICpcbiAgICogVGhlIE1vZGVscyBBUEkgcmVzcG9uc2UgY2FuIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIGluZm9ybWF0aW9uIGFib3V0IGEgc3BlY2lmaWNcbiAgICogbW9kZWwgb3IgcmVzb2x2ZSBhIG1vZGVsIGFsaWFzIHRvIGEgbW9kZWwgSUQuXG4gICAqL1xuICByZXRyaWV2ZShtb2RlbElkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEJldGFNb2RlbEluZm8+IHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmdldChgL3YxL21vZGVscy8ke21vZGVsSWR9P2JldGE9dHJ1ZWAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3QgYXZhaWxhYmxlIG1vZGVscy5cbiAgICpcbiAgICogVGhlIE1vZGVscyBBUEkgcmVzcG9uc2UgY2FuIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIG1vZGVscyBhcmUgYXZhaWxhYmxlIGZvclxuICAgKiB1c2UgaW4gdGhlIEFQSS4gTW9yZSByZWNlbnRseSByZWxlYXNlZCBtb2RlbHMgYXJlIGxpc3RlZCBmaXJzdC5cbiAgICovXG4gIGxpc3QoXG4gICAgcXVlcnk/OiBNb2RlbExpc3RQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8QmV0YU1vZGVsSW5mb3NQYWdlLCBCZXRhTW9kZWxJbmZvPjtcbiAgbGlzdChvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuUGFnZVByb21pc2U8QmV0YU1vZGVsSW5mb3NQYWdlLCBCZXRhTW9kZWxJbmZvPjtcbiAgbGlzdChcbiAgICBxdWVyeTogTW9kZWxMaXN0UGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPEJldGFNb2RlbEluZm9zUGFnZSwgQmV0YU1vZGVsSW5mbz4ge1xuICAgIGlmIChpc1JlcXVlc3RPcHRpb25zKHF1ZXJ5KSkge1xuICAgICAgcmV0dXJuIHRoaXMubGlzdCh7fSwgcXVlcnkpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmdldEFQSUxpc3QoJy92MS9tb2RlbHM/YmV0YT10cnVlJywgQmV0YU1vZGVsSW5mb3NQYWdlLCB7IHF1ZXJ5LCAuLi5vcHRpb25zIH0pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCZXRhTW9kZWxJbmZvc1BhZ2UgZXh0ZW5kcyBQYWdlPEJldGFNb2RlbEluZm8+IHt9XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1vZGVsSW5mbyB7XG4gIC8qKlxuICAgKiBVbmlxdWUgbW9kZWwgaWRlbnRpZmllci5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggdGhlIG1vZGVsIHdhcyByZWxlYXNlZC5cbiAgICogTWF5IGJlIHNldCB0byBhbiBlcG9jaCB2YWx1ZSBpZiB0aGUgcmVsZWFzZSBkYXRlIGlzIHVua25vd24uXG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEEgaHVtYW4tcmVhZGFibGUgbmFtZSBmb3IgdGhlIG1vZGVsLlxuICAgKi9cbiAgZGlzcGxheV9uYW1lOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIE9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgTW9kZWxzLCB0aGlzIGlzIGFsd2F5cyBgXCJtb2RlbFwiYC5cbiAgICovXG4gIHR5cGU6ICdtb2RlbCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxMaXN0UGFyYW1zIGV4dGVuZHMgUGFnZVBhcmFtcyB7fVxuXG5Nb2RlbHMuQmV0YU1vZGVsSW5mb3NQYWdlID0gQmV0YU1vZGVsSW5mb3NQYWdlO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgTW9kZWxzIHtcbiAgZXhwb3J0IHtcbiAgICB0eXBlIEJldGFNb2RlbEluZm8gYXMgQmV0YU1vZGVsSW5mbyxcbiAgICBCZXRhTW9kZWxJbmZvc1BhZ2UgYXMgQmV0YU1vZGVsSW5mb3NQYWdlLFxuICAgIHR5cGUgTW9kZWxMaXN0UGFyYW1zIGFzIE1vZGVsTGlzdFBhcmFtcyxcbiAgfTtcbn1cbiIsICJpbXBvcnQgeyBBbnRocm9waWNFcnJvciB9IGZyb20gXCIuLi8uLi9lcnJvci5qc1wiO1xuaW1wb3J0IHsgUmVhZGFibGVTdHJlYW1Ub0FzeW5jSXRlcmFibGUgfSBmcm9tIFwiLi4vc3RyZWFtLXV0aWxzLmpzXCI7XG5pbXBvcnQgeyB0eXBlIFJlc3BvbnNlIH0gZnJvbSBcIi4uLy4uL19zaGltcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgTGluZURlY29kZXIsIHR5cGUgQnl0ZXMgfSBmcm9tIFwiLi9saW5lLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBKU09OTERlY29kZXI8VD4ge1xuICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXI7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSBpdGVyYXRvcjogQXN5bmNJdGVyYWJsZUl0ZXJhdG9yPEJ5dGVzPixcbiAgICBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIsXG4gICkge1xuICAgIHRoaXMuY29udHJvbGxlciA9IGNvbnRyb2xsZXI7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jICpkZWNvZGVyKCk6IEFzeW5jSXRlcmF0b3I8VCwgYW55LCB1bmRlZmluZWQ+IHtcbiAgICBjb25zdCBsaW5lRGVjb2RlciA9IG5ldyBMaW5lRGVjb2RlcigpO1xuICAgIGZvciBhd2FpdCAoY29uc3QgY2h1bmsgb2YgdGhpcy5pdGVyYXRvcikge1xuICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVEZWNvZGVyLmRlY29kZShjaHVuaykpIHtcbiAgICAgICAgeWllbGQgSlNPTi5wYXJzZShsaW5lKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBmb3IgKGNvbnN0IGxpbmUgb2YgbGluZURlY29kZXIuZmx1c2goKSkge1xuICAgICAgeWllbGQgSlNPTi5wYXJzZShsaW5lKTtcbiAgICB9XG4gIH1cblxuICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk6IEFzeW5jSXRlcmF0b3I8VD4ge1xuICAgIHJldHVybiB0aGlzLmRlY29kZXIoKTtcbiAgfVxuXG4gIHN0YXRpYyBmcm9tUmVzcG9uc2U8VD4ocmVzcG9uc2U6IFJlc3BvbnNlLCBjb250cm9sbGVyOiBBYm9ydENvbnRyb2xsZXIpOiBKU09OTERlY29kZXI8VD4ge1xuICAgIGlmICghcmVzcG9uc2UuYm9keSkge1xuICAgICAgY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBBdHRlbXB0ZWQgdG8gaXRlcmF0ZSBvdmVyIGEgcmVzcG9uc2Ugd2l0aCBubyBib2R5YCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIG5ldyBKU09OTERlY29kZXIoUmVhZGFibGVTdHJlYW1Ub0FzeW5jSXRlcmFibGU8Qnl0ZXM+KHJlc3BvbnNlLmJvZHkpLCBjb250cm9sbGVyKTtcbiAgfVxufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSBcIi4uLy4uLy4uL3Jlc291cmNlLmpzXCI7XG5pbXBvcnQgeyBpc1JlcXVlc3RPcHRpb25zIH0gZnJvbSBcIi4uLy4uLy4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4uLy4uLy4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIEJldGFBUEkgZnJvbSBcIi4uL2JldGEuanNcIjtcbmltcG9ydCAqIGFzIEJldGFNZXNzYWdlc0FQSSBmcm9tIFwiLi9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHsgUGFnZSwgdHlwZSBQYWdlUGFyYW1zIH0gZnJvbSBcIi4uLy4uLy4uL3BhZ2luYXRpb24uanNcIjtcbmltcG9ydCB7IEpTT05MRGVjb2RlciB9IGZyb20gXCIuLi8uLi8uLi9pbnRlcm5hbC9kZWNvZGVycy9qc29ubC5qc1wiO1xuaW1wb3J0IHsgQW50aHJvcGljRXJyb3IgfSBmcm9tIFwiLi4vLi4vLi4vZXJyb3IuanNcIjtcblxuZXhwb3J0IGNsYXNzIEJhdGNoZXMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBTZW5kIGEgYmF0Y2ggb2YgTWVzc2FnZSBjcmVhdGlvbiByZXF1ZXN0cy5cbiAgICpcbiAgICogVGhlIE1lc3NhZ2UgQmF0Y2hlcyBBUEkgY2FuIGJlIHVzZWQgdG8gcHJvY2VzcyBtdWx0aXBsZSBNZXNzYWdlcyBBUEkgcmVxdWVzdHMgYXRcbiAgICogb25jZS4gT25jZSBhIE1lc3NhZ2UgQmF0Y2ggaXMgY3JlYXRlZCwgaXQgYmVnaW5zIHByb2Nlc3NpbmcgaW1tZWRpYXRlbHkuIEJhdGNoZXNcbiAgICogY2FuIHRha2UgdXAgdG8gMjQgaG91cnMgdG8gY29tcGxldGUuXG4gICAqL1xuICBjcmVhdGUocGFyYW1zOiBCYXRjaENyZWF0ZVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaD4ge1xuICAgIGNvbnN0IHsgYmV0YXMsIC4uLmJvZHkgfSA9IHBhcmFtcztcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoJy92MS9tZXNzYWdlcy9iYXRjaGVzP2JldGE9dHJ1ZScsIHtcbiAgICAgIGJvZHksXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYW50aHJvcGljLWJldGEnOiBbLi4uKGJldGFzID8/IFtdKSwgJ21lc3NhZ2UtYmF0Y2hlcy0yMDI0LTA5LTI0J10udG9TdHJpbmcoKSxcbiAgICAgICAgLi4ub3B0aW9ucz8uaGVhZGVycyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVGhpcyBlbmRwb2ludCBpcyBpZGVtcG90ZW50IGFuZCBjYW4gYmUgdXNlZCB0byBwb2xsIGZvciBNZXNzYWdlIEJhdGNoXG4gICAqIGNvbXBsZXRpb24uIFRvIGFjY2VzcyB0aGUgcmVzdWx0cyBvZiBhIE1lc3NhZ2UgQmF0Y2gsIG1ha2UgYSByZXF1ZXN0IHRvIHRoZVxuICAgKiBgcmVzdWx0c191cmxgIGZpZWxkIGluIHRoZSByZXNwb25zZS5cbiAgICovXG4gIHJldHJpZXZlKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgcGFyYW1zPzogQmF0Y2hSZXRyaWV2ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5BUElQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2g+O1xuICByZXRyaWV2ZShtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoPjtcbiAgcmV0cmlldmUoXG4gICAgbWVzc2FnZUJhdGNoSWQ6IHN0cmluZyxcbiAgICBwYXJhbXM6IEJhdGNoUmV0cmlldmVQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoPiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocGFyYW1zKSkge1xuICAgICAgcmV0dXJuIHRoaXMucmV0cmlldmUobWVzc2FnZUJhdGNoSWQsIHt9LCBwYXJhbXMpO1xuICAgIH1cbiAgICBjb25zdCB7IGJldGFzIH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5nZXQoYC92MS9tZXNzYWdlcy9iYXRjaGVzLyR7bWVzc2FnZUJhdGNoSWR9P2JldGE9dHJ1ZWAsIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhbnRocm9waWMtYmV0YSc6IFsuLi4oYmV0YXMgPz8gW10pLCAnbWVzc2FnZS1iYXRjaGVzLTIwMjQtMDktMjQnXS50b1N0cmluZygpLFxuICAgICAgICAuLi5vcHRpb25zPy5oZWFkZXJzLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0IGFsbCBNZXNzYWdlIEJhdGNoZXMgd2l0aGluIGEgV29ya3NwYWNlLiBNb3N0IHJlY2VudGx5IGNyZWF0ZWQgYmF0Y2hlcyBhcmVcbiAgICogcmV0dXJuZWQgZmlyc3QuXG4gICAqL1xuICBsaXN0KFxuICAgIHBhcmFtcz86IEJhdGNoTGlzdFBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoZXNQYWdlLCBCZXRhTWVzc2FnZUJhdGNoPjtcbiAgbGlzdChvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuUGFnZVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSwgQmV0YU1lc3NhZ2VCYXRjaD47XG4gIGxpc3QoXG4gICAgcGFyYW1zOiBCYXRjaExpc3RQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSwgQmV0YU1lc3NhZ2VCYXRjaD4ge1xuICAgIGlmIChpc1JlcXVlc3RPcHRpb25zKHBhcmFtcykpIHtcbiAgICAgIHJldHVybiB0aGlzLmxpc3Qoe30sIHBhcmFtcyk7XG4gICAgfVxuICAgIGNvbnN0IHsgYmV0YXMsIC4uLnF1ZXJ5IH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5nZXRBUElMaXN0KCcvdjEvbWVzc2FnZXMvYmF0Y2hlcz9iZXRhPXRydWUnLCBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlLCB7XG4gICAgICBxdWVyeSxcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhbnRocm9waWMtYmV0YSc6IFsuLi4oYmV0YXMgPz8gW10pLCAnbWVzc2FnZS1iYXRjaGVzLTIwMjQtMDktMjQnXS50b1N0cmluZygpLFxuICAgICAgICAuLi5vcHRpb25zPy5oZWFkZXJzLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBNZXNzYWdlIEJhdGNoLlxuICAgKlxuICAgKiBNZXNzYWdlIEJhdGNoZXMgY2FuIG9ubHkgYmUgZGVsZXRlZCBvbmNlIHRoZXkndmUgZmluaXNoZWQgcHJvY2Vzc2luZy4gSWYgeW91J2RcbiAgICogbGlrZSB0byBkZWxldGUgYW4gaW4tcHJvZ3Jlc3MgYmF0Y2gsIHlvdSBtdXN0IGZpcnN0IGNhbmNlbCBpdC5cbiAgICovXG4gIGRlbGV0ZShcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIHBhcmFtcz86IEJhdGNoRGVsZXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8QmV0YURlbGV0ZWRNZXNzYWdlQmF0Y2g+O1xuICBkZWxldGUobWVzc2FnZUJhdGNoSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8QmV0YURlbGV0ZWRNZXNzYWdlQmF0Y2g+O1xuICBkZWxldGUoXG4gICAgbWVzc2FnZUJhdGNoSWQ6IHN0cmluZyxcbiAgICBwYXJhbXM6IEJhdGNoRGVsZXRlUGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8QmV0YURlbGV0ZWRNZXNzYWdlQmF0Y2g+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhwYXJhbXMpKSB7XG4gICAgICByZXR1cm4gdGhpcy5kZWxldGUobWVzc2FnZUJhdGNoSWQsIHt9LCBwYXJhbXMpO1xuICAgIH1cbiAgICBjb25zdCB7IGJldGFzIH0gPSBwYXJhbXM7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5kZWxldGUoYC92MS9tZXNzYWdlcy9iYXRjaGVzLyR7bWVzc2FnZUJhdGNoSWR9P2JldGE9dHJ1ZWAsIHtcbiAgICAgIC4uLm9wdGlvbnMsXG4gICAgICBoZWFkZXJzOiB7XG4gICAgICAgICdhbnRocm9waWMtYmV0YSc6IFsuLi4oYmV0YXMgPz8gW10pLCAnbWVzc2FnZS1iYXRjaGVzLTIwMjQtMDktMjQnXS50b1N0cmluZygpLFxuICAgICAgICAuLi5vcHRpb25zPy5oZWFkZXJzLFxuICAgICAgfSxcbiAgICB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBCYXRjaGVzIG1heSBiZSBjYW5jZWxlZCBhbnkgdGltZSBiZWZvcmUgcHJvY2Vzc2luZyBlbmRzLiBPbmNlIGNhbmNlbGxhdGlvbiBpc1xuICAgKiBpbml0aWF0ZWQsIHRoZSBiYXRjaCBlbnRlcnMgYSBgY2FuY2VsaW5nYCBzdGF0ZSwgYXQgd2hpY2ggdGltZSB0aGUgc3lzdGVtIG1heVxuICAgKiBjb21wbGV0ZSBhbnkgaW4tcHJvZ3Jlc3MsIG5vbi1pbnRlcnJ1cHRpYmxlIHJlcXVlc3RzIGJlZm9yZSBmaW5hbGl6aW5nXG4gICAqIGNhbmNlbGxhdGlvbi5cbiAgICpcbiAgICogVGhlIG51bWJlciBvZiBjYW5jZWxlZCByZXF1ZXN0cyBpcyBzcGVjaWZpZWQgaW4gYHJlcXVlc3RfY291bnRzYC4gVG8gZGV0ZXJtaW5lXG4gICAqIHdoaWNoIHJlcXVlc3RzIHdlcmUgY2FuY2VsZWQsIGNoZWNrIHRoZSBpbmRpdmlkdWFsIHJlc3VsdHMgd2l0aGluIHRoZSBiYXRjaC5cbiAgICogTm90ZSB0aGF0IGNhbmNlbGxhdGlvbiBtYXkgbm90IHJlc3VsdCBpbiBhbnkgY2FuY2VsZWQgcmVxdWVzdHMgaWYgdGhleSB3ZXJlXG4gICAqIG5vbi1pbnRlcnJ1cHRpYmxlLlxuICAgKi9cbiAgY2FuY2VsKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgcGFyYW1zPzogQmF0Y2hDYW5jZWxQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxCZXRhTWVzc2FnZUJhdGNoPjtcbiAgY2FuY2VsKG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5BUElQcm9taXNlPEJldGFNZXNzYWdlQmF0Y2g+O1xuICBjYW5jZWwoXG4gICAgbWVzc2FnZUJhdGNoSWQ6IHN0cmluZyxcbiAgICBwYXJhbXM6IEJhdGNoQ2FuY2VsUGFyYW1zIHwgQ29yZS5SZXF1ZXN0T3B0aW9ucyA9IHt9LFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8QmV0YU1lc3NhZ2VCYXRjaD4ge1xuICAgIGlmIChpc1JlcXVlc3RPcHRpb25zKHBhcmFtcykpIHtcbiAgICAgIHJldHVybiB0aGlzLmNhbmNlbChtZXNzYWdlQmF0Y2hJZCwge30sIHBhcmFtcyk7XG4gICAgfVxuICAgIGNvbnN0IHsgYmV0YXMgfSA9IHBhcmFtcztcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoYC92MS9tZXNzYWdlcy9iYXRjaGVzLyR7bWVzc2FnZUJhdGNoSWR9L2NhbmNlbD9iZXRhPXRydWVgLCB7XG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAnYW50aHJvcGljLWJldGEnOiBbLi4uKGJldGFzID8/IFtdKSwgJ21lc3NhZ2UtYmF0Y2hlcy0yMDI0LTA5LTI0J10udG9TdHJpbmcoKSxcbiAgICAgICAgLi4ub3B0aW9ucz8uaGVhZGVycyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogU3RyZWFtcyB0aGUgcmVzdWx0cyBvZiBhIE1lc3NhZ2UgQmF0Y2ggYXMgYSBgLmpzb25sYCBmaWxlLlxuICAgKlxuICAgKiBFYWNoIGxpbmUgaW4gdGhlIGZpbGUgaXMgYSBKU09OIG9iamVjdCBjb250YWluaW5nIHRoZSByZXN1bHQgb2YgYSBzaW5nbGUgcmVxdWVzdFxuICAgKiBpbiB0aGUgTWVzc2FnZSBCYXRjaC4gUmVzdWx0cyBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgaW4gdGhlIHNhbWUgb3JkZXIgYXNcbiAgICogcmVxdWVzdHMuIFVzZSB0aGUgYGN1c3RvbV9pZGAgZmllbGQgdG8gbWF0Y2ggcmVzdWx0cyB0byByZXF1ZXN0cy5cbiAgICovXG4gIGFzeW5jIHJlc3VsdHMoXG4gICAgbWVzc2FnZUJhdGNoSWQ6IHN0cmluZyxcbiAgICBwYXJhbXM/OiBCYXRjaFJlc3VsdHNQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IFByb21pc2U8SlNPTkxEZWNvZGVyPEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2U+PjtcbiAgYXN5bmMgcmVzdWx0cyhcbiAgICBtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBQcm9taXNlPEpTT05MRGVjb2RlcjxCZXRhTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlPj47XG4gIGFzeW5jIHJlc3VsdHMoXG4gICAgbWVzc2FnZUJhdGNoSWQ6IHN0cmluZyxcbiAgICBwYXJhbXM6IEJhdGNoUmVzdWx0c1BhcmFtcyB8IENvcmUuUmVxdWVzdE9wdGlvbnMgPSB7fSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogUHJvbWlzZTxKU09OTERlY29kZXI8QmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZT4+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhwYXJhbXMpKSB7XG4gICAgICByZXR1cm4gdGhpcy5yZXN1bHRzKG1lc3NhZ2VCYXRjaElkLCB7fSwgcGFyYW1zKTtcbiAgICB9XG5cbiAgICBjb25zdCBiYXRjaCA9IGF3YWl0IHRoaXMucmV0cmlldmUobWVzc2FnZUJhdGNoSWQpO1xuICAgIGlmICghYmF0Y2gucmVzdWx0c191cmwpIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihcbiAgICAgICAgYE5vIGJhdGNoIFxcYHJlc3VsdHNfdXJsXFxgOyBIYXMgaXQgZmluaXNoZWQgcHJvY2Vzc2luZz8gJHtiYXRjaC5wcm9jZXNzaW5nX3N0YXR1c30gLSAke2JhdGNoLmlkfWAsXG4gICAgICApO1xuICAgIH1cblxuICAgIGNvbnN0IHsgYmV0YXMgfSA9IHBhcmFtcztcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50XG4gICAgICAuZ2V0KGJhdGNoLnJlc3VsdHNfdXJsLCB7XG4gICAgICAgIC4uLm9wdGlvbnMsXG4gICAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgICAnYW50aHJvcGljLWJldGEnOiBbLi4uKGJldGFzID8/IFtdKSwgJ21lc3NhZ2UtYmF0Y2hlcy0yMDI0LTA5LTI0J10udG9TdHJpbmcoKSxcbiAgICAgICAgICBBY2NlcHQ6ICdhcHBsaWNhdGlvbi9iaW5hcnknLFxuICAgICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICAgIH0sXG4gICAgICAgIF9fYmluYXJ5UmVzcG9uc2U6IHRydWUsXG4gICAgICB9KVxuICAgICAgLl90aGVuVW53cmFwKChfLCBwcm9wcykgPT4gSlNPTkxEZWNvZGVyLmZyb21SZXNwb25zZShwcm9wcy5yZXNwb25zZSwgcHJvcHMuY29udHJvbGxlcikpO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlIGV4dGVuZHMgUGFnZTxCZXRhTWVzc2FnZUJhdGNoPiB7fVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFEZWxldGVkTWVzc2FnZUJhdGNoIHtcbiAgLyoqXG4gICAqIElEIG9mIHRoZSBNZXNzYWdlIEJhdGNoLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogRGVsZXRlZCBvYmplY3QgdHlwZS5cbiAgICpcbiAgICogRm9yIE1lc3NhZ2UgQmF0Y2hlcywgdGhpcyBpcyBhbHdheXMgYFwibWVzc2FnZV9iYXRjaF9kZWxldGVkXCJgLlxuICAgKi9cbiAgdHlwZTogJ21lc3NhZ2VfYmF0Y2hfZGVsZXRlZCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VCYXRjaCB7XG4gIC8qKlxuICAgKiBVbmlxdWUgb2JqZWN0IGlkZW50aWZpZXIuXG4gICAqXG4gICAqIFRoZSBmb3JtYXQgYW5kIGxlbmd0aCBvZiBJRHMgbWF5IGNoYW5nZSBvdmVyIHRpbWUuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIHRoZSBNZXNzYWdlIEJhdGNoIHdhc1xuICAgKiBhcmNoaXZlZCBhbmQgaXRzIHJlc3VsdHMgYmVjYW1lIHVuYXZhaWxhYmxlLlxuICAgKi9cbiAgYXJjaGl2ZWRfYXQ6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggY2FuY2VsbGF0aW9uIHdhc1xuICAgKiBpbml0aWF0ZWQgZm9yIHRoZSBNZXNzYWdlIEJhdGNoLiBTcGVjaWZpZWQgb25seSBpZiBjYW5jZWxsYXRpb24gd2FzIGluaXRpYXRlZC5cbiAgICovXG4gIGNhbmNlbF9pbml0aWF0ZWRfYXQ6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggdGhlIE1lc3NhZ2UgQmF0Y2ggd2FzXG4gICAqIGNyZWF0ZWQuXG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggcHJvY2Vzc2luZyBmb3IgdGhlXG4gICAqIE1lc3NhZ2UgQmF0Y2ggZW5kZWQuIFNwZWNpZmllZCBvbmx5IG9uY2UgcHJvY2Vzc2luZyBlbmRzLlxuICAgKlxuICAgKiBQcm9jZXNzaW5nIGVuZHMgd2hlbiBldmVyeSByZXF1ZXN0IGluIGEgTWVzc2FnZSBCYXRjaCBoYXMgZWl0aGVyIHN1Y2NlZWRlZCxcbiAgICogZXJyb3JlZCwgY2FuY2VsZWQsIG9yIGV4cGlyZWQuXG4gICAqL1xuICBlbmRlZF9hdDogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCB0aGUgTWVzc2FnZSBCYXRjaCB3aWxsXG4gICAqIGV4cGlyZSBhbmQgZW5kIHByb2Nlc3NpbmcsIHdoaWNoIGlzIDI0IGhvdXJzIGFmdGVyIGNyZWF0aW9uLlxuICAgKi9cbiAgZXhwaXJlc19hdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBQcm9jZXNzaW5nIHN0YXR1cyBvZiB0aGUgTWVzc2FnZSBCYXRjaC5cbiAgICovXG4gIHByb2Nlc3Npbmdfc3RhdHVzOiAnaW5fcHJvZ3Jlc3MnIHwgJ2NhbmNlbGluZycgfCAnZW5kZWQnO1xuXG4gIC8qKlxuICAgKiBUYWxsaWVzIHJlcXVlc3RzIHdpdGhpbiB0aGUgTWVzc2FnZSBCYXRjaCwgY2F0ZWdvcml6ZWQgYnkgdGhlaXIgc3RhdHVzLlxuICAgKlxuICAgKiBSZXF1ZXN0cyBzdGFydCBhcyBgcHJvY2Vzc2luZ2AgYW5kIG1vdmUgdG8gb25lIG9mIHRoZSBvdGhlciBzdGF0dXNlcyBvbmx5IG9uY2VcbiAgICogcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIGJhdGNoIGVuZHMuIFRoZSBzdW0gb2YgYWxsIHZhbHVlcyBhbHdheXMgbWF0Y2hlcyB0aGVcbiAgICogdG90YWwgbnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBiYXRjaC5cbiAgICovXG4gIHJlcXVlc3RfY291bnRzOiBCZXRhTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cztcblxuICAvKipcbiAgICogVVJMIHRvIGEgYC5qc29ubGAgZmlsZSBjb250YWluaW5nIHRoZSByZXN1bHRzIG9mIHRoZSBNZXNzYWdlIEJhdGNoIHJlcXVlc3RzLlxuICAgKiBTcGVjaWZpZWQgb25seSBvbmNlIHByb2Nlc3NpbmcgZW5kcy5cbiAgICpcbiAgICogUmVzdWx0cyBpbiB0aGUgZmlsZSBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgaW4gdGhlIHNhbWUgb3JkZXIgYXMgcmVxdWVzdHMuIFVzZVxuICAgKiB0aGUgYGN1c3RvbV9pZGAgZmllbGQgdG8gbWF0Y2ggcmVzdWx0cyB0byByZXF1ZXN0cy5cbiAgICovXG4gIHJlc3VsdHNfdXJsOiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBPYmplY3QgdHlwZS5cbiAgICpcbiAgICogRm9yIE1lc3NhZ2UgQmF0Y2hlcywgdGhpcyBpcyBhbHdheXMgYFwibWVzc2FnZV9iYXRjaFwiYC5cbiAgICovXG4gIHR5cGU6ICdtZXNzYWdlX2JhdGNoJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQge1xuICB0eXBlOiAnY2FuY2VsZWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0IHtcbiAgZXJyb3I6IEJldGFBUEkuQmV0YUVycm9yUmVzcG9uc2U7XG5cbiAgdHlwZTogJ2Vycm9yZWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0IHtcbiAgdHlwZTogJ2V4cGlyZWQnO1xufVxuXG4vKipcbiAqIFRoaXMgaXMgYSBzaW5nbGUgbGluZSBpbiB0aGUgcmVzcG9uc2UgYC5qc29ubGAgZmlsZSBhbmQgZG9lcyBub3QgcmVwcmVzZW50IHRoZVxuICogcmVzcG9uc2UgYXMgYSB3aG9sZS5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIERldmVsb3Blci1wcm92aWRlZCBJRCBjcmVhdGVkIGZvciBlYWNoIHJlcXVlc3QgaW4gYSBNZXNzYWdlIEJhdGNoLiBVc2VmdWwgZm9yXG4gICAqIG1hdGNoaW5nIHJlc3VsdHMgdG8gcmVxdWVzdHMsIGFzIHJlc3VsdHMgbWF5IGJlIGdpdmVuIG91dCBvZiByZXF1ZXN0IG9yZGVyLlxuICAgKlxuICAgKiBNdXN0IGJlIHVuaXF1ZSBmb3IgZWFjaCByZXF1ZXN0IHdpdGhpbiB0aGUgTWVzc2FnZSBCYXRjaC5cbiAgICovXG4gIGN1c3RvbV9pZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBQcm9jZXNzaW5nIHJlc3VsdCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgKlxuICAgKiBDb250YWlucyBhIE1lc3NhZ2Ugb3V0cHV0IGlmIHByb2Nlc3Npbmcgd2FzIHN1Y2Nlc3NmdWwsIGFuIGVycm9yIHJlc3BvbnNlIGlmXG4gICAqIHByb2Nlc3NpbmcgZmFpbGVkLCBvciB0aGUgcmVhc29uIHdoeSBwcm9jZXNzaW5nIHdhcyBub3QgYXR0ZW1wdGVkLCBzdWNoIGFzXG4gICAqIGNhbmNlbGxhdGlvbiBvciBleHBpcmF0aW9uLlxuICAgKi9cbiAgcmVzdWx0OiBCZXRhTWVzc2FnZUJhdGNoUmVzdWx0O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzIHtcbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGhhdmUgYmVlbiBjYW5jZWxlZC5cbiAgICpcbiAgICogVGhpcyBpcyB6ZXJvIHVudGlsIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBNZXNzYWdlIEJhdGNoIGhhcyBlbmRlZC5cbiAgICovXG4gIGNhbmNlbGVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGVuY291bnRlcmVkIGFuIGVycm9yLlxuICAgKlxuICAgKiBUaGlzIGlzIHplcm8gdW50aWwgcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIE1lc3NhZ2UgQmF0Y2ggaGFzIGVuZGVkLlxuICAgKi9cbiAgZXJyb3JlZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIE1lc3NhZ2UgQmF0Y2ggdGhhdCBoYXZlIGV4cGlyZWQuXG4gICAqXG4gICAqIFRoaXMgaXMgemVybyB1bnRpbCBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgTWVzc2FnZSBCYXRjaCBoYXMgZW5kZWQuXG4gICAqL1xuICBleHBpcmVkOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgTWVzc2FnZSBCYXRjaCB0aGF0IGFyZSBwcm9jZXNzaW5nLlxuICAgKi9cbiAgcHJvY2Vzc2luZzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIE1lc3NhZ2UgQmF0Y2ggdGhhdCBoYXZlIGNvbXBsZXRlZCBzdWNjZXNzZnVsbHkuXG4gICAqXG4gICAqIFRoaXMgaXMgemVybyB1bnRpbCBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgTWVzc2FnZSBCYXRjaCBoYXMgZW5kZWQuXG4gICAqL1xuICBzdWNjZWVkZWQ6IG51bWJlcjtcbn1cblxuLyoqXG4gKiBQcm9jZXNzaW5nIHJlc3VsdCBmb3IgdGhpcyByZXF1ZXN0LlxuICpcbiAqIENvbnRhaW5zIGEgTWVzc2FnZSBvdXRwdXQgaWYgcHJvY2Vzc2luZyB3YXMgc3VjY2Vzc2Z1bCwgYW4gZXJyb3IgcmVzcG9uc2UgaWZcbiAqIHByb2Nlc3NpbmcgZmFpbGVkLCBvciB0aGUgcmVhc29uIHdoeSBwcm9jZXNzaW5nIHdhcyBub3QgYXR0ZW1wdGVkLCBzdWNoIGFzXG4gKiBjYW5jZWxsYXRpb24gb3IgZXhwaXJhdGlvbi5cbiAqL1xuZXhwb3J0IHR5cGUgQmV0YU1lc3NhZ2VCYXRjaFJlc3VsdCA9XG4gIHwgQmV0YU1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdFxuICB8IEJldGFNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0XG4gIHwgQmV0YU1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0XG4gIHwgQmV0YU1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCB7XG4gIG1lc3NhZ2U6IEJldGFNZXNzYWdlc0FQSS5CZXRhTWVzc2FnZTtcblxuICB0eXBlOiAnc3VjY2VlZGVkJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXRjaENyZWF0ZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBMaXN0IG9mIHJlcXVlc3RzIGZvciBwcm9tcHQgY29tcGxldGlvbi4gRWFjaCBpcyBhbiBpbmRpdmlkdWFsXG4gICAqIHJlcXVlc3QgdG8gY3JlYXRlIGEgTWVzc2FnZS5cbiAgICovXG4gIHJlcXVlc3RzOiBBcnJheTxCYXRjaENyZWF0ZVBhcmFtcy5SZXF1ZXN0PjtcblxuICAvKipcbiAgICogSGVhZGVyIHBhcmFtOiBPcHRpb25hbCBoZWFkZXIgdG8gc3BlY2lmeSB0aGUgYmV0YSB2ZXJzaW9uKHMpIHlvdSB3YW50IHRvIHVzZS5cbiAgICovXG4gIGJldGFzPzogQXJyYXk8QmV0YUFQSS5BbnRocm9waWNCZXRhPjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBCYXRjaENyZWF0ZVBhcmFtcyB7XG4gIGV4cG9ydCBpbnRlcmZhY2UgUmVxdWVzdCB7XG4gICAgLyoqXG4gICAgICogRGV2ZWxvcGVyLXByb3ZpZGVkIElEIGNyZWF0ZWQgZm9yIGVhY2ggcmVxdWVzdCBpbiBhIE1lc3NhZ2UgQmF0Y2guIFVzZWZ1bCBmb3JcbiAgICAgKiBtYXRjaGluZyByZXN1bHRzIHRvIHJlcXVlc3RzLCBhcyByZXN1bHRzIG1heSBiZSBnaXZlbiBvdXQgb2YgcmVxdWVzdCBvcmRlci5cbiAgICAgKlxuICAgICAqIE11c3QgYmUgdW5pcXVlIGZvciBlYWNoIHJlcXVlc3Qgd2l0aGluIHRoZSBNZXNzYWdlIEJhdGNoLlxuICAgICAqL1xuICAgIGN1c3RvbV9pZDogc3RyaW5nO1xuXG4gICAgLyoqXG4gICAgICogTWVzc2FnZXMgQVBJIGNyZWF0aW9uIHBhcmFtZXRlcnMgZm9yIHRoZSBpbmRpdmlkdWFsIHJlcXVlc3QuXG4gICAgICpcbiAgICAgKiBTZWUgdGhlIFtNZXNzYWdlcyBBUEkgcmVmZXJlbmNlXSgvZW4vYXBpL21lc3NhZ2VzKSBmb3IgZnVsbCBkb2N1bWVudGF0aW9uIG9uXG4gICAgICogYXZhaWxhYmxlIHBhcmFtZXRlcnMuXG4gICAgICovXG4gICAgcGFyYW1zOiBPbWl0PEJldGFNZXNzYWdlc0FQSS5NZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLCAnYmV0YXMnPjtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoUmV0cmlldmVQYXJhbXMge1xuICAvKipcbiAgICogT3B0aW9uYWwgaGVhZGVyIHRvIHNwZWNpZnkgdGhlIGJldGEgdmVyc2lvbihzKSB5b3Ugd2FudCB0byB1c2UuXG4gICAqL1xuICBiZXRhcz86IEFycmF5PEJldGFBUEkuQW50aHJvcGljQmV0YT47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmF0Y2hMaXN0UGFyYW1zIGV4dGVuZHMgUGFnZVBhcmFtcyB7XG4gIC8qKlxuICAgKiBIZWFkZXIgcGFyYW06IE9wdGlvbmFsIGhlYWRlciB0byBzcGVjaWZ5IHRoZSBiZXRhIHZlcnNpb24ocykgeW91IHdhbnQgdG8gdXNlLlxuICAgKi9cbiAgYmV0YXM/OiBBcnJheTxCZXRhQVBJLkFudGhyb3BpY0JldGE+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoRGVsZXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIE9wdGlvbmFsIGhlYWRlciB0byBzcGVjaWZ5IHRoZSBiZXRhIHZlcnNpb24ocykgeW91IHdhbnQgdG8gdXNlLlxuICAgKi9cbiAgYmV0YXM/OiBBcnJheTxCZXRhQVBJLkFudGhyb3BpY0JldGE+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoQ2FuY2VsUGFyYW1zIHtcbiAgLyoqXG4gICAqIE9wdGlvbmFsIGhlYWRlciB0byBzcGVjaWZ5IHRoZSBiZXRhIHZlcnNpb24ocykgeW91IHdhbnQgdG8gdXNlLlxuICAgKi9cbiAgYmV0YXM/OiBBcnJheTxCZXRhQVBJLkFudGhyb3BpY0JldGE+O1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoUmVzdWx0c1BhcmFtcyB7XG4gIC8qKlxuICAgKiBPcHRpb25hbCBoZWFkZXIgdG8gc3BlY2lmeSB0aGUgYmV0YSB2ZXJzaW9uKHMpIHlvdSB3YW50IHRvIHVzZS5cbiAgICovXG4gIGJldGFzPzogQXJyYXk8QmV0YUFQSS5BbnRocm9waWNCZXRhPjtcbn1cblxuQmF0Y2hlcy5CZXRhTWVzc2FnZUJhdGNoZXNQYWdlID0gQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZTtcblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIEJhdGNoZXMge1xuICBleHBvcnQge1xuICAgIHR5cGUgQmV0YURlbGV0ZWRNZXNzYWdlQmF0Y2ggYXMgQmV0YURlbGV0ZWRNZXNzYWdlQmF0Y2gsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoIGFzIEJldGFNZXNzYWdlQmF0Y2gsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0LFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UgYXMgQmV0YU1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzIGFzIEJldGFNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoUmVzdWx0LFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCBhcyBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0LFxuICAgIEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UgYXMgQmV0YU1lc3NhZ2VCYXRjaGVzUGFnZSxcbiAgICB0eXBlIEJhdGNoQ3JlYXRlUGFyYW1zIGFzIEJhdGNoQ3JlYXRlUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hSZXRyaWV2ZVBhcmFtcyBhcyBCYXRjaFJldHJpZXZlUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hMaXN0UGFyYW1zIGFzIEJhdGNoTGlzdFBhcmFtcyxcbiAgICB0eXBlIEJhdGNoRGVsZXRlUGFyYW1zIGFzIEJhdGNoRGVsZXRlUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hDYW5jZWxQYXJhbXMgYXMgQmF0Y2hDYW5jZWxQYXJhbXMsXG4gICAgdHlwZSBCYXRjaFJlc3VsdHNQYXJhbXMgYXMgQmF0Y2hSZXN1bHRzUGFyYW1zLFxuICB9O1xufVxuIiwgInR5cGUgVG9rZW4gPSB7XG4gIHR5cGU6IHN0cmluZztcbiAgdmFsdWU6IHN0cmluZztcbn07XG5cbmNvbnN0IHRva2VuaXplID0gKGlucHV0OiBzdHJpbmcpOiBUb2tlbltdID0+IHtcbiAgICBsZXQgY3VycmVudCA9IDA7XG4gICAgbGV0IHRva2VuczogVG9rZW5bXSA9IFtdO1xuXG4gICAgd2hpbGUgKGN1cnJlbnQgPCBpbnB1dC5sZW5ndGgpIHtcbiAgICAgIGxldCBjaGFyID0gaW5wdXRbY3VycmVudF07XG5cbiAgICAgIGlmIChjaGFyID09PSAnXFxcXCcpIHtcbiAgICAgICAgY3VycmVudCsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXIgPT09ICd7Jykge1xuICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgdHlwZTogJ2JyYWNlJyxcbiAgICAgICAgICB2YWx1ZTogJ3snLFxuICAgICAgICB9KTtcblxuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PT0gJ30nKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnYnJhY2UnLFxuICAgICAgICAgIHZhbHVlOiAnfScsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGN1cnJlbnQrKztcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGlmIChjaGFyID09PSAnWycpIHtcbiAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgIHR5cGU6ICdwYXJlbicsXG4gICAgICAgICAgdmFsdWU6ICdbJyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgY3VycmVudCsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoYXIgPT09ICddJykge1xuICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgdHlwZTogJ3BhcmVuJyxcbiAgICAgICAgICB2YWx1ZTogJ10nLFxuICAgICAgICB9KTtcblxuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PT0gJzonKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnc2VwYXJhdG9yJyxcbiAgICAgICAgICB2YWx1ZTogJzonLFxuICAgICAgICB9KTtcblxuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PT0gJywnKSB7XG4gICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICB0eXBlOiAnZGVsaW1pdGVyJyxcbiAgICAgICAgICB2YWx1ZTogJywnLFxuICAgICAgICB9KTtcblxuICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBpZiAoY2hhciA9PT0gJ1wiJykge1xuICAgICAgICBsZXQgdmFsdWUgPSAnJztcbiAgICAgICAgbGV0IGRhbmdsaW5nUXVvdGUgPSBmYWxzZTtcblxuICAgICAgICBjaGFyID0gaW5wdXRbKytjdXJyZW50XTtcblxuICAgICAgICB3aGlsZSAoY2hhciAhPT0gJ1wiJykge1xuICAgICAgICAgIGlmIChjdXJyZW50ID09PSBpbnB1dC5sZW5ndGgpIHtcbiAgICAgICAgICAgIGRhbmdsaW5nUXVvdGUgPSB0cnVlO1xuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGNoYXIgPT09ICdcXFxcJykge1xuICAgICAgICAgICAgY3VycmVudCsrO1xuICAgICAgICAgICAgaWYgKGN1cnJlbnQgPT09IGlucHV0Lmxlbmd0aCkge1xuICAgICAgICAgICAgICBkYW5nbGluZ1F1b3RlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB2YWx1ZSArPSBjaGFyICsgaW5wdXRbY3VycmVudF07XG4gICAgICAgICAgICBjaGFyID0gaW5wdXRbKytjdXJyZW50XTtcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdmFsdWUgKz0gY2hhcjtcbiAgICAgICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGNoYXIgPSBpbnB1dFsrK2N1cnJlbnRdO1xuXG4gICAgICAgIGlmICghZGFuZ2xpbmdRdW90ZSkge1xuICAgICAgICAgIHRva2Vucy5wdXNoKHtcbiAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGxldCBXSElURVNQQUNFID0gL1xccy87XG4gICAgICBpZiAoY2hhciAmJiBXSElURVNQQUNFLnRlc3QoY2hhcikpIHtcbiAgICAgICAgY3VycmVudCsrO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IE5VTUJFUlMgPSAvWzAtOV0vO1xuICAgICAgaWYgKChjaGFyICYmIE5VTUJFUlMudGVzdChjaGFyKSkgfHwgY2hhciA9PT0gJy0nIHx8IGNoYXIgPT09ICcuJykge1xuICAgICAgICBsZXQgdmFsdWUgPSAnJztcblxuICAgICAgICBpZiAoY2hhciA9PT0gJy0nKSB7XG4gICAgICAgICAgdmFsdWUgKz0gY2hhcjtcbiAgICAgICAgICBjaGFyID0gaW5wdXRbKytjdXJyZW50XTtcbiAgICAgICAgfVxuXG4gICAgICAgIHdoaWxlICgoY2hhciAmJiBOVU1CRVJTLnRlc3QoY2hhcikpIHx8IGNoYXIgPT09ICcuJykge1xuICAgICAgICAgIHZhbHVlICs9IGNoYXI7XG4gICAgICAgICAgY2hhciA9IGlucHV0WysrY3VycmVudF07XG4gICAgICAgIH1cblxuICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgdmFsdWUsXG4gICAgICAgIH0pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IExFVFRFUlMgPSAvW2Etel0vaTtcbiAgICAgIGlmIChjaGFyICYmIExFVFRFUlMudGVzdChjaGFyKSkge1xuICAgICAgICBsZXQgdmFsdWUgPSAnJztcblxuICAgICAgICB3aGlsZSAoY2hhciAmJiBMRVRURVJTLnRlc3QoY2hhcikpIHtcbiAgICAgICAgICBpZiAoY3VycmVudCA9PT0gaW5wdXQubGVuZ3RoKSB7XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgdmFsdWUgKz0gY2hhcjtcbiAgICAgICAgICBjaGFyID0gaW5wdXRbKytjdXJyZW50XTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmICh2YWx1ZSA9PSAndHJ1ZScgfHwgdmFsdWUgPT0gJ2ZhbHNlJyB8fCB2YWx1ZSA9PT0gJ251bGwnKSB7XG4gICAgICAgICAgdG9rZW5zLnB1c2goe1xuICAgICAgICAgICAgdHlwZTogJ25hbWUnLFxuICAgICAgICAgICAgdmFsdWUsXG4gICAgICAgICAgfSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgLy8gdW5rbm93biB0b2tlbiwgZS5nLiBgbnVsYCB3aGljaCBpc24ndCBxdWl0ZSBgbnVsbGBcbiAgICAgICAgICBjdXJyZW50Kys7XG4gICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIGN1cnJlbnQrKztcbiAgICB9XG5cbiAgICByZXR1cm4gdG9rZW5zO1xuICB9LFxuICBzdHJpcCA9ICh0b2tlbnM6IFRva2VuW10pOiBUb2tlbltdID0+IHtcbiAgICBpZiAodG9rZW5zLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIHRva2VucztcbiAgICB9XG5cbiAgICBsZXQgbGFzdFRva2VuID0gdG9rZW5zW3Rva2Vucy5sZW5ndGggLSAxXSE7XG5cbiAgICBzd2l0Y2ggKGxhc3RUb2tlbi50eXBlKSB7XG4gICAgICBjYXNlICdzZXBhcmF0b3InOlxuICAgICAgICB0b2tlbnMgPSB0b2tlbnMuc2xpY2UoMCwgdG9rZW5zLmxlbmd0aCAtIDEpO1xuICAgICAgICByZXR1cm4gc3RyaXAodG9rZW5zKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICBsZXQgbGFzdENoYXJhY3Rlck9mTGFzdFRva2VuID0gbGFzdFRva2VuLnZhbHVlW2xhc3RUb2tlbi52YWx1ZS5sZW5ndGggLSAxXTtcbiAgICAgICAgaWYgKGxhc3RDaGFyYWN0ZXJPZkxhc3RUb2tlbiA9PT0gJy4nIHx8IGxhc3RDaGFyYWN0ZXJPZkxhc3RUb2tlbiA9PT0gJy0nKSB7XG4gICAgICAgICAgdG9rZW5zID0gdG9rZW5zLnNsaWNlKDAsIHRva2Vucy5sZW5ndGggLSAxKTtcbiAgICAgICAgICByZXR1cm4gc3RyaXAodG9rZW5zKTtcbiAgICAgICAgfVxuICAgICAgY2FzZSAnc3RyaW5nJzpcbiAgICAgICAgbGV0IHRva2VuQmVmb3JlVGhlTGFzdFRva2VuID0gdG9rZW5zW3Rva2Vucy5sZW5ndGggLSAyXTtcbiAgICAgICAgaWYgKHRva2VuQmVmb3JlVGhlTGFzdFRva2VuPy50eXBlID09PSAnZGVsaW1pdGVyJykge1xuICAgICAgICAgIHRva2VucyA9IHRva2Vucy5zbGljZSgwLCB0b2tlbnMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgcmV0dXJuIHN0cmlwKHRva2Vucyk7XG4gICAgICAgIH0gZWxzZSBpZiAodG9rZW5CZWZvcmVUaGVMYXN0VG9rZW4/LnR5cGUgPT09ICdicmFjZScgJiYgdG9rZW5CZWZvcmVUaGVMYXN0VG9rZW4udmFsdWUgPT09ICd7Jykge1xuICAgICAgICAgIHRva2VucyA9IHRva2Vucy5zbGljZSgwLCB0b2tlbnMubGVuZ3RoIC0gMSk7XG4gICAgICAgICAgcmV0dXJuIHN0cmlwKHRva2Vucyk7XG4gICAgICAgIH1cbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICdkZWxpbWl0ZXInOlxuICAgICAgICB0b2tlbnMgPSB0b2tlbnMuc2xpY2UoMCwgdG9rZW5zLmxlbmd0aCAtIDEpO1xuICAgICAgICByZXR1cm4gc3RyaXAodG9rZW5zKTtcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VucztcbiAgfSxcbiAgdW5zdHJpcCA9ICh0b2tlbnM6IFRva2VuW10pOiBUb2tlbltdID0+IHtcbiAgICBsZXQgdGFpbDogc3RyaW5nW10gPSBbXTtcblxuICAgIHRva2Vucy5tYXAoKHRva2VuKSA9PiB7XG4gICAgICBpZiAodG9rZW4udHlwZSA9PT0gJ2JyYWNlJykge1xuICAgICAgICBpZiAodG9rZW4udmFsdWUgPT09ICd7Jykge1xuICAgICAgICAgIHRhaWwucHVzaCgnfScpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHRhaWwuc3BsaWNlKHRhaWwubGFzdEluZGV4T2YoJ30nKSwgMSk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICAgIGlmICh0b2tlbi50eXBlID09PSAncGFyZW4nKSB7XG4gICAgICAgIGlmICh0b2tlbi52YWx1ZSA9PT0gJ1snKSB7XG4gICAgICAgICAgdGFpbC5wdXNoKCddJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGFpbC5zcGxpY2UodGFpbC5sYXN0SW5kZXhPZignXScpLCAxKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHRhaWwubGVuZ3RoID4gMCkge1xuICAgICAgdGFpbC5yZXZlcnNlKCkubWFwKChpdGVtKSA9PiB7XG4gICAgICAgIGlmIChpdGVtID09PSAnfScpIHtcbiAgICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiAnYnJhY2UnLFxuICAgICAgICAgICAgdmFsdWU6ICd9JyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIGlmIChpdGVtID09PSAnXScpIHtcbiAgICAgICAgICB0b2tlbnMucHVzaCh7XG4gICAgICAgICAgICB0eXBlOiAncGFyZW4nLFxuICAgICAgICAgICAgdmFsdWU6ICddJyxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRva2VucztcbiAgfSxcbiAgZ2VuZXJhdGUgPSAodG9rZW5zOiBUb2tlbltdKTogc3RyaW5nID0+IHtcbiAgICBsZXQgb3V0cHV0ID0gJyc7XG5cbiAgICB0b2tlbnMubWFwKCh0b2tlbikgPT4ge1xuICAgICAgc3dpdGNoICh0b2tlbi50eXBlKSB7XG4gICAgICAgIGNhc2UgJ3N0cmluZyc6XG4gICAgICAgICAgb3V0cHV0ICs9ICdcIicgKyB0b2tlbi52YWx1ZSArICdcIic7XG4gICAgICAgICAgYnJlYWs7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgb3V0cHV0ICs9IHRva2VuLnZhbHVlO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgcmV0dXJuIG91dHB1dDtcbiAgfSxcbiAgcGFydGlhbFBhcnNlID0gKGlucHV0OiBzdHJpbmcpOiB1bmtub3duID0+IEpTT04ucGFyc2UoZ2VuZXJhdGUodW5zdHJpcChzdHJpcCh0b2tlbml6ZShpbnB1dCkpKSkpO1xuXG5leHBvcnQgeyBwYXJ0aWFsUGFyc2UgfTtcbiIsICJpbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuLi9jb3JlLmpzXCI7XG5pbXBvcnQgeyBBbnRocm9waWNFcnJvciwgQVBJVXNlckFib3J0RXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IuanNcIjtcbmltcG9ydCB7XG4gIHR5cGUgQmV0YUNvbnRlbnRCbG9jayxcbiAgTWVzc2FnZXMgYXMgQmV0YU1lc3NhZ2VzLFxuICB0eXBlIEJldGFNZXNzYWdlLFxuICB0eXBlIEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQgYXMgQmV0YU1lc3NhZ2VTdHJlYW1FdmVudCxcbiAgdHlwZSBCZXRhTWVzc2FnZVBhcmFtLFxuICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMgYXMgQmV0YU1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2UgYXMgQmV0YU1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlLFxuICB0eXBlIEJldGFUZXh0QmxvY2ssXG4gIHR5cGUgQmV0YVRleHRDaXRhdGlvbixcbn0gZnJvbSBcIi4uL3Jlc291cmNlcy9iZXRhL21lc3NhZ2VzL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgeyB0eXBlIFJlYWRhYmxlU3RyZWFtLCB0eXBlIFJlc3BvbnNlIH0gZnJvbSBcIi4uL19zaGltcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSBcIi4uL3N0cmVhbWluZy5qc1wiO1xuaW1wb3J0IHsgcGFydGlhbFBhcnNlIH0gZnJvbSBcIi4uL192ZW5kb3IvcGFydGlhbC1qc29uLXBhcnNlci9wYXJzZXIuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlU3RyZWFtRXZlbnRzIHtcbiAgY29ubmVjdDogKCkgPT4gdm9pZDtcbiAgc3RyZWFtRXZlbnQ6IChldmVudDogQmV0YU1lc3NhZ2VTdHJlYW1FdmVudCwgc25hcHNob3Q6IEJldGFNZXNzYWdlKSA9PiB2b2lkO1xuICB0ZXh0OiAodGV4dERlbHRhOiBzdHJpbmcsIHRleHRTbmFwc2hvdDogc3RyaW5nKSA9PiB2b2lkO1xuICBjaXRhdGlvbjogKGNpdGF0aW9uOiBCZXRhVGV4dENpdGF0aW9uLCBjaXRhdGlvbnNTbmFwc2hvdDogQmV0YVRleHRDaXRhdGlvbltdKSA9PiB2b2lkO1xuICBpbnB1dEpzb246IChwYXJ0aWFsSnNvbjogc3RyaW5nLCBqc29uU25hcHNob3Q6IHVua25vd24pID0+IHZvaWQ7XG4gIG1lc3NhZ2U6IChtZXNzYWdlOiBCZXRhTWVzc2FnZSkgPT4gdm9pZDtcbiAgY29udGVudEJsb2NrOiAoY29udGVudDogQmV0YUNvbnRlbnRCbG9jaykgPT4gdm9pZDtcbiAgZmluYWxNZXNzYWdlOiAobWVzc2FnZTogQmV0YU1lc3NhZ2UpID0+IHZvaWQ7XG4gIGVycm9yOiAoZXJyb3I6IEFudGhyb3BpY0Vycm9yKSA9PiB2b2lkO1xuICBhYm9ydDogKGVycm9yOiBBUElVc2VyQWJvcnRFcnJvcikgPT4gdm9pZDtcbiAgZW5kOiAoKSA9PiB2b2lkO1xufVxuXG50eXBlIE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+ID0ge1xuICBsaXN0ZW5lcjogTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF07XG4gIG9uY2U/OiBib29sZWFuO1xufVtdO1xuXG5jb25zdCBKU09OX0JVRl9QUk9QRVJUWSA9ICdfX2pzb25fYnVmJztcblxuZXhwb3J0IGNsYXNzIEJldGFNZXNzYWdlU3RyZWFtIGltcGxlbWVudHMgQXN5bmNJdGVyYWJsZTxCZXRhTWVzc2FnZVN0cmVhbUV2ZW50PiB7XG4gIG1lc3NhZ2VzOiBCZXRhTWVzc2FnZVBhcmFtW10gPSBbXTtcbiAgcmVjZWl2ZWRNZXNzYWdlczogQmV0YU1lc3NhZ2VbXSA9IFtdO1xuICAjY3VycmVudE1lc3NhZ2VTbmFwc2hvdDogQmV0YU1lc3NhZ2UgfCB1bmRlZmluZWQ7XG5cbiAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gICNjb25uZWN0ZWRQcm9taXNlOiBQcm9taXNlPFJlc3BvbnNlIHwgbnVsbD47XG4gICNyZXNvbHZlQ29ubmVjdGVkUHJvbWlzZTogKHJlc3BvbnNlOiBSZXNwb25zZSB8IG51bGwpID0+IHZvaWQgPSAoKSA9PiB7fTtcbiAgI3JlamVjdENvbm5lY3RlZFByb21pc2U6IChlcnJvcjogQW50aHJvcGljRXJyb3IpID0+IHZvaWQgPSAoKSA9PiB7fTtcblxuICAjZW5kUHJvbWlzZTogUHJvbWlzZTx2b2lkPjtcbiAgI3Jlc29sdmVFbmRQcm9taXNlOiAoKSA9PiB2b2lkID0gKCkgPT4ge307XG4gICNyZWplY3RFbmRQcm9taXNlOiAoZXJyb3I6IEFudGhyb3BpY0Vycm9yKSA9PiB2b2lkID0gKCkgPT4ge307XG5cbiAgI2xpc3RlbmVyczogeyBbRXZlbnQgaW4ga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50c10/OiBNZXNzYWdlU3RyZWFtRXZlbnRMaXN0ZW5lcnM8RXZlbnQ+IH0gPSB7fTtcblxuICAjZW5kZWQgPSBmYWxzZTtcbiAgI2Vycm9yZWQgPSBmYWxzZTtcbiAgI2Fib3J0ZWQgPSBmYWxzZTtcbiAgI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgPSBmYWxzZTtcbiAgI3Jlc3BvbnNlOiBSZXNwb25zZSB8IG51bGwgfCB1bmRlZmluZWQ7XG4gICNyZXF1ZXN0X2lkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuI2Nvbm5lY3RlZFByb21pc2UgPSBuZXcgUHJvbWlzZTxSZXNwb25zZSB8IG51bGw+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuI3Jlc29sdmVDb25uZWN0ZWRQcm9taXNlID0gcmVzb2x2ZTtcbiAgICAgIHRoaXMuI3JlamVjdENvbm5lY3RlZFByb21pc2UgPSByZWplY3Q7XG4gICAgfSk7XG5cbiAgICB0aGlzLiNlbmRQcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy4jcmVzb2x2ZUVuZFByb21pc2UgPSByZXNvbHZlO1xuICAgICAgdGhpcy4jcmVqZWN0RW5kUHJvbWlzZSA9IHJlamVjdDtcbiAgICB9KTtcblxuICAgIC8vIERvbid0IGxldCB0aGVzZSBwcm9taXNlcyBjYXVzZSB1bmhhbmRsZWQgcmVqZWN0aW9uIGVycm9ycy5cbiAgICAvLyB3ZSB3aWxsIG1hbnVhbGx5IGNhdXNlIGFuIHVuaGFuZGxlZCByZWplY3Rpb24gZXJyb3IgbGF0ZXJcbiAgICAvLyBpZiB0aGUgdXNlciBoYXNuJ3QgcmVnaXN0ZXJlZCBhbnkgZXJyb3IgbGlzdGVuZXIgb3IgY2FsbGVkXG4gICAgLy8gYW55IHByb21pc2UtcmV0dXJuaW5nIG1ldGhvZC5cbiAgICB0aGlzLiNjb25uZWN0ZWRQcm9taXNlLmNhdGNoKCgpID0+IHt9KTtcbiAgICB0aGlzLiNlbmRQcm9taXNlLmNhdGNoKCgpID0+IHt9KTtcbiAgfVxuXG4gIGdldCByZXNwb25zZSgpOiBSZXNwb25zZSB8IG51bGwgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLiNyZXNwb25zZTtcbiAgfVxuXG4gIGdldCByZXF1ZXN0X2lkKCk6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLiNyZXF1ZXN0X2lkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGBNZXNzYWdlU3RyZWFtYCBkYXRhLCB0aGUgcmF3IGBSZXNwb25zZWAgaW5zdGFuY2UgYW5kIHRoZSBJRCBvZiB0aGUgcmVxdWVzdCxcbiAgICogcmV0dXJuZWQgdmllIHRoZSBgcmVxdWVzdC1pZGAgaGVhZGVyIHdoaWNoIGlzIHVzZWZ1bCBmb3IgZGVidWdnaW5nIHJlcXVlc3RzIGFuZCByZXNwb3J0aW5nXG4gICAqIGlzc3VlcyB0byBBbnRocm9waWMuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIHNhbWUgYXMgdGhlIGBBUElQcm9taXNlLndpdGhSZXNwb25zZSgpYCBtZXRob2QuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgcmFpc2UgYW4gZXJyb3IgaWYgeW91IGNyZWF0ZWQgdGhlIHN0cmVhbSB1c2luZyBgTWVzc2FnZVN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW1gXG4gICAqIGFzIG5vIGBSZXNwb25zZWAgaXMgYXZhaWxhYmxlLlxuICAgKi9cbiAgYXN5bmMgd2l0aFJlc3BvbnNlKCk6IFByb21pc2U8e1xuICAgIGRhdGE6IEJldGFNZXNzYWdlU3RyZWFtO1xuICAgIHJlc3BvbnNlOiBSZXNwb25zZTtcbiAgICByZXF1ZXN0X2lkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuICB9PiB7XG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCB0aGlzLiNjb25uZWN0ZWRQcm9taXNlO1xuICAgIGlmICghcmVzcG9uc2UpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ291bGQgbm90IHJlc29sdmUgYSBgUmVzcG9uc2VgIG9iamVjdCcpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBkYXRhOiB0aGlzLFxuICAgICAgcmVzcG9uc2UsXG4gICAgICByZXF1ZXN0X2lkOiByZXNwb25zZS5oZWFkZXJzLmdldCgncmVxdWVzdC1pZCcpLFxuICAgIH07XG4gIH1cblxuICAvKipcbiAgICogSW50ZW5kZWQgZm9yIHVzZSBvbiB0aGUgZnJvbnRlbmQsIGNvbnN1bWluZyBhIHN0cmVhbSBwcm9kdWNlZCB3aXRoXG4gICAqIGAudG9SZWFkYWJsZVN0cmVhbSgpYCBvbiB0aGUgYmFja2VuZC5cbiAgICpcbiAgICogTm90ZSB0aGF0IG1lc3NhZ2VzIHNlbnQgdG8gdGhlIG1vZGVsIGRvIG5vdCBhcHBlYXIgaW4gYC5vbignbWVzc2FnZScpYFxuICAgKiBpbiB0aGlzIGNvbnRleHQuXG4gICAqL1xuICBzdGF0aWMgZnJvbVJlYWRhYmxlU3RyZWFtKHN0cmVhbTogUmVhZGFibGVTdHJlYW0pOiBCZXRhTWVzc2FnZVN0cmVhbSB7XG4gICAgY29uc3QgcnVubmVyID0gbmV3IEJldGFNZXNzYWdlU3RyZWFtKCk7XG4gICAgcnVubmVyLl9ydW4oKCkgPT4gcnVubmVyLl9mcm9tUmVhZGFibGVTdHJlYW0oc3RyZWFtKSk7XG4gICAgcmV0dXJuIHJ1bm5lcjtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVNZXNzYWdlKFxuICAgIG1lc3NhZ2VzOiBCZXRhTWVzc2FnZXMsXG4gICAgcGFyYW1zOiBCZXRhTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2UsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEJldGFNZXNzYWdlU3RyZWFtIHtcbiAgICBjb25zdCBydW5uZXIgPSBuZXcgQmV0YU1lc3NhZ2VTdHJlYW0oKTtcbiAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgcGFyYW1zLm1lc3NhZ2VzKSB7XG4gICAgICBydW5uZXIuX2FkZE1lc3NhZ2VQYXJhbShtZXNzYWdlKTtcbiAgICB9XG4gICAgcnVubmVyLl9ydW4oKCkgPT5cbiAgICAgIHJ1bm5lci5fY3JlYXRlTWVzc2FnZShcbiAgICAgICAgbWVzc2FnZXMsXG4gICAgICAgIHsgLi4ucGFyYW1zLCBzdHJlYW06IHRydWUgfSxcbiAgICAgICAgeyAuLi5vcHRpb25zLCBoZWFkZXJzOiB7IC4uLm9wdGlvbnM/LmhlYWRlcnMsICdYLVN0YWlubGVzcy1IZWxwZXItTWV0aG9kJzogJ3N0cmVhbScgfSB9LFxuICAgICAgKSxcbiAgICApO1xuICAgIHJldHVybiBydW5uZXI7XG4gIH1cblxuICBwcm90ZWN0ZWQgX3J1bihleGVjdXRvcjogKCkgPT4gUHJvbWlzZTxhbnk+KSB7XG4gICAgZXhlY3V0b3IoKS50aGVuKCgpID0+IHtcbiAgICAgIHRoaXMuX2VtaXRGaW5hbCgpO1xuICAgICAgdGhpcy5fZW1pdCgnZW5kJyk7XG4gICAgfSwgdGhpcy4jaGFuZGxlRXJyb3IpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9hZGRNZXNzYWdlUGFyYW0obWVzc2FnZTogQmV0YU1lc3NhZ2VQYXJhbSkge1xuICAgIHRoaXMubWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfYWRkTWVzc2FnZShtZXNzYWdlOiBCZXRhTWVzc2FnZSwgZW1pdCA9IHRydWUpIHtcbiAgICB0aGlzLnJlY2VpdmVkTWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICBpZiAoZW1pdCkge1xuICAgICAgdGhpcy5fZW1pdCgnbWVzc2FnZScsIG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBfY3JlYXRlTWVzc2FnZShcbiAgICBtZXNzYWdlczogQmV0YU1lc3NhZ2VzLFxuICAgIHBhcmFtczogQmV0YU1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHNpZ25hbCA9IG9wdGlvbnM/LnNpZ25hbDtcbiAgICBpZiAoc2lnbmFsKSB7XG4gICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT4gdGhpcy5jb250cm9sbGVyLmFib3J0KCkpO1xuICAgIH1cbiAgICB0aGlzLiNiZWdpblJlcXVlc3QoKTtcbiAgICBjb25zdCB7IHJlc3BvbnNlLCBkYXRhOiBzdHJlYW0gfSA9IGF3YWl0IG1lc3NhZ2VzXG4gICAgICAuY3JlYXRlKHsgLi4ucGFyYW1zLCBzdHJlYW06IHRydWUgfSwgeyAuLi5vcHRpb25zLCBzaWduYWw6IHRoaXMuY29udHJvbGxlci5zaWduYWwgfSlcbiAgICAgIC53aXRoUmVzcG9uc2UoKTtcbiAgICB0aGlzLl9jb25uZWN0ZWQocmVzcG9uc2UpO1xuICAgIGZvciBhd2FpdCAoY29uc3QgZXZlbnQgb2Ygc3RyZWFtKSB7XG4gICAgICB0aGlzLiNhZGRTdHJlYW1FdmVudChldmVudCk7XG4gICAgfVxuICAgIGlmIChzdHJlYW0uY29udHJvbGxlci5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgIH1cbiAgICB0aGlzLiNlbmRSZXF1ZXN0KCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2Nvbm5lY3RlZChyZXNwb25zZTogUmVzcG9uc2UgfCBudWxsKSB7XG4gICAgaWYgKHRoaXMuZW5kZWQpIHJldHVybjtcbiAgICB0aGlzLiNyZXNwb25zZSA9IHJlc3BvbnNlO1xuICAgIHRoaXMuI3JlcXVlc3RfaWQgPSByZXNwb25zZT8uaGVhZGVycy5nZXQoJ3JlcXVlc3QtaWQnKTtcbiAgICB0aGlzLiNyZXNvbHZlQ29ubmVjdGVkUHJvbWlzZShyZXNwb25zZSk7XG4gICAgdGhpcy5fZW1pdCgnY29ubmVjdCcpO1xuICB9XG5cbiAgZ2V0IGVuZGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLiNlbmRlZDtcbiAgfVxuXG4gIGdldCBlcnJvcmVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLiNlcnJvcmVkO1xuICB9XG5cbiAgZ2V0IGFib3J0ZWQoKTogYm9vbGVhbiB7XG4gICAgcmV0dXJuIHRoaXMuI2Fib3J0ZWQ7XG4gIH1cblxuICBhYm9ydCgpIHtcbiAgICB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIHRoZSBsaXN0ZW5lciBmdW5jdGlvbiB0byB0aGUgZW5kIG9mIHRoZSBsaXN0ZW5lcnMgYXJyYXkgZm9yIHRoZSBldmVudC5cbiAgICogTm8gY2hlY2tzIGFyZSBtYWRlIHRvIHNlZSBpZiB0aGUgbGlzdGVuZXIgaGFzIGFscmVhZHkgYmVlbiBhZGRlZC4gTXVsdGlwbGUgY2FsbHMgcGFzc2luZ1xuICAgKiB0aGUgc2FtZSBjb21iaW5hdGlvbiBvZiBldmVudCBhbmQgbGlzdGVuZXIgd2lsbCByZXN1bHQgaW4gdGhlIGxpc3RlbmVyIGJlaW5nIGFkZGVkLCBhbmRcbiAgICogY2FsbGVkLCBtdWx0aXBsZSB0aW1lcy5cbiAgICogQHJldHVybnMgdGhpcyBNZXNzYWdlU3RyZWFtLCBzbyB0aGF0IGNhbGxzIGNhbiBiZSBjaGFpbmVkXG4gICAqL1xuICBvbjxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+KGV2ZW50OiBFdmVudCwgbGlzdGVuZXI6IE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdKTogdGhpcyB7XG4gICAgY29uc3QgbGlzdGVuZXJzOiBNZXNzYWdlU3RyZWFtRXZlbnRMaXN0ZW5lcnM8RXZlbnQ+ID1cbiAgICAgIHRoaXMuI2xpc3RlbmVyc1tldmVudF0gfHwgKHRoaXMuI2xpc3RlbmVyc1tldmVudF0gPSBbXSk7XG4gICAgbGlzdGVuZXJzLnB1c2goeyBsaXN0ZW5lciB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBSZW1vdmVzIHRoZSBzcGVjaWZpZWQgbGlzdGVuZXIgZnJvbSB0aGUgbGlzdGVuZXIgYXJyYXkgZm9yIHRoZSBldmVudC5cbiAgICogb2ZmKCkgd2lsbCByZW1vdmUsIGF0IG1vc3QsIG9uZSBpbnN0YW5jZSBvZiBhIGxpc3RlbmVyIGZyb20gdGhlIGxpc3RlbmVyIGFycmF5LiBJZiBhbnkgc2luZ2xlXG4gICAqIGxpc3RlbmVyIGhhcyBiZWVuIGFkZGVkIG11bHRpcGxlIHRpbWVzIHRvIHRoZSBsaXN0ZW5lciBhcnJheSBmb3IgdGhlIHNwZWNpZmllZCBldmVudCwgdGhlblxuICAgKiBvZmYoKSBtdXN0IGJlIGNhbGxlZCBtdWx0aXBsZSB0aW1lcyB0byByZW1vdmUgZWFjaCBpbnN0YW5jZS5cbiAgICogQHJldHVybnMgdGhpcyBNZXNzYWdlU3RyZWFtLCBzbyB0aGF0IGNhbGxzIGNhbiBiZSBjaGFpbmVkXG4gICAqL1xuICBvZmY8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihldmVudDogRXZlbnQsIGxpc3RlbmVyOiBNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XSk6IHRoaXMge1xuICAgIGNvbnN0IGxpc3RlbmVycyA9IHRoaXMuI2xpc3RlbmVyc1tldmVudF07XG4gICAgaWYgKCFsaXN0ZW5lcnMpIHJldHVybiB0aGlzO1xuICAgIGNvbnN0IGluZGV4ID0gbGlzdGVuZXJzLmZpbmRJbmRleCgobCkgPT4gbC5saXN0ZW5lciA9PT0gbGlzdGVuZXIpO1xuICAgIGlmIChpbmRleCA+PSAwKSBsaXN0ZW5lcnMuc3BsaWNlKGluZGV4LCAxKTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBBZGRzIGEgb25lLXRpbWUgbGlzdGVuZXIgZnVuY3Rpb24gZm9yIHRoZSBldmVudC4gVGhlIG5leHQgdGltZSB0aGUgZXZlbnQgaXMgdHJpZ2dlcmVkLFxuICAgKiB0aGlzIGxpc3RlbmVyIGlzIHJlbW92ZWQgYW5kIHRoZW4gaW52b2tlZC5cbiAgICogQHJldHVybnMgdGhpcyBNZXNzYWdlU3RyZWFtLCBzbyB0aGF0IGNhbGxzIGNhbiBiZSBjaGFpbmVkXG4gICAqL1xuICBvbmNlPEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oZXZlbnQ6IEV2ZW50LCBsaXN0ZW5lcjogTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0pOiB0aGlzIHtcbiAgICBjb25zdCBsaXN0ZW5lcnM6IE1lc3NhZ2VTdHJlYW1FdmVudExpc3RlbmVyczxFdmVudD4gPVxuICAgICAgdGhpcy4jbGlzdGVuZXJzW2V2ZW50XSB8fCAodGhpcy4jbGlzdGVuZXJzW2V2ZW50XSA9IFtdKTtcbiAgICBsaXN0ZW5lcnMucHVzaCh7IGxpc3RlbmVyLCBvbmNlOiB0cnVlIH0pO1xuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgaXMgc2ltaWxhciB0byBgLm9uY2UoKWAsIGJ1dCByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRoZSBuZXh0IHRpbWVcbiAgICogdGhlIGV2ZW50IGlzIHRyaWdnZXJlZCwgaW5zdGVhZCBvZiBjYWxsaW5nIGEgbGlzdGVuZXIgY2FsbGJhY2suXG4gICAqIEByZXR1cm5zIGEgUHJvbWlzZSB0aGF0IHJlc29sdmVzIHRoZSBuZXh0IHRpbWUgZ2l2ZW4gZXZlbnQgaXMgdHJpZ2dlcmVkLFxuICAgKiBvciByZWplY3RzIGlmIGFuIGVycm9yIGlzIGVtaXR0ZWQuICAoSWYgeW91IHJlcXVlc3QgdGhlICdlcnJvcicgZXZlbnQsXG4gICAqIHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgZXJyb3IpLlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKlxuICAgKiAgIGNvbnN0IG1lc3NhZ2UgPSBhd2FpdCBzdHJlYW0uZW1pdHRlZCgnbWVzc2FnZScpIC8vIHJlamVjdHMgaWYgdGhlIHN0cmVhbSBlcnJvcnNcbiAgICovXG4gIGVtaXR0ZWQ8RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihcbiAgICBldmVudDogRXZlbnQsXG4gICk6IFByb21pc2U8XG4gICAgUGFyYW1ldGVyczxNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XT4gZXh0ZW5kcyBbaW5mZXIgUGFyYW1dID8gUGFyYW1cbiAgICA6IFBhcmFtZXRlcnM8TWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+IGV4dGVuZHMgW10gPyB2b2lkXG4gICAgOiBQYXJhbWV0ZXJzPE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdPlxuICA+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy4jY2F0Y2hpbmdQcm9taXNlQ3JlYXRlZCA9IHRydWU7XG4gICAgICBpZiAoZXZlbnQgIT09ICdlcnJvcicpIHRoaXMub25jZSgnZXJyb3InLCByZWplY3QpO1xuICAgICAgdGhpcy5vbmNlKGV2ZW50LCByZXNvbHZlIGFzIGFueSk7XG4gICAgfSk7XG4gIH1cblxuICBhc3luYyBkb25lKCk6IFByb21pc2U8dm9pZD4ge1xuICAgIHRoaXMuI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgPSB0cnVlO1xuICAgIGF3YWl0IHRoaXMuI2VuZFByb21pc2U7XG4gIH1cblxuICBnZXQgY3VycmVudE1lc3NhZ2UoKTogQmV0YU1lc3NhZ2UgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90O1xuICB9XG5cbiAgI2dldEZpbmFsTWVzc2FnZSgpOiBCZXRhTWVzc2FnZSB7XG4gICAgaWYgKHRoaXMucmVjZWl2ZWRNZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcignc3RyZWFtIGVuZGVkIHdpdGhvdXQgcHJvZHVjaW5nIGEgTWVzc2FnZSB3aXRoIHJvbGU9YXNzaXN0YW50Jyk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLnJlY2VpdmVkTWVzc2FnZXMuYXQoLTEpITtcbiAgfVxuXG4gIC8qKlxuICAgKiBAcmV0dXJucyBhIHByb21pc2UgdGhhdCByZXNvbHZlcyB3aXRoIHRoZSB0aGUgZmluYWwgYXNzaXN0YW50IE1lc3NhZ2UgcmVzcG9uc2UsXG4gICAqIG9yIHJlamVjdHMgaWYgYW4gZXJyb3Igb2NjdXJyZWQgb3IgdGhlIHN0cmVhbSBlbmRlZCBwcmVtYXR1cmVseSB3aXRob3V0IHByb2R1Y2luZyBhIE1lc3NhZ2UuXG4gICAqL1xuICBhc3luYyBmaW5hbE1lc3NhZ2UoKTogUHJvbWlzZTxCZXRhTWVzc2FnZT4ge1xuICAgIGF3YWl0IHRoaXMuZG9uZSgpO1xuICAgIHJldHVybiB0aGlzLiNnZXRGaW5hbE1lc3NhZ2UoKTtcbiAgfVxuXG4gICNnZXRGaW5hbFRleHQoKTogc3RyaW5nIHtcbiAgICBpZiAodGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKCdzdHJlYW0gZW5kZWQgd2l0aG91dCBwcm9kdWNpbmcgYSBNZXNzYWdlIHdpdGggcm9sZT1hc3Npc3RhbnQnKTtcbiAgICB9XG4gICAgY29uc3QgdGV4dEJsb2NrcyA9IHRoaXMucmVjZWl2ZWRNZXNzYWdlc1xuICAgICAgLmF0KC0xKSFcbiAgICAgIC5jb250ZW50LmZpbHRlcigoYmxvY2spOiBibG9jayBpcyBCZXRhVGV4dEJsb2NrID0+IGJsb2NrLnR5cGUgPT09ICd0ZXh0JylcbiAgICAgIC5tYXAoKGJsb2NrKSA9PiBibG9jay50ZXh0KTtcbiAgICBpZiAodGV4dEJsb2Nrcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcignc3RyZWFtIGVuZGVkIHdpdGhvdXQgcHJvZHVjaW5nIGEgY29udGVudCBibG9jayB3aXRoIHR5cGU9dGV4dCcpO1xuICAgIH1cbiAgICByZXR1cm4gdGV4dEJsb2Nrcy5qb2luKCcgJyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgdGhlIGZpbmFsIGFzc2lzdGFudCBNZXNzYWdlJ3MgdGV4dCByZXNwb25zZSwgY29uY2F0ZW5hdGVkXG4gICAqIHRvZ2V0aGVyIGlmIHRoZXJlIGFyZSBtb3JlIHRoYW4gb25lIHRleHQgYmxvY2tzLlxuICAgKiBSZWplY3RzIGlmIGFuIGVycm9yIG9jY3VycmVkIG9yIHRoZSBzdHJlYW0gZW5kZWQgcHJlbWF0dXJlbHkgd2l0aG91dCBwcm9kdWNpbmcgYSBNZXNzYWdlLlxuICAgKi9cbiAgYXN5bmMgZmluYWxUZXh0KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgYXdhaXQgdGhpcy5kb25lKCk7XG4gICAgcmV0dXJuIHRoaXMuI2dldEZpbmFsVGV4dCgpO1xuICB9XG5cbiAgI2hhbmRsZUVycm9yID0gKGVycm9yOiB1bmtub3duKSA9PiB7XG4gICAgdGhpcy4jZXJyb3JlZCA9IHRydWU7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICBlcnJvciA9IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBBUElVc2VyQWJvcnRFcnJvcikge1xuICAgICAgdGhpcy4jYWJvcnRlZCA9IHRydWU7XG4gICAgICByZXR1cm4gdGhpcy5fZW1pdCgnYWJvcnQnLCBlcnJvcik7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEFudGhyb3BpY0Vycm9yKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZW1pdCgnZXJyb3InLCBlcnJvcik7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zdCBhbnRocm9waWNFcnJvcjogQW50aHJvcGljRXJyb3IgPSBuZXcgQW50aHJvcGljRXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBhbnRocm9waWNFcnJvci5jYXVzZSA9IGVycm9yO1xuICAgICAgcmV0dXJuIHRoaXMuX2VtaXQoJ2Vycm9yJywgYW50aHJvcGljRXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZW1pdCgnZXJyb3InLCBuZXcgQW50aHJvcGljRXJyb3IoU3RyaW5nKGVycm9yKSkpO1xuICB9O1xuXG4gIHByb3RlY3RlZCBfZW1pdDxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+KFxuICAgIGV2ZW50OiBFdmVudCxcbiAgICAuLi5hcmdzOiBQYXJhbWV0ZXJzPE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdPlxuICApIHtcbiAgICAvLyBtYWtlIHN1cmUgd2UgZG9uJ3QgZW1pdCBhbnkgTWVzc2FnZVN0cmVhbUV2ZW50cyBhZnRlciBlbmRcbiAgICBpZiAodGhpcy4jZW5kZWQpIHJldHVybjtcblxuICAgIGlmIChldmVudCA9PT0gJ2VuZCcpIHtcbiAgICAgIHRoaXMuI2VuZGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuI3Jlc29sdmVFbmRQcm9taXNlKCk7XG4gICAgfVxuXG4gICAgY29uc3QgbGlzdGVuZXJzOiBNZXNzYWdlU3RyZWFtRXZlbnRMaXN0ZW5lcnM8RXZlbnQ+IHwgdW5kZWZpbmVkID0gdGhpcy4jbGlzdGVuZXJzW2V2ZW50XTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdID0gbGlzdGVuZXJzLmZpbHRlcigobCkgPT4gIWwub25jZSkgYXMgYW55O1xuICAgICAgbGlzdGVuZXJzLmZvckVhY2goKHsgbGlzdGVuZXIgfTogYW55KSA9PiBsaXN0ZW5lciguLi5hcmdzKSk7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50ID09PSAnYWJvcnQnKSB7XG4gICAgICBjb25zdCBlcnJvciA9IGFyZ3NbMF0gYXMgQVBJVXNlckFib3J0RXJyb3I7XG4gICAgICBpZiAoIXRoaXMuI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgJiYgIWxpc3RlbmVycz8ubGVuZ3RoKSB7XG4gICAgICAgIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuI3JlamVjdENvbm5lY3RlZFByb21pc2UoZXJyb3IpO1xuICAgICAgdGhpcy4jcmVqZWN0RW5kUHJvbWlzZShlcnJvcik7XG4gICAgICB0aGlzLl9lbWl0KCdlbmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQgPT09ICdlcnJvcicpIHtcbiAgICAgIC8vIE5PVEU6IF9lbWl0KCdlcnJvcicsIGVycm9yKSBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSAjaGFuZGxlRXJyb3IoKS5cblxuICAgICAgY29uc3QgZXJyb3IgPSBhcmdzWzBdIGFzIEFudGhyb3BpY0Vycm9yO1xuICAgICAgaWYgKCF0aGlzLiNjYXRjaGluZ1Byb21pc2VDcmVhdGVkICYmICFsaXN0ZW5lcnM/Lmxlbmd0aCkge1xuICAgICAgICAvLyBUcmlnZ2VyIGFuIHVuaGFuZGxlZCByZWplY3Rpb24gaWYgdGhlIHVzZXIgaGFzbid0IHJlZ2lzdGVyZWQgYW55IGVycm9yIGhhbmRsZXJzLlxuICAgICAgICAvLyBJZiB5b3UgYXJlIHNlZWluZyBzdGFjayB0cmFjZXMgaGVyZSwgbWFrZSBzdXJlIHRvIGhhbmRsZSBlcnJvcnMgdmlhIGVpdGhlcjpcbiAgICAgICAgLy8gLSBydW5uZXIub24oJ2Vycm9yJywgKCkgPT4gLi4uKVxuICAgICAgICAvLyAtIGF3YWl0IHJ1bm5lci5kb25lKClcbiAgICAgICAgLy8gLSBhd2FpdCBydW5uZXIuZmluYWwuLi4oKVxuICAgICAgICAvLyAtIGV0Yy5cbiAgICAgICAgUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgICAgdGhpcy4jcmVqZWN0Q29ubmVjdGVkUHJvbWlzZShlcnJvcik7XG4gICAgICB0aGlzLiNyZWplY3RFbmRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuX2VtaXQoJ2VuZCcpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBfZW1pdEZpbmFsKCkge1xuICAgIGNvbnN0IGZpbmFsTWVzc2FnZSA9IHRoaXMucmVjZWl2ZWRNZXNzYWdlcy5hdCgtMSk7XG4gICAgaWYgKGZpbmFsTWVzc2FnZSkge1xuICAgICAgdGhpcy5fZW1pdCgnZmluYWxNZXNzYWdlJywgdGhpcy4jZ2V0RmluYWxNZXNzYWdlKCkpO1xuICAgIH1cbiAgfVxuXG4gICNiZWdpblJlcXVlc3QoKSB7XG4gICAgaWYgKHRoaXMuZW5kZWQpIHJldHVybjtcbiAgICB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90ID0gdW5kZWZpbmVkO1xuICB9XG4gICNhZGRTdHJlYW1FdmVudChldmVudDogQmV0YU1lc3NhZ2VTdHJlYW1FdmVudCkge1xuICAgIGlmICh0aGlzLmVuZGVkKSByZXR1cm47XG4gICAgY29uc3QgbWVzc2FnZVNuYXBzaG90ID0gdGhpcy4jYWNjdW11bGF0ZU1lc3NhZ2UoZXZlbnQpO1xuICAgIHRoaXMuX2VtaXQoJ3N0cmVhbUV2ZW50JywgZXZlbnQsIG1lc3NhZ2VTbmFwc2hvdCk7XG5cbiAgICBzd2l0Y2ggKGV2ZW50LnR5cGUpIHtcbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfZGVsdGEnOiB7XG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBtZXNzYWdlU25hcHNob3QuY29udGVudC5hdCgtMSkhO1xuICAgICAgICBzd2l0Y2ggKGV2ZW50LmRlbHRhLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICd0ZXh0X2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2VtaXQoJ3RleHQnLCBldmVudC5kZWx0YS50ZXh0LCBjb250ZW50LnRleHQgfHwgJycpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgJ2NpdGF0aW9uc19kZWx0YSc6IHtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICB0aGlzLl9lbWl0KCdjaXRhdGlvbicsIGV2ZW50LmRlbHRhLmNpdGF0aW9uLCBjb250ZW50LmNpdGF0aW9ucyA/PyBbXSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSAnaW5wdXRfanNvbl9kZWx0YSc6IHtcbiAgICAgICAgICAgIGlmIChjb250ZW50LnR5cGUgPT09ICd0b29sX3VzZScgJiYgY29udGVudC5pbnB1dCkge1xuICAgICAgICAgICAgICB0aGlzLl9lbWl0KCdpbnB1dEpzb24nLCBldmVudC5kZWx0YS5wYXJ0aWFsX2pzb24sIGNvbnRlbnQuaW5wdXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjaGVja05ldmVyKGV2ZW50LmRlbHRhKTtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ21lc3NhZ2Vfc3RvcCc6IHtcbiAgICAgICAgdGhpcy5fYWRkTWVzc2FnZVBhcmFtKG1lc3NhZ2VTbmFwc2hvdCk7XG4gICAgICAgIHRoaXMuX2FkZE1lc3NhZ2UobWVzc2FnZVNuYXBzaG90LCB0cnVlKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX3N0b3AnOiB7XG4gICAgICAgIHRoaXMuX2VtaXQoJ2NvbnRlbnRCbG9jaycsIG1lc3NhZ2VTbmFwc2hvdC5jb250ZW50LmF0KC0xKSEpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ21lc3NhZ2Vfc3RhcnQnOiB7XG4gICAgICAgIHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3QgPSBtZXNzYWdlU25hcHNob3Q7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19zdGFydCc6XG4gICAgICBjYXNlICdtZXNzYWdlX2RlbHRhJzpcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuICB9XG4gICNlbmRSZXF1ZXN0KCk6IEJldGFNZXNzYWdlIHtcbiAgICBpZiAodGhpcy5lbmRlZCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBzdHJlYW0gaGFzIGVuZGVkLCB0aGlzIHNob3VsZG4ndCBoYXBwZW5gKTtcbiAgICB9XG4gICAgY29uc3Qgc25hcHNob3QgPSB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90O1xuICAgIGlmICghc25hcHNob3QpIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgcmVxdWVzdCBlbmRlZCB3aXRob3V0IHNlbmRpbmcgYW55IGNodW5rc2ApO1xuICAgIH1cbiAgICB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90ID0gdW5kZWZpbmVkO1xuICAgIHJldHVybiBzbmFwc2hvdDtcbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBfZnJvbVJlYWRhYmxlU3RyZWFtKFxuICAgIHJlYWRhYmxlU3RyZWFtOiBSZWFkYWJsZVN0cmVhbSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogUHJvbWlzZTx2b2lkPiB7XG4gICAgY29uc3Qgc2lnbmFsID0gb3B0aW9ucz8uc2lnbmFsO1xuICAgIGlmIChzaWduYWwpIHtcbiAgICAgIGlmIChzaWduYWwuYWJvcnRlZCkgdGhpcy5jb250cm9sbGVyLmFib3J0KCk7XG4gICAgICBzaWduYWwuYWRkRXZlbnRMaXN0ZW5lcignYWJvcnQnLCAoKSA9PiB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKSk7XG4gICAgfVxuICAgIHRoaXMuI2JlZ2luUmVxdWVzdCgpO1xuICAgIHRoaXMuX2Nvbm5lY3RlZChudWxsKTtcbiAgICBjb25zdCBzdHJlYW0gPSBTdHJlYW0uZnJvbVJlYWRhYmxlU3RyZWFtPEJldGFNZXNzYWdlU3RyZWFtRXZlbnQ+KHJlYWRhYmxlU3RyZWFtLCB0aGlzLmNvbnRyb2xsZXIpO1xuICAgIGZvciBhd2FpdCAoY29uc3QgZXZlbnQgb2Ygc3RyZWFtKSB7XG4gICAgICB0aGlzLiNhZGRTdHJlYW1FdmVudChldmVudCk7XG4gICAgfVxuICAgIGlmIChzdHJlYW0uY29udHJvbGxlci5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgIH1cbiAgICB0aGlzLiNlbmRSZXF1ZXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogTXV0YXRlcyB0aGlzLiNjdXJyZW50TWVzc2FnZSB3aXRoIHRoZSBjdXJyZW50IGV2ZW50LiBIYW5kbGluZyB0aGUgYWNjdW11bGF0aW9uIG9mIG11bHRpcGxlIG1lc3NhZ2VzXG4gICAqIHdpbGwgYmUgbmVlZGVkIHRvIGJlIGhhbmRsZWQgYnkgdGhlIGNhbGxlciwgdGhpcyBtZXRob2Qgd2lsbCB0aHJvdyBpZiB5b3UgdHJ5IHRvIGFjY3VtdWxhdGUgZm9yIG11bHRpcGxlXG4gICAqIG1lc3NhZ2VzLlxuICAgKi9cbiAgI2FjY3VtdWxhdGVNZXNzYWdlKGV2ZW50OiBCZXRhTWVzc2FnZVN0cmVhbUV2ZW50KTogQmV0YU1lc3NhZ2Uge1xuICAgIGxldCBzbmFwc2hvdCA9IHRoaXMuI2N1cnJlbnRNZXNzYWdlU25hcHNob3Q7XG5cbiAgICBpZiAoZXZlbnQudHlwZSA9PT0gJ21lc3NhZ2Vfc3RhcnQnKSB7XG4gICAgICBpZiAoc25hcHNob3QpIHtcbiAgICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKGBVbmV4cGVjdGVkIGV2ZW50IG9yZGVyLCBnb3QgJHtldmVudC50eXBlfSBiZWZvcmUgcmVjZWl2aW5nIFwibWVzc2FnZV9zdG9wXCJgKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBldmVudC5tZXNzYWdlO1xuICAgIH1cblxuICAgIGlmICghc25hcHNob3QpIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgVW5leHBlY3RlZCBldmVudCBvcmRlciwgZ290ICR7ZXZlbnQudHlwZX0gYmVmb3JlIFwibWVzc2FnZV9zdGFydFwiYCk7XG4gICAgfVxuXG4gICAgc3dpdGNoIChldmVudC50eXBlKSB7XG4gICAgICBjYXNlICdtZXNzYWdlX3N0b3AnOlxuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgICBjYXNlICdtZXNzYWdlX2RlbHRhJzpcbiAgICAgICAgc25hcHNob3Quc3RvcF9yZWFzb24gPSBldmVudC5kZWx0YS5zdG9wX3JlYXNvbjtcbiAgICAgICAgc25hcHNob3Quc3RvcF9zZXF1ZW5jZSA9IGV2ZW50LmRlbHRhLnN0b3Bfc2VxdWVuY2U7XG4gICAgICAgIHNuYXBzaG90LnVzYWdlLm91dHB1dF90b2tlbnMgPSBldmVudC51c2FnZS5vdXRwdXRfdG9rZW5zO1xuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX3N0YXJ0JzpcbiAgICAgICAgc25hcHNob3QuY29udGVudC5wdXNoKGV2ZW50LmNvbnRlbnRfYmxvY2spO1xuICAgICAgICByZXR1cm4gc25hcHNob3Q7XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX2RlbHRhJzoge1xuICAgICAgICBjb25zdCBzbmFwc2hvdENvbnRlbnQgPSBzbmFwc2hvdC5jb250ZW50LmF0KGV2ZW50LmluZGV4KTtcblxuICAgICAgICBzd2l0Y2ggKGV2ZW50LmRlbHRhLnR5cGUpIHtcbiAgICAgICAgICBjYXNlICd0ZXh0X2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKHNuYXBzaG90Q29udGVudD8udHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgIHNuYXBzaG90Q29udGVudC50ZXh0ICs9IGV2ZW50LmRlbHRhLnRleHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSAnY2l0YXRpb25zX2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKHNuYXBzaG90Q29udGVudD8udHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgIHNuYXBzaG90Q29udGVudC5jaXRhdGlvbnMgPz89IFtdO1xuICAgICAgICAgICAgICBzbmFwc2hvdENvbnRlbnQuY2l0YXRpb25zLnB1c2goZXZlbnQuZGVsdGEuY2l0YXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgJ2lucHV0X2pzb25fZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoc25hcHNob3RDb250ZW50Py50eXBlID09PSAndG9vbF91c2UnKSB7XG4gICAgICAgICAgICAgIC8vIHdlIG5lZWQgdG8ga2VlcCB0cmFjayBvZiB0aGUgcmF3IEpTT04gc3RyaW5nIGFzIHdlbGwgc28gdGhhdCB3ZSBjYW5cbiAgICAgICAgICAgICAgLy8gcmUtcGFyc2UgaXQgZm9yIGVhY2ggZGVsdGEsIGZvciBub3cgd2UganVzdCBzdG9yZSBpdCBhcyBhbiB1bnR5cGVkXG4gICAgICAgICAgICAgIC8vIG5vbi1lbnVtZXJhYmxlIHByb3BlcnR5IG9uIHRoZSBzbmFwc2hvdFxuICAgICAgICAgICAgICBsZXQganNvbkJ1ZiA9IChzbmFwc2hvdENvbnRlbnQgYXMgYW55KVtKU09OX0JVRl9QUk9QRVJUWV0gfHwgJyc7XG4gICAgICAgICAgICAgIGpzb25CdWYgKz0gZXZlbnQuZGVsdGEucGFydGlhbF9qc29uO1xuXG4gICAgICAgICAgICAgIE9iamVjdC5kZWZpbmVQcm9wZXJ0eShzbmFwc2hvdENvbnRlbnQsIEpTT05fQlVGX1BST1BFUlRZLCB7XG4gICAgICAgICAgICAgICAgdmFsdWU6IGpzb25CdWYsXG4gICAgICAgICAgICAgICAgZW51bWVyYWJsZTogZmFsc2UsXG4gICAgICAgICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgICAgIGlmIChqc29uQnVmKSB7XG4gICAgICAgICAgICAgICAgc25hcHNob3RDb250ZW50LmlucHV0ID0gcGFydGlhbFBhcnNlKGpzb25CdWYpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNoZWNrTmV2ZXIoZXZlbnQuZGVsdGEpO1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RvcCc6XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICB9XG4gIH1cblxuICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk6IEFzeW5jSXRlcmF0b3I8QmV0YU1lc3NhZ2VTdHJlYW1FdmVudD4ge1xuICAgIGNvbnN0IHB1c2hRdWV1ZTogQmV0YU1lc3NhZ2VTdHJlYW1FdmVudFtdID0gW107XG4gICAgY29uc3QgcmVhZFF1ZXVlOiB7XG4gICAgICByZXNvbHZlOiAoY2h1bms6IEJldGFNZXNzYWdlU3RyZWFtRXZlbnQgfCB1bmRlZmluZWQpID0+IHZvaWQ7XG4gICAgICByZWplY3Q6IChlcnJvcjogdW5rbm93bikgPT4gdm9pZDtcbiAgICB9W10gPSBbXTtcbiAgICBsZXQgZG9uZSA9IGZhbHNlO1xuXG4gICAgdGhpcy5vbignc3RyZWFtRXZlbnQnLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHJlYWRlciA9IHJlYWRRdWV1ZS5zaGlmdCgpO1xuICAgICAgaWYgKHJlYWRlcikge1xuICAgICAgICByZWFkZXIucmVzb2x2ZShldmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwdXNoUXVldWUucHVzaChldmVudCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIGZvciAoY29uc3QgcmVhZGVyIG9mIHJlYWRRdWV1ZSkge1xuICAgICAgICByZWFkZXIucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgfVxuICAgICAgcmVhZFF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uKCdhYm9ydCcsIChlcnIpID0+IHtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgZm9yIChjb25zdCByZWFkZXIgb2YgcmVhZFF1ZXVlKSB7XG4gICAgICAgIHJlYWRlci5yZWplY3QoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJlYWRRdWV1ZS5sZW5ndGggPSAwO1xuICAgIH0pO1xuXG4gICAgdGhpcy5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIGZvciAoY29uc3QgcmVhZGVyIG9mIHJlYWRRdWV1ZSkge1xuICAgICAgICByZWFkZXIucmVqZWN0KGVycik7XG4gICAgICB9XG4gICAgICByZWFkUXVldWUubGVuZ3RoID0gMDtcbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBuZXh0OiBhc3luYyAoKTogUHJvbWlzZTxJdGVyYXRvclJlc3VsdDxCZXRhTWVzc2FnZVN0cmVhbUV2ZW50Pj4gPT4ge1xuICAgICAgICBpZiAoIXB1c2hRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgICBpZiAoZG9uZSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9O1xuICAgICAgICAgIH1cbiAgICAgICAgICByZXR1cm4gbmV3IFByb21pc2U8QmV0YU1lc3NhZ2VTdHJlYW1FdmVudCB8IHVuZGVmaW5lZD4oKHJlc29sdmUsIHJlamVjdCkgPT5cbiAgICAgICAgICAgIHJlYWRRdWV1ZS5wdXNoKHsgcmVzb2x2ZSwgcmVqZWN0IH0pLFxuICAgICAgICAgICkudGhlbigoY2h1bmspID0+IChjaHVuayA/IHsgdmFsdWU6IGNodW5rLCBkb25lOiBmYWxzZSB9IDogeyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH0pKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBjaHVuayA9IHB1c2hRdWV1ZS5zaGlmdCgpITtcbiAgICAgICAgcmV0dXJuIHsgdmFsdWU6IGNodW5rLCBkb25lOiBmYWxzZSB9O1xuICAgICAgfSxcbiAgICAgIHJldHVybjogYXN5bmMgKCkgPT4ge1xuICAgICAgICB0aGlzLmFib3J0KCk7XG4gICAgICAgIHJldHVybiB7IHZhbHVlOiB1bmRlZmluZWQsIGRvbmU6IHRydWUgfTtcbiAgICAgIH0sXG4gICAgfTtcbiAgfVxuXG4gIHRvUmVhZGFibGVTdHJlYW0oKTogUmVhZGFibGVTdHJlYW0ge1xuICAgIGNvbnN0IHN0cmVhbSA9IG5ldyBTdHJlYW0odGhpc1tTeW1ib2wuYXN5bmNJdGVyYXRvcl0uYmluZCh0aGlzKSwgdGhpcy5jb250cm9sbGVyKTtcbiAgICByZXR1cm4gc3RyZWFtLnRvUmVhZGFibGVTdHJlYW0oKTtcbiAgfVxufVxuXG4vLyB1c2VkIHRvIGVuc3VyZSBleGhhdXN0aXZlIGNhc2UgbWF0Y2hpbmcgd2l0aG91dCB0aHJvd2luZyBhIHJ1bnRpbWUgZXJyb3JcbmZ1bmN0aW9uIGNoZWNrTmV2ZXIoeDogbmV2ZXIpIHt9XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vLi4vLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCB7IEFQSVByb21pc2UgfSBmcm9tIFwiLi4vLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vLi4vLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgTWVzc2FnZXNNZXNzYWdlc0FQSSBmcm9tIFwiLi9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0ICogYXMgQmV0YUFQSSBmcm9tIFwiLi4vYmV0YS5qc1wiO1xuaW1wb3J0ICogYXMgTWVzc2FnZXNBUEkgZnJvbSBcIi4uLy4uL21lc3NhZ2VzL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgKiBhcyBCYXRjaGVzQVBJIGZyb20gXCIuL2JhdGNoZXMuanNcIjtcbmltcG9ydCB7XG4gIEJhdGNoQ2FuY2VsUGFyYW1zLFxuICBCYXRjaENyZWF0ZVBhcmFtcyxcbiAgQmF0Y2hEZWxldGVQYXJhbXMsXG4gIEJhdGNoTGlzdFBhcmFtcyxcbiAgQmF0Y2hSZXN1bHRzUGFyYW1zLFxuICBCYXRjaFJldHJpZXZlUGFyYW1zLFxuICBCYXRjaGVzLFxuICBCZXRhRGVsZXRlZE1lc3NhZ2VCYXRjaCxcbiAgQmV0YU1lc3NhZ2VCYXRjaCxcbiAgQmV0YU1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0LFxuICBCZXRhTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCxcbiAgQmV0YU1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQsXG4gIEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UsXG4gIEJldGFNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzLFxuICBCZXRhTWVzc2FnZUJhdGNoUmVzdWx0LFxuICBCZXRhTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0LFxuICBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlLFxufSBmcm9tIFwiLi9iYXRjaGVzLmpzXCI7XG5pbXBvcnQgeyBTdHJlYW0gfSBmcm9tIFwiLi4vLi4vLi4vc3RyZWFtaW5nLmpzXCI7XG5pbXBvcnQgeyBCZXRhTWVzc2FnZVN0cmVhbSB9IGZyb20gXCIuLi8uLi8uLi9saWIvQmV0YU1lc3NhZ2VTdHJlYW0uanNcIjtcbmltcG9ydCB0eXBlIHsgTW9kZWwgfSBmcm9tIFwiLi4vLi4vbWVzc2FnZXMvbWVzc2FnZXMuanNcIjtcblxuY29uc3QgREVQUkVDQVRFRF9NT0RFTFM6IHtcbiAgW0sgaW4gTW9kZWxdPzogc3RyaW5nO1xufSA9IHtcbiAgJ2NsYXVkZS0xLjMnOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS0xLjMtMTAwayc6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLWluc3RhbnQtMS4xJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG4gICdjbGF1ZGUtaW5zdGFudC0xLjEtMTAwayc6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLWluc3RhbnQtMS4yJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG4gICdjbGF1ZGUtMy1zb25uZXQtMjAyNDAyMjknOiAnSnVseSAyMXN0LCAyMDI1JyxcbiAgJ2NsYXVkZS0yLjEnOiAnSnVseSAyMXN0LCAyMDI1JyxcbiAgJ2NsYXVkZS0yLjAnOiAnSnVseSAyMXN0LCAyMDI1Jyxcbn07XG5cbmV4cG9ydCBjbGFzcyBNZXNzYWdlcyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgYmF0Y2hlczogQmF0Y2hlc0FQSS5CYXRjaGVzID0gbmV3IEJhdGNoZXNBUEkuQmF0Y2hlcyh0aGlzLl9jbGllbnQpO1xuXG4gIC8qKlxuICAgKiBTZW5kIGEgc3RydWN0dXJlZCBsaXN0IG9mIGlucHV0IG1lc3NhZ2VzIHdpdGggdGV4dCBhbmQvb3IgaW1hZ2UgY29udGVudCwgYW5kIHRoZVxuICAgKiBtb2RlbCB3aWxsIGdlbmVyYXRlIHRoZSBuZXh0IG1lc3NhZ2UgaW4gdGhlIGNvbnZlcnNhdGlvbi5cbiAgICpcbiAgICogVGhlIE1lc3NhZ2VzIEFQSSBjYW4gYmUgdXNlZCBmb3IgZWl0aGVyIHNpbmdsZSBxdWVyaWVzIG9yIHN0YXRlbGVzcyBtdWx0aS10dXJuXG4gICAqIGNvbnZlcnNhdGlvbnMuXG4gICAqL1xuICBjcmVhdGUocGFyYW1zOiBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IEFQSVByb21pc2U8QmV0YU1lc3NhZ2U+O1xuICBjcmVhdGUoXG4gICAgcGFyYW1zOiBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50Pj47XG4gIGNyZWF0ZShcbiAgICBwYXJhbXM6IE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPFN0cmVhbTxCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50PiB8IEJldGFNZXNzYWdlPjtcbiAgY3JlYXRlKFxuICAgIHBhcmFtczogTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxCZXRhTWVzc2FnZT4gfCBBUElQcm9taXNlPFN0cmVhbTxCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50Pj4ge1xuICAgIGNvbnN0IHsgYmV0YXMsIC4uLmJvZHkgfSA9IHBhcmFtcztcblxuICAgIGlmIChib2R5Lm1vZGVsIGluIERFUFJFQ0FURURfTU9ERUxTKSB7XG4gICAgICBjb25zb2xlLndhcm4oXG4gICAgICAgIGBUaGUgbW9kZWwgJyR7Ym9keS5tb2RlbH0nIGlzIGRlcHJlY2F0ZWQgYW5kIHdpbGwgcmVhY2ggZW5kLW9mLWxpZmUgb24gJHtcbiAgICAgICAgICBERVBSRUNBVEVEX01PREVMU1tib2R5Lm1vZGVsXVxuICAgICAgICB9XFxuUGxlYXNlIG1pZ3JhdGUgdG8gYSBuZXdlciBtb2RlbC4gVmlzaXQgaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9yZXNvdXJjZXMvbW9kZWwtZGVwcmVjYXRpb25zIGZvciBtb3JlIGluZm9ybWF0aW9uLmAsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9jbGllbnQucG9zdCgnL3YxL21lc3NhZ2VzP2JldGE9dHJ1ZScsIHtcbiAgICAgIGJvZHksXG4gICAgICB0aW1lb3V0OiAodGhpcy5fY2xpZW50IGFzIGFueSkuX29wdGlvbnMudGltZW91dCA/PyA2MDAwMDAsXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgaGVhZGVyczoge1xuICAgICAgICAuLi4oYmV0YXM/LnRvU3RyaW5nKCkgIT0gbnVsbCA/IHsgJ2FudGhyb3BpYy1iZXRhJzogYmV0YXM/LnRvU3RyaW5nKCkgfSA6IHVuZGVmaW5lZCksXG4gICAgICAgIC4uLm9wdGlvbnM/LmhlYWRlcnMsXG4gICAgICB9LFxuICAgICAgc3RyZWFtOiBwYXJhbXMuc3RyZWFtID8/IGZhbHNlLFxuICAgIH0pIGFzIEFQSVByb21pc2U8QmV0YU1lc3NhZ2U+IHwgQVBJUHJvbWlzZTxTdHJlYW08QmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudD4+O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIE1lc3NhZ2Ugc3RyZWFtXG4gICAqL1xuICBzdHJlYW0oYm9keTogQmV0YU1lc3NhZ2VTdHJlYW1QYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQmV0YU1lc3NhZ2VTdHJlYW0ge1xuICAgIHJldHVybiBCZXRhTWVzc2FnZVN0cmVhbS5jcmVhdGVNZXNzYWdlKHRoaXMsIGJvZHksIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvdW50IHRoZSBudW1iZXIgb2YgdG9rZW5zIGluIGEgTWVzc2FnZS5cbiAgICpcbiAgICogVGhlIFRva2VuIENvdW50IEFQSSBjYW4gYmUgdXNlZCB0byBjb3VudCB0aGUgbnVtYmVyIG9mIHRva2VucyBpbiBhIE1lc3NhZ2UsXG4gICAqIGluY2x1ZGluZyB0b29scywgaW1hZ2VzLCBhbmQgZG9jdW1lbnRzLCB3aXRob3V0IGNyZWF0aW5nIGl0LlxuICAgKi9cbiAgY291bnRUb2tlbnMoXG4gICAgcGFyYW1zOiBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuQVBJUHJvbWlzZTxCZXRhTWVzc2FnZVRva2Vuc0NvdW50PiB7XG4gICAgY29uc3QgeyBiZXRhcywgLi4uYm9keSB9ID0gcGFyYW1zO1xuICAgIHJldHVybiB0aGlzLl9jbGllbnQucG9zdCgnL3YxL21lc3NhZ2VzL2NvdW50X3Rva2Vucz9iZXRhPXRydWUnLCB7XG4gICAgICBib2R5LFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIGhlYWRlcnM6IHtcbiAgICAgICAgJ2FudGhyb3BpYy1iZXRhJzogWy4uLihiZXRhcyA/PyBbXSksICd0b2tlbi1jb3VudGluZy0yMDI0LTExLTAxJ10udG9TdHJpbmcoKSxcbiAgICAgICAgLi4ub3B0aW9ucz8uaGVhZGVycyxcbiAgICAgIH0sXG4gICAgfSk7XG4gIH1cbn1cblxuZXhwb3J0IHR5cGUgQmV0YU1lc3NhZ2VTdHJlYW1QYXJhbXMgPSBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZTtcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQmFzZTY0UERGQmxvY2sge1xuICBzb3VyY2U6IEJldGFCYXNlNjRQREZTb3VyY2UgfCBCZXRhUGxhaW5UZXh0U291cmNlIHwgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZTtcblxuICB0eXBlOiAnZG9jdW1lbnQnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcblxuICBjaXRhdGlvbnM/OiBCZXRhQ2l0YXRpb25zQ29uZmlnUGFyYW07XG5cbiAgY29udGV4dD86IHN0cmluZyB8IG51bGw7XG5cbiAgdGl0bGU/OiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFCYXNlNjRQREZTb3VyY2Uge1xuICBkYXRhOiBzdHJpbmc7XG5cbiAgbWVkaWFfdHlwZTogJ2FwcGxpY2F0aW9uL3BkZic7XG5cbiAgdHlwZTogJ2Jhc2U2NCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB7XG4gIHR5cGU6ICdlcGhlbWVyYWwnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvbiB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9jaGFyX2luZGV4OiBudW1iZXI7XG5cbiAgc3RhcnRfY2hhcl9pbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjaGFyX2xvY2F0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbSB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9jaGFyX2luZGV4OiBudW1iZXI7XG5cbiAgc3RhcnRfY2hhcl9pbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjaGFyX2xvY2F0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbiB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9ibG9ja19pbmRleDogbnVtYmVyO1xuXG4gIHN0YXJ0X2Jsb2NrX2luZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NvbnRlbnRfYmxvY2tfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0ge1xuICBjaXRlZF90ZXh0OiBzdHJpbmc7XG5cbiAgZG9jdW1lbnRfaW5kZXg6IG51bWJlcjtcblxuICBkb2N1bWVudF90aXRsZTogc3RyaW5nIHwgbnVsbDtcblxuICBlbmRfYmxvY2tfaW5kZXg6IG51bWJlcjtcblxuICBzdGFydF9ibG9ja19pbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX2xvY2F0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb24ge1xuICBjaXRlZF90ZXh0OiBzdHJpbmc7XG5cbiAgZG9jdW1lbnRfaW5kZXg6IG51bWJlcjtcblxuICBkb2N1bWVudF90aXRsZTogc3RyaW5nIHwgbnVsbDtcblxuICBlbmRfcGFnZV9udW1iZXI6IG51bWJlcjtcblxuICBzdGFydF9wYWdlX251bWJlcjogbnVtYmVyO1xuXG4gIHR5cGU6ICdwYWdlX2xvY2F0aW9uJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbSB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9wYWdlX251bWJlcjogbnVtYmVyO1xuXG4gIHN0YXJ0X3BhZ2VfbnVtYmVyOiBudW1iZXI7XG5cbiAgdHlwZTogJ3BhZ2VfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFDaXRhdGlvbnNDb25maWdQYXJhbSB7XG4gIGVuYWJsZWQ/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFDaXRhdGlvbnNEZWx0YSB7XG4gIGNpdGF0aW9uOiBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb24gfCBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb24gfCBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbjtcblxuICB0eXBlOiAnY2l0YXRpb25zX2RlbHRhJztcbn1cblxuZXhwb3J0IHR5cGUgQmV0YUNvbnRlbnRCbG9jayA9IEJldGFUZXh0QmxvY2sgfCBCZXRhVG9vbFVzZUJsb2NrO1xuXG5leHBvcnQgdHlwZSBCZXRhQ29udGVudEJsb2NrUGFyYW0gPVxuICB8IEJldGFUZXh0QmxvY2tQYXJhbVxuICB8IEJldGFJbWFnZUJsb2NrUGFyYW1cbiAgfCBCZXRhVG9vbFVzZUJsb2NrUGFyYW1cbiAgfCBCZXRhVG9vbFJlc3VsdEJsb2NrUGFyYW1cbiAgfCBCZXRhQmFzZTY0UERGQmxvY2s7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZSB7XG4gIGNvbnRlbnQ6IHN0cmluZyB8IEFycmF5PEJldGFDb250ZW50QmxvY2tTb3VyY2VDb250ZW50PjtcblxuICB0eXBlOiAnY29udGVudCc7XG59XG5cbmV4cG9ydCB0eXBlIEJldGFDb250ZW50QmxvY2tTb3VyY2VDb250ZW50ID0gQmV0YVRleHRCbG9ja1BhcmFtIHwgQmV0YUltYWdlQmxvY2tQYXJhbTtcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhSW1hZ2VCbG9ja1BhcmFtIHtcbiAgc291cmNlOiBCZXRhSW1hZ2VCbG9ja1BhcmFtLlNvdXJjZTtcblxuICB0eXBlOiAnaW1hZ2UnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBCZXRhSW1hZ2VCbG9ja1BhcmFtIHtcbiAgZXhwb3J0IGludGVyZmFjZSBTb3VyY2Uge1xuICAgIGRhdGE6IHN0cmluZztcblxuICAgIG1lZGlhX3R5cGU6ICdpbWFnZS9qcGVnJyB8ICdpbWFnZS9wbmcnIHwgJ2ltYWdlL2dpZicgfCAnaW1hZ2Uvd2VicCc7XG5cbiAgICB0eXBlOiAnYmFzZTY0JztcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFJbnB1dEpTT05EZWx0YSB7XG4gIHBhcnRpYWxfanNvbjogc3RyaW5nO1xuXG4gIHR5cGU6ICdpbnB1dF9qc29uX2RlbHRhJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZSB7XG4gIC8qKlxuICAgKiBVbmlxdWUgb2JqZWN0IGlkZW50aWZpZXIuXG4gICAqXG4gICAqIFRoZSBmb3JtYXQgYW5kIGxlbmd0aCBvZiBJRHMgbWF5IGNoYW5nZSBvdmVyIHRpbWUuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBDb250ZW50IGdlbmVyYXRlZCBieSB0aGUgbW9kZWwuXG4gICAqXG4gICAqIFRoaXMgaXMgYW4gYXJyYXkgb2YgY29udGVudCBibG9ja3MsIGVhY2ggb2Ygd2hpY2ggaGFzIGEgYHR5cGVgIHRoYXQgZGV0ZXJtaW5lc1xuICAgKiBpdHMgc2hhcGUuXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW3sgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJIaSwgSSdtIENsYXVkZS5cIiB9XVxuICAgKiBgYGBcbiAgICpcbiAgICogSWYgdGhlIHJlcXVlc3QgaW5wdXQgYG1lc3NhZ2VzYCBlbmRlZCB3aXRoIGFuIGBhc3Npc3RhbnRgIHR1cm4sIHRoZW4gdGhlXG4gICAqIHJlc3BvbnNlIGBjb250ZW50YCB3aWxsIGNvbnRpbnVlIGRpcmVjdGx5IGZyb20gdGhhdCBsYXN0IHR1cm4uIFlvdSBjYW4gdXNlIHRoaXNcbiAgICogdG8gY29uc3RyYWluIHRoZSBtb2RlbCdzIG91dHB1dC5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGlmIHRoZSBpbnB1dCBgbWVzc2FnZXNgIHdlcmU6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIldoYXQncyB0aGUgR3JlZWsgbmFtZSBmb3IgU3VuPyAoQSkgU29sIChCKSBIZWxpb3MgKEMpIFN1blwiXG4gICAqICAgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJUaGUgYmVzdCBhbnN3ZXIgaXMgKFwiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogVGhlbiB0aGUgcmVzcG9uc2UgYGNvbnRlbnRgIG1pZ2h0IGJlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiQilcIiB9XVxuICAgKiBgYGBcbiAgICovXG4gIGNvbnRlbnQ6IEFycmF5PEJldGFDb250ZW50QmxvY2s+O1xuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgdGhhdCB3aWxsIGNvbXBsZXRlIHlvdXIgcHJvbXB0LlxcblxcblNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGFkZGl0aW9uYWxcbiAgICogZGV0YWlscyBhbmQgb3B0aW9ucy5cbiAgICovXG4gIG1vZGVsOiBNZXNzYWdlc0FQSS5Nb2RlbDtcblxuICAvKipcbiAgICogQ29udmVyc2F0aW9uYWwgcm9sZSBvZiB0aGUgZ2VuZXJhdGVkIG1lc3NhZ2UuXG4gICAqXG4gICAqIFRoaXMgd2lsbCBhbHdheXMgYmUgYFwiYXNzaXN0YW50XCJgLlxuICAgKi9cbiAgcm9sZTogJ2Fzc2lzdGFudCc7XG5cbiAgLyoqXG4gICAqIFRoZSByZWFzb24gdGhhdCB3ZSBzdG9wcGVkLlxuICAgKlxuICAgKiBUaGlzIG1heSBiZSBvbmUgdGhlIGZvbGxvd2luZyB2YWx1ZXM6XG4gICAqXG4gICAqIC0gYFwiZW5kX3R1cm5cImA6IHRoZSBtb2RlbCByZWFjaGVkIGEgbmF0dXJhbCBzdG9wcGluZyBwb2ludFxuICAgKiAtIGBcIm1heF90b2tlbnNcImA6IHdlIGV4Y2VlZGVkIHRoZSByZXF1ZXN0ZWQgYG1heF90b2tlbnNgIG9yIHRoZSBtb2RlbCdzIG1heGltdW1cbiAgICogLSBgXCJzdG9wX3NlcXVlbmNlXCJgOiBvbmUgb2YgeW91ciBwcm92aWRlZCBjdXN0b20gYHN0b3Bfc2VxdWVuY2VzYCB3YXMgZ2VuZXJhdGVkXG4gICAqIC0gYFwidG9vbF91c2VcImA6IHRoZSBtb2RlbCBpbnZva2VkIG9uZSBvciBtb3JlIHRvb2xzXG4gICAqXG4gICAqIEluIG5vbi1zdHJlYW1pbmcgbW9kZSB0aGlzIHZhbHVlIGlzIGFsd2F5cyBub24tbnVsbC4gSW4gc3RyZWFtaW5nIG1vZGUsIGl0IGlzXG4gICAqIG51bGwgaW4gdGhlIGBtZXNzYWdlX3N0YXJ0YCBldmVudCBhbmQgbm9uLW51bGwgb3RoZXJ3aXNlLlxuICAgKi9cbiAgc3RvcF9yZWFzb246ICdlbmRfdHVybicgfCAnbWF4X3Rva2VucycgfCAnc3RvcF9zZXF1ZW5jZScgfCAndG9vbF91c2UnIHwgbnVsbDtcblxuICAvKipcbiAgICogV2hpY2ggY3VzdG9tIHN0b3Agc2VxdWVuY2Ugd2FzIGdlbmVyYXRlZCwgaWYgYW55LlxuICAgKlxuICAgKiBUaGlzIHZhbHVlIHdpbGwgYmUgYSBub24tbnVsbCBzdHJpbmcgaWYgb25lIG9mIHlvdXIgY3VzdG9tIHN0b3Agc2VxdWVuY2VzIHdhc1xuICAgKiBnZW5lcmF0ZWQuXG4gICAqL1xuICBzdG9wX3NlcXVlbmNlOiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBPYmplY3QgdHlwZS5cbiAgICpcbiAgICogRm9yIE1lc3NhZ2VzLCB0aGlzIGlzIGFsd2F5cyBgXCJtZXNzYWdlXCJgLlxuICAgKi9cbiAgdHlwZTogJ21lc3NhZ2UnO1xuXG4gIC8qKlxuICAgKiBCaWxsaW5nIGFuZCByYXRlLWxpbWl0IHVzYWdlLlxuICAgKlxuICAgKiBBbnRocm9waWMncyBBUEkgYmlsbHMgYW5kIHJhdGUtbGltaXRzIGJ5IHRva2VuIGNvdW50cywgYXMgdG9rZW5zIHJlcHJlc2VudCB0aGVcbiAgICogdW5kZXJseWluZyBjb3N0IHRvIG91ciBzeXN0ZW1zLlxuICAgKlxuICAgKiBVbmRlciB0aGUgaG9vZCwgdGhlIEFQSSB0cmFuc2Zvcm1zIHJlcXVlc3RzIGludG8gYSBmb3JtYXQgc3VpdGFibGUgZm9yIHRoZVxuICAgKiBtb2RlbC4gVGhlIG1vZGVsJ3Mgb3V0cHV0IHRoZW4gZ29lcyB0aHJvdWdoIGEgcGFyc2luZyBzdGFnZSBiZWZvcmUgYmVjb21pbmcgYW5cbiAgICogQVBJIHJlc3BvbnNlLiBBcyBhIHJlc3VsdCwgdGhlIHRva2VuIGNvdW50cyBpbiBgdXNhZ2VgIHdpbGwgbm90IG1hdGNoIG9uZS10by1vbmVcbiAgICogd2l0aCB0aGUgZXhhY3QgdmlzaWJsZSBjb250ZW50IG9mIGFuIEFQSSByZXF1ZXN0IG9yIHJlc3BvbnNlLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgYG91dHB1dF90b2tlbnNgIHdpbGwgYmUgbm9uLXplcm8sIGV2ZW4gZm9yIGFuIGVtcHR5IHN0cmluZyByZXNwb25zZVxuICAgKiBmcm9tIENsYXVkZS5cbiAgICovXG4gIHVzYWdlOiBCZXRhVXNhZ2U7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1lc3NhZ2VEZWx0YVVzYWdlIHtcbiAgLyoqXG4gICAqIFRoZSBjdW11bGF0aXZlIG51bWJlciBvZiBvdXRwdXQgdG9rZW5zIHdoaWNoIHdlcmUgdXNlZC5cbiAgICovXG4gIG91dHB1dF90b2tlbnM6IG51bWJlcjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZVBhcmFtIHtcbiAgY29udGVudDogc3RyaW5nIHwgQXJyYXk8QmV0YUNvbnRlbnRCbG9ja1BhcmFtPjtcblxuICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhTWVzc2FnZVRva2Vuc0NvdW50IHtcbiAgLyoqXG4gICAqIFRoZSB0b3RhbCBudW1iZXIgb2YgdG9rZW5zIGFjcm9zcyB0aGUgcHJvdmlkZWQgbGlzdCBvZiBtZXNzYWdlcywgc3lzdGVtIHByb21wdCxcbiAgICogYW5kIHRvb2xzLlxuICAgKi9cbiAgaW5wdXRfdG9rZW5zOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YU1ldGFkYXRhIHtcbiAgLyoqXG4gICAqIEFuIGV4dGVybmFsIGlkZW50aWZpZXIgZm9yIHRoZSB1c2VyIHdobyBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlcXVlc3QuXG4gICAqXG4gICAqIFRoaXMgc2hvdWxkIGJlIGEgdXVpZCwgaGFzaCB2YWx1ZSwgb3Igb3RoZXIgb3BhcXVlIGlkZW50aWZpZXIuIEFudGhyb3BpYyBtYXkgdXNlXG4gICAqIHRoaXMgaWQgdG8gaGVscCBkZXRlY3QgYWJ1c2UuIERvIG5vdCBpbmNsdWRlIGFueSBpZGVudGlmeWluZyBpbmZvcm1hdGlvbiBzdWNoIGFzXG4gICAqIG5hbWUsIGVtYWlsIGFkZHJlc3MsIG9yIHBob25lIG51bWJlci5cbiAgICovXG4gIHVzZXJfaWQ/OiBzdHJpbmcgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFQbGFpblRleHRTb3VyY2Uge1xuICBkYXRhOiBzdHJpbmc7XG5cbiAgbWVkaWFfdHlwZTogJ3RleHQvcGxhaW4nO1xuXG4gIHR5cGU6ICd0ZXh0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCB7XG4gIGRlbHRhOiBCZXRhVGV4dERlbHRhIHwgQmV0YUlucHV0SlNPTkRlbHRhIHwgQmV0YUNpdGF0aW9uc0RlbHRhO1xuXG4gIGluZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NvbnRlbnRfYmxvY2tfZGVsdGEnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50IHtcbiAgY29udGVudF9ibG9jazogQmV0YVRleHRCbG9jayB8IEJldGFUb29sVXNlQmxvY2s7XG5cbiAgaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19zdGFydCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCB7XG4gIGluZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NvbnRlbnRfYmxvY2tfc3RvcCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVJhd01lc3NhZ2VEZWx0YUV2ZW50IHtcbiAgZGVsdGE6IEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudC5EZWx0YTtcblxuICB0eXBlOiAnbWVzc2FnZV9kZWx0YSc7XG5cbiAgLyoqXG4gICAqIEJpbGxpbmcgYW5kIHJhdGUtbGltaXQgdXNhZ2UuXG4gICAqXG4gICAqIEFudGhyb3BpYydzIEFQSSBiaWxscyBhbmQgcmF0ZS1saW1pdHMgYnkgdG9rZW4gY291bnRzLCBhcyB0b2tlbnMgcmVwcmVzZW50IHRoZVxuICAgKiB1bmRlcmx5aW5nIGNvc3QgdG8gb3VyIHN5c3RlbXMuXG4gICAqXG4gICAqIFVuZGVyIHRoZSBob29kLCB0aGUgQVBJIHRyYW5zZm9ybXMgcmVxdWVzdHMgaW50byBhIGZvcm1hdCBzdWl0YWJsZSBmb3IgdGhlXG4gICAqIG1vZGVsLiBUaGUgbW9kZWwncyBvdXRwdXQgdGhlbiBnb2VzIHRocm91Z2ggYSBwYXJzaW5nIHN0YWdlIGJlZm9yZSBiZWNvbWluZyBhblxuICAgKiBBUEkgcmVzcG9uc2UuIEFzIGEgcmVzdWx0LCB0aGUgdG9rZW4gY291bnRzIGluIGB1c2FnZWAgd2lsbCBub3QgbWF0Y2ggb25lLXRvLW9uZVxuICAgKiB3aXRoIHRoZSBleGFjdCB2aXNpYmxlIGNvbnRlbnQgb2YgYW4gQVBJIHJlcXVlc3Qgb3IgcmVzcG9uc2UuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBgb3V0cHV0X3Rva2Vuc2Agd2lsbCBiZSBub24temVybywgZXZlbiBmb3IgYW4gZW1wdHkgc3RyaW5nIHJlc3BvbnNlXG4gICAqIGZyb20gQ2xhdWRlLlxuICAgKi9cbiAgdXNhZ2U6IEJldGFNZXNzYWdlRGVsdGFVc2FnZTtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnQge1xuICBleHBvcnQgaW50ZXJmYWNlIERlbHRhIHtcbiAgICBzdG9wX3JlYXNvbjogJ2VuZF90dXJuJyB8ICdtYXhfdG9rZW5zJyB8ICdzdG9wX3NlcXVlbmNlJyB8ICd0b29sX3VzZScgfCBudWxsO1xuXG4gICAgc3RvcF9zZXF1ZW5jZTogc3RyaW5nIHwgbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFSYXdNZXNzYWdlU3RhcnRFdmVudCB7XG4gIG1lc3NhZ2U6IEJldGFNZXNzYWdlO1xuXG4gIHR5cGU6ICdtZXNzYWdlX3N0YXJ0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhUmF3TWVzc2FnZVN0b3BFdmVudCB7XG4gIHR5cGU6ICdtZXNzYWdlX3N0b3AnO1xufVxuXG5leHBvcnQgdHlwZSBCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50ID1cbiAgfCBCZXRhUmF3TWVzc2FnZVN0YXJ0RXZlbnRcbiAgfCBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnRcbiAgfCBCZXRhUmF3TWVzc2FnZVN0b3BFdmVudFxuICB8IEJldGFSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50XG4gIHwgQmV0YVJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnRcbiAgfCBCZXRhUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUZXh0QmxvY2sge1xuICAvKipcbiAgICogQ2l0YXRpb25zIHN1cHBvcnRpbmcgdGhlIHRleHQgYmxvY2suXG4gICAqXG4gICAqIFRoZSB0eXBlIG9mIGNpdGF0aW9uIHJldHVybmVkIHdpbGwgZGVwZW5kIG9uIHRoZSB0eXBlIG9mIGRvY3VtZW50IGJlaW5nIGNpdGVkLlxuICAgKiBDaXRpbmcgYSBQREYgcmVzdWx0cyBpbiBgcGFnZV9sb2NhdGlvbmAsIHBsYWluIHRleHQgcmVzdWx0cyBpbiBgY2hhcl9sb2NhdGlvbmAsXG4gICAqIGFuZCBjb250ZW50IGRvY3VtZW50IHJlc3VsdHMgaW4gYGNvbnRlbnRfYmxvY2tfbG9jYXRpb25gLlxuICAgKi9cbiAgY2l0YXRpb25zOiBBcnJheTxCZXRhVGV4dENpdGF0aW9uPiB8IG51bGw7XG5cbiAgdGV4dDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0ZXh0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVGV4dEJsb2NrUGFyYW0ge1xuICB0ZXh0OiBzdHJpbmc7XG5cbiAgdHlwZTogJ3RleHQnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcblxuICBjaXRhdGlvbnM/OiBBcnJheTxCZXRhVGV4dENpdGF0aW9uUGFyYW0+IHwgbnVsbDtcbn1cblxuZXhwb3J0IHR5cGUgQmV0YVRleHRDaXRhdGlvbiA9XG4gIHwgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uXG4gIHwgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uXG4gIHwgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb247XG5cbmV4cG9ydCB0eXBlIEJldGFUZXh0Q2l0YXRpb25QYXJhbSA9XG4gIHwgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW1cbiAgfCBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbVxuICB8IEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW07XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRleHREZWx0YSB7XG4gIHRleHQ6IHN0cmluZztcblxuICB0eXBlOiAndGV4dF9kZWx0YSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2wge1xuICAvKipcbiAgICogW0pTT04gc2NoZW1hXShodHRwczovL2pzb24tc2NoZW1hLm9yZy8pIGZvciB0aGlzIHRvb2wncyBpbnB1dC5cbiAgICpcbiAgICogVGhpcyBkZWZpbmVzIHRoZSBzaGFwZSBvZiB0aGUgYGlucHV0YCB0aGF0IHlvdXIgdG9vbCBhY2NlcHRzIGFuZCB0aGF0IHRoZSBtb2RlbFxuICAgKiB3aWxsIHByb2R1Y2UuXG4gICAqL1xuICBpbnB1dF9zY2hlbWE6IEJldGFUb29sLklucHV0U2NoZW1hO1xuXG4gIC8qKlxuICAgKiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKlxuICAgKiBUaGlzIGlzIGhvdyB0aGUgdG9vbCB3aWxsIGJlIGNhbGxlZCBieSB0aGUgbW9kZWwgYW5kIGluIHRvb2xfdXNlIGJsb2Nrcy5cbiAgICovXG4gIG5hbWU6IHN0cmluZztcblxuICBjYWNoZV9jb250cm9sPzogQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG5cbiAgLyoqXG4gICAqIERlc2NyaXB0aW9uIG9mIHdoYXQgdGhpcyB0b29sIGRvZXMuXG4gICAqXG4gICAqIFRvb2wgZGVzY3JpcHRpb25zIHNob3VsZCBiZSBhcyBkZXRhaWxlZCBhcyBwb3NzaWJsZS4gVGhlIG1vcmUgaW5mb3JtYXRpb24gdGhhdFxuICAgKiB0aGUgbW9kZWwgaGFzIGFib3V0IHdoYXQgdGhlIHRvb2wgaXMgYW5kIGhvdyB0byB1c2UgaXQsIHRoZSBiZXR0ZXIgaXQgd2lsbFxuICAgKiBwZXJmb3JtLiBZb3UgY2FuIHVzZSBuYXR1cmFsIGxhbmd1YWdlIGRlc2NyaXB0aW9ucyB0byByZWluZm9yY2UgaW1wb3J0YW50XG4gICAqIGFzcGVjdHMgb2YgdGhlIHRvb2wgaW5wdXQgSlNPTiBzY2hlbWEuXG4gICAqL1xuICBkZXNjcmlwdGlvbj86IHN0cmluZztcblxuICB0eXBlPzogJ2N1c3RvbScgfCBudWxsO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEJldGFUb29sIHtcbiAgLyoqXG4gICAqIFtKU09OIHNjaGVtYV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvKSBmb3IgdGhpcyB0b29sJ3MgaW5wdXQuXG4gICAqXG4gICAqIFRoaXMgZGVmaW5lcyB0aGUgc2hhcGUgb2YgdGhlIGBpbnB1dGAgdGhhdCB5b3VyIHRvb2wgYWNjZXB0cyBhbmQgdGhhdCB0aGUgbW9kZWxcbiAgICogd2lsbCBwcm9kdWNlLlxuICAgKi9cbiAgZXhwb3J0IGludGVyZmFjZSBJbnB1dFNjaGVtYSB7XG4gICAgdHlwZTogJ29iamVjdCc7XG5cbiAgICBwcm9wZXJ0aWVzPzogdW5rbm93biB8IG51bGw7XG4gICAgW2s6IHN0cmluZ106IHVua25vd247XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbEJhc2gyMDI0MTAyMiB7XG4gIC8qKlxuICAgKiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKlxuICAgKiBUaGlzIGlzIGhvdyB0aGUgdG9vbCB3aWxsIGJlIGNhbGxlZCBieSB0aGUgbW9kZWwgYW5kIGluIHRvb2xfdXNlIGJsb2Nrcy5cbiAgICovXG4gIG5hbWU6ICdiYXNoJztcblxuICB0eXBlOiAnYmFzaF8yMDI0MTAyMic7XG5cbiAgY2FjaGVfY29udHJvbD86IEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xufVxuXG4vKipcbiAqIEhvdyB0aGUgbW9kZWwgc2hvdWxkIHVzZSB0aGUgcHJvdmlkZWQgdG9vbHMuIFRoZSBtb2RlbCBjYW4gdXNlIGEgc3BlY2lmaWMgdG9vbCxcbiAqIGFueSBhdmFpbGFibGUgdG9vbCwgb3IgZGVjaWRlIGJ5IGl0c2VsZi5cbiAqL1xuZXhwb3J0IHR5cGUgQmV0YVRvb2xDaG9pY2UgPSBCZXRhVG9vbENob2ljZUF1dG8gfCBCZXRhVG9vbENob2ljZUFueSB8IEJldGFUb29sQ2hvaWNlVG9vbDtcblxuLyoqXG4gKiBUaGUgbW9kZWwgd2lsbCB1c2UgYW55IGF2YWlsYWJsZSB0b29scy5cbiAqL1xuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbENob2ljZUFueSB7XG4gIHR5cGU6ICdhbnknO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGRpc2FibGUgcGFyYWxsZWwgdG9vbCB1c2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGBmYWxzZWAuIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBtb2RlbCB3aWxsIG91dHB1dCBleGFjdGx5IG9uZSB0b29sXG4gICAqIHVzZS5cbiAgICovXG4gIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRoZSBtb2RlbCB3aWxsIGF1dG9tYXRpY2FsbHkgZGVjaWRlIHdoZXRoZXIgdG8gdXNlIHRvb2xzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sQ2hvaWNlQXV0byB7XG4gIHR5cGU6ICdhdXRvJztcblxuICAvKipcbiAgICogV2hldGhlciB0byBkaXNhYmxlIHBhcmFsbGVsIHRvb2wgdXNlLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgZmFsc2VgLiBJZiBzZXQgdG8gYHRydWVgLCB0aGUgbW9kZWwgd2lsbCBvdXRwdXQgYXQgbW9zdCBvbmUgdG9vbFxuICAgKiB1c2UuXG4gICAqL1xuICBkaXNhYmxlX3BhcmFsbGVsX3Rvb2xfdXNlPzogYm9vbGVhbjtcbn1cblxuLyoqXG4gKiBUaGUgbW9kZWwgd2lsbCB1c2UgdGhlIHNwZWNpZmllZCB0b29sIHdpdGggYHRvb2xfY2hvaWNlLm5hbWVgLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sQ2hvaWNlVG9vbCB7XG4gIC8qKlxuICAgKiBUaGUgbmFtZSBvZiB0aGUgdG9vbCB0byB1c2UuXG4gICAqL1xuICBuYW1lOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3Rvb2wnO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGRpc2FibGUgcGFyYWxsZWwgdG9vbCB1c2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGBmYWxzZWAuIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBtb2RlbCB3aWxsIG91dHB1dCBleGFjdGx5IG9uZSB0b29sXG4gICAqIHVzZS5cbiAgICovXG4gIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sQ29tcHV0ZXJVc2UyMDI0MTAyMiB7XG4gIC8qKlxuICAgKiBUaGUgaGVpZ2h0IG9mIHRoZSBkaXNwbGF5IGluIHBpeGVscy5cbiAgICovXG4gIGRpc3BsYXlfaGVpZ2h0X3B4OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSB3aWR0aCBvZiB0aGUgZGlzcGxheSBpbiBwaXhlbHMuXG4gICAqL1xuICBkaXNwbGF5X3dpZHRoX3B4OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqXG4gICAqIFRoaXMgaXMgaG93IHRoZSB0b29sIHdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBtb2RlbCBhbmQgaW4gdG9vbF91c2UgYmxvY2tzLlxuICAgKi9cbiAgbmFtZTogJ2NvbXB1dGVyJztcblxuICB0eXBlOiAnY29tcHV0ZXJfMjAyNDEwMjInO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIFgxMSBkaXNwbGF5IG51bWJlciAoZS5nLiAwLCAxKSBmb3IgdGhlIGRpc3BsYXkuXG4gICAqL1xuICBkaXNwbGF5X251bWJlcj86IG51bWJlciB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtIHtcbiAgdG9vbF91c2VfaWQ6IHN0cmluZztcblxuICB0eXBlOiAndG9vbF9yZXN1bHQnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcblxuICBjb250ZW50Pzogc3RyaW5nIHwgQXJyYXk8QmV0YVRleHRCbG9ja1BhcmFtIHwgQmV0YUltYWdlQmxvY2tQYXJhbT47XG5cbiAgaXNfZXJyb3I/OiBib29sZWFuO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyIHtcbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqXG4gICAqIFRoaXMgaXMgaG93IHRoZSB0b29sIHdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBtb2RlbCBhbmQgaW4gdG9vbF91c2UgYmxvY2tzLlxuICAgKi9cbiAgbmFtZTogJ3N0cl9yZXBsYWNlX2VkaXRvcic7XG5cbiAgdHlwZTogJ3RleHRfZWRpdG9yXzIwMjQxMDIyJztcblxuICBjYWNoZV9jb250cm9sPzogQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG59XG5cbmV4cG9ydCB0eXBlIEJldGFUb29sVW5pb24gPVxuICB8IEJldGFUb29sXG4gIHwgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyXG4gIHwgQmV0YVRvb2xCYXNoMjAyNDEwMjJcbiAgfCBCZXRhVG9vbFRleHRFZGl0b3IyMDI0MTAyMjtcblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbFVzZUJsb2NrIHtcbiAgaWQ6IHN0cmluZztcblxuICBpbnB1dDogdW5rbm93bjtcblxuICBuYW1lOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3Rvb2xfdXNlJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVG9vbFVzZUJsb2NrUGFyYW0ge1xuICBpZDogc3RyaW5nO1xuXG4gIGlucHV0OiB1bmtub3duO1xuXG4gIG5hbWU6IHN0cmluZztcblxuICB0eXBlOiAndG9vbF91c2UnO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBCZXRhVXNhZ2Uge1xuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgdXNlZCB0byBjcmVhdGUgdGhlIGNhY2hlIGVudHJ5LlxuICAgKi9cbiAgY2FjaGVfY3JlYXRpb25faW5wdXRfdG9rZW5zOiBudW1iZXIgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyByZWFkIGZyb20gdGhlIGNhY2hlLlxuICAgKi9cbiAgY2FjaGVfcmVhZF9pbnB1dF90b2tlbnM6IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHdoaWNoIHdlcmUgdXNlZC5cbiAgICovXG4gIGlucHV0X3Rva2VuczogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIG91dHB1dCB0b2tlbnMgd2hpY2ggd2VyZSB1c2VkLlxuICAgKi9cbiAgb3V0cHV0X3Rva2VuczogbnVtYmVyO1xufVxuXG5leHBvcnQgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zID0gTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyB8IE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogQm9keSBwYXJhbTogVGhlIG1heGltdW0gbnVtYmVyIG9mIHRva2VucyB0byBnZW5lcmF0ZSBiZWZvcmUgc3RvcHBpbmcuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBvdXIgbW9kZWxzIG1heSBzdG9wIF9iZWZvcmVfIHJlYWNoaW5nIHRoaXMgbWF4aW11bS4gVGhpcyBwYXJhbWV0ZXJcbiAgICogb25seSBzcGVjaWZpZXMgdGhlIGFic29sdXRlIG1heGltdW0gbnVtYmVyIG9mIHRva2VucyB0byBnZW5lcmF0ZS5cbiAgICpcbiAgICogRGlmZmVyZW50IG1vZGVscyBoYXZlIGRpZmZlcmVudCBtYXhpbXVtIHZhbHVlcyBmb3IgdGhpcyBwYXJhbWV0ZXIuIFNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGRldGFpbHMuXG4gICAqL1xuICBtYXhfdG9rZW5zOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IElucHV0IG1lc3NhZ2VzLlxuICAgKlxuICAgKiBPdXIgbW9kZWxzIGFyZSB0cmFpbmVkIHRvIG9wZXJhdGUgb24gYWx0ZXJuYXRpbmcgYHVzZXJgIGFuZCBgYXNzaXN0YW50YFxuICAgKiBjb252ZXJzYXRpb25hbCB0dXJucy4gV2hlbiBjcmVhdGluZyBhIG5ldyBgTWVzc2FnZWAsIHlvdSBzcGVjaWZ5IHRoZSBwcmlvclxuICAgKiBjb252ZXJzYXRpb25hbCB0dXJucyB3aXRoIHRoZSBgbWVzc2FnZXNgIHBhcmFtZXRlciwgYW5kIHRoZSBtb2RlbCB0aGVuIGdlbmVyYXRlc1xuICAgKiB0aGUgbmV4dCBgTWVzc2FnZWAgaW4gdGhlIGNvbnZlcnNhdGlvbi4gQ29uc2VjdXRpdmUgYHVzZXJgIG9yIGBhc3Npc3RhbnRgIHR1cm5zXG4gICAqIGluIHlvdXIgcmVxdWVzdCB3aWxsIGJlIGNvbWJpbmVkIGludG8gYSBzaW5nbGUgdHVybi5cbiAgICpcbiAgICogRWFjaCBpbnB1dCBtZXNzYWdlIG11c3QgYmUgYW4gb2JqZWN0IHdpdGggYSBgcm9sZWAgYW5kIGBjb250ZW50YC4gWW91IGNhblxuICAgKiBzcGVjaWZ5IGEgc2luZ2xlIGB1c2VyYC1yb2xlIG1lc3NhZ2UsIG9yIHlvdSBjYW4gaW5jbHVkZSBtdWx0aXBsZSBgdXNlcmAgYW5kXG4gICAqIGBhc3Npc3RhbnRgIG1lc3NhZ2VzLlxuICAgKlxuICAgKiBJZiB0aGUgZmluYWwgbWVzc2FnZSB1c2VzIHRoZSBgYXNzaXN0YW50YCByb2xlLCB0aGUgcmVzcG9uc2UgY29udGVudCB3aWxsXG4gICAqIGNvbnRpbnVlIGltbWVkaWF0ZWx5IGZyb20gdGhlIGNvbnRlbnQgaW4gdGhhdCBtZXNzYWdlLiBUaGlzIGNhbiBiZSB1c2VkIHRvXG4gICAqIGNvbnN0cmFpbiBwYXJ0IG9mIHRoZSBtb2RlbCdzIHJlc3BvbnNlLlxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggYSBzaW5nbGUgYHVzZXJgIG1lc3NhZ2U6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW3sgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfV1cbiAgICogYGBgXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBtdWx0aXBsZSBjb252ZXJzYXRpb25hbCB0dXJuczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAgeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvIHRoZXJlLlwiIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiSGksIEknbSBDbGF1ZGUuIEhvdyBjYW4gSSBoZWxwIHlvdT9cIiB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogXCJDYW4geW91IGV4cGxhaW4gTExNcyBpbiBwbGFpbiBFbmdsaXNoP1wiIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIGEgcGFydGlhbGx5LWZpbGxlZCByZXNwb25zZSBmcm9tIENsYXVkZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJyb2xlXCI6IFwidXNlclwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiV2hhdCdzIHRoZSBHcmVlayBuYW1lIGZvciBTdW4/IChBKSBTb2wgKEIpIEhlbGlvcyAoQykgU3VuXCJcbiAgICogICB9LFxuICAgKiAgIHsgXCJyb2xlXCI6IFwiYXNzaXN0YW50XCIsIFwiY29udGVudFwiOiBcIlRoZSBiZXN0IGFuc3dlciBpcyAoXCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBFYWNoIGlucHV0IG1lc3NhZ2UgYGNvbnRlbnRgIG1heSBiZSBlaXRoZXIgYSBzaW5nbGUgYHN0cmluZ2Agb3IgYW4gYXJyYXkgb2ZcbiAgICogY29udGVudCBibG9ja3MsIHdoZXJlIGVhY2ggYmxvY2sgaGFzIGEgc3BlY2lmaWMgYHR5cGVgLiBVc2luZyBhIGBzdHJpbmdgIGZvclxuICAgKiBgY29udGVudGAgaXMgc2hvcnRoYW5kIGZvciBhbiBhcnJheSBvZiBvbmUgY29udGVudCBibG9jayBvZiB0eXBlIGBcInRleHRcImAuIFRoZVxuICAgKiBmb2xsb3dpbmcgaW5wdXQgbWVzc2FnZXMgYXJlIGVxdWl2YWxlbnQ6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHsgXCJyb2xlXCI6IFwidXNlclwiLCBcImNvbnRlbnRcIjogW3sgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJIZWxsbywgQ2xhdWRlXCIgfV0gfVxuICAgKiBgYGBcbiAgICpcbiAgICogU3RhcnRpbmcgd2l0aCBDbGF1ZGUgMyBtb2RlbHMsIHlvdSBjYW4gYWxzbyBzZW5kIGltYWdlIGNvbnRlbnQgYmxvY2tzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIHtcbiAgICogICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgXCJjb250ZW50XCI6IFtcbiAgICogICAgIHtcbiAgICogICAgICAgXCJ0eXBlXCI6IFwiaW1hZ2VcIixcbiAgICogICAgICAgXCJzb3VyY2VcIjoge1xuICAgKiAgICAgICAgIFwidHlwZVwiOiBcImJhc2U2NFwiLFxuICAgKiAgICAgICAgIFwibWVkaWFfdHlwZVwiOiBcImltYWdlL2pwZWdcIixcbiAgICogICAgICAgICBcImRhdGFcIjogXCIvOWovNEFBUVNrWkpSZy4uLlwiXG4gICAqICAgICAgIH1cbiAgICogICAgIH0sXG4gICAqICAgICB7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiV2hhdCBpcyBpbiB0aGlzIGltYWdlP1wiIH1cbiAgICogICBdXG4gICAqIH1cbiAgICogYGBgXG4gICAqXG4gICAqIFdlIGN1cnJlbnRseSBzdXBwb3J0IHRoZSBgYmFzZTY0YCBzb3VyY2UgdHlwZSBmb3IgaW1hZ2VzLCBhbmQgdGhlIGBpbWFnZS9qcGVnYCxcbiAgICogYGltYWdlL3BuZ2AsIGBpbWFnZS9naWZgLCBhbmQgYGltYWdlL3dlYnBgIG1lZGlhIHR5cGVzLlxuICAgKlxuICAgKiBTZWUgW2V4YW1wbGVzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtZXhhbXBsZXMjdmlzaW9uKSBmb3JcbiAgICogbW9yZSBpbnB1dCBleGFtcGxlcy5cbiAgICpcbiAgICogTm90ZSB0aGF0IGlmIHlvdSB3YW50IHRvIGluY2x1ZGUgYVxuICAgKiBbc3lzdGVtIHByb21wdF0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9zeXN0ZW0tcHJvbXB0cyksIHlvdSBjYW4gdXNlXG4gICAqIHRoZSB0b3AtbGV2ZWwgYHN5c3RlbWAgcGFyYW1ldGVyIFx1MjAxNCB0aGVyZSBpcyBubyBgXCJzeXN0ZW1cImAgcm9sZSBmb3IgaW5wdXRcbiAgICogbWVzc2FnZXMgaW4gdGhlIE1lc3NhZ2VzIEFQSS5cbiAgICovXG4gIG1lc3NhZ2VzOiBBcnJheTxCZXRhTWVzc2FnZVBhcmFtPjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogVGhlIG1vZGVsIHRoYXQgd2lsbCBjb21wbGV0ZSB5b3VyIHByb21wdC5cXG5cXG5TZWVcbiAgICogW21vZGVsc10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9tb2RlbHMtb3ZlcnZpZXcpIGZvciBhZGRpdGlvbmFsXG4gICAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gICAqL1xuICBtb2RlbDogTWVzc2FnZXNBUEkuTW9kZWw7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IEFuIG9iamVjdCBkZXNjcmliaW5nIG1ldGFkYXRhIGFib3V0IHRoZSByZXF1ZXN0LlxuICAgKi9cbiAgbWV0YWRhdGE/OiBCZXRhTWV0YWRhdGE7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IEN1c3RvbSB0ZXh0IHNlcXVlbmNlcyB0aGF0IHdpbGwgY2F1c2UgdGhlIG1vZGVsIHRvIHN0b3AgZ2VuZXJhdGluZy5cbiAgICpcbiAgICogT3VyIG1vZGVscyB3aWxsIG5vcm1hbGx5IHN0b3Agd2hlbiB0aGV5IGhhdmUgbmF0dXJhbGx5IGNvbXBsZXRlZCB0aGVpciB0dXJuLFxuICAgKiB3aGljaCB3aWxsIHJlc3VsdCBpbiBhIHJlc3BvbnNlIGBzdG9wX3JlYXNvbmAgb2YgYFwiZW5kX3R1cm5cImAuXG4gICAqXG4gICAqIElmIHlvdSB3YW50IHRoZSBtb2RlbCB0byBzdG9wIGdlbmVyYXRpbmcgd2hlbiBpdCBlbmNvdW50ZXJzIGN1c3RvbSBzdHJpbmdzIG9mXG4gICAqIHRleHQsIHlvdSBjYW4gdXNlIHRoZSBgc3RvcF9zZXF1ZW5jZXNgIHBhcmFtZXRlci4gSWYgdGhlIG1vZGVsIGVuY291bnRlcnMgb25lIG9mXG4gICAqIHRoZSBjdXN0b20gc2VxdWVuY2VzLCB0aGUgcmVzcG9uc2UgYHN0b3BfcmVhc29uYCB2YWx1ZSB3aWxsIGJlIGBcInN0b3Bfc2VxdWVuY2VcImBcbiAgICogYW5kIHRoZSByZXNwb25zZSBgc3RvcF9zZXF1ZW5jZWAgdmFsdWUgd2lsbCBjb250YWluIHRoZSBtYXRjaGVkIHN0b3Agc2VxdWVuY2UuXG4gICAqL1xuICBzdG9wX3NlcXVlbmNlcz86IEFycmF5PHN0cmluZz47XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50XG4gICAqIGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1zdHJlYW1pbmcpIGZvclxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogU3lzdGVtIHByb21wdC5cbiAgICpcbiAgICogQSBzeXN0ZW0gcHJvbXB0IGlzIGEgd2F5IG9mIHByb3ZpZGluZyBjb250ZXh0IGFuZCBpbnN0cnVjdGlvbnMgdG8gQ2xhdWRlLCBzdWNoXG4gICAqIGFzIHNwZWNpZnlpbmcgYSBwYXJ0aWN1bGFyIGdvYWwgb3Igcm9sZS4gU2VlIG91clxuICAgKiBbZ3VpZGUgdG8gc3lzdGVtIHByb21wdHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3Mvc3lzdGVtLXByb21wdHMpLlxuICAgKi9cbiAgc3lzdGVtPzogc3RyaW5nIHwgQXJyYXk8QmV0YVRleHRCbG9ja1BhcmFtPjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogQW1vdW50IG9mIHJhbmRvbW5lc3MgaW5qZWN0ZWQgaW50byB0aGUgcmVzcG9uc2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGAxLjBgLiBSYW5nZXMgZnJvbSBgMC4wYCB0byBgMS4wYC4gVXNlIGB0ZW1wZXJhdHVyZWAgY2xvc2VyIHRvIGAwLjBgXG4gICAqIGZvciBhbmFseXRpY2FsIC8gbXVsdGlwbGUgY2hvaWNlLCBhbmQgY2xvc2VyIHRvIGAxLjBgIGZvciBjcmVhdGl2ZSBhbmRcbiAgICogZ2VuZXJhdGl2ZSB0YXNrcy5cbiAgICpcbiAgICogTm90ZSB0aGF0IGV2ZW4gd2l0aCBgdGVtcGVyYXR1cmVgIG9mIGAwLjBgLCB0aGUgcmVzdWx0cyB3aWxsIG5vdCBiZSBmdWxseVxuICAgKiBkZXRlcm1pbmlzdGljLlxuICAgKi9cbiAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IEhvdyB0aGUgbW9kZWwgc2hvdWxkIHVzZSB0aGUgcHJvdmlkZWQgdG9vbHMuIFRoZSBtb2RlbCBjYW4gdXNlIGFcbiAgICogc3BlY2lmaWMgdG9vbCwgYW55IGF2YWlsYWJsZSB0b29sLCBvciBkZWNpZGUgYnkgaXRzZWxmLlxuICAgKi9cbiAgdG9vbF9jaG9pY2U/OiBCZXRhVG9vbENob2ljZTtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogRGVmaW5pdGlvbnMgb2YgdG9vbHMgdGhhdCB0aGUgbW9kZWwgbWF5IHVzZS5cbiAgICpcbiAgICogSWYgeW91IGluY2x1ZGUgYHRvb2xzYCBpbiB5b3VyIEFQSSByZXF1ZXN0LCB0aGUgbW9kZWwgbWF5IHJldHVybiBgdG9vbF91c2VgXG4gICAqIGNvbnRlbnQgYmxvY2tzIHRoYXQgcmVwcmVzZW50IHRoZSBtb2RlbCdzIHVzZSBvZiB0aG9zZSB0b29scy4gWW91IGNhbiB0aGVuIHJ1blxuICAgKiB0aG9zZSB0b29scyB1c2luZyB0aGUgdG9vbCBpbnB1dCBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsIGFuZCB0aGVuIG9wdGlvbmFsbHlcbiAgICogcmV0dXJuIHJlc3VsdHMgYmFjayB0byB0aGUgbW9kZWwgdXNpbmcgYHRvb2xfcmVzdWx0YCBjb250ZW50IGJsb2Nrcy5cbiAgICpcbiAgICogRWFjaCB0b29sIGRlZmluaXRpb24gaW5jbHVkZXM6XG4gICAqXG4gICAqIC0gYG5hbWVgOiBOYW1lIG9mIHRoZSB0b29sLlxuICAgKiAtIGBkZXNjcmlwdGlvbmA6IE9wdGlvbmFsLCBidXQgc3Ryb25nbHktcmVjb21tZW5kZWQgZGVzY3JpcHRpb24gb2YgdGhlIHRvb2wuXG4gICAqIC0gYGlucHV0X3NjaGVtYWA6IFtKU09OIHNjaGVtYV0oaHR0cHM6Ly9qc29uLXNjaGVtYS5vcmcvKSBmb3IgdGhlIHRvb2wgYGlucHV0YFxuICAgKiAgIHNoYXBlIHRoYXQgdGhlIG1vZGVsIHdpbGwgcHJvZHVjZSBpbiBgdG9vbF91c2VgIG91dHB1dCBjb250ZW50IGJsb2Nrcy5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGlmIHlvdSBkZWZpbmVkIGB0b29sc2AgYXM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwibmFtZVwiOiBcImdldF9zdG9ja19wcmljZVwiLFxuICAgKiAgICAgXCJkZXNjcmlwdGlvblwiOiBcIkdldCB0aGUgY3VycmVudCBzdG9jayBwcmljZSBmb3IgYSBnaXZlbiB0aWNrZXIgc3ltYm9sLlwiLFxuICAgKiAgICAgXCJpbnB1dF9zY2hlbWFcIjoge1xuICAgKiAgICAgICBcInR5cGVcIjogXCJvYmplY3RcIixcbiAgICogICAgICAgXCJwcm9wZXJ0aWVzXCI6IHtcbiAgICogICAgICAgICBcInRpY2tlclwiOiB7XG4gICAqICAgICAgICAgICBcInR5cGVcIjogXCJzdHJpbmdcIixcbiAgICogICAgICAgICAgIFwiZGVzY3JpcHRpb25cIjogXCJUaGUgc3RvY2sgdGlja2VyIHN5bWJvbCwgZS5nLiBBQVBMIGZvciBBcHBsZSBJbmMuXCJcbiAgICogICAgICAgICB9XG4gICAqICAgICAgIH0sXG4gICAqICAgICAgIFwicmVxdWlyZWRcIjogW1widGlja2VyXCJdXG4gICAqICAgICB9XG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBBbmQgdGhlbiBhc2tlZCB0aGUgbW9kZWwgXCJXaGF0J3MgdGhlIFMmUCA1MDAgYXQgdG9kYXk/XCIsIHRoZSBtb2RlbCBtaWdodCBwcm9kdWNlXG4gICAqIGB0b29sX3VzZWAgY29udGVudCBibG9ja3MgaW4gdGhlIHJlc3BvbnNlIGxpa2UgdGhpczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJ0eXBlXCI6IFwidG9vbF91c2VcIixcbiAgICogICAgIFwiaWRcIjogXCJ0b29sdV8wMUQ3RkxyZmg0R1lxN3lUMVVMRmV5TVZcIixcbiAgICogICAgIFwibmFtZVwiOiBcImdldF9zdG9ja19wcmljZVwiLFxuICAgKiAgICAgXCJpbnB1dFwiOiB7IFwidGlja2VyXCI6IFwiXkdTUENcIiB9XG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBZb3UgbWlnaHQgdGhlbiBydW4geW91ciBgZ2V0X3N0b2NrX3ByaWNlYCB0b29sIHdpdGggYHtcInRpY2tlclwiOiBcIl5HU1BDXCJ9YCBhcyBhblxuICAgKiBpbnB1dCwgYW5kIHJldHVybiB0aGUgZm9sbG93aW5nIGJhY2sgdG8gdGhlIG1vZGVsIGluIGEgc3Vic2VxdWVudCBgdXNlcmBcbiAgICogbWVzc2FnZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJ0eXBlXCI6IFwidG9vbF9yZXN1bHRcIixcbiAgICogICAgIFwidG9vbF91c2VfaWRcIjogXCJ0b29sdV8wMUQ3RkxyZmg0R1lxN3lUMVVMRmV5TVZcIixcbiAgICogICAgIFwiY29udGVudFwiOiBcIjI1OS43NSBVU0RcIlxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogVG9vbHMgY2FuIGJlIHVzZWQgZm9yIHdvcmtmbG93cyB0aGF0IGluY2x1ZGUgcnVubmluZyBjbGllbnQtc2lkZSB0b29scyBhbmRcbiAgICogZnVuY3Rpb25zLCBvciBtb3JlIGdlbmVyYWxseSB3aGVuZXZlciB5b3Ugd2FudCB0aGUgbW9kZWwgdG8gcHJvZHVjZSBhIHBhcnRpY3VsYXJcbiAgICogSlNPTiBzdHJ1Y3R1cmUgb2Ygb3V0cHV0LlxuICAgKlxuICAgKiBTZWUgb3VyIFtndWlkZV0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy90b29sLXVzZSkgZm9yIG1vcmUgZGV0YWlscy5cbiAgICovXG4gIHRvb2xzPzogQXJyYXk8QmV0YVRvb2xVbmlvbj47XG5cbiAgLyoqXG4gICAqIEJvZHkgcGFyYW06IE9ubHkgc2FtcGxlIGZyb20gdGhlIHRvcCBLIG9wdGlvbnMgZm9yIGVhY2ggc3Vic2VxdWVudCB0b2tlbi5cbiAgICpcbiAgICogVXNlZCB0byByZW1vdmUgXCJsb25nIHRhaWxcIiBsb3cgcHJvYmFiaWxpdHkgcmVzcG9uc2VzLlxuICAgKiBbTGVhcm4gbW9yZSB0ZWNobmljYWwgZGV0YWlscyBoZXJlXShodHRwczovL3Rvd2FyZHNkYXRhc2NpZW5jZS5jb20vaG93LXRvLXNhbXBsZS1mcm9tLWxhbmd1YWdlLW1vZGVscy02ODJiY2ViOTcyNzcpLlxuICAgKlxuICAgKiBSZWNvbW1lbmRlZCBmb3IgYWR2YW5jZWQgdXNlIGNhc2VzIG9ubHkuIFlvdSB1c3VhbGx5IG9ubHkgbmVlZCB0byB1c2VcbiAgICogYHRlbXBlcmF0dXJlYC5cbiAgICovXG4gIHRvcF9rPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBVc2UgbnVjbGV1cyBzYW1wbGluZy5cbiAgICpcbiAgICogSW4gbnVjbGV1cyBzYW1wbGluZywgd2UgY29tcHV0ZSB0aGUgY3VtdWxhdGl2ZSBkaXN0cmlidXRpb24gb3ZlciBhbGwgdGhlIG9wdGlvbnNcbiAgICogZm9yIGVhY2ggc3Vic2VxdWVudCB0b2tlbiBpbiBkZWNyZWFzaW5nIHByb2JhYmlsaXR5IG9yZGVyIGFuZCBjdXQgaXQgb2ZmIG9uY2UgaXRcbiAgICogcmVhY2hlcyBhIHBhcnRpY3VsYXIgcHJvYmFiaWxpdHkgc3BlY2lmaWVkIGJ5IGB0b3BfcGAuIFlvdSBzaG91bGQgZWl0aGVyIGFsdGVyXG4gICAqIGB0ZW1wZXJhdHVyZWAgb3IgYHRvcF9wYCwgYnV0IG5vdCBib3RoLlxuICAgKlxuICAgKiBSZWNvbW1lbmRlZCBmb3IgYWR2YW5jZWQgdXNlIGNhc2VzIG9ubHkuIFlvdSB1c3VhbGx5IG9ubHkgbmVlZCB0byB1c2VcbiAgICogYHRlbXBlcmF0dXJlYC5cbiAgICovXG4gIHRvcF9wPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBIZWFkZXIgcGFyYW06IE9wdGlvbmFsIGhlYWRlciB0byBzcGVjaWZ5IHRoZSBiZXRhIHZlcnNpb24ocykgeW91IHdhbnQgdG8gdXNlLlxuICAgKi9cbiAgYmV0YXM/OiBBcnJheTxCZXRhQVBJLkFudGhyb3BpY0JldGE+O1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXMge1xuICBleHBvcnQgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nID0gTWVzc2FnZXNNZXNzYWdlc0FQSS5NZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gTWVzc2FnZXNNZXNzYWdlc0FQSS5NZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgZXh0ZW5kcyBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudFxuICAgKiBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtc3RyZWFtaW5nKSBmb3JcbiAgICogZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbT86IGZhbHNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgZXh0ZW5kcyBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudFxuICAgKiBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWVzc2FnZXMtc3RyZWFtaW5nKSBmb3JcbiAgICogZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbTogdHJ1ZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMge1xuICAvKipcbiAgICogQm9keSBwYXJhbTogSW5wdXQgbWVzc2FnZXMuXG4gICAqXG4gICAqIE91ciBtb2RlbHMgYXJlIHRyYWluZWQgdG8gb3BlcmF0ZSBvbiBhbHRlcm5hdGluZyBgdXNlcmAgYW5kIGBhc3Npc3RhbnRgXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zLiBXaGVuIGNyZWF0aW5nIGEgbmV3IGBNZXNzYWdlYCwgeW91IHNwZWNpZnkgdGhlIHByaW9yXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zIHdpdGggdGhlIGBtZXNzYWdlc2AgcGFyYW1ldGVyLCBhbmQgdGhlIG1vZGVsIHRoZW4gZ2VuZXJhdGVzXG4gICAqIHRoZSBuZXh0IGBNZXNzYWdlYCBpbiB0aGUgY29udmVyc2F0aW9uLiBDb25zZWN1dGl2ZSBgdXNlcmAgb3IgYGFzc2lzdGFudGAgdHVybnNcbiAgICogaW4geW91ciByZXF1ZXN0IHdpbGwgYmUgY29tYmluZWQgaW50byBhIHNpbmdsZSB0dXJuLlxuICAgKlxuICAgKiBFYWNoIGlucHV0IG1lc3NhZ2UgbXVzdCBiZSBhbiBvYmplY3Qgd2l0aCBhIGByb2xlYCBhbmQgYGNvbnRlbnRgLiBZb3UgY2FuXG4gICAqIHNwZWNpZnkgYSBzaW5nbGUgYHVzZXJgLXJvbGUgbWVzc2FnZSwgb3IgeW91IGNhbiBpbmNsdWRlIG11bHRpcGxlIGB1c2VyYCBhbmRcbiAgICogYGFzc2lzdGFudGAgbWVzc2FnZXMuXG4gICAqXG4gICAqIElmIHRoZSBmaW5hbCBtZXNzYWdlIHVzZXMgdGhlIGBhc3Npc3RhbnRgIHJvbGUsIHRoZSByZXNwb25zZSBjb250ZW50IHdpbGxcbiAgICogY29udGludWUgaW1tZWRpYXRlbHkgZnJvbSB0aGUgY29udGVudCBpbiB0aGF0IG1lc3NhZ2UuIFRoaXMgY2FuIGJlIHVzZWQgdG9cbiAgICogY29uc3RyYWluIHBhcnQgb2YgdGhlIG1vZGVsJ3MgcmVzcG9uc2UuXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHNpbmdsZSBgdXNlcmAgbWVzc2FnZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XVxuICAgKiBgYGBcbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIG11bHRpcGxlIGNvbnZlcnNhdGlvbmFsIHR1cm5zOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8gdGhlcmUuXCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJIaSwgSSdtIENsYXVkZS4gSG93IGNhbiBJIGhlbHAgeW91P1wiIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkNhbiB5b3UgZXhwbGFpbiBMTE1zIGluIHBsYWluIEVuZ2xpc2g/XCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggYSBwYXJ0aWFsbHktZmlsbGVkIHJlc3BvbnNlIGZyb20gQ2xhdWRlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCJXaGF0J3MgdGhlIEdyZWVrIG5hbWUgZm9yIFN1bj8gKEEpIFNvbCAoQikgSGVsaW9zIChDKSBTdW5cIlxuICAgKiAgIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiVGhlIGJlc3QgYW5zd2VyIGlzIChcIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBgY29udGVudGAgbWF5IGJlIGVpdGhlciBhIHNpbmdsZSBgc3RyaW5nYCBvciBhbiBhcnJheSBvZlxuICAgKiBjb250ZW50IGJsb2Nrcywgd2hlcmUgZWFjaCBibG9jayBoYXMgYSBzcGVjaWZpYyBgdHlwZWAuIFVzaW5nIGEgYHN0cmluZ2AgZm9yXG4gICAqIGBjb250ZW50YCBpcyBzaG9ydGhhbmQgZm9yIGFuIGFycmF5IG9mIG9uZSBjb250ZW50IGJsb2NrIG9mIHR5cGUgYFwidGV4dFwiYC4gVGhlXG4gICAqIGZvbGxvd2luZyBpbnB1dCBtZXNzYWdlcyBhcmUgZXF1aXZhbGVudDpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1cbiAgICogYGBgXG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBbeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XSB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBTdGFydGluZyB3aXRoIENsYXVkZSAzIG1vZGVscywgeW91IGNhbiBhbHNvIHNlbmQgaW1hZ2UgY29udGVudCBibG9ja3M6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICoge1xuICAgKiAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICBcImNvbnRlbnRcIjogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBcInR5cGVcIjogXCJpbWFnZVwiLFxuICAgKiAgICAgICBcInNvdXJjZVwiOiB7XG4gICAqICAgICAgICAgXCJ0eXBlXCI6IFwiYmFzZTY0XCIsXG4gICAqICAgICAgICAgXCJtZWRpYV90eXBlXCI6IFwiaW1hZ2UvanBlZ1wiLFxuICAgKiAgICAgICAgIFwiZGF0YVwiOiBcIi85ai80QUFRU2taSlJnLi4uXCJcbiAgICogICAgICAgfVxuICAgKiAgICAgfSxcbiAgICogICAgIHsgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJXaGF0IGlzIGluIHRoaXMgaW1hZ2U/XCIgfVxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogV2UgY3VycmVudGx5IHN1cHBvcnQgdGhlIGBiYXNlNjRgIHNvdXJjZSB0eXBlIGZvciBpbWFnZXMsIGFuZCB0aGUgYGltYWdlL2pwZWdgLFxuICAgKiBgaW1hZ2UvcG5nYCwgYGltYWdlL2dpZmAsIGFuZCBgaW1hZ2Uvd2VicGAgbWVkaWEgdHlwZXMuXG4gICAqXG4gICAqIFNlZSBbZXhhbXBsZXNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1leGFtcGxlcyN2aXNpb24pIGZvclxuICAgKiBtb3JlIGlucHV0IGV4YW1wbGVzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgaWYgeW91IHdhbnQgdG8gaW5jbHVkZSBhXG4gICAqIFtzeXN0ZW0gcHJvbXB0XShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3N5c3RlbS1wcm9tcHRzKSwgeW91IGNhbiB1c2VcbiAgICogdGhlIHRvcC1sZXZlbCBgc3lzdGVtYCBwYXJhbWV0ZXIgXHUyMDE0IHRoZXJlIGlzIG5vIGBcInN5c3RlbVwiYCByb2xlIGZvciBpbnB1dFxuICAgKiBtZXNzYWdlcyBpbiB0aGUgTWVzc2FnZXMgQVBJLlxuICAgKi9cbiAgbWVzc2FnZXM6IEFycmF5PEJldGFNZXNzYWdlUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBUaGUgbW9kZWwgdGhhdCB3aWxsIGNvbXBsZXRlIHlvdXIgcHJvbXB0LlxcblxcblNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGFkZGl0aW9uYWxcbiAgICogZGV0YWlscyBhbmQgb3B0aW9ucy5cbiAgICovXG4gIG1vZGVsOiBNZXNzYWdlc0FQSS5Nb2RlbDtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogU3lzdGVtIHByb21wdC5cbiAgICpcbiAgICogQSBzeXN0ZW0gcHJvbXB0IGlzIGEgd2F5IG9mIHByb3ZpZGluZyBjb250ZXh0IGFuZCBpbnN0cnVjdGlvbnMgdG8gQ2xhdWRlLCBzdWNoXG4gICAqIGFzIHNwZWNpZnlpbmcgYSBwYXJ0aWN1bGFyIGdvYWwgb3Igcm9sZS4gU2VlIG91clxuICAgKiBbZ3VpZGUgdG8gc3lzdGVtIHByb21wdHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3Mvc3lzdGVtLXByb21wdHMpLlxuICAgKi9cbiAgc3lzdGVtPzogc3RyaW5nIHwgQXJyYXk8QmV0YVRleHRCbG9ja1BhcmFtPjtcblxuICAvKipcbiAgICogQm9keSBwYXJhbTogSG93IHRoZSBtb2RlbCBzaG91bGQgdXNlIHRoZSBwcm92aWRlZCB0b29scy4gVGhlIG1vZGVsIGNhbiB1c2UgYVxuICAgKiBzcGVjaWZpYyB0b29sLCBhbnkgYXZhaWxhYmxlIHRvb2wsIG9yIGRlY2lkZSBieSBpdHNlbGYuXG4gICAqL1xuICB0b29sX2Nob2ljZT86IEJldGFUb29sQ2hvaWNlO1xuXG4gIC8qKlxuICAgKiBCb2R5IHBhcmFtOiBEZWZpbml0aW9ucyBvZiB0b29scyB0aGF0IHRoZSBtb2RlbCBtYXkgdXNlLlxuICAgKlxuICAgKiBJZiB5b3UgaW5jbHVkZSBgdG9vbHNgIGluIHlvdXIgQVBJIHJlcXVlc3QsIHRoZSBtb2RlbCBtYXkgcmV0dXJuIGB0b29sX3VzZWBcbiAgICogY29udGVudCBibG9ja3MgdGhhdCByZXByZXNlbnQgdGhlIG1vZGVsJ3MgdXNlIG9mIHRob3NlIHRvb2xzLiBZb3UgY2FuIHRoZW4gcnVuXG4gICAqIHRob3NlIHRvb2xzIHVzaW5nIHRoZSB0b29sIGlucHV0IGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgYW5kIHRoZW4gb3B0aW9uYWxseVxuICAgKiByZXR1cm4gcmVzdWx0cyBiYWNrIHRvIHRoZSBtb2RlbCB1c2luZyBgdG9vbF9yZXN1bHRgIGNvbnRlbnQgYmxvY2tzLlxuICAgKlxuICAgKiBFYWNoIHRvb2wgZGVmaW5pdGlvbiBpbmNsdWRlczpcbiAgICpcbiAgICogLSBgbmFtZWA6IE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqIC0gYGRlc2NyaXB0aW9uYDogT3B0aW9uYWwsIGJ1dCBzdHJvbmdseS1yZWNvbW1lbmRlZCBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbC5cbiAgICogLSBgaW5wdXRfc2NoZW1hYDogW0pTT04gc2NoZW1hXShodHRwczovL2pzb24tc2NoZW1hLm9yZy8pIGZvciB0aGUgdG9vbCBgaW5wdXRgXG4gICAqICAgc2hhcGUgdGhhdCB0aGUgbW9kZWwgd2lsbCBwcm9kdWNlIGluIGB0b29sX3VzZWAgb3V0cHV0IGNvbnRlbnQgYmxvY2tzLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgeW91IGRlZmluZWQgYHRvb2xzYCBhczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJuYW1lXCI6IFwiZ2V0X3N0b2NrX3ByaWNlXCIsXG4gICAqICAgICBcImRlc2NyaXB0aW9uXCI6IFwiR2V0IHRoZSBjdXJyZW50IHN0b2NrIHByaWNlIGZvciBhIGdpdmVuIHRpY2tlciBzeW1ib2wuXCIsXG4gICAqICAgICBcImlucHV0X3NjaGVtYVwiOiB7XG4gICAqICAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiLFxuICAgKiAgICAgICBcInByb3BlcnRpZXNcIjoge1xuICAgKiAgICAgICAgIFwidGlja2VyXCI6IHtcbiAgICogICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxuICAgKiAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSBzdG9jayB0aWNrZXIgc3ltYm9sLCBlLmcuIEFBUEwgZm9yIEFwcGxlIEluYy5cIlxuICAgKiAgICAgICAgIH1cbiAgICogICAgICAgfSxcbiAgICogICAgICAgXCJyZXF1aXJlZFwiOiBbXCJ0aWNrZXJcIl1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEFuZCB0aGVuIGFza2VkIHRoZSBtb2RlbCBcIldoYXQncyB0aGUgUyZQIDUwMCBhdCB0b2RheT9cIiwgdGhlIG1vZGVsIG1pZ2h0IHByb2R1Y2VcbiAgICogYHRvb2xfdXNlYCBjb250ZW50IGJsb2NrcyBpbiB0aGUgcmVzcG9uc2UgbGlrZSB0aGlzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInR5cGVcIjogXCJ0b29sX3VzZVwiLFxuICAgKiAgICAgXCJpZFwiOiBcInRvb2x1XzAxRDdGTHJmaDRHWXE3eVQxVUxGZXlNVlwiLFxuICAgKiAgICAgXCJuYW1lXCI6IFwiZ2V0X3N0b2NrX3ByaWNlXCIsXG4gICAqICAgICBcImlucHV0XCI6IHsgXCJ0aWNrZXJcIjogXCJeR1NQQ1wiIH1cbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFlvdSBtaWdodCB0aGVuIHJ1biB5b3VyIGBnZXRfc3RvY2tfcHJpY2VgIHRvb2wgd2l0aCBge1widGlja2VyXCI6IFwiXkdTUENcIn1gIGFzIGFuXG4gICAqIGlucHV0LCBhbmQgcmV0dXJuIHRoZSBmb2xsb3dpbmcgYmFjayB0byB0aGUgbW9kZWwgaW4gYSBzdWJzZXF1ZW50IGB1c2VyYFxuICAgKiBtZXNzYWdlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInR5cGVcIjogXCJ0b29sX3Jlc3VsdFwiLFxuICAgKiAgICAgXCJ0b29sX3VzZV9pZFwiOiBcInRvb2x1XzAxRDdGTHJmaDRHWXE3eVQxVUxGZXlNVlwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiMjU5Ljc1IFVTRFwiXG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBUb29scyBjYW4gYmUgdXNlZCBmb3Igd29ya2Zsb3dzIHRoYXQgaW5jbHVkZSBydW5uaW5nIGNsaWVudC1zaWRlIHRvb2xzIGFuZFxuICAgKiBmdW5jdGlvbnMsIG9yIG1vcmUgZ2VuZXJhbGx5IHdoZW5ldmVyIHlvdSB3YW50IHRoZSBtb2RlbCB0byBwcm9kdWNlIGEgcGFydGljdWxhclxuICAgKiBKU09OIHN0cnVjdHVyZSBvZiBvdXRwdXQuXG4gICAqXG4gICAqIFNlZSBvdXIgW2d1aWRlXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3Rvb2wtdXNlKSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgdG9vbHM/OiBBcnJheTxCZXRhVG9vbCB8IEJldGFUb29sQ29tcHV0ZXJVc2UyMDI0MTAyMiB8IEJldGFUb29sQmFzaDIwMjQxMDIyIHwgQmV0YVRvb2xUZXh0RWRpdG9yMjAyNDEwMjI+O1xuXG4gIC8qKlxuICAgKiBIZWFkZXIgcGFyYW06IE9wdGlvbmFsIGhlYWRlciB0byBzcGVjaWZ5IHRoZSBiZXRhIHZlcnNpb24ocykgeW91IHdhbnQgdG8gdXNlLlxuICAgKi9cbiAgYmV0YXM/OiBBcnJheTxCZXRhQVBJLkFudGhyb3BpY0JldGE+O1xufVxuXG5NZXNzYWdlcy5CYXRjaGVzID0gQmF0Y2hlcztcbk1lc3NhZ2VzLkJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UgPSBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgTWVzc2FnZXMge1xuICBleHBvcnQge1xuICAgIHR5cGUgQmV0YUJhc2U2NFBERkJsb2NrIGFzIEJldGFCYXNlNjRQREZCbG9jayxcbiAgICB0eXBlIEJldGFCYXNlNjRQREZTb3VyY2UgYXMgQmV0YUJhc2U2NFBERlNvdXJjZSxcbiAgICB0eXBlIEJldGFDYWNoZUNvbnRyb2xFcGhlbWVyYWwgYXMgQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCxcbiAgICB0eXBlIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvbiBhcyBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb24sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbSBhcyBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbSxcbiAgICB0eXBlIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uIGFzIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSBhcyBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uIGFzIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvbixcbiAgICB0eXBlIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtIGFzIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uc0NvbmZpZ1BhcmFtIGFzIEJldGFDaXRhdGlvbnNDb25maWdQYXJhbSxcbiAgICB0eXBlIEJldGFDaXRhdGlvbnNEZWx0YSBhcyBCZXRhQ2l0YXRpb25zRGVsdGEsXG4gICAgdHlwZSBCZXRhQ29udGVudEJsb2NrIGFzIEJldGFDb250ZW50QmxvY2ssXG4gICAgdHlwZSBCZXRhQ29udGVudEJsb2NrUGFyYW0gYXMgQmV0YUNvbnRlbnRCbG9ja1BhcmFtLFxuICAgIHR5cGUgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZSBhcyBCZXRhQ29udGVudEJsb2NrU291cmNlLFxuICAgIHR5cGUgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQgYXMgQmV0YUNvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQsXG4gICAgdHlwZSBCZXRhSW1hZ2VCbG9ja1BhcmFtIGFzIEJldGFJbWFnZUJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhSW5wdXRKU09ORGVsdGEgYXMgQmV0YUlucHV0SlNPTkRlbHRhLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2UgYXMgQmV0YU1lc3NhZ2UsXG4gICAgdHlwZSBCZXRhTWVzc2FnZURlbHRhVXNhZ2UgYXMgQmV0YU1lc3NhZ2VEZWx0YVVzYWdlLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VQYXJhbSBhcyBCZXRhTWVzc2FnZVBhcmFtLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VUb2tlbnNDb3VudCBhcyBCZXRhTWVzc2FnZVRva2Vuc0NvdW50LFxuICAgIHR5cGUgQmV0YU1ldGFkYXRhIGFzIEJldGFNZXRhZGF0YSxcbiAgICB0eXBlIEJldGFQbGFpblRleHRTb3VyY2UgYXMgQmV0YVBsYWluVGV4dFNvdXJjZSxcbiAgICB0eXBlIEJldGFSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50IGFzIEJldGFSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQgYXMgQmV0YVJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50IGFzIEJldGFSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnQgYXMgQmV0YVJhd01lc3NhZ2VEZWx0YUV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd01lc3NhZ2VTdGFydEV2ZW50IGFzIEJldGFSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgICB0eXBlIEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50IGFzIEJldGFSYXdNZXNzYWdlU3RvcEV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd01lc3NhZ2VTdHJlYW1FdmVudCBhcyBCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50LFxuICAgIHR5cGUgQmV0YVRleHRCbG9jayBhcyBCZXRhVGV4dEJsb2NrLFxuICAgIHR5cGUgQmV0YVRleHRCbG9ja1BhcmFtIGFzIEJldGFUZXh0QmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFUZXh0Q2l0YXRpb24gYXMgQmV0YVRleHRDaXRhdGlvbixcbiAgICB0eXBlIEJldGFUZXh0Q2l0YXRpb25QYXJhbSBhcyBCZXRhVGV4dENpdGF0aW9uUGFyYW0sXG4gICAgdHlwZSBCZXRhVGV4dERlbHRhIGFzIEJldGFUZXh0RGVsdGEsXG4gICAgdHlwZSBCZXRhVG9vbCBhcyBCZXRhVG9vbCxcbiAgICB0eXBlIEJldGFUb29sQmFzaDIwMjQxMDIyIGFzIEJldGFUb29sQmFzaDIwMjQxMDIyLFxuICAgIHR5cGUgQmV0YVRvb2xDaG9pY2UgYXMgQmV0YVRvb2xDaG9pY2UsXG4gICAgdHlwZSBCZXRhVG9vbENob2ljZUFueSBhcyBCZXRhVG9vbENob2ljZUFueSxcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlQXV0byBhcyBCZXRhVG9vbENob2ljZUF1dG8sXG4gICAgdHlwZSBCZXRhVG9vbENob2ljZVRvb2wgYXMgQmV0YVRvb2xDaG9pY2VUb29sLFxuICAgIHR5cGUgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyIGFzIEJldGFUb29sQ29tcHV0ZXJVc2UyMDI0MTAyMixcbiAgICB0eXBlIEJldGFUb29sUmVzdWx0QmxvY2tQYXJhbSBhcyBCZXRhVG9vbFJlc3VsdEJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhVG9vbFRleHRFZGl0b3IyMDI0MTAyMiBhcyBCZXRhVG9vbFRleHRFZGl0b3IyMDI0MTAyMixcbiAgICB0eXBlIEJldGFUb29sVW5pb24gYXMgQmV0YVRvb2xVbmlvbixcbiAgICB0eXBlIEJldGFUb29sVXNlQmxvY2sgYXMgQmV0YVRvb2xVc2VCbG9jayxcbiAgICB0eXBlIEJldGFUb29sVXNlQmxvY2tQYXJhbSBhcyBCZXRhVG9vbFVzZUJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhVXNhZ2UgYXMgQmV0YVVzYWdlLFxuICAgIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtcyBhcyBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICAgIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyBhcyBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICAgIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyBhcyBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICAgIHR5cGUgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zIGFzIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyxcbiAgfTtcblxuICBleHBvcnQge1xuICAgIEJhdGNoZXMgYXMgQmF0Y2hlcyxcbiAgICB0eXBlIEJldGFEZWxldGVkTWVzc2FnZUJhdGNoIGFzIEJldGFEZWxldGVkTWVzc2FnZUJhdGNoLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaCBhcyBCZXRhTWVzc2FnZUJhdGNoLFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0IGFzIEJldGFNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0LFxuICAgIHR5cGUgQmV0YU1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlIGFzIEJldGFNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UsXG4gICAgdHlwZSBCZXRhTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyBhcyBCZXRhTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaFJlc3VsdCxcbiAgICB0eXBlIEJldGFNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQgYXMgQmV0YU1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCxcbiAgICBCZXRhTWVzc2FnZUJhdGNoZXNQYWdlIGFzIEJldGFNZXNzYWdlQmF0Y2hlc1BhZ2UsXG4gICAgdHlwZSBCYXRjaENyZWF0ZVBhcmFtcyBhcyBCYXRjaENyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIEJhdGNoUmV0cmlldmVQYXJhbXMgYXMgQmF0Y2hSZXRyaWV2ZVBhcmFtcyxcbiAgICB0eXBlIEJhdGNoTGlzdFBhcmFtcyBhcyBCYXRjaExpc3RQYXJhbXMsXG4gICAgdHlwZSBCYXRjaERlbGV0ZVBhcmFtcyBhcyBCYXRjaERlbGV0ZVBhcmFtcyxcbiAgICB0eXBlIEJhdGNoQ2FuY2VsUGFyYW1zIGFzIEJhdGNoQ2FuY2VsUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hSZXN1bHRzUGFyYW1zIGFzIEJhdGNoUmVzdWx0c1BhcmFtcyxcbiAgfTtcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gXCIuLi8uLi9yZXNvdXJjZS5qc1wiO1xuaW1wb3J0ICogYXMgTW9kZWxzQVBJIGZyb20gXCIuL21vZGVscy5qc1wiO1xuaW1wb3J0IHsgQmV0YU1vZGVsSW5mbywgQmV0YU1vZGVsSW5mb3NQYWdlLCBNb2RlbExpc3RQYXJhbXMsIE1vZGVscyB9IGZyb20gXCIuL21vZGVscy5qc1wiO1xuaW1wb3J0ICogYXMgTWVzc2FnZXNBUEkgZnJvbSBcIi4vbWVzc2FnZXMvbWVzc2FnZXMuanNcIjtcbmltcG9ydCB7XG4gIEJldGFCYXNlNjRQREZCbG9jayxcbiAgQmV0YUJhc2U2NFBERlNvdXJjZSxcbiAgQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCxcbiAgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uLFxuICBCZXRhQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbSxcbiAgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24sXG4gIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0sXG4gIEJldGFDaXRhdGlvblBhZ2VMb2NhdGlvbixcbiAgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0sXG4gIEJldGFDaXRhdGlvbnNDb25maWdQYXJhbSxcbiAgQmV0YUNpdGF0aW9uc0RlbHRhLFxuICBCZXRhQ29udGVudEJsb2NrLFxuICBCZXRhQ29udGVudEJsb2NrUGFyYW0sXG4gIEJldGFDb250ZW50QmxvY2tTb3VyY2UsXG4gIEJldGFDb250ZW50QmxvY2tTb3VyY2VDb250ZW50LFxuICBCZXRhSW1hZ2VCbG9ja1BhcmFtLFxuICBCZXRhSW5wdXRKU09ORGVsdGEsXG4gIEJldGFNZXNzYWdlLFxuICBCZXRhTWVzc2FnZURlbHRhVXNhZ2UsXG4gIEJldGFNZXNzYWdlUGFyYW0sXG4gIEJldGFNZXNzYWdlVG9rZW5zQ291bnQsXG4gIEJldGFNZXRhZGF0YSxcbiAgQmV0YVBsYWluVGV4dFNvdXJjZSxcbiAgQmV0YVJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gIEJldGFSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50LFxuICBCZXRhUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50LFxuICBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnQsXG4gIEJldGFSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgQmV0YVJhd01lc3NhZ2VTdG9wRXZlbnQsXG4gIEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQsXG4gIEJldGFUZXh0QmxvY2ssXG4gIEJldGFUZXh0QmxvY2tQYXJhbSxcbiAgQmV0YVRleHRDaXRhdGlvbixcbiAgQmV0YVRleHRDaXRhdGlvblBhcmFtLFxuICBCZXRhVGV4dERlbHRhLFxuICBCZXRhVG9vbCxcbiAgQmV0YVRvb2xCYXNoMjAyNDEwMjIsXG4gIEJldGFUb29sQ2hvaWNlLFxuICBCZXRhVG9vbENob2ljZUFueSxcbiAgQmV0YVRvb2xDaG9pY2VBdXRvLFxuICBCZXRhVG9vbENob2ljZVRvb2wsXG4gIEJldGFUb29sQ29tcHV0ZXJVc2UyMDI0MTAyMixcbiAgQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtLFxuICBCZXRhVG9vbFRleHRFZGl0b3IyMDI0MTAyMixcbiAgQmV0YVRvb2xVbmlvbixcbiAgQmV0YVRvb2xVc2VCbG9jayxcbiAgQmV0YVRvb2xVc2VCbG9ja1BhcmFtLFxuICBCZXRhVXNhZ2UsXG4gIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyxcbiAgTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgTWVzc2FnZXMsXG59IGZyb20gXCIuL21lc3NhZ2VzL21lc3NhZ2VzLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBCZXRhIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICBtb2RlbHM6IE1vZGVsc0FQSS5Nb2RlbHMgPSBuZXcgTW9kZWxzQVBJLk1vZGVscyh0aGlzLl9jbGllbnQpO1xuICBtZXNzYWdlczogTWVzc2FnZXNBUEkuTWVzc2FnZXMgPSBuZXcgTWVzc2FnZXNBUEkuTWVzc2FnZXModGhpcy5fY2xpZW50KTtcbn1cblxuZXhwb3J0IHR5cGUgQW50aHJvcGljQmV0YSA9XG4gIHwgKHN0cmluZyAmIHt9KVxuICB8ICdtZXNzYWdlLWJhdGNoZXMtMjAyNC0wOS0yNCdcbiAgfCAncHJvbXB0LWNhY2hpbmctMjAyNC0wNy0zMSdcbiAgfCAnY29tcHV0ZXItdXNlLTIwMjQtMTAtMjInXG4gIHwgJ3BkZnMtMjAyNC0wOS0yNSdcbiAgfCAndG9rZW4tY291bnRpbmctMjAyNC0xMS0wMSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUFQSUVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdhcGlfZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFBdXRoZW50aWNhdGlvbkVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdhdXRoZW50aWNhdGlvbl9lcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUJpbGxpbmdFcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAnYmlsbGluZ19lcnJvcic7XG59XG5cbmV4cG9ydCB0eXBlIEJldGFFcnJvciA9XG4gIHwgQmV0YUludmFsaWRSZXF1ZXN0RXJyb3JcbiAgfCBCZXRhQXV0aGVudGljYXRpb25FcnJvclxuICB8IEJldGFCaWxsaW5nRXJyb3JcbiAgfCBCZXRhUGVybWlzc2lvbkVycm9yXG4gIHwgQmV0YU5vdEZvdW5kRXJyb3JcbiAgfCBCZXRhUmF0ZUxpbWl0RXJyb3JcbiAgfCBCZXRhR2F0ZXdheVRpbWVvdXRFcnJvclxuICB8IEJldGFBUElFcnJvclxuICB8IEJldGFPdmVybG9hZGVkRXJyb3I7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUVycm9yUmVzcG9uc2Uge1xuICBlcnJvcjogQmV0YUVycm9yO1xuXG4gIHR5cGU6ICdlcnJvcic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmV0YUdhdGV3YXlUaW1lb3V0RXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3RpbWVvdXRfZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFJbnZhbGlkUmVxdWVzdEVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdpbnZhbGlkX3JlcXVlc3RfZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFOb3RGb3VuZEVycm9yIHtcbiAgbWVzc2FnZTogc3RyaW5nO1xuXG4gIHR5cGU6ICdub3RfZm91bmRfZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFPdmVybG9hZGVkRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ292ZXJsb2FkZWRfZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFQZXJtaXNzaW9uRXJyb3Ige1xuICBtZXNzYWdlOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3Blcm1pc3Npb25fZXJyb3InO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJldGFSYXRlTGltaXRFcnJvciB7XG4gIG1lc3NhZ2U6IHN0cmluZztcblxuICB0eXBlOiAncmF0ZV9saW1pdF9lcnJvcic7XG59XG5cbkJldGEuTW9kZWxzID0gTW9kZWxzO1xuQmV0YS5CZXRhTW9kZWxJbmZvc1BhZ2UgPSBCZXRhTW9kZWxJbmZvc1BhZ2U7XG5CZXRhLk1lc3NhZ2VzID0gTWVzc2FnZXM7XG5cbmV4cG9ydCBkZWNsYXJlIG5hbWVzcGFjZSBCZXRhIHtcbiAgZXhwb3J0IHtcbiAgICB0eXBlIEFudGhyb3BpY0JldGEgYXMgQW50aHJvcGljQmV0YSxcbiAgICB0eXBlIEJldGFBUElFcnJvciBhcyBCZXRhQVBJRXJyb3IsXG4gICAgdHlwZSBCZXRhQXV0aGVudGljYXRpb25FcnJvciBhcyBCZXRhQXV0aGVudGljYXRpb25FcnJvcixcbiAgICB0eXBlIEJldGFCaWxsaW5nRXJyb3IgYXMgQmV0YUJpbGxpbmdFcnJvcixcbiAgICB0eXBlIEJldGFFcnJvciBhcyBCZXRhRXJyb3IsXG4gICAgdHlwZSBCZXRhRXJyb3JSZXNwb25zZSBhcyBCZXRhRXJyb3JSZXNwb25zZSxcbiAgICB0eXBlIEJldGFHYXRld2F5VGltZW91dEVycm9yIGFzIEJldGFHYXRld2F5VGltZW91dEVycm9yLFxuICAgIHR5cGUgQmV0YUludmFsaWRSZXF1ZXN0RXJyb3IgYXMgQmV0YUludmFsaWRSZXF1ZXN0RXJyb3IsXG4gICAgdHlwZSBCZXRhTm90Rm91bmRFcnJvciBhcyBCZXRhTm90Rm91bmRFcnJvcixcbiAgICB0eXBlIEJldGFPdmVybG9hZGVkRXJyb3IgYXMgQmV0YU92ZXJsb2FkZWRFcnJvcixcbiAgICB0eXBlIEJldGFQZXJtaXNzaW9uRXJyb3IgYXMgQmV0YVBlcm1pc3Npb25FcnJvcixcbiAgICB0eXBlIEJldGFSYXRlTGltaXRFcnJvciBhcyBCZXRhUmF0ZUxpbWl0RXJyb3IsXG4gIH07XG5cbiAgZXhwb3J0IHtcbiAgICBNb2RlbHMgYXMgTW9kZWxzLFxuICAgIHR5cGUgQmV0YU1vZGVsSW5mbyBhcyBCZXRhTW9kZWxJbmZvLFxuICAgIEJldGFNb2RlbEluZm9zUGFnZSBhcyBCZXRhTW9kZWxJbmZvc1BhZ2UsXG4gICAgdHlwZSBNb2RlbExpc3RQYXJhbXMgYXMgTW9kZWxMaXN0UGFyYW1zLFxuICB9O1xuXG4gIGV4cG9ydCB7XG4gICAgTWVzc2FnZXMgYXMgTWVzc2FnZXMsXG4gICAgdHlwZSBCZXRhQmFzZTY0UERGQmxvY2sgYXMgQmV0YUJhc2U2NFBERkJsb2NrLFxuICAgIHR5cGUgQmV0YUJhc2U2NFBERlNvdXJjZSBhcyBCZXRhQmFzZTY0UERGU291cmNlLFxuICAgIHR5cGUgQmV0YUNhY2hlQ29udHJvbEVwaGVtZXJhbCBhcyBCZXRhQ2FjaGVDb250cm9sRXBoZW1lcmFsLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uQ2hhckxvY2F0aW9uIGFzIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvbixcbiAgICB0eXBlIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtIGFzIEJldGFDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24gYXMgQmV0YUNpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtIGFzIEJldGFDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25QYWdlTG9jYXRpb24gYXMgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0gYXMgQmV0YUNpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBCZXRhQ2l0YXRpb25zQ29uZmlnUGFyYW0gYXMgQmV0YUNpdGF0aW9uc0NvbmZpZ1BhcmFtLFxuICAgIHR5cGUgQmV0YUNpdGF0aW9uc0RlbHRhIGFzIEJldGFDaXRhdGlvbnNEZWx0YSxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2sgYXMgQmV0YUNvbnRlbnRCbG9jayxcbiAgICB0eXBlIEJldGFDb250ZW50QmxvY2tQYXJhbSBhcyBCZXRhQ29udGVudEJsb2NrUGFyYW0sXG4gICAgdHlwZSBCZXRhQ29udGVudEJsb2NrU291cmNlIGFzIEJldGFDb250ZW50QmxvY2tTb3VyY2UsXG4gICAgdHlwZSBCZXRhQ29udGVudEJsb2NrU291cmNlQ29udGVudCBhcyBCZXRhQ29udGVudEJsb2NrU291cmNlQ29udGVudCxcbiAgICB0eXBlIEJldGFJbWFnZUJsb2NrUGFyYW0gYXMgQmV0YUltYWdlQmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFJbnB1dEpTT05EZWx0YSBhcyBCZXRhSW5wdXRKU09ORGVsdGEsXG4gICAgdHlwZSBCZXRhTWVzc2FnZSBhcyBCZXRhTWVzc2FnZSxcbiAgICB0eXBlIEJldGFNZXNzYWdlRGVsdGFVc2FnZSBhcyBCZXRhTWVzc2FnZURlbHRhVXNhZ2UsXG4gICAgdHlwZSBCZXRhTWVzc2FnZVBhcmFtIGFzIEJldGFNZXNzYWdlUGFyYW0sXG4gICAgdHlwZSBCZXRhTWVzc2FnZVRva2Vuc0NvdW50IGFzIEJldGFNZXNzYWdlVG9rZW5zQ291bnQsXG4gICAgdHlwZSBCZXRhTWV0YWRhdGEgYXMgQmV0YU1ldGFkYXRhLFxuICAgIHR5cGUgQmV0YVBsYWluVGV4dFNvdXJjZSBhcyBCZXRhUGxhaW5UZXh0U291cmNlLFxuICAgIHR5cGUgQmV0YVJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQgYXMgQmV0YVJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCBhcyBCZXRhUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgICB0eXBlIEJldGFSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQgYXMgQmV0YVJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCxcbiAgICB0eXBlIEJldGFSYXdNZXNzYWdlRGVsdGFFdmVudCBhcyBCZXRhUmF3TWVzc2FnZURlbHRhRXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3TWVzc2FnZVN0YXJ0RXZlbnQgYXMgQmV0YVJhd01lc3NhZ2VTdGFydEV2ZW50LFxuICAgIHR5cGUgQmV0YVJhd01lc3NhZ2VTdG9wRXZlbnQgYXMgQmV0YVJhd01lc3NhZ2VTdG9wRXZlbnQsXG4gICAgdHlwZSBCZXRhUmF3TWVzc2FnZVN0cmVhbUV2ZW50IGFzIEJldGFSYXdNZXNzYWdlU3RyZWFtRXZlbnQsXG4gICAgdHlwZSBCZXRhVGV4dEJsb2NrIGFzIEJldGFUZXh0QmxvY2ssXG4gICAgdHlwZSBCZXRhVGV4dEJsb2NrUGFyYW0gYXMgQmV0YVRleHRCbG9ja1BhcmFtLFxuICAgIHR5cGUgQmV0YVRleHRDaXRhdGlvbiBhcyBCZXRhVGV4dENpdGF0aW9uLFxuICAgIHR5cGUgQmV0YVRleHRDaXRhdGlvblBhcmFtIGFzIEJldGFUZXh0Q2l0YXRpb25QYXJhbSxcbiAgICB0eXBlIEJldGFUZXh0RGVsdGEgYXMgQmV0YVRleHREZWx0YSxcbiAgICB0eXBlIEJldGFUb29sIGFzIEJldGFUb29sLFxuICAgIHR5cGUgQmV0YVRvb2xCYXNoMjAyNDEwMjIgYXMgQmV0YVRvb2xCYXNoMjAyNDEwMjIsXG4gICAgdHlwZSBCZXRhVG9vbENob2ljZSBhcyBCZXRhVG9vbENob2ljZSxcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlQW55IGFzIEJldGFUb29sQ2hvaWNlQW55LFxuICAgIHR5cGUgQmV0YVRvb2xDaG9pY2VBdXRvIGFzIEJldGFUb29sQ2hvaWNlQXV0byxcbiAgICB0eXBlIEJldGFUb29sQ2hvaWNlVG9vbCBhcyBCZXRhVG9vbENob2ljZVRvb2wsXG4gICAgdHlwZSBCZXRhVG9vbENvbXB1dGVyVXNlMjAyNDEwMjIgYXMgQmV0YVRvb2xDb21wdXRlclVzZTIwMjQxMDIyLFxuICAgIHR5cGUgQmV0YVRvb2xSZXN1bHRCbG9ja1BhcmFtIGFzIEJldGFUb29sUmVzdWx0QmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyIGFzIEJldGFUb29sVGV4dEVkaXRvcjIwMjQxMDIyLFxuICAgIHR5cGUgQmV0YVRvb2xVbmlvbiBhcyBCZXRhVG9vbFVuaW9uLFxuICAgIHR5cGUgQmV0YVRvb2xVc2VCbG9jayBhcyBCZXRhVG9vbFVzZUJsb2NrLFxuICAgIHR5cGUgQmV0YVRvb2xVc2VCbG9ja1BhcmFtIGFzIEJldGFUb29sVXNlQmxvY2tQYXJhbSxcbiAgICB0eXBlIEJldGFVc2FnZSBhcyBCZXRhVXNhZ2UsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMgYXMgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICB9O1xufVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSBcIi4uL3Jlc291cmNlLmpzXCI7XG5pbXBvcnQgeyBBUElQcm9taXNlIH0gZnJvbSBcIi4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIENvbXBsZXRpb25zQVBJIGZyb20gXCIuL2NvbXBsZXRpb25zLmpzXCI7XG5pbXBvcnQgKiBhcyBNZXNzYWdlc0FQSSBmcm9tIFwiLi9tZXNzYWdlcy9tZXNzYWdlcy5qc1wiO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSBcIi4uL3N0cmVhbWluZy5qc1wiO1xuXG5leHBvcnQgY2xhc3MgQ29tcGxldGlvbnMgZXh0ZW5kcyBBUElSZXNvdXJjZSB7XG4gIC8qKlxuICAgKiBbTGVnYWN5XSBDcmVhdGUgYSBUZXh0IENvbXBsZXRpb24uXG4gICAqXG4gICAqIFRoZSBUZXh0IENvbXBsZXRpb25zIEFQSSBpcyBhIGxlZ2FjeSBBUEkuIFdlIHJlY29tbWVuZCB1c2luZyB0aGVcbiAgICogW01lc3NhZ2VzIEFQSV0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzKSBnb2luZyBmb3J3YXJkLlxuICAgKlxuICAgKiBGdXR1cmUgbW9kZWxzIGFuZCBmZWF0dXJlcyB3aWxsIG5vdCBiZSBjb21wYXRpYmxlIHdpdGggVGV4dCBDb21wbGV0aW9ucy4gU2VlIG91clxuICAgKiBbbWlncmF0aW9uIGd1aWRlXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvbWlncmF0aW5nLWZyb20tdGV4dC1jb21wbGV0aW9ucy10by1tZXNzYWdlcylcbiAgICogZm9yIGd1aWRhbmNlIGluIG1pZ3JhdGluZyBmcm9tIFRleHQgQ29tcGxldGlvbnMgdG8gTWVzc2FnZXMuXG4gICAqL1xuICBjcmVhdGUoYm9keTogQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBBUElQcm9taXNlPENvbXBsZXRpb24+O1xuICBjcmVhdGUoXG4gICAgYm9keTogQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08Q29tcGxldGlvbj4+O1xuICBjcmVhdGUoXG4gICAgYm9keTogQ29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2UsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IEFQSVByb21pc2U8U3RyZWFtPENvbXBsZXRpb24+IHwgQ29tcGxldGlvbj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBBUElQcm9taXNlPENvbXBsZXRpb24+IHwgQVBJUHJvbWlzZTxTdHJlYW08Q29tcGxldGlvbj4+IHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoJy92MS9jb21wbGV0ZScsIHtcbiAgICAgIGJvZHksXG4gICAgICB0aW1lb3V0OiAodGhpcy5fY2xpZW50IGFzIGFueSkuX29wdGlvbnMudGltZW91dCA/PyA2MDAwMDAsXG4gICAgICAuLi5vcHRpb25zLFxuICAgICAgc3RyZWFtOiBib2R5LnN0cmVhbSA/PyBmYWxzZSxcbiAgICB9KSBhcyBBUElQcm9taXNlPENvbXBsZXRpb24+IHwgQVBJUHJvbWlzZTxTdHJlYW08Q29tcGxldGlvbj4+O1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbiB7XG4gIC8qKlxuICAgKiBVbmlxdWUgb2JqZWN0IGlkZW50aWZpZXIuXG4gICAqXG4gICAqIFRoZSBmb3JtYXQgYW5kIGxlbmd0aCBvZiBJRHMgbWF5IGNoYW5nZSBvdmVyIHRpbWUuXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBUaGUgcmVzdWx0aW5nIGNvbXBsZXRpb24gdXAgdG8gYW5kIGV4Y2x1ZGluZyB0aGUgc3RvcCBzZXF1ZW5jZXMuXG4gICAqL1xuICBjb21wbGV0aW9uOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1lc3NhZ2VzQVBJLk1vZGVsO1xuXG4gIC8qKlxuICAgKiBUaGUgcmVhc29uIHRoYXQgd2Ugc3RvcHBlZC5cbiAgICpcbiAgICogVGhpcyBtYXkgYmUgb25lIHRoZSBmb2xsb3dpbmcgdmFsdWVzOlxuICAgKlxuICAgKiAtIGBcInN0b3Bfc2VxdWVuY2VcImA6IHdlIHJlYWNoZWQgYSBzdG9wIHNlcXVlbmNlIFx1MjAxNCBlaXRoZXIgcHJvdmlkZWQgYnkgeW91IHZpYSB0aGVcbiAgICogICBgc3RvcF9zZXF1ZW5jZXNgIHBhcmFtZXRlciwgb3IgYSBzdG9wIHNlcXVlbmNlIGJ1aWx0IGludG8gdGhlIG1vZGVsXG4gICAqIC0gYFwibWF4X3Rva2Vuc1wiYDogd2UgZXhjZWVkZWQgYG1heF90b2tlbnNfdG9fc2FtcGxlYCBvciB0aGUgbW9kZWwncyBtYXhpbXVtXG4gICAqL1xuICBzdG9wX3JlYXNvbjogc3RyaW5nIHwgbnVsbDtcblxuICAvKipcbiAgICogT2JqZWN0IHR5cGUuXG4gICAqXG4gICAqIEZvciBUZXh0IENvbXBsZXRpb25zLCB0aGlzIGlzIGFsd2F5cyBgXCJjb21wbGV0aW9uXCJgLlxuICAgKi9cbiAgdHlwZTogJ2NvbXBsZXRpb24nO1xufVxuXG5leHBvcnQgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zID0gQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyB8IENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHRva2VucyB0byBnZW5lcmF0ZSBiZWZvcmUgc3RvcHBpbmcuXG4gICAqXG4gICAqIE5vdGUgdGhhdCBvdXIgbW9kZWxzIG1heSBzdG9wIF9iZWZvcmVfIHJlYWNoaW5nIHRoaXMgbWF4aW11bS4gVGhpcyBwYXJhbWV0ZXJcbiAgICogb25seSBzcGVjaWZpZXMgdGhlIGFic29sdXRlIG1heGltdW0gbnVtYmVyIG9mIHRva2VucyB0byBnZW5lcmF0ZS5cbiAgICovXG4gIG1heF90b2tlbnNfdG9fc2FtcGxlOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1lc3NhZ2VzQVBJLk1vZGVsO1xuXG4gIC8qKlxuICAgKiBUaGUgcHJvbXB0IHRoYXQgeW91IHdhbnQgQ2xhdWRlIHRvIGNvbXBsZXRlLlxuICAgKlxuICAgKiBGb3IgcHJvcGVyIHJlc3BvbnNlIGdlbmVyYXRpb24geW91IHdpbGwgbmVlZCB0byBmb3JtYXQgeW91ciBwcm9tcHQgdXNpbmdcbiAgICogYWx0ZXJuYXRpbmcgYFxcblxcbkh1bWFuOmAgYW5kIGBcXG5cXG5Bc3Npc3RhbnQ6YCBjb252ZXJzYXRpb25hbCB0dXJucy4gRm9yIGV4YW1wbGU6XG4gICAqXG4gICAqIGBgYFxuICAgKiBcIlxcblxcbkh1bWFuOiB7dXNlclF1ZXN0aW9ufVxcblxcbkFzc2lzdGFudDpcIlxuICAgKiBgYGBcbiAgICpcbiAgICogU2VlIFtwcm9tcHQgdmFsaWRhdGlvbl0oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL3Byb21wdC12YWxpZGF0aW9uKSBhbmRcbiAgICogb3VyIGd1aWRlIHRvXG4gICAqIFtwcm9tcHQgZGVzaWduXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL2ludHJvLXRvLXByb21wdGluZykgZm9yIG1vcmVcbiAgICogZGV0YWlscy5cbiAgICovXG4gIHByb21wdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgZGVzY3JpYmluZyBtZXRhZGF0YSBhYm91dCB0aGUgcmVxdWVzdC5cbiAgICovXG4gIG1ldGFkYXRhPzogTWVzc2FnZXNBUEkuTWV0YWRhdGE7XG5cbiAgLyoqXG4gICAqIFNlcXVlbmNlcyB0aGF0IHdpbGwgY2F1c2UgdGhlIG1vZGVsIHRvIHN0b3AgZ2VuZXJhdGluZy5cbiAgICpcbiAgICogT3VyIG1vZGVscyBzdG9wIG9uIGBcIlxcblxcbkh1bWFuOlwiYCwgYW5kIG1heSBpbmNsdWRlIGFkZGl0aW9uYWwgYnVpbHQtaW4gc3RvcFxuICAgKiBzZXF1ZW5jZXMgaW4gdGhlIGZ1dHVyZS4gQnkgcHJvdmlkaW5nIHRoZSBzdG9wX3NlcXVlbmNlcyBwYXJhbWV0ZXIsIHlvdSBtYXlcbiAgICogaW5jbHVkZSBhZGRpdGlvbmFsIHN0cmluZ3MgdGhhdCB3aWxsIGNhdXNlIHRoZSBtb2RlbCB0byBzdG9wIGdlbmVyYXRpbmcuXG4gICAqL1xuICBzdG9wX3NlcXVlbmNlcz86IEFycmF5PHN0cmluZz47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50IGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9zdHJlYW1pbmcpIGZvciBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogQW1vdW50IG9mIHJhbmRvbW5lc3MgaW5qZWN0ZWQgaW50byB0aGUgcmVzcG9uc2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGAxLjBgLiBSYW5nZXMgZnJvbSBgMC4wYCB0byBgMS4wYC4gVXNlIGB0ZW1wZXJhdHVyZWAgY2xvc2VyIHRvIGAwLjBgXG4gICAqIGZvciBhbmFseXRpY2FsIC8gbXVsdGlwbGUgY2hvaWNlLCBhbmQgY2xvc2VyIHRvIGAxLjBgIGZvciBjcmVhdGl2ZSBhbmRcbiAgICogZ2VuZXJhdGl2ZSB0YXNrcy5cbiAgICpcbiAgICogTm90ZSB0aGF0IGV2ZW4gd2l0aCBgdGVtcGVyYXR1cmVgIG9mIGAwLjBgLCB0aGUgcmVzdWx0cyB3aWxsIG5vdCBiZSBmdWxseVxuICAgKiBkZXRlcm1pbmlzdGljLlxuICAgKi9cbiAgdGVtcGVyYXR1cmU/OiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIE9ubHkgc2FtcGxlIGZyb20gdGhlIHRvcCBLIG9wdGlvbnMgZm9yIGVhY2ggc3Vic2VxdWVudCB0b2tlbi5cbiAgICpcbiAgICogVXNlZCB0byByZW1vdmUgXCJsb25nIHRhaWxcIiBsb3cgcHJvYmFiaWxpdHkgcmVzcG9uc2VzLlxuICAgKiBbTGVhcm4gbW9yZSB0ZWNobmljYWwgZGV0YWlscyBoZXJlXShodHRwczovL3Rvd2FyZHNkYXRhc2NpZW5jZS5jb20vaG93LXRvLXNhbXBsZS1mcm9tLWxhbmd1YWdlLW1vZGVscy02ODJiY2ViOTcyNzcpLlxuICAgKlxuICAgKiBSZWNvbW1lbmRlZCBmb3IgYWR2YW5jZWQgdXNlIGNhc2VzIG9ubHkuIFlvdSB1c3VhbGx5IG9ubHkgbmVlZCB0byB1c2VcbiAgICogYHRlbXBlcmF0dXJlYC5cbiAgICovXG4gIHRvcF9rPzogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBVc2UgbnVjbGV1cyBzYW1wbGluZy5cbiAgICpcbiAgICogSW4gbnVjbGV1cyBzYW1wbGluZywgd2UgY29tcHV0ZSB0aGUgY3VtdWxhdGl2ZSBkaXN0cmlidXRpb24gb3ZlciBhbGwgdGhlIG9wdGlvbnNcbiAgICogZm9yIGVhY2ggc3Vic2VxdWVudCB0b2tlbiBpbiBkZWNyZWFzaW5nIHByb2JhYmlsaXR5IG9yZGVyIGFuZCBjdXQgaXQgb2ZmIG9uY2UgaXRcbiAgICogcmVhY2hlcyBhIHBhcnRpY3VsYXIgcHJvYmFiaWxpdHkgc3BlY2lmaWVkIGJ5IGB0b3BfcGAuIFlvdSBzaG91bGQgZWl0aGVyIGFsdGVyXG4gICAqIGB0ZW1wZXJhdHVyZWAgb3IgYHRvcF9wYCwgYnV0IG5vdCBib3RoLlxuICAgKlxuICAgKiBSZWNvbW1lbmRlZCBmb3IgYWR2YW5jZWQgdXNlIGNhc2VzIG9ubHkuIFlvdSB1c3VhbGx5IG9ubHkgbmVlZCB0byB1c2VcbiAgICogYHRlbXBlcmF0dXJlYC5cbiAgICovXG4gIHRvcF9wPzogbnVtYmVyO1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIENvbXBsZXRpb25DcmVhdGVQYXJhbXMge1xuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGBBbnRocm9waWMuTWVzc2FnZXMuTWV0YWRhdGFgIGluc3RlYWRcbiAgICovXG4gIGV4cG9ydCB0eXBlIE1ldGFkYXRhID0gTWVzc2FnZXNBUEkuTWV0YWRhdGE7XG5cbiAgZXhwb3J0IHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyA9IENvbXBsZXRpb25zQVBJLkNvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIGV4cG9ydCB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgPSBDb21wbGV0aW9uc0FQSS5Db21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgZXh0ZW5kcyBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudCBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvc3RyZWFtaW5nKSBmb3IgZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbT86IGZhbHNlO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgZXh0ZW5kcyBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGluY3JlbWVudGFsbHkgc3RyZWFtIHRoZSByZXNwb25zZSB1c2luZyBzZXJ2ZXItc2VudCBldmVudHMuXG4gICAqXG4gICAqIFNlZSBbc3RyZWFtaW5nXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9hcGkvc3RyZWFtaW5nKSBmb3IgZGV0YWlscy5cbiAgICovXG4gIHN0cmVhbTogdHJ1ZTtcbn1cblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIENvbXBsZXRpb25zIHtcbiAgZXhwb3J0IHtcbiAgICB0eXBlIENvbXBsZXRpb24gYXMgQ29tcGxldGlvbixcbiAgICB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXMgYXMgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgYXMgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgICB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgYXMgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgfTtcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5pbXBvcnQgeyBBUElSZXNvdXJjZSB9IGZyb20gXCIuLi8uLi9yZXNvdXJjZS5qc1wiO1xuaW1wb3J0IHsgaXNSZXF1ZXN0T3B0aW9ucyB9IGZyb20gXCIuLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuLi8uLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBTaGFyZWQgZnJvbSBcIi4uL3NoYXJlZC5qc1wiO1xuaW1wb3J0ICogYXMgTWVzc2FnZXNBUEkgZnJvbSBcIi4vbWVzc2FnZXMuanNcIjtcbmltcG9ydCB7IFBhZ2UsIHR5cGUgUGFnZVBhcmFtcyB9IGZyb20gXCIuLi8uLi9wYWdpbmF0aW9uLmpzXCI7XG5pbXBvcnQgeyBKU09OTERlY29kZXIgfSBmcm9tIFwiLi4vLi4vaW50ZXJuYWwvZGVjb2RlcnMvanNvbmwuanNcIjtcbmltcG9ydCB7IEFudGhyb3BpY0Vycm9yIH0gZnJvbSBcIi4uLy4uL2Vycm9yLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBCYXRjaGVzIGV4dGVuZHMgQVBJUmVzb3VyY2Uge1xuICAvKipcbiAgICogU2VuZCBhIGJhdGNoIG9mIE1lc3NhZ2UgY3JlYXRpb24gcmVxdWVzdHMuXG4gICAqXG4gICAqIFRoZSBNZXNzYWdlIEJhdGNoZXMgQVBJIGNhbiBiZSB1c2VkIHRvIHByb2Nlc3MgbXVsdGlwbGUgTWVzc2FnZXMgQVBJIHJlcXVlc3RzIGF0XG4gICAqIG9uY2UuIE9uY2UgYSBNZXNzYWdlIEJhdGNoIGlzIGNyZWF0ZWQsIGl0IGJlZ2lucyBwcm9jZXNzaW5nIGltbWVkaWF0ZWx5LiBCYXRjaGVzXG4gICAqIGNhbiB0YWtlIHVwIHRvIDI0IGhvdXJzIHRvIGNvbXBsZXRlLlxuICAgKi9cbiAgY3JlYXRlKGJvZHk6IEJhdGNoQ3JlYXRlUGFyYW1zLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxNZXNzYWdlQmF0Y2g+IHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoJy92MS9tZXNzYWdlcy9iYXRjaGVzJywgeyBib2R5LCAuLi5vcHRpb25zIH0pO1xuICB9XG5cbiAgLyoqXG4gICAqIFRoaXMgZW5kcG9pbnQgaXMgaWRlbXBvdGVudCBhbmQgY2FuIGJlIHVzZWQgdG8gcG9sbCBmb3IgTWVzc2FnZSBCYXRjaFxuICAgKiBjb21wbGV0aW9uLiBUbyBhY2Nlc3MgdGhlIHJlc3VsdHMgb2YgYSBNZXNzYWdlIEJhdGNoLCBtYWtlIGEgcmVxdWVzdCB0byB0aGVcbiAgICogYHJlc3VsdHNfdXJsYCBmaWVsZCBpbiB0aGUgcmVzcG9uc2UuXG4gICAqL1xuICByZXRyaWV2ZShtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxNZXNzYWdlQmF0Y2g+IHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LmdldChgL3YxL21lc3NhZ2VzL2JhdGNoZXMvJHttZXNzYWdlQmF0Y2hJZH1gLCBvcHRpb25zKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBMaXN0IGFsbCBNZXNzYWdlIEJhdGNoZXMgd2l0aGluIGEgV29ya3NwYWNlLiBNb3N0IHJlY2VudGx5IGNyZWF0ZWQgYmF0Y2hlcyBhcmVcbiAgICogcmV0dXJuZWQgZmlyc3QuXG4gICAqL1xuICBsaXN0KFxuICAgIHF1ZXJ5PzogQmF0Y2hMaXN0UGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLlBhZ2VQcm9taXNlPE1lc3NhZ2VCYXRjaGVzUGFnZSwgTWVzc2FnZUJhdGNoPjtcbiAgbGlzdChvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuUGFnZVByb21pc2U8TWVzc2FnZUJhdGNoZXNQYWdlLCBNZXNzYWdlQmF0Y2g+O1xuICBsaXN0KFxuICAgIHF1ZXJ5OiBCYXRjaExpc3RQYXJhbXMgfCBDb3JlLlJlcXVlc3RPcHRpb25zID0ge30sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IENvcmUuUGFnZVByb21pc2U8TWVzc2FnZUJhdGNoZXNQYWdlLCBNZXNzYWdlQmF0Y2g+IHtcbiAgICBpZiAoaXNSZXF1ZXN0T3B0aW9ucyhxdWVyeSkpIHtcbiAgICAgIHJldHVybiB0aGlzLmxpc3Qoe30sIHF1ZXJ5KTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5nZXRBUElMaXN0KCcvdjEvbWVzc2FnZXMvYmF0Y2hlcycsIE1lc3NhZ2VCYXRjaGVzUGFnZSwgeyBxdWVyeSwgLi4ub3B0aW9ucyB9KTtcbiAgfVxuXG4gIC8qKlxuICAgKiBEZWxldGUgYSBNZXNzYWdlIEJhdGNoLlxuICAgKlxuICAgKiBNZXNzYWdlIEJhdGNoZXMgY2FuIG9ubHkgYmUgZGVsZXRlZCBvbmNlIHRoZXkndmUgZmluaXNoZWQgcHJvY2Vzc2luZy4gSWYgeW91J2RcbiAgICogbGlrZSB0byBkZWxldGUgYW4gaW4tcHJvZ3Jlc3MgYmF0Y2gsIHlvdSBtdXN0IGZpcnN0IGNhbmNlbCBpdC5cbiAgICovXG4gIGRlbGV0ZShtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxEZWxldGVkTWVzc2FnZUJhdGNoPiB7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5kZWxldGUoYC92MS9tZXNzYWdlcy9iYXRjaGVzLyR7bWVzc2FnZUJhdGNoSWR9YCwgb3B0aW9ucyk7XG4gIH1cblxuICAvKipcbiAgICogQmF0Y2hlcyBtYXkgYmUgY2FuY2VsZWQgYW55IHRpbWUgYmVmb3JlIHByb2Nlc3NpbmcgZW5kcy4gT25jZSBjYW5jZWxsYXRpb24gaXNcbiAgICogaW5pdGlhdGVkLCB0aGUgYmF0Y2ggZW50ZXJzIGEgYGNhbmNlbGluZ2Agc3RhdGUsIGF0IHdoaWNoIHRpbWUgdGhlIHN5c3RlbSBtYXlcbiAgICogY29tcGxldGUgYW55IGluLXByb2dyZXNzLCBub24taW50ZXJydXB0aWJsZSByZXF1ZXN0cyBiZWZvcmUgZmluYWxpemluZ1xuICAgKiBjYW5jZWxsYXRpb24uXG4gICAqXG4gICAqIFRoZSBudW1iZXIgb2YgY2FuY2VsZWQgcmVxdWVzdHMgaXMgc3BlY2lmaWVkIGluIGByZXF1ZXN0X2NvdW50c2AuIFRvIGRldGVybWluZVxuICAgKiB3aGljaCByZXF1ZXN0cyB3ZXJlIGNhbmNlbGVkLCBjaGVjayB0aGUgaW5kaXZpZHVhbCByZXN1bHRzIHdpdGhpbiB0aGUgYmF0Y2guXG4gICAqIE5vdGUgdGhhdCBjYW5jZWxsYXRpb24gbWF5IG5vdCByZXN1bHQgaW4gYW55IGNhbmNlbGVkIHJlcXVlc3RzIGlmIHRoZXkgd2VyZVxuICAgKiBub24taW50ZXJydXB0aWJsZS5cbiAgICovXG4gIGNhbmNlbChtZXNzYWdlQmF0Y2hJZDogc3RyaW5nLCBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuQVBJUHJvbWlzZTxNZXNzYWdlQmF0Y2g+IHtcbiAgICByZXR1cm4gdGhpcy5fY2xpZW50LnBvc3QoYC92MS9tZXNzYWdlcy9iYXRjaGVzLyR7bWVzc2FnZUJhdGNoSWR9L2NhbmNlbGAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIFN0cmVhbXMgdGhlIHJlc3VsdHMgb2YgYSBNZXNzYWdlIEJhdGNoIGFzIGEgYC5qc29ubGAgZmlsZS5cbiAgICpcbiAgICogRWFjaCBsaW5lIGluIHRoZSBmaWxlIGlzIGEgSlNPTiBvYmplY3QgY29udGFpbmluZyB0aGUgcmVzdWx0IG9mIGEgc2luZ2xlIHJlcXVlc3RcbiAgICogaW4gdGhlIE1lc3NhZ2UgQmF0Y2guIFJlc3VsdHMgYXJlIG5vdCBndWFyYW50ZWVkIHRvIGJlIGluIHRoZSBzYW1lIG9yZGVyIGFzXG4gICAqIHJlcXVlc3RzLiBVc2UgdGhlIGBjdXN0b21faWRgIGZpZWxkIHRvIG1hdGNoIHJlc3VsdHMgdG8gcmVxdWVzdHMuXG4gICAqL1xuICBhc3luYyByZXN1bHRzKFxuICAgIG1lc3NhZ2VCYXRjaElkOiBzdHJpbmcsXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IFByb21pc2U8SlNPTkxEZWNvZGVyPE1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZT4+IHtcbiAgICBjb25zdCBiYXRjaCA9IGF3YWl0IHRoaXMucmV0cmlldmUobWVzc2FnZUJhdGNoSWQpO1xuICAgIGlmICghYmF0Y2gucmVzdWx0c191cmwpIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihcbiAgICAgICAgYE5vIGJhdGNoIFxcYHJlc3VsdHNfdXJsXFxgOyBIYXMgaXQgZmluaXNoZWQgcHJvY2Vzc2luZz8gJHtiYXRjaC5wcm9jZXNzaW5nX3N0YXR1c30gLSAke2JhdGNoLmlkfWAsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9jbGllbnRcbiAgICAgIC5nZXQoYmF0Y2gucmVzdWx0c191cmwsIHtcbiAgICAgICAgLi4ub3B0aW9ucyxcbiAgICAgICAgaGVhZGVyczoge1xuICAgICAgICAgIEFjY2VwdDogJ2FwcGxpY2F0aW9uL2JpbmFyeScsXG4gICAgICAgICAgLi4ub3B0aW9ucz8uaGVhZGVycyxcbiAgICAgICAgfSxcbiAgICAgICAgX19iaW5hcnlSZXNwb25zZTogdHJ1ZSxcbiAgICAgIH0pXG4gICAgICAuX3RoZW5VbndyYXAoKF8sIHByb3BzKSA9PiBKU09OTERlY29kZXIuZnJvbVJlc3BvbnNlKHByb3BzLnJlc3BvbnNlLCBwcm9wcy5jb250cm9sbGVyKSk7XG4gIH1cbn1cblxuZXhwb3J0IGNsYXNzIE1lc3NhZ2VCYXRjaGVzUGFnZSBleHRlbmRzIFBhZ2U8TWVzc2FnZUJhdGNoPiB7fVxuXG5leHBvcnQgaW50ZXJmYWNlIERlbGV0ZWRNZXNzYWdlQmF0Y2gge1xuICAvKipcbiAgICogSUQgb2YgdGhlIE1lc3NhZ2UgQmF0Y2guXG4gICAqL1xuICBpZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBEZWxldGVkIG9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgTWVzc2FnZSBCYXRjaGVzLCB0aGlzIGlzIGFsd2F5cyBgXCJtZXNzYWdlX2JhdGNoX2RlbGV0ZWRcImAuXG4gICAqL1xuICB0eXBlOiAnbWVzc2FnZV9iYXRjaF9kZWxldGVkJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQmF0Y2gge1xuICAvKipcbiAgICogVW5pcXVlIG9iamVjdCBpZGVudGlmaWVyLlxuICAgKlxuICAgKiBUaGUgZm9ybWF0IGFuZCBsZW5ndGggb2YgSURzIG1heSBjaGFuZ2Ugb3ZlciB0aW1lLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogUkZDIDMzMzkgZGF0ZXRpbWUgc3RyaW5nIHJlcHJlc2VudGluZyB0aGUgdGltZSBhdCB3aGljaCB0aGUgTWVzc2FnZSBCYXRjaCB3YXNcbiAgICogYXJjaGl2ZWQgYW5kIGl0cyByZXN1bHRzIGJlY2FtZSB1bmF2YWlsYWJsZS5cbiAgICovXG4gIGFyY2hpdmVkX2F0OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIGNhbmNlbGxhdGlvbiB3YXNcbiAgICogaW5pdGlhdGVkIGZvciB0aGUgTWVzc2FnZSBCYXRjaC4gU3BlY2lmaWVkIG9ubHkgaWYgY2FuY2VsbGF0aW9uIHdhcyBpbml0aWF0ZWQuXG4gICAqL1xuICBjYW5jZWxfaW5pdGlhdGVkX2F0OiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIHRoZSBNZXNzYWdlIEJhdGNoIHdhc1xuICAgKiBjcmVhdGVkLlxuICAgKi9cbiAgY3JlYXRlZF9hdDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBSRkMgMzMzOSBkYXRldGltZSBzdHJpbmcgcmVwcmVzZW50aW5nIHRoZSB0aW1lIGF0IHdoaWNoIHByb2Nlc3NpbmcgZm9yIHRoZVxuICAgKiBNZXNzYWdlIEJhdGNoIGVuZGVkLiBTcGVjaWZpZWQgb25seSBvbmNlIHByb2Nlc3NpbmcgZW5kcy5cbiAgICpcbiAgICogUHJvY2Vzc2luZyBlbmRzIHdoZW4gZXZlcnkgcmVxdWVzdCBpbiBhIE1lc3NhZ2UgQmF0Y2ggaGFzIGVpdGhlciBzdWNjZWVkZWQsXG4gICAqIGVycm9yZWQsIGNhbmNlbGVkLCBvciBleHBpcmVkLlxuICAgKi9cbiAgZW5kZWRfYXQ6IHN0cmluZyB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggdGhlIE1lc3NhZ2UgQmF0Y2ggd2lsbFxuICAgKiBleHBpcmUgYW5kIGVuZCBwcm9jZXNzaW5nLCB3aGljaCBpcyAyNCBob3VycyBhZnRlciBjcmVhdGlvbi5cbiAgICovXG4gIGV4cGlyZXNfYXQ6IHN0cmluZztcblxuICAvKipcbiAgICogUHJvY2Vzc2luZyBzdGF0dXMgb2YgdGhlIE1lc3NhZ2UgQmF0Y2guXG4gICAqL1xuICBwcm9jZXNzaW5nX3N0YXR1czogJ2luX3Byb2dyZXNzJyB8ICdjYW5jZWxpbmcnIHwgJ2VuZGVkJztcblxuICAvKipcbiAgICogVGFsbGllcyByZXF1ZXN0cyB3aXRoaW4gdGhlIE1lc3NhZ2UgQmF0Y2gsIGNhdGVnb3JpemVkIGJ5IHRoZWlyIHN0YXR1cy5cbiAgICpcbiAgICogUmVxdWVzdHMgc3RhcnQgYXMgYHByb2Nlc3NpbmdgIGFuZCBtb3ZlIHRvIG9uZSBvZiB0aGUgb3RoZXIgc3RhdHVzZXMgb25seSBvbmNlXG4gICAqIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBiYXRjaCBlbmRzLiBUaGUgc3VtIG9mIGFsbCB2YWx1ZXMgYWx3YXlzIG1hdGNoZXMgdGhlXG4gICAqIHRvdGFsIG51bWJlciBvZiByZXF1ZXN0cyBpbiB0aGUgYmF0Y2guXG4gICAqL1xuICByZXF1ZXN0X2NvdW50czogTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cztcblxuICAvKipcbiAgICogVVJMIHRvIGEgYC5qc29ubGAgZmlsZSBjb250YWluaW5nIHRoZSByZXN1bHRzIG9mIHRoZSBNZXNzYWdlIEJhdGNoIHJlcXVlc3RzLlxuICAgKiBTcGVjaWZpZWQgb25seSBvbmNlIHByb2Nlc3NpbmcgZW5kcy5cbiAgICpcbiAgICogUmVzdWx0cyBpbiB0aGUgZmlsZSBhcmUgbm90IGd1YXJhbnRlZWQgdG8gYmUgaW4gdGhlIHNhbWUgb3JkZXIgYXMgcmVxdWVzdHMuIFVzZVxuICAgKiB0aGUgYGN1c3RvbV9pZGAgZmllbGQgdG8gbWF0Y2ggcmVzdWx0cyB0byByZXF1ZXN0cy5cbiAgICovXG4gIHJlc3VsdHNfdXJsOiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBPYmplY3QgdHlwZS5cbiAgICpcbiAgICogRm9yIE1lc3NhZ2UgQmF0Y2hlcywgdGhpcyBpcyBhbHdheXMgYFwibWVzc2FnZV9iYXRjaFwiYC5cbiAgICovXG4gIHR5cGU6ICdtZXNzYWdlX2JhdGNoJztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQmF0Y2hDYW5jZWxlZFJlc3VsdCB7XG4gIHR5cGU6ICdjYW5jZWxlZCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCB7XG4gIGVycm9yOiBTaGFyZWQuRXJyb3JSZXNwb25zZTtcblxuICB0eXBlOiAnZXJyb3JlZCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCB7XG4gIHR5cGU6ICdleHBpcmVkJztcbn1cblxuLyoqXG4gKiBUaGlzIGlzIGEgc2luZ2xlIGxpbmUgaW4gdGhlIHJlc3BvbnNlIGAuanNvbmxgIGZpbGUgYW5kIGRvZXMgbm90IHJlcHJlc2VudCB0aGVcbiAqIHJlc3BvbnNlIGFzIGEgd2hvbGUuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlIHtcbiAgLyoqXG4gICAqIERldmVsb3Blci1wcm92aWRlZCBJRCBjcmVhdGVkIGZvciBlYWNoIHJlcXVlc3QgaW4gYSBNZXNzYWdlIEJhdGNoLiBVc2VmdWwgZm9yXG4gICAqIG1hdGNoaW5nIHJlc3VsdHMgdG8gcmVxdWVzdHMsIGFzIHJlc3VsdHMgbWF5IGJlIGdpdmVuIG91dCBvZiByZXF1ZXN0IG9yZGVyLlxuICAgKlxuICAgKiBNdXN0IGJlIHVuaXF1ZSBmb3IgZWFjaCByZXF1ZXN0IHdpdGhpbiB0aGUgTWVzc2FnZSBCYXRjaC5cbiAgICovXG4gIGN1c3RvbV9pZDogc3RyaW5nO1xuXG4gIC8qKlxuICAgKiBQcm9jZXNzaW5nIHJlc3VsdCBmb3IgdGhpcyByZXF1ZXN0LlxuICAgKlxuICAgKiBDb250YWlucyBhIE1lc3NhZ2Ugb3V0cHV0IGlmIHByb2Nlc3Npbmcgd2FzIHN1Y2Nlc3NmdWwsIGFuIGVycm9yIHJlc3BvbnNlIGlmXG4gICAqIHByb2Nlc3NpbmcgZmFpbGVkLCBvciB0aGUgcmVhc29uIHdoeSBwcm9jZXNzaW5nIHdhcyBub3QgYXR0ZW1wdGVkLCBzdWNoIGFzXG4gICAqIGNhbmNlbGxhdGlvbiBvciBleHBpcmF0aW9uLlxuICAgKi9cbiAgcmVzdWx0OiBNZXNzYWdlQmF0Y2hSZXN1bHQ7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyB7XG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIE1lc3NhZ2UgQmF0Y2ggdGhhdCBoYXZlIGJlZW4gY2FuY2VsZWQuXG4gICAqXG4gICAqIFRoaXMgaXMgemVybyB1bnRpbCBwcm9jZXNzaW5nIG9mIHRoZSBlbnRpcmUgTWVzc2FnZSBCYXRjaCBoYXMgZW5kZWQuXG4gICAqL1xuICBjYW5jZWxlZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIE1lc3NhZ2UgQmF0Y2ggdGhhdCBlbmNvdW50ZXJlZCBhbiBlcnJvci5cbiAgICpcbiAgICogVGhpcyBpcyB6ZXJvIHVudGlsIHByb2Nlc3Npbmcgb2YgdGhlIGVudGlyZSBNZXNzYWdlIEJhdGNoIGhhcyBlbmRlZC5cbiAgICovXG4gIGVycm9yZWQ6IG51bWJlcjtcblxuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgaGF2ZSBleHBpcmVkLlxuICAgKlxuICAgKiBUaGlzIGlzIHplcm8gdW50aWwgcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIE1lc3NhZ2UgQmF0Y2ggaGFzIGVuZGVkLlxuICAgKi9cbiAgZXhwaXJlZDogbnVtYmVyO1xuXG4gIC8qKlxuICAgKiBOdW1iZXIgb2YgcmVxdWVzdHMgaW4gdGhlIE1lc3NhZ2UgQmF0Y2ggdGhhdCBhcmUgcHJvY2Vzc2luZy5cbiAgICovXG4gIHByb2Nlc3Npbmc6IG51bWJlcjtcblxuICAvKipcbiAgICogTnVtYmVyIG9mIHJlcXVlc3RzIGluIHRoZSBNZXNzYWdlIEJhdGNoIHRoYXQgaGF2ZSBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5LlxuICAgKlxuICAgKiBUaGlzIGlzIHplcm8gdW50aWwgcHJvY2Vzc2luZyBvZiB0aGUgZW50aXJlIE1lc3NhZ2UgQmF0Y2ggaGFzIGVuZGVkLlxuICAgKi9cbiAgc3VjY2VlZGVkOiBudW1iZXI7XG59XG5cbi8qKlxuICogUHJvY2Vzc2luZyByZXN1bHQgZm9yIHRoaXMgcmVxdWVzdC5cbiAqXG4gKiBDb250YWlucyBhIE1lc3NhZ2Ugb3V0cHV0IGlmIHByb2Nlc3Npbmcgd2FzIHN1Y2Nlc3NmdWwsIGFuIGVycm9yIHJlc3BvbnNlIGlmXG4gKiBwcm9jZXNzaW5nIGZhaWxlZCwgb3IgdGhlIHJlYXNvbiB3aHkgcHJvY2Vzc2luZyB3YXMgbm90IGF0dGVtcHRlZCwgc3VjaCBhc1xuICogY2FuY2VsbGF0aW9uIG9yIGV4cGlyYXRpb24uXG4gKi9cbmV4cG9ydCB0eXBlIE1lc3NhZ2VCYXRjaFJlc3VsdCA9XG4gIHwgTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0XG4gIHwgTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdFxuICB8IE1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0XG4gIHwgTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdDtcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQge1xuICBtZXNzYWdlOiBNZXNzYWdlc0FQSS5NZXNzYWdlO1xuXG4gIHR5cGU6ICdzdWNjZWVkZWQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEJhdGNoQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIExpc3Qgb2YgcmVxdWVzdHMgZm9yIHByb21wdCBjb21wbGV0aW9uLiBFYWNoIGlzIGFuIGluZGl2aWR1YWwgcmVxdWVzdCB0byBjcmVhdGVcbiAgICogYSBNZXNzYWdlLlxuICAgKi9cbiAgcmVxdWVzdHM6IEFycmF5PEJhdGNoQ3JlYXRlUGFyYW1zLlJlcXVlc3Q+O1xufVxuXG5leHBvcnQgbmFtZXNwYWNlIEJhdGNoQ3JlYXRlUGFyYW1zIHtcbiAgZXhwb3J0IGludGVyZmFjZSBSZXF1ZXN0IHtcbiAgICAvKipcbiAgICAgKiBEZXZlbG9wZXItcHJvdmlkZWQgSUQgY3JlYXRlZCBmb3IgZWFjaCByZXF1ZXN0IGluIGEgTWVzc2FnZSBCYXRjaC4gVXNlZnVsIGZvclxuICAgICAqIG1hdGNoaW5nIHJlc3VsdHMgdG8gcmVxdWVzdHMsIGFzIHJlc3VsdHMgbWF5IGJlIGdpdmVuIG91dCBvZiByZXF1ZXN0IG9yZGVyLlxuICAgICAqXG4gICAgICogTXVzdCBiZSB1bmlxdWUgZm9yIGVhY2ggcmVxdWVzdCB3aXRoaW4gdGhlIE1lc3NhZ2UgQmF0Y2guXG4gICAgICovXG4gICAgY3VzdG9tX2lkOiBzdHJpbmc7XG5cbiAgICAvKipcbiAgICAgKiBNZXNzYWdlcyBBUEkgY3JlYXRpb24gcGFyYW1ldGVycyBmb3IgdGhlIGluZGl2aWR1YWwgcmVxdWVzdC5cbiAgICAgKlxuICAgICAqIFNlZSB0aGUgW01lc3NhZ2VzIEFQSSByZWZlcmVuY2VdKC9lbi9hcGkvbWVzc2FnZXMpIGZvciBmdWxsIGRvY3VtZW50YXRpb24gb25cbiAgICAgKiBhdmFpbGFibGUgcGFyYW1ldGVycy5cbiAgICAgKi9cbiAgICBwYXJhbXM6IE1lc3NhZ2VzQVBJLk1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmc7XG4gIH1cbn1cblxuZXhwb3J0IGludGVyZmFjZSBCYXRjaExpc3RQYXJhbXMgZXh0ZW5kcyBQYWdlUGFyYW1zIHt9XG5cbkJhdGNoZXMuTWVzc2FnZUJhdGNoZXNQYWdlID0gTWVzc2FnZUJhdGNoZXNQYWdlO1xuXG5leHBvcnQgZGVjbGFyZSBuYW1lc3BhY2UgQmF0Y2hlcyB7XG4gIGV4cG9ydCB7XG4gICAgdHlwZSBEZWxldGVkTWVzc2FnZUJhdGNoIGFzIERlbGV0ZWRNZXNzYWdlQmF0Y2gsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2ggYXMgTWVzc2FnZUJhdGNoLFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQgYXMgTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0IGFzIE1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0IGFzIE1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hJbmRpdmlkdWFsUmVzcG9uc2UgYXMgTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlLFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyBhcyBNZXNzYWdlQmF0Y2hSZXF1ZXN0Q291bnRzLFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoUmVzdWx0IGFzIE1lc3NhZ2VCYXRjaFJlc3VsdCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaFN1Y2NlZWRlZFJlc3VsdCBhcyBNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQsXG4gICAgTWVzc2FnZUJhdGNoZXNQYWdlIGFzIE1lc3NhZ2VCYXRjaGVzUGFnZSxcbiAgICB0eXBlIEJhdGNoQ3JlYXRlUGFyYW1zIGFzIEJhdGNoQ3JlYXRlUGFyYW1zLFxuICAgIHR5cGUgQmF0Y2hMaXN0UGFyYW1zIGFzIEJhdGNoTGlzdFBhcmFtcyxcbiAgfTtcbn1cbiIsICJpbXBvcnQgKiBhcyBDb3JlIGZyb20gXCIuLi9jb3JlLmpzXCI7XG5pbXBvcnQgeyBBbnRocm9waWNFcnJvciwgQVBJVXNlckFib3J0RXJyb3IgfSBmcm9tIFwiLi4vZXJyb3IuanNcIjtcbmltcG9ydCB7XG4gIHR5cGUgQ29udGVudEJsb2NrLFxuICBNZXNzYWdlcyxcbiAgdHlwZSBNZXNzYWdlLFxuICB0eXBlIE1lc3NhZ2VTdHJlYW1FdmVudCxcbiAgdHlwZSBNZXNzYWdlUGFyYW0sXG4gIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSxcbiAgdHlwZSBUZXh0QmxvY2ssXG4gIHR5cGUgVGV4dENpdGF0aW9uLFxufSBmcm9tIFwiLi4vcmVzb3VyY2VzL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgeyB0eXBlIFJlYWRhYmxlU3RyZWFtLCB0eXBlIFJlc3BvbnNlIH0gZnJvbSBcIi4uL19zaGltcy9pbmRleC5qc1wiO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSBcIi4uL3N0cmVhbWluZy5qc1wiO1xuaW1wb3J0IHsgcGFydGlhbFBhcnNlIH0gZnJvbSBcIi4uL192ZW5kb3IvcGFydGlhbC1qc29uLXBhcnNlci9wYXJzZXIuanNcIjtcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlU3RyZWFtRXZlbnRzIHtcbiAgY29ubmVjdDogKCkgPT4gdm9pZDtcbiAgc3RyZWFtRXZlbnQ6IChldmVudDogTWVzc2FnZVN0cmVhbUV2ZW50LCBzbmFwc2hvdDogTWVzc2FnZSkgPT4gdm9pZDtcbiAgdGV4dDogKHRleHREZWx0YTogc3RyaW5nLCB0ZXh0U25hcHNob3Q6IHN0cmluZykgPT4gdm9pZDtcbiAgY2l0YXRpb246IChjaXRhdGlvbjogVGV4dENpdGF0aW9uLCBjaXRhdGlvbnNTbmFwc2hvdDogVGV4dENpdGF0aW9uW10pID0+IHZvaWQ7XG4gIGlucHV0SnNvbjogKHBhcnRpYWxKc29uOiBzdHJpbmcsIGpzb25TbmFwc2hvdDogdW5rbm93bikgPT4gdm9pZDtcbiAgbWVzc2FnZTogKG1lc3NhZ2U6IE1lc3NhZ2UpID0+IHZvaWQ7XG4gIGNvbnRlbnRCbG9jazogKGNvbnRlbnQ6IENvbnRlbnRCbG9jaykgPT4gdm9pZDtcbiAgZmluYWxNZXNzYWdlOiAobWVzc2FnZTogTWVzc2FnZSkgPT4gdm9pZDtcbiAgZXJyb3I6IChlcnJvcjogQW50aHJvcGljRXJyb3IpID0+IHZvaWQ7XG4gIGFib3J0OiAoZXJyb3I6IEFQSVVzZXJBYm9ydEVycm9yKSA9PiB2b2lkO1xuICBlbmQ6ICgpID0+IHZvaWQ7XG59XG5cbnR5cGUgTWVzc2FnZVN0cmVhbUV2ZW50TGlzdGVuZXJzPEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4gPSB7XG4gIGxpc3RlbmVyOiBNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XTtcbiAgb25jZT86IGJvb2xlYW47XG59W107XG5cbmNvbnN0IEpTT05fQlVGX1BST1BFUlRZID0gJ19fanNvbl9idWYnO1xuXG5leHBvcnQgY2xhc3MgTWVzc2FnZVN0cmVhbSBpbXBsZW1lbnRzIEFzeW5jSXRlcmFibGU8TWVzc2FnZVN0cmVhbUV2ZW50PiB7XG4gIG1lc3NhZ2VzOiBNZXNzYWdlUGFyYW1bXSA9IFtdO1xuICByZWNlaXZlZE1lc3NhZ2VzOiBNZXNzYWdlW10gPSBbXTtcbiAgI2N1cnJlbnRNZXNzYWdlU25hcHNob3Q6IE1lc3NhZ2UgfCB1bmRlZmluZWQ7XG5cbiAgY29udHJvbGxlcjogQWJvcnRDb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpO1xuXG4gICNjb25uZWN0ZWRQcm9taXNlOiBQcm9taXNlPFJlc3BvbnNlIHwgbnVsbD47XG4gICNyZXNvbHZlQ29ubmVjdGVkUHJvbWlzZTogKHJlc3BvbnNlOiBSZXNwb25zZSB8IG51bGwpID0+IHZvaWQgPSAoKSA9PiB7fTtcbiAgI3JlamVjdENvbm5lY3RlZFByb21pc2U6IChlcnJvcjogQW50aHJvcGljRXJyb3IpID0+IHZvaWQgPSAoKSA9PiB7fTtcblxuICAjZW5kUHJvbWlzZTogUHJvbWlzZTx2b2lkPjtcbiAgI3Jlc29sdmVFbmRQcm9taXNlOiAoKSA9PiB2b2lkID0gKCkgPT4ge307XG4gICNyZWplY3RFbmRQcm9taXNlOiAoZXJyb3I6IEFudGhyb3BpY0Vycm9yKSA9PiB2b2lkID0gKCkgPT4ge307XG5cbiAgI2xpc3RlbmVyczogeyBbRXZlbnQgaW4ga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50c10/OiBNZXNzYWdlU3RyZWFtRXZlbnRMaXN0ZW5lcnM8RXZlbnQ+IH0gPSB7fTtcblxuICAjZW5kZWQgPSBmYWxzZTtcbiAgI2Vycm9yZWQgPSBmYWxzZTtcbiAgI2Fib3J0ZWQgPSBmYWxzZTtcbiAgI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgPSBmYWxzZTtcbiAgI3Jlc3BvbnNlOiBSZXNwb25zZSB8IG51bGwgfCB1bmRlZmluZWQ7XG4gICNyZXF1ZXN0X2lkOiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHRoaXMuI2Nvbm5lY3RlZFByb21pc2UgPSBuZXcgUHJvbWlzZTxSZXNwb25zZSB8IG51bGw+KChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuI3Jlc29sdmVDb25uZWN0ZWRQcm9taXNlID0gcmVzb2x2ZTtcbiAgICAgIHRoaXMuI3JlamVjdENvbm5lY3RlZFByb21pc2UgPSByZWplY3Q7XG4gICAgfSk7XG5cbiAgICB0aGlzLiNlbmRQcm9taXNlID0gbmV3IFByb21pc2U8dm9pZD4oKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgdGhpcy4jcmVzb2x2ZUVuZFByb21pc2UgPSByZXNvbHZlO1xuICAgICAgdGhpcy4jcmVqZWN0RW5kUHJvbWlzZSA9IHJlamVjdDtcbiAgICB9KTtcblxuICAgIC8vIERvbid0IGxldCB0aGVzZSBwcm9taXNlcyBjYXVzZSB1bmhhbmRsZWQgcmVqZWN0aW9uIGVycm9ycy5cbiAgICAvLyB3ZSB3aWxsIG1hbnVhbGx5IGNhdXNlIGFuIHVuaGFuZGxlZCByZWplY3Rpb24gZXJyb3IgbGF0ZXJcbiAgICAvLyBpZiB0aGUgdXNlciBoYXNuJ3QgcmVnaXN0ZXJlZCBhbnkgZXJyb3IgbGlzdGVuZXIgb3IgY2FsbGVkXG4gICAgLy8gYW55IHByb21pc2UtcmV0dXJuaW5nIG1ldGhvZC5cbiAgICB0aGlzLiNjb25uZWN0ZWRQcm9taXNlLmNhdGNoKCgpID0+IHt9KTtcbiAgICB0aGlzLiNlbmRQcm9taXNlLmNhdGNoKCgpID0+IHt9KTtcbiAgfVxuXG4gIGdldCByZXNwb25zZSgpOiBSZXNwb25zZSB8IG51bGwgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLiNyZXNwb25zZTtcbiAgfVxuXG4gIGdldCByZXF1ZXN0X2lkKCk6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLiNyZXF1ZXN0X2lkO1xuICB9XG5cbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIGBNZXNzYWdlU3RyZWFtYCBkYXRhLCB0aGUgcmF3IGBSZXNwb25zZWAgaW5zdGFuY2UgYW5kIHRoZSBJRCBvZiB0aGUgcmVxdWVzdCxcbiAgICogcmV0dXJuZWQgdmllIHRoZSBgcmVxdWVzdC1pZGAgaGVhZGVyIHdoaWNoIGlzIHVzZWZ1bCBmb3IgZGVidWdnaW5nIHJlcXVlc3RzIGFuZCByZXNwb3J0aW5nXG4gICAqIGlzc3VlcyB0byBBbnRocm9waWMuXG4gICAqXG4gICAqIFRoaXMgaXMgdGhlIHNhbWUgYXMgdGhlIGBBUElQcm9taXNlLndpdGhSZXNwb25zZSgpYCBtZXRob2QuXG4gICAqXG4gICAqIFRoaXMgbWV0aG9kIHdpbGwgcmFpc2UgYW4gZXJyb3IgaWYgeW91IGNyZWF0ZWQgdGhlIHN0cmVhbSB1c2luZyBgTWVzc2FnZVN0cmVhbS5mcm9tUmVhZGFibGVTdHJlYW1gXG4gICAqIGFzIG5vIGBSZXNwb25zZWAgaXMgYXZhaWxhYmxlLlxuICAgKi9cbiAgYXN5bmMgd2l0aFJlc3BvbnNlKCk6IFByb21pc2U8e1xuICAgIGRhdGE6IE1lc3NhZ2VTdHJlYW07XG4gICAgcmVzcG9uc2U6IFJlc3BvbnNlO1xuICAgIHJlcXVlc3RfaWQ6IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG4gIH0+IHtcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IHRoaXMuI2Nvbm5lY3RlZFByb21pc2U7XG4gICAgaWYgKCFyZXNwb25zZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdDb3VsZCBub3QgcmVzb2x2ZSBhIGBSZXNwb25zZWAgb2JqZWN0Jyk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHtcbiAgICAgIGRhdGE6IHRoaXMsXG4gICAgICByZXNwb25zZSxcbiAgICAgIHJlcXVlc3RfaWQ6IHJlc3BvbnNlLmhlYWRlcnMuZ2V0KCdyZXF1ZXN0LWlkJyksXG4gICAgfTtcbiAgfVxuXG4gIC8qKlxuICAgKiBJbnRlbmRlZCBmb3IgdXNlIG9uIHRoZSBmcm9udGVuZCwgY29uc3VtaW5nIGEgc3RyZWFtIHByb2R1Y2VkIHdpdGhcbiAgICogYC50b1JlYWRhYmxlU3RyZWFtKClgIG9uIHRoZSBiYWNrZW5kLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgbWVzc2FnZXMgc2VudCB0byB0aGUgbW9kZWwgZG8gbm90IGFwcGVhciBpbiBgLm9uKCdtZXNzYWdlJylgXG4gICAqIGluIHRoaXMgY29udGV4dC5cbiAgICovXG4gIHN0YXRpYyBmcm9tUmVhZGFibGVTdHJlYW0oc3RyZWFtOiBSZWFkYWJsZVN0cmVhbSk6IE1lc3NhZ2VTdHJlYW0ge1xuICAgIGNvbnN0IHJ1bm5lciA9IG5ldyBNZXNzYWdlU3RyZWFtKCk7XG4gICAgcnVubmVyLl9ydW4oKCkgPT4gcnVubmVyLl9mcm9tUmVhZGFibGVTdHJlYW0oc3RyZWFtKSk7XG4gICAgcmV0dXJuIHJ1bm5lcjtcbiAgfVxuXG4gIHN0YXRpYyBjcmVhdGVNZXNzYWdlKFxuICAgIG1lc3NhZ2VzOiBNZXNzYWdlcyxcbiAgICBwYXJhbXM6IE1lc3NhZ2VDcmVhdGVQYXJhbXNCYXNlLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBNZXNzYWdlU3RyZWFtIHtcbiAgICBjb25zdCBydW5uZXIgPSBuZXcgTWVzc2FnZVN0cmVhbSgpO1xuICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBwYXJhbXMubWVzc2FnZXMpIHtcbiAgICAgIHJ1bm5lci5fYWRkTWVzc2FnZVBhcmFtKG1lc3NhZ2UpO1xuICAgIH1cbiAgICBydW5uZXIuX3J1bigoKSA9PlxuICAgICAgcnVubmVyLl9jcmVhdGVNZXNzYWdlKFxuICAgICAgICBtZXNzYWdlcyxcbiAgICAgICAgeyAuLi5wYXJhbXMsIHN0cmVhbTogdHJ1ZSB9LFxuICAgICAgICB7IC4uLm9wdGlvbnMsIGhlYWRlcnM6IHsgLi4ub3B0aW9ucz8uaGVhZGVycywgJ1gtU3RhaW5sZXNzLUhlbHBlci1NZXRob2QnOiAnc3RyZWFtJyB9IH0sXG4gICAgICApLFxuICAgICk7XG4gICAgcmV0dXJuIHJ1bm5lcjtcbiAgfVxuXG4gIHByb3RlY3RlZCBfcnVuKGV4ZWN1dG9yOiAoKSA9PiBQcm9taXNlPGFueT4pIHtcbiAgICBleGVjdXRvcigpLnRoZW4oKCkgPT4ge1xuICAgICAgdGhpcy5fZW1pdEZpbmFsKCk7XG4gICAgICB0aGlzLl9lbWl0KCdlbmQnKTtcbiAgICB9LCB0aGlzLiNoYW5kbGVFcnJvcik7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2FkZE1lc3NhZ2VQYXJhbShtZXNzYWdlOiBNZXNzYWdlUGFyYW0pIHtcbiAgICB0aGlzLm1lc3NhZ2VzLnB1c2gobWVzc2FnZSk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2FkZE1lc3NhZ2UobWVzc2FnZTogTWVzc2FnZSwgZW1pdCA9IHRydWUpIHtcbiAgICB0aGlzLnJlY2VpdmVkTWVzc2FnZXMucHVzaChtZXNzYWdlKTtcbiAgICBpZiAoZW1pdCkge1xuICAgICAgdGhpcy5fZW1pdCgnbWVzc2FnZScsIG1lc3NhZ2UpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBhc3luYyBfY3JlYXRlTWVzc2FnZShcbiAgICBtZXNzYWdlczogTWVzc2FnZXMsXG4gICAgcGFyYW1zOiBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBQcm9taXNlPHZvaWQ+IHtcbiAgICBjb25zdCBzaWduYWwgPSBvcHRpb25zPy5zaWduYWw7XG4gICAgaWYgKHNpZ25hbCkge1xuICAgICAgaWYgKHNpZ25hbC5hYm9ydGVkKSB0aGlzLmNvbnRyb2xsZXIuYWJvcnQoKTtcbiAgICAgIHNpZ25hbC5hZGRFdmVudExpc3RlbmVyKCdhYm9ydCcsICgpID0+IHRoaXMuY29udHJvbGxlci5hYm9ydCgpKTtcbiAgICB9XG4gICAgdGhpcy4jYmVnaW5SZXF1ZXN0KCk7XG4gICAgY29uc3QgeyByZXNwb25zZSwgZGF0YTogc3RyZWFtIH0gPSBhd2FpdCBtZXNzYWdlc1xuICAgICAgLmNyZWF0ZSh7IC4uLnBhcmFtcywgc3RyZWFtOiB0cnVlIH0sIHsgLi4ub3B0aW9ucywgc2lnbmFsOiB0aGlzLmNvbnRyb2xsZXIuc2lnbmFsIH0pXG4gICAgICAud2l0aFJlc3BvbnNlKCk7XG4gICAgdGhpcy5fY29ubmVjdGVkKHJlc3BvbnNlKTtcbiAgICBmb3IgYXdhaXQgKGNvbnN0IGV2ZW50IG9mIHN0cmVhbSkge1xuICAgICAgdGhpcy4jYWRkU3RyZWFtRXZlbnQoZXZlbnQpO1xuICAgIH1cbiAgICBpZiAoc3RyZWFtLmNvbnRyb2xsZXIuc2lnbmFsPy5hYm9ydGVkKSB7XG4gICAgICB0aHJvdyBuZXcgQVBJVXNlckFib3J0RXJyb3IoKTtcbiAgICB9XG4gICAgdGhpcy4jZW5kUmVxdWVzdCgpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9jb25uZWN0ZWQocmVzcG9uc2U6IFJlc3BvbnNlIHwgbnVsbCkge1xuICAgIGlmICh0aGlzLmVuZGVkKSByZXR1cm47XG4gICAgdGhpcy4jcmVzcG9uc2UgPSByZXNwb25zZTtcbiAgICB0aGlzLiNyZXF1ZXN0X2lkID0gcmVzcG9uc2U/LmhlYWRlcnMuZ2V0KCdyZXF1ZXN0LWlkJyk7XG4gICAgdGhpcy4jcmVzb2x2ZUNvbm5lY3RlZFByb21pc2UocmVzcG9uc2UpO1xuICAgIHRoaXMuX2VtaXQoJ2Nvbm5lY3QnKTtcbiAgfVxuXG4gIGdldCBlbmRlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4jZW5kZWQ7XG4gIH1cblxuICBnZXQgZXJyb3JlZCgpOiBib29sZWFuIHtcbiAgICByZXR1cm4gdGhpcy4jZXJyb3JlZDtcbiAgfVxuXG4gIGdldCBhYm9ydGVkKCk6IGJvb2xlYW4ge1xuICAgIHJldHVybiB0aGlzLiNhYm9ydGVkO1xuICB9XG5cbiAgYWJvcnQoKSB7XG4gICAgdGhpcy5jb250cm9sbGVyLmFib3J0KCk7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyB0aGUgbGlzdGVuZXIgZnVuY3Rpb24gdG8gdGhlIGVuZCBvZiB0aGUgbGlzdGVuZXJzIGFycmF5IGZvciB0aGUgZXZlbnQuXG4gICAqIE5vIGNoZWNrcyBhcmUgbWFkZSB0byBzZWUgaWYgdGhlIGxpc3RlbmVyIGhhcyBhbHJlYWR5IGJlZW4gYWRkZWQuIE11bHRpcGxlIGNhbGxzIHBhc3NpbmdcbiAgICogdGhlIHNhbWUgY29tYmluYXRpb24gb2YgZXZlbnQgYW5kIGxpc3RlbmVyIHdpbGwgcmVzdWx0IGluIHRoZSBsaXN0ZW5lciBiZWluZyBhZGRlZCwgYW5kXG4gICAqIGNhbGxlZCwgbXVsdGlwbGUgdGltZXMuXG4gICAqIEByZXR1cm5zIHRoaXMgTWVzc2FnZVN0cmVhbSwgc28gdGhhdCBjYWxscyBjYW4gYmUgY2hhaW5lZFxuICAgKi9cbiAgb248RXZlbnQgZXh0ZW5kcyBrZXlvZiBNZXNzYWdlU3RyZWFtRXZlbnRzPihldmVudDogRXZlbnQsIGxpc3RlbmVyOiBNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XSk6IHRoaXMge1xuICAgIGNvbnN0IGxpc3RlbmVyczogTWVzc2FnZVN0cmVhbUV2ZW50TGlzdGVuZXJzPEV2ZW50PiA9XG4gICAgICB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdIHx8ICh0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdID0gW10pO1xuICAgIGxpc3RlbmVycy5wdXNoKHsgbGlzdGVuZXIgfSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogUmVtb3ZlcyB0aGUgc3BlY2lmaWVkIGxpc3RlbmVyIGZyb20gdGhlIGxpc3RlbmVyIGFycmF5IGZvciB0aGUgZXZlbnQuXG4gICAqIG9mZigpIHdpbGwgcmVtb3ZlLCBhdCBtb3N0LCBvbmUgaW5zdGFuY2Ugb2YgYSBsaXN0ZW5lciBmcm9tIHRoZSBsaXN0ZW5lciBhcnJheS4gSWYgYW55IHNpbmdsZVxuICAgKiBsaXN0ZW5lciBoYXMgYmVlbiBhZGRlZCBtdWx0aXBsZSB0aW1lcyB0byB0aGUgbGlzdGVuZXIgYXJyYXkgZm9yIHRoZSBzcGVjaWZpZWQgZXZlbnQsIHRoZW5cbiAgICogb2ZmKCkgbXVzdCBiZSBjYWxsZWQgbXVsdGlwbGUgdGltZXMgdG8gcmVtb3ZlIGVhY2ggaW5zdGFuY2UuXG4gICAqIEByZXR1cm5zIHRoaXMgTWVzc2FnZVN0cmVhbSwgc28gdGhhdCBjYWxscyBjYW4gYmUgY2hhaW5lZFxuICAgKi9cbiAgb2ZmPEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oZXZlbnQ6IEV2ZW50LCBsaXN0ZW5lcjogTWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0pOiB0aGlzIHtcbiAgICBjb25zdCBsaXN0ZW5lcnMgPSB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdO1xuICAgIGlmICghbGlzdGVuZXJzKSByZXR1cm4gdGhpcztcbiAgICBjb25zdCBpbmRleCA9IGxpc3RlbmVycy5maW5kSW5kZXgoKGwpID0+IGwubGlzdGVuZXIgPT09IGxpc3RlbmVyKTtcbiAgICBpZiAoaW5kZXggPj0gMCkgbGlzdGVuZXJzLnNwbGljZShpbmRleCwgMSk7XG4gICAgcmV0dXJuIHRoaXM7XG4gIH1cblxuICAvKipcbiAgICogQWRkcyBhIG9uZS10aW1lIGxpc3RlbmVyIGZ1bmN0aW9uIGZvciB0aGUgZXZlbnQuIFRoZSBuZXh0IHRpbWUgdGhlIGV2ZW50IGlzIHRyaWdnZXJlZCxcbiAgICogdGhpcyBsaXN0ZW5lciBpcyByZW1vdmVkIGFuZCB0aGVuIGludm9rZWQuXG4gICAqIEByZXR1cm5zIHRoaXMgTWVzc2FnZVN0cmVhbSwgc28gdGhhdCBjYWxscyBjYW4gYmUgY2hhaW5lZFxuICAgKi9cbiAgb25jZTxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+KGV2ZW50OiBFdmVudCwgbGlzdGVuZXI6IE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdKTogdGhpcyB7XG4gICAgY29uc3QgbGlzdGVuZXJzOiBNZXNzYWdlU3RyZWFtRXZlbnRMaXN0ZW5lcnM8RXZlbnQ+ID1cbiAgICAgIHRoaXMuI2xpc3RlbmVyc1tldmVudF0gfHwgKHRoaXMuI2xpc3RlbmVyc1tldmVudF0gPSBbXSk7XG4gICAgbGlzdGVuZXJzLnB1c2goeyBsaXN0ZW5lciwgb25jZTogdHJ1ZSB9KTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIC8qKlxuICAgKiBUaGlzIGlzIHNpbWlsYXIgdG8gYC5vbmNlKClgLCBidXQgcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB0aGUgbmV4dCB0aW1lXG4gICAqIHRoZSBldmVudCBpcyB0cmlnZ2VyZWQsIGluc3RlYWQgb2YgY2FsbGluZyBhIGxpc3RlbmVyIGNhbGxiYWNrLlxuICAgKiBAcmV0dXJucyBhIFByb21pc2UgdGhhdCByZXNvbHZlcyB0aGUgbmV4dCB0aW1lIGdpdmVuIGV2ZW50IGlzIHRyaWdnZXJlZCxcbiAgICogb3IgcmVqZWN0cyBpZiBhbiBlcnJvciBpcyBlbWl0dGVkLiAgKElmIHlvdSByZXF1ZXN0IHRoZSAnZXJyb3InIGV2ZW50LFxuICAgKiByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIGVycm9yKS5cbiAgICpcbiAgICogRXhhbXBsZTpcbiAgICpcbiAgICogICBjb25zdCBtZXNzYWdlID0gYXdhaXQgc3RyZWFtLmVtaXR0ZWQoJ21lc3NhZ2UnKSAvLyByZWplY3RzIGlmIHRoZSBzdHJlYW0gZXJyb3JzXG4gICAqL1xuICBlbWl0dGVkPEV2ZW50IGV4dGVuZHMga2V5b2YgTWVzc2FnZVN0cmVhbUV2ZW50cz4oXG4gICAgZXZlbnQ6IEV2ZW50LFxuICApOiBQcm9taXNlPFxuICAgIFBhcmFtZXRlcnM8TWVzc2FnZVN0cmVhbUV2ZW50c1tFdmVudF0+IGV4dGVuZHMgW2luZmVyIFBhcmFtXSA/IFBhcmFtXG4gICAgOiBQYXJhbWV0ZXJzPE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdPiBleHRlbmRzIFtdID8gdm9pZFxuICAgIDogUGFyYW1ldGVyczxNZXNzYWdlU3RyZWFtRXZlbnRzW0V2ZW50XT5cbiAgPiB7XG4gICAgcmV0dXJuIG5ldyBQcm9taXNlKChyZXNvbHZlLCByZWplY3QpID0+IHtcbiAgICAgIHRoaXMuI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgPSB0cnVlO1xuICAgICAgaWYgKGV2ZW50ICE9PSAnZXJyb3InKSB0aGlzLm9uY2UoJ2Vycm9yJywgcmVqZWN0KTtcbiAgICAgIHRoaXMub25jZShldmVudCwgcmVzb2x2ZSBhcyBhbnkpO1xuICAgIH0pO1xuICB9XG5cbiAgYXN5bmMgZG9uZSgpOiBQcm9taXNlPHZvaWQ+IHtcbiAgICB0aGlzLiNjYXRjaGluZ1Byb21pc2VDcmVhdGVkID0gdHJ1ZTtcbiAgICBhd2FpdCB0aGlzLiNlbmRQcm9taXNlO1xuICB9XG5cbiAgZ2V0IGN1cnJlbnRNZXNzYWdlKCk6IE1lc3NhZ2UgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90O1xuICB9XG5cbiAgI2dldEZpbmFsTWVzc2FnZSgpOiBNZXNzYWdlIHtcbiAgICBpZiAodGhpcy5yZWNlaXZlZE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xuICAgICAgdGhyb3cgbmV3IEFudGhyb3BpY0Vycm9yKCdzdHJlYW0gZW5kZWQgd2l0aG91dCBwcm9kdWNpbmcgYSBNZXNzYWdlIHdpdGggcm9sZT1hc3Npc3RhbnQnKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMucmVjZWl2ZWRNZXNzYWdlcy5hdCgtMSkhO1xuICB9XG5cbiAgLyoqXG4gICAqIEByZXR1cm5zIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHdpdGggdGhlIHRoZSBmaW5hbCBhc3Npc3RhbnQgTWVzc2FnZSByZXNwb25zZSxcbiAgICogb3IgcmVqZWN0cyBpZiBhbiBlcnJvciBvY2N1cnJlZCBvciB0aGUgc3RyZWFtIGVuZGVkIHByZW1hdHVyZWx5IHdpdGhvdXQgcHJvZHVjaW5nIGEgTWVzc2FnZS5cbiAgICovXG4gIGFzeW5jIGZpbmFsTWVzc2FnZSgpOiBQcm9taXNlPE1lc3NhZ2U+IHtcbiAgICBhd2FpdCB0aGlzLmRvbmUoKTtcbiAgICByZXR1cm4gdGhpcy4jZ2V0RmluYWxNZXNzYWdlKCk7XG4gIH1cblxuICAjZ2V0RmluYWxUZXh0KCk6IHN0cmluZyB7XG4gICAgaWYgKHRoaXMucmVjZWl2ZWRNZXNzYWdlcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcignc3RyZWFtIGVuZGVkIHdpdGhvdXQgcHJvZHVjaW5nIGEgTWVzc2FnZSB3aXRoIHJvbGU9YXNzaXN0YW50Jyk7XG4gICAgfVxuICAgIGNvbnN0IHRleHRCbG9ja3MgPSB0aGlzLnJlY2VpdmVkTWVzc2FnZXNcbiAgICAgIC5hdCgtMSkhXG4gICAgICAuY29udGVudC5maWx0ZXIoKGJsb2NrKTogYmxvY2sgaXMgVGV4dEJsb2NrID0+IGJsb2NrLnR5cGUgPT09ICd0ZXh0JylcbiAgICAgIC5tYXAoKGJsb2NrKSA9PiBibG9jay50ZXh0KTtcbiAgICBpZiAodGV4dEJsb2Nrcy5sZW5ndGggPT09IDApIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcignc3RyZWFtIGVuZGVkIHdpdGhvdXQgcHJvZHVjaW5nIGEgY29udGVudCBibG9jayB3aXRoIHR5cGU9dGV4dCcpO1xuICAgIH1cbiAgICByZXR1cm4gdGV4dEJsb2Nrcy5qb2luKCcgJyk7XG4gIH1cblxuICAvKipcbiAgICogQHJldHVybnMgYSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgdGhlIGZpbmFsIGFzc2lzdGFudCBNZXNzYWdlJ3MgdGV4dCByZXNwb25zZSwgY29uY2F0ZW5hdGVkXG4gICAqIHRvZ2V0aGVyIGlmIHRoZXJlIGFyZSBtb3JlIHRoYW4gb25lIHRleHQgYmxvY2tzLlxuICAgKiBSZWplY3RzIGlmIGFuIGVycm9yIG9jY3VycmVkIG9yIHRoZSBzdHJlYW0gZW5kZWQgcHJlbWF0dXJlbHkgd2l0aG91dCBwcm9kdWNpbmcgYSBNZXNzYWdlLlxuICAgKi9cbiAgYXN5bmMgZmluYWxUZXh0KCk6IFByb21pc2U8c3RyaW5nPiB7XG4gICAgYXdhaXQgdGhpcy5kb25lKCk7XG4gICAgcmV0dXJuIHRoaXMuI2dldEZpbmFsVGV4dCgpO1xuICB9XG5cbiAgI2hhbmRsZUVycm9yID0gKGVycm9yOiB1bmtub3duKSA9PiB7XG4gICAgdGhpcy4jZXJyb3JlZCA9IHRydWU7XG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IgJiYgZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XG4gICAgICBlcnJvciA9IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgIH1cbiAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBBUElVc2VyQWJvcnRFcnJvcikge1xuICAgICAgdGhpcy4jYWJvcnRlZCA9IHRydWU7XG4gICAgICByZXR1cm4gdGhpcy5fZW1pdCgnYWJvcnQnLCBlcnJvcik7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEFudGhyb3BpY0Vycm9yKSB7XG4gICAgICByZXR1cm4gdGhpcy5fZW1pdCgnZXJyb3InLCBlcnJvcik7XG4gICAgfVxuICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIEVycm9yKSB7XG4gICAgICBjb25zdCBhbnRocm9waWNFcnJvcjogQW50aHJvcGljRXJyb3IgPSBuZXcgQW50aHJvcGljRXJyb3IoZXJyb3IubWVzc2FnZSk7XG4gICAgICAvLyBAdHMtaWdub3JlXG4gICAgICBhbnRocm9waWNFcnJvci5jYXVzZSA9IGVycm9yO1xuICAgICAgcmV0dXJuIHRoaXMuX2VtaXQoJ2Vycm9yJywgYW50aHJvcGljRXJyb3IpO1xuICAgIH1cbiAgICByZXR1cm4gdGhpcy5fZW1pdCgnZXJyb3InLCBuZXcgQW50aHJvcGljRXJyb3IoU3RyaW5nKGVycm9yKSkpO1xuICB9O1xuXG4gIHByb3RlY3RlZCBfZW1pdDxFdmVudCBleHRlbmRzIGtleW9mIE1lc3NhZ2VTdHJlYW1FdmVudHM+KFxuICAgIGV2ZW50OiBFdmVudCxcbiAgICAuLi5hcmdzOiBQYXJhbWV0ZXJzPE1lc3NhZ2VTdHJlYW1FdmVudHNbRXZlbnRdPlxuICApIHtcbiAgICAvLyBtYWtlIHN1cmUgd2UgZG9uJ3QgZW1pdCBhbnkgTWVzc2FnZVN0cmVhbUV2ZW50cyBhZnRlciBlbmRcbiAgICBpZiAodGhpcy4jZW5kZWQpIHJldHVybjtcblxuICAgIGlmIChldmVudCA9PT0gJ2VuZCcpIHtcbiAgICAgIHRoaXMuI2VuZGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuI3Jlc29sdmVFbmRQcm9taXNlKCk7XG4gICAgfVxuXG4gICAgY29uc3QgbGlzdGVuZXJzOiBNZXNzYWdlU3RyZWFtRXZlbnRMaXN0ZW5lcnM8RXZlbnQ+IHwgdW5kZWZpbmVkID0gdGhpcy4jbGlzdGVuZXJzW2V2ZW50XTtcbiAgICBpZiAobGlzdGVuZXJzKSB7XG4gICAgICB0aGlzLiNsaXN0ZW5lcnNbZXZlbnRdID0gbGlzdGVuZXJzLmZpbHRlcigobCkgPT4gIWwub25jZSkgYXMgYW55O1xuICAgICAgbGlzdGVuZXJzLmZvckVhY2goKHsgbGlzdGVuZXIgfTogYW55KSA9PiBsaXN0ZW5lciguLi5hcmdzKSk7XG4gICAgfVxuXG4gICAgaWYgKGV2ZW50ID09PSAnYWJvcnQnKSB7XG4gICAgICBjb25zdCBlcnJvciA9IGFyZ3NbMF0gYXMgQVBJVXNlckFib3J0RXJyb3I7XG4gICAgICBpZiAoIXRoaXMuI2NhdGNoaW5nUHJvbWlzZUNyZWF0ZWQgJiYgIWxpc3RlbmVycz8ubGVuZ3RoKSB7XG4gICAgICAgIFByb21pc2UucmVqZWN0KGVycm9yKTtcbiAgICAgIH1cbiAgICAgIHRoaXMuI3JlamVjdENvbm5lY3RlZFByb21pc2UoZXJyb3IpO1xuICAgICAgdGhpcy4jcmVqZWN0RW5kUHJvbWlzZShlcnJvcik7XG4gICAgICB0aGlzLl9lbWl0KCdlbmQnKTtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAoZXZlbnQgPT09ICdlcnJvcicpIHtcbiAgICAgIC8vIE5PVEU6IF9lbWl0KCdlcnJvcicsIGVycm9yKSBzaG91bGQgb25seSBiZSBjYWxsZWQgZnJvbSAjaGFuZGxlRXJyb3IoKS5cblxuICAgICAgY29uc3QgZXJyb3IgPSBhcmdzWzBdIGFzIEFudGhyb3BpY0Vycm9yO1xuICAgICAgaWYgKCF0aGlzLiNjYXRjaGluZ1Byb21pc2VDcmVhdGVkICYmICFsaXN0ZW5lcnM/Lmxlbmd0aCkge1xuICAgICAgICAvLyBUcmlnZ2VyIGFuIHVuaGFuZGxlZCByZWplY3Rpb24gaWYgdGhlIHVzZXIgaGFzbid0IHJlZ2lzdGVyZWQgYW55IGVycm9yIGhhbmRsZXJzLlxuICAgICAgICAvLyBJZiB5b3UgYXJlIHNlZWluZyBzdGFjayB0cmFjZXMgaGVyZSwgbWFrZSBzdXJlIHRvIGhhbmRsZSBlcnJvcnMgdmlhIGVpdGhlcjpcbiAgICAgICAgLy8gLSBydW5uZXIub24oJ2Vycm9yJywgKCkgPT4gLi4uKVxuICAgICAgICAvLyAtIGF3YWl0IHJ1bm5lci5kb25lKClcbiAgICAgICAgLy8gLSBhd2FpdCBydW5uZXIuZmluYWwuLi4oKVxuICAgICAgICAvLyAtIGV0Yy5cbiAgICAgICAgUHJvbWlzZS5yZWplY3QoZXJyb3IpO1xuICAgICAgfVxuICAgICAgdGhpcy4jcmVqZWN0Q29ubmVjdGVkUHJvbWlzZShlcnJvcik7XG4gICAgICB0aGlzLiNyZWplY3RFbmRQcm9taXNlKGVycm9yKTtcbiAgICAgIHRoaXMuX2VtaXQoJ2VuZCcpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBfZW1pdEZpbmFsKCkge1xuICAgIGNvbnN0IGZpbmFsTWVzc2FnZSA9IHRoaXMucmVjZWl2ZWRNZXNzYWdlcy5hdCgtMSk7XG4gICAgaWYgKGZpbmFsTWVzc2FnZSkge1xuICAgICAgdGhpcy5fZW1pdCgnZmluYWxNZXNzYWdlJywgdGhpcy4jZ2V0RmluYWxNZXNzYWdlKCkpO1xuICAgIH1cbiAgfVxuXG4gICNiZWdpblJlcXVlc3QoKSB7XG4gICAgaWYgKHRoaXMuZW5kZWQpIHJldHVybjtcbiAgICB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90ID0gdW5kZWZpbmVkO1xuICB9XG4gICNhZGRTdHJlYW1FdmVudChldmVudDogTWVzc2FnZVN0cmVhbUV2ZW50KSB7XG4gICAgaWYgKHRoaXMuZW5kZWQpIHJldHVybjtcbiAgICBjb25zdCBtZXNzYWdlU25hcHNob3QgPSB0aGlzLiNhY2N1bXVsYXRlTWVzc2FnZShldmVudCk7XG4gICAgdGhpcy5fZW1pdCgnc3RyZWFtRXZlbnQnLCBldmVudCwgbWVzc2FnZVNuYXBzaG90KTtcblxuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19kZWx0YSc6IHtcbiAgICAgICAgY29uc3QgY29udGVudCA9IG1lc3NhZ2VTbmFwc2hvdC5jb250ZW50LmF0KC0xKSE7XG4gICAgICAgIHN3aXRjaCAoZXZlbnQuZGVsdGEudHlwZSkge1xuICAgICAgICAgIGNhc2UgJ3RleHRfZGVsdGEnOiB7XG4gICAgICAgICAgICBpZiAoY29udGVudC50eXBlID09PSAndGV4dCcpIHtcbiAgICAgICAgICAgICAgdGhpcy5fZW1pdCgndGV4dCcsIGV2ZW50LmRlbHRhLnRleHQsIGNvbnRlbnQudGV4dCB8fCAnJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgY2FzZSAnY2l0YXRpb25zX2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ3RleHQnKSB7XG4gICAgICAgICAgICAgIHRoaXMuX2VtaXQoJ2NpdGF0aW9uJywgZXZlbnQuZGVsdGEuY2l0YXRpb24sIGNvbnRlbnQuY2l0YXRpb25zID8/IFtdKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlICdpbnB1dF9qc29uX2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKGNvbnRlbnQudHlwZSA9PT0gJ3Rvb2xfdXNlJyAmJiBjb250ZW50LmlucHV0KSB7XG4gICAgICAgICAgICAgIHRoaXMuX2VtaXQoJ2lucHV0SnNvbicsIGV2ZW50LmRlbHRhLnBhcnRpYWxfanNvbiwgY29udGVudC5pbnB1dCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBicmVhaztcbiAgICAgICAgICB9XG4gICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIGNoZWNrTmV2ZXIoZXZlbnQuZGVsdGEpO1xuICAgICAgICB9XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnbWVzc2FnZV9zdG9wJzoge1xuICAgICAgICB0aGlzLl9hZGRNZXNzYWdlUGFyYW0obWVzc2FnZVNuYXBzaG90KTtcbiAgICAgICAgdGhpcy5fYWRkTWVzc2FnZShtZXNzYWdlU25hcHNob3QsIHRydWUpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RvcCc6IHtcbiAgICAgICAgdGhpcy5fZW1pdCgnY29udGVudEJsb2NrJywgbWVzc2FnZVNuYXBzaG90LmNvbnRlbnQuYXQoLTEpISk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgICAgY2FzZSAnbWVzc2FnZV9zdGFydCc6IHtcbiAgICAgICAgdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdCA9IG1lc3NhZ2VTbmFwc2hvdDtcbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG4gICAgICBjYXNlICdjb250ZW50X2Jsb2NrX3N0YXJ0JzpcbiAgICAgIGNhc2UgJ21lc3NhZ2VfZGVsdGEnOlxuICAgICAgICBicmVhaztcbiAgICB9XG4gIH1cbiAgI2VuZFJlcXVlc3QoKTogTWVzc2FnZSB7XG4gICAgaWYgKHRoaXMuZW5kZWQpIHtcbiAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgc3RyZWFtIGhhcyBlbmRlZCwgdGhpcyBzaG91bGRuJ3QgaGFwcGVuYCk7XG4gICAgfVxuICAgIGNvbnN0IHNuYXBzaG90ID0gdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdDtcbiAgICBpZiAoIXNuYXBzaG90KSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYHJlcXVlc3QgZW5kZWQgd2l0aG91dCBzZW5kaW5nIGFueSBjaHVua3NgKTtcbiAgICB9XG4gICAgdGhpcy4jY3VycmVudE1lc3NhZ2VTbmFwc2hvdCA9IHVuZGVmaW5lZDtcbiAgICByZXR1cm4gc25hcHNob3Q7XG4gIH1cblxuICBwcm90ZWN0ZWQgYXN5bmMgX2Zyb21SZWFkYWJsZVN0cmVhbShcbiAgICByZWFkYWJsZVN0cmVhbTogUmVhZGFibGVTdHJlYW0sXG4gICAgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMsXG4gICk6IFByb21pc2U8dm9pZD4ge1xuICAgIGNvbnN0IHNpZ25hbCA9IG9wdGlvbnM/LnNpZ25hbDtcbiAgICBpZiAoc2lnbmFsKSB7XG4gICAgICBpZiAoc2lnbmFsLmFib3J0ZWQpIHRoaXMuY29udHJvbGxlci5hYm9ydCgpO1xuICAgICAgc2lnbmFsLmFkZEV2ZW50TGlzdGVuZXIoJ2Fib3J0JywgKCkgPT4gdGhpcy5jb250cm9sbGVyLmFib3J0KCkpO1xuICAgIH1cbiAgICB0aGlzLiNiZWdpblJlcXVlc3QoKTtcbiAgICB0aGlzLl9jb25uZWN0ZWQobnVsbCk7XG4gICAgY29uc3Qgc3RyZWFtID0gU3RyZWFtLmZyb21SZWFkYWJsZVN0cmVhbTxNZXNzYWdlU3RyZWFtRXZlbnQ+KHJlYWRhYmxlU3RyZWFtLCB0aGlzLmNvbnRyb2xsZXIpO1xuICAgIGZvciBhd2FpdCAoY29uc3QgZXZlbnQgb2Ygc3RyZWFtKSB7XG4gICAgICB0aGlzLiNhZGRTdHJlYW1FdmVudChldmVudCk7XG4gICAgfVxuICAgIGlmIChzdHJlYW0uY29udHJvbGxlci5zaWduYWw/LmFib3J0ZWQpIHtcbiAgICAgIHRocm93IG5ldyBBUElVc2VyQWJvcnRFcnJvcigpO1xuICAgIH1cbiAgICB0aGlzLiNlbmRSZXF1ZXN0KCk7XG4gIH1cblxuICAvKipcbiAgICogTXV0YXRlcyB0aGlzLiNjdXJyZW50TWVzc2FnZSB3aXRoIHRoZSBjdXJyZW50IGV2ZW50LiBIYW5kbGluZyB0aGUgYWNjdW11bGF0aW9uIG9mIG11bHRpcGxlIG1lc3NhZ2VzXG4gICAqIHdpbGwgYmUgbmVlZGVkIHRvIGJlIGhhbmRsZWQgYnkgdGhlIGNhbGxlciwgdGhpcyBtZXRob2Qgd2lsbCB0aHJvdyBpZiB5b3UgdHJ5IHRvIGFjY3VtdWxhdGUgZm9yIG11bHRpcGxlXG4gICAqIG1lc3NhZ2VzLlxuICAgKi9cbiAgI2FjY3VtdWxhdGVNZXNzYWdlKGV2ZW50OiBNZXNzYWdlU3RyZWFtRXZlbnQpOiBNZXNzYWdlIHtcbiAgICBsZXQgc25hcHNob3QgPSB0aGlzLiNjdXJyZW50TWVzc2FnZVNuYXBzaG90O1xuXG4gICAgaWYgKGV2ZW50LnR5cGUgPT09ICdtZXNzYWdlX3N0YXJ0Jykge1xuICAgICAgaWYgKHNuYXBzaG90KSB7XG4gICAgICAgIHRocm93IG5ldyBBbnRocm9waWNFcnJvcihgVW5leHBlY3RlZCBldmVudCBvcmRlciwgZ290ICR7ZXZlbnQudHlwZX0gYmVmb3JlIHJlY2VpdmluZyBcIm1lc3NhZ2Vfc3RvcFwiYCk7XG4gICAgICB9XG4gICAgICByZXR1cm4gZXZlbnQubWVzc2FnZTtcbiAgICB9XG5cbiAgICBpZiAoIXNuYXBzaG90KSB7XG4gICAgICB0aHJvdyBuZXcgQW50aHJvcGljRXJyb3IoYFVuZXhwZWN0ZWQgZXZlbnQgb3JkZXIsIGdvdCAke2V2ZW50LnR5cGV9IGJlZm9yZSBcIm1lc3NhZ2Vfc3RhcnRcImApO1xuICAgIH1cblxuICAgIHN3aXRjaCAoZXZlbnQudHlwZSkge1xuICAgICAgY2FzZSAnbWVzc2FnZV9zdG9wJzpcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgICAgY2FzZSAnbWVzc2FnZV9kZWx0YSc6XG4gICAgICAgIHNuYXBzaG90LnN0b3BfcmVhc29uID0gZXZlbnQuZGVsdGEuc3RvcF9yZWFzb247XG4gICAgICAgIHNuYXBzaG90LnN0b3Bfc2VxdWVuY2UgPSBldmVudC5kZWx0YS5zdG9wX3NlcXVlbmNlO1xuICAgICAgICBzbmFwc2hvdC51c2FnZS5vdXRwdXRfdG9rZW5zID0gZXZlbnQudXNhZ2Uub3V0cHV0X3Rva2VucztcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19zdGFydCc6XG4gICAgICAgIHNuYXBzaG90LmNvbnRlbnQucHVzaChldmVudC5jb250ZW50X2Jsb2NrKTtcbiAgICAgICAgcmV0dXJuIHNuYXBzaG90O1xuICAgICAgY2FzZSAnY29udGVudF9ibG9ja19kZWx0YSc6IHtcbiAgICAgICAgY29uc3Qgc25hcHNob3RDb250ZW50ID0gc25hcHNob3QuY29udGVudC5hdChldmVudC5pbmRleCk7XG5cbiAgICAgICAgc3dpdGNoIChldmVudC5kZWx0YS50eXBlKSB7XG4gICAgICAgICAgY2FzZSAndGV4dF9kZWx0YSc6IHtcbiAgICAgICAgICAgIGlmIChzbmFwc2hvdENvbnRlbnQ/LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICBzbmFwc2hvdENvbnRlbnQudGV4dCArPSBldmVudC5kZWx0YS50ZXh0O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGNhc2UgJ2NpdGF0aW9uc19kZWx0YSc6IHtcbiAgICAgICAgICAgIGlmIChzbmFwc2hvdENvbnRlbnQ/LnR5cGUgPT09ICd0ZXh0Jykge1xuICAgICAgICAgICAgICBzbmFwc2hvdENvbnRlbnQuY2l0YXRpb25zID8/PSBbXTtcbiAgICAgICAgICAgICAgc25hcHNob3RDb250ZW50LmNpdGF0aW9ucy5wdXNoKGV2ZW50LmRlbHRhLmNpdGF0aW9uKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgIH1cbiAgICAgICAgICBjYXNlICdpbnB1dF9qc29uX2RlbHRhJzoge1xuICAgICAgICAgICAgaWYgKHNuYXBzaG90Q29udGVudD8udHlwZSA9PT0gJ3Rvb2xfdXNlJykge1xuICAgICAgICAgICAgICAvLyB3ZSBuZWVkIHRvIGtlZXAgdHJhY2sgb2YgdGhlIHJhdyBKU09OIHN0cmluZyBhcyB3ZWxsIHNvIHRoYXQgd2UgY2FuXG4gICAgICAgICAgICAgIC8vIHJlLXBhcnNlIGl0IGZvciBlYWNoIGRlbHRhLCBmb3Igbm93IHdlIGp1c3Qgc3RvcmUgaXQgYXMgYW4gdW50eXBlZFxuICAgICAgICAgICAgICAvLyBub24tZW51bWVyYWJsZSBwcm9wZXJ0eSBvbiB0aGUgc25hcHNob3RcbiAgICAgICAgICAgICAgbGV0IGpzb25CdWYgPSAoc25hcHNob3RDb250ZW50IGFzIGFueSlbSlNPTl9CVUZfUFJPUEVSVFldIHx8ICcnO1xuICAgICAgICAgICAgICBqc29uQnVmICs9IGV2ZW50LmRlbHRhLnBhcnRpYWxfanNvbjtcblxuICAgICAgICAgICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoc25hcHNob3RDb250ZW50LCBKU09OX0JVRl9QUk9QRVJUWSwge1xuICAgICAgICAgICAgICAgIHZhbHVlOiBqc29uQnVmLFxuICAgICAgICAgICAgICAgIGVudW1lcmFibGU6IGZhbHNlLFxuICAgICAgICAgICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICAgICAgICB9KTtcblxuICAgICAgICAgICAgICBpZiAoanNvbkJ1Zikge1xuICAgICAgICAgICAgICAgIHNuYXBzaG90Q29udGVudC5pbnB1dCA9IHBhcnRpYWxQYXJzZShqc29uQnVmKTtcbiAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgfVxuICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICBjaGVja05ldmVyKGV2ZW50LmRlbHRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICAgIH1cbiAgICAgIGNhc2UgJ2NvbnRlbnRfYmxvY2tfc3RvcCc6XG4gICAgICAgIHJldHVybiBzbmFwc2hvdDtcbiAgICB9XG4gIH1cblxuICBbU3ltYm9sLmFzeW5jSXRlcmF0b3JdKCk6IEFzeW5jSXRlcmF0b3I8TWVzc2FnZVN0cmVhbUV2ZW50PiB7XG4gICAgY29uc3QgcHVzaFF1ZXVlOiBNZXNzYWdlU3RyZWFtRXZlbnRbXSA9IFtdO1xuICAgIGNvbnN0IHJlYWRRdWV1ZToge1xuICAgICAgcmVzb2x2ZTogKGNodW5rOiBNZXNzYWdlU3RyZWFtRXZlbnQgfCB1bmRlZmluZWQpID0+IHZvaWQ7XG4gICAgICByZWplY3Q6IChlcnJvcjogdW5rbm93bikgPT4gdm9pZDtcbiAgICB9W10gPSBbXTtcbiAgICBsZXQgZG9uZSA9IGZhbHNlO1xuXG4gICAgdGhpcy5vbignc3RyZWFtRXZlbnQnLCAoZXZlbnQpID0+IHtcbiAgICAgIGNvbnN0IHJlYWRlciA9IHJlYWRRdWV1ZS5zaGlmdCgpO1xuICAgICAgaWYgKHJlYWRlcikge1xuICAgICAgICByZWFkZXIucmVzb2x2ZShldmVudCk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBwdXNoUXVldWUucHVzaChldmVudCk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uKCdlbmQnLCAoKSA9PiB7XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIGZvciAoY29uc3QgcmVhZGVyIG9mIHJlYWRRdWV1ZSkge1xuICAgICAgICByZWFkZXIucmVzb2x2ZSh1bmRlZmluZWQpO1xuICAgICAgfVxuICAgICAgcmVhZFF1ZXVlLmxlbmd0aCA9IDA7XG4gICAgfSk7XG5cbiAgICB0aGlzLm9uKCdhYm9ydCcsIChlcnIpID0+IHtcbiAgICAgIGRvbmUgPSB0cnVlO1xuICAgICAgZm9yIChjb25zdCByZWFkZXIgb2YgcmVhZFF1ZXVlKSB7XG4gICAgICAgIHJlYWRlci5yZWplY3QoZXJyKTtcbiAgICAgIH1cbiAgICAgIHJlYWRRdWV1ZS5sZW5ndGggPSAwO1xuICAgIH0pO1xuXG4gICAgdGhpcy5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gICAgICBkb25lID0gdHJ1ZTtcbiAgICAgIGZvciAoY29uc3QgcmVhZGVyIG9mIHJlYWRRdWV1ZSkge1xuICAgICAgICByZWFkZXIucmVqZWN0KGVycik7XG4gICAgICB9XG4gICAgICByZWFkUXVldWUubGVuZ3RoID0gMDtcbiAgICB9KTtcblxuICAgIHJldHVybiB7XG4gICAgICBuZXh0OiBhc3luYyAoKTogUHJvbWlzZTxJdGVyYXRvclJlc3VsdDxNZXNzYWdlU3RyZWFtRXZlbnQ+PiA9PiB7XG4gICAgICAgIGlmICghcHVzaFF1ZXVlLmxlbmd0aCkge1xuICAgICAgICAgIGlmIChkb25lKSB7XG4gICAgICAgICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiBuZXcgUHJvbWlzZTxNZXNzYWdlU3RyZWFtRXZlbnQgfCB1bmRlZmluZWQ+KChyZXNvbHZlLCByZWplY3QpID0+XG4gICAgICAgICAgICByZWFkUXVldWUucHVzaCh7IHJlc29sdmUsIHJlamVjdCB9KSxcbiAgICAgICAgICApLnRoZW4oKGNodW5rKSA9PiAoY2h1bmsgPyB7IHZhbHVlOiBjaHVuaywgZG9uZTogZmFsc2UgfSA6IHsgdmFsdWU6IHVuZGVmaW5lZCwgZG9uZTogdHJ1ZSB9KSk7XG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgY2h1bmsgPSBwdXNoUXVldWUuc2hpZnQoKSE7XG4gICAgICAgIHJldHVybiB7IHZhbHVlOiBjaHVuaywgZG9uZTogZmFsc2UgfTtcbiAgICAgIH0sXG4gICAgICByZXR1cm46IGFzeW5jICgpID0+IHtcbiAgICAgICAgdGhpcy5hYm9ydCgpO1xuICAgICAgICByZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XG4gICAgICB9LFxuICAgIH07XG4gIH1cblxuICB0b1JlYWRhYmxlU3RyZWFtKCk6IFJlYWRhYmxlU3RyZWFtIHtcbiAgICBjb25zdCBzdHJlYW0gPSBuZXcgU3RyZWFtKHRoaXNbU3ltYm9sLmFzeW5jSXRlcmF0b3JdLmJpbmQodGhpcyksIHRoaXMuY29udHJvbGxlcik7XG4gICAgcmV0dXJuIHN0cmVhbS50b1JlYWRhYmxlU3RyZWFtKCk7XG4gIH1cbn1cblxuLy8gdXNlZCB0byBlbnN1cmUgZXhoYXVzdGl2ZSBjYXNlIG1hdGNoaW5nIHdpdGhvdXQgdGhyb3dpbmcgYSBydW50aW1lIGVycm9yXG5mdW5jdGlvbiBjaGVja05ldmVyKHg6IG5ldmVyKSB7fVxuIiwgIi8vIEZpbGUgZ2VuZXJhdGVkIGZyb20gb3VyIE9wZW5BUEkgc3BlYyBieSBTdGFpbmxlc3MuIFNlZSBDT05UUklCVVRJTkcubWQgZm9yIGRldGFpbHMuXG5cbmltcG9ydCB7IEFQSVJlc291cmNlIH0gZnJvbSBcIi4uLy4uL3Jlc291cmNlLmpzXCI7XG5pbXBvcnQgeyBBUElQcm9taXNlIH0gZnJvbSBcIi4uLy4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIENvcmUgZnJvbSBcIi4uLy4uL2NvcmUuanNcIjtcbmltcG9ydCAqIGFzIE1lc3NhZ2VzQVBJIGZyb20gXCIuL21lc3NhZ2VzLmpzXCI7XG5pbXBvcnQgKiBhcyBCYXRjaGVzQVBJIGZyb20gXCIuL2JhdGNoZXMuanNcIjtcbmltcG9ydCB7XG4gIEJhdGNoQ3JlYXRlUGFyYW1zLFxuICBCYXRjaExpc3RQYXJhbXMsXG4gIEJhdGNoZXMsXG4gIERlbGV0ZWRNZXNzYWdlQmF0Y2gsXG4gIE1lc3NhZ2VCYXRjaCxcbiAgTWVzc2FnZUJhdGNoQ2FuY2VsZWRSZXN1bHQsXG4gIE1lc3NhZ2VCYXRjaEVycm9yZWRSZXN1bHQsXG4gIE1lc3NhZ2VCYXRjaEV4cGlyZWRSZXN1bHQsXG4gIE1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSxcbiAgTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyxcbiAgTWVzc2FnZUJhdGNoUmVzdWx0LFxuICBNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQsXG4gIE1lc3NhZ2VCYXRjaGVzUGFnZSxcbn0gZnJvbSBcIi4vYmF0Y2hlcy5qc1wiO1xuaW1wb3J0IHsgU3RyZWFtIH0gZnJvbSBcIi4uLy4uL3N0cmVhbWluZy5qc1wiO1xuaW1wb3J0IHsgTWVzc2FnZVN0cmVhbSB9IGZyb20gXCIuLi8uLi9saWIvTWVzc2FnZVN0cmVhbS5qc1wiO1xuXG5leHBvcnQgeyBNZXNzYWdlU3RyZWFtIH0gZnJvbSBcIi4uLy4uL2xpYi9NZXNzYWdlU3RyZWFtLmpzXCI7XG5cbmV4cG9ydCBjbGFzcyBNZXNzYWdlcyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgYmF0Y2hlczogQmF0Y2hlc0FQSS5CYXRjaGVzID0gbmV3IEJhdGNoZXNBUEkuQmF0Y2hlcyh0aGlzLl9jbGllbnQpO1xuXG4gIC8qKlxuICAgKiBTZW5kIGEgc3RydWN0dXJlZCBsaXN0IG9mIGlucHV0IG1lc3NhZ2VzIHdpdGggdGV4dCBhbmQvb3IgaW1hZ2UgY29udGVudCwgYW5kIHRoZVxuICAgKiBtb2RlbCB3aWxsIGdlbmVyYXRlIHRoZSBuZXh0IG1lc3NhZ2UgaW4gdGhlIGNvbnZlcnNhdGlvbi5cbiAgICpcbiAgICogVGhlIE1lc3NhZ2VzIEFQSSBjYW4gYmUgdXNlZCBmb3IgZWl0aGVyIHNpbmdsZSBxdWVyaWVzIG9yIHN0YXRlbGVzcyBtdWx0aS10dXJuXG4gICAqIGNvbnZlcnNhdGlvbnMuXG4gICAqL1xuICBjcmVhdGUoYm9keTogTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBBUElQcm9taXNlPE1lc3NhZ2U+O1xuICBjcmVhdGUoXG4gICAgYm9keTogTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08UmF3TWVzc2FnZVN0cmVhbUV2ZW50Pj47XG4gIGNyZWF0ZShcbiAgICBib2R5OiBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxTdHJlYW08UmF3TWVzc2FnZVN0cmVhbUV2ZW50PiB8IE1lc3NhZ2U+O1xuICBjcmVhdGUoXG4gICAgYm9keTogTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQVBJUHJvbWlzZTxNZXNzYWdlPiB8IEFQSVByb21pc2U8U3RyZWFtPFJhd01lc3NhZ2VTdHJlYW1FdmVudD4+IHtcbiAgICBpZiAoYm9keS5tb2RlbCBpbiBERVBSRUNBVEVEX01PREVMUykge1xuICAgICAgY29uc29sZS53YXJuKFxuICAgICAgICBgVGhlIG1vZGVsICcke2JvZHkubW9kZWx9JyBpcyBkZXByZWNhdGVkIGFuZCB3aWxsIHJlYWNoIGVuZC1vZi1saWZlIG9uICR7XG4gICAgICAgICAgREVQUkVDQVRFRF9NT0RFTFNbYm9keS5tb2RlbF1cbiAgICAgICAgfVxcblBsZWFzZSBtaWdyYXRlIHRvIGEgbmV3ZXIgbW9kZWwuIFZpc2l0IGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvcmVzb3VyY2VzL21vZGVsLWRlcHJlY2F0aW9ucyBmb3IgbW9yZSBpbmZvcm1hdGlvbi5gLFxuICAgICAgKTtcbiAgICB9XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5wb3N0KCcvdjEvbWVzc2FnZXMnLCB7XG4gICAgICBib2R5LFxuICAgICAgdGltZW91dDogKHRoaXMuX2NsaWVudCBhcyBhbnkpLl9vcHRpb25zLnRpbWVvdXQgPz8gNjAwMDAwLFxuICAgICAgLi4ub3B0aW9ucyxcbiAgICAgIHN0cmVhbTogYm9keS5zdHJlYW0gPz8gZmFsc2UsXG4gICAgfSkgYXMgQVBJUHJvbWlzZTxNZXNzYWdlPiB8IEFQSVByb21pc2U8U3RyZWFtPFJhd01lc3NhZ2VTdHJlYW1FdmVudD4+O1xuICB9XG5cbiAgLyoqXG4gICAqIENyZWF0ZSBhIE1lc3NhZ2Ugc3RyZWFtXG4gICAqL1xuICBzdHJlYW0oYm9keTogTWVzc2FnZVN0cmVhbVBhcmFtcywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBNZXNzYWdlU3RyZWFtIHtcbiAgICByZXR1cm4gTWVzc2FnZVN0cmVhbS5jcmVhdGVNZXNzYWdlKHRoaXMsIGJvZHksIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIENvdW50IHRoZSBudW1iZXIgb2YgdG9rZW5zIGluIGEgTWVzc2FnZS5cbiAgICpcbiAgICogVGhlIFRva2VuIENvdW50IEFQSSBjYW4gYmUgdXNlZCB0byBjb3VudCB0aGUgbnVtYmVyIG9mIHRva2VucyBpbiBhIE1lc3NhZ2UsXG4gICAqIGluY2x1ZGluZyB0b29scywgaW1hZ2VzLCBhbmQgZG9jdW1lbnRzLCB3aXRob3V0IGNyZWF0aW5nIGl0LlxuICAgKi9cbiAgY291bnRUb2tlbnMoXG4gICAgYm9keTogTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICAgIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zLFxuICApOiBDb3JlLkFQSVByb21pc2U8TWVzc2FnZVRva2Vuc0NvdW50PiB7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5wb3N0KCcvdjEvbWVzc2FnZXMvY291bnRfdG9rZW5zJywgeyBib2R5LCAuLi5vcHRpb25zIH0pO1xuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQmFzZTY0UERGU291cmNlIHtcbiAgZGF0YTogc3RyaW5nO1xuXG4gIG1lZGlhX3R5cGU6ICdhcHBsaWNhdGlvbi9wZGYnO1xuXG4gIHR5cGU6ICdiYXNlNjQnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENhY2hlQ29udHJvbEVwaGVtZXJhbCB7XG4gIHR5cGU6ICdlcGhlbWVyYWwnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpdGF0aW9uQ2hhckxvY2F0aW9uIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX2NoYXJfaW5kZXg6IG51bWJlcjtcblxuICBzdGFydF9jaGFyX2luZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NoYXJfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0ge1xuICBjaXRlZF90ZXh0OiBzdHJpbmc7XG5cbiAgZG9jdW1lbnRfaW5kZXg6IG51bWJlcjtcblxuICBkb2N1bWVudF90aXRsZTogc3RyaW5nIHwgbnVsbDtcblxuICBlbmRfY2hhcl9pbmRleDogbnVtYmVyO1xuXG4gIHN0YXJ0X2NoYXJfaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY2hhcl9sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbiB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9ibG9ja19pbmRleDogbnVtYmVyO1xuXG4gIHN0YXJ0X2Jsb2NrX2luZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NvbnRlbnRfYmxvY2tfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9ibG9ja19pbmRleDogbnVtYmVyO1xuXG4gIHN0YXJ0X2Jsb2NrX2luZGV4OiBudW1iZXI7XG5cbiAgdHlwZTogJ2NvbnRlbnRfYmxvY2tfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpdGF0aW9uUGFnZUxvY2F0aW9uIHtcbiAgY2l0ZWRfdGV4dDogc3RyaW5nO1xuXG4gIGRvY3VtZW50X2luZGV4OiBudW1iZXI7XG5cbiAgZG9jdW1lbnRfdGl0bGU6IHN0cmluZyB8IG51bGw7XG5cbiAgZW5kX3BhZ2VfbnVtYmVyOiBudW1iZXI7XG5cbiAgc3RhcnRfcGFnZV9udW1iZXI6IG51bWJlcjtcblxuICB0eXBlOiAncGFnZV9sb2NhdGlvbic7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbSB7XG4gIGNpdGVkX3RleHQ6IHN0cmluZztcblxuICBkb2N1bWVudF9pbmRleDogbnVtYmVyO1xuXG4gIGRvY3VtZW50X3RpdGxlOiBzdHJpbmcgfCBudWxsO1xuXG4gIGVuZF9wYWdlX251bWJlcjogbnVtYmVyO1xuXG4gIHN0YXJ0X3BhZ2VfbnVtYmVyOiBudW1iZXI7XG5cbiAgdHlwZTogJ3BhZ2VfbG9jYXRpb24nO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIENpdGF0aW9uc0NvbmZpZ1BhcmFtIHtcbiAgZW5hYmxlZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ2l0YXRpb25zRGVsdGEge1xuICBjaXRhdGlvbjogQ2l0YXRpb25DaGFyTG9jYXRpb24gfCBDaXRhdGlvblBhZ2VMb2NhdGlvbiB8IENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb247XG5cbiAgdHlwZTogJ2NpdGF0aW9uc19kZWx0YSc7XG59XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRCbG9jayA9IFRleHRCbG9jayB8IFRvb2xVc2VCbG9jaztcblxuZXhwb3J0IHR5cGUgQ29udGVudEJsb2NrRGVsdGFFdmVudCA9IFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQ7XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRCbG9ja1BhcmFtID1cbiAgfCBUZXh0QmxvY2tQYXJhbVxuICB8IEltYWdlQmxvY2tQYXJhbVxuICB8IFRvb2xVc2VCbG9ja1BhcmFtXG4gIHwgVG9vbFJlc3VsdEJsb2NrUGFyYW1cbiAgfCBEb2N1bWVudEJsb2NrUGFyYW07XG5cbmV4cG9ydCBpbnRlcmZhY2UgQ29udGVudEJsb2NrU291cmNlIHtcbiAgY29udGVudDogc3RyaW5nIHwgQXJyYXk8Q29udGVudEJsb2NrU291cmNlQ29udGVudD47XG5cbiAgdHlwZTogJ2NvbnRlbnQnO1xufVxuXG5leHBvcnQgdHlwZSBDb250ZW50QmxvY2tTb3VyY2VDb250ZW50ID0gVGV4dEJsb2NrUGFyYW0gfCBJbWFnZUJsb2NrUGFyYW07XG5cbmV4cG9ydCB0eXBlIENvbnRlbnRCbG9ja1N0YXJ0RXZlbnQgPSBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50O1xuXG5leHBvcnQgdHlwZSBDb250ZW50QmxvY2tTdG9wRXZlbnQgPSBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgRG9jdW1lbnRCbG9ja1BhcmFtIHtcbiAgc291cmNlOiBCYXNlNjRQREZTb3VyY2UgfCBQbGFpblRleHRTb3VyY2UgfCBDb250ZW50QmxvY2tTb3VyY2U7XG5cbiAgdHlwZTogJ2RvY3VtZW50JztcblxuICBjYWNoZV9jb250cm9sPzogQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcblxuICBjaXRhdGlvbnM/OiBDaXRhdGlvbnNDb25maWdQYXJhbTtcblxuICBjb250ZXh0Pzogc3RyaW5nIHwgbnVsbDtcblxuICB0aXRsZT86IHN0cmluZyB8IG51bGw7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSW1hZ2VCbG9ja1BhcmFtIHtcbiAgc291cmNlOiBJbWFnZUJsb2NrUGFyYW0uU291cmNlO1xuXG4gIHR5cGU6ICdpbWFnZSc7XG5cbiAgY2FjaGVfY29udHJvbD86IENhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgSW1hZ2VCbG9ja1BhcmFtIHtcbiAgZXhwb3J0IGludGVyZmFjZSBTb3VyY2Uge1xuICAgIGRhdGE6IHN0cmluZztcblxuICAgIG1lZGlhX3R5cGU6ICdpbWFnZS9qcGVnJyB8ICdpbWFnZS9wbmcnIHwgJ2ltYWdlL2dpZicgfCAnaW1hZ2Uvd2VicCc7XG5cbiAgICB0eXBlOiAnYmFzZTY0JztcbiAgfVxufVxuXG5leHBvcnQgdHlwZSBJbnB1dEpzb25EZWx0YSA9IElucHV0SlNPTkRlbHRhO1xuXG5leHBvcnQgaW50ZXJmYWNlIElucHV0SlNPTkRlbHRhIHtcbiAgcGFydGlhbF9qc29uOiBzdHJpbmc7XG5cbiAgdHlwZTogJ2lucHV0X2pzb25fZGVsdGEnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2Uge1xuICAvKipcbiAgICogVW5pcXVlIG9iamVjdCBpZGVudGlmaWVyLlxuICAgKlxuICAgKiBUaGUgZm9ybWF0IGFuZCBsZW5ndGggb2YgSURzIG1heSBjaGFuZ2Ugb3ZlciB0aW1lLlxuICAgKi9cbiAgaWQ6IHN0cmluZztcblxuICAvKipcbiAgICogQ29udGVudCBnZW5lcmF0ZWQgYnkgdGhlIG1vZGVsLlxuICAgKlxuICAgKiBUaGlzIGlzIGFuIGFycmF5IG9mIGNvbnRlbnQgYmxvY2tzLCBlYWNoIG9mIHdoaWNoIGhhcyBhIGB0eXBlYCB0aGF0IGRldGVybWluZXNcbiAgICogaXRzIHNoYXBlLlxuICAgKlxuICAgKiBFeGFtcGxlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFt7IFwidHlwZVwiOiBcInRleHRcIiwgXCJ0ZXh0XCI6IFwiSGksIEknbSBDbGF1ZGUuXCIgfV1cbiAgICogYGBgXG4gICAqXG4gICAqIElmIHRoZSByZXF1ZXN0IGlucHV0IGBtZXNzYWdlc2AgZW5kZWQgd2l0aCBhbiBgYXNzaXN0YW50YCB0dXJuLCB0aGVuIHRoZVxuICAgKiByZXNwb25zZSBgY29udGVudGAgd2lsbCBjb250aW51ZSBkaXJlY3RseSBmcm9tIHRoYXQgbGFzdCB0dXJuLiBZb3UgY2FuIHVzZSB0aGlzXG4gICAqIHRvIGNvbnN0cmFpbiB0aGUgbW9kZWwncyBvdXRwdXQuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBpZiB0aGUgaW5wdXQgYG1lc3NhZ2VzYCB3ZXJlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCJXaGF0J3MgdGhlIEdyZWVrIG5hbWUgZm9yIFN1bj8gKEEpIFNvbCAoQikgSGVsaW9zIChDKSBTdW5cIlxuICAgKiAgIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiVGhlIGJlc3QgYW5zd2VyIGlzIChcIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFRoZW4gdGhlIHJlc3BvbnNlIGBjb250ZW50YCBtaWdodCBiZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIkIpXCIgfV1cbiAgICogYGBgXG4gICAqL1xuICBjb250ZW50OiBBcnJheTxDb250ZW50QmxvY2s+O1xuXG4gIC8qKlxuICAgKiBUaGUgbW9kZWwgdGhhdCB3aWxsIGNvbXBsZXRlIHlvdXIgcHJvbXB0LlxcblxcblNlZVxuICAgKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGFkZGl0aW9uYWxcbiAgICogZGV0YWlscyBhbmQgb3B0aW9ucy5cbiAgICovXG4gIG1vZGVsOiBNb2RlbDtcblxuICAvKipcbiAgICogQ29udmVyc2F0aW9uYWwgcm9sZSBvZiB0aGUgZ2VuZXJhdGVkIG1lc3NhZ2UuXG4gICAqXG4gICAqIFRoaXMgd2lsbCBhbHdheXMgYmUgYFwiYXNzaXN0YW50XCJgLlxuICAgKi9cbiAgcm9sZTogJ2Fzc2lzdGFudCc7XG5cbiAgLyoqXG4gICAqIFRoZSByZWFzb24gdGhhdCB3ZSBzdG9wcGVkLlxuICAgKlxuICAgKiBUaGlzIG1heSBiZSBvbmUgdGhlIGZvbGxvd2luZyB2YWx1ZXM6XG4gICAqXG4gICAqIC0gYFwiZW5kX3R1cm5cImA6IHRoZSBtb2RlbCByZWFjaGVkIGEgbmF0dXJhbCBzdG9wcGluZyBwb2ludFxuICAgKiAtIGBcIm1heF90b2tlbnNcImA6IHdlIGV4Y2VlZGVkIHRoZSByZXF1ZXN0ZWQgYG1heF90b2tlbnNgIG9yIHRoZSBtb2RlbCdzIG1heGltdW1cbiAgICogLSBgXCJzdG9wX3NlcXVlbmNlXCJgOiBvbmUgb2YgeW91ciBwcm92aWRlZCBjdXN0b20gYHN0b3Bfc2VxdWVuY2VzYCB3YXMgZ2VuZXJhdGVkXG4gICAqIC0gYFwidG9vbF91c2VcImA6IHRoZSBtb2RlbCBpbnZva2VkIG9uZSBvciBtb3JlIHRvb2xzXG4gICAqXG4gICAqIEluIG5vbi1zdHJlYW1pbmcgbW9kZSB0aGlzIHZhbHVlIGlzIGFsd2F5cyBub24tbnVsbC4gSW4gc3RyZWFtaW5nIG1vZGUsIGl0IGlzXG4gICAqIG51bGwgaW4gdGhlIGBtZXNzYWdlX3N0YXJ0YCBldmVudCBhbmQgbm9uLW51bGwgb3RoZXJ3aXNlLlxuICAgKi9cbiAgc3RvcF9yZWFzb246ICdlbmRfdHVybicgfCAnbWF4X3Rva2VucycgfCAnc3RvcF9zZXF1ZW5jZScgfCAndG9vbF91c2UnIHwgbnVsbDtcblxuICAvKipcbiAgICogV2hpY2ggY3VzdG9tIHN0b3Agc2VxdWVuY2Ugd2FzIGdlbmVyYXRlZCwgaWYgYW55LlxuICAgKlxuICAgKiBUaGlzIHZhbHVlIHdpbGwgYmUgYSBub24tbnVsbCBzdHJpbmcgaWYgb25lIG9mIHlvdXIgY3VzdG9tIHN0b3Agc2VxdWVuY2VzIHdhc1xuICAgKiBnZW5lcmF0ZWQuXG4gICAqL1xuICBzdG9wX3NlcXVlbmNlOiBzdHJpbmcgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBPYmplY3QgdHlwZS5cbiAgICpcbiAgICogRm9yIE1lc3NhZ2VzLCB0aGlzIGlzIGFsd2F5cyBgXCJtZXNzYWdlXCJgLlxuICAgKi9cbiAgdHlwZTogJ21lc3NhZ2UnO1xuXG4gIC8qKlxuICAgKiBCaWxsaW5nIGFuZCByYXRlLWxpbWl0IHVzYWdlLlxuICAgKlxuICAgKiBBbnRocm9waWMncyBBUEkgYmlsbHMgYW5kIHJhdGUtbGltaXRzIGJ5IHRva2VuIGNvdW50cywgYXMgdG9rZW5zIHJlcHJlc2VudCB0aGVcbiAgICogdW5kZXJseWluZyBjb3N0IHRvIG91ciBzeXN0ZW1zLlxuICAgKlxuICAgKiBVbmRlciB0aGUgaG9vZCwgdGhlIEFQSSB0cmFuc2Zvcm1zIHJlcXVlc3RzIGludG8gYSBmb3JtYXQgc3VpdGFibGUgZm9yIHRoZVxuICAgKiBtb2RlbC4gVGhlIG1vZGVsJ3Mgb3V0cHV0IHRoZW4gZ29lcyB0aHJvdWdoIGEgcGFyc2luZyBzdGFnZSBiZWZvcmUgYmVjb21pbmcgYW5cbiAgICogQVBJIHJlc3BvbnNlLiBBcyBhIHJlc3VsdCwgdGhlIHRva2VuIGNvdW50cyBpbiBgdXNhZ2VgIHdpbGwgbm90IG1hdGNoIG9uZS10by1vbmVcbiAgICogd2l0aCB0aGUgZXhhY3QgdmlzaWJsZSBjb250ZW50IG9mIGFuIEFQSSByZXF1ZXN0IG9yIHJlc3BvbnNlLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgYG91dHB1dF90b2tlbnNgIHdpbGwgYmUgbm9uLXplcm8sIGV2ZW4gZm9yIGFuIGVtcHR5IHN0cmluZyByZXNwb25zZVxuICAgKiBmcm9tIENsYXVkZS5cbiAgICovXG4gIHVzYWdlOiBVc2FnZTtcbn1cblxuZXhwb3J0IHR5cGUgTWVzc2FnZURlbHRhRXZlbnQgPSBSYXdNZXNzYWdlRGVsdGFFdmVudDtcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlRGVsdGFVc2FnZSB7XG4gIC8qKlxuICAgKiBUaGUgY3VtdWxhdGl2ZSBudW1iZXIgb2Ygb3V0cHV0IHRva2VucyB3aGljaCB3ZXJlIHVzZWQuXG4gICAqL1xuICBvdXRwdXRfdG9rZW5zOiBudW1iZXI7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTWVzc2FnZVBhcmFtIHtcbiAgY29udGVudDogc3RyaW5nIHwgQXJyYXk8Q29udGVudEJsb2NrUGFyYW0+O1xuXG4gIHJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnO1xufVxuXG5leHBvcnQgdHlwZSBNZXNzYWdlU3RhcnRFdmVudCA9IFJhd01lc3NhZ2VTdGFydEV2ZW50O1xuXG5leHBvcnQgdHlwZSBNZXNzYWdlU3RvcEV2ZW50ID0gUmF3TWVzc2FnZVN0b3BFdmVudDtcblxuZXhwb3J0IHR5cGUgTWVzc2FnZVN0cmVhbUV2ZW50ID0gUmF3TWVzc2FnZVN0cmVhbUV2ZW50O1xuXG5leHBvcnQgaW50ZXJmYWNlIE1lc3NhZ2VUb2tlbnNDb3VudCB7XG4gIC8qKlxuICAgKiBUaGUgdG90YWwgbnVtYmVyIG9mIHRva2VucyBhY3Jvc3MgdGhlIHByb3ZpZGVkIGxpc3Qgb2YgbWVzc2FnZXMsIHN5c3RlbSBwcm9tcHQsXG4gICAqIGFuZCB0b29scy5cbiAgICovXG4gIGlucHV0X3Rva2VuczogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIE1ldGFkYXRhIHtcbiAgLyoqXG4gICAqIEFuIGV4dGVybmFsIGlkZW50aWZpZXIgZm9yIHRoZSB1c2VyIHdobyBpcyBhc3NvY2lhdGVkIHdpdGggdGhlIHJlcXVlc3QuXG4gICAqXG4gICAqIFRoaXMgc2hvdWxkIGJlIGEgdXVpZCwgaGFzaCB2YWx1ZSwgb3Igb3RoZXIgb3BhcXVlIGlkZW50aWZpZXIuIEFudGhyb3BpYyBtYXkgdXNlXG4gICAqIHRoaXMgaWQgdG8gaGVscCBkZXRlY3QgYWJ1c2UuIERvIG5vdCBpbmNsdWRlIGFueSBpZGVudGlmeWluZyBpbmZvcm1hdGlvbiBzdWNoIGFzXG4gICAqIG5hbWUsIGVtYWlsIGFkZHJlc3MsIG9yIHBob25lIG51bWJlci5cbiAgICovXG4gIHVzZXJfaWQ/OiBzdHJpbmcgfCBudWxsO1xufVxuXG4vKipcbiAqIFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gKiBbbW9kZWxzXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL21vZGVscy1vdmVydmlldykgZm9yIGFkZGl0aW9uYWxcbiAqIGRldGFpbHMgYW5kIG9wdGlvbnMuXG4gKi9cbmV4cG9ydCB0eXBlIE1vZGVsID1cbiAgfCAoc3RyaW5nICYge30pXG4gIHwgJ2NsYXVkZS0zLTUtaGFpa3UtbGF0ZXN0J1xuICB8ICdjbGF1ZGUtMy01LWhhaWt1LTIwMjQxMDIyJ1xuICB8ICdjbGF1ZGUtMy01LXNvbm5ldC1sYXRlc3QnXG4gIHwgJ2NsYXVkZS0zLTUtc29ubmV0LTIwMjQxMDIyJ1xuICB8ICdjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MDYyMCdcbiAgfCAnY2xhdWRlLTMtb3B1cy1sYXRlc3QnXG4gIHwgJ2NsYXVkZS0zLW9wdXMtMjAyNDAyMjknXG4gIHwgJ2NsYXVkZS0zLXNvbm5ldC0yMDI0MDIyOSdcbiAgfCAnY2xhdWRlLTMtaGFpa3UtMjAyNDAzMDcnXG4gIHwgJ2NsYXVkZS0yLjEnXG4gIHwgJ2NsYXVkZS0yLjAnO1xuXG5jb25zdCBERVBSRUNBVEVEX01PREVMUzoge1xuICBbSyBpbiBNb2RlbF0/OiBzdHJpbmc7XG59ID0ge1xuICAnY2xhdWRlLTEuMyc6ICdOb3ZlbWJlciA2dGgsIDIwMjQnLFxuICAnY2xhdWRlLTEuMy0xMDBrJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG4gICdjbGF1ZGUtaW5zdGFudC0xLjEnOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS1pbnN0YW50LTEuMS0xMDBrJzogJ05vdmVtYmVyIDZ0aCwgMjAyNCcsXG4gICdjbGF1ZGUtaW5zdGFudC0xLjInOiAnTm92ZW1iZXIgNnRoLCAyMDI0JyxcbiAgJ2NsYXVkZS0zLXNvbm5ldC0yMDI0MDIyOSc6ICdKdWx5IDIxc3QsIDIwMjUnLFxuICAnY2xhdWRlLTIuMSc6ICdKdWx5IDIxc3QsIDIwMjUnLFxuICAnY2xhdWRlLTIuMCc6ICdKdWx5IDIxc3QsIDIwMjUnLFxufTtcblxuZXhwb3J0IGludGVyZmFjZSBQbGFpblRleHRTb3VyY2Uge1xuICBkYXRhOiBzdHJpbmc7XG5cbiAgbWVkaWFfdHlwZTogJ3RleHQvcGxhaW4nO1xuXG4gIHR5cGU6ICd0ZXh0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50IHtcbiAgZGVsdGE6IFRleHREZWx0YSB8IElucHV0SlNPTkRlbHRhIHwgQ2l0YXRpb25zRGVsdGE7XG5cbiAgaW5kZXg6IG51bWJlcjtcblxuICB0eXBlOiAnY29udGVudF9ibG9ja19kZWx0YSc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCB7XG4gIGNvbnRlbnRfYmxvY2s6IFRleHRCbG9jayB8IFRvb2xVc2VCbG9jaztcblxuICBpbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX3N0YXJ0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQge1xuICBpbmRleDogbnVtYmVyO1xuXG4gIHR5cGU6ICdjb250ZW50X2Jsb2NrX3N0b3AnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhd01lc3NhZ2VEZWx0YUV2ZW50IHtcbiAgZGVsdGE6IFJhd01lc3NhZ2VEZWx0YUV2ZW50LkRlbHRhO1xuXG4gIHR5cGU6ICdtZXNzYWdlX2RlbHRhJztcblxuICAvKipcbiAgICogQmlsbGluZyBhbmQgcmF0ZS1saW1pdCB1c2FnZS5cbiAgICpcbiAgICogQW50aHJvcGljJ3MgQVBJIGJpbGxzIGFuZCByYXRlLWxpbWl0cyBieSB0b2tlbiBjb3VudHMsIGFzIHRva2VucyByZXByZXNlbnQgdGhlXG4gICAqIHVuZGVybHlpbmcgY29zdCB0byBvdXIgc3lzdGVtcy5cbiAgICpcbiAgICogVW5kZXIgdGhlIGhvb2QsIHRoZSBBUEkgdHJhbnNmb3JtcyByZXF1ZXN0cyBpbnRvIGEgZm9ybWF0IHN1aXRhYmxlIGZvciB0aGVcbiAgICogbW9kZWwuIFRoZSBtb2RlbCdzIG91dHB1dCB0aGVuIGdvZXMgdGhyb3VnaCBhIHBhcnNpbmcgc3RhZ2UgYmVmb3JlIGJlY29taW5nIGFuXG4gICAqIEFQSSByZXNwb25zZS4gQXMgYSByZXN1bHQsIHRoZSB0b2tlbiBjb3VudHMgaW4gYHVzYWdlYCB3aWxsIG5vdCBtYXRjaCBvbmUtdG8tb25lXG4gICAqIHdpdGggdGhlIGV4YWN0IHZpc2libGUgY29udGVudCBvZiBhbiBBUEkgcmVxdWVzdCBvciByZXNwb25zZS5cbiAgICpcbiAgICogRm9yIGV4YW1wbGUsIGBvdXRwdXRfdG9rZW5zYCB3aWxsIGJlIG5vbi16ZXJvLCBldmVuIGZvciBhbiBlbXB0eSBzdHJpbmcgcmVzcG9uc2VcbiAgICogZnJvbSBDbGF1ZGUuXG4gICAqL1xuICB1c2FnZTogTWVzc2FnZURlbHRhVXNhZ2U7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgUmF3TWVzc2FnZURlbHRhRXZlbnQge1xuICBleHBvcnQgaW50ZXJmYWNlIERlbHRhIHtcbiAgICBzdG9wX3JlYXNvbjogJ2VuZF90dXJuJyB8ICdtYXhfdG9rZW5zJyB8ICdzdG9wX3NlcXVlbmNlJyB8ICd0b29sX3VzZScgfCBudWxsO1xuXG4gICAgc3RvcF9zZXF1ZW5jZTogc3RyaW5nIHwgbnVsbDtcbiAgfVxufVxuXG5leHBvcnQgaW50ZXJmYWNlIFJhd01lc3NhZ2VTdGFydEV2ZW50IHtcbiAgbWVzc2FnZTogTWVzc2FnZTtcblxuICB0eXBlOiAnbWVzc2FnZV9zdGFydCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgUmF3TWVzc2FnZVN0b3BFdmVudCB7XG4gIHR5cGU6ICdtZXNzYWdlX3N0b3AnO1xufVxuXG5leHBvcnQgdHlwZSBSYXdNZXNzYWdlU3RyZWFtRXZlbnQgPVxuICB8IFJhd01lc3NhZ2VTdGFydEV2ZW50XG4gIHwgUmF3TWVzc2FnZURlbHRhRXZlbnRcbiAgfCBSYXdNZXNzYWdlU3RvcEV2ZW50XG4gIHwgUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudFxuICB8IFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnRcbiAgfCBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQ7XG5cbmV4cG9ydCBpbnRlcmZhY2UgVGV4dEJsb2NrIHtcbiAgLyoqXG4gICAqIENpdGF0aW9ucyBzdXBwb3J0aW5nIHRoZSB0ZXh0IGJsb2NrLlxuICAgKlxuICAgKiBUaGUgdHlwZSBvZiBjaXRhdGlvbiByZXR1cm5lZCB3aWxsIGRlcGVuZCBvbiB0aGUgdHlwZSBvZiBkb2N1bWVudCBiZWluZyBjaXRlZC5cbiAgICogQ2l0aW5nIGEgUERGIHJlc3VsdHMgaW4gYHBhZ2VfbG9jYXRpb25gLCBwbGFpbiB0ZXh0IHJlc3VsdHMgaW4gYGNoYXJfbG9jYXRpb25gLFxuICAgKiBhbmQgY29udGVudCBkb2N1bWVudCByZXN1bHRzIGluIGBjb250ZW50X2Jsb2NrX2xvY2F0aW9uYC5cbiAgICovXG4gIGNpdGF0aW9uczogQXJyYXk8VGV4dENpdGF0aW9uPiB8IG51bGw7XG5cbiAgdGV4dDogc3RyaW5nO1xuXG4gIHR5cGU6ICd0ZXh0Jztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUZXh0QmxvY2tQYXJhbSB7XG4gIHRleHQ6IHN0cmluZztcblxuICB0eXBlOiAndGV4dCc7XG5cbiAgY2FjaGVfY29udHJvbD86IENhY2hlQ29udHJvbEVwaGVtZXJhbCB8IG51bGw7XG5cbiAgY2l0YXRpb25zPzogQXJyYXk8VGV4dENpdGF0aW9uUGFyYW0+IHwgbnVsbDtcbn1cblxuZXhwb3J0IHR5cGUgVGV4dENpdGF0aW9uID0gQ2l0YXRpb25DaGFyTG9jYXRpb24gfCBDaXRhdGlvblBhZ2VMb2NhdGlvbiB8IENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb247XG5cbmV4cG9ydCB0eXBlIFRleHRDaXRhdGlvblBhcmFtID1cbiAgfCBDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtXG4gIHwgQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbVxuICB8IENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbTtcblxuZXhwb3J0IGludGVyZmFjZSBUZXh0RGVsdGEge1xuICB0ZXh0OiBzdHJpbmc7XG5cbiAgdHlwZTogJ3RleHRfZGVsdGEnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRvb2wge1xuICAvKipcbiAgICogW0pTT04gc2NoZW1hXShodHRwczovL2pzb24tc2NoZW1hLm9yZy8pIGZvciB0aGlzIHRvb2wncyBpbnB1dC5cbiAgICpcbiAgICogVGhpcyBkZWZpbmVzIHRoZSBzaGFwZSBvZiB0aGUgYGlucHV0YCB0aGF0IHlvdXIgdG9vbCBhY2NlcHRzIGFuZCB0aGF0IHRoZSBtb2RlbFxuICAgKiB3aWxsIHByb2R1Y2UuXG4gICAqL1xuICBpbnB1dF9zY2hlbWE6IFRvb2wuSW5wdXRTY2hlbWE7XG5cbiAgLyoqXG4gICAqIE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqXG4gICAqIFRoaXMgaXMgaG93IHRoZSB0b29sIHdpbGwgYmUgY2FsbGVkIGJ5IHRoZSBtb2RlbCBhbmQgaW4gdG9vbF91c2UgYmxvY2tzLlxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuXG4gIGNhY2hlX2NvbnRyb2w/OiBDYWNoZUNvbnRyb2xFcGhlbWVyYWwgfCBudWxsO1xuXG4gIC8qKlxuICAgKiBEZXNjcmlwdGlvbiBvZiB3aGF0IHRoaXMgdG9vbCBkb2VzLlxuICAgKlxuICAgKiBUb29sIGRlc2NyaXB0aW9ucyBzaG91bGQgYmUgYXMgZGV0YWlsZWQgYXMgcG9zc2libGUuIFRoZSBtb3JlIGluZm9ybWF0aW9uIHRoYXRcbiAgICogdGhlIG1vZGVsIGhhcyBhYm91dCB3aGF0IHRoZSB0b29sIGlzIGFuZCBob3cgdG8gdXNlIGl0LCB0aGUgYmV0dGVyIGl0IHdpbGxcbiAgICogcGVyZm9ybS4gWW91IGNhbiB1c2UgbmF0dXJhbCBsYW5ndWFnZSBkZXNjcmlwdGlvbnMgdG8gcmVpbmZvcmNlIGltcG9ydGFudFxuICAgKiBhc3BlY3RzIG9mIHRoZSB0b29sIGlucHV0IEpTT04gc2NoZW1hLlxuICAgKi9cbiAgZGVzY3JpcHRpb24/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBuYW1lc3BhY2UgVG9vbCB7XG4gIC8qKlxuICAgKiBbSlNPTiBzY2hlbWFdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnLykgZm9yIHRoaXMgdG9vbCdzIGlucHV0LlxuICAgKlxuICAgKiBUaGlzIGRlZmluZXMgdGhlIHNoYXBlIG9mIHRoZSBgaW5wdXRgIHRoYXQgeW91ciB0b29sIGFjY2VwdHMgYW5kIHRoYXQgdGhlIG1vZGVsXG4gICAqIHdpbGwgcHJvZHVjZS5cbiAgICovXG4gIGV4cG9ydCBpbnRlcmZhY2UgSW5wdXRTY2hlbWEge1xuICAgIHR5cGU6ICdvYmplY3QnO1xuXG4gICAgcHJvcGVydGllcz86IHVua25vd24gfCBudWxsO1xuICAgIFtrOiBzdHJpbmddOiB1bmtub3duO1xuICB9XG59XG5cbi8qKlxuICogSG93IHRoZSBtb2RlbCBzaG91bGQgdXNlIHRoZSBwcm92aWRlZCB0b29scy4gVGhlIG1vZGVsIGNhbiB1c2UgYSBzcGVjaWZpYyB0b29sLFxuICogYW55IGF2YWlsYWJsZSB0b29sLCBvciBkZWNpZGUgYnkgaXRzZWxmLlxuICovXG5leHBvcnQgdHlwZSBUb29sQ2hvaWNlID0gVG9vbENob2ljZUF1dG8gfCBUb29sQ2hvaWNlQW55IHwgVG9vbENob2ljZVRvb2w7XG5cbi8qKlxuICogVGhlIG1vZGVsIHdpbGwgdXNlIGFueSBhdmFpbGFibGUgdG9vbHMuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbENob2ljZUFueSB7XG4gIHR5cGU6ICdhbnknO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGRpc2FibGUgcGFyYWxsZWwgdG9vbCB1c2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGBmYWxzZWAuIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBtb2RlbCB3aWxsIG91dHB1dCBleGFjdGx5IG9uZSB0b29sXG4gICAqIHVzZS5cbiAgICovXG4gIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRoZSBtb2RlbCB3aWxsIGF1dG9tYXRpY2FsbHkgZGVjaWRlIHdoZXRoZXIgdG8gdXNlIHRvb2xzLlxuICovXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xDaG9pY2VBdXRvIHtcbiAgdHlwZTogJ2F1dG8nO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRvIGRpc2FibGUgcGFyYWxsZWwgdG9vbCB1c2UuXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIGBmYWxzZWAuIElmIHNldCB0byBgdHJ1ZWAsIHRoZSBtb2RlbCB3aWxsIG91dHB1dCBhdCBtb3N0IG9uZSB0b29sXG4gICAqIHVzZS5cbiAgICovXG4gIGRpc2FibGVfcGFyYWxsZWxfdG9vbF91c2U/OiBib29sZWFuO1xufVxuXG4vKipcbiAqIFRoZSBtb2RlbCB3aWxsIHVzZSB0aGUgc3BlY2lmaWVkIHRvb2wgd2l0aCBgdG9vbF9jaG9pY2UubmFtZWAuXG4gKi9cbmV4cG9ydCBpbnRlcmZhY2UgVG9vbENob2ljZVRvb2wge1xuICAvKipcbiAgICogVGhlIG5hbWUgb2YgdGhlIHRvb2wgdG8gdXNlLlxuICAgKi9cbiAgbmFtZTogc3RyaW5nO1xuXG4gIHR5cGU6ICd0b29sJztcblxuICAvKipcbiAgICogV2hldGhlciB0byBkaXNhYmxlIHBhcmFsbGVsIHRvb2wgdXNlLlxuICAgKlxuICAgKiBEZWZhdWx0cyB0byBgZmFsc2VgLiBJZiBzZXQgdG8gYHRydWVgLCB0aGUgbW9kZWwgd2lsbCBvdXRwdXQgZXhhY3RseSBvbmUgdG9vbFxuICAgKiB1c2UuXG4gICAqL1xuICBkaXNhYmxlX3BhcmFsbGVsX3Rvb2xfdXNlPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb29sUmVzdWx0QmxvY2tQYXJhbSB7XG4gIHRvb2xfdXNlX2lkOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3Rvb2xfcmVzdWx0JztcblxuICBjYWNoZV9jb250cm9sPzogQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcblxuICBjb250ZW50Pzogc3RyaW5nIHwgQXJyYXk8VGV4dEJsb2NrUGFyYW0gfCBJbWFnZUJsb2NrUGFyYW0+O1xuXG4gIGlzX2Vycm9yPzogYm9vbGVhbjtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBUb29sVXNlQmxvY2sge1xuICBpZDogc3RyaW5nO1xuXG4gIGlucHV0OiB1bmtub3duO1xuXG4gIG5hbWU6IHN0cmluZztcblxuICB0eXBlOiAndG9vbF91c2UnO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xVc2VCbG9ja1BhcmFtIHtcbiAgaWQ6IHN0cmluZztcblxuICBpbnB1dDogdW5rbm93bjtcblxuICBuYW1lOiBzdHJpbmc7XG5cbiAgdHlwZTogJ3Rvb2xfdXNlJztcblxuICBjYWNoZV9jb250cm9sPzogQ2FjaGVDb250cm9sRXBoZW1lcmFsIHwgbnVsbDtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBVc2FnZSB7XG4gIC8qKlxuICAgKiBUaGUgbnVtYmVyIG9mIGlucHV0IHRva2VucyB1c2VkIHRvIGNyZWF0ZSB0aGUgY2FjaGUgZW50cnkuXG4gICAqL1xuICBjYWNoZV9jcmVhdGlvbl9pbnB1dF90b2tlbnM6IG51bWJlciB8IG51bGw7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2YgaW5wdXQgdG9rZW5zIHJlYWQgZnJvbSB0aGUgY2FjaGUuXG4gICAqL1xuICBjYWNoZV9yZWFkX2lucHV0X3Rva2VuczogbnVtYmVyIHwgbnVsbDtcblxuICAvKipcbiAgICogVGhlIG51bWJlciBvZiBpbnB1dCB0b2tlbnMgd2hpY2ggd2VyZSB1c2VkLlxuICAgKi9cbiAgaW5wdXRfdG9rZW5zOiBudW1iZXI7XG5cbiAgLyoqXG4gICAqIFRoZSBudW1iZXIgb2Ygb3V0cHV0IHRva2VucyB3aGljaCB3ZXJlIHVzZWQuXG4gICAqL1xuICBvdXRwdXRfdG9rZW5zOiBudW1iZXI7XG59XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMgPSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIHwgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZztcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZSB7XG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGdlbmVyYXRlIGJlZm9yZSBzdG9wcGluZy5cbiAgICpcbiAgICogTm90ZSB0aGF0IG91ciBtb2RlbHMgbWF5IHN0b3AgX2JlZm9yZV8gcmVhY2hpbmcgdGhpcyBtYXhpbXVtLiBUaGlzIHBhcmFtZXRlclxuICAgKiBvbmx5IHNwZWNpZmllcyB0aGUgYWJzb2x1dGUgbWF4aW11bSBudW1iZXIgb2YgdG9rZW5zIHRvIGdlbmVyYXRlLlxuICAgKlxuICAgKiBEaWZmZXJlbnQgbW9kZWxzIGhhdmUgZGlmZmVyZW50IG1heGltdW0gdmFsdWVzIGZvciB0aGlzIHBhcmFtZXRlci4gU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgZGV0YWlscy5cbiAgICovXG4gIG1heF90b2tlbnM6IG51bWJlcjtcblxuICAvKipcbiAgICogSW5wdXQgbWVzc2FnZXMuXG4gICAqXG4gICAqIE91ciBtb2RlbHMgYXJlIHRyYWluZWQgdG8gb3BlcmF0ZSBvbiBhbHRlcm5hdGluZyBgdXNlcmAgYW5kIGBhc3Npc3RhbnRgXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zLiBXaGVuIGNyZWF0aW5nIGEgbmV3IGBNZXNzYWdlYCwgeW91IHNwZWNpZnkgdGhlIHByaW9yXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zIHdpdGggdGhlIGBtZXNzYWdlc2AgcGFyYW1ldGVyLCBhbmQgdGhlIG1vZGVsIHRoZW4gZ2VuZXJhdGVzXG4gICAqIHRoZSBuZXh0IGBNZXNzYWdlYCBpbiB0aGUgY29udmVyc2F0aW9uLiBDb25zZWN1dGl2ZSBgdXNlcmAgb3IgYGFzc2lzdGFudGAgdHVybnNcbiAgICogaW4geW91ciByZXF1ZXN0IHdpbGwgYmUgY29tYmluZWQgaW50byBhIHNpbmdsZSB0dXJuLlxuICAgKlxuICAgKiBFYWNoIGlucHV0IG1lc3NhZ2UgbXVzdCBiZSBhbiBvYmplY3Qgd2l0aCBhIGByb2xlYCBhbmQgYGNvbnRlbnRgLiBZb3UgY2FuXG4gICAqIHNwZWNpZnkgYSBzaW5nbGUgYHVzZXJgLXJvbGUgbWVzc2FnZSwgb3IgeW91IGNhbiBpbmNsdWRlIG11bHRpcGxlIGB1c2VyYCBhbmRcbiAgICogYGFzc2lzdGFudGAgbWVzc2FnZXMuXG4gICAqXG4gICAqIElmIHRoZSBmaW5hbCBtZXNzYWdlIHVzZXMgdGhlIGBhc3Npc3RhbnRgIHJvbGUsIHRoZSByZXNwb25zZSBjb250ZW50IHdpbGxcbiAgICogY29udGludWUgaW1tZWRpYXRlbHkgZnJvbSB0aGUgY29udGVudCBpbiB0aGF0IG1lc3NhZ2UuIFRoaXMgY2FuIGJlIHVzZWQgdG9cbiAgICogY29uc3RyYWluIHBhcnQgb2YgdGhlIG1vZGVsJ3MgcmVzcG9uc2UuXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHNpbmdsZSBgdXNlcmAgbWVzc2FnZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XVxuICAgKiBgYGBcbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIG11bHRpcGxlIGNvbnZlcnNhdGlvbmFsIHR1cm5zOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8gdGhlcmUuXCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJIaSwgSSdtIENsYXVkZS4gSG93IGNhbiBJIGhlbHAgeW91P1wiIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkNhbiB5b3UgZXhwbGFpbiBMTE1zIGluIHBsYWluIEVuZ2xpc2g/XCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggYSBwYXJ0aWFsbHktZmlsbGVkIHJlc3BvbnNlIGZyb20gQ2xhdWRlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCJXaGF0J3MgdGhlIEdyZWVrIG5hbWUgZm9yIFN1bj8gKEEpIFNvbCAoQikgSGVsaW9zIChDKSBTdW5cIlxuICAgKiAgIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiVGhlIGJlc3QgYW5zd2VyIGlzIChcIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBgY29udGVudGAgbWF5IGJlIGVpdGhlciBhIHNpbmdsZSBgc3RyaW5nYCBvciBhbiBhcnJheSBvZlxuICAgKiBjb250ZW50IGJsb2Nrcywgd2hlcmUgZWFjaCBibG9jayBoYXMgYSBzcGVjaWZpYyBgdHlwZWAuIFVzaW5nIGEgYHN0cmluZ2AgZm9yXG4gICAqIGBjb250ZW50YCBpcyBzaG9ydGhhbmQgZm9yIGFuIGFycmF5IG9mIG9uZSBjb250ZW50IGJsb2NrIG9mIHR5cGUgYFwidGV4dFwiYC4gVGhlXG4gICAqIGZvbGxvd2luZyBpbnB1dCBtZXNzYWdlcyBhcmUgZXF1aXZhbGVudDpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1cbiAgICogYGBgXG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBbeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XSB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBTdGFydGluZyB3aXRoIENsYXVkZSAzIG1vZGVscywgeW91IGNhbiBhbHNvIHNlbmQgaW1hZ2UgY29udGVudCBibG9ja3M6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICoge1xuICAgKiAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICBcImNvbnRlbnRcIjogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBcInR5cGVcIjogXCJpbWFnZVwiLFxuICAgKiAgICAgICBcInNvdXJjZVwiOiB7XG4gICAqICAgICAgICAgXCJ0eXBlXCI6IFwiYmFzZTY0XCIsXG4gICAqICAgICAgICAgXCJtZWRpYV90eXBlXCI6IFwiaW1hZ2UvanBlZ1wiLFxuICAgKiAgICAgICAgIFwiZGF0YVwiOiBcIi85ai80QUFRU2taSlJnLi4uXCJcbiAgICogICAgICAgfVxuICAgKiAgICAgfSxcbiAgICogICAgIHsgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJXaGF0IGlzIGluIHRoaXMgaW1hZ2U/XCIgfVxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogV2UgY3VycmVudGx5IHN1cHBvcnQgdGhlIGBiYXNlNjRgIHNvdXJjZSB0eXBlIGZvciBpbWFnZXMsIGFuZCB0aGUgYGltYWdlL2pwZWdgLFxuICAgKiBgaW1hZ2UvcG5nYCwgYGltYWdlL2dpZmAsIGFuZCBgaW1hZ2Uvd2VicGAgbWVkaWEgdHlwZXMuXG4gICAqXG4gICAqIFNlZSBbZXhhbXBsZXNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1leGFtcGxlcyN2aXNpb24pIGZvclxuICAgKiBtb3JlIGlucHV0IGV4YW1wbGVzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgaWYgeW91IHdhbnQgdG8gaW5jbHVkZSBhXG4gICAqIFtzeXN0ZW0gcHJvbXB0XShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3N5c3RlbS1wcm9tcHRzKSwgeW91IGNhbiB1c2VcbiAgICogdGhlIHRvcC1sZXZlbCBgc3lzdGVtYCBwYXJhbWV0ZXIgXHUyMDE0IHRoZXJlIGlzIG5vIGBcInN5c3RlbVwiYCByb2xlIGZvciBpbnB1dFxuICAgKiBtZXNzYWdlcyBpbiB0aGUgTWVzc2FnZXMgQVBJLlxuICAgKi9cbiAgbWVzc2FnZXM6IEFycmF5PE1lc3NhZ2VQYXJhbT47XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1vZGVsO1xuXG4gIC8qKlxuICAgKiBBbiBvYmplY3QgZGVzY3JpYmluZyBtZXRhZGF0YSBhYm91dCB0aGUgcmVxdWVzdC5cbiAgICovXG4gIG1ldGFkYXRhPzogTWV0YWRhdGE7XG5cbiAgLyoqXG4gICAqIEN1c3RvbSB0ZXh0IHNlcXVlbmNlcyB0aGF0IHdpbGwgY2F1c2UgdGhlIG1vZGVsIHRvIHN0b3AgZ2VuZXJhdGluZy5cbiAgICpcbiAgICogT3VyIG1vZGVscyB3aWxsIG5vcm1hbGx5IHN0b3Agd2hlbiB0aGV5IGhhdmUgbmF0dXJhbGx5IGNvbXBsZXRlZCB0aGVpciB0dXJuLFxuICAgKiB3aGljaCB3aWxsIHJlc3VsdCBpbiBhIHJlc3BvbnNlIGBzdG9wX3JlYXNvbmAgb2YgYFwiZW5kX3R1cm5cImAuXG4gICAqXG4gICAqIElmIHlvdSB3YW50IHRoZSBtb2RlbCB0byBzdG9wIGdlbmVyYXRpbmcgd2hlbiBpdCBlbmNvdW50ZXJzIGN1c3RvbSBzdHJpbmdzIG9mXG4gICAqIHRleHQsIHlvdSBjYW4gdXNlIHRoZSBgc3RvcF9zZXF1ZW5jZXNgIHBhcmFtZXRlci4gSWYgdGhlIG1vZGVsIGVuY291bnRlcnMgb25lIG9mXG4gICAqIHRoZSBjdXN0b20gc2VxdWVuY2VzLCB0aGUgcmVzcG9uc2UgYHN0b3BfcmVhc29uYCB2YWx1ZSB3aWxsIGJlIGBcInN0b3Bfc2VxdWVuY2VcImBcbiAgICogYW5kIHRoZSByZXNwb25zZSBgc3RvcF9zZXF1ZW5jZWAgdmFsdWUgd2lsbCBjb250YWluIHRoZSBtYXRjaGVkIHN0b3Agc2VxdWVuY2UuXG4gICAqL1xuICBzdG9wX3NlcXVlbmNlcz86IEFycmF5PHN0cmluZz47XG5cbiAgLyoqXG4gICAqIFdoZXRoZXIgdG8gaW5jcmVtZW50YWxseSBzdHJlYW0gdGhlIHJlc3BvbnNlIHVzaW5nIHNlcnZlci1zZW50IGV2ZW50cy5cbiAgICpcbiAgICogU2VlIFtzdHJlYW1pbmddKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1zdHJlYW1pbmcpIGZvclxuICAgKiBkZXRhaWxzLlxuICAgKi9cbiAgc3RyZWFtPzogYm9vbGVhbjtcblxuICAvKipcbiAgICogU3lzdGVtIHByb21wdC5cbiAgICpcbiAgICogQSBzeXN0ZW0gcHJvbXB0IGlzIGEgd2F5IG9mIHByb3ZpZGluZyBjb250ZXh0IGFuZCBpbnN0cnVjdGlvbnMgdG8gQ2xhdWRlLCBzdWNoXG4gICAqIGFzIHNwZWNpZnlpbmcgYSBwYXJ0aWN1bGFyIGdvYWwgb3Igcm9sZS4gU2VlIG91clxuICAgKiBbZ3VpZGUgdG8gc3lzdGVtIHByb21wdHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3Mvc3lzdGVtLXByb21wdHMpLlxuICAgKi9cbiAgc3lzdGVtPzogc3RyaW5nIHwgQXJyYXk8VGV4dEJsb2NrUGFyYW0+O1xuXG4gIC8qKlxuICAgKiBBbW91bnQgb2YgcmFuZG9tbmVzcyBpbmplY3RlZCBpbnRvIHRoZSByZXNwb25zZS5cbiAgICpcbiAgICogRGVmYXVsdHMgdG8gYDEuMGAuIFJhbmdlcyBmcm9tIGAwLjBgIHRvIGAxLjBgLiBVc2UgYHRlbXBlcmF0dXJlYCBjbG9zZXIgdG8gYDAuMGBcbiAgICogZm9yIGFuYWx5dGljYWwgLyBtdWx0aXBsZSBjaG9pY2UsIGFuZCBjbG9zZXIgdG8gYDEuMGAgZm9yIGNyZWF0aXZlIGFuZFxuICAgKiBnZW5lcmF0aXZlIHRhc2tzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgZXZlbiB3aXRoIGB0ZW1wZXJhdHVyZWAgb2YgYDAuMGAsIHRoZSByZXN1bHRzIHdpbGwgbm90IGJlIGZ1bGx5XG4gICAqIGRldGVybWluaXN0aWMuXG4gICAqL1xuICB0ZW1wZXJhdHVyZT86IG51bWJlcjtcblxuICAvKipcbiAgICogSG93IHRoZSBtb2RlbCBzaG91bGQgdXNlIHRoZSBwcm92aWRlZCB0b29scy4gVGhlIG1vZGVsIGNhbiB1c2UgYSBzcGVjaWZpYyB0b29sLFxuICAgKiBhbnkgYXZhaWxhYmxlIHRvb2wsIG9yIGRlY2lkZSBieSBpdHNlbGYuXG4gICAqL1xuICB0b29sX2Nob2ljZT86IFRvb2xDaG9pY2U7XG5cbiAgLyoqXG4gICAqIERlZmluaXRpb25zIG9mIHRvb2xzIHRoYXQgdGhlIG1vZGVsIG1heSB1c2UuXG4gICAqXG4gICAqIElmIHlvdSBpbmNsdWRlIGB0b29sc2AgaW4geW91ciBBUEkgcmVxdWVzdCwgdGhlIG1vZGVsIG1heSByZXR1cm4gYHRvb2xfdXNlYFxuICAgKiBjb250ZW50IGJsb2NrcyB0aGF0IHJlcHJlc2VudCB0aGUgbW9kZWwncyB1c2Ugb2YgdGhvc2UgdG9vbHMuIFlvdSBjYW4gdGhlbiBydW5cbiAgICogdGhvc2UgdG9vbHMgdXNpbmcgdGhlIHRvb2wgaW5wdXQgZ2VuZXJhdGVkIGJ5IHRoZSBtb2RlbCBhbmQgdGhlbiBvcHRpb25hbGx5XG4gICAqIHJldHVybiByZXN1bHRzIGJhY2sgdG8gdGhlIG1vZGVsIHVzaW5nIGB0b29sX3Jlc3VsdGAgY29udGVudCBibG9ja3MuXG4gICAqXG4gICAqIEVhY2ggdG9vbCBkZWZpbml0aW9uIGluY2x1ZGVzOlxuICAgKlxuICAgKiAtIGBuYW1lYDogTmFtZSBvZiB0aGUgdG9vbC5cbiAgICogLSBgZGVzY3JpcHRpb25gOiBPcHRpb25hbCwgYnV0IHN0cm9uZ2x5LXJlY29tbWVuZGVkIGRlc2NyaXB0aW9uIG9mIHRoZSB0b29sLlxuICAgKiAtIGBpbnB1dF9zY2hlbWFgOiBbSlNPTiBzY2hlbWFdKGh0dHBzOi8vanNvbi1zY2hlbWEub3JnLykgZm9yIHRoZSB0b29sIGBpbnB1dGBcbiAgICogICBzaGFwZSB0aGF0IHRoZSBtb2RlbCB3aWxsIHByb2R1Y2UgaW4gYHRvb2xfdXNlYCBvdXRwdXQgY29udGVudCBibG9ja3MuXG4gICAqXG4gICAqIEZvciBleGFtcGxlLCBpZiB5b3UgZGVmaW5lZCBgdG9vbHNgIGFzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcIm5hbWVcIjogXCJnZXRfc3RvY2tfcHJpY2VcIixcbiAgICogICAgIFwiZGVzY3JpcHRpb25cIjogXCJHZXQgdGhlIGN1cnJlbnQgc3RvY2sgcHJpY2UgZm9yIGEgZ2l2ZW4gdGlja2VyIHN5bWJvbC5cIixcbiAgICogICAgIFwiaW5wdXRfc2NoZW1hXCI6IHtcbiAgICogICAgICAgXCJ0eXBlXCI6IFwib2JqZWN0XCIsXG4gICAqICAgICAgIFwicHJvcGVydGllc1wiOiB7XG4gICAqICAgICAgICAgXCJ0aWNrZXJcIjoge1xuICAgKiAgICAgICAgICAgXCJ0eXBlXCI6IFwic3RyaW5nXCIsXG4gICAqICAgICAgICAgICBcImRlc2NyaXB0aW9uXCI6IFwiVGhlIHN0b2NrIHRpY2tlciBzeW1ib2wsIGUuZy4gQUFQTCBmb3IgQXBwbGUgSW5jLlwiXG4gICAqICAgICAgICAgfVxuICAgKiAgICAgICB9LFxuICAgKiAgICAgICBcInJlcXVpcmVkXCI6IFtcInRpY2tlclwiXVxuICAgKiAgICAgfVxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogQW5kIHRoZW4gYXNrZWQgdGhlIG1vZGVsIFwiV2hhdCdzIHRoZSBTJlAgNTAwIGF0IHRvZGF5P1wiLCB0aGUgbW9kZWwgbWlnaHQgcHJvZHVjZVxuICAgKiBgdG9vbF91c2VgIGNvbnRlbnQgYmxvY2tzIGluIHRoZSByZXNwb25zZSBsaWtlIHRoaXM6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwidHlwZVwiOiBcInRvb2xfdXNlXCIsXG4gICAqICAgICBcImlkXCI6IFwidG9vbHVfMDFEN0ZMcmZoNEdZcTd5VDFVTEZleU1WXCIsXG4gICAqICAgICBcIm5hbWVcIjogXCJnZXRfc3RvY2tfcHJpY2VcIixcbiAgICogICAgIFwiaW5wdXRcIjogeyBcInRpY2tlclwiOiBcIl5HU1BDXCIgfVxuICAgKiAgIH1cbiAgICogXVxuICAgKiBgYGBcbiAgICpcbiAgICogWW91IG1pZ2h0IHRoZW4gcnVuIHlvdXIgYGdldF9zdG9ja19wcmljZWAgdG9vbCB3aXRoIGB7XCJ0aWNrZXJcIjogXCJeR1NQQ1wifWAgYXMgYW5cbiAgICogaW5wdXQsIGFuZCByZXR1cm4gdGhlIGZvbGxvd2luZyBiYWNrIHRvIHRoZSBtb2RlbCBpbiBhIHN1YnNlcXVlbnQgYHVzZXJgXG4gICAqIG1lc3NhZ2U6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogW1xuICAgKiAgIHtcbiAgICogICAgIFwidHlwZVwiOiBcInRvb2xfcmVzdWx0XCIsXG4gICAqICAgICBcInRvb2xfdXNlX2lkXCI6IFwidG9vbHVfMDFEN0ZMcmZoNEdZcTd5VDFVTEZleU1WXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCIyNTkuNzUgVVNEXCJcbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFRvb2xzIGNhbiBiZSB1c2VkIGZvciB3b3JrZmxvd3MgdGhhdCBpbmNsdWRlIHJ1bm5pbmcgY2xpZW50LXNpZGUgdG9vbHMgYW5kXG4gICAqIGZ1bmN0aW9ucywgb3IgbW9yZSBnZW5lcmFsbHkgd2hlbmV2ZXIgeW91IHdhbnQgdGhlIG1vZGVsIHRvIHByb2R1Y2UgYSBwYXJ0aWN1bGFyXG4gICAqIEpTT04gc3RydWN0dXJlIG9mIG91dHB1dC5cbiAgICpcbiAgICogU2VlIG91ciBbZ3VpZGVdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvdG9vbC11c2UpIGZvciBtb3JlIGRldGFpbHMuXG4gICAqL1xuICB0b29scz86IEFycmF5PFRvb2w+O1xuXG4gIC8qKlxuICAgKiBPbmx5IHNhbXBsZSBmcm9tIHRoZSB0b3AgSyBvcHRpb25zIGZvciBlYWNoIHN1YnNlcXVlbnQgdG9rZW4uXG4gICAqXG4gICAqIFVzZWQgdG8gcmVtb3ZlIFwibG9uZyB0YWlsXCIgbG93IHByb2JhYmlsaXR5IHJlc3BvbnNlcy5cbiAgICogW0xlYXJuIG1vcmUgdGVjaG5pY2FsIGRldGFpbHMgaGVyZV0oaHR0cHM6Ly90b3dhcmRzZGF0YXNjaWVuY2UuY29tL2hvdy10by1zYW1wbGUtZnJvbS1sYW5ndWFnZS1tb2RlbHMtNjgyYmNlYjk3Mjc3KS5cbiAgICpcbiAgICogUmVjb21tZW5kZWQgZm9yIGFkdmFuY2VkIHVzZSBjYXNlcyBvbmx5LiBZb3UgdXN1YWxseSBvbmx5IG5lZWQgdG8gdXNlXG4gICAqIGB0ZW1wZXJhdHVyZWAuXG4gICAqL1xuICB0b3Bfaz86IG51bWJlcjtcblxuICAvKipcbiAgICogVXNlIG51Y2xldXMgc2FtcGxpbmcuXG4gICAqXG4gICAqIEluIG51Y2xldXMgc2FtcGxpbmcsIHdlIGNvbXB1dGUgdGhlIGN1bXVsYXRpdmUgZGlzdHJpYnV0aW9uIG92ZXIgYWxsIHRoZSBvcHRpb25zXG4gICAqIGZvciBlYWNoIHN1YnNlcXVlbnQgdG9rZW4gaW4gZGVjcmVhc2luZyBwcm9iYWJpbGl0eSBvcmRlciBhbmQgY3V0IGl0IG9mZiBvbmNlIGl0XG4gICAqIHJlYWNoZXMgYSBwYXJ0aWN1bGFyIHByb2JhYmlsaXR5IHNwZWNpZmllZCBieSBgdG9wX3BgLiBZb3Ugc2hvdWxkIGVpdGhlciBhbHRlclxuICAgKiBgdGVtcGVyYXR1cmVgIG9yIGB0b3BfcGAsIGJ1dCBub3QgYm90aC5cbiAgICpcbiAgICogUmVjb21tZW5kZWQgZm9yIGFkdmFuY2VkIHVzZSBjYXNlcyBvbmx5LiBZb3UgdXN1YWxseSBvbmx5IG5lZWQgdG8gdXNlXG4gICAqIGB0ZW1wZXJhdHVyZWAuXG4gICAqL1xuICB0b3BfcD86IG51bWJlcjtcbn1cblxuZXhwb3J0IG5hbWVzcGFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIHtcbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBgQW50aHJvcGljLk1lc3NhZ2VzLlRvb2xDaG9pY2VBdXRvYCBpbnN0ZWFkXG4gICAqL1xuICBleHBvcnQgdHlwZSBNZXRhZGF0YSA9IE1lc3NhZ2VzQVBJLk1ldGFkYXRhO1xuXG4gIC8qKlxuICAgKiBAZGVwcmVjYXRlZCB1c2UgYEFudGhyb3BpYy5NZXNzYWdlcy5Ub29sQ2hvaWNlQXV0b2AgaW5zdGVhZFxuICAgKi9cbiAgZXhwb3J0IHR5cGUgVG9vbENob2ljZUF1dG8gPSBNZXNzYWdlc0FQSS5Ub29sQ2hvaWNlQXV0bztcblxuICAvKipcbiAgICogQGRlcHJlY2F0ZWQgdXNlIGBBbnRocm9waWMuTWVzc2FnZXMuVG9vbENob2ljZUFueWAgaW5zdGVhZFxuICAgKi9cbiAgZXhwb3J0IHR5cGUgVG9vbENob2ljZUFueSA9IE1lc3NhZ2VzQVBJLlRvb2xDaG9pY2VBbnk7XG5cbiAgLyoqXG4gICAqIEBkZXByZWNhdGVkIHVzZSBgQW50aHJvcGljLk1lc3NhZ2VzLlRvb2xDaG9pY2VUb29sYCBpbnN0ZWFkXG4gICAqL1xuICBleHBvcnQgdHlwZSBUb29sQ2hvaWNlVG9vbCA9IE1lc3NhZ2VzQVBJLlRvb2xDaG9pY2VUb29sO1xuXG4gIGV4cG9ydCB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgPSBNZXNzYWdlc0FQSS5NZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nO1xuICBleHBvcnQgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nID0gTWVzc2FnZXNBUEkuTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGV4dGVuZHMgTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnQgZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLXN0cmVhbWluZykgZm9yXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW0/OiBmYWxzZTtcbn1cblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGV4dGVuZHMgTWVzc2FnZUNyZWF0ZVBhcmFtc0Jhc2Uge1xuICAvKipcbiAgICogV2hldGhlciB0byBpbmNyZW1lbnRhbGx5IHN0cmVhbSB0aGUgcmVzcG9uc2UgdXNpbmcgc2VydmVyLXNlbnQgZXZlbnRzLlxuICAgKlxuICAgKiBTZWUgW3N0cmVhbWluZ10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vYXBpL21lc3NhZ2VzLXN0cmVhbWluZykgZm9yXG4gICAqIGRldGFpbHMuXG4gICAqL1xuICBzdHJlYW06IHRydWU7XG59XG5cbmV4cG9ydCB0eXBlIE1lc3NhZ2VTdHJlYW1QYXJhbXMgPSBNZXNzYWdlQ3JlYXRlUGFyYW1zQmFzZTtcblxuZXhwb3J0IGludGVyZmFjZSBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMge1xuICAvKipcbiAgICogSW5wdXQgbWVzc2FnZXMuXG4gICAqXG4gICAqIE91ciBtb2RlbHMgYXJlIHRyYWluZWQgdG8gb3BlcmF0ZSBvbiBhbHRlcm5hdGluZyBgdXNlcmAgYW5kIGBhc3Npc3RhbnRgXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zLiBXaGVuIGNyZWF0aW5nIGEgbmV3IGBNZXNzYWdlYCwgeW91IHNwZWNpZnkgdGhlIHByaW9yXG4gICAqIGNvbnZlcnNhdGlvbmFsIHR1cm5zIHdpdGggdGhlIGBtZXNzYWdlc2AgcGFyYW1ldGVyLCBhbmQgdGhlIG1vZGVsIHRoZW4gZ2VuZXJhdGVzXG4gICAqIHRoZSBuZXh0IGBNZXNzYWdlYCBpbiB0aGUgY29udmVyc2F0aW9uLiBDb25zZWN1dGl2ZSBgdXNlcmAgb3IgYGFzc2lzdGFudGAgdHVybnNcbiAgICogaW4geW91ciByZXF1ZXN0IHdpbGwgYmUgY29tYmluZWQgaW50byBhIHNpbmdsZSB0dXJuLlxuICAgKlxuICAgKiBFYWNoIGlucHV0IG1lc3NhZ2UgbXVzdCBiZSBhbiBvYmplY3Qgd2l0aCBhIGByb2xlYCBhbmQgYGNvbnRlbnRgLiBZb3UgY2FuXG4gICAqIHNwZWNpZnkgYSBzaW5nbGUgYHVzZXJgLXJvbGUgbWVzc2FnZSwgb3IgeW91IGNhbiBpbmNsdWRlIG11bHRpcGxlIGB1c2VyYCBhbmRcbiAgICogYGFzc2lzdGFudGAgbWVzc2FnZXMuXG4gICAqXG4gICAqIElmIHRoZSBmaW5hbCBtZXNzYWdlIHVzZXMgdGhlIGBhc3Npc3RhbnRgIHJvbGUsIHRoZSByZXNwb25zZSBjb250ZW50IHdpbGxcbiAgICogY29udGludWUgaW1tZWRpYXRlbHkgZnJvbSB0aGUgY29udGVudCBpbiB0aGF0IG1lc3NhZ2UuIFRoaXMgY2FuIGJlIHVzZWQgdG9cbiAgICogY29uc3RyYWluIHBhcnQgb2YgdGhlIG1vZGVsJ3MgcmVzcG9uc2UuXG4gICAqXG4gICAqIEV4YW1wbGUgd2l0aCBhIHNpbmdsZSBgdXNlcmAgbWVzc2FnZTpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XVxuICAgKiBgYGBcbiAgICpcbiAgICogRXhhbXBsZSB3aXRoIG11bHRpcGxlIGNvbnZlcnNhdGlvbmFsIHR1cm5zOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8gdGhlcmUuXCIgfSxcbiAgICogICB7IFwicm9sZVwiOiBcImFzc2lzdGFudFwiLCBcImNvbnRlbnRcIjogXCJIaSwgSSdtIENsYXVkZS4gSG93IGNhbiBJIGhlbHAgeW91P1wiIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBcIkNhbiB5b3UgZXhwbGFpbiBMTE1zIGluIHBsYWluIEVuZ2xpc2g/XCIgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBFeGFtcGxlIHdpdGggYSBwYXJ0aWFsbHktZmlsbGVkIHJlc3BvbnNlIGZyb20gQ2xhdWRlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInJvbGVcIjogXCJ1c2VyXCIsXG4gICAqICAgICBcImNvbnRlbnRcIjogXCJXaGF0J3MgdGhlIEdyZWVrIG5hbWUgZm9yIFN1bj8gKEEpIFNvbCAoQikgSGVsaW9zIChDKSBTdW5cIlxuICAgKiAgIH0sXG4gICAqICAgeyBcInJvbGVcIjogXCJhc3Npc3RhbnRcIiwgXCJjb250ZW50XCI6IFwiVGhlIGJlc3QgYW5zd2VyIGlzIChcIiB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEVhY2ggaW5wdXQgbWVzc2FnZSBgY29udGVudGAgbWF5IGJlIGVpdGhlciBhIHNpbmdsZSBgc3RyaW5nYCBvciBhbiBhcnJheSBvZlxuICAgKiBjb250ZW50IGJsb2Nrcywgd2hlcmUgZWFjaCBibG9jayBoYXMgYSBzcGVjaWZpYyBgdHlwZWAuIFVzaW5nIGEgYHN0cmluZ2AgZm9yXG4gICAqIGBjb250ZW50YCBpcyBzaG9ydGhhbmQgZm9yIGFuIGFycmF5IG9mIG9uZSBjb250ZW50IGJsb2NrIG9mIHR5cGUgYFwidGV4dFwiYC4gVGhlXG4gICAqIGZvbGxvd2luZyBpbnB1dCBtZXNzYWdlcyBhcmUgZXF1aXZhbGVudDpcbiAgICpcbiAgICogYGBganNvblxuICAgKiB7IFwicm9sZVwiOiBcInVzZXJcIiwgXCJjb250ZW50XCI6IFwiSGVsbG8sIENsYXVkZVwiIH1cbiAgICogYGBgXG4gICAqXG4gICAqIGBgYGpzb25cbiAgICogeyBcInJvbGVcIjogXCJ1c2VyXCIsIFwiY29udGVudFwiOiBbeyBcInR5cGVcIjogXCJ0ZXh0XCIsIFwidGV4dFwiOiBcIkhlbGxvLCBDbGF1ZGVcIiB9XSB9XG4gICAqIGBgYFxuICAgKlxuICAgKiBTdGFydGluZyB3aXRoIENsYXVkZSAzIG1vZGVscywgeW91IGNhbiBhbHNvIHNlbmQgaW1hZ2UgY29udGVudCBibG9ja3M6XG4gICAqXG4gICAqIGBgYGpzb25cbiAgICoge1xuICAgKiAgIFwicm9sZVwiOiBcInVzZXJcIixcbiAgICogICBcImNvbnRlbnRcIjogW1xuICAgKiAgICAge1xuICAgKiAgICAgICBcInR5cGVcIjogXCJpbWFnZVwiLFxuICAgKiAgICAgICBcInNvdXJjZVwiOiB7XG4gICAqICAgICAgICAgXCJ0eXBlXCI6IFwiYmFzZTY0XCIsXG4gICAqICAgICAgICAgXCJtZWRpYV90eXBlXCI6IFwiaW1hZ2UvanBlZ1wiLFxuICAgKiAgICAgICAgIFwiZGF0YVwiOiBcIi85ai80QUFRU2taSlJnLi4uXCJcbiAgICogICAgICAgfVxuICAgKiAgICAgfSxcbiAgICogICAgIHsgXCJ0eXBlXCI6IFwidGV4dFwiLCBcInRleHRcIjogXCJXaGF0IGlzIGluIHRoaXMgaW1hZ2U/XCIgfVxuICAgKiAgIF1cbiAgICogfVxuICAgKiBgYGBcbiAgICpcbiAgICogV2UgY3VycmVudGx5IHN1cHBvcnQgdGhlIGBiYXNlNjRgIHNvdXJjZSB0eXBlIGZvciBpbWFnZXMsIGFuZCB0aGUgYGltYWdlL2pwZWdgLFxuICAgKiBgaW1hZ2UvcG5nYCwgYGltYWdlL2dpZmAsIGFuZCBgaW1hZ2Uvd2VicGAgbWVkaWEgdHlwZXMuXG4gICAqXG4gICAqIFNlZSBbZXhhbXBsZXNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2FwaS9tZXNzYWdlcy1leGFtcGxlcyN2aXNpb24pIGZvclxuICAgKiBtb3JlIGlucHV0IGV4YW1wbGVzLlxuICAgKlxuICAgKiBOb3RlIHRoYXQgaWYgeW91IHdhbnQgdG8gaW5jbHVkZSBhXG4gICAqIFtzeXN0ZW0gcHJvbXB0XShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3N5c3RlbS1wcm9tcHRzKSwgeW91IGNhbiB1c2VcbiAgICogdGhlIHRvcC1sZXZlbCBgc3lzdGVtYCBwYXJhbWV0ZXIgXHUyMDE0IHRoZXJlIGlzIG5vIGBcInN5c3RlbVwiYCByb2xlIGZvciBpbnB1dFxuICAgKiBtZXNzYWdlcyBpbiB0aGUgTWVzc2FnZXMgQVBJLlxuICAgKi9cbiAgbWVzc2FnZXM6IEFycmF5PE1lc3NhZ2VQYXJhbT47XG5cbiAgLyoqXG4gICAqIFRoZSBtb2RlbCB0aGF0IHdpbGwgY29tcGxldGUgeW91ciBwcm9tcHQuXFxuXFxuU2VlXG4gICAqIFttb2RlbHNdKGh0dHBzOi8vZG9jcy5hbnRocm9waWMuY29tL2VuL2RvY3MvbW9kZWxzLW92ZXJ2aWV3KSBmb3IgYWRkaXRpb25hbFxuICAgKiBkZXRhaWxzIGFuZCBvcHRpb25zLlxuICAgKi9cbiAgbW9kZWw6IE1vZGVsO1xuXG4gIC8qKlxuICAgKiBTeXN0ZW0gcHJvbXB0LlxuICAgKlxuICAgKiBBIHN5c3RlbSBwcm9tcHQgaXMgYSB3YXkgb2YgcHJvdmlkaW5nIGNvbnRleHQgYW5kIGluc3RydWN0aW9ucyB0byBDbGF1ZGUsIHN1Y2hcbiAgICogYXMgc3BlY2lmeWluZyBhIHBhcnRpY3VsYXIgZ29hbCBvciByb2xlLiBTZWUgb3VyXG4gICAqIFtndWlkZSB0byBzeXN0ZW0gcHJvbXB0c10oaHR0cHM6Ly9kb2NzLmFudGhyb3BpYy5jb20vZW4vZG9jcy9zeXN0ZW0tcHJvbXB0cykuXG4gICAqL1xuICBzeXN0ZW0/OiBzdHJpbmcgfCBBcnJheTxUZXh0QmxvY2tQYXJhbT47XG5cbiAgLyoqXG4gICAqIEhvdyB0aGUgbW9kZWwgc2hvdWxkIHVzZSB0aGUgcHJvdmlkZWQgdG9vbHMuIFRoZSBtb2RlbCBjYW4gdXNlIGEgc3BlY2lmaWMgdG9vbCxcbiAgICogYW55IGF2YWlsYWJsZSB0b29sLCBvciBkZWNpZGUgYnkgaXRzZWxmLlxuICAgKi9cbiAgdG9vbF9jaG9pY2U/OiBUb29sQ2hvaWNlO1xuXG4gIC8qKlxuICAgKiBEZWZpbml0aW9ucyBvZiB0b29scyB0aGF0IHRoZSBtb2RlbCBtYXkgdXNlLlxuICAgKlxuICAgKiBJZiB5b3UgaW5jbHVkZSBgdG9vbHNgIGluIHlvdXIgQVBJIHJlcXVlc3QsIHRoZSBtb2RlbCBtYXkgcmV0dXJuIGB0b29sX3VzZWBcbiAgICogY29udGVudCBibG9ja3MgdGhhdCByZXByZXNlbnQgdGhlIG1vZGVsJ3MgdXNlIG9mIHRob3NlIHRvb2xzLiBZb3UgY2FuIHRoZW4gcnVuXG4gICAqIHRob3NlIHRvb2xzIHVzaW5nIHRoZSB0b29sIGlucHV0IGdlbmVyYXRlZCBieSB0aGUgbW9kZWwgYW5kIHRoZW4gb3B0aW9uYWxseVxuICAgKiByZXR1cm4gcmVzdWx0cyBiYWNrIHRvIHRoZSBtb2RlbCB1c2luZyBgdG9vbF9yZXN1bHRgIGNvbnRlbnQgYmxvY2tzLlxuICAgKlxuICAgKiBFYWNoIHRvb2wgZGVmaW5pdGlvbiBpbmNsdWRlczpcbiAgICpcbiAgICogLSBgbmFtZWA6IE5hbWUgb2YgdGhlIHRvb2wuXG4gICAqIC0gYGRlc2NyaXB0aW9uYDogT3B0aW9uYWwsIGJ1dCBzdHJvbmdseS1yZWNvbW1lbmRlZCBkZXNjcmlwdGlvbiBvZiB0aGUgdG9vbC5cbiAgICogLSBgaW5wdXRfc2NoZW1hYDogW0pTT04gc2NoZW1hXShodHRwczovL2pzb24tc2NoZW1hLm9yZy8pIGZvciB0aGUgdG9vbCBgaW5wdXRgXG4gICAqICAgc2hhcGUgdGhhdCB0aGUgbW9kZWwgd2lsbCBwcm9kdWNlIGluIGB0b29sX3VzZWAgb3V0cHV0IGNvbnRlbnQgYmxvY2tzLlxuICAgKlxuICAgKiBGb3IgZXhhbXBsZSwgaWYgeW91IGRlZmluZWQgYHRvb2xzYCBhczpcbiAgICpcbiAgICogYGBganNvblxuICAgKiBbXG4gICAqICAge1xuICAgKiAgICAgXCJuYW1lXCI6IFwiZ2V0X3N0b2NrX3ByaWNlXCIsXG4gICAqICAgICBcImRlc2NyaXB0aW9uXCI6IFwiR2V0IHRoZSBjdXJyZW50IHN0b2NrIHByaWNlIGZvciBhIGdpdmVuIHRpY2tlciBzeW1ib2wuXCIsXG4gICAqICAgICBcImlucHV0X3NjaGVtYVwiOiB7XG4gICAqICAgICAgIFwidHlwZVwiOiBcIm9iamVjdFwiLFxuICAgKiAgICAgICBcInByb3BlcnRpZXNcIjoge1xuICAgKiAgICAgICAgIFwidGlja2VyXCI6IHtcbiAgICogICAgICAgICAgIFwidHlwZVwiOiBcInN0cmluZ1wiLFxuICAgKiAgICAgICAgICAgXCJkZXNjcmlwdGlvblwiOiBcIlRoZSBzdG9jayB0aWNrZXIgc3ltYm9sLCBlLmcuIEFBUEwgZm9yIEFwcGxlIEluYy5cIlxuICAgKiAgICAgICAgIH1cbiAgICogICAgICAgfSxcbiAgICogICAgICAgXCJyZXF1aXJlZFwiOiBbXCJ0aWNrZXJcIl1cbiAgICogICAgIH1cbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIEFuZCB0aGVuIGFza2VkIHRoZSBtb2RlbCBcIldoYXQncyB0aGUgUyZQIDUwMCBhdCB0b2RheT9cIiwgdGhlIG1vZGVsIG1pZ2h0IHByb2R1Y2VcbiAgICogYHRvb2xfdXNlYCBjb250ZW50IGJsb2NrcyBpbiB0aGUgcmVzcG9uc2UgbGlrZSB0aGlzOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInR5cGVcIjogXCJ0b29sX3VzZVwiLFxuICAgKiAgICAgXCJpZFwiOiBcInRvb2x1XzAxRDdGTHJmaDRHWXE3eVQxVUxGZXlNVlwiLFxuICAgKiAgICAgXCJuYW1lXCI6IFwiZ2V0X3N0b2NrX3ByaWNlXCIsXG4gICAqICAgICBcImlucHV0XCI6IHsgXCJ0aWNrZXJcIjogXCJeR1NQQ1wiIH1cbiAgICogICB9XG4gICAqIF1cbiAgICogYGBgXG4gICAqXG4gICAqIFlvdSBtaWdodCB0aGVuIHJ1biB5b3VyIGBnZXRfc3RvY2tfcHJpY2VgIHRvb2wgd2l0aCBge1widGlja2VyXCI6IFwiXkdTUENcIn1gIGFzIGFuXG4gICAqIGlucHV0LCBhbmQgcmV0dXJuIHRoZSBmb2xsb3dpbmcgYmFjayB0byB0aGUgbW9kZWwgaW4gYSBzdWJzZXF1ZW50IGB1c2VyYFxuICAgKiBtZXNzYWdlOlxuICAgKlxuICAgKiBgYGBqc29uXG4gICAqIFtcbiAgICogICB7XG4gICAqICAgICBcInR5cGVcIjogXCJ0b29sX3Jlc3VsdFwiLFxuICAgKiAgICAgXCJ0b29sX3VzZV9pZFwiOiBcInRvb2x1XzAxRDdGTHJmaDRHWXE3eVQxVUxGZXlNVlwiLFxuICAgKiAgICAgXCJjb250ZW50XCI6IFwiMjU5Ljc1IFVTRFwiXG4gICAqICAgfVxuICAgKiBdXG4gICAqIGBgYFxuICAgKlxuICAgKiBUb29scyBjYW4gYmUgdXNlZCBmb3Igd29ya2Zsb3dzIHRoYXQgaW5jbHVkZSBydW5uaW5nIGNsaWVudC1zaWRlIHRvb2xzIGFuZFxuICAgKiBmdW5jdGlvbnMsIG9yIG1vcmUgZ2VuZXJhbGx5IHdoZW5ldmVyIHlvdSB3YW50IHRoZSBtb2RlbCB0byBwcm9kdWNlIGEgcGFydGljdWxhclxuICAgKiBKU09OIHN0cnVjdHVyZSBvZiBvdXRwdXQuXG4gICAqXG4gICAqIFNlZSBvdXIgW2d1aWRlXShodHRwczovL2RvY3MuYW50aHJvcGljLmNvbS9lbi9kb2NzL3Rvb2wtdXNlKSBmb3IgbW9yZSBkZXRhaWxzLlxuICAgKi9cbiAgdG9vbHM/OiBBcnJheTxUb29sPjtcbn1cblxuTWVzc2FnZXMuQmF0Y2hlcyA9IEJhdGNoZXM7XG5NZXNzYWdlcy5NZXNzYWdlQmF0Y2hlc1BhZ2UgPSBNZXNzYWdlQmF0Y2hlc1BhZ2U7XG5cbmV4cG9ydCBkZWNsYXJlIG5hbWVzcGFjZSBNZXNzYWdlcyB7XG4gIGV4cG9ydCB7XG4gICAgdHlwZSBCYXNlNjRQREZTb3VyY2UgYXMgQmFzZTY0UERGU291cmNlLFxuICAgIHR5cGUgQ2FjaGVDb250cm9sRXBoZW1lcmFsIGFzIENhY2hlQ29udHJvbEVwaGVtZXJhbCxcbiAgICB0eXBlIENpdGF0aW9uQ2hhckxvY2F0aW9uIGFzIENpdGF0aW9uQ2hhckxvY2F0aW9uLFxuICAgIHR5cGUgQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbSBhcyBDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtLFxuICAgIHR5cGUgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbiBhcyBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uLFxuICAgIHR5cGUgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtIGFzIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSxcbiAgICB0eXBlIENpdGF0aW9uUGFnZUxvY2F0aW9uIGFzIENpdGF0aW9uUGFnZUxvY2F0aW9uLFxuICAgIHR5cGUgQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbSBhcyBDaXRhdGlvblBhZ2VMb2NhdGlvblBhcmFtLFxuICAgIHR5cGUgQ2l0YXRpb25zQ29uZmlnUGFyYW0gYXMgQ2l0YXRpb25zQ29uZmlnUGFyYW0sXG4gICAgdHlwZSBDaXRhdGlvbnNEZWx0YSBhcyBDaXRhdGlvbnNEZWx0YSxcbiAgICB0eXBlIENvbnRlbnRCbG9jayBhcyBDb250ZW50QmxvY2ssXG4gICAgdHlwZSBDb250ZW50QmxvY2tEZWx0YUV2ZW50IGFzIENvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gICAgdHlwZSBDb250ZW50QmxvY2tQYXJhbSBhcyBDb250ZW50QmxvY2tQYXJhbSxcbiAgICB0eXBlIENvbnRlbnRCbG9ja1NvdXJjZSBhcyBDb250ZW50QmxvY2tTb3VyY2UsXG4gICAgdHlwZSBDb250ZW50QmxvY2tTb3VyY2VDb250ZW50IGFzIENvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQsXG4gICAgdHlwZSBDb250ZW50QmxvY2tTdGFydEV2ZW50IGFzIENvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gICAgdHlwZSBDb250ZW50QmxvY2tTdG9wRXZlbnQgYXMgQ29udGVudEJsb2NrU3RvcEV2ZW50LFxuICAgIHR5cGUgRG9jdW1lbnRCbG9ja1BhcmFtIGFzIERvY3VtZW50QmxvY2tQYXJhbSxcbiAgICB0eXBlIEltYWdlQmxvY2tQYXJhbSBhcyBJbWFnZUJsb2NrUGFyYW0sXG4gICAgdHlwZSBJbnB1dEpzb25EZWx0YSBhcyBJbnB1dEpzb25EZWx0YSxcbiAgICB0eXBlIElucHV0SlNPTkRlbHRhIGFzIElucHV0SlNPTkRlbHRhLFxuICAgIHR5cGUgTWVzc2FnZSBhcyBNZXNzYWdlLFxuICAgIHR5cGUgTWVzc2FnZURlbHRhRXZlbnQgYXMgTWVzc2FnZURlbHRhRXZlbnQsXG4gICAgdHlwZSBNZXNzYWdlRGVsdGFVc2FnZSBhcyBNZXNzYWdlRGVsdGFVc2FnZSxcbiAgICB0eXBlIE1lc3NhZ2VQYXJhbSBhcyBNZXNzYWdlUGFyYW0sXG4gICAgdHlwZSBNZXNzYWdlU3RhcnRFdmVudCBhcyBNZXNzYWdlU3RhcnRFdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VTdG9wRXZlbnQgYXMgTWVzc2FnZVN0b3BFdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VTdHJlYW1FdmVudCBhcyBNZXNzYWdlU3RyZWFtRXZlbnQsXG4gICAgdHlwZSBNZXNzYWdlVG9rZW5zQ291bnQgYXMgTWVzc2FnZVRva2Vuc0NvdW50LFxuICAgIHR5cGUgTWV0YWRhdGEgYXMgTWV0YWRhdGEsXG4gICAgdHlwZSBNb2RlbCBhcyBNb2RlbCxcbiAgICB0eXBlIFBsYWluVGV4dFNvdXJjZSBhcyBQbGFpblRleHRTb3VyY2UsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tEZWx0YUV2ZW50IGFzIFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50IGFzIFJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gICAgdHlwZSBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQgYXMgUmF3Q29udGVudEJsb2NrU3RvcEV2ZW50LFxuICAgIHR5cGUgUmF3TWVzc2FnZURlbHRhRXZlbnQgYXMgUmF3TWVzc2FnZURlbHRhRXZlbnQsXG4gICAgdHlwZSBSYXdNZXNzYWdlU3RhcnRFdmVudCBhcyBSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VTdG9wRXZlbnQgYXMgUmF3TWVzc2FnZVN0b3BFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VTdHJlYW1FdmVudCBhcyBSYXdNZXNzYWdlU3RyZWFtRXZlbnQsXG4gICAgdHlwZSBUZXh0QmxvY2sgYXMgVGV4dEJsb2NrLFxuICAgIHR5cGUgVGV4dEJsb2NrUGFyYW0gYXMgVGV4dEJsb2NrUGFyYW0sXG4gICAgdHlwZSBUZXh0Q2l0YXRpb24gYXMgVGV4dENpdGF0aW9uLFxuICAgIHR5cGUgVGV4dENpdGF0aW9uUGFyYW0gYXMgVGV4dENpdGF0aW9uUGFyYW0sXG4gICAgdHlwZSBUZXh0RGVsdGEgYXMgVGV4dERlbHRhLFxuICAgIHR5cGUgVG9vbCBhcyBUb29sLFxuICAgIHR5cGUgVG9vbENob2ljZSBhcyBUb29sQ2hvaWNlLFxuICAgIHR5cGUgVG9vbENob2ljZUFueSBhcyBUb29sQ2hvaWNlQW55LFxuICAgIHR5cGUgVG9vbENob2ljZUF1dG8gYXMgVG9vbENob2ljZUF1dG8sXG4gICAgdHlwZSBUb29sQ2hvaWNlVG9vbCBhcyBUb29sQ2hvaWNlVG9vbCxcbiAgICB0eXBlIFRvb2xSZXN1bHRCbG9ja1BhcmFtIGFzIFRvb2xSZXN1bHRCbG9ja1BhcmFtLFxuICAgIHR5cGUgVG9vbFVzZUJsb2NrIGFzIFRvb2xVc2VCbG9jayxcbiAgICB0eXBlIFRvb2xVc2VCbG9ja1BhcmFtIGFzIFRvb2xVc2VCbG9ja1BhcmFtLFxuICAgIHR5cGUgVXNhZ2UgYXMgVXNhZ2UsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nIGFzIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gICAgdHlwZSBNZXNzYWdlU3RyZWFtUGFyYW1zIGFzIE1lc3NhZ2VTdHJlYW1QYXJhbXMsXG4gICAgdHlwZSBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMgYXMgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICB9O1xuXG4gIGV4cG9ydCB7XG4gICAgQmF0Y2hlcyBhcyBCYXRjaGVzLFxuICAgIHR5cGUgRGVsZXRlZE1lc3NhZ2VCYXRjaCBhcyBEZWxldGVkTWVzc2FnZUJhdGNoLFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoIGFzIE1lc3NhZ2VCYXRjaCxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0IGFzIE1lc3NhZ2VCYXRjaENhbmNlbGVkUmVzdWx0LFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoRXJyb3JlZFJlc3VsdCBhcyBNZXNzYWdlQmF0Y2hFcnJvcmVkUmVzdWx0LFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoRXhwaXJlZFJlc3VsdCBhcyBNZXNzYWdlQmF0Y2hFeHBpcmVkUmVzdWx0LFxuICAgIHR5cGUgTWVzc2FnZUJhdGNoSW5kaXZpZHVhbFJlc3BvbnNlIGFzIE1lc3NhZ2VCYXRjaEluZGl2aWR1YWxSZXNwb25zZSxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaFJlcXVlc3RDb3VudHMgYXMgTWVzc2FnZUJhdGNoUmVxdWVzdENvdW50cyxcbiAgICB0eXBlIE1lc3NhZ2VCYXRjaFJlc3VsdCBhcyBNZXNzYWdlQmF0Y2hSZXN1bHQsXG4gICAgdHlwZSBNZXNzYWdlQmF0Y2hTdWNjZWVkZWRSZXN1bHQgYXMgTWVzc2FnZUJhdGNoU3VjY2VlZGVkUmVzdWx0LFxuICAgIE1lc3NhZ2VCYXRjaGVzUGFnZSBhcyBNZXNzYWdlQmF0Y2hlc1BhZ2UsXG4gICAgdHlwZSBCYXRjaENyZWF0ZVBhcmFtcyBhcyBCYXRjaENyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIEJhdGNoTGlzdFBhcmFtcyBhcyBCYXRjaExpc3RQYXJhbXMsXG4gIH07XG59XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgQVBJUmVzb3VyY2UgfSBmcm9tIFwiLi4vcmVzb3VyY2UuanNcIjtcbmltcG9ydCB7IGlzUmVxdWVzdE9wdGlvbnMgfSBmcm9tIFwiLi4vY29yZS5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi4vY29yZS5qc1wiO1xuaW1wb3J0IHsgUGFnZSwgdHlwZSBQYWdlUGFyYW1zIH0gZnJvbSBcIi4uL3BhZ2luYXRpb24uanNcIjtcblxuZXhwb3J0IGNsYXNzIE1vZGVscyBleHRlbmRzIEFQSVJlc291cmNlIHtcbiAgLyoqXG4gICAqIEdldCBhIHNwZWNpZmljIG1vZGVsLlxuICAgKlxuICAgKiBUaGUgTW9kZWxzIEFQSSByZXNwb25zZSBjYW4gYmUgdXNlZCB0byBkZXRlcm1pbmUgaW5mb3JtYXRpb24gYWJvdXQgYSBzcGVjaWZpY1xuICAgKiBtb2RlbCBvciByZXNvbHZlIGEgbW9kZWwgYWxpYXMgdG8gYSBtb2RlbCBJRC5cbiAgICovXG4gIHJldHJpZXZlKG1vZGVsSWQ6IHN0cmluZywgb3B0aW9ucz86IENvcmUuUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkFQSVByb21pc2U8TW9kZWxJbmZvPiB7XG4gICAgcmV0dXJuIHRoaXMuX2NsaWVudC5nZXQoYC92MS9tb2RlbHMvJHttb2RlbElkfWAsIG9wdGlvbnMpO1xuICB9XG5cbiAgLyoqXG4gICAqIExpc3QgYXZhaWxhYmxlIG1vZGVscy5cbiAgICpcbiAgICogVGhlIE1vZGVscyBBUEkgcmVzcG9uc2UgY2FuIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHdoaWNoIG1vZGVscyBhcmUgYXZhaWxhYmxlIGZvclxuICAgKiB1c2UgaW4gdGhlIEFQSS4gTW9yZSByZWNlbnRseSByZWxlYXNlZCBtb2RlbHMgYXJlIGxpc3RlZCBmaXJzdC5cbiAgICovXG4gIGxpc3QocXVlcnk/OiBNb2RlbExpc3RQYXJhbXMsIG9wdGlvbnM/OiBDb3JlLlJlcXVlc3RPcHRpb25zKTogQ29yZS5QYWdlUHJvbWlzZTxNb2RlbEluZm9zUGFnZSwgTW9kZWxJbmZvPjtcbiAgbGlzdChvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyk6IENvcmUuUGFnZVByb21pc2U8TW9kZWxJbmZvc1BhZ2UsIE1vZGVsSW5mbz47XG4gIGxpc3QoXG4gICAgcXVlcnk6IE1vZGVsTGlzdFBhcmFtcyB8IENvcmUuUmVxdWVzdE9wdGlvbnMgPSB7fSxcbiAgICBvcHRpb25zPzogQ29yZS5SZXF1ZXN0T3B0aW9ucyxcbiAgKTogQ29yZS5QYWdlUHJvbWlzZTxNb2RlbEluZm9zUGFnZSwgTW9kZWxJbmZvPiB7XG4gICAgaWYgKGlzUmVxdWVzdE9wdGlvbnMocXVlcnkpKSB7XG4gICAgICByZXR1cm4gdGhpcy5saXN0KHt9LCBxdWVyeSk7XG4gICAgfVxuICAgIHJldHVybiB0aGlzLl9jbGllbnQuZ2V0QVBJTGlzdCgnL3YxL21vZGVscycsIE1vZGVsSW5mb3NQYWdlLCB7IHF1ZXJ5LCAuLi5vcHRpb25zIH0pO1xuICB9XG59XG5cbmV4cG9ydCBjbGFzcyBNb2RlbEluZm9zUGFnZSBleHRlbmRzIFBhZ2U8TW9kZWxJbmZvPiB7fVxuXG5leHBvcnQgaW50ZXJmYWNlIE1vZGVsSW5mbyB7XG4gIC8qKlxuICAgKiBVbmlxdWUgbW9kZWwgaWRlbnRpZmllci5cbiAgICovXG4gIGlkOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIFJGQyAzMzM5IGRhdGV0aW1lIHN0cmluZyByZXByZXNlbnRpbmcgdGhlIHRpbWUgYXQgd2hpY2ggdGhlIG1vZGVsIHdhcyByZWxlYXNlZC5cbiAgICogTWF5IGJlIHNldCB0byBhbiBlcG9jaCB2YWx1ZSBpZiB0aGUgcmVsZWFzZSBkYXRlIGlzIHVua25vd24uXG4gICAqL1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEEgaHVtYW4tcmVhZGFibGUgbmFtZSBmb3IgdGhlIG1vZGVsLlxuICAgKi9cbiAgZGlzcGxheV9uYW1lOiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIE9iamVjdCB0eXBlLlxuICAgKlxuICAgKiBGb3IgTW9kZWxzLCB0aGlzIGlzIGFsd2F5cyBgXCJtb2RlbFwiYC5cbiAgICovXG4gIHR5cGU6ICdtb2RlbCc7XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgTW9kZWxMaXN0UGFyYW1zIGV4dGVuZHMgUGFnZVBhcmFtcyB7fVxuXG5Nb2RlbHMuTW9kZWxJbmZvc1BhZ2UgPSBNb2RlbEluZm9zUGFnZTtcblxuZXhwb3J0IGRlY2xhcmUgbmFtZXNwYWNlIE1vZGVscyB7XG4gIGV4cG9ydCB7XG4gICAgdHlwZSBNb2RlbEluZm8gYXMgTW9kZWxJbmZvLFxuICAgIE1vZGVsSW5mb3NQYWdlIGFzIE1vZGVsSW5mb3NQYWdlLFxuICAgIHR5cGUgTW9kZWxMaXN0UGFyYW1zIGFzIE1vZGVsTGlzdFBhcmFtcyxcbiAgfTtcbn1cbiIsICIvLyBGaWxlIGdlbmVyYXRlZCBmcm9tIG91ciBPcGVuQVBJIHNwZWMgYnkgU3RhaW5sZXNzLiBTZWUgQ09OVFJJQlVUSU5HLm1kIGZvciBkZXRhaWxzLlxuXG5leHBvcnQgKiBmcm9tIFwiLi9zaGFyZWQuanNcIjtcbmV4cG9ydCB7XG4gIEJldGEsXG4gIHR5cGUgQW50aHJvcGljQmV0YSxcbiAgdHlwZSBCZXRhQVBJRXJyb3IsXG4gIHR5cGUgQmV0YUF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gIHR5cGUgQmV0YUJpbGxpbmdFcnJvcixcbiAgdHlwZSBCZXRhRXJyb3IsXG4gIHR5cGUgQmV0YUVycm9yUmVzcG9uc2UsXG4gIHR5cGUgQmV0YUdhdGV3YXlUaW1lb3V0RXJyb3IsXG4gIHR5cGUgQmV0YUludmFsaWRSZXF1ZXN0RXJyb3IsXG4gIHR5cGUgQmV0YU5vdEZvdW5kRXJyb3IsXG4gIHR5cGUgQmV0YU92ZXJsb2FkZWRFcnJvcixcbiAgdHlwZSBCZXRhUGVybWlzc2lvbkVycm9yLFxuICB0eXBlIEJldGFSYXRlTGltaXRFcnJvcixcbn0gZnJvbSBcIi4vYmV0YS9iZXRhLmpzXCI7XG5leHBvcnQge1xuICBDb21wbGV0aW9ucyxcbiAgdHlwZSBDb21wbGV0aW9uLFxuICB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gIHR5cGUgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgdHlwZSBDb21wbGV0aW9uQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxufSBmcm9tIFwiLi9jb21wbGV0aW9ucy5qc1wiO1xuZXhwb3J0IHtcbiAgTWVzc2FnZXMsXG4gIHR5cGUgQmFzZTY0UERGU291cmNlLFxuICB0eXBlIENhY2hlQ29udHJvbEVwaGVtZXJhbCxcbiAgdHlwZSBDaXRhdGlvbkNoYXJMb2NhdGlvbixcbiAgdHlwZSBDaXRhdGlvbkNoYXJMb2NhdGlvblBhcmFtLFxuICB0eXBlIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24sXG4gIHR5cGUgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvblBhcmFtLFxuICB0eXBlIENpdGF0aW9uUGFnZUxvY2F0aW9uLFxuICB0eXBlIENpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0sXG4gIHR5cGUgQ2l0YXRpb25zQ29uZmlnUGFyYW0sXG4gIHR5cGUgQ2l0YXRpb25zRGVsdGEsXG4gIHR5cGUgQ29udGVudEJsb2NrLFxuICB0eXBlIENvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gIHR5cGUgQ29udGVudEJsb2NrUGFyYW0sXG4gIHR5cGUgQ29udGVudEJsb2NrU291cmNlLFxuICB0eXBlIENvbnRlbnRCbG9ja1NvdXJjZUNvbnRlbnQsXG4gIHR5cGUgQ29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgdHlwZSBDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gIHR5cGUgRG9jdW1lbnRCbG9ja1BhcmFtLFxuICB0eXBlIEltYWdlQmxvY2tQYXJhbSxcbiAgdHlwZSBJbnB1dEpzb25EZWx0YSxcbiAgdHlwZSBJbnB1dEpTT05EZWx0YSxcbiAgdHlwZSBNZXNzYWdlLFxuICB0eXBlIE1lc3NhZ2VEZWx0YUV2ZW50LFxuICB0eXBlIE1lc3NhZ2VEZWx0YVVzYWdlLFxuICB0eXBlIE1lc3NhZ2VQYXJhbSxcbiAgdHlwZSBNZXNzYWdlU3RhcnRFdmVudCxcbiAgdHlwZSBNZXNzYWdlU3RvcEV2ZW50LFxuICB0eXBlIE1lc3NhZ2VTdHJlYW1FdmVudCxcbiAgdHlwZSBNZXNzYWdlU3RyZWFtUGFyYW1zLFxuICB0eXBlIE1lc3NhZ2VUb2tlbnNDb3VudCxcbiAgdHlwZSBNZXRhZGF0YSxcbiAgdHlwZSBNb2RlbCxcbiAgdHlwZSBQbGFpblRleHRTb3VyY2UsXG4gIHR5cGUgUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgdHlwZSBSYXdDb250ZW50QmxvY2tTdGFydEV2ZW50LFxuICB0eXBlIFJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCxcbiAgdHlwZSBSYXdNZXNzYWdlRGVsdGFFdmVudCxcbiAgdHlwZSBSYXdNZXNzYWdlU3RhcnRFdmVudCxcbiAgdHlwZSBSYXdNZXNzYWdlU3RvcEV2ZW50LFxuICB0eXBlIFJhd01lc3NhZ2VTdHJlYW1FdmVudCxcbiAgdHlwZSBUZXh0QmxvY2ssXG4gIHR5cGUgVGV4dEJsb2NrUGFyYW0sXG4gIHR5cGUgVGV4dENpdGF0aW9uLFxuICB0eXBlIFRleHRDaXRhdGlvblBhcmFtLFxuICB0eXBlIFRleHREZWx0YSxcbiAgdHlwZSBUb29sLFxuICB0eXBlIFRvb2xDaG9pY2UsXG4gIHR5cGUgVG9vbENob2ljZUFueSxcbiAgdHlwZSBUb29sQ2hvaWNlQXV0byxcbiAgdHlwZSBUb29sQ2hvaWNlVG9vbCxcbiAgdHlwZSBUb29sUmVzdWx0QmxvY2tQYXJhbSxcbiAgdHlwZSBUb29sVXNlQmxvY2ssXG4gIHR5cGUgVG9vbFVzZUJsb2NrUGFyYW0sXG4gIHR5cGUgVXNhZ2UsXG4gIHR5cGUgTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgdHlwZSBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gIHR5cGUgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxufSBmcm9tIFwiLi9tZXNzYWdlcy9tZXNzYWdlcy5qc1wiO1xuZXhwb3J0IHsgTW9kZWxJbmZvc1BhZ2UsIE1vZGVscywgdHlwZSBNb2RlbEluZm8sIHR5cGUgTW9kZWxMaXN0UGFyYW1zIH0gZnJvbSBcIi4vbW9kZWxzLmpzXCI7XG4iLCAiLy8gRmlsZSBnZW5lcmF0ZWQgZnJvbSBvdXIgT3BlbkFQSSBzcGVjIGJ5IFN0YWlubGVzcy4gU2VlIENPTlRSSUJVVElORy5tZCBmb3IgZGV0YWlscy5cblxuaW1wb3J0IHsgdHlwZSBBZ2VudCB9IGZyb20gXCIuL19zaGltcy9pbmRleC5qc1wiO1xuaW1wb3J0ICogYXMgQ29yZSBmcm9tIFwiLi9jb3JlLmpzXCI7XG5pbXBvcnQgKiBhcyBFcnJvcnMgZnJvbSBcIi4vZXJyb3IuanNcIjtcbmltcG9ydCAqIGFzIFBhZ2luYXRpb24gZnJvbSBcIi4vcGFnaW5hdGlvbi5qc1wiO1xuaW1wb3J0IHsgdHlwZSBQYWdlUGFyYW1zLCBQYWdlUmVzcG9uc2UgfSBmcm9tIFwiLi9wYWdpbmF0aW9uLmpzXCI7XG5pbXBvcnQgKiBhcyBVcGxvYWRzIGZyb20gXCIuL3VwbG9hZHMuanNcIjtcbmltcG9ydCAqIGFzIEFQSSBmcm9tIFwiLi9yZXNvdXJjZXMvaW5kZXguanNcIjtcbmltcG9ydCB7XG4gIENvbXBsZXRpb24sXG4gIENvbXBsZXRpb25DcmVhdGVQYXJhbXMsXG4gIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcsXG4gIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcsXG4gIENvbXBsZXRpb25zLFxufSBmcm9tIFwiLi9yZXNvdXJjZXMvY29tcGxldGlvbnMuanNcIjtcbmltcG9ydCB7IE1vZGVsSW5mbywgTW9kZWxJbmZvc1BhZ2UsIE1vZGVsTGlzdFBhcmFtcywgTW9kZWxzIH0gZnJvbSBcIi4vcmVzb3VyY2VzL21vZGVscy5qc1wiO1xuaW1wb3J0IHtcbiAgQW50aHJvcGljQmV0YSxcbiAgQmV0YSxcbiAgQmV0YUFQSUVycm9yLFxuICBCZXRhQXV0aGVudGljYXRpb25FcnJvcixcbiAgQmV0YUJpbGxpbmdFcnJvcixcbiAgQmV0YUVycm9yLFxuICBCZXRhRXJyb3JSZXNwb25zZSxcbiAgQmV0YUdhdGV3YXlUaW1lb3V0RXJyb3IsXG4gIEJldGFJbnZhbGlkUmVxdWVzdEVycm9yLFxuICBCZXRhTm90Rm91bmRFcnJvcixcbiAgQmV0YU92ZXJsb2FkZWRFcnJvcixcbiAgQmV0YVBlcm1pc3Npb25FcnJvcixcbiAgQmV0YVJhdGVMaW1pdEVycm9yLFxufSBmcm9tIFwiLi9yZXNvdXJjZXMvYmV0YS9iZXRhLmpzXCI7XG5pbXBvcnQge1xuICBCYXNlNjRQREZTb3VyY2UsXG4gIENhY2hlQ29udHJvbEVwaGVtZXJhbCxcbiAgQ2l0YXRpb25DaGFyTG9jYXRpb24sXG4gIENpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0sXG4gIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24sXG4gIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSxcbiAgQ2l0YXRpb25QYWdlTG9jYXRpb24sXG4gIENpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0sXG4gIENpdGF0aW9uc0NvbmZpZ1BhcmFtLFxuICBDaXRhdGlvbnNEZWx0YSxcbiAgQ29udGVudEJsb2NrLFxuICBDb250ZW50QmxvY2tEZWx0YUV2ZW50LFxuICBDb250ZW50QmxvY2tQYXJhbSxcbiAgQ29udGVudEJsb2NrU291cmNlLFxuICBDb250ZW50QmxvY2tTb3VyY2VDb250ZW50LFxuICBDb250ZW50QmxvY2tTdGFydEV2ZW50LFxuICBDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gIERvY3VtZW50QmxvY2tQYXJhbSxcbiAgSW1hZ2VCbG9ja1BhcmFtLFxuICBJbnB1dEpTT05EZWx0YSxcbiAgTWVzc2FnZSxcbiAgTWVzc2FnZUNvdW50VG9rZW5zUGFyYW1zLFxuICBNZXNzYWdlQ3JlYXRlUGFyYW1zLFxuICBNZXNzYWdlQ3JlYXRlUGFyYW1zTm9uU3RyZWFtaW5nLFxuICBNZXNzYWdlQ3JlYXRlUGFyYW1zU3RyZWFtaW5nLFxuICBNZXNzYWdlRGVsdGFFdmVudCxcbiAgTWVzc2FnZURlbHRhVXNhZ2UsXG4gIE1lc3NhZ2VQYXJhbSxcbiAgTWVzc2FnZVN0YXJ0RXZlbnQsXG4gIE1lc3NhZ2VTdG9wRXZlbnQsXG4gIE1lc3NhZ2VTdHJlYW1FdmVudCxcbiAgTWVzc2FnZVN0cmVhbVBhcmFtcyxcbiAgTWVzc2FnZVRva2Vuc0NvdW50LFxuICBNZXNzYWdlcyxcbiAgTWV0YWRhdGEsXG4gIE1vZGVsLFxuICBQbGFpblRleHRTb3VyY2UsXG4gIFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQsXG4gIFJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQsXG4gIFJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCxcbiAgUmF3TWVzc2FnZURlbHRhRXZlbnQsXG4gIFJhd01lc3NhZ2VTdGFydEV2ZW50LFxuICBSYXdNZXNzYWdlU3RvcEV2ZW50LFxuICBSYXdNZXNzYWdlU3RyZWFtRXZlbnQsXG4gIFRleHRCbG9jayxcbiAgVGV4dEJsb2NrUGFyYW0sXG4gIFRleHRDaXRhdGlvbixcbiAgVGV4dENpdGF0aW9uUGFyYW0sXG4gIFRleHREZWx0YSxcbiAgVG9vbCxcbiAgVG9vbENob2ljZSxcbiAgVG9vbENob2ljZUFueSxcbiAgVG9vbENob2ljZUF1dG8sXG4gIFRvb2xDaG9pY2VUb29sLFxuICBUb29sUmVzdWx0QmxvY2tQYXJhbSxcbiAgVG9vbFVzZUJsb2NrLFxuICBUb29sVXNlQmxvY2tQYXJhbSxcbiAgVXNhZ2UsXG59IGZyb20gXCIuL3Jlc291cmNlcy9tZXNzYWdlcy9tZXNzYWdlcy5qc1wiO1xuXG5leHBvcnQgaW50ZXJmYWNlIENsaWVudE9wdGlvbnMge1xuICAvKipcbiAgICogRGVmYXVsdHMgdG8gcHJvY2Vzcy5lbnZbJ0FOVEhST1BJQ19BUElfS0VZJ10uXG4gICAqL1xuICBhcGlLZXk/OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBEZWZhdWx0cyB0byBwcm9jZXNzLmVudlsnQU5USFJPUElDX0FVVEhfVE9LRU4nXS5cbiAgICovXG4gIGF1dGhUb2tlbj86IHN0cmluZyB8IG51bGwgfCB1bmRlZmluZWQ7XG5cbiAgLyoqXG4gICAqIE92ZXJyaWRlIHRoZSBkZWZhdWx0IGJhc2UgVVJMIGZvciB0aGUgQVBJLCBlLmcuLCBcImh0dHBzOi8vYXBpLmV4YW1wbGUuY29tL3YyL1wiXG4gICAqXG4gICAqIERlZmF1bHRzIHRvIHByb2Nlc3MuZW52WydBTlRIUk9QSUNfQkFTRV9VUkwnXS5cbiAgICovXG4gIGJhc2VVUkw/OiBzdHJpbmcgfCBudWxsIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBUaGUgbWF4aW11bSBhbW91bnQgb2YgdGltZSAoaW4gbWlsbGlzZWNvbmRzKSB0aGF0IHRoZSBjbGllbnQgc2hvdWxkIHdhaXQgZm9yIGEgcmVzcG9uc2VcbiAgICogZnJvbSB0aGUgc2VydmVyIGJlZm9yZSB0aW1pbmcgb3V0IGEgc2luZ2xlIHJlcXVlc3QuXG4gICAqXG4gICAqIE5vdGUgdGhhdCByZXF1ZXN0IHRpbWVvdXRzIGFyZSByZXRyaWVkIGJ5IGRlZmF1bHQsIHNvIGluIGEgd29yc3QtY2FzZSBzY2VuYXJpbyB5b3UgbWF5IHdhaXRcbiAgICogbXVjaCBsb25nZXIgdGhhbiB0aGlzIHRpbWVvdXQgYmVmb3JlIHRoZSBwcm9taXNlIHN1Y2NlZWRzIG9yIGZhaWxzLlxuICAgKi9cbiAgdGltZW91dD86IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogQW4gSFRUUCBhZ2VudCB1c2VkIHRvIG1hbmFnZSBIVFRQKFMpIGNvbm5lY3Rpb25zLlxuICAgKlxuICAgKiBJZiBub3QgcHJvdmlkZWQsIGFuIGFnZW50IHdpbGwgYmUgY29uc3RydWN0ZWQgYnkgZGVmYXVsdCBpbiB0aGUgTm9kZS5qcyBlbnZpcm9ubWVudCxcbiAgICogb3RoZXJ3aXNlIG5vIGFnZW50IGlzIHVzZWQuXG4gICAqL1xuICBodHRwQWdlbnQ/OiBBZ2VudCB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogU3BlY2lmeSBhIGN1c3RvbSBgZmV0Y2hgIGZ1bmN0aW9uIGltcGxlbWVudGF0aW9uLlxuICAgKlxuICAgKiBJZiBub3QgcHJvdmlkZWQsIHdlIHVzZSBgbm9kZS1mZXRjaGAgb24gTm9kZS5qcyBhbmQgb3RoZXJ3aXNlIGV4cGVjdCB0aGF0IGBmZXRjaGAgaXNcbiAgICogZGVmaW5lZCBnbG9iYWxseS5cbiAgICovXG4gIGZldGNoPzogQ29yZS5GZXRjaCB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogVGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIHRoYXQgdGhlIGNsaWVudCB3aWxsIHJldHJ5IGEgcmVxdWVzdCBpbiBjYXNlIG9mIGFcbiAgICogdGVtcG9yYXJ5IGZhaWx1cmUsIGxpa2UgYSBuZXR3b3JrIGVycm9yIG9yIGEgNVhYIGVycm9yIGZyb20gdGhlIHNlcnZlci5cbiAgICpcbiAgICogQGRlZmF1bHQgMlxuICAgKi9cbiAgbWF4UmV0cmllcz86IG51bWJlciB8IHVuZGVmaW5lZDtcblxuICAvKipcbiAgICogRGVmYXVsdCBoZWFkZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqXG4gICAqIFRoZXNlIGNhbiBiZSByZW1vdmVkIGluIGluZGl2aWR1YWwgcmVxdWVzdHMgYnkgZXhwbGljaXRseSBzZXR0aW5nIHRoZVxuICAgKiBoZWFkZXIgdG8gYHVuZGVmaW5lZGAgb3IgYG51bGxgIGluIHJlcXVlc3Qgb3B0aW9ucy5cbiAgICovXG4gIGRlZmF1bHRIZWFkZXJzPzogQ29yZS5IZWFkZXJzIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBEZWZhdWx0IHF1ZXJ5IHBhcmFtZXRlcnMgdG8gaW5jbHVkZSB3aXRoIGV2ZXJ5IHJlcXVlc3QgdG8gdGhlIEFQSS5cbiAgICpcbiAgICogVGhlc2UgY2FuIGJlIHJlbW92ZWQgaW4gaW5kaXZpZHVhbCByZXF1ZXN0cyBieSBleHBsaWNpdGx5IHNldHRpbmcgdGhlXG4gICAqIHBhcmFtIHRvIGB1bmRlZmluZWRgIGluIHJlcXVlc3Qgb3B0aW9ucy5cbiAgICovXG4gIGRlZmF1bHRRdWVyeT86IENvcmUuRGVmYXVsdFF1ZXJ5IHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBCeSBkZWZhdWx0LCBjbGllbnQtc2lkZSB1c2Ugb2YgdGhpcyBsaWJyYXJ5IGlzIG5vdCBhbGxvd2VkLCBhcyBpdCByaXNrcyBleHBvc2luZyB5b3VyIHNlY3JldCBBUEkgY3JlZGVudGlhbHMgdG8gYXR0YWNrZXJzLlxuICAgKiBPbmx5IHNldCB0aGlzIG9wdGlvbiB0byBgdHJ1ZWAgaWYgeW91IHVuZGVyc3RhbmQgdGhlIHJpc2tzIGFuZCBoYXZlIGFwcHJvcHJpYXRlIG1pdGlnYXRpb25zIGluIHBsYWNlLlxuICAgKi9cbiAgZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI/OiBib29sZWFuIHwgdW5kZWZpbmVkO1xufVxuXG4vKipcbiAqIEFQSSBDbGllbnQgZm9yIGludGVyZmFjaW5nIHdpdGggdGhlIEFudGhyb3BpYyBBUEkuXG4gKi9cbmV4cG9ydCBjbGFzcyBBbnRocm9waWMgZXh0ZW5kcyBDb3JlLkFQSUNsaWVudCB7XG4gIGFwaUtleTogc3RyaW5nIHwgbnVsbDtcbiAgYXV0aFRva2VuOiBzdHJpbmcgfCBudWxsO1xuXG4gIHByaXZhdGUgX29wdGlvbnM6IENsaWVudE9wdGlvbnM7XG5cbiAgLyoqXG4gICAqIEFQSSBDbGllbnQgZm9yIGludGVyZmFjaW5nIHdpdGggdGhlIEFudGhyb3BpYyBBUEkuXG4gICAqXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZH0gW29wdHMuYXBpS2V5PXByb2Nlc3MuZW52WydBTlRIUk9QSUNfQVBJX0tFWSddID8/IG51bGxdXG4gICAqIEBwYXJhbSB7c3RyaW5nIHwgbnVsbCB8IHVuZGVmaW5lZH0gW29wdHMuYXV0aFRva2VuPXByb2Nlc3MuZW52WydBTlRIUk9QSUNfQVVUSF9UT0tFTiddID8/IG51bGxdXG4gICAqIEBwYXJhbSB7c3RyaW5nfSBbb3B0cy5iYXNlVVJMPXByb2Nlc3MuZW52WydBTlRIUk9QSUNfQkFTRV9VUkwnXSA/PyBodHRwczovL2FwaS5hbnRocm9waWMuY29tXSAtIE92ZXJyaWRlIHRoZSBkZWZhdWx0IGJhc2UgVVJMIGZvciB0aGUgQVBJLlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMudGltZW91dD0xMCBtaW51dGVzXSAtIFRoZSBtYXhpbXVtIGFtb3VudCBvZiB0aW1lIChpbiBtaWxsaXNlY29uZHMpIHRoZSBjbGllbnQgd2lsbCB3YWl0IGZvciBhIHJlc3BvbnNlIGJlZm9yZSB0aW1pbmcgb3V0LlxuICAgKiBAcGFyYW0ge251bWJlcn0gW29wdHMuaHR0cEFnZW50XSAtIEFuIEhUVFAgYWdlbnQgdXNlZCB0byBtYW5hZ2UgSFRUUChzKSBjb25uZWN0aW9ucy5cbiAgICogQHBhcmFtIHtDb3JlLkZldGNofSBbb3B0cy5mZXRjaF0gLSBTcGVjaWZ5IGEgY3VzdG9tIGBmZXRjaGAgZnVuY3Rpb24gaW1wbGVtZW50YXRpb24uXG4gICAqIEBwYXJhbSB7bnVtYmVyfSBbb3B0cy5tYXhSZXRyaWVzPTJdIC0gVGhlIG1heGltdW0gbnVtYmVyIG9mIHRpbWVzIHRoZSBjbGllbnQgd2lsbCByZXRyeSBhIHJlcXVlc3QuXG4gICAqIEBwYXJhbSB7Q29yZS5IZWFkZXJzfSBvcHRzLmRlZmF1bHRIZWFkZXJzIC0gRGVmYXVsdCBoZWFkZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqIEBwYXJhbSB7Q29yZS5EZWZhdWx0UXVlcnl9IG9wdHMuZGVmYXVsdFF1ZXJ5IC0gRGVmYXVsdCBxdWVyeSBwYXJhbWV0ZXJzIHRvIGluY2x1ZGUgd2l0aCBldmVyeSByZXF1ZXN0IHRvIHRoZSBBUEkuXG4gICAqIEBwYXJhbSB7Ym9vbGVhbn0gW29wdHMuZGFuZ2Vyb3VzbHlBbGxvd0Jyb3dzZXI9ZmFsc2VdIC0gQnkgZGVmYXVsdCwgY2xpZW50LXNpZGUgdXNlIG9mIHRoaXMgbGlicmFyeSBpcyBub3QgYWxsb3dlZCwgYXMgaXQgcmlza3MgZXhwb3NpbmcgeW91ciBzZWNyZXQgQVBJIGNyZWRlbnRpYWxzIHRvIGF0dGFja2Vycy5cbiAgICovXG4gIGNvbnN0cnVjdG9yKHtcbiAgICBiYXNlVVJMID0gQ29yZS5yZWFkRW52KCdBTlRIUk9QSUNfQkFTRV9VUkwnKSxcbiAgICBhcGlLZXkgPSBDb3JlLnJlYWRFbnYoJ0FOVEhST1BJQ19BUElfS0VZJykgPz8gbnVsbCxcbiAgICBhdXRoVG9rZW4gPSBDb3JlLnJlYWRFbnYoJ0FOVEhST1BJQ19BVVRIX1RPS0VOJykgPz8gbnVsbCxcbiAgICAuLi5vcHRzXG4gIH06IENsaWVudE9wdGlvbnMgPSB7fSkge1xuICAgIGNvbnN0IG9wdGlvbnM6IENsaWVudE9wdGlvbnMgPSB7XG4gICAgICBhcGlLZXksXG4gICAgICBhdXRoVG9rZW4sXG4gICAgICAuLi5vcHRzLFxuICAgICAgYmFzZVVSTDogYmFzZVVSTCB8fCBgaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbWAsXG4gICAgfTtcblxuICAgIGlmICghb3B0aW9ucy5kYW5nZXJvdXNseUFsbG93QnJvd3NlciAmJiBDb3JlLmlzUnVubmluZ0luQnJvd3NlcigpKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3JzLkFudGhyb3BpY0Vycm9yKFxuICAgICAgICBcIkl0IGxvb2tzIGxpa2UgeW91J3JlIHJ1bm5pbmcgaW4gYSBicm93c2VyLWxpa2UgZW52aXJvbm1lbnQuXFxuXFxuVGhpcyBpcyBkaXNhYmxlZCBieSBkZWZhdWx0LCBhcyBpdCByaXNrcyBleHBvc2luZyB5b3VyIHNlY3JldCBBUEkgY3JlZGVudGlhbHMgdG8gYXR0YWNrZXJzLlxcbklmIHlvdSB1bmRlcnN0YW5kIHRoZSByaXNrcyBhbmQgaGF2ZSBhcHByb3ByaWF0ZSBtaXRpZ2F0aW9ucyBpbiBwbGFjZSxcXG55b3UgY2FuIHNldCB0aGUgYGRhbmdlcm91c2x5QWxsb3dCcm93c2VyYCBvcHRpb24gdG8gYHRydWVgLCBlLmcuLFxcblxcbm5ldyBBbnRocm9waWMoeyBhcGlLZXksIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyOiB0cnVlIH0pO1xcblwiLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICBzdXBlcih7XG4gICAgICBiYXNlVVJMOiBvcHRpb25zLmJhc2VVUkwhLFxuICAgICAgdGltZW91dDogb3B0aW9ucy50aW1lb3V0ID8/IDYwMDAwMCAvKiAxMCBtaW51dGVzICovLFxuICAgICAgaHR0cEFnZW50OiBvcHRpb25zLmh0dHBBZ2VudCxcbiAgICAgIG1heFJldHJpZXM6IG9wdGlvbnMubWF4UmV0cmllcyxcbiAgICAgIGZldGNoOiBvcHRpb25zLmZldGNoLFxuICAgIH0pO1xuXG4gICAgdGhpcy5fb3B0aW9ucyA9IG9wdGlvbnM7XG5cbiAgICB0aGlzLmFwaUtleSA9IGFwaUtleTtcbiAgICB0aGlzLmF1dGhUb2tlbiA9IGF1dGhUb2tlbjtcbiAgfVxuXG4gIGNvbXBsZXRpb25zOiBBUEkuQ29tcGxldGlvbnMgPSBuZXcgQVBJLkNvbXBsZXRpb25zKHRoaXMpO1xuICBtZXNzYWdlczogQVBJLk1lc3NhZ2VzID0gbmV3IEFQSS5NZXNzYWdlcyh0aGlzKTtcbiAgbW9kZWxzOiBBUEkuTW9kZWxzID0gbmV3IEFQSS5Nb2RlbHModGhpcyk7XG4gIGJldGE6IEFQSS5CZXRhID0gbmV3IEFQSS5CZXRhKHRoaXMpO1xuXG4gIHByb3RlY3RlZCBvdmVycmlkZSBkZWZhdWx0UXVlcnkoKTogQ29yZS5EZWZhdWx0UXVlcnkgfCB1bmRlZmluZWQge1xuICAgIHJldHVybiB0aGlzLl9vcHRpb25zLmRlZmF1bHRRdWVyeTtcbiAgfVxuXG4gIHByb3RlY3RlZCBvdmVycmlkZSBkZWZhdWx0SGVhZGVycyhvcHRzOiBDb3JlLkZpbmFsUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkhlYWRlcnMge1xuICAgIHJldHVybiB7XG4gICAgICAuLi5zdXBlci5kZWZhdWx0SGVhZGVycyhvcHRzKSxcbiAgICAgIC4uLih0aGlzLl9vcHRpb25zLmRhbmdlcm91c2x5QWxsb3dCcm93c2VyID9cbiAgICAgICAgeyAnYW50aHJvcGljLWRhbmdlcm91cy1kaXJlY3QtYnJvd3Nlci1hY2Nlc3MnOiAndHJ1ZScgfVxuICAgICAgOiB1bmRlZmluZWQpLFxuICAgICAgJ2FudGhyb3BpYy12ZXJzaW9uJzogJzIwMjMtMDYtMDEnLFxuICAgICAgLi4udGhpcy5fb3B0aW9ucy5kZWZhdWx0SGVhZGVycyxcbiAgICB9O1xuICB9XG5cbiAgcHJvdGVjdGVkIG92ZXJyaWRlIHZhbGlkYXRlSGVhZGVycyhoZWFkZXJzOiBDb3JlLkhlYWRlcnMsIGN1c3RvbUhlYWRlcnM6IENvcmUuSGVhZGVycykge1xuICAgIGlmICh0aGlzLmFwaUtleSAmJiBoZWFkZXJzWyd4LWFwaS1rZXknXSkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICBpZiAoY3VzdG9tSGVhZGVyc1sneC1hcGkta2V5J10gPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBpZiAodGhpcy5hdXRoVG9rZW4gJiYgaGVhZGVyc1snYXV0aG9yaXphdGlvbiddKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuICAgIGlmIChjdXN0b21IZWFkZXJzWydhdXRob3JpemF0aW9uJ10gPT09IG51bGwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnQ291bGQgbm90IHJlc29sdmUgYXV0aGVudGljYXRpb24gbWV0aG9kLiBFeHBlY3RlZCBlaXRoZXIgYXBpS2V5IG9yIGF1dGhUb2tlbiB0byBiZSBzZXQuIE9yIGZvciBvbmUgb2YgdGhlIFwiWC1BcGktS2V5XCIgb3IgXCJBdXRob3JpemF0aW9uXCIgaGVhZGVycyB0byBiZSBleHBsaWNpdGx5IG9taXR0ZWQnLFxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgb3ZlcnJpZGUgYXV0aEhlYWRlcnMob3B0czogQ29yZS5GaW5hbFJlcXVlc3RPcHRpb25zKTogQ29yZS5IZWFkZXJzIHtcbiAgICBjb25zdCBhcGlLZXlBdXRoID0gdGhpcy5hcGlLZXlBdXRoKG9wdHMpO1xuICAgIGNvbnN0IGJlYXJlckF1dGggPSB0aGlzLmJlYXJlckF1dGgob3B0cyk7XG5cbiAgICBpZiAoYXBpS2V5QXV0aCAhPSBudWxsICYmICFDb3JlLmlzRW1wdHlPYmooYXBpS2V5QXV0aCkpIHtcbiAgICAgIHJldHVybiBhcGlLZXlBdXRoO1xuICAgIH1cblxuICAgIGlmIChiZWFyZXJBdXRoICE9IG51bGwgJiYgIUNvcmUuaXNFbXB0eU9iaihiZWFyZXJBdXRoKSkge1xuICAgICAgcmV0dXJuIGJlYXJlckF1dGg7XG4gICAgfVxuICAgIHJldHVybiB7fTtcbiAgfVxuXG4gIHByb3RlY3RlZCBhcGlLZXlBdXRoKG9wdHM6IENvcmUuRmluYWxSZXF1ZXN0T3B0aW9ucyk6IENvcmUuSGVhZGVycyB7XG4gICAgaWYgKHRoaXMuYXBpS2V5ID09IG51bGwpIHtcbiAgICAgIHJldHVybiB7fTtcbiAgICB9XG4gICAgcmV0dXJuIHsgJ1gtQXBpLUtleSc6IHRoaXMuYXBpS2V5IH07XG4gIH1cblxuICBwcm90ZWN0ZWQgYmVhcmVyQXV0aChvcHRzOiBDb3JlLkZpbmFsUmVxdWVzdE9wdGlvbnMpOiBDb3JlLkhlYWRlcnMge1xuICAgIGlmICh0aGlzLmF1dGhUb2tlbiA9PSBudWxsKSB7XG4gICAgICByZXR1cm4ge307XG4gICAgfVxuICAgIHJldHVybiB7IEF1dGhvcml6YXRpb246IGBCZWFyZXIgJHt0aGlzLmF1dGhUb2tlbn1gIH07XG4gIH1cblxuICBzdGF0aWMgQW50aHJvcGljID0gdGhpcztcbiAgc3RhdGljIEhVTUFOX1BST01QVCA9ICdcXG5cXG5IdW1hbjonO1xuICBzdGF0aWMgQUlfUFJPTVBUID0gJ1xcblxcbkFzc2lzdGFudDonO1xuICBzdGF0aWMgREVGQVVMVF9USU1FT1VUID0gNjAwMDAwOyAvLyAxMCBtaW51dGVzXG5cbiAgc3RhdGljIEFudGhyb3BpY0Vycm9yID0gRXJyb3JzLkFudGhyb3BpY0Vycm9yO1xuICBzdGF0aWMgQVBJRXJyb3IgPSBFcnJvcnMuQVBJRXJyb3I7XG4gIHN0YXRpYyBBUElDb25uZWN0aW9uRXJyb3IgPSBFcnJvcnMuQVBJQ29ubmVjdGlvbkVycm9yO1xuICBzdGF0aWMgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvciA9IEVycm9ycy5BUElDb25uZWN0aW9uVGltZW91dEVycm9yO1xuICBzdGF0aWMgQVBJVXNlckFib3J0RXJyb3IgPSBFcnJvcnMuQVBJVXNlckFib3J0RXJyb3I7XG4gIHN0YXRpYyBOb3RGb3VuZEVycm9yID0gRXJyb3JzLk5vdEZvdW5kRXJyb3I7XG4gIHN0YXRpYyBDb25mbGljdEVycm9yID0gRXJyb3JzLkNvbmZsaWN0RXJyb3I7XG4gIHN0YXRpYyBSYXRlTGltaXRFcnJvciA9IEVycm9ycy5SYXRlTGltaXRFcnJvcjtcbiAgc3RhdGljIEJhZFJlcXVlc3RFcnJvciA9IEVycm9ycy5CYWRSZXF1ZXN0RXJyb3I7XG4gIHN0YXRpYyBBdXRoZW50aWNhdGlvbkVycm9yID0gRXJyb3JzLkF1dGhlbnRpY2F0aW9uRXJyb3I7XG4gIHN0YXRpYyBJbnRlcm5hbFNlcnZlckVycm9yID0gRXJyb3JzLkludGVybmFsU2VydmVyRXJyb3I7XG4gIHN0YXRpYyBQZXJtaXNzaW9uRGVuaWVkRXJyb3IgPSBFcnJvcnMuUGVybWlzc2lvbkRlbmllZEVycm9yO1xuICBzdGF0aWMgVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yID0gRXJyb3JzLlVucHJvY2Vzc2FibGVFbnRpdHlFcnJvcjtcblxuICBzdGF0aWMgdG9GaWxlID0gVXBsb2Fkcy50b0ZpbGU7XG4gIHN0YXRpYyBmaWxlRnJvbVBhdGggPSBVcGxvYWRzLmZpbGVGcm9tUGF0aDtcbn1cblxuQW50aHJvcGljLkNvbXBsZXRpb25zID0gQ29tcGxldGlvbnM7XG5BbnRocm9waWMuTWVzc2FnZXMgPSBNZXNzYWdlcztcbkFudGhyb3BpYy5Nb2RlbHMgPSBNb2RlbHM7XG5BbnRocm9waWMuTW9kZWxJbmZvc1BhZ2UgPSBNb2RlbEluZm9zUGFnZTtcbkFudGhyb3BpYy5CZXRhID0gQmV0YTtcbmV4cG9ydCBkZWNsYXJlIG5hbWVzcGFjZSBBbnRocm9waWMge1xuICBleHBvcnQgdHlwZSBSZXF1ZXN0T3B0aW9ucyA9IENvcmUuUmVxdWVzdE9wdGlvbnM7XG5cbiAgZXhwb3J0IGltcG9ydCBQYWdlID0gUGFnaW5hdGlvbi5QYWdlO1xuICBleHBvcnQgeyB0eXBlIFBhZ2VQYXJhbXMgYXMgUGFnZVBhcmFtcywgdHlwZSBQYWdlUmVzcG9uc2UgYXMgUGFnZVJlc3BvbnNlIH07XG5cbiAgZXhwb3J0IHtcbiAgICBDb21wbGV0aW9ucyBhcyBDb21wbGV0aW9ucyxcbiAgICB0eXBlIENvbXBsZXRpb24gYXMgQ29tcGxldGlvbixcbiAgICB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXMgYXMgQ29tcGxldGlvbkNyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgYXMgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgICB0eXBlIENvbXBsZXRpb25DcmVhdGVQYXJhbXNTdHJlYW1pbmcgYXMgQ29tcGxldGlvbkNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgfTtcblxuICBleHBvcnQge1xuICAgIE1lc3NhZ2VzIGFzIE1lc3NhZ2VzLFxuICAgIHR5cGUgQmFzZTY0UERGU291cmNlIGFzIEJhc2U2NFBERlNvdXJjZSxcbiAgICB0eXBlIENhY2hlQ29udHJvbEVwaGVtZXJhbCBhcyBDYWNoZUNvbnRyb2xFcGhlbWVyYWwsXG4gICAgdHlwZSBDaXRhdGlvbkNoYXJMb2NhdGlvbiBhcyBDaXRhdGlvbkNoYXJMb2NhdGlvbixcbiAgICB0eXBlIENpdGF0aW9uQ2hhckxvY2F0aW9uUGFyYW0gYXMgQ2l0YXRpb25DaGFyTG9jYXRpb25QYXJhbSxcbiAgICB0eXBlIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb24gYXMgQ2l0YXRpb25Db250ZW50QmxvY2tMb2NhdGlvbixcbiAgICB0eXBlIENpdGF0aW9uQ29udGVudEJsb2NrTG9jYXRpb25QYXJhbSBhcyBDaXRhdGlvbkNvbnRlbnRCbG9ja0xvY2F0aW9uUGFyYW0sXG4gICAgdHlwZSBDaXRhdGlvblBhZ2VMb2NhdGlvbiBhcyBDaXRhdGlvblBhZ2VMb2NhdGlvbixcbiAgICB0eXBlIENpdGF0aW9uUGFnZUxvY2F0aW9uUGFyYW0gYXMgQ2l0YXRpb25QYWdlTG9jYXRpb25QYXJhbSxcbiAgICB0eXBlIENpdGF0aW9uc0NvbmZpZ1BhcmFtIGFzIENpdGF0aW9uc0NvbmZpZ1BhcmFtLFxuICAgIHR5cGUgQ2l0YXRpb25zRGVsdGEgYXMgQ2l0YXRpb25zRGVsdGEsXG4gICAgdHlwZSBDb250ZW50QmxvY2sgYXMgQ29udGVudEJsb2NrLFxuICAgIHR5cGUgQ29udGVudEJsb2NrRGVsdGFFdmVudCBhcyBDb250ZW50QmxvY2tEZWx0YUV2ZW50LFxuICAgIHR5cGUgQ29udGVudEJsb2NrUGFyYW0gYXMgQ29udGVudEJsb2NrUGFyYW0sXG4gICAgdHlwZSBDb250ZW50QmxvY2tTb3VyY2UgYXMgQ29udGVudEJsb2NrU291cmNlLFxuICAgIHR5cGUgQ29udGVudEJsb2NrU291cmNlQ29udGVudCBhcyBDb250ZW50QmxvY2tTb3VyY2VDb250ZW50LFxuICAgIHR5cGUgQ29udGVudEJsb2NrU3RhcnRFdmVudCBhcyBDb250ZW50QmxvY2tTdGFydEV2ZW50LFxuICAgIHR5cGUgQ29udGVudEJsb2NrU3RvcEV2ZW50IGFzIENvbnRlbnRCbG9ja1N0b3BFdmVudCxcbiAgICB0eXBlIERvY3VtZW50QmxvY2tQYXJhbSBhcyBEb2N1bWVudEJsb2NrUGFyYW0sXG4gICAgdHlwZSBJbWFnZUJsb2NrUGFyYW0gYXMgSW1hZ2VCbG9ja1BhcmFtLFxuICAgIHR5cGUgSW5wdXRKU09ORGVsdGEgYXMgSW5wdXRKU09ORGVsdGEsXG4gICAgdHlwZSBNZXNzYWdlIGFzIE1lc3NhZ2UsXG4gICAgdHlwZSBNZXNzYWdlRGVsdGFFdmVudCBhcyBNZXNzYWdlRGVsdGFFdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VEZWx0YVVzYWdlIGFzIE1lc3NhZ2VEZWx0YVVzYWdlLFxuICAgIHR5cGUgTWVzc2FnZVBhcmFtIGFzIE1lc3NhZ2VQYXJhbSxcbiAgICB0eXBlIE1lc3NhZ2VTdGFydEV2ZW50IGFzIE1lc3NhZ2VTdGFydEV2ZW50LFxuICAgIHR5cGUgTWVzc2FnZVN0b3BFdmVudCBhcyBNZXNzYWdlU3RvcEV2ZW50LFxuICAgIHR5cGUgTWVzc2FnZVN0cmVhbUV2ZW50IGFzIE1lc3NhZ2VTdHJlYW1FdmVudCxcbiAgICB0eXBlIE1lc3NhZ2VUb2tlbnNDb3VudCBhcyBNZXNzYWdlVG9rZW5zQ291bnQsXG4gICAgdHlwZSBNZXRhZGF0YSBhcyBNZXRhZGF0YSxcbiAgICB0eXBlIE1vZGVsIGFzIE1vZGVsLFxuICAgIHR5cGUgUGxhaW5UZXh0U291cmNlIGFzIFBsYWluVGV4dFNvdXJjZSxcbiAgICB0eXBlIFJhd0NvbnRlbnRCbG9ja0RlbHRhRXZlbnQgYXMgUmF3Q29udGVudEJsb2NrRGVsdGFFdmVudCxcbiAgICB0eXBlIFJhd0NvbnRlbnRCbG9ja1N0YXJ0RXZlbnQgYXMgUmF3Q29udGVudEJsb2NrU3RhcnRFdmVudCxcbiAgICB0eXBlIFJhd0NvbnRlbnRCbG9ja1N0b3BFdmVudCBhcyBSYXdDb250ZW50QmxvY2tTdG9wRXZlbnQsXG4gICAgdHlwZSBSYXdNZXNzYWdlRGVsdGFFdmVudCBhcyBSYXdNZXNzYWdlRGVsdGFFdmVudCxcbiAgICB0eXBlIFJhd01lc3NhZ2VTdGFydEV2ZW50IGFzIFJhd01lc3NhZ2VTdGFydEV2ZW50LFxuICAgIHR5cGUgUmF3TWVzc2FnZVN0b3BFdmVudCBhcyBSYXdNZXNzYWdlU3RvcEV2ZW50LFxuICAgIHR5cGUgUmF3TWVzc2FnZVN0cmVhbUV2ZW50IGFzIFJhd01lc3NhZ2VTdHJlYW1FdmVudCxcbiAgICB0eXBlIFRleHRCbG9jayBhcyBUZXh0QmxvY2ssXG4gICAgdHlwZSBUZXh0QmxvY2tQYXJhbSBhcyBUZXh0QmxvY2tQYXJhbSxcbiAgICB0eXBlIFRleHRDaXRhdGlvbiBhcyBUZXh0Q2l0YXRpb24sXG4gICAgdHlwZSBUZXh0Q2l0YXRpb25QYXJhbSBhcyBUZXh0Q2l0YXRpb25QYXJhbSxcbiAgICB0eXBlIFRleHREZWx0YSBhcyBUZXh0RGVsdGEsXG4gICAgdHlwZSBUb29sIGFzIFRvb2wsXG4gICAgdHlwZSBUb29sQ2hvaWNlIGFzIFRvb2xDaG9pY2UsXG4gICAgdHlwZSBUb29sQ2hvaWNlQW55IGFzIFRvb2xDaG9pY2VBbnksXG4gICAgdHlwZSBUb29sQ2hvaWNlQXV0byBhcyBUb29sQ2hvaWNlQXV0byxcbiAgICB0eXBlIFRvb2xDaG9pY2VUb29sIGFzIFRvb2xDaG9pY2VUb29sLFxuICAgIHR5cGUgVG9vbFJlc3VsdEJsb2NrUGFyYW0gYXMgVG9vbFJlc3VsdEJsb2NrUGFyYW0sXG4gICAgdHlwZSBUb29sVXNlQmxvY2sgYXMgVG9vbFVzZUJsb2NrLFxuICAgIHR5cGUgVG9vbFVzZUJsb2NrUGFyYW0gYXMgVG9vbFVzZUJsb2NrUGFyYW0sXG4gICAgdHlwZSBVc2FnZSBhcyBVc2FnZSxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXMgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtcyxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNOb25TdHJlYW1pbmcgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtc05vblN0cmVhbWluZyxcbiAgICB0eXBlIE1lc3NhZ2VDcmVhdGVQYXJhbXNTdHJlYW1pbmcgYXMgTWVzc2FnZUNyZWF0ZVBhcmFtc1N0cmVhbWluZyxcbiAgICB0eXBlIE1lc3NhZ2VTdHJlYW1QYXJhbXMgYXMgTWVzc2FnZVN0cmVhbVBhcmFtcyxcbiAgICB0eXBlIE1lc3NhZ2VDb3VudFRva2Vuc1BhcmFtcyBhcyBNZXNzYWdlQ291bnRUb2tlbnNQYXJhbXMsXG4gIH07XG5cbiAgZXhwb3J0IHtcbiAgICBNb2RlbHMgYXMgTW9kZWxzLFxuICAgIHR5cGUgTW9kZWxJbmZvIGFzIE1vZGVsSW5mbyxcbiAgICBNb2RlbEluZm9zUGFnZSBhcyBNb2RlbEluZm9zUGFnZSxcbiAgICB0eXBlIE1vZGVsTGlzdFBhcmFtcyBhcyBNb2RlbExpc3RQYXJhbXMsXG4gIH07XG5cbiAgZXhwb3J0IHtcbiAgICBCZXRhIGFzIEJldGEsXG4gICAgdHlwZSBBbnRocm9waWNCZXRhIGFzIEFudGhyb3BpY0JldGEsXG4gICAgdHlwZSBCZXRhQVBJRXJyb3IgYXMgQmV0YUFQSUVycm9yLFxuICAgIHR5cGUgQmV0YUF1dGhlbnRpY2F0aW9uRXJyb3IgYXMgQmV0YUF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gICAgdHlwZSBCZXRhQmlsbGluZ0Vycm9yIGFzIEJldGFCaWxsaW5nRXJyb3IsXG4gICAgdHlwZSBCZXRhRXJyb3IgYXMgQmV0YUVycm9yLFxuICAgIHR5cGUgQmV0YUVycm9yUmVzcG9uc2UgYXMgQmV0YUVycm9yUmVzcG9uc2UsXG4gICAgdHlwZSBCZXRhR2F0ZXdheVRpbWVvdXRFcnJvciBhcyBCZXRhR2F0ZXdheVRpbWVvdXRFcnJvcixcbiAgICB0eXBlIEJldGFJbnZhbGlkUmVxdWVzdEVycm9yIGFzIEJldGFJbnZhbGlkUmVxdWVzdEVycm9yLFxuICAgIHR5cGUgQmV0YU5vdEZvdW5kRXJyb3IgYXMgQmV0YU5vdEZvdW5kRXJyb3IsXG4gICAgdHlwZSBCZXRhT3ZlcmxvYWRlZEVycm9yIGFzIEJldGFPdmVybG9hZGVkRXJyb3IsXG4gICAgdHlwZSBCZXRhUGVybWlzc2lvbkVycm9yIGFzIEJldGFQZXJtaXNzaW9uRXJyb3IsXG4gICAgdHlwZSBCZXRhUmF0ZUxpbWl0RXJyb3IgYXMgQmV0YVJhdGVMaW1pdEVycm9yLFxuICB9O1xuXG4gIGV4cG9ydCB0eXBlIEFQSUVycm9yT2JqZWN0ID0gQVBJLkFQSUVycm9yT2JqZWN0O1xuICBleHBvcnQgdHlwZSBBdXRoZW50aWNhdGlvbkVycm9yID0gQVBJLkF1dGhlbnRpY2F0aW9uRXJyb3I7XG4gIGV4cG9ydCB0eXBlIEJpbGxpbmdFcnJvciA9IEFQSS5CaWxsaW5nRXJyb3I7XG4gIGV4cG9ydCB0eXBlIEVycm9yT2JqZWN0ID0gQVBJLkVycm9yT2JqZWN0O1xuICBleHBvcnQgdHlwZSBFcnJvclJlc3BvbnNlID0gQVBJLkVycm9yUmVzcG9uc2U7XG4gIGV4cG9ydCB0eXBlIEdhdGV3YXlUaW1lb3V0RXJyb3IgPSBBUEkuR2F0ZXdheVRpbWVvdXRFcnJvcjtcbiAgZXhwb3J0IHR5cGUgSW52YWxpZFJlcXVlc3RFcnJvciA9IEFQSS5JbnZhbGlkUmVxdWVzdEVycm9yO1xuICBleHBvcnQgdHlwZSBOb3RGb3VuZEVycm9yID0gQVBJLk5vdEZvdW5kRXJyb3I7XG4gIGV4cG9ydCB0eXBlIE92ZXJsb2FkZWRFcnJvciA9IEFQSS5PdmVybG9hZGVkRXJyb3I7XG4gIGV4cG9ydCB0eXBlIFBlcm1pc3Npb25FcnJvciA9IEFQSS5QZXJtaXNzaW9uRXJyb3I7XG4gIGV4cG9ydCB0eXBlIFJhdGVMaW1pdEVycm9yID0gQVBJLlJhdGVMaW1pdEVycm9yO1xufVxuZXhwb3J0IGNvbnN0IHsgSFVNQU5fUFJPTVBULCBBSV9QUk9NUFQgfSA9IEFudGhyb3BpYztcblxuZXhwb3J0IHsgdG9GaWxlLCBmaWxlRnJvbVBhdGggfSBmcm9tIFwiLi91cGxvYWRzLmpzXCI7XG5leHBvcnQge1xuICBBbnRocm9waWNFcnJvcixcbiAgQVBJRXJyb3IsXG4gIEFQSUNvbm5lY3Rpb25FcnJvcixcbiAgQVBJQ29ubmVjdGlvblRpbWVvdXRFcnJvcixcbiAgQVBJVXNlckFib3J0RXJyb3IsXG4gIE5vdEZvdW5kRXJyb3IsXG4gIENvbmZsaWN0RXJyb3IsXG4gIFJhdGVMaW1pdEVycm9yLFxuICBCYWRSZXF1ZXN0RXJyb3IsXG4gIEF1dGhlbnRpY2F0aW9uRXJyb3IsXG4gIEludGVybmFsU2VydmVyRXJyb3IsXG4gIFBlcm1pc3Npb25EZW5pZWRFcnJvcixcbiAgVW5wcm9jZXNzYWJsZUVudGl0eUVycm9yLFxufSBmcm9tIFwiLi9lcnJvci5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBBbnRocm9waWM7XG4iLCAiLyoqXHJcbiAqIEFudGhyb3BpYyBQcm92aWRlciBJbXBsZW1lbnRhdGlvblxyXG4gKiBcclxuICogVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgQW50aHJvcGljIHByb3ZpZGVyLFxyXG4gKiB3aGljaCBhbGxvd3MgdGhlIHBsdWdpbiB0byBpbnRlcmFjdCB3aXRoIEFudGhyb3BpYydzIEFQSSAoQ2xhdWRlIG1vZGVscylcclxuICogdXNpbmcgdGhlIG9mZmljaWFsIEFudGhyb3BpYyBUeXBlU2NyaXB0IFNESy5cclxuICogXHJcbiAqIENsYXVkZSBtb2RlbHMgaGF2ZSBsYXJnZSBjb250ZXh0IHdpbmRvd3MgYW5kIHN0cm9uZyByZWFzb25pbmcgY2FwYWJpbGl0aWVzLlxyXG4gKiBUaGlzIGltcGxlbWVudGF0aW9uIGhhbmRsZXMgdG9rZW4gY291bnRpbmcgYW5kIGNvbnRleHQgd2luZG93IG1hbmFnZW1lbnQuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTWVzc2FnZSwgQ29tcGxldGlvbk9wdGlvbnMsIENvbm5lY3Rpb25UZXN0UmVzdWx0IH0gZnJvbSAnLi4vc3JjL3R5cGVzJztcclxuaW1wb3J0IHsgQmFzZVByb3ZpZGVyLCBQcm92aWRlckVycm9yLCBQcm92aWRlckVycm9yVHlwZSB9IGZyb20gJy4vYmFzZSc7XHJcbmltcG9ydCBBbnRocm9waWMgZnJvbSAnQGFudGhyb3BpYy1haS9zZGsnO1xyXG5cclxuLyoqXHJcbiAqIEFudGhyb3BpYyBBUEkgcmVzcG9uc2UgdHlwZXNcclxuICogVGhlc2UgYXJlIHNpbXBsaWZpZWQgdmVyc2lvbnMgb2YgdGhlIGFjdHVhbCByZXNwb25zZSB0eXBlc1xyXG4gKi9cclxuaW50ZXJmYWNlIEFudGhyb3BpY01lc3NhZ2Uge1xyXG4gICAgcm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCc7XHJcbiAgICBjb250ZW50OiBzdHJpbmc7XHJcbn1cclxuXHJcbmludGVyZmFjZSBBbnRocm9waWNTdHJlYW1FdmVudCB7XHJcbiAgICB0eXBlOiBzdHJpbmc7XHJcbiAgICBkZWx0YT86IHtcclxuICAgICAgICB0eXBlOiBzdHJpbmc7XHJcbiAgICAgICAgdGV4dDogc3RyaW5nO1xyXG4gICAgfTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE1heGltdW0gY29udGV4dCB3aW5kb3cgc2l6ZXMgZm9yIEFudGhyb3BpYyBtb2RlbHMgKGluIHRva2VucylcclxuICogVGhlc2UgdmFsdWVzIHJlcHJlc2VudCB0aGUgdG90YWwgdG9rZW5zIChpbnB1dCArIG91dHB1dCkgdGhhdCBlYWNoIG1vZGVsIGNhbiBoYW5kbGVcclxuICovXHJcbmNvbnN0IE1PREVMX0NPTlRFWFRfV0lORE9XUzogUmVjb3JkPHN0cmluZywgbnVtYmVyPiA9IHtcclxuICAgICdjbGF1ZGUtMy1vcHVzLTIwMjQwMjI5JzogMjAwMDAwLFxyXG4gICAgJ2NsYXVkZS0zLXNvbm5ldC0yMDI0MDIyOSc6IDIwMDAwMCxcclxuICAgICdjbGF1ZGUtMy1oYWlrdS0yMDI0MDMwNyc6IDIwMDAwMCxcclxuICAgICdjbGF1ZGUtMy03LXNvbm5ldC0yMDI1MDIxOSc6IDIwMDAwMCxcclxuICAgICdjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MTAyMic6IDIwMDAwMCxcclxuICAgICdjbGF1ZGUtMy01LXNvbm5ldC0yMDI0MDYyMCc6IDIwMDAwMCxcclxuICAgICdjbGF1ZGUtMy01LWhhaWt1LTIwMjQxMDIyJzogMjAwMDAwLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIE1heGltdW0gb3V0cHV0IHRva2VucyBwZXIgQW50aHJvcGljIG1vZGVsXHJcbiAqL1xyXG5jb25zdCBNT0RFTF9PVVRQVVRfVE9LRU5fTElNSVRTOiBSZWNvcmQ8c3RyaW5nLCBudW1iZXI+ID0ge1xyXG4gICAgJ2NsYXVkZS0zLTctc29ubmV0LTIwMjUwMjE5JzogNjQwMDAsXHJcbiAgICAnY2xhdWRlLTMtNS1zb25uZXQtMjAyNDEwMjInOiA4MTkyLFxyXG4gICAgJ2NsYXVkZS0zLTUtc29ubmV0LTIwMjQwNjIwJzogODE5MixcclxuICAgICdjbGF1ZGUtMy01LWhhaWt1LTIwMjQxMDIyJzogODE5MixcclxuICAgICdjbGF1ZGUtMy1vcHVzLTIwMjQwMjI5JzogNDA5NixcclxuICAgICdjbGF1ZGUtMy1zb25uZXQtMjAyNDAyMjknOiA4MTkyLCAvLyBmYWxsYmFjayBmb3Igb2xkZXIgc29ubmV0XHJcbiAgICAnY2xhdWRlLTMtaGFpa3UtMjAyNDAzMDcnOiA0MDk2LCAgLy8gZmFsbGJhY2sgZm9yIG9sZGVyIGhhaWt1XHJcbn07XHJcblxyXG4vKipcclxuICogQXBwcm94aW1hdGUgdG9rZW4gY291bnQgZm9yIG1lc3NhZ2VzXHJcbiAqIFxyXG4gKiBUaGlzIGlzIGEgc2ltcGxlIGFwcHJveGltYXRpb24gYmFzZWQgb24gY2hhcmFjdGVyIGNvdW50LlxyXG4gKiBDbGF1ZGUgbW9kZWxzIHVzZSB+My41IGNoYXJzIHBlciB0b2tlbiBvbiBhdmVyYWdlLCBidXQgd2UgdXNlIDQgZm9yIHNhZmV0eS5cclxuICogXHJcbiAqIEBwYXJhbSBtZXNzYWdlcyAtIFRoZSBtZXNzYWdlcyB0byBjb3VudCB0b2tlbnMgZm9yXHJcbiAqIEByZXR1cm5zIEFwcHJveGltYXRlIHRva2VuIGNvdW50XHJcbiAqL1xyXG5mdW5jdGlvbiBlc3RpbWF0ZVRva2VuQ291bnQobWVzc2FnZXM6IE1lc3NhZ2VbXSk6IG51bWJlciB7XHJcbiAgICAvLyBTaW1wbGUgYXBwcm94aW1hdGlvbjogMSB0b2tlbiBcdTIyNDggNCBjaGFyYWN0ZXJzXHJcbiAgICBjb25zdCBDSEFSU19QRVJfVE9LRU4gPSA0O1xyXG4gICAgXHJcbiAgICAvLyBDYWxjdWxhdGUgdG90YWwgY2hhcmFjdGVycyBpbiBhbGwgbWVzc2FnZXNcclxuICAgIGNvbnN0IHRvdGFsQ2hhcnMgPSBtZXNzYWdlcy5yZWR1Y2UoKHRvdGFsLCBtc2cpID0+IHtcclxuICAgICAgICByZXR1cm4gdG90YWwgKyBtc2cuY29udGVudC5sZW5ndGg7XHJcbiAgICB9LCAwKTtcclxuICAgIFxyXG4gICAgLy8gQ29udmVydCB0byB0b2tlbnNcclxuICAgIHJldHVybiBNYXRoLmNlaWwodG90YWxDaGFycyAvIENIQVJTX1BFUl9UT0tFTik7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbXBsZW1lbnRzIHRoZSBBbnRocm9waWMgcHJvdmlkZXIgZnVuY3Rpb25hbGl0eVxyXG4gKiBcclxuICogSGFuZGxlcyBjb21tdW5pY2F0aW9uIHdpdGggQW50aHJvcGljJ3MgQVBJLCBpbmNsdWRpbmc6XHJcbiAqIC0gQ2hhdCBjb21wbGV0aW9uc1xyXG4gKiAtIE1vZGVsIGxpc3RpbmdcclxuICogLSBDb25uZWN0aW9uIHRlc3RpbmdcclxuICogLSBTdHJlYW1pbmcgcmVzcG9uc2VzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQW50aHJvcGljUHJvdmlkZXIgZXh0ZW5kcyBCYXNlUHJvdmlkZXIge1xyXG4gICAgcHJvdGVjdGVkIGFwaUtleTogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIGJhc2VVcmwgPSAnaHR0cHM6Ly9hcGkuYW50aHJvcGljLmNvbS92MSc7XHJcbiAgICBwcm90ZWN0ZWQgbW9kZWw6IHN0cmluZztcclxuICAgIHByaXZhdGUgY2xpZW50OiBBbnRocm9waWM7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBpS2V5OiBzdHJpbmcsIG1vZGVsOiBzdHJpbmcgPSAnY2xhdWRlLTMtc29ubmV0LTIwMjQwMjI5Jykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xyXG4gICAgICAgIHRoaXMuY2xpZW50ID0gbmV3IEFudGhyb3BpYyh7XHJcbiAgICAgICAgICAgIGFwaUtleTogdGhpcy5hcGlLZXksXHJcbiAgICAgICAgICAgIGRhbmdlcm91c2x5QWxsb3dCcm93c2VyOiB0cnVlIC8vIFJlcXVpcmVkIGZvciBicm93c2VyIGVudmlyb25tZW50c1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgY29tcGxldGlvbiBmcm9tIEFudGhyb3BpY1xyXG4gICAgICogXHJcbiAgICAgKiBTZW5kcyB0aGUgY29udmVyc2F0aW9uIHRvIEFudGhyb3BpYyBhbmQgc3RyZWFtcyBiYWNrIHRoZSByZXNwb25zZVxyXG4gICAgICogdXNpbmcgdGhlIG9mZmljaWFsIFNESydzIHN0cmVhbWluZyBzdXBwb3J0LlxyXG4gICAgICogXHJcbiAgICAgKiBBdXRvbWF0aWNhbGx5IGFkanVzdHMgbWF4X3Rva2VucyBpZiB0aGUgcmVxdWVzdCB3b3VsZCBleGNlZWQgdGhlIG1vZGVsJ3MgY29udGV4dCB3aW5kb3cuXHJcbiAgICAgKiBcclxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyAtIFRoZSBjb252ZXJzYXRpb24gaGlzdG9yeVxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgLSBTZXR0aW5ncyBmb3IgdGhpcyBjb21wbGV0aW9uXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldENvbXBsZXRpb24obWVzc2FnZXM6IE1lc3NhZ2VbXSwgb3B0aW9uczogQ29tcGxldGlvbk9wdGlvbnMpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBHZXQgdGhlIGNvbnRleHQgd2luZG93IHNpemUgZm9yIHRoZSBjdXJyZW50IG1vZGVsXHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRleHRXaW5kb3cgPSBNT0RFTF9DT05URVhUX1dJTkRPV1NbdGhpcy5tb2RlbF0gPz8gMjAwMDAwO1xyXG4gICAgICAgICAgICBjb25zdCBvdXRwdXRUb2tlbkxpbWl0ID0gTU9ERUxfT1VUUFVUX1RPS0VOX0xJTUlUU1t0aGlzLm1vZGVsXTtcclxuXHJcbiAgICAgICAgICAgIC8vIEVzdGltYXRlIHRva2VuIGNvdW50IGZvciBpbnB1dCBtZXNzYWdlc1xyXG4gICAgICAgICAgICBjb25zdCBpbnB1dFRva2VucyA9IGVzdGltYXRlVG9rZW5Db3VudChtZXNzYWdlcyk7XHJcblxyXG4gICAgICAgICAgICAvLyBDYWxjdWxhdGUgc2FmZSBtYXhfdG9rZW5zIHZhbHVlXHJcbiAgICAgICAgICAgIGxldCBtYXhUb2tlbnMgPSBvcHRpb25zLm1heFRva2VucyA/PyAxMDAwO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgdGhlIGNvbWJpbmVkIGlucHV0ICsgb3V0cHV0IHRva2VucyB3b3VsZCBleGNlZWQgdGhlIGNvbnRleHQgd2luZG93LFxyXG4gICAgICAgICAgICAvLyBhdXRvbWF0aWNhbGx5IGFkanVzdCBtYXhfdG9rZW5zIHRvIGZpdFxyXG4gICAgICAgICAgICBpZiAoaW5wdXRUb2tlbnMgKyBtYXhUb2tlbnMgPiBjb250ZXh0V2luZG93KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBhZGp1c3RlZE1heFRva2VucyA9IGNvbnRleHRXaW5kb3cgLSBpbnB1dFRva2VucztcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoYWRqdXN0ZWRNYXhUb2tlbnMgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBQcm92aWRlckVycm9yKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBQcm92aWRlckVycm9yVHlwZS5JbnZhbGlkUmVxdWVzdCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYElucHV0IGlzIHRvbyBsb25nIGZvciAke3RoaXMubW9kZWx9J3MgY29udGV4dCB3aW5kb3cuIGAgK1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBgRXN0aW1hdGVkIGlucHV0IHRva2VuczogJHtpbnB1dFRva2Vuc30sIGNvbnRleHQgd2luZG93OiAke2NvbnRleHRXaW5kb3d9YFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coXHJcbiAgICAgICAgICAgICAgICAgICAgYEFkanVzdGluZyBtYXhfdG9rZW5zIGZyb20gJHttYXhUb2tlbnN9IHRvICR7YWRqdXN0ZWRNYXhUb2tlbnN9IGAgK1xyXG4gICAgICAgICAgICAgICAgICAgIGB0byBmaXQgd2l0aGluICR7dGhpcy5tb2RlbH0ncyBjb250ZXh0IHdpbmRvd2BcclxuICAgICAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAgICAgbWF4VG9rZW5zID0gYWRqdXN0ZWRNYXhUb2tlbnM7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEVuZm9yY2UgbW9kZWwgb3V0cHV0IHRva2VuIGxpbWl0XHJcbiAgICAgICAgICAgIGlmIChvdXRwdXRUb2tlbkxpbWl0ICYmIG1heFRva2VucyA+IG91dHB1dFRva2VuTGltaXQpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKFxyXG4gICAgICAgICAgICAgICAgICAgIGBDYXBwaW5nIG1heF90b2tlbnMgZnJvbSAke21heFRva2Vuc30gdG8gbW9kZWwgb3V0cHV0IGxpbWl0ICR7b3V0cHV0VG9rZW5MaW1pdH0gZm9yICR7dGhpcy5tb2RlbH1gXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICAgICAgbWF4VG9rZW5zID0gb3V0cHV0VG9rZW5MaW1pdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gRm9ybWF0IG1lc3NhZ2VzIGZvciBBbnRocm9waWMgQVBJXHJcbiAgICAgICAgICAgIGNvbnN0IHsgc3lzdGVtUHJvbXB0LCBhbnRocm9waWNNZXNzYWdlcyB9ID0gdGhpcy5mb3JtYXRNZXNzYWdlcyhtZXNzYWdlcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBDcmVhdGUgdGhlIHJlcXVlc3QgcGFyYW1ldGVyc1xyXG4gICAgICAgICAgICBjb25zdCByZXF1ZXN0UGFyYW1zOiBhbnkgPSB7XHJcbiAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBhbnRocm9waWNNZXNzYWdlcyxcclxuICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBvcHRpb25zLnRlbXBlcmF0dXJlID8/IDAuNyxcclxuICAgICAgICAgICAgICAgIG1heF90b2tlbnM6IG1heFRva2VucyxcclxuICAgICAgICAgICAgICAgIHN0cmVhbTogdHJ1ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQWRkIHN5c3RlbSBwcm9tcHQgaWYgcHJlc2VudFxyXG4gICAgICAgICAgICBpZiAoc3lzdGVtUHJvbXB0KSB7XHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0UGFyYW1zLnN5c3RlbSA9IHN5c3RlbVByb21wdDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHRoZSBzdHJlYW0gd2l0aCBwcm9wZXIgbWVzc2FnZSBmb3JtYXRcclxuICAgICAgICAgICAgLy8gVXNlIHR5cGUgYXNzZXJ0aW9uIHRvIGJ5cGFzcyBUeXBlU2NyaXB0IGVycm9yc1xyXG4gICAgICAgICAgICBjb25zdCBzdHJlYW0gPSBhd2FpdCB0aGlzLmNsaWVudC5tZXNzYWdlcy5jcmVhdGUocmVxdWVzdFBhcmFtcykgYXMgYW55O1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gUHJvY2VzcyB0aGUgc3RyZWFtIHVzaW5nIGEgdHJ5LWNhdGNoIHRvIGhhbmRsZSBhbnkgc3RyZWFtaW5nIGVycm9yc1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIHRoZSBzdHJlYW0gYmFzZWQgb24gdGhlIEFudGhyb3BpYyBTREsncyBzdHJlYW1pbmcgaW1wbGVtZW50YXRpb25cclxuICAgICAgICAgICAgICAgIC8vIFRoaXMgaXMgYSBzaW1wbGlmaWVkIGFwcHJvYWNoIHRoYXQgc2hvdWxkIHdvcmsgd2l0aCBtb3N0IHZlcnNpb25zIG9mIHRoZSBTREtcclxuICAgICAgICAgICAgICAgIGlmIChzdHJlYW0gJiYgdHlwZW9mIHN0cmVhbSA9PT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoc3RyZWFtLm9uICYmIHR5cGVvZiBzdHJlYW0ub24gPT09ICdmdW5jdGlvbicpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRXZlbnQtYmFzZWQgQVBJXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IG5ldyBQcm9taXNlPHZvaWQ+KChyZXNvbHZlLCByZWplY3QpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5vbignY29udGVudF9ibG9ja19kZWx0YScsIChjaHVuazogYW55KSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNodW5rLmRlbHRhPy50eXBlID09PSAndGV4dF9kZWx0YScgJiYgb3B0aW9ucy5zdHJlYW1DYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN0cmVhbUNhbGxiYWNrKGNodW5rLmRlbHRhLnRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RyZWFtLm9uKCdlbmQnLCByZXNvbHZlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0cmVhbS5vbignZXJyb3InLCByZWplY3QpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKFN5bWJvbC5hc3luY0l0ZXJhdG9yIGluIHN0cmVhbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBBc3luYyBpdGVyYXRvciBBUElcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9yIGF3YWl0IChjb25zdCBjaHVuayBvZiBzdHJlYW0pIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjaHVuay50eXBlID09PSAnY29udGVudF9ibG9ja19kZWx0YScgJiYgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2h1bmsuZGVsdGE/LnR5cGUgPT09ICd0ZXh0X2RlbHRhJyAmJiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBvcHRpb25zLnN0cmVhbUNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zdHJlYW1DYWxsYmFjayhjaHVuay5kZWx0YS50ZXh0KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAob3B0aW9ucy5zdHJlYW1DYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBOb24tc3RyZWFtaW5nIHJlc3BvbnNlIChmYWxsYmFjaylcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdBbnRocm9waWMgcmVzcG9uc2UgaXMgbm90IGEgc3RyZWFtLCBoYW5kbGluZyBhcyByZWd1bGFyIHJlc3BvbnNlJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICgnY29udGVudCcgaW4gc3RyZWFtICYmIHR5cGVvZiBzdHJlYW0uY29udGVudCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2soc3RyZWFtLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChzdHJlYW1FcnJvcikge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBBbnRocm9waWMgc3RyZWFtOicsIHN0cmVhbUVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRocm93IHN0cmVhbUVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgaWYgKGVycm9yIGluc3RhbmNlb2YgUHJvdmlkZXJFcnJvcikge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgPT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0FudGhyb3BpYyBzdHJlYW0gd2FzIGFib3J0ZWQnKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGNhbGxpbmcgQW50aHJvcGljOicsIGVycm9yKTtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGF2YWlsYWJsZSBBbnRocm9waWMgbW9kZWxzXHJcbiAgICAgKiBcclxuICAgICAqIFJldHVybnMgdGhlIGxpc3Qgb2Ygc3VwcG9ydGVkIENsYXVkZSBtb2RlbHMuXHJcbiAgICAgKiBOb3RlOiBBbnRocm9waWMgZG9lc24ndCBoYXZlIGEgbW9kZWxzIGVuZHBvaW50LCBzbyB3ZSByZXR1cm4ga25vd24gbW9kZWxzLlxyXG4gICAgICogVGhpcyBsaXN0IGlzIGJhc2VkIG9uIHRoZSBtb2RlbHMgZGVmaW5lZCBpbiBNT0RFTF9DT05URVhUX1dJTkRPV1MuXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIExpc3Qgb2YgYXZhaWxhYmxlIG1vZGVsIG5hbWVzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEF2YWlsYWJsZU1vZGVscygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gUmV0dXJuIHRoZSBrZXlzIGZyb20gb3VyIE1PREVMX0NPTlRFWFRfV0lORE9XUyBvYmplY3RcclxuICAgICAgICAgICAgLy8gVGhpcyBlbnN1cmVzIHRoZSBtb2RlbCBsaXN0IGlzIHN5bmNocm9uaXplZCB3aXRoIG91ciBjb250ZXh0IHdpbmRvdyBkZWZpbml0aW9uc1xyXG4gICAgICAgICAgICByZXR1cm4gT2JqZWN0LmtleXMoTU9ERUxfQ09OVEVYVF9XSU5ET1dTKTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBnZXR0aW5nIEFudGhyb3BpYyBtb2RlbHM6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8qKlxyXG4gICAgICogRm9ybWF0IG1lc3NhZ2VzIGZvciBBbnRocm9waWMgQVBJXHJcbiAgICAgKiBcclxuICAgICAqIENvbnZlcnRzIGZyb20gdGhlIHBsdWdpbidzIE1lc3NhZ2UgZm9ybWF0IHRvIEFudGhyb3BpYydzIGV4cGVjdGVkIGZvcm1hdC5cclxuICAgICAqIEhhbmRsZXMgc3lzdGVtIG1lc3NhZ2VzIHNwZWNpYWxseSBhcyBBbnRocm9waWMgaGFzIGEgZGlmZmVyZW50IGZvcm1hdC5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIC0gQXJyYXkgb2YgbWVzc2FnZXMgdG8gZm9ybWF0XHJcbiAgICAgKiBAcmV0dXJucyBGb3JtYXR0ZWQgbWVzc2FnZXMgYW5kIHN5c3RlbSBwcm9tcHQgZm9yIEFudGhyb3BpYyBBUElcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBmb3JtYXRNZXNzYWdlcyhtZXNzYWdlczogTWVzc2FnZVtdKTogeyBcclxuICAgICAgICBzeXN0ZW1Qcm9tcHQ6IHN0cmluZyB8IHVuZGVmaW5lZCwgXHJcbiAgICAgICAgYW50aHJvcGljTWVzc2FnZXM6IEFudGhyb3BpY01lc3NhZ2VbXSBcclxuICAgIH0ge1xyXG4gICAgICAgIC8vIEhhbmRsZSBzeXN0ZW0gbWVzc2FnZXMgc3BlY2lhbGx5IGFzIEFudGhyb3BpYyBoYXMgYSBkaWZmZXJlbnQgZm9ybWF0XHJcbiAgICAgICAgY29uc3Qgc3lzdGVtTWVzc2FnZXMgPSBtZXNzYWdlcy5maWx0ZXIobXNnID0+IG1zZy5yb2xlID09PSAnc3lzdGVtJyk7XHJcbiAgICAgICAgY29uc3Qgbm9uU3lzdGVtTWVzc2FnZXMgPSBtZXNzYWdlcy5maWx0ZXIobXNnID0+IG1zZy5yb2xlICE9PSAnc3lzdGVtJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gRXh0cmFjdCBzeXN0ZW0gbWVzc2FnZSBpZiBwcmVzZW50XHJcbiAgICAgICAgY29uc3Qgc3lzdGVtUHJvbXB0ID0gc3lzdGVtTWVzc2FnZXMubGVuZ3RoID4gMCBcclxuICAgICAgICAgICAgPyBzeXN0ZW1NZXNzYWdlcy5tYXAobXNnID0+IG1zZy5jb250ZW50KS5qb2luKCdcXG5cXG4nKVxyXG4gICAgICAgICAgICA6IHVuZGVmaW5lZDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDb252ZXJ0IG1lc3NhZ2VzIHRvIEFudGhyb3BpYyBmb3JtYXRcclxuICAgICAgICAvLyBGaXJzdCwgcHJlcGFyZSBhIGNsZWFuIGFycmF5IG9mIG1lc3NhZ2VzIHdpdGggcHJvcGVyIHJvbGVzXHJcbiAgICAgICAgY29uc3QgYW50aHJvcGljTWVzc2FnZXMgPSBub25TeXN0ZW1NZXNzYWdlcy5tYXAobXNnID0+IHtcclxuICAgICAgICAgICAgLy8gRW5zdXJlIHJvbGUgaXMgZWl0aGVyICd1c2VyJyBvciAnYXNzaXN0YW50J1xyXG4gICAgICAgICAgICBjb25zdCByb2xlID0gKG1zZy5yb2xlID09PSAndXNlcicgfHwgbXNnLnJvbGUgPT09ICdhc3Npc3RhbnQnKSBcclxuICAgICAgICAgICAgICAgID8gbXNnLnJvbGUgYXMgJ3VzZXInIHwgJ2Fzc2lzdGFudCcgIC8vIFR5cGUgYXNzZXJ0aW9uIHRvIGhlbHAgVHlwZVNjcmlwdFxyXG4gICAgICAgICAgICAgICAgOiAndXNlcicgYXMgY29uc3Q7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4geyByb2xlLCBjb250ZW50OiBtc2cuY29udGVudCB9O1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiB7IHN5c3RlbVByb21wdCwgYW50aHJvcGljTWVzc2FnZXMgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlc3QgY29ubmVjdGlvbiB0byBBbnRocm9waWNcclxuICAgICAqIFxyXG4gICAgICogVmVyaWZpZXMgdGhlIEFQSSBrZXkgd29ya3MgYnkgYXR0ZW1wdGluZyBhIHNpbXBsZSBjb21wbGV0aW9uLlxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJucyBUZXN0IHJlc3VsdHMgaW5jbHVkaW5nIHN1Y2Nlc3MvZmFpbHVyZVxyXG4gICAgICovXHJcbiAgICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPENvbm5lY3Rpb25UZXN0UmVzdWx0PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gVGVzdCB0aGUgY29ubmVjdGlvbiBieSBzZW5kaW5nIGEgbWluaW1hbCBtZXNzYWdlXHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMuY2xpZW50Lm1lc3NhZ2VzLmNyZWF0ZSh7XHJcbiAgICAgICAgICAgICAgICBtb2RlbDogdGhpcy5tb2RlbCxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzOiBbeyByb2xlOiAndXNlcicgYXMgY29uc3QsIGNvbnRlbnQ6ICdIaScgfV0sXHJcbiAgICAgICAgICAgICAgICBtYXhfdG9rZW5zOiAxXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgbW9kZWxzID0gYXdhaXQgdGhpcy5nZXRBdmFpbGFibGVNb2RlbHMoKTtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlOiAnU3VjY2Vzc2Z1bGx5IGNvbm5lY3RlZCB0byBBbnRocm9waWMhJyxcclxuICAgICAgICAgICAgICAgIG1vZGVsc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVycm9yUmVzcG9uc2UoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIE9wZW5BSSBQcm92aWRlciBJbXBsZW1lbnRhdGlvblxyXG4gKiBcclxuICogVGhpcyBmaWxlIGNvbnRhaW5zIHRoZSBpbXBsZW1lbnRhdGlvbiBvZiB0aGUgT3BlbkFJIHByb3ZpZGVyLFxyXG4gKiB3aGljaCBhbGxvd3MgdGhlIHBsdWdpbiB0byBpbnRlcmFjdCB3aXRoIE9wZW5BSSdzIEFQSSAoR1BULTMuNSwgR1BULTQsIGV0Yy4pXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTWVzc2FnZSwgQ29tcGxldGlvbk9wdGlvbnMsIENvbm5lY3Rpb25UZXN0UmVzdWx0IH0gZnJvbSAnLi4vc3JjL3R5cGVzJztcclxuaW1wb3J0IHsgQmFzZVByb3ZpZGVyLCBQcm92aWRlckVycm9yLCBQcm92aWRlckVycm9yVHlwZSB9IGZyb20gJy4vYmFzZSc7XHJcblxyXG5pbnRlcmZhY2UgT3BlbkFJUmVzcG9uc2Uge1xyXG4gICAgaWQ6IHN0cmluZztcclxuICAgIG9iamVjdDogc3RyaW5nO1xyXG4gICAgY3JlYXRlZDogbnVtYmVyO1xyXG4gICAgbW9kZWw6IHN0cmluZztcclxuICAgIHN5c3RlbV9maW5nZXJwcmludDogc3RyaW5nO1xyXG4gICAgY2hvaWNlczogQXJyYXk8e1xyXG4gICAgICAgIGluZGV4OiBudW1iZXI7XHJcbiAgICAgICAgbWVzc2FnZToge1xyXG4gICAgICAgICAgICByb2xlOiBzdHJpbmc7XHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHN0cmluZztcclxuICAgICAgICB9O1xyXG4gICAgICAgIGZpbmlzaF9yZWFzb246IHN0cmluZztcclxuICAgIH0+O1xyXG4gICAgdXNhZ2U6IHtcclxuICAgICAgICBwcm9tcHRfdG9rZW5zOiBudW1iZXI7XHJcbiAgICAgICAgY29tcGxldGlvbl90b2tlbnM6IG51bWJlcjtcclxuICAgICAgICB0b3RhbF90b2tlbnM6IG51bWJlcjtcclxuICAgIH07XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbXBsZW1lbnRzIHRoZSBPcGVuQUkgcHJvdmlkZXIgZnVuY3Rpb25hbGl0eVxyXG4gKiBcclxuICogSGFuZGxlcyBjb21tdW5pY2F0aW9uIHdpdGggT3BlbkFJJ3MgQVBJLCBpbmNsdWRpbmc6XHJcbiAqIC0gQ2hhdCBjb21wbGV0aW9uc1xyXG4gKiAtIE1vZGVsIGxpc3RpbmdcclxuICogLSBDb25uZWN0aW9uIHRlc3RpbmdcclxuICogLSBTdHJlYW1pbmcgcmVzcG9uc2VzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgT3BlbkFJUHJvdmlkZXIgZXh0ZW5kcyBCYXNlUHJvdmlkZXIge1xyXG4gICAgcHJvdGVjdGVkIGFwaUtleTogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIGJhc2VVcmw6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBtb2RlbDogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKGFwaUtleTogc3RyaW5nLCBtb2RlbDogc3RyaW5nID0gJ2dwdC00JywgYmFzZVVybD86IHN0cmluZykge1xyXG4gICAgICAgIHN1cGVyKCk7XHJcbiAgICAgICAgdGhpcy5hcGlLZXkgPSBhcGlLZXk7XHJcbiAgICAgICAgdGhpcy5tb2RlbCA9IG1vZGVsO1xyXG4gICAgICAgIHRoaXMuYmFzZVVybCA9IGJhc2VVcmwgfHwgJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2V0IGEgY29tcGxldGlvbiBmcm9tIE9wZW5BSVxyXG4gICAgICogXHJcbiAgICAgKiBTZW5kcyB0aGUgY29udmVyc2F0aW9uIHRvIE9wZW5BSSBhbmQgc3RyZWFtcyBiYWNrIHRoZSByZXNwb25zZS5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIC0gVGhlIGNvbnZlcnNhdGlvbiBoaXN0b3J5XHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFNldHRpbmdzIGZvciB0aGlzIGNvbXBsZXRpb25cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0Q29tcGxldGlvbihtZXNzYWdlczogTWVzc2FnZVtdLCBvcHRpb25zOiBDb21wbGV0aW9uT3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2goYCR7dGhpcy5iYXNlVXJsfS9jaGF0L2NvbXBsZXRpb25zYCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YCxcclxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgICAgICAgICAgICAgIG1vZGVsOiB0aGlzLm1vZGVsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBvcHRpb25zLnRlbXBlcmF0dXJlID8/IDAuNyxcclxuICAgICAgICAgICAgICAgICAgICBtYXhfdG9rZW5zOiBvcHRpb25zLm1heFRva2VucyA/PyAxMDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbTogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfSksXHJcbiAgICAgICAgICAgICAgICBzaWduYWw6IG9wdGlvbnMuYWJvcnRDb250cm9sbGVyPy5zaWduYWxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUh0dHBFcnJvcihyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IHJlYWRlciA9IHJlc3BvbnNlLmJvZHk/LmdldFJlYWRlcigpO1xyXG4gICAgICAgICAgICBjb25zdCBkZWNvZGVyID0gbmV3IFRleHREZWNvZGVyKCd1dGYtOCcpO1xyXG4gICAgICAgICAgICBsZXQgYnVmZmVyID0gJyc7XHJcblxyXG4gICAgICAgICAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgeyBkb25lLCB2YWx1ZSB9ID0gYXdhaXQgcmVhZGVyPy5yZWFkKCkgfHwgeyBkb25lOiB0cnVlLCB2YWx1ZTogdW5kZWZpbmVkIH07XHJcbiAgICAgICAgICAgICAgICBpZiAoZG9uZSkgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICAgICAgYnVmZmVyICs9IGRlY29kZXIuZGVjb2RlKHZhbHVlLCB7IHN0cmVhbTogdHJ1ZSB9KTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVzID0gYnVmZmVyLnNwbGl0KCdcXG4nKTtcclxuICAgICAgICAgICAgICAgIGJ1ZmZlciA9IGxpbmVzLnBvcCgpIHx8ICcnO1xyXG5cclxuICAgICAgICAgICAgICAgIGZvciAoY29uc3QgbGluZSBvZiBsaW5lcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJ2RhdGE6ICcpICYmIGxpbmUgIT09ICdkYXRhOiBbRE9ORV0nKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhID0gSlNPTi5wYXJzZShsaW5lLnNsaWNlKDYpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBkYXRhLmNob2ljZXNbMF0/LmRlbHRhPy5jb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKGNvbnRlbnQgJiYgb3B0aW9ucy5zdHJlYW1DYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2soY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnNvbGUud2FybignRXJyb3IgcGFyc2luZyBPcGVuQUkgcmVzcG9uc2UgY2h1bms6JywgZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBpZiAoZXJyb3IgaW5zdGFuY2VvZiBQcm92aWRlckVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZXJyb3IubmFtZSA9PT0gJ0Fib3J0RXJyb3InKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZygnT3BlbkFJIHN0cmVhbSB3YXMgYWJvcnRlZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2FsbGluZyBPcGVuQUk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYXZhaWxhYmxlIE9wZW5BSSBtb2RlbHNcclxuICAgICAqIFxyXG4gICAgICogRmV0Y2hlcyB0aGUgbGlzdCBvZiBtb2RlbHMgZnJvbSBPcGVuQUkncyBBUEkuXHJcbiAgICAgKiBGaWx0ZXJzIHRvIG9ubHkgaW5jbHVkZSBjaGF0IG1vZGVscyAoR1BULTMuNSwgR1BULTQsIGV0Yy4pXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIExpc3Qgb2YgYXZhaWxhYmxlIG1vZGVsIG5hbWVzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEF2YWlsYWJsZU1vZGVscygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L21vZGVsc2AsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0F1dGhvcml6YXRpb24nOiBgQmVhcmVyICR7dGhpcy5hcGlLZXl9YCxcclxuICAgICAgICAgICAgICAgICAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVIdHRwRXJyb3IocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpO1xyXG4gICAgICAgICAgICByZXR1cm4gZGF0YS5kYXRhXHJcbiAgICAgICAgICAgICAgICAubWFwKChtb2RlbDogYW55KSA9PiBtb2RlbC5pZClcclxuICAgICAgICAgICAgICAgIC5maWx0ZXIoKGlkOiBzdHJpbmcpID0+IGlkLnN0YXJ0c1dpdGgoJ2dwdC0nKSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgZmV0Y2hpbmcgT3BlbkFJIG1vZGVsczonLCBlcnJvcik7XHJcbiAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFRlc3QgY29ubmVjdGlvbiB0byBPcGVuQUlcclxuICAgICAqIFxyXG4gICAgICogVmVyaWZpZXMgdGhlIEFQSSBrZXkgd29ya3MgYnkgYXR0ZW1wdGluZyB0byBsaXN0IG1vZGVscy5cclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMgVGVzdCByZXN1bHRzIGluY2x1ZGluZyBzdWNjZXNzL2ZhaWx1cmUgYW5kIGF2YWlsYWJsZSBtb2RlbHNcclxuICAgICAqL1xyXG4gICAgYXN5bmMgdGVzdENvbm5lY3Rpb24oKTogUHJvbWlzZTxDb25uZWN0aW9uVGVzdFJlc3VsdD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IG1vZGVscyA9IGF3YWl0IHRoaXMuZ2V0QXZhaWxhYmxlTW9kZWxzKCk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgbWVzc2FnZTogYFN1Y2Nlc3NmdWxseSBjb25uZWN0ZWQgdG8gT3BlbkFJISBGb3VuZCAke21vZGVscy5sZW5ndGh9IGF2YWlsYWJsZSBtb2RlbHMuYCxcclxuICAgICAgICAgICAgICAgIG1vZGVsc1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUVycm9yUmVzcG9uc2UoZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEdvb2dsZSBHZW1pbmkgUHJvdmlkZXIgSW1wbGVtZW50YXRpb25cclxuICogXHJcbiAqIFRoaXMgZmlsZSBjb250YWlucyB0aGUgaW1wbGVtZW50YXRpb24gb2YgdGhlIEdvb2dsZSBHZW1pbmkgcHJvdmlkZXIsXHJcbiAqIHdoaWNoIGFsbG93cyB0aGUgcGx1Z2luIHRvIGludGVyYWN0IHdpdGggR29vZ2xlJ3MgR2VtaW5pIEFQSS5cclxuICovXHJcblxyXG5pbXBvcnQgeyBNZXNzYWdlLCBDb21wbGV0aW9uT3B0aW9ucywgQ29ubmVjdGlvblRlc3RSZXN1bHQgfSBmcm9tICcuLi9zcmMvdHlwZXMnO1xyXG5pbXBvcnQgeyBCYXNlUHJvdmlkZXIsIFByb3ZpZGVyRXJyb3IsIFByb3ZpZGVyRXJyb3JUeXBlIH0gZnJvbSAnLi9iYXNlJztcclxuXHJcbmludGVyZmFjZSBHZW1pbmlSZXNwb25zZSB7XHJcbiAgICBjYW5kaWRhdGVzOiBBcnJheTx7XHJcbiAgICAgICAgY29udGVudDoge1xyXG4gICAgICAgICAgICBwYXJ0czogQXJyYXk8e1xyXG4gICAgICAgICAgICAgICAgdGV4dDogc3RyaW5nO1xyXG4gICAgICAgICAgICB9PjtcclxuICAgICAgICAgICAgcm9sZTogc3RyaW5nO1xyXG4gICAgICAgIH07XHJcbiAgICAgICAgZmluaXNoUmVhc29uOiBzdHJpbmc7XHJcbiAgICAgICAgaW5kZXg6IG51bWJlcjtcclxuICAgICAgICBzYWZldHlSYXRpbmdzOiBBcnJheTxhbnk+O1xyXG4gICAgfT47XHJcbiAgICBwcm9tcHRGZWVkYmFjazoge1xyXG4gICAgICAgIHNhZmV0eVJhdGluZ3M6IEFycmF5PGFueT47XHJcbiAgICB9O1xyXG59XHJcblxyXG4vKipcclxuICogSW1wbGVtZW50cyB0aGUgR29vZ2xlIEdlbWluaSBwcm92aWRlciBmdW5jdGlvbmFsaXR5XHJcbiAqIFxyXG4gKiBIYW5kbGVzIGNvbW11bmljYXRpb24gd2l0aCBHb29nbGUncyBHZW1pbmkgQVBJLCBpbmNsdWRpbmc6XHJcbiAqIC0gQ2hhdCBjb21wbGV0aW9uc1xyXG4gKiAtIE1vZGVsIGxpc3RpbmdcclxuICogLSBDb25uZWN0aW9uIHRlc3RpbmdcclxuICogLSBTdHJlYW1pbmcgcmVzcG9uc2VzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgR2VtaW5pUHJvdmlkZXIgZXh0ZW5kcyBCYXNlUHJvdmlkZXIge1xyXG4gICAgcHJvdGVjdGVkIGFwaUtleTogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIGJhc2VVcmwgPSAnaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjEnO1xyXG4gICAgcHJvdGVjdGVkIG1vZGVsOiBzdHJpbmc7XHJcblxyXG4gICAgY29uc3RydWN0b3IoYXBpS2V5OiBzdHJpbmcsIG1vZGVsOiBzdHJpbmcgPSAnZ2VtaW5pLXBybycpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuYXBpS2V5ID0gYXBpS2V5O1xyXG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIGNvbXBsZXRpb24gZnJvbSBHb29nbGUgR2VtaW5pXHJcbiAgICAgKiBcclxuICAgICAqIFNlbmRzIHRoZSBjb252ZXJzYXRpb24gdG8gR2VtaW5pIGFuZCBzdHJlYW1zIGJhY2sgdGhlIHJlc3BvbnNlLlxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgLSBUaGUgY29udmVyc2F0aW9uIGhpc3RvcnlcclxuICAgICAqIEBwYXJhbSBvcHRpb25zIC0gU2V0dGluZ3MgZm9yIHRoaXMgY29tcGxldGlvblxyXG4gICAgICovXHJcbiAgICBhc3luYyBnZXRDb21wbGV0aW9uKG1lc3NhZ2VzOiBNZXNzYWdlW10sIG9wdGlvbnM6IENvbXBsZXRpb25PcHRpb25zKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gRm9ybWF0IG1lc3NhZ2VzIGZvciBHZW1pbmkgQVBJXHJcbiAgICAgICAgICAgIGNvbnN0IGZvcm1hdHRlZE1lc3NhZ2VzID0gdGhpcy5mb3JtYXRNZXNzYWdlcyhtZXNzYWdlcyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBGb3IgY2hhdCBtb2RlbHMsIHdlIHNob3VsZCB1c2UgdGhlIGdlbmVyYXRlQ29udGVudCBlbmRwb2ludFxyXG4gICAgICAgICAgICBjb25zdCB1cmwgPSBgJHt0aGlzLmJhc2VVcmx9L21vZGVscy8ke3RoaXMubW9kZWx9OmdlbmVyYXRlQ29udGVudD9rZXk9JHt0aGlzLmFwaUtleX1gO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gVXNlIG5vbi1zdHJlYW1pbmcgdmVyc2lvbiBmb3IgY2hhdCBjb21wbGV0aW9uc1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICAgICAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50czogZm9ybWF0dGVkTWVzc2FnZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wZXJhdHVyZTogb3B0aW9ucy50ZW1wZXJhdHVyZSA/PyAwLjcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heE91dHB1dFRva2Vuczogb3B0aW9ucy5tYXhUb2tlbnMgPz8gMTAwMFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgc2lnbmFsOiBvcHRpb25zLmFib3J0Q29udHJvbGxlcj8uc2lnbmFsXHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFyZXNwb25zZS5vaykge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgdGhpcy5oYW5kbGVIdHRwRXJyb3IocmVzcG9uc2UpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBGb3Igbm9uLXN0cmVhbWluZyByZXNwb25zZSwgcGFyc2UgdGhlIEpTT04gZGlyZWN0bHlcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgY29uc29sZS5sb2coJ0dlbWluaSByZXNwb25zZTonLCBKU09OLnN0cmluZ2lmeShkYXRhKSk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAvLyBFeHRyYWN0IHRoZSB0ZXh0IGZyb20gdGhlIHJlc3BvbnNlXHJcbiAgICAgICAgICAgIGNvbnN0IHRleHQgPSBkYXRhLmNhbmRpZGF0ZXM/LlswXT8uY29udGVudD8ucGFydHM/LlswXT8udGV4dDtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICh0ZXh0ICYmIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgIC8vIEV2ZW4gdGhvdWdoIGl0J3Mgbm90IHN0cmVhbWluZywgd2UgdXNlIHRoZSBzdHJlYW1DYWxsYmFja1xyXG4gICAgICAgICAgICAgICAgLy8gdG8gbWFpbnRhaW4gY29tcGF0aWJpbGl0eSB3aXRoIHRoZSBleGlzdGluZyBpbnRlcmZhY2VcclxuICAgICAgICAgICAgICAgIG9wdGlvbnMuc3RyZWFtQ2FsbGJhY2sodGV4dCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ05vIHRleHQgZm91bmQgaW4gR2VtaW5pIHJlc3BvbnNlOicsIEpTT04uc3RyaW5naWZ5KGRhdGEpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFByb3ZpZGVyRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdHZW1pbmkgcmVxdWVzdCB3YXMgYWJvcnRlZCcpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcignRXJyb3IgY2FsbGluZyBHZW1pbmk6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgYXZhaWxhYmxlIEdlbWluaSBtb2RlbHNcclxuICAgICAqIFxyXG4gICAgICogRmV0Y2hlcyB0aGUgbGlzdCBvZiBhdmFpbGFibGUgbW9kZWxzIGZyb20gR29vZ2xlJ3MgQVBJLlxyXG4gICAgICogRmlsdGVycyB0byBvbmx5IGluY2x1ZGUgR2VtaW5pIG1vZGVscy5cclxuICAgICAqIFxyXG4gICAgICogQHJldHVybnMgTGlzdCBvZiBhdmFpbGFibGUgbW9kZWwgbmFtZXNcclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0QXZhaWxhYmxlTW9kZWxzKCk6IFByb21pc2U8c3RyaW5nW10+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKGAke3RoaXMuYmFzZVVybH0vbW9kZWxzP2tleT0ke3RoaXMuYXBpS2V5fWAsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ0dFVCcsXHJcbiAgICAgICAgICAgICAgICBoZWFkZXJzOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlSHR0cEVycm9yKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKTtcclxuICAgICAgICAgICAgcmV0dXJuIGRhdGEubW9kZWxzXHJcbiAgICAgICAgICAgICAgICAubWFwKChtb2RlbDogYW55KSA9PiBtb2RlbC5uYW1lLnNwbGl0KCcvJykucG9wKCkpXHJcbiAgICAgICAgICAgICAgICAuZmlsdGVyKChpZDogc3RyaW5nKSA9PiBpZC5zdGFydHNXaXRoKCdnZW1pbmktJykpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGZldGNoaW5nIEdlbWluaSBtb2RlbHM6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUZXN0IGNvbm5lY3Rpb24gdG8gR2VtaW5pXHJcbiAgICAgKiBcclxuICAgICAqIFZlcmlmaWVzIHRoZSBBUEkga2V5IHdvcmtzIGJ5IGF0dGVtcHRpbmcgdG8gbGlzdCBtb2RlbHMuXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIFRlc3QgcmVzdWx0cyBpbmNsdWRpbmcgc3VjY2Vzcy9mYWlsdXJlIGFuZCBhdmFpbGFibGUgbW9kZWxzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIHRlc3RDb25uZWN0aW9uKCk6IFByb21pc2U8Q29ubmVjdGlvblRlc3RSZXN1bHQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBtb2RlbHMgPSBhd2FpdCB0aGlzLmdldEF2YWlsYWJsZU1vZGVscygpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIEdvb2dsZSBHZW1pbmkhIEZvdW5kICR7bW9kZWxzLmxlbmd0aH0gYXZhaWxhYmxlIG1vZGVscy5gLFxyXG4gICAgICAgICAgICAgICAgbW9kZWxzXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuY3JlYXRlRXJyb3JSZXNwb25zZShlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRm9ybWF0IG1lc3NhZ2VzIGZvciBHZW1pbmkgQVBJXHJcbiAgICAgKiBcclxuICAgICAqIENvbnZlcnRzIGZyb20gdGhlIHBsdWdpbidzIE1lc3NhZ2UgZm9ybWF0IHRvIEdlbWluaSdzIGV4cGVjdGVkIGZvcm1hdC5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIC0gQXJyYXkgb2YgbWVzc2FnZXMgdG8gZm9ybWF0XHJcbiAgICAgKiBAcmV0dXJucyBGb3JtYXR0ZWQgbWVzc2FnZXMgZm9yIEdlbWluaSBBUElcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBmb3JtYXRNZXNzYWdlcyhtZXNzYWdlczogTWVzc2FnZVtdKTogQXJyYXk8YW55PiB7XHJcbiAgICAgICAgLy8gVGhlIEdlbWluaSBBUEkgZXhwZWN0cyBhIGNoYXQgZm9ybWF0IHdoZXJlOlxyXG4gICAgICAgIC8vIDEuIFN5c3RlbSBtZXNzYWdlcyBzaG91bGQgYmUgc2VudCBhcyB1c2VyIG1lc3NhZ2VzIHRoYXQgY29tZSBmaXJzdFxyXG4gICAgICAgIC8vIDIuIEVhY2ggbWVzc2FnZSBuZWVkcyB0byBoYXZlIGEgcm9sZSBhbmQgcGFydHMgYXJyYXlcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBnZW1pbmlNZXNzYWdlcyA9IFtdO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEZpcnN0LCBmaW5kIGFuZCBwcm9jZXNzIHN5c3RlbSBtZXNzYWdlc1xyXG4gICAgICAgIGNvbnN0IHN5c3RlbU1lc3NhZ2VzID0gbWVzc2FnZXMuZmlsdGVyKG1zZyA9PiBtc2cucm9sZSA9PT0gJ3N5c3RlbScpO1xyXG4gICAgICAgIGNvbnN0IG5vblN5c3RlbU1lc3NhZ2VzID0gbWVzc2FnZXMuZmlsdGVyKG1zZyA9PiBtc2cucm9sZSAhPT0gJ3N5c3RlbScpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEFkZCBzeXN0ZW0gbWVzc2FnZXMgZmlyc3QgYXMgdXNlciBtZXNzYWdlc1xyXG4gICAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBzeXN0ZW1NZXNzYWdlcykge1xyXG4gICAgICAgICAgICBnZW1pbmlNZXNzYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIHJvbGU6ICd1c2VyJyxcclxuICAgICAgICAgICAgICAgIHBhcnRzOiBbeyB0ZXh0OiBtZXNzYWdlLmNvbnRlbnQgfV1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFRoZW4gYWRkIHRoZSByZWd1bGFyIGNvbnZlcnNhdGlvbiBtZXNzYWdlc1xyXG4gICAgICAgIGZvciAoY29uc3QgbWVzc2FnZSBvZiBub25TeXN0ZW1NZXNzYWdlcykge1xyXG4gICAgICAgICAgICAvLyBHZW1pbmkgb25seSBzdXBwb3J0cyAndXNlcicgYW5kICdtb2RlbCcgcm9sZXNcclxuICAgICAgICAgICAgY29uc3Qgcm9sZSA9IG1lc3NhZ2Uucm9sZSA9PT0gJ2Fzc2lzdGFudCcgPyAnbW9kZWwnIDogJ3VzZXInO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZ2VtaW5pTWVzc2FnZXMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICByb2xlOiByb2xlLFxyXG4gICAgICAgICAgICAgICAgcGFydHM6IFt7IHRleHQ6IG1lc3NhZ2UuY29udGVudCB9XVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGdlbWluaU1lc3NhZ2VzO1xyXG4gICAgfVxyXG59XHJcbiIsICIvKipcclxuICogT2xsYW1hIFByb3ZpZGVyIEltcGxlbWVudGF0aW9uXHJcbiAqIFxyXG4gKiBUaGlzIGZpbGUgY29udGFpbnMgdGhlIGltcGxlbWVudGF0aW9uIG9mIHRoZSBPbGxhbWEgcHJvdmlkZXIsXHJcbiAqIHdoaWNoIGFsbG93cyB0aGUgcGx1Z2luIHRvIGludGVyYWN0IHdpdGggYSBsb2NhbCBPbGxhbWEgc2VydmVyXHJcbiAqIHJ1bm5pbmcgQUkgbW9kZWxzIGxpa2UgTGxhbWEsIE1pc3RyYWwsIGV0Yy5cclxuICovXHJcblxyXG5pbXBvcnQgeyBNZXNzYWdlLCBDb21wbGV0aW9uT3B0aW9ucywgQ29ubmVjdGlvblRlc3RSZXN1bHQgfSBmcm9tICcuLi9zcmMvdHlwZXMnO1xyXG5pbXBvcnQgeyBCYXNlUHJvdmlkZXIsIFByb3ZpZGVyRXJyb3IsIFByb3ZpZGVyRXJyb3JUeXBlIH0gZnJvbSAnLi9iYXNlJztcclxuXHJcbmludGVyZmFjZSBPbGxhbWFSZXNwb25zZSB7XHJcbiAgICBtb2RlbDogc3RyaW5nO1xyXG4gICAgY3JlYXRlZF9hdDogc3RyaW5nO1xyXG4gICAgcmVzcG9uc2U6IHN0cmluZztcclxuICAgIGRvbmU6IGJvb2xlYW47XHJcbiAgICBjb250ZXh0PzogbnVtYmVyW107XHJcbiAgICB0b3RhbF9kdXJhdGlvbj86IG51bWJlcjtcclxuICAgIGxvYWRfZHVyYXRpb24/OiBudW1iZXI7XHJcbiAgICBwcm9tcHRfZXZhbF9kdXJhdGlvbj86IG51bWJlcjtcclxuICAgIGV2YWxfZHVyYXRpb24/OiBudW1iZXI7XHJcbiAgICBldmFsX2NvdW50PzogbnVtYmVyO1xyXG59XHJcblxyXG5pbnRlcmZhY2UgT2xsYW1hTW9kZWwge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgbW9kaWZpZWRfYXQ6IHN0cmluZztcclxuICAgIHNpemU6IG51bWJlcjtcclxuICAgIGRpZ2VzdDogc3RyaW5nO1xyXG4gICAgZGV0YWlsczoge1xyXG4gICAgICAgIGZvcm1hdDogc3RyaW5nO1xyXG4gICAgICAgIGZhbWlseTogc3RyaW5nO1xyXG4gICAgICAgIHBhcmFtZXRlcl9zaXplOiBzdHJpbmc7XHJcbiAgICAgICAgcXVhbnRpemF0aW9uX2xldmVsOiBzdHJpbmc7XHJcbiAgICB9O1xyXG59XHJcblxyXG4vKipcclxuICogSW1wbGVtZW50cyB0aGUgT2xsYW1hIHByb3ZpZGVyIGZ1bmN0aW9uYWxpdHlcclxuICogXHJcbiAqIEhhbmRsZXMgY29tbXVuaWNhdGlvbiB3aXRoIGEgbG9jYWwgT2xsYW1hIHNlcnZlciwgaW5jbHVkaW5nOlxyXG4gKiAtIENoYXQgY29tcGxldGlvbnNcclxuICogLSBNb2RlbCBsaXN0aW5nXHJcbiAqIC0gQ29ubmVjdGlvbiB0ZXN0aW5nXHJcbiAqIC0gU3RyZWFtaW5nIHJlc3BvbnNlc1xyXG4gKiBcclxuICogUmVxdWlyZXMgT2xsYW1hIHRvIGJlIGluc3RhbGxlZCBhbmQgcnVubmluZyBsb2NhbGx5OlxyXG4gKiAxLiBJbnN0YWxsIE9sbGFtYSBmcm9tIGh0dHBzOi8vb2xsYW1hLmFpXHJcbiAqIDIuIFN0YXJ0IHRoZSBPbGxhbWEgc2VydmVyXHJcbiAqIDMuIFB1bGwgeW91ciBkZXNpcmVkIG1vZGVscyB1c2luZyAnb2xsYW1hIHB1bGwgbW9kZWwtbmFtZSdcclxuICovXHJcbmV4cG9ydCBjbGFzcyBPbGxhbWFQcm92aWRlciBleHRlbmRzIEJhc2VQcm92aWRlciB7XHJcbiAgICBwcm90ZWN0ZWQgYXBpS2V5OiBzdHJpbmcgPSAnJzsgLy8gTm90IHVzZWQgZm9yIE9sbGFtYVxyXG4gICAgcHJvdGVjdGVkIGJhc2VVcmw6IHN0cmluZztcclxuICAgIHByb3RlY3RlZCBtb2RlbDogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHNlcnZlclVybDogc3RyaW5nID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6MTE0MzQnLCBtb2RlbDogc3RyaW5nID0gJ2xsYW1hMicpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuYmFzZVVybCA9IHNlcnZlclVybC5yZXBsYWNlKC9cXC8kLywgJycpOyAvLyBSZW1vdmUgdHJhaWxpbmcgc2xhc2ggaWYgcHJlc2VudFxyXG4gICAgICAgIHRoaXMubW9kZWwgPSBtb2RlbDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvbnZlcnQgbWVzc2FnZXMgdG8gT2xsYW1hIGZvcm1hdFxyXG4gICAgICogXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZXMgLSBTdGFuZGFyZCBtZXNzYWdlIGZvcm1hdFxyXG4gICAgICogQHJldHVybnMgUHJvbXB0IHN0cmluZyBpbiBPbGxhbWEgZm9ybWF0XHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29udmVydFRvT2xsYW1hRm9ybWF0KG1lc3NhZ2VzOiBNZXNzYWdlW10pOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBtZXNzYWdlcy5tYXAobXNnID0+IHtcclxuICAgICAgICAgICAgaWYgKG1zZy5yb2xlID09PSAnc3lzdGVtJykge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGBTeXN0ZW06ICR7bXNnLmNvbnRlbnR9XFxuXFxuYDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gYCR7bXNnLnJvbGUgPT09ICd1c2VyJyA/ICdIdW1hbicgOiAnQXNzaXN0YW50J306ICR7bXNnLmNvbnRlbnR9XFxuXFxuYDtcclxuICAgICAgICB9KS5qb2luKCcnKSArICdBc3Npc3RhbnQ6JztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhIGNvbXBsZXRpb24gZnJvbSBPbGxhbWFcclxuICAgICAqIFxyXG4gICAgICogU2VuZHMgdGhlIGNvbnZlcnNhdGlvbiB0byB0aGUgbG9jYWwgT2xsYW1hIHNlcnZlciBhbmQgc3RyZWFtcyBiYWNrIHRoZSByZXNwb25zZS5cclxuICAgICAqIFxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIC0gVGhlIGNvbnZlcnNhdGlvbiBoaXN0b3J5XHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyAtIFNldHRpbmdzIGZvciB0aGlzIGNvbXBsZXRpb25cclxuICAgICAqL1xyXG4gICAgYXN5bmMgZ2V0Q29tcGxldGlvbihtZXNzYWdlczogTWVzc2FnZVtdLCBvcHRpb25zOiBDb21wbGV0aW9uT3B0aW9ucyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByb21wdCA9IHRoaXMuY29udmVydFRvT2xsYW1hRm9ybWF0KG1lc3NhZ2VzKTtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2FwaS9nZW5lcmF0ZWAsIHtcclxuICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLFxyXG4gICAgICAgICAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgICAgICAgICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgbW9kZWw6IHRoaXMubW9kZWwsXHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbXB0LFxyXG4gICAgICAgICAgICAgICAgICAgIHN0cmVhbTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBvcHRpb25zOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiBvcHRpb25zLnRlbXBlcmF0dXJlID8/IDAuNyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbnVtX3ByZWRpY3Q6IG9wdGlvbnMubWF4VG9rZW5zID8/IDEwMDBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgIHNpZ25hbDogb3B0aW9ucy5hYm9ydENvbnRyb2xsZXI/LnNpZ25hbFxyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgICAgICAgICAgIHRocm93IHRoaXMuaGFuZGxlSHR0cEVycm9yKHJlc3BvbnNlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcmVhZGVyID0gcmVzcG9uc2UuYm9keT8uZ2V0UmVhZGVyKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRlY29kZXIgPSBuZXcgVGV4dERlY29kZXIoJ3V0Zi04Jyk7XHJcbiAgICAgICAgICAgIGxldCBidWZmZXIgPSAnJztcclxuXHJcbiAgICAgICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCB7IGRvbmUsIHZhbHVlIH0gPSBhd2FpdCByZWFkZXI/LnJlYWQoKSB8fCB7IGRvbmU6IHRydWUsIHZhbHVlOiB1bmRlZmluZWQgfTtcclxuICAgICAgICAgICAgICAgIGlmIChkb25lKSBicmVhaztcclxuXHJcbiAgICAgICAgICAgICAgICBidWZmZXIgKz0gZGVjb2Rlci5kZWNvZGUodmFsdWUsIHsgc3RyZWFtOiB0cnVlIH0pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbGluZXMgPSBidWZmZXIuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgICAgICAgICAgYnVmZmVyID0gbGluZXMucG9wKCkgfHwgJyc7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxpbmUudHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBkYXRhOiBPbGxhbWFSZXNwb25zZSA9IEpTT04ucGFyc2UobGluZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoZGF0YS5yZXNwb25zZSAmJiBvcHRpb25zLnN0cmVhbUNhbGxiYWNrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb3B0aW9ucy5zdHJlYW1DYWxsYmFjayhkYXRhLnJlc3BvbnNlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdFcnJvciBwYXJzaW5nIE9sbGFtYSByZXNwb25zZSBjaHVuazonLCBlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvciBpbnN0YW5jZW9mIFByb3ZpZGVyRXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChlcnJvci5uYW1lID09PSAnQWJvcnRFcnJvcicpIHtcclxuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdPbGxhbWEgc3RyZWFtIHdhcyBhYm9ydGVkJyk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBjYWxsaW5nIE9sbGFtYTonLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBlcnJvcjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhdmFpbGFibGUgT2xsYW1hIG1vZGVsc1xyXG4gICAgICogXHJcbiAgICAgKiBGZXRjaGVzIHRoZSBsaXN0IG9mIG1vZGVscyBpbnN0YWxsZWQgb24gdGhlIGxvY2FsIE9sbGFtYSBzZXJ2ZXIuXHJcbiAgICAgKiBcclxuICAgICAqIEByZXR1cm5zIExpc3Qgb2YgYXZhaWxhYmxlIG1vZGVsIG5hbWVzXHJcbiAgICAgKi9cclxuICAgIGFzeW5jIGdldEF2YWlsYWJsZU1vZGVscygpOiBQcm9taXNlPHN0cmluZ1tdPiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaChgJHt0aGlzLmJhc2VVcmx9L2FwaS90YWdzYCk7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyB0aGlzLmhhbmRsZUh0dHBFcnJvcihyZXNwb25zZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCByZXNwb25zZS5qc29uKCk7XHJcbiAgICAgICAgICAgIHJldHVybiAoZGF0YS5tb2RlbHMgYXMgT2xsYW1hTW9kZWxbXSk/Lm1hcChtb2RlbCA9PiBtb2RlbC5uYW1lKSB8fCBbXTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdFcnJvciBmZXRjaGluZyBPbGxhbWEgbW9kZWxzOicsIGVycm9yKTtcclxuICAgICAgICAgICAgdGhyb3cgZXJyb3I7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGVzdCBjb25uZWN0aW9uIHRvIE9sbGFtYVxyXG4gICAgICogXHJcbiAgICAgKiBWZXJpZmllcyB0aGUgT2xsYW1hIHNlcnZlciBpcyBydW5uaW5nIGFuZCBhY2Nlc3NpYmxlLlxyXG4gICAgICogQWxzbyBjaGVja3MgaWYgYW55IG1vZGVscyBhcmUgaW5zdGFsbGVkLlxyXG4gICAgICogXHJcbiAgICAgKiBAcmV0dXJucyBUZXN0IHJlc3VsdHMgaW5jbHVkaW5nIHN1Y2Nlc3MvZmFpbHVyZSBhbmQgYXZhaWxhYmxlIG1vZGVsc1xyXG4gICAgICovXHJcbiAgICBhc3luYyB0ZXN0Q29ubmVjdGlvbigpOiBQcm9taXNlPENvbm5lY3Rpb25UZXN0UmVzdWx0PiB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgbW9kZWxzID0gYXdhaXQgdGhpcy5nZXRBdmFpbGFibGVNb2RlbHMoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmIChtb2RlbHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdDb25uZWN0ZWQgdG8gT2xsYW1hIHNlcnZlciwgYnV0IG5vIG1vZGVscyBhcmUgaW5zdGFsbGVkLiBVc2UgXCJvbGxhbWEgcHVsbCBtb2RlbC1uYW1lXCIgdG8gaW5zdGFsbCBtb2RlbHMuJyxcclxuICAgICAgICAgICAgICAgICAgICBtb2RlbHM6IFtdXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2U6IGBTdWNjZXNzZnVsbHkgY29ubmVjdGVkIHRvIE9sbGFtYSEgRm91bmQgJHttb2RlbHMubGVuZ3RofSBpbnN0YWxsZWQgbW9kZWxzLmAsXHJcbiAgICAgICAgICAgICAgICBtb2RlbHNcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5jcmVhdGVFcnJvclJlc3BvbnNlKGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBBSSBQcm92aWRlcnMgSW5kZXhcclxuICogXHJcbiAqIFRoaXMgZmlsZSBleHBvcnRzIGFsbCBBSSBwcm92aWRlciBpbXBsZW1lbnRhdGlvbnMgYW5kIHNoYXJlZCB0eXBlcy5cclxuICogSW1wb3J0IHByb3ZpZGVycyBmcm9tIHRoaXMgZmlsZSByYXRoZXIgdGhhbiBkaXJlY3RseSBmcm9tIHRoZWlyIG1vZHVsZXMuXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgTXlQbHVnaW5TZXR0aW5ncywgVW5pZmllZE1vZGVsIH0gZnJvbSAnLi4vc3JjL3R5cGVzJztcclxuaW1wb3J0IHsgQmFzZVByb3ZpZGVyLCBQcm92aWRlckVycm9yLCBQcm92aWRlckVycm9yVHlwZSB9IGZyb20gJy4vYmFzZSc7XHJcbmltcG9ydCB7IEFudGhyb3BpY1Byb3ZpZGVyIH0gZnJvbSAnLi9hbnRocm9waWMnO1xyXG5pbXBvcnQgeyBPcGVuQUlQcm92aWRlciB9IGZyb20gJy4vb3BlbmFpJztcclxuaW1wb3J0IHsgR2VtaW5pUHJvdmlkZXIgfSBmcm9tICcuL2dlbWluaSc7XHJcbmltcG9ydCB7IE9sbGFtYVByb3ZpZGVyIH0gZnJvbSAnLi9vbGxhbWEnO1xyXG5cclxuZXhwb3J0IHsgQmFzZVByb3ZpZGVyLCBQcm92aWRlckVycm9yLCBQcm92aWRlckVycm9yVHlwZSB9O1xyXG5leHBvcnQgeyBBbnRocm9waWNQcm92aWRlciB9O1xyXG5leHBvcnQgeyBPcGVuQUlQcm92aWRlciB9O1xyXG5leHBvcnQgeyBHZW1pbmlQcm92aWRlciB9O1xyXG5leHBvcnQgeyBPbGxhbWFQcm92aWRlciB9O1xyXG5cclxuLyoqXHJcbiAqIENyZWF0ZXMgYW4gQUkgcHJvdmlkZXIgaW5zdGFuY2UgYmFzZWQgb24gdGhlIHBsdWdpbiBzZXR0aW5nc1xyXG4gKiBcclxuICogQHBhcmFtIHNldHRpbmdzIFRoZSBwbHVnaW4gc2V0dGluZ3MgY29udGFpbmluZyBwcm92aWRlciBjb25maWd1cmF0aW9uXHJcbiAqIEByZXR1cm5zIFRoZSBhcHByb3ByaWF0ZSBwcm92aWRlciBpbnN0YW5jZVxyXG4gKiBAdGhyb3dzIEVycm9yIGlmIHRoZSBwcm92aWRlciB0eXBlIGlzIGludmFsaWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVQcm92aWRlcihzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncyk6IEJhc2VQcm92aWRlciB7XHJcbiAgICBzd2l0Y2ggKHNldHRpbmdzLnByb3ZpZGVyKSB7XHJcbiAgICAgICAgY2FzZSAnb3BlbmFpJzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBPcGVuQUlQcm92aWRlcihcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLm9wZW5haVNldHRpbmdzLmFwaUtleSxcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLm9wZW5haVNldHRpbmdzLm1vZGVsLFxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MuYmFzZVVybFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIGNhc2UgJ2FudGhyb3BpYyc6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgQW50aHJvcGljUHJvdmlkZXIoXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5hbnRocm9waWNTZXR0aW5ncy5hcGlLZXksXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5hbnRocm9waWNTZXR0aW5ncy5tb2RlbFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIGNhc2UgJ2dlbWluaSc6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VtaW5pUHJvdmlkZXIoXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5nZW1pbmlTZXR0aW5ncy5hcGlLZXksXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5nZW1pbmlTZXR0aW5ncy5tb2RlbFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIGNhc2UgJ29sbGFtYSc6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgT2xsYW1hUHJvdmlkZXIoXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5vbGxhbWFTZXR0aW5ncy5zZXJ2ZXJVcmwsXHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5vbGxhbWFTZXR0aW5ncy5tb2RlbFxyXG4gICAgICAgICAgICApOyAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHByb3ZpZGVyIHR5cGU6ICR7c2V0dGluZ3MucHJvdmlkZXJ9YCk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGFuIEFJIHByb3ZpZGVyIGluc3RhbmNlIGJhc2VkIG9uIGEgdW5pZmllZCBtb2RlbCBzZWxlY3Rpb25cclxuICogXHJcbiAqIEBwYXJhbSBzZXR0aW5ncyBUaGUgcGx1Z2luIHNldHRpbmdzXHJcbiAqIEBwYXJhbSB1bmlmaWVkTW9kZWxJZCBUaGUgdW5pZmllZCBtb2RlbCBJRCAoZS5nLiwgXCJvcGVuYWk6Z3B0LTRcIilcclxuICogQHJldHVybnMgVGhlIGFwcHJvcHJpYXRlIHByb3ZpZGVyIGluc3RhbmNlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gY3JlYXRlUHJvdmlkZXJGcm9tVW5pZmllZE1vZGVsKHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzLCB1bmlmaWVkTW9kZWxJZDogc3RyaW5nKTogQmFzZVByb3ZpZGVyIHtcclxuICAgIGNvbnN0IFtwcm92aWRlclR5cGUsIG1vZGVsSWRdID0gdW5pZmllZE1vZGVsSWQuc3BsaXQoJzonLCAyKTtcclxuICAgIFxyXG4gICAgc3dpdGNoIChwcm92aWRlclR5cGUpIHtcclxuICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE9wZW5BSVByb3ZpZGVyKHNldHRpbmdzLm9wZW5haVNldHRpbmdzLmFwaUtleSwgbW9kZWxJZCwgc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MuYmFzZVVybCk7XHJcbiAgICAgICAgY2FzZSAnYW50aHJvcGljJzpcclxuICAgICAgICAgICAgcmV0dXJuIG5ldyBBbnRocm9waWNQcm92aWRlcihzZXR0aW5ncy5hbnRocm9waWNTZXR0aW5ncy5hcGlLZXksIG1vZGVsSWQpO1xyXG4gICAgICAgIGNhc2UgJ2dlbWluaSc6XHJcbiAgICAgICAgICAgIHJldHVybiBuZXcgR2VtaW5pUHJvdmlkZXIoc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MuYXBpS2V5LCBtb2RlbElkKTtcclxuICAgICAgICBjYXNlICdvbGxhbWEnOlxyXG4gICAgICAgICAgICByZXR1cm4gbmV3IE9sbGFtYVByb3ZpZGVyKHNldHRpbmdzLm9sbGFtYVNldHRpbmdzLnNlcnZlclVybCwgbW9kZWxJZCk7XHJcbiAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBJbnZhbGlkIHByb3ZpZGVyIHR5cGU6ICR7cHJvdmlkZXJUeXBlfWApO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2V0cyBhbGwgYXZhaWxhYmxlIG1vZGVscyBmcm9tIGFsbCBjb25maWd1cmVkIHByb3ZpZGVyc1xyXG4gKiBcclxuICogQHBhcmFtIHNldHRpbmdzIFRoZSBwbHVnaW4gc2V0dGluZ3NcclxuICogQHJldHVybnMgQXJyYXkgb2YgdW5pZmllZCBtb2RlbHMgZnJvbSBhbGwgcHJvdmlkZXJzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0QWxsQXZhaWxhYmxlTW9kZWxzKHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzKTogUHJvbWlzZTxVbmlmaWVkTW9kZWxbXT4ge1xyXG4gICAgY29uc3QgYWxsTW9kZWxzOiBVbmlmaWVkTW9kZWxbXSA9IFtdO1xyXG4gICAgXHJcbiAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gZ2V0IHByb3ZpZGVyIGRpc3BsYXkgbmFtZVxyXG4gICAgY29uc3QgZ2V0UHJvdmlkZXJEaXNwbGF5TmFtZSA9IChwcm92aWRlcjogc3RyaW5nKTogc3RyaW5nID0+IHtcclxuICAgICAgICBzd2l0Y2ggKHByb3ZpZGVyKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ29wZW5haSc6IHJldHVybiAnT3BlbkFJJztcclxuICAgICAgICAgICAgY2FzZSAnYW50aHJvcGljJzogcmV0dXJuICdBbnRocm9waWMnO1xyXG4gICAgICAgICAgICBjYXNlICdnZW1pbmknOiByZXR1cm4gJ0dvb2dsZSc7XHJcbiAgICAgICAgICAgIGNhc2UgJ29sbGFtYSc6IHJldHVybiAnT2xsYW1hJztcclxuICAgICAgICAgICAgZGVmYXVsdDogcmV0dXJuIHByb3ZpZGVyO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICBcclxuICAgIC8vIE9wZW5BSSBtb2RlbHNcclxuICAgIGlmIChzZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5hcGlLZXkgJiYgc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBzZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMuZm9yRWFjaChtb2RlbCA9PiB7XHJcbiAgICAgICAgICAgIGFsbE1vZGVscy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGlkOiBgb3BlbmFpOiR7bW9kZWx9YCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGAke21vZGVsfSAoJHtnZXRQcm92aWRlckRpc3BsYXlOYW1lKCdvcGVuYWknKX0pYCxcclxuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiAnb3BlbmFpJyxcclxuICAgICAgICAgICAgICAgIG1vZGVsSWQ6IG1vZGVsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBBbnRocm9waWMgbW9kZWxzXHJcbiAgICBpZiAoc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MuYXBpS2V5ICYmIHNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzLmF2YWlsYWJsZU1vZGVscy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzLmZvckVhY2gobW9kZWwgPT4ge1xyXG4gICAgICAgICAgICBhbGxNb2RlbHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICBpZDogYGFudGhyb3BpYzoke21vZGVsfWAsXHJcbiAgICAgICAgICAgICAgICBuYW1lOiBgJHttb2RlbH0gKCR7Z2V0UHJvdmlkZXJEaXNwbGF5TmFtZSgnYW50aHJvcGljJyl9KWAsXHJcbiAgICAgICAgICAgICAgICBwcm92aWRlcjogJ2FudGhyb3BpYycsXHJcbiAgICAgICAgICAgICAgICBtb2RlbElkOiBtb2RlbFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gR2VtaW5pIG1vZGVsc1xyXG4gICAgaWYgKHNldHRpbmdzLmdlbWluaVNldHRpbmdzLmFwaUtleSAmJiBzZXR0aW5ncy5nZW1pbmlTZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHNldHRpbmdzLmdlbWluaVNldHRpbmdzLmF2YWlsYWJsZU1vZGVscy5mb3JFYWNoKG1vZGVsID0+IHtcclxuICAgICAgICAgICAgYWxsTW9kZWxzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgaWQ6IGBnZW1pbmk6JHttb2RlbH1gLFxyXG4gICAgICAgICAgICAgICAgbmFtZTogYCR7bW9kZWx9ICgke2dldFByb3ZpZGVyRGlzcGxheU5hbWUoJ2dlbWluaScpfSlgLFxyXG4gICAgICAgICAgICAgICAgcHJvdmlkZXI6ICdnZW1pbmknLFxyXG4gICAgICAgICAgICAgICAgbW9kZWxJZDogbW9kZWxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcbiAgICBcclxuICAgIC8vIE9sbGFtYSBtb2RlbHNcclxuICAgIGlmIChzZXR0aW5ncy5vbGxhbWFTZXR0aW5ncy5zZXJ2ZXJVcmwgJiYgc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBzZXR0aW5ncy5vbGxhbWFTZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMuZm9yRWFjaChtb2RlbCA9PiB7XHJcbiAgICAgICAgICAgIGFsbE1vZGVscy5wdXNoKHtcclxuICAgICAgICAgICAgICAgIGlkOiBgb2xsYW1hOiR7bW9kZWx9YCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGAke21vZGVsfSAoJHtnZXRQcm92aWRlckRpc3BsYXlOYW1lKCdvbGxhbWEnKX0pYCxcclxuICAgICAgICAgICAgICAgIHByb3ZpZGVyOiAnb2xsYW1hJyxcclxuICAgICAgICAgICAgICAgIG1vZGVsSWQ6IG1vZGVsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gYWxsTW9kZWxzO1xyXG59XHJcblxyXG4vKipcclxuICogR2V0cyB0aGUgcHJvdmlkZXIgdHlwZSBmcm9tIGEgdW5pZmllZCBtb2RlbCBJRFxyXG4gKiBcclxuICogQHBhcmFtIHVuaWZpZWRNb2RlbElkIFRoZSB1bmlmaWVkIG1vZGVsIElEIChlLmcuLCBcIm9wZW5haTpncHQtNFwiKVxyXG4gKiBAcmV0dXJucyBUaGUgcHJvdmlkZXIgdHlwZVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGdldFByb3ZpZGVyRnJvbVVuaWZpZWRNb2RlbCh1bmlmaWVkTW9kZWxJZDogc3RyaW5nKTogJ29wZW5haScgfCAnYW50aHJvcGljJyB8ICdnZW1pbmknIHwgJ29sbGFtYScge1xyXG4gICAgY29uc3QgW3Byb3ZpZGVyVHlwZV0gPSB1bmlmaWVkTW9kZWxJZC5zcGxpdCgnOicsIDIpO1xyXG4gICAgcmV0dXJuIHByb3ZpZGVyVHlwZSBhcyAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHwgJ2dlbWluaScgfCAnb2xsYW1hJztcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldHMgdGhlIG1vZGVsIElEIGZyb20gYSB1bmlmaWVkIG1vZGVsIElEXHJcbiAqIFxyXG4gKiBAcGFyYW0gdW5pZmllZE1vZGVsSWQgVGhlIHVuaWZpZWQgbW9kZWwgSUQgKGUuZy4sIFwib3BlbmFpOmdwdC00XCIpXHJcbiAqIEByZXR1cm5zIFRoZSBtb2RlbCBJRCBmb3IgdGhlIHByb3ZpZGVyXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0TW9kZWxJZEZyb21VbmlmaWVkTW9kZWwodW5pZmllZE1vZGVsSWQ6IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBbLCBtb2RlbElkXSA9IHVuaWZpZWRNb2RlbElkLnNwbGl0KCc6JywgMik7XHJcbiAgICByZXR1cm4gbW9kZWxJZDtcclxufVxyXG4iLCAiaW1wb3J0IHsgU2V0dGluZywgTm90aWNlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgTXlQbHVnaW4gZnJvbSAnLi4vLi4vbWFpbic7XHJcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyLCBnZXRBbGxBdmFpbGFibGVNb2RlbHMsIGdldFByb3ZpZGVyRnJvbVVuaWZpZWRNb2RlbCB9IGZyb20gJy4uLy4uLy4uL3Byb3ZpZGVycyc7XHJcblxyXG4vKipcclxuICogU2hhcmVkIHNldHRpbmdzIHNlY3Rpb25zIHRoYXQgY2FuIGJlIHJlbmRlcmVkIGluIGFueSBtb2RhbCBvciB2aWV3XHJcbiAqIFRoaXMgZW5zdXJlcyBjb25zaXN0ZW50IFVJIGFjcm9zcyBkaWZmZXJlbnQgaW50ZXJmYWNlc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIFNldHRpbmdzU2VjdGlvbnMge1xyXG4gICAgcHJpdmF0ZSBwbHVnaW46IE15UGx1Z2luO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKHBsdWdpbjogTXlQbHVnaW4pIHtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEFJIE1vZGVsIFNldHRpbmdzIFNlY3Rpb25cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVuZGVyQUlNb2RlbFNldHRpbmdzKGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgb25SZWZyZXNoPzogKCkgPT4gdm9pZCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIC8vIFByZXZlbnQgZHVwbGljYXRlIFVJOiBjbGVhciBjb250YWluZXIgZmlyc3RcclxuICAgICAgICB3aGlsZSAoY29udGFpbmVyRWwuZmlyc3RDaGlsZCkgY29udGFpbmVyRWwucmVtb3ZlQ2hpbGQoY29udGFpbmVyRWwuZmlyc3RDaGlsZCk7XHJcblxyXG4gICAgICAgIC8vIC0tLSBNb2RlbCBTZXR0aW5nIFByZXNldHMgVUkgLS0tXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2V0dGluZ1ByZXNldHMgJiYgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZXR0aW5nUHJlc2V0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHByZXNldENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZURpdigpO1xyXG4gICAgICAgICAgICBwcmVzZXRDb250YWluZXIuYWRkQ2xhc3MoJ21vZGVsLXByZXNldC1idXR0b25zJyk7XHJcbiAgICAgICAgICAgIHByZXNldENvbnRhaW5lci5jcmVhdGVFbCgnZGl2JywgeyB0ZXh0OiAnUHJlc2V0czonLCBjbHM6ICdzZXR0aW5nLWl0ZW0tbmFtZScgfSk7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2V0dGluZ1ByZXNldHMuZm9yRWFjaCgocHJlc2V0LCBpZHgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJ0biA9IHByZXNldENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywgeyB0ZXh0OiBwcmVzZXQubmFtZSB9KTtcclxuICAgICAgICAgICAgICAgIGJ0bi5zdHlsZS5tYXJnaW5SaWdodCA9ICcwLjVlbSc7XHJcbiAgICAgICAgICAgICAgICBidG4ub25jbGljayA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBBcHBseSBwcmVzZXQgZmllbGRzIHRvIGN1cnJlbnQgc2V0dGluZ3NcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJlc2V0LnNlbGVjdGVkTW9kZWwgIT09IHVuZGVmaW5lZCkgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbCA9IHByZXNldC5zZWxlY3RlZE1vZGVsO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmVzZXQuc3lzdGVtTWVzc2FnZSAhPT0gdW5kZWZpbmVkKSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeXN0ZW1NZXNzYWdlID0gcHJlc2V0LnN5c3RlbU1lc3NhZ2U7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXNldC50ZW1wZXJhdHVyZSAhPT0gdW5kZWZpbmVkKSB0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wZXJhdHVyZSA9IHByZXNldC50ZW1wZXJhdHVyZTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAocHJlc2V0Lm1heFRva2VucyAhPT0gdW5kZWZpbmVkKSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYXhUb2tlbnMgPSBwcmVzZXQubWF4VG9rZW5zO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmVzZXQuZW5hYmxlU3RyZWFtaW5nICE9PSB1bmRlZmluZWQpIHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZVN0cmVhbWluZyA9IHByZXNldC5lbmFibGVTdHJlYW1pbmc7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gRGVib3VuY2Ugb25SZWZyZXNoIHRvIHByZXZlbnQgZHVwbGljYXRlIFVJXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uUmVmcmVzaCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoKHdpbmRvdyBhcyBhbnkpLl9haU1vZGVsU2V0dGluZ3NSZWZyZXNoVGltZW91dCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KCh3aW5kb3cgYXMgYW55KS5fYWlNb2RlbFNldHRpbmdzUmVmcmVzaFRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICh3aW5kb3cgYXMgYW55KS5fYWlNb2RlbFNldHRpbmdzUmVmcmVzaFRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uUmVmcmVzaCgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKHdpbmRvdyBhcyBhbnkpLl9haU1vZGVsU2V0dGluZ3NSZWZyZXNoVGltZW91dCA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0sIDUwKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgQXBwbGllZCBwcmVzZXQ6ICR7cHJlc2V0Lm5hbWV9YCk7XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnU3lzdGVtIE1lc3NhZ2UnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnU2V0IHRoZSBzeXN0ZW0gbWVzc2FnZSBmb3IgdGhlIEFJJylcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4gdGV4dFxyXG4gICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdZb3UgYXJlIGEgaGVscGZ1bCBhc3Npc3RhbnQuJylcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zeXN0ZW1NZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnN5c3RlbU1lc3NhZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbmFibGUgU3RyZWFtaW5nJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0VuYWJsZSBvciBkaXNhYmxlIHN0cmVhbWluZyBmb3IgY29tcGxldGlvbnMnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVTdHJlYW1pbmcpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlU3RyZWFtaW5nID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnVGVtcGVyYXR1cmUnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnU2V0IHRoZSByYW5kb21uZXNzIG9mIHRoZSBtb2RlbFxcJ3Mgb3V0cHV0ICgwLTEpJylcclxuICAgICAgICAgICAgLmFkZFNsaWRlcihzbGlkZXIgPT4gc2xpZGVyXHJcbiAgICAgICAgICAgICAgICAuc2V0TGltaXRzKDAsIDEsIDAuMSlcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wZXJhdHVyZSlcclxuICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGVtcGVyYXR1cmUgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gUmVmcmVzaCBhdmFpbGFibGUgbW9kZWxzIGJ1dHRvblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnUmVmcmVzaCBBdmFpbGFibGUgTW9kZWxzJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ1Rlc3QgY29ubmVjdGlvbnMgdG8gYWxsIGNvbmZpZ3VyZWQgcHJvdmlkZXJzIGFuZCByZWZyZXNoIGF2YWlsYWJsZSBtb2RlbHMnKVxyXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cclxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdSZWZyZXNoIE1vZGVscycpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1JlZnJlc2hpbmcuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5yZWZyZXNoQWxsQXZhaWxhYmxlTW9kZWxzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ1N1Y2Nlc3NmdWxseSByZWZyZXNoZWQgYXZhaWxhYmxlIG1vZGVscycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAob25SZWZyZXNoKSBvblJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBFcnJvciByZWZyZXNoaW5nIG1vZGVsczogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZmluYWxseSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1dHRvbi5zZXRCdXR0b25UZXh0KCdSZWZyZXNoIE1vZGVscycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gVW5pZmllZCBtb2RlbCBzZWxlY3Rpb24gZHJvcGRvd25cclxuICAgICAgICBhd2FpdCB0aGlzLnJlbmRlclVuaWZpZWRNb2RlbERyb3Bkb3duKGNvbnRhaW5lckVsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERhdGUgU2V0dGluZ3MgU2VjdGlvblxyXG4gICAgICovXHJcbiAgICByZW5kZXJEYXRlU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdJbmNsdWRlIERhdGUgd2l0aCBTeXN0ZW0gTWVzc2FnZScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdBZGQgdGhlIGN1cnJlbnQgZGF0ZSB0byB0aGUgc3lzdGVtIG1lc3NhZ2UnKVxyXG4gICAgICAgICAgICAuYWRkVG9nZ2xlKHRvZ2dsZSA9PiB0b2dnbGVcclxuICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5pbmNsdWRlRGF0ZVdpdGhTeXN0ZW1NZXNzYWdlKVxyXG4gICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmluY2x1ZGVEYXRlV2l0aFN5c3RlbU1lc3NhZ2UgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdJbmNsdWRlIFRpbWUgd2l0aCBTeXN0ZW0gTWVzc2FnZScpXHJcbiAgICAgICAgICAgIC5zZXREZXNjKCdBZGQgdGhlIGN1cnJlbnQgdGltZSBhbG9uZyB3aXRoIHRoZSBkYXRlIHRvIHRoZSBzeXN0ZW0gbWVzc2FnZScpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmluY2x1ZGVUaW1lV2l0aFN5c3RlbU1lc3NhZ2UpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuaW5jbHVkZVRpbWVXaXRoU3lzdGVtTWVzc2FnZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTm90ZSBSZWZlcmVuY2UgU2V0dGluZ3MgU2VjdGlvblxyXG4gICAgICovXHJcbiAgICByZW5kZXJOb3RlUmVmZXJlbmNlU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdFbmFibGUgT2JzaWRpYW4gTGlua3MnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnUmVhZCBPYnNpZGlhbiBsaW5rcyBpbiBtZXNzYWdlcyB1c2luZyBbW2ZpbGVuYW1lXV0gc3ludGF4JylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlT2JzaWRpYW5MaW5rcylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVPYnNpZGlhbkxpbmtzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnRW5hYmxlIENvbnRleHQgTm90ZXMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnQXR0YWNoIHNwZWNpZmllZCBub3RlIGNvbnRlbnQgdG8gY2hhdCBtZXNzYWdlcycpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmVuYWJsZUNvbnRleHROb3RlcylcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVDb250ZXh0Tm90ZXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgY29uc3QgY29udGV4dE5vdGVzQ29udGFpbmVyID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KCdjb250ZXh0LW5vdGVzLWNvbnRhaW5lcicpO1xyXG4gICAgICAgIGNvbnRleHROb3Rlc0NvbnRhaW5lci5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMjRweCc7XHJcblxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRleHROb3Rlc0NvbnRhaW5lcilcclxuICAgICAgICAgICAgLnNldE5hbWUoJ0NvbnRleHQgTm90ZXMnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnTm90ZXMgdG8gYXR0YWNoIGFzIGNvbnRleHQgKHN1cHBvcnRzIFtbZmlsZW5hbWVdXSBhbmQgW1tmaWxlbmFtZSNoZWFkZXJdXSBzeW50YXgpJylcclxuICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGV4dC5zZXRQbGFjZWhvbGRlcignW1tOb3RlIE5hbWVdXVxcbltbQW5vdGhlciBOb3RlI0hlYWRlcl1dJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGV4dE5vdGVzIHx8ICcnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGV4dE5vdGVzID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnJvd3MgPSA0O1xyXG4gICAgICAgICAgICAgICAgdGV4dC5pbnB1dEVsLnN0eWxlLndpZHRoID0gJzEwMCUnO1xyXG4gICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgbmV3IFNldHRpbmcoY29udGFpbmVyRWwpXHJcbiAgICAgICAgICAgIC5zZXROYW1lKCdFeHBhbmQgTGlua2VkIE5vdGVzIFJlY3Vyc2l2ZWx5JylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0lmIGVuYWJsZWQsIHdoZW4gZmV0Y2hpbmcgYSBub3RlLCBhbHNvIGZldGNoIGFuZCBleHBhbmQgbGlua3Mgd2l0aGluIHRoYXQgbm90ZSByZWN1cnNpdmVseSAocHJldmVudHMgaW5maW5pdGUgbG9vcHMpLicpXHJcbiAgICAgICAgICAgIC5hZGRUb2dnbGUodG9nZ2xlID0+IHRvZ2dsZVxyXG4gICAgICAgICAgICAgICAgLnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGFuZExpbmtlZE5vdGVzUmVjdXJzaXZlbHkgPz8gZmFsc2UpXHJcbiAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwYW5kTGlua2VkTm90ZXNSZWN1cnNpdmVseSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIFByb3ZpZGVyIENvbmZpZ3VyYXRpb24gU2VjdGlvblxyXG4gICAgICovXHJcbiAgICByZW5kZXJQcm92aWRlckNvbmZpZ3VyYXRpb24oY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ3AnLCB7IFxyXG4gICAgICAgICAgICB0ZXh0OiAnQVBJIGtleXMgYXJlIGNvbmZpZ3VyZWQgaW4gdGhlIG1haW4gcGx1Z2luIHNldHRpbmdzLiBVc2UgdGhlIHRlc3QgYnV0dG9ucyBiZWxvdyB0byB2ZXJpZnkgY29ubmVjdGlvbnMgYW5kIHJlZnJlc2ggYXZhaWxhYmxlIG1vZGVscy4nLFxyXG4gICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gUmVuZGVyIGFsbCBwcm92aWRlciBjb25maWd1cmF0aW9uc1xyXG4gICAgICAgIHRoaXMucmVuZGVyT3BlbkFJQ29uZmlnKGNvbnRhaW5lckVsKTtcclxuICAgICAgICB0aGlzLnJlbmRlckFudGhyb3BpY0NvbmZpZyhjb250YWluZXJFbCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJHZW1pbmlDb25maWcoY29udGFpbmVyRWwpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyT2xsYW1hQ29uZmlnKGNvbnRhaW5lckVsKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlcnMgdGhlIHVuaWZpZWQgbW9kZWwgc2VsZWN0aW9uIGRyb3Bkb3duXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgcmVuZGVyVW5pZmllZE1vZGVsRHJvcGRvd24oY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICAgICAgLy8gRW5zdXJlIHdlIGhhdmUgYXZhaWxhYmxlIG1vZGVsc1xyXG4gICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzIHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLmF2YWlsYWJsZU1vZGVscy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzID0gYXdhaXQgZ2V0QWxsQXZhaWxhYmxlTW9kZWxzKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUoJ1NlbGVjdGVkIE1vZGVsJylcclxuICAgICAgICAgICAgLnNldERlc2MoJ0Nob29zZSBmcm9tIGFsbCBhdmFpbGFibGUgbW9kZWxzIGFjcm9zcyBhbGwgY29uZmlndXJlZCBwcm92aWRlcnMnKVxyXG4gICAgICAgICAgICAuYWRkRHJvcGRvd24oZHJvcGRvd24gPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gQWRkIGEgZGVmYXVsdCBvcHRpb24gaWYgbm8gbW9kZWxzIGFyZSBhdmFpbGFibGVcclxuICAgICAgICAgICAgICAgIGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzIHx8IHRoaXMucGx1Z2luLnNldHRpbmdzLmF2YWlsYWJsZU1vZGVscy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJycsICdObyBtb2RlbHMgYXZhaWxhYmxlIC0gY29uZmlndXJlIHByb3ZpZGVycyBiZWxvdycpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wZG93bi5hZGRPcHRpb24oJycsICdTZWxlY3QgYSBtb2RlbC4uLicpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEdyb3VwIG1vZGVscyBieSBwcm92aWRlciBmb3IgYmV0dGVyIG9yZ2FuaXphdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1vZGVsc0J5UHJvdmlkZXI6IFJlY29yZDxzdHJpbmcsIGFueVtdPiA9IHt9O1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmF2YWlsYWJsZU1vZGVscy5mb3JFYWNoKG1vZGVsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFtb2RlbHNCeVByb3ZpZGVyW21vZGVsLnByb3ZpZGVyXSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbW9kZWxzQnlQcm92aWRlclttb2RlbC5wcm92aWRlcl0gPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtb2RlbHNCeVByb3ZpZGVyW21vZGVsLnByb3ZpZGVyXS5wdXNoKG1vZGVsKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQWRkIG1vZGVscyBncm91cGVkIGJ5IHByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMobW9kZWxzQnlQcm92aWRlcikuZm9yRWFjaCgoW3Byb3ZpZGVyLCBtb2RlbHNdKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1vZGVscy5mb3JFYWNoKG1vZGVsID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRyb3Bkb3duLmFkZE9wdGlvbihtb2RlbC5pZCwgbW9kZWwubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBkcm9wZG93blxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RlZE1vZGVsIHx8ICcnKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbCA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBwcm92aWRlciBzZXR0aW5nIGJhc2VkIG9uIHNlbGVjdGVkIG1vZGVsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICh2YWx1ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSBnZXRQcm92aWRlckZyb21VbmlmaWVkTW9kZWwodmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdmlkZXIgPSBwcm92aWRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBTaG93IGN1cnJlbnQgc2VsZWN0aW9uIGluZm8gaWYgYSBtb2RlbCBpcyBzZWxlY3RlZFxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RlZE1vZGVsICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmF2YWlsYWJsZU1vZGVscykge1xyXG4gICAgICAgICAgICBjb25zdCBzZWxlY3RlZE1vZGVsID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzLmZpbmQoXHJcbiAgICAgICAgICAgICAgICBtb2RlbCA9PiBtb2RlbC5pZCA9PT0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbFxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICBpZiAoc2VsZWN0ZWRNb2RlbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaW5mb0VsID0gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgY2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyB9KTtcclxuICAgICAgICAgICAgICAgIGluZm9FbC5zZXRUZXh0KGBDdXJyZW50bHkgdXNpbmc6ICR7c2VsZWN0ZWRNb2RlbC5uYW1lfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVmcmVzaGVzIGF2YWlsYWJsZSBtb2RlbHMgZnJvbSBhbGwgY29uZmlndXJlZCBwcm92aWRlcnNcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyByZWZyZXNoQWxsQXZhaWxhYmxlTW9kZWxzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVycyA9IFsnb3BlbmFpJywgJ2FudGhyb3BpYycsICdnZW1pbmknLCAnb2xsYW1hJ10gYXMgY29uc3Q7XHJcblxyXG4gICAgICAgIGZvciAoY29uc3QgcHJvdmlkZXJUeXBlIG9mIHByb3ZpZGVycykge1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxQcm92aWRlciA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdmlkZXIgPSBwcm92aWRlclR5cGU7IC8vIFRlbXBvcmFyaWx5IHNldCBwcm92aWRlciB0byB0ZXN0IGNvbm5lY3Rpb25cclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlckluc3RhbmNlID0gY3JlYXRlUHJvdmlkZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgcHJvdmlkZXJJbnN0YW5jZS50ZXN0Q29ubmVjdGlvbigpO1xyXG5cclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyID0gb3JpZ2luYWxQcm92aWRlcjsgLy8gUmVzdG9yZSBvcmlnaW5hbCBwcm92aWRlclxyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IHByb3ZpZGVyU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5nc1tgJHtwcm92aWRlclR5cGV9U2V0dGluZ3NgIGFzIGtleW9mIHR5cGVvZiB0aGlzLnBsdWdpbi5zZXR0aW5nc10gYXMgYW55O1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQubW9kZWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvdmlkZXJTZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMgPSByZXN1bHQubW9kZWxzO1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3ZpZGVyU2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm92aWRlclNldHRpbmdzLmxhc3RUZXN0UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IERhdGUubm93KCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGBFcnJvciB0ZXN0aW5nICR7cHJvdmlkZXJUeXBlfTpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLmF2YWlsYWJsZU1vZGVscyA9IGF3YWl0IGdldEFsbEF2YWlsYWJsZU1vZGVscyh0aGlzLnBsdWdpbi5zZXR0aW5ncyk7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXJzIGEgY29sbGFwc2libGUgc2VjdGlvbiBmb3IgcHJvdmlkZXIgY29uZmlndXJhdGlvbi5cclxuICAgICAqIEBwYXJhbSBjb250YWluZXJFbCBUaGUgSFRNTCBlbGVtZW50IHRvIHJlbmRlciB0aGUgc2VjdGlvbiBpbnRvLlxyXG4gICAgICogQHBhcmFtIHByb3ZpZGVyVHlwZSBUaGUgdHlwZSBvZiB0aGUgcHJvdmlkZXIgKGUuZy4sICdvcGVuYWknLCAnYW50aHJvcGljJykuXHJcbiAgICAgKiBAcGFyYW0gZGlzcGxheU5hbWUgVGhlIGRpc3BsYXkgbmFtZSBvZiB0aGUgcHJvdmlkZXIgKGUuZy4sICdPcGVuQUknLCAnQW50aHJvcGljJykuXHJcbiAgICAgKiBAcGFyYW0gcmVuZGVyU3BlY2lmaWNTZXR0aW5ncyBBIGNhbGxiYWNrIGZ1bmN0aW9uIHRvIHJlbmRlciBwcm92aWRlci1zcGVjaWZpYyBzZXR0aW5ncy5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBfcmVuZGVyQ29sbGFwc2libGVQcm92aWRlckNvbmZpZyhcclxuICAgICAgICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXHJcbiAgICAgICAgcHJvdmlkZXJUeXBlOiAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHwgJ2dlbWluaScgfCAnb2xsYW1hJyxcclxuICAgICAgICBkaXNwbGF5TmFtZTogc3RyaW5nLFxyXG4gICAgICAgIHJlbmRlclNwZWNpZmljU2V0dGluZ3M/OiAoY29udGVudEVsOiBIVE1MRWxlbWVudCkgPT4gdm9pZFxyXG4gICAgKTogdm9pZCB7XHJcbiAgICAgICAgY29uc3QgY29sbGFwc2libGVDb250YWluZXIgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoeyBjbHM6ICdwcm92aWRlci1jb2xsYXBzaWJsZScgfSk7XHJcbiAgICAgICAgY29uc3QgaGVhZGVyRWwgPSBjb2xsYXBzaWJsZUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jywge1xyXG4gICAgICAgICAgICBjbHM6ICdwcm92aWRlci1oZWFkZXInLFxyXG4gICAgICAgICAgICB0ZXh0OiBgXHUyNUI2ICR7ZGlzcGxheU5hbWV9IENvbmZpZ3VyYXRpb25gXHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgT2JqZWN0LmFzc2lnbihoZWFkZXJFbC5zdHlsZSwge1xyXG4gICAgICAgICAgICBjdXJzb3I6ICdwb2ludGVyJyxcclxuICAgICAgICAgICAgdXNlclNlbGVjdDogJ25vbmUnLFxyXG4gICAgICAgICAgICBwYWRkaW5nOiAnOHB4IDAnLFxyXG4gICAgICAgICAgICBmb250V2VpZ2h0OiAnYm9sZCdcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgY29uc3QgY29udGVudEVsID0gY29sbGFwc2libGVDb250YWluZXIuY3JlYXRlRGl2KHsgY2xzOiAncHJvdmlkZXItY29udGVudCcgfSk7XHJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLmRpc3BsYXkgPSAnbm9uZSc7XHJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLnBhZGRpbmdMZWZ0ID0gJzE2cHgnO1xyXG5cclxuICAgICAgICBsZXQgaXNFeHBhbmRlZCA9IGZhbHNlO1xyXG4gICAgICAgIGhlYWRlckVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICBpc0V4cGFuZGVkID0gIWlzRXhwYW5kZWQ7XHJcbiAgICAgICAgICAgIGNvbnRlbnRFbC5zdHlsZS5kaXNwbGF5ID0gaXNFeHBhbmRlZCA/ICdibG9jaycgOiAnbm9uZSc7XHJcbiAgICAgICAgICAgIGhlYWRlckVsLnRleHRDb250ZW50ID0gYCR7aXNFeHBhbmRlZCA/ICdcdTI1QkMnIDogJ1x1MjVCNid9ICR7ZGlzcGxheU5hbWV9IENvbmZpZ3VyYXRpb25gO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBzZXR0aW5ncyA9IHRoaXMucGx1Z2luLnNldHRpbmdzW2Ake3Byb3ZpZGVyVHlwZX1TZXR0aW5nc2AgYXMga2V5b2YgdHlwZW9mIHRoaXMucGx1Z2luLnNldHRpbmdzXSBhcyBhbnk7XHJcbiAgICAgICAgY29uc3QgYXBpS2V5U3RhdHVzID0gc2V0dGluZ3MuYXBpS2V5ID9cclxuICAgICAgICAgICAgYEFQSSBLZXk6ICR7c2V0dGluZ3MuYXBpS2V5LnN1YnN0cmluZygwLCA4KX0uLi5gIDpcclxuICAgICAgICAgICAgJ05vIEFQSSBLZXkgY29uZmlndXJlZCc7XHJcbiAgICAgICAgY29uc3Qgc2VydmVyVXJsU3RhdHVzID0gc2V0dGluZ3Muc2VydmVyVXJsID9cclxuICAgICAgICAgICAgYFNlcnZlciBVUkw6ICR7c2V0dGluZ3Muc2VydmVyVXJsfWAgOlxyXG4gICAgICAgICAgICAnTm8gU2VydmVyIFVSTCBjb25maWd1cmVkJztcclxuXHJcbiAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7XHJcbiAgICAgICAgICAgIGNsczogJ3NldHRpbmctaXRlbS1kZXNjcmlwdGlvbicsXHJcbiAgICAgICAgICAgIHRleHQ6IGAke3NldHRpbmdzLmFwaUtleSA/IGFwaUtleVN0YXR1cyA6IHNlcnZlclVybFN0YXR1c30gKENvbmZpZ3VyZSBpbiBtYWluIHBsdWdpbiBzZXR0aW5ncylgXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGlmIChyZW5kZXJTcGVjaWZpY1NldHRpbmdzKSB7XHJcbiAgICAgICAgICAgIHJlbmRlclNwZWNpZmljU2V0dGluZ3MoY29udGVudEVsKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvdmlkZXJUZXN0U2VjdGlvbihjb250ZW50RWwsIHByb3ZpZGVyVHlwZSwgZGlzcGxheU5hbWUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVycyB0aGUgT3BlbkFJIGNvbmZpZ3VyYXRpb24gc2VjdGlvbi5cclxuICAgICAqIEBwYXJhbSBjb250YWluZXJFbCBUaGUgSFRNTCBlbGVtZW50IHRvIHJlbmRlciB0aGUgc2VjdGlvbiBpbnRvLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlbmRlck9wZW5BSUNvbmZpZyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJDb2xsYXBzaWJsZVByb3ZpZGVyQ29uZmlnKGNvbnRhaW5lckVsLCAnb3BlbmFpJywgJ09wZW5BSScsIChjb250ZW50RWwpID0+IHtcclxuICAgICAgICAgICAgbmV3IFNldHRpbmcoY29udGVudEVsKVxyXG4gICAgICAgICAgICAgICAgLnNldE5hbWUoJ09wZW5BSSBCYXNlIFVSTCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0RGVzYygnQ3VzdG9tIGJhc2UgVVJMIGZvciBPcGVuQUkgQVBJIChvcHRpb25hbCknKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHQodGV4dCA9PiB0ZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgLnNldFBsYWNlaG9sZGVyKCdodHRwczovL2FwaS5vcGVuYWkuY29tL3YxJylcclxuICAgICAgICAgICAgICAgICAgICAuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MuYmFzZVVybCB8fCAnJylcclxuICAgICAgICAgICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5haVNldHRpbmdzLmJhc2VVcmwgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSkpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVycyB0aGUgQW50aHJvcGljIGNvbmZpZ3VyYXRpb24gc2VjdGlvbi5cclxuICAgICAqIEBwYXJhbSBjb250YWluZXJFbCBUaGUgSFRNTCBlbGVtZW50IHRvIHJlbmRlciB0aGUgc2VjdGlvbiBpbnRvLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlbmRlckFudGhyb3BpY0NvbmZpZyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJDb2xsYXBzaWJsZVByb3ZpZGVyQ29uZmlnKGNvbnRhaW5lckVsLCAnYW50aHJvcGljJywgJ0FudGhyb3BpYycpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVycyB0aGUgR2VtaW5pIGNvbmZpZ3VyYXRpb24gc2VjdGlvbi5cclxuICAgICAqIEBwYXJhbSBjb250YWluZXJFbCBUaGUgSFRNTCBlbGVtZW50IHRvIHJlbmRlciB0aGUgc2VjdGlvbiBpbnRvLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlbmRlckdlbWluaUNvbmZpZyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJDb2xsYXBzaWJsZVByb3ZpZGVyQ29uZmlnKGNvbnRhaW5lckVsLCAnZ2VtaW5pJywgJ0dlbWluaScpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVycyB0aGUgT2xsYW1hIGNvbmZpZ3VyYXRpb24gc2VjdGlvbi5cclxuICAgICAqIEBwYXJhbSBjb250YWluZXJFbCBUaGUgSFRNTCBlbGVtZW50IHRvIHJlbmRlciB0aGUgc2VjdGlvbiBpbnRvLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlbmRlck9sbGFtYUNvbmZpZyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLl9yZW5kZXJDb2xsYXBzaWJsZVByb3ZpZGVyQ29uZmlnKGNvbnRhaW5lckVsLCAnb2xsYW1hJywgJ09sbGFtYScsIChjb250ZW50RWwpID0+IHtcclxuICAgICAgICAgICAgY29udGVudEVsLmNyZWF0ZUVsKCdkaXYnLCB7XHJcbiAgICAgICAgICAgICAgICBjbHM6ICdzZXR0aW5nLWl0ZW0tZGVzY3JpcHRpb24nLFxyXG4gICAgICAgICAgICAgICAgdGV4dDogJ1RvIHVzZSBPbGxhbWE6J1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgY29uc3Qgc3RlcHMgPSBjb250ZW50RWwuY3JlYXRlRWwoJ29sJyk7XHJcbiAgICAgICAgICAgIHN0ZXBzLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ0luc3RhbGwgT2xsYW1hIGZyb20gaHR0cHM6Ly9vbGxhbWEuYWknIH0pO1xyXG4gICAgICAgICAgICBzdGVwcy5jcmVhdGVFbCgnbGknLCB7IHRleHQ6ICdTdGFydCB0aGUgT2xsYW1hIHNlcnZlcicgfSk7XHJcbiAgICAgICAgICAgIHN0ZXBzLmNyZWF0ZUVsKCdsaScsIHsgdGV4dDogJ1B1bGwgbW9kZWxzIHVzaW5nIFwib2xsYW1hIHB1bGwgbW9kZWwtbmFtZVwiJyB9KTtcclxuICAgICAgICAgICAgc3RlcHMuY3JlYXRlRWwoJ2xpJywgeyB0ZXh0OiAnVGVzdCBjb25uZWN0aW9uIHRvIHNlZSBhdmFpbGFibGUgbW9kZWxzJyB9KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlcnMgdGhlIHByb3ZpZGVyIGNvbm5lY3Rpb24gdGVzdCBzZWN0aW9uLlxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5lckVsIFRoZSBIVE1MIGVsZW1lbnQgdG8gcmVuZGVyIHRoZSBzZWN0aW9uIGludG8uXHJcbiAgICAgKiBAcGFyYW0gcHJvdmlkZXIgVGhlIGludGVybmFsIGlkZW50aWZpZXIgZm9yIHRoZSBwcm92aWRlciAoZS5nLiwgJ29wZW5haScpLlxyXG4gICAgICogQHBhcmFtIGRpc3BsYXlOYW1lIFRoZSB1c2VyLWZyaWVuZGx5IG5hbWUgb2YgdGhlIHByb3ZpZGVyIChlLmcuLCAnT3BlbkFJJykuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVuZGVyUHJvdmlkZXJUZXN0U2VjdGlvbihjb250YWluZXJFbDogSFRNTEVsZW1lbnQsIHByb3ZpZGVyOiAnb3BlbmFpJyB8ICdhbnRocm9waWMnIHwgJ2dlbWluaScgfCAnb2xsYW1hJywgZGlzcGxheU5hbWU6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gdGhpcy5wbHVnaW4uc2V0dGluZ3NbYCR7cHJvdmlkZXJ9U2V0dGluZ3NgIGFzIGtleW9mIHR5cGVvZiB0aGlzLnBsdWdpbi5zZXR0aW5nc10gYXMgYW55O1xyXG4gICAgICAgIFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnVGVzdCBDb25uZWN0aW9uJylcclxuICAgICAgICAgICAgLnNldERlc2MoYFZlcmlmeSB5b3VyIEFQSSBrZXkgYW5kIGZldGNoIGF2YWlsYWJsZSBtb2RlbHMgZm9yICR7ZGlzcGxheU5hbWV9YClcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidXR0b24gPT4gYnV0dG9uXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnVGVzdCcpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnV0dG9uLnNldEJ1dHRvblRleHQoJ1Rlc3RpbmcuLi4nKTtcclxuICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQodHJ1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGVtcG9yYXJpbHkgc2V0IHByb3ZpZGVyIHRvIHRlc3QgY29ubmVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBvcmlnaW5hbFByb3ZpZGVyID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MucHJvdmlkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyID0gcHJvdmlkZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwcm92aWRlckluc3RhbmNlID0gY3JlYXRlUHJvdmlkZXIodGhpcy5wbHVnaW4uc2V0dGluZ3MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBwcm92aWRlckluc3RhbmNlLnRlc3RDb25uZWN0aW9uKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBSZXN0b3JlIG9yaWdpbmFsIHByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnByb3ZpZGVyID0gb3JpZ2luYWxQcm92aWRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3VjY2VzcyAmJiByZXN1bHQubW9kZWxzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBzZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMgPSByZXN1bHQubW9kZWxzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3MubGFzdFRlc3RSZXN1bHQgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdGltZXN0YW1wOiBEYXRlLm5vdygpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogcmVzdWx0Lm1lc3NhZ2VcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgLy8gUmVmcmVzaCB1bmlmaWVkIG1vZGVsc1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzID0gYXdhaXQgZ2V0QWxsQXZhaWxhYmxlTW9kZWxzKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKHJlc3VsdC5tZXNzYWdlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHNldHRpbmdzLmxhc3RUZXN0UmVzdWx0ID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRpbWVzdGFtcDogRGF0ZS5ub3coKSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlOiByZXN1bHQubWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UocmVzdWx0Lm1lc3NhZ2UpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0QnV0dG9uVGV4dCgnVGVzdCcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBidXR0b24uc2V0RGlzYWJsZWQoZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmxhc3RUZXN0UmVzdWx0KSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBuZXcgRGF0ZShzZXR0aW5ncy5sYXN0VGVzdFJlc3VsdC50aW1lc3RhbXApO1xyXG4gICAgICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogYExhc3QgdGVzdDogJHtkYXRlLnRvTG9jYWxlU3RyaW5nKCl9IC0gJHtzZXR0aW5ncy5sYXN0VGVzdFJlc3VsdC5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICBjbHM6IHNldHRpbmdzLmxhc3RUZXN0UmVzdWx0LnN1Y2Nlc3MgPyAnc3VjY2VzcycgOiAnZXJyb3InXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHNldHRpbmdzLmF2YWlsYWJsZU1vZGVscyAmJiBzZXR0aW5ncy5hdmFpbGFibGVNb2RlbHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnZGl2Jywge1xyXG4gICAgICAgICAgICAgICAgdGV4dDogYEF2YWlsYWJsZSBtb2RlbHM6ICR7c2V0dGluZ3MuYXZhaWxhYmxlTW9kZWxzLm1hcCgobTogYW55KSA9PiBtLm5hbWUgfHwgbS5pZCkuam9pbignLCAnKX1gLFxyXG4gICAgICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJ1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXJzIGFsbCBzZXR0aW5ncyBzZWN0aW9ucyBpbiBvcmRlciBmb3IgYSBtb2RhbCBvciB2aWV3LlxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5lckVsIFRoZSBIVE1MIGVsZW1lbnQgdG8gcmVuZGVyIHRoZSBzZWN0aW9ucyBpbnRvLlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgT3B0aW9uYWwgc2V0dGluZ3MsIGUuZy4sIG9uUmVmcmVzaCBjYWxsYmFjay5cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVuZGVyQWxsU2V0dGluZ3MoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LCBvcHRpb25zPzogeyBvblJlZnJlc2g/OiAoKSA9PiB2b2lkIH0pIHtcclxuICAgICAgICBhd2FpdCB0aGlzLnJlbmRlckFJTW9kZWxTZXR0aW5ncyhjb250YWluZXJFbCwgb3B0aW9ucz8ub25SZWZyZXNoKTtcclxuICAgICAgICB0aGlzLnJlbmRlckRhdGVTZXR0aW5ncyhjb250YWluZXJFbCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJOb3RlUmVmZXJlbmNlU2V0dGluZ3MoY29udGFpbmVyRWwpO1xyXG4gICAgICAgIHRoaXMucmVuZGVyUHJvdmlkZXJDb25maWd1cmF0aW9uKGNvbnRhaW5lckVsKTtcclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQ29tcG9uZW50LCBCdXR0b25Db21wb25lbnQgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIElCdXR0b25Db25maWcge1xyXG4gICAgbGFiZWw6IHN0cmluZztcclxuICAgIHRvb2x0aXA6IHN0cmluZztcclxuICAgIG9uQ2xpY2s6ICgpID0+IHZvaWQ7XHJcbiAgICBjbGFzc05hbWU/OiBzdHJpbmc7XHJcbiAgICBpc0hpZGRlbj86IGJvb2xlYW47XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBCdXR0b25zIGNvbXBvbmVudCBmb3IgaGFuZGxpbmcgYWxsIGJ1dHRvbiBjcmVhdGlvbiBhbmQgc3R5bGluZ1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEJ1dHRvbnMgZXh0ZW5kcyBDb21wb25lbnQge1xyXG4gICAgcHJpdmF0ZSBjb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBzZW5kQnV0dG9uOiBCdXR0b25Db21wb25lbnQ7XHJcbiAgICBwcml2YXRlIHN0b3BCdXR0b246IEJ1dHRvbkNvbXBvbmVudDtcclxuICAgIHByaXZhdGUgY2xlYXJCdXR0b246IEJ1dHRvbkNvbXBvbmVudDtcclxuICAgIHByaXZhdGUgc2V0dGluZ3NCdXR0b246IEJ1dHRvbkNvbXBvbmVudDtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuY29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5jb250YWluZXIuYWRkQ2xhc3MoJ2FpLWNoYXQtYnV0dG9ucycpO1xyXG4gICAgICAgIHRoaXMuc2VuZEJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQodGhpcy5jb250YWluZXIpXHJcbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdTZW5kJylcclxuICAgICAgICAgICAgLnNldENsYXNzKCdtb2QtY3RhJyk7XHJcbiAgICAgICAgdGhpcy5zZW5kQnV0dG9uLmJ1dHRvbkVsLmFkZENsYXNzKCdoaWRkZW4tYnV0dG9uJyk7XHJcblxyXG4gICAgICAgIHRoaXMuc3RvcEJ1dHRvbiA9IG5ldyBCdXR0b25Db21wb25lbnQodGhpcy5jb250YWluZXIpXHJcbiAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdTdG9wJyk7XHJcbiAgICAgICAgdGhpcy5zdG9wQnV0dG9uLmJ1dHRvbkVsLmFkZENsYXNzKCdoaWRkZW4tYnV0dG9uJyk7XHJcblxyXG4gICAgICAgIHRoaXMuY2xlYXJCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KHRoaXMuY29udGFpbmVyKVxyXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnQ2xlYXInKTtcclxuICAgICAgICB0aGlzLmNsZWFyQnV0dG9uLmJ1dHRvbkVsLmFkZENsYXNzKCdoaWRkZW4tYnV0dG9uJyk7XHJcblxyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NCdXR0b24gPSBuZXcgQnV0dG9uQ29tcG9uZW50KHRoaXMuY29udGFpbmVyKVxyXG4gICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnU2V0dGluZ3MnKTtcclxuICAgICAgICB0aGlzLnNldHRpbmdzQnV0dG9uLmJ1dHRvbkVsLmFkZENsYXNzKCdoaWRkZW4tYnV0dG9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIGJ1dHRvbiBjb250YWluZXIgZWxlbWVudFxyXG4gICAgICovXHJcbiAgICBnZXRDb250YWluZXIoKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvbnRhaW5lcjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTZW5kQnV0dG9uKCk6IEJ1dHRvbkNvbXBvbmVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2VuZEJ1dHRvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRTdG9wQnV0dG9uKCk6IEJ1dHRvbkNvbXBvbmVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc3RvcEJ1dHRvbjtcclxuICAgIH1cclxuXHJcbiAgICBnZXRDbGVhckJ1dHRvbigpOiBCdXR0b25Db21wb25lbnQge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNsZWFyQnV0dG9uO1xyXG4gICAgfVxyXG5cclxuICAgIGdldFNldHRpbmdzQnV0dG9uKCk6IEJ1dHRvbkNvbXBvbmVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuc2V0dGluZ3NCdXR0b247XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd1NlbmRCdXR0b24oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZW5kQnV0dG9uLmJ1dHRvbkVsLnJlbW92ZUNsYXNzKCdoaWRkZW4tYnV0dG9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZVNlbmRCdXR0b24oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zZW5kQnV0dG9uLmJ1dHRvbkVsLmFkZENsYXNzKCdoaWRkZW4tYnV0dG9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd1N0b3BCdXR0b24oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zdG9wQnV0dG9uLmJ1dHRvbkVsLnJlbW92ZUNsYXNzKCdoaWRkZW4tYnV0dG9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZVN0b3BCdXR0b24oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5zdG9wQnV0dG9uLmJ1dHRvbkVsLmFkZENsYXNzKCdoaWRkZW4tYnV0dG9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgc2hvd0NsZWFyQnV0dG9uKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuY2xlYXJCdXR0b24uYnV0dG9uRWwucmVtb3ZlQ2xhc3MoJ2hpZGRlbi1idXR0b24nKTtcclxuICAgIH1cclxuXHJcbiAgICBoaWRlQ2xlYXJCdXR0b24oKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5jbGVhckJ1dHRvbi5idXR0b25FbC5hZGRDbGFzcygnaGlkZGVuLWJ1dHRvbicpO1xyXG4gICAgfVxyXG5cclxuICAgIHNob3dTZXR0aW5nc0J1dHRvbigpOiB2b2lkIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzQnV0dG9uLmJ1dHRvbkVsLnJlbW92ZUNsYXNzKCdoaWRkZW4tYnV0dG9uJyk7XHJcbiAgICB9XHJcblxyXG4gICAgaGlkZVNldHRpbmdzQnV0dG9uKCk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NCdXR0b24uYnV0dG9uRWwuYWRkQ2xhc3MoJ2hpZGRlbi1idXR0b24nKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZSBhY3Rpb24gYnV0dG9ucyBmb3IgbWVzc2FnZXMgKGNvcHksIGVkaXQsIGRlbGV0ZSwgcmVnZW5lcmF0ZSlcclxuICAgICAqL1xyXG4gICAgY3JlYXRlTWVzc2FnZUFjdGlvbnMoYnV0dG9uczogSUJ1dHRvbkNvbmZpZ1tdKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IGFjdGlvbnNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBhY3Rpb25zQ29udGFpbmVyLmFkZENsYXNzKCdtZXNzYWdlLWFjdGlvbnMnKTtcclxuICAgICAgICAvLyBSZWx5IG9uIENTUyBmb3IgZGlzcGxheSBhbmQgaG92ZXIgYmVoYXZpb3JcclxuXHJcbiAgICAgICAgYnV0dG9ucy5mb3JFYWNoKGNvbmZpZyA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMuY3JlYXRlQnV0dG9uKGNvbmZpZyk7XHJcbiAgICAgICAgICAgIGFjdGlvbnNDb250YWluZXIuYXBwZW5kQ2hpbGQoYnV0dG9uKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGFjdGlvbnNDb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgdGhlIG1haW4gY2hhdCBjb250cm9sIGJ1dHRvbnMgKHNlbmQsIHN0b3AsIGNvcHkgYWxsLCBjbGVhciwgc2V0dGluZ3MpXHJcbiAgICAgKi9cclxuICAgIGNyZWF0ZUNoYXRDb250cm9scyhidXR0b25zOiBJQnV0dG9uQ29uZmlnW10pOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgY29uc3QgY29udHJvbHNDb250YWluZXIgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgICAgICBjb250cm9sc0NvbnRhaW5lci5hZGRDbGFzcygnYWktY2hhdC1idXR0b25zJyk7XHJcblxyXG4gICAgICAgIGJ1dHRvbnMuZm9yRWFjaChjb25maWcgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBidXR0b24gPSB0aGlzLmNyZWF0ZUJ1dHRvbihjb25maWcpO1xyXG4gICAgICAgICAgICBpZiAoY29uZmlnLmlzSGlkZGVuKSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uYWRkQ2xhc3MoJ2hpZGRlbi1idXR0b24nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBjb250cm9sc0NvbnRhaW5lci5hcHBlbmRDaGlsZChidXR0b24pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gY29udHJvbHNDb250YWluZXI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGUgYSBzaW5nbGUgYnV0dG9uIHdpdGggdGhlIGdpdmVuIGNvbmZpZ3VyYXRpb25cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBjcmVhdGVCdXR0b24oY29uZmlnOiBJQnV0dG9uQ29uZmlnKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgICAgIGJ1dHRvbi5hZGRDbGFzcygnYWktY2hhdC1hY3Rpb24tYnV0dG9uJyk7XHJcbiAgICAgICAgaWYgKGNvbmZpZy5jbGFzc05hbWUpIHtcclxuICAgICAgICAgICAgYnV0dG9uLmFkZENsYXNzKGNvbmZpZy5jbGFzc05hbWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBidXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgY29uZmlnLnRvb2x0aXApO1xyXG5cclxuICAgICAgICBjb25zdCBsYWJlbEVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc3BhbicpO1xyXG4gICAgICAgIGxhYmVsRWwudGV4dENvbnRlbnQgPSBjb25maWcubGFiZWw7XHJcbiAgICAgICAgYnV0dG9uLmFwcGVuZENoaWxkKGxhYmVsRWwpO1xyXG5cclxuICAgICAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjb25maWcub25DbGljayk7XHJcbiAgICAgICAgcmV0dXJuIGJ1dHRvbjtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNob3cgb3IgaGlkZSBhIHNwZWNpZmljIGJ1dHRvbiBpbiBhIGNvbnRhaW5lclxyXG4gICAgICovXHJcbiAgICB0b2dnbGVCdXR0b24oY29udGFpbmVyOiBIVE1MRWxlbWVudCwgbGFiZWw6IHN0cmluZywgc2hvdzogYm9vbGVhbik6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IGNvbnRhaW5lci5xdWVyeVNlbGVjdG9yKGBbYXJpYS1sYWJlbD1cIiR7bGFiZWx9XCJdYCk7XHJcbiAgICAgICAgaWYgKGJ1dHRvbiBpbnN0YW5jZW9mIEhUTUxFbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHNob3cgPyBidXR0b24ucmVtb3ZlQ2xhc3MoJ2hpZGRlbi1idXR0b24nKSA6IGJ1dHRvbi5hZGRDbGFzcygnaGlkZGVuLWJ1dHRvbicpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLy8gVXRpbGl0eSBmb3IgY3JlYXRpbmcgYWN0aW9uIGJ1dHRvbnMgYW5kIGNvcHlpbmcgdG8gY2xpcGJvYXJkXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVBY3Rpb25CdXR0b24obGFiZWw6IHN0cmluZywgdG9vbHRpcDogc3RyaW5nLCBjYWxsYmFjazogKCkgPT4gdm9pZCk6IEhUTUxFbGVtZW50IHtcclxuICAgIGNvbnN0IGJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgYnV0dG9uLmFkZENsYXNzKCdhaS1jaGF0LWFjdGlvbi1idXR0b24nKTtcclxuICAgIGJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCB0b29sdGlwKTtcclxuICAgIGNvbnN0IGxhYmVsRWwgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgICBsYWJlbEVsLnRleHRDb250ZW50ID0gbGFiZWw7XHJcbiAgICBidXR0b24uYXBwZW5kQ2hpbGQobGFiZWxFbCk7XHJcbiAgICBidXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjYWxsYmFjayk7XHJcbiAgICByZXR1cm4gYnV0dG9uO1xyXG59XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29weVRvQ2xpcGJvYXJkKHRleHQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KTtcclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgLy8gT3B0aW9uYWxseSBoYW5kbGUgZXJyb3JcclxuICAgIH1cclxufVxyXG4iLCAiXG4vKiEganMteWFtbCA0LjEuMCBodHRwczovL2dpdGh1Yi5jb20vbm9kZWNhL2pzLXlhbWwgQGxpY2Vuc2UgTUlUICovXG5mdW5jdGlvbiBpc05vdGhpbmcoc3ViamVjdCkge1xuICByZXR1cm4gKHR5cGVvZiBzdWJqZWN0ID09PSAndW5kZWZpbmVkJykgfHwgKHN1YmplY3QgPT09IG51bGwpO1xufVxuXG5cbmZ1bmN0aW9uIGlzT2JqZWN0KHN1YmplY3QpIHtcbiAgcmV0dXJuICh0eXBlb2Ygc3ViamVjdCA9PT0gJ29iamVjdCcpICYmIChzdWJqZWN0ICE9PSBudWxsKTtcbn1cblxuXG5mdW5jdGlvbiB0b0FycmF5KHNlcXVlbmNlKSB7XG4gIGlmIChBcnJheS5pc0FycmF5KHNlcXVlbmNlKSkgcmV0dXJuIHNlcXVlbmNlO1xuICBlbHNlIGlmIChpc05vdGhpbmcoc2VxdWVuY2UpKSByZXR1cm4gW107XG5cbiAgcmV0dXJuIFsgc2VxdWVuY2UgXTtcbn1cblxuXG5mdW5jdGlvbiBleHRlbmQodGFyZ2V0LCBzb3VyY2UpIHtcbiAgdmFyIGluZGV4LCBsZW5ndGgsIGtleSwgc291cmNlS2V5cztcblxuICBpZiAoc291cmNlKSB7XG4gICAgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG5cbiAgICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gc291cmNlS2V5cy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgICBrZXkgPSBzb3VyY2VLZXlzW2luZGV4XTtcbiAgICAgIHRhcmdldFtrZXldID0gc291cmNlW2tleV07XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRhcmdldDtcbn1cblxuXG5mdW5jdGlvbiByZXBlYXQoc3RyaW5nLCBjb3VudCkge1xuICB2YXIgcmVzdWx0ID0gJycsIGN5Y2xlO1xuXG4gIGZvciAoY3ljbGUgPSAwOyBjeWNsZSA8IGNvdW50OyBjeWNsZSArPSAxKSB7XG4gICAgcmVzdWx0ICs9IHN0cmluZztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cblxuZnVuY3Rpb24gaXNOZWdhdGl2ZVplcm8obnVtYmVyKSB7XG4gIHJldHVybiAobnVtYmVyID09PSAwKSAmJiAoTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZID09PSAxIC8gbnVtYmVyKTtcbn1cblxuXG52YXIgaXNOb3RoaW5nXzEgICAgICA9IGlzTm90aGluZztcbnZhciBpc09iamVjdF8xICAgICAgID0gaXNPYmplY3Q7XG52YXIgdG9BcnJheV8xICAgICAgICA9IHRvQXJyYXk7XG52YXIgcmVwZWF0XzEgICAgICAgICA9IHJlcGVhdDtcbnZhciBpc05lZ2F0aXZlWmVyb18xID0gaXNOZWdhdGl2ZVplcm87XG52YXIgZXh0ZW5kXzEgICAgICAgICA9IGV4dGVuZDtcblxudmFyIGNvbW1vbiA9IHtcblx0aXNOb3RoaW5nOiBpc05vdGhpbmdfMSxcblx0aXNPYmplY3Q6IGlzT2JqZWN0XzEsXG5cdHRvQXJyYXk6IHRvQXJyYXlfMSxcblx0cmVwZWF0OiByZXBlYXRfMSxcblx0aXNOZWdhdGl2ZVplcm86IGlzTmVnYXRpdmVaZXJvXzEsXG5cdGV4dGVuZDogZXh0ZW5kXzFcbn07XG5cbi8vIFlBTUwgZXJyb3IgY2xhc3MuIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvODQ1ODk4NFxuXG5cbmZ1bmN0aW9uIGZvcm1hdEVycm9yKGV4Y2VwdGlvbiwgY29tcGFjdCkge1xuICB2YXIgd2hlcmUgPSAnJywgbWVzc2FnZSA9IGV4Y2VwdGlvbi5yZWFzb24gfHwgJyh1bmtub3duIHJlYXNvbiknO1xuXG4gIGlmICghZXhjZXB0aW9uLm1hcmspIHJldHVybiBtZXNzYWdlO1xuXG4gIGlmIChleGNlcHRpb24ubWFyay5uYW1lKSB7XG4gICAgd2hlcmUgKz0gJ2luIFwiJyArIGV4Y2VwdGlvbi5tYXJrLm5hbWUgKyAnXCIgJztcbiAgfVxuXG4gIHdoZXJlICs9ICcoJyArIChleGNlcHRpb24ubWFyay5saW5lICsgMSkgKyAnOicgKyAoZXhjZXB0aW9uLm1hcmsuY29sdW1uICsgMSkgKyAnKSc7XG5cbiAgaWYgKCFjb21wYWN0ICYmIGV4Y2VwdGlvbi5tYXJrLnNuaXBwZXQpIHtcbiAgICB3aGVyZSArPSAnXFxuXFxuJyArIGV4Y2VwdGlvbi5tYXJrLnNuaXBwZXQ7XG4gIH1cblxuICByZXR1cm4gbWVzc2FnZSArICcgJyArIHdoZXJlO1xufVxuXG5cbmZ1bmN0aW9uIFlBTUxFeGNlcHRpb24kMShyZWFzb24sIG1hcmspIHtcbiAgLy8gU3VwZXIgY29uc3RydWN0b3JcbiAgRXJyb3IuY2FsbCh0aGlzKTtcblxuICB0aGlzLm5hbWUgPSAnWUFNTEV4Y2VwdGlvbic7XG4gIHRoaXMucmVhc29uID0gcmVhc29uO1xuICB0aGlzLm1hcmsgPSBtYXJrO1xuICB0aGlzLm1lc3NhZ2UgPSBmb3JtYXRFcnJvcih0aGlzLCBmYWxzZSk7XG5cbiAgLy8gSW5jbHVkZSBzdGFjayB0cmFjZSBpbiBlcnJvciBvYmplY3RcbiAgaWYgKEVycm9yLmNhcHR1cmVTdGFja1RyYWNlKSB7XG4gICAgLy8gQ2hyb21lIGFuZCBOb2RlSlNcbiAgICBFcnJvci5jYXB0dXJlU3RhY2tUcmFjZSh0aGlzLCB0aGlzLmNvbnN0cnVjdG9yKTtcbiAgfSBlbHNlIHtcbiAgICAvLyBGRiwgSUUgMTArIGFuZCBTYWZhcmkgNisuIEZhbGxiYWNrIGZvciBvdGhlcnNcbiAgICB0aGlzLnN0YWNrID0gKG5ldyBFcnJvcigpKS5zdGFjayB8fCAnJztcbiAgfVxufVxuXG5cbi8vIEluaGVyaXQgZnJvbSBFcnJvclxuWUFNTEV4Y2VwdGlvbiQxLnByb3RvdHlwZSA9IE9iamVjdC5jcmVhdGUoRXJyb3IucHJvdG90eXBlKTtcbllBTUxFeGNlcHRpb24kMS5wcm90b3R5cGUuY29uc3RydWN0b3IgPSBZQU1MRXhjZXB0aW9uJDE7XG5cblxuWUFNTEV4Y2VwdGlvbiQxLnByb3RvdHlwZS50b1N0cmluZyA9IGZ1bmN0aW9uIHRvU3RyaW5nKGNvbXBhY3QpIHtcbiAgcmV0dXJuIHRoaXMubmFtZSArICc6ICcgKyBmb3JtYXRFcnJvcih0aGlzLCBjb21wYWN0KTtcbn07XG5cblxudmFyIGV4Y2VwdGlvbiA9IFlBTUxFeGNlcHRpb24kMTtcblxuLy8gZ2V0IHNuaXBwZXQgZm9yIGEgc2luZ2xlIGxpbmUsIHJlc3BlY3RpbmcgbWF4TGVuZ3RoXG5mdW5jdGlvbiBnZXRMaW5lKGJ1ZmZlciwgbGluZVN0YXJ0LCBsaW5lRW5kLCBwb3NpdGlvbiwgbWF4TGluZUxlbmd0aCkge1xuICB2YXIgaGVhZCA9ICcnO1xuICB2YXIgdGFpbCA9ICcnO1xuICB2YXIgbWF4SGFsZkxlbmd0aCA9IE1hdGguZmxvb3IobWF4TGluZUxlbmd0aCAvIDIpIC0gMTtcblxuICBpZiAocG9zaXRpb24gLSBsaW5lU3RhcnQgPiBtYXhIYWxmTGVuZ3RoKSB7XG4gICAgaGVhZCA9ICcgLi4uICc7XG4gICAgbGluZVN0YXJ0ID0gcG9zaXRpb24gLSBtYXhIYWxmTGVuZ3RoICsgaGVhZC5sZW5ndGg7XG4gIH1cblxuICBpZiAobGluZUVuZCAtIHBvc2l0aW9uID4gbWF4SGFsZkxlbmd0aCkge1xuICAgIHRhaWwgPSAnIC4uLic7XG4gICAgbGluZUVuZCA9IHBvc2l0aW9uICsgbWF4SGFsZkxlbmd0aCAtIHRhaWwubGVuZ3RoO1xuICB9XG5cbiAgcmV0dXJuIHtcbiAgICBzdHI6IGhlYWQgKyBidWZmZXIuc2xpY2UobGluZVN0YXJ0LCBsaW5lRW5kKS5yZXBsYWNlKC9cXHQvZywgJ1x1MjE5MicpICsgdGFpbCxcbiAgICBwb3M6IHBvc2l0aW9uIC0gbGluZVN0YXJ0ICsgaGVhZC5sZW5ndGggLy8gcmVsYXRpdmUgcG9zaXRpb25cbiAgfTtcbn1cblxuXG5mdW5jdGlvbiBwYWRTdGFydChzdHJpbmcsIG1heCkge1xuICByZXR1cm4gY29tbW9uLnJlcGVhdCgnICcsIG1heCAtIHN0cmluZy5sZW5ndGgpICsgc3RyaW5nO1xufVxuXG5cbmZ1bmN0aW9uIG1ha2VTbmlwcGV0KG1hcmssIG9wdGlvbnMpIHtcbiAgb3B0aW9ucyA9IE9iamVjdC5jcmVhdGUob3B0aW9ucyB8fCBudWxsKTtcblxuICBpZiAoIW1hcmsuYnVmZmVyKSByZXR1cm4gbnVsbDtcblxuICBpZiAoIW9wdGlvbnMubWF4TGVuZ3RoKSBvcHRpb25zLm1heExlbmd0aCA9IDc5O1xuICBpZiAodHlwZW9mIG9wdGlvbnMuaW5kZW50ICAgICAgIT09ICdudW1iZXInKSBvcHRpb25zLmluZGVudCAgICAgID0gMTtcbiAgaWYgKHR5cGVvZiBvcHRpb25zLmxpbmVzQmVmb3JlICE9PSAnbnVtYmVyJykgb3B0aW9ucy5saW5lc0JlZm9yZSA9IDM7XG4gIGlmICh0eXBlb2Ygb3B0aW9ucy5saW5lc0FmdGVyICAhPT0gJ251bWJlcicpIG9wdGlvbnMubGluZXNBZnRlciAgPSAyO1xuXG4gIHZhciByZSA9IC9cXHI/XFxufFxccnxcXDAvZztcbiAgdmFyIGxpbmVTdGFydHMgPSBbIDAgXTtcbiAgdmFyIGxpbmVFbmRzID0gW107XG4gIHZhciBtYXRjaDtcbiAgdmFyIGZvdW5kTGluZU5vID0gLTE7XG5cbiAgd2hpbGUgKChtYXRjaCA9IHJlLmV4ZWMobWFyay5idWZmZXIpKSkge1xuICAgIGxpbmVFbmRzLnB1c2gobWF0Y2guaW5kZXgpO1xuICAgIGxpbmVTdGFydHMucHVzaChtYXRjaC5pbmRleCArIG1hdGNoWzBdLmxlbmd0aCk7XG5cbiAgICBpZiAobWFyay5wb3NpdGlvbiA8PSBtYXRjaC5pbmRleCAmJiBmb3VuZExpbmVObyA8IDApIHtcbiAgICAgIGZvdW5kTGluZU5vID0gbGluZVN0YXJ0cy5sZW5ndGggLSAyO1xuICAgIH1cbiAgfVxuXG4gIGlmIChmb3VuZExpbmVObyA8IDApIGZvdW5kTGluZU5vID0gbGluZVN0YXJ0cy5sZW5ndGggLSAxO1xuXG4gIHZhciByZXN1bHQgPSAnJywgaSwgbGluZTtcbiAgdmFyIGxpbmVOb0xlbmd0aCA9IE1hdGgubWluKG1hcmsubGluZSArIG9wdGlvbnMubGluZXNBZnRlciwgbGluZUVuZHMubGVuZ3RoKS50b1N0cmluZygpLmxlbmd0aDtcbiAgdmFyIG1heExpbmVMZW5ndGggPSBvcHRpb25zLm1heExlbmd0aCAtIChvcHRpb25zLmluZGVudCArIGxpbmVOb0xlbmd0aCArIDMpO1xuXG4gIGZvciAoaSA9IDE7IGkgPD0gb3B0aW9ucy5saW5lc0JlZm9yZTsgaSsrKSB7XG4gICAgaWYgKGZvdW5kTGluZU5vIC0gaSA8IDApIGJyZWFrO1xuICAgIGxpbmUgPSBnZXRMaW5lKFxuICAgICAgbWFyay5idWZmZXIsXG4gICAgICBsaW5lU3RhcnRzW2ZvdW5kTGluZU5vIC0gaV0sXG4gICAgICBsaW5lRW5kc1tmb3VuZExpbmVObyAtIGldLFxuICAgICAgbWFyay5wb3NpdGlvbiAtIChsaW5lU3RhcnRzW2ZvdW5kTGluZU5vXSAtIGxpbmVTdGFydHNbZm91bmRMaW5lTm8gLSBpXSksXG4gICAgICBtYXhMaW5lTGVuZ3RoXG4gICAgKTtcbiAgICByZXN1bHQgPSBjb21tb24ucmVwZWF0KCcgJywgb3B0aW9ucy5pbmRlbnQpICsgcGFkU3RhcnQoKG1hcmsubGluZSAtIGkgKyAxKS50b1N0cmluZygpLCBsaW5lTm9MZW5ndGgpICtcbiAgICAgICcgfCAnICsgbGluZS5zdHIgKyAnXFxuJyArIHJlc3VsdDtcbiAgfVxuXG4gIGxpbmUgPSBnZXRMaW5lKG1hcmsuYnVmZmVyLCBsaW5lU3RhcnRzW2ZvdW5kTGluZU5vXSwgbGluZUVuZHNbZm91bmRMaW5lTm9dLCBtYXJrLnBvc2l0aW9uLCBtYXhMaW5lTGVuZ3RoKTtcbiAgcmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJyAnLCBvcHRpb25zLmluZGVudCkgKyBwYWRTdGFydCgobWFyay5saW5lICsgMSkudG9TdHJpbmcoKSwgbGluZU5vTGVuZ3RoKSArXG4gICAgJyB8ICcgKyBsaW5lLnN0ciArICdcXG4nO1xuICByZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnLScsIG9wdGlvbnMuaW5kZW50ICsgbGluZU5vTGVuZ3RoICsgMyArIGxpbmUucG9zKSArICdeJyArICdcXG4nO1xuXG4gIGZvciAoaSA9IDE7IGkgPD0gb3B0aW9ucy5saW5lc0FmdGVyOyBpKyspIHtcbiAgICBpZiAoZm91bmRMaW5lTm8gKyBpID49IGxpbmVFbmRzLmxlbmd0aCkgYnJlYWs7XG4gICAgbGluZSA9IGdldExpbmUoXG4gICAgICBtYXJrLmJ1ZmZlcixcbiAgICAgIGxpbmVTdGFydHNbZm91bmRMaW5lTm8gKyBpXSxcbiAgICAgIGxpbmVFbmRzW2ZvdW5kTGluZU5vICsgaV0sXG4gICAgICBtYXJrLnBvc2l0aW9uIC0gKGxpbmVTdGFydHNbZm91bmRMaW5lTm9dIC0gbGluZVN0YXJ0c1tmb3VuZExpbmVObyArIGldKSxcbiAgICAgIG1heExpbmVMZW5ndGhcbiAgICApO1xuICAgIHJlc3VsdCArPSBjb21tb24ucmVwZWF0KCcgJywgb3B0aW9ucy5pbmRlbnQpICsgcGFkU3RhcnQoKG1hcmsubGluZSArIGkgKyAxKS50b1N0cmluZygpLCBsaW5lTm9MZW5ndGgpICtcbiAgICAgICcgfCAnICsgbGluZS5zdHIgKyAnXFxuJztcbiAgfVxuXG4gIHJldHVybiByZXN1bHQucmVwbGFjZSgvXFxuJC8sICcnKTtcbn1cblxuXG52YXIgc25pcHBldCA9IG1ha2VTbmlwcGV0O1xuXG52YXIgVFlQRV9DT05TVFJVQ1RPUl9PUFRJT05TID0gW1xuICAna2luZCcsXG4gICdtdWx0aScsXG4gICdyZXNvbHZlJyxcbiAgJ2NvbnN0cnVjdCcsXG4gICdpbnN0YW5jZU9mJyxcbiAgJ3ByZWRpY2F0ZScsXG4gICdyZXByZXNlbnQnLFxuICAncmVwcmVzZW50TmFtZScsXG4gICdkZWZhdWx0U3R5bGUnLFxuICAnc3R5bGVBbGlhc2VzJ1xuXTtcblxudmFyIFlBTUxfTk9ERV9LSU5EUyA9IFtcbiAgJ3NjYWxhcicsXG4gICdzZXF1ZW5jZScsXG4gICdtYXBwaW5nJ1xuXTtcblxuZnVuY3Rpb24gY29tcGlsZVN0eWxlQWxpYXNlcyhtYXApIHtcbiAgdmFyIHJlc3VsdCA9IHt9O1xuXG4gIGlmIChtYXAgIT09IG51bGwpIHtcbiAgICBPYmplY3Qua2V5cyhtYXApLmZvckVhY2goZnVuY3Rpb24gKHN0eWxlKSB7XG4gICAgICBtYXBbc3R5bGVdLmZvckVhY2goZnVuY3Rpb24gKGFsaWFzKSB7XG4gICAgICAgIHJlc3VsdFtTdHJpbmcoYWxpYXMpXSA9IHN0eWxlO1xuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBUeXBlJDEodGFnLCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIE9iamVjdC5rZXlzKG9wdGlvbnMpLmZvckVhY2goZnVuY3Rpb24gKG5hbWUpIHtcbiAgICBpZiAoVFlQRV9DT05TVFJVQ1RPUl9PUFRJT05TLmluZGV4T2YobmFtZSkgPT09IC0xKSB7XG4gICAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdVbmtub3duIG9wdGlvbiBcIicgKyBuYW1lICsgJ1wiIGlzIG1ldCBpbiBkZWZpbml0aW9uIG9mIFwiJyArIHRhZyArICdcIiBZQU1MIHR5cGUuJyk7XG4gICAgfVxuICB9KTtcblxuICAvLyBUT0RPOiBBZGQgdGFnIGZvcm1hdCBjaGVjay5cbiAgdGhpcy5vcHRpb25zICAgICAgID0gb3B0aW9uczsgLy8ga2VlcCBvcmlnaW5hbCBvcHRpb25zIGluIGNhc2UgdXNlciB3YW50cyB0byBleHRlbmQgdGhpcyB0eXBlIGxhdGVyXG4gIHRoaXMudGFnICAgICAgICAgICA9IHRhZztcbiAgdGhpcy5raW5kICAgICAgICAgID0gb3B0aW9uc1sna2luZCddICAgICAgICAgIHx8IG51bGw7XG4gIHRoaXMucmVzb2x2ZSAgICAgICA9IG9wdGlvbnNbJ3Jlc29sdmUnXSAgICAgICB8fCBmdW5jdGlvbiAoKSB7IHJldHVybiB0cnVlOyB9O1xuICB0aGlzLmNvbnN0cnVjdCAgICAgPSBvcHRpb25zWydjb25zdHJ1Y3QnXSAgICAgfHwgZnVuY3Rpb24gKGRhdGEpIHsgcmV0dXJuIGRhdGE7IH07XG4gIHRoaXMuaW5zdGFuY2VPZiAgICA9IG9wdGlvbnNbJ2luc3RhbmNlT2YnXSAgICB8fCBudWxsO1xuICB0aGlzLnByZWRpY2F0ZSAgICAgPSBvcHRpb25zWydwcmVkaWNhdGUnXSAgICAgfHwgbnVsbDtcbiAgdGhpcy5yZXByZXNlbnQgICAgID0gb3B0aW9uc1sncmVwcmVzZW50J10gICAgIHx8IG51bGw7XG4gIHRoaXMucmVwcmVzZW50TmFtZSA9IG9wdGlvbnNbJ3JlcHJlc2VudE5hbWUnXSB8fCBudWxsO1xuICB0aGlzLmRlZmF1bHRTdHlsZSAgPSBvcHRpb25zWydkZWZhdWx0U3R5bGUnXSAgfHwgbnVsbDtcbiAgdGhpcy5tdWx0aSAgICAgICAgID0gb3B0aW9uc1snbXVsdGknXSAgICAgICAgIHx8IGZhbHNlO1xuICB0aGlzLnN0eWxlQWxpYXNlcyAgPSBjb21waWxlU3R5bGVBbGlhc2VzKG9wdGlvbnNbJ3N0eWxlQWxpYXNlcyddIHx8IG51bGwpO1xuXG4gIGlmIChZQU1MX05PREVfS0lORFMuaW5kZXhPZih0aGlzLmtpbmQpID09PSAtMSkge1xuICAgIHRocm93IG5ldyBleGNlcHRpb24oJ1Vua25vd24ga2luZCBcIicgKyB0aGlzLmtpbmQgKyAnXCIgaXMgc3BlY2lmaWVkIGZvciBcIicgKyB0YWcgKyAnXCIgWUFNTCB0eXBlLicpO1xuICB9XG59XG5cbnZhciB0eXBlID0gVHlwZSQxO1xuXG4vKmVzbGludC1kaXNhYmxlIG1heC1sZW4qL1xuXG5cblxuXG5cbmZ1bmN0aW9uIGNvbXBpbGVMaXN0KHNjaGVtYSwgbmFtZSkge1xuICB2YXIgcmVzdWx0ID0gW107XG5cbiAgc2NoZW1hW25hbWVdLmZvckVhY2goZnVuY3Rpb24gKGN1cnJlbnRUeXBlKSB7XG4gICAgdmFyIG5ld0luZGV4ID0gcmVzdWx0Lmxlbmd0aDtcblxuICAgIHJlc3VsdC5mb3JFYWNoKGZ1bmN0aW9uIChwcmV2aW91c1R5cGUsIHByZXZpb3VzSW5kZXgpIHtcbiAgICAgIGlmIChwcmV2aW91c1R5cGUudGFnID09PSBjdXJyZW50VHlwZS50YWcgJiZcbiAgICAgICAgICBwcmV2aW91c1R5cGUua2luZCA9PT0gY3VycmVudFR5cGUua2luZCAmJlxuICAgICAgICAgIHByZXZpb3VzVHlwZS5tdWx0aSA9PT0gY3VycmVudFR5cGUubXVsdGkpIHtcblxuICAgICAgICBuZXdJbmRleCA9IHByZXZpb3VzSW5kZXg7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXN1bHRbbmV3SW5kZXhdID0gY3VycmVudFR5cGU7XG4gIH0pO1xuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cblxuZnVuY3Rpb24gY29tcGlsZU1hcCgvKiBsaXN0cy4uLiAqLykge1xuICB2YXIgcmVzdWx0ID0ge1xuICAgICAgICBzY2FsYXI6IHt9LFxuICAgICAgICBzZXF1ZW5jZToge30sXG4gICAgICAgIG1hcHBpbmc6IHt9LFxuICAgICAgICBmYWxsYmFjazoge30sXG4gICAgICAgIG11bHRpOiB7XG4gICAgICAgICAgc2NhbGFyOiBbXSxcbiAgICAgICAgICBzZXF1ZW5jZTogW10sXG4gICAgICAgICAgbWFwcGluZzogW10sXG4gICAgICAgICAgZmFsbGJhY2s6IFtdXG4gICAgICAgIH1cbiAgICAgIH0sIGluZGV4LCBsZW5ndGg7XG5cbiAgZnVuY3Rpb24gY29sbGVjdFR5cGUodHlwZSkge1xuICAgIGlmICh0eXBlLm11bHRpKSB7XG4gICAgICByZXN1bHQubXVsdGlbdHlwZS5raW5kXS5wdXNoKHR5cGUpO1xuICAgICAgcmVzdWx0Lm11bHRpWydmYWxsYmFjayddLnB1c2godHlwZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJlc3VsdFt0eXBlLmtpbmRdW3R5cGUudGFnXSA9IHJlc3VsdFsnZmFsbGJhY2snXVt0eXBlLnRhZ10gPSB0eXBlO1xuICAgIH1cbiAgfVxuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBhcmd1bWVudHMubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIGFyZ3VtZW50c1tpbmRleF0uZm9yRWFjaChjb2xsZWN0VHlwZSk7XG4gIH1cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuXG5mdW5jdGlvbiBTY2hlbWEkMShkZWZpbml0aW9uKSB7XG4gIHJldHVybiB0aGlzLmV4dGVuZChkZWZpbml0aW9uKTtcbn1cblxuXG5TY2hlbWEkMS5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24gZXh0ZW5kKGRlZmluaXRpb24pIHtcbiAgdmFyIGltcGxpY2l0ID0gW107XG4gIHZhciBleHBsaWNpdCA9IFtdO1xuXG4gIGlmIChkZWZpbml0aW9uIGluc3RhbmNlb2YgdHlwZSkge1xuICAgIC8vIFNjaGVtYS5leHRlbmQodHlwZSlcbiAgICBleHBsaWNpdC5wdXNoKGRlZmluaXRpb24pO1xuXG4gIH0gZWxzZSBpZiAoQXJyYXkuaXNBcnJheShkZWZpbml0aW9uKSkge1xuICAgIC8vIFNjaGVtYS5leHRlbmQoWyB0eXBlMSwgdHlwZTIsIC4uLiBdKVxuICAgIGV4cGxpY2l0ID0gZXhwbGljaXQuY29uY2F0KGRlZmluaXRpb24pO1xuXG4gIH0gZWxzZSBpZiAoZGVmaW5pdGlvbiAmJiAoQXJyYXkuaXNBcnJheShkZWZpbml0aW9uLmltcGxpY2l0KSB8fCBBcnJheS5pc0FycmF5KGRlZmluaXRpb24uZXhwbGljaXQpKSkge1xuICAgIC8vIFNjaGVtYS5leHRlbmQoeyBleHBsaWNpdDogWyB0eXBlMSwgdHlwZTIsIC4uLiBdLCBpbXBsaWNpdDogWyB0eXBlMSwgdHlwZTIsIC4uLiBdIH0pXG4gICAgaWYgKGRlZmluaXRpb24uaW1wbGljaXQpIGltcGxpY2l0ID0gaW1wbGljaXQuY29uY2F0KGRlZmluaXRpb24uaW1wbGljaXQpO1xuICAgIGlmIChkZWZpbml0aW9uLmV4cGxpY2l0KSBleHBsaWNpdCA9IGV4cGxpY2l0LmNvbmNhdChkZWZpbml0aW9uLmV4cGxpY2l0KTtcblxuICB9IGVsc2Uge1xuICAgIHRocm93IG5ldyBleGNlcHRpb24oJ1NjaGVtYS5leHRlbmQgYXJndW1lbnQgc2hvdWxkIGJlIGEgVHlwZSwgWyBUeXBlIF0sICcgK1xuICAgICAgJ29yIGEgc2NoZW1hIGRlZmluaXRpb24gKHsgaW1wbGljaXQ6IFsuLi5dLCBleHBsaWNpdDogWy4uLl0gfSknKTtcbiAgfVxuXG4gIGltcGxpY2l0LmZvckVhY2goZnVuY3Rpb24gKHR5cGUkMSkge1xuICAgIGlmICghKHR5cGUkMSBpbnN0YW5jZW9mIHR5cGUpKSB7XG4gICAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdTcGVjaWZpZWQgbGlzdCBvZiBZQU1MIHR5cGVzIChvciBhIHNpbmdsZSBUeXBlIG9iamVjdCkgY29udGFpbnMgYSBub24tVHlwZSBvYmplY3QuJyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGUkMS5sb2FkS2luZCAmJiB0eXBlJDEubG9hZEtpbmQgIT09ICdzY2FsYXInKSB7XG4gICAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdUaGVyZSBpcyBhIG5vbi1zY2FsYXIgdHlwZSBpbiB0aGUgaW1wbGljaXQgbGlzdCBvZiBhIHNjaGVtYS4gSW1wbGljaXQgcmVzb2x2aW5nIG9mIHN1Y2ggdHlwZXMgaXMgbm90IHN1cHBvcnRlZC4nKTtcbiAgICB9XG5cbiAgICBpZiAodHlwZSQxLm11bHRpKSB7XG4gICAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdUaGVyZSBpcyBhIG11bHRpIHR5cGUgaW4gdGhlIGltcGxpY2l0IGxpc3Qgb2YgYSBzY2hlbWEuIE11bHRpIHRhZ3MgY2FuIG9ubHkgYmUgbGlzdGVkIGFzIGV4cGxpY2l0LicpO1xuICAgIH1cbiAgfSk7XG5cbiAgZXhwbGljaXQuZm9yRWFjaChmdW5jdGlvbiAodHlwZSQxKSB7XG4gICAgaWYgKCEodHlwZSQxIGluc3RhbmNlb2YgdHlwZSkpIHtcbiAgICAgIHRocm93IG5ldyBleGNlcHRpb24oJ1NwZWNpZmllZCBsaXN0IG9mIFlBTUwgdHlwZXMgKG9yIGEgc2luZ2xlIFR5cGUgb2JqZWN0KSBjb250YWlucyBhIG5vbi1UeXBlIG9iamVjdC4nKTtcbiAgICB9XG4gIH0pO1xuXG4gIHZhciByZXN1bHQgPSBPYmplY3QuY3JlYXRlKFNjaGVtYSQxLnByb3RvdHlwZSk7XG5cbiAgcmVzdWx0LmltcGxpY2l0ID0gKHRoaXMuaW1wbGljaXQgfHwgW10pLmNvbmNhdChpbXBsaWNpdCk7XG4gIHJlc3VsdC5leHBsaWNpdCA9ICh0aGlzLmV4cGxpY2l0IHx8IFtdKS5jb25jYXQoZXhwbGljaXQpO1xuXG4gIHJlc3VsdC5jb21waWxlZEltcGxpY2l0ID0gY29tcGlsZUxpc3QocmVzdWx0LCAnaW1wbGljaXQnKTtcbiAgcmVzdWx0LmNvbXBpbGVkRXhwbGljaXQgPSBjb21waWxlTGlzdChyZXN1bHQsICdleHBsaWNpdCcpO1xuICByZXN1bHQuY29tcGlsZWRUeXBlTWFwICA9IGNvbXBpbGVNYXAocmVzdWx0LmNvbXBpbGVkSW1wbGljaXQsIHJlc3VsdC5jb21waWxlZEV4cGxpY2l0KTtcblxuICByZXR1cm4gcmVzdWx0O1xufTtcblxuXG52YXIgc2NoZW1hID0gU2NoZW1hJDE7XG5cbnZhciBzdHIgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6c3RyJywge1xuICBraW5kOiAnc2NhbGFyJyxcbiAgY29uc3RydWN0OiBmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gZGF0YSAhPT0gbnVsbCA/IGRhdGEgOiAnJzsgfVxufSk7XG5cbnZhciBzZXEgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6c2VxJywge1xuICBraW5kOiAnc2VxdWVuY2UnLFxuICBjb25zdHJ1Y3Q6IGZ1bmN0aW9uIChkYXRhKSB7IHJldHVybiBkYXRhICE9PSBudWxsID8gZGF0YSA6IFtdOyB9XG59KTtcblxudmFyIG1hcCA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjptYXAnLCB7XG4gIGtpbmQ6ICdtYXBwaW5nJyxcbiAgY29uc3RydWN0OiBmdW5jdGlvbiAoZGF0YSkgeyByZXR1cm4gZGF0YSAhPT0gbnVsbCA/IGRhdGEgOiB7fTsgfVxufSk7XG5cbnZhciBmYWlsc2FmZSA9IG5ldyBzY2hlbWEoe1xuICBleHBsaWNpdDogW1xuICAgIHN0cixcbiAgICBzZXEsXG4gICAgbWFwXG4gIF1cbn0pO1xuXG5mdW5jdGlvbiByZXNvbHZlWWFtbE51bGwoZGF0YSkge1xuICBpZiAoZGF0YSA9PT0gbnVsbCkgcmV0dXJuIHRydWU7XG5cbiAgdmFyIG1heCA9IGRhdGEubGVuZ3RoO1xuXG4gIHJldHVybiAobWF4ID09PSAxICYmIGRhdGEgPT09ICd+JykgfHxcbiAgICAgICAgIChtYXggPT09IDQgJiYgKGRhdGEgPT09ICdudWxsJyB8fCBkYXRhID09PSAnTnVsbCcgfHwgZGF0YSA9PT0gJ05VTEwnKSk7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxOdWxsKCkge1xuICByZXR1cm4gbnVsbDtcbn1cblxuZnVuY3Rpb24gaXNOdWxsKG9iamVjdCkge1xuICByZXR1cm4gb2JqZWN0ID09PSBudWxsO1xufVxuXG52YXIgX251bGwgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6bnVsbCcsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sTnVsbCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sTnVsbCxcbiAgcHJlZGljYXRlOiBpc051bGwsXG4gIHJlcHJlc2VudDoge1xuICAgIGNhbm9uaWNhbDogZnVuY3Rpb24gKCkgeyByZXR1cm4gJ34nOyAgICB9LFxuICAgIGxvd2VyY2FzZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gJ251bGwnOyB9LFxuICAgIHVwcGVyY2FzZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gJ05VTEwnOyB9LFxuICAgIGNhbWVsY2FzZTogZnVuY3Rpb24gKCkgeyByZXR1cm4gJ051bGwnOyB9LFxuICAgIGVtcHR5OiAgICAgZnVuY3Rpb24gKCkgeyByZXR1cm4gJyc7ICAgICB9XG4gIH0sXG4gIGRlZmF1bHRTdHlsZTogJ2xvd2VyY2FzZSdcbn0pO1xuXG5mdW5jdGlvbiByZXNvbHZlWWFtbEJvb2xlYW4oZGF0YSkge1xuICBpZiAoZGF0YSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXG4gIHZhciBtYXggPSBkYXRhLmxlbmd0aDtcblxuICByZXR1cm4gKG1heCA9PT0gNCAmJiAoZGF0YSA9PT0gJ3RydWUnIHx8IGRhdGEgPT09ICdUcnVlJyB8fCBkYXRhID09PSAnVFJVRScpKSB8fFxuICAgICAgICAgKG1heCA9PT0gNSAmJiAoZGF0YSA9PT0gJ2ZhbHNlJyB8fCBkYXRhID09PSAnRmFsc2UnIHx8IGRhdGEgPT09ICdGQUxTRScpKTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbEJvb2xlYW4oZGF0YSkge1xuICByZXR1cm4gZGF0YSA9PT0gJ3RydWUnIHx8XG4gICAgICAgICBkYXRhID09PSAnVHJ1ZScgfHxcbiAgICAgICAgIGRhdGEgPT09ICdUUlVFJztcbn1cblxuZnVuY3Rpb24gaXNCb29sZWFuKG9iamVjdCkge1xuICByZXR1cm4gT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkgPT09ICdbb2JqZWN0IEJvb2xlYW5dJztcbn1cblxudmFyIGJvb2wgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6Ym9vbCcsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sQm9vbGVhbixcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sQm9vbGVhbixcbiAgcHJlZGljYXRlOiBpc0Jvb2xlYW4sXG4gIHJlcHJlc2VudDoge1xuICAgIGxvd2VyY2FzZTogZnVuY3Rpb24gKG9iamVjdCkgeyByZXR1cm4gb2JqZWN0ID8gJ3RydWUnIDogJ2ZhbHNlJzsgfSxcbiAgICB1cHBlcmNhc2U6IGZ1bmN0aW9uIChvYmplY3QpIHsgcmV0dXJuIG9iamVjdCA/ICdUUlVFJyA6ICdGQUxTRSc7IH0sXG4gICAgY2FtZWxjYXNlOiBmdW5jdGlvbiAob2JqZWN0KSB7IHJldHVybiBvYmplY3QgPyAnVHJ1ZScgOiAnRmFsc2UnOyB9XG4gIH0sXG4gIGRlZmF1bHRTdHlsZTogJ2xvd2VyY2FzZSdcbn0pO1xuXG5mdW5jdGlvbiBpc0hleENvZGUoYykge1xuICByZXR1cm4gKCgweDMwLyogMCAqLyA8PSBjKSAmJiAoYyA8PSAweDM5LyogOSAqLykpIHx8XG4gICAgICAgICAoKDB4NDEvKiBBICovIDw9IGMpICYmIChjIDw9IDB4NDYvKiBGICovKSkgfHxcbiAgICAgICAgICgoMHg2MS8qIGEgKi8gPD0gYykgJiYgKGMgPD0gMHg2Ni8qIGYgKi8pKTtcbn1cblxuZnVuY3Rpb24gaXNPY3RDb2RlKGMpIHtcbiAgcmV0dXJuICgoMHgzMC8qIDAgKi8gPD0gYykgJiYgKGMgPD0gMHgzNy8qIDcgKi8pKTtcbn1cblxuZnVuY3Rpb24gaXNEZWNDb2RlKGMpIHtcbiAgcmV0dXJuICgoMHgzMC8qIDAgKi8gPD0gYykgJiYgKGMgPD0gMHgzOS8qIDkgKi8pKTtcbn1cblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxJbnRlZ2VyKGRhdGEpIHtcbiAgaWYgKGRhdGEgPT09IG51bGwpIHJldHVybiBmYWxzZTtcblxuICB2YXIgbWF4ID0gZGF0YS5sZW5ndGgsXG4gICAgICBpbmRleCA9IDAsXG4gICAgICBoYXNEaWdpdHMgPSBmYWxzZSxcbiAgICAgIGNoO1xuXG4gIGlmICghbWF4KSByZXR1cm4gZmFsc2U7XG5cbiAgY2ggPSBkYXRhW2luZGV4XTtcblxuICAvLyBzaWduXG4gIGlmIChjaCA9PT0gJy0nIHx8IGNoID09PSAnKycpIHtcbiAgICBjaCA9IGRhdGFbKytpbmRleF07XG4gIH1cblxuICBpZiAoY2ggPT09ICcwJykge1xuICAgIC8vIDBcbiAgICBpZiAoaW5kZXggKyAxID09PSBtYXgpIHJldHVybiB0cnVlO1xuICAgIGNoID0gZGF0YVsrK2luZGV4XTtcblxuICAgIC8vIGJhc2UgMiwgYmFzZSA4LCBiYXNlIDE2XG5cbiAgICBpZiAoY2ggPT09ICdiJykge1xuICAgICAgLy8gYmFzZSAyXG4gICAgICBpbmRleCsrO1xuXG4gICAgICBmb3IgKDsgaW5kZXggPCBtYXg7IGluZGV4KyspIHtcbiAgICAgICAgY2ggPSBkYXRhW2luZGV4XTtcbiAgICAgICAgaWYgKGNoID09PSAnXycpIGNvbnRpbnVlO1xuICAgICAgICBpZiAoY2ggIT09ICcwJyAmJiBjaCAhPT0gJzEnKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGhhc0RpZ2l0cyA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gaGFzRGlnaXRzICYmIGNoICE9PSAnXyc7XG4gICAgfVxuXG5cbiAgICBpZiAoY2ggPT09ICd4Jykge1xuICAgICAgLy8gYmFzZSAxNlxuICAgICAgaW5kZXgrKztcblxuICAgICAgZm9yICg7IGluZGV4IDwgbWF4OyBpbmRleCsrKSB7XG4gICAgICAgIGNoID0gZGF0YVtpbmRleF07XG4gICAgICAgIGlmIChjaCA9PT0gJ18nKSBjb250aW51ZTtcbiAgICAgICAgaWYgKCFpc0hleENvZGUoZGF0YS5jaGFyQ29kZUF0KGluZGV4KSkpIHJldHVybiBmYWxzZTtcbiAgICAgICAgaGFzRGlnaXRzID0gdHJ1ZTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBoYXNEaWdpdHMgJiYgY2ggIT09ICdfJztcbiAgICB9XG5cblxuICAgIGlmIChjaCA9PT0gJ28nKSB7XG4gICAgICAvLyBiYXNlIDhcbiAgICAgIGluZGV4Kys7XG5cbiAgICAgIGZvciAoOyBpbmRleCA8IG1heDsgaW5kZXgrKykge1xuICAgICAgICBjaCA9IGRhdGFbaW5kZXhdO1xuICAgICAgICBpZiAoY2ggPT09ICdfJykgY29udGludWU7XG4gICAgICAgIGlmICghaXNPY3RDb2RlKGRhdGEuY2hhckNvZGVBdChpbmRleCkpKSByZXR1cm4gZmFsc2U7XG4gICAgICAgIGhhc0RpZ2l0cyA9IHRydWU7XG4gICAgICB9XG4gICAgICByZXR1cm4gaGFzRGlnaXRzICYmIGNoICE9PSAnXyc7XG4gICAgfVxuICB9XG5cbiAgLy8gYmFzZSAxMCAoZXhjZXB0IDApXG5cbiAgLy8gdmFsdWUgc2hvdWxkIG5vdCBzdGFydCB3aXRoIGBfYDtcbiAgaWYgKGNoID09PSAnXycpIHJldHVybiBmYWxzZTtcblxuICBmb3IgKDsgaW5kZXggPCBtYXg7IGluZGV4KyspIHtcbiAgICBjaCA9IGRhdGFbaW5kZXhdO1xuICAgIGlmIChjaCA9PT0gJ18nKSBjb250aW51ZTtcbiAgICBpZiAoIWlzRGVjQ29kZShkYXRhLmNoYXJDb2RlQXQoaW5kZXgpKSkge1xuICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIH1cbiAgICBoYXNEaWdpdHMgPSB0cnVlO1xuICB9XG5cbiAgLy8gU2hvdWxkIGhhdmUgZGlnaXRzIGFuZCBzaG91bGQgbm90IGVuZCB3aXRoIGBfYFxuICBpZiAoIWhhc0RpZ2l0cyB8fCBjaCA9PT0gJ18nKSByZXR1cm4gZmFsc2U7XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxJbnRlZ2VyKGRhdGEpIHtcbiAgdmFyIHZhbHVlID0gZGF0YSwgc2lnbiA9IDEsIGNoO1xuXG4gIGlmICh2YWx1ZS5pbmRleE9mKCdfJykgIT09IC0xKSB7XG4gICAgdmFsdWUgPSB2YWx1ZS5yZXBsYWNlKC9fL2csICcnKTtcbiAgfVxuXG4gIGNoID0gdmFsdWVbMF07XG5cbiAgaWYgKGNoID09PSAnLScgfHwgY2ggPT09ICcrJykge1xuICAgIGlmIChjaCA9PT0gJy0nKSBzaWduID0gLTE7XG4gICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgxKTtcbiAgICBjaCA9IHZhbHVlWzBdO1xuICB9XG5cbiAgaWYgKHZhbHVlID09PSAnMCcpIHJldHVybiAwO1xuXG4gIGlmIChjaCA9PT0gJzAnKSB7XG4gICAgaWYgKHZhbHVlWzFdID09PSAnYicpIHJldHVybiBzaWduICogcGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIDIpO1xuICAgIGlmICh2YWx1ZVsxXSA9PT0gJ3gnKSByZXR1cm4gc2lnbiAqIHBhcnNlSW50KHZhbHVlLnNsaWNlKDIpLCAxNik7XG4gICAgaWYgKHZhbHVlWzFdID09PSAnbycpIHJldHVybiBzaWduICogcGFyc2VJbnQodmFsdWUuc2xpY2UoMiksIDgpO1xuICB9XG5cbiAgcmV0dXJuIHNpZ24gKiBwYXJzZUludCh2YWx1ZSwgMTApO1xufVxuXG5mdW5jdGlvbiBpc0ludGVnZXIob2JqZWN0KSB7XG4gIHJldHVybiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkpID09PSAnW29iamVjdCBOdW1iZXJdJyAmJlxuICAgICAgICAgKG9iamVjdCAlIDEgPT09IDAgJiYgIWNvbW1vbi5pc05lZ2F0aXZlWmVybyhvYmplY3QpKTtcbn1cblxudmFyIGludCA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjppbnQnLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbEludGVnZXIsXG4gIGNvbnN0cnVjdDogY29uc3RydWN0WWFtbEludGVnZXIsXG4gIHByZWRpY2F0ZTogaXNJbnRlZ2VyLFxuICByZXByZXNlbnQ6IHtcbiAgICBiaW5hcnk6ICAgICAgZnVuY3Rpb24gKG9iaikgeyByZXR1cm4gb2JqID49IDAgPyAnMGInICsgb2JqLnRvU3RyaW5nKDIpIDogJy0wYicgKyBvYmoudG9TdHJpbmcoMikuc2xpY2UoMSk7IH0sXG4gICAgb2N0YWw6ICAgICAgIGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iaiA+PSAwID8gJzBvJyAgKyBvYmoudG9TdHJpbmcoOCkgOiAnLTBvJyAgKyBvYmoudG9TdHJpbmcoOCkuc2xpY2UoMSk7IH0sXG4gICAgZGVjaW1hbDogICAgIGZ1bmN0aW9uIChvYmopIHsgcmV0dXJuIG9iai50b1N0cmluZygxMCk7IH0sXG4gICAgLyogZXNsaW50LWRpc2FibGUgbWF4LWxlbiAqL1xuICAgIGhleGFkZWNpbWFsOiBmdW5jdGlvbiAob2JqKSB7IHJldHVybiBvYmogPj0gMCA/ICcweCcgKyBvYmoudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkgOiAgJy0weCcgKyBvYmoudG9TdHJpbmcoMTYpLnRvVXBwZXJDYXNlKCkuc2xpY2UoMSk7IH1cbiAgfSxcbiAgZGVmYXVsdFN0eWxlOiAnZGVjaW1hbCcsXG4gIHN0eWxlQWxpYXNlczoge1xuICAgIGJpbmFyeTogICAgICBbIDIsICAnYmluJyBdLFxuICAgIG9jdGFsOiAgICAgICBbIDgsICAnb2N0JyBdLFxuICAgIGRlY2ltYWw6ICAgICBbIDEwLCAnZGVjJyBdLFxuICAgIGhleGFkZWNpbWFsOiBbIDE2LCAnaGV4JyBdXG4gIH1cbn0pO1xuXG52YXIgWUFNTF9GTE9BVF9QQVRURVJOID0gbmV3IFJlZ0V4cChcbiAgLy8gMi41ZTQsIDIuNSBhbmQgaW50ZWdlcnNcbiAgJ14oPzpbLStdPyg/OlswLTldWzAtOV9dKikoPzpcXFxcLlswLTlfXSopPyg/OltlRV1bLStdP1swLTldKyk/JyArXG4gIC8vIC4yZTQsIC4yXG4gIC8vIHNwZWNpYWwgY2FzZSwgc2VlbXMgbm90IGZyb20gc3BlY1xuICAnfFxcXFwuWzAtOV9dKyg/OltlRV1bLStdP1swLTldKyk/JyArXG4gIC8vIC5pbmZcbiAgJ3xbLStdP1xcXFwuKD86aW5mfEluZnxJTkYpJyArXG4gIC8vIC5uYW5cbiAgJ3xcXFxcLig/Om5hbnxOYU58TkFOKSkkJyk7XG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sRmxvYXQoZGF0YSkge1xuICBpZiAoZGF0YSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXG4gIGlmICghWUFNTF9GTE9BVF9QQVRURVJOLnRlc3QoZGF0YSkgfHxcbiAgICAgIC8vIFF1aWNrIGhhY2sgdG8gbm90IGFsbG93IGludGVnZXJzIGVuZCB3aXRoIGBfYFxuICAgICAgLy8gUHJvYmFibHkgc2hvdWxkIHVwZGF0ZSByZWdleHAgJiBjaGVjayBzcGVlZFxuICAgICAgZGF0YVtkYXRhLmxlbmd0aCAtIDFdID09PSAnXycpIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gY29uc3RydWN0WWFtbEZsb2F0KGRhdGEpIHtcbiAgdmFyIHZhbHVlLCBzaWduO1xuXG4gIHZhbHVlICA9IGRhdGEucmVwbGFjZSgvXy9nLCAnJykudG9Mb3dlckNhc2UoKTtcbiAgc2lnbiAgID0gdmFsdWVbMF0gPT09ICctJyA/IC0xIDogMTtcblxuICBpZiAoJystJy5pbmRleE9mKHZhbHVlWzBdKSA+PSAwKSB7XG4gICAgdmFsdWUgPSB2YWx1ZS5zbGljZSgxKTtcbiAgfVxuXG4gIGlmICh2YWx1ZSA9PT0gJy5pbmYnKSB7XG4gICAgcmV0dXJuIChzaWduID09PSAxKSA/IE51bWJlci5QT1NJVElWRV9JTkZJTklUWSA6IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcblxuICB9IGVsc2UgaWYgKHZhbHVlID09PSAnLm5hbicpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG4gIHJldHVybiBzaWduICogcGFyc2VGbG9hdCh2YWx1ZSwgMTApO1xufVxuXG5cbnZhciBTQ0lFTlRJRklDX1dJVEhPVVRfRE9UID0gL15bLStdP1swLTldK2UvO1xuXG5mdW5jdGlvbiByZXByZXNlbnRZYW1sRmxvYXQob2JqZWN0LCBzdHlsZSkge1xuICB2YXIgcmVzO1xuXG4gIGlmIChpc05hTihvYmplY3QpKSB7XG4gICAgc3dpdGNoIChzdHlsZSkge1xuICAgICAgY2FzZSAnbG93ZXJjYXNlJzogcmV0dXJuICcubmFuJztcbiAgICAgIGNhc2UgJ3VwcGVyY2FzZSc6IHJldHVybiAnLk5BTic7XG4gICAgICBjYXNlICdjYW1lbGNhc2UnOiByZXR1cm4gJy5OYU4nO1xuICAgIH1cbiAgfSBlbHNlIGlmIChOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFkgPT09IG9iamVjdCkge1xuICAgIHN3aXRjaCAoc3R5bGUpIHtcbiAgICAgIGNhc2UgJ2xvd2VyY2FzZSc6IHJldHVybiAnLmluZic7XG4gICAgICBjYXNlICd1cHBlcmNhc2UnOiByZXR1cm4gJy5JTkYnO1xuICAgICAgY2FzZSAnY2FtZWxjYXNlJzogcmV0dXJuICcuSW5mJztcbiAgICB9XG4gIH0gZWxzZSBpZiAoTnVtYmVyLk5FR0FUSVZFX0lORklOSVRZID09PSBvYmplY3QpIHtcbiAgICBzd2l0Y2ggKHN0eWxlKSB7XG4gICAgICBjYXNlICdsb3dlcmNhc2UnOiByZXR1cm4gJy0uaW5mJztcbiAgICAgIGNhc2UgJ3VwcGVyY2FzZSc6IHJldHVybiAnLS5JTkYnO1xuICAgICAgY2FzZSAnY2FtZWxjYXNlJzogcmV0dXJuICctLkluZic7XG4gICAgfVxuICB9IGVsc2UgaWYgKGNvbW1vbi5pc05lZ2F0aXZlWmVybyhvYmplY3QpKSB7XG4gICAgcmV0dXJuICctMC4wJztcbiAgfVxuXG4gIHJlcyA9IG9iamVjdC50b1N0cmluZygxMCk7XG5cbiAgLy8gSlMgc3RyaW5naWZpZXIgY2FuIGJ1aWxkIHNjaWVudGlmaWMgZm9ybWF0IHdpdGhvdXQgZG90czogNWUtMTAwLFxuICAvLyB3aGlsZSBZQU1MIHJlcXVyZXMgZG90OiA1LmUtMTAwLiBGaXggaXQgd2l0aCBzaW1wbGUgaGFja1xuXG4gIHJldHVybiBTQ0lFTlRJRklDX1dJVEhPVVRfRE9ULnRlc3QocmVzKSA/IHJlcy5yZXBsYWNlKCdlJywgJy5lJykgOiByZXM7XG59XG5cbmZ1bmN0aW9uIGlzRmxvYXQob2JqZWN0KSB7XG4gIHJldHVybiAoT2JqZWN0LnByb3RvdHlwZS50b1N0cmluZy5jYWxsKG9iamVjdCkgPT09ICdbb2JqZWN0IE51bWJlcl0nKSAmJlxuICAgICAgICAgKG9iamVjdCAlIDEgIT09IDAgfHwgY29tbW9uLmlzTmVnYXRpdmVaZXJvKG9iamVjdCkpO1xufVxuXG52YXIgZmxvYXQgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6ZmxvYXQnLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbEZsb2F0LFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxGbG9hdCxcbiAgcHJlZGljYXRlOiBpc0Zsb2F0LFxuICByZXByZXNlbnQ6IHJlcHJlc2VudFlhbWxGbG9hdCxcbiAgZGVmYXVsdFN0eWxlOiAnbG93ZXJjYXNlJ1xufSk7XG5cbnZhciBqc29uID0gZmFpbHNhZmUuZXh0ZW5kKHtcbiAgaW1wbGljaXQ6IFtcbiAgICBfbnVsbCxcbiAgICBib29sLFxuICAgIGludCxcbiAgICBmbG9hdFxuICBdXG59KTtcblxudmFyIGNvcmUgPSBqc29uO1xuXG52YXIgWUFNTF9EQVRFX1JFR0VYUCA9IG5ldyBSZWdFeHAoXG4gICdeKFswLTldWzAtOV1bMC05XVswLTldKScgICAgICAgICAgKyAvLyBbMV0geWVhclxuICAnLShbMC05XVswLTldKScgICAgICAgICAgICAgICAgICAgICsgLy8gWzJdIG1vbnRoXG4gICctKFswLTldWzAtOV0pJCcpOyAgICAgICAgICAgICAgICAgICAvLyBbM10gZGF5XG5cbnZhciBZQU1MX1RJTUVTVEFNUF9SRUdFWFAgPSBuZXcgUmVnRXhwKFxuICAnXihbMC05XVswLTldWzAtOV1bMC05XSknICAgICAgICAgICsgLy8gWzFdIHllYXJcbiAgJy0oWzAtOV1bMC05XT8pJyAgICAgICAgICAgICAgICAgICArIC8vIFsyXSBtb250aFxuICAnLShbMC05XVswLTldPyknICAgICAgICAgICAgICAgICAgICsgLy8gWzNdIGRheVxuICAnKD86W1R0XXxbIFxcXFx0XSspJyAgICAgICAgICAgICAgICAgKyAvLyAuLi5cbiAgJyhbMC05XVswLTldPyknICAgICAgICAgICAgICAgICAgICArIC8vIFs0XSBob3VyXG4gICc6KFswLTldWzAtOV0pJyAgICAgICAgICAgICAgICAgICAgKyAvLyBbNV0gbWludXRlXG4gICc6KFswLTldWzAtOV0pJyAgICAgICAgICAgICAgICAgICAgKyAvLyBbNl0gc2Vjb25kXG4gICcoPzpcXFxcLihbMC05XSopKT8nICAgICAgICAgICAgICAgICArIC8vIFs3XSBmcmFjdGlvblxuICAnKD86WyBcXFxcdF0qKFp8KFstK10pKFswLTldWzAtOV0/KScgKyAvLyBbOF0gdHogWzldIHR6X3NpZ24gWzEwXSB0el9ob3VyXG4gICcoPzo6KFswLTldWzAtOV0pKT8pKT8kJyk7ICAgICAgICAgICAvLyBbMTFdIHR6X21pbnV0ZVxuXG5mdW5jdGlvbiByZXNvbHZlWWFtbFRpbWVzdGFtcChkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gIGlmIChZQU1MX0RBVEVfUkVHRVhQLmV4ZWMoZGF0YSkgIT09IG51bGwpIHJldHVybiB0cnVlO1xuICBpZiAoWUFNTF9USU1FU1RBTVBfUkVHRVhQLmV4ZWMoZGF0YSkgIT09IG51bGwpIHJldHVybiB0cnVlO1xuICByZXR1cm4gZmFsc2U7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxUaW1lc3RhbXAoZGF0YSkge1xuICB2YXIgbWF0Y2gsIHllYXIsIG1vbnRoLCBkYXksIGhvdXIsIG1pbnV0ZSwgc2Vjb25kLCBmcmFjdGlvbiA9IDAsXG4gICAgICBkZWx0YSA9IG51bGwsIHR6X2hvdXIsIHR6X21pbnV0ZSwgZGF0ZTtcblxuICBtYXRjaCA9IFlBTUxfREFURV9SRUdFWFAuZXhlYyhkYXRhKTtcbiAgaWYgKG1hdGNoID09PSBudWxsKSBtYXRjaCA9IFlBTUxfVElNRVNUQU1QX1JFR0VYUC5leGVjKGRhdGEpO1xuXG4gIGlmIChtYXRjaCA9PT0gbnVsbCkgdGhyb3cgbmV3IEVycm9yKCdEYXRlIHJlc29sdmUgZXJyb3InKTtcblxuICAvLyBtYXRjaDogWzFdIHllYXIgWzJdIG1vbnRoIFszXSBkYXlcblxuICB5ZWFyID0gKyhtYXRjaFsxXSk7XG4gIG1vbnRoID0gKyhtYXRjaFsyXSkgLSAxOyAvLyBKUyBtb250aCBzdGFydHMgd2l0aCAwXG4gIGRheSA9ICsobWF0Y2hbM10pO1xuXG4gIGlmICghbWF0Y2hbNF0pIHsgLy8gbm8gaG91clxuICAgIHJldHVybiBuZXcgRGF0ZShEYXRlLlVUQyh5ZWFyLCBtb250aCwgZGF5KSk7XG4gIH1cblxuICAvLyBtYXRjaDogWzRdIGhvdXIgWzVdIG1pbnV0ZSBbNl0gc2Vjb25kIFs3XSBmcmFjdGlvblxuXG4gIGhvdXIgPSArKG1hdGNoWzRdKTtcbiAgbWludXRlID0gKyhtYXRjaFs1XSk7XG4gIHNlY29uZCA9ICsobWF0Y2hbNl0pO1xuXG4gIGlmIChtYXRjaFs3XSkge1xuICAgIGZyYWN0aW9uID0gbWF0Y2hbN10uc2xpY2UoMCwgMyk7XG4gICAgd2hpbGUgKGZyYWN0aW9uLmxlbmd0aCA8IDMpIHsgLy8gbWlsbGktc2Vjb25kc1xuICAgICAgZnJhY3Rpb24gKz0gJzAnO1xuICAgIH1cbiAgICBmcmFjdGlvbiA9ICtmcmFjdGlvbjtcbiAgfVxuXG4gIC8vIG1hdGNoOiBbOF0gdHogWzldIHR6X3NpZ24gWzEwXSB0el9ob3VyIFsxMV0gdHpfbWludXRlXG5cbiAgaWYgKG1hdGNoWzldKSB7XG4gICAgdHpfaG91ciA9ICsobWF0Y2hbMTBdKTtcbiAgICB0el9taW51dGUgPSArKG1hdGNoWzExXSB8fCAwKTtcbiAgICBkZWx0YSA9ICh0el9ob3VyICogNjAgKyB0el9taW51dGUpICogNjAwMDA7IC8vIGRlbHRhIGluIG1pbGktc2Vjb25kc1xuICAgIGlmIChtYXRjaFs5XSA9PT0gJy0nKSBkZWx0YSA9IC1kZWx0YTtcbiAgfVxuXG4gIGRhdGUgPSBuZXcgRGF0ZShEYXRlLlVUQyh5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHNlY29uZCwgZnJhY3Rpb24pKTtcblxuICBpZiAoZGVsdGEpIGRhdGUuc2V0VGltZShkYXRlLmdldFRpbWUoKSAtIGRlbHRhKTtcblxuICByZXR1cm4gZGF0ZTtcbn1cblxuZnVuY3Rpb24gcmVwcmVzZW50WWFtbFRpbWVzdGFtcChvYmplY3QgLyosIHN0eWxlKi8pIHtcbiAgcmV0dXJuIG9iamVjdC50b0lTT1N0cmluZygpO1xufVxuXG52YXIgdGltZXN0YW1wID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOnRpbWVzdGFtcCcsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sVGltZXN0YW1wLFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxUaW1lc3RhbXAsXG4gIGluc3RhbmNlT2Y6IERhdGUsXG4gIHJlcHJlc2VudDogcmVwcmVzZW50WWFtbFRpbWVzdGFtcFxufSk7XG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sTWVyZ2UoZGF0YSkge1xuICByZXR1cm4gZGF0YSA9PT0gJzw8JyB8fCBkYXRhID09PSBudWxsO1xufVxuXG52YXIgbWVyZ2UgPSBuZXcgdHlwZSgndGFnOnlhbWwub3JnLDIwMDI6bWVyZ2UnLCB7XG4gIGtpbmQ6ICdzY2FsYXInLFxuICByZXNvbHZlOiByZXNvbHZlWWFtbE1lcmdlXG59KTtcblxuLyplc2xpbnQtZGlzYWJsZSBuby1iaXR3aXNlKi9cblxuXG5cblxuXG4vLyBbIDY0LCA2NSwgNjYgXSAtPiBbIHBhZGRpbmcsIENSLCBMRiBdXG52YXIgQkFTRTY0X01BUCA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvPVxcblxccic7XG5cblxuZnVuY3Rpb24gcmVzb2x2ZVlhbWxCaW5hcnkoZGF0YSkge1xuICBpZiAoZGF0YSA9PT0gbnVsbCkgcmV0dXJuIGZhbHNlO1xuXG4gIHZhciBjb2RlLCBpZHgsIGJpdGxlbiA9IDAsIG1heCA9IGRhdGEubGVuZ3RoLCBtYXAgPSBCQVNFNjRfTUFQO1xuXG4gIC8vIENvbnZlcnQgb25lIGJ5IG9uZS5cbiAgZm9yIChpZHggPSAwOyBpZHggPCBtYXg7IGlkeCsrKSB7XG4gICAgY29kZSA9IG1hcC5pbmRleE9mKGRhdGEuY2hhckF0KGlkeCkpO1xuXG4gICAgLy8gU2tpcCBDUi9MRlxuICAgIGlmIChjb2RlID4gNjQpIGNvbnRpbnVlO1xuXG4gICAgLy8gRmFpbCBvbiBpbGxlZ2FsIGNoYXJhY3RlcnNcbiAgICBpZiAoY29kZSA8IDApIHJldHVybiBmYWxzZTtcblxuICAgIGJpdGxlbiArPSA2O1xuICB9XG5cbiAgLy8gSWYgdGhlcmUgYXJlIGFueSBiaXRzIGxlZnQsIHNvdXJjZSB3YXMgY29ycnVwdGVkXG4gIHJldHVybiAoYml0bGVuICUgOCkgPT09IDA7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxCaW5hcnkoZGF0YSkge1xuICB2YXIgaWR4LCB0YWlsYml0cyxcbiAgICAgIGlucHV0ID0gZGF0YS5yZXBsYWNlKC9bXFxyXFxuPV0vZywgJycpLCAvLyByZW1vdmUgQ1IvTEYgJiBwYWRkaW5nIHRvIHNpbXBsaWZ5IHNjYW5cbiAgICAgIG1heCA9IGlucHV0Lmxlbmd0aCxcbiAgICAgIG1hcCA9IEJBU0U2NF9NQVAsXG4gICAgICBiaXRzID0gMCxcbiAgICAgIHJlc3VsdCA9IFtdO1xuXG4gIC8vIENvbGxlY3QgYnkgNio0IGJpdHMgKDMgYnl0ZXMpXG5cbiAgZm9yIChpZHggPSAwOyBpZHggPCBtYXg7IGlkeCsrKSB7XG4gICAgaWYgKChpZHggJSA0ID09PSAwKSAmJiBpZHgpIHtcbiAgICAgIHJlc3VsdC5wdXNoKChiaXRzID4+IDE2KSAmIDB4RkYpO1xuICAgICAgcmVzdWx0LnB1c2goKGJpdHMgPj4gOCkgJiAweEZGKTtcbiAgICAgIHJlc3VsdC5wdXNoKGJpdHMgJiAweEZGKTtcbiAgICB9XG5cbiAgICBiaXRzID0gKGJpdHMgPDwgNikgfCBtYXAuaW5kZXhPZihpbnB1dC5jaGFyQXQoaWR4KSk7XG4gIH1cblxuICAvLyBEdW1wIHRhaWxcblxuICB0YWlsYml0cyA9IChtYXggJSA0KSAqIDY7XG5cbiAgaWYgKHRhaWxiaXRzID09PSAwKSB7XG4gICAgcmVzdWx0LnB1c2goKGJpdHMgPj4gMTYpICYgMHhGRik7XG4gICAgcmVzdWx0LnB1c2goKGJpdHMgPj4gOCkgJiAweEZGKTtcbiAgICByZXN1bHQucHVzaChiaXRzICYgMHhGRik7XG4gIH0gZWxzZSBpZiAodGFpbGJpdHMgPT09IDE4KSB7XG4gICAgcmVzdWx0LnB1c2goKGJpdHMgPj4gMTApICYgMHhGRik7XG4gICAgcmVzdWx0LnB1c2goKGJpdHMgPj4gMikgJiAweEZGKTtcbiAgfSBlbHNlIGlmICh0YWlsYml0cyA9PT0gMTIpIHtcbiAgICByZXN1bHQucHVzaCgoYml0cyA+PiA0KSAmIDB4RkYpO1xuICB9XG5cbiAgcmV0dXJuIG5ldyBVaW50OEFycmF5KHJlc3VsdCk7XG59XG5cbmZ1bmN0aW9uIHJlcHJlc2VudFlhbWxCaW5hcnkob2JqZWN0IC8qLCBzdHlsZSovKSB7XG4gIHZhciByZXN1bHQgPSAnJywgYml0cyA9IDAsIGlkeCwgdGFpbCxcbiAgICAgIG1heCA9IG9iamVjdC5sZW5ndGgsXG4gICAgICBtYXAgPSBCQVNFNjRfTUFQO1xuXG4gIC8vIENvbnZlcnQgZXZlcnkgdGhyZWUgYnl0ZXMgdG8gNCBBU0NJSSBjaGFyYWN0ZXJzLlxuXG4gIGZvciAoaWR4ID0gMDsgaWR4IDwgbWF4OyBpZHgrKykge1xuICAgIGlmICgoaWR4ICUgMyA9PT0gMCkgJiYgaWR4KSB7XG4gICAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDE4KSAmIDB4M0ZdO1xuICAgICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiAxMikgJiAweDNGXTtcbiAgICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gNikgJiAweDNGXTtcbiAgICAgIHJlc3VsdCArPSBtYXBbYml0cyAmIDB4M0ZdO1xuICAgIH1cblxuICAgIGJpdHMgPSAoYml0cyA8PCA4KSArIG9iamVjdFtpZHhdO1xuICB9XG5cbiAgLy8gRHVtcCB0YWlsXG5cbiAgdGFpbCA9IG1heCAlIDM7XG5cbiAgaWYgKHRhaWwgPT09IDApIHtcbiAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDE4KSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gMTIpICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFsoYml0cyA+PiA2KSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbYml0cyAmIDB4M0ZdO1xuICB9IGVsc2UgaWYgKHRhaWwgPT09IDIpIHtcbiAgICByZXN1bHQgKz0gbWFwWyhiaXRzID4+IDEwKSAmIDB4M0ZdO1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gNCkgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWyhiaXRzIDw8IDIpICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFs2NF07XG4gIH0gZWxzZSBpZiAodGFpbCA9PT0gMSkge1xuICAgIHJlc3VsdCArPSBtYXBbKGJpdHMgPj4gMikgJiAweDNGXTtcbiAgICByZXN1bHQgKz0gbWFwWyhiaXRzIDw8IDQpICYgMHgzRl07XG4gICAgcmVzdWx0ICs9IG1hcFs2NF07XG4gICAgcmVzdWx0ICs9IG1hcFs2NF07XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBpc0JpbmFyeShvYmopIHtcbiAgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopID09PSAgJ1tvYmplY3QgVWludDhBcnJheV0nO1xufVxuXG52YXIgYmluYXJ5ID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOmJpbmFyeScsIHtcbiAga2luZDogJ3NjYWxhcicsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sQmluYXJ5LFxuICBjb25zdHJ1Y3Q6IGNvbnN0cnVjdFlhbWxCaW5hcnksXG4gIHByZWRpY2F0ZTogaXNCaW5hcnksXG4gIHJlcHJlc2VudDogcmVwcmVzZW50WWFtbEJpbmFyeVxufSk7XG5cbnZhciBfaGFzT3duUHJvcGVydHkkMyA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG52YXIgX3RvU3RyaW5nJDIgICAgICAgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xuXG5mdW5jdGlvbiByZXNvbHZlWWFtbE9tYXAoZGF0YSkge1xuICBpZiAoZGF0YSA9PT0gbnVsbCkgcmV0dXJuIHRydWU7XG5cbiAgdmFyIG9iamVjdEtleXMgPSBbXSwgaW5kZXgsIGxlbmd0aCwgcGFpciwgcGFpcktleSwgcGFpckhhc0tleSxcbiAgICAgIG9iamVjdCA9IGRhdGE7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IG9iamVjdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgcGFpciA9IG9iamVjdFtpbmRleF07XG4gICAgcGFpckhhc0tleSA9IGZhbHNlO1xuXG4gICAgaWYgKF90b1N0cmluZyQyLmNhbGwocGFpcikgIT09ICdbb2JqZWN0IE9iamVjdF0nKSByZXR1cm4gZmFsc2U7XG5cbiAgICBmb3IgKHBhaXJLZXkgaW4gcGFpcikge1xuICAgICAgaWYgKF9oYXNPd25Qcm9wZXJ0eSQzLmNhbGwocGFpciwgcGFpcktleSkpIHtcbiAgICAgICAgaWYgKCFwYWlySGFzS2V5KSBwYWlySGFzS2V5ID0gdHJ1ZTtcbiAgICAgICAgZWxzZSByZXR1cm4gZmFsc2U7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCFwYWlySGFzS2V5KSByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAob2JqZWN0S2V5cy5pbmRleE9mKHBhaXJLZXkpID09PSAtMSkgb2JqZWN0S2V5cy5wdXNoKHBhaXJLZXkpO1xuICAgIGVsc2UgcmV0dXJuIGZhbHNlO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxPbWFwKGRhdGEpIHtcbiAgcmV0dXJuIGRhdGEgIT09IG51bGwgPyBkYXRhIDogW107XG59XG5cbnZhciBvbWFwID0gbmV3IHR5cGUoJ3RhZzp5YW1sLm9yZywyMDAyOm9tYXAnLCB7XG4gIGtpbmQ6ICdzZXF1ZW5jZScsXG4gIHJlc29sdmU6IHJlc29sdmVZYW1sT21hcCxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sT21hcFxufSk7XG5cbnZhciBfdG9TdHJpbmckMSA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmc7XG5cbmZ1bmN0aW9uIHJlc29sdmVZYW1sUGFpcnMoZGF0YSkge1xuICBpZiAoZGF0YSA9PT0gbnVsbCkgcmV0dXJuIHRydWU7XG5cbiAgdmFyIGluZGV4LCBsZW5ndGgsIHBhaXIsIGtleXMsIHJlc3VsdCxcbiAgICAgIG9iamVjdCA9IGRhdGE7XG5cbiAgcmVzdWx0ID0gbmV3IEFycmF5KG9iamVjdC5sZW5ndGgpO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHBhaXIgPSBvYmplY3RbaW5kZXhdO1xuXG4gICAgaWYgKF90b1N0cmluZyQxLmNhbGwocGFpcikgIT09ICdbb2JqZWN0IE9iamVjdF0nKSByZXR1cm4gZmFsc2U7XG5cbiAgICBrZXlzID0gT2JqZWN0LmtleXMocGFpcik7XG5cbiAgICBpZiAoa2V5cy5sZW5ndGggIT09IDEpIHJldHVybiBmYWxzZTtcblxuICAgIHJlc3VsdFtpbmRleF0gPSBbIGtleXNbMF0sIHBhaXJba2V5c1swXV0gXTtcbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBjb25zdHJ1Y3RZYW1sUGFpcnMoZGF0YSkge1xuICBpZiAoZGF0YSA9PT0gbnVsbCkgcmV0dXJuIFtdO1xuXG4gIHZhciBpbmRleCwgbGVuZ3RoLCBwYWlyLCBrZXlzLCByZXN1bHQsXG4gICAgICBvYmplY3QgPSBkYXRhO1xuXG4gIHJlc3VsdCA9IG5ldyBBcnJheShvYmplY3QubGVuZ3RoKTtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICBwYWlyID0gb2JqZWN0W2luZGV4XTtcblxuICAgIGtleXMgPSBPYmplY3Qua2V5cyhwYWlyKTtcblxuICAgIHJlc3VsdFtpbmRleF0gPSBbIGtleXNbMF0sIHBhaXJba2V5c1swXV0gXTtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbnZhciBwYWlycyA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpwYWlycycsIHtcbiAga2luZDogJ3NlcXVlbmNlJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxQYWlycyxcbiAgY29uc3RydWN0OiBjb25zdHJ1Y3RZYW1sUGFpcnNcbn0pO1xuXG52YXIgX2hhc093blByb3BlcnR5JDIgPSBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5O1xuXG5mdW5jdGlvbiByZXNvbHZlWWFtbFNldChkYXRhKSB7XG4gIGlmIChkYXRhID09PSBudWxsKSByZXR1cm4gdHJ1ZTtcblxuICB2YXIga2V5LCBvYmplY3QgPSBkYXRhO1xuXG4gIGZvciAoa2V5IGluIG9iamVjdCkge1xuICAgIGlmIChfaGFzT3duUHJvcGVydHkkMi5jYWxsKG9iamVjdCwga2V5KSkge1xuICAgICAgaWYgKG9iamVjdFtrZXldICE9PSBudWxsKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIGNvbnN0cnVjdFlhbWxTZXQoZGF0YSkge1xuICByZXR1cm4gZGF0YSAhPT0gbnVsbCA/IGRhdGEgOiB7fTtcbn1cblxudmFyIHNldCA9IG5ldyB0eXBlKCd0YWc6eWFtbC5vcmcsMjAwMjpzZXQnLCB7XG4gIGtpbmQ6ICdtYXBwaW5nJyxcbiAgcmVzb2x2ZTogcmVzb2x2ZVlhbWxTZXQsXG4gIGNvbnN0cnVjdDogY29uc3RydWN0WWFtbFNldFxufSk7XG5cbnZhciBfZGVmYXVsdCA9IGNvcmUuZXh0ZW5kKHtcbiAgaW1wbGljaXQ6IFtcbiAgICB0aW1lc3RhbXAsXG4gICAgbWVyZ2VcbiAgXSxcbiAgZXhwbGljaXQ6IFtcbiAgICBiaW5hcnksXG4gICAgb21hcCxcbiAgICBwYWlycyxcbiAgICBzZXRcbiAgXVxufSk7XG5cbi8qZXNsaW50LWRpc2FibGUgbWF4LWxlbixuby11c2UtYmVmb3JlLWRlZmluZSovXG5cblxuXG5cblxuXG5cbnZhciBfaGFzT3duUHJvcGVydHkkMSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cblxudmFyIENPTlRFWFRfRkxPV19JTiAgID0gMTtcbnZhciBDT05URVhUX0ZMT1dfT1VUICA9IDI7XG52YXIgQ09OVEVYVF9CTE9DS19JTiAgPSAzO1xudmFyIENPTlRFWFRfQkxPQ0tfT1VUID0gNDtcblxuXG52YXIgQ0hPTVBJTkdfQ0xJUCAgPSAxO1xudmFyIENIT01QSU5HX1NUUklQID0gMjtcbnZhciBDSE9NUElOR19LRUVQICA9IDM7XG5cblxudmFyIFBBVFRFUk5fTk9OX1BSSU5UQUJMRSAgICAgICAgID0gL1tcXHgwMC1cXHgwOFxceDBCXFx4MENcXHgwRS1cXHgxRlxceDdGLVxceDg0XFx4ODYtXFx4OUZcXHVGRkZFXFx1RkZGRl18W1xcdUQ4MDAtXFx1REJGRl0oPyFbXFx1REMwMC1cXHVERkZGXSl8KD86W15cXHVEODAwLVxcdURCRkZdfF4pW1xcdURDMDAtXFx1REZGRl0vO1xudmFyIFBBVFRFUk5fTk9OX0FTQ0lJX0xJTkVfQlJFQUtTID0gL1tcXHg4NVxcdTIwMjhcXHUyMDI5XS87XG52YXIgUEFUVEVSTl9GTE9XX0lORElDQVRPUlMgICAgICAgPSAvWyxcXFtcXF1cXHtcXH1dLztcbnZhciBQQVRURVJOX1RBR19IQU5ETEUgICAgICAgICAgICA9IC9eKD86IXwhIXwhW2EtelxcLV0rISkkL2k7XG52YXIgUEFUVEVSTl9UQUdfVVJJICAgICAgICAgICAgICAgPSAvXig/OiF8W14sXFxbXFxdXFx7XFx9XSkoPzolWzAtOWEtZl17Mn18WzAtOWEtelxcLSM7XFwvXFw/OkAmPVxcK1xcJCxfXFwuIX5cXConXFwoXFwpXFxbXFxdXSkqJC9pO1xuXG5cbmZ1bmN0aW9uIF9jbGFzcyhvYmopIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopOyB9XG5cbmZ1bmN0aW9uIGlzX0VPTChjKSB7XG4gIHJldHVybiAoYyA9PT0gMHgwQS8qIExGICovKSB8fCAoYyA9PT0gMHgwRC8qIENSICovKTtcbn1cblxuZnVuY3Rpb24gaXNfV0hJVEVfU1BBQ0UoYykge1xuICByZXR1cm4gKGMgPT09IDB4MDkvKiBUYWIgKi8pIHx8IChjID09PSAweDIwLyogU3BhY2UgKi8pO1xufVxuXG5mdW5jdGlvbiBpc19XU19PUl9FT0woYykge1xuICByZXR1cm4gKGMgPT09IDB4MDkvKiBUYWIgKi8pIHx8XG4gICAgICAgICAoYyA9PT0gMHgyMC8qIFNwYWNlICovKSB8fFxuICAgICAgICAgKGMgPT09IDB4MEEvKiBMRiAqLykgfHxcbiAgICAgICAgIChjID09PSAweDBELyogQ1IgKi8pO1xufVxuXG5mdW5jdGlvbiBpc19GTE9XX0lORElDQVRPUihjKSB7XG4gIHJldHVybiBjID09PSAweDJDLyogLCAqLyB8fFxuICAgICAgICAgYyA9PT0gMHg1Qi8qIFsgKi8gfHxcbiAgICAgICAgIGMgPT09IDB4NUQvKiBdICovIHx8XG4gICAgICAgICBjID09PSAweDdCLyogeyAqLyB8fFxuICAgICAgICAgYyA9PT0gMHg3RC8qIH0gKi87XG59XG5cbmZ1bmN0aW9uIGZyb21IZXhDb2RlKGMpIHtcbiAgdmFyIGxjO1xuXG4gIGlmICgoMHgzMC8qIDAgKi8gPD0gYykgJiYgKGMgPD0gMHgzOS8qIDkgKi8pKSB7XG4gICAgcmV0dXJuIGMgLSAweDMwO1xuICB9XG5cbiAgLyplc2xpbnQtZGlzYWJsZSBuby1iaXR3aXNlKi9cbiAgbGMgPSBjIHwgMHgyMDtcblxuICBpZiAoKDB4NjEvKiBhICovIDw9IGxjKSAmJiAobGMgPD0gMHg2Ni8qIGYgKi8pKSB7XG4gICAgcmV0dXJuIGxjIC0gMHg2MSArIDEwO1xuICB9XG5cbiAgcmV0dXJuIC0xO1xufVxuXG5mdW5jdGlvbiBlc2NhcGVkSGV4TGVuKGMpIHtcbiAgaWYgKGMgPT09IDB4NzgvKiB4ICovKSB7IHJldHVybiAyOyB9XG4gIGlmIChjID09PSAweDc1LyogdSAqLykgeyByZXR1cm4gNDsgfVxuICBpZiAoYyA9PT0gMHg1NS8qIFUgKi8pIHsgcmV0dXJuIDg7IH1cbiAgcmV0dXJuIDA7XG59XG5cbmZ1bmN0aW9uIGZyb21EZWNpbWFsQ29kZShjKSB7XG4gIGlmICgoMHgzMC8qIDAgKi8gPD0gYykgJiYgKGMgPD0gMHgzOS8qIDkgKi8pKSB7XG4gICAgcmV0dXJuIGMgLSAweDMwO1xuICB9XG5cbiAgcmV0dXJuIC0xO1xufVxuXG5mdW5jdGlvbiBzaW1wbGVFc2NhcGVTZXF1ZW5jZShjKSB7XG4gIC8qIGVzbGludC1kaXNhYmxlIGluZGVudCAqL1xuICByZXR1cm4gKGMgPT09IDB4MzAvKiAwICovKSA/ICdcXHgwMCcgOlxuICAgICAgICAoYyA9PT0gMHg2MS8qIGEgKi8pID8gJ1xceDA3JyA6XG4gICAgICAgIChjID09PSAweDYyLyogYiAqLykgPyAnXFx4MDgnIDpcbiAgICAgICAgKGMgPT09IDB4NzQvKiB0ICovKSA/ICdcXHgwOScgOlxuICAgICAgICAoYyA9PT0gMHgwOS8qIFRhYiAqLykgPyAnXFx4MDknIDpcbiAgICAgICAgKGMgPT09IDB4NkUvKiBuICovKSA/ICdcXHgwQScgOlxuICAgICAgICAoYyA9PT0gMHg3Ni8qIHYgKi8pID8gJ1xceDBCJyA6XG4gICAgICAgIChjID09PSAweDY2LyogZiAqLykgPyAnXFx4MEMnIDpcbiAgICAgICAgKGMgPT09IDB4NzIvKiByICovKSA/ICdcXHgwRCcgOlxuICAgICAgICAoYyA9PT0gMHg2NS8qIGUgKi8pID8gJ1xceDFCJyA6XG4gICAgICAgIChjID09PSAweDIwLyogU3BhY2UgKi8pID8gJyAnIDpcbiAgICAgICAgKGMgPT09IDB4MjIvKiBcIiAqLykgPyAnXFx4MjInIDpcbiAgICAgICAgKGMgPT09IDB4MkYvKiAvICovKSA/ICcvJyA6XG4gICAgICAgIChjID09PSAweDVDLyogXFwgKi8pID8gJ1xceDVDJyA6XG4gICAgICAgIChjID09PSAweDRFLyogTiAqLykgPyAnXFx4ODUnIDpcbiAgICAgICAgKGMgPT09IDB4NUYvKiBfICovKSA/ICdcXHhBMCcgOlxuICAgICAgICAoYyA9PT0gMHg0Qy8qIEwgKi8pID8gJ1xcdTIwMjgnIDpcbiAgICAgICAgKGMgPT09IDB4NTAvKiBQICovKSA/ICdcXHUyMDI5JyA6ICcnO1xufVxuXG5mdW5jdGlvbiBjaGFyRnJvbUNvZGVwb2ludChjKSB7XG4gIGlmIChjIDw9IDB4RkZGRikge1xuICAgIHJldHVybiBTdHJpbmcuZnJvbUNoYXJDb2RlKGMpO1xuICB9XG4gIC8vIEVuY29kZSBVVEYtMTYgc3Vycm9nYXRlIHBhaXJcbiAgLy8gaHR0cHM6Ly9lbi53aWtpcGVkaWEub3JnL3dpa2kvVVRGLTE2I0NvZGVfcG9pbnRzX1UuMkIwMTAwMDBfdG9fVS4yQjEwRkZGRlxuICByZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZShcbiAgICAoKGMgLSAweDAxMDAwMCkgPj4gMTApICsgMHhEODAwLFxuICAgICgoYyAtIDB4MDEwMDAwKSAmIDB4MDNGRikgKyAweERDMDBcbiAgKTtcbn1cblxudmFyIHNpbXBsZUVzY2FwZUNoZWNrID0gbmV3IEFycmF5KDI1Nik7IC8vIGludGVnZXIsIGZvciBmYXN0IGFjY2Vzc1xudmFyIHNpbXBsZUVzY2FwZU1hcCA9IG5ldyBBcnJheSgyNTYpO1xuZm9yICh2YXIgaSA9IDA7IGkgPCAyNTY7IGkrKykge1xuICBzaW1wbGVFc2NhcGVDaGVja1tpXSA9IHNpbXBsZUVzY2FwZVNlcXVlbmNlKGkpID8gMSA6IDA7XG4gIHNpbXBsZUVzY2FwZU1hcFtpXSA9IHNpbXBsZUVzY2FwZVNlcXVlbmNlKGkpO1xufVxuXG5cbmZ1bmN0aW9uIFN0YXRlJDEoaW5wdXQsIG9wdGlvbnMpIHtcbiAgdGhpcy5pbnB1dCA9IGlucHV0O1xuXG4gIHRoaXMuZmlsZW5hbWUgID0gb3B0aW9uc1snZmlsZW5hbWUnXSAgfHwgbnVsbDtcbiAgdGhpcy5zY2hlbWEgICAgPSBvcHRpb25zWydzY2hlbWEnXSAgICB8fCBfZGVmYXVsdDtcbiAgdGhpcy5vbldhcm5pbmcgPSBvcHRpb25zWydvbldhcm5pbmcnXSB8fCBudWxsO1xuICAvLyAoSGlkZGVuKSBSZW1vdmU/IG1ha2VzIHRoZSBsb2FkZXIgdG8gZXhwZWN0IFlBTUwgMS4xIGRvY3VtZW50c1xuICAvLyBpZiBzdWNoIGRvY3VtZW50cyBoYXZlIG5vIGV4cGxpY2l0ICVZQU1MIGRpcmVjdGl2ZVxuICB0aGlzLmxlZ2FjeSAgICA9IG9wdGlvbnNbJ2xlZ2FjeSddICAgIHx8IGZhbHNlO1xuXG4gIHRoaXMuanNvbiAgICAgID0gb3B0aW9uc1snanNvbiddICAgICAgfHwgZmFsc2U7XG4gIHRoaXMubGlzdGVuZXIgID0gb3B0aW9uc1snbGlzdGVuZXInXSAgfHwgbnVsbDtcblxuICB0aGlzLmltcGxpY2l0VHlwZXMgPSB0aGlzLnNjaGVtYS5jb21waWxlZEltcGxpY2l0O1xuICB0aGlzLnR5cGVNYXAgICAgICAgPSB0aGlzLnNjaGVtYS5jb21waWxlZFR5cGVNYXA7XG5cbiAgdGhpcy5sZW5ndGggICAgID0gaW5wdXQubGVuZ3RoO1xuICB0aGlzLnBvc2l0aW9uICAgPSAwO1xuICB0aGlzLmxpbmUgICAgICAgPSAwO1xuICB0aGlzLmxpbmVTdGFydCAgPSAwO1xuICB0aGlzLmxpbmVJbmRlbnQgPSAwO1xuXG4gIC8vIHBvc2l0aW9uIG9mIGZpcnN0IGxlYWRpbmcgdGFiIGluIHRoZSBjdXJyZW50IGxpbmUsXG4gIC8vIHVzZWQgdG8gbWFrZSBzdXJlIHRoZXJlIGFyZSBubyB0YWJzIGluIHRoZSBpbmRlbnRhdGlvblxuICB0aGlzLmZpcnN0VGFiSW5MaW5lID0gLTE7XG5cbiAgdGhpcy5kb2N1bWVudHMgPSBbXTtcblxuICAvKlxuICB0aGlzLnZlcnNpb247XG4gIHRoaXMuY2hlY2tMaW5lQnJlYWtzO1xuICB0aGlzLnRhZ01hcDtcbiAgdGhpcy5hbmNob3JNYXA7XG4gIHRoaXMudGFnO1xuICB0aGlzLmFuY2hvcjtcbiAgdGhpcy5raW5kO1xuICB0aGlzLnJlc3VsdDsqL1xuXG59XG5cblxuZnVuY3Rpb24gZ2VuZXJhdGVFcnJvcihzdGF0ZSwgbWVzc2FnZSkge1xuICB2YXIgbWFyayA9IHtcbiAgICBuYW1lOiAgICAgc3RhdGUuZmlsZW5hbWUsXG4gICAgYnVmZmVyOiAgIHN0YXRlLmlucHV0LnNsaWNlKDAsIC0xKSwgLy8gb21pdCB0cmFpbGluZyBcXDBcbiAgICBwb3NpdGlvbjogc3RhdGUucG9zaXRpb24sXG4gICAgbGluZTogICAgIHN0YXRlLmxpbmUsXG4gICAgY29sdW1uOiAgIHN0YXRlLnBvc2l0aW9uIC0gc3RhdGUubGluZVN0YXJ0XG4gIH07XG5cbiAgbWFyay5zbmlwcGV0ID0gc25pcHBldChtYXJrKTtcblxuICByZXR1cm4gbmV3IGV4Y2VwdGlvbihtZXNzYWdlLCBtYXJrKTtcbn1cblxuZnVuY3Rpb24gdGhyb3dFcnJvcihzdGF0ZSwgbWVzc2FnZSkge1xuICB0aHJvdyBnZW5lcmF0ZUVycm9yKHN0YXRlLCBtZXNzYWdlKTtcbn1cblxuZnVuY3Rpb24gdGhyb3dXYXJuaW5nKHN0YXRlLCBtZXNzYWdlKSB7XG4gIGlmIChzdGF0ZS5vbldhcm5pbmcpIHtcbiAgICBzdGF0ZS5vbldhcm5pbmcuY2FsbChudWxsLCBnZW5lcmF0ZUVycm9yKHN0YXRlLCBtZXNzYWdlKSk7XG4gIH1cbn1cblxuXG52YXIgZGlyZWN0aXZlSGFuZGxlcnMgPSB7XG5cbiAgWUFNTDogZnVuY3Rpb24gaGFuZGxlWWFtbERpcmVjdGl2ZShzdGF0ZSwgbmFtZSwgYXJncykge1xuXG4gICAgdmFyIG1hdGNoLCBtYWpvciwgbWlub3I7XG5cbiAgICBpZiAoc3RhdGUudmVyc2lvbiAhPT0gbnVsbCkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2R1cGxpY2F0aW9uIG9mICVZQU1MIGRpcmVjdGl2ZScpO1xuICAgIH1cblxuICAgIGlmIChhcmdzLmxlbmd0aCAhPT0gMSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ1lBTUwgZGlyZWN0aXZlIGFjY2VwdHMgZXhhY3RseSBvbmUgYXJndW1lbnQnKTtcbiAgICB9XG5cbiAgICBtYXRjaCA9IC9eKFswLTldKylcXC4oWzAtOV0rKSQvLmV4ZWMoYXJnc1swXSk7XG5cbiAgICBpZiAobWF0Y2ggPT09IG51bGwpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdpbGwtZm9ybWVkIGFyZ3VtZW50IG9mIHRoZSBZQU1MIGRpcmVjdGl2ZScpO1xuICAgIH1cblxuICAgIG1ham9yID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcbiAgICBtaW5vciA9IHBhcnNlSW50KG1hdGNoWzJdLCAxMCk7XG5cbiAgICBpZiAobWFqb3IgIT09IDEpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmFjY2VwdGFibGUgWUFNTCB2ZXJzaW9uIG9mIHRoZSBkb2N1bWVudCcpO1xuICAgIH1cblxuICAgIHN0YXRlLnZlcnNpb24gPSBhcmdzWzBdO1xuICAgIHN0YXRlLmNoZWNrTGluZUJyZWFrcyA9IChtaW5vciA8IDIpO1xuXG4gICAgaWYgKG1pbm9yICE9PSAxICYmIG1pbm9yICE9PSAyKSB7XG4gICAgICB0aHJvd1dhcm5pbmcoc3RhdGUsICd1bnN1cHBvcnRlZCBZQU1MIHZlcnNpb24gb2YgdGhlIGRvY3VtZW50Jyk7XG4gICAgfVxuICB9LFxuXG4gIFRBRzogZnVuY3Rpb24gaGFuZGxlVGFnRGlyZWN0aXZlKHN0YXRlLCBuYW1lLCBhcmdzKSB7XG5cbiAgICB2YXIgaGFuZGxlLCBwcmVmaXg7XG5cbiAgICBpZiAoYXJncy5sZW5ndGggIT09IDIpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdUQUcgZGlyZWN0aXZlIGFjY2VwdHMgZXhhY3RseSB0d28gYXJndW1lbnRzJyk7XG4gICAgfVxuXG4gICAgaGFuZGxlID0gYXJnc1swXTtcbiAgICBwcmVmaXggPSBhcmdzWzFdO1xuXG4gICAgaWYgKCFQQVRURVJOX1RBR19IQU5ETEUudGVzdChoYW5kbGUpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnaWxsLWZvcm1lZCB0YWcgaGFuZGxlIChmaXJzdCBhcmd1bWVudCkgb2YgdGhlIFRBRyBkaXJlY3RpdmUnKTtcbiAgICB9XG5cbiAgICBpZiAoX2hhc093blByb3BlcnR5JDEuY2FsbChzdGF0ZS50YWdNYXAsIGhhbmRsZSkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd0aGVyZSBpcyBhIHByZXZpb3VzbHkgZGVjbGFyZWQgc3VmZml4IGZvciBcIicgKyBoYW5kbGUgKyAnXCIgdGFnIGhhbmRsZScpO1xuICAgIH1cblxuICAgIGlmICghUEFUVEVSTl9UQUdfVVJJLnRlc3QocHJlZml4KSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2lsbC1mb3JtZWQgdGFnIHByZWZpeCAoc2Vjb25kIGFyZ3VtZW50KSBvZiB0aGUgVEFHIGRpcmVjdGl2ZScpO1xuICAgIH1cblxuICAgIHRyeSB7XG4gICAgICBwcmVmaXggPSBkZWNvZGVVUklDb21wb25lbnQocHJlZml4KTtcbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd0YWcgcHJlZml4IGlzIG1hbGZvcm1lZDogJyArIHByZWZpeCk7XG4gICAgfVxuXG4gICAgc3RhdGUudGFnTWFwW2hhbmRsZV0gPSBwcmVmaXg7XG4gIH1cbn07XG5cblxuZnVuY3Rpb24gY2FwdHVyZVNlZ21lbnQoc3RhdGUsIHN0YXJ0LCBlbmQsIGNoZWNrSnNvbikge1xuICB2YXIgX3Bvc2l0aW9uLCBfbGVuZ3RoLCBfY2hhcmFjdGVyLCBfcmVzdWx0O1xuXG4gIGlmIChzdGFydCA8IGVuZCkge1xuICAgIF9yZXN1bHQgPSBzdGF0ZS5pbnB1dC5zbGljZShzdGFydCwgZW5kKTtcblxuICAgIGlmIChjaGVja0pzb24pIHtcbiAgICAgIGZvciAoX3Bvc2l0aW9uID0gMCwgX2xlbmd0aCA9IF9yZXN1bHQubGVuZ3RoOyBfcG9zaXRpb24gPCBfbGVuZ3RoOyBfcG9zaXRpb24gKz0gMSkge1xuICAgICAgICBfY2hhcmFjdGVyID0gX3Jlc3VsdC5jaGFyQ29kZUF0KF9wb3NpdGlvbik7XG4gICAgICAgIGlmICghKF9jaGFyYWN0ZXIgPT09IDB4MDkgfHxcbiAgICAgICAgICAgICAgKDB4MjAgPD0gX2NoYXJhY3RlciAmJiBfY2hhcmFjdGVyIDw9IDB4MTBGRkZGKSkpIHtcbiAgICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZXhwZWN0ZWQgdmFsaWQgSlNPTiBjaGFyYWN0ZXInKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoUEFUVEVSTl9OT05fUFJJTlRBQkxFLnRlc3QoX3Jlc3VsdCkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd0aGUgc3RyZWFtIGNvbnRhaW5zIG5vbi1wcmludGFibGUgY2hhcmFjdGVycycpO1xuICAgIH1cblxuICAgIHN0YXRlLnJlc3VsdCArPSBfcmVzdWx0O1xuICB9XG59XG5cbmZ1bmN0aW9uIG1lcmdlTWFwcGluZ3Moc3RhdGUsIGRlc3RpbmF0aW9uLCBzb3VyY2UsIG92ZXJyaWRhYmxlS2V5cykge1xuICB2YXIgc291cmNlS2V5cywga2V5LCBpbmRleCwgcXVhbnRpdHk7XG5cbiAgaWYgKCFjb21tb24uaXNPYmplY3Qoc291cmNlKSkge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICdjYW5ub3QgbWVyZ2UgbWFwcGluZ3M7IHRoZSBwcm92aWRlZCBzb3VyY2Ugb2JqZWN0IGlzIHVuYWNjZXB0YWJsZScpO1xuICB9XG5cbiAgc291cmNlS2V5cyA9IE9iamVjdC5rZXlzKHNvdXJjZSk7XG5cbiAgZm9yIChpbmRleCA9IDAsIHF1YW50aXR5ID0gc291cmNlS2V5cy5sZW5ndGg7IGluZGV4IDwgcXVhbnRpdHk7IGluZGV4ICs9IDEpIHtcbiAgICBrZXkgPSBzb3VyY2VLZXlzW2luZGV4XTtcblxuICAgIGlmICghX2hhc093blByb3BlcnR5JDEuY2FsbChkZXN0aW5hdGlvbiwga2V5KSkge1xuICAgICAgZGVzdGluYXRpb25ba2V5XSA9IHNvdXJjZVtrZXldO1xuICAgICAgb3ZlcnJpZGFibGVLZXlzW2tleV0gPSB0cnVlO1xuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzdG9yZU1hcHBpbmdQYWlyKHN0YXRlLCBfcmVzdWx0LCBvdmVycmlkYWJsZUtleXMsIGtleVRhZywga2V5Tm9kZSwgdmFsdWVOb2RlLFxuICBzdGFydExpbmUsIHN0YXJ0TGluZVN0YXJ0LCBzdGFydFBvcykge1xuXG4gIHZhciBpbmRleCwgcXVhbnRpdHk7XG5cbiAgLy8gVGhlIG91dHB1dCBpcyBhIHBsYWluIG9iamVjdCBoZXJlLCBzbyBrZXlzIGNhbiBvbmx5IGJlIHN0cmluZ3MuXG4gIC8vIFdlIG5lZWQgdG8gY29udmVydCBrZXlOb2RlIHRvIGEgc3RyaW5nLCBidXQgZG9pbmcgc28gY2FuIGhhbmcgdGhlIHByb2Nlc3NcbiAgLy8gKGRlZXBseSBuZXN0ZWQgYXJyYXlzIHRoYXQgZXhwbG9kZSBleHBvbmVudGlhbGx5IHVzaW5nIGFsaWFzZXMpLlxuICBpZiAoQXJyYXkuaXNBcnJheShrZXlOb2RlKSkge1xuICAgIGtleU5vZGUgPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChrZXlOb2RlKTtcblxuICAgIGZvciAoaW5kZXggPSAwLCBxdWFudGl0eSA9IGtleU5vZGUubGVuZ3RoOyBpbmRleCA8IHF1YW50aXR5OyBpbmRleCArPSAxKSB7XG4gICAgICBpZiAoQXJyYXkuaXNBcnJheShrZXlOb2RlW2luZGV4XSkpIHtcbiAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ25lc3RlZCBhcnJheXMgYXJlIG5vdCBzdXBwb3J0ZWQgaW5zaWRlIGtleXMnKTtcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGVvZiBrZXlOb2RlID09PSAnb2JqZWN0JyAmJiBfY2xhc3Moa2V5Tm9kZVtpbmRleF0pID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgICBrZXlOb2RlW2luZGV4XSA9ICdbb2JqZWN0IE9iamVjdF0nO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIC8vIEF2b2lkIGNvZGUgZXhlY3V0aW9uIGluIGxvYWQoKSB2aWEgdG9TdHJpbmcgcHJvcGVydHlcbiAgLy8gKHN0aWxsIHVzZSBpdHMgb3duIHRvU3RyaW5nIGZvciBhcnJheXMsIHRpbWVzdGFtcHMsXG4gIC8vIGFuZCB3aGF0ZXZlciB1c2VyIHNjaGVtYSBleHRlbnNpb25zIGhhcHBlbiB0byBoYXZlIEBAdG9TdHJpbmdUYWcpXG4gIGlmICh0eXBlb2Yga2V5Tm9kZSA9PT0gJ29iamVjdCcgJiYgX2NsYXNzKGtleU5vZGUpID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgIGtleU5vZGUgPSAnW29iamVjdCBPYmplY3RdJztcbiAgfVxuXG5cbiAga2V5Tm9kZSA9IFN0cmluZyhrZXlOb2RlKTtcblxuICBpZiAoX3Jlc3VsdCA9PT0gbnVsbCkge1xuICAgIF9yZXN1bHQgPSB7fTtcbiAgfVxuXG4gIGlmIChrZXlUYWcgPT09ICd0YWc6eWFtbC5vcmcsMjAwMjptZXJnZScpIHtcbiAgICBpZiAoQXJyYXkuaXNBcnJheSh2YWx1ZU5vZGUpKSB7XG4gICAgICBmb3IgKGluZGV4ID0gMCwgcXVhbnRpdHkgPSB2YWx1ZU5vZGUubGVuZ3RoOyBpbmRleCA8IHF1YW50aXR5OyBpbmRleCArPSAxKSB7XG4gICAgICAgIG1lcmdlTWFwcGluZ3Moc3RhdGUsIF9yZXN1bHQsIHZhbHVlTm9kZVtpbmRleF0sIG92ZXJyaWRhYmxlS2V5cyk7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIG1lcmdlTWFwcGluZ3Moc3RhdGUsIF9yZXN1bHQsIHZhbHVlTm9kZSwgb3ZlcnJpZGFibGVLZXlzKTtcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgaWYgKCFzdGF0ZS5qc29uICYmXG4gICAgICAgICFfaGFzT3duUHJvcGVydHkkMS5jYWxsKG92ZXJyaWRhYmxlS2V5cywga2V5Tm9kZSkgJiZcbiAgICAgICAgX2hhc093blByb3BlcnR5JDEuY2FsbChfcmVzdWx0LCBrZXlOb2RlKSkge1xuICAgICAgc3RhdGUubGluZSA9IHN0YXJ0TGluZSB8fCBzdGF0ZS5saW5lO1xuICAgICAgc3RhdGUubGluZVN0YXJ0ID0gc3RhcnRMaW5lU3RhcnQgfHwgc3RhdGUubGluZVN0YXJ0O1xuICAgICAgc3RhdGUucG9zaXRpb24gPSBzdGFydFBvcyB8fCBzdGF0ZS5wb3NpdGlvbjtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdkdXBsaWNhdGVkIG1hcHBpbmcga2V5Jyk7XG4gICAgfVxuXG4gICAgLy8gdXNlZCBmb3IgdGhpcyBzcGVjaWZpYyBrZXkgb25seSBiZWNhdXNlIE9iamVjdC5kZWZpbmVQcm9wZXJ0eSBpcyBzbG93XG4gICAgaWYgKGtleU5vZGUgPT09ICdfX3Byb3RvX18nKSB7XG4gICAgICBPYmplY3QuZGVmaW5lUHJvcGVydHkoX3Jlc3VsdCwga2V5Tm9kZSwge1xuICAgICAgICBjb25maWd1cmFibGU6IHRydWUsXG4gICAgICAgIGVudW1lcmFibGU6IHRydWUsXG4gICAgICAgIHdyaXRhYmxlOiB0cnVlLFxuICAgICAgICB2YWx1ZTogdmFsdWVOb2RlXG4gICAgICB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgX3Jlc3VsdFtrZXlOb2RlXSA9IHZhbHVlTm9kZTtcbiAgICB9XG4gICAgZGVsZXRlIG92ZXJyaWRhYmxlS2V5c1trZXlOb2RlXTtcbiAgfVxuXG4gIHJldHVybiBfcmVzdWx0O1xufVxuXG5mdW5jdGlvbiByZWFkTGluZUJyZWFrKHN0YXRlKSB7XG4gIHZhciBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCA9PT0gMHgwQS8qIExGICovKSB7XG4gICAgc3RhdGUucG9zaXRpb24rKztcbiAgfSBlbHNlIGlmIChjaCA9PT0gMHgwRC8qIENSICovKSB7XG4gICAgc3RhdGUucG9zaXRpb24rKztcbiAgICBpZiAoc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbikgPT09IDB4MEEvKiBMRiAqLykge1xuICAgICAgc3RhdGUucG9zaXRpb24rKztcbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ2EgbGluZSBicmVhayBpcyBleHBlY3RlZCcpO1xuICB9XG5cbiAgc3RhdGUubGluZSArPSAxO1xuICBzdGF0ZS5saW5lU3RhcnQgPSBzdGF0ZS5wb3NpdGlvbjtcbiAgc3RhdGUuZmlyc3RUYWJJbkxpbmUgPSAtMTtcbn1cblxuZnVuY3Rpb24gc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgYWxsb3dDb21tZW50cywgY2hlY2tJbmRlbnQpIHtcbiAgdmFyIGxpbmVCcmVha3MgPSAwLFxuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICB3aGlsZSAoaXNfV0hJVEVfU1BBQ0UoY2gpKSB7XG4gICAgICBpZiAoY2ggPT09IDB4MDkvKiBUYWIgKi8gJiYgc3RhdGUuZmlyc3RUYWJJbkxpbmUgPT09IC0xKSB7XG4gICAgICAgIHN0YXRlLmZpcnN0VGFiSW5MaW5lID0gc3RhdGUucG9zaXRpb247XG4gICAgICB9XG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgfVxuXG4gICAgaWYgKGFsbG93Q29tbWVudHMgJiYgY2ggPT09IDB4MjMvKiAjICovKSB7XG4gICAgICBkbyB7XG4gICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICAgIH0gd2hpbGUgKGNoICE9PSAweDBBLyogTEYgKi8gJiYgY2ggIT09IDB4MEQvKiBDUiAqLyAmJiBjaCAhPT0gMCk7XG4gICAgfVxuXG4gICAgaWYgKGlzX0VPTChjaCkpIHtcbiAgICAgIHJlYWRMaW5lQnJlYWsoc3RhdGUpO1xuXG4gICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuICAgICAgbGluZUJyZWFrcysrO1xuICAgICAgc3RhdGUubGluZUluZGVudCA9IDA7XG5cbiAgICAgIHdoaWxlIChjaCA9PT0gMHgyMC8qIFNwYWNlICovKSB7XG4gICAgICAgIHN0YXRlLmxpbmVJbmRlbnQrKztcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoY2hlY2tJbmRlbnQgIT09IC0xICYmIGxpbmVCcmVha3MgIT09IDAgJiYgc3RhdGUubGluZUluZGVudCA8IGNoZWNrSW5kZW50KSB7XG4gICAgdGhyb3dXYXJuaW5nKHN0YXRlLCAnZGVmaWNpZW50IGluZGVudGF0aW9uJyk7XG4gIH1cblxuICByZXR1cm4gbGluZUJyZWFrcztcbn1cblxuZnVuY3Rpb24gdGVzdERvY3VtZW50U2VwYXJhdG9yKHN0YXRlKSB7XG4gIHZhciBfcG9zaXRpb24gPSBzdGF0ZS5wb3NpdGlvbixcbiAgICAgIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChfcG9zaXRpb24pO1xuXG4gIC8vIENvbmRpdGlvbiBzdGF0ZS5wb3NpdGlvbiA9PT0gc3RhdGUubGluZVN0YXJ0IGlzIHRlc3RlZFxuICAvLyBpbiBwYXJlbnQgb24gZWFjaCBjYWxsLCBmb3IgZWZmaWNpZW5jeS4gTm8gbmVlZHMgdG8gdGVzdCBoZXJlIGFnYWluLlxuICBpZiAoKGNoID09PSAweDJELyogLSAqLyB8fCBjaCA9PT0gMHgyRS8qIC4gKi8pICYmXG4gICAgICBjaCA9PT0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChfcG9zaXRpb24gKyAxKSAmJlxuICAgICAgY2ggPT09IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoX3Bvc2l0aW9uICsgMikpIHtcblxuICAgIF9wb3NpdGlvbiArPSAzO1xuXG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KF9wb3NpdGlvbik7XG5cbiAgICBpZiAoY2ggPT09IDAgfHwgaXNfV1NfT1JfRU9MKGNoKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiB3cml0ZUZvbGRlZExpbmVzKHN0YXRlLCBjb3VudCkge1xuICBpZiAoY291bnQgPT09IDEpIHtcbiAgICBzdGF0ZS5yZXN1bHQgKz0gJyAnO1xuICB9IGVsc2UgaWYgKGNvdW50ID4gMSkge1xuICAgIHN0YXRlLnJlc3VsdCArPSBjb21tb24ucmVwZWF0KCdcXG4nLCBjb3VudCAtIDEpO1xuICB9XG59XG5cblxuZnVuY3Rpb24gcmVhZFBsYWluU2NhbGFyKHN0YXRlLCBub2RlSW5kZW50LCB3aXRoaW5GbG93Q29sbGVjdGlvbikge1xuICB2YXIgcHJlY2VkaW5nLFxuICAgICAgZm9sbG93aW5nLFxuICAgICAgY2FwdHVyZVN0YXJ0LFxuICAgICAgY2FwdHVyZUVuZCxcbiAgICAgIGhhc1BlbmRpbmdDb250ZW50LFxuICAgICAgX2xpbmUsXG4gICAgICBfbGluZVN0YXJ0LFxuICAgICAgX2xpbmVJbmRlbnQsXG4gICAgICBfa2luZCA9IHN0YXRlLmtpbmQsXG4gICAgICBfcmVzdWx0ID0gc3RhdGUucmVzdWx0LFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoaXNfV1NfT1JfRU9MKGNoKSAgICAgIHx8XG4gICAgICBpc19GTE9XX0lORElDQVRPUihjaCkgfHxcbiAgICAgIGNoID09PSAweDIzLyogIyAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4MjYvKiAmICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgyQS8qICogKi8gICAgfHxcbiAgICAgIGNoID09PSAweDIxLyogISAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4N0MvKiB8ICovICAgIHx8XG4gICAgICBjaCA9PT0gMHgzRS8qID4gKi8gICAgfHxcbiAgICAgIGNoID09PSAweDI3LyogJyAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4MjIvKiBcIiAqLyAgICB8fFxuICAgICAgY2ggPT09IDB4MjUvKiAlICovICAgIHx8XG4gICAgICBjaCA9PT0gMHg0MC8qIEAgKi8gICAgfHxcbiAgICAgIGNoID09PSAweDYwLyogYCAqLykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGlmIChjaCA9PT0gMHgzRi8qID8gKi8gfHwgY2ggPT09IDB4MkQvKiAtICovKSB7XG4gICAgZm9sbG93aW5nID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiArIDEpO1xuXG4gICAgaWYgKGlzX1dTX09SX0VPTChmb2xsb3dpbmcpIHx8XG4gICAgICAgIHdpdGhpbkZsb3dDb2xsZWN0aW9uICYmIGlzX0ZMT1dfSU5ESUNBVE9SKGZvbGxvd2luZykpIHtcbiAgICAgIHJldHVybiBmYWxzZTtcbiAgICB9XG4gIH1cblxuICBzdGF0ZS5raW5kID0gJ3NjYWxhcic7XG4gIHN0YXRlLnJlc3VsdCA9ICcnO1xuICBjYXB0dXJlU3RhcnQgPSBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG4gIGhhc1BlbmRpbmdDb250ZW50ID0gZmFsc2U7XG5cbiAgd2hpbGUgKGNoICE9PSAwKSB7XG4gICAgaWYgKGNoID09PSAweDNBLyogOiAqLykge1xuICAgICAgZm9sbG93aW5nID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiArIDEpO1xuXG4gICAgICBpZiAoaXNfV1NfT1JfRU9MKGZvbGxvd2luZykgfHxcbiAgICAgICAgICB3aXRoaW5GbG93Q29sbGVjdGlvbiAmJiBpc19GTE9XX0lORElDQVRPUihmb2xsb3dpbmcpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIGlmIChjaCA9PT0gMHgyMy8qICMgKi8pIHtcbiAgICAgIHByZWNlZGluZyA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gLSAxKTtcblxuICAgICAgaWYgKGlzX1dTX09SX0VPTChwcmVjZWRpbmcpKSB7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIGlmICgoc3RhdGUucG9zaXRpb24gPT09IHN0YXRlLmxpbmVTdGFydCAmJiB0ZXN0RG9jdW1lbnRTZXBhcmF0b3Ioc3RhdGUpKSB8fFxuICAgICAgICAgICAgICAgd2l0aGluRmxvd0NvbGxlY3Rpb24gJiYgaXNfRkxPV19JTkRJQ0FUT1IoY2gpKSB7XG4gICAgICBicmVhaztcblxuICAgIH0gZWxzZSBpZiAoaXNfRU9MKGNoKSkge1xuICAgICAgX2xpbmUgPSBzdGF0ZS5saW5lO1xuICAgICAgX2xpbmVTdGFydCA9IHN0YXRlLmxpbmVTdGFydDtcbiAgICAgIF9saW5lSW5kZW50ID0gc3RhdGUubGluZUluZGVudDtcbiAgICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIGZhbHNlLCAtMSk7XG5cbiAgICAgIGlmIChzdGF0ZS5saW5lSW5kZW50ID49IG5vZGVJbmRlbnQpIHtcbiAgICAgICAgaGFzUGVuZGluZ0NvbnRlbnQgPSB0cnVlO1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLnBvc2l0aW9uID0gY2FwdHVyZUVuZDtcbiAgICAgICAgc3RhdGUubGluZSA9IF9saW5lO1xuICAgICAgICBzdGF0ZS5saW5lU3RhcnQgPSBfbGluZVN0YXJ0O1xuICAgICAgICBzdGF0ZS5saW5lSW5kZW50ID0gX2xpbmVJbmRlbnQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChoYXNQZW5kaW5nQ29udGVudCkge1xuICAgICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgY2FwdHVyZUVuZCwgZmFsc2UpO1xuICAgICAgd3JpdGVGb2xkZWRMaW5lcyhzdGF0ZSwgc3RhdGUubGluZSAtIF9saW5lKTtcbiAgICAgIGNhcHR1cmVTdGFydCA9IGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcbiAgICAgIGhhc1BlbmRpbmdDb250ZW50ID0gZmFsc2U7XG4gICAgfVxuXG4gICAgaWYgKCFpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICAgIGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbiArIDE7XG4gICAgfVxuXG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICB9XG5cbiAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgY2FwdHVyZUVuZCwgZmFsc2UpO1xuXG4gIGlmIChzdGF0ZS5yZXN1bHQpIHtcbiAgICByZXR1cm4gdHJ1ZTtcbiAgfVxuXG4gIHN0YXRlLmtpbmQgPSBfa2luZDtcbiAgc3RhdGUucmVzdWx0ID0gX3Jlc3VsdDtcbiAgcmV0dXJuIGZhbHNlO1xufVxuXG5mdW5jdGlvbiByZWFkU2luZ2xlUXVvdGVkU2NhbGFyKHN0YXRlLCBub2RlSW5kZW50KSB7XG4gIHZhciBjaCxcbiAgICAgIGNhcHR1cmVTdGFydCwgY2FwdHVyZUVuZDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCAhPT0gMHgyNy8qICcgKi8pIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBzdGF0ZS5raW5kID0gJ3NjYWxhcic7XG4gIHN0YXRlLnJlc3VsdCA9ICcnO1xuICBzdGF0ZS5wb3NpdGlvbisrO1xuICBjYXB0dXJlU3RhcnQgPSBjYXB0dXJlRW5kID0gc3RhdGUucG9zaXRpb247XG5cbiAgd2hpbGUgKChjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pKSAhPT0gMCkge1xuICAgIGlmIChjaCA9PT0gMHgyNy8qICcgKi8pIHtcbiAgICAgIGNhcHR1cmVTZWdtZW50KHN0YXRlLCBjYXB0dXJlU3RhcnQsIHN0YXRlLnBvc2l0aW9uLCB0cnVlKTtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICAgICAgaWYgKGNoID09PSAweDI3LyogJyAqLykge1xuICAgICAgICBjYXB0dXJlU3RhcnQgPSBzdGF0ZS5wb3NpdGlvbjtcbiAgICAgICAgc3RhdGUucG9zaXRpb24rKztcbiAgICAgICAgY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICB9XG5cbiAgICB9IGVsc2UgaWYgKGlzX0VPTChjaCkpIHtcbiAgICAgIGNhcHR1cmVTZWdtZW50KHN0YXRlLCBjYXB0dXJlU3RhcnQsIGNhcHR1cmVFbmQsIHRydWUpO1xuICAgICAgd3JpdGVGb2xkZWRMaW5lcyhzdGF0ZSwgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgZmFsc2UsIG5vZGVJbmRlbnQpKTtcbiAgICAgIGNhcHR1cmVTdGFydCA9IGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcblxuICAgIH0gZWxzZSBpZiAoc3RhdGUucG9zaXRpb24gPT09IHN0YXRlLmxpbmVTdGFydCAmJiB0ZXN0RG9jdW1lbnRTZXBhcmF0b3Ioc3RhdGUpKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5leHBlY3RlZCBlbmQgb2YgdGhlIGRvY3VtZW50IHdpdGhpbiBhIHNpbmdsZSBxdW90ZWQgc2NhbGFyJyk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgc3RhdGUucG9zaXRpb24rKztcbiAgICAgIGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcbiAgICB9XG4gIH1cblxuICB0aHJvd0Vycm9yKHN0YXRlLCAndW5leHBlY3RlZCBlbmQgb2YgdGhlIHN0cmVhbSB3aXRoaW4gYSBzaW5nbGUgcXVvdGVkIHNjYWxhcicpO1xufVxuXG5mdW5jdGlvbiByZWFkRG91YmxlUXVvdGVkU2NhbGFyKHN0YXRlLCBub2RlSW5kZW50KSB7XG4gIHZhciBjYXB0dXJlU3RhcnQsXG4gICAgICBjYXB0dXJlRW5kLFxuICAgICAgaGV4TGVuZ3RoLFxuICAgICAgaGV4UmVzdWx0LFxuICAgICAgdG1wLFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggIT09IDB4MjIvKiBcIiAqLykge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0YXRlLmtpbmQgPSAnc2NhbGFyJztcbiAgc3RhdGUucmVzdWx0ID0gJyc7XG4gIHN0YXRlLnBvc2l0aW9uKys7XG4gIGNhcHR1cmVTdGFydCA9IGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcblxuICB3aGlsZSAoKGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbikpICE9PSAwKSB7XG4gICAgaWYgKGNoID09PSAweDIyLyogXCIgKi8pIHtcbiAgICAgIGNhcHR1cmVTZWdtZW50KHN0YXRlLCBjYXB0dXJlU3RhcnQsIHN0YXRlLnBvc2l0aW9uLCB0cnVlKTtcbiAgICAgIHN0YXRlLnBvc2l0aW9uKys7XG4gICAgICByZXR1cm4gdHJ1ZTtcblxuICAgIH0gZWxzZSBpZiAoY2ggPT09IDB4NUMvKiBcXCAqLykge1xuICAgICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgc3RhdGUucG9zaXRpb24sIHRydWUpO1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gICAgICBpZiAoaXNfRU9MKGNoKSkge1xuICAgICAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCBmYWxzZSwgbm9kZUluZGVudCk7XG5cbiAgICAgICAgLy8gVE9ETzogcmV3b3JrIHRvIGlubGluZSBmbiB3aXRoIG5vIHR5cGUgY2FzdD9cbiAgICAgIH0gZWxzZSBpZiAoY2ggPCAyNTYgJiYgc2ltcGxlRXNjYXBlQ2hlY2tbY2hdKSB7XG4gICAgICAgIHN0YXRlLnJlc3VsdCArPSBzaW1wbGVFc2NhcGVNYXBbY2hdO1xuICAgICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuXG4gICAgICB9IGVsc2UgaWYgKCh0bXAgPSBlc2NhcGVkSGV4TGVuKGNoKSkgPiAwKSB7XG4gICAgICAgIGhleExlbmd0aCA9IHRtcDtcbiAgICAgICAgaGV4UmVzdWx0ID0gMDtcblxuICAgICAgICBmb3IgKDsgaGV4TGVuZ3RoID4gMDsgaGV4TGVuZ3RoLS0pIHtcbiAgICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICAgICAgICBpZiAoKHRtcCA9IGZyb21IZXhDb2RlKGNoKSkgPj0gMCkge1xuICAgICAgICAgICAgaGV4UmVzdWx0ID0gKGhleFJlc3VsdCA8PCA0KSArIHRtcDtcblxuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZXhwZWN0ZWQgaGV4YWRlY2ltYWwgY2hhcmFjdGVyJyk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgc3RhdGUucmVzdWx0ICs9IGNoYXJGcm9tQ29kZXBvaW50KGhleFJlc3VsdCk7XG5cbiAgICAgICAgc3RhdGUucG9zaXRpb24rKztcblxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3Vua25vd24gZXNjYXBlIHNlcXVlbmNlJyk7XG4gICAgICB9XG5cbiAgICAgIGNhcHR1cmVTdGFydCA9IGNhcHR1cmVFbmQgPSBzdGF0ZS5wb3NpdGlvbjtcblxuICAgIH0gZWxzZSBpZiAoaXNfRU9MKGNoKSkge1xuICAgICAgY2FwdHVyZVNlZ21lbnQoc3RhdGUsIGNhcHR1cmVTdGFydCwgY2FwdHVyZUVuZCwgdHJ1ZSk7XG4gICAgICB3cml0ZUZvbGRlZExpbmVzKHN0YXRlLCBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCBmYWxzZSwgbm9kZUluZGVudCkpO1xuICAgICAgY2FwdHVyZVN0YXJ0ID0gY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuXG4gICAgfSBlbHNlIGlmIChzdGF0ZS5wb3NpdGlvbiA9PT0gc3RhdGUubGluZVN0YXJ0ICYmIHRlc3REb2N1bWVudFNlcGFyYXRvcihzdGF0ZSkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd1bmV4cGVjdGVkIGVuZCBvZiB0aGUgZG9jdW1lbnQgd2l0aGluIGEgZG91YmxlIHF1b3RlZCBzY2FsYXInKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgICAgY2FwdHVyZUVuZCA9IHN0YXRlLnBvc2l0aW9uO1xuICAgIH1cbiAgfVxuXG4gIHRocm93RXJyb3Ioc3RhdGUsICd1bmV4cGVjdGVkIGVuZCBvZiB0aGUgc3RyZWFtIHdpdGhpbiBhIGRvdWJsZSBxdW90ZWQgc2NhbGFyJyk7XG59XG5cbmZ1bmN0aW9uIHJlYWRGbG93Q29sbGVjdGlvbihzdGF0ZSwgbm9kZUluZGVudCkge1xuICB2YXIgcmVhZE5leHQgPSB0cnVlLFxuICAgICAgX2xpbmUsXG4gICAgICBfbGluZVN0YXJ0LFxuICAgICAgX3BvcyxcbiAgICAgIF90YWcgICAgID0gc3RhdGUudGFnLFxuICAgICAgX3Jlc3VsdCxcbiAgICAgIF9hbmNob3IgID0gc3RhdGUuYW5jaG9yLFxuICAgICAgZm9sbG93aW5nLFxuICAgICAgdGVybWluYXRvcixcbiAgICAgIGlzUGFpcixcbiAgICAgIGlzRXhwbGljaXRQYWlyLFxuICAgICAgaXNNYXBwaW5nLFxuICAgICAgb3ZlcnJpZGFibGVLZXlzID0gT2JqZWN0LmNyZWF0ZShudWxsKSxcbiAgICAgIGtleU5vZGUsXG4gICAgICBrZXlUYWcsXG4gICAgICB2YWx1ZU5vZGUsXG4gICAgICBjaDtcblxuICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gIGlmIChjaCA9PT0gMHg1Qi8qIFsgKi8pIHtcbiAgICB0ZXJtaW5hdG9yID0gMHg1RDsvKiBdICovXG4gICAgaXNNYXBwaW5nID0gZmFsc2U7XG4gICAgX3Jlc3VsdCA9IFtdO1xuICB9IGVsc2UgaWYgKGNoID09PSAweDdCLyogeyAqLykge1xuICAgIHRlcm1pbmF0b3IgPSAweDdEOy8qIH0gKi9cbiAgICBpc01hcHBpbmcgPSB0cnVlO1xuICAgIF9yZXN1bHQgPSB7fTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gZmFsc2U7XG4gIH1cblxuICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgc3RhdGUuYW5jaG9yTWFwW3N0YXRlLmFuY2hvcl0gPSBfcmVzdWx0O1xuICB9XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gIHdoaWxlIChjaCAhPT0gMCkge1xuICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIG5vZGVJbmRlbnQpO1xuXG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICAgIGlmIChjaCA9PT0gdGVybWluYXRvcikge1xuICAgICAgc3RhdGUucG9zaXRpb24rKztcbiAgICAgIHN0YXRlLnRhZyA9IF90YWc7XG4gICAgICBzdGF0ZS5hbmNob3IgPSBfYW5jaG9yO1xuICAgICAgc3RhdGUua2luZCA9IGlzTWFwcGluZyA/ICdtYXBwaW5nJyA6ICdzZXF1ZW5jZSc7XG4gICAgICBzdGF0ZS5yZXN1bHQgPSBfcmVzdWx0O1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfSBlbHNlIGlmICghcmVhZE5leHQpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdtaXNzZWQgY29tbWEgYmV0d2VlbiBmbG93IGNvbGxlY3Rpb24gZW50cmllcycpO1xuICAgIH0gZWxzZSBpZiAoY2ggPT09IDB4MkMvKiAsICovKSB7XG4gICAgICAvLyBcImZsb3cgY29sbGVjdGlvbiBlbnRyaWVzIGNhbiBuZXZlciBiZSBjb21wbGV0ZWx5IGVtcHR5XCIsIGFzIHBlciBZQU1MIDEuMiwgc2VjdGlvbiA3LjRcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsIFwiZXhwZWN0ZWQgdGhlIG5vZGUgY29udGVudCwgYnV0IGZvdW5kICcsJ1wiKTtcbiAgICB9XG5cbiAgICBrZXlUYWcgPSBrZXlOb2RlID0gdmFsdWVOb2RlID0gbnVsbDtcbiAgICBpc1BhaXIgPSBpc0V4cGxpY2l0UGFpciA9IGZhbHNlO1xuXG4gICAgaWYgKGNoID09PSAweDNGLyogPyAqLykge1xuICAgICAgZm9sbG93aW5nID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiArIDEpO1xuXG4gICAgICBpZiAoaXNfV1NfT1JfRU9MKGZvbGxvd2luZykpIHtcbiAgICAgICAgaXNQYWlyID0gaXNFeHBsaWNpdFBhaXIgPSB0cnVlO1xuICAgICAgICBzdGF0ZS5wb3NpdGlvbisrO1xuICAgICAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCBub2RlSW5kZW50KTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBfbGluZSA9IHN0YXRlLmxpbmU7IC8vIFNhdmUgdGhlIGN1cnJlbnQgbGluZS5cbiAgICBfbGluZVN0YXJ0ID0gc3RhdGUubGluZVN0YXJ0O1xuICAgIF9wb3MgPSBzdGF0ZS5wb3NpdGlvbjtcbiAgICBjb21wb3NlTm9kZShzdGF0ZSwgbm9kZUluZGVudCwgQ09OVEVYVF9GTE9XX0lOLCBmYWxzZSwgdHJ1ZSk7XG4gICAga2V5VGFnID0gc3RhdGUudGFnO1xuICAgIGtleU5vZGUgPSBzdGF0ZS5yZXN1bHQ7XG4gICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgbm9kZUluZGVudCk7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgaWYgKChpc0V4cGxpY2l0UGFpciB8fCBzdGF0ZS5saW5lID09PSBfbGluZSkgJiYgY2ggPT09IDB4M0EvKiA6ICovKSB7XG4gICAgICBpc1BhaXIgPSB0cnVlO1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgbm9kZUluZGVudCk7XG4gICAgICBjb21wb3NlTm9kZShzdGF0ZSwgbm9kZUluZGVudCwgQ09OVEVYVF9GTE9XX0lOLCBmYWxzZSwgdHJ1ZSk7XG4gICAgICB2YWx1ZU5vZGUgPSBzdGF0ZS5yZXN1bHQ7XG4gICAgfVxuXG4gICAgaWYgKGlzTWFwcGluZykge1xuICAgICAgc3RvcmVNYXBwaW5nUGFpcihzdGF0ZSwgX3Jlc3VsdCwgb3ZlcnJpZGFibGVLZXlzLCBrZXlUYWcsIGtleU5vZGUsIHZhbHVlTm9kZSwgX2xpbmUsIF9saW5lU3RhcnQsIF9wb3MpO1xuICAgIH0gZWxzZSBpZiAoaXNQYWlyKSB7XG4gICAgICBfcmVzdWx0LnB1c2goc3RvcmVNYXBwaW5nUGFpcihzdGF0ZSwgbnVsbCwgb3ZlcnJpZGFibGVLZXlzLCBrZXlUYWcsIGtleU5vZGUsIHZhbHVlTm9kZSwgX2xpbmUsIF9saW5lU3RhcnQsIF9wb3MpKTtcbiAgICB9IGVsc2Uge1xuICAgICAgX3Jlc3VsdC5wdXNoKGtleU5vZGUpO1xuICAgIH1cblxuICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIG5vZGVJbmRlbnQpO1xuXG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICAgIGlmIChjaCA9PT0gMHgyQy8qICwgKi8pIHtcbiAgICAgIHJlYWROZXh0ID0gdHJ1ZTtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVhZE5leHQgPSBmYWxzZTtcbiAgICB9XG4gIH1cblxuICB0aHJvd0Vycm9yKHN0YXRlLCAndW5leHBlY3RlZCBlbmQgb2YgdGhlIHN0cmVhbSB3aXRoaW4gYSBmbG93IGNvbGxlY3Rpb24nKTtcbn1cblxuZnVuY3Rpb24gcmVhZEJsb2NrU2NhbGFyKHN0YXRlLCBub2RlSW5kZW50KSB7XG4gIHZhciBjYXB0dXJlU3RhcnQsXG4gICAgICBmb2xkaW5nLFxuICAgICAgY2hvbXBpbmcgICAgICAgPSBDSE9NUElOR19DTElQLFxuICAgICAgZGlkUmVhZENvbnRlbnQgPSBmYWxzZSxcbiAgICAgIGRldGVjdGVkSW5kZW50ID0gZmFsc2UsXG4gICAgICB0ZXh0SW5kZW50ICAgICA9IG5vZGVJbmRlbnQsXG4gICAgICBlbXB0eUxpbmVzICAgICA9IDAsXG4gICAgICBhdE1vcmVJbmRlbnRlZCA9IGZhbHNlLFxuICAgICAgdG1wLFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggPT09IDB4N0MvKiB8ICovKSB7XG4gICAgZm9sZGluZyA9IGZhbHNlO1xuICB9IGVsc2UgaWYgKGNoID09PSAweDNFLyogPiAqLykge1xuICAgIGZvbGRpbmcgPSB0cnVlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIHN0YXRlLmtpbmQgPSAnc2NhbGFyJztcbiAgc3RhdGUucmVzdWx0ID0gJyc7XG5cbiAgd2hpbGUgKGNoICE9PSAwKSB7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gICAgaWYgKGNoID09PSAweDJCLyogKyAqLyB8fCBjaCA9PT0gMHgyRC8qIC0gKi8pIHtcbiAgICAgIGlmIChDSE9NUElOR19DTElQID09PSBjaG9tcGluZykge1xuICAgICAgICBjaG9tcGluZyA9IChjaCA9PT0gMHgyQi8qICsgKi8pID8gQ0hPTVBJTkdfS0VFUCA6IENIT01QSU5HX1NUUklQO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3JlcGVhdCBvZiBhIGNob21waW5nIG1vZGUgaWRlbnRpZmllcicpO1xuICAgICAgfVxuXG4gICAgfSBlbHNlIGlmICgodG1wID0gZnJvbURlY2ltYWxDb2RlKGNoKSkgPj0gMCkge1xuICAgICAgaWYgKHRtcCA9PT0gMCkge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYmFkIGV4cGxpY2l0IGluZGVudGF0aW9uIHdpZHRoIG9mIGEgYmxvY2sgc2NhbGFyOyBpdCBjYW5ub3QgYmUgbGVzcyB0aGFuIG9uZScpO1xuICAgICAgfSBlbHNlIGlmICghZGV0ZWN0ZWRJbmRlbnQpIHtcbiAgICAgICAgdGV4dEluZGVudCA9IG5vZGVJbmRlbnQgKyB0bXAgLSAxO1xuICAgICAgICBkZXRlY3RlZEluZGVudCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAncmVwZWF0IG9mIGFuIGluZGVudGF0aW9uIHdpZHRoIGlkZW50aWZpZXInKTtcbiAgICAgIH1cblxuICAgIH0gZWxzZSB7XG4gICAgICBicmVhaztcbiAgICB9XG4gIH1cblxuICBpZiAoaXNfV0hJVEVfU1BBQ0UoY2gpKSB7XG4gICAgZG8geyBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7IH1cbiAgICB3aGlsZSAoaXNfV0hJVEVfU1BBQ0UoY2gpKTtcblxuICAgIGlmIChjaCA9PT0gMHgyMy8qICMgKi8pIHtcbiAgICAgIGRvIHsgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pOyB9XG4gICAgICB3aGlsZSAoIWlzX0VPTChjaCkgJiYgKGNoICE9PSAwKSk7XG4gICAgfVxuICB9XG5cbiAgd2hpbGUgKGNoICE9PSAwKSB7XG4gICAgcmVhZExpbmVCcmVhayhzdGF0ZSk7XG4gICAgc3RhdGUubGluZUluZGVudCA9IDA7XG5cbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgd2hpbGUgKCghZGV0ZWN0ZWRJbmRlbnQgfHwgc3RhdGUubGluZUluZGVudCA8IHRleHRJbmRlbnQpICYmXG4gICAgICAgICAgIChjaCA9PT0gMHgyMC8qIFNwYWNlICovKSkge1xuICAgICAgc3RhdGUubGluZUluZGVudCsrO1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIH1cblxuICAgIGlmICghZGV0ZWN0ZWRJbmRlbnQgJiYgc3RhdGUubGluZUluZGVudCA+IHRleHRJbmRlbnQpIHtcbiAgICAgIHRleHRJbmRlbnQgPSBzdGF0ZS5saW5lSW5kZW50O1xuICAgIH1cblxuICAgIGlmIChpc19FT0woY2gpKSB7XG4gICAgICBlbXB0eUxpbmVzKys7XG4gICAgICBjb250aW51ZTtcbiAgICB9XG5cbiAgICAvLyBFbmQgb2YgdGhlIHNjYWxhci5cbiAgICBpZiAoc3RhdGUubGluZUluZGVudCA8IHRleHRJbmRlbnQpIHtcblxuICAgICAgLy8gUGVyZm9ybSB0aGUgY2hvbXBpbmcuXG4gICAgICBpZiAoY2hvbXBpbmcgPT09IENIT01QSU5HX0tFRVApIHtcbiAgICAgICAgc3RhdGUucmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJ1xcbicsIGRpZFJlYWRDb250ZW50ID8gMSArIGVtcHR5TGluZXMgOiBlbXB0eUxpbmVzKTtcbiAgICAgIH0gZWxzZSBpZiAoY2hvbXBpbmcgPT09IENIT01QSU5HX0NMSVApIHtcbiAgICAgICAgaWYgKGRpZFJlYWRDb250ZW50KSB7IC8vIGkuZS4gb25seSBpZiB0aGUgc2NhbGFyIGlzIG5vdCBlbXB0eS5cbiAgICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gJ1xcbic7XG4gICAgICAgIH1cbiAgICAgIH1cblxuICAgICAgLy8gQnJlYWsgdGhpcyBgd2hpbGVgIGN5Y2xlIGFuZCBnbyB0byB0aGUgZnVuY2l0b24ncyBlcGlsb2d1ZS5cbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIC8vIEZvbGRlZCBzdHlsZTogdXNlIGZhbmN5IHJ1bGVzIHRvIGhhbmRsZSBsaW5lIGJyZWFrcy5cbiAgICBpZiAoZm9sZGluZykge1xuXG4gICAgICAvLyBMaW5lcyBzdGFydGluZyB3aXRoIHdoaXRlIHNwYWNlIGNoYXJhY3RlcnMgKG1vcmUtaW5kZW50ZWQgbGluZXMpIGFyZSBub3QgZm9sZGVkLlxuICAgICAgaWYgKGlzX1dISVRFX1NQQUNFKGNoKSkge1xuICAgICAgICBhdE1vcmVJbmRlbnRlZCA9IHRydWU7XG4gICAgICAgIC8vIGV4Y2VwdCBmb3IgdGhlIGZpcnN0IGNvbnRlbnQgbGluZSAoY2YuIEV4YW1wbGUgOC4xKVxuICAgICAgICBzdGF0ZS5yZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnXFxuJywgZGlkUmVhZENvbnRlbnQgPyAxICsgZW1wdHlMaW5lcyA6IGVtcHR5TGluZXMpO1xuXG4gICAgICAvLyBFbmQgb2YgbW9yZS1pbmRlbnRlZCBibG9jay5cbiAgICAgIH0gZWxzZSBpZiAoYXRNb3JlSW5kZW50ZWQpIHtcbiAgICAgICAgYXRNb3JlSW5kZW50ZWQgPSBmYWxzZTtcbiAgICAgICAgc3RhdGUucmVzdWx0ICs9IGNvbW1vbi5yZXBlYXQoJ1xcbicsIGVtcHR5TGluZXMgKyAxKTtcblxuICAgICAgLy8gSnVzdCBvbmUgbGluZSBicmVhayAtIHBlcmNlaXZlIGFzIHRoZSBzYW1lIGxpbmUuXG4gICAgICB9IGVsc2UgaWYgKGVtcHR5TGluZXMgPT09IDApIHtcbiAgICAgICAgaWYgKGRpZFJlYWRDb250ZW50KSB7IC8vIGkuZS4gb25seSBpZiB3ZSBoYXZlIGFscmVhZHkgcmVhZCBzb21lIHNjYWxhciBjb250ZW50LlxuICAgICAgICAgIHN0YXRlLnJlc3VsdCArPSAnICc7XG4gICAgICAgIH1cblxuICAgICAgLy8gU2V2ZXJhbCBsaW5lIGJyZWFrcyAtIHBlcmNlaXZlIGFzIGRpZmZlcmVudCBsaW5lcy5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLnJlc3VsdCArPSBjb21tb24ucmVwZWF0KCdcXG4nLCBlbXB0eUxpbmVzKTtcbiAgICAgIH1cblxuICAgIC8vIExpdGVyYWwgc3R5bGU6IGp1c3QgYWRkIGV4YWN0IG51bWJlciBvZiBsaW5lIGJyZWFrcyBiZXR3ZWVuIGNvbnRlbnQgbGluZXMuXG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIEtlZXAgYWxsIGxpbmUgYnJlYWtzIGV4Y2VwdCB0aGUgaGVhZGVyIGxpbmUgYnJlYWsuXG4gICAgICBzdGF0ZS5yZXN1bHQgKz0gY29tbW9uLnJlcGVhdCgnXFxuJywgZGlkUmVhZENvbnRlbnQgPyAxICsgZW1wdHlMaW5lcyA6IGVtcHR5TGluZXMpO1xuICAgIH1cblxuICAgIGRpZFJlYWRDb250ZW50ID0gdHJ1ZTtcbiAgICBkZXRlY3RlZEluZGVudCA9IHRydWU7XG4gICAgZW1wdHlMaW5lcyA9IDA7XG4gICAgY2FwdHVyZVN0YXJ0ID0gc3RhdGUucG9zaXRpb247XG5cbiAgICB3aGlsZSAoIWlzX0VPTChjaCkgJiYgKGNoICE9PSAwKSkge1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIH1cblxuICAgIGNhcHR1cmVTZWdtZW50KHN0YXRlLCBjYXB0dXJlU3RhcnQsIHN0YXRlLnBvc2l0aW9uLCBmYWxzZSk7XG4gIH1cblxuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gcmVhZEJsb2NrU2VxdWVuY2Uoc3RhdGUsIG5vZGVJbmRlbnQpIHtcbiAgdmFyIF9saW5lLFxuICAgICAgX3RhZyAgICAgID0gc3RhdGUudGFnLFxuICAgICAgX2FuY2hvciAgID0gc3RhdGUuYW5jaG9yLFxuICAgICAgX3Jlc3VsdCAgID0gW10sXG4gICAgICBmb2xsb3dpbmcsXG4gICAgICBkZXRlY3RlZCAgPSBmYWxzZSxcbiAgICAgIGNoO1xuXG4gIC8vIHRoZXJlIGlzIGEgbGVhZGluZyB0YWIgYmVmb3JlIHRoaXMgdG9rZW4sIHNvIGl0IGNhbid0IGJlIGEgYmxvY2sgc2VxdWVuY2UvbWFwcGluZztcbiAgLy8gaXQgY2FuIHN0aWxsIGJlIGZsb3cgc2VxdWVuY2UvbWFwcGluZyBvciBhIHNjYWxhclxuICBpZiAoc3RhdGUuZmlyc3RUYWJJbkxpbmUgIT09IC0xKSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gX3Jlc3VsdDtcbiAgfVxuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgd2hpbGUgKGNoICE9PSAwKSB7XG4gICAgaWYgKHN0YXRlLmZpcnN0VGFiSW5MaW5lICE9PSAtMSkge1xuICAgICAgc3RhdGUucG9zaXRpb24gPSBzdGF0ZS5maXJzdFRhYkluTGluZTtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICd0YWIgY2hhcmFjdGVycyBtdXN0IG5vdCBiZSB1c2VkIGluIGluZGVudGF0aW9uJyk7XG4gICAgfVxuXG4gICAgaWYgKGNoICE9PSAweDJELyogLSAqLykge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgZm9sbG93aW5nID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbiArIDEpO1xuXG4gICAgaWYgKCFpc19XU19PUl9FT0woZm9sbG93aW5nKSkge1xuICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgZGV0ZWN0ZWQgPSB0cnVlO1xuICAgIHN0YXRlLnBvc2l0aW9uKys7XG5cbiAgICBpZiAoc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpKSB7XG4gICAgICBpZiAoc3RhdGUubGluZUluZGVudCA8PSBub2RlSW5kZW50KSB7XG4gICAgICAgIF9yZXN1bHQucHVzaChudWxsKTtcbiAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG4gICAgfVxuXG4gICAgX2xpbmUgPSBzdGF0ZS5saW5lO1xuICAgIGNvbXBvc2VOb2RlKHN0YXRlLCBub2RlSW5kZW50LCBDT05URVhUX0JMT0NLX0lOLCBmYWxzZSwgdHJ1ZSk7XG4gICAgX3Jlc3VsdC5wdXNoKHN0YXRlLnJlc3VsdCk7XG4gICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpO1xuXG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICAgIGlmICgoc3RhdGUubGluZSA9PT0gX2xpbmUgfHwgc3RhdGUubGluZUluZGVudCA+IG5vZGVJbmRlbnQpICYmIChjaCAhPT0gMCkpIHtcbiAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdiYWQgaW5kZW50YXRpb24gb2YgYSBzZXF1ZW5jZSBlbnRyeScpO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUubGluZUluZGVudCA8IG5vZGVJbmRlbnQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIGlmIChkZXRlY3RlZCkge1xuICAgIHN0YXRlLnRhZyA9IF90YWc7XG4gICAgc3RhdGUuYW5jaG9yID0gX2FuY2hvcjtcbiAgICBzdGF0ZS5raW5kID0gJ3NlcXVlbmNlJztcbiAgICBzdGF0ZS5yZXN1bHQgPSBfcmVzdWx0O1xuICAgIHJldHVybiB0cnVlO1xuICB9XG4gIHJldHVybiBmYWxzZTtcbn1cblxuZnVuY3Rpb24gcmVhZEJsb2NrTWFwcGluZyhzdGF0ZSwgbm9kZUluZGVudCwgZmxvd0luZGVudCkge1xuICB2YXIgZm9sbG93aW5nLFxuICAgICAgYWxsb3dDb21wYWN0LFxuICAgICAgX2xpbmUsXG4gICAgICBfa2V5TGluZSxcbiAgICAgIF9rZXlMaW5lU3RhcnQsXG4gICAgICBfa2V5UG9zLFxuICAgICAgX3RhZyAgICAgICAgICA9IHN0YXRlLnRhZyxcbiAgICAgIF9hbmNob3IgICAgICAgPSBzdGF0ZS5hbmNob3IsXG4gICAgICBfcmVzdWx0ICAgICAgID0ge30sXG4gICAgICBvdmVycmlkYWJsZUtleXMgPSBPYmplY3QuY3JlYXRlKG51bGwpLFxuICAgICAga2V5VGFnICAgICAgICA9IG51bGwsXG4gICAgICBrZXlOb2RlICAgICAgID0gbnVsbCxcbiAgICAgIHZhbHVlTm9kZSAgICAgPSBudWxsLFxuICAgICAgYXRFeHBsaWNpdEtleSA9IGZhbHNlLFxuICAgICAgZGV0ZWN0ZWQgICAgICA9IGZhbHNlLFxuICAgICAgY2g7XG5cbiAgLy8gdGhlcmUgaXMgYSBsZWFkaW5nIHRhYiBiZWZvcmUgdGhpcyB0b2tlbiwgc28gaXQgY2FuJ3QgYmUgYSBibG9jayBzZXF1ZW5jZS9tYXBwaW5nO1xuICAvLyBpdCBjYW4gc3RpbGwgYmUgZmxvdyBzZXF1ZW5jZS9tYXBwaW5nIG9yIGEgc2NhbGFyXG4gIGlmIChzdGF0ZS5maXJzdFRhYkluTGluZSAhPT0gLTEpIHJldHVybiBmYWxzZTtcblxuICBpZiAoc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgc3RhdGUuYW5jaG9yTWFwW3N0YXRlLmFuY2hvcl0gPSBfcmVzdWx0O1xuICB9XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICB3aGlsZSAoY2ggIT09IDApIHtcbiAgICBpZiAoIWF0RXhwbGljaXRLZXkgJiYgc3RhdGUuZmlyc3RUYWJJbkxpbmUgIT09IC0xKSB7XG4gICAgICBzdGF0ZS5wb3NpdGlvbiA9IHN0YXRlLmZpcnN0VGFiSW5MaW5lO1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3RhYiBjaGFyYWN0ZXJzIG11c3Qgbm90IGJlIHVzZWQgaW4gaW5kZW50YXRpb24nKTtcbiAgICB9XG5cbiAgICBmb2xsb3dpbmcgPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uICsgMSk7XG4gICAgX2xpbmUgPSBzdGF0ZS5saW5lOyAvLyBTYXZlIHRoZSBjdXJyZW50IGxpbmUuXG5cbiAgICAvL1xuICAgIC8vIEV4cGxpY2l0IG5vdGF0aW9uIGNhc2UuIFRoZXJlIGFyZSB0d28gc2VwYXJhdGUgYmxvY2tzOlxuICAgIC8vIGZpcnN0IGZvciB0aGUga2V5IChkZW5vdGVkIGJ5IFwiP1wiKSBhbmQgc2Vjb25kIGZvciB0aGUgdmFsdWUgKGRlbm90ZWQgYnkgXCI6XCIpXG4gICAgLy9cbiAgICBpZiAoKGNoID09PSAweDNGLyogPyAqLyB8fCBjaCA9PT0gMHgzQS8qIDogKi8pICYmIGlzX1dTX09SX0VPTChmb2xsb3dpbmcpKSB7XG5cbiAgICAgIGlmIChjaCA9PT0gMHgzRi8qID8gKi8pIHtcbiAgICAgICAgaWYgKGF0RXhwbGljaXRLZXkpIHtcbiAgICAgICAgICBzdG9yZU1hcHBpbmdQYWlyKHN0YXRlLCBfcmVzdWx0LCBvdmVycmlkYWJsZUtleXMsIGtleVRhZywga2V5Tm9kZSwgbnVsbCwgX2tleUxpbmUsIF9rZXlMaW5lU3RhcnQsIF9rZXlQb3MpO1xuICAgICAgICAgIGtleVRhZyA9IGtleU5vZGUgPSB2YWx1ZU5vZGUgPSBudWxsO1xuICAgICAgICB9XG5cbiAgICAgICAgZGV0ZWN0ZWQgPSB0cnVlO1xuICAgICAgICBhdEV4cGxpY2l0S2V5ID0gdHJ1ZTtcbiAgICAgICAgYWxsb3dDb21wYWN0ID0gdHJ1ZTtcblxuICAgICAgfSBlbHNlIGlmIChhdEV4cGxpY2l0S2V5KSB7XG4gICAgICAgIC8vIGkuZS4gMHgzQS8qIDogKi8gPT09IGNoYXJhY3RlciBhZnRlciB0aGUgZXhwbGljaXQga2V5LlxuICAgICAgICBhdEV4cGxpY2l0S2V5ID0gZmFsc2U7XG4gICAgICAgIGFsbG93Q29tcGFjdCA9IHRydWU7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICdpbmNvbXBsZXRlIGV4cGxpY2l0IG1hcHBpbmcgcGFpcjsgYSBrZXkgbm9kZSBpcyBtaXNzZWQ7IG9yIGZvbGxvd2VkIGJ5IGEgbm9uLXRhYnVsYXRlZCBlbXB0eSBsaW5lJyk7XG4gICAgICB9XG5cbiAgICAgIHN0YXRlLnBvc2l0aW9uICs9IDE7XG4gICAgICBjaCA9IGZvbGxvd2luZztcblxuICAgIC8vXG4gICAgLy8gSW1wbGljaXQgbm90YXRpb24gY2FzZS4gRmxvdy1zdHlsZSBub2RlIGFzIHRoZSBrZXkgZmlyc3QsIHRoZW4gXCI6XCIsIGFuZCB0aGUgdmFsdWUuXG4gICAgLy9cbiAgICB9IGVsc2Uge1xuICAgICAgX2tleUxpbmUgPSBzdGF0ZS5saW5lO1xuICAgICAgX2tleUxpbmVTdGFydCA9IHN0YXRlLmxpbmVTdGFydDtcbiAgICAgIF9rZXlQb3MgPSBzdGF0ZS5wb3NpdGlvbjtcblxuICAgICAgaWYgKCFjb21wb3NlTm9kZShzdGF0ZSwgZmxvd0luZGVudCwgQ09OVEVYVF9GTE9XX09VVCwgZmFsc2UsIHRydWUpKSB7XG4gICAgICAgIC8vIE5laXRoZXIgaW1wbGljaXQgbm9yIGV4cGxpY2l0IG5vdGF0aW9uLlxuICAgICAgICAvLyBSZWFkaW5nIGlzIGRvbmUuIEdvIHRvIHRoZSBlcGlsb2d1ZS5cbiAgICAgICAgYnJlYWs7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZS5saW5lID09PSBfbGluZSkge1xuICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pO1xuXG4gICAgICAgIHdoaWxlIChpc19XSElURV9TUEFDRShjaCkpIHtcbiAgICAgICAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoY2ggPT09IDB4M0EvKiA6ICovKSB7XG4gICAgICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gICAgICAgICAgaWYgKCFpc19XU19PUl9FT0woY2gpKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYSB3aGl0ZXNwYWNlIGNoYXJhY3RlciBpcyBleHBlY3RlZCBhZnRlciB0aGUga2V5LXZhbHVlIHNlcGFyYXRvciB3aXRoaW4gYSBibG9jayBtYXBwaW5nJyk7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgaWYgKGF0RXhwbGljaXRLZXkpIHtcbiAgICAgICAgICAgIHN0b3JlTWFwcGluZ1BhaXIoc3RhdGUsIF9yZXN1bHQsIG92ZXJyaWRhYmxlS2V5cywga2V5VGFnLCBrZXlOb2RlLCBudWxsLCBfa2V5TGluZSwgX2tleUxpbmVTdGFydCwgX2tleVBvcyk7XG4gICAgICAgICAgICBrZXlUYWcgPSBrZXlOb2RlID0gdmFsdWVOb2RlID0gbnVsbDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBkZXRlY3RlZCA9IHRydWU7XG4gICAgICAgICAgYXRFeHBsaWNpdEtleSA9IGZhbHNlO1xuICAgICAgICAgIGFsbG93Q29tcGFjdCA9IGZhbHNlO1xuICAgICAgICAgIGtleVRhZyA9IHN0YXRlLnRhZztcbiAgICAgICAgICBrZXlOb2RlID0gc3RhdGUucmVzdWx0O1xuXG4gICAgICAgIH0gZWxzZSBpZiAoZGV0ZWN0ZWQpIHtcbiAgICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnY2FuIG5vdCByZWFkIGFuIGltcGxpY2l0IG1hcHBpbmcgcGFpcjsgYSBjb2xvbiBpcyBtaXNzZWQnKTtcblxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHN0YXRlLnRhZyA9IF90YWc7XG4gICAgICAgICAgc3RhdGUuYW5jaG9yID0gX2FuY2hvcjtcbiAgICAgICAgICByZXR1cm4gdHJ1ZTsgLy8gS2VlcCB0aGUgcmVzdWx0IG9mIGBjb21wb3NlTm9kZWAuXG4gICAgICAgIH1cblxuICAgICAgfSBlbHNlIGlmIChkZXRlY3RlZCkge1xuICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnY2FuIG5vdCByZWFkIGEgYmxvY2sgbWFwcGluZyBlbnRyeTsgYSBtdWx0aWxpbmUga2V5IG1heSBub3QgYmUgYW4gaW1wbGljaXQga2V5Jyk7XG5cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLnRhZyA9IF90YWc7XG4gICAgICAgIHN0YXRlLmFuY2hvciA9IF9hbmNob3I7XG4gICAgICAgIHJldHVybiB0cnVlOyAvLyBLZWVwIHRoZSByZXN1bHQgb2YgYGNvbXBvc2VOb2RlYC5cbiAgICAgIH1cbiAgICB9XG5cbiAgICAvL1xuICAgIC8vIENvbW1vbiByZWFkaW5nIGNvZGUgZm9yIGJvdGggZXhwbGljaXQgYW5kIGltcGxpY2l0IG5vdGF0aW9ucy5cbiAgICAvL1xuICAgIGlmIChzdGF0ZS5saW5lID09PSBfbGluZSB8fCBzdGF0ZS5saW5lSW5kZW50ID4gbm9kZUluZGVudCkge1xuICAgICAgaWYgKGF0RXhwbGljaXRLZXkpIHtcbiAgICAgICAgX2tleUxpbmUgPSBzdGF0ZS5saW5lO1xuICAgICAgICBfa2V5TGluZVN0YXJ0ID0gc3RhdGUubGluZVN0YXJ0O1xuICAgICAgICBfa2V5UG9zID0gc3RhdGUucG9zaXRpb247XG4gICAgICB9XG5cbiAgICAgIGlmIChjb21wb3NlTm9kZShzdGF0ZSwgbm9kZUluZGVudCwgQ09OVEVYVF9CTE9DS19PVVQsIHRydWUsIGFsbG93Q29tcGFjdCkpIHtcbiAgICAgICAgaWYgKGF0RXhwbGljaXRLZXkpIHtcbiAgICAgICAgICBrZXlOb2RlID0gc3RhdGUucmVzdWx0O1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhbHVlTm9kZSA9IHN0YXRlLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICBpZiAoIWF0RXhwbGljaXRLZXkpIHtcbiAgICAgICAgc3RvcmVNYXBwaW5nUGFpcihzdGF0ZSwgX3Jlc3VsdCwgb3ZlcnJpZGFibGVLZXlzLCBrZXlUYWcsIGtleU5vZGUsIHZhbHVlTm9kZSwgX2tleUxpbmUsIF9rZXlMaW5lU3RhcnQsIF9rZXlQb3MpO1xuICAgICAgICBrZXlUYWcgPSBrZXlOb2RlID0gdmFsdWVOb2RlID0gbnVsbDtcbiAgICAgIH1cblxuICAgICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpO1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICBpZiAoKHN0YXRlLmxpbmUgPT09IF9saW5lIHx8IHN0YXRlLmxpbmVJbmRlbnQgPiBub2RlSW5kZW50KSAmJiAoY2ggIT09IDApKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYmFkIGluZGVudGF0aW9uIG9mIGEgbWFwcGluZyBlbnRyeScpO1xuICAgIH0gZWxzZSBpZiAoc3RhdGUubGluZUluZGVudCA8IG5vZGVJbmRlbnQpIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cbiAgfVxuXG4gIC8vXG4gIC8vIEVwaWxvZ3VlLlxuICAvL1xuXG4gIC8vIFNwZWNpYWwgY2FzZTogbGFzdCBtYXBwaW5nJ3Mgbm9kZSBjb250YWlucyBvbmx5IHRoZSBrZXkgaW4gZXhwbGljaXQgbm90YXRpb24uXG4gIGlmIChhdEV4cGxpY2l0S2V5KSB7XG4gICAgc3RvcmVNYXBwaW5nUGFpcihzdGF0ZSwgX3Jlc3VsdCwgb3ZlcnJpZGFibGVLZXlzLCBrZXlUYWcsIGtleU5vZGUsIG51bGwsIF9rZXlMaW5lLCBfa2V5TGluZVN0YXJ0LCBfa2V5UG9zKTtcbiAgfVxuXG4gIC8vIEV4cG9zZSB0aGUgcmVzdWx0aW5nIG1hcHBpbmcuXG4gIGlmIChkZXRlY3RlZCkge1xuICAgIHN0YXRlLnRhZyA9IF90YWc7XG4gICAgc3RhdGUuYW5jaG9yID0gX2FuY2hvcjtcbiAgICBzdGF0ZS5raW5kID0gJ21hcHBpbmcnO1xuICAgIHN0YXRlLnJlc3VsdCA9IF9yZXN1bHQ7XG4gIH1cblxuICByZXR1cm4gZGV0ZWN0ZWQ7XG59XG5cbmZ1bmN0aW9uIHJlYWRUYWdQcm9wZXJ0eShzdGF0ZSkge1xuICB2YXIgX3Bvc2l0aW9uLFxuICAgICAgaXNWZXJiYXRpbSA9IGZhbHNlLFxuICAgICAgaXNOYW1lZCAgICA9IGZhbHNlLFxuICAgICAgdGFnSGFuZGxlLFxuICAgICAgdGFnTmFtZSxcbiAgICAgIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoICE9PSAweDIxLyogISAqLykgcmV0dXJuIGZhbHNlO1xuXG4gIGlmIChzdGF0ZS50YWcgIT09IG51bGwpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZHVwbGljYXRpb24gb2YgYSB0YWcgcHJvcGVydHknKTtcbiAgfVxuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggPT09IDB4M0MvKiA8ICovKSB7XG4gICAgaXNWZXJiYXRpbSA9IHRydWU7XG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuXG4gIH0gZWxzZSBpZiAoY2ggPT09IDB4MjEvKiAhICovKSB7XG4gICAgaXNOYW1lZCA9IHRydWU7XG4gICAgdGFnSGFuZGxlID0gJyEhJztcbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG5cbiAgfSBlbHNlIHtcbiAgICB0YWdIYW5kbGUgPSAnISc7XG4gIH1cblxuICBfcG9zaXRpb24gPSBzdGF0ZS5wb3NpdGlvbjtcblxuICBpZiAoaXNWZXJiYXRpbSkge1xuICAgIGRvIHsgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pOyB9XG4gICAgd2hpbGUgKGNoICE9PSAwICYmIGNoICE9PSAweDNFLyogPiAqLyk7XG5cbiAgICBpZiAoc3RhdGUucG9zaXRpb24gPCBzdGF0ZS5sZW5ndGgpIHtcbiAgICAgIHRhZ05hbWUgPSBzdGF0ZS5pbnB1dC5zbGljZShfcG9zaXRpb24sIHN0YXRlLnBvc2l0aW9uKTtcbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuZXhwZWN0ZWQgZW5kIG9mIHRoZSBzdHJlYW0gd2l0aGluIGEgdmVyYmF0aW0gdGFnJyk7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfV1NfT1JfRU9MKGNoKSkge1xuXG4gICAgICBpZiAoY2ggPT09IDB4MjEvKiAhICovKSB7XG4gICAgICAgIGlmICghaXNOYW1lZCkge1xuICAgICAgICAgIHRhZ0hhbmRsZSA9IHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiAtIDEsIHN0YXRlLnBvc2l0aW9uICsgMSk7XG5cbiAgICAgICAgICBpZiAoIVBBVFRFUk5fVEFHX0hBTkRMRS50ZXN0KHRhZ0hhbmRsZSkpIHtcbiAgICAgICAgICAgIHRocm93RXJyb3Ioc3RhdGUsICduYW1lZCB0YWcgaGFuZGxlIGNhbm5vdCBjb250YWluIHN1Y2ggY2hhcmFjdGVycycpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGlzTmFtZWQgPSB0cnVlO1xuICAgICAgICAgIF9wb3NpdGlvbiA9IHN0YXRlLnBvc2l0aW9uICsgMTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndGFnIHN1ZmZpeCBjYW5ub3QgY29udGFpbiBleGNsYW1hdGlvbiBtYXJrcycpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICB9XG5cbiAgICB0YWdOYW1lID0gc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uLCBzdGF0ZS5wb3NpdGlvbik7XG5cbiAgICBpZiAoUEFUVEVSTl9GTE9XX0lORElDQVRPUlMudGVzdCh0YWdOYW1lKSkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3RhZyBzdWZmaXggY2Fubm90IGNvbnRhaW4gZmxvdyBpbmRpY2F0b3IgY2hhcmFjdGVycycpO1xuICAgIH1cbiAgfVxuXG4gIGlmICh0YWdOYW1lICYmICFQQVRURVJOX1RBR19VUkkudGVzdCh0YWdOYW1lKSkge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICd0YWcgbmFtZSBjYW5ub3QgY29udGFpbiBzdWNoIGNoYXJhY3RlcnM6ICcgKyB0YWdOYW1lKTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgdGFnTmFtZSA9IGRlY29kZVVSSUNvbXBvbmVudCh0YWdOYW1lKTtcbiAgfSBjYXRjaCAoZXJyKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3RhZyBuYW1lIGlzIG1hbGZvcm1lZDogJyArIHRhZ05hbWUpO1xuICB9XG5cbiAgaWYgKGlzVmVyYmF0aW0pIHtcbiAgICBzdGF0ZS50YWcgPSB0YWdOYW1lO1xuXG4gIH0gZWxzZSBpZiAoX2hhc093blByb3BlcnR5JDEuY2FsbChzdGF0ZS50YWdNYXAsIHRhZ0hhbmRsZSkpIHtcbiAgICBzdGF0ZS50YWcgPSBzdGF0ZS50YWdNYXBbdGFnSGFuZGxlXSArIHRhZ05hbWU7XG5cbiAgfSBlbHNlIGlmICh0YWdIYW5kbGUgPT09ICchJykge1xuICAgIHN0YXRlLnRhZyA9ICchJyArIHRhZ05hbWU7XG5cbiAgfSBlbHNlIGlmICh0YWdIYW5kbGUgPT09ICchIScpIHtcbiAgICBzdGF0ZS50YWcgPSAndGFnOnlhbWwub3JnLDIwMDI6JyArIHRhZ05hbWU7XG5cbiAgfSBlbHNlIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5kZWNsYXJlZCB0YWcgaGFuZGxlIFwiJyArIHRhZ0hhbmRsZSArICdcIicpO1xuICB9XG5cbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJlYWRBbmNob3JQcm9wZXJ0eShzdGF0ZSkge1xuICB2YXIgX3Bvc2l0aW9uLFxuICAgICAgY2g7XG5cbiAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICBpZiAoY2ggIT09IDB4MjYvKiAmICovKSByZXR1cm4gZmFsc2U7XG5cbiAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICdkdXBsaWNhdGlvbiBvZiBhbiBhbmNob3IgcHJvcGVydHknKTtcbiAgfVxuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgX3Bvc2l0aW9uID0gc3RhdGUucG9zaXRpb247XG5cbiAgd2hpbGUgKGNoICE9PSAwICYmICFpc19XU19PUl9FT0woY2gpICYmICFpc19GTE9XX0lORElDQVRPUihjaCkpIHtcbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gIH1cblxuICBpZiAoc3RhdGUucG9zaXRpb24gPT09IF9wb3NpdGlvbikge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICduYW1lIG9mIGFuIGFuY2hvciBub2RlIG11c3QgY29udGFpbiBhdCBsZWFzdCBvbmUgY2hhcmFjdGVyJyk7XG4gIH1cblxuICBzdGF0ZS5hbmNob3IgPSBzdGF0ZS5pbnB1dC5zbGljZShfcG9zaXRpb24sIHN0YXRlLnBvc2l0aW9uKTtcbiAgcmV0dXJuIHRydWU7XG59XG5cbmZ1bmN0aW9uIHJlYWRBbGlhcyhzdGF0ZSkge1xuICB2YXIgX3Bvc2l0aW9uLCBhbGlhcyxcbiAgICAgIGNoO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKGNoICE9PSAweDJBLyogKiAqLykgcmV0dXJuIGZhbHNlO1xuXG4gIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgX3Bvc2l0aW9uID0gc3RhdGUucG9zaXRpb247XG5cbiAgd2hpbGUgKGNoICE9PSAwICYmICFpc19XU19PUl9FT0woY2gpICYmICFpc19GTE9XX0lORElDQVRPUihjaCkpIHtcbiAgICBjaCA9IHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoKytzdGF0ZS5wb3NpdGlvbik7XG4gIH1cblxuICBpZiAoc3RhdGUucG9zaXRpb24gPT09IF9wb3NpdGlvbikge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICduYW1lIG9mIGFuIGFsaWFzIG5vZGUgbXVzdCBjb250YWluIGF0IGxlYXN0IG9uZSBjaGFyYWN0ZXInKTtcbiAgfVxuXG4gIGFsaWFzID0gc3RhdGUuaW5wdXQuc2xpY2UoX3Bvc2l0aW9uLCBzdGF0ZS5wb3NpdGlvbik7XG5cbiAgaWYgKCFfaGFzT3duUHJvcGVydHkkMS5jYWxsKHN0YXRlLmFuY2hvck1hcCwgYWxpYXMpKSB7XG4gICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuaWRlbnRpZmllZCBhbGlhcyBcIicgKyBhbGlhcyArICdcIicpO1xuICB9XG5cbiAgc3RhdGUucmVzdWx0ID0gc3RhdGUuYW5jaG9yTWFwW2FsaWFzXTtcbiAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpO1xuICByZXR1cm4gdHJ1ZTtcbn1cblxuZnVuY3Rpb24gY29tcG9zZU5vZGUoc3RhdGUsIHBhcmVudEluZGVudCwgbm9kZUNvbnRleHQsIGFsbG93VG9TZWVrLCBhbGxvd0NvbXBhY3QpIHtcbiAgdmFyIGFsbG93QmxvY2tTdHlsZXMsXG4gICAgICBhbGxvd0Jsb2NrU2NhbGFycyxcbiAgICAgIGFsbG93QmxvY2tDb2xsZWN0aW9ucyxcbiAgICAgIGluZGVudFN0YXR1cyA9IDEsIC8vIDE6IHRoaXM+cGFyZW50LCAwOiB0aGlzPXBhcmVudCwgLTE6IHRoaXM8cGFyZW50XG4gICAgICBhdE5ld0xpbmUgID0gZmFsc2UsXG4gICAgICBoYXNDb250ZW50ID0gZmFsc2UsXG4gICAgICB0eXBlSW5kZXgsXG4gICAgICB0eXBlUXVhbnRpdHksXG4gICAgICB0eXBlTGlzdCxcbiAgICAgIHR5cGUsXG4gICAgICBmbG93SW5kZW50LFxuICAgICAgYmxvY2tJbmRlbnQ7XG5cbiAgaWYgKHN0YXRlLmxpc3RlbmVyICE9PSBudWxsKSB7XG4gICAgc3RhdGUubGlzdGVuZXIoJ29wZW4nLCBzdGF0ZSk7XG4gIH1cblxuICBzdGF0ZS50YWcgICAgPSBudWxsO1xuICBzdGF0ZS5hbmNob3IgPSBudWxsO1xuICBzdGF0ZS5raW5kICAgPSBudWxsO1xuICBzdGF0ZS5yZXN1bHQgPSBudWxsO1xuXG4gIGFsbG93QmxvY2tTdHlsZXMgPSBhbGxvd0Jsb2NrU2NhbGFycyA9IGFsbG93QmxvY2tDb2xsZWN0aW9ucyA9XG4gICAgQ09OVEVYVF9CTE9DS19PVVQgPT09IG5vZGVDb250ZXh0IHx8XG4gICAgQ09OVEVYVF9CTE9DS19JTiAgPT09IG5vZGVDb250ZXh0O1xuXG4gIGlmIChhbGxvd1RvU2Vlaykge1xuICAgIGlmIChza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSkpIHtcbiAgICAgIGF0TmV3TGluZSA9IHRydWU7XG5cbiAgICAgIGlmIChzdGF0ZS5saW5lSW5kZW50ID4gcGFyZW50SW5kZW50KSB7XG4gICAgICAgIGluZGVudFN0YXR1cyA9IDE7XG4gICAgICB9IGVsc2UgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPT09IHBhcmVudEluZGVudCkge1xuICAgICAgICBpbmRlbnRTdGF0dXMgPSAwO1xuICAgICAgfSBlbHNlIGlmIChzdGF0ZS5saW5lSW5kZW50IDwgcGFyZW50SW5kZW50KSB7XG4gICAgICAgIGluZGVudFN0YXR1cyA9IC0xO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIGlmIChpbmRlbnRTdGF0dXMgPT09IDEpIHtcbiAgICB3aGlsZSAocmVhZFRhZ1Byb3BlcnR5KHN0YXRlKSB8fCByZWFkQW5jaG9yUHJvcGVydHkoc3RhdGUpKSB7XG4gICAgICBpZiAoc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpKSB7XG4gICAgICAgIGF0TmV3TGluZSA9IHRydWU7XG4gICAgICAgIGFsbG93QmxvY2tDb2xsZWN0aW9ucyA9IGFsbG93QmxvY2tTdHlsZXM7XG5cbiAgICAgICAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPiBwYXJlbnRJbmRlbnQpIHtcbiAgICAgICAgICBpbmRlbnRTdGF0dXMgPSAxO1xuICAgICAgICB9IGVsc2UgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPT09IHBhcmVudEluZGVudCkge1xuICAgICAgICAgIGluZGVudFN0YXR1cyA9IDA7XG4gICAgICAgIH0gZWxzZSBpZiAoc3RhdGUubGluZUluZGVudCA8IHBhcmVudEluZGVudCkge1xuICAgICAgICAgIGluZGVudFN0YXR1cyA9IC0xO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBhbGxvd0Jsb2NrQ29sbGVjdGlvbnMgPSBmYWxzZTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICBpZiAoYWxsb3dCbG9ja0NvbGxlY3Rpb25zKSB7XG4gICAgYWxsb3dCbG9ja0NvbGxlY3Rpb25zID0gYXROZXdMaW5lIHx8IGFsbG93Q29tcGFjdDtcbiAgfVxuXG4gIGlmIChpbmRlbnRTdGF0dXMgPT09IDEgfHwgQ09OVEVYVF9CTE9DS19PVVQgPT09IG5vZGVDb250ZXh0KSB7XG4gICAgaWYgKENPTlRFWFRfRkxPV19JTiA9PT0gbm9kZUNvbnRleHQgfHwgQ09OVEVYVF9GTE9XX09VVCA9PT0gbm9kZUNvbnRleHQpIHtcbiAgICAgIGZsb3dJbmRlbnQgPSBwYXJlbnRJbmRlbnQ7XG4gICAgfSBlbHNlIHtcbiAgICAgIGZsb3dJbmRlbnQgPSBwYXJlbnRJbmRlbnQgKyAxO1xuICAgIH1cblxuICAgIGJsb2NrSW5kZW50ID0gc3RhdGUucG9zaXRpb24gLSBzdGF0ZS5saW5lU3RhcnQ7XG5cbiAgICBpZiAoaW5kZW50U3RhdHVzID09PSAxKSB7XG4gICAgICBpZiAoYWxsb3dCbG9ja0NvbGxlY3Rpb25zICYmXG4gICAgICAgICAgKHJlYWRCbG9ja1NlcXVlbmNlKHN0YXRlLCBibG9ja0luZGVudCkgfHxcbiAgICAgICAgICAgcmVhZEJsb2NrTWFwcGluZyhzdGF0ZSwgYmxvY2tJbmRlbnQsIGZsb3dJbmRlbnQpKSB8fFxuICAgICAgICAgIHJlYWRGbG93Q29sbGVjdGlvbihzdGF0ZSwgZmxvd0luZGVudCkpIHtcbiAgICAgICAgaGFzQ29udGVudCA9IHRydWU7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoKGFsbG93QmxvY2tTY2FsYXJzICYmIHJlYWRCbG9ja1NjYWxhcihzdGF0ZSwgZmxvd0luZGVudCkpIHx8XG4gICAgICAgICAgICByZWFkU2luZ2xlUXVvdGVkU2NhbGFyKHN0YXRlLCBmbG93SW5kZW50KSB8fFxuICAgICAgICAgICAgcmVhZERvdWJsZVF1b3RlZFNjYWxhcihzdGF0ZSwgZmxvd0luZGVudCkpIHtcbiAgICAgICAgICBoYXNDb250ZW50ID0gdHJ1ZTtcblxuICAgICAgICB9IGVsc2UgaWYgKHJlYWRBbGlhcyhzdGF0ZSkpIHtcbiAgICAgICAgICBoYXNDb250ZW50ID0gdHJ1ZTtcblxuICAgICAgICAgIGlmIChzdGF0ZS50YWcgIT09IG51bGwgfHwgc3RhdGUuYW5jaG9yICE9PSBudWxsKSB7XG4gICAgICAgICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnYWxpYXMgbm9kZSBzaG91bGQgbm90IGhhdmUgYW55IHByb3BlcnRpZXMnKTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgfSBlbHNlIGlmIChyZWFkUGxhaW5TY2FsYXIoc3RhdGUsIGZsb3dJbmRlbnQsIENPTlRFWFRfRkxPV19JTiA9PT0gbm9kZUNvbnRleHQpKSB7XG4gICAgICAgICAgaGFzQ29udGVudCA9IHRydWU7XG5cbiAgICAgICAgICBpZiAoc3RhdGUudGFnID09PSBudWxsKSB7XG4gICAgICAgICAgICBzdGF0ZS50YWcgPSAnPyc7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHN0YXRlLmFuY2hvciAhPT0gbnVsbCkge1xuICAgICAgICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gc3RhdGUucmVzdWx0O1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIGlmIChpbmRlbnRTdGF0dXMgPT09IDApIHtcbiAgICAgIC8vIFNwZWNpYWwgY2FzZTogYmxvY2sgc2VxdWVuY2VzIGFyZSBhbGxvd2VkIHRvIGhhdmUgc2FtZSBpbmRlbnRhdGlvbiBsZXZlbCBhcyB0aGUgcGFyZW50LlxuICAgICAgLy8gaHR0cDovL3d3dy55YW1sLm9yZy9zcGVjLzEuMi9zcGVjLmh0bWwjaWQyNzk5Nzg0XG4gICAgICBoYXNDb250ZW50ID0gYWxsb3dCbG9ja0NvbGxlY3Rpb25zICYmIHJlYWRCbG9ja1NlcXVlbmNlKHN0YXRlLCBibG9ja0luZGVudCk7XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXRlLnRhZyA9PT0gbnVsbCkge1xuICAgIGlmIChzdGF0ZS5hbmNob3IgIT09IG51bGwpIHtcbiAgICAgIHN0YXRlLmFuY2hvck1hcFtzdGF0ZS5hbmNob3JdID0gc3RhdGUucmVzdWx0O1xuICAgIH1cblxuICB9IGVsc2UgaWYgKHN0YXRlLnRhZyA9PT0gJz8nKSB7XG4gICAgLy8gSW1wbGljaXQgcmVzb2x2aW5nIGlzIG5vdCBhbGxvd2VkIGZvciBub24tc2NhbGFyIHR5cGVzLCBhbmQgJz8nXG4gICAgLy8gbm9uLXNwZWNpZmljIHRhZyBpcyBvbmx5IGF1dG9tYXRpY2FsbHkgYXNzaWduZWQgdG8gcGxhaW4gc2NhbGFycy5cbiAgICAvL1xuICAgIC8vIFdlIG9ubHkgbmVlZCB0byBjaGVjayBraW5kIGNvbmZvcm1pdHkgaW4gY2FzZSB1c2VyIGV4cGxpY2l0bHkgYXNzaWducyAnPydcbiAgICAvLyB0YWcsIGZvciBleGFtcGxlIGxpa2UgdGhpczogXCIhPD8+IFswXVwiXG4gICAgLy9cbiAgICBpZiAoc3RhdGUucmVzdWx0ICE9PSBudWxsICYmIHN0YXRlLmtpbmQgIT09ICdzY2FsYXInKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5hY2NlcHRhYmxlIG5vZGUga2luZCBmb3IgITw/PiB0YWc7IGl0IHNob3VsZCBiZSBcInNjYWxhclwiLCBub3QgXCInICsgc3RhdGUua2luZCArICdcIicpO1xuICAgIH1cblxuICAgIGZvciAodHlwZUluZGV4ID0gMCwgdHlwZVF1YW50aXR5ID0gc3RhdGUuaW1wbGljaXRUeXBlcy5sZW5ndGg7IHR5cGVJbmRleCA8IHR5cGVRdWFudGl0eTsgdHlwZUluZGV4ICs9IDEpIHtcbiAgICAgIHR5cGUgPSBzdGF0ZS5pbXBsaWNpdFR5cGVzW3R5cGVJbmRleF07XG5cbiAgICAgIGlmICh0eXBlLnJlc29sdmUoc3RhdGUucmVzdWx0KSkgeyAvLyBgc3RhdGUucmVzdWx0YCB1cGRhdGVkIGluIHJlc29sdmVyIGlmIG1hdGNoZWRcbiAgICAgICAgc3RhdGUucmVzdWx0ID0gdHlwZS5jb25zdHJ1Y3Qoc3RhdGUucmVzdWx0KTtcbiAgICAgICAgc3RhdGUudGFnID0gdHlwZS50YWc7XG4gICAgICAgIGlmIChzdGF0ZS5hbmNob3IgIT09IG51bGwpIHtcbiAgICAgICAgICBzdGF0ZS5hbmNob3JNYXBbc3RhdGUuYW5jaG9yXSA9IHN0YXRlLnJlc3VsdDtcbiAgICAgICAgfVxuICAgICAgICBicmVhaztcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAoc3RhdGUudGFnICE9PSAnIScpIHtcbiAgICBpZiAoX2hhc093blByb3BlcnR5JDEuY2FsbChzdGF0ZS50eXBlTWFwW3N0YXRlLmtpbmQgfHwgJ2ZhbGxiYWNrJ10sIHN0YXRlLnRhZykpIHtcbiAgICAgIHR5cGUgPSBzdGF0ZS50eXBlTWFwW3N0YXRlLmtpbmQgfHwgJ2ZhbGxiYWNrJ11bc3RhdGUudGFnXTtcbiAgICB9IGVsc2Uge1xuICAgICAgLy8gbG9va2luZyBmb3IgbXVsdGkgdHlwZVxuICAgICAgdHlwZSA9IG51bGw7XG4gICAgICB0eXBlTGlzdCA9IHN0YXRlLnR5cGVNYXAubXVsdGlbc3RhdGUua2luZCB8fCAnZmFsbGJhY2snXTtcblxuICAgICAgZm9yICh0eXBlSW5kZXggPSAwLCB0eXBlUXVhbnRpdHkgPSB0eXBlTGlzdC5sZW5ndGg7IHR5cGVJbmRleCA8IHR5cGVRdWFudGl0eTsgdHlwZUluZGV4ICs9IDEpIHtcbiAgICAgICAgaWYgKHN0YXRlLnRhZy5zbGljZSgwLCB0eXBlTGlzdFt0eXBlSW5kZXhdLnRhZy5sZW5ndGgpID09PSB0eXBlTGlzdFt0eXBlSW5kZXhdLnRhZykge1xuICAgICAgICAgIHR5cGUgPSB0eXBlTGlzdFt0eXBlSW5kZXhdO1xuICAgICAgICAgIGJyZWFrO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKCF0eXBlKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAndW5rbm93biB0YWcgITwnICsgc3RhdGUudGFnICsgJz4nKTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdGUucmVzdWx0ICE9PSBudWxsICYmIHR5cGUua2luZCAhPT0gc3RhdGUua2luZCkge1xuICAgICAgdGhyb3dFcnJvcihzdGF0ZSwgJ3VuYWNjZXB0YWJsZSBub2RlIGtpbmQgZm9yICE8JyArIHN0YXRlLnRhZyArICc+IHRhZzsgaXQgc2hvdWxkIGJlIFwiJyArIHR5cGUua2luZCArICdcIiwgbm90IFwiJyArIHN0YXRlLmtpbmQgKyAnXCInKTtcbiAgICB9XG5cbiAgICBpZiAoIXR5cGUucmVzb2x2ZShzdGF0ZS5yZXN1bHQsIHN0YXRlLnRhZykpIHsgLy8gYHN0YXRlLnJlc3VsdGAgdXBkYXRlZCBpbiByZXNvbHZlciBpZiBtYXRjaGVkXG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnY2Fubm90IHJlc29sdmUgYSBub2RlIHdpdGggITwnICsgc3RhdGUudGFnICsgJz4gZXhwbGljaXQgdGFnJyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHN0YXRlLnJlc3VsdCA9IHR5cGUuY29uc3RydWN0KHN0YXRlLnJlc3VsdCwgc3RhdGUudGFnKTtcbiAgICAgIGlmIChzdGF0ZS5hbmNob3IgIT09IG51bGwpIHtcbiAgICAgICAgc3RhdGUuYW5jaG9yTWFwW3N0YXRlLmFuY2hvcl0gPSBzdGF0ZS5yZXN1bHQ7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgaWYgKHN0YXRlLmxpc3RlbmVyICE9PSBudWxsKSB7XG4gICAgc3RhdGUubGlzdGVuZXIoJ2Nsb3NlJywgc3RhdGUpO1xuICB9XG4gIHJldHVybiBzdGF0ZS50YWcgIT09IG51bGwgfHwgIHN0YXRlLmFuY2hvciAhPT0gbnVsbCB8fCBoYXNDb250ZW50O1xufVxuXG5mdW5jdGlvbiByZWFkRG9jdW1lbnQoc3RhdGUpIHtcbiAgdmFyIGRvY3VtZW50U3RhcnQgPSBzdGF0ZS5wb3NpdGlvbixcbiAgICAgIF9wb3NpdGlvbixcbiAgICAgIGRpcmVjdGl2ZU5hbWUsXG4gICAgICBkaXJlY3RpdmVBcmdzLFxuICAgICAgaGFzRGlyZWN0aXZlcyA9IGZhbHNlLFxuICAgICAgY2g7XG5cbiAgc3RhdGUudmVyc2lvbiA9IG51bGw7XG4gIHN0YXRlLmNoZWNrTGluZUJyZWFrcyA9IHN0YXRlLmxlZ2FjeTtcbiAgc3RhdGUudGFnTWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiAgc3RhdGUuYW5jaG9yTWFwID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcblxuICB3aGlsZSAoKGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdChzdGF0ZS5wb3NpdGlvbikpICE9PSAwKSB7XG4gICAgc2tpcFNlcGFyYXRpb25TcGFjZShzdGF0ZSwgdHJ1ZSwgLTEpO1xuXG4gICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKTtcblxuICAgIGlmIChzdGF0ZS5saW5lSW5kZW50ID4gMCB8fCBjaCAhPT0gMHgyNS8qICUgKi8pIHtcbiAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGhhc0RpcmVjdGl2ZXMgPSB0cnVlO1xuICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICBfcG9zaXRpb24gPSBzdGF0ZS5wb3NpdGlvbjtcblxuICAgIHdoaWxlIChjaCAhPT0gMCAmJiAhaXNfV1NfT1JfRU9MKGNoKSkge1xuICAgICAgY2ggPSBzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KCsrc3RhdGUucG9zaXRpb24pO1xuICAgIH1cblxuICAgIGRpcmVjdGl2ZU5hbWUgPSBzdGF0ZS5pbnB1dC5zbGljZShfcG9zaXRpb24sIHN0YXRlLnBvc2l0aW9uKTtcbiAgICBkaXJlY3RpdmVBcmdzID0gW107XG5cbiAgICBpZiAoZGlyZWN0aXZlTmFtZS5sZW5ndGggPCAxKSB7XG4gICAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZGlyZWN0aXZlIG5hbWUgbXVzdCBub3QgYmUgbGVzcyB0aGFuIG9uZSBjaGFyYWN0ZXIgaW4gbGVuZ3RoJyk7XG4gICAgfVxuXG4gICAgd2hpbGUgKGNoICE9PSAwKSB7XG4gICAgICB3aGlsZSAoaXNfV0hJVEVfU1BBQ0UoY2gpKSB7XG4gICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICAgIH1cblxuICAgICAgaWYgKGNoID09PSAweDIzLyogIyAqLykge1xuICAgICAgICBkbyB7IGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTsgfVxuICAgICAgICB3aGlsZSAoY2ggIT09IDAgJiYgIWlzX0VPTChjaCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIH1cblxuICAgICAgaWYgKGlzX0VPTChjaCkpIGJyZWFrO1xuXG4gICAgICBfcG9zaXRpb24gPSBzdGF0ZS5wb3NpdGlvbjtcblxuICAgICAgd2hpbGUgKGNoICE9PSAwICYmICFpc19XU19PUl9FT0woY2gpKSB7XG4gICAgICAgIGNoID0gc3RhdGUuaW5wdXQuY2hhckNvZGVBdCgrK3N0YXRlLnBvc2l0aW9uKTtcbiAgICAgIH1cblxuICAgICAgZGlyZWN0aXZlQXJncy5wdXNoKHN0YXRlLmlucHV0LnNsaWNlKF9wb3NpdGlvbiwgc3RhdGUucG9zaXRpb24pKTtcbiAgICB9XG5cbiAgICBpZiAoY2ggIT09IDApIHJlYWRMaW5lQnJlYWsoc3RhdGUpO1xuXG4gICAgaWYgKF9oYXNPd25Qcm9wZXJ0eSQxLmNhbGwoZGlyZWN0aXZlSGFuZGxlcnMsIGRpcmVjdGl2ZU5hbWUpKSB7XG4gICAgICBkaXJlY3RpdmVIYW5kbGVyc1tkaXJlY3RpdmVOYW1lXShzdGF0ZSwgZGlyZWN0aXZlTmFtZSwgZGlyZWN0aXZlQXJncyk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRocm93V2FybmluZyhzdGF0ZSwgJ3Vua25vd24gZG9jdW1lbnQgZGlyZWN0aXZlIFwiJyArIGRpcmVjdGl2ZU5hbWUgKyAnXCInKTtcbiAgICB9XG4gIH1cblxuICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG5cbiAgaWYgKHN0YXRlLmxpbmVJbmRlbnQgPT09IDAgJiZcbiAgICAgIHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24pICAgICA9PT0gMHgyRC8qIC0gKi8gJiZcbiAgICAgIHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAxKSA9PT0gMHgyRC8qIC0gKi8gJiZcbiAgICAgIHN0YXRlLmlucHV0LmNoYXJDb2RlQXQoc3RhdGUucG9zaXRpb24gKyAyKSA9PT0gMHgyRC8qIC0gKi8pIHtcbiAgICBzdGF0ZS5wb3NpdGlvbiArPSAzO1xuICAgIHNraXBTZXBhcmF0aW9uU3BhY2Uoc3RhdGUsIHRydWUsIC0xKTtcblxuICB9IGVsc2UgaWYgKGhhc0RpcmVjdGl2ZXMpIHtcbiAgICB0aHJvd0Vycm9yKHN0YXRlLCAnZGlyZWN0aXZlcyBlbmQgbWFyayBpcyBleHBlY3RlZCcpO1xuICB9XG5cbiAgY29tcG9zZU5vZGUoc3RhdGUsIHN0YXRlLmxpbmVJbmRlbnQgLSAxLCBDT05URVhUX0JMT0NLX09VVCwgZmFsc2UsIHRydWUpO1xuICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG5cbiAgaWYgKHN0YXRlLmNoZWNrTGluZUJyZWFrcyAmJlxuICAgICAgUEFUVEVSTl9OT05fQVNDSUlfTElORV9CUkVBS1MudGVzdChzdGF0ZS5pbnB1dC5zbGljZShkb2N1bWVudFN0YXJ0LCBzdGF0ZS5wb3NpdGlvbikpKSB7XG4gICAgdGhyb3dXYXJuaW5nKHN0YXRlLCAnbm9uLUFTQ0lJIGxpbmUgYnJlYWtzIGFyZSBpbnRlcnByZXRlZCBhcyBjb250ZW50Jyk7XG4gIH1cblxuICBzdGF0ZS5kb2N1bWVudHMucHVzaChzdGF0ZS5yZXN1bHQpO1xuXG4gIGlmIChzdGF0ZS5wb3NpdGlvbiA9PT0gc3RhdGUubGluZVN0YXJ0ICYmIHRlc3REb2N1bWVudFNlcGFyYXRvcihzdGF0ZSkpIHtcblxuICAgIGlmIChzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSA9PT0gMHgyRS8qIC4gKi8pIHtcbiAgICAgIHN0YXRlLnBvc2l0aW9uICs9IDM7XG4gICAgICBza2lwU2VwYXJhdGlvblNwYWNlKHN0YXRlLCB0cnVlLCAtMSk7XG4gICAgfVxuICAgIHJldHVybjtcbiAgfVxuXG4gIGlmIChzdGF0ZS5wb3NpdGlvbiA8IChzdGF0ZS5sZW5ndGggLSAxKSkge1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICdlbmQgb2YgdGhlIHN0cmVhbSBvciBhIGRvY3VtZW50IHNlcGFyYXRvciBpcyBleHBlY3RlZCcpO1xuICB9IGVsc2Uge1xuICAgIHJldHVybjtcbiAgfVxufVxuXG5cbmZ1bmN0aW9uIGxvYWREb2N1bWVudHMoaW5wdXQsIG9wdGlvbnMpIHtcbiAgaW5wdXQgPSBTdHJpbmcoaW5wdXQpO1xuICBvcHRpb25zID0gb3B0aW9ucyB8fCB7fTtcblxuICBpZiAoaW5wdXQubGVuZ3RoICE9PSAwKSB7XG5cbiAgICAvLyBBZGQgdGFpbGluZyBgXFxuYCBpZiBub3QgZXhpc3RzXG4gICAgaWYgKGlucHV0LmNoYXJDb2RlQXQoaW5wdXQubGVuZ3RoIC0gMSkgIT09IDB4MEEvKiBMRiAqLyAmJlxuICAgICAgICBpbnB1dC5jaGFyQ29kZUF0KGlucHV0Lmxlbmd0aCAtIDEpICE9PSAweDBELyogQ1IgKi8pIHtcbiAgICAgIGlucHV0ICs9ICdcXG4nO1xuICAgIH1cblxuICAgIC8vIFN0cmlwIEJPTVxuICAgIGlmIChpbnB1dC5jaGFyQ29kZUF0KDApID09PSAweEZFRkYpIHtcbiAgICAgIGlucHV0ID0gaW5wdXQuc2xpY2UoMSk7XG4gICAgfVxuICB9XG5cbiAgdmFyIHN0YXRlID0gbmV3IFN0YXRlJDEoaW5wdXQsIG9wdGlvbnMpO1xuXG4gIHZhciBudWxscG9zID0gaW5wdXQuaW5kZXhPZignXFwwJyk7XG5cbiAgaWYgKG51bGxwb3MgIT09IC0xKSB7XG4gICAgc3RhdGUucG9zaXRpb24gPSBudWxscG9zO1xuICAgIHRocm93RXJyb3Ioc3RhdGUsICdudWxsIGJ5dGUgaXMgbm90IGFsbG93ZWQgaW4gaW5wdXQnKTtcbiAgfVxuXG4gIC8vIFVzZSAwIGFzIHN0cmluZyB0ZXJtaW5hdG9yLiBUaGF0IHNpZ25pZmljYW50bHkgc2ltcGxpZmllcyBib3VuZHMgY2hlY2suXG4gIHN0YXRlLmlucHV0ICs9ICdcXDAnO1xuXG4gIHdoaWxlIChzdGF0ZS5pbnB1dC5jaGFyQ29kZUF0KHN0YXRlLnBvc2l0aW9uKSA9PT0gMHgyMC8qIFNwYWNlICovKSB7XG4gICAgc3RhdGUubGluZUluZGVudCArPSAxO1xuICAgIHN0YXRlLnBvc2l0aW9uICs9IDE7XG4gIH1cblxuICB3aGlsZSAoc3RhdGUucG9zaXRpb24gPCAoc3RhdGUubGVuZ3RoIC0gMSkpIHtcbiAgICByZWFkRG9jdW1lbnQoc3RhdGUpO1xuICB9XG5cbiAgcmV0dXJuIHN0YXRlLmRvY3VtZW50cztcbn1cblxuXG5mdW5jdGlvbiBsb2FkQWxsJDEoaW5wdXQsIGl0ZXJhdG9yLCBvcHRpb25zKSB7XG4gIGlmIChpdGVyYXRvciAhPT0gbnVsbCAmJiB0eXBlb2YgaXRlcmF0b3IgPT09ICdvYmplY3QnICYmIHR5cGVvZiBvcHRpb25zID09PSAndW5kZWZpbmVkJykge1xuICAgIG9wdGlvbnMgPSBpdGVyYXRvcjtcbiAgICBpdGVyYXRvciA9IG51bGw7XG4gIH1cblxuICB2YXIgZG9jdW1lbnRzID0gbG9hZERvY3VtZW50cyhpbnB1dCwgb3B0aW9ucyk7XG5cbiAgaWYgKHR5cGVvZiBpdGVyYXRvciAhPT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBkb2N1bWVudHM7XG4gIH1cblxuICBmb3IgKHZhciBpbmRleCA9IDAsIGxlbmd0aCA9IGRvY3VtZW50cy5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgaXRlcmF0b3IoZG9jdW1lbnRzW2luZGV4XSk7XG4gIH1cbn1cblxuXG5mdW5jdGlvbiBsb2FkJDEoaW5wdXQsIG9wdGlvbnMpIHtcbiAgdmFyIGRvY3VtZW50cyA9IGxvYWREb2N1bWVudHMoaW5wdXQsIG9wdGlvbnMpO1xuXG4gIGlmIChkb2N1bWVudHMubGVuZ3RoID09PSAwKSB7XG4gICAgLyplc2xpbnQtZGlzYWJsZSBuby11bmRlZmluZWQqL1xuICAgIHJldHVybiB1bmRlZmluZWQ7XG4gIH0gZWxzZSBpZiAoZG9jdW1lbnRzLmxlbmd0aCA9PT0gMSkge1xuICAgIHJldHVybiBkb2N1bWVudHNbMF07XG4gIH1cbiAgdGhyb3cgbmV3IGV4Y2VwdGlvbignZXhwZWN0ZWQgYSBzaW5nbGUgZG9jdW1lbnQgaW4gdGhlIHN0cmVhbSwgYnV0IGZvdW5kIG1vcmUnKTtcbn1cblxuXG52YXIgbG9hZEFsbF8xID0gbG9hZEFsbCQxO1xudmFyIGxvYWRfMSAgICA9IGxvYWQkMTtcblxudmFyIGxvYWRlciA9IHtcblx0bG9hZEFsbDogbG9hZEFsbF8xLFxuXHRsb2FkOiBsb2FkXzFcbn07XG5cbi8qZXNsaW50LWRpc2FibGUgbm8tdXNlLWJlZm9yZS1kZWZpbmUqL1xuXG5cblxuXG5cbnZhciBfdG9TdHJpbmcgICAgICAgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nO1xudmFyIF9oYXNPd25Qcm9wZXJ0eSA9IE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHk7XG5cbnZhciBDSEFSX0JPTSAgICAgICAgICAgICAgICAgID0gMHhGRUZGO1xudmFyIENIQVJfVEFCICAgICAgICAgICAgICAgICAgPSAweDA5OyAvKiBUYWIgKi9cbnZhciBDSEFSX0xJTkVfRkVFRCAgICAgICAgICAgID0gMHgwQTsgLyogTEYgKi9cbnZhciBDSEFSX0NBUlJJQUdFX1JFVFVSTiAgICAgID0gMHgwRDsgLyogQ1IgKi9cbnZhciBDSEFSX1NQQUNFICAgICAgICAgICAgICAgID0gMHgyMDsgLyogU3BhY2UgKi9cbnZhciBDSEFSX0VYQ0xBTUFUSU9OICAgICAgICAgID0gMHgyMTsgLyogISAqL1xudmFyIENIQVJfRE9VQkxFX1FVT1RFICAgICAgICAgPSAweDIyOyAvKiBcIiAqL1xudmFyIENIQVJfU0hBUlAgICAgICAgICAgICAgICAgPSAweDIzOyAvKiAjICovXG52YXIgQ0hBUl9QRVJDRU5UICAgICAgICAgICAgICA9IDB4MjU7IC8qICUgKi9cbnZhciBDSEFSX0FNUEVSU0FORCAgICAgICAgICAgID0gMHgyNjsgLyogJiAqL1xudmFyIENIQVJfU0lOR0xFX1FVT1RFICAgICAgICAgPSAweDI3OyAvKiAnICovXG52YXIgQ0hBUl9BU1RFUklTSyAgICAgICAgICAgICA9IDB4MkE7IC8qICogKi9cbnZhciBDSEFSX0NPTU1BICAgICAgICAgICAgICAgID0gMHgyQzsgLyogLCAqL1xudmFyIENIQVJfTUlOVVMgICAgICAgICAgICAgICAgPSAweDJEOyAvKiAtICovXG52YXIgQ0hBUl9DT0xPTiAgICAgICAgICAgICAgICA9IDB4M0E7IC8qIDogKi9cbnZhciBDSEFSX0VRVUFMUyAgICAgICAgICAgICAgID0gMHgzRDsgLyogPSAqL1xudmFyIENIQVJfR1JFQVRFUl9USEFOICAgICAgICAgPSAweDNFOyAvKiA+ICovXG52YXIgQ0hBUl9RVUVTVElPTiAgICAgICAgICAgICA9IDB4M0Y7IC8qID8gKi9cbnZhciBDSEFSX0NPTU1FUkNJQUxfQVQgICAgICAgID0gMHg0MDsgLyogQCAqL1xudmFyIENIQVJfTEVGVF9TUVVBUkVfQlJBQ0tFVCAgPSAweDVCOyAvKiBbICovXG52YXIgQ0hBUl9SSUdIVF9TUVVBUkVfQlJBQ0tFVCA9IDB4NUQ7IC8qIF0gKi9cbnZhciBDSEFSX0dSQVZFX0FDQ0VOVCAgICAgICAgID0gMHg2MDsgLyogYCAqL1xudmFyIENIQVJfTEVGVF9DVVJMWV9CUkFDS0VUICAgPSAweDdCOyAvKiB7ICovXG52YXIgQ0hBUl9WRVJUSUNBTF9MSU5FICAgICAgICA9IDB4N0M7IC8qIHwgKi9cbnZhciBDSEFSX1JJR0hUX0NVUkxZX0JSQUNLRVQgID0gMHg3RDsgLyogfSAqL1xuXG52YXIgRVNDQVBFX1NFUVVFTkNFUyA9IHt9O1xuXG5FU0NBUEVfU0VRVUVOQ0VTWzB4MDBdICAgPSAnXFxcXDAnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDA3XSAgID0gJ1xcXFxhJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgwOF0gICA9ICdcXFxcYic7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MDldICAgPSAnXFxcXHQnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDBBXSAgID0gJ1xcXFxuJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgwQl0gICA9ICdcXFxcdic7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MENdICAgPSAnXFxcXGYnO1xuRVNDQVBFX1NFUVVFTkNFU1sweDBEXSAgID0gJ1xcXFxyJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgxQl0gICA9ICdcXFxcZSc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MjJdICAgPSAnXFxcXFwiJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHg1Q10gICA9ICdcXFxcXFxcXCc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4ODVdICAgPSAnXFxcXE4nO1xuRVNDQVBFX1NFUVVFTkNFU1sweEEwXSAgID0gJ1xcXFxfJztcbkVTQ0FQRV9TRVFVRU5DRVNbMHgyMDI4XSA9ICdcXFxcTCc7XG5FU0NBUEVfU0VRVUVOQ0VTWzB4MjAyOV0gPSAnXFxcXFAnO1xuXG52YXIgREVQUkVDQVRFRF9CT09MRUFOU19TWU5UQVggPSBbXG4gICd5JywgJ1knLCAneWVzJywgJ1llcycsICdZRVMnLCAnb24nLCAnT24nLCAnT04nLFxuICAnbicsICdOJywgJ25vJywgJ05vJywgJ05PJywgJ29mZicsICdPZmYnLCAnT0ZGJ1xuXTtcblxudmFyIERFUFJFQ0FURURfQkFTRTYwX1NZTlRBWCA9IC9eWy0rXT9bMC05X10rKD86OlswLTlfXSspKyg/OlxcLlswLTlfXSopPyQvO1xuXG5mdW5jdGlvbiBjb21waWxlU3R5bGVNYXAoc2NoZW1hLCBtYXApIHtcbiAgdmFyIHJlc3VsdCwga2V5cywgaW5kZXgsIGxlbmd0aCwgdGFnLCBzdHlsZSwgdHlwZTtcblxuICBpZiAobWFwID09PSBudWxsKSByZXR1cm4ge307XG5cbiAgcmVzdWx0ID0ge307XG4gIGtleXMgPSBPYmplY3Qua2V5cyhtYXApO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBrZXlzLmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICB0YWcgPSBrZXlzW2luZGV4XTtcbiAgICBzdHlsZSA9IFN0cmluZyhtYXBbdGFnXSk7XG5cbiAgICBpZiAodGFnLnNsaWNlKDAsIDIpID09PSAnISEnKSB7XG4gICAgICB0YWcgPSAndGFnOnlhbWwub3JnLDIwMDI6JyArIHRhZy5zbGljZSgyKTtcbiAgICB9XG4gICAgdHlwZSA9IHNjaGVtYS5jb21waWxlZFR5cGVNYXBbJ2ZhbGxiYWNrJ11bdGFnXTtcblxuICAgIGlmICh0eXBlICYmIF9oYXNPd25Qcm9wZXJ0eS5jYWxsKHR5cGUuc3R5bGVBbGlhc2VzLCBzdHlsZSkpIHtcbiAgICAgIHN0eWxlID0gdHlwZS5zdHlsZUFsaWFzZXNbc3R5bGVdO1xuICAgIH1cblxuICAgIHJlc3VsdFt0YWddID0gc3R5bGU7XG4gIH1cblxuICByZXR1cm4gcmVzdWx0O1xufVxuXG5mdW5jdGlvbiBlbmNvZGVIZXgoY2hhcmFjdGVyKSB7XG4gIHZhciBzdHJpbmcsIGhhbmRsZSwgbGVuZ3RoO1xuXG4gIHN0cmluZyA9IGNoYXJhY3Rlci50b1N0cmluZygxNikudG9VcHBlckNhc2UoKTtcblxuICBpZiAoY2hhcmFjdGVyIDw9IDB4RkYpIHtcbiAgICBoYW5kbGUgPSAneCc7XG4gICAgbGVuZ3RoID0gMjtcbiAgfSBlbHNlIGlmIChjaGFyYWN0ZXIgPD0gMHhGRkZGKSB7XG4gICAgaGFuZGxlID0gJ3UnO1xuICAgIGxlbmd0aCA9IDQ7XG4gIH0gZWxzZSBpZiAoY2hhcmFjdGVyIDw9IDB4RkZGRkZGRkYpIHtcbiAgICBoYW5kbGUgPSAnVSc7XG4gICAgbGVuZ3RoID0gODtcbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdjb2RlIHBvaW50IHdpdGhpbiBhIHN0cmluZyBtYXkgbm90IGJlIGdyZWF0ZXIgdGhhbiAweEZGRkZGRkZGJyk7XG4gIH1cblxuICByZXR1cm4gJ1xcXFwnICsgaGFuZGxlICsgY29tbW9uLnJlcGVhdCgnMCcsIGxlbmd0aCAtIHN0cmluZy5sZW5ndGgpICsgc3RyaW5nO1xufVxuXG5cbnZhciBRVU9USU5HX1RZUEVfU0lOR0xFID0gMSxcbiAgICBRVU9USU5HX1RZUEVfRE9VQkxFID0gMjtcblxuZnVuY3Rpb24gU3RhdGUob3B0aW9ucykge1xuICB0aGlzLnNjaGVtYSAgICAgICAgPSBvcHRpb25zWydzY2hlbWEnXSB8fCBfZGVmYXVsdDtcbiAgdGhpcy5pbmRlbnQgICAgICAgID0gTWF0aC5tYXgoMSwgKG9wdGlvbnNbJ2luZGVudCddIHx8IDIpKTtcbiAgdGhpcy5ub0FycmF5SW5kZW50ID0gb3B0aW9uc1snbm9BcnJheUluZGVudCddIHx8IGZhbHNlO1xuICB0aGlzLnNraXBJbnZhbGlkICAgPSBvcHRpb25zWydza2lwSW52YWxpZCddIHx8IGZhbHNlO1xuICB0aGlzLmZsb3dMZXZlbCAgICAgPSAoY29tbW9uLmlzTm90aGluZyhvcHRpb25zWydmbG93TGV2ZWwnXSkgPyAtMSA6IG9wdGlvbnNbJ2Zsb3dMZXZlbCddKTtcbiAgdGhpcy5zdHlsZU1hcCAgICAgID0gY29tcGlsZVN0eWxlTWFwKHRoaXMuc2NoZW1hLCBvcHRpb25zWydzdHlsZXMnXSB8fCBudWxsKTtcbiAgdGhpcy5zb3J0S2V5cyAgICAgID0gb3B0aW9uc1snc29ydEtleXMnXSB8fCBmYWxzZTtcbiAgdGhpcy5saW5lV2lkdGggICAgID0gb3B0aW9uc1snbGluZVdpZHRoJ10gfHwgODA7XG4gIHRoaXMubm9SZWZzICAgICAgICA9IG9wdGlvbnNbJ25vUmVmcyddIHx8IGZhbHNlO1xuICB0aGlzLm5vQ29tcGF0TW9kZSAgPSBvcHRpb25zWydub0NvbXBhdE1vZGUnXSB8fCBmYWxzZTtcbiAgdGhpcy5jb25kZW5zZUZsb3cgID0gb3B0aW9uc1snY29uZGVuc2VGbG93J10gfHwgZmFsc2U7XG4gIHRoaXMucXVvdGluZ1R5cGUgICA9IG9wdGlvbnNbJ3F1b3RpbmdUeXBlJ10gPT09ICdcIicgPyBRVU9USU5HX1RZUEVfRE9VQkxFIDogUVVPVElOR19UWVBFX1NJTkdMRTtcbiAgdGhpcy5mb3JjZVF1b3RlcyAgID0gb3B0aW9uc1snZm9yY2VRdW90ZXMnXSB8fCBmYWxzZTtcbiAgdGhpcy5yZXBsYWNlciAgICAgID0gdHlwZW9mIG9wdGlvbnNbJ3JlcGxhY2VyJ10gPT09ICdmdW5jdGlvbicgPyBvcHRpb25zWydyZXBsYWNlciddIDogbnVsbDtcblxuICB0aGlzLmltcGxpY2l0VHlwZXMgPSB0aGlzLnNjaGVtYS5jb21waWxlZEltcGxpY2l0O1xuICB0aGlzLmV4cGxpY2l0VHlwZXMgPSB0aGlzLnNjaGVtYS5jb21waWxlZEV4cGxpY2l0O1xuXG4gIHRoaXMudGFnID0gbnVsbDtcbiAgdGhpcy5yZXN1bHQgPSAnJztcblxuICB0aGlzLmR1cGxpY2F0ZXMgPSBbXTtcbiAgdGhpcy51c2VkRHVwbGljYXRlcyA9IG51bGw7XG59XG5cbi8vIEluZGVudHMgZXZlcnkgbGluZSBpbiBhIHN0cmluZy4gRW1wdHkgbGluZXMgKFxcbiBvbmx5KSBhcmUgbm90IGluZGVudGVkLlxuZnVuY3Rpb24gaW5kZW50U3RyaW5nKHN0cmluZywgc3BhY2VzKSB7XG4gIHZhciBpbmQgPSBjb21tb24ucmVwZWF0KCcgJywgc3BhY2VzKSxcbiAgICAgIHBvc2l0aW9uID0gMCxcbiAgICAgIG5leHQgPSAtMSxcbiAgICAgIHJlc3VsdCA9ICcnLFxuICAgICAgbGluZSxcbiAgICAgIGxlbmd0aCA9IHN0cmluZy5sZW5ndGg7XG5cbiAgd2hpbGUgKHBvc2l0aW9uIDwgbGVuZ3RoKSB7XG4gICAgbmV4dCA9IHN0cmluZy5pbmRleE9mKCdcXG4nLCBwb3NpdGlvbik7XG4gICAgaWYgKG5leHQgPT09IC0xKSB7XG4gICAgICBsaW5lID0gc3RyaW5nLnNsaWNlKHBvc2l0aW9uKTtcbiAgICAgIHBvc2l0aW9uID0gbGVuZ3RoO1xuICAgIH0gZWxzZSB7XG4gICAgICBsaW5lID0gc3RyaW5nLnNsaWNlKHBvc2l0aW9uLCBuZXh0ICsgMSk7XG4gICAgICBwb3NpdGlvbiA9IG5leHQgKyAxO1xuICAgIH1cblxuICAgIGlmIChsaW5lLmxlbmd0aCAmJiBsaW5lICE9PSAnXFxuJykgcmVzdWx0ICs9IGluZDtcblxuICAgIHJlc3VsdCArPSBsaW5lO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gZ2VuZXJhdGVOZXh0TGluZShzdGF0ZSwgbGV2ZWwpIHtcbiAgcmV0dXJuICdcXG4nICsgY29tbW9uLnJlcGVhdCgnICcsIHN0YXRlLmluZGVudCAqIGxldmVsKTtcbn1cblxuZnVuY3Rpb24gdGVzdEltcGxpY2l0UmVzb2x2aW5nKHN0YXRlLCBzdHIpIHtcbiAgdmFyIGluZGV4LCBsZW5ndGgsIHR5cGU7XG5cbiAgZm9yIChpbmRleCA9IDAsIGxlbmd0aCA9IHN0YXRlLmltcGxpY2l0VHlwZXMubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHR5cGUgPSBzdGF0ZS5pbXBsaWNpdFR5cGVzW2luZGV4XTtcblxuICAgIGlmICh0eXBlLnJlc29sdmUoc3RyKSkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGZhbHNlO1xufVxuXG4vLyBbMzNdIHMtd2hpdGUgOjo9IHMtc3BhY2UgfCBzLXRhYlxuZnVuY3Rpb24gaXNXaGl0ZXNwYWNlKGMpIHtcbiAgcmV0dXJuIGMgPT09IENIQVJfU1BBQ0UgfHwgYyA9PT0gQ0hBUl9UQUI7XG59XG5cbi8vIFJldHVybnMgdHJ1ZSBpZiB0aGUgY2hhcmFjdGVyIGNhbiBiZSBwcmludGVkIHdpdGhvdXQgZXNjYXBpbmcuXG4vLyBGcm9tIFlBTUwgMS4yOiBcImFueSBhbGxvd2VkIGNoYXJhY3RlcnMga25vd24gdG8gYmUgbm9uLXByaW50YWJsZVxuLy8gc2hvdWxkIGFsc28gYmUgZXNjYXBlZC4gW0hvd2V2ZXIsXSBUaGlzIGlzblx1MjAxOXQgbWFuZGF0b3J5XCJcbi8vIERlcml2ZWQgZnJvbSBuYi1jaGFyIC0gXFx0IC0gI3g4NSAtICN4QTAgLSAjeDIwMjggLSAjeDIwMjkuXG5mdW5jdGlvbiBpc1ByaW50YWJsZShjKSB7XG4gIHJldHVybiAgKDB4MDAwMjAgPD0gYyAmJiBjIDw9IDB4MDAwMDdFKVxuICAgICAgfHwgKCgweDAwMEExIDw9IGMgJiYgYyA8PSAweDAwRDdGRikgJiYgYyAhPT0gMHgyMDI4ICYmIGMgIT09IDB4MjAyOSlcbiAgICAgIHx8ICgoMHgwRTAwMCA8PSBjICYmIGMgPD0gMHgwMEZGRkQpICYmIGMgIT09IENIQVJfQk9NKVxuICAgICAgfHwgICgweDEwMDAwIDw9IGMgJiYgYyA8PSAweDEwRkZGRik7XG59XG5cbi8vIFszNF0gbnMtY2hhciA6Oj0gbmItY2hhciAtIHMtd2hpdGVcbi8vIFsyN10gbmItY2hhciA6Oj0gYy1wcmludGFibGUgLSBiLWNoYXIgLSBjLWJ5dGUtb3JkZXItbWFya1xuLy8gWzI2XSBiLWNoYXIgIDo6PSBiLWxpbmUtZmVlZCB8IGItY2FycmlhZ2UtcmV0dXJuXG4vLyBJbmNsdWRpbmcgcy13aGl0ZSAoZm9yIHNvbWUgcmVhc29uLCBleGFtcGxlcyBkb2Vzbid0IG1hdGNoIHNwZWNzIGluIHRoaXMgYXNwZWN0KVxuLy8gbnMtY2hhciA6Oj0gYy1wcmludGFibGUgLSBiLWxpbmUtZmVlZCAtIGItY2FycmlhZ2UtcmV0dXJuIC0gYy1ieXRlLW9yZGVyLW1hcmtcbmZ1bmN0aW9uIGlzTnNDaGFyT3JXaGl0ZXNwYWNlKGMpIHtcbiAgcmV0dXJuIGlzUHJpbnRhYmxlKGMpXG4gICAgJiYgYyAhPT0gQ0hBUl9CT01cbiAgICAvLyAtIGItY2hhclxuICAgICYmIGMgIT09IENIQVJfQ0FSUklBR0VfUkVUVVJOXG4gICAgJiYgYyAhPT0gQ0hBUl9MSU5FX0ZFRUQ7XG59XG5cbi8vIFsxMjddICBucy1wbGFpbi1zYWZlKGMpIDo6PSBjID0gZmxvdy1vdXQgIFx1MjFEMiBucy1wbGFpbi1zYWZlLW91dFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBmbG93LWluICAgXHUyMUQyIG5zLXBsYWluLXNhZmUtaW5cbi8vICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjID0gYmxvY2sta2V5IFx1MjFEMiBucy1wbGFpbi1zYWZlLW91dFxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgIGMgPSBmbG93LWtleSAgXHUyMUQyIG5zLXBsYWluLXNhZmUtaW5cbi8vIFsxMjhdIG5zLXBsYWluLXNhZmUtb3V0IDo6PSBucy1jaGFyXG4vLyBbMTI5XSAgbnMtcGxhaW4tc2FmZS1pbiA6Oj0gbnMtY2hhciAtIGMtZmxvdy1pbmRpY2F0b3Jcbi8vIFsxMzBdICBucy1wbGFpbi1jaGFyKGMpIDo6PSAgKCBucy1wbGFpbi1zYWZlKGMpIC0gXHUyMDFDOlx1MjAxRCAtIFx1MjAxQyNcdTIwMUQgKVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoIC8qIEFuIG5zLWNoYXIgcHJlY2VkaW5nICovIFx1MjAxQyNcdTIwMUQgKVxuLy8gICAgICAgICAgICAgICAgICAgICAgICAgICAgfCAoIFx1MjAxQzpcdTIwMUQgLyogRm9sbG93ZWQgYnkgYW4gbnMtcGxhaW4tc2FmZShjKSAqLyApXG5mdW5jdGlvbiBpc1BsYWluU2FmZShjLCBwcmV2LCBpbmJsb2NrKSB7XG4gIHZhciBjSXNOc0NoYXJPcldoaXRlc3BhY2UgPSBpc05zQ2hhck9yV2hpdGVzcGFjZShjKTtcbiAgdmFyIGNJc05zQ2hhciA9IGNJc05zQ2hhck9yV2hpdGVzcGFjZSAmJiAhaXNXaGl0ZXNwYWNlKGMpO1xuICByZXR1cm4gKFxuICAgIC8vIG5zLXBsYWluLXNhZmVcbiAgICBpbmJsb2NrID8gLy8gYyA9IGZsb3ctaW5cbiAgICAgIGNJc05zQ2hhck9yV2hpdGVzcGFjZVxuICAgICAgOiBjSXNOc0NoYXJPcldoaXRlc3BhY2VcbiAgICAgICAgLy8gLSBjLWZsb3ctaW5kaWNhdG9yXG4gICAgICAgICYmIGMgIT09IENIQVJfQ09NTUFcbiAgICAgICAgJiYgYyAhPT0gQ0hBUl9MRUZUX1NRVUFSRV9CUkFDS0VUXG4gICAgICAgICYmIGMgIT09IENIQVJfUklHSFRfU1FVQVJFX0JSQUNLRVRcbiAgICAgICAgJiYgYyAhPT0gQ0hBUl9MRUZUX0NVUkxZX0JSQUNLRVRcbiAgICAgICAgJiYgYyAhPT0gQ0hBUl9SSUdIVF9DVVJMWV9CUkFDS0VUXG4gIClcbiAgICAvLyBucy1wbGFpbi1jaGFyXG4gICAgJiYgYyAhPT0gQ0hBUl9TSEFSUCAvLyBmYWxzZSBvbiAnIydcbiAgICAmJiAhKHByZXYgPT09IENIQVJfQ09MT04gJiYgIWNJc05zQ2hhcikgLy8gZmFsc2Ugb24gJzogJ1xuICAgIHx8IChpc05zQ2hhck9yV2hpdGVzcGFjZShwcmV2KSAmJiAhaXNXaGl0ZXNwYWNlKHByZXYpICYmIGMgPT09IENIQVJfU0hBUlApIC8vIGNoYW5nZSB0byB0cnVlIG9uICdbXiBdIydcbiAgICB8fCAocHJldiA9PT0gQ0hBUl9DT0xPTiAmJiBjSXNOc0NoYXIpOyAvLyBjaGFuZ2UgdG8gdHJ1ZSBvbiAnOlteIF0nXG59XG5cbi8vIFNpbXBsaWZpZWQgdGVzdCBmb3IgdmFsdWVzIGFsbG93ZWQgYXMgdGhlIGZpcnN0IGNoYXJhY3RlciBpbiBwbGFpbiBzdHlsZS5cbmZ1bmN0aW9uIGlzUGxhaW5TYWZlRmlyc3QoYykge1xuICAvLyBVc2VzIGEgc3Vic2V0IG9mIG5zLWNoYXIgLSBjLWluZGljYXRvclxuICAvLyB3aGVyZSBucy1jaGFyID0gbmItY2hhciAtIHMtd2hpdGUuXG4gIC8vIE5vIHN1cHBvcnQgb2YgKCAoIFx1MjAxQz9cdTIwMUQgfCBcdTIwMUM6XHUyMDFEIHwgXHUyMDFDLVx1MjAxRCApIC8qIEZvbGxvd2VkIGJ5IGFuIG5zLXBsYWluLXNhZmUoYykpICovICkgcGFydFxuICByZXR1cm4gaXNQcmludGFibGUoYykgJiYgYyAhPT0gQ0hBUl9CT01cbiAgICAmJiAhaXNXaGl0ZXNwYWNlKGMpIC8vIC0gcy13aGl0ZVxuICAgIC8vIC0gKGMtaW5kaWNhdG9yIDo6PVxuICAgIC8vIFx1MjAxQy1cdTIwMUQgfCBcdTIwMUM/XHUyMDFEIHwgXHUyMDFDOlx1MjAxRCB8IFx1MjAxQyxcdTIwMUQgfCBcdTIwMUNbXHUyMDFEIHwgXHUyMDFDXVx1MjAxRCB8IFx1MjAxQ3tcdTIwMUQgfCBcdTIwMUN9XHUyMDFEXG4gICAgJiYgYyAhPT0gQ0hBUl9NSU5VU1xuICAgICYmIGMgIT09IENIQVJfUVVFU1RJT05cbiAgICAmJiBjICE9PSBDSEFSX0NPTE9OXG4gICAgJiYgYyAhPT0gQ0hBUl9DT01NQVxuICAgICYmIGMgIT09IENIQVJfTEVGVF9TUVVBUkVfQlJBQ0tFVFxuICAgICYmIGMgIT09IENIQVJfUklHSFRfU1FVQVJFX0JSQUNLRVRcbiAgICAmJiBjICE9PSBDSEFSX0xFRlRfQ1VSTFlfQlJBQ0tFVFxuICAgICYmIGMgIT09IENIQVJfUklHSFRfQ1VSTFlfQlJBQ0tFVFxuICAgIC8vIHwgXHUyMDFDI1x1MjAxRCB8IFx1MjAxQyZcdTIwMUQgfCBcdTIwMUMqXHUyMDFEIHwgXHUyMDFDIVx1MjAxRCB8IFx1MjAxQ3xcdTIwMUQgfCBcdTIwMUM9XHUyMDFEIHwgXHUyMDFDPlx1MjAxRCB8IFx1MjAxQydcdTIwMUQgfCBcdTIwMUNcIlx1MjAxRFxuICAgICYmIGMgIT09IENIQVJfU0hBUlBcbiAgICAmJiBjICE9PSBDSEFSX0FNUEVSU0FORFxuICAgICYmIGMgIT09IENIQVJfQVNURVJJU0tcbiAgICAmJiBjICE9PSBDSEFSX0VYQ0xBTUFUSU9OXG4gICAgJiYgYyAhPT0gQ0hBUl9WRVJUSUNBTF9MSU5FXG4gICAgJiYgYyAhPT0gQ0hBUl9FUVVBTFNcbiAgICAmJiBjICE9PSBDSEFSX0dSRUFURVJfVEhBTlxuICAgICYmIGMgIT09IENIQVJfU0lOR0xFX1FVT1RFXG4gICAgJiYgYyAhPT0gQ0hBUl9ET1VCTEVfUVVPVEVcbiAgICAvLyB8IFx1MjAxQyVcdTIwMUQgfCBcdTIwMUNAXHUyMDFEIHwgXHUyMDFDYFx1MjAxRClcbiAgICAmJiBjICE9PSBDSEFSX1BFUkNFTlRcbiAgICAmJiBjICE9PSBDSEFSX0NPTU1FUkNJQUxfQVRcbiAgICAmJiBjICE9PSBDSEFSX0dSQVZFX0FDQ0VOVDtcbn1cblxuLy8gU2ltcGxpZmllZCB0ZXN0IGZvciB2YWx1ZXMgYWxsb3dlZCBhcyB0aGUgbGFzdCBjaGFyYWN0ZXIgaW4gcGxhaW4gc3R5bGUuXG5mdW5jdGlvbiBpc1BsYWluU2FmZUxhc3QoYykge1xuICAvLyBqdXN0IG5vdCB3aGl0ZXNwYWNlIG9yIGNvbG9uLCBpdCB3aWxsIGJlIGNoZWNrZWQgdG8gYmUgcGxhaW4gY2hhcmFjdGVyIGxhdGVyXG4gIHJldHVybiAhaXNXaGl0ZXNwYWNlKGMpICYmIGMgIT09IENIQVJfQ09MT047XG59XG5cbi8vIFNhbWUgYXMgJ3N0cmluZycuY29kZVBvaW50QXQocG9zKSwgYnV0IHdvcmtzIGluIG9sZGVyIGJyb3dzZXJzLlxuZnVuY3Rpb24gY29kZVBvaW50QXQoc3RyaW5nLCBwb3MpIHtcbiAgdmFyIGZpcnN0ID0gc3RyaW5nLmNoYXJDb2RlQXQocG9zKSwgc2Vjb25kO1xuICBpZiAoZmlyc3QgPj0gMHhEODAwICYmIGZpcnN0IDw9IDB4REJGRiAmJiBwb3MgKyAxIDwgc3RyaW5nLmxlbmd0aCkge1xuICAgIHNlY29uZCA9IHN0cmluZy5jaGFyQ29kZUF0KHBvcyArIDEpO1xuICAgIGlmIChzZWNvbmQgPj0gMHhEQzAwICYmIHNlY29uZCA8PSAweERGRkYpIHtcbiAgICAgIC8vIGh0dHBzOi8vbWF0aGlhc2J5bmVucy5iZS9ub3Rlcy9qYXZhc2NyaXB0LWVuY29kaW5nI3N1cnJvZ2F0ZS1mb3JtdWxhZVxuICAgICAgcmV0dXJuIChmaXJzdCAtIDB4RDgwMCkgKiAweDQwMCArIHNlY29uZCAtIDB4REMwMCArIDB4MTAwMDA7XG4gICAgfVxuICB9XG4gIHJldHVybiBmaXJzdDtcbn1cblxuLy8gRGV0ZXJtaW5lcyB3aGV0aGVyIGJsb2NrIGluZGVudGF0aW9uIGluZGljYXRvciBpcyByZXF1aXJlZC5cbmZ1bmN0aW9uIG5lZWRJbmRlbnRJbmRpY2F0b3Ioc3RyaW5nKSB7XG4gIHZhciBsZWFkaW5nU3BhY2VSZSA9IC9eXFxuKiAvO1xuICByZXR1cm4gbGVhZGluZ1NwYWNlUmUudGVzdChzdHJpbmcpO1xufVxuXG52YXIgU1RZTEVfUExBSU4gICA9IDEsXG4gICAgU1RZTEVfU0lOR0xFICA9IDIsXG4gICAgU1RZTEVfTElURVJBTCA9IDMsXG4gICAgU1RZTEVfRk9MREVEICA9IDQsXG4gICAgU1RZTEVfRE9VQkxFICA9IDU7XG5cbi8vIERldGVybWluZXMgd2hpY2ggc2NhbGFyIHN0eWxlcyBhcmUgcG9zc2libGUgYW5kIHJldHVybnMgdGhlIHByZWZlcnJlZCBzdHlsZS5cbi8vIGxpbmVXaWR0aCA9IC0xID0+IG5vIGxpbWl0LlxuLy8gUHJlLWNvbmRpdGlvbnM6IHN0ci5sZW5ndGggPiAwLlxuLy8gUG9zdC1jb25kaXRpb25zOlxuLy8gICAgU1RZTEVfUExBSU4gb3IgU1RZTEVfU0lOR0xFID0+IG5vIFxcbiBhcmUgaW4gdGhlIHN0cmluZy5cbi8vICAgIFNUWUxFX0xJVEVSQUwgPT4gbm8gbGluZXMgYXJlIHN1aXRhYmxlIGZvciBmb2xkaW5nIChvciBsaW5lV2lkdGggaXMgLTEpLlxuLy8gICAgU1RZTEVfRk9MREVEID0+IGEgbGluZSA+IGxpbmVXaWR0aCBhbmQgY2FuIGJlIGZvbGRlZCAoYW5kIGxpbmVXaWR0aCAhPSAtMSkuXG5mdW5jdGlvbiBjaG9vc2VTY2FsYXJTdHlsZShzdHJpbmcsIHNpbmdsZUxpbmVPbmx5LCBpbmRlbnRQZXJMZXZlbCwgbGluZVdpZHRoLFxuICB0ZXN0QW1iaWd1b3VzVHlwZSwgcXVvdGluZ1R5cGUsIGZvcmNlUXVvdGVzLCBpbmJsb2NrKSB7XG5cbiAgdmFyIGk7XG4gIHZhciBjaGFyID0gMDtcbiAgdmFyIHByZXZDaGFyID0gbnVsbDtcbiAgdmFyIGhhc0xpbmVCcmVhayA9IGZhbHNlO1xuICB2YXIgaGFzRm9sZGFibGVMaW5lID0gZmFsc2U7IC8vIG9ubHkgY2hlY2tlZCBpZiBzaG91bGRUcmFja1dpZHRoXG4gIHZhciBzaG91bGRUcmFja1dpZHRoID0gbGluZVdpZHRoICE9PSAtMTtcbiAgdmFyIHByZXZpb3VzTGluZUJyZWFrID0gLTE7IC8vIGNvdW50IHRoZSBmaXJzdCBsaW5lIGNvcnJlY3RseVxuICB2YXIgcGxhaW4gPSBpc1BsYWluU2FmZUZpcnN0KGNvZGVQb2ludEF0KHN0cmluZywgMCkpXG4gICAgICAgICAgJiYgaXNQbGFpblNhZmVMYXN0KGNvZGVQb2ludEF0KHN0cmluZywgc3RyaW5nLmxlbmd0aCAtIDEpKTtcblxuICBpZiAoc2luZ2xlTGluZU9ubHkgfHwgZm9yY2VRdW90ZXMpIHtcbiAgICAvLyBDYXNlOiBubyBibG9jayBzdHlsZXMuXG4gICAgLy8gQ2hlY2sgZm9yIGRpc2FsbG93ZWQgY2hhcmFjdGVycyB0byBydWxlIG91dCBwbGFpbiBhbmQgc2luZ2xlLlxuICAgIGZvciAoaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBjaGFyID49IDB4MTAwMDAgPyBpICs9IDIgOiBpKyspIHtcbiAgICAgIGNoYXIgPSBjb2RlUG9pbnRBdChzdHJpbmcsIGkpO1xuICAgICAgaWYgKCFpc1ByaW50YWJsZShjaGFyKSkge1xuICAgICAgICByZXR1cm4gU1RZTEVfRE9VQkxFO1xuICAgICAgfVxuICAgICAgcGxhaW4gPSBwbGFpbiAmJiBpc1BsYWluU2FmZShjaGFyLCBwcmV2Q2hhciwgaW5ibG9jayk7XG4gICAgICBwcmV2Q2hhciA9IGNoYXI7XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIC8vIENhc2U6IGJsb2NrIHN0eWxlcyBwZXJtaXR0ZWQuXG4gICAgZm9yIChpID0gMDsgaSA8IHN0cmluZy5sZW5ndGg7IGNoYXIgPj0gMHgxMDAwMCA/IGkgKz0gMiA6IGkrKykge1xuICAgICAgY2hhciA9IGNvZGVQb2ludEF0KHN0cmluZywgaSk7XG4gICAgICBpZiAoY2hhciA9PT0gQ0hBUl9MSU5FX0ZFRUQpIHtcbiAgICAgICAgaGFzTGluZUJyZWFrID0gdHJ1ZTtcbiAgICAgICAgLy8gQ2hlY2sgaWYgYW55IGxpbmUgY2FuIGJlIGZvbGRlZC5cbiAgICAgICAgaWYgKHNob3VsZFRyYWNrV2lkdGgpIHtcbiAgICAgICAgICBoYXNGb2xkYWJsZUxpbmUgPSBoYXNGb2xkYWJsZUxpbmUgfHxcbiAgICAgICAgICAgIC8vIEZvbGRhYmxlIGxpbmUgPSB0b28gbG9uZywgYW5kIG5vdCBtb3JlLWluZGVudGVkLlxuICAgICAgICAgICAgKGkgLSBwcmV2aW91c0xpbmVCcmVhayAtIDEgPiBsaW5lV2lkdGggJiZcbiAgICAgICAgICAgICBzdHJpbmdbcHJldmlvdXNMaW5lQnJlYWsgKyAxXSAhPT0gJyAnKTtcbiAgICAgICAgICBwcmV2aW91c0xpbmVCcmVhayA9IGk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSBpZiAoIWlzUHJpbnRhYmxlKGNoYXIpKSB7XG4gICAgICAgIHJldHVybiBTVFlMRV9ET1VCTEU7XG4gICAgICB9XG4gICAgICBwbGFpbiA9IHBsYWluICYmIGlzUGxhaW5TYWZlKGNoYXIsIHByZXZDaGFyLCBpbmJsb2NrKTtcbiAgICAgIHByZXZDaGFyID0gY2hhcjtcbiAgICB9XG4gICAgLy8gaW4gY2FzZSB0aGUgZW5kIGlzIG1pc3NpbmcgYSBcXG5cbiAgICBoYXNGb2xkYWJsZUxpbmUgPSBoYXNGb2xkYWJsZUxpbmUgfHwgKHNob3VsZFRyYWNrV2lkdGggJiZcbiAgICAgIChpIC0gcHJldmlvdXNMaW5lQnJlYWsgLSAxID4gbGluZVdpZHRoICYmXG4gICAgICAgc3RyaW5nW3ByZXZpb3VzTGluZUJyZWFrICsgMV0gIT09ICcgJykpO1xuICB9XG4gIC8vIEFsdGhvdWdoIGV2ZXJ5IHN0eWxlIGNhbiByZXByZXNlbnQgXFxuIHdpdGhvdXQgZXNjYXBpbmcsIHByZWZlciBibG9jayBzdHlsZXNcbiAgLy8gZm9yIG11bHRpbGluZSwgc2luY2UgdGhleSdyZSBtb3JlIHJlYWRhYmxlIGFuZCB0aGV5IGRvbid0IGFkZCBlbXB0eSBsaW5lcy5cbiAgLy8gQWxzbyBwcmVmZXIgZm9sZGluZyBhIHN1cGVyLWxvbmcgbGluZS5cbiAgaWYgKCFoYXNMaW5lQnJlYWsgJiYgIWhhc0ZvbGRhYmxlTGluZSkge1xuICAgIC8vIFN0cmluZ3MgaW50ZXJwcmV0YWJsZSBhcyBhbm90aGVyIHR5cGUgaGF2ZSB0byBiZSBxdW90ZWQ7XG4gICAgLy8gZS5nLiB0aGUgc3RyaW5nICd0cnVlJyB2cy4gdGhlIGJvb2xlYW4gdHJ1ZS5cbiAgICBpZiAocGxhaW4gJiYgIWZvcmNlUXVvdGVzICYmICF0ZXN0QW1iaWd1b3VzVHlwZShzdHJpbmcpKSB7XG4gICAgICByZXR1cm4gU1RZTEVfUExBSU47XG4gICAgfVxuICAgIHJldHVybiBxdW90aW5nVHlwZSA9PT0gUVVPVElOR19UWVBFX0RPVUJMRSA/IFNUWUxFX0RPVUJMRSA6IFNUWUxFX1NJTkdMRTtcbiAgfVxuICAvLyBFZGdlIGNhc2U6IGJsb2NrIGluZGVudGF0aW9uIGluZGljYXRvciBjYW4gb25seSBoYXZlIG9uZSBkaWdpdC5cbiAgaWYgKGluZGVudFBlckxldmVsID4gOSAmJiBuZWVkSW5kZW50SW5kaWNhdG9yKHN0cmluZykpIHtcbiAgICByZXR1cm4gU1RZTEVfRE9VQkxFO1xuICB9XG4gIC8vIEF0IHRoaXMgcG9pbnQgd2Uga25vdyBibG9jayBzdHlsZXMgYXJlIHZhbGlkLlxuICAvLyBQcmVmZXIgbGl0ZXJhbCBzdHlsZSB1bmxlc3Mgd2Ugd2FudCB0byBmb2xkLlxuICBpZiAoIWZvcmNlUXVvdGVzKSB7XG4gICAgcmV0dXJuIGhhc0ZvbGRhYmxlTGluZSA/IFNUWUxFX0ZPTERFRCA6IFNUWUxFX0xJVEVSQUw7XG4gIH1cbiAgcmV0dXJuIHF1b3RpbmdUeXBlID09PSBRVU9USU5HX1RZUEVfRE9VQkxFID8gU1RZTEVfRE9VQkxFIDogU1RZTEVfU0lOR0xFO1xufVxuXG4vLyBOb3RlOiBsaW5lIGJyZWFraW5nL2ZvbGRpbmcgaXMgaW1wbGVtZW50ZWQgZm9yIG9ubHkgdGhlIGZvbGRlZCBzdHlsZS5cbi8vIE5CLiBXZSBkcm9wIHRoZSBsYXN0IHRyYWlsaW5nIG5ld2xpbmUgKGlmIGFueSkgb2YgYSByZXR1cm5lZCBibG9jayBzY2FsYXJcbi8vICBzaW5jZSB0aGUgZHVtcGVyIGFkZHMgaXRzIG93biBuZXdsaW5lLiBUaGlzIGFsd2F5cyB3b3Jrczpcbi8vICAgIFx1MjAyMiBObyBlbmRpbmcgbmV3bGluZSA9PiB1bmFmZmVjdGVkOyBhbHJlYWR5IHVzaW5nIHN0cmlwIFwiLVwiIGNob21waW5nLlxuLy8gICAgXHUyMDIyIEVuZGluZyBuZXdsaW5lICAgID0+IHJlbW92ZWQgdGhlbiByZXN0b3JlZC5cbi8vICBJbXBvcnRhbnRseSwgdGhpcyBrZWVwcyB0aGUgXCIrXCIgY2hvbXAgaW5kaWNhdG9yIGZyb20gZ2FpbmluZyBhbiBleHRyYSBsaW5lLlxuZnVuY3Rpb24gd3JpdGVTY2FsYXIoc3RhdGUsIHN0cmluZywgbGV2ZWwsIGlza2V5LCBpbmJsb2NrKSB7XG4gIHN0YXRlLmR1bXAgPSAoZnVuY3Rpb24gKCkge1xuICAgIGlmIChzdHJpbmcubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gc3RhdGUucXVvdGluZ1R5cGUgPT09IFFVT1RJTkdfVFlQRV9ET1VCTEUgPyAnXCJcIicgOiBcIicnXCI7XG4gICAgfVxuICAgIGlmICghc3RhdGUubm9Db21wYXRNb2RlKSB7XG4gICAgICBpZiAoREVQUkVDQVRFRF9CT09MRUFOU19TWU5UQVguaW5kZXhPZihzdHJpbmcpICE9PSAtMSB8fCBERVBSRUNBVEVEX0JBU0U2MF9TWU5UQVgudGVzdChzdHJpbmcpKSB7XG4gICAgICAgIHJldHVybiBzdGF0ZS5xdW90aW5nVHlwZSA9PT0gUVVPVElOR19UWVBFX0RPVUJMRSA/ICgnXCInICsgc3RyaW5nICsgJ1wiJykgOiAoXCInXCIgKyBzdHJpbmcgKyBcIidcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgdmFyIGluZGVudCA9IHN0YXRlLmluZGVudCAqIE1hdGgubWF4KDEsIGxldmVsKTsgLy8gbm8gMC1pbmRlbnQgc2NhbGFyc1xuICAgIC8vIEFzIGluZGVudGF0aW9uIGdldHMgZGVlcGVyLCBsZXQgdGhlIHdpZHRoIGRlY3JlYXNlIG1vbm90b25pY2FsbHlcbiAgICAvLyB0byB0aGUgbG93ZXIgYm91bmQgbWluKHN0YXRlLmxpbmVXaWR0aCwgNDApLlxuICAgIC8vIE5vdGUgdGhhdCB0aGlzIGltcGxpZXNcbiAgICAvLyAgc3RhdGUubGluZVdpZHRoIFx1MjI2NCA0MCArIHN0YXRlLmluZGVudDogd2lkdGggaXMgZml4ZWQgYXQgdGhlIGxvd2VyIGJvdW5kLlxuICAgIC8vICBzdGF0ZS5saW5lV2lkdGggPiA0MCArIHN0YXRlLmluZGVudDogd2lkdGggZGVjcmVhc2VzIHVudGlsIHRoZSBsb3dlciBib3VuZC5cbiAgICAvLyBUaGlzIGJlaGF2ZXMgYmV0dGVyIHRoYW4gYSBjb25zdGFudCBtaW5pbXVtIHdpZHRoIHdoaWNoIGRpc2FsbG93cyBuYXJyb3dlciBvcHRpb25zLFxuICAgIC8vIG9yIGFuIGluZGVudCB0aHJlc2hvbGQgd2hpY2ggY2F1c2VzIHRoZSB3aWR0aCB0byBzdWRkZW5seSBpbmNyZWFzZS5cbiAgICB2YXIgbGluZVdpZHRoID0gc3RhdGUubGluZVdpZHRoID09PSAtMVxuICAgICAgPyAtMSA6IE1hdGgubWF4KE1hdGgubWluKHN0YXRlLmxpbmVXaWR0aCwgNDApLCBzdGF0ZS5saW5lV2lkdGggLSBpbmRlbnQpO1xuXG4gICAgLy8gV2l0aG91dCBrbm93aW5nIGlmIGtleXMgYXJlIGltcGxpY2l0L2V4cGxpY2l0LCBhc3N1bWUgaW1wbGljaXQgZm9yIHNhZmV0eS5cbiAgICB2YXIgc2luZ2xlTGluZU9ubHkgPSBpc2tleVxuICAgICAgLy8gTm8gYmxvY2sgc3R5bGVzIGluIGZsb3cgbW9kZS5cbiAgICAgIHx8IChzdGF0ZS5mbG93TGV2ZWwgPiAtMSAmJiBsZXZlbCA+PSBzdGF0ZS5mbG93TGV2ZWwpO1xuICAgIGZ1bmN0aW9uIHRlc3RBbWJpZ3VpdHkoc3RyaW5nKSB7XG4gICAgICByZXR1cm4gdGVzdEltcGxpY2l0UmVzb2x2aW5nKHN0YXRlLCBzdHJpbmcpO1xuICAgIH1cblxuICAgIHN3aXRjaCAoY2hvb3NlU2NhbGFyU3R5bGUoc3RyaW5nLCBzaW5nbGVMaW5lT25seSwgc3RhdGUuaW5kZW50LCBsaW5lV2lkdGgsXG4gICAgICB0ZXN0QW1iaWd1aXR5LCBzdGF0ZS5xdW90aW5nVHlwZSwgc3RhdGUuZm9yY2VRdW90ZXMgJiYgIWlza2V5LCBpbmJsb2NrKSkge1xuXG4gICAgICBjYXNlIFNUWUxFX1BMQUlOOlxuICAgICAgICByZXR1cm4gc3RyaW5nO1xuICAgICAgY2FzZSBTVFlMRV9TSU5HTEU6XG4gICAgICAgIHJldHVybiBcIidcIiArIHN0cmluZy5yZXBsYWNlKC8nL2csIFwiJydcIikgKyBcIidcIjtcbiAgICAgIGNhc2UgU1RZTEVfTElURVJBTDpcbiAgICAgICAgcmV0dXJuICd8JyArIGJsb2NrSGVhZGVyKHN0cmluZywgc3RhdGUuaW5kZW50KVxuICAgICAgICAgICsgZHJvcEVuZGluZ05ld2xpbmUoaW5kZW50U3RyaW5nKHN0cmluZywgaW5kZW50KSk7XG4gICAgICBjYXNlIFNUWUxFX0ZPTERFRDpcbiAgICAgICAgcmV0dXJuICc+JyArIGJsb2NrSGVhZGVyKHN0cmluZywgc3RhdGUuaW5kZW50KVxuICAgICAgICAgICsgZHJvcEVuZGluZ05ld2xpbmUoaW5kZW50U3RyaW5nKGZvbGRTdHJpbmcoc3RyaW5nLCBsaW5lV2lkdGgpLCBpbmRlbnQpKTtcbiAgICAgIGNhc2UgU1RZTEVfRE9VQkxFOlxuICAgICAgICByZXR1cm4gJ1wiJyArIGVzY2FwZVN0cmluZyhzdHJpbmcpICsgJ1wiJztcbiAgICAgIGRlZmF1bHQ6XG4gICAgICAgIHRocm93IG5ldyBleGNlcHRpb24oJ2ltcG9zc2libGUgZXJyb3I6IGludmFsaWQgc2NhbGFyIHN0eWxlJyk7XG4gICAgfVxuICB9KCkpO1xufVxuXG4vLyBQcmUtY29uZGl0aW9uczogc3RyaW5nIGlzIHZhbGlkIGZvciBhIGJsb2NrIHNjYWxhciwgMSA8PSBpbmRlbnRQZXJMZXZlbCA8PSA5LlxuZnVuY3Rpb24gYmxvY2tIZWFkZXIoc3RyaW5nLCBpbmRlbnRQZXJMZXZlbCkge1xuICB2YXIgaW5kZW50SW5kaWNhdG9yID0gbmVlZEluZGVudEluZGljYXRvcihzdHJpbmcpID8gU3RyaW5nKGluZGVudFBlckxldmVsKSA6ICcnO1xuXG4gIC8vIG5vdGUgdGhlIHNwZWNpYWwgY2FzZTogdGhlIHN0cmluZyAnXFxuJyBjb3VudHMgYXMgYSBcInRyYWlsaW5nXCIgZW1wdHkgbGluZS5cbiAgdmFyIGNsaXAgPSAgICAgICAgICBzdHJpbmdbc3RyaW5nLmxlbmd0aCAtIDFdID09PSAnXFxuJztcbiAgdmFyIGtlZXAgPSBjbGlwICYmIChzdHJpbmdbc3RyaW5nLmxlbmd0aCAtIDJdID09PSAnXFxuJyB8fCBzdHJpbmcgPT09ICdcXG4nKTtcbiAgdmFyIGNob21wID0ga2VlcCA/ICcrJyA6IChjbGlwID8gJycgOiAnLScpO1xuXG4gIHJldHVybiBpbmRlbnRJbmRpY2F0b3IgKyBjaG9tcCArICdcXG4nO1xufVxuXG4vLyAoU2VlIHRoZSBub3RlIGZvciB3cml0ZVNjYWxhci4pXG5mdW5jdGlvbiBkcm9wRW5kaW5nTmV3bGluZShzdHJpbmcpIHtcbiAgcmV0dXJuIHN0cmluZ1tzdHJpbmcubGVuZ3RoIC0gMV0gPT09ICdcXG4nID8gc3RyaW5nLnNsaWNlKDAsIC0xKSA6IHN0cmluZztcbn1cblxuLy8gTm90ZTogYSBsb25nIGxpbmUgd2l0aG91dCBhIHN1aXRhYmxlIGJyZWFrIHBvaW50IHdpbGwgZXhjZWVkIHRoZSB3aWR0aCBsaW1pdC5cbi8vIFByZS1jb25kaXRpb25zOiBldmVyeSBjaGFyIGluIHN0ciBpc1ByaW50YWJsZSwgc3RyLmxlbmd0aCA+IDAsIHdpZHRoID4gMC5cbmZ1bmN0aW9uIGZvbGRTdHJpbmcoc3RyaW5nLCB3aWR0aCkge1xuICAvLyBJbiBmb2xkZWQgc3R5bGUsICRrJCBjb25zZWN1dGl2ZSBuZXdsaW5lcyBvdXRwdXQgYXMgJGsrMSQgbmV3bGluZXNcdTIwMTRcbiAgLy8gdW5sZXNzIHRoZXkncmUgYmVmb3JlIG9yIGFmdGVyIGEgbW9yZS1pbmRlbnRlZCBsaW5lLCBvciBhdCB0aGUgdmVyeVxuICAvLyBiZWdpbm5pbmcgb3IgZW5kLCBpbiB3aGljaCBjYXNlICRrJCBtYXBzIHRvICRrJC5cbiAgLy8gVGhlcmVmb3JlLCBwYXJzZSBlYWNoIGNodW5rIGFzIG5ld2xpbmUocykgZm9sbG93ZWQgYnkgYSBjb250ZW50IGxpbmUuXG4gIHZhciBsaW5lUmUgPSAvKFxcbispKFteXFxuXSopL2c7XG5cbiAgLy8gZmlyc3QgbGluZSAocG9zc2libHkgYW4gZW1wdHkgbGluZSlcbiAgdmFyIHJlc3VsdCA9IChmdW5jdGlvbiAoKSB7XG4gICAgdmFyIG5leHRMRiA9IHN0cmluZy5pbmRleE9mKCdcXG4nKTtcbiAgICBuZXh0TEYgPSBuZXh0TEYgIT09IC0xID8gbmV4dExGIDogc3RyaW5nLmxlbmd0aDtcbiAgICBsaW5lUmUubGFzdEluZGV4ID0gbmV4dExGO1xuICAgIHJldHVybiBmb2xkTGluZShzdHJpbmcuc2xpY2UoMCwgbmV4dExGKSwgd2lkdGgpO1xuICB9KCkpO1xuICAvLyBJZiB3ZSBoYXZlbid0IHJlYWNoZWQgdGhlIGZpcnN0IGNvbnRlbnQgbGluZSB5ZXQsIGRvbid0IGFkZCBhbiBleHRyYSBcXG4uXG4gIHZhciBwcmV2TW9yZUluZGVudGVkID0gc3RyaW5nWzBdID09PSAnXFxuJyB8fCBzdHJpbmdbMF0gPT09ICcgJztcbiAgdmFyIG1vcmVJbmRlbnRlZDtcblxuICAvLyByZXN0IG9mIHRoZSBsaW5lc1xuICB2YXIgbWF0Y2g7XG4gIHdoaWxlICgobWF0Y2ggPSBsaW5lUmUuZXhlYyhzdHJpbmcpKSkge1xuICAgIHZhciBwcmVmaXggPSBtYXRjaFsxXSwgbGluZSA9IG1hdGNoWzJdO1xuICAgIG1vcmVJbmRlbnRlZCA9IChsaW5lWzBdID09PSAnICcpO1xuICAgIHJlc3VsdCArPSBwcmVmaXhcbiAgICAgICsgKCFwcmV2TW9yZUluZGVudGVkICYmICFtb3JlSW5kZW50ZWQgJiYgbGluZSAhPT0gJydcbiAgICAgICAgPyAnXFxuJyA6ICcnKVxuICAgICAgKyBmb2xkTGluZShsaW5lLCB3aWR0aCk7XG4gICAgcHJldk1vcmVJbmRlbnRlZCA9IG1vcmVJbmRlbnRlZDtcbiAgfVxuXG4gIHJldHVybiByZXN1bHQ7XG59XG5cbi8vIEdyZWVkeSBsaW5lIGJyZWFraW5nLlxuLy8gUGlja3MgdGhlIGxvbmdlc3QgbGluZSB1bmRlciB0aGUgbGltaXQgZWFjaCB0aW1lLFxuLy8gb3RoZXJ3aXNlIHNldHRsZXMgZm9yIHRoZSBzaG9ydGVzdCBsaW5lIG92ZXIgdGhlIGxpbWl0LlxuLy8gTkIuIE1vcmUtaW5kZW50ZWQgbGluZXMgKmNhbm5vdCogYmUgZm9sZGVkLCBhcyB0aGF0IHdvdWxkIGFkZCBhbiBleHRyYSBcXG4uXG5mdW5jdGlvbiBmb2xkTGluZShsaW5lLCB3aWR0aCkge1xuICBpZiAobGluZSA9PT0gJycgfHwgbGluZVswXSA9PT0gJyAnKSByZXR1cm4gbGluZTtcblxuICAvLyBTaW5jZSBhIG1vcmUtaW5kZW50ZWQgbGluZSBhZGRzIGEgXFxuLCBicmVha3MgY2FuJ3QgYmUgZm9sbG93ZWQgYnkgYSBzcGFjZS5cbiAgdmFyIGJyZWFrUmUgPSAvIFteIF0vZzsgLy8gbm90ZTogdGhlIG1hdGNoIGluZGV4IHdpbGwgYWx3YXlzIGJlIDw9IGxlbmd0aC0yLlxuICB2YXIgbWF0Y2g7XG4gIC8vIHN0YXJ0IGlzIGFuIGluY2x1c2l2ZSBpbmRleC4gZW5kLCBjdXJyLCBhbmQgbmV4dCBhcmUgZXhjbHVzaXZlLlxuICB2YXIgc3RhcnQgPSAwLCBlbmQsIGN1cnIgPSAwLCBuZXh0ID0gMDtcbiAgdmFyIHJlc3VsdCA9ICcnO1xuXG4gIC8vIEludmFyaWFudHM6IDAgPD0gc3RhcnQgPD0gbGVuZ3RoLTEuXG4gIC8vICAgMCA8PSBjdXJyIDw9IG5leHQgPD0gbWF4KDAsIGxlbmd0aC0yKS4gY3VyciAtIHN0YXJ0IDw9IHdpZHRoLlxuICAvLyBJbnNpZGUgdGhlIGxvb3A6XG4gIC8vICAgQSBtYXRjaCBpbXBsaWVzIGxlbmd0aCA+PSAyLCBzbyBjdXJyIGFuZCBuZXh0IGFyZSA8PSBsZW5ndGgtMi5cbiAgd2hpbGUgKChtYXRjaCA9IGJyZWFrUmUuZXhlYyhsaW5lKSkpIHtcbiAgICBuZXh0ID0gbWF0Y2guaW5kZXg7XG4gICAgLy8gbWFpbnRhaW4gaW52YXJpYW50OiBjdXJyIC0gc3RhcnQgPD0gd2lkdGhcbiAgICBpZiAobmV4dCAtIHN0YXJ0ID4gd2lkdGgpIHtcbiAgICAgIGVuZCA9IChjdXJyID4gc3RhcnQpID8gY3VyciA6IG5leHQ7IC8vIGRlcml2ZSBlbmQgPD0gbGVuZ3RoLTJcbiAgICAgIHJlc3VsdCArPSAnXFxuJyArIGxpbmUuc2xpY2Uoc3RhcnQsIGVuZCk7XG4gICAgICAvLyBza2lwIHRoZSBzcGFjZSB0aGF0IHdhcyBvdXRwdXQgYXMgXFxuXG4gICAgICBzdGFydCA9IGVuZCArIDE7ICAgICAgICAgICAgICAgICAgICAvLyBkZXJpdmUgc3RhcnQgPD0gbGVuZ3RoLTFcbiAgICB9XG4gICAgY3VyciA9IG5leHQ7XG4gIH1cblxuICAvLyBCeSB0aGUgaW52YXJpYW50cywgc3RhcnQgPD0gbGVuZ3RoLTEsIHNvIHRoZXJlIGlzIHNvbWV0aGluZyBsZWZ0IG92ZXIuXG4gIC8vIEl0IGlzIGVpdGhlciB0aGUgd2hvbGUgc3RyaW5nIG9yIGEgcGFydCBzdGFydGluZyBmcm9tIG5vbi13aGl0ZXNwYWNlLlxuICByZXN1bHQgKz0gJ1xcbic7XG4gIC8vIEluc2VydCBhIGJyZWFrIGlmIHRoZSByZW1haW5kZXIgaXMgdG9vIGxvbmcgYW5kIHRoZXJlIGlzIGEgYnJlYWsgYXZhaWxhYmxlLlxuICBpZiAobGluZS5sZW5ndGggLSBzdGFydCA+IHdpZHRoICYmIGN1cnIgPiBzdGFydCkge1xuICAgIHJlc3VsdCArPSBsaW5lLnNsaWNlKHN0YXJ0LCBjdXJyKSArICdcXG4nICsgbGluZS5zbGljZShjdXJyICsgMSk7XG4gIH0gZWxzZSB7XG4gICAgcmVzdWx0ICs9IGxpbmUuc2xpY2Uoc3RhcnQpO1xuICB9XG5cbiAgcmV0dXJuIHJlc3VsdC5zbGljZSgxKTsgLy8gZHJvcCBleHRyYSBcXG4gam9pbmVyXG59XG5cbi8vIEVzY2FwZXMgYSBkb3VibGUtcXVvdGVkIHN0cmluZy5cbmZ1bmN0aW9uIGVzY2FwZVN0cmluZyhzdHJpbmcpIHtcbiAgdmFyIHJlc3VsdCA9ICcnO1xuICB2YXIgY2hhciA9IDA7XG4gIHZhciBlc2NhcGVTZXE7XG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBzdHJpbmcubGVuZ3RoOyBjaGFyID49IDB4MTAwMDAgPyBpICs9IDIgOiBpKyspIHtcbiAgICBjaGFyID0gY29kZVBvaW50QXQoc3RyaW5nLCBpKTtcbiAgICBlc2NhcGVTZXEgPSBFU0NBUEVfU0VRVUVOQ0VTW2NoYXJdO1xuXG4gICAgaWYgKCFlc2NhcGVTZXEgJiYgaXNQcmludGFibGUoY2hhcikpIHtcbiAgICAgIHJlc3VsdCArPSBzdHJpbmdbaV07XG4gICAgICBpZiAoY2hhciA+PSAweDEwMDAwKSByZXN1bHQgKz0gc3RyaW5nW2kgKyAxXTtcbiAgICB9IGVsc2Uge1xuICAgICAgcmVzdWx0ICs9IGVzY2FwZVNlcSB8fCBlbmNvZGVIZXgoY2hhcik7XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIHJlc3VsdDtcbn1cblxuZnVuY3Rpb24gd3JpdGVGbG93U2VxdWVuY2Uoc3RhdGUsIGxldmVsLCBvYmplY3QpIHtcbiAgdmFyIF9yZXN1bHQgPSAnJyxcbiAgICAgIF90YWcgICAgPSBzdGF0ZS50YWcsXG4gICAgICBpbmRleCxcbiAgICAgIGxlbmd0aCxcbiAgICAgIHZhbHVlO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3QubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHZhbHVlID0gb2JqZWN0W2luZGV4XTtcblxuICAgIGlmIChzdGF0ZS5yZXBsYWNlcikge1xuICAgICAgdmFsdWUgPSBzdGF0ZS5yZXBsYWNlci5jYWxsKG9iamVjdCwgU3RyaW5nKGluZGV4KSwgdmFsdWUpO1xuICAgIH1cblxuICAgIC8vIFdyaXRlIG9ubHkgdmFsaWQgZWxlbWVudHMsIHB1dCBudWxsIGluc3RlYWQgb2YgaW52YWxpZCBlbGVtZW50cy5cbiAgICBpZiAod3JpdGVOb2RlKHN0YXRlLCBsZXZlbCwgdmFsdWUsIGZhbHNlLCBmYWxzZSkgfHxcbiAgICAgICAgKHR5cGVvZiB2YWx1ZSA9PT0gJ3VuZGVmaW5lZCcgJiZcbiAgICAgICAgIHdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwsIG51bGwsIGZhbHNlLCBmYWxzZSkpKSB7XG5cbiAgICAgIGlmIChfcmVzdWx0ICE9PSAnJykgX3Jlc3VsdCArPSAnLCcgKyAoIXN0YXRlLmNvbmRlbnNlRmxvdyA/ICcgJyA6ICcnKTtcbiAgICAgIF9yZXN1bHQgKz0gc3RhdGUuZHVtcDtcbiAgICB9XG4gIH1cblxuICBzdGF0ZS50YWcgPSBfdGFnO1xuICBzdGF0ZS5kdW1wID0gJ1snICsgX3Jlc3VsdCArICddJztcbn1cblxuZnVuY3Rpb24gd3JpdGVCbG9ja1NlcXVlbmNlKHN0YXRlLCBsZXZlbCwgb2JqZWN0LCBjb21wYWN0KSB7XG4gIHZhciBfcmVzdWx0ID0gJycsXG4gICAgICBfdGFnICAgID0gc3RhdGUudGFnLFxuICAgICAgaW5kZXgsXG4gICAgICBsZW5ndGgsXG4gICAgICB2YWx1ZTtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICB2YWx1ZSA9IG9iamVjdFtpbmRleF07XG5cbiAgICBpZiAoc3RhdGUucmVwbGFjZXIpIHtcbiAgICAgIHZhbHVlID0gc3RhdGUucmVwbGFjZXIuY2FsbChvYmplY3QsIFN0cmluZyhpbmRleCksIHZhbHVlKTtcbiAgICB9XG5cbiAgICAvLyBXcml0ZSBvbmx5IHZhbGlkIGVsZW1lbnRzLCBwdXQgbnVsbCBpbnN0ZWFkIG9mIGludmFsaWQgZWxlbWVudHMuXG4gICAgaWYgKHdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwgKyAxLCB2YWx1ZSwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRydWUpIHx8XG4gICAgICAgICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnICYmXG4gICAgICAgICB3cml0ZU5vZGUoc3RhdGUsIGxldmVsICsgMSwgbnVsbCwgdHJ1ZSwgdHJ1ZSwgZmFsc2UsIHRydWUpKSkge1xuXG4gICAgICBpZiAoIWNvbXBhY3QgfHwgX3Jlc3VsdCAhPT0gJycpIHtcbiAgICAgICAgX3Jlc3VsdCArPSBnZW5lcmF0ZU5leHRMaW5lKHN0YXRlLCBsZXZlbCk7XG4gICAgICB9XG5cbiAgICAgIGlmIChzdGF0ZS5kdW1wICYmIENIQVJfTElORV9GRUVEID09PSBzdGF0ZS5kdW1wLmNoYXJDb2RlQXQoMCkpIHtcbiAgICAgICAgX3Jlc3VsdCArPSAnLSc7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBfcmVzdWx0ICs9ICctICc7XG4gICAgICB9XG5cbiAgICAgIF9yZXN1bHQgKz0gc3RhdGUuZHVtcDtcbiAgICB9XG4gIH1cblxuICBzdGF0ZS50YWcgPSBfdGFnO1xuICBzdGF0ZS5kdW1wID0gX3Jlc3VsdCB8fCAnW10nOyAvLyBFbXB0eSBzZXF1ZW5jZSBpZiBubyB2YWxpZCB2YWx1ZXMuXG59XG5cbmZ1bmN0aW9uIHdyaXRlRmxvd01hcHBpbmcoc3RhdGUsIGxldmVsLCBvYmplY3QpIHtcbiAgdmFyIF9yZXN1bHQgICAgICAgPSAnJyxcbiAgICAgIF90YWcgICAgICAgICAgPSBzdGF0ZS50YWcsXG4gICAgICBvYmplY3RLZXlMaXN0ID0gT2JqZWN0LmtleXMob2JqZWN0KSxcbiAgICAgIGluZGV4LFxuICAgICAgbGVuZ3RoLFxuICAgICAgb2JqZWN0S2V5LFxuICAgICAgb2JqZWN0VmFsdWUsXG4gICAgICBwYWlyQnVmZmVyO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3RLZXlMaXN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcblxuICAgIHBhaXJCdWZmZXIgPSAnJztcbiAgICBpZiAoX3Jlc3VsdCAhPT0gJycpIHBhaXJCdWZmZXIgKz0gJywgJztcblxuICAgIGlmIChzdGF0ZS5jb25kZW5zZUZsb3cpIHBhaXJCdWZmZXIgKz0gJ1wiJztcblxuICAgIG9iamVjdEtleSA9IG9iamVjdEtleUxpc3RbaW5kZXhdO1xuICAgIG9iamVjdFZhbHVlID0gb2JqZWN0W29iamVjdEtleV07XG5cbiAgICBpZiAoc3RhdGUucmVwbGFjZXIpIHtcbiAgICAgIG9iamVjdFZhbHVlID0gc3RhdGUucmVwbGFjZXIuY2FsbChvYmplY3QsIG9iamVjdEtleSwgb2JqZWN0VmFsdWUpO1xuICAgIH1cblxuICAgIGlmICghd3JpdGVOb2RlKHN0YXRlLCBsZXZlbCwgb2JqZWN0S2V5LCBmYWxzZSwgZmFsc2UpKSB7XG4gICAgICBjb250aW51ZTsgLy8gU2tpcCB0aGlzIHBhaXIgYmVjYXVzZSBvZiBpbnZhbGlkIGtleTtcbiAgICB9XG5cbiAgICBpZiAoc3RhdGUuZHVtcC5sZW5ndGggPiAxMDI0KSBwYWlyQnVmZmVyICs9ICc/ICc7XG5cbiAgICBwYWlyQnVmZmVyICs9IHN0YXRlLmR1bXAgKyAoc3RhdGUuY29uZGVuc2VGbG93ID8gJ1wiJyA6ICcnKSArICc6JyArIChzdGF0ZS5jb25kZW5zZUZsb3cgPyAnJyA6ICcgJyk7XG5cbiAgICBpZiAoIXdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwsIG9iamVjdFZhbHVlLCBmYWxzZSwgZmFsc2UpKSB7XG4gICAgICBjb250aW51ZTsgLy8gU2tpcCB0aGlzIHBhaXIgYmVjYXVzZSBvZiBpbnZhbGlkIHZhbHVlLlxuICAgIH1cblxuICAgIHBhaXJCdWZmZXIgKz0gc3RhdGUuZHVtcDtcblxuICAgIC8vIEJvdGgga2V5IGFuZCB2YWx1ZSBhcmUgdmFsaWQuXG4gICAgX3Jlc3VsdCArPSBwYWlyQnVmZmVyO1xuICB9XG5cbiAgc3RhdGUudGFnID0gX3RhZztcbiAgc3RhdGUuZHVtcCA9ICd7JyArIF9yZXN1bHQgKyAnfSc7XG59XG5cbmZ1bmN0aW9uIHdyaXRlQmxvY2tNYXBwaW5nKHN0YXRlLCBsZXZlbCwgb2JqZWN0LCBjb21wYWN0KSB7XG4gIHZhciBfcmVzdWx0ICAgICAgID0gJycsXG4gICAgICBfdGFnICAgICAgICAgID0gc3RhdGUudGFnLFxuICAgICAgb2JqZWN0S2V5TGlzdCA9IE9iamVjdC5rZXlzKG9iamVjdCksXG4gICAgICBpbmRleCxcbiAgICAgIGxlbmd0aCxcbiAgICAgIG9iamVjdEtleSxcbiAgICAgIG9iamVjdFZhbHVlLFxuICAgICAgZXhwbGljaXRQYWlyLFxuICAgICAgcGFpckJ1ZmZlcjtcblxuICAvLyBBbGxvdyBzb3J0aW5nIGtleXMgc28gdGhhdCB0aGUgb3V0cHV0IGZpbGUgaXMgZGV0ZXJtaW5pc3RpY1xuICBpZiAoc3RhdGUuc29ydEtleXMgPT09IHRydWUpIHtcbiAgICAvLyBEZWZhdWx0IHNvcnRpbmdcbiAgICBvYmplY3RLZXlMaXN0LnNvcnQoKTtcbiAgfSBlbHNlIGlmICh0eXBlb2Ygc3RhdGUuc29ydEtleXMgPT09ICdmdW5jdGlvbicpIHtcbiAgICAvLyBDdXN0b20gc29ydCBmdW5jdGlvblxuICAgIG9iamVjdEtleUxpc3Quc29ydChzdGF0ZS5zb3J0S2V5cyk7XG4gIH0gZWxzZSBpZiAoc3RhdGUuc29ydEtleXMpIHtcbiAgICAvLyBTb21ldGhpbmcgaXMgd3JvbmdcbiAgICB0aHJvdyBuZXcgZXhjZXB0aW9uKCdzb3J0S2V5cyBtdXN0IGJlIGEgYm9vbGVhbiBvciBhIGZ1bmN0aW9uJyk7XG4gIH1cblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0S2V5TGlzdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgcGFpckJ1ZmZlciA9ICcnO1xuXG4gICAgaWYgKCFjb21wYWN0IHx8IF9yZXN1bHQgIT09ICcnKSB7XG4gICAgICBwYWlyQnVmZmVyICs9IGdlbmVyYXRlTmV4dExpbmUoc3RhdGUsIGxldmVsKTtcbiAgICB9XG5cbiAgICBvYmplY3RLZXkgPSBvYmplY3RLZXlMaXN0W2luZGV4XTtcbiAgICBvYmplY3RWYWx1ZSA9IG9iamVjdFtvYmplY3RLZXldO1xuXG4gICAgaWYgKHN0YXRlLnJlcGxhY2VyKSB7XG4gICAgICBvYmplY3RWYWx1ZSA9IHN0YXRlLnJlcGxhY2VyLmNhbGwob2JqZWN0LCBvYmplY3RLZXksIG9iamVjdFZhbHVlKTtcbiAgICB9XG5cbiAgICBpZiAoIXdyaXRlTm9kZShzdGF0ZSwgbGV2ZWwgKyAxLCBvYmplY3RLZXksIHRydWUsIHRydWUsIHRydWUpKSB7XG4gICAgICBjb250aW51ZTsgLy8gU2tpcCB0aGlzIHBhaXIgYmVjYXVzZSBvZiBpbnZhbGlkIGtleS5cbiAgICB9XG5cbiAgICBleHBsaWNpdFBhaXIgPSAoc3RhdGUudGFnICE9PSBudWxsICYmIHN0YXRlLnRhZyAhPT0gJz8nKSB8fFxuICAgICAgICAgICAgICAgICAgIChzdGF0ZS5kdW1wICYmIHN0YXRlLmR1bXAubGVuZ3RoID4gMTAyNCk7XG5cbiAgICBpZiAoZXhwbGljaXRQYWlyKSB7XG4gICAgICBpZiAoc3RhdGUuZHVtcCAmJiBDSEFSX0xJTkVfRkVFRCA9PT0gc3RhdGUuZHVtcC5jaGFyQ29kZUF0KDApKSB7XG4gICAgICAgIHBhaXJCdWZmZXIgKz0gJz8nO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcGFpckJ1ZmZlciArPSAnPyAnO1xuICAgICAgfVxuICAgIH1cblxuICAgIHBhaXJCdWZmZXIgKz0gc3RhdGUuZHVtcDtcblxuICAgIGlmIChleHBsaWNpdFBhaXIpIHtcbiAgICAgIHBhaXJCdWZmZXIgKz0gZ2VuZXJhdGVOZXh0TGluZShzdGF0ZSwgbGV2ZWwpO1xuICAgIH1cblxuICAgIGlmICghd3JpdGVOb2RlKHN0YXRlLCBsZXZlbCArIDEsIG9iamVjdFZhbHVlLCB0cnVlLCBleHBsaWNpdFBhaXIpKSB7XG4gICAgICBjb250aW51ZTsgLy8gU2tpcCB0aGlzIHBhaXIgYmVjYXVzZSBvZiBpbnZhbGlkIHZhbHVlLlxuICAgIH1cblxuICAgIGlmIChzdGF0ZS5kdW1wICYmIENIQVJfTElORV9GRUVEID09PSBzdGF0ZS5kdW1wLmNoYXJDb2RlQXQoMCkpIHtcbiAgICAgIHBhaXJCdWZmZXIgKz0gJzonO1xuICAgIH0gZWxzZSB7XG4gICAgICBwYWlyQnVmZmVyICs9ICc6ICc7XG4gICAgfVxuXG4gICAgcGFpckJ1ZmZlciArPSBzdGF0ZS5kdW1wO1xuXG4gICAgLy8gQm90aCBrZXkgYW5kIHZhbHVlIGFyZSB2YWxpZC5cbiAgICBfcmVzdWx0ICs9IHBhaXJCdWZmZXI7XG4gIH1cblxuICBzdGF0ZS50YWcgPSBfdGFnO1xuICBzdGF0ZS5kdW1wID0gX3Jlc3VsdCB8fCAne30nOyAvLyBFbXB0eSBtYXBwaW5nIGlmIG5vIHZhbGlkIHBhaXJzLlxufVxuXG5mdW5jdGlvbiBkZXRlY3RUeXBlKHN0YXRlLCBvYmplY3QsIGV4cGxpY2l0KSB7XG4gIHZhciBfcmVzdWx0LCB0eXBlTGlzdCwgaW5kZXgsIGxlbmd0aCwgdHlwZSwgc3R5bGU7XG5cbiAgdHlwZUxpc3QgPSBleHBsaWNpdCA/IHN0YXRlLmV4cGxpY2l0VHlwZXMgOiBzdGF0ZS5pbXBsaWNpdFR5cGVzO1xuXG4gIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSB0eXBlTGlzdC5sZW5ndGg7IGluZGV4IDwgbGVuZ3RoOyBpbmRleCArPSAxKSB7XG4gICAgdHlwZSA9IHR5cGVMaXN0W2luZGV4XTtcblxuICAgIGlmICgodHlwZS5pbnN0YW5jZU9mICB8fCB0eXBlLnByZWRpY2F0ZSkgJiZcbiAgICAgICAgKCF0eXBlLmluc3RhbmNlT2YgfHwgKCh0eXBlb2Ygb2JqZWN0ID09PSAnb2JqZWN0JykgJiYgKG9iamVjdCBpbnN0YW5jZW9mIHR5cGUuaW5zdGFuY2VPZikpKSAmJlxuICAgICAgICAoIXR5cGUucHJlZGljYXRlICB8fCB0eXBlLnByZWRpY2F0ZShvYmplY3QpKSkge1xuXG4gICAgICBpZiAoZXhwbGljaXQpIHtcbiAgICAgICAgaWYgKHR5cGUubXVsdGkgJiYgdHlwZS5yZXByZXNlbnROYW1lKSB7XG4gICAgICAgICAgc3RhdGUudGFnID0gdHlwZS5yZXByZXNlbnROYW1lKG9iamVjdCk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgc3RhdGUudGFnID0gdHlwZS50YWc7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHN0YXRlLnRhZyA9ICc/JztcbiAgICAgIH1cblxuICAgICAgaWYgKHR5cGUucmVwcmVzZW50KSB7XG4gICAgICAgIHN0eWxlID0gc3RhdGUuc3R5bGVNYXBbdHlwZS50YWddIHx8IHR5cGUuZGVmYXVsdFN0eWxlO1xuXG4gICAgICAgIGlmIChfdG9TdHJpbmcuY2FsbCh0eXBlLnJlcHJlc2VudCkgPT09ICdbb2JqZWN0IEZ1bmN0aW9uXScpIHtcbiAgICAgICAgICBfcmVzdWx0ID0gdHlwZS5yZXByZXNlbnQob2JqZWN0LCBzdHlsZSk7XG4gICAgICAgIH0gZWxzZSBpZiAoX2hhc093blByb3BlcnR5LmNhbGwodHlwZS5yZXByZXNlbnQsIHN0eWxlKSkge1xuICAgICAgICAgIF9yZXN1bHQgPSB0eXBlLnJlcHJlc2VudFtzdHlsZV0ob2JqZWN0LCBzdHlsZSk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbignITwnICsgdHlwZS50YWcgKyAnPiB0YWcgcmVzb2x2ZXIgYWNjZXB0cyBub3QgXCInICsgc3R5bGUgKyAnXCIgc3R5bGUnKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHN0YXRlLmR1bXAgPSBfcmVzdWx0O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gIH1cblxuICByZXR1cm4gZmFsc2U7XG59XG5cbi8vIFNlcmlhbGl6ZXMgYG9iamVjdGAgYW5kIHdyaXRlcyBpdCB0byBnbG9iYWwgYHJlc3VsdGAuXG4vLyBSZXR1cm5zIHRydWUgb24gc3VjY2Vzcywgb3IgZmFsc2Ugb24gaW52YWxpZCBvYmplY3QuXG4vL1xuZnVuY3Rpb24gd3JpdGVOb2RlKHN0YXRlLCBsZXZlbCwgb2JqZWN0LCBibG9jaywgY29tcGFjdCwgaXNrZXksIGlzYmxvY2tzZXEpIHtcbiAgc3RhdGUudGFnID0gbnVsbDtcbiAgc3RhdGUuZHVtcCA9IG9iamVjdDtcblxuICBpZiAoIWRldGVjdFR5cGUoc3RhdGUsIG9iamVjdCwgZmFsc2UpKSB7XG4gICAgZGV0ZWN0VHlwZShzdGF0ZSwgb2JqZWN0LCB0cnVlKTtcbiAgfVxuXG4gIHZhciB0eXBlID0gX3RvU3RyaW5nLmNhbGwoc3RhdGUuZHVtcCk7XG4gIHZhciBpbmJsb2NrID0gYmxvY2s7XG4gIHZhciB0YWdTdHI7XG5cbiAgaWYgKGJsb2NrKSB7XG4gICAgYmxvY2sgPSAoc3RhdGUuZmxvd0xldmVsIDwgMCB8fCBzdGF0ZS5mbG93TGV2ZWwgPiBsZXZlbCk7XG4gIH1cblxuICB2YXIgb2JqZWN0T3JBcnJheSA9IHR5cGUgPT09ICdbb2JqZWN0IE9iamVjdF0nIHx8IHR5cGUgPT09ICdbb2JqZWN0IEFycmF5XScsXG4gICAgICBkdXBsaWNhdGVJbmRleCxcbiAgICAgIGR1cGxpY2F0ZTtcblxuICBpZiAob2JqZWN0T3JBcnJheSkge1xuICAgIGR1cGxpY2F0ZUluZGV4ID0gc3RhdGUuZHVwbGljYXRlcy5pbmRleE9mKG9iamVjdCk7XG4gICAgZHVwbGljYXRlID0gZHVwbGljYXRlSW5kZXggIT09IC0xO1xuICB9XG5cbiAgaWYgKChzdGF0ZS50YWcgIT09IG51bGwgJiYgc3RhdGUudGFnICE9PSAnPycpIHx8IGR1cGxpY2F0ZSB8fCAoc3RhdGUuaW5kZW50ICE9PSAyICYmIGxldmVsID4gMCkpIHtcbiAgICBjb21wYWN0ID0gZmFsc2U7XG4gIH1cblxuICBpZiAoZHVwbGljYXRlICYmIHN0YXRlLnVzZWREdXBsaWNhdGVzW2R1cGxpY2F0ZUluZGV4XSkge1xuICAgIHN0YXRlLmR1bXAgPSAnKnJlZl8nICsgZHVwbGljYXRlSW5kZXg7XG4gIH0gZWxzZSB7XG4gICAgaWYgKG9iamVjdE9yQXJyYXkgJiYgZHVwbGljYXRlICYmICFzdGF0ZS51c2VkRHVwbGljYXRlc1tkdXBsaWNhdGVJbmRleF0pIHtcbiAgICAgIHN0YXRlLnVzZWREdXBsaWNhdGVzW2R1cGxpY2F0ZUluZGV4XSA9IHRydWU7XG4gICAgfVxuICAgIGlmICh0eXBlID09PSAnW29iamVjdCBPYmplY3RdJykge1xuICAgICAgaWYgKGJsb2NrICYmIChPYmplY3Qua2V5cyhzdGF0ZS5kdW1wKS5sZW5ndGggIT09IDApKSB7XG4gICAgICAgIHdyaXRlQmxvY2tNYXBwaW5nKHN0YXRlLCBsZXZlbCwgc3RhdGUuZHVtcCwgY29tcGFjdCk7XG4gICAgICAgIGlmIChkdXBsaWNhdGUpIHtcbiAgICAgICAgICBzdGF0ZS5kdW1wID0gJyZyZWZfJyArIGR1cGxpY2F0ZUluZGV4ICsgc3RhdGUuZHVtcDtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgd3JpdGVGbG93TWFwcGluZyhzdGF0ZSwgbGV2ZWwsIHN0YXRlLmR1bXApO1xuICAgICAgICBpZiAoZHVwbGljYXRlKSB7XG4gICAgICAgICAgc3RhdGUuZHVtcCA9ICcmcmVmXycgKyBkdXBsaWNhdGVJbmRleCArICcgJyArIHN0YXRlLmR1bXA7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdbb2JqZWN0IEFycmF5XScpIHtcbiAgICAgIGlmIChibG9jayAmJiAoc3RhdGUuZHVtcC5sZW5ndGggIT09IDApKSB7XG4gICAgICAgIGlmIChzdGF0ZS5ub0FycmF5SW5kZW50ICYmICFpc2Jsb2Nrc2VxICYmIGxldmVsID4gMCkge1xuICAgICAgICAgIHdyaXRlQmxvY2tTZXF1ZW5jZShzdGF0ZSwgbGV2ZWwgLSAxLCBzdGF0ZS5kdW1wLCBjb21wYWN0KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB3cml0ZUJsb2NrU2VxdWVuY2Uoc3RhdGUsIGxldmVsLCBzdGF0ZS5kdW1wLCBjb21wYWN0KTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoZHVwbGljYXRlKSB7XG4gICAgICAgICAgc3RhdGUuZHVtcCA9ICcmcmVmXycgKyBkdXBsaWNhdGVJbmRleCArIHN0YXRlLmR1bXA7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHdyaXRlRmxvd1NlcXVlbmNlKHN0YXRlLCBsZXZlbCwgc3RhdGUuZHVtcCk7XG4gICAgICAgIGlmIChkdXBsaWNhdGUpIHtcbiAgICAgICAgICBzdGF0ZS5kdW1wID0gJyZyZWZfJyArIGR1cGxpY2F0ZUluZGV4ICsgJyAnICsgc3RhdGUuZHVtcDtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH0gZWxzZSBpZiAodHlwZSA9PT0gJ1tvYmplY3QgU3RyaW5nXScpIHtcbiAgICAgIGlmIChzdGF0ZS50YWcgIT09ICc/Jykge1xuICAgICAgICB3cml0ZVNjYWxhcihzdGF0ZSwgc3RhdGUuZHVtcCwgbGV2ZWwsIGlza2V5LCBpbmJsb2NrKTtcbiAgICAgIH1cbiAgICB9IGVsc2UgaWYgKHR5cGUgPT09ICdbb2JqZWN0IFVuZGVmaW5lZF0nKSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmIChzdGF0ZS5za2lwSW52YWxpZCkgcmV0dXJuIGZhbHNlO1xuICAgICAgdGhyb3cgbmV3IGV4Y2VwdGlvbigndW5hY2NlcHRhYmxlIGtpbmQgb2YgYW4gb2JqZWN0IHRvIGR1bXAgJyArIHR5cGUpO1xuICAgIH1cblxuICAgIGlmIChzdGF0ZS50YWcgIT09IG51bGwgJiYgc3RhdGUudGFnICE9PSAnPycpIHtcbiAgICAgIC8vIE5lZWQgdG8gZW5jb2RlIGFsbCBjaGFyYWN0ZXJzIGV4Y2VwdCB0aG9zZSBhbGxvd2VkIGJ5IHRoZSBzcGVjOlxuICAgICAgLy9cbiAgICAgIC8vIFszNV0gbnMtZGVjLWRpZ2l0ICAgIDo6PSAgWyN4MzAtI3gzOV0gLyogMC05ICovXG4gICAgICAvLyBbMzZdIG5zLWhleC1kaWdpdCAgICA6Oj0gIG5zLWRlYy1kaWdpdFxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgfCBbI3g0MS0jeDQ2XSAvKiBBLUYgKi8gfCBbI3g2MS0jeDY2XSAvKiBhLWYgKi9cbiAgICAgIC8vIFszN10gbnMtYXNjaWktbGV0dGVyIDo6PSAgWyN4NDEtI3g1QV0gLyogQS1aICovIHwgWyN4NjEtI3g3QV0gLyogYS16ICovXG4gICAgICAvLyBbMzhdIG5zLXdvcmQtY2hhciAgICA6Oj0gIG5zLWRlYy1kaWdpdCB8IG5zLWFzY2lpLWxldHRlciB8IFx1MjAxQy1cdTIwMURcbiAgICAgIC8vIFszOV0gbnMtdXJpLWNoYXIgICAgIDo6PSAgXHUyMDFDJVx1MjAxRCBucy1oZXgtZGlnaXQgbnMtaGV4LWRpZ2l0IHwgbnMtd29yZC1jaGFyIHwgXHUyMDFDI1x1MjAxRFxuICAgICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgfCBcdTIwMUM7XHUyMDFEIHwgXHUyMDFDL1x1MjAxRCB8IFx1MjAxQz9cdTIwMUQgfCBcdTIwMUM6XHUyMDFEIHwgXHUyMDFDQFx1MjAxRCB8IFx1MjAxQyZcdTIwMUQgfCBcdTIwMUM9XHUyMDFEIHwgXHUyMDFDK1x1MjAxRCB8IFx1MjAxQyRcdTIwMUQgfCBcdTIwMUMsXHUyMDFEXG4gICAgICAvLyAgICAgICAgICAgICAgICAgICAgICAgICB8IFx1MjAxQ19cdTIwMUQgfCBcdTIwMUMuXHUyMDFEIHwgXHUyMDFDIVx1MjAxRCB8IFx1MjAxQ35cdTIwMUQgfCBcdTIwMUMqXHUyMDFEIHwgXHUyMDFDJ1x1MjAxRCB8IFx1MjAxQyhcdTIwMUQgfCBcdTIwMUMpXHUyMDFEIHwgXHUyMDFDW1x1MjAxRCB8IFx1MjAxQ11cdTIwMURcbiAgICAgIC8vXG4gICAgICAvLyBBbHNvIG5lZWQgdG8gZW5jb2RlICchJyBiZWNhdXNlIGl0IGhhcyBzcGVjaWFsIG1lYW5pbmcgKGVuZCBvZiB0YWcgcHJlZml4KS5cbiAgICAgIC8vXG4gICAgICB0YWdTdHIgPSBlbmNvZGVVUkkoXG4gICAgICAgIHN0YXRlLnRhZ1swXSA9PT0gJyEnID8gc3RhdGUudGFnLnNsaWNlKDEpIDogc3RhdGUudGFnXG4gICAgICApLnJlcGxhY2UoLyEvZywgJyUyMScpO1xuXG4gICAgICBpZiAoc3RhdGUudGFnWzBdID09PSAnIScpIHtcbiAgICAgICAgdGFnU3RyID0gJyEnICsgdGFnU3RyO1xuICAgICAgfSBlbHNlIGlmICh0YWdTdHIuc2xpY2UoMCwgMTgpID09PSAndGFnOnlhbWwub3JnLDIwMDI6Jykge1xuICAgICAgICB0YWdTdHIgPSAnISEnICsgdGFnU3RyLnNsaWNlKDE4KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRhZ1N0ciA9ICchPCcgKyB0YWdTdHIgKyAnPic7XG4gICAgICB9XG5cbiAgICAgIHN0YXRlLmR1bXAgPSB0YWdTdHIgKyAnICcgKyBzdGF0ZS5kdW1wO1xuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0cnVlO1xufVxuXG5mdW5jdGlvbiBnZXREdXBsaWNhdGVSZWZlcmVuY2VzKG9iamVjdCwgc3RhdGUpIHtcbiAgdmFyIG9iamVjdHMgPSBbXSxcbiAgICAgIGR1cGxpY2F0ZXNJbmRleGVzID0gW10sXG4gICAgICBpbmRleCxcbiAgICAgIGxlbmd0aDtcblxuICBpbnNwZWN0Tm9kZShvYmplY3QsIG9iamVjdHMsIGR1cGxpY2F0ZXNJbmRleGVzKTtcblxuICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gZHVwbGljYXRlc0luZGV4ZXMubGVuZ3RoOyBpbmRleCA8IGxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgIHN0YXRlLmR1cGxpY2F0ZXMucHVzaChvYmplY3RzW2R1cGxpY2F0ZXNJbmRleGVzW2luZGV4XV0pO1xuICB9XG4gIHN0YXRlLnVzZWREdXBsaWNhdGVzID0gbmV3IEFycmF5KGxlbmd0aCk7XG59XG5cbmZ1bmN0aW9uIGluc3BlY3ROb2RlKG9iamVjdCwgb2JqZWN0cywgZHVwbGljYXRlc0luZGV4ZXMpIHtcbiAgdmFyIG9iamVjdEtleUxpc3QsXG4gICAgICBpbmRleCxcbiAgICAgIGxlbmd0aDtcblxuICBpZiAob2JqZWN0ICE9PSBudWxsICYmIHR5cGVvZiBvYmplY3QgPT09ICdvYmplY3QnKSB7XG4gICAgaW5kZXggPSBvYmplY3RzLmluZGV4T2Yob2JqZWN0KTtcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XG4gICAgICBpZiAoZHVwbGljYXRlc0luZGV4ZXMuaW5kZXhPZihpbmRleCkgPT09IC0xKSB7XG4gICAgICAgIGR1cGxpY2F0ZXNJbmRleGVzLnB1c2goaW5kZXgpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBvYmplY3RzLnB1c2gob2JqZWN0KTtcblxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkob2JqZWN0KSkge1xuICAgICAgICBmb3IgKGluZGV4ID0gMCwgbGVuZ3RoID0gb2JqZWN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICAgICAgICBpbnNwZWN0Tm9kZShvYmplY3RbaW5kZXhdLCBvYmplY3RzLCBkdXBsaWNhdGVzSW5kZXhlcyk7XG4gICAgICAgIH1cbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG9iamVjdEtleUxpc3QgPSBPYmplY3Qua2V5cyhvYmplY3QpO1xuXG4gICAgICAgIGZvciAoaW5kZXggPSAwLCBsZW5ndGggPSBvYmplY3RLZXlMaXN0Lmxlbmd0aDsgaW5kZXggPCBsZW5ndGg7IGluZGV4ICs9IDEpIHtcbiAgICAgICAgICBpbnNwZWN0Tm9kZShvYmplY3Rbb2JqZWN0S2V5TGlzdFtpbmRleF1dLCBvYmplY3RzLCBkdXBsaWNhdGVzSW5kZXhlcyk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG4gIH1cbn1cblxuZnVuY3Rpb24gZHVtcCQxKGlucHV0LCBvcHRpb25zKSB7XG4gIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9O1xuXG4gIHZhciBzdGF0ZSA9IG5ldyBTdGF0ZShvcHRpb25zKTtcblxuICBpZiAoIXN0YXRlLm5vUmVmcykgZ2V0RHVwbGljYXRlUmVmZXJlbmNlcyhpbnB1dCwgc3RhdGUpO1xuXG4gIHZhciB2YWx1ZSA9IGlucHV0O1xuXG4gIGlmIChzdGF0ZS5yZXBsYWNlcikge1xuICAgIHZhbHVlID0gc3RhdGUucmVwbGFjZXIuY2FsbCh7ICcnOiB2YWx1ZSB9LCAnJywgdmFsdWUpO1xuICB9XG5cbiAgaWYgKHdyaXRlTm9kZShzdGF0ZSwgMCwgdmFsdWUsIHRydWUsIHRydWUpKSByZXR1cm4gc3RhdGUuZHVtcCArICdcXG4nO1xuXG4gIHJldHVybiAnJztcbn1cblxudmFyIGR1bXBfMSA9IGR1bXAkMTtcblxudmFyIGR1bXBlciA9IHtcblx0ZHVtcDogZHVtcF8xXG59O1xuXG5mdW5jdGlvbiByZW5hbWVkKGZyb20sIHRvKSB7XG4gIHJldHVybiBmdW5jdGlvbiAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdGdW5jdGlvbiB5YW1sLicgKyBmcm9tICsgJyBpcyByZW1vdmVkIGluIGpzLXlhbWwgNC4gJyArXG4gICAgICAnVXNlIHlhbWwuJyArIHRvICsgJyBpbnN0ZWFkLCB3aGljaCBpcyBub3cgc2FmZSBieSBkZWZhdWx0LicpO1xuICB9O1xufVxuXG5cbnZhciBUeXBlICAgICAgICAgICAgICAgID0gdHlwZTtcbnZhciBTY2hlbWEgICAgICAgICAgICAgID0gc2NoZW1hO1xudmFyIEZBSUxTQUZFX1NDSEVNQSAgICAgPSBmYWlsc2FmZTtcbnZhciBKU09OX1NDSEVNQSAgICAgICAgID0ganNvbjtcbnZhciBDT1JFX1NDSEVNQSAgICAgICAgID0gY29yZTtcbnZhciBERUZBVUxUX1NDSEVNQSAgICAgID0gX2RlZmF1bHQ7XG52YXIgbG9hZCAgICAgICAgICAgICAgICA9IGxvYWRlci5sb2FkO1xudmFyIGxvYWRBbGwgICAgICAgICAgICAgPSBsb2FkZXIubG9hZEFsbDtcbnZhciBkdW1wICAgICAgICAgICAgICAgID0gZHVtcGVyLmR1bXA7XG52YXIgWUFNTEV4Y2VwdGlvbiAgICAgICA9IGV4Y2VwdGlvbjtcblxuLy8gUmUtZXhwb3J0IGFsbCB0eXBlcyBpbiBjYXNlIHVzZXIgd2FudHMgdG8gY3JlYXRlIGN1c3RvbSBzY2hlbWFcbnZhciB0eXBlcyA9IHtcbiAgYmluYXJ5OiAgICBiaW5hcnksXG4gIGZsb2F0OiAgICAgZmxvYXQsXG4gIG1hcDogICAgICAgbWFwLFxuICBudWxsOiAgICAgIF9udWxsLFxuICBwYWlyczogICAgIHBhaXJzLFxuICBzZXQ6ICAgICAgIHNldCxcbiAgdGltZXN0YW1wOiB0aW1lc3RhbXAsXG4gIGJvb2w6ICAgICAgYm9vbCxcbiAgaW50OiAgICAgICBpbnQsXG4gIG1lcmdlOiAgICAgbWVyZ2UsXG4gIG9tYXA6ICAgICAgb21hcCxcbiAgc2VxOiAgICAgICBzZXEsXG4gIHN0cjogICAgICAgc3RyXG59O1xuXG4vLyBSZW1vdmVkIGZ1bmN0aW9ucyBmcm9tIEpTLVlBTUwgMy4wLnhcbnZhciBzYWZlTG9hZCAgICAgICAgICAgID0gcmVuYW1lZCgnc2FmZUxvYWQnLCAnbG9hZCcpO1xudmFyIHNhZmVMb2FkQWxsICAgICAgICAgPSByZW5hbWVkKCdzYWZlTG9hZEFsbCcsICdsb2FkQWxsJyk7XG52YXIgc2FmZUR1bXAgICAgICAgICAgICA9IHJlbmFtZWQoJ3NhZmVEdW1wJywgJ2R1bXAnKTtcblxudmFyIGpzWWFtbCA9IHtcblx0VHlwZTogVHlwZSxcblx0U2NoZW1hOiBTY2hlbWEsXG5cdEZBSUxTQUZFX1NDSEVNQTogRkFJTFNBRkVfU0NIRU1BLFxuXHRKU09OX1NDSEVNQTogSlNPTl9TQ0hFTUEsXG5cdENPUkVfU0NIRU1BOiBDT1JFX1NDSEVNQSxcblx0REVGQVVMVF9TQ0hFTUE6IERFRkFVTFRfU0NIRU1BLFxuXHRsb2FkOiBsb2FkLFxuXHRsb2FkQWxsOiBsb2FkQWxsLFxuXHRkdW1wOiBkdW1wLFxuXHRZQU1MRXhjZXB0aW9uOiBZQU1MRXhjZXB0aW9uLFxuXHR0eXBlczogdHlwZXMsXG5cdHNhZmVMb2FkOiBzYWZlTG9hZCxcblx0c2FmZUxvYWRBbGw6IHNhZmVMb2FkQWxsLFxuXHRzYWZlRHVtcDogc2FmZUR1bXBcbn07XG5cbmV4cG9ydCBkZWZhdWx0IGpzWWFtbDtcbmV4cG9ydCB7IENPUkVfU0NIRU1BLCBERUZBVUxUX1NDSEVNQSwgRkFJTFNBRkVfU0NIRU1BLCBKU09OX1NDSEVNQSwgU2NoZW1hLCBUeXBlLCBZQU1MRXhjZXB0aW9uLCBkdW1wLCBsb2FkLCBsb2FkQWxsLCBzYWZlRHVtcCwgc2FmZUxvYWQsIHNhZmVMb2FkQWxsLCB0eXBlcyB9O1xuIiwgIi8vIEhhbmRsZXMgY2hhdCBZQU1MIGxvYWQvc2F2ZSBmb3IgY2hhdCBub3Rlc1xyXG5pbXBvcnQgeyBNeVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5pbXBvcnQgeyBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCAqIGFzIHlhbWwgZnJvbSAnanMteWFtbCc7XHJcbmltcG9ydCB7IGdldFByb3ZpZGVyRnJvbVVuaWZpZWRNb2RlbCwgZ2V0TW9kZWxJZEZyb21VbmlmaWVkTW9kZWwgfSBmcm9tICcuLi8uLi8uLi9wcm92aWRlcnMnO1xyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGJ1aWxkQ2hhdFlhbWwoc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3MsIHByb3ZpZGVyPzogc3RyaW5nLCBtb2RlbD86IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICAvLyBVc2UgdW5pZmllZCBtb2RlbCBpZiBhdmFpbGFibGUsIG90aGVyd2lzZSBmYWxsIGJhY2sgdG8gbGVnYWN5IHByb3ZpZGVyL21vZGVsXHJcbiAgICBpZiAoc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbCkge1xyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyVHlwZSA9IGdldFByb3ZpZGVyRnJvbVVuaWZpZWRNb2RlbChzZXR0aW5ncy5zZWxlY3RlZE1vZGVsKTtcclxuICAgICAgICBjb25zdCBtb2RlbElkID0gZ2V0TW9kZWxJZEZyb21VbmlmaWVkTW9kZWwoc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbCk7XHJcbiAgICAgICAgY29uc3QgeWFtbE9iaiA9IHtcclxuICAgICAgICAgICAgcHJvdmlkZXI6IHByb3ZpZGVyVHlwZSxcclxuICAgICAgICAgICAgbW9kZWw6IG1vZGVsSWQsXHJcbiAgICAgICAgICAgIHVuaWZpZWRfbW9kZWw6IHNldHRpbmdzLnNlbGVjdGVkTW9kZWwsIC8vIEFkZCB1bmlmaWVkIG1vZGVsIElEIGZvciBmdXR1cmUgY29tcGF0aWJpbGl0eVxyXG4gICAgICAgICAgICBzeXN0ZW1fbWVzc2FnZTogc2V0dGluZ3Muc3lzdGVtTWVzc2FnZSxcclxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHNldHRpbmdzLnRlbXBlcmF0dXJlXHJcbiAgICAgICAgfTtcclxuICAgICAgICByZXR1cm4gYC0tLVxcbiR7eWFtbC5kdW1wKHlhbWxPYmopfS0tLVxcbmA7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIExlZ2FjeSBmb3JtYXRcclxuICAgICAgICBjb25zdCB5YW1sT2JqID0ge1xyXG4gICAgICAgICAgICBwcm92aWRlcjogcHJvdmlkZXIgfHwgc2V0dGluZ3MucHJvdmlkZXIsXHJcbiAgICAgICAgICAgIG1vZGVsOiBtb2RlbCB8fCBnZXRDdXJyZW50TW9kZWxGb3JQcm92aWRlcihzZXR0aW5ncyksXHJcbiAgICAgICAgICAgIHN5c3RlbV9tZXNzYWdlOiBzZXR0aW5ncy5zeXN0ZW1NZXNzYWdlLFxyXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogc2V0dGluZ3MudGVtcGVyYXR1cmVcclxuICAgICAgICB9O1xyXG4gICAgICAgIHJldHVybiBgLS0tXFxuJHt5YW1sLmR1bXAoeWFtbE9iail9LS0tXFxuYDtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0Q3VycmVudE1vZGVsRm9yUHJvdmlkZXIoc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3MpOiBzdHJpbmcge1xyXG4gICAgc3dpdGNoIChzZXR0aW5ncy5wcm92aWRlcikge1xyXG4gICAgICAgIGNhc2UgJ29wZW5haSc6XHJcbiAgICAgICAgICAgIHJldHVybiBzZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5tb2RlbDtcclxuICAgICAgICBjYXNlICdhbnRocm9waWMnOlxyXG4gICAgICAgICAgICByZXR1cm4gc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MubW9kZWw7XHJcbiAgICAgICAgY2FzZSAnZ2VtaW5pJzpcclxuICAgICAgICAgICAgcmV0dXJuIHNldHRpbmdzLmdlbWluaVNldHRpbmdzLm1vZGVsO1xyXG4gICAgICAgIGNhc2UgJ29sbGFtYSc6XHJcbiAgICAgICAgICAgIHJldHVybiBzZXR0aW5ncy5vbGxhbWFTZXR0aW5ncy5tb2RlbDtcclxuICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBzYXZlQ2hhdEFzTm90ZSh7XHJcbiAgICBhcHAsXHJcbiAgICBtZXNzYWdlcyxcclxuICAgIHNldHRpbmdzLFxyXG4gICAgcHJvdmlkZXIsXHJcbiAgICBtb2RlbCxcclxuICAgIGNoYXRTZXBhcmF0b3IsXHJcbiAgICBjaGF0Tm90ZUZvbGRlclxyXG59OiB7XHJcbiAgICBhcHA6IGFueSxcclxuICAgIG1lc3NhZ2VzOiBOb2RlTGlzdE9mPEVsZW1lbnQ+LFxyXG4gICAgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3MsXHJcbiAgICBwcm92aWRlcj86IHN0cmluZyxcclxuICAgIG1vZGVsPzogc3RyaW5nLFxyXG4gICAgY2hhdFNlcGFyYXRvcjogc3RyaW5nLFxyXG4gICAgY2hhdE5vdGVGb2xkZXI/OiBzdHJpbmdcclxufSkge1xyXG4gICAgbGV0IGNoYXRDb250ZW50ID0gJyc7XHJcbiAgICBtZXNzYWdlcy5mb3JFYWNoKChlbDogRWxlbWVudCwgaW5kZXg6IG51bWJlcikgPT4ge1xyXG4gICAgICAgIC8vIFByZWZlciByYXcgbWFya2Rvd24gY29udGVudCBpZiBhdmFpbGFibGVcclxuICAgICAgICBjb25zdCByYXdDb250ZW50ID0gKGVsIGFzIEhUTUxFbGVtZW50KS5kYXRhc2V0LnJhd0NvbnRlbnQ7XHJcbiAgICAgICAgY29uc3QgY29udGVudCA9IHJhd0NvbnRlbnQgIT09IHVuZGVmaW5lZCA/IHJhd0NvbnRlbnQgOiBlbC5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZS1jb250ZW50Jyk/LnRleHRDb250ZW50IHx8ICcnO1xyXG4gICAgICAgIGNoYXRDb250ZW50ICs9IGNvbnRlbnQ7XHJcbiAgICAgICAgaWYgKGluZGV4IDwgbWVzc2FnZXMubGVuZ3RoIC0gMSkge1xyXG4gICAgICAgICAgICBjaGF0Q29udGVudCArPSAnXFxuXFxuJyArIGNoYXRTZXBhcmF0b3IgKyAnXFxuXFxuJztcclxuICAgICAgICB9XHJcbiAgICB9KTtcclxuICAgIGNvbnN0IHlhbWwgPSBidWlsZENoYXRZYW1sKHNldHRpbmdzLCBwcm92aWRlciwgbW9kZWwpO1xyXG4gICAgLy8gUmVtb3ZlIGFueSBleGlzdGluZyBZQU1MIGZyb250bWF0dGVyIGZyb20gY2hhdENvbnRlbnRcclxuICAgIGNoYXRDb250ZW50ID0gY2hhdENvbnRlbnQucmVwbGFjZSgvXi0tLVtcXHNcXFNdKj8tLS1cXG4/LywgJycpO1xyXG4gICAgY29uc3Qgbm90ZUNvbnRlbnQgPSB5YW1sICsgJ1xcbicgKyBjaGF0Q29udGVudC50cmltU3RhcnQoKTtcclxuICAgIC8vIEdlbmVyYXRlIGZpbGVuYW1lIHdpdGggdGltZXN0YW1wXHJcbiAgICBjb25zdCBub3cgPSBuZXcgRGF0ZSgpO1xyXG4gICAgY29uc3QgcGFkID0gKG46IG51bWJlcikgPT4gbi50b1N0cmluZygpLnBhZFN0YXJ0KDIsICcwJyk7XHJcbiAgICBjb25zdCBmaWxlTmFtZSA9IGBDaGF0IEV4cG9ydCAke25vdy5nZXRGdWxsWWVhcigpfS0ke3BhZChub3cuZ2V0TW9udGgoKSsxKX0tJHtwYWQobm93LmdldERhdGUoKSl9ICR7cGFkKG5vdy5nZXRIb3VycygpKX0tJHtwYWQobm93LmdldE1pbnV0ZXMoKSl9Lm1kYDtcclxuICAgIGxldCBmaWxlUGF0aCA9IGZpbGVOYW1lO1xyXG4gICAgY29uc3QgZm9sZGVyID0gY2hhdE5vdGVGb2xkZXI/LnRyaW0oKTtcclxuICAgIGlmIChmb2xkZXIpIHtcclxuICAgICAgICBmaWxlUGF0aCA9IGZvbGRlci5yZXBsYWNlKC9bL1xcXFxdKyQvLCAnJykgKyAnLycgKyBmaWxlTmFtZTtcclxuICAgIH1cclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShmaWxlUGF0aCwgbm90ZUNvbnRlbnQpO1xyXG4gICAgICAgIG5ldyBOb3RpY2UoYENoYXQgc2F2ZWQgYXMgbm90ZTogJHtmaWxlUGF0aH1gKTtcclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICBuZXcgTm90aWNlKCdGYWlsZWQgdG8gc2F2ZSBjaGF0IGFzIG5vdGUuJyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIEFkZCBhIGZ1bmN0aW9uIGZvciBsb2FkaW5nIFlBTUwgYW5kIGFwcGx5aW5nIHNldHRpbmdzIChzZWUgcHJldmlvdXMgbG9naWMpXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBsb2FkQ2hhdFlhbWxBbmRBcHBseVNldHRpbmdzKHtcclxuICAgIGFwcCxcclxuICAgIHBsdWdpbixcclxuICAgIHNldHRpbmdzLFxyXG4gICAgZmlsZVxyXG59OiB7XHJcbiAgICBhcHA6IGFueSxcclxuICAgIHBsdWdpbjogYW55LFxyXG4gICAgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3MsXHJcbiAgICBmaWxlOiBhbnlcclxufSkge1xyXG4gICAgLy8gUmVhZCBmaWxlIGNvbnRlbnRzXHJcbiAgICBsZXQgY29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG4gICAgLy8gRXh0cmFjdCBZQU1MIGZyb250bWF0dGVyXHJcbiAgICBjb25zdCB5YW1sTWF0Y2ggPSBjb250ZW50Lm1hdGNoKC9eLS0tXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XHJcbiAgICBsZXQgeWFtbE9iajogYW55ID0ge307XHJcbiAgICBpZiAoeWFtbE1hdGNoKSB7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgeWFtbE9iaiA9IHlhbWwubG9hZCh5YW1sTWF0Y2hbMV0pIHx8IHt9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgeWFtbE9iaiA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBIYW5kbGUgdW5pZmllZCBtb2RlbCBmb3JtYXQgZmlyc3RcclxuICAgIGlmICh5YW1sT2JqLnVuaWZpZWRfbW9kZWwpIHtcclxuICAgICAgICBzZXR0aW5ncy5zZWxlY3RlZE1vZGVsID0geWFtbE9iai51bmlmaWVkX21vZGVsO1xyXG4gICAgfSBlbHNlIGlmICh5YW1sT2JqLnByb3ZpZGVyICYmIHlhbWxPYmoubW9kZWwpIHtcclxuICAgICAgICAvLyBDb252ZXJ0IGxlZ2FjeSBmb3JtYXQgdG8gdW5pZmllZCBtb2RlbCBmb3JtYXRcclxuICAgICAgICBjb25zdCB1bmlmaWVkTW9kZWxJZCA9IGAke3lhbWxPYmoucHJvdmlkZXJ9OiR7eWFtbE9iai5tb2RlbH1gO1xyXG4gICAgICAgIHNldHRpbmdzLnNlbGVjdGVkTW9kZWwgPSB1bmlmaWVkTW9kZWxJZDtcclxuICAgICAgICBcclxuICAgICAgICAvLyBBbHNvIHVwZGF0ZSB0aGUgbGVnYWN5IHByb3ZpZGVyLXNwZWNpZmljIHNldHRpbmdzIGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XHJcbiAgICAgICAgc2V0dGluZ3MucHJvdmlkZXIgPSB5YW1sT2JqLnByb3ZpZGVyO1xyXG4gICAgICAgIHN3aXRjaCAoeWFtbE9iai5wcm92aWRlcikge1xyXG4gICAgICAgICAgICBjYXNlICdvcGVuYWknOlxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MubW9kZWwgPSB5YW1sT2JqLm1vZGVsO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FudGhyb3BpYyc6XHJcbiAgICAgICAgICAgICAgICBzZXR0aW5ncy5hbnRocm9waWNTZXR0aW5ncy5tb2RlbCA9IHlhbWxPYmoubW9kZWw7XHJcbiAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgY2FzZSAnZ2VtaW5pJzpcclxuICAgICAgICAgICAgICAgIHNldHRpbmdzLmdlbWluaVNldHRpbmdzLm1vZGVsID0geWFtbE9iai5tb2RlbDtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICBjYXNlICdvbGxhbWEnOlxyXG4gICAgICAgICAgICAgICAgc2V0dGluZ3Mub2xsYW1hU2V0dGluZ3MubW9kZWwgPSB5YW1sT2JqLm1vZGVsO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFN5c3RlbSBtZXNzYWdlXHJcbiAgICBsZXQgbmV3U3lzdGVtTWVzc2FnZSA9IHlhbWxPYmouc3lzdGVtX21lc3NhZ2UgfHwgc2V0dGluZ3Muc3lzdGVtTWVzc2FnZTtcclxuICAgIFxyXG4gICAgLy8gVGVtcGVyYXR1cmVcclxuICAgIGxldCBuZXdUZW1wZXJhdHVyZSA9IHNldHRpbmdzLnRlbXBlcmF0dXJlO1xyXG4gICAgaWYgKHlhbWxPYmoudGVtcGVyYXR1cmUgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGNvbnN0IHRlbXBOdW0gPSBwYXJzZUZsb2F0KHlhbWxPYmoudGVtcGVyYXR1cmUpO1xyXG4gICAgICAgIGlmICghaXNOYU4odGVtcE51bSkpIG5ld1RlbXBlcmF0dXJlID0gdGVtcE51bTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gQXBwbHkgc2V0dGluZ3NcclxuICAgIHNldHRpbmdzLnN5c3RlbU1lc3NhZ2UgPSBuZXdTeXN0ZW1NZXNzYWdlO1xyXG4gICAgc2V0dGluZ3MudGVtcGVyYXR1cmUgPSBuZXdUZW1wZXJhdHVyZTtcclxuICAgIFxyXG4gICAgaWYgKHBsdWdpbi5vblNldHRpbmdzTG9hZGVkRnJvbU5vdGUpIHtcclxuICAgICAgICBwbHVnaW4ub25TZXR0aW5nc0xvYWRlZEZyb21Ob3RlKHNldHRpbmdzKTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgcmV0dXJuIHtcclxuICAgICAgICBwcm92aWRlcjogeWFtbE9iai5wcm92aWRlcixcclxuICAgICAgICBtb2RlbDogeWFtbE9iai5tb2RlbCxcclxuICAgICAgICB1bmlmaWVkTW9kZWw6IHNldHRpbmdzLnNlbGVjdGVkTW9kZWwsXHJcbiAgICAgICAgc3lzdGVtTWVzc2FnZTogbmV3U3lzdGVtTWVzc2FnZSxcclxuICAgICAgICB0ZW1wZXJhdHVyZTogbmV3VGVtcGVyYXR1cmVcclxuICAgIH07XHJcbn1cclxuIiwgImltcG9ydCB7IE1vZGFsLCBBcHAgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgY2xhc3MgQ2hhdEhlbHBNb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwKSB7XHJcbiAgICAgICAgc3VwZXIoYXBwKTtcclxuICAgIH0gICAgY3JlYXRlQ29sbGFwc2libGVTZWN0aW9uKHRpdGxlOiBzdHJpbmcsIGNvbnRlbnRDYWxsYmFjazogKCkgPT4gdm9pZCwgZXhwYW5kZWQgPSB0cnVlKTogSFRNTEVsZW1lbnQge1xyXG4gICAgICAgIGNvbnN0IHNlY3Rpb25Db250YWluZXIgPSBjcmVhdGVEaXYoKTtcclxuICAgICAgICBzZWN0aW9uQ29udGFpbmVyLmFkZENsYXNzKCdhaS1jb2xsYXBzaWJsZS1zZWN0aW9uJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgaGVhZGVyID0gY3JlYXRlRGl2KCk7XHJcbiAgICAgICAgaGVhZGVyLmFkZENsYXNzKCdhaS1jb2xsYXBzaWJsZS1oZWFkZXInKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBhcnJvdyA9IGNyZWF0ZVNwYW4oKTtcclxuICAgICAgICBhcnJvdy5hZGRDbGFzcygnYWktY29sbGFwc2libGUtYXJyb3cnKTtcclxuICAgICAgICBhcnJvdy50ZXh0Q29udGVudCA9IGV4cGFuZGVkID8gJ1x1MjVCQycgOiAnXHUyNUI2JztcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCB0aXRsZVNwYW4gPSBjcmVhdGVTcGFuKCk7XHJcbiAgICAgICAgdGl0bGVTcGFuLnRleHRDb250ZW50ID0gdGl0bGU7XHJcbiAgICAgICAgXHJcbiAgICAgICAgaGVhZGVyLmFwcGVuZENoaWxkKGFycm93KTtcclxuICAgICAgICBoZWFkZXIuYXBwZW5kQ2hpbGQodGl0bGVTcGFuKTtcclxuICAgICAgICBcclxuICAgICAgICBjb25zdCBjb250ZW50ID0gY3JlYXRlRGl2KCk7XHJcbiAgICAgICAgY29udGVudC5hZGRDbGFzcygnYWktY29sbGFwc2libGUtY29udGVudCcpO1xyXG4gICAgICAgIGNvbnRlbnQuc3R5bGUuZGlzcGxheSA9IGV4cGFuZGVkID8gJ2Jsb2NrJyA6ICdub25lJztcclxuICAgICAgICBcclxuICAgICAgICBoZWFkZXIuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGlzRXhwYW5kZWQgPSBjb250ZW50LnN0eWxlLmRpc3BsYXkgIT09ICdub25lJztcclxuICAgICAgICAgICAgY29udGVudC5zdHlsZS5kaXNwbGF5ID0gaXNFeHBhbmRlZCA/ICdub25lJyA6ICdibG9jayc7XHJcbiAgICAgICAgICAgIGFycm93LnRleHRDb250ZW50ID0gaXNFeHBhbmRlZCA/ICdcdTI1QjYnIDogJ1x1MjVCQyc7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgc2VjdGlvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChoZWFkZXIpO1xyXG4gICAgICAgIHNlY3Rpb25Db250YWluZXIuYXBwZW5kQ2hpbGQoY29udGVudCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2V0IGNvbnRlbnQgYXMgdGhlIGNvbnRleHQgZm9yIHRoZSBjYWxsYmFja1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsQ29udGVudCA9IHRoaXMuY29udGVudEVsO1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsID0gY29udGVudDtcclxuICAgICAgICBjb250ZW50Q2FsbGJhY2soKTtcclxuICAgICAgICB0aGlzLmNvbnRlbnRFbCA9IG9yaWdpbmFsQ29udGVudDtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gc2VjdGlvbkNvbnRhaW5lcjtcclxuICAgIH1cclxuXHJcbiAgICBvbk9wZW4oKSB7XHJcbiAgICAgICAgdGhpcy50aXRsZUVsLnNldFRleHQoJ0FJIENoYXQgSGVscCcpO1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gU2xhc2ggQ29tbWFuZHMgU2VjdGlvblxyXG4gICAgICAgIHRoaXMuY29udGVudEVsLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQ29sbGFwc2libGVTZWN0aW9uKCdTbGFzaCBDb21tYW5kcycsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgPGNvZGU+L2NsZWFyPC9jb2RlPiBcdTIwMTMgQ2xlYXIgdGhlIGNoYXQ8YnI+XHJcbiAgICAgICAgICAgICAgICA8Y29kZT4vY29weTwvY29kZT4gXHUyMDEzIENvcHkgYWxsIGNoYXQ8YnI+XHJcbiAgICAgICAgICAgICAgICA8Y29kZT4vc2F2ZTwvY29kZT4gXHUyMDEzIFNhdmUgY2hhdCBhcyBub3RlPGJyPlxyXG4gICAgICAgICAgICAgICAgPGNvZGU+L3NldHRpbmdzPC9jb2RlPiBcdTIwMTMgT3BlbiBzZXR0aW5nczxicj5cclxuICAgICAgICAgICAgICAgIDxjb2RlPi9oZWxwPC9jb2RlPiBcdTIwMTMgU2hvdyB0aGlzIGhlbHA8YnI+XHJcbiAgICAgICAgICAgICAgICA8YnI+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIEtleWJvYXJkIFNob3J0Y3V0cyBTZWN0aW9uXHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVDb2xsYXBzaWJsZVNlY3Rpb24oJ0tleWJvYXJkIFNob3J0Y3V0cyAod2hlbiBpbnB1dCBpcyBmb2N1c2VkKScsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgPGNvZGU+Q3RybCtTaGlmdCtDPC9jb2RlPiBcdTIwMTMgQ2xlYXIgY2hhdDxicj5cclxuICAgICAgICAgICAgICAgIDxjb2RlPkN0cmwrU2hpZnQrWTwvY29kZT4gXHUyMDEzIENvcHkgYWxsIGNoYXQ8YnI+XHJcbiAgICAgICAgICAgICAgICA8Y29kZT5DdHJsK1NoaWZ0K1M8L2NvZGU+IFx1MjAxMyBTYXZlIGFzIG5vdGU8YnI+XHJcbiAgICAgICAgICAgICAgICA8Y29kZT5DdHJsK1NoaWZ0K088L2NvZGU+IFx1MjAxMyBPcGVuIHNldHRpbmdzPGJyPlxyXG4gICAgICAgICAgICAgICAgPGNvZGU+Q3RybCtTaGlmdCtIPC9jb2RlPiBcdTIwMTMgU2hvdyB0aGlzIGhlbHA8YnI+XHJcbiAgICAgICAgICAgICAgICA8YnI+XHJcbiAgICAgICAgICAgIGA7XHJcbiAgICAgICAgfSkpO1xyXG4gICAgICAgICAgLy8gT3RoZXIgU2VjdGlvblxyXG4gICAgICAgIHRoaXMuY29udGVudEVsLmFwcGVuZENoaWxkKHRoaXMuY3JlYXRlQ29sbGFwc2libGVTZWN0aW9uKCdPdGhlcicsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWwuaW5uZXJIVE1MID0gYFxyXG4gICAgICAgICAgICAgICAgPGNvZGU+RW50ZXI8L2NvZGU+IFx1MjAxMyBTZW5kIG1lc3NhZ2U8YnI+XHJcbiAgICAgICAgICAgICAgICA8Y29kZT5TaGlmdCtFbnRlcjwvY29kZT4gXHUyMDEzIE5ld2xpbmU8YnI+XHJcbiAgICAgICAgICAgICAgICA8YnI+XHJcbiAgICAgICAgICAgICAgICBZb3UgY2FuIGFsc28gdXNlIHRoZSBidXR0b25zIGF0IHRoZSB0b3Agb2YgdGhlIGNoYXQgd2luZG93LlxyXG4gICAgICAgICAgICBgO1xyXG4gICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgLy8gUmVmZXJlbmNlIEN1cnJlbnQgTm90ZSBTZWN0aW9uXHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuYXBwZW5kQ2hpbGQodGhpcy5jcmVhdGVDb2xsYXBzaWJsZVNlY3Rpb24oJ1JlZmVyZW5jZSBDdXJyZW50IE5vdGUnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuY29udGVudEVsLmlubmVySFRNTCA9IGBcclxuICAgICAgICAgICAgICAgIDxzdHJvbmc+V2hhdCBpcyBpdD88L3N0cm9uZz48YnI+XHJcbiAgICAgICAgICAgICAgICBXaGVuIGVuYWJsZWQsIHRoZSBBSSBjYW4gc2VlIHRoZSBjb250ZW50IG9mIHlvdXIgY3VycmVudGx5IGFjdGl2ZSBub3RlIGR1cmluZyBjaGF0LiBUaGlzIGhlbHBzIHRoZSBBSSBnaXZlIG1vcmUgcmVsZXZhbnQsIGNvbnRleHQtYXdhcmUgcmVzcG9uc2VzLjxicj48YnI+XHJcblxyXG4gICAgICAgICAgICAgICAgPHN0cm9uZz5Ib3cgdG8gdXNlOjwvc3Ryb25nPjxicj5cclxuICAgICAgICAgICAgICAgIDx1bCBzdHlsZT1cIm1hcmdpbi10b3A6MDttYXJnaW4tYm90dG9tOjAuNWVtO1wiPlxyXG4gICAgICAgICAgICAgICAgICA8bGk+Q2xpY2sgdGhlIDxjb2RlPlx1RDgzRFx1RENERDwvY29kZT4gYnV0dG9uIGF0IHRoZSB0b3Agb2YgdGhlIGNoYXQgd2luZG93IHRvIHRvZ2dsZSByZWZlcmVuY2luZyB0aGUgY3VycmVudCBub3RlLjwvbGk+XHJcbiAgICAgICAgICAgICAgICAgIDxsaT5PciB1c2UgdGhlIHNsYXNoIGNvbW1hbmQgPGNvZGU+L3JlZjwvY29kZT4gb3Iga2V5Ym9hcmQgc2hvcnRjdXQgPGNvZGU+Q3RybCtTaGlmdCtSPC9jb2RlPi48L2xpPlxyXG4gICAgICAgICAgICAgICAgICA8bGk+VGhlIG5hbWUgb2YgdGhlIHJlZmVyZW5jZWQgbm90ZSB3aWxsIGFwcGVhciBpbiBmYWRlZCBzbWFsbCB0ZXh0IGJlbG93IHRoZSBidXR0b25zIHdoZW4gZW5hYmxlZC48L2xpPlxyXG4gICAgICAgICAgICAgICAgPC91bD5cclxuXHJcbiAgICAgICAgICAgICAgICA8c3Ryb25nPk5vdGVzOjwvc3Ryb25nPjxicj5cclxuICAgICAgICAgICAgICAgIC0gV2hlbiByZWZlcmVuY2luZyBpcyBlbmFibGVkLCB0aGUgQUkgcmVjZWl2ZXM6PGJyPlxyXG4gICAgICAgICAgICAgICAgPHVsIHN0eWxlPVwibWFyZ2luLXRvcDowO21hcmdpbi1ib3R0b206MC41ZW07XCI+XHJcbiAgICAgICAgICAgICAgICAgIDxsaT5UaGUgc3lzdGVtIHByb21wdCAoYWx3YXlzKTwvbGk+XHJcbiAgICAgICAgICAgICAgICAgIDxsaT5Db250ZXh0IG5vdGVzIChpZiBlbmFibGVkIGluIHNldHRpbmdzKTwvbGk+XHJcbiAgICAgICAgICAgICAgICAgIDxsaT5UaGUgY29udGVudCBvZiB0aGUgY3VycmVudGx5IGFjdGl2ZSBub3RlPC9saT5cclxuICAgICAgICAgICAgICAgICAgPGxpPlRoZSBjaGF0IGhpc3RvcnkgKGFsbCBwcmV2aW91cyB1c2VyL2Fzc2lzdGFudCBtZXNzYWdlcyk8L2xpPlxyXG4gICAgICAgICAgICAgICAgPC91bD5cclxuICAgICAgICAgICAgICAgIC0gT25seSB0aGUgY3VycmVudGx5IGFjdGl2ZSBub3RlIGlzIHNoYXJlZCBpbiBhZGRpdGlvbiB0byB0aGUgYWJvdmUgY29udGV4dC48YnI+XHJcbiAgICAgICAgICAgICAgICAtIFlvdSBjYW4gdHVybiB0aGlzIG9uIG9yIG9mZiBhdCBhbnkgdGltZS48YnI+XHJcbiAgICAgICAgICAgICAgICAtIE5vIG90aGVyIG5vdGVzIG9yIHBlcnNvbmFsIGRhdGEgYXJlIGFjY2Vzc2VkLjxicj5cclxuICAgICAgICAgICAgICAgIC0gVGhlIDxjb2RlPlx1RDgzRFx1RENERDwvY29kZT4gYnV0dG9uIHdpbGwgc2hvdyBcIk9uXCIgb3IgXCJPZmZcIiB0byBpbmRpY2F0ZSB0aGUgY3VycmVudCBzdGF0ZS5cclxuICAgICAgICAgICAgYDtcclxuICAgICAgICB9KSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGF0IEhlbHAgTW9kYWxcclxuICpcclxuICogUmVmZXJlbmNlIEN1cnJlbnQgTm90ZTpcclxuICogLSBVc2UgdGhlIFwiXHVEODNEXHVEQ0REXCIgYnV0dG9uIGF0IHRoZSB0b3Agb2YgdGhlIGNoYXQgdG8gdG9nZ2xlIHJlZmVyZW5jaW5nIHRoZSBjdXJyZW50IG5vdGUuXHJcbiAqIC0gWW91IGNhbiBhbHNvIHVzZSB0aGUgc2xhc2ggY29tbWFuZCBcIi9yZWZcIiBvciB0aGUga2V5Ym9hcmQgc2hvcnRjdXQgQ3RybCtTaGlmdCtSLlxyXG4gKiAtIFdoZW4gZW5hYmxlZCwgdGhlIG5vdGUgbmFtZSBhcHBlYXJzIGJlbG93IHRoZSBidXR0b24uXHJcbiAqIC0gT3RoZXIgY29udGV4dCAoc3lzdGVtIHByb21wdCwgY29udGV4dCBub3RlcywgY2hhdCBoaXN0b3J5KSBtYXkgYWxzbyBiZSBzZW50LlxyXG4gKi9cclxuIiwgImltcG9ydCB7IEFwcCwgTW9kYWwsIFNldHRpbmcsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IE15UGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBjcmVhdGVQcm92aWRlciwgY3JlYXRlUHJvdmlkZXJGcm9tVW5pZmllZE1vZGVsLCBnZXRBbGxBdmFpbGFibGVNb2RlbHMsIGdldFByb3ZpZGVyRnJvbVVuaWZpZWRNb2RlbCB9IGZyb20gJy4uLy4uLy4uL3Byb3ZpZGVycyc7XHJcbmltcG9ydCB7IFNldHRpbmdzU2VjdGlvbnMgfSBmcm9tICcuL1NldHRpbmdzU2VjdGlvbnMnO1xyXG5pbXBvcnQgeyBDb2xsYXBzaWJsZVNlY3Rpb25SZW5kZXJlciB9IGZyb20gJy4vQ29sbGFwc2libGVTZWN0aW9uJztcclxuXHJcbmV4cG9ydCBjbGFzcyBTZXR0aW5nc01vZGFsIGV4dGVuZHMgTW9kYWwge1xyXG4gICAgcGx1Z2luOiBNeVBsdWdpbjtcclxuICAgIHByaXZhdGUgc2V0dGluZ3NTZWN0aW9uczogU2V0dGluZ3NTZWN0aW9ucztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGFwcCk7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICAgICAgdGhpcy5zZXR0aW5nc1NlY3Rpb25zID0gbmV3IFNldHRpbmdzU2VjdGlvbnMocGx1Z2luKTtcclxuICAgICAgICB0aGlzLnRpdGxlRWwuc2V0VGV4dCgnQUkgTW9kZWwgU2V0dGluZ3MnKTtcclxuICAgICAgICAvLyBMaXN0ZW4gZm9yIHNldHRpbmdzIGNoYW5nZXMgYW5kIHJlZnJlc2ggVUlcclxuICAgICAgICB0aGlzLnBsdWdpbi5vblNldHRpbmdzQ2hhbmdlKHRoaXMuX29uU2V0dGluZ3NDaGFuZ2UpO1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgX29uU2V0dGluZ3NDaGFuZ2UgPSAoKSA9PiB7XHJcbiAgICAgICAgdGhpcy5vbk9wZW4oKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdhaS1zZXR0aW5ncy1tb2RhbCcpO1xyXG4gICAgICAgIGF3YWl0IHRoaXMuc2V0dGluZ3NTZWN0aW9ucy5yZW5kZXJBbGxTZXR0aW5ncyhjb250ZW50RWwsIHsgb25SZWZyZXNoOiAoKSA9PiB0aGlzLm9uT3BlbigpIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4ub2ZmU2V0dGluZ3NDaGFuZ2UodGhpcy5fb25TZXR0aW5nc0NoYW5nZSk7XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgY29weVRvQ2xpcGJvYXJkIH0gZnJvbSAnLi9CdXR0b25zJztcclxuaW1wb3J0IHsgc2F2ZUNoYXRBc05vdGUsIGxvYWRDaGF0WWFtbEFuZEFwcGx5U2V0dGluZ3MgfSBmcm9tICcuL2NoYXRQZXJzaXN0ZW5jZSc7XHJcbmltcG9ydCB7IENoYXRIZWxwTW9kYWwgfSBmcm9tICcuL0NoYXRIZWxwTW9kYWwnO1xyXG5pbXBvcnQgeyBOb3RpY2UsIEFwcCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IE15UGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBDaGF0SGlzdG9yeU1hbmFnZXIgfSBmcm9tICcuL0NoYXRIaXN0b3J5TWFuYWdlcic7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gaGFuZGxlQ29weUFsbChtZXNzYWdlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQsIHBsdWdpbjogTXlQbHVnaW4pIHtcclxuICAgIHJldHVybiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBtZXNzYWdlc0NvbnRhaW5lci5xdWVyeVNlbGVjdG9yQWxsKCcuYWktY2hhdC1tZXNzYWdlJyk7XHJcbiAgICAgICAgbGV0IGNoYXRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgbWVzc2FnZXMuZm9yRWFjaCgoZWwsIGluZGV4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBlbC5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZS1jb250ZW50Jyk/LnRleHRDb250ZW50IHx8ICcnO1xyXG4gICAgICAgICAgICBjaGF0Q29udGVudCArPSBjb250ZW50O1xyXG4gICAgICAgICAgICBpZiAoaW5kZXggPCBtZXNzYWdlcy5sZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjaGF0Q29udGVudCArPSAnXFxuXFxuJyArIHBsdWdpbi5zZXR0aW5ncy5jaGF0U2VwYXJhdG9yICsgJ1xcblxcbic7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuICAgICAgICBhd2FpdCBjb3B5VG9DbGlwYm9hcmQoY2hhdENvbnRlbnQpO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVNhdmVOb3RlKG1lc3NhZ2VzQ29udGFpbmVyOiBIVE1MRWxlbWVudCwgcGx1Z2luOiBNeVBsdWdpbiwgYXBwOiBBcHApIHtcclxuICAgIHJldHVybiBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgLy8gV2l0aCB1bmlmaWVkIG1vZGVsIGFwcHJvYWNoLCB3ZSBubyBsb25nZXIgbmVlZCB0byBkZXRlcm1pbmUgcHJvdmlkZXIvbW9kZWwgaGVyZVxyXG4gICAgICAgIC8vIFRoZSBidWlsZENoYXRZYW1sIGZ1bmN0aW9uIHdpbGwgaGFuZGxlIHRoaXMgYmFzZWQgb24gc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbFxyXG4gICAgICAgIGF3YWl0IHNhdmVDaGF0QXNOb3RlKHtcclxuICAgICAgICAgICAgYXBwLFxyXG4gICAgICAgICAgICBtZXNzYWdlczogbWVzc2FnZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmFpLWNoYXQtbWVzc2FnZScpLFxyXG4gICAgICAgICAgICBzZXR0aW5nczogcGx1Z2luLnNldHRpbmdzLFxyXG4gICAgICAgICAgICBjaGF0U2VwYXJhdG9yOiBwbHVnaW4uc2V0dGluZ3MuY2hhdFNlcGFyYXRvcixcclxuICAgICAgICAgICAgY2hhdE5vdGVGb2xkZXI6IHBsdWdpbi5zZXR0aW5ncy5jaGF0Tm90ZUZvbGRlclxyXG4gICAgICAgIH0pO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZUNsZWFyQ2hhdChtZXNzYWdlc0NvbnRhaW5lcjogSFRNTEVsZW1lbnQsIGNoYXRIaXN0b3J5TWFuYWdlcjogQ2hhdEhpc3RvcnlNYW5hZ2VyKSB7XHJcbiAgICByZXR1cm4gYXN5bmMgKCkgPT4ge1xyXG4gICAgICAgIG1lc3NhZ2VzQ29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgY2hhdEhpc3RvcnlNYW5hZ2VyLmNsZWFySGlzdG9yeSgpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShcIkZhaWxlZCB0byBjbGVhciBjaGF0IGhpc3RvcnkuXCIpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVTZXR0aW5ncyhhcHA6IEFwcCwgcGx1Z2luOiBNeVBsdWdpbikge1xyXG4gICAgcmV0dXJuICgpID0+IHtcclxuICAgICAgICAvLyBMYXp5IGltcG9ydCB0byBhdm9pZCBjaXJjdWxhciBkZXBlbmRlbmN5IGlmIG5lZWRlZFxyXG4gICAgICAgIGNvbnN0IHsgU2V0dGluZ3NNb2RhbCB9ID0gcmVxdWlyZSgnLi9TZXR0aW5nc01vZGFsJyk7XHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NNb2RhbCA9IG5ldyBTZXR0aW5nc01vZGFsKGFwcCwgcGx1Z2luKTtcclxuICAgICAgICBzZXR0aW5nc01vZGFsLm9wZW4oKTtcclxuICAgIH07XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBoYW5kbGVIZWxwKGFwcDogQXBwKSB7XHJcbiAgICByZXR1cm4gKCkgPT4ge1xyXG4gICAgICAgIG5ldyBDaGF0SGVscE1vZGFsKGFwcCkub3BlbigpO1xyXG4gICAgfTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGhhbmRsZVJlZmVyZW5jZU5vdGUoYXBwOiBBcHAsIHBsdWdpbjogTXlQbHVnaW4pIHtcclxuICAgIHJldHVybiAoKSA9PiB7XHJcbiAgICAgICAgcGx1Z2luLnNldHRpbmdzLnJlZmVyZW5jZUN1cnJlbnROb3RlID0gIXBsdWdpbi5zZXR0aW5ncy5yZWZlcmVuY2VDdXJyZW50Tm90ZTtcclxuICAgICAgICBwbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgbmV3IE5vdGljZShgUmVmZXJlbmNlIGN1cnJlbnQgbm90ZTogJHtwbHVnaW4uc2V0dGluZ3MucmVmZXJlbmNlQ3VycmVudE5vdGUgPyAnT04nIDogJ09GRid9YCk7XHJcbiAgICAgICAgLy8gT3B0aW9uYWxseSwgdHJpZ2dlciBhIGN1c3RvbSBldmVudCBmb3IgaW1tZWRpYXRlIFVJIHVwZGF0ZVxyXG4gICAgICAgIGFwcC53b3Jrc3BhY2UudHJpZ2dlcignYWktYXNzaXN0YW50OnJlZmVyZW5jZS1ub3RlLXRvZ2dsZWQnKTtcclxuICAgIH07XHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IE15UGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBoYW5kbGVIZWxwIH0gZnJvbSAnLi9ldmVudEhhbmRsZXJzJztcclxuXHJcbnR5cGUgU2xhc2hDb21tYW5kSGFuZGxlciA9IChjbWQ6IHN0cmluZykgPT4gUHJvbWlzZTx2b2lkPiB8IHZvaWQ7XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gc2V0dXBJbnB1dEhhbmRsZXIoXHJcbiAgICB0ZXh0YXJlYTogSFRNTFRleHRBcmVhRWxlbWVudCxcclxuICAgIHNlbmRNZXNzYWdlOiAoKSA9PiBQcm9taXNlPHZvaWQ+LFxyXG4gICAgaGFuZGxlU2xhc2hDb21tYW5kOiBTbGFzaENvbW1hbmRIYW5kbGVyLFxyXG4gICAgYXBwOiBBcHAsXHJcbiAgICBwbHVnaW46IE15UGx1Z2luLFxyXG4gICAgc2VuZEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQsXHJcbiAgICBzdG9wQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudFxyXG4pIHtcclxuICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBhc3luYyAoZSkgPT4ge1xyXG4gICAgICAgIC8vIEtleWJvYXJkIHNob3J0Y3V0czogQ3RybCtTaGlmdCtDIChDbGVhciksIFkgKENvcHkpLCBTIChTYXZlKSwgTyAoU2V0dGluZ3MpLCBIIChIZWxwKVxyXG4gICAgICAgIGlmIChlLmN0cmxLZXkgJiYgZS5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICBpZiAoZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2MnKSB7IGUucHJldmVudERlZmF1bHQoKTsgYXdhaXQgaGFuZGxlU2xhc2hDb21tYW5kKCcvY2xlYXInKTsgcmV0dXJuOyB9XHJcbiAgICAgICAgICAgIGlmIChlLmtleS50b0xvd2VyQ2FzZSgpID09PSAneScpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyBhd2FpdCBoYW5kbGVTbGFzaENvbW1hbmQoJy9jb3B5Jyk7IHJldHVybjsgfVxyXG4gICAgICAgICAgICBpZiAoZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gJ3MnKSB7IGUucHJldmVudERlZmF1bHQoKTsgYXdhaXQgaGFuZGxlU2xhc2hDb21tYW5kKCcvc2F2ZScpOyByZXR1cm47IH1cclxuICAgICAgICAgICAgaWYgKGUua2V5LnRvTG93ZXJDYXNlKCkgPT09ICdvJykgeyBlLnByZXZlbnREZWZhdWx0KCk7IGF3YWl0IGhhbmRsZVNsYXNoQ29tbWFuZCgnL3NldHRpbmdzJyk7IHJldHVybjsgfVxyXG4gICAgICAgICAgICBpZiAoZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gJ2gnKSB7IGUucHJldmVudERlZmF1bHQoKTsgaGFuZGxlSGVscChhcHApKCk7IHJldHVybjsgfVxyXG4gICAgICAgICAgICBpZiAoZS5rZXkudG9Mb3dlckNhc2UoKSA9PT0gJ3InKSB7IGUucHJldmVudERlZmF1bHQoKTsgYXdhaXQgaGFuZGxlU2xhc2hDb21tYW5kKCcvcmVmJyk7IHJldHVybjsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTbGFzaCBjb21tYW5kc1xyXG4gICAgICAgIGlmIChlLmtleSA9PT0gJ0VudGVyJyAmJiAhZS5zaGlmdEtleSkge1xyXG4gICAgICAgICAgICBjb25zdCB2YWwgPSB0ZXh0YXJlYS52YWx1ZS50cmltKCk7XHJcbiAgICAgICAgICAgIGlmICh2YWwgPT09ICcvY2xlYXInIHx8IHZhbCA9PT0gJy9jb3B5JyB8fCB2YWwgPT09ICcvc2F2ZScgfHwgdmFsID09PSAnL3NldHRpbmdzJyB8fCB2YWwgPT09ICcvaGVscCcgfHwgdmFsID09PSAnL3JlZicpIHtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGhhbmRsZVNsYXNoQ29tbWFuZCh2YWwpO1xyXG4gICAgICAgICAgICAgICAgdGV4dGFyZWEudmFsdWUgPSAnJztcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBhd2FpdCBzZW5kTWVzc2FnZSgpO1xyXG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFNoaWZ0K0VudGVyIHdpbGwgZmFsbCB0aHJvdWdoIGFuZCBhY3QgYXMgYSBub3JtYWwgRW50ZXIgKG5ld2xpbmUpXHJcbiAgICB9KTtcclxufVxyXG4iLCAiaW1wb3J0IHsgTm90aWNlLCBURmlsZSwgQXBwIH0gZnJvbSBcIm9ic2lkaWFuXCI7XHJcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyLCBjcmVhdGVQcm92aWRlckZyb21VbmlmaWVkTW9kZWwgfSBmcm9tIFwiLi4vcHJvdmlkZXJzXCI7XHJcbmltcG9ydCB7IE1lc3NhZ2UsIE15UGx1Z2luU2V0dGluZ3MgfSBmcm9tIFwiLi90eXBlc1wiO1xyXG5pbXBvcnQgeyBERUZBVUxUX1RJVExFX1BST01QVCwgREVGQVVMVF9TVU1NQVJZX1BST01QVCwgREVGQVVMVF9ZQU1MX1NZU1RFTV9NRVNTQUdFIH0gZnJvbSBcIi4vcHJvbXB0Q29uc3RhbnRzXCI7XHJcbmltcG9ydCAqIGFzIHlhbWwgZnJvbSBcImpzLXlhbWxcIjtcclxuXHJcbi8qKlxyXG4gKiBHZW5lcmF0ZSBhIFRhYmxlIG9mIENvbnRlbnRzIGZyb20gYWxsIGhlYWRlcnMgaW4gdGhlIG5vdGUuXHJcbiAqIFJldHVybnMgYSBzdHJpbmcgd2l0aCBpbmRlbnRlZCBidWxsZXQgcG9pbnRzLCBvciBhbiBlbXB0eSBzdHJpbmcgaWYgbm8gaGVhZGVycy5cclxuICovXHJcbmZ1bmN0aW9uIGdlbmVyYXRlVGFibGVPZkNvbnRlbnRzKG5vdGVDb250ZW50OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgY29uc3QgaGVhZGVyTGluZXMgPSBub3RlQ29udGVudC5zcGxpdCgnXFxuJykuZmlsdGVyKGxpbmUgPT4gL14jezEsNn1cXHMrLisvLnRlc3QobGluZSkpO1xyXG4gICAgaWYgKGhlYWRlckxpbmVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuIFwiXCI7XHJcbiAgICByZXR1cm4gaGVhZGVyTGluZXNcclxuICAgICAgICAubWFwKGxpbmUgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBtYXRjaCA9IGxpbmUubWF0Y2goL14oI3sxLDZ9KVxccysoLispLyk7XHJcbiAgICAgICAgICAgIGlmICghbWF0Y2gpIHJldHVybiBcIlwiO1xyXG4gICAgICAgICAgICBjb25zdCBsZXZlbCA9IG1hdGNoWzFdLmxlbmd0aDtcclxuICAgICAgICAgICAgY29uc3QgdGl0bGUgPSBtYXRjaFsyXS50cmltKCk7XHJcbiAgICAgICAgICAgIC8vIEluZGVudCBiYXNlZCBvbiBoZWFkZXIgbGV2ZWwgKDIgc3BhY2VzIHBlciBsZXZlbCBhZnRlciBIMSlcclxuICAgICAgICAgICAgcmV0dXJuIGAkeycgICcucmVwZWF0KGxldmVsIC0gMSl9LSAke3RpdGxlfWA7XHJcbiAgICAgICAgfSlcclxuICAgICAgICAuam9pbignXFxuJyk7XHJcbn1cclxuXHJcbmNvbnN0IERFQlVHID0gdHJ1ZTtcclxuXHJcbmZ1bmN0aW9uIGRlYnVnKC4uLmFyZ3M6IGFueVtdKSB7XHJcbiAgICBpZiAoREVCVUcpIHtcclxuICAgICAgICBjb25zb2xlLmxvZyhcIltERUJVR11cIiwgLi4uYXJncyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZW5lcmF0ZU5vdGVUaXRsZShcclxuICAgIGFwcDogQXBwLFxyXG4gICAgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3MsXHJcbiAgICBwcm9jZXNzTWVzc2FnZXM6IChtZXNzYWdlczogTWVzc2FnZVtdKSA9PiBQcm9taXNlPE1lc3NhZ2VbXT5cclxuKSB7XHJcbiAgICBkZWJ1ZyhcIlN0YXJ0aW5nIGdlbmVyYXRlTm90ZVRpdGxlXCIpO1xyXG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgaWYgKCFhY3RpdmVGaWxlKSB7XHJcbiAgICAgICAgbmV3IE5vdGljZShcIk5vIGFjdGl2ZSBub3RlIGZvdW5kLlwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbm90ZUNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQuY2FjaGVkUmVhZChhY3RpdmVGaWxlKTtcclxuICAgIG5vdGVDb250ZW50ID0gbm90ZUNvbnRlbnQuc2xpY2UoMCwgMTUwMDApO1xyXG5cclxuICAgIC8vIEdlbmVyYXRlIFRhYmxlIG9mIENvbnRlbnRzIGZyb20gYWxsIGhlYWRlcnMgaW4gdGhlIG5vdGVcclxuICAgIGNvbnN0IHRvYyA9IGdlbmVyYXRlVGFibGVPZkNvbnRlbnRzKG5vdGVDb250ZW50KTtcclxuXHJcbiAgICAvLyBVc2UgdGhlIGRlZmF1bHQgdGl0bGUgcHJvbXB0IGZyb20gcHJvbXB0Q29uc3RhbnRzLnRzXHJcbiAgICBjb25zdCBwcm9tcHQgPSBERUZBVUxUX1RJVExFX1BST01QVDtcclxuICAgIGNvbnN0IHVzZXJDb250ZW50ID0gKHRvYyAmJiB0b2MudHJpbSgpLmxlbmd0aCA+IDAgPyBcIlRhYmxlIG9mIENvbnRlbnRzOlxcblwiICsgdG9jICsgXCJcXG5cXG5cIiA6IFwiXCIpICsgbm90ZUNvbnRlbnQ7ICAgIHRyeSB7XHJcbiAgICAgICAgZGVidWcoXCJQcm92aWRlcjpcIiwgc2V0dGluZ3MucHJvdmlkZXIpO1xyXG4gICAgICAgIC8vIFVzZSB1bmlmaWVkIG1vZGVsIGlmIGF2YWlsYWJsZSwgZmFsbGJhY2sgdG8gbGVnYWN5IHByb3ZpZGVyIHNlbGVjdGlvblxyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbCBcclxuICAgICAgICAgICAgPyBjcmVhdGVQcm92aWRlckZyb21VbmlmaWVkTW9kZWwoc2V0dGluZ3MsIHNldHRpbmdzLnNlbGVjdGVkTW9kZWwpXHJcbiAgICAgICAgICAgIDogY3JlYXRlUHJvdmlkZXIoc2V0dGluZ3MpO1xyXG4gICAgICAgIC8vIENvbXBvc2UgbWVzc2FnZXM6IHN5c3RlbSA9IHByb21wdCwgdXNlciA9IG5vdGUgY29udGVudCAod2l0aCBUT0MpXHJcbiAgICAgICAgY29uc3QgbWVzc2FnZXM6IE1lc3NhZ2VbXSA9IFtcclxuICAgICAgICAgICAgeyByb2xlOiBcInN5c3RlbVwiLCBjb250ZW50OiBwcm9tcHQgfSxcclxuICAgICAgICAgICAgeyByb2xlOiBcInVzZXJcIiwgY29udGVudDogdXNlckNvbnRlbnQgfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIGRlYnVnKFwiT3JpZ2luYWwgbWVzc2FnZXM6XCIsIEpTT04uc3RyaW5naWZ5KG1lc3NhZ2VzKSk7XHJcbiAgICAgICAgY29uc3Qgb3JpZ2luYWxFbmFibGVDb250ZXh0Tm90ZXMgPSBzZXR0aW5ncy5lbmFibGVDb250ZXh0Tm90ZXM7XHJcbiAgICAgICAgZGVidWcoXCJPcmlnaW5hbCBlbmFibGVDb250ZXh0Tm90ZXM6XCIsIG9yaWdpbmFsRW5hYmxlQ29udGV4dE5vdGVzKTtcclxuICAgICAgICAoc2V0dGluZ3MgYXMgYW55KS5lbmFibGVDb250ZXh0Tm90ZXMgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkTWVzc2FnZXMgPSBhd2FpdCBwcm9jZXNzTWVzc2FnZXMobWVzc2FnZXMpO1xyXG4gICAgICAgICAgICBkZWJ1ZyhcIlByb2Nlc3NlZCBtZXNzYWdlczpcIiwgSlNPTi5zdHJpbmdpZnkocHJvY2Vzc2VkTWVzc2FnZXMpKTtcclxuICAgICAgICAgICAgKHNldHRpbmdzIGFzIGFueSkuZW5hYmxlQ29udGV4dE5vdGVzID0gb3JpZ2luYWxFbmFibGVDb250ZXh0Tm90ZXM7XHJcblxyXG4gICAgICAgICAgICBpZiAoIXByb2Nlc3NlZE1lc3NhZ2VzIHx8IHByb2Nlc3NlZE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgZGVidWcoXCJObyBwcm9jZXNzZWQgbWVzc2FnZXMhXCIpO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIHZhbGlkIG1lc3NhZ2VzIHRvIHNlbmQgdG8gdGhlIG1vZGVsLiBQbGVhc2UgY2hlY2sgeW91ciBub3RlIGNvbnRlbnQuXCIpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBkZWJ1ZyhcIkNhbGxpbmcgcHJvdmlkZXIuZ2V0Q29tcGxldGlvblwiKTtcclxuICAgICAgICAgICAgbGV0IHJlc3VsdEJ1ZmZlciA9IFwiXCI7XHJcbiAgICAgICAgICAgIGF3YWl0IHByb3ZpZGVyLmdldENvbXBsZXRpb24ocHJvY2Vzc2VkTWVzc2FnZXMsIHtcclxuICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiAwLFxyXG4gICAgICAgICAgICAgICAgc3RyZWFtQ2FsbGJhY2s6IChjaHVuazogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0QnVmZmVyICs9IGNodW5rO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgZGVidWcoXCJSZXN1bHQgZnJvbSBwcm92aWRlciAoYnVmZmVyZWQpOlwiLCByZXN1bHRCdWZmZXIpO1xyXG5cclxuICAgICAgICAgICAgbGV0IHRpdGxlID0gcmVzdWx0QnVmZmVyLnRyaW0oKTtcclxuICAgICAgICAgICAgZGVidWcoXCJFeHRyYWN0ZWQgdGl0bGUgYmVmb3JlIHNhbml0aXphdGlvbjpcIiwgdGl0bGUpO1xyXG5cclxuICAgICAgICAgICAgLy8gUmVtb3ZlIGZvcmJpZGRlbiBjaGFyYWN0ZXJzOiBiYWNrc2xhc2hlcywgZm9yd2FyZCBzbGFzaGVzLCBjb2xvbnNcclxuICAgICAgICAgICAgdGl0bGUgPSB0aXRsZS5yZXBsYWNlKC9bXFxcXC86XS9nLCBcIlwiKS50cmltKCk7XHJcbiAgICAgICAgICAgIGRlYnVnKFwiU2FuaXRpemVkIHRpdGxlOlwiLCB0aXRsZSk7XHJcblxyXG4gICAgICAgICAgICBpZiAodGl0bGUgJiYgdHlwZW9mIHRpdGxlID09PSBcInN0cmluZ1wiICYmIHRpdGxlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG91dHB1dE1vZGUgPSBzZXR0aW5ncy50aXRsZU91dHB1dE1vZGUgPz8gXCJjbGlwYm9hcmRcIjtcclxuICAgICAgICAgICAgICAgIGRlYnVnKFwiT3V0cHV0IG1vZGU6XCIsIG91dHB1dE1vZGUpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG91dHB1dE1vZGUgPT09IFwicmVwbGFjZS1maWxlbmFtZVwiKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4dCA9IGZpbGUuZXh0ZW5zaW9uID8gXCIuXCIgKyBmaWxlLmV4dGVuc2lvbiA6IFwiXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHNhbml0aXplZCA9IHRpdGxlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBwYXJlbnRQYXRoID0gZmlsZS5wYXJlbnQgPyBmaWxlLnBhcmVudC5wYXRoIDogXCJcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgbmV3UGF0aCA9IHBhcmVudFBhdGggPyAocGFyZW50UGF0aCArIFwiL1wiICsgc2FuaXRpemVkICsgZXh0KSA6IChzYW5pdGl6ZWQgKyBleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZmlsZS5wYXRoICE9PSBuZXdQYXRoKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBhcHAuZmlsZU1hbmFnZXIucmVuYW1lRmlsZShmaWxlLCBuZXdQYXRoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYE5vdGUgcmVuYW1lZCB0bzogJHtzYW5pdGl6ZWR9JHtleHR9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBOb3RlIHRpdGxlIGlzIGFscmVhZHk6ICR7c2FuaXRpemVkfSR7ZXh0fWApO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChvdXRwdXRNb2RlID09PSBcIm1ldGFkYXRhXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaWxlID0gYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXdhaXQgdXBzZXJ0WWFtbEZpZWxkKGFwcCwgZmlsZSwgXCJ0aXRsZVwiLCB0aXRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEluc2VydGVkIHRpdGxlIGludG8gbWV0YWRhdGE6ICR7dGl0bGV9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0aXRsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEdlbmVyYXRlZCB0aXRsZSAoY29waWVkKTogJHt0aXRsZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEdlbmVyYXRlZCB0aXRsZTogJHt0aXRsZX1gKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkZWJ1ZyhcIk5vIHRpdGxlIGdlbmVyYXRlZCBhZnRlciBzYW5pdGl6YXRpb24uXCIpO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZShcIk5vIHRpdGxlIGdlbmVyYXRlZC5cIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChwcm9jZXNzRXJyb3IpIHtcclxuICAgICAgICAgICAgZGVidWcoXCJFcnJvciBpbiBwcm9jZXNzTWVzc2FnZXMgb3IgcHJvdmlkZXIuZ2V0Q29tcGxldGlvbjpcIiwgcHJvY2Vzc0Vycm9yKTtcclxuICAgICAgICAgICAgKHNldHRpbmdzIGFzIGFueSkuZW5hYmxlQ29udGV4dE5vdGVzID0gb3JpZ2luYWxFbmFibGVDb250ZXh0Tm90ZXM7XHJcbiAgICAgICAgICAgIHRocm93IHByb2Nlc3NFcnJvcjtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnIpIHtcclxuICAgICAgICBuZXcgTm90aWNlKFwiRXJyb3IgZ2VuZXJhdGluZyB0aXRsZTogXCIgKyAoZXJyPy5tZXNzYWdlID8/IGVycikpO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2VuZXJpYyBmdW5jdGlvbiB0byBnZW5lcmF0ZSBhbmQgaW5zZXJ0L3VwZGF0ZSBhIFlBTUwgYXR0cmlidXRlIGluIHRoZSBhY3RpdmUgbm90ZS5cclxuICogQWx3YXlzIHVzZXMgdGhlIGRlZmF1bHQgc3lzdGVtIG1lc3NhZ2UgYW5kIHRlbXBlcmF0dXJlIDAuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2VuZXJhdGVZYW1sQXR0cmlidXRlKFxyXG4gICAgYXBwOiBBcHAsXHJcbiAgICBzZXR0aW5nczogTXlQbHVnaW5TZXR0aW5ncyxcclxuICAgIHByb2Nlc3NNZXNzYWdlczogKG1lc3NhZ2VzOiBNZXNzYWdlW10pID0+IFByb21pc2U8TWVzc2FnZVtdPixcclxuICAgIGF0dHJpYnV0ZU5hbWU6IHN0cmluZyxcclxuICAgIHByb21wdDogc3RyaW5nLFxyXG4gICAgb3V0cHV0TW9kZTogc3RyaW5nID0gXCJtZXRhZGF0YVwiXHJcbikge1xyXG4gICAgZGVidWcoYFN0YXJ0aW5nIGdlbmVyYXRlWWFtbEF0dHJpYnV0ZSBmb3IgJHthdHRyaWJ1dGVOYW1lfWApO1xyXG4gICAgY29uc3QgYWN0aXZlRmlsZSA9IGFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgaWYgKCFhY3RpdmVGaWxlKSB7XHJcbiAgICAgICAgbmV3IE5vdGljZShcIk5vIGFjdGl2ZSBub3RlIGZvdW5kLlwiKTtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcbiAgICBsZXQgbm90ZUNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQuY2FjaGVkUmVhZChhY3RpdmVGaWxlKTtcclxuICAgIG5vdGVDb250ZW50ID0gbm90ZUNvbnRlbnQuc2xpY2UoMCwgMTUwMDApO1xyXG5cclxuICAgIC8vIENvbXBvc2UgbWVzc2FnZXM6IHN5c3RlbSA9IGRlZmF1bHQgc3lzdGVtIG1lc3NhZ2UsIHVzZXIgPSBwcm9tcHQgKyBub3RlIGNvbnRlbnRcclxuICAgIGNvbnN0IG1lc3NhZ2VzOiBNZXNzYWdlW10gPSBbXHJcbiAgICAgICAgeyByb2xlOiBcInN5c3RlbVwiLCBjb250ZW50OiBERUZBVUxUX1lBTUxfU1lTVEVNX01FU1NBR0UgfSxcclxuICAgICAgICB7IHJvbGU6IFwidXNlclwiLCBjb250ZW50OiBwcm9tcHQgKyBcIlxcblxcblwiICsgbm90ZUNvbnRlbnQgfVxyXG4gICAgXTtcclxuXHJcbiAgICAvLyBVc2UgcHJvY2Vzc01lc3NhZ2VzIGZvciBPYnNpZGlhbiBsaW5rIGV4cGFuc2lvbiwgYnV0IHNraXAgY29udGV4dCBub3Rlc1xyXG4gICAgZGVidWcoXCJPcmlnaW5hbCBtZXNzYWdlczpcIiwgSlNPTi5zdHJpbmdpZnkobWVzc2FnZXMpKTtcclxuICAgIGNvbnN0IG9yaWdpbmFsRW5hYmxlQ29udGV4dE5vdGVzID0gc2V0dGluZ3MuZW5hYmxlQ29udGV4dE5vdGVzO1xyXG4gICAgZGVidWcoXCJPcmlnaW5hbCBlbmFibGVDb250ZXh0Tm90ZXM6XCIsIG9yaWdpbmFsRW5hYmxlQ29udGV4dE5vdGVzKTtcclxuICAgIChzZXR0aW5ncyBhcyBhbnkpLmVuYWJsZUNvbnRleHROb3RlcyA9IGZhbHNlO1xyXG5cclxuICAgIHRyeSB7XHJcbiAgICAgICAgY29uc3QgcHJvY2Vzc2VkTWVzc2FnZXMgPSBhd2FpdCBwcm9jZXNzTWVzc2FnZXMobWVzc2FnZXMpO1xyXG4gICAgICAgIGRlYnVnKFwiUHJvY2Vzc2VkIG1lc3NhZ2VzOlwiLCBKU09OLnN0cmluZ2lmeShwcm9jZXNzZWRNZXNzYWdlcykpO1xyXG4gICAgICAgIChzZXR0aW5ncyBhcyBhbnkpLmVuYWJsZUNvbnRleHROb3RlcyA9IG9yaWdpbmFsRW5hYmxlQ29udGV4dE5vdGVzO1xyXG5cclxuICAgICAgICBpZiAoIXByb2Nlc3NlZE1lc3NhZ2VzIHx8IHByb2Nlc3NlZE1lc3NhZ2VzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICBkZWJ1ZyhcIk5vIHByb2Nlc3NlZCBtZXNzYWdlcyFcIik7XHJcbiAgICAgICAgICAgIG5ldyBOb3RpY2UoXCJObyB2YWxpZCBtZXNzYWdlcyB0byBzZW5kIHRvIHRoZSBtb2RlbC4gUGxlYXNlIGNoZWNrIHlvdXIgbm90ZSBjb250ZW50LlwiKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH0gICAgICAgIC8vIEdldCBjb21wbGV0aW9uIChidWZmZXIgc3RyZWFtZWQgb3V0cHV0KVxyXG4gICAgICAgIGRlYnVnKFwiQ2FsbGluZyBwcm92aWRlci5nZXRDb21wbGV0aW9uXCIpO1xyXG4gICAgICAgIC8vIFVzZSB1bmlmaWVkIG1vZGVsIGlmIGF2YWlsYWJsZSwgZmFsbGJhY2sgdG8gbGVnYWN5IHByb3ZpZGVyIHNlbGVjdGlvblxyXG4gICAgICAgIGNvbnN0IHByb3ZpZGVyID0gc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbCBcclxuICAgICAgICAgICAgPyBjcmVhdGVQcm92aWRlckZyb21VbmlmaWVkTW9kZWwoc2V0dGluZ3MsIHNldHRpbmdzLnNlbGVjdGVkTW9kZWwpXHJcbiAgICAgICAgICAgIDogY3JlYXRlUHJvdmlkZXIoc2V0dGluZ3MpO1xyXG4gICAgICAgIGxldCByZXN1bHRCdWZmZXIgPSBcIlwiO1xyXG4gICAgICAgIGF3YWl0IHByb3ZpZGVyLmdldENvbXBsZXRpb24ocHJvY2Vzc2VkTWVzc2FnZXMsIHtcclxuICAgICAgICAgICAgdGVtcGVyYXR1cmU6IDAsXHJcbiAgICAgICAgICAgIHN0cmVhbUNhbGxiYWNrOiAoY2h1bms6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0QnVmZmVyICs9IGNodW5rO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgZGVidWcoXCJSZXN1bHQgZnJvbSBwcm92aWRlciAoYnVmZmVyZWQpOlwiLCByZXN1bHRCdWZmZXIpO1xyXG5cclxuICAgICAgICBsZXQgdmFsdWUgPSByZXN1bHRCdWZmZXIudHJpbSgpO1xyXG4gICAgICAgIGRlYnVnKFwiRXh0cmFjdGVkIHZhbHVlIGJlZm9yZSBzYW5pdGl6YXRpb246XCIsIHZhbHVlKTtcclxuICAgICAgICB2YWx1ZSA9IHZhbHVlLnJlcGxhY2UoL1tcXFxcL10vZywgXCJcIikudHJpbSgpOyAvLyBBbGxvdyBjb2xvbnMgaW4gWUFNTCB2YWx1ZXNcclxuICAgICAgICBkZWJ1ZyhcIlNhbml0aXplZCB2YWx1ZTpcIiwgdmFsdWUpO1xyXG5cclxuICAgICAgICBpZiAodmFsdWUgJiYgdHlwZW9mIHZhbHVlID09PSBcInN0cmluZ1wiICYmIHZhbHVlLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgZGVidWcoXCJPdXRwdXQgbW9kZTpcIiwgb3V0cHV0TW9kZSk7XHJcbiAgICAgICAgICAgIGlmIChvdXRwdXRNb2RlID09PSBcIm1ldGFkYXRhXCIpIHtcclxuICAgICAgICAgICAgICAgIC8vIEluc2VydCBvciB1cGRhdGUgYXR0cmlidXRlIGluIFlBTUwgZnJvbnRtYXR0ZXIgdXNpbmcgaGVscGVyXHJcbiAgICAgICAgICAgICAgICBhd2FpdCB1cHNlcnRZYW1sRmllbGQoYXBwLCBhY3RpdmVGaWxlLCBhdHRyaWJ1dGVOYW1lLCB2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBJbnNlcnRlZCAke2F0dHJpYnV0ZU5hbWV9IGludG8gbWV0YWRhdGE6ICR7dmFsdWV9YCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAvLyBDbGlwYm9hcmQgKGRlZmF1bHQpXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IG5hdmlnYXRvci5jbGlwYm9hcmQud3JpdGVUZXh0KHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBHZW5lcmF0ZWQgJHthdHRyaWJ1dGVOYW1lfSAoY29waWVkKTogJHt2YWx1ZX1gKTtcclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKGBHZW5lcmF0ZWQgJHthdHRyaWJ1dGVOYW1lfTogJHt2YWx1ZX1gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGRlYnVnKGBObyB2YWx1ZSBnZW5lcmF0ZWQgZm9yICR7YXR0cmlidXRlTmFtZX0gYWZ0ZXIgc2FuaXRpemF0aW9uLmApO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKGBObyB2YWx1ZSBnZW5lcmF0ZWQgZm9yICR7YXR0cmlidXRlTmFtZX0uYCk7XHJcbiAgICAgICAgfVxyXG4gICAgfSBjYXRjaCAocHJvY2Vzc0Vycm9yKSB7XHJcbiAgICAgICAgZGVidWcoXCJFcnJvciBpbiBwcm9jZXNzTWVzc2FnZXMgb3IgcHJvdmlkZXIuZ2V0Q29tcGxldGlvbjpcIiwgcHJvY2Vzc0Vycm9yKTtcclxuICAgICAgICAoc2V0dGluZ3MgYXMgYW55KS5lbmFibGVDb250ZXh0Tm90ZXMgPSBvcmlnaW5hbEVuYWJsZUNvbnRleHROb3RlcztcclxuICAgICAgICB0aHJvdyBwcm9jZXNzRXJyb3I7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbnNlcnQgb3IgdXBkYXRlIGEgZmllbGQgaW4gdGhlIFlBTUwgZnJvbnRtYXR0ZXIgb2YgYSBub3RlLlxyXG4gKiBJZiB0aGUgZmllbGQgZXhpc3RzLCBpdCBpcyB1cGRhdGVkLiBJZiBub3QsIGl0IGlzIGFkZGVkLlxyXG4gKiBJZiBubyBmcm9udG1hdHRlciBleGlzdHMsIGl0IGlzIGNyZWF0ZWQuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBzZXJ0WWFtbEZpZWxkKGFwcDogQXBwLCBmaWxlOiBURmlsZSwgZmllbGQ6IHN0cmluZywgdmFsdWU6IHN0cmluZykge1xyXG4gICAgbGV0IGNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcclxuICAgIGxldCBuZXdDb250ZW50ID0gY29udGVudDtcclxuICAgIGNvbnN0IGZyb250bWF0dGVyUmVnZXggPSAvXi0tLVxcbihbXFxzXFxTXSo/KVxcbi0tLS87XHJcbiAgICBjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goZnJvbnRtYXR0ZXJSZWdleCk7XHJcbiAgICBpZiAobWF0Y2gpIHtcclxuICAgICAgICAvLyBQYXJzZSBZQU1MIGZyb250bWF0dGVyXHJcbiAgICAgICAgbGV0IHlhbWxPYmo6IGFueSA9IHt9O1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIHlhbWxPYmogPSB5YW1sLmxvYWQobWF0Y2hbMV0pIHx8IHt9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAgICAgeWFtbE9iaiA9IHt9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB5YW1sT2JqW2ZpZWxkXSA9IHZhbHVlO1xyXG4gICAgICAgIGNvbnN0IG5ld1lhbWwgPSB5YW1sLmR1bXAoeWFtbE9iaiwgeyBsaW5lV2lkdGg6IC0xIH0pLnRyaW0oKTtcclxuICAgICAgICBuZXdDb250ZW50ID0gY29udGVudC5yZXBsYWNlKGZyb250bWF0dGVyUmVnZXgsIGAtLS1cXG4ke25ld1lhbWx9XFxuLS0tYCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIE5vIGZyb250bWF0dGVyLCBhZGQgaXRcclxuICAgICAgICBjb25zdCBuZXdZYW1sID0geWFtbC5kdW1wKHsgW2ZpZWxkXTogdmFsdWUgfSwgeyBsaW5lV2lkdGg6IC0xIH0pLnRyaW0oKTtcclxuICAgICAgICBuZXdDb250ZW50ID0gYC0tLVxcbiR7bmV3WWFtbH1cXG4tLS1cXG5gICsgY29udGVudDtcclxuICAgIH1cclxuICAgIGF3YWl0IGFwcC52YXVsdC5tb2RpZnkoZmlsZSwgbmV3Q29udGVudCk7XHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCwgUGx1Z2luLCBOb3RpY2UsIFRGaWxlLCBFZGl0b3IgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IE15UGx1Z2luU2V0dGluZ3MsIE1lc3NhZ2UsIERFRkFVTFRfU0VUVElOR1MsIEFnZW50TW9kZVNldHRpbmdzIH0gZnJvbSAnLi90eXBlcyc7XHJcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyLCBjcmVhdGVQcm92aWRlckZyb21VbmlmaWVkTW9kZWwgfSBmcm9tICcuLi9wcm92aWRlcnMnO1xyXG5pbXBvcnQgeyBNeVBsdWdpblNldHRpbmdUYWIgfSBmcm9tICcuL3NldHRpbmdzJztcclxuaW1wb3J0IHsgQ2hhdFZpZXcsIFZJRVdfVFlQRV9DSEFUIH0gZnJvbSAnLi9jb21wb25lbnRzL2NoYXQnO1xyXG5pbXBvcnQgeyBwYXJzZVNlbGVjdGlvbiB9IGZyb20gJy4vY29tcG9uZW50cy9wYXJzZVNlbGVjdGlvbic7XHJcbmltcG9ydCB7IE1vZGVsU2V0dGluZ3NWaWV3IH0gZnJvbSAnLi9jb21wb25lbnRzL01vZGVsU2V0dGluZ3NWaWV3JztcclxuaW1wb3J0IHsgcHJvY2Vzc01lc3NhZ2VzLCBnZXRDb250ZXh0Tm90ZXNDb250ZW50IH0gZnJvbSAnLi9jb21wb25lbnRzL25vdGVVdGlscyc7XHJcbmltcG9ydCB7IGdldFN5c3RlbU1lc3NhZ2UgfSBmcm9tICcuL2NvbXBvbmVudHMvc3lzdGVtTWVzc2FnZSc7XHJcbiBcclxuLy8gUmVtb3ZlZCBpbXBvcnQgb2YgcHJvbXB0cy50cyBhcyBwZXIgdXNlciByZXF1ZXN0XHJcblxyXG5leHBvcnQgY29uc3QgVklFV19UWVBFX01PREVMX1NFVFRJTkdTID0gJ21vZGVsLXNldHRpbmdzLXZpZXcnO1xyXG5cclxuLyoqXHJcbiAqIEFJIEFzc2lzdGFudCBQbHVnaW5cclxuICogXHJcbiAqIFRoaXMgcGx1Z2luIGFkZHMgQUkgY2FwYWJpbGl0aWVzIHRvIE9ic2lkaWFuLCBzdXBwb3J0aW5nIG11bHRpcGxlIHByb3ZpZGVyczpcclxuICogLSBPcGVuQUkgKENoYXRHUFQpXHJcbiAqIC0gQW50aHJvcGljIChDbGF1ZGUpXHJcbiAqIC0gR29vZ2xlIChHZW1pbmkpXHJcbiAqIC0gT2xsYW1hIChMb2NhbCBBSSlcclxuICogXHJcbiAqIEZlYXR1cmVzOlxyXG4gKiAtIENoYXQgd2l0aCBBSSBtb2RlbHNcclxuICogLSBTdHJlYW0gcmVzcG9uc2VzIGluIHJlYWwtdGltZVxyXG4gKiAtIENvbmZpZ3VyZSBtb2RlbCBzZXR0aW5nc1xyXG4gKiAtIFRlc3QgQVBJIGNvbm5lY3Rpb25zXHJcbiAqIC0gVXNlIGxvY2FsIEFJIG1vZGVscyB0aHJvdWdoIE9sbGFtYVxyXG4gKi9cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTXlQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xyXG4gICAgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3M7XHJcbiAgICBtb2RlbFNldHRpbmdzVmlldzogTW9kZWxTZXR0aW5nc1ZpZXcgfCBudWxsID0gbnVsbDtcclxuICAgIGFjdGl2ZVN0cmVhbTogQWJvcnRDb250cm9sbGVyIHwgbnVsbCA9IG51bGw7XHJcbiAgICBwcml2YXRlIF95YW1sQXR0cmlidXRlQ29tbWFuZElkczogc3RyaW5nW10gPSBbXTtcclxuICAgIHByaXZhdGUgc2V0dGluZ3NMaXN0ZW5lcnM6IEFycmF5PCgpID0+IHZvaWQ+ID0gW107XHJcblxyXG4gICAgb25TZXR0aW5nc0NoYW5nZShsaXN0ZW5lcjogKCkgPT4gdm9pZCkge1xyXG4gICAgICAgIHRoaXMuc2V0dGluZ3NMaXN0ZW5lcnMucHVzaChsaXN0ZW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgb2ZmU2V0dGluZ3NDaGFuZ2UobGlzdGVuZXI6ICgpID0+IHZvaWQpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzTGlzdGVuZXJzID0gdGhpcy5zZXR0aW5nc0xpc3RlbmVycy5maWx0ZXIobCA9PiBsICE9PSBsaXN0ZW5lcik7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBlbWl0U2V0dGluZ3NDaGFuZ2UoKSB7XHJcbiAgICAgICAgZm9yIChjb25zdCBsaXN0ZW5lciBvZiB0aGlzLnNldHRpbmdzTGlzdGVuZXJzKSB7XHJcbiAgICAgICAgICAgIHRyeSB7IGxpc3RlbmVyKCk7IH0gY2F0Y2ggKGUpIHsgY29uc29sZS5lcnJvcihlKTsgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIHN0YXRpYyByZWdpc3RlcmVkVmlld1R5cGVzID0gbmV3IFNldDxzdHJpbmc+KCk7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZWdpc3RlcnMgYSBjb21tYW5kIHdpdGggT2JzaWRpYW4sIG9wdGlvbmFsbHkgYWRkaW5nIGEgcmliYm9uIGljb24uXHJcbiAgICAgKiBAcGFyYW0gb3B0aW9ucyBDb21tYW5kIG9wdGlvbnMgaW5jbHVkaW5nIGlkLCBuYW1lLCBjYWxsYmFjay9lZGl0b3JDYWxsYmFjay5cclxuICAgICAqIEBwYXJhbSByaWJib25JY29uIE9wdGlvbmFsIGljb24gSUQgZm9yIGEgcmliYm9uIGJ1dHRvbi5cclxuICAgICAqIEBwYXJhbSByaWJib25UaXRsZSBPcHRpb25hbCB0b29sdGlwIHRpdGxlIGZvciB0aGUgcmliYm9uIGJ1dHRvbi5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZWdpc3RlckNvbW1hbmQob3B0aW9uczoge1xyXG4gICAgICAgIGlkOiBzdHJpbmc7XHJcbiAgICAgICAgbmFtZTogc3RyaW5nO1xyXG4gICAgICAgIGNhbGxiYWNrPzogKCkgPT4gdm9pZDtcclxuICAgICAgICBlZGl0b3JDYWxsYmFjaz86IChlZGl0b3I6IEVkaXRvcikgPT4gdm9pZDtcclxuICAgIH0sIHJpYmJvbkljb24/OiBzdHJpbmcsIHJpYmJvblRpdGxlPzogc3RyaW5nKSB7XHJcbiAgICAgICAgdGhpcy5hZGRDb21tYW5kKG9wdGlvbnMpO1xyXG4gICAgICAgIGlmIChyaWJib25JY29uICYmIHJpYmJvblRpdGxlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWRkUmliYm9uSWNvbihyaWJib25JY29uLCByaWJib25UaXRsZSwgb3B0aW9ucy5jYWxsYmFjayB8fCAoKCkgPT4ge30pKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gLS0tIEFnZW50IE1vZGUgU3RhdGUgSW50ZWdyYXRpb24gLS0tXHJcblxyXG4gICAgZ2V0QWdlbnRNb2RlU2V0dGluZ3MoKTogQWdlbnRNb2RlU2V0dGluZ3Mge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnNldHRpbmdzLmFnZW50TW9kZSB8fCB7XHJcbiAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICBtYXhUb29sQ2FsbHM6IDUsXHJcbiAgICAgICAgICAgIHRpbWVvdXRNczogMzAwMDBcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlzQWdlbnRNb2RlRW5hYmxlZCgpOiBib29sZWFuIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZXRBZ2VudE1vZGVTZXR0aW5ncygpLmVuYWJsZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgc2V0QWdlbnRNb2RlRW5hYmxlZChlbmFibGVkOiBib29sZWFuKSB7XHJcbiAgICAgICAgaWYgKCF0aGlzLnNldHRpbmdzLmFnZW50TW9kZSkge1xyXG4gICAgICAgICAgICB0aGlzLnNldHRpbmdzLmFnZW50TW9kZSA9IHtcclxuICAgICAgICAgICAgICAgIGVuYWJsZWQ6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbWF4VG9vbENhbGxzOiA1LFxyXG4gICAgICAgICAgICAgICAgdGltZW91dE1zOiAzMDAwMFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLnNldHRpbmdzLmFnZW50TW9kZS5lbmFibGVkID0gZW5hYmxlZDtcclxuICAgICAgICBhd2FpdCB0aGlzLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIHRoaXMuZW1pdFNldHRpbmdzQ2hhbmdlKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgdG8gaW5zZXJ0IGEgc2VwYXJhdG9yIHdpdGggY29ycmVjdCBzcGFjaW5nIGluIHRoZSBlZGl0b3IuXHJcbiAgICAgKiBAcGFyYW0gZWRpdG9yIFRoZSBlZGl0b3IgaW5zdGFuY2UuXHJcbiAgICAgKiBAcGFyYW0gcG9zaXRpb24gVGhlIHBvc2l0aW9uIHRvIGluc2VydCB0aGUgc2VwYXJhdG9yLlxyXG4gICAgICogQHBhcmFtIHNlcGFyYXRvciBUaGUgc2VwYXJhdG9yIHN0cmluZy5cclxuICAgICAqIEByZXR1cm5zIFRoZSBsaW5lIG51bWJlciBhZnRlciB0aGUgaW5zZXJ0ZWQgc2VwYXJhdG9yLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGluc2VydFNlcGFyYXRvcihlZGl0b3I6IEVkaXRvciwgcG9zaXRpb246IGFueSwgc2VwYXJhdG9yOiBzdHJpbmcpOiBudW1iZXIge1xyXG4gICAgICAgIGNvbnN0IGxpbmVDb250ZW50ID0gZWRpdG9yLmdldExpbmUocG9zaXRpb24ubGluZSkgPz8gJyc7XHJcbiAgICAgICAgY29uc3QgcHJlZml4ID0gbGluZUNvbnRlbnQudHJpbSgpICE9PSAnJyA/ICdcXG4nIDogJyc7XHJcbiAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShgJHtwcmVmaXh9XFxuJHtzZXBhcmF0b3J9XFxuYCwgcG9zaXRpb24pO1xyXG4gICAgICAgIHJldHVybiBwb3NpdGlvbi5saW5lICsgKHByZWZpeCA/IDEgOiAwKSArIDI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgdG8gbW92ZSB0aGUgY3Vyc29yIGFmdGVyIGluc2VydGluZyB0ZXh0IGluIHRoZSBlZGl0b3IuXHJcbiAgICAgKiBAcGFyYW0gZWRpdG9yIFRoZSBlZGl0b3IgaW5zdGFuY2UuXHJcbiAgICAgKiBAcGFyYW0gc3RhcnRQb3MgVGhlIHN0YXJ0aW5nIHBvc2l0aW9uIG9mIHRoZSBpbnNlcnRpb24uXHJcbiAgICAgKiBAcGFyYW0gaW5zZXJ0VGV4dCBUaGUgdGV4dCB0aGF0IHdhcyBpbnNlcnRlZC5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBtb3ZlQ3Vyc29yQWZ0ZXJJbnNlcnQoZWRpdG9yOiBFZGl0b3IsIHN0YXJ0UG9zOiBhbnksIGluc2VydFRleHQ6IHN0cmluZykge1xyXG4gICAgICAgIGNvbnN0IGxpbmVzID0gaW5zZXJ0VGV4dC5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgaWYgKGxpbmVzLmxlbmd0aCA9PT0gMSkge1xyXG4gICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtcclxuICAgICAgICAgICAgICAgIGxpbmU6IHN0YXJ0UG9zLmxpbmUsXHJcbiAgICAgICAgICAgICAgICBjaDogc3RhcnRQb3MuY2ggKyBpbnNlcnRUZXh0Lmxlbmd0aFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBlZGl0b3Iuc2V0Q3Vyc29yKHtcclxuICAgICAgICAgICAgICAgIGxpbmU6IHN0YXJ0UG9zLmxpbmUgKyBsaW5lcy5sZW5ndGggLSAxLFxyXG4gICAgICAgICAgICAgICAgY2g6IGxpbmVzW2xpbmVzLmxlbmd0aCAtIDFdLmxlbmd0aFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgdG8gc2hvdyBhbiBPYnNpZGlhbiBub3RpY2UuXHJcbiAgICAgKiBAcGFyYW0gbWVzc2FnZSBUaGUgbWVzc2FnZSB0byBkaXNwbGF5LlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHNob3dOb3RpY2UobWVzc2FnZTogc3RyaW5nKSB7XHJcbiAgICAgICAgbmV3IE5vdGljZShtZXNzYWdlKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciBmb3IgY2xpcGJvYXJkIGFjdGlvbnMgd2l0aCBhIG5vdGljZS5cclxuICAgICAqIEBwYXJhbSB0ZXh0IFRoZSB0ZXh0IHRvIGNvcHkuXHJcbiAgICAgKiBAcGFyYW0gc3VjY2Vzc01zZyBUaGUgbWVzc2FnZSB0byBzaG93IG9uIHN1Y2Nlc3MuXHJcbiAgICAgKiBAcGFyYW0gZmFpbE1zZyBUaGUgbWVzc2FnZSB0byBzaG93IG9uIGZhaWx1cmUuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgY29weVRvQ2xpcGJvYXJkKHRleHQ6IHN0cmluZywgc3VjY2Vzc01zZzogc3RyaW5nLCBmYWlsTXNnOiBzdHJpbmcpIHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0ZXh0KTtcclxuICAgICAgICAgICAgdGhpcy5zaG93Tm90aWNlKHN1Y2Nlc3NNc2cpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2hvd05vdGljZShmYWlsTXNnKTtcclxuICAgICAgICAgICAgY29uc29sZS5lcnJvcignQ2xpcGJvYXJkIGVycm9yOicsIGVycm9yKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgdG8gYWN0aXZhdGUgdGhlIGNoYXQgdmlldyBhbmQgbG9hZCBtZXNzYWdlcyBpbnRvIGl0LlxyXG4gICAgICogQHBhcmFtIG1lc3NhZ2VzIEFuIGFycmF5IG9mIG1lc3NhZ2VzIHRvIGxvYWQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgYWN0aXZhdGVDaGF0Vmlld0FuZExvYWRNZXNzYWdlcyhtZXNzYWdlczogTWVzc2FnZVtdKSB7XHJcbiAgICAgICAgYXdhaXQgdGhpcy5hY3RpdmF0ZVZpZXcoVklFV19UWVBFX0NIQVQpO1xyXG4gICAgICAgIGNvbnN0IGxlYXZlcyA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoVklFV19UWVBFX0NIQVQpO1xyXG4gICAgICAgIGlmICghbGVhdmVzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICB0aGlzLnNob3dOb3RpY2UoJ0NvdWxkIG5vdCBmaW5kIGNoYXQgdmlldy4nKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICBjb25zdCBjaGF0VmlldyA9IGxlYXZlc1swXS52aWV3IGFzIENoYXRWaWV3O1xyXG4gICAgICAgIGNoYXRWaWV3LmNsZWFyTWVzc2FnZXMoKTtcclxuICAgICAgICBmb3IgKGNvbnN0IG1zZyBvZiBtZXNzYWdlcykge1xyXG4gICAgICAgICAgICBpZiAobXNnLnJvbGUgPT09ICd1c2VyJyB8fCBtc2cucm9sZSA9PT0gJ2Fzc2lzdGFudCcpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGNoYXRWaWV3W1wiYWRkTWVzc2FnZVwiXShtc2cucm9sZSwgbXNnLmNvbnRlbnQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGNoYXRWaWV3LnNjcm9sbE1lc3NhZ2VzVG9Cb3R0b20oKTtcclxuICAgICAgICB0aGlzLnNob3dOb3RpY2UoJ0xvYWRlZCBjaGF0IG5vdGUgaW50byBjaGF0LicpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXJzIGEgdmlldyB0eXBlIHdpdGggT2JzaWRpYW4uXHJcbiAgICAgKiBAcGFyYW0gdmlld1R5cGUgVGhlIHR5cGUgb2YgdGhlIHZpZXcuXHJcbiAgICAgKiBAcGFyYW0gdmlld0NyZWF0b3IgVGhlIGZ1bmN0aW9uIHRoYXQgY3JlYXRlcyB0aGUgdmlldy5cclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSByZWdpc3RlclBsdWdpblZpZXcodmlld1R5cGU6IHN0cmluZywgdmlld0NyZWF0b3I6IChsZWFmOiBhbnkpID0+IGFueSkge1xyXG4gICAgICAgIGlmICghTXlQbHVnaW4ucmVnaXN0ZXJlZFZpZXdUeXBlcy5oYXModmlld1R5cGUpKSB7XHJcbiAgICAgICAgICAgIHRoaXMucmVnaXN0ZXJWaWV3KHZpZXdUeXBlLCB2aWV3Q3JlYXRvcik7XHJcbiAgICAgICAgICAgIE15UGx1Z2luLnJlZ2lzdGVyZWRWaWV3VHlwZXMuYWRkKHZpZXdUeXBlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIYW5kbGVzIHRoZSBBSSBjb21wbGV0aW9uIGxvZ2ljIGZvciB0aGUgZWRpdG9yLlxyXG4gICAgICogRXh0cmFjdHMgdGV4dCwgc2VuZHMgdG8gQUksIGFuZCBzdHJlYW1zIHJlc3BvbnNlIGJhY2sgdG8gZWRpdG9yLlxyXG4gICAgICogQHBhcmFtIGVkaXRvciBUaGUgZWRpdG9yIGluc3RhbmNlLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGFzeW5jIGhhbmRsZUFJQ29tcGxldGlvbihlZGl0b3I6IEVkaXRvcikge1xyXG4gICAgICAgIGxldCB0ZXh0OiBzdHJpbmc7XHJcbiAgICAgICAgbGV0IGluc2VydFBvc2l0aW9uO1xyXG5cclxuICAgICAgICBpZiAoZWRpdG9yLnNvbWV0aGluZ1NlbGVjdGVkKCkpIHtcclxuICAgICAgICAgICAgdGV4dCA9IGVkaXRvci5nZXRTZWxlY3Rpb24oKTtcclxuICAgICAgICAgICAgaW5zZXJ0UG9zaXRpb24gPSBlZGl0b3IuZ2V0Q3Vyc29yKCd0bycpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRMaW5lTnVtYmVyID0gZWRpdG9yLmdldEN1cnNvcigpLmxpbmU7XHJcbiAgICAgICAgICAgIGxldCBsaW5lczogc3RyaW5nW10gPSBbXTtcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gY3VycmVudExpbmVOdW1iZXI7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGluZXMucHVzaChlZGl0b3IuZ2V0TGluZShpKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNoYXRTdGFydFN0cmluZyA9IHRoaXMuc2V0dGluZ3MuY2hhdFN0YXJ0U3RyaW5nO1xyXG4gICAgICAgICAgICBpZiAoY2hhdFN0YXJ0U3RyaW5nKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydElkeCA9IGxpbmVzLmZpbmRJbmRleChsaW5lID0+IGxpbmUudHJpbSgpID09PSBjaGF0U3RhcnRTdHJpbmcudHJpbSgpKTtcclxuICAgICAgICAgICAgICAgIGlmIChzdGFydElkeCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgICAgICAgICBsaW5lcyA9IGxpbmVzLnNsaWNlKHN0YXJ0SWR4ICsgMSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGV4dCA9IGxpbmVzLmpvaW4oJ1xcbicpO1xyXG4gICAgICAgICAgICBpbnNlcnRQb3NpdGlvbiA9IHsgbGluZTogY3VycmVudExpbmVOdW1iZXIgKyAxLCBjaDogMCB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBwYXJzZVNlbGVjdGlvbih0ZXh0LCB0aGlzLnNldHRpbmdzLmNoYXRTZXBhcmF0b3IpO1xyXG4gICAgICAgIGlmIChtZXNzYWdlcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93Tm90aWNlKCdObyB2YWxpZCBtZXNzYWdlcyBmb3VuZCBpbiB0aGUgc2VsZWN0aW9uLicpO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBzZXBMaW5lID0gdGhpcy5pbnNlcnRTZXBhcmF0b3IoZWRpdG9yLCBpbnNlcnRQb3NpdGlvbiwgdGhpcy5zZXR0aW5ncy5jaGF0U2VwYXJhdG9yKTtcclxuICAgICAgICBsZXQgY3VycmVudFBvc2l0aW9uID0geyBsaW5lOiBzZXBMaW5lLCBjaDogMCB9O1xyXG5cclxuICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbSA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBwcm92aWRlciA9IHRoaXMuc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbFxyXG4gICAgICAgICAgICAgICAgPyBjcmVhdGVQcm92aWRlckZyb21VbmlmaWVkTW9kZWwodGhpcy5zZXR0aW5ncywgdGhpcy5zZXR0aW5ncy5zZWxlY3RlZE1vZGVsKVxyXG4gICAgICAgICAgICAgICAgOiBjcmVhdGVQcm92aWRlcih0aGlzLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgY29uc3QgcHJvY2Vzc2VkTWVzc2FnZXMgPSBhd2FpdCB0aGlzLnByb2Nlc3NNZXNzYWdlcyhbXHJcbiAgICAgICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiB0aGlzLmdldFN5c3RlbU1lc3NhZ2UoKSB9LFxyXG4gICAgICAgICAgICAgICAgLi4ubWVzc2FnZXNcclxuICAgICAgICAgICAgXSk7XHJcblxyXG4gICAgICAgICAgICBsZXQgYnVmZmVyZWRDaHVuayA9ICcnO1xyXG4gICAgICAgICAgICBjb25zdCBmbHVzaEJ1ZmZlciA9ICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmIChidWZmZXJlZENodW5rKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShidWZmZXJlZENodW5rLCBjdXJyZW50UG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIGN1cnJlbnRQb3NpdGlvbiA9IGVkaXRvci5vZmZzZXRUb1BvcyhcclxuICAgICAgICAgICAgICAgICAgICAgICAgZWRpdG9yLnBvc1RvT2Zmc2V0KGN1cnJlbnRQb3NpdGlvbikgKyBidWZmZXJlZENodW5rLmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnVmZmVyZWRDaHVuayA9ICcnO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYXdhaXQgcHJvdmlkZXIuZ2V0Q29tcGxldGlvbihcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZE1lc3NhZ2VzLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnNldHRpbmdzLnRlbXBlcmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgICAgIG1heFRva2VuczogdGhpcy5zZXR0aW5ncy5tYXhUb2tlbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgc3RyZWFtQ2FsbGJhY2s6IChjaHVuazogc3RyaW5nKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJ1ZmZlcmVkQ2h1bmsgKz0gY2h1bms7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZmx1c2hCdWZmZXIsIDEwMCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXI6IHRoaXMuYWN0aXZlU3RyZWFtXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICBmbHVzaEJ1ZmZlcigpO1xyXG5cclxuICAgICAgICAgICAgY29uc3QgZW5kTGluZUNvbnRlbnQgPSBlZGl0b3IuZ2V0TGluZShjdXJyZW50UG9zaXRpb24ubGluZSkgPz8gJyc7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZFByZWZpeCA9IGVuZExpbmVDb250ZW50LnRyaW0oKSAhPT0gJycgPyAnXFxuJyA6ICcnO1xyXG4gICAgICAgICAgICBlZGl0b3IucmVwbGFjZVJhbmdlKGAke2VuZFByZWZpeH1cXG4ke3RoaXMuc2V0dGluZ3MuY2hhdFNlcGFyYXRvcn1cXG5cXG5gLCBjdXJyZW50UG9zaXRpb24pO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdDdXJzb3JQb3MgPSBlZGl0b3Iub2Zmc2V0VG9Qb3MoXHJcbiAgICAgICAgICAgICAgICBlZGl0b3IucG9zVG9PZmZzZXQoY3VycmVudFBvc2l0aW9uKSArIChlbmRQcmVmaXggPyAxIDogMCkgKyAxICsgdGhpcy5zZXR0aW5ncy5jaGF0U2VwYXJhdG9yLmxlbmd0aCArIDFcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgZWRpdG9yLnNldEN1cnNvcihuZXdDdXJzb3JQb3MpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICAgICAgdGhpcy5zaG93Tm90aWNlKGBFcnJvcjogJHtlcnJvci5tZXNzYWdlfWApO1xyXG4gICAgICAgICAgICBjb25zdCBlcnJMaW5lQ29udGVudCA9IGVkaXRvci5nZXRMaW5lKGN1cnJlbnRQb3NpdGlvbi5saW5lKSA/PyAnJztcclxuICAgICAgICAgICAgY29uc3QgZXJyUHJlZml4ID0gZXJyTGluZUNvbnRlbnQudHJpbSgpICE9PSAnJyA/ICdcXG4nIDogJyc7XHJcbiAgICAgICAgICAgIGVkaXRvci5yZXBsYWNlUmFuZ2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9XFxuJHtlcnJQcmVmaXh9XFxuJHt0aGlzLnNldHRpbmdzLmNoYXRTZXBhcmF0b3J9XFxuXFxuYCwgY3VycmVudFBvc2l0aW9uKTtcclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbSA9IG51bGw7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG9ubG9hZCgpIHtcclxuICAgICAgICBhd2FpdCB0aGlzLmxvYWRTZXR0aW5ncygpO1xyXG4gICAgICAgIHRoaXMuYWRkU2V0dGluZ1RhYihuZXcgTXlQbHVnaW5TZXR0aW5nVGFiKHRoaXMuYXBwLCB0aGlzKSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJQbHVnaW5WaWV3KFZJRVdfVFlQRV9NT0RFTF9TRVRUSU5HUywgKGxlYWYpID0+IG5ldyBNb2RlbFNldHRpbmdzVmlldyhsZWFmLCB0aGlzKSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlclBsdWdpblZpZXcoVklFV19UWVBFX0NIQVQsIChsZWFmKSA9PiBuZXcgQ2hhdFZpZXcobGVhZiwgdGhpcykpO1xyXG5cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnc2hvdy1haS1zZXR0aW5ncycsXHJcbiAgICAgICAgICAgIG5hbWU6ICdTaG93IEFJIFNldHRpbmdzJyxcclxuICAgICAgICAgICAgY2FsbGJhY2s6ICgpID0+IHRoaXMuYWN0aXZhdGVWaWV3KFZJRVdfVFlQRV9NT0RFTF9TRVRUSU5HUylcclxuICAgICAgICB9LCAnZmlsZS1zbGlkZXJzJywgJ09wZW4gQUkgU2V0dGluZ3MnKTtcclxuXHJcbiAgICAgICAgdGhpcy5yZWdpc3RlckNvbW1hbmQoe1xyXG4gICAgICAgICAgICBpZDogJ3Nob3ctYWktY2hhdCcsXHJcbiAgICAgICAgICAgIG5hbWU6ICdTaG93IEFJIENoYXQnLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4gdGhpcy5hY3RpdmF0ZVZpZXcoVklFV19UWVBFX0NIQVQpXHJcbiAgICAgICAgfSwgJ21lc3NhZ2Utc3F1YXJlJywgJ09wZW4gQUkgQ2hhdCcpO1xyXG5cclxuICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2Uub25MYXlvdXRSZWFkeSgoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmF1dG9PcGVuTW9kZWxTZXR0aW5ncykge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmF0ZVZpZXcoVklFV19UWVBFX01PREVMX1NFVFRJTkdTKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnYWktY29tcGxldGlvbicsXHJcbiAgICAgICAgICAgIG5hbWU6ICdHZXQgQUkgQ29tcGxldGlvbicsXHJcbiAgICAgICAgICAgIGVkaXRvckNhbGxiYWNrOiAoZWRpdG9yKSA9PiB0aGlzLmhhbmRsZUFJQ29tcGxldGlvbihlZGl0b3IpXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdlbmQtYWktc3RyZWFtJyxcclxuICAgICAgICAgICAgbmFtZTogJ0VuZCBBSSBTdHJlYW0nLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlU3RyZWFtKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVTdHJlYW0uYWJvcnQoKTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbSA9IG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Tm90aWNlKCdBSSBzdHJlYW0gZW5kZWQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Tm90aWNlKCdObyBhY3RpdmUgQUkgc3RyZWFtIHRvIGVuZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdjb3B5LWFjdGl2ZS1ub3RlLW5hbWUnLFxyXG4gICAgICAgICAgICBuYW1lOiAnQ29weSBBY3RpdmUgTm90ZSBOYW1lJyxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKGFjdGl2ZUZpbGUpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RlTmFtZSA9IGBbWyR7YWN0aXZlRmlsZS5iYXNlbmFtZX1dXWA7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jb3B5VG9DbGlwYm9hcmQobm90ZU5hbWUsIGBDb3BpZWQgdG8gY2xpcGJvYXJkOiAke25vdGVOYW1lfWAsICdGYWlsZWQgdG8gY29weSB0byBjbGlwYm9hcmQnKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Tm90aWNlKCdObyBhY3RpdmUgbm90ZSBmb3VuZCcpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdpbnNlcnQtY2hhdC1zdGFydC1zdHJpbmcnLFxyXG4gICAgICAgICAgICBuYW1lOiAnSW5zZXJ0IENoYXQgU3RhcnQgU3RyaW5nJyxcclxuICAgICAgICAgICAgZWRpdG9yQ2FsbGJhY2s6IChlZGl0b3I6IEVkaXRvcikgPT4ge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY2hhdFN0YXJ0U3RyaW5nID0gdGhpcy5zZXR0aW5ncy5jaGF0U3RhcnRTdHJpbmcgPz8gJyc7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWNoYXRTdGFydFN0cmluZykge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd05vdGljZSgnY2hhdFN0YXJ0U3RyaW5nIGlzIG5vdCBzZXQgaW4gc2V0dGluZ3MuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgY29uc3QgY3Vyc29yID0gZWRpdG9yLmdldEN1cnNvcigpO1xyXG4gICAgICAgICAgICAgICAgZWRpdG9yLnJlcGxhY2VSYW5nZShjaGF0U3RhcnRTdHJpbmcsIGN1cnNvcik7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1vdmVDdXJzb3JBZnRlckluc2VydChlZGl0b3IsIGN1cnNvciwgY2hhdFN0YXJ0U3RyaW5nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICB0aGlzLnJlZ2lzdGVyQ29tbWFuZCh7XHJcbiAgICAgICAgICAgIGlkOiAnZ2VuZXJhdGUtbm90ZS10aXRsZScsXHJcbiAgICAgICAgICAgIG5hbWU6ICdHZW5lcmF0ZSBOb3RlIFRpdGxlJyxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHsgZ2VuZXJhdGVOb3RlVGl0bGUgfSA9IGF3YWl0IGltcG9ydChcIi4vZmlsZWNoYW5nZXJcIik7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBnZW5lcmF0ZU5vdGVUaXRsZShcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcCxcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldHRpbmdzLFxyXG4gICAgICAgICAgICAgICAgICAgIChtZXNzYWdlcykgPT4gdGhpcy5wcm9jZXNzTWVzc2FnZXMobWVzc2FnZXMpXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIHRoaXMucmVnaXN0ZXJDb21tYW5kKHtcclxuICAgICAgICAgICAgaWQ6ICdsb2FkLWNoYXQtbm90ZS1pbnRvLWNoYXQnLFxyXG4gICAgICAgICAgICBuYW1lOiAnTG9hZCBDaGF0IE5vdGUgaW50byBDaGF0JyxcclxuICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBmaWxlOiBURmlsZSB8IG51bGwgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5zaG93Tm90aWNlKCdObyBhY3RpdmUgbm90ZSBmb3VuZC4gUGxlYXNlIG9wZW4gYSBub3RlIHRvIGxvYWQgYXMgY2hhdC4nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsZXQgY29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlcyA9IHBhcnNlU2VsZWN0aW9uKGNvbnRlbnQsIHRoaXMuc2V0dGluZ3MuY2hhdFNlcGFyYXRvcik7XHJcbiAgICAgICAgICAgICAgICBpZiAoIW1lc3NhZ2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvd05vdGljZSgnTm8gY2hhdCBtZXNzYWdlcyBmb3VuZCBpbiB0aGUgc2VsZWN0ZWQgbm90ZS4nKTtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLmFjdGl2YXRlQ2hhdFZpZXdBbmRMb2FkTWVzc2FnZXMobWVzc2FnZXMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlcllhbWxBdHRyaWJ1dGVDb21tYW5kcygpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVnaXN0ZXIgWUFNTCBhdHRyaWJ1dGUgZ2VuZXJhdG9yIGNvbW1hbmRzIGR5bmFtaWNhbGx5IGJhc2VkIG9uIHNldHRpbmdzLlxyXG4gICAgICogVW5yZWdpc3RlcnMgcHJldmlvdXMgY29tbWFuZHMgYmVmb3JlIHJlZ2lzdGVyaW5nIG5ldyBvbmVzLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIHJlZ2lzdGVyWWFtbEF0dHJpYnV0ZUNvbW1hbmRzKCkge1xyXG4gICAgICAgIGlmICh0aGlzLl95YW1sQXR0cmlidXRlQ29tbWFuZElkcyAmJiB0aGlzLl95YW1sQXR0cmlidXRlQ29tbWFuZElkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIGZvciAoY29uc3QgaWQgb2YgdGhpcy5feWFtbEF0dHJpYnV0ZUNvbW1hbmRJZHMpIHtcclxuICAgICAgICAgICAgICAgIC8vIEB0cy1pZ25vcmU6IE9ic2lkaWFuIFBsdWdpbiBBUEkgaGFzIHVuZG9jdW1lbnRlZCBtZXRob2RcclxuICAgICAgICAgICAgICAgIHRoaXMuYXBwLmNvbW1hbmRzLnJlbW92ZUNvbW1hbmQoaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXMuX3lhbWxBdHRyaWJ1dGVDb21tYW5kSWRzID0gW107XHJcbiAgICAgICAgaWYgKHRoaXMuc2V0dGluZ3MueWFtbEF0dHJpYnV0ZUdlbmVyYXRvcnMgJiYgQXJyYXkuaXNBcnJheSh0aGlzLnNldHRpbmdzLnlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JzKSkge1xyXG4gICAgICAgICAgICBmb3IgKGNvbnN0IGdlbiBvZiB0aGlzLnNldHRpbmdzLnlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JzKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoIWdlbi5hdHRyaWJ1dGVOYW1lIHx8ICFnZW4ucHJvbXB0IHx8ICFnZW4uY29tbWFuZE5hbWUpIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgaWQgPSBgZ2VuZXJhdGUteWFtbC1hdHRyaWJ1dGUtJHtnZW4uYXR0cmlidXRlTmFtZX1gO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5yZWdpc3RlckNvbW1hbmQoeyAvLyBVc2UgdGhlIG5ldyByZWdpc3RlckNvbW1hbmRcclxuICAgICAgICAgICAgICAgICAgICBpZCxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBnZW4uY29tbWFuZE5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBnZW5lcmF0ZVlhbWxBdHRyaWJ1dGUgfSA9IGF3YWl0IGltcG9ydChcIi4vZmlsZWNoYW5nZXJcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IGdlbmVyYXRlWWFtbEF0dHJpYnV0ZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXR0aW5ncyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIChtZXNzYWdlcykgPT4gdGhpcy5wcm9jZXNzTWVzc2FnZXMobWVzc2FnZXMpLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuLmF0dHJpYnV0ZU5hbWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBnZW4ucHJvbXB0LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZ2VuLm91dHB1dE1vZGVcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3lhbWxBdHRyaWJ1dGVDb21tYW5kSWRzLnB1c2goaWQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmV0cmlldmVzIHRoZSBzeXN0ZW0gbWVzc2FnZSBiYXNlZCBvbiBjdXJyZW50IHBsdWdpbiBzZXR0aW5ncy5cclxuICAgICAqIEByZXR1cm5zIFRoZSBzeXN0ZW0gbWVzc2FnZSBzdHJpbmcuXHJcbiAgICAgKi9cclxuICAgIHB1YmxpYyBnZXRTeXN0ZW1NZXNzYWdlKCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuIGdldFN5c3RlbU1lc3NhZ2UodGhpcy5zZXR0aW5ncyk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBBY3RpdmF0ZXMgYW5kIHJldmVhbHMgYSBzcGVjaWZpYyB2aWV3IHR5cGUgaW4gdGhlIHdvcmtzcGFjZS5cclxuICAgICAqIEBwYXJhbSB2aWV3VHlwZSBUaGUgdHlwZSBvZiB2aWV3IHRvIGFjdGl2YXRlLlxyXG4gICAgICogQHBhcmFtIHJldmVhbCBXaGV0aGVyIHRvIHJldmVhbCB0aGUgbGVhZiBhZnRlciBzZXR0aW5nIGl0cyB2aWV3IHN0YXRlLiBEZWZhdWx0cyB0byB0cnVlLlxyXG4gICAgICovXHJcbiAgICBhc3luYyBhY3RpdmF0ZVZpZXcodmlld1R5cGU6IHN0cmluZywgcmV2ZWFsOiBib29sZWFuID0gdHJ1ZSkge1xyXG4gICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5kZXRhY2hMZWF2ZXNPZlR5cGUodmlld1R5cGUpO1xyXG5cclxuICAgICAgICBsZXQgbGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRSaWdodExlYWYoZmFsc2UpIHx8IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKHRydWUpO1xyXG4gICAgICAgIGF3YWl0IGxlYWYuc2V0Vmlld1N0YXRlKHtcclxuICAgICAgICAgICAgdHlwZTogdmlld1R5cGUsXHJcbiAgICAgICAgICAgIGFjdGl2ZTogdHJ1ZSxcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgaWYgKHJldmVhbCkge1xyXG4gICAgICAgICAgICB0aGlzLmFwcC53b3Jrc3BhY2UucmV2ZWFsTGVhZihsZWFmKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogTG9hZHMgcGx1Z2luIHNldHRpbmdzIGZyb20gZGF0YS5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcclxuICAgICAgICB0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgKHRoaXMgYXMgUGx1Z2luKS5sb2FkRGF0YSgpKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFNhdmVzIHBsdWdpbiBzZXR0aW5ncyB0byBkYXRhLlxyXG4gICAgICogQWxzbyByZS1yZWdpc3RlcnMgWUFNTCBhdHRyaWJ1dGUgY29tbWFuZHMgYW5kIGVtaXRzIGEgc2V0dGluZ3MgY2hhbmdlIGV2ZW50LlxyXG4gICAgICovXHJcbiAgICBwdWJsaWMgYXN5bmMgc2F2ZVNldHRpbmdzKCkge1xyXG4gICAgICAgIGF3YWl0ICh0aGlzIGFzIFBsdWdpbikuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XHJcbiAgICAgICAgdGhpcy5yZWdpc3RlcllhbWxBdHRyaWJ1dGVDb21tYW5kcygpOyAvLyBVcGRhdGUgY29tbWFuZHMgYWZ0ZXIgc2F2aW5nIHNldHRpbmdzXHJcbiAgICAgICAgdGhpcy5lbWl0U2V0dGluZ3NDaGFuZ2UoKTsgLy8gTm90aWZ5IGxpc3RlbmVyc1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2Vzc2VzIGFuIGFycmF5IG9mIG1lc3NhZ2VzLCBwb3RlbnRpYWxseSBhZGRpbmcgY29udGV4dCBub3Rlcy5cclxuICAgICAqIEBwYXJhbSBtZXNzYWdlcyBUaGUgbWVzc2FnZXMgdG8gcHJvY2Vzcy5cclxuICAgICAqIEByZXR1cm5zIEEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRoZSBwcm9jZXNzZWQgbWVzc2FnZXMuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgYXN5bmMgcHJvY2Vzc01lc3NhZ2VzKG1lc3NhZ2VzOiBNZXNzYWdlW10pOiBQcm9taXNlPE1lc3NhZ2VbXT4ge1xyXG4gICAgICAgIHJldHVybiBwcm9jZXNzTWVzc2FnZXMobWVzc2FnZXMsIHRoaXMuYXBwLCB0aGlzLnNldHRpbmdzKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJldHJpZXZlcyBjb250ZW50IGZyb20gY29udGV4dCBub3Rlcy5cclxuICAgICAqIEBwYXJhbSBjb250ZXh0Tm90ZXNUZXh0IFRoZSB0ZXh0IGNvbnRhaW5pbmcgY29udGV4dCBub3RlIGxpbmtzLlxyXG4gICAgICogQHJldHVybnMgQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgdG8gdGhlIGNvbWJpbmVkIGNvbnRlbnQgb2YgY29udGV4dCBub3Rlcy5cclxuICAgICAqL1xyXG4gICAgcHVibGljIGFzeW5jIGdldENvbnRleHROb3Rlc0NvbnRlbnQoY29udGV4dE5vdGVzVGV4dDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgICAgICByZXR1cm4gZ2V0Q29udGV4dE5vdGVzQ29udGVudChjb250ZXh0Tm90ZXNUZXh0LCB0aGlzLmFwcCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDYWxsZWQgd2hlbiB0aGUgcGx1Z2luIGlzIHVubG9hZGVkLlxyXG4gICAgICogVW5yZWdpc3RlcnMgdmlld3MgdG8gcHJldmVudCBpc3N1ZXMgb24gcmVsb2FkLlxyXG4gICAgICovXHJcbiAgICBvbnVubG9hZCgpIHtcclxuICAgICAgICBNeVBsdWdpbi5yZWdpc3RlcmVkVmlld1R5cGVzLmRlbGV0ZShWSUVXX1RZUEVfTU9ERUxfU0VUVElOR1MpO1xyXG4gICAgICAgIE15UGx1Z2luLnJlZ2lzdGVyZWRWaWV3VHlwZXMuZGVsZXRlKFZJRVdfVFlQRV9DSEFUKTtcclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nLCBOb3RpY2UgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IE15UGx1Z2luU2V0dGluZ3MgfSBmcm9tICcuL3R5cGVzJztcclxuaW1wb3J0IE15UGx1Z2luIGZyb20gJy4vbWFpbic7XHJcbmltcG9ydCB7IFZJRVdfVFlQRV9NT0RFTF9TRVRUSU5HUyB9IGZyb20gJy4vbWFpbic7IC8vIEltcG9ydCB0aGUgY29uc3RhbnRcclxuaW1wb3J0IHsgU2V0dGluZ3NTZWN0aW9ucyB9IGZyb20gJy4vY29tcG9uZW50cy9jaGF0L1NldHRpbmdzU2VjdGlvbnMnO1xyXG5pbXBvcnQgeyBDb2xsYXBzaWJsZVNlY3Rpb25SZW5kZXJlciB9IGZyb20gJy4vY29tcG9uZW50cy9jaGF0L0NvbGxhcHNpYmxlU2VjdGlvbic7XHJcbmltcG9ydCB7IERFRkFVTFRfVElUTEVfUFJPTVBUIH0gZnJvbSAnLi9wcm9tcHRDb25zdGFudHMnO1xyXG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTIH0gZnJvbSAnLi90eXBlcyc7XHJcblxyXG4vKipcclxuICogUGx1Z2luIFNldHRpbmdzIFRhYlxyXG4gKlxyXG4gKiBUaGlzIHRhYiBwcm92aWRlcyBhIHVzZXIgaW50ZXJmYWNlIGZvciBjb25maWd1cmluZyB0aGUgcGx1Z2luIHNldHRpbmdzLlxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIE15UGx1Z2luU2V0dGluZ1RhYiBleHRlbmRzIFBsdWdpblNldHRpbmdUYWIge1xyXG4gICAgcGx1Z2luOiBNeVBsdWdpbjtcclxuICAgIHByaXZhdGUgc2V0dGluZ3NTZWN0aW9uczogU2V0dGluZ3NTZWN0aW9ucztcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBNeVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGFwcCwgcGx1Z2luKTtcclxuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuICAgICAgICB0aGlzLnNldHRpbmdzU2VjdGlvbnMgPSBuZXcgU2V0dGluZ3NTZWN0aW9ucyh0aGlzLnBsdWdpbik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgdGV4dCBpbnB1dCBzZXR0aW5nLlxyXG4gICAgICogQHBhcmFtIGNvbnRhaW5lckVsIFRoZSBIVE1MIGVsZW1lbnQgdG8gYXBwZW5kIHRoZSBzZXR0aW5nIHRvLlxyXG4gICAgICogQHBhcmFtIG5hbWUgVGhlIG5hbWUgb2YgdGhlIHNldHRpbmcuXHJcbiAgICAgKiBAcGFyYW0gZGVzYyBUaGUgZGVzY3JpcHRpb24gb2YgdGhlIHNldHRpbmcuXHJcbiAgICAgKiBAcGFyYW0gcGxhY2Vob2xkZXIgVGhlIHBsYWNlaG9sZGVyIHRleHQgZm9yIHRoZSBpbnB1dC5cclxuICAgICAqIEBwYXJhbSBnZXRWYWx1ZSBBIGZ1bmN0aW9uIHRvIGdldCB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgc2V0dGluZy5cclxuICAgICAqIEBwYXJhbSBzZXRWYWx1ZSBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgbmV3IHZhbHVlIG9mIHRoZSBzZXR0aW5nLlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBvcHRpb25zIGZvciB0aGUgdGV4dCBpbnB1dCAoZS5nLiwgdHJpbSwgdW5kZWZpbmVkSWZFbXB0eSwgaXNUZXh0QXJlYSkuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY3JlYXRlVGV4dFNldHRpbmcoXHJcbiAgICAgICAgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxyXG4gICAgICAgIG5hbWU6IHN0cmluZyxcclxuICAgICAgICBkZXNjOiBzdHJpbmcsXHJcbiAgICAgICAgcGxhY2Vob2xkZXI6IHN0cmluZyxcclxuICAgICAgICBnZXRWYWx1ZTogKCkgPT4gc3RyaW5nLFxyXG4gICAgICAgIHNldFZhbHVlOiAodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCkgPT4gUHJvbWlzZTx2b2lkPixcclxuICAgICAgICBvcHRpb25zPzogeyB0cmltPzogYm9vbGVhbjsgdW5kZWZpbmVkSWZFbXB0eT86IGJvb2xlYW47IGlzVGV4dEFyZWE/OiBib29sZWFuIH1cclxuICAgICk6IHZvaWQge1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShuYW1lKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhkZXNjKVxyXG4gICAgICAgICAgICAudGhlbihzZXR0aW5nID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRJbnB1dE9wdGlvbnMgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdHJpbTogb3B0aW9ucz8udHJpbSxcclxuICAgICAgICAgICAgICAgICAgICB1bmRlZmluZWRJZkVtcHR5OiBvcHRpb25zPy51bmRlZmluZWRJZkVtcHR5XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnM/LmlzVGV4dEFyZWEpIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLmFkZFRleHRBcmVhKHRleHQgPT4gdGhpcy5jb25maWd1cmVUZXh0SW5wdXQodGV4dCwgcGxhY2Vob2xkZXIsIGdldFZhbHVlLCBzZXRWYWx1ZSwgdGV4dElucHV0T3B0aW9ucykpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nLmFkZFRleHQodGV4dCA9PiB0aGlzLmNvbmZpZ3VyZVRleHRJbnB1dCh0ZXh0LCBwbGFjZWhvbGRlciwgZ2V0VmFsdWUsIHNldFZhbHVlLCB0ZXh0SW5wdXRPcHRpb25zKSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ29uZmlndXJlcyBhIHRleHQgaW5wdXQgKGVpdGhlciBzaW5nbGUtbGluZSBvciBtdWx0aS1saW5lKS5cclxuICAgICAqIEBwYXJhbSB0ZXh0Q29tcG9uZW50IFRoZSBUZXh0Q29tcG9uZW50IG9yIFRleHRBcmVhQ29tcG9uZW50IHRvIGNvbmZpZ3VyZS5cclxuICAgICAqIEBwYXJhbSBwbGFjZWhvbGRlciBUaGUgcGxhY2Vob2xkZXIgdGV4dC5cclxuICAgICAqIEBwYXJhbSBnZXRWYWx1ZSBBIGZ1bmN0aW9uIHRvIGdldCB0aGUgY3VycmVudCB2YWx1ZS5cclxuICAgICAqIEBwYXJhbSBzZXRWYWx1ZSBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgbmV3IHZhbHVlLlxyXG4gICAgICogQHBhcmFtIG9wdGlvbnMgQWRkaXRpb25hbCBvcHRpb25zIGZvciBwcm9jZXNzaW5nIHRoZSBpbnB1dCB2YWx1ZSAoZS5nLiwgdHJpbSwgdW5kZWZpbmVkSWZFbXB0eSkuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY29uZmlndXJlVGV4dElucHV0KFxyXG4gICAgICAgIHRleHRDb21wb25lbnQ6IGFueSwgLy8gVGV4dENvbXBvbmVudCB8IFRleHRBcmVhQ29tcG9uZW50XHJcbiAgICAgICAgcGxhY2Vob2xkZXI6IHN0cmluZyxcclxuICAgICAgICBnZXRWYWx1ZTogKCkgPT4gc3RyaW5nLFxyXG4gICAgICAgIHNldFZhbHVlOiAodmFsdWU6IHN0cmluZyB8IHVuZGVmaW5lZCkgPT4gUHJvbWlzZTx2b2lkPixcclxuICAgICAgICBvcHRpb25zPzogeyB0cmltPzogYm9vbGVhbjsgdW5kZWZpbmVkSWZFbXB0eT86IGJvb2xlYW4gfVxyXG4gICAgKTogdm9pZCB7XHJcbiAgICAgICAgdGV4dENvbXBvbmVudFxyXG4gICAgICAgICAgICAuc2V0UGxhY2Vob2xkZXIocGxhY2Vob2xkZXIpXHJcbiAgICAgICAgICAgIC5zZXRWYWx1ZShnZXRWYWx1ZSgpID8/ICcnKVxyXG4gICAgICAgICAgICAub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgIGxldCBwcm9jZXNzZWRWYWx1ZTogc3RyaW5nIHwgdW5kZWZpbmVkID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICBpZiAob3B0aW9ucz8udHJpbSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb2Nlc3NlZFZhbHVlID0gcHJvY2Vzc2VkVmFsdWUudHJpbSgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKG9wdGlvbnM/LnVuZGVmaW5lZElmRW1wdHkgJiYgcHJvY2Vzc2VkVmFsdWUgPT09ICcnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkVmFsdWUgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBhd2FpdCBzZXRWYWx1ZShwcm9jZXNzZWRWYWx1ZSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlcyBhIGRyb3Bkb3duIHNldHRpbmcuXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyRWwgVGhlIEhUTUwgZWxlbWVudCB0byBhcHBlbmQgdGhlIHNldHRpbmcgdG8uXHJcbiAgICAgKiBAcGFyYW0gbmFtZSBUaGUgbmFtZSBvZiB0aGUgc2V0dGluZy5cclxuICAgICAqIEBwYXJhbSBkZXNjIFRoZSBkZXNjcmlwdGlvbiBvZiB0aGUgc2V0dGluZy5cclxuICAgICAqIEBwYXJhbSBvcHRpb25zIEEgcmVjb3JkIG9mIG9wdGlvbiB2YWx1ZXMgdG8gZGlzcGxheSBuYW1lcy5cclxuICAgICAqIEBwYXJhbSBnZXRWYWx1ZSBBIGZ1bmN0aW9uIHRvIGdldCB0aGUgY3VycmVudCB2YWx1ZSBvZiB0aGUgc2V0dGluZy5cclxuICAgICAqIEBwYXJhbSBzZXRWYWx1ZSBBIGZ1bmN0aW9uIHRvIHNldCB0aGUgbmV3IHZhbHVlIG9mIHRoZSBzZXR0aW5nLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNyZWF0ZURyb3Bkb3duU2V0dGluZyhcclxuICAgICAgICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXHJcbiAgICAgICAgbmFtZTogc3RyaW5nLFxyXG4gICAgICAgIGRlc2M6IHN0cmluZyxcclxuICAgICAgICBvcHRpb25zOiBSZWNvcmQ8c3RyaW5nLCBzdHJpbmc+LFxyXG4gICAgICAgIGdldFZhbHVlOiAoKSA9PiBzdHJpbmcsXHJcbiAgICAgICAgc2V0VmFsdWU6ICh2YWx1ZTogc3RyaW5nKSA9PiBQcm9taXNlPHZvaWQ+XHJcbiAgICApOiB2b2lkIHtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUobmFtZSlcclxuICAgICAgICAgICAgLnNldERlc2MoZGVzYylcclxuICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgT2JqZWN0LmVudHJpZXMob3B0aW9ucykuZm9yRWFjaCgoW2tleSwgZGlzcGxheV0pID0+IGRyb3AuYWRkT3B0aW9uKGtleSwgZGlzcGxheSkpO1xyXG4gICAgICAgICAgICAgICAgZHJvcC5zZXRWYWx1ZShnZXRWYWx1ZSgpKTtcclxuICAgICAgICAgICAgICAgIGRyb3Aub25DaGFuZ2UoYXN5bmMgKHZhbHVlOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXRWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDcmVhdGVzIGEgdG9nZ2xlIChjaGVja2JveCkgc2V0dGluZy5cclxuICAgICAqIEBwYXJhbSBjb250YWluZXJFbCBUaGUgSFRNTCBlbGVtZW50IHRvIGFwcGVuZCB0aGUgc2V0dGluZyB0by5cclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBzZXR0aW5nLlxyXG4gICAgICogQHBhcmFtIGRlc2MgVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBzZXR0aW5nLlxyXG4gICAgICogQHBhcmFtIGdldFZhbHVlIEEgZnVuY3Rpb24gdG8gZ2V0IHRoZSBjdXJyZW50IGJvb2xlYW4gdmFsdWUuXHJcbiAgICAgKiBAcGFyYW0gc2V0VmFsdWUgQSBmdW5jdGlvbiB0byBzZXQgdGhlIG5ldyBib29sZWFuIHZhbHVlLlxyXG4gICAgICogQHBhcmFtIG9uQ2hhbmdlQ2FsbGJhY2sgQW4gb3B0aW9uYWwgY2FsbGJhY2sgdG8gcnVuIGFmdGVyIHRoZSB2YWx1ZSBjaGFuZ2VzIGFuZCBzZXR0aW5ncyBhcmUgc2F2ZWQuXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgY3JlYXRlVG9nZ2xlU2V0dGluZyhcclxuICAgICAgICBjb250YWluZXJFbDogSFRNTEVsZW1lbnQsXHJcbiAgICAgICAgbmFtZTogc3RyaW5nLFxyXG4gICAgICAgIGRlc2M6IHN0cmluZyxcclxuICAgICAgICBnZXRWYWx1ZTogKCkgPT4gYm9vbGVhbixcclxuICAgICAgICBzZXRWYWx1ZTogKHZhbHVlOiBib29sZWFuKSA9PiBQcm9taXNlPHZvaWQ+LFxyXG4gICAgICAgIG9uQ2hhbmdlQ2FsbGJhY2s/OiAoKSA9PiB2b2lkXHJcbiAgICApOiB2b2lkIHtcclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLnNldE5hbWUobmFtZSlcclxuICAgICAgICAgICAgLnNldERlc2MoZGVzYylcclxuICAgICAgICAgICAgLmFkZFRvZ2dsZSh0b2dnbGUgPT4gdG9nZ2xlXHJcbiAgICAgICAgICAgICAgICAuc2V0VmFsdWUoZ2V0VmFsdWUoKSlcclxuICAgICAgICAgICAgICAgIC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZXRWYWx1ZSh2YWx1ZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKG9uQ2hhbmdlQ2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2VDYWxsYmFjaygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBzbGlkZXIgc2V0dGluZy5cclxuICAgICAqIEBwYXJhbSBjb250YWluZXJFbCBUaGUgSFRNTCBlbGVtZW50IHRvIGFwcGVuZCB0aGUgc2V0dGluZyB0by5cclxuICAgICAqIEBwYXJhbSBuYW1lIFRoZSBuYW1lIG9mIHRoZSBzZXR0aW5nLlxyXG4gICAgICogQHBhcmFtIGRlc2MgVGhlIGRlc2NyaXB0aW9uIG9mIHRoZSBzZXR0aW5nLlxyXG4gICAgICogQHBhcmFtIGxpbWl0cyBBbiBvYmplY3QgZGVmaW5pbmcgbWluLCBtYXgsIGFuZCBzdGVwIGZvciB0aGUgc2xpZGVyLlxyXG4gICAgICogQHBhcmFtIGdldFZhbHVlIEEgZnVuY3Rpb24gdG8gZ2V0IHRoZSBjdXJyZW50IG51bWVyaWMgdmFsdWUuXHJcbiAgICAgKiBAcGFyYW0gc2V0VmFsdWUgQSBmdW5jdGlvbiB0byBzZXQgdGhlIG5ldyBudW1lcmljIHZhbHVlLlxyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGNyZWF0ZVNsaWRlclNldHRpbmcoXHJcbiAgICAgICAgY29udGFpbmVyRWw6IEhUTUxFbGVtZW50LFxyXG4gICAgICAgIG5hbWU6IHN0cmluZyxcclxuICAgICAgICBkZXNjOiBzdHJpbmcsXHJcbiAgICAgICAgbGltaXRzOiB7IG1pbjogbnVtYmVyLCBtYXg6IG51bWJlciwgc3RlcDogbnVtYmVyIH0sXHJcbiAgICAgICAgZ2V0VmFsdWU6ICgpID0+IG51bWJlcixcclxuICAgICAgICBzZXRWYWx1ZTogKHZhbHVlOiBudW1iZXIpID0+IFByb21pc2U8dm9pZD5cclxuICAgICk6IHZvaWQge1xyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZShuYW1lKVxyXG4gICAgICAgICAgICAuc2V0RGVzYyhkZXNjKVxyXG4gICAgICAgICAgICAuYWRkU2xpZGVyKHNsaWRlciA9PiB7XHJcbiAgICAgICAgICAgICAgICBzbGlkZXIuc2V0TGltaXRzKGxpbWl0cy5taW4sIGxpbWl0cy5tYXgsIGxpbWl0cy5zdGVwKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRWYWx1ZShnZXRWYWx1ZSgpKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXREeW5hbWljVG9vbHRpcCgpXHJcbiAgICAgICAgICAgICAgICAgICAgLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZTogbnVtYmVyKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHNldFZhbHVlKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZW5kZXJzIHRoZSBZQU1MIEF0dHJpYnV0ZSBHZW5lcmF0b3JzIHNlY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyRWwgVGhlIEhUTUwgZWxlbWVudCB0byBhcHBlbmQgdGhlIHNlY3Rpb24gdG8uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVuZGVyWWFtbEF0dHJpYnV0ZUdlbmVyYXRvcnMoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnWUFNTCBBdHRyaWJ1dGUgR2VuZXJhdG9ycycgfSk7XHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2RpdicsIHsgdGV4dDogJ0NvbmZpZ3VyZSBjdXN0b20gWUFNTCBhdHRyaWJ1dGUgZ2VuZXJhdG9ycy4gRWFjaCBlbnRyeSB3aWxsIGNyZWF0ZSBhIGNvbW1hbmQgdG8gZ2VuZXJhdGUgYW5kIGluc2VydC91cGRhdGUgYSBZQU1MIGZpZWxkIGluIHlvdXIgbm90ZXMuJyB9KS5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMWVtJztcclxuXHJcbiAgICAgICAgY29uc3QgeWFtbEdlbnMgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy55YW1sQXR0cmlidXRlR2VuZXJhdG9ycyA/PyBbXTtcclxuICAgICAgICB5YW1sR2Vucy5mb3JFYWNoKChnZW4sIGlkeCkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBhdXRvQ29tbWFuZE5hbWUgPSBnZW4uYXR0cmlidXRlTmFtZSA/IGBHZW5lcmF0ZSBZQU1MOiAke2dlbi5hdHRyaWJ1dGVOYW1lfWAgOiBgWUFNTCBHZW5lcmF0b3IgIyR7aWR4ICsgMX1gO1xyXG4gICAgICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKGF1dG9Db21tYW5kTmFtZSlcclxuICAgICAgICAgICAgICAgIC5zZXREZXNjKGBZQU1MIGZpZWxkOiAke2dlbi5hdHRyaWJ1dGVOYW1lfWApXHJcbiAgICAgICAgICAgICAgICAuYWRkVGV4dCh0ZXh0ID0+IHRoaXMuY29uZmlndXJlVGV4dElucHV0KHRleHQsICdZQU1MIEF0dHJpYnV0ZSBOYW1lJywgKCkgPT4gZ2VuLmF0dHJpYnV0ZU5hbWUsIGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy55YW1sQXR0cmlidXRlR2VuZXJhdG9ycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy55YW1sQXR0cmlidXRlR2VuZXJhdG9yc1tpZHhdLmF0dHJpYnV0ZU5hbWUgPSB2YWx1ZSA/PyAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MueWFtbEF0dHJpYnV0ZUdlbmVyYXRvcnNbaWR4XS5jb21tYW5kTmFtZSA9IHZhbHVlID8gYEdlbmVyYXRlIFlBTUw6ICR7dmFsdWV9YCA6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7IC8vIFJlLXJlbmRlciB0byB1cGRhdGUgdGhlIGNvbW1hbmQgbmFtZVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgLmFkZFRleHRBcmVhKHRleHQgPT4gdGhpcy5jb25maWd1cmVUZXh0SW5wdXQodGV4dCwgJ1Byb21wdCBmb3IgTExNJywgKCkgPT4gZ2VuLnByb21wdCwgYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JzW2lkeF0ucHJvbXB0ID0gdmFsdWUgPz8gJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pKVxyXG4gICAgICAgICAgICAgICAgLmFkZERyb3Bkb3duKGRyb3AgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGRyb3AuYWRkT3B0aW9uKCdjbGlwYm9hcmQnLCAnQ29weSB0byBjbGlwYm9hcmQnKTtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wLmFkZE9wdGlvbignbWV0YWRhdGEnLCAnSW5zZXJ0IGludG8gbWV0YWRhdGEnKTtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wLnNldFZhbHVlKGdlbi5vdXRwdXRNb2RlKTtcclxuICAgICAgICAgICAgICAgICAgICBkcm9wLm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MueWFtbEF0dHJpYnV0ZUdlbmVyYXRvcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JzW2lkeF0ub3V0cHV0TW9kZSA9IHZhbHVlIGFzIGFueTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgLmFkZEV4dHJhQnV0dG9uKGJ0biA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnRuLnNldEljb24oJ2Nyb3NzJylcclxuICAgICAgICAgICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ0RlbGV0ZScpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy55YW1sQXR0cmlidXRlR2VuZXJhdG9ycykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnlhbWxBdHRyaWJ1dGVHZW5lcmF0b3JzLnNwbGljZShpZHgsIDEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidG4gPT4ge1xyXG4gICAgICAgICAgICAgICAgYnRuLnNldEJ1dHRvblRleHQoJ0FkZCBZQU1MIEF0dHJpYnV0ZSBHZW5lcmF0b3InKVxyXG4gICAgICAgICAgICAgICAgICAgIC5zZXRDdGEoKVxyXG4gICAgICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCF0aGlzLnBsdWdpbi5zZXR0aW5ncy55YW1sQXR0cmlidXRlR2VuZXJhdG9ycykgdGhpcy5wbHVnaW4uc2V0dGluZ3MueWFtbEF0dHJpYnV0ZUdlbmVyYXRvcnMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MueWFtbEF0dHJpYnV0ZUdlbmVyYXRvcnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhdHRyaWJ1dGVOYW1lOiAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByb21wdDogJycsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBvdXRwdXRNb2RlOiAnbWV0YWRhdGEnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29tbWFuZE5hbWU6ICdOZXcgWUFNTCBHZW5lcmF0b3InXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUmVuZGVycyB0aGUgTW9kZWwgU2V0dGluZyBQcmVzZXRzIHNlY3Rpb24uXHJcbiAgICAgKiBAcGFyYW0gY29udGFpbmVyRWwgVGhlIEhUTUwgZWxlbWVudCB0byBhcHBlbmQgdGhlIHNlY3Rpb24gdG8uXHJcbiAgICAgKi9cclxuICAgIHByaXZhdGUgcmVuZGVyTW9kZWxTZXR0aW5nUHJlc2V0cyhjb250YWluZXJFbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuICAgICAgICBjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdNb2RlbCBTZXR0aW5nIFByZXNldHMnIH0pO1xyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnLCB7XHJcbiAgICAgICAgICAgIHRleHQ6ICdQcmVzZXRzIGxldCB5b3Ugc2F2ZSBhbmQgcXVpY2tseSBhcHBseSBjb21tb24gbW9kZWwgc2V0dGluZ3MgKG1vZGVsLCB0ZW1wZXJhdHVyZSwgc3lzdGVtIG1lc3NhZ2UsIGV0YykuIFlvdSBjYW4gYWRkLCBlZGl0LCBvciByZW1vdmUgcHJlc2V0cyBoZXJlLiBJbiB0aGUgQUkgTW9kZWwgU2V0dGluZ3MgcGFuZWwsIHlvdSB3aWxsIHNlZSBidXR0b25zIGZvciBlYWNoIHByZXNldCBhYm92ZSB0aGUgbW9kZWwgc2VsZWN0aW9uLiBDbGlja2luZyBhIHByZXNldCBidXR0b24gd2lsbCBpbnN0YW50bHkgYXBwbHkgdGhvc2Ugc2V0dGluZ3MuIFRoaXMgaXMgdXNlZnVsIGZvciBzd2l0Y2hpbmcgYmV0d2VlbiBkaWZmZXJlbnQgbW9kZWwgY29uZmlndXJhdGlvbnMgd2l0aCBvbmUgY2xpY2suJyxcclxuICAgICAgICAgICAgY2xzOiAnc2V0dGluZy1pdGVtLWRlc2NyaXB0aW9uJyxcclxuICAgICAgICAgICAgYXR0cjogeyBzdHlsZTogJ21hcmdpbi1ib3R0b206IDAuNWVtOycgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBjb25zdCBwcmVzZXRMaXN0ID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZXR0aW5nUHJlc2V0cyB8fCBbXTtcclxuICAgICAgICBwcmVzZXRMaXN0LmZvckVhY2goKHByZXNldCwgaWR4KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgICAgIC5zZXROYW1lKHByZXNldC5uYW1lKVxyXG4gICAgICAgICAgICAgICAgLnNldERlc2MoJ0VkaXQgb3IgcmVtb3ZlIHRoaXMgcHJlc2V0Jyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyZVRleHRJbnB1dChzZXR0aW5nLmFkZFRleHQodGV4dCA9PiB0ZXh0KSwgJ1ByZXNldCBOYW1lJywgKCkgPT4gcHJlc2V0Lm5hbWUsIGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJlc2V0Lm5hbWUgPSB2YWx1ZSA/PyAnJztcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyZVRleHRJbnB1dChzZXR0aW5nLmFkZFRleHQodGV4dCA9PiB0ZXh0KSwgJ01vZGVsIElEIChwcm92aWRlcjptb2RlbCknLCAoKSA9PiBwcmVzZXQuc2VsZWN0ZWRNb2RlbCB8fCAnJywgYXN5bmMgKHZhbHVlKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBwcmVzZXQuc2VsZWN0ZWRNb2RlbCA9IHZhbHVlID8/ICcnO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyZVRleHRJbnB1dChzZXR0aW5nLmFkZFRleHRBcmVhKHRleHQgPT4gdGV4dCksICdTeXN0ZW0gbWVzc2FnZScsICgpID0+IHByZXNldC5zeXN0ZW1NZXNzYWdlIHx8ICcnLCBhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHByZXNldC5zeXN0ZW1NZXNzYWdlID0gdmFsdWUgPz8gJyc7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRoaXMuY3JlYXRlU2xpZGVyU2V0dGluZyhzZXR0aW5nLmNvbnRyb2xFbCwgJ1RlbXBlcmF0dXJlJywgJycsIHsgbWluOiAwLCBtYXg6IDEsIHN0ZXA6IDAuMSB9LCAoKSA9PiBwcmVzZXQudGVtcGVyYXR1cmUgPz8gMC43LCBhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIHByZXNldC50ZW1wZXJhdHVyZSA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB0aGlzLmNvbmZpZ3VyZVRleHRJbnB1dChzZXR0aW5nLmFkZFRleHQodGV4dCA9PiB0ZXh0KSwgJ01heCB0b2tlbnMnLCAoKSA9PiBwcmVzZXQubWF4VG9rZW5zPy50b1N0cmluZygpIHx8ICcnLCBhc3luYyAodmFsdWUpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG51bSA9IHBhcnNlSW50KHZhbHVlID8/ICcnLCAxMCk7XHJcbiAgICAgICAgICAgICAgICBwcmVzZXQubWF4VG9rZW5zID0gaXNOYU4obnVtKSA/IHVuZGVmaW5lZCA6IG51bTtcclxuICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVUb2dnbGVTZXR0aW5nKHNldHRpbmcuY29udHJvbEVsLCAnRW5hYmxlIFN0cmVhbWluZycsICcnLCAoKSA9PiBwcmVzZXQuZW5hYmxlU3RyZWFtaW5nID8/IHRydWUsIGFzeW5jICh2YWx1ZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgcHJlc2V0LmVuYWJsZVN0cmVhbWluZyA9IHZhbHVlO1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgc2V0dGluZy5hZGRFeHRyYUJ1dHRvbihidG4gPT4gYnRuXHJcbiAgICAgICAgICAgICAgICAuc2V0SWNvbignY3Jvc3MnKVxyXG4gICAgICAgICAgICAgICAgLnNldFRvb2x0aXAoJ0RlbGV0ZScpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9kZWxTZXR0aW5nUHJlc2V0cz8uc3BsaWNlKGlkeCwgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7XHJcbiAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBuZXcgU2V0dGluZyhjb250YWluZXJFbClcclxuICAgICAgICAgICAgLmFkZEJ1dHRvbihidG4gPT4gYnRuXHJcbiAgICAgICAgICAgICAgICAuc2V0QnV0dG9uVGV4dCgnQWRkIFByZXNldCcpXHJcbiAgICAgICAgICAgICAgICAuc2V0Q3RhKClcclxuICAgICAgICAgICAgICAgIC5vbkNsaWNrKGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2V0dGluZ1ByZXNldHMpIHRoaXMucGx1Z2luLnNldHRpbmdzLm1vZGVsU2V0dGluZ1ByZXNldHMgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNldHRpbmdQcmVzZXRzLnB1c2goSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeSh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6IGBQcmVzZXQgJHt0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2RlbFNldHRpbmdQcmVzZXRzLmxlbmd0aCArIDF9YCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWRNb2RlbDogdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VsZWN0ZWRNb2RlbCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3lzdGVtTWVzc2FnZTogdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3lzdGVtTWVzc2FnZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGVyYXR1cmU6IHRoaXMucGx1Z2luLnNldHRpbmdzLnRlbXBlcmF0dXJlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXhUb2tlbnM6IHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFRva2VucyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZW5hYmxlU3RyZWFtaW5nOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5lbmFibGVTdHJlYW1pbmdcclxuICAgICAgICAgICAgICAgICAgICB9KSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuZGlzcGxheSgpO1xyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIERpc3BsYXkgdGhlIHNldHRpbmdzIHRhYi5cclxuICAgICAqIFRoaXMgbWV0aG9kIG9yY2hlc3RyYXRlcyB0aGUgcmVuZGVyaW5nIG9mIGFsbCBzZXR0aW5nIHNlY3Rpb25zLlxyXG4gICAgICovXHJcbiAgICBkaXNwbGF5KCk6IHZvaWQge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGFpbmVyRWwuZW1wdHkoKTtcclxuXHJcbiAgICAgICAgY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnQUkgQXNzaXN0YW50IFNldHRpbmdzJyB9KTtcclxuXHJcbiAgICAgICAgLy8gQVBJIEtleXMgU2VjdGlvblxyXG4gICAgICAgIGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogJ0FQSSBLZXlzJyB9KTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVRleHRTZXR0aW5nKGNvbnRhaW5lckVsLCAnT3BlbkFJIEFQSSBLZXknLCAnRW50ZXIgeW91ciBPcGVuQUkgQVBJIGtleScsICdFbnRlciB5b3VyIEFQSSBrZXknLFxyXG4gICAgICAgICAgICAoKSA9PiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5hcGlLZXksXHJcbiAgICAgICAgICAgIGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5hcGlLZXkgPSB2YWx1ZSA/PyAnJzsgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7IH0pO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlVGV4dFNldHRpbmcoY29udGFpbmVyRWwsICdPcGVuQUkgQmFzZSBVUkwnLCAnQ3VzdG9tIGJhc2UgVVJMIGZvciBPcGVuQUkgQVBJIChvcHRpb25hbCwgbGVhdmUgZW1wdHkgZm9yIGRlZmF1bHQpJywgJ2h0dHBzOi8vYXBpLm9wZW5haS5jb20vdjEnLFxyXG4gICAgICAgICAgICAoKSA9PiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5iYXNlVXJsIHx8ICcnLFxyXG4gICAgICAgICAgICBhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MuYmFzZVVybCA9IHZhbHVlOyBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTsgfSxcclxuICAgICAgICAgICAgeyB0cmltOiB0cnVlLCB1bmRlZmluZWRJZkVtcHR5OiB0cnVlIH0pO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlVGV4dFNldHRpbmcoY29udGFpbmVyRWwsICdBbnRocm9waWMgQVBJIEtleScsICdFbnRlciB5b3VyIEFudGhyb3BpYyBBUEkga2V5JywgJ0VudGVyIHlvdXIgQVBJIGtleScsXHJcbiAgICAgICAgICAgICgpID0+IHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzLmFwaUtleSxcclxuICAgICAgICAgICAgYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmFudGhyb3BpY1NldHRpbmdzLmFwaUtleSA9IHZhbHVlID8/ICcnOyBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTsgfSk7XHJcbiAgICAgICAgdGhpcy5jcmVhdGVUZXh0U2V0dGluZyhjb250YWluZXJFbCwgJ0dvb2dsZSBBUEkgS2V5JywgJ0VudGVyIHlvdXIgR29vZ2xlIEFQSSBrZXknLCAnRW50ZXIgeW91ciBBUEkga2V5JyxcclxuICAgICAgICAgICAgKCkgPT4gdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MuYXBpS2V5LFxyXG4gICAgICAgICAgICBhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MuYXBpS2V5ID0gdmFsdWUgPz8gJyc7IGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpOyB9KTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVRleHRTZXR0aW5nKGNvbnRhaW5lckVsLCAnT2xsYW1hIFNlcnZlciBVUkwnLCAnRW50ZXIgeW91ciBPbGxhbWEgc2VydmVyIFVSTCAoZGVmYXVsdDogaHR0cDovL2xvY2FsaG9zdDoxMTQzNCknLCAnaHR0cDovL2xvY2FsaG9zdDoxMTQzNCcsXHJcbiAgICAgICAgICAgICgpID0+IHRoaXMucGx1Z2luLnNldHRpbmdzLm9sbGFtYVNldHRpbmdzLnNlcnZlclVybCxcclxuICAgICAgICAgICAgYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLm9sbGFtYVNldHRpbmdzLnNlcnZlclVybCA9IHZhbHVlID8/ICcnOyBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTsgfSk7XHJcblxyXG4gICAgICAgIC8vIFVuaWZpZWQgQUkgTW9kZWwgU2V0dGluZ3MgU2VjdGlvblxyXG4gICAgICAgIENvbGxhcHNpYmxlU2VjdGlvblJlbmRlcmVyLmNyZWF0ZUNvbGxhcHNpYmxlU2VjdGlvbihcclxuICAgICAgICAgICAgY29udGFpbmVyRWwsXHJcbiAgICAgICAgICAgICdBSSBNb2RlbCBTZXR0aW5ncycsXHJcbiAgICAgICAgICAgIGFzeW5jIChzZWN0aW9uRWw6IEhUTUxFbGVtZW50KSA9PiB7XHJcbiAgICAgICAgICAgICAgICBhd2FpdCB0aGlzLnNldHRpbmdzU2VjdGlvbnMucmVuZGVyQUlNb2RlbFNldHRpbmdzKHNlY3Rpb25FbCwgKCkgPT4gdGhpcy5kaXNwbGF5KCkpO1xyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbixcclxuICAgICAgICAgICAgJ2dlbmVyYWxTZWN0aW9uc0V4cGFuZGVkJ1xyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIHRoaXMuY3JlYXRlVGV4dFNldHRpbmcoY29udGFpbmVyRWwsICdDaGF0IFNlcGFyYXRvcicsICdUaGUgc3RyaW5nIHVzZWQgdG8gc2VwYXJhdGUgY2hhdCBtZXNzYWdlcy4nLCAnLS0tLScsXHJcbiAgICAgICAgICAgICgpID0+IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRTZXBhcmF0b3IgPz8gJycsXHJcbiAgICAgICAgICAgIGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5jaGF0U2VwYXJhdG9yID0gdmFsdWUgPz8gJyc7IGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpOyB9KTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVRleHRTZXR0aW5nKGNvbnRhaW5lckVsLCAnQ2hhdCBTdGFydCBTdHJpbmcnLCAnVGhlIHN0cmluZyB0aGF0IGluZGljYXRlcyB3aGVyZSB0byBzdGFydCB0YWtpbmcgdGhlIG5vdGUgZm9yIGNvbnRleHQuJywgJz09PVNUQVJUPT09JyxcclxuICAgICAgICAgICAgKCkgPT4gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdFN0YXJ0U3RyaW5nID8/ICcnLFxyXG4gICAgICAgICAgICBhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdFN0YXJ0U3RyaW5nID0gdmFsdWUgPz8gJyc7IGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpOyB9KTtcclxuICAgICAgICB0aGlzLmNyZWF0ZVRleHRTZXR0aW5nKGNvbnRhaW5lckVsLCAnQ2hhdCBFbmQgU3RyaW5nJywgJ1RoZSBzdHJpbmcgdGhhdCBpbmRpY2F0ZXMgd2hlcmUgdG8gZW5kIHRha2luZyB0aGUgbm90ZSBmb3IgY29udGV4dC4nLCAnPT09RU5EPT09JyxcclxuICAgICAgICAgICAgKCkgPT4gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdEVuZFN0cmluZyA/PyAnJyxcclxuICAgICAgICAgICAgYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXRFbmRTdHJpbmcgPSB2YWx1ZSA/PyAnJzsgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7IH0pO1xyXG4gICAgICAgIHRoaXMuY3JlYXRlVGV4dFNldHRpbmcoY29udGFpbmVyRWwsICdUaXRsZSBQcm9tcHQnLCAnVGhlIHByb21wdCB1c2VkIGZvciBnZW5lcmF0aW5nIG5vdGUgdGl0bGVzLicsICdZb3UgYXJlIGEgdGl0bGUgZ2VuZXJhdG9yLi4uJyxcclxuICAgICAgICAgICAgKCkgPT4gdGhpcy5wbHVnaW4uc2V0dGluZ3MudGl0bGVQcm9tcHQsXHJcbiAgICAgICAgICAgIGFzeW5jICh2YWx1ZSkgPT4geyB0aGlzLnBsdWdpbi5zZXR0aW5ncy50aXRsZVByb21wdCA9IHZhbHVlID8/ICcnOyBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTsgfSxcclxuICAgICAgICAgICAgeyBpc1RleHRBcmVhOiB0cnVlIH0pO1xyXG5cclxuICAgICAgICAvLyBSZXNldCBBbGwgU2V0dGluZ3MgdG8gRGVmYXVsdFxyXG4gICAgICAgIG5ldyBTZXR0aW5nKGNvbnRhaW5lckVsKVxyXG4gICAgICAgICAgICAuc2V0TmFtZSgnUmVzZXQgQWxsIFNldHRpbmdzIHRvIERlZmF1bHQnKVxyXG4gICAgICAgICAgICAuc2V0RGVzYygnUmVzZXQgYWxsIHBsdWdpbiBzZXR0aW5ncyAoZXhjZXB0IEFQSSBrZXlzKSB0byB0aGVpciBvcmlnaW5hbCBkZWZhdWx0IHZhbHVlcy4nKVxyXG4gICAgICAgICAgICAuYWRkQnV0dG9uKGJ1dHRvbiA9PiBidXR0b25cclxuICAgICAgICAgICAgICAgIC5zZXRCdXR0b25UZXh0KCdSZXNldCcpXHJcbiAgICAgICAgICAgICAgICAub25DbGljayhhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgeyBERUZBVUxUX1NFVFRJTkdTIH0gPSBhd2FpdCBpbXBvcnQoJy4vdHlwZXMnKTtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCB7IERFRkFVTFRfVElUTEVfUFJPTVBUIH0gPSBhd2FpdCBpbXBvcnQoJy4vcHJvbXB0Q29uc3RhbnRzJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIFByZXNlcnZlIEFQSSBrZXlzXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlc2VydmVkQXBpS2V5cyA9IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BlbmFpOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuYWlTZXR0aW5ncy5hcGlLZXksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFudGhyb3BpYzogdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MuYXBpS2V5LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBnZW1pbmk6IHRoaXMucGx1Z2luLnNldHRpbmdzLmdlbWluaVNldHRpbmdzLmFwaUtleSxcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBSZXNldCBhbGwgc2V0dGluZ3MgdG8gZGVmYXVsdCwgdGhlbiByZXN0b3JlIHByZXNlcnZlZCBBUEkga2V5c1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzID0gSlNPTi5wYXJzZShKU09OLnN0cmluZ2lmeShERUZBVUxUX1NFVFRJTkdTKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlbmFpU2V0dGluZ3MuYXBpS2V5ID0gcHJlc2VydmVkQXBpS2V5cy5vcGVuYWk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuYW50aHJvcGljU2V0dGluZ3MuYXBpS2V5ID0gcHJlc2VydmVkQXBpS2V5cy5hbnRocm9waWM7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZ2VtaW5pU2V0dGluZ3MuYXBpS2V5ID0gcHJlc2VydmVkQXBpS2V5cy5nZW1pbmk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4uc2V0dGluZ3MudGl0bGVQcm9tcHQgPSBERUZBVUxUX1RJVExFX1BST01QVDtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5kaXNwbGF5KCk7IC8vIFJlLXJlbmRlciB0aGUgc2V0dGluZ3MgdG8gc2hvdyB1cGRhdGVkIHZhbHVlc1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBGb3JjZSBNb2RlbFNldHRpbmdzVmlldyB0byByZWZyZXNoIGlmIG9wZW5cclxuICAgICAgICAgICAgICAgICAgICBpZiAodHlwZW9mIHRoaXMucGx1Z2luLmFjdGl2YXRlVmlldyA9PT0gJ2Z1bmN0aW9uJykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmFjdGl2YXRlVmlldyhWSUVXX1RZUEVfTU9ERUxfU0VUVElOR1MpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBuZXcgTm90aWNlKCdBbGwgc2V0dGluZ3MgKGV4Y2VwdCBBUEkga2V5cykgcmVzZXQgdG8gZGVmYXVsdC4nKTtcclxuICAgICAgICAgICAgICAgIH0pKTtcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVEcm9wZG93blNldHRpbmcoY29udGFpbmVyRWwsICdUaXRsZSBPdXRwdXQgTW9kZScsICdDaG9vc2Ugd2hhdCB0byBkbyB3aXRoIHRoZSBnZW5lcmF0ZWQgbm90ZSB0aXRsZS4nLFxyXG4gICAgICAgICAgICB7ICdjbGlwYm9hcmQnOiAnQ29weSB0byBjbGlwYm9hcmQnLCAncmVwbGFjZS1maWxlbmFtZSc6ICdSZXBsYWNlIG5vdGUgZmlsZW5hbWUnLCAnbWV0YWRhdGEnOiAnSW5zZXJ0IGludG8gbWV0YWRhdGEnIH0sXHJcbiAgICAgICAgICAgICgpID0+IHRoaXMucGx1Z2luLnNldHRpbmdzLnRpdGxlT3V0cHV0TW9kZSA/PyAnY2xpcGJvYXJkJyxcclxuICAgICAgICAgICAgYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLnRpdGxlT3V0cHV0TW9kZSA9IHZhbHVlIGFzIGFueTsgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7IH0pO1xyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZURyb3Bkb3duU2V0dGluZyhjb250YWluZXJFbCwgJ1N1bW1hcnkgT3V0cHV0IE1vZGUnLCAnQ2hvb3NlIHdoYXQgdG8gZG8gd2l0aCB0aGUgZ2VuZXJhdGVkIG5vdGUgc3VtbWFyeS4nLFxyXG4gICAgICAgICAgICB7ICdjbGlwYm9hcmQnOiAnQ29weSB0byBjbGlwYm9hcmQnLCAnbWV0YWRhdGEnOiAnSW5zZXJ0IGludG8gbWV0YWRhdGEnIH0sXHJcbiAgICAgICAgICAgICgpID0+IHRoaXMucGx1Z2luLnNldHRpbmdzLnN1bW1hcnlPdXRwdXRNb2RlID8/ICdjbGlwYm9hcmQnLFxyXG4gICAgICAgICAgICBhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3Muc3VtbWFyeU91dHB1dE1vZGUgPSB2YWx1ZSBhcyBhbnk7IGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpOyB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5jcmVhdGVUb2dnbGVTZXR0aW5nKGNvbnRhaW5lckVsLCAnRXhwYW5kIExpbmtlZCBOb3RlcyBSZWN1cnNpdmVseScsICdJZiBlbmFibGVkLCB3aGVuIGZldGNoaW5nIGEgbm90ZSwgYWxzbyBmZXRjaCBhbmQgZXhwYW5kIGxpbmtzIHdpdGhpbiB0aGF0IG5vdGUgcmVjdXJzaXZlbHkgKHByZXZlbnRzIGluZmluaXRlIGxvb3BzKS4nLFxyXG4gICAgICAgICAgICAoKSA9PiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5leHBhbmRMaW5rZWROb3Rlc1JlY3Vyc2l2ZWx5ID8/IGZhbHNlLFxyXG4gICAgICAgICAgICBhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuZXhwYW5kTGlua2VkTm90ZXNSZWN1cnNpdmVseSA9IHZhbHVlOyBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTsgfSxcclxuICAgICAgICAgICAgKCkgPT4gdGhpcy5kaXNwbGF5KCkpOyAvLyBSZS1yZW5kZXIgdG8gc2hvdy9oaWRlIHRoZSBzbGlkZXJcclxuXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLmV4cGFuZExpbmtlZE5vdGVzUmVjdXJzaXZlbHkpIHtcclxuICAgICAgICAgICAgdGhpcy5jcmVhdGVTbGlkZXJTZXR0aW5nKGNvbnRhaW5lckVsLCAnTWF4IExpbmsgRXhwYW5zaW9uIERlcHRoJywgJ01heGltdW0gZGVwdGggZm9yIHJlY3Vyc2l2ZWx5IGV4cGFuZGluZyBsaW5rZWQgbm90ZXMgKDEtMykuJyxcclxuICAgICAgICAgICAgICAgIHsgbWluOiAxLCBtYXg6IDMsIHN0ZXA6IDEgfSxcclxuICAgICAgICAgICAgICAgICgpID0+IHRoaXMucGx1Z2luLnNldHRpbmdzLm1heExpbmtFeHBhbnNpb25EZXB0aCA/PyAyLFxyXG4gICAgICAgICAgICAgICAgYXN5bmMgKHZhbHVlKSA9PiB7IHRoaXMucGx1Z2luLnNldHRpbmdzLm1heExpbmtFeHBhbnNpb25EZXB0aCA9IHZhbHVlOyBhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTsgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLmNyZWF0ZVRleHRTZXR0aW5nKGNvbnRhaW5lckVsLCAnQ2hhdCBOb3RlIEZvbGRlcicsICdGb2xkZXIgdG8gc2F2ZSBleHBvcnRlZCBjaGF0IG5vdGVzIChyZWxhdGl2ZSB0byB2YXVsdCByb290LCBsZWF2ZSBibGFuayBmb3Igcm9vdCknLCAnZS5nLiBBSSBDaGF0cycsXHJcbiAgICAgICAgICAgICgpID0+IHRoaXMucGx1Z2luLnNldHRpbmdzLmNoYXROb3RlRm9sZGVyID8/ICcnLFxyXG4gICAgICAgICAgICBhc3luYyAodmFsdWUpID0+IHsgdGhpcy5wbHVnaW4uc2V0dGluZ3MuY2hhdE5vdGVGb2xkZXIgPSB2YWx1ZSA/PyAnJzsgYXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7IH0sXHJcbiAgICAgICAgICAgIHsgdHJpbTogdHJ1ZSB9KTtcclxuXHJcbiAgICAgICAgdGhpcy5yZW5kZXJZYW1sQXR0cmlidXRlR2VuZXJhdG9ycyhjb250YWluZXJFbCk7XHJcbiAgICAgICAgdGhpcy5yZW5kZXJNb2RlbFNldHRpbmdQcmVzZXRzKGNvbnRhaW5lckVsKTtcclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IE15UGx1Z2luIGZyb20gXCIuLi8uLi9tYWluXCI7IC8vIEFkZGVkIGltcG9ydFxyXG5cclxuLyoqXHJcbiAqIFV0aWxpdHkgZm9yIGNyZWF0aW5nIGNvbGxhcHNpYmxlIHNlY3Rpb25zIHdpdGggY29uc2lzdGVudCBzdHlsaW5nXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgQ29sbGFwc2libGVTZWN0aW9uUmVuZGVyZXIge1xyXG4gICAgXHJcbiAgICAvKipcclxuICAgICAqIENyZWF0ZXMgYSBjb2xsYXBzaWJsZSBzZWN0aW9uIHdpdGggYSBoZWFkZXIgdGhhdCBjYW4gYmUgdG9nZ2xlZFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlQ29sbGFwc2libGVTZWN0aW9uKFxyXG4gICAgICAgIGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCwgXHJcbiAgICAgICAgdGl0bGU6IHN0cmluZywgLy8gV2lsbCBzZXJ2ZSBhcyB0aGUgc2VjdGlvbktleVxyXG4gICAgICAgIGNvbnRlbnRDYWxsYmFjazogKHNlY3Rpb25FbDogSFRNTEVsZW1lbnQpID0+IHZvaWQgfCBQcm9taXNlPHZvaWQ+LFxyXG4gICAgICAgIC8vIGV4cGFuZGVkOiBib29sZWFuID0gZmFsc2UsIC8vIFJlbW92ZWQsIHN0YXRlIGNvbWVzIGZyb20gc2V0dGluZ3NcclxuICAgICAgICBwbHVnaW46IE15UGx1Z2luLCAvLyBBZGRlZFxyXG4gICAgICAgIHNldHRpbmdzVHlwZTogJ2dlbmVyYWxTZWN0aW9uc0V4cGFuZGVkJyB8ICdwcm92aWRlckNvbmZpZ0V4cGFuZGVkJyAvLyBBZGRlZFxyXG4gICAgKTogdm9pZCB7XHJcbiAgICAgICAgLy8gRW5zdXJlIHRoZSBzZXR0aW5ncyBvYmplY3RzIGV4aXN0ICh0aGV5IHNob3VsZCBiZSBpbml0aWFsaXplZCBieSBERUZBVUxUX1NFVFRJTkdTKVxyXG4gICAgICAgIHBsdWdpbi5zZXR0aW5nc1tzZXR0aW5nc1R5cGVdID0gcGx1Z2luLnNldHRpbmdzW3NldHRpbmdzVHlwZV0gfHwge307XHJcblxyXG4gICAgICAgIC8vIFJlYWQgaW5pdGlhbCBzdGF0ZSBmcm9tIHNldHRpbmdzLCBkZWZhdWx0IHRvIGZhbHNlIChjb2xsYXBzZWQpIGlmIG5vdCBmb3VuZCBmb3IgdGhpcyBzcGVjaWZpYyB0aXRsZVxyXG4gICAgICAgIGxldCBpc0V4cGFuZGVkID0gKHBsdWdpbi5zZXR0aW5nc1tzZXR0aW5nc1R5cGVdIGFzIFJlY29yZDxzdHJpbmcsIGJvb2xlYW4+KVt0aXRsZV0gPz8gZmFsc2U7XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBjb2xsYXBzaWJsZSBjb250YWluZXJcclxuICAgICAgICBjb25zdCBjb2xsYXBzaWJsZUNvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdkaXYnKTtcclxuICAgICAgICBjb2xsYXBzaWJsZUNvbnRhaW5lci5hZGRDbGFzcygnYWktY29sbGFwc2libGUtc2VjdGlvbicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENyZWF0ZSBoZWFkZXIgdGhhdCBjYW4gYmUgY2xpY2tlZCB0byB0b2dnbGVcclxuICAgICAgICBjb25zdCBoZWFkZXJFbCA9IGNvbGxhcHNpYmxlQ29udGFpbmVyLmNyZWF0ZUVsKCdkaXYnKTtcclxuICAgICAgICBoZWFkZXJFbC5hZGRDbGFzcygnYWktY29sbGFwc2libGUtaGVhZGVyJyk7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgYXJyb3cgPSBoZWFkZXJFbC5jcmVhdGVFbCgnc3BhbicpO1xyXG4gICAgICAgIGFycm93LmFkZENsYXNzKCdhaS1jb2xsYXBzaWJsZS1hcnJvdycpO1xyXG4gICAgICAgIGFycm93LnRleHRDb250ZW50ID0gaXNFeHBhbmRlZCA/ICdcdTI1QkMnIDogJ1x1MjVCNic7XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgdGl0bGVTcGFuID0gaGVhZGVyRWwuY3JlYXRlRWwoJ3NwYW4nKTtcclxuICAgICAgICB0aXRsZVNwYW4udGV4dENvbnRlbnQgPSB0aXRsZTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDcmVhdGUgY29udGVudCBjb250YWluZXJcclxuICAgICAgICBjb25zdCBjb250ZW50RWwgPSBjb2xsYXBzaWJsZUNvbnRhaW5lci5jcmVhdGVFbCgnZGl2Jyk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdhaS1jb2xsYXBzaWJsZS1jb250ZW50Jyk7XHJcbiAgICAgICAgY29udGVudEVsLnN0eWxlLmRpc3BsYXkgPSBpc0V4cGFuZGVkID8gJ2Jsb2NrJyA6ICdub25lJztcclxuICAgICAgICBcclxuICAgICAgICAvLyBUb2dnbGUgZnVuY3Rpb25hbGl0eVxyXG4gICAgICAgIC8vIGxldCBpc0V4cGFuZGVkID0gZXhwYW5kZWQ7IC8vIFJlbW92ZWQsIGlzRXhwYW5kZWQgaXMgbm93IGZyb20gc2V0dGluZ3NcclxuICAgICAgICBoZWFkZXJFbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHsgLy8gTWFkZSBhc3luYyBmb3Igc2F2ZVNldHRpbmdzXHJcbiAgICAgICAgICAgIGlzRXhwYW5kZWQgPSAhaXNFeHBhbmRlZDtcclxuICAgICAgICAgICAgY29udGVudEVsLnN0eWxlLmRpc3BsYXkgPSBpc0V4cGFuZGVkID8gJ2Jsb2NrJyA6ICdub25lJztcclxuICAgICAgICAgICAgYXJyb3cudGV4dENvbnRlbnQgPSBpc0V4cGFuZGVkID8gJ1x1MjVCQycgOiAnXHUyNUI2JztcclxuXHJcbiAgICAgICAgICAgIC8vIFNhdmUgdGhlIHN0YXRlXHJcbiAgICAgICAgICAgIChwbHVnaW4uc2V0dGluZ3Nbc2V0dGluZ3NUeXBlXSBhcyBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPilbdGl0bGVdID0gaXNFeHBhbmRlZDtcclxuICAgICAgICAgICAgYXdhaXQgcGx1Z2luLnNhdmVTZXR0aW5ncygpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENhbGwgdGhlIGNvbnRlbnQgY2FsbGJhY2sgdG8gcG9wdWxhdGUgdGhlIHNlY3Rpb25cclxuICAgICAgICBjb25zdCByZXN1bHQgPSBjb250ZW50Q2FsbGJhY2soY29udGVudEVsKTtcclxuICAgICAgICBpZiAocmVzdWx0IGluc3RhbmNlb2YgUHJvbWlzZSkge1xyXG4gICAgICAgICAgICByZXN1bHQuY2F0Y2goZXJyb3IgPT4gY29uc29sZS5lcnJvcignRXJyb3IgaW4gY29sbGFwc2libGUgc2VjdGlvbjonLCBlcnJvcikpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgSXRlbVZpZXcsIFdvcmtzcGFjZUxlYWYsIE5vdGljZSwgTWFya2Rvd25SZW5kZXJlciwgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgTXlQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IE1lc3NhZ2UgfSBmcm9tICcuLi90eXBlcyc7XHJcbmltcG9ydCB7IGNyZWF0ZVByb3ZpZGVyLCBjcmVhdGVQcm92aWRlckZyb21VbmlmaWVkTW9kZWwgfSBmcm9tICcuLi8uLi9wcm92aWRlcnMnO1xyXG5pbXBvcnQgeyBDaGF0SGlzdG9yeU1hbmFnZXIsIENoYXRNZXNzYWdlIH0gZnJvbSAnLi9jaGF0L0NoYXRIaXN0b3J5TWFuYWdlcic7XHJcbmltcG9ydCB7IGNyZWF0ZU1lc3NhZ2VFbGVtZW50IH0gZnJvbSAnLi9jaGF0L01lc3NhZ2UnO1xyXG5pbXBvcnQgeyBjcmVhdGVDaGF0VUksIENoYXRVSUVsZW1lbnRzIH0gZnJvbSAnLi9jaGF0L3VpJztcclxuaW1wb3J0IHsgaGFuZGxlQ29weUFsbCwgaGFuZGxlU2F2ZU5vdGUsIGhhbmRsZUNsZWFyQ2hhdCwgaGFuZGxlU2V0dGluZ3MsIGhhbmRsZUhlbHAsIGhhbmRsZVJlZmVyZW5jZU5vdGUgfSBmcm9tICcuL2NoYXQvZXZlbnRIYW5kbGVycyc7XHJcbmltcG9ydCB7IHNhdmVDaGF0QXNOb3RlLCBsb2FkQ2hhdFlhbWxBbmRBcHBseVNldHRpbmdzIH0gZnJvbSAnLi9jaGF0L2NoYXRQZXJzaXN0ZW5jZSc7XHJcbmltcG9ydCB7IHJlbmRlckNoYXRIaXN0b3J5IH0gZnJvbSAnLi9jaGF0L2NoYXRIaXN0b3J5VXRpbHMnO1xyXG5pbXBvcnQgeyBDaGF0SGVscE1vZGFsIH0gZnJvbSAnLi9jaGF0L0NoYXRIZWxwTW9kYWwnO1xyXG5pbXBvcnQgeyBBZ2VudFJlc3BvbnNlSGFuZGxlciwgQWdlbnRDb250ZXh0IH0gZnJvbSAnLi9jaGF0L0FnZW50UmVzcG9uc2VIYW5kbGVyJztcclxuaW1wb3J0IHsgVG9vbENvbW1hbmQsIFRvb2xSZXN1bHQgfSBmcm9tICcuLi90eXBlcyc7XHJcblxyXG5leHBvcnQgY29uc3QgVklFV19UWVBFX0NIQVQgPSAnY2hhdC12aWV3JztcclxuXHJcbmV4cG9ydCBjbGFzcyBDaGF0VmlldyBleHRlbmRzIEl0ZW1WaWV3IHtcclxuICAgIHByaXZhdGUgcGx1Z2luOiBNeVBsdWdpbjtcclxuICAgIHByaXZhdGUgY2hhdEhpc3RvcnlNYW5hZ2VyOiBDaGF0SGlzdG9yeU1hbmFnZXI7XHJcbiAgICBwcml2YXRlIG1lc3NhZ2VzQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIHByaXZhdGUgaW5wdXRDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJpdmF0ZSBhY3RpdmVTdHJlYW06IEFib3J0Q29udHJvbGxlciB8IG51bGwgPSBudWxsO1xyXG4gICAgcHJpdmF0ZSByZWZlcmVuY2VOb3RlSW5kaWNhdG9yOiBIVE1MRWxlbWVudDsgLy8gQWRkIHRoaXMgcHJvcGVydHlcclxuICAgIHByaXZhdGUgYWdlbnRSZXNwb25zZUhhbmRsZXI6IEFnZW50UmVzcG9uc2VIYW5kbGVyIHwgbnVsbCA9IG51bGw7XHJcblxyXG4gICAgY29uc3RydWN0b3IobGVhZjogV29ya3NwYWNlTGVhZiwgcGx1Z2luOiBNeVBsdWdpbikge1xyXG4gICAgICAgIHN1cGVyKGxlYWYpO1xyXG4gICAgICAgIHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG4gICAgICAgIHRoaXMuY2hhdEhpc3RvcnlNYW5hZ2VyID0gbmV3IENoYXRIaXN0b3J5TWFuYWdlcih0aGlzLmFwcC52YXVsdCwgdGhpcy5wbHVnaW4ubWFuaWZlc3QuaWQsIFwiY2hhdC1oaXN0b3J5Lmpzb25cIik7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gVklFV19UWVBFX0NIQVQ7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0RGlzcGxheVRleHQoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ0FJIENoYXQnO1xyXG4gICAgfVxyXG5cclxuICAgIGdldEljb24oKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gJ21lc3NhZ2Utc3F1YXJlJztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdhaS1jaGF0LXZpZXcnKTtcclxuXHJcbiAgICAgICAgLy8gTG9hZCBwZXJzaXN0ZW50IGNoYXQgaGlzdG9yeSBiZWZvcmUgVUkgc2V0dXBcclxuICAgICAgICBsZXQgbG9hZGVkSGlzdG9yeTogQ2hhdE1lc3NhZ2VbXSA9IFtdO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGxvYWRlZEhpc3RvcnkgPSBhd2FpdCB0aGlzLmNoYXRIaXN0b3J5TWFuYWdlci5nZXRIaXN0b3J5KCk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIGxvYWQgY2hhdCBoaXN0b3J5LlwiKTtcclxuICAgICAgICAgICAgbG9hZGVkSGlzdG9yeSA9IFtdO1xyXG4gICAgICAgIH0gICAgICAgIC8vIE1vZHVsYXIgVUkgY3JlYXRpb25cclxuICAgICAgICBjb25zdCB1aTogQ2hhdFVJRWxlbWVudHMgPSBjcmVhdGVDaGF0VUkodGhpcy5hcHAsIGNvbnRlbnRFbCk7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lciA9IHVpLm1lc3NhZ2VzQ29udGFpbmVyO1xyXG4gICAgICAgIHRoaXMuaW5wdXRDb250YWluZXIgPSB1aS5pbnB1dENvbnRhaW5lcjtcclxuICAgICAgICB0aGlzLnJlZmVyZW5jZU5vdGVJbmRpY2F0b3IgPSB1aS5yZWZlcmVuY2VOb3RlSW5kaWNhdG9yO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIFVwZGF0ZSByZWZlcmVuY2Ugbm90ZSBpbmRpY2F0b3JcclxuICAgICAgICB0aGlzLnVwZGF0ZVJlZmVyZW5jZU5vdGVJbmRpY2F0b3IoKTtcclxuICAgICAgICBjb25zdCB0ZXh0YXJlYSA9IHVpLnRleHRhcmVhO1xyXG4gICAgICAgIGNvbnN0IHNlbmRCdXR0b24gPSB1aS5zZW5kQnV0dG9uO1xyXG4gICAgICAgIGNvbnN0IHN0b3BCdXR0b24gPSB1aS5zdG9wQnV0dG9uO1xyXG4gICAgICAgIC8vIEF0dGFjaCBldmVudCBoYW5kbGVyc1xyXG4gICAgICAgIHVpLmNvcHlBbGxCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVDb3B5QWxsKHRoaXMubWVzc2FnZXNDb250YWluZXIsIHRoaXMucGx1Z2luKSk7XHJcbiAgICAgICAgdWkuc2F2ZU5vdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVTYXZlTm90ZSh0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLCB0aGlzLnBsdWdpbiwgdGhpcy5hcHApKTsgICAgICAgIHVpLmNsZWFyQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlQ2xlYXJDaGF0KHRoaXMubWVzc2FnZXNDb250YWluZXIsIHRoaXMuY2hhdEhpc3RvcnlNYW5hZ2VyKSk7XHJcbiAgICAgICAgdWkuc2V0dGluZ3NCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVTZXR0aW5ncyh0aGlzLmFwcCwgdGhpcy5wbHVnaW4pKTtcclxuICAgICAgICB1aS5oZWxwQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgaGFuZGxlSGVscCh0aGlzLmFwcCkpO1xyXG4gICAgICAgIC8vIHVpLnJlZmVyZW5jZU5vdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBoYW5kbGVSZWZlcmVuY2VOb3RlKHRoaXMuYXBwLCB0aGlzLnBsdWdpbikpO1xyXG4gICAgICAgIHVpLnJlZmVyZW5jZU5vdGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLnNldHRpbmdzLnJlZmVyZW5jZUN1cnJlbnROb3RlID0gIXRoaXMucGx1Z2luLnNldHRpbmdzLnJlZmVyZW5jZUN1cnJlbnROb3RlO1xyXG4gICAgICAgICAgICB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuICAgICAgICAgICAgdGhpcy51cGRhdGVSZWZlcmVuY2VOb3RlSW5kaWNhdG9yKCk7XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gLS0tIEFHRU5UIE1PREUgSU5URUdSQVRJT04gLS0tXHJcbiAgICAgICAgLy8gSW5pdGlhbGl6ZSBhZ2VudCByZXNwb25zZSBoYW5kbGVyXHJcbiAgICAgICAgdGhpcy5hZ2VudFJlc3BvbnNlSGFuZGxlciA9IG5ldyBBZ2VudFJlc3BvbnNlSGFuZGxlcih7XHJcbiAgICAgICAgICAgIGFwcDogdGhpcy5hcHAsXHJcbiAgICAgICAgICAgIHBsdWdpbjogdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgICAgIG1lc3NhZ2VzQ29udGFpbmVyOiB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLFxyXG4gICAgICAgICAgICBvblRvb2xSZXN1bHQ6ICh0b29sUmVzdWx0OiBUb29sUmVzdWx0LCBjb21tYW5kOiBUb29sQ29tbWFuZCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgLy8gSGFuZGxlIHRvb2wgcmVzdWx0cyAoY291bGQgZGlzcGxheSBpbmxpbmUgbm90aWZpY2F0aW9ucywgZXRjLilcclxuICAgICAgICAgICAgICAgIGlmICh0b29sUmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhgVG9vbCAke2NvbW1hbmQuYWN0aW9ufSBjb21wbGV0ZWQgc3VjY2Vzc2Z1bGx5YCwgdG9vbFJlc3VsdC5kYXRhKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihgVG9vbCAke2NvbW1hbmQuYWN0aW9ufSBmYWlsZWQ6YCwgdG9vbFJlc3VsdC5lcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gQWdlbnQgbW9kZSBidXR0b24gaGFuZGxlclxyXG4gICAgICAgIHVpLmFnZW50TW9kZUJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgaXNDdXJyZW50bHlFbmFibGVkID0gdGhpcy5wbHVnaW4uaXNBZ2VudE1vZGVFbmFibGVkKCk7XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMucGx1Z2luLnNldEFnZW50TW9kZUVuYWJsZWQoIWlzQ3VycmVudGx5RW5hYmxlZCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAodGhpcy5wbHVnaW4uaXNBZ2VudE1vZGVFbmFibGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIHVpLmFnZW50TW9kZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHVpLmFnZW50TW9kZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgJ0FnZW50IE1vZGU6IE9OIC0gQUkgY2FuIHVzZSB0b29scycpO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQWdlbnQgTW9kZSBlbmFibGVkIC0gQUkgY2FuIG5vdyB1c2UgdG9vbHMnKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gUmVzZXQgZXhlY3V0aW9uIGNvdW50IGZvciBuZXcgc2Vzc2lvblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuYWdlbnRSZXNwb25zZUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFnZW50UmVzcG9uc2VIYW5kbGVyLnJlc2V0RXhlY3V0aW9uQ291bnQoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHVpLmFnZW50TW9kZUJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgICAgIHVpLmFnZW50TW9kZUJ1dHRvbi5zZXRBdHRyaWJ1dGUoJ3RpdGxlJywgJ0FnZW50IE1vZGU6IE9GRiAtIFJlZ3VsYXIgY2hhdCcpO1xyXG4gICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnQWdlbnQgTW9kZSBkaXNhYmxlZCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIC8vIEluaXRpYWxpemUgYnV0dG9uIHN0YXRlXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLmlzQWdlbnRNb2RlRW5hYmxlZCgpKSB7XHJcbiAgICAgICAgICAgIHVpLmFnZW50TW9kZUJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdhY3RpdmUnKTtcclxuICAgICAgICAgICAgdWkuYWdlbnRNb2RlQnV0dG9uLnNldEF0dHJpYnV0ZSgndGl0bGUnLCAnQWdlbnQgTW9kZTogT04gLSBBSSBjYW4gdXNlIHRvb2xzJyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdWkuYWdlbnRNb2RlQnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB1aS5hZ2VudE1vZGVCdXR0b24uc2V0QXR0cmlidXRlKCd0aXRsZScsICdBZ2VudCBNb2RlOiBPRkYgLSBSZWd1bGFyIGNoYXQnKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gQWxsIHN0eWxpbmcgZm9yIG1lc3NhZ2VzQ29udGFpbmVyIGFuZCB0ZXh0YXJlYSBpcyBoYW5kbGVkIGJ5IENTU1xyXG5cclxuICAgICAgICAvLyAtLS0gSEFORExFIFNFTkQgTUVTU0FHRSAtLS1cclxuICAgICAgICBjb25zdCBzZW5kTWVzc2FnZSA9IGFzeW5jICgpID0+IHtcclxuICAgICAgICAgICAgY29uc3QgY29udGVudCA9IHRleHRhcmVhLnZhbHVlLnRyaW0oKTtcclxuICAgICAgICAgICAgaWYgKCFjb250ZW50KSByZXR1cm47XHJcblxyXG4gICAgICAgICAgICAvLyBEaXNhYmxlIGlucHV0IGFuZCBzaG93IHN0b3AgYnV0dG9uXHJcbiAgICAgICAgICAgIHRleHRhcmVhLmRpc2FibGVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgc2VuZEJ1dHRvbi5jbGFzc0xpc3QuYWRkKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgc3RvcEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZCB1c2VyIG1lc3NhZ2VcclxuICAgICAgICAgICAgY29uc3QgdXNlck1lc3NhZ2VFbCA9IGF3YWl0IGNyZWF0ZU1lc3NhZ2VFbGVtZW50KHRoaXMuYXBwLCAndXNlcicsIGNvbnRlbnQsIHRoaXMuY2hhdEhpc3RvcnlNYW5hZ2VyLCB0aGlzLnBsdWdpbiwgKGVsKSA9PiB0aGlzLnJlZ2VuZXJhdGVSZXNwb25zZShlbCksIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLmFwcGVuZENoaWxkKHVzZXJNZXNzYWdlRWwpO1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9ICcnO1xyXG5cclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIC8vIEJ1aWxkIGNvbnRleHQgYW5kIGdldCBjaGF0IGhpc3RvcnlcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VzID0gYXdhaXQgdGhpcy5idWlsZENvbnRleHRNZXNzYWdlcygpO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIEdldCBhbGwgZXhpc3RpbmcgbWVzc2FnZXNcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2VFbGVtZW50cyA9IHRoaXMubWVzc2FnZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmFpLWNoYXQtbWVzc2FnZScpO1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZUVsZW1lbnRzLmZvckVhY2goZWwgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHJvbGUgPSBlbC5jbGFzc0xpc3QuY29udGFpbnMoJ3VzZXInKSA/ICd1c2VyJyA6ICdhc3Npc3RhbnQnO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSBlbC5xdWVyeVNlbGVjdG9yKCcubWVzc2FnZS1jb250ZW50Jyk/LnRleHRDb250ZW50IHx8ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzLnB1c2goeyByb2xlLCBjb250ZW50IH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gQ3JlYXRlIHRlbXBvcmFyeSBjb250YWluZXIgZm9yIHN0cmVhbWluZyBkaXNwbGF5XHJcbiAgICAgICAgICAgICAgICBjb25zdCB0ZW1wQ29udGFpbmVyID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICB0ZW1wQ29udGFpbmVyLmFkZENsYXNzKCdhaS1jaGF0LW1lc3NhZ2UnLCAnYXNzaXN0YW50Jyk7XHJcbiAgICAgICAgICAgICAgICB0ZW1wQ29udGFpbmVyLmNyZWF0ZURpdignbWVzc2FnZS1jb250ZW50Jyk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLmFwcGVuZENoaWxkKHRlbXBDb250YWluZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxUb3AgPSB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbEhlaWdodDtcclxuXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXNwb25zZUNvbnRlbnQgPSBhd2FpdCB0aGlzLnN0cmVhbUFzc2lzdGFudFJlc3BvbnNlKG1lc3NhZ2VzLCB0ZW1wQ29udGFpbmVyKTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgdGVtcG9yYXJ5IGNvbnRhaW5lciBhbmQgY3JlYXRlIHBlcm1hbmVudCBtZXNzYWdlXHJcbiAgICAgICAgICAgICAgICB0ZW1wQ29udGFpbmVyLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3BvbnNlQ29udGVudC50cmltKCkgIT09IFwiXCIpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtZXNzYWdlRWwgPSBhd2FpdCBjcmVhdGVNZXNzYWdlRWxlbWVudCh0aGlzLmFwcCwgJ2Fzc2lzdGFudCcsIHJlc3BvbnNlQ29udGVudCwgdGhpcy5jaGF0SGlzdG9yeU1hbmFnZXIsIHRoaXMucGx1Z2luLCAoZWwpID0+IHRoaXMucmVnZW5lcmF0ZVJlc3BvbnNlKGVsKSwgdGhpcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5hcHBlbmRDaGlsZChtZXNzYWdlRWwpO1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IHRoaXMuY2hhdEhpc3RvcnlNYW5hZ2VyLmFkZE1lc3NhZ2Uoe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IG1lc3NhZ2VFbC5kYXRhc2V0LnRpbWVzdGFtcCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlbmRlcjogJ2Fzc2lzdGFudCcsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IHJlc3BvbnNlQ29udGVudFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgaWYgKGVycm9yLm5hbWUgIT09ICdBYm9ydEVycm9yJykge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY3JlYXRlTWVzc2FnZUVsZW1lbnQodGhpcy5hcHAsICdhc3Npc3RhbnQnLCBgRXJyb3I6ICR7ZXJyb3IubWVzc2FnZX1gLCB0aGlzLmNoYXRIaXN0b3J5TWFuYWdlciwgdGhpcy5wbHVnaW4sIChlbCkgPT4gdGhpcy5yZWdlbmVyYXRlUmVzcG9uc2UoZWwpLCB0aGlzKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBmaW5hbGx5IHtcclxuICAgICAgICAgICAgICAgIC8vIFJlLWVuYWJsZSBpbnB1dCBhbmQgaGlkZSBzdG9wIGJ1dHRvblxyXG4gICAgICAgICAgICAgICAgdGV4dGFyZWEuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRleHRhcmVhLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICBzdG9wQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgc2VuZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtID0gbnVsbDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIC8vIC0tLSBCVVRUT04gRVZFTlQgTElTVEVORVJTIC0tLVxyXG4gICAgICAgIHNlbmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBzZW5kTWVzc2FnZSk7XHJcbiAgICAgICAgc3RvcEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuYWN0aXZlU3RyZWFtKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbS5hYm9ydCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5hY3RpdmVTdHJlYW0gPSBudWxsO1xyXG4gICAgICAgICAgICAgICAgdGV4dGFyZWEuZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRleHRhcmVhLmZvY3VzKCk7XHJcbiAgICAgICAgICAgICAgICBzdG9wQnV0dG9uLmNsYXNzTGlzdC5hZGQoJ2hpZGRlbicpO1xyXG4gICAgICAgICAgICAgICAgc2VuZEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW4nKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICAvLyBNb2R1bGFyIGlucHV0IGhhbmRsZXIgZm9yIHNsYXNoIGNvbW1hbmRzIGFuZCBrZXlib2FyZCBzaG9ydGN1dHNcclxuICAgICAgICAvLyAoc2V0dXBJbnB1dEhhbmRsZXIgd2lsbCBiZSBpbXBvcnRlZCBmcm9tICcuL2NoYXQvaW5wdXRIYW5kbGVyJylcclxuICAgICAgICAvLyBAdHMtaWdub3JlXHJcbiAgICAgICAgaW1wb3J0KCcuL2NoYXQvaW5wdXRIYW5kbGVyJykudGhlbigoeyBzZXR1cElucHV0SGFuZGxlciB9KSA9PiB7XHJcbiAgICAgICAgICAgIHNldHVwSW5wdXRIYW5kbGVyKFxyXG4gICAgICAgICAgICAgICAgdGV4dGFyZWEsXHJcbiAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZSxcclxuICAgICAgICAgICAgICAgIGFzeW5jIChjbWQ6IHN0cmluZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN3aXRjaCAoY21kKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJy9jbGVhcic6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5jbGVhckJ1dHRvbi5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJy9jb3B5JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLmNvcHlBbGxCdXR0b24uY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICcvc2F2ZSc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5zYXZlTm90ZUJ1dHRvbi5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJy9zZXR0aW5ncyc6XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB1aS5zZXR0aW5nc0J1dHRvbi5jbGljaygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJy9oZWxwJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLmhlbHBCdXR0b24uY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICcvcmVmJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHVpLnJlZmVyZW5jZU5vdGVCdXR0b24uY2xpY2soKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcCxcclxuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLFxyXG4gICAgICAgICAgICAgICAgc2VuZEJ1dHRvbixcclxuICAgICAgICAgICAgICAgIHN0b3BCdXR0b25cclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgLy8gUmVuZGVyIGxvYWRlZCBjaGF0IGhpc3RvcnlcclxuICAgICAgICBpZiAobG9hZGVkSGlzdG9yeS5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuZW1wdHkoKTtcclxuICAgICAgICAgICAgLy8gSWYgbG9hZGluZyBmcm9tIGEgbm90ZSwgY2hlY2sgZm9yIFlBTUwgZnJvbnRtYXR0ZXIgYW5kIHVwZGF0ZSBzZXR0aW5nc1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuICAgICAgICAgICAgaWYgKGZpbGUpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGxvYWRDaGF0WWFtbEFuZEFwcGx5U2V0dGluZ3Moe1xyXG4gICAgICAgICAgICAgICAgICAgIGFwcDogdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICAgICAgICAgcGx1Z2luOiB0aGlzLnBsdWdpbixcclxuICAgICAgICAgICAgICAgICAgICBzZXR0aW5nczogdGhpcy5wbHVnaW4uc2V0dGluZ3MsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgYXdhaXQgcmVuZGVyQ2hhdEhpc3Rvcnkoe1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZXNDb250YWluZXI6IHRoaXMubWVzc2FnZXNDb250YWluZXIsXHJcbiAgICAgICAgICAgICAgICBsb2FkZWRIaXN0b3J5LFxyXG4gICAgICAgICAgICAgICAgY2hhdEhpc3RvcnlNYW5hZ2VyOiB0aGlzLmNoYXRIaXN0b3J5TWFuYWdlcixcclxuICAgICAgICAgICAgICAgIHBsdWdpbjogdGhpcy5wbHVnaW4sXHJcbiAgICAgICAgICAgICAgICByZWdlbmVyYXRlUmVzcG9uc2U6IChlbCkgPT4gdGhpcy5yZWdlbmVyYXRlUmVzcG9uc2UoZWwpLFxyXG4gICAgICAgICAgICAgICAgc2Nyb2xsVG9Cb3R0b206IHRydWVcclxuICAgICAgICAgICAgfSk7ICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMudXBkYXRlUmVmZXJlbmNlTm90ZUluZGljYXRvcigpOyAvLyBVcGRhdGUgaW5kaWNhdG9yIG9uIG9wZW5cclxuICAgICAgICBcclxuICAgICAgICAvLyBMaXN0ZW4gZm9yIGFjdGl2ZSBmaWxlIGNoYW5nZXMgdG8gdXBkYXRlIHRoZSBpbmRpY2F0b3JcclxuICAgICAgICB0aGlzLnJlZ2lzdGVyRXZlbnQodGhpcy5hcHAud29ya3NwYWNlLm9uKCdhY3RpdmUtbGVhZi1jaGFuZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMudXBkYXRlUmVmZXJlbmNlTm90ZUluZGljYXRvcigpO1xyXG4gICAgICAgIH0pKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBMaXN0ZW4gZm9yIHNldHRpbmdzIGNoYW5nZXMgdG8gdXBkYXRlIHRoZSBpbmRpY2F0b3IgIFxyXG4gICAgICAgIHRoaXMucGx1Z2luLm9uU2V0dGluZ3NDaGFuZ2UoKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLnVwZGF0ZVJlZmVyZW5jZU5vdGVJbmRpY2F0b3IoKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGFzeW5jIGFkZE1lc3NhZ2Uocm9sZTogJ3VzZXInIHwgJ2Fzc2lzdGFudCcsIGNvbnRlbnQ6IHN0cmluZywgaXNFcnJvcjogYm9vbGVhbiA9IGZhbHNlKSB7XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZUVsID0gYXdhaXQgY3JlYXRlTWVzc2FnZUVsZW1lbnQodGhpcy5hcHAsIHJvbGUsIGNvbnRlbnQsIHRoaXMuY2hhdEhpc3RvcnlNYW5hZ2VyLCB0aGlzLnBsdWdpbiwgKGVsKSA9PiB0aGlzLnJlZ2VuZXJhdGVSZXNwb25zZShlbCksIHRoaXMpO1xyXG4gICAgICAgIC8vIFRoZSB0aW1lc3RhbXAgZm9yIHRoZSBVSSBlbGVtZW50IGlzIHNldCB3aXRoaW4gY3JlYXRlTWVzc2FnZUVsZW1lbnRcclxuICAgICAgICBjb25zdCB1aVRpbWVzdGFtcCA9IG1lc3NhZ2VFbC5kYXRhc2V0LnRpbWVzdGFtcCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCk7IC8vIEZhbGxiYWNrLCB0aG91Z2ggY3JlYXRlTWVzc2FnZUVsZW1lbnQgc2hvdWxkIHNldCBpdFxyXG4gICAgICAgIFxyXG4gICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuYXBwZW5kQ2hpbGQobWVzc2FnZUVsKTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xyXG5cclxuICAgICAgICAvLyBQZXJzaXN0IHRoZSBtZXNzYWdlLCB1c2luZyB0aGUgdGltZXN0YW1wIGZyb20gdGhlIFVJIGVsZW1lbnQgZm9yIGNvbnNpc3RlbmN5XHJcbiAgICAgICAgLy8gdW5sZXNzIGl0J3MgYW4gZXJyb3IgbWVzc2FnZSB0aGF0IHNob3VsZG4ndCBiZSBwZXJzaXN0ZWQgYXMgYSByZWd1bGFyIGNoYXQgZW50cnkuXHJcbiAgICAgICAgLy8gSG93ZXZlciwgdGhlIGN1cnJlbnQgcmVxdWlyZW1lbnQgaXMgdG8gcGVyc2lzdCBlcnJvciBtZXNzYWdlcyB0b28uXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgYXdhaXQgdGhpcy5jaGF0SGlzdG9yeU1hbmFnZXIuYWRkTWVzc2FnZSh7XHJcbiAgICAgICAgICAgICAgICB0aW1lc3RhbXA6IHVpVGltZXN0YW1wLCBcclxuICAgICAgICAgICAgICAgIHNlbmRlcjogcm9sZSxcclxuICAgICAgICAgICAgICAgIGNvbnRlbnRcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKFwiRmFpbGVkIHRvIHNhdmUgY2hhdCBtZXNzYWdlOiBcIiArIGUubWVzc2FnZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIG9uQ2xvc2UoKSB7XHJcbiAgICAgICAgaWYgKHRoaXMuYWN0aXZlU3RyZWFtKSB7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtLmFib3J0KCk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyByZWdlbmVyYXRlUmVzcG9uc2UobWVzc2FnZUVsOiBIVE1MRWxlbWVudCkge1xyXG4gICAgICAgIC8vIERpc2FibGUgaW5wdXQgZHVyaW5nIHJlZ2VuZXJhdGlvblxyXG4gICAgICAgIGNvbnN0IHRleHRhcmVhID0gdGhpcy5pbnB1dENvbnRhaW5lci5xdWVyeVNlbGVjdG9yKCd0ZXh0YXJlYScpO1xyXG4gICAgICAgIGlmICh0ZXh0YXJlYSkgdGV4dGFyZWEuZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAvLyBGaW5kIGFsbCBtZXNzYWdlIGVsZW1lbnRzXHJcbiAgICAgICAgY29uc3QgYWxsTWVzc2FnZXMgPSBBcnJheS5mcm9tKHRoaXMubWVzc2FnZXNDb250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnLmFpLWNoYXQtbWVzc2FnZScpKTtcclxuICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSBhbGxNZXNzYWdlcy5pbmRleE9mKG1lc3NhZ2VFbCk7XHJcbiAgICAgICAgY29uc3QgaXNVc2VyQ2xpY2tlZCA9IG1lc3NhZ2VFbC5jbGFzc0xpc3QuY29udGFpbnMoJ3VzZXInKTtcclxuXHJcbiAgICAgICAgLy8gRmluZCB0aGUgdGFyZ2V0IEFJIG1lc3NhZ2UgdG8gb3ZlcndyaXRlXHJcbiAgICAgICAgbGV0IHRhcmdldEluZGV4ID0gLTE7XHJcbiAgICAgICAgaWYgKGlzVXNlckNsaWNrZWQpIHtcclxuICAgICAgICAgICAgLy8gSWYgdXNlciBtZXNzYWdlOiBmaW5kIHRoZSBuZXh0IEFJIG1lc3NhZ2UgYWZ0ZXIgdGhpcyB1c2VyIG1lc3NhZ2VcclxuICAgICAgICAgICAgZm9yIChsZXQgaSA9IGN1cnJlbnRJbmRleCArIDE7IGkgPCBhbGxNZXNzYWdlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICAgICAgaWYgKGFsbE1lc3NhZ2VzW2ldLmNsYXNzTGlzdC5jb250YWlucygnYXNzaXN0YW50JykpIHtcclxuICAgICAgICAgICAgICAgICAgICB0YXJnZXRJbmRleCA9IGk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYWxsTWVzc2FnZXNbaV0uY2xhc3NMaXN0LmNvbnRhaW5zKCd1c2VyJykpIHtcclxuICAgICAgICAgICAgICAgICAgICBicmVhazsgLy8gU3RvcCBpZiBhbm90aGVyIHVzZXIgbWVzc2FnZSBpcyBmb3VuZCBmaXJzdFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gSWYgQUkgbWVzc2FnZTogdGFyZ2V0IGlzIHRoaXMgbWVzc2FnZVxyXG4gICAgICAgICAgICB0YXJnZXRJbmRleCA9IGN1cnJlbnRJbmRleDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEdhdGhlciBjb250ZXh0IHVwIHRvIGFuZCBpbmNsdWRpbmcgdGhlIHJlbGV2YW50IHVzZXIgbWVzc2FnZVxyXG4gICAgICAgIGxldCB1c2VyTXNnSW5kZXggPSBjdXJyZW50SW5kZXg7XHJcbiAgICAgICAgaWYgKCFpc1VzZXJDbGlja2VkKSB7XHJcbiAgICAgICAgICAgIHVzZXJNc2dJbmRleCA9IGN1cnJlbnRJbmRleCAtIDE7XHJcbiAgICAgICAgICAgIHdoaWxlICh1c2VyTXNnSW5kZXggPj0gMCAmJiAhYWxsTWVzc2FnZXNbdXNlck1zZ0luZGV4XS5jbGFzc0xpc3QuY29udGFpbnMoJ3VzZXInKSkge1xyXG4gICAgICAgICAgICAgICAgdXNlck1zZ0luZGV4LS07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIEJ1aWxkIGNvbnRleHQgbWVzc2FnZXMgYW5kIGluY2x1ZGUgcHJpb3IgY2hhdCBoaXN0b3J5XHJcbiAgICAgICAgY29uc3QgbWVzc2FnZXMgPSBhd2FpdCB0aGlzLmJ1aWxkQ29udGV4dE1lc3NhZ2VzKCk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gdXNlck1zZ0luZGV4OyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3QgZWwgPSBhbGxNZXNzYWdlc1tpXTtcclxuICAgICAgICAgICAgY29uc3Qgcm9sZSA9IGVsLmNsYXNzTGlzdC5jb250YWlucygndXNlcicpID8gJ3VzZXInIDogJ2Fzc2lzdGFudCc7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvbnRlbnQgPSAoZWwgYXMgSFRNTEVsZW1lbnQpLmRhdGFzZXQucmF3Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGUsIGNvbnRlbnQgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBSZW1vdmUgdGhlIG9sZCBBSSBtZXNzYWdlIGlmIG92ZXJ3cml0aW5nXHJcbiAgICAgICAgbGV0IG9yaWdpbmFsVGltZXN0YW1wID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpO1xyXG4gICAgICAgIGxldCBvcmlnaW5hbENvbnRlbnQgPSAnJztcclxuICAgICAgICBsZXQgaW5zZXJ0QWZ0ZXJOb2RlOiBIVE1MRWxlbWVudCB8IG51bGwgPSBudWxsO1xyXG4gICAgICAgIGlmICh0YXJnZXRJbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgY29uc3QgdGFyZ2V0RWwgPSBhbGxNZXNzYWdlc1t0YXJnZXRJbmRleF0gYXMgSFRNTEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsVGltZXN0YW1wID0gdGFyZ2V0RWwuZGF0YXNldC50aW1lc3RhbXAgfHwgb3JpZ2luYWxUaW1lc3RhbXA7XHJcbiAgICAgICAgICAgIG9yaWdpbmFsQ29udGVudCA9IHRhcmdldEVsLmRhdGFzZXQucmF3Q29udGVudCB8fCAnJztcclxuICAgICAgICAgICAgaW5zZXJ0QWZ0ZXJOb2RlID0gdGFyZ2V0RWwucHJldmlvdXNFbGVtZW50U2libGluZyBhcyBIVE1MRWxlbWVudDtcclxuICAgICAgICAgICAgdGFyZ2V0RWwucmVtb3ZlKCk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChpc1VzZXJDbGlja2VkKSB7XHJcbiAgICAgICAgICAgIC8vIE5vIEFJIG1lc3NhZ2UgdG8gb3ZlcndyaXRlLCBpbnNlcnQgYWZ0ZXIgdXNlciBtZXNzYWdlXHJcbiAgICAgICAgICAgIGluc2VydEFmdGVyTm9kZSA9IG1lc3NhZ2VFbDtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAvLyBObyB1c2VyIG1lc3NhZ2UgZm91bmQsIGluc2VydCBhdCB0b3BcclxuICAgICAgICAgICAgaW5zZXJ0QWZ0ZXJOb2RlID0gbnVsbDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIENyZWF0ZSBuZXcgYXNzaXN0YW50IG1lc3NhZ2UgY29udGFpbmVyIGZvciBzdHJlYW1pbmdcclxuICAgICAgICBjb25zdCBhc3Npc3RhbnRDb250YWluZXIgPSBhd2FpdCBjcmVhdGVNZXNzYWdlRWxlbWVudCh0aGlzLmFwcCwgJ2Fzc2lzdGFudCcsICcnLCB0aGlzLmNoYXRIaXN0b3J5TWFuYWdlciwgdGhpcy5wbHVnaW4sIChlbCkgPT4gdGhpcy5yZWdlbmVyYXRlUmVzcG9uc2UoZWwpLCB0aGlzKTtcclxuICAgICAgICBhc3Npc3RhbnRDb250YWluZXIuZGF0YXNldC50aW1lc3RhbXAgPSBvcmlnaW5hbFRpbWVzdGFtcDtcclxuICAgICAgICBpZiAoaW5zZXJ0QWZ0ZXJOb2RlICYmIGluc2VydEFmdGVyTm9kZS5uZXh0U2libGluZykge1xyXG4gICAgICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLmluc2VydEJlZm9yZShhc3Npc3RhbnRDb250YWluZXIsIGluc2VydEFmdGVyTm9kZS5uZXh0U2libGluZyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5hcHBlbmRDaGlsZChhc3Npc3RhbnRDb250YWluZXIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLnN0cmVhbUFzc2lzdGFudFJlc3BvbnNlKG1lc3NhZ2VzLCBhc3Npc3RhbnRDb250YWluZXIsIG9yaWdpbmFsVGltZXN0YW1wLCBvcmlnaW5hbENvbnRlbnQpO1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvci5uYW1lICE9PSAnQWJvcnRFcnJvcicpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yOiAke2Vycm9yLm1lc3NhZ2V9YCk7XHJcbiAgICAgICAgICAgICAgICBhc3Npc3RhbnRDb250YWluZXIucmVtb3ZlKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGZpbmFsbHkge1xyXG4gICAgICAgICAgICBpZiAodGV4dGFyZWEpIHtcclxuICAgICAgICAgICAgICAgIHRleHRhcmVhLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICB0ZXh0YXJlYS5mb2N1cygpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aXZlU3RyZWFtID0gbnVsbDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSB1cGRhdGVSZWZlcmVuY2VOb3RlSW5kaWNhdG9yKCkge1xyXG4gICAgICAgIGlmICghdGhpcy5yZWZlcmVuY2VOb3RlSW5kaWNhdG9yKSByZXR1cm47XHJcbiAgICAgICAgXHJcbiAgICAgICAgY29uc3QgY3VycmVudEZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG4gICAgICAgIGNvbnN0IGlzUmVmZXJlbmNlRW5hYmxlZCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnJlZmVyZW5jZUN1cnJlbnROb3RlO1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbiA9IHRoaXMucmVmZXJlbmNlTm90ZUluZGljYXRvci5wcmV2aW91c0VsZW1lbnRTaWJsaW5nIGFzIEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgICAgIGlmIChpc1JlZmVyZW5jZUVuYWJsZWQgJiYgY3VycmVudEZpbGUpIHtcclxuICAgICAgICAgICAgdGhpcy5yZWZlcmVuY2VOb3RlSW5kaWNhdG9yLnNldFRleHQoYFx1RDgzRFx1RENERCBSZWZlcmVuY2luZzogJHtjdXJyZW50RmlsZS5iYXNlbmFtZX1gKTtcclxuICAgICAgICAgICAgdGhpcy5yZWZlcmVuY2VOb3RlSW5kaWNhdG9yLnN0eWxlLmRpc3BsYXkgPSAnYmxvY2snO1xyXG4gICAgICAgICAgICBpZiAoYnV0dG9uICYmIGJ1dHRvbi5nZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnKSA9PT0gJ1RvZ2dsZSByZWZlcmVuY2luZyBjdXJyZW50IG5vdGUnKSB7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uc2V0VGV4dCgnXHVEODNEXHVEQ0REJyk7XHJcbiAgICAgICAgICAgICAgICBidXR0b24uY2xhc3NMaXN0LmFkZCgnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnJlZmVyZW5jZU5vdGVJbmRpY2F0b3Iuc3R5bGUuZGlzcGxheSA9ICdub25lJztcclxuICAgICAgICAgICAgaWYgKGJ1dHRvbiAmJiBidXR0b24uZ2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJykgPT09ICdUb2dnbGUgcmVmZXJlbmNpbmcgY3VycmVudCBub3RlJykge1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLnNldFRleHQoJ1x1RDgzRFx1RENERCcpO1xyXG4gICAgICAgICAgICAgICAgYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgYnVpbGRDb250ZXh0TWVzc2FnZXMoKTogUHJvbWlzZTxNZXNzYWdlW10+IHtcclxuICAgICAgICBjb25zdCBtZXNzYWdlczogTWVzc2FnZVtdID0gW1xyXG4gICAgICAgICAgICB7IHJvbGU6ICdzeXN0ZW0nLCBjb250ZW50OiB0aGlzLnBsdWdpbi5nZXRTeXN0ZW1NZXNzYWdlKCkgfVxyXG4gICAgICAgIF07XHJcblxyXG4gICAgICAgIC8vIEFkZCBjb250ZXh0IG5vdGVzIGlmIGVuYWJsZWRcclxuICAgICAgICBpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MuZW5hYmxlQ29udGV4dE5vdGVzICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbnRleHROb3Rlcykge1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0Q29udGVudCA9IGF3YWl0IHRoaXMucGx1Z2luLmdldENvbnRleHROb3Rlc0NvbnRlbnQodGhpcy5wbHVnaW4uc2V0dGluZ3MuY29udGV4dE5vdGVzKTtcclxuICAgICAgICAgICAgbWVzc2FnZXNbMF0uY29udGVudCArPSBgXFxuXFxuQ29udGV4dCBOb3RlczpcXG4ke2NvbnRleHRDb250ZW50fWA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBBZGQgY3VycmVudCBub3RlIGNvbnRlbnQgaWYgZW5hYmxlZFxyXG4gICAgICAgIGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZWZlcmVuY2VDdXJyZW50Tm90ZSkge1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RmlsZSA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRBY3RpdmVGaWxlKCk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50RmlsZSkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgY3VycmVudE5vdGVDb250ZW50ID0gYXdhaXQgdGhpcy5hcHAudmF1bHQuY2FjaGVkUmVhZChjdXJyZW50RmlsZSk7XHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICByb2xlOiAnc3lzdGVtJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBgSGVyZSBpcyB0aGUgY29udGVudCBvZiB0aGUgY3VycmVudCBub3RlOlxcblxcbiR7Y3VycmVudE5vdGVDb250ZW50fWBcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gbWVzc2FnZXM7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBzdHJlYW1Bc3Npc3RhbnRSZXNwb25zZShcclxuICAgICAgICBtZXNzYWdlczogTWVzc2FnZVtdLFxyXG4gICAgICAgIGNvbnRhaW5lcjogSFRNTEVsZW1lbnQsXHJcbiAgICAgICAgb3JpZ2luYWxUaW1lc3RhbXA/OiBzdHJpbmcsXHJcbiAgICAgICAgb3JpZ2luYWxDb250ZW50Pzogc3RyaW5nXHJcbiAgICApOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgICAgIGxldCByZXNwb25zZUNvbnRlbnQgPSAnJztcclxuICAgICAgICB0aGlzLmFjdGl2ZVN0cmVhbSA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKTtcclxuXHJcbiAgICAgICAgLy8gQWRkIGFnZW50IHN5c3RlbSBwcm9tcHQgaWYgYWdlbnQgbW9kZSBpcyBlbmFibGVkXHJcbiAgICAgICAgaWYgKHRoaXMucGx1Z2luLmlzQWdlbnRNb2RlRW5hYmxlZCgpKSB7XHJcbiAgICAgICAgICAgIC8vIEltcG9ydCBhZ2VudCBzeXN0ZW0gcHJvbXB0IGFuZCBwcmVwZW5kIHRvIHN5c3RlbSBtZXNzYWdlXHJcbiAgICAgICAgICAgIGNvbnN0IHsgQUdFTlRfU1lTVEVNX1BST01QVCB9ID0gYXdhaXQgaW1wb3J0KCcuLi9wcm9tcHRDb25zdGFudHMnKTtcclxuICAgICAgICAgICAgY29uc3Qgc3lzdGVtTWVzc2FnZUluZGV4ID0gbWVzc2FnZXMuZmluZEluZGV4KG1zZyA9PiBtc2cucm9sZSA9PT0gJ3N5c3RlbScpO1xyXG4gICAgICAgICAgICBpZiAoc3lzdGVtTWVzc2FnZUluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZXNbc3lzdGVtTWVzc2FnZUluZGV4XS5jb250ZW50ID0gQUdFTlRfU1lTVEVNX1BST01QVCArICdcXG5cXG4nICsgbWVzc2FnZXNbc3lzdGVtTWVzc2FnZUluZGV4XS5jb250ZW50O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAvLyBVc2UgdW5pZmllZCBtb2RlbCBpZiBhdmFpbGFibGUsIGZhbGxiYWNrIHRvIGxlZ2FjeSBwcm92aWRlciBzZWxlY3Rpb25cclxuICAgICAgICAgICAgY29uc3QgcHJvdmlkZXIgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZWxlY3RlZE1vZGVsIFxyXG4gICAgICAgICAgICAgICAgPyBjcmVhdGVQcm92aWRlckZyb21VbmlmaWVkTW9kZWwodGhpcy5wbHVnaW4uc2V0dGluZ3MsIHRoaXMucGx1Z2luLnNldHRpbmdzLnNlbGVjdGVkTW9kZWwpXHJcbiAgICAgICAgICAgICAgICA6IGNyZWF0ZVByb3ZpZGVyKHRoaXMucGx1Z2luLnNldHRpbmdzKTtcclxuICAgICAgICAgICAgYXdhaXQgcHJvdmlkZXIuZ2V0Q29tcGxldGlvbihcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzLFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBlcmF0dXJlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy50ZW1wZXJhdHVyZSxcclxuICAgICAgICAgICAgICAgICAgICBtYXhUb2tlbnM6IHRoaXMucGx1Z2luLnNldHRpbmdzLm1heFRva2VucyxcclxuICAgICAgICAgICAgICAgICAgICBzdHJlYW1DYWxsYmFjazogYXN5bmMgKGNodW5rOiBzdHJpbmcpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VDb250ZW50ICs9IGNodW5rO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50RWwgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLm1lc3NhZ2UtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoY29udGVudEVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250YWluZXIuZGF0YXNldC5yYXdDb250ZW50ID0gcmVzcG9uc2VDb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlcihcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zZUNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbFRvcCA9IHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBhYm9ydENvbnRyb2xsZXI6IHRoaXMuYWN0aXZlU3RyZWFtXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICk7XHJcblxyXG4gICAgICAgICAgICAvLyBQcm9jZXNzIHJlc3BvbnNlIGZvciBhZ2VudCB0b29scyBpZiBhZ2VudCBtb2RlIGlzIGVuYWJsZWRcclxuICAgICAgICAgICAgaWYgKHRoaXMucGx1Z2luLmlzQWdlbnRNb2RlRW5hYmxlZCgpICYmIHRoaXMuYWdlbnRSZXNwb25zZUhhbmRsZXIpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGFnZW50UmVzdWx0ID0gYXdhaXQgdGhpcy5hZ2VudFJlc3BvbnNlSGFuZGxlci5wcm9jZXNzUmVzcG9uc2UocmVzcG9uc2VDb250ZW50KTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgaWYgKGFnZW50UmVzdWx0Lmhhc1Rvb2xzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVXBkYXRlIHRoZSBkaXNwbGF5IHdpdGggcHJvY2Vzc2VkIHRleHQgYW5kIHRvb2wgZXhlY3V0aW9uIHJlc3VsdHNcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBmaW5hbENvbnRlbnQgPSBhZ2VudFJlc3VsdC5wcm9jZXNzZWRUZXh0ICsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYWdlbnRSZXNwb25zZUhhbmRsZXIuZm9ybWF0VG9vbFJlc3VsdHNGb3JEaXNwbGF5KGFnZW50UmVzdWx0LnRvb2xSZXN1bHRzKTtcclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBjb250ZW50RWwgPSBjb250YWluZXIucXVlcnlTZWxlY3RvcignLm1lc3NhZ2UtY29udGVudCcpIGFzIEhUTUxFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChjb250ZW50RWwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGFpbmVyLmRhdGFzZXQucmF3Q29udGVudCA9IGZpbmFsQ29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmaW5hbENvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50RWwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAnJyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxUb3AgPSB0aGlzLm1lc3NhZ2VzQ29udGFpbmVyLnNjcm9sbEhlaWdodDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEFkZCB0b29sIHJlc3VsdHMgdG8gY29udGV4dCBmb3IgZnV0dXJlIG1lc3NhZ2VzXHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdG9vbFJlc3VsdE1lc3NhZ2UgPSB0aGlzLmFnZW50UmVzcG9uc2VIYW5kbGVyLmNyZWF0ZVRvb2xSZXN1bHRNZXNzYWdlKGFnZW50UmVzdWx0LnRvb2xSZXN1bHRzKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAodG9vbFJlc3VsdE1lc3NhZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gVGhpcyBjb3VsZCBiZSB1c2VkIHRvIGFkZCBjb250ZXh0IGZvciBmb2xsb3ctdXAgbWVzc2FnZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ1Rvb2wgcmVzdWx0cyBmb3IgY29udGV4dDonLCB0b29sUmVzdWx0TWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICByZXNwb25zZUNvbnRlbnQgPSBmaW5hbENvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFVwZGF0ZSBjaGF0IGhpc3RvcnkgaWYgd2UgaGF2ZSBhIHRpbWVzdGFtcFxyXG4gICAgICAgICAgICBpZiAob3JpZ2luYWxUaW1lc3RhbXAgJiYgcmVzcG9uc2VDb250ZW50LnRyaW0oKSAhPT0gXCJcIikge1xyXG4gICAgICAgICAgICAgICAgYXdhaXQgdGhpcy5jaGF0SGlzdG9yeU1hbmFnZXIudXBkYXRlTWVzc2FnZShcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbFRpbWVzdGFtcCxcclxuICAgICAgICAgICAgICAgICAgICAnYXNzaXN0YW50JyxcclxuICAgICAgICAgICAgICAgICAgICBvcmlnaW5hbENvbnRlbnQgfHwgJycsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVzcG9uc2VDb250ZW50XHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gcmVzcG9uc2VDb250ZW50O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgIGlmIChlcnJvci5uYW1lICE9PSAnQWJvcnRFcnJvcicpIHtcclxuICAgICAgICAgICAgICAgIHRocm93IGVycm9yO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHVibGljIGNsZWFyTWVzc2FnZXMoKSB7XHJcbiAgICAgICAgdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5lbXB0eSgpO1xyXG4gICAgfVxyXG5cclxuICAgIHB1YmxpYyBzY3JvbGxNZXNzYWdlc1RvQm90dG9tKCkge1xyXG4gICAgICAgIHRoaXMubWVzc2FnZXNDb250YWluZXIuc2Nyb2xsVG9wID0gdGhpcy5tZXNzYWdlc0NvbnRhaW5lci5zY3JvbGxIZWlnaHQ7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8vIC0tLSBIRUxQIE1PREFMIC0tLSAvLyBUaGlzIGNsYXNzIGlzIG5vdyBpbiBhIHNlcGFyYXRlIGZpbGU6IENoYXRIZWxwTW9kYWwudHNcclxuIiwgImltcG9ydCB7IFZhdWx0LCBURmlsZSwgVEZvbGRlciwgbm9ybWFsaXplUGF0aCB9IGZyb20gXCJvYnNpZGlhblwiO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBDaGF0TWVzc2FnZSB7XHJcbiAgdGltZXN0YW1wOiBzdHJpbmc7XHJcbiAgc2VuZGVyOiBzdHJpbmc7XHJcbiAgY29udGVudDogc3RyaW5nO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgQ2hhdEhpc3RvcnlNYW5hZ2VyIHtcclxuICBwcml2YXRlIHZhdWx0OiBWYXVsdDtcclxuICBwcml2YXRlIGhpc3RvcnlGaWxlUGF0aDogc3RyaW5nO1xyXG4gIHByaXZhdGUgaGlzdG9yeTogQ2hhdE1lc3NhZ2VbXSA9IFtdO1xyXG4gIHByaXZhdGUgaXNMb2FkZWQ6IGJvb2xlYW4gPSBmYWxzZTtcclxuXHJcbiAgY29uc3RydWN0b3IodmF1bHQ6IFZhdWx0LCBwbHVnaW5JZD86IHN0cmluZywgaGlzdG9yeUZpbGVQYXRoPzogc3RyaW5nKSB7XHJcbiAgICB0aGlzLnZhdWx0ID0gdmF1bHQ7XHJcbiAgICBsZXQgZWZmZWN0aXZlUGx1Z2luSWQgPSBwbHVnaW5JZDtcclxuICAgIGlmICghcGx1Z2luSWQpIHtcclxuICAgICAgICBjb25zb2xlLmVycm9yKFwiQ1JJVElDQUw6IENoYXRIaXN0b3J5TWFuYWdlciBpbnN0YW50aWF0ZWQgd2l0aG91dCBwbHVnaW5JZCEgVXNpbmcgcGxhY2Vob2xkZXIuIFRoaXMgd2lsbCBsaWtlbHkgbGVhZCB0byBpbmNvcnJlY3QgZmlsZSBwYXRocy5cIik7XHJcbiAgICAgICAgZWZmZWN0aXZlUGx1Z2luSWQgPSBcInVua25vd24tcGx1Z2luLWlkLWVycm9yXCI7IC8vIFBsYWNlaG9sZGVyXHJcbiAgICB9XHJcbiAgICBjb25zdCBmUGF0aCA9IGhpc3RvcnlGaWxlUGF0aCB8fCBcImNoYXQtaGlzdG9yeS5qc29uXCI7XHJcbiAgICAvLyBTdG9yZSBpbiBwbHVnaW4gZGF0YSBkaXJlY3RvcnlcclxuICAgIHRoaXMuaGlzdG9yeUZpbGVQYXRoID0gbm9ybWFsaXplUGF0aChgLm9ic2lkaWFuL3BsdWdpbnMvJHtlZmZlY3RpdmVQbHVnaW5JZH0vJHtmUGF0aH1gKTtcclxuICAgIGNvbnNvbGUubG9nKFwiW0NoYXRIaXN0b3J5TWFuYWdlcl0gVXNpbmcgaGlzdG9yeSBmaWxlIHBhdGg6XCIsIHRoaXMuaGlzdG9yeUZpbGVQYXRoKTtcclxuICAgIC8vIFNob3cgYSBOb3RpY2UgaW4gT2JzaWRpYW4gc28gdGhlIHVzZXIgY2FuIHNlZSB0aGUgcGF0aCBldmVuIGlmIGxvZ3MgYXJlIHN0cmlwcGVkXHJcbiAgICAvLyBAdHMtaWdub3JlXHJcbiAgICBpZiAodHlwZW9mIHdpbmRvdyAhPT0gXCJ1bmRlZmluZWRcIiAmJiB3aW5kb3cuTm90aWNlKSB7XHJcbiAgICAgIC8vIEB0cy1pZ25vcmVcclxuICAgIH1cclxuICB9XHJcblxyXG4gIHByaXZhdGUgYXN5bmMgZW5zdXJlRGlyZWN0b3J5RXhpc3RzKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3QgZGlyUGF0aCA9IHRoaXMuaGlzdG9yeUZpbGVQYXRoLnN1YnN0cmluZygwLCB0aGlzLmhpc3RvcnlGaWxlUGF0aC5sYXN0SW5kZXhPZignLycpKTtcclxuICAgIGlmICghZGlyUGF0aCkgcmV0dXJuOyAvLyBTaG91bGQgbm90IGhhcHBlbiB3aXRoIHRoZSBjdXJyZW50IHBhdGggc3RydWN0dXJlXHJcblxyXG4gICAgdHJ5IHtcclxuICAgICAgICBjb25zdCBhYnN0cmFjdEZpbGUgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChkaXJQYXRoKTtcclxuICAgICAgICBpZiAoYWJzdHJhY3RGaWxlID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIC8vIERpcmVjdG9yeSBkb2VzIG5vdCBleGlzdCwgY3JlYXRlIGl0XHJcbiAgICAgICAgICAgIGF3YWl0IHRoaXMudmF1bHQuY3JlYXRlRm9sZGVyKGRpclBhdGgpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAoIShhYnN0cmFjdEZpbGUgaW5zdGFuY2VvZiBURm9sZGVyKSkge1xyXG4gICAgICAgICAgICAvLyBQYXRoIGV4aXN0cyBidXQgaXMgbm90IGEgZm9sZGVyLCB0aGlzIGlzIGFuIGVycm9yXHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoYFBhdGggJHtkaXJQYXRofSBleGlzdHMgYnV0IGlzIG5vdCBhIGZvbGRlci5gKTtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBQYXRoICR7ZGlyUGF0aH0gZXhpc3RzIGJ1dCBpcyBub3QgYSBmb2xkZXIuYCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIElmIGFic3RyYWN0RmlsZSBpcyBhIFRGb2xkZXIsIGRpcmVjdG9yeSBhbHJlYWR5IGV4aXN0cywgZG8gbm90aGluZy5cclxuICAgIH0gY2F0Y2ggKGUpIHtcclxuICAgICAgICAvLyBJZiB0aGUgZXJyb3IgaXMgc3BlY2lmaWNhbGx5IFwiZm9sZGVyIGFscmVhZHkgZXhpc3RzXCIsIHdlIGNhbiBhc3N1bWUgaXQncyBzYWZlIHRvIGlnbm9yZS5cclxuICAgICAgICAvLyBUaGlzIGhhbmRsZXMgY2FzZXMgd2hlcmUgY3JlYXRlRm9sZGVyIHRocm93cyBldmVuIGlmIHRoZSBmb2xkZXIgaXMgYWxyZWFkeSB0aGVyZS5cclxuICAgICAgICBpZiAoZS5tZXNzYWdlICYmIGUubWVzc2FnZS50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKFwiZm9sZGVyIGFscmVhZHkgZXhpc3RzXCIpKSB7XHJcbiAgICAgICAgICAgIC8vIEFzc3VtaW5nIHRoZSBBUEkgaXMgY29ycmVjdCB0aGF0IHRoZSBmb2xkZXIgZXhpc3RzLlxyXG4gICAgICAgICAgICAvLyBUaGUgcHJldmlvdXMgY2hlY2sgYHRoaXMudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGRpclBhdGgpIGluc3RhbmNlb2YgVEZvbGRlcmBcclxuICAgICAgICAgICAgLy8gbWlnaHQgZmFpbCBkdWUgdG8gY2FjaGluZyBvciB0aW1pbmcgaXNzdWVzIGltbWVkaWF0ZWx5IGFmdGVyIHRoZSBlcnJvci5cclxuICAgICAgICAgICAgLy8gQnkgcmV0dXJuaW5nIGhlcmUsIHdlIGFjY2VwdCB0aGF0IHRoZSBmb2xkZXIgZXhpc3RzIGFzIHBlciB0aGUgZXJyb3IgbWVzc2FnZS5cclxuICAgICAgICAgICAgcmV0dXJuOyBcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gRm9yIGFueSBvdGhlciBlcnJvcnMsIG9yIGlmIHRoZSBzcGVjaWZpYyBcImZvbGRlciBhbHJlYWR5IGV4aXN0c1wiIG1lc3NhZ2Ugd2Fzbid0IGZvdW5kLlxyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBlbnN1cmUgZGlyZWN0b3J5ICR7ZGlyUGF0aH0gZXhpc3RzOmAsIGUpO1xyXG4gICAgICAgIHRocm93IGU7IC8vIFJlLXRocm93IG90aGVyIGVycm9yc1xyXG4gICAgfVxyXG59XHJcblxyXG4gIGFzeW5jIGxvYWRIaXN0b3J5KCk6IFByb21pc2U8Q2hhdE1lc3NhZ2VbXT4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgLy8gVXNlIGFkYXB0ZXIuZXhpc3RzIGZvciByZWxpYWJsZSBmaWxlIGV4aXN0ZW5jZSBjaGVja1xyXG4gICAgICBjb25zdCBleGlzdHMgPSBhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHRoaXMuaGlzdG9yeUZpbGVQYXRoKTtcclxuICAgICAgaWYgKGV4aXN0cykge1xyXG4gICAgICAgIC8vIFVzZSBhZGFwdGVyLnJlYWQgZm9yIGRpcmVjdCBmaWxlIGFjY2Vzc1xyXG4gICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIucmVhZCh0aGlzLmhpc3RvcnlGaWxlUGF0aCk7XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgIHRoaXMuaGlzdG9yeSA9IEpTT04ucGFyc2UoZGF0YSkgYXMgQ2hhdE1lc3NhZ2VbXTtcclxuICAgICAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcGFyc2UgY2hhdCBoaXN0b3J5OicsIHBhcnNlRXJyb3IpO1xyXG4gICAgICAgICAgdGhpcy5oaXN0b3J5ID0gW107XHJcbiAgICAgICAgfVxyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRoaXMuaGlzdG9yeSA9IFtdO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBsb2FkIGNoYXQgaGlzdG9yeTonLCBlKTtcclxuICAgICAgdGhpcy5oaXN0b3J5ID0gW107XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpcy5oaXN0b3J5O1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgYWRkTWVzc2FnZShtZXNzYWdlOiBDaGF0TWVzc2FnZSk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgY29uc3QgY3VycmVudEhpc3RvcnkgPSBhd2FpdCB0aGlzLmxvYWRIaXN0b3J5KCk7XHJcbiAgICBjdXJyZW50SGlzdG9yeS5wdXNoKG1lc3NhZ2UpO1xyXG4gICAgdGhpcy5oaXN0b3J5ID0gY3VycmVudEhpc3Rvcnk7XHJcbiAgICBhd2FpdCB0aGlzLnNhdmVIaXN0b3J5KCk7XHJcbiAgfVxyXG5cclxuICBhc3luYyBnZXRIaXN0b3J5KCk6IFByb21pc2U8Q2hhdE1lc3NhZ2VbXT4ge1xyXG4gICAgcmV0dXJuIGF3YWl0IHRoaXMubG9hZEhpc3RvcnkoKTtcclxuICB9XHJcblxyXG4gIGFzeW5jIGNsZWFySGlzdG9yeSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRoaXMuaGlzdG9yeSA9IFtdO1xyXG4gICAgYXdhaXQgdGhpcy5zYXZlSGlzdG9yeSgpO1xyXG4gIH1cclxuXHJcbiAgYXN5bmMgZGVsZXRlTWVzc2FnZSh0aW1lc3RhbXA6IHN0cmluZywgc2VuZGVyOiBzdHJpbmcsIGNvbnRlbnQ6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgYXdhaXQgdGhpcy5sb2FkSGlzdG9yeSgpO1xyXG4gICAgY29uc3QgaW5kZXggPSB0aGlzLmhpc3RvcnkuZmluZEluZGV4KG1zZyA9PiBcclxuICAgICAgbXNnLnRpbWVzdGFtcCA9PT0gdGltZXN0YW1wICYmIFxyXG4gICAgICBtc2cuc2VuZGVyID09PSBzZW5kZXIgJiYgXHJcbiAgICAgIG1zZy5jb250ZW50ID09PSBjb250ZW50XHJcbiAgICApO1xyXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICB0aGlzLmhpc3Rvcnkuc3BsaWNlKGluZGV4LCAxKTtcclxuICAgICAgYXdhaXQgdGhpcy5zYXZlSGlzdG9yeSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgYXN5bmMgdXBkYXRlTWVzc2FnZSh0aW1lc3RhbXA6IHN0cmluZywgc2VuZGVyOiBzdHJpbmcsIG9sZENvbnRlbnQ6IHN0cmluZywgbmV3Q29udGVudDogc3RyaW5nKTogUHJvbWlzZTx2b2lkPiB7XHJcbiAgICBhd2FpdCB0aGlzLmxvYWRIaXN0b3J5KCk7XHJcbiAgICBjb25zdCBtZXNzYWdlID0gdGhpcy5oaXN0b3J5LmZpbmQobXNnID0+IFxyXG4gICAgICBtc2cudGltZXN0YW1wID09PSB0aW1lc3RhbXAgJiYgXHJcbiAgICAgIG1zZy5zZW5kZXIgPT09IHNlbmRlciAmJiBcclxuICAgICAgbXNnLmNvbnRlbnQgPT09IG9sZENvbnRlbnRcclxuICAgICk7XHJcbiAgICBpZiAobWVzc2FnZSkge1xyXG4gICAgICBtZXNzYWdlLmNvbnRlbnQgPSBuZXdDb250ZW50O1xyXG4gICAgICBhd2FpdCB0aGlzLnNhdmVIaXN0b3J5KCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBjb25zb2xlLndhcm4oXCJDaGF0SGlzdG9yeU1hbmFnZXI6IHVwZGF0ZU1lc3NhZ2UgZGlkIG5vdCBmaW5kIGEgbWF0Y2hpbmcgbWVzc2FnZSB0byB1cGRhdGUuXCIsIHt0aW1lc3RhbXAsIHNlbmRlciwgb2xkQ29udGVudH0pO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhc3luYyBzYXZlSGlzdG9yeSgpOiBQcm9taXNlPHZvaWQ+IHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHRoaXMuZW5zdXJlRGlyZWN0b3J5RXhpc3RzKCk7XHJcbiAgICAgIGNvbnN0IGRhdGEgPSBKU09OLnN0cmluZ2lmeSh0aGlzLmhpc3RvcnksIG51bGwsIDIpO1xyXG5cclxuICAgICAgLy8gQ2hlY2sgaWYgcGF0aCBleGlzdHMgYW5kIGlzIGEgZm9sZGVyICh3aGljaCB3b3VsZCBiZSBhbiBlcnJvcilcclxuICAgICAgY29uc3QgYWJzdHJhY3RUYXJnZXQgPSB0aGlzLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aCh0aGlzLmhpc3RvcnlGaWxlUGF0aCk7XHJcbiAgICAgIGlmIChhYnN0cmFjdFRhcmdldCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYFBhdGggJHt0aGlzLmhpc3RvcnlGaWxlUGF0aH0gaXMgYSBkaXJlY3RvcnksIG5vdCBhIGZpbGUuYCk7XHJcbiAgICAgIH1cclxuXHJcbiAgICAgIC8vIFVzZSBhZGFwdGVyLndyaXRlIHdoaWNoIGhhbmRsZXMgYm90aCBjcmVhdGlvbiBhbmQgbW9kaWZpY2F0aW9uIGF0b21pY2FsbHlcclxuICAgICAgYXdhaXQgdGhpcy52YXVsdC5hZGFwdGVyLndyaXRlKHRoaXMuaGlzdG9yeUZpbGVQYXRoLCBkYXRhKTtcclxuXHJcbiAgICAgIC8vIEFmdGVyIHN1Y2Nlc3NmdWwgd3JpdGUsIHVwZGF0ZSB2YXVsdCBjYWNoZSBpZiBuZWVkZWRcclxuICAgICAgaWYgKCFhYnN0cmFjdFRhcmdldCB8fCAhKGFic3RyYWN0VGFyZ2V0IGluc3RhbmNlb2YgVEZpbGUpKSB7XHJcbiAgICAgICAgLy8gRm9yY2UgdmF1bHQgdG8gcmVjb2duaXplIHRoZSBuZXcgZmlsZSBpbiBpdHMgY2FjaGVcclxuICAgICAgICBhd2FpdCB0aGlzLnZhdWx0LmFkYXB0ZXIuZXhpc3RzKHRoaXMuaGlzdG9yeUZpbGVQYXRoKTtcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZSkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gc2F2ZSBoaXN0b3J5IHRvICR7dGhpcy5oaXN0b3J5RmlsZVBhdGh9OmAsIGUpO1xyXG4gICAgICB0aHJvdyBlO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBNYXJrZG93blJlbmRlcmVyLCBOb3RpY2UsIENvbXBvbmVudCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgTWVzc2FnZSBhcyBNZXNzYWdlVHlwZSB9IGZyb20gJy4uLy4uL3R5cGVzJztcclxuaW1wb3J0IHsgY3JlYXRlQWN0aW9uQnV0dG9uLCBjb3B5VG9DbGlwYm9hcmQgfSBmcm9tICcuL0J1dHRvbnMnO1xyXG5pbXBvcnQgeyBDb25maXJtYXRpb25Nb2RhbCB9IGZyb20gJy4vQ29uZmlybWF0aW9uTW9kYWwnO1xyXG5cclxuLyoqXHJcbiAqIEJhc2UgTWVzc2FnZSBpbnRlcmZhY2UgZm9yIGNoYXQgbWVzc2FnZXNcclxuICovXHJcbmV4cG9ydCBpbnRlcmZhY2UgSU1lc3NhZ2Uge1xyXG4gICAgcm9sZTogTWVzc2FnZVR5cGVbJ3JvbGUnXTtcclxuICAgIGNvbnRlbnQ6IHN0cmluZztcclxuICAgIHJlbmRlcigpOiBQcm9taXNlPHZvaWQ+O1xyXG4gICAgc2V0Q29udGVudChjb250ZW50OiBzdHJpbmcpOiB2b2lkO1xyXG4gICAgZ2V0Q29udGVudCgpOiBzdHJpbmc7XHJcbiAgICBkZWxldGUoKTogdm9pZDtcclxuICAgIGVkaXQoKTogdm9pZDtcclxuICAgIGNvcHkoKTogUHJvbWlzZTx2b2lkPjtcclxuICAgIHJlZ2VuZXJhdGUoKTogUHJvbWlzZTx2b2lkPjtcclxufVxyXG5cclxuLyoqXHJcbiAqIEJhc2UgTWVzc2FnZSBjbGFzcyBpbXBsZW1lbnRpbmcgc2hhcmVkIGZ1bmN0aW9uYWxpdHlcclxuICovXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBNZXNzYWdlIGV4dGVuZHMgQ29tcG9uZW50IGltcGxlbWVudHMgSU1lc3NhZ2Uge1xyXG4gICAgcHJvdGVjdGVkIGVsZW1lbnQ6IEhUTUxFbGVtZW50O1xyXG4gICAgcHJvdGVjdGVkIGNvbnRlbnRFbGVtZW50OiBIVE1MRWxlbWVudDtcclxuICAgIHByb3RlY3RlZCBhY3Rpb25zRWxlbWVudDogSFRNTEVsZW1lbnQ7XHJcbiAgICBwcm90ZWN0ZWQgcmF3Q29udGVudDogc3RyaW5nO1xyXG4gICAgcHJvdGVjdGVkIGFwcDogQXBwO1xyXG4gICAgcHVibGljIHJvbGU6IE1lc3NhZ2VUeXBlWydyb2xlJ107XHJcbiAgICBwdWJsaWMgY29udGVudDogc3RyaW5nO1xyXG5cclxuICAgIGNvbnN0cnVjdG9yKFxyXG4gICAgICAgIGFwcDogQXBwLFxyXG4gICAgICAgIHJvbGU6IE1lc3NhZ2VUeXBlWydyb2xlJ10sXHJcbiAgICAgICAgY29udGVudDogc3RyaW5nXHJcbiAgICApIHtcclxuICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIHRoaXMuYXBwID0gYXBwO1xyXG4gICAgICAgIHRoaXMucm9sZSA9IHJvbGU7XHJcbiAgICAgICAgdGhpcy5jb250ZW50ID0gY29udGVudDtcclxuICAgICAgICB0aGlzLnJhd0NvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENyZWF0ZSBiYXNlIG1lc3NhZ2Ugc3RydWN0dXJlXHJcbiAgICAgICAgdGhpcy5lbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LmFkZENsYXNzKCdhaS1jaGF0LW1lc3NhZ2UnLCByb2xlKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDcmVhdGUgY29udGFpbmVyIGZvciBjb250ZW50IGFuZCBhY3Rpb25zXHJcbiAgICAgICAgY29uc3QgY29udGFpbmVyID0gdGhpcy5lbGVtZW50LmNyZWF0ZURpdignbWVzc2FnZS1jb250YWluZXInKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBDcmVhdGUgY29udGVudCBlbGVtZW50XHJcbiAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudCA9IGNvbnRhaW5lci5jcmVhdGVEaXYoJ21lc3NhZ2UtY29udGVudCcpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENyZWF0ZSBhY3Rpb25zIGNvbnRhaW5lclxyXG4gICAgICAgIHRoaXMuYWN0aW9uc0VsZW1lbnQgPSBjb250YWluZXIuY3JlYXRlRGl2KCdtZXNzYWdlLWFjdGlvbnMnKTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBBZGQgaG92ZXIgYmVoYXZpb3JcclxuICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zRWxlbWVudC5yZW1vdmVDbGFzcygnaGlkZGVuJyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWN0aW9uc0VsZW1lbnQuYWRkQ2xhc3MoJ3Zpc2libGUnKTtcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLmVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsICgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5hY3Rpb25zRWxlbWVudC5yZW1vdmVDbGFzcygndmlzaWJsZScpO1xyXG4gICAgICAgICAgICB0aGlzLmFjdGlvbnNFbGVtZW50LmFkZENsYXNzKCdoaWRkZW4nKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhYnN0cmFjdCByZWdlbmVyYXRlKCk6IFByb21pc2U8dm9pZD47XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdGhlIERPTSBlbGVtZW50IGZvciB0aGlzIG1lc3NhZ2VcclxuICAgICAqL1xyXG4gICAgZ2V0RWxlbWVudCgpOiBIVE1MRWxlbWVudCB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuZWxlbWVudDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCB0aGUgcmF3IGNvbnRlbnQgb2YgdGhlIG1lc3NhZ2VcclxuICAgICAqL1xyXG4gICAgZ2V0Q29udGVudCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnJhd0NvbnRlbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBVcGRhdGUgdGhlIG1lc3NhZ2UgY29udGVudFxyXG4gICAgICovXHJcbiAgICBzZXRDb250ZW50KGNvbnRlbnQ6IHN0cmluZyk6IHZvaWQge1xyXG4gICAgICAgIHRoaXMucmF3Q29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICAgICAgdGhpcy5yZW5kZXIoKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFJlbmRlciB0aGUgbWVzc2FnZSBjb250ZW50IHdpdGggTWFya2Rvd25cclxuICAgICAqL1xyXG4gICAgYXN5bmMgcmVuZGVyKCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIHRoaXMuY29udGVudEVsZW1lbnQuZW1wdHkoKTtcclxuICAgICAgICBhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlcihcclxuICAgICAgICAgICAgdGhpcy5hcHAsXHJcbiAgICAgICAgICAgIHRoaXMucmF3Q29udGVudCxcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudCxcclxuICAgICAgICAgICAgJycsXHJcbiAgICAgICAgICAgIHRoaXNcclxuICAgICAgICApLmNhdGNoKChlcnJvcikgPT4ge1xyXG4gICAgICAgICAgICBjb25zb2xlLmVycm9yKCdNYXJrZG93biByZW5kZXJpbmcgZXJyb3I6JywgZXJyb3IpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbGVtZW50LnRleHRDb250ZW50ID0gdGhpcy5yYXdDb250ZW50O1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGVsZXRlIHRoaXMgbWVzc2FnZVxyXG4gICAgICovXHJcbiAgICBkZWxldGUoKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy5lbGVtZW50LnJlbW92ZSgpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRW5hYmxlIGVkaXRpbmcgb2YgdGhlIG1lc3NhZ2VcclxuICAgICAqL1xyXG4gICAgZWRpdCgpOiB2b2lkIHtcclxuICAgICAgICBpZiAodGhpcy5jb250ZW50RWxlbWVudC5oYXNDbGFzcygnZWRpdGluZycpKSB7XHJcbiAgICAgICAgICAgIC8vIFNhdmUgZWRpdHNcclxuICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSB0aGlzLmNvbnRlbnRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3RleHRhcmVhJyk7XHJcbiAgICAgICAgICAgIGlmICh0ZXh0YXJlYSkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zZXRDb250ZW50KHRleHRhcmVhLnZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY29udGVudEVsZW1lbnQucmVtb3ZlQ2xhc3MoJ2VkaXRpbmcnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIFN3aXRjaCB0byBlZGl0IG1vZGVcclxuICAgICAgICAgICAgY29uc3QgdGV4dGFyZWEgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCd0ZXh0YXJlYScpO1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS52YWx1ZSA9IHRoaXMucmF3Q29udGVudDtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudC5lbXB0eSgpO1xyXG4gICAgICAgICAgICB0aGlzLmNvbnRlbnRFbGVtZW50LmFwcGVuZENoaWxkKHRleHRhcmVhKTtcclxuICAgICAgICAgICAgdGV4dGFyZWEuZm9jdXMoKTtcclxuICAgICAgICAgICAgdGhpcy5jb250ZW50RWxlbWVudC5hZGRDbGFzcygnZWRpdGluZycpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIENvcHkgbWVzc2FnZSBjb250ZW50IHRvIGNsaXBib2FyZFxyXG4gICAgICovXHJcbiAgICBhc3luYyBjb3B5KCk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgICAgIGlmICh0aGlzLnJhd0NvbnRlbnQudHJpbSgpID09PSAnJykge1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdObyBjb250ZW50IHRvIGNvcHknKTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dCh0aGlzLnJhd0NvbnRlbnQpO1xyXG4gICAgICAgICAgICBuZXcgTm90aWNlKCdDb3BpZWQgdG8gY2xpcGJvYXJkJyk7XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIGNvcHkgdG8gY2xpcGJvYXJkJyk7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0NsaXBib2FyZCBlcnJvcjonLCBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlIGEgbWVzc2FnZSBlbGVtZW50IGZvciB0aGUgY2hhdFxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZU1lc3NhZ2VFbGVtZW50KFxyXG4gICAgYXBwOiBBcHAsXHJcbiAgICByb2xlOiAndXNlcicgfCAnYXNzaXN0YW50JyxcclxuICAgIGNvbnRlbnQ6IHN0cmluZyxcclxuICAgIGNoYXRIaXN0b3J5TWFuYWdlcjogYW55LFxyXG4gICAgcGx1Z2luOiBhbnksXHJcbiAgICByZWdlbmVyYXRlQ2FsbGJhY2s6IChtZXNzYWdlRWw6IEhUTUxFbGVtZW50KSA9PiB2b2lkLFxyXG4gICAgcGFyZW50Q29tcG9uZW50OiBDb21wb25lbnRcclxuKTogSFRNTEVsZW1lbnQge1xyXG4gICAgY29uc3QgbWVzc2FnZUVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICBtZXNzYWdlRWwuYWRkQ2xhc3MoJ2FpLWNoYXQtbWVzc2FnZScsIHJvbGUpO1xyXG4gICAgY29uc3QgbWVzc2FnZUNvbnRhaW5lciA9IG1lc3NhZ2VFbC5jcmVhdGVEaXYoJ21lc3NhZ2UtY29udGFpbmVyJyk7XHJcbiAgICBjb25zdCBjb250ZW50RWwgPSBtZXNzYWdlQ29udGFpbmVyLmNyZWF0ZURpdignbWVzc2FnZS1jb250ZW50Jyk7XHJcbiAgICBtZXNzYWdlRWwuZGF0YXNldC5yYXdDb250ZW50ID0gY29udGVudDtcclxuICAgIG1lc3NhZ2VFbC5kYXRhc2V0LnRpbWVzdGFtcCA9IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKTtcclxuICAgIE1hcmtkb3duUmVuZGVyZXIucmVuZGVyKGFwcCwgY29udGVudCwgY29udGVudEVsLCAnJywgcGFyZW50Q29tcG9uZW50KS5jYXRjaCgoZXJyb3IpID0+IHtcclxuICAgICAgICBjb250ZW50RWwudGV4dENvbnRlbnQgPSBjb250ZW50O1xyXG4gICAgfSk7XHJcbiAgICBjb25zdCBhY3Rpb25zRWwgPSBtZXNzYWdlQ29udGFpbmVyLmNyZWF0ZURpdignbWVzc2FnZS1hY3Rpb25zJyk7XHJcbiAgICBhY3Rpb25zRWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICBtZXNzYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VlbnRlcicsICgpID0+IHtcclxuICAgICAgICBhY3Rpb25zRWwuY2xhc3NMaXN0LnJlbW92ZSgnaGlkZGVuJyk7XHJcbiAgICAgICAgYWN0aW9uc0VsLmNsYXNzTGlzdC5hZGQoJ3Zpc2libGUnKTtcclxuICAgIH0pO1xyXG4gICAgbWVzc2FnZUVsLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlbGVhdmUnLCAoKSA9PiB7XHJcbiAgICAgICAgYWN0aW9uc0VsLmNsYXNzTGlzdC5yZW1vdmUoJ3Zpc2libGUnKTtcclxuICAgICAgICBhY3Rpb25zRWwuY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7XHJcbiAgICB9KTtcclxuICAgIC8vIENvcHkgYnV0dG9uXHJcbiAgICBhY3Rpb25zRWwuYXBwZW5kQ2hpbGQoY3JlYXRlQWN0aW9uQnV0dG9uKCdDb3B5JywgJ0NvcHkgbWVzc2FnZScsICgpID0+IHtcclxuICAgICAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IG1lc3NhZ2VFbC5kYXRhc2V0LnJhd0NvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgaWYgKGN1cnJlbnRDb250ZW50LnRyaW0oKSA9PT0gJycpIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZSgnTm8gY29udGVudCB0byBjb3B5Jyk7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgY29weVRvQ2xpcGJvYXJkKGN1cnJlbnRDb250ZW50KTtcclxuICAgIH0pKTtcclxuICAgIC8vIEVkaXQgYnV0dG9uXHJcbiAgICBhY3Rpb25zRWwuYXBwZW5kQ2hpbGQoY3JlYXRlQWN0aW9uQnV0dG9uKCdFZGl0JywgJ0VkaXQgbWVzc2FnZScsIGFzeW5jICgpID0+IHtcclxuICAgICAgICBpZiAoIWNvbnRlbnRFbC5oYXNDbGFzcygnZWRpdGluZycpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRleHRhcmVhID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgndGV4dGFyZWEnKTtcclxuICAgICAgICAgICAgdGV4dGFyZWEudmFsdWUgPSBtZXNzYWdlRWwuZGF0YXNldC5yYXdDb250ZW50IHx8ICcnO1xyXG4gICAgICAgICAgICB0ZXh0YXJlYS5jbGFzc05hbWUgPSAnbWVzc2FnZS1jb250ZW50IGVkaXRpbmcnO1xyXG4gICAgICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICAgICAgY29udGVudEVsLmFwcGVuZENoaWxkKHRleHRhcmVhKTtcclxuICAgICAgICAgICAgdGV4dGFyZWEuZm9jdXMoKTtcclxuICAgICAgICAgICAgY29udGVudEVsLmFkZENsYXNzKCdlZGl0aW5nJyk7XHJcbiAgICAgICAgICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBhc3luYyAoZSkgPT4ge1xyXG4gICAgICAgICAgICAgICAgaWYgKGUua2V5ID09PSAnRW50ZXInICYmICFlLnNoaWZ0S2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRhcmVhLmJsdXIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIHRleHRhcmVhLmFkZEV2ZW50TGlzdGVuZXIoJ2JsdXInLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBvbGRDb250ZW50ID0gbWVzc2FnZUVsLmRhdGFzZXQucmF3Q29udGVudDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG5ld0NvbnRlbnQgPSB0ZXh0YXJlYS52YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgY2hhdEhpc3RvcnlNYW5hZ2VyLnVwZGF0ZU1lc3NhZ2UoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VFbC5kYXRhc2V0LnRpbWVzdGFtcCB8fCBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCksXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VFbC5jbGFzc0xpc3QuY29udGFpbnMoJ3VzZXInKSA/ICd1c2VyJyA6ICdhc3Npc3RhbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRDb250ZW50IHx8ICcnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBuZXdDb250ZW50XHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlRWwuZGF0YXNldC5yYXdDb250ZW50ID0gbmV3Q29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50RWwuZW1wdHkoKTtcclxuICAgICAgICAgICAgICAgICAgICBhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlcihhcHAsIG5ld0NvbnRlbnQsIGNvbnRlbnRFbCwgJycsIHBhcmVudENvbXBvbmVudCk7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLnJlbW92ZUNsYXNzKCdlZGl0aW5nJyk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZSgnRmFpbGVkIHRvIHNhdmUgZWRpdGVkIG1lc3NhZ2UuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUVsLmRhdGFzZXQucmF3Q29udGVudCA9IG9sZENvbnRlbnQgfHwgJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgYXdhaXQgTWFya2Rvd25SZW5kZXJlci5yZW5kZXIoYXBwLCBvbGRDb250ZW50IHx8ICcnLCBjb250ZW50RWwsICcnLCBwYXJlbnRDb21wb25lbnQpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnRFbC5yZW1vdmVDbGFzcygnZWRpdGluZycpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9XHJcbiAgICB9KSk7XHJcbiAgICAvLyBEZWxldGUgYnV0dG9uXHJcbiAgICBhY3Rpb25zRWwuYXBwZW5kQ2hpbGQoY3JlYXRlQWN0aW9uQnV0dG9uKCdEZWxldGUnLCAnRGVsZXRlIG1lc3NhZ2UnLCAoKSA9PiB7XHJcbiAgICAgICAgY29uc3QgbW9kYWwgPSBuZXcgQ29uZmlybWF0aW9uTW9kYWwoYXBwLCAnRGVsZXRlIG1lc3NhZ2UnLCAnQXJlIHlvdSBzdXJlIHlvdSB3YW50IHRvIGRlbGV0ZSB0aGlzIG1lc3NhZ2U/JywgKGNvbmZpcm1lZDogYm9vbGVhbikgPT4ge1xyXG4gICAgICAgICAgICBpZiAoY29uZmlybWVkKSB7XHJcbiAgICAgICAgICAgICAgICBjaGF0SGlzdG9yeU1hbmFnZXIuZGVsZXRlTWVzc2FnZShcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlRWwuZGF0YXNldC50aW1lc3RhbXAgfHwgbmV3IERhdGUoKS50b0lTT1N0cmluZygpLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VFbC5jbGFzc0xpc3QuY29udGFpbnMoJ3VzZXInKSA/ICd1c2VyJyA6ICdhc3Npc3RhbnQnLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VFbC5kYXRhc2V0LnJhd0NvbnRlbnQgfHwgJydcclxuICAgICAgICAgICAgICAgICkudGhlbigoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgbWVzc2FnZUVsLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSkuY2F0Y2goKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoJ0ZhaWxlZCB0byBkZWxldGUgbWVzc2FnZSBmcm9tIGhpc3RvcnkuJyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIG1vZGFsLm9wZW4oKTtcclxuICAgIH0pKTtcclxuICAgIC8vIFJlZ2VuZXJhdGUgYnV0dG9uXHJcbiAgICBhY3Rpb25zRWwuYXBwZW5kQ2hpbGQoY3JlYXRlQWN0aW9uQnV0dG9uKCdSZWdlbmVyYXRlJywgJ1JlZ2VuZXJhdGUgdGhpcyByZXNwb25zZScsICgpID0+IHtcclxuICAgICAgICByZWdlbmVyYXRlQ2FsbGJhY2sobWVzc2FnZUVsKTtcclxuICAgIH0pKTtcclxuICAgIFxyXG4gICAgbWVzc2FnZUNvbnRhaW5lci5hcHBlbmRDaGlsZChhY3Rpb25zRWwpO1xyXG4gICAgcmV0dXJuIG1lc3NhZ2VFbDtcclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbmV4cG9ydCBjbGFzcyBDb25maXJtYXRpb25Nb2RhbCBleHRlbmRzIE1vZGFsIHtcclxuICAgIHByaXZhdGUgb25Db25maXJtOiAoY29uZmlybWVkOiBib29sZWFuKSA9PiB2b2lkO1xyXG4gICAgcHJpdmF0ZSBtZXNzYWdlOiBzdHJpbmc7XHJcbiAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCwgdGl0bGU6IHN0cmluZywgbWVzc2FnZTogc3RyaW5nLCBvbkNvbmZpcm06IChjb25maXJtZWQ6IGJvb2xlYW4pID0+IHZvaWQpIHtcclxuICAgICAgICBzdXBlcihhcHApO1xyXG4gICAgICAgIHRoaXMudGl0bGVFbC5zZXRUZXh0KHRpdGxlKTtcclxuICAgICAgICB0aGlzLm1lc3NhZ2UgPSBtZXNzYWdlO1xyXG4gICAgICAgIHRoaXMub25Db25maXJtID0gb25Db25maXJtO1xyXG4gICAgfVxyXG4gICAgb25PcGVuKCkge1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgICAgIGNvbnRlbnRFbC5jcmVhdGVFbCgncCcsIHsgdGV4dDogdGhpcy5tZXNzYWdlIH0pO1xyXG4gICAgICAgIGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ21vZGFsLWJ1dHRvbi1jb250YWluZXInKTtcclxuICAgICAgICBidXR0b25Db250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ0NhbmNlbCcgfSlcclxuICAgICAgICAgICAgLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5vbkNvbmZpcm0oZmFsc2UpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICBjb25zdCBjb25maXJtQnV0dG9uID0gYnV0dG9uQ29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcbiAgICAgICAgICAgIHRleHQ6ICdEZWxldGUnLFxyXG4gICAgICAgICAgICBjbHM6ICdtb2Qtd2FybmluZydcclxuICAgICAgICB9KTtcclxuICAgICAgICBjb25maXJtQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLm9uQ29uZmlybSh0cnVlKTtcclxuICAgICAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgb25DbG9zZSgpIHtcclxuICAgICAgICB0aGlzLmNvbnRlbnRFbC5lbXB0eSgpO1xyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIENoYXRVSUVsZW1lbnRzIHtcclxuICAgIGNvbnRlbnRFbDogSFRNTEVsZW1lbnQ7XHJcbiAgICBmYWRlZEhlbHA6IEhUTUxFbGVtZW50O1xyXG4gICAgdG9wQnV0dG9uQ29udGFpbmVyOiBIVE1MRWxlbWVudDtcclxuICAgIHNldHRpbmdzQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgIGNvcHlBbGxCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgc2F2ZU5vdGVCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgY2xlYXJCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgbWVzc2FnZXNDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgaW5wdXRDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgdGV4dGFyZWE6IEhUTUxUZXh0QXJlYUVsZW1lbnQ7XHJcbiAgICBzZW5kQnV0dG9uOiBIVE1MQnV0dG9uRWxlbWVudDtcclxuICAgIHN0b3BCdXR0b246IEhUTUxCdXR0b25FbGVtZW50O1xyXG4gICAgaGVscEJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICBhZ2VudE1vZGVCdXR0b246IEhUTUxCdXR0b25FbGVtZW50OyAvLyA8LS0gYWRkIHRvIGludGVyZmFjZVxyXG4gICAgcmVmZXJlbmNlTm90ZUJ1dHRvbjogSFRNTEJ1dHRvbkVsZW1lbnQ7XHJcbiAgICByZWZlcmVuY2VOb3RlSW5kaWNhdG9yOiBIVE1MRWxlbWVudDtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNoYXRVSShhcHA6IEFwcCwgY29udGVudEVsOiBIVE1MRWxlbWVudCk6IENoYXRVSUVsZW1lbnRzIHtcclxuICAgIC8vIC0tLSBGQURFRCBIRUxQIE1FU1NBR0UgTkVBUiBUT1AgLS0tXHJcbiAgICBjb25zdCBmYWRlZEhlbHAgPSBjb250ZW50RWwuY3JlYXRlRGl2KCk7XHJcbiAgICBmYWRlZEhlbHAuc2V0VGV4dCgnVGlwOiBUeXBlIC9oZWxwIG9yIHByZXNzIEN0cmwrU2hpZnQrSCBmb3IgY2hhdCBjb21tYW5kcyBhbmQgc2hvcnRjdXRzLicpO1xyXG4gICAgZmFkZWRIZWxwLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgZmFkZWRIZWxwLnN0eWxlLm9wYWNpdHkgPSAnMC42JztcclxuICAgIGZhZGVkSGVscC5zdHlsZS5mb250U2l6ZSA9ICcwLjk1ZW0nO1xyXG4gICAgZmFkZWRIZWxwLnN0eWxlLm1hcmdpbiA9ICcwLjVlbSAwIDAuMmVtIDAnO1xyXG5cclxuICAgIC8vIC0tLSBCVVRUT05TIEFCT1ZFIENIQVQgV0lORE9XIC0tLVxyXG4gICAgY29uc3QgdG9wQnV0dG9uQ29udGFpbmVyID0gY29udGVudEVsLmNyZWF0ZURpdignYWktY2hhdC1idXR0b25zJyk7XHJcbiAgICAvLyBTZXR0aW5ncyBidXR0b25cclxuICAgIGNvbnN0IHNldHRpbmdzQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICBzZXR0aW5nc0J1dHRvbi5zZXRUZXh0KCdTZXR0aW5ncycpO1xyXG4gICAgc2V0dGluZ3NCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1RvZ2dsZSBtb2RlbCBzZXR0aW5ncycpO1xyXG4gICAgdG9wQnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKHNldHRpbmdzQnV0dG9uKTtcclxuICAgIC8vIENvcHkgQWxsIGJ1dHRvblxyXG4gICAgY29uc3QgY29weUFsbEJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgY29weUFsbEJ1dHRvbi50ZXh0Q29udGVudCA9ICdDb3B5IEFsbCc7XHJcbiAgICB0b3BCdXR0b25Db250YWluZXIuYXBwZW5kQ2hpbGQoY29weUFsbEJ1dHRvbik7XHJcbiAgICAvLyBTYXZlIGFzIE5vdGUgYnV0dG9uXHJcbiAgICBjb25zdCBzYXZlTm90ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgc2F2ZU5vdGVCdXR0b24udGV4dENvbnRlbnQgPSAnU2F2ZSBhcyBOb3RlJztcclxuICAgIHRvcEJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChzYXZlTm90ZUJ1dHRvbik7XHJcbiAgICAvLyBDbGVhciBidXR0b25cclxuICAgIGNvbnN0IGNsZWFyQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgICBjbGVhckJ1dHRvbi50ZXh0Q29udGVudCA9ICdDbGVhciBDaGF0JztcclxuICAgIHRvcEJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChjbGVhckJ1dHRvbik7XHJcbiAgICAvLyAtLS0gUkVGRVJFTkNFIE5PVEUgQlVUVE9OIC0tLVxyXG4gICAgY29uc3QgcmVmZXJlbmNlTm90ZUJ1dHRvbiA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gICAgcmVmZXJlbmNlTm90ZUJ1dHRvbi5zZXRUZXh0KCdcdUQ4M0RcdURDREQnKTtcclxuICAgIHJlZmVyZW5jZU5vdGVCdXR0b24uc2V0QXR0cmlidXRlKCdhcmlhLWxhYmVsJywgJ1RvZ2dsZSByZWZlcmVuY2luZyBjdXJyZW50IG5vdGUnKTtcclxuICAgIHJlZmVyZW5jZU5vdGVCdXR0b24uYWRkQ2xhc3MoJ2FpLWNoYXQtcmVmZXJlbmNlLWJ1dHRvbicpO1xyXG4gICAgcmVmZXJlbmNlTm90ZUJ1dHRvbi5zdHlsZS5mb250U2l6ZSA9ICcwLjg1ZW0nO1xyXG4gICAgcmVmZXJlbmNlTm90ZUJ1dHRvbi5zdHlsZS5mb250RmFtaWx5ID0gJ2luaGVyaXQnO1xyXG4gICAgcmVmZXJlbmNlTm90ZUJ1dHRvbi5zdHlsZS53aWR0aCA9ICcxLjhlbSc7XHJcbiAgICByZWZlcmVuY2VOb3RlQnV0dG9uLnN0eWxlLmhlaWdodCA9ICcxLjhlbSc7XHJcbiAgICByZWZlcmVuY2VOb3RlQnV0dG9uLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwLjJlbSc7XHJcbiAgICByZWZlcmVuY2VOb3RlQnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMC43JztcclxuICAgIHRvcEJ1dHRvbkNvbnRhaW5lci5hcHBlbmRDaGlsZChyZWZlcmVuY2VOb3RlQnV0dG9uKTtcclxuICAgIC8vIC0tLSBSRUZFUkVOQ0UgTk9URSBJTkRJQ0FUT1IgKG5vdyB1bmRlciB0aGUgYnV0dG9uKSAtLS1cclxuICAgIGNvbnN0IHJlZmVyZW5jZU5vdGVJbmRpY2F0b3IgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcclxuICAgIHJlZmVyZW5jZU5vdGVJbmRpY2F0b3IuY2xhc3NOYW1lID0gJ2FpLXJlZmVyZW5jZS1ub3RlLWluZGljYXRvcic7XHJcbiAgICByZWZlcmVuY2VOb3RlSW5kaWNhdG9yLnN0eWxlLnRleHRBbGlnbiA9ICdjZW50ZXInO1xyXG4gICAgcmVmZXJlbmNlTm90ZUluZGljYXRvci5zdHlsZS5vcGFjaXR5ID0gJzAuNSc7XHJcbiAgICByZWZlcmVuY2VOb3RlSW5kaWNhdG9yLnN0eWxlLmZvbnRTaXplID0gJzAuODVlbSc7XHJcbiAgICByZWZlcmVuY2VOb3RlSW5kaWNhdG9yLnN0eWxlLm1hcmdpbiA9ICcwLjFlbSAwIDAuMmVtIDAnO1xyXG4gICAgcmVmZXJlbmNlTm90ZUluZGljYXRvci5zdHlsZS5kaXNwbGF5ID0gJ25vbmUnO1xyXG4gICAgdG9wQnV0dG9uQ29udGFpbmVyLmFwcGVuZENoaWxkKHJlZmVyZW5jZU5vdGVJbmRpY2F0b3IpO1xyXG5cclxuICAgIC8vIE1lc3NhZ2VzIGNvbnRhaW5lclxyXG4gICAgY29uc3QgbWVzc2FnZXNDb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdhaS1jaGF0LW1lc3NhZ2VzJyk7XHJcblxyXG4gICAgLy8gLS0tIElOUFVUIENPTlRBSU5FUiBBVCBCT1RUT00gLS0tXHJcbiAgICBjb25zdCBpbnB1dENvbnRhaW5lciA9IGNvbnRlbnRFbC5jcmVhdGVEaXYoJ2FpLWNoYXQtaW5wdXQtY29udGFpbmVyJyk7XHJcbiAgICAvLyBUZXh0YXJlYSBmb3IgaW5wdXRcclxuICAgIGNvbnN0IHRleHRhcmVhID0gaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ3RleHRhcmVhJywge1xyXG4gICAgICAgIGNsczogJ2FpLWNoYXQtaW5wdXQnLFxyXG4gICAgICAgIGF0dHI6IHtcclxuICAgICAgICAgICAgcGxhY2Vob2xkZXI6ICdUeXBlIHlvdXIgbWVzc2FnZS4uLicsXHJcbiAgICAgICAgICAgIHJvd3M6ICczJ1xyXG4gICAgICAgIH1cclxuICAgIH0pO1xyXG5cclxuICAgIC8vIFNlbmQgYnV0dG9uIChub3cgbmV4dCB0byB0ZXh0YXJlYSlcclxuICAgIGNvbnN0IHNlbmRCdXR0b24gPSBpbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgIHRleHQ6ICdTZW5kJyxcclxuICAgICAgICBjbHM6ICdtb2QtY3RhJ1xyXG4gICAgfSk7XHJcbiAgICAvLyBTdG9wIGJ1dHRvbiAobm93IG5leHQgdG8gdGV4dGFyZWEsIGhpZGRlbiBpbml0aWFsbHkpXHJcbiAgICBjb25zdCBzdG9wQnV0dG9uID0gaW5wdXRDb250YWluZXIuY3JlYXRlRWwoJ2J1dHRvbicsIHtcclxuICAgICAgICB0ZXh0OiAnU3RvcCcsXHJcbiAgICB9KTtcclxuICAgIHN0b3BCdXR0b24uY2xhc3NMaXN0LmFkZCgnaGlkZGVuJyk7ICAgIC8vIC0tLSBUSU5ZIEhFTFAgQlVUVE9OIEFCT1ZFIFNFTkQgQlVUVE9OIC0tLVxyXG4gICAgY29uc3QgaGVscEJ1dHRvbiA9IGlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcbiAgICAgICAgdGV4dDogJz8nLFxyXG4gICAgfSk7XHJcbiAgICBoZWxwQnV0dG9uLnNldEF0dHIoJ2FyaWEtbGFiZWwnLCAnU2hvdyBjaGF0IGhlbHAnKTtcclxuICAgIGhlbHBCdXR0b24uc3R5bGUuZm9udFNpemUgPSAnMC45ZW0nO1xyXG4gICAgaGVscEJ1dHRvbi5zdHlsZS53aWR0aCA9ICcxLjhlbSc7XHJcbiAgICBoZWxwQnV0dG9uLnN0eWxlLmhlaWdodCA9ICcxLjhlbSc7XHJcbiAgICBoZWxwQnV0dG9uLnN0eWxlLm1hcmdpbkJvdHRvbSA9ICcwLjJlbSc7XHJcbiAgICBoZWxwQnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMC43JztcclxuICAgIGhlbHBCdXR0b24uc3R5bGUucG9zaXRpb24gPSAnYWJzb2x1dGUnO1xyXG4gICAgaGVscEJ1dHRvbi5zdHlsZS5yaWdodCA9ICcwLjVlbSc7XHJcbiAgICBoZWxwQnV0dG9uLnN0eWxlLnRvcCA9ICctMi4yZW0nO1xyXG4gICAgaGVscEJ1dHRvbi5zdHlsZS56SW5kZXggPSAnMic7XHJcblxyXG4gICAgLy8gLS0tIEFHRU5UIE1PREUgQlVUVE9OIE5FWFQgVE8gSEVMUCBCVVRUT04gLS0tXHJcbiAgICBjb25zdCBhZ2VudE1vZGVCdXR0b24gPSBpbnB1dENvbnRhaW5lci5jcmVhdGVFbCgnYnV0dG9uJywge1xyXG4gICAgICAgIHRleHQ6ICdcdUQ4M0VcdUREMTYnLFxyXG4gICAgfSk7XHJcbiAgICBhZ2VudE1vZGVCdXR0b24uc2V0QXR0cignYXJpYS1sYWJlbCcsICdUb2dnbGUgQWdlbnQgTW9kZScpO1xyXG4gICAgYWdlbnRNb2RlQnV0dG9uLnN0eWxlLmZvbnRTaXplID0gJzAuOWVtJztcclxuICAgIGFnZW50TW9kZUJ1dHRvbi5zdHlsZS53aWR0aCA9ICcxLjhlbSc7XHJcbiAgICBhZ2VudE1vZGVCdXR0b24uc3R5bGUuaGVpZ2h0ID0gJzEuOGVtJztcclxuICAgIGFnZW50TW9kZUJ1dHRvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMC4yZW0nO1xyXG4gICAgYWdlbnRNb2RlQnV0dG9uLnN0eWxlLm9wYWNpdHkgPSAnMC43JztcclxuICAgIGFnZW50TW9kZUJ1dHRvbi5zdHlsZS5wb3NpdGlvbiA9ICdhYnNvbHV0ZSc7XHJcbiAgICBhZ2VudE1vZGVCdXR0b24uc3R5bGUucmlnaHQgPSAnMi44ZW0nOyAvLyBQb3NpdGlvbiB0byB0aGUgbGVmdCBvZiBoZWxwIGJ1dHRvblxyXG4gICAgYWdlbnRNb2RlQnV0dG9uLnN0eWxlLnRvcCA9ICctMi4yZW0nO1xyXG4gICAgYWdlbnRNb2RlQnV0dG9uLnN0eWxlLnpJbmRleCA9ICcyJztcclxuXHJcbiAgICBpbnB1dENvbnRhaW5lci5hcHBlbmRDaGlsZChhZ2VudE1vZGVCdXR0b24pO1xyXG5cclxuICAgIC8vIC0tLSBUSU5ZIFJFRkVSRU5DRSBOT1RFIEJVVFRPTiBORVhUIFRPIEhFTFAgQlVUVE9OIC0tLVxyXG4gICAgLy8gY29uc3QgcmVmZXJlbmNlTm90ZUJ1dHRvbiA9IGlucHV0Q29udGFpbmVyLmNyZWF0ZUVsKCdidXR0b24nLCB7XHJcbiAgICAvLyAgICAgdGV4dDogJ1x1RDgzRFx1RENERCcsXHJcbiAgICAvLyB9KTtcclxuICAgIC8vIHJlZmVyZW5jZU5vdGVCdXR0b24uc2V0QXR0cignYXJpYS1sYWJlbCcsICdSZWZlcmVuY2UgY3VycmVudCBub3RlIHNldHRpbmdzJyk7XHJcbiAgICAvLyByZWZlcmVuY2VOb3RlQnV0dG9uLnN0eWxlLmZvbnRTaXplID0gJzAuOWVtJztcclxuICAgIC8vIHJlZmVyZW5jZU5vdGVCdXR0b24uc3R5bGUud2lkdGggPSAnMS44ZW0nO1xyXG4gICAgLy8gcmVmZXJlbmNlTm90ZUJ1dHRvbi5zdHlsZS5oZWlnaHQgPSAnMS44ZW0nO1xyXG4gICAgLy8gcmVmZXJlbmNlTm90ZUJ1dHRvbi5zdHlsZS5tYXJnaW5Cb3R0b20gPSAnMC4yZW0nO1xyXG4gICAgLy8gcmVmZXJlbmNlTm90ZUJ1dHRvbi5zdHlsZS5vcGFjaXR5ID0gJzAuNyc7XHJcbiAgICAvLyByZWZlcmVuY2VOb3RlQnV0dG9uLnN0eWxlLnBvc2l0aW9uID0gJ2Fic29sdXRlJztcclxuICAgIC8vIHJlZmVyZW5jZU5vdGVCdXR0b24uc3R5bGUucmlnaHQgPSAnMi44ZW0nOyAvLyBQb3NpdGlvbiB0byB0aGUgbGVmdCBvZiBoZWxwIGJ1dHRvblxyXG4gICAgLy8gcmVmZXJlbmNlTm90ZUJ1dHRvbi5zdHlsZS50b3AgPSAnLTIuMmVtJztcclxuICAgIC8vIHJlZmVyZW5jZU5vdGVCdXR0b24uc3R5bGUuekluZGV4ID0gJzInO1xyXG4gICAgXHJcbiAgICBpbnB1dENvbnRhaW5lci5zdHlsZS5wb3NpdGlvbiA9ICdyZWxhdGl2ZSc7XHJcblxyXG4gICAgLy8gQWZ0ZXIgYWxsIGJ1dHRvbiBjcmVhdGlvbnMgaW4gdG9wQnV0dG9uQ29udGFpbmVyLCBhcHBseSBjb25zaXN0ZW50IGZvbnQgc2l6ZSBhbmQgZm9udCBmYW1pbHlcclxuICAgIFt0b3BCdXR0b25Db250YWluZXIucXVlcnlTZWxlY3RvckFsbCgnYnV0dG9uJyldLmZvckVhY2goYnRucyA9PiB7XHJcbiAgICAgIGJ0bnMuZm9yRWFjaChidG4gPT4ge1xyXG4gICAgICAgIGJ0bi5zdHlsZS5mb250U2l6ZSA9ICcwLjg1ZW0nO1xyXG4gICAgICAgIGJ0bi5zdHlsZS5mb250RmFtaWx5ID0gJ2luaGVyaXQnO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG5cclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgY29udGVudEVsLFxyXG4gICAgICAgIGZhZGVkSGVscCxcclxuICAgICAgICB0b3BCdXR0b25Db250YWluZXIsXHJcbiAgICAgICAgc2V0dGluZ3NCdXR0b24sXHJcbiAgICAgICAgY29weUFsbEJ1dHRvbixcclxuICAgICAgICBzYXZlTm90ZUJ1dHRvbixcclxuICAgICAgICBjbGVhckJ1dHRvbixcclxuICAgICAgICBtZXNzYWdlc0NvbnRhaW5lcixcclxuICAgICAgICBpbnB1dENvbnRhaW5lcixcclxuICAgICAgICB0ZXh0YXJlYSxcclxuICAgICAgICBzZW5kQnV0dG9uLFxyXG4gICAgICAgIHN0b3BCdXR0b24sXHJcbiAgICAgICAgaGVscEJ1dHRvbixcclxuICAgICAgICBhZ2VudE1vZGVCdXR0b24sIC8vIDwtLSBhZGQgdG8gcmV0dXJuIG9iamVjdFxyXG4gICAgICAgIHJlZmVyZW5jZU5vdGVCdXR0b24sXHJcbiAgICAgICAgcmVmZXJlbmNlTm90ZUluZGljYXRvcixcclxuICAgIH07XHJcbn1cclxuIiwgIi8vIEhhbmRsZXMgY2hhdCBoaXN0b3J5IHJlbmRlcmluZyBhbmQgcGVyc2lzdGVuY2VcclxuLy8gaW1wb3J0IHsgQ2hhdE1lc3NhZ2UgfSBmcm9tICcuLi8uLi90eXBlcyc7IC8vIFJlbW92ZSB0aGlzIGxpbmUsIG5vdCBleHBvcnRlZFxyXG5pbXBvcnQgeyBjcmVhdGVNZXNzYWdlRWxlbWVudCB9IGZyb20gJy4vTWVzc2FnZSc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVuZGVyQ2hhdEhpc3Rvcnkoe1xyXG4gICAgbWVzc2FnZXNDb250YWluZXIsXHJcbiAgICBsb2FkZWRIaXN0b3J5LFxyXG4gICAgY2hhdEhpc3RvcnlNYW5hZ2VyLFxyXG4gICAgcGx1Z2luLFxyXG4gICAgcmVnZW5lcmF0ZVJlc3BvbnNlLFxyXG4gICAgc2Nyb2xsVG9Cb3R0b20gPSB0cnVlXHJcbn06IHtcclxuICAgIG1lc3NhZ2VzQ29udGFpbmVyOiBIVE1MRWxlbWVudCxcclxuICAgIGxvYWRlZEhpc3Rvcnk6IGFueVtdLCAvLyBVc2UgYW55W10gaWYgQ2hhdE1lc3NhZ2UgaXMgbm90IGV4cG9ydGVkXHJcbiAgICBjaGF0SGlzdG9yeU1hbmFnZXI6IGFueSxcclxuICAgIHBsdWdpbjogYW55LFxyXG4gICAgcmVnZW5lcmF0ZVJlc3BvbnNlOiAoZWw6IEhUTUxFbGVtZW50KSA9PiB2b2lkLFxyXG4gICAgc2Nyb2xsVG9Cb3R0b20/OiBib29sZWFuXHJcbn0pIHtcclxuICAgIG1lc3NhZ2VzQ29udGFpbmVyLmVtcHR5KCk7XHJcbiAgICBmb3IgKGNvbnN0IG1zZyBvZiBsb2FkZWRIaXN0b3J5KSB7XHJcbiAgICAgICAgaWYgKG1zZy5zZW5kZXIgPT09ICd1c2VyJyB8fCBtc2cuc2VuZGVyID09PSAnYXNzaXN0YW50Jykge1xyXG4gICAgICAgICAgICBjb25zdCBtZXNzYWdlRWwgPSBhd2FpdCBjcmVhdGVNZXNzYWdlRWxlbWVudChcclxuICAgICAgICAgICAgICAgIHBsdWdpbi5hcHAsXHJcbiAgICAgICAgICAgICAgICBtc2cuc2VuZGVyIGFzICd1c2VyJyB8ICdhc3Npc3RhbnQnLFxyXG4gICAgICAgICAgICAgICAgbXNnLmNvbnRlbnQsXHJcbiAgICAgICAgICAgICAgICBjaGF0SGlzdG9yeU1hbmFnZXIsXHJcbiAgICAgICAgICAgICAgICBwbHVnaW4sXHJcbiAgICAgICAgICAgICAgICByZWdlbmVyYXRlUmVzcG9uc2UsXHJcbiAgICAgICAgICAgICAgICBwbHVnaW4gLy8gcGFyZW50Q29tcG9uZW50XHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VFbC5kYXRhc2V0LnRpbWVzdGFtcCA9IG1zZy50aW1lc3RhbXA7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VzQ29udGFpbmVyLmFwcGVuZENoaWxkKG1lc3NhZ2VFbCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgaWYgKHNjcm9sbFRvQm90dG9tKSB7XHJcbiAgICAgICAgbWVzc2FnZXNDb250YWluZXIuc2Nyb2xsVG9wID0gbWVzc2FnZXNDb250YWluZXIuc2Nyb2xsSGVpZ2h0O1xyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIE5vdGljZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IE15UGx1Z2luIGZyb20gJy4uLy4uL21haW4nO1xyXG5pbXBvcnQgeyBUb29sQ29tbWFuZCwgVG9vbFJlc3VsdCwgTWVzc2FnZSB9IGZyb20gJy4uLy4uL3R5cGVzJztcclxuaW1wb3J0IHsgQ29tbWFuZFBhcnNlciB9IGZyb20gJy4vQ29tbWFuZFBhcnNlcic7XHJcbmltcG9ydCB7IFRvb2xSZWdpc3RyeSB9IGZyb20gJy4vVG9vbFJlZ2lzdHJ5JztcclxuaW1wb3J0IHsgRmlsZVNlbGVjdFRvb2wgfSBmcm9tICcuL3Rvb2xzL0ZpbGVTZWxlY3RUb29sJztcclxuaW1wb3J0IHsgRmlsZVJlYWRUb29sIH0gZnJvbSAnLi90b29scy9GaWxlUmVhZFRvb2wnO1xyXG5pbXBvcnQgeyBGaWxlV3JpdGVUb29sIH0gZnJvbSAnLi90b29scy9GaWxlV3JpdGVUb29sJztcclxuaW1wb3J0IHsgRmlsZURpZmZUb29sIH0gZnJvbSAnLi90b29scy9GaWxlRGlmZlRvb2wnO1xyXG5pbXBvcnQgeyBUaG91Z2h0VG9vbCB9IGZyb20gJy4vdG9vbHMvVGhvdWdodFRvb2wnO1xyXG5cclxuZXhwb3J0IGludGVyZmFjZSBBZ2VudENvbnRleHQge1xyXG4gICAgYXBwOiBBcHA7XHJcbiAgICBwbHVnaW46IE15UGx1Z2luO1xyXG4gICAgbWVzc2FnZXNDb250YWluZXI6IEhUTUxFbGVtZW50O1xyXG4gICAgb25Ub29sUmVzdWx0OiAodG9vbFJlc3VsdDogVG9vbFJlc3VsdCwgY29tbWFuZDogVG9vbENvbW1hbmQpID0+IHZvaWQ7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBBZ2VudFJlc3BvbnNlSGFuZGxlciB7XHJcbiAgICBwcml2YXRlIGNvbW1hbmRQYXJzZXI6IENvbW1hbmRQYXJzZXI7XHJcbiAgICBwcml2YXRlIHRvb2xSZWdpc3RyeTogVG9vbFJlZ2lzdHJ5O1xyXG4gICAgcHJpdmF0ZSBleGVjdXRpb25Db3VudDogbnVtYmVyID0gMDtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGNvbnRleHQ6IEFnZW50Q29udGV4dCkge1xyXG4gICAgICAgIHRoaXMuY29tbWFuZFBhcnNlciA9IG5ldyBDb21tYW5kUGFyc2VyKCk7XHJcbiAgICAgICAgdGhpcy50b29sUmVnaXN0cnkgPSBuZXcgVG9vbFJlZ2lzdHJ5KCk7XHJcbiAgICAgICAgdGhpcy5pbml0aWFsaXplVG9vbHMoKTtcclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGluaXRpYWxpemVUb29scygpIHtcclxuICAgICAgICAvLyBSZWdpc3RlciBhbGwgYXZhaWxhYmxlIHRvb2xzXHJcbiAgICAgICAgdGhpcy50b29sUmVnaXN0cnkucmVnaXN0ZXIobmV3IEZpbGVTZWxlY3RUb29sKHRoaXMuY29udGV4dC5hcHApKTtcclxuICAgICAgICB0aGlzLnRvb2xSZWdpc3RyeS5yZWdpc3RlcihuZXcgRmlsZVJlYWRUb29sKHRoaXMuY29udGV4dC5hcHApKTtcclxuICAgICAgICB0aGlzLnRvb2xSZWdpc3RyeS5yZWdpc3RlcihuZXcgRmlsZVdyaXRlVG9vbCh0aGlzLmNvbnRleHQuYXBwKSk7XHJcbiAgICAgICAgdGhpcy50b29sUmVnaXN0cnkucmVnaXN0ZXIobmV3IEZpbGVEaWZmVG9vbCh0aGlzLmNvbnRleHQuYXBwKSk7XHJcbiAgICAgICAgdGhpcy50b29sUmVnaXN0cnkucmVnaXN0ZXIobmV3IFRob3VnaHRUb29sKHRoaXMuY29udGV4dC5hcHApKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFByb2Nlc3MgYW4gQUkgcmVzcG9uc2UgYW5kIGhhbmRsZSBhbnkgdG9vbCBjb21tYW5kc1xyXG4gICAgICogQHBhcmFtIHJlc3BvbnNlIFRoZSBBSSByZXNwb25zZSB0ZXh0XHJcbiAgICAgKiBAcmV0dXJucyBPYmplY3QgY29udGFpbmluZyBwcm9jZXNzZWQgdGV4dCBhbmQgZXhlY3V0aW9uIHJlc3VsdHNcclxuICAgICAqL1xyXG4gICAgYXN5bmMgcHJvY2Vzc1Jlc3BvbnNlKHJlc3BvbnNlOiBzdHJpbmcpOiBQcm9taXNlPHtcclxuICAgICAgICBwcm9jZXNzZWRUZXh0OiBzdHJpbmc7XHJcbiAgICAgICAgdG9vbFJlc3VsdHM6IEFycmF5PHsgY29tbWFuZDogVG9vbENvbW1hbmQ7IHJlc3VsdDogVG9vbFJlc3VsdCB9PjtcclxuICAgICAgICBoYXNUb29sczogYm9vbGVhbjtcclxuICAgIH0+IHtcclxuICAgICAgICBjb25zb2xlLmxvZygnQWdlbnRSZXNwb25zZUhhbmRsZXI6IFByb2Nlc3NpbmcgcmVzcG9uc2UsIGFnZW50IG1vZGUgZW5hYmxlZDonLCB0aGlzLmNvbnRleHQucGx1Z2luLmlzQWdlbnRNb2RlRW5hYmxlZCgpKTtcclxuICAgICAgICBjb25zb2xlLmxvZygnQWdlbnRSZXNwb25zZUhhbmRsZXI6IFJlc3BvbnNlIGNvbnRlbnQ6JywgcmVzcG9uc2UpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIC8vIENoZWNrIGlmIGFnZW50IG1vZGUgaXMgZW5hYmxlZFxyXG4gICAgICAgIGlmICghdGhpcy5jb250ZXh0LnBsdWdpbi5pc0FnZW50TW9kZUVuYWJsZWQoKSkge1xyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnQWdlbnRSZXNwb25zZUhhbmRsZXI6IEFnZW50IG1vZGUgZGlzYWJsZWQsIHJldHVybmluZyBvcmlnaW5hbCByZXNwb25zZScpO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkVGV4dDogcmVzcG9uc2UsXHJcbiAgICAgICAgICAgICAgICB0b29sUmVzdWx0czogW10sXHJcbiAgICAgICAgICAgICAgICBoYXNUb29sczogZmFsc2VcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIFBhcnNlIHJlc3BvbnNlIGZvciB0b29sIGNvbW1hbmRzXHJcbiAgICAgICAgY29uc3QgeyB0ZXh0LCBjb21tYW5kcyB9ID0gdGhpcy5jb21tYW5kUGFyc2VyLnBhcnNlUmVzcG9uc2UocmVzcG9uc2UpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdBZ2VudFJlc3BvbnNlSGFuZGxlcjogUGFyc2VkIHRleHQ6JywgdGV4dCk7XHJcbiAgICAgICAgY29uc29sZS5sb2coJ0FnZW50UmVzcG9uc2VIYW5kbGVyOiBGb3VuZCBjb21tYW5kczonLCBjb21tYW5kcyk7XHJcblxyXG4gICAgICAgIC8vIC0tLSBBbHdheXMgdXNlIFRob3VnaHRUb29sIHRvIGRldGVybWluZSB3aGF0IHRvIGRvIC0tLVxyXG4gICAgICAgIGxldCB0aG91Z2h0UmVzdWx0RGlzcGxheSA9ICcnO1xyXG4gICAgICAgIGNvbnN0IHVzZXJSZXF1ZXN0ID0gdGV4dCAmJiB0ZXh0LnRyaW0oKS5sZW5ndGggPiAwID8gdGV4dCA6IHJlc3BvbnNlO1xyXG4gICAgICAgIGNvbnN0IHRob3VnaHRUb29sID0gbmV3IFRob3VnaHRUb29sKHRoaXMuY29udGV4dC5hcHApO1xyXG4gICAgICAgIGNvbnN0IHRob3VnaHRSZXN1bHQgPSBhd2FpdCB0aG91Z2h0VG9vbC5leGVjdXRlKHtcclxuICAgICAgICAgICAgdGhvdWdodDogYEFnZW50IHJlYXNvbmluZzogUmVjZWl2ZWQgdXNlciByZXF1ZXN0OiBcIiR7dXNlclJlcXVlc3R9XCIuIERldGVybWluaW5nIG5leHQgYWN0aW9ucy5gLFxyXG4gICAgICAgICAgICBjYXRlZ29yeTogJ2FuYWx5c2lzJyxcclxuICAgICAgICAgICAgY29uZmlkZW5jZTogN1xyXG4gICAgICAgIH0sIHRoaXMuY29udGV4dCk7XHJcbiAgICAgICAgaWYgKHRob3VnaHRSZXN1bHQuc3VjY2VzcyAmJiB0aG91Z2h0UmVzdWx0LmRhdGEgJiYgdGhvdWdodFJlc3VsdC5kYXRhLmZvcm1hdHRlZFRob3VnaHQpIHtcclxuICAgICAgICAgICAgdGhvdWdodFJlc3VsdERpc3BsYXkgPSBgXFxuJHt0aG91Z2h0UmVzdWx0LmRhdGEuZm9ybWF0dGVkVGhvdWdodH1cXG5gO1xyXG4gICAgICAgICAgICAvLyBPcHRpb25hbGx5LCBkaXNwbGF5IGluIGNoYXQgVUlcclxuICAgICAgICAgICAgaWYgKHRoaXMuY29udGV4dC5tZXNzYWdlc0NvbnRhaW5lcikge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XHJcbiAgICAgICAgICAgICAgICBkaXYuY2xhc3NOYW1lID0gJ2FpLWNoYXQtbWVzc2FnZSB0aG91Z2h0LXRvb2wnO1xyXG4gICAgICAgICAgICAgICAgZGl2LmlubmVySFRNTCA9IGA8ZGl2IGNsYXNzPVwibWVzc2FnZS1jb250ZW50XCI+JHt0aG91Z2h0UmVzdWx0LmRhdGEuZm9ybWF0dGVkVGhvdWdodH08L2Rpdj5gO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0Lm1lc3NhZ2VzQ29udGFpbmVyLmFwcGVuZENoaWxkKGRpdik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gLS0tIEVuZCBUaG91Z2h0VG9vbCBpbnRlZ3JhdGlvbiAtLS1cclxuICAgICAgICBpZiAoY29tbWFuZHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdBZ2VudFJlc3BvbnNlSGFuZGxlcjogTm8gY29tbWFuZHMgZm91bmQsIHJldHVybmluZyBvcmlnaW5hbCB0ZXh0Jyk7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzZWRUZXh0OiAodGhvdWdodFJlc3VsdERpc3BsYXkgPyB0aG91Z2h0UmVzdWx0RGlzcGxheSArICdcXG4nIDogJycpICsgdGV4dCxcclxuICAgICAgICAgICAgICAgIHRvb2xSZXN1bHRzOiBbXSxcclxuICAgICAgICAgICAgICAgIGhhc1Rvb2xzOiBmYWxzZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgZXhlY3V0aW9uIGxpbWl0c1xyXG4gICAgICAgIGNvbnN0IGFnZW50U2V0dGluZ3MgPSB0aGlzLmNvbnRleHQucGx1Z2luLmdldEFnZW50TW9kZVNldHRpbmdzKCk7XHJcbiAgICAgICAgaWYgKHRoaXMuZXhlY3V0aW9uQ291bnQgPj0gYWdlbnRTZXR0aW5ncy5tYXhUb29sQ2FsbHMpIHtcclxuICAgICAgICAgICAgbmV3IE5vdGljZShgQWdlbnQgbW9kZTogTWF4aW11bSB0b29sIGNhbGxzICgke2FnZW50U2V0dGluZ3MubWF4VG9vbENhbGxzfSkgcmVhY2hlZGApO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgcHJvY2Vzc2VkVGV4dDogdGV4dCArICdcXG5cXG4qW1Rvb2wgZXhlY3V0aW9uIGxpbWl0IHJlYWNoZWRdKicsXHJcbiAgICAgICAgICAgICAgICB0b29sUmVzdWx0czogW10sXHJcbiAgICAgICAgICAgICAgICBoYXNUb29sczogdHJ1ZVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gRXhlY3V0ZSB0b29sc1xyXG4gICAgICAgIGNvbnN0IHRvb2xSZXN1bHRzOiBBcnJheTx7IGNvbW1hbmQ6IFRvb2xDb21tYW5kOyByZXN1bHQ6IFRvb2xSZXN1bHQgfT4gPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IGNvbW1hbmQgb2YgY29tbWFuZHMpIHtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHRoaXMuZXhlY3V0ZVRvb2xXaXRoVGltZW91dChjb21tYW5kLCBhZ2VudFNldHRpbmdzLnRpbWVvdXRNcyk7XHJcbiAgICAgICAgICAgICAgICB0b29sUmVzdWx0cy5wdXNoKHsgY29tbWFuZCwgcmVzdWx0IH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5leGVjdXRpb25Db3VudCsrO1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIE5vdGlmeSBjb250ZXh0IGFib3V0IHRvb2wgcmVzdWx0XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbnRleHQub25Ub29sUmVzdWx0KHJlc3VsdCwgY29tbWFuZCk7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gU3RvcCBpZiB3ZSBoaXQgdGhlIGxpbWl0XHJcbiAgICAgICAgICAgICAgICBpZiAodGhpcy5leGVjdXRpb25Db3VudCA+PSBhZ2VudFNldHRpbmdzLm1heFRvb2xDYWxscykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvclJlc3VsdDogVG9vbFJlc3VsdCA9IHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogYFRvb2wgZXhlY3V0aW9uIGZhaWxlZDogJHtlcnJvci5tZXNzYWdlfWAsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVxdWVzdElkOiBjb21tYW5kLnJlcXVlc3RJZFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIHRvb2xSZXN1bHRzLnB1c2goeyBjb21tYW5kLCByZXN1bHQ6IGVycm9yUmVzdWx0IH0pO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb250ZXh0Lm9uVG9vbFJlc3VsdChlcnJvclJlc3VsdCwgY29tbWFuZCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHByb2Nlc3NlZFRleHQ6ICh0aG91Z2h0UmVzdWx0RGlzcGxheSA/IHRob3VnaHRSZXN1bHREaXNwbGF5ICsgJ1xcbicgOiAnJykgKyB0ZXh0LFxyXG4gICAgICAgICAgICB0b29sUmVzdWx0cyxcclxuICAgICAgICAgICAgaGFzVG9vbHM6IHRydWVcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogRXhlY3V0ZSBhIHRvb2wgY29tbWFuZCB3aXRoIHRpbWVvdXRcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBhc3luYyBleGVjdXRlVG9vbFdpdGhUaW1lb3V0KGNvbW1hbmQ6IFRvb2xDb21tYW5kLCB0aW1lb3V0TXM6IG51bWJlcik6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xyXG4gICAgICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHRpbWVvdXQgPSBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgIHJlamVjdChuZXcgRXJyb3IoYFRvb2wgZXhlY3V0aW9uIHRpbWVkIG91dCBhZnRlciAke3RpbWVvdXRNc31tc2ApKTtcclxuICAgICAgICAgICAgfSwgdGltZW91dE1zKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMudG9vbFJlZ2lzdHJ5LmV4ZWN1dGUoY29tbWFuZClcclxuICAgICAgICAgICAgICAgIC50aGVuKHJlc3VsdCA9PiB7XHJcbiAgICAgICAgICAgICAgICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXQpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc29sdmUocmVzdWx0KTtcclxuICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICAuY2F0Y2goZXJyb3IgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0KTtcclxuICAgICAgICAgICAgICAgICAgICByZWplY3QoZXJyb3IpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBSZXNldCBleGVjdXRpb24gY291bnQgKGNhbGwgYXQgc3RhcnQgb2YgbmV3IGNvbnZlcnNhdGlvbilcclxuICAgICAqL1xyXG4gICAgcmVzZXRFeGVjdXRpb25Db3VudCgpIHtcclxuICAgICAgICB0aGlzLmV4ZWN1dGlvbkNvdW50ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEdldCBhdmFpbGFibGUgdG9vbHMgaW5mb3JtYXRpb25cclxuICAgICAqL1xyXG4gICAgZ2V0QXZhaWxhYmxlVG9vbHMoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMudG9vbFJlZ2lzdHJ5LmdldEF2YWlsYWJsZVRvb2xzKCk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXQgdG9vbCBleGVjdXRpb24gc3RhdGlzdGljc1xyXG4gICAgICovXHJcbiAgICBnZXRFeGVjdXRpb25TdGF0cygpIHtcclxuICAgICAgICBjb25zdCBhZ2VudFNldHRpbmdzID0gdGhpcy5jb250ZXh0LnBsdWdpbi5nZXRBZ2VudE1vZGVTZXR0aW5ncygpO1xyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIGV4ZWN1dGlvbkNvdW50OiB0aGlzLmV4ZWN1dGlvbkNvdW50LFxyXG4gICAgICAgICAgICBtYXhUb29sQ2FsbHM6IGFnZW50U2V0dGluZ3MubWF4VG9vbENhbGxzLFxyXG4gICAgICAgICAgICByZW1haW5pbmc6IE1hdGgubWF4KDAsIGFnZW50U2V0dGluZ3MubWF4VG9vbENhbGxzIC0gdGhpcy5leGVjdXRpb25Db3VudClcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogQ3JlYXRlIGEgbWVzc2FnZSB3aXRoIHRvb2wgZXhlY3V0aW9uIHJlc3VsdHMgZm9yIGNvbnRleHRcclxuICAgICAqL1xyXG4gICAgY3JlYXRlVG9vbFJlc3VsdE1lc3NhZ2UodG9vbFJlc3VsdHM6IEFycmF5PHsgY29tbWFuZDogVG9vbENvbW1hbmQ7IHJlc3VsdDogVG9vbFJlc3VsdCB9Pik6IE1lc3NhZ2UgfCBudWxsIHtcclxuICAgICAgICBpZiAodG9vbFJlc3VsdHMubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBudWxsO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgcmVzdWx0VGV4dCA9IHRvb2xSZXN1bHRzLm1hcCgoeyBjb21tYW5kLCByZXN1bHQgfSkgPT4ge1xyXG4gICAgICAgICAgICBjb25zdCBzdGF0dXMgPSByZXN1bHQuc3VjY2VzcyA/ICdcdTI3MTMnIDogJ1x1MjcxNyc7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSByZXN1bHQuc3VjY2VzcyA/IEpTT04uc3RyaW5naWZ5KHJlc3VsdC5kYXRhLCBudWxsLCAyKSA6IHJlc3VsdC5lcnJvcjtcclxuICAgICAgICAgICAgcmV0dXJuIGAke3N0YXR1c30gVG9vbDogJHtjb21tYW5kLmFjdGlvbn1cXG5QYXJhbWV0ZXJzOiAke0pTT04uc3RyaW5naWZ5KGNvbW1hbmQucGFyYW1ldGVycywgbnVsbCwgMil9XFxuUmVzdWx0OiAke2RhdGF9YDtcclxuICAgICAgICB9KS5qb2luKCdcXG5cXG4nKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgcm9sZTogJ3N5c3RlbScsXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IGBUb29sIGV4ZWN1dGlvbiByZXN1bHRzOlxcblxcbiR7cmVzdWx0VGV4dH1gXHJcbiAgICAgICAgfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEhlbHBlciB0byBlbnN1cmUgYSBmaWxlIHBhdGggaXMgcmVsYXRpdmUgdG8gdGhlIHZhdWx0IHJvb3QgYW5kIHN0cmlwcyAubWQgZXh0ZW5zaW9uIGZvciBPYnNpZGlhbiBsaW5rc1xyXG4gICAgICovXHJcbiAgICBwcml2YXRlIGdldFJlbGF0aXZlUGF0aChmaWxlUGF0aDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBhZGFwdGVyOiBhbnkgPSB0aGlzLmNvbnRleHQuYXBwLnZhdWx0LmFkYXB0ZXI7XHJcbiAgICAgICAgY29uc3QgdmF1bHRSb290ID0gYWRhcHRlcj8uYmFzZVBhdGggPyBhZGFwdGVyLmJhc2VQYXRoLnJlcGxhY2UoL1xcXFwvZywgJy8nKSA6ICcnO1xyXG4gICAgICAgIGxldCByZWxQYXRoID0gZmlsZVBhdGgucmVwbGFjZSgvXFxcXC9nLCAnLycpO1xyXG4gICAgICAgIGlmICh2YXVsdFJvb3QgJiYgcmVsUGF0aC5zdGFydHNXaXRoKHZhdWx0Um9vdCkpIHtcclxuICAgICAgICAgICAgcmVsUGF0aCA9IHJlbFBhdGguc2xpY2UodmF1bHRSb290Lmxlbmd0aCk7XHJcbiAgICAgICAgICAgIGlmIChyZWxQYXRoLnN0YXJ0c1dpdGgoJy8nKSkgcmVsUGF0aCA9IHJlbFBhdGguc2xpY2UoMSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIFN0cmlwIC5tZCBleHRlbnNpb24gZm9yIE9ic2lkaWFuIGxpbmtzXHJcbiAgICAgICAgaWYgKHJlbFBhdGgudG9Mb3dlckNhc2UoKS5lbmRzV2l0aCgnLm1kJykpIHtcclxuICAgICAgICAgICAgcmVsUGF0aCA9IHJlbFBhdGguc2xpY2UoMCwgLTMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gcmVsUGF0aDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIEZvcm1hdCB0b29sIHJlc3VsdHMgZm9yIGRpc3BsYXkgaW4gY2hhdFxyXG4gICAgICovXHJcbiAgICBmb3JtYXRUb29sUmVzdWx0c0ZvckRpc3BsYXkodG9vbFJlc3VsdHM6IEFycmF5PHsgY29tbWFuZDogVG9vbENvbW1hbmQ7IHJlc3VsdDogVG9vbFJlc3VsdCB9Pik6IHN0cmluZyB7XHJcbiAgICAgICAgaWYgKHRvb2xSZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gJyc7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCByZXN1bHRUZXh0ID0gdG9vbFJlc3VsdHMubWFwKCh7IGNvbW1hbmQsIHJlc3VsdCB9KSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXR1cyA9IHJlc3VsdC5zdWNjZXNzID8gJ1x1MjcwNScgOiAnXHUyNzRDJztcclxuICAgICAgICAgICAgY29uc3QgYWN0aW9uID0gY29tbWFuZC5hY3Rpb24ucmVwbGFjZSgnXycsICcgJyk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MpIHtcclxuICAgICAgICAgICAgICAgIGxldCBjb250ZXh0ID0gJyc7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIC8vIEFkZCBzcGVjaWZpYyBjb250ZXh0IGJhc2VkIG9uIHRoZSB0b29sIGFuZCByZXN1bHQgZGF0YVxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdC5kYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3dpdGNoIChjb21tYW5kLmFjdGlvbikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICdmaWxlX3dyaXRlJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmlsZV9yZWFkJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FzZSAnZmlsZV9kaWZmJzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZGF0YS5maWxlUGF0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJlbFBhdGggPSB0aGlzLmdldFJlbGF0aXZlUGF0aChyZXN1bHQuZGF0YS5maWxlUGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCA9IGAgW1ske3JlbFBhdGh9XV1gO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNhc2UgJ2ZpbGVfc2VsZWN0JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZGF0YS5jb3VudCAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dCA9IGAgW1ske3Jlc3VsdC5kYXRhLmNvdW50fSBmaWxlcyBmb3VuZF1dYDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYXNlICd0aG91Z2h0JzpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuZGF0YSAmJiByZXN1bHQuZGF0YS5mb3JtYXR0ZWRUaG91Z2h0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdC5kYXRhLmZvcm1hdHRlZFRob3VnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIHJldHVybiBgJHtzdGF0dXN9ICoqJHthY3Rpb259KiogY29tcGxldGVkIHN1Y2Nlc3NmdWxseSR7Y29udGV4dH1gO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGAke3N0YXR1c30gKioke2FjdGlvbn0qKiBmYWlsZWQ6ICR7cmVzdWx0LmVycm9yfWA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5qb2luKCdcXG4nKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGBcXG5cXG4qKlRvb2wgRXhlY3V0aW9uOioqXFxuJHtyZXN1bHRUZXh0fWA7XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCB7IFRvb2xDb21tYW5kIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIFBhcnNlcyBBSSByZXNwb25zZXMgdG8gZXh0cmFjdCB0b29sIGNvbW1hbmRzIGFuZCByZWd1bGFyIHRleHRcclxuICovXHJcbmV4cG9ydCBjbGFzcyBDb21tYW5kUGFyc2VyIHtcclxuICAgIC8qKlxyXG4gICAgICogUGFyc2UgQUkgcmVzcG9uc2UgdG8gZXh0cmFjdCB0b29sIGNvbW1hbmRzIGFuZCByZWd1bGFyIHRleHRcclxuICAgICAqIEBwYXJhbSByZXNwb25zZSBUaGUgQUkgcmVzcG9uc2Ugc3RyaW5nXHJcbiAgICAgKiBAcmV0dXJucyBPYmplY3QgY29udGFpbmluZyBzZXBhcmF0ZWQgdGV4dCBhbmQgY29tbWFuZHNcclxuICAgICAqL1xyXG4gICAgcGFyc2VSZXNwb25zZShyZXNwb25zZTogc3RyaW5nKToge1xyXG4gICAgICAgIHRleHQ6IHN0cmluZztcclxuICAgICAgICBjb21tYW5kczogVG9vbENvbW1hbmRbXTtcclxuICAgIH0ge1xyXG4gICAgICAgIGNvbnN0IGNvbW1hbmRzOiBUb29sQ29tbWFuZFtdID0gW107XHJcbiAgICAgICAgbGV0IGNsZWFuVGV4dCA9IHJlc3BvbnNlO1xyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnQ29tbWFuZFBhcnNlcjogUGFyc2luZyByZXNwb25zZTonLCByZXNwb25zZSk7XHJcblxyXG4gICAgICAgIC8vIEV4dHJhY3QgSlNPTiBjb21tYW5kcyBmcm9tIHRoZSByZXNwb25zZVxyXG4gICAgICAgIGNvbnN0IGV4dHJhY3RlZENvbW1hbmRzID0gdGhpcy5leHRyYWN0Q29tbWFuZHMocmVzcG9uc2UpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnNvbGUubG9nKCdDb21tYW5kUGFyc2VyOiBFeHRyYWN0ZWQgY29tbWFuZHM6JywgZXh0cmFjdGVkQ29tbWFuZHMpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGZvciAoY29uc3QgY29tbWFuZCBvZiBleHRyYWN0ZWRDb21tYW5kcykge1xyXG4gICAgICAgICAgICBpZiAodGhpcy52YWxpZGF0ZUNvbW1hbmQoY29tbWFuZC5jb21tYW5kKSkge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbW1hbmRQYXJzZXI6IFZhbGlkIGNvbW1hbmQgZm91bmQ6JywgY29tbWFuZC5jb21tYW5kKTtcclxuICAgICAgICAgICAgICAgIGNvbW1hbmRzLnB1c2goY29tbWFuZC5jb21tYW5kKTtcclxuICAgICAgICAgICAgICAgIC8vIFJlbW92ZSB0aGUgSlNPTiBjb21tYW5kIGZyb20gdGhlIHRleHRcclxuICAgICAgICAgICAgICAgIGNsZWFuVGV4dCA9IGNsZWFuVGV4dC5yZXBsYWNlKGNvbW1hbmQub3JpZ2luYWxUZXh0LCAnJykudHJpbSgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2coJ0NvbW1hbmRQYXJzZXI6IEludmFsaWQgY29tbWFuZDonLCBjb21tYW5kLmNvbW1hbmQpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zb2xlLmxvZygnQ29tbWFuZFBhcnNlcjogRmluYWwgcmVzdWx0IC0gdGV4dDonLCBjbGVhblRleHQsICdjb21tYW5kczonLCBjb21tYW5kcyk7XHJcblxyXG4gICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgIHRleHQ6IGNsZWFuVGV4dCxcclxuICAgICAgICAgICAgY29tbWFuZHNcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogVmFsaWRhdGUgdGhhdCBhIGNvbW1hbmQgaGFzIHRoZSByZXF1aXJlZCBzdHJ1Y3R1cmVcclxuICAgICAqIEBwYXJhbSBjb21tYW5kIFRoZSBjb21tYW5kIHRvIHZhbGlkYXRlXHJcbiAgICAgKiBAcmV0dXJucyBUcnVlIGlmIGNvbW1hbmQgaXMgdmFsaWRcclxuICAgICAqL1xyXG4gICAgdmFsaWRhdGVDb21tYW5kKGNvbW1hbmQ6IFRvb2xDb21tYW5kKTogYm9vbGVhbiB7XHJcbiAgICAgICAgaWYgKCFjb21tYW5kIHx8IHR5cGVvZiBjb21tYW5kICE9PSAnb2JqZWN0Jykge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvLyBDaGVjayByZXF1aXJlZCBmaWVsZHNcclxuICAgICAgICBpZiAoIWNvbW1hbmQuYWN0aW9uIHx8IHR5cGVvZiBjb21tYW5kLmFjdGlvbiAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFjb21tYW5kLnBhcmFtZXRlcnMgfHwgdHlwZW9mIGNvbW1hbmQucGFyYW1ldGVycyAhPT0gJ29iamVjdCcpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gQ2hlY2sgZm9yIHZhbGlkIGFjdGlvbiBuYW1lc1xyXG4gICAgICAgIGNvbnN0IHZhbGlkQWN0aW9ucyA9IFsnZmlsZV9zZWxlY3QnLCAnZmlsZV9kaWZmJywgJ2ZpbGVfcmVhZCcsICdmaWxlX3dyaXRlJywgJ3Rob3VnaHQnXTtcclxuICAgICAgICBpZiAoIXZhbGlkQWN0aW9ucy5pbmNsdWRlcyhjb21tYW5kLmFjdGlvbikpIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBFeHRyYWN0IEpTT04gY29tbWFuZHMgZnJvbSB0ZXh0XHJcbiAgICAgKiBAcGFyYW0gdGV4dCBUaGUgdGV4dCB0byBleHRyYWN0IGNvbW1hbmRzIGZyb21cclxuICAgICAqIEByZXR1cm5zIEFycmF5IG9mIGV4dHJhY3RlZCBjb21tYW5kcyB3aXRoIHRoZWlyIG9yaWdpbmFsIHRleHRcclxuICAgICAqL1xyXG4gICAgZXh0cmFjdENvbW1hbmRzKHRleHQ6IHN0cmluZyk6IEFycmF5PHsgY29tbWFuZDogVG9vbENvbW1hbmQ7IG9yaWdpbmFsVGV4dDogc3RyaW5nIH0+IHtcclxuICAgICAgICBjb25zdCBjb21tYW5kczogQXJyYXk8eyBjb21tYW5kOiBUb29sQ29tbWFuZDsgb3JpZ2luYWxUZXh0OiBzdHJpbmcgfT4gPSBbXTtcclxuICAgICAgICBcclxuICAgICAgICAvLyBGaXJzdCB0cnkgdG8gcGFyc2UgdGhlIGVudGlyZSB0ZXh0IGFzIEpTT04gKGZvciByYXcgSlNPTiByZXNwb25zZXMpXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcGFyc2VkID0gSlNPTi5wYXJzZSh0ZXh0LnRyaW0oKSk7XHJcbiAgICAgICAgICAgIGlmIChwYXJzZWQuYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgcGFyYW1ldGVycyA9IHBhcnNlZC5wYXJhbWV0ZXJzO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGUgbGVnYWN5IGZvcm1hdCB3aGVyZSBwYXJhbWV0ZXJzIGFyZSBhdCB0aGUgcm9vdCBsZXZlbFxyXG4gICAgICAgICAgICAgICAgaWYgKCFwYXJhbWV0ZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVycyA9IHsgLi4ucGFyc2VkIH07XHJcbiAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHBhcmFtZXRlcnMuYWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgIGRlbGV0ZSBwYXJhbWV0ZXJzLnJlcXVlc3RJZDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgY29tbWFuZHMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgY29tbWFuZDoge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IHBhcnNlZC5hY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnM6IHBhcmFtZXRlcnMsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJlcXVlc3RJZDogcGFyc2VkLnJlcXVlc3RJZCB8fCB0aGlzLmdlbmVyYXRlUmVxdWVzdElkKClcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIG9yaWdpbmFsVGV4dDogdGV4dC50cmltKClcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNvbW1hbmRzO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgLy8gTm90IHJhdyBKU09OLCBjb250aW51ZSB3aXRoIHBhdHRlcm4gbWF0Y2hpbmdcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgLy8gTG9vayBmb3IgSlNPTiBibG9ja3MgdGhhdCBtYXRjaCB0aGUgdG9vbCBjb21tYW5kIHN0cnVjdHVyZVxyXG4gICAgICAgIGNvbnN0IHBhdHRlcm5zID0gW1xyXG4gICAgICAgICAgICAvYGBganNvblxccyooXFx7W1xcc1xcU10qP1xcfSlcXHMqYGBgL2csICAvLyBKU09OIGluIGNvZGUgYmxvY2tzXHJcbiAgICAgICAgICAgIC9gYGBcXHMqKFxce1tcXHNcXFNdKj9cXH0pXFxzKmBgYC9nLCAgICAgIC8vIEpTT04gaW4gZ2VuZXJpYyBjb2RlIGJsb2Nrc1xyXG4gICAgICAgICAgICAvKFxce1tcXHNcXFNdKj9cXH0pL2cgICAgICAgICAgICAgICAgICAgLy8gQW55IEpTT04tbGlrZSBvYmplY3RzXHJcbiAgICAgICAgXTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGNvbnN0IHBhdHRlcm4gb2YgcGF0dGVybnMpIHtcclxuICAgICAgICAgICAgbGV0IG1hdGNoO1xyXG4gICAgICAgICAgICB3aGlsZSAoKG1hdGNoID0gcGF0dGVybi5leGVjKHRleHQpKSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QganNvblRleHQgPSBtYXRjaFsxXTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsVGV4dCA9IG1hdGNoWzBdO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IEpTT04ucGFyc2UoanNvblRleHQpO1xyXG4gICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIHRoaXMgbG9va3MgbGlrZSBhIHRvb2wgY29tbWFuZFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwYXJzZWQuYWN0aW9uKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCBwYXJhbWV0ZXJzID0gcGFyc2VkLnBhcmFtZXRlcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGUgbGVnYWN5IGZvcm1hdCB3aGVyZSBwYXJhbWV0ZXJzIGFyZSBhdCB0aGUgcm9vdCBsZXZlbFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoIXBhcmFtZXRlcnMpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlcnMgPSB7IC4uLnBhcnNlZCB9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHBhcmFtZXRlcnMuYWN0aW9uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZGVsZXRlIHBhcmFtZXRlcnMucmVxdWVzdElkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb21tYW5kcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvbW1hbmQ6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhY3Rpb246IHBhcnNlZC5hY3Rpb24sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFyYW1ldGVyczogcGFyYW1ldGVycyxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IHBhcnNlZC5yZXF1ZXN0SWQgfHwgdGhpcy5nZW5lcmF0ZVJlcXVlc3RJZCgpXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgb3JpZ2luYWxUZXh0XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gSWdub3JlIGludmFsaWQgSlNPTlxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vIFJlc2V0IHJlZ2V4IGxhc3RJbmRleCBmb3IgbmV4dCBwYXR0ZXJuXHJcbiAgICAgICAgICAgIHBhdHRlcm4ubGFzdEluZGV4ID0gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgcmV0dXJuIGNvbW1hbmRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogR2VuZXJhdGUgYSB1bmlxdWUgcmVxdWVzdCBJRFxyXG4gICAgICogQHJldHVybnMgQSB1bmlxdWUgcmVxdWVzdCBJRCBzdHJpbmdcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZVJlcXVlc3RJZCgpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiBgcmVxXyR7RGF0ZS5ub3coKX1fJHtNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHIoMiwgOSl9YDtcclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgVG9vbENvbW1hbmQsIFRvb2xSZXN1bHQgfSBmcm9tICcuLi8uLi90eXBlcyc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRvb2wge1xyXG4gICAgbmFtZTogc3RyaW5nO1xyXG4gICAgZGVzY3JpcHRpb246IHN0cmluZztcclxuICAgIHBhcmFtZXRlcnM6IFJlY29yZDxzdHJpbmcsIGFueT47XHJcbiAgICBleGVjdXRlKHBhcmFtczogYW55LCBjb250ZXh0OiBhbnkpOiBQcm9taXNlPFRvb2xSZXN1bHQ+O1xyXG59XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRvb2xDb250ZXh0IHtcclxuICAgIGFwcDogYW55O1xyXG4gICAgcGx1Z2luOiBhbnk7XHJcbn1cclxuXHJcbmV4cG9ydCB0eXBlIHsgVG9vbFJlc3VsdCB9O1xyXG5cclxuZXhwb3J0IGNsYXNzIFRvb2xSZWdpc3RyeSB7XHJcbiAgICBwcml2YXRlIHRvb2xzOiBNYXA8c3RyaW5nLCBUb29sPiA9IG5ldyBNYXAoKTtcclxuXHJcbiAgICByZWdpc3Rlcih0b29sOiBUb29sKTogdm9pZCB7XHJcbiAgICAgICAgdGhpcy50b29scy5zZXQodG9vbC5uYW1lLCB0b29sKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBleGVjdXRlKGNvbW1hbmQ6IFRvb2xDb21tYW5kKTogUHJvbWlzZTxUb29sUmVzdWx0PiB7XHJcbiAgICAgICAgY29uc3QgdG9vbCA9IHRoaXMudG9vbHMuZ2V0KGNvbW1hbmQuYWN0aW9uKTtcclxuICAgICAgICBpZiAoIXRvb2wpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGBUb29sIG5vdCBmb3VuZDogJHtjb21tYW5kLmFjdGlvbn1gLFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdElkOiBjb21tYW5kLnJlcXVlc3RJZCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgdG9vbC5leGVjdXRlKGNvbW1hbmQucGFyYW1ldGVycywge30pO1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgLi4ucmVzdWx0LFxyXG4gICAgICAgICAgICAgICAgcmVxdWVzdElkOiBjb21tYW5kLnJlcXVlc3RJZCxcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBlcnJvci5tZXNzYWdlIHx8IFN0cmluZyhlcnJvciksXHJcbiAgICAgICAgICAgICAgICByZXF1ZXN0SWQ6IGNvbW1hbmQucmVxdWVzdElkLFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRBdmFpbGFibGVUb29scygpOiBUb29sW10ge1xyXG4gICAgICAgIHJldHVybiBBcnJheS5mcm9tKHRoaXMudG9vbHMudmFsdWVzKCkpO1xyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBUb29sLCBUb29sUmVzdWx0IH0gZnJvbSAnLi4vVG9vbFJlZ2lzdHJ5JztcclxuaW1wb3J0IHsgc2VhcmNoRmlsZXMgfSBmcm9tICcuLi8uLi9GaWxlQ2hvb3Nlck1vZGFsJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmlsZVNlbGVjdFBhcmFtcyB7XHJcbiAgICBxdWVyeT86IHN0cmluZztcclxuICAgIGZpbHRlclR5cGU/OiAnbWFya2Rvd24nIHwgJ2ltYWdlJyB8ICdhbGwnO1xyXG4gICAgbWF4UmVzdWx0cz86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZpbGVTZWxlY3RUb29sIGltcGxlbWVudHMgVG9vbCB7XHJcbiAgICBuYW1lID0gJ2ZpbGVfc2VsZWN0JztcclxuICAgIGRlc2NyaXB0aW9uID0gJ1NlYXJjaCBhbmQgc2VsZWN0IGZpbGVzIGZyb20gdGhlIHZhdWx0IHByb2dyYW1tYXRpY2FsbHknO1xyXG4gICAgcGFyYW1ldGVycyA9IHtcclxuICAgICAgICBxdWVyeToge1xyXG4gICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdTZWFyY2ggcXVlcnkgdG8gZmluZCBmaWxlcyAoc2VhcmNoZXMgZmlsZW5hbWUgYW5kIHBhdGgpJyxcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IGZhbHNlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBmaWx0ZXJUeXBlOiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxyXG4gICAgICAgICAgICBlbnVtOiBbJ21hcmtkb3duJywgJ2ltYWdlJywgJ2FsbCddLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1R5cGUgb2YgZmlsZXMgdG8gc2hvdycsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6ICdtYXJrZG93bidcclxuICAgICAgICB9LFxyXG4gICAgICAgIG1heFJlc3VsdHM6IHtcclxuICAgICAgICAgICAgdHlwZTogJ251bWJlcicsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnTWF4aW11bSBudW1iZXIgb2YgcmVzdWx0cyB0byByZXR1cm4nLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiAxMFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCkge31cclxuXHJcbiAgICBhc3luYyBleGVjdXRlKHBhcmFtczogRmlsZVNlbGVjdFBhcmFtcywgY29udGV4dDogYW55KTogUHJvbWlzZTxUb29sUmVzdWx0PiB7XHJcbiAgICAgICAgY29uc3QgeyBxdWVyeSA9ICcnLCBmaWx0ZXJUeXBlID0gJ21hcmtkb3duJywgbWF4UmVzdWx0cyA9IDEwIH0gPSBwYXJhbXM7XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIEdldCBhbGwgZmlsZXMgYmFzZWQgb24gZmlsdGVyIHR5cGVcclxuICAgICAgICAgICAgY29uc3QgYWxsRmlsZXMgPSBmaWx0ZXJUeXBlID09PSAnbWFya2Rvd24nID8gXHJcbiAgICAgICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkgOiBcclxuICAgICAgICAgICAgICAgIGZpbHRlclR5cGUgPT09ICdpbWFnZScgPyBcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcC52YXVsdC5nZXRGaWxlcygpLmZpbHRlcihmID0+IFsncG5nJywgJ2pwZycsICdqcGVnJywgJ2dpZicsICdzdmcnLCAnd2VicCddLmluY2x1ZGVzKGYuZXh0ZW5zaW9uPy50b0xvd2VyQ2FzZSgpKSkgOlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0LmdldEZpbGVzKCk7XHJcblxyXG4gICAgICAgICAgICBsZXQgbWF0Y2hpbmdGaWxlcyA9IGFsbEZpbGVzO1xyXG5cclxuICAgICAgICAgICAgLy8gSWYgcXVlcnkgaXMgcHJvdmlkZWQsIGZpbHRlciBmaWxlcyBlZmZpY2llbnRseVxyXG4gICAgICAgICAgICBpZiAocXVlcnkudHJpbSgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBub3JtYWxpemVkUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgcXVlcnlXb3JkcyA9IG5vcm1hbGl6ZWRRdWVyeS5zcGxpdCgvXFxzKy8pLmZpbHRlcih3b3JkID0+IHdvcmQubGVuZ3RoID4gMCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIG1hdGNoaW5nRmlsZXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgLy8gRmlyc3QgcGFzczogbG9vayBmb3IgZXhhY3QgbWF0Y2hlcyAobW9zdCBlZmZpY2llbnQpXHJcbiAgICAgICAgICAgICAgICBmb3IgKGNvbnN0IGZpbGUgb2YgYWxsRmlsZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zdCBzZWFyY2hUZXh0ID0gYCR7ZmlsZS5wYXRofSAke2ZpbGUuYmFzZW5hbWV9YC50b0xvd2VyQ2FzZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHNlYXJjaFRleHROb3JtYWxpemVkID0gc2VhcmNoVGV4dC5yZXBsYWNlKC9fL2csICcgJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgYWxsIHF1ZXJ5IHdvcmRzIGFyZSBwcmVzZW50XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHF1ZXJ5V29yZHMuZXZlcnkod29yZCA9PiBcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VhcmNoVGV4dC5pbmNsdWRlcyh3b3JkKSB8fCBzZWFyY2hUZXh0Tm9ybWFsaXplZC5pbmNsdWRlcyh3b3JkKVxyXG4gICAgICAgICAgICAgICAgICAgICkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hpbmdGaWxlcy5wdXNoKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gRWFybHkgdGVybWluYXRpb24gaWYgd2UgaGF2ZSBlbm91Z2ggcmVzdWx0c1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdGaWxlcy5sZW5ndGggPj0gbWF4UmVzdWx0cykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChtYXRjaGluZ0ZpbGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogYE5vIGZpbGVzIGZvdW5kIG1hdGNoaW5nIHF1ZXJ5OiBcIiR7cXVlcnl9XCJgXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvLyBMaW1pdCByZXN1bHRzIGFuZCBzb3J0IGJ5IG1vZGlmaWNhdGlvbiB0aW1lIChtb3N0IHJlY2VudCBmaXJzdClcclxuICAgICAgICAgICAgY29uc3QgbGltaXRlZEZpbGVzID0gbWF0Y2hpbmdGaWxlc1xyXG4gICAgICAgICAgICAgICAgLnNvcnQoKGEsIGIpID0+IChiLnN0YXQ/Lm10aW1lIHx8IDApIC0gKGEuc3RhdD8ubXRpbWUgfHwgMCkpXHJcbiAgICAgICAgICAgICAgICAuc2xpY2UoMCwgbWF4UmVzdWx0cyk7XHJcblxyXG4gICAgICAgICAgICAvLyBHZXQgZmlsZSBvYmplY3RzIHdpdGggbWV0YWRhdGFcclxuICAgICAgICAgICAgY29uc3QgZmlsZXMgPSBsaW1pdGVkRmlsZXMubWFwKGZpbGUgPT4gKHtcclxuICAgICAgICAgICAgICAgIHBhdGg6IGZpbGUucGF0aCxcclxuICAgICAgICAgICAgICAgIG5hbWU6IGZpbGUubmFtZSxcclxuICAgICAgICAgICAgICAgIGJhc2VuYW1lOiBmaWxlLmJhc2VuYW1lLFxyXG4gICAgICAgICAgICAgICAgZXh0ZW5zaW9uOiBmaWxlLmV4dGVuc2lvbixcclxuICAgICAgICAgICAgICAgIHNpemU6IGZpbGUuc3RhdD8uc2l6ZSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgY3JlYXRlZDogZmlsZS5zdGF0Py5jdGltZSB8fCAwLFxyXG4gICAgICAgICAgICAgICAgbW9kaWZpZWQ6IGZpbGUuc3RhdD8ubXRpbWUgfHwgMFxyXG4gICAgICAgICAgICB9KSk7XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlcyxcclxuICAgICAgICAgICAgICAgICAgICBjb3VudDogZmlsZXMubGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXJ5OiBxdWVyeSB8fCAnYWxsIGZpbGVzJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGBGYWlsZWQgdG8gc2VhcmNoIGZpbGVzOiAke2Vycm9yLm1lc3NhZ2V9YFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGdldEZpbGVGaWx0ZXIoZmlsdGVyVHlwZTogc3RyaW5nKTogKGZpbGU6IGFueSkgPT4gYm9vbGVhbiB7XHJcbiAgICAgICAgc3dpdGNoIChmaWx0ZXJUeXBlKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ21hcmtkb3duJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoZmlsZSkgPT4gZmlsZS5leHRlbnNpb24gPT09ICdtZCc7XHJcbiAgICAgICAgICAgIGNhc2UgJ2ltYWdlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiAoZmlsZSkgPT4gWydwbmcnLCAnanBnJywgJ2pwZWcnLCAnZ2lmJywgJ3N2ZycsICd3ZWJwJ10uaW5jbHVkZXMoZmlsZS5leHRlbnNpb24/LnRvTG93ZXJDYXNlKCkpO1xyXG4gICAgICAgICAgICBjYXNlICdhbGwnOlxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuICgpID0+IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbiIsICJpbXBvcnQgeyBBcHAsIFRGaWxlIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBUb29sLCBUb29sUmVzdWx0IH0gZnJvbSAnLi4vVG9vbFJlZ2lzdHJ5JztcclxuaW1wb3J0IHsgcmVhZEZpbGUgfSBmcm9tICcuLi8uLi9GaWxlQ2hvb3Nlck1vZGFsJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmlsZVJlYWRQYXJhbXMge1xyXG4gICAgZmlsZVBhdGg6IHN0cmluZztcclxuICAgIG1heFNpemU/OiBudW1iZXI7IC8vIE1heGltdW0gZmlsZSBzaXplIGluIGJ5dGVzIChkZWZhdWx0IDFNQilcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZpbGVSZWFkVG9vbCBpbXBsZW1lbnRzIFRvb2wge1xyXG4gICAgbmFtZSA9ICdmaWxlX3JlYWQnO1xyXG4gICAgZGVzY3JpcHRpb24gPSAnUmVhZCBmaWxlIGNvbnRlbnRzIGZyb20gdGhlIHZhdWx0JztcclxuICAgIHBhcmFtZXRlcnMgPSB7XHJcbiAgICAgICAgZmlsZVBhdGg6IHtcclxuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUGF0aCB0byB0aGUgZmlsZSB0byByZWFkIChyZWxhdGl2ZSB0byB2YXVsdCByb290KScsXHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBtYXhTaXplOiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ01heGltdW0gZmlsZSBzaXplIGluIGJ5dGVzIChkZWZhdWx0IDFNQiknLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiAxMDI0ICogMTAyNFxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCkge31cclxuXHJcbiAgICBhc3luYyBleGVjdXRlKHBhcmFtczogRmlsZVJlYWRQYXJhbXMsIGNvbnRleHQ6IGFueSk6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xyXG4gICAgICAgIGNvbnN0IHsgZmlsZVBhdGgsIG1heFNpemUgPSAxMDI0ICogMTAyNCB9ID0gcGFyYW1zO1xyXG5cclxuICAgICAgICBpZiAoIWZpbGVQYXRoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiAnZmlsZVBhdGggcGFyYW1ldGVyIGlzIHJlcXVpcmVkJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gQ2hlY2sgZmlsZSBzaXplIGJlZm9yZSByZWFkaW5nXHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG4gICAgICAgICAgICBpZiAoZmlsZSAmJiBmaWxlIGluc3RhbmNlb2YgVEZpbGUgJiYgZmlsZS5zdGF0Py5zaXplICYmIGZpbGUuc3RhdC5zaXplID4gbWF4U2l6ZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogYEZpbGUgdG9vIGxhcmdlICgke2ZpbGUuc3RhdC5zaXplfSBieXRlcywgbWF4ICR7bWF4U2l6ZX0gYnl0ZXMpOiAke2ZpbGVQYXRofWBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFVzZSBleGlzdGluZyB1dGlsaXR5IGZ1bmN0aW9uIGZyb20gRmlsZUNob29zZXJNb2RhbFxyXG4gICAgICAgICAgICBjb25zdCBjb250ZW50ID0gYXdhaXQgcmVhZEZpbGUodGhpcy5hcHAsIGZpbGVQYXRoKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENoZWNrIGlmIGNvbnRlbnQgaW5kaWNhdGVzIGFuIGVycm9yIChyZWFkRmlsZSByZXR1cm5zIGVycm9yIHN0cmluZ3MpXHJcbiAgICAgICAgICAgIGlmIChjb250ZW50LnN0YXJ0c1dpdGgoJ0ZpbGUgbm90IGZvdW5kJykgfHwgY29udGVudC5zdGFydHNXaXRoKCdGYWlsZWQgdG8gcmVhZCcpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBjb250ZW50XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50LFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVQYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIHNpemU6IChmaWxlIGluc3RhbmNlb2YgVEZpbGUpID8gKGZpbGUuc3RhdD8uc2l6ZSB8fCAwKSA6IDAsXHJcbiAgICAgICAgICAgICAgICAgICAgbW9kaWZpZWQ6IChmaWxlIGluc3RhbmNlb2YgVEZpbGUpID8gKGZpbGUuc3RhdD8ubXRpbWUgfHwgMCkgOiAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4dGVuc2lvbjogKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkgPyBmaWxlLmV4dGVuc2lvbiA6IHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGBGYWlsZWQgdG8gcmVhZCBmaWxlOiAke2Vycm9yLm1lc3NhZ2V9YFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgVEZpbGUsIFRGb2xkZXIsIFZhdWx0LCBGdXp6eVN1Z2dlc3RNb2RhbCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0ICogYXMgeWFtbCBmcm9tICdqcy15YW1sJztcclxuXHJcbi8qKlxyXG4gKiBSZXRyaWV2ZXMgYSBURmlsZSBvciBURm9sZGVyIGZyb20gdGhlIHZhdWx0IGJ5IHBhdGgsIHdpdGggdHlwZSBjaGVja2luZyBhbmQgZXJyb3IgaGFuZGxpbmcuXHJcbiAqIEB0ZW1wbGF0ZSBUIC0gVGhlIGV4cGVjdGVkIHR5cGUsIGVpdGhlciBURmlsZSBvciBURm9sZGVyLlxyXG4gKiBAcGFyYW0ge0FwcH0gYXBwIC0gVGhlIE9ic2lkaWFuIEFwcCBpbnN0YW5jZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBUaGUgcGF0aCB0byB0aGUgZmlsZSBvciBmb2xkZXIuXHJcbiAqIEBwYXJhbSB7J2ZpbGUnIHwgJ2ZvbGRlcid9IHR5cGUgLSBUaGUgZXhwZWN0ZWQgdHlwZSAoJ2ZpbGUnIG9yICdmb2xkZXInKS5cclxuICogQHJldHVybnMge1QgfCBudWxsfSBUaGUgVEZpbGUgb3IgVEZvbGRlciBpZiBmb3VuZCBhbmQgbWF0Y2hlcyB0aGUgdHlwZSwgb3RoZXJ3aXNlIG51bGwuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRWYXVsdEl0ZW08VCBleHRlbmRzIFRGaWxlIHwgVEZvbGRlcj4oYXBwOiBBcHAsIHBhdGg6IHN0cmluZywgdHlwZTogJ2ZpbGUnIHwgJ2ZvbGRlcicpOiBUIHwgbnVsbCB7XHJcbiAgICBjb25zdCBpdGVtID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcclxuICAgIGlmICghaXRlbSkge1xyXG4gICAgICAgIHJldHVybiBudWxsOyAvLyBJdGVtIG5vdCBmb3VuZFxyXG4gICAgfVxyXG4gICAgaWYgKHR5cGUgPT09ICdmaWxlJyAmJiBpdGVtIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICByZXR1cm4gaXRlbSBhcyBUO1xyXG4gICAgfVxyXG4gICAgaWYgKHR5cGUgPT09ICdmb2xkZXInICYmIGl0ZW0gaW5zdGFuY2VvZiBURm9sZGVyKSB7XHJcbiAgICAgICAgcmV0dXJuIGl0ZW0gYXMgVDtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsOyAvLyBJdGVtIGZvdW5kIGJ1dCB3cm9uZyB0eXBlXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdGFuZGFyZGl6ZWQgZXJyb3IgbWVzc2FnZSBmb3IgaXRlbSBub3QgZm91bmQgb3Igd3JvbmcgdHlwZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBUaGUgcGF0aCB0aGF0IHdhcyBzZWFyY2hlZC5cclxuICogQHBhcmFtIHsnZmlsZScgfCAnZm9sZGVyJ30gdHlwZSAtIFRoZSBleHBlY3RlZCB0eXBlLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBBIGZvcm1hdHRlZCBlcnJvciBzdHJpbmcuXHJcbiAqL1xyXG5mdW5jdGlvbiBpdGVtTm90Rm91bmRFcnJvcihwYXRoOiBzdHJpbmcsIHR5cGU6ICdmaWxlJyB8ICdmb2xkZXInKTogc3RyaW5nIHtcclxuICAgIHJldHVybiBgJHt0eXBlLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpICsgdHlwZS5zbGljZSgxKX0gbm90IGZvdW5kIG9yIGlzIG5vdCBhICR7dHlwZX06IFwiJHtwYXRofVwiYDtcclxufVxyXG5cclxuLyoqXHJcbiAqIFV0aWxpdHkgdG8gZ2V0IGFsbCBmaWxlcyBpbiBhIGZvbGRlciwgb3B0aW9uYWxseSByZWN1cnNpdmVseSBhbmQvb3IgbWFya2Rvd24gb25seS5cclxuICogQHBhcmFtIHtURm9sZGVyfSBmb2xkZXIgLSBUaGUgZm9sZGVyIHRvIHNlYXJjaCB3aXRoaW4uXHJcbiAqIEBwYXJhbSB7Ym9vbGVhbn0gW3JlY3Vyc2l2ZT1mYWxzZV0gLSBXaGV0aGVyIHRvIHNlYXJjaCBzdWJmb2xkZXJzIHJlY3Vyc2l2ZWx5LlxyXG4gKiBAcGFyYW0ge2Jvb2xlYW59IFttYXJrZG93bk9ubHk9ZmFsc2VdIC0gV2hldGhlciB0byByZXR1cm4gb25seSBtYXJrZG93biBmaWxlcy5cclxuICogQHJldHVybnMge1RGaWxlW119IEFuIGFycmF5IG9mIFRGaWxlIG9iamVjdHMuXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRGaWxlc0luRm9sZGVyKGZvbGRlcjogVEZvbGRlciwgcmVjdXJzaXZlID0gZmFsc2UsIG1hcmtkb3duT25seSA9IGZhbHNlKTogVEZpbGVbXSB7XHJcbiAgICBsZXQgZmlsZXM6IFRGaWxlW10gPSBbXTtcclxuICAgIGZvciAoY29uc3QgY2hpbGQgb2YgZm9sZGVyLmNoaWxkcmVuKSB7XHJcbiAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgaWYgKCFtYXJrZG93bk9ubHkgfHwgY2hpbGQuZXh0ZW5zaW9uID09PSAnbWQnKSBmaWxlcy5wdXNoKGNoaWxkKTtcclxuICAgICAgICB9IGVsc2UgaWYgKHJlY3Vyc2l2ZSAmJiBjaGlsZCBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICAgICAgZmlsZXMgPSBmaWxlcy5jb25jYXQoZ2V0RmlsZXNJbkZvbGRlcihjaGlsZCwgdHJ1ZSwgbWFya2Rvd25Pbmx5KSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGZpbGVzO1xyXG59XHJcblxyXG4vKipcclxuICogVXRpbGl0eSB0byBnZXQgYWxsIGZvbGRlcnMgaW4gdGhlIHZhdWx0IChyZWN1cnNpdmVseSkuXHJcbiAqIEBwYXJhbSB7VEZvbGRlcn0gcm9vdCAtIFRoZSByb290IGZvbGRlciBvZiB0aGUgdmF1bHQuXHJcbiAqIEByZXR1cm5zIHtURm9sZGVyW119IEFuIGFycmF5IG9mIFRGb2xkZXIgb2JqZWN0cy5cclxuICovXHJcbmZ1bmN0aW9uIGdldEFsbEZvbGRlcnMocm9vdDogVEZvbGRlcik6IFRGb2xkZXJbXSB7XHJcbiAgICBjb25zdCBmb2xkZXJzOiBURm9sZGVyW10gPSBbXTtcclxuICAgIGZ1bmN0aW9uIHJlY3Vyc2UoZm9sZGVyOiBURm9sZGVyKSB7XHJcbiAgICAgICAgZm9sZGVycy5wdXNoKGZvbGRlcik7XHJcbiAgICAgICAgZm9yIChjb25zdCBjaGlsZCBvZiBmb2xkZXIuY2hpbGRyZW4pIHtcclxuICAgICAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEZvbGRlcikgcmVjdXJzZShjaGlsZCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmVjdXJzZShyb290KTtcclxuICAgIHJldHVybiBmb2xkZXJzO1xyXG59XHJcblxyXG4vKipcclxuICogRmlsdGVycyBhbmQgZm9ybWF0cyBhIGxpc3Qgb2YgVEZpbGVzIG9yIFRGb2xkZXJzIGJhc2VkIG9uIGEgcXVlcnkuXHJcbiAqIEB0ZW1wbGF0ZSBUIC0gVGhlIHR5cGUgb2YgaXRlbXMgaW4gdGhlIGFycmF5IChURmlsZSBvciBURm9sZGVyKS5cclxuICogQHBhcmFtIHtUW119IGl0ZW1zIC0gVGhlIGFycmF5IG9mIFRGaWxlIG9yIFRGb2xkZXIgb2JqZWN0cyB0byBzZWFyY2guXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBxdWVyeSAtIFRoZSBzZWFyY2ggc3RyaW5nLlxyXG4gKiBAcGFyYW0geyhpdGVtOiBUKSA9PiBzdHJpbmd9IGdldEl0ZW1UZXh0IC0gQSBmdW5jdGlvbiB0byBleHRyYWN0IHRoZSB0ZXh0IHRvIHNlYXJjaCBhZ2FpbnN0IGZyb20gZWFjaCBpdGVtLlxyXG4gKiBAcGFyYW0ge3sgbWF4UmVzdWx0cz86IG51bWJlciB9fSBbb3B0aW9uc10gLSBPcHRpb25hbCBwYXJhbWV0ZXJzIGZvciBtYXhSZXN1bHRzLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW25vUmVzdWx0c01lc3NhZ2VdIC0gVGhlIG1lc3NhZ2UgdG8gcmV0dXJuIGlmIG5vIHJlc3VsdHMgYXJlIGZvdW5kLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBBIGZvcm1hdHRlZCBzdHJpbmcgb2YgcmVzdWx0cyBvciBhIG5vUmVzdWx0c01lc3NhZ2UuXHJcbiAqL1xyXG5mdW5jdGlvbiBmaWx0ZXJBbmRGb3JtYXRSZXN1bHRzPFQgZXh0ZW5kcyBURmlsZSB8IFRGb2xkZXI+KFxyXG4gICAgaXRlbXM6IFRbXSxcclxuICAgIHF1ZXJ5OiBzdHJpbmcsXHJcbiAgICBnZXRJdGVtVGV4dDogKGl0ZW06IFQpID0+IHN0cmluZyxcclxuICAgIG9wdGlvbnM/OiB7IG1heFJlc3VsdHM/OiBudW1iZXIgfSxcclxuICAgIG5vUmVzdWx0c01lc3NhZ2U/OiBzdHJpbmdcclxuKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xyXG4gICAgY29uc3QgcmVzdWx0cyA9IGl0ZW1zLmZpbHRlcihpdGVtID0+IGdldEl0ZW1UZXh0KGl0ZW0pLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkpO1xyXG5cclxuICAgIGlmICghcmVzdWx0cy5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gbm9SZXN1bHRzTWVzc2FnZSB8fCBgTm8gcmVzdWx0cyBmb3VuZCBtYXRjaGluZzogXCIke3F1ZXJ5fVwiYDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gcmVzdWx0cy5zbGljZSgwLCBvcHRpb25zPy5tYXhSZXN1bHRzKS5tYXAoaXRlbSA9PiBgLSAke2l0ZW0ucGF0aH1gKS5qb2luKCdcXG4nKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE9wZW5zIGEgbW9kYWwgdG8gbGV0IHRoZSB1c2VyIHNlYXJjaCBhbmQgY2hvb3NlIGEgZmlsZSBmcm9tIHRoZSB2YXVsdC5cclxuICogUmVzb2x2ZXMgd2l0aCB0aGUgc2VsZWN0ZWQgVEZpbGUsIG9yIG51bGwgaWYgY2FuY2VsbGVkLlxyXG4gKiBAcGFyYW0ge0FwcH0gYXBwIC0gVGhlIE9ic2lkaWFuIEFwcCBpbnN0YW5jZS5cclxuICogQHJldHVybnMge1Byb21pc2U8VEZpbGUgfCBudWxsPn0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2l0aCB0aGUgc2VsZWN0ZWQgVEZpbGUgb3IgbnVsbC5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjaG9vc2VGaWxlKGFwcDogQXBwKTogUHJvbWlzZTxURmlsZSB8IG51bGw+IHtcclxuICAgIHJldHVybiBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4ge1xyXG4gICAgICAgIGNsYXNzIEZpbGVTdWdnZXN0TW9kYWwgZXh0ZW5kcyBGdXp6eVN1Z2dlc3RNb2RhbDxURmlsZT4ge1xyXG4gICAgICAgICAgICBjb25zdHJ1Y3RvcihhcHA6IEFwcCkgeyBzdXBlcihhcHApOyB9XHJcbiAgICAgICAgICAgIGdldEl0ZW1zKCk6IFRGaWxlW10geyByZXR1cm4gYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTsgfVxyXG4gICAgICAgICAgICBnZXRJdGVtVGV4dChpdGVtOiBURmlsZSk6IHN0cmluZyB7IHJldHVybiBpdGVtLnBhdGg7IH1cclxuICAgICAgICAgICAgb25DaG9vc2VJdGVtKGl0ZW06IFRGaWxlKSB7IHJlc29sdmUoaXRlbSk7IH1cclxuICAgICAgICAgICAgb25DbG9zZSgpIHsgcmVzb2x2ZShudWxsKTsgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBuZXcgRmlsZVN1Z2dlc3RNb2RhbChhcHApLm9wZW4oKTtcclxuICAgIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogU2VhcmNoIGZvciBmaWxlcyBpbiB0aGUgdmF1bHQgYnkgcGF0aCBvciBiYXNlbmFtZSAoY2FzZS1pbnNlbnNpdGl2ZSkuXHJcbiAqIEBwYXJhbSB7QXBwfSBhcHAgLSBUaGUgT2JzaWRpYW4gQXBwIGluc3RhbmNlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgLSBUaGUgc2VhcmNoIHF1ZXJ5LlxyXG4gKiBAcGFyYW0ge3sgbWF4UmVzdWx0cz86IG51bWJlciwgbWFya2Rvd25Pbmx5PzogYm9vbGVhbiB9fSBbb3B0aW9uc10gLSBPcHRpb25hbCBwYXJhbWV0ZXJzLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBBIHJlYWRhYmxlIHN0cmluZyBvZiBtYXRjaGVzIG9yIGEgbWVzc2FnZSBpZiBub25lIGZvdW5kLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNlYXJjaEZpbGVzKGFwcDogQXBwLCBxdWVyeTogc3RyaW5nLCBvcHRpb25zPzogeyBtYXhSZXN1bHRzPzogbnVtYmVyLCBtYXJrZG93bk9ubHk/OiBib29sZWFuIH0pOiBzdHJpbmcge1xyXG4gICAgY29uc3QgZmlsZXMgPSBvcHRpb25zPy5tYXJrZG93bk9ubHkgPT09IGZhbHNlID8gYXBwLnZhdWx0LmdldEZpbGVzKCkgOiBhcHAudmF1bHQuZ2V0TWFya2Rvd25GaWxlcygpO1xyXG4gICAgcmV0dXJuIGZpbHRlckFuZEZvcm1hdFJlc3VsdHMoXHJcbiAgICAgICAgZmlsZXMsXHJcbiAgICAgICAgcXVlcnksXHJcbiAgICAgICAgKGYpID0+IGAke2YucGF0aH0gJHtmLmJhc2VuYW1lfWAsXHJcbiAgICAgICAgb3B0aW9ucyxcclxuICAgICAgICBgTm8gZmlsZXMgZm91bmQgbWF0Y2hpbmc6IFwiJHtxdWVyeX1cImBcclxuICAgICk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZWFyY2ggZm9yIGZvbGRlcnMgaW4gdGhlIHZhdWx0IGJ5IHBhdGggb3IgbmFtZSAoY2FzZS1pbnNlbnNpdGl2ZSkuXHJcbiAqIEBwYXJhbSB7QXBwfSBhcHAgLSBUaGUgT2JzaWRpYW4gQXBwIGluc3RhbmNlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gcXVlcnkgLSBUaGUgc2VhcmNoIHF1ZXJ5LlxyXG4gKiBAcGFyYW0ge3sgbWF4UmVzdWx0cz86IG51bWJlciB9fSBbb3B0aW9uc10gLSBPcHRpb25hbCBwYXJhbWV0ZXJzLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBBIHJlYWRhYmxlIHN0cmluZyBvZiBtYXRjaGVzIG9yIGEgbWVzc2FnZSBpZiBub25lIGZvdW5kLlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNlYXJjaEZvbGRlcnMoYXBwOiBBcHAsIHF1ZXJ5OiBzdHJpbmcsIG9wdGlvbnM/OiB7IG1heFJlc3VsdHM/OiBudW1iZXIgfSk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBhbGxGb2xkZXJzID0gZ2V0QWxsRm9sZGVycyhhcHAudmF1bHQuZ2V0Um9vdCgpKTtcclxuICAgIHJldHVybiBmaWx0ZXJBbmRGb3JtYXRSZXN1bHRzKFxyXG4gICAgICAgIGFsbEZvbGRlcnMsXHJcbiAgICAgICAgcXVlcnksXHJcbiAgICAgICAgKGZvbGRlcikgPT4gYCR7Zm9sZGVyLnBhdGh9ICR7Zm9sZGVyLm5hbWV9YCxcclxuICAgICAgICBvcHRpb25zLFxyXG4gICAgICAgIGBObyBmb2xkZXJzIGZvdW5kIG1hdGNoaW5nOiBcIiR7cXVlcnl9XCJgXHJcbiAgICApO1xyXG59XHJcblxyXG4vKipcclxuICogTGlzdCBhbGwgZmlsZXMgYW5kIGZvbGRlcnMgaW4gYSBmb2xkZXIgKG5vbi1yZWN1cnNpdmUpLlxyXG4gKiBAcGFyYW0ge0FwcH0gYXBwIC0gVGhlIE9ic2lkaWFuIEFwcCBpbnN0YW5jZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IGZvbGRlclBhdGggLSBUaGUgcGF0aCB0byB0aGUgZm9sZGVyLlxyXG4gKiBAcGFyYW0ge3sgbWFya2Rvd25Pbmx5PzogYm9vbGVhbiB9fSBbb3B0aW9uc10gLSBPcHRpb25hbCBwYXJhbWV0ZXJzLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBBIHJlYWRhYmxlIHN0cmluZyBvciBhIG1lc3NhZ2UgaWYgZW1wdHkuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbGlzdEZpbGVzSW5Gb2xkZXJOb25SZWN1cnNpdmUoYXBwOiBBcHAsIGZvbGRlclBhdGg6IHN0cmluZywgb3B0aW9ucz86IHsgbWFya2Rvd25Pbmx5PzogYm9vbGVhbiB9KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGZvbGRlciA9IGdldFZhdWx0SXRlbTxURm9sZGVyPihhcHAsIGZvbGRlclBhdGgsICdmb2xkZXInKTtcclxuICAgIGlmICghZm9sZGVyKSByZXR1cm4gaXRlbU5vdEZvdW5kRXJyb3IoZm9sZGVyUGF0aCwgJ2ZvbGRlcicpO1xyXG5cclxuICAgIGNvbnN0IGZpbGVzID0gZm9sZGVyLmNoaWxkcmVuLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURmlsZSAmJiAoIW9wdGlvbnM/Lm1hcmtkb3duT25seSB8fCBmLmV4dGVuc2lvbiA9PT0gJ21kJykpIGFzIFRGaWxlW107XHJcbiAgICBjb25zdCBzdWJmb2xkZXJzID0gZm9sZGVyLmNoaWxkcmVuLmZpbHRlcihmID0+IGYgaW5zdGFuY2VvZiBURm9sZGVyKSBhcyBURm9sZGVyW107XHJcblxyXG4gICAgaWYgKCFmaWxlcy5sZW5ndGggJiYgIXN1YmZvbGRlcnMubGVuZ3RoKSByZXR1cm4gYE5vIGZpbGVzIG9yIGZvbGRlcnMgZm91bmQgaW4gZm9sZGVyOiBcIiR7Zm9sZGVyUGF0aH1cImA7XHJcblxyXG4gICAgY29uc3QgZmlsZUxpbmVzID0gZmlsZXMubWFwKGYgPT4gYC0gW0ZpbGVdICR7Zi5wYXRofWApO1xyXG4gICAgY29uc3QgZm9sZGVyTGluZXMgPSBzdWJmb2xkZXJzLm1hcChzZiA9PiBgLSBbRm9sZGVyXSAke3NmLnBhdGh9YCk7XHJcbiAgICByZXR1cm4gWy4uLmZvbGRlckxpbmVzLCAuLi5maWxlTGluZXNdLmpvaW4oJ1xcbicpO1xyXG59XHJcblxyXG4vKipcclxuICogUmVjdXJzaXZlbHkgbGlzdCBhbGwgZmlsZXMgaW4gYSBmb2xkZXIgYW5kIGl0cyBzdWJmb2xkZXJzLlxyXG4gKiBAcGFyYW0ge0FwcH0gYXBwIC0gVGhlIE9ic2lkaWFuIEFwcCBpbnN0YW5jZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IGZvbGRlclBhdGggLSBUaGUgcGF0aCB0byB0aGUgZm9sZGVyLlxyXG4gKiBAcGFyYW0ge3sgbWFya2Rvd25Pbmx5PzogYm9vbGVhbiB9fSBbb3B0aW9uc10gLSBPcHRpb25hbCBwYXJhbWV0ZXJzLlxyXG4gKiBAcmV0dXJucyB7c3RyaW5nfSBBIHJlYWRhYmxlIHN0cmluZyBvciBhIG1lc3NhZ2UgaWYgZW1wdHkuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbGlzdEZpbGVzSW5Gb2xkZXJSZWN1cnNpdmUoYXBwOiBBcHAsIGZvbGRlclBhdGg6IHN0cmluZywgb3B0aW9ucz86IHsgbWFya2Rvd25Pbmx5PzogYm9vbGVhbiB9KTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGZvbGRlciA9IGdldFZhdWx0SXRlbTxURm9sZGVyPihhcHAsIGZvbGRlclBhdGgsICdmb2xkZXInKTtcclxuICAgIGlmICghZm9sZGVyKSByZXR1cm4gaXRlbU5vdEZvdW5kRXJyb3IoZm9sZGVyUGF0aCwgJ2ZvbGRlcicpO1xyXG5cclxuICAgIGNvbnN0IGZpbGVzID0gZ2V0RmlsZXNJbkZvbGRlcihmb2xkZXIsIHRydWUsICEhb3B0aW9ucz8ubWFya2Rvd25Pbmx5KTtcclxuICAgIGlmICghZmlsZXMubGVuZ3RoKSByZXR1cm4gYE5vIGZpbGVzIGZvdW5kIGluIGZvbGRlciAocmVjdXJzaXZlbHkpOiBcIiR7Zm9sZGVyUGF0aH1cImA7XHJcbiAgICByZXR1cm4gZmlsZXMubWFwKGYgPT4gYC0gJHtmLnBhdGh9YCkuam9pbignXFxuJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTZWFyY2ggYWxsIGZpbGVzIGluIHRoZSB2YXVsdCBmb3IgYSBzdHJpbmcgKGNhc2UtaW5zZW5zaXRpdmUpLlxyXG4gKiBAcGFyYW0ge0FwcH0gYXBwIC0gVGhlIE9ic2lkaWFuIEFwcCBpbnN0YW5jZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IHNlYXJjaFN0cmluZyAtIFRoZSBzdHJpbmcgdG8gc2VhcmNoIGZvci5cclxuICogQHBhcmFtIHt7IG1hcmtkb3duT25seT86IGJvb2xlYW4sIG1heFJlc3VsdHM/OiBudW1iZXIgfX0gW29wdGlvbnNdIC0gT3B0aW9uYWwgcGFyYW1ldGVycy5cclxuICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gQSByZWFkYWJsZSBzdHJpbmcgb2YgZmlsZSBwYXRocyBjb250YWluaW5nIHRoZSBzdHJpbmcsIG9yIGEgbWVzc2FnZSBpZiBub25lIGZvdW5kLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHNlYXJjaFZhdWx0Rm9yU3RyaW5nKGFwcDogQXBwLCBzZWFyY2hTdHJpbmc6IHN0cmluZywgb3B0aW9ucz86IHsgbWFya2Rvd25Pbmx5PzogYm9vbGVhbiwgbWF4UmVzdWx0cz86IG51bWJlciB9KTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIGNvbnN0IGZpbGVzID0gb3B0aW9ucz8ubWFya2Rvd25Pbmx5ID09PSBmYWxzZSA/IGFwcC52YXVsdC5nZXRGaWxlcygpIDogYXBwLnZhdWx0LmdldE1hcmtkb3duRmlsZXMoKTtcclxuICAgIGNvbnN0IGxvd2VyU2VhcmNoID0gc2VhcmNoU3RyaW5nLnRvTG93ZXJDYXNlKCk7XHJcbiAgICBjb25zdCBtYXRjaGVzOiBzdHJpbmdbXSA9IFtdO1xyXG5cclxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcclxuICAgICAgICBpZiAoY29udGVudC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyU2VhcmNoKSkge1xyXG4gICAgICAgICAgICBtYXRjaGVzLnB1c2goZmlsZS5wYXRoKTtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnM/Lm1heFJlc3VsdHMgJiYgbWF0Y2hlcy5sZW5ndGggPj0gb3B0aW9ucy5tYXhSZXN1bHRzKSBicmVhaztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFtYXRjaGVzLmxlbmd0aCkgcmV0dXJuIGBObyBmaWxlcyBmb3VuZCBjb250YWluaW5nOiBcIiR7c2VhcmNoU3RyaW5nfVwiYDtcclxuICAgIHJldHVybiBtYXRjaGVzLm1hcChwID0+IGAtICR7cH1gKS5qb2luKCdcXG4nKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFNlYXJjaCBmb3IgYSBzdHJpbmcgaW4gZmlsZXMgaW4gYSBmb2xkZXIgKG9wdGlvbmFsbHkgcmVjdXJzaXZlKSwgcmV0dXJuaW5nIGNvbnRleHQgYW5kIGZpbGUgcGF0aC5cclxuICogUmV0dXJucyB0aGUgZmlyc3QgTiBtb3N0IHJlY2VudGx5IG1vZGlmaWVkIHJlc3VsdHMgKGRlZmF1bHQgNSksIHdpdGggMjAgd29yZHMgYmVmb3JlIGFuZCBhZnRlciB0aGUgbWF0Y2guXHJcbiAqIEBwYXJhbSB7QXBwfSBhcHAgLSBUaGUgT2JzaWRpYW4gQXBwIGluc3RhbmNlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gc2VhcmNoU3RyaW5nIC0gVGhlIHN0cmluZyB0byBzZWFyY2ggZm9yLlxyXG4gKiBAcGFyYW0ge3sgZm9sZGVyUGF0aD86IHN0cmluZywgcmVjdXJzaXZlPzogYm9vbGVhbiwgbWFya2Rvd25Pbmx5PzogYm9vbGVhbiwgbWF4UmVzdWx0cz86IG51bWJlciB9fSBbb3B0aW9uc10gLSBPcHRpb25hbCBwYXJhbWV0ZXJzLlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSBBIGZvcm1hdHRlZCBzdHJpbmcgb2YgcmVzdWx0cyBpbmNsdWRpbmcgY29udGV4dCwgb3IgYSBtZXNzYWdlIGlmIG5vbmUgZm91bmQuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gc2VhcmNoU3RyaW5nSW5Gb2xkZXIoXHJcbiAgICBhcHA6IEFwcCxcclxuICAgIHNlYXJjaFN0cmluZzogc3RyaW5nLFxyXG4gICAgb3B0aW9ucz86IHsgZm9sZGVyUGF0aD86IHN0cmluZywgcmVjdXJzaXZlPzogYm9vbGVhbiwgbWFya2Rvd25Pbmx5PzogYm9vbGVhbiwgbWF4UmVzdWx0cz86IG51bWJlciB9XHJcbik6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBjb25zdCBmb2xkZXJQYXRoID0gb3B0aW9ucz8uZm9sZGVyUGF0aCA/PyAnJztcclxuICAgIGNvbnN0IHJlY3Vyc2l2ZSA9IG9wdGlvbnM/LnJlY3Vyc2l2ZSA/PyBmYWxzZTtcclxuICAgIGNvbnN0IG1hcmtkb3duT25seSA9IG9wdGlvbnM/Lm1hcmtkb3duT25seSA/PyBmYWxzZTtcclxuICAgIGNvbnN0IG1heFJlc3VsdHMgPSBvcHRpb25zPy5tYXhSZXN1bHRzID8/IDU7XHJcbiAgICBjb25zdCBsb3dlclNlYXJjaCA9IHNlYXJjaFN0cmluZy50b0xvd2VyQ2FzZSgpO1xyXG5cclxuICAgIGxldCBmaWxlczogVEZpbGVbXSA9IFtdO1xyXG4gICAgaWYgKGZvbGRlclBhdGgpIHtcclxuICAgICAgICBjb25zdCBhYnMgPSBnZXRWYXVsdEl0ZW08VEZvbGRlcj4oYXBwLCBmb2xkZXJQYXRoLCAnZm9sZGVyJyk7XHJcbiAgICAgICAgaWYgKCFhYnMpIHJldHVybiBpdGVtTm90Rm91bmRFcnJvcihmb2xkZXJQYXRoLCAnZm9sZGVyJyk7XHJcbiAgICAgICAgZmlsZXMgPSBnZXRGaWxlc0luRm9sZGVyKGFicywgcmVjdXJzaXZlLCBtYXJrZG93bk9ubHkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBmaWxlcyA9IG1hcmtkb3duT25seSA/IGFwcC52YXVsdC5nZXRNYXJrZG93bkZpbGVzKCkgOiBhcHAudmF1bHQuZ2V0RmlsZXMoKTtcclxuICAgIH1cclxuXHJcbiAgICBmaWxlcy5zb3J0KChhLCBiKSA9PiBiLnN0YXQubXRpbWUgLSBhLnN0YXQubXRpbWUpOyAvLyBTb3J0IGJ5IG1vc3QgcmVjZW50bHkgbW9kaWZpZWRcclxuXHJcbiAgICBjb25zdCByZXN1bHRzOiB7IHBhdGg6IHN0cmluZywgY29udGV4dDogc3RyaW5nLCBtdGltZTogbnVtYmVyIH1bXSA9IFtdO1xyXG5cclxuICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcclxuICAgICAgICBjb25zdCBjb250ZW50TG93ZXIgPSBjb250ZW50LnRvTG93ZXJDYXNlKCk7XHJcbiAgICAgICAgbGV0IGlkeCA9IDA7XHJcblxyXG4gICAgICAgIHdoaWxlICh0cnVlKSB7XHJcbiAgICAgICAgICAgIGlkeCA9IGNvbnRlbnRMb3dlci5pbmRleE9mKGxvd2VyU2VhcmNoLCBpZHgpO1xyXG4gICAgICAgICAgICBpZiAoaWR4ID09PSAtMSkgYnJlYWs7XHJcblxyXG4gICAgICAgICAgICBjb25zdCBiZWZvcmUgPSBjb250ZW50LnNsaWNlKDAsIGlkeCkuc3BsaXQoL1xccysvKS5zbGljZSgtMjApLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgY29uc3QgYWZ0ZXIgPSBjb250ZW50LnNsaWNlKGlkeCArIHNlYXJjaFN0cmluZy5sZW5ndGgpLnNwbGl0KC9cXHMrLykuc2xpY2UoMCwgMjApLmpvaW4oJyAnKTtcclxuICAgICAgICAgICAgY29uc3QgbWF0Y2ggPSBjb250ZW50LnN1YnN0cihpZHgsIHNlYXJjaFN0cmluZy5sZW5ndGgpO1xyXG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gYCR7YmVmb3JlfT4+JHttYXRjaH08PCR7YWZ0ZXJ9YDtcclxuXHJcbiAgICAgICAgICAgIHJlc3VsdHMucHVzaCh7IHBhdGg6IGZpbGUucGF0aCwgY29udGV4dCwgbXRpbWU6IGZpbGUuc3RhdC5tdGltZSB9KTtcclxuICAgICAgICAgICAgaWR4ICs9IHNlYXJjaFN0cmluZy5sZW5ndGg7XHJcblxyXG4gICAgICAgICAgICBpZiAocmVzdWx0cy5sZW5ndGggPj0gbWF4UmVzdWx0cykgYnJlYWs7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChyZXN1bHRzLmxlbmd0aCA+PSBtYXhSZXN1bHRzKSBicmVhaztcclxuICAgIH1cclxuXHJcbiAgICBpZiAoIXJlc3VsdHMubGVuZ3RoKSByZXR1cm4gYE5vIHJlc3VsdHMgZm91bmQgZm9yOiBcIiR7c2VhcmNoU3RyaW5nfVwiYDtcclxuICAgIHJldHVybiByZXN1bHRzLm1hcChyID0+IGAtICR7ci5wYXRofVxcbiAgQ29udGV4dDogJHtyLmNvbnRleHR9YCkuam9pbignXFxuJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBNb3ZlcyBhIGZpbGUgb3IgZm9sZGVyIHRvIGFub3RoZXIgZm9sZGVyIGluIHRoZSB2YXVsdC5cclxuICogQHBhcmFtIHtBcHB9IGFwcCAtIFRoZSBPYnNpZGlhbiBBcHAgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2VQYXRoIC0gUGF0aCB0byB0aGUgZmlsZSBvciBmb2xkZXIgdG8gbW92ZSAocmVsYXRpdmUgdG8gdmF1bHQgcm9vdCkuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBkZXN0Rm9sZGVyUGF0aCAtIFBhdGggdG8gdGhlIGRlc3RpbmF0aW9uIGZvbGRlciAocmVsYXRpdmUgdG8gdmF1bHQgcm9vdCkuXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IEEgcHJvbWlzZSBkZXNjcmliaW5nIHRoZSByZXN1bHQgb2YgdGhlIG9wZXJhdGlvbi5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBtb3ZlRmlsZU9yRm9sZGVyKGFwcDogQXBwLCBzb3VyY2VQYXRoOiBzdHJpbmcsIGRlc3RGb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3Qgc3JjID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzb3VyY2VQYXRoKTtcclxuICAgIGNvbnN0IGRlc3RGb2xkZXIgPSBnZXRWYXVsdEl0ZW08VEZvbGRlcj4oYXBwLCBkZXN0Rm9sZGVyUGF0aCwgJ2ZvbGRlcicpO1xyXG5cclxuICAgIGlmICghc3JjKSByZXR1cm4gYFNvdXJjZSBub3QgZm91bmQ6IFwiJHtzb3VyY2VQYXRofVwiYDtcclxuICAgIGlmICghZGVzdEZvbGRlcikgcmV0dXJuIGl0ZW1Ob3RGb3VuZEVycm9yKGRlc3RGb2xkZXJQYXRoLCAnZm9sZGVyJyk7XHJcblxyXG4gICAgY29uc3QgbmV3UGF0aCA9IGRlc3RGb2xkZXJQYXRoLnJlcGxhY2UoL1xcLyQvLCAnJykgKyAnLycgKyBzcmMubmFtZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LnJlbmFtZShzcmMsIG5ld1BhdGgpO1xyXG4gICAgICAgIHJldHVybiBgTW92ZWQgJyR7c291cmNlUGF0aH0nIHRvICcke25ld1BhdGh9Jy5gO1xyXG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcclxuICAgICAgICByZXR1cm4gYEZhaWxlZCB0byBtb3ZlOiAke2Vycj8ubWVzc2FnZSB8fCBlcnJ9YDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIENvcGllcyBhIGZpbGUgb3IgZm9sZGVyIHRvIGFub3RoZXIgZm9sZGVyIGluIHRoZSB2YXVsdC5cclxuICogQHBhcmFtIHtBcHB9IGFwcCAtIFRoZSBPYnNpZGlhbiBBcHAgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBzb3VyY2VQYXRoIC0gUGF0aCB0byB0aGUgZmlsZSBvciBmb2xkZXIgdG8gY29weSAocmVsYXRpdmUgdG8gdmF1bHQgcm9vdCkuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBkZXN0Rm9sZGVyUGF0aCAtIFBhdGggdG8gdGhlIGRlc3RpbmF0aW9uIGZvbGRlciAocmVsYXRpdmUgdG8gdmF1bHQgcm9vdCkuXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IEEgcHJvbWlzZSBkZXNjcmliaW5nIHRoZSByZXN1bHQgb2YgdGhlIG9wZXJhdGlvbi5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBjb3B5RmlsZU9yRm9sZGVyKGFwcDogQXBwLCBzb3VyY2VQYXRoOiBzdHJpbmcsIGRlc3RGb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3Qgc3JjID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChzb3VyY2VQYXRoKTtcclxuICAgIGNvbnN0IGRlc3RGb2xkZXIgPSBnZXRWYXVsdEl0ZW08VEZvbGRlcj4oYXBwLCBkZXN0Rm9sZGVyUGF0aCwgJ2ZvbGRlcicpO1xyXG5cclxuICAgIGlmICghc3JjKSByZXR1cm4gYFNvdXJjZSBub3QgZm91bmQ6IFwiJHtzb3VyY2VQYXRofVwiYDtcclxuICAgIGlmICghZGVzdEZvbGRlcikgcmV0dXJuIGl0ZW1Ob3RGb3VuZEVycm9yKGRlc3RGb2xkZXJQYXRoLCAnZm9sZGVyJyk7XHJcblxyXG4gICAgY29uc3QgbmV3UGF0aCA9IGRlc3RGb2xkZXJQYXRoLnJlcGxhY2UoL1xcLyQvLCAnJykgKyAnLycgKyBzcmMubmFtZTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgaWYgKHNyYyBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGEgPSBhd2FpdCBhcHAudmF1bHQucmVhZChzcmMpO1xyXG4gICAgICAgICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlKG5ld1BhdGgsIGRhdGEpO1xyXG4gICAgICAgICAgICByZXR1cm4gYENvcGllZCBmaWxlICcke3NvdXJjZVBhdGh9JyB0byAnJHtuZXdQYXRofScuYDtcclxuICAgICAgICB9IGVsc2UgaWYgKHNyYyBpbnN0YW5jZW9mIFRGb2xkZXIpIHtcclxuICAgICAgICAgICAgYXdhaXQgY29weUZvbGRlclJlY3Vyc2l2ZShhcHAsIHNyYywgbmV3UGF0aCk7XHJcbiAgICAgICAgICAgIHJldHVybiBgQ29waWVkIGZvbGRlciAnJHtzb3VyY2VQYXRofScgdG8gJyR7bmV3UGF0aH0nLmA7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcmV0dXJuIGBTb3VyY2UgaXMgbmVpdGhlciBmaWxlIG5vciBmb2xkZXI6IFwiJHtzb3VyY2VQYXRofVwiYDtcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xyXG4gICAgICAgIHJldHVybiBgRmFpbGVkIHRvIGNvcHk6ICR7ZXJyPy5tZXNzYWdlIHx8IGVycn1gO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogSGVscGVyIHRvIHJlY3Vyc2l2ZWx5IGNvcHkgYSBmb2xkZXIgYW5kIGl0cyBjb250ZW50cy5cclxuICogQHBhcmFtIHtBcHB9IGFwcCAtIFRoZSBPYnNpZGlhbiBBcHAgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB7VEZvbGRlcn0gc3JjRm9sZGVyIC0gVGhlIHNvdXJjZSBmb2xkZXIgdG8gY29weS5cclxuICogQHBhcmFtIHtzdHJpbmd9IGRlc3RQYXRoIC0gVGhlIGRlc3RpbmF0aW9uIHBhdGggZm9yIHRoZSBjb3BpZWQgZm9sZGVyLlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTx2b2lkPn0gQSBwcm9taXNlIHRoYXQgcmVzb2x2ZXMgd2hlbiB0aGUgY29weSBpcyBjb21wbGV0ZS5cclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGNvcHlGb2xkZXJSZWN1cnNpdmUoYXBwOiBBcHAsIHNyY0ZvbGRlcjogVEZvbGRlciwgZGVzdFBhdGg6IHN0cmluZyk6IFByb21pc2U8dm9pZD4ge1xyXG4gICAgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihkZXN0UGF0aCk7XHJcbiAgICBmb3IgKGNvbnN0IGNoaWxkIG9mIHNyY0ZvbGRlci5jaGlsZHJlbikge1xyXG4gICAgICAgIGNvbnN0IGNoaWxkRGVzdFBhdGggPSBkZXN0UGF0aCArICcvJyArIGNoaWxkLm5hbWU7XHJcbiAgICAgICAgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuICAgICAgICAgICAgY29uc3QgZGF0YSA9IGF3YWl0IGFwcC52YXVsdC5yZWFkKGNoaWxkKTtcclxuICAgICAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmNyZWF0ZShjaGlsZERlc3RQYXRoLCBkYXRhKTtcclxuICAgICAgICB9IGVsc2UgaWYgKGNoaWxkIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG4gICAgICAgICAgICBhd2FpdCBjb3B5Rm9sZGVyUmVjdXJzaXZlKGFwcCwgY2hpbGQsIGNoaWxkRGVzdFBhdGgpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIERlbGV0ZXMgYSBmaWxlIG9yIGZvbGRlciAocmVjdXJzaXZlbHkgZm9yIGZvbGRlcnMpLlxyXG4gKiBAcGFyYW0ge0FwcH0gYXBwIC0gVGhlIE9ic2lkaWFuIEFwcCBpbnN0YW5jZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IHBhdGggLSBQYXRoIHRvIHRoZSBmaWxlIG9yIGZvbGRlciB0byBkZWxldGUgKHJlbGF0aXZlIHRvIHZhdWx0IHJvb3QpLlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSBBIHByb21pc2UgZGVzY3JpYmluZyB0aGUgcmVzdWx0IG9mIHRoZSBvcGVyYXRpb24uXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZGVsZXRlRmlsZU9yRm9sZGVyKGFwcDogQXBwLCBwYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3QgdGFyZ2V0ID0gYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChwYXRoKTtcclxuICAgIGlmICghdGFyZ2V0KSByZXR1cm4gYFRhcmdldCBub3QgZm91bmQ6IFwiJHtwYXRofVwiYDtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0LmRlbGV0ZSh0YXJnZXQsIHRydWUpO1xyXG4gICAgICAgIHJldHVybiBgRGVsZXRlZCAnJHtwYXRofScuYDtcclxuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XHJcbiAgICAgICAgcmV0dXJuIGBGYWlsZWQgdG8gZGVsZXRlOiAke2Vycj8ubWVzc2FnZSB8fCBlcnJ9YDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlbmFtZXMgb3IgbW92ZXMgYSBmaWxlIG9yIGZvbGRlciB0byBhIG5ldyBwYXRoLlxyXG4gKiBAcGFyYW0ge0FwcH0gYXBwIC0gVGhlIE9ic2lkaWFuIEFwcCBpbnN0YW5jZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IG9sZFBhdGggLSBDdXJyZW50IHBhdGggb2YgdGhlIGZpbGUgb3IgZm9sZGVyIChyZWxhdGl2ZSB0byB2YXVsdCByb290KS5cclxuICogQHBhcmFtIHtzdHJpbmd9IG5ld1BhdGggLSBOZXcgcGF0aCAocmVsYXRpdmUgdG8gdmF1bHQgcm9vdCkuXHJcbiAqIEByZXR1cm5zIHtQcm9taXNlPHN0cmluZz59IEEgcHJvbWlzZSBkZXNjcmliaW5nIHRoZSByZXN1bHQgb2YgdGhlIG9wZXJhdGlvbi5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiByZW5hbWVGaWxlT3JGb2xkZXIoYXBwOiBBcHAsIG9sZFBhdGg6IHN0cmluZywgbmV3UGF0aDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIGNvbnN0IHRhcmdldCA9IGFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2xkUGF0aCk7XHJcbiAgICBpZiAoIXRhcmdldCkgcmV0dXJuIGBUYXJnZXQgbm90IGZvdW5kOiBcIiR7b2xkUGF0aH1cImA7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5yZW5hbWUodGFyZ2V0LCBuZXdQYXRoKTtcclxuICAgICAgICByZXR1cm4gYFJlbmFtZWQvbW92ZWQgJyR7b2xkUGF0aH0nIHRvICcke25ld1BhdGh9Jy5gO1xyXG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcclxuICAgICAgICByZXR1cm4gYEZhaWxlZCB0byByZW5hbWUvbW92ZTogJHtlcnI/Lm1lc3NhZ2UgfHwgZXJyfWA7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgbmV3IGZpbGUgd2l0aCBvcHRpb25hbCBjb250ZW50LlxyXG4gKiBAcGFyYW0ge0FwcH0gYXBwIC0gVGhlIE9ic2lkaWFuIEFwcCBpbnN0YW5jZS5cclxuICogQHBhcmFtIHtzdHJpbmd9IGZpbGVQYXRoIC0gUGF0aCB0byB0aGUgbmV3IGZpbGUgKHJlbGF0aXZlIHRvIHZhdWx0IHJvb3QpLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gW2NvbnRlbnQ9JyddIC0gT3B0aW9uYWwgaW5pdGlhbCBjb250ZW50IGZvciB0aGUgZmlsZS5cclxuICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gQSBwcm9taXNlIGRlc2NyaWJpbmcgdGhlIHJlc3VsdCBvZiB0aGUgb3BlcmF0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNyZWF0ZUZpbGUoYXBwOiBBcHAsIGZpbGVQYXRoOiBzdHJpbmcsIGNvbnRlbnQgPSAnJyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGF3YWl0IGFwcC52YXVsdC5jcmVhdGUoZmlsZVBhdGgsIGNvbnRlbnQpO1xyXG4gICAgICAgIHJldHVybiBgQ3JlYXRlZCBmaWxlICcke2ZpbGVQYXRofScuYDtcclxuICAgIH0gY2F0Y2ggKGVycjogYW55KSB7XHJcbiAgICAgICAgcmV0dXJuIGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICR7ZXJyPy5tZXNzYWdlIHx8IGVycn1gO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyBmb2xkZXIuXHJcbiAqIEBwYXJhbSB7QXBwfSBhcHAgLSBUaGUgT2JzaWRpYW4gQXBwIGluc3RhbmNlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZm9sZGVyUGF0aCAtIFBhdGggdG8gdGhlIG5ldyBmb2xkZXIgKHJlbGF0aXZlIHRvIHZhdWx0IHJvb3QpLlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSBBIHByb21pc2UgZGVzY3JpYmluZyB0aGUgcmVzdWx0IG9mIHRoZSBvcGVyYXRpb24uXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY3JlYXRlRm9sZGVyKGFwcDogQXBwLCBmb2xkZXJQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBhcHAudmF1bHQuY3JlYXRlRm9sZGVyKGZvbGRlclBhdGgpO1xyXG4gICAgICAgIHJldHVybiBgQ3JlYXRlZCBmb2xkZXIgJyR7Zm9sZGVyUGF0aH0nLmA7XHJcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xyXG4gICAgICAgIHJldHVybiBgRmFpbGVkIHRvIGNyZWF0ZSBmb2xkZXI6ICR7ZXJyPy5tZXNzYWdlIHx8IGVycn1gO1xyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogUmVhZHMgdGhlIGNvbnRlbnRzIG9mIGEgZmlsZSBhcyBhIHN0cmluZy5cclxuICogQHBhcmFtIHtBcHB9IGFwcCAtIFRoZSBPYnNpZGlhbiBBcHAgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlUGF0aCAtIFBhdGggdG8gdGhlIGZpbGUgKHJlbGF0aXZlIHRvIHZhdWx0IHJvb3QpLlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSBBIHByb21pc2Ugd2l0aCBmaWxlIGNvbnRlbnRzIG9yIGFuIGVycm9yIG1lc3NhZ2UuXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcmVhZEZpbGUoYXBwOiBBcHAsIGZpbGVQYXRoOiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3QgZmlsZSA9IGdldFZhdWx0SXRlbTxURmlsZT4oYXBwLCBmaWxlUGF0aCwgJ2ZpbGUnKTtcclxuICAgIGlmICghZmlsZSkgcmV0dXJuIGl0ZW1Ob3RGb3VuZEVycm9yKGZpbGVQYXRoLCAnZmlsZScpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICByZXR1cm4gYXdhaXQgYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xyXG4gICAgICAgIHJldHVybiBgRmFpbGVkIHRvIHJlYWQgZmlsZTogJHtlcnI/Lm1lc3NhZ2UgfHwgZXJyfWA7XHJcbiAgICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBPdmVyd3JpdGVzIHRoZSBjb250ZW50cyBvZiBhIGZpbGUuXHJcbiAqIEBwYXJhbSB7QXBwfSBhcHAgLSBUaGUgT2JzaWRpYW4gQXBwIGluc3RhbmNlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZVBhdGggLSBQYXRoIHRvIHRoZSBmaWxlIChyZWxhdGl2ZSB0byB2YXVsdCByb290KS5cclxuICogQHBhcmFtIHtzdHJpbmd9IGNvbnRlbnQgLSBOZXcgY29udGVudCB0byB3cml0ZS5cclxuICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gQSBwcm9taXNlIGRlc2NyaWJpbmcgdGhlIHJlc3VsdCBvZiB0aGUgb3BlcmF0aW9uLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHdyaXRlRmlsZShhcHA6IEFwcCwgZmlsZVBhdGg6IHN0cmluZywgY29udGVudDogc3RyaW5nKTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICAgIGNvbnN0IGZpbGUgPSBnZXRWYXVsdEl0ZW08VEZpbGU+KGFwcCwgZmlsZVBhdGgsICdmaWxlJyk7XHJcbiAgICBpZiAoIWZpbGUpIHJldHVybiBpdGVtTm90Rm91bmRFcnJvcihmaWxlUGF0aCwgJ2ZpbGUnKTtcclxuICAgIHRyeSB7XHJcbiAgICAgICAgYXdhaXQgYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBjb250ZW50KTtcclxuICAgICAgICByZXR1cm4gYFdyb3RlIHRvIGZpbGUgJyR7ZmlsZVBhdGh9Jy5gO1xyXG4gICAgfSBjYXRjaCAoZXJyOiBhbnkpIHtcclxuICAgICAgICByZXR1cm4gYEZhaWxlZCB0byB3cml0ZSBmaWxlOiAke2Vycj8ubWVzc2FnZSB8fCBlcnJ9YDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEFwcGVuZHMgY29udGVudCB0byB0aGUgZW5kIG9mIGEgZmlsZS5cclxuICogQHBhcmFtIHtBcHB9IGFwcCAtIFRoZSBPYnNpZGlhbiBBcHAgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSB7c3RyaW5nfSBmaWxlUGF0aCAtIFBhdGggdG8gdGhlIGZpbGUgKHJlbGF0aXZlIHRvIHZhdWx0IHJvb3QpLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gY29udGVudCAtIENvbnRlbnQgdG8gYXBwZW5kLlxyXG4gKiBAcmV0dXJucyB7UHJvbWlzZTxzdHJpbmc+fSBBIHByb21pc2UgZGVzY3JpYmluZyB0aGUgcmVzdWx0IG9mIHRoZSBvcGVyYXRpb24uXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gYXBwZW5kVG9GaWxlKGFwcDogQXBwLCBmaWxlUGF0aDogc3RyaW5nLCBjb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3QgZmlsZSA9IGdldFZhdWx0SXRlbTxURmlsZT4oYXBwLCBmaWxlUGF0aCwgJ2ZpbGUnKTtcclxuICAgIGlmICghZmlsZSkgcmV0dXJuIGl0ZW1Ob3RGb3VuZEVycm9yKGZpbGVQYXRoLCAnZmlsZScpO1xyXG4gICAgdHJ5IHtcclxuICAgICAgICBhd2FpdCBhcHAudmF1bHQuYXBwZW5kKGZpbGUsIGNvbnRlbnQpO1xyXG4gICAgICAgIHJldHVybiBgQXBwZW5kZWQgdG8gZmlsZSAnJHtmaWxlUGF0aH0nLmA7XHJcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xyXG4gICAgICAgIHJldHVybiBgRmFpbGVkIHRvIGFwcGVuZCB0byBmaWxlOiAke2Vycj8ubWVzc2FnZSB8fCBlcnJ9YDtcclxuICAgIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFJlYWRzIG9ubHkgdGhlIFlBTUwgZnJvbnRtYXR0ZXIgZnJvbSBhIG1hcmtkb3duIGZpbGUuXHJcbiAqIEBwYXJhbSB7QXBwfSBhcHAgLSBUaGUgT2JzaWRpYW4gQXBwIGluc3RhbmNlLlxyXG4gKiBAcGFyYW0ge3N0cmluZ30gZmlsZVBhdGggLSBQYXRoIHRvIHRoZSBtYXJrZG93biBmaWxlIChyZWxhdGl2ZSB0byB2YXVsdCByb290KS5cclxuICogQHJldHVybnMge1Byb21pc2U8c3RyaW5nPn0gQSBwcm9taXNlIHdpdGggWUFNTCBhcyBhIHN0cmluZywgb3IgYSBtZXNzYWdlIGlmIG5vdCBmb3VuZC9pbnZhbGlkLlxyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHJlYWRZYW1sT25seShhcHA6IEFwcCwgZmlsZVBhdGg6IHN0cmluZyk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBjb25zdCBmaWxlID0gZ2V0VmF1bHRJdGVtPFRGaWxlPihhcHAsIGZpbGVQYXRoLCAnZmlsZScpO1xyXG4gICAgaWYgKCFmaWxlKSByZXR1cm4gaXRlbU5vdEZvdW5kRXJyb3IoZmlsZVBhdGgsICdmaWxlJyk7XHJcbiAgICB0cnkge1xyXG4gICAgICAgIGNvbnN0IGNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQucmVhZChmaWxlKTtcclxuICAgICAgICBjb25zdCBtYXRjaCA9IGNvbnRlbnQubWF0Y2goL14tLS1cXHMqXFxuKFtcXHNcXFNdKj8pXFxuLS0tLyk7XHJcbiAgICAgICAgaWYgKCFtYXRjaCkgcmV0dXJuIGBObyBZQU1MIGZyb250bWF0dGVyIGZvdW5kIGluOiBcIiR7ZmlsZVBhdGh9XCJgO1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnNlZCA9IHlhbWwubG9hZChtYXRjaFsxXSk7XHJcbiAgICAgICAgICAgIHJldHVybiB5YW1sLmR1bXAocGFyc2VkKTtcclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBtYXRjaFsxXTsgLy8gUmV0dXJuIHJhdyBZQU1MIGlmIHBhcnNpbmcgZmFpbHNcclxuICAgICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnI6IGFueSkge1xyXG4gICAgICAgIHJldHVybiBgRmFpbGVkIHRvIHJlYWQgWUFNTDogJHtlcnI/Lm1lc3NhZ2UgfHwgZXJyfWA7XHJcbiAgICB9XHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCwgVEZpbGUgfSBmcm9tICdvYnNpZGlhbic7XHJcbmltcG9ydCB7IFRvb2wsIFRvb2xSZXN1bHQgfSBmcm9tICcuLi9Ub29sUmVnaXN0cnknO1xyXG5pbXBvcnQgeyBjcmVhdGVGaWxlLCB3cml0ZUZpbGUgfSBmcm9tICcuLi8uLi9GaWxlQ2hvb3Nlck1vZGFsJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmlsZVdyaXRlUGFyYW1zIHtcclxuICAgIGZpbGVQYXRoOiBzdHJpbmc7XHJcbiAgICBjb250ZW50OiBzdHJpbmc7XHJcbiAgICBjcmVhdGVJZk5vdEV4aXN0cz86IGJvb2xlYW47XHJcbiAgICBiYWNrdXA/OiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY2xhc3MgRmlsZVdyaXRlVG9vbCBpbXBsZW1lbnRzIFRvb2wge1xyXG4gICAgbmFtZSA9ICdmaWxlX3dyaXRlJztcclxuICAgIGRlc2NyaXB0aW9uID0gJ1dyaXRlL21vZGlmeSBmaWxlIGNvbnRlbnRzIGluIHRoZSB2YXVsdCc7XHJcbiAgICBwYXJhbWV0ZXJzID0ge1xyXG4gICAgICAgIGZpbGVQYXRoOiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1BhdGggdG8gdGhlIGZpbGUgdG8gd3JpdGUgKHJlbGF0aXZlIHRvIHZhdWx0IHJvb3QpJyxcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGNvbnRlbnQ6IHtcclxuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnQ29udGVudCB0byB3cml0ZSB0byB0aGUgZmlsZScsXHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjcmVhdGVJZk5vdEV4aXN0czoge1xyXG4gICAgICAgICAgICB0eXBlOiAnYm9vbGVhbicsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnV2hldGhlciB0byBjcmVhdGUgdGhlIGZpbGUgaWYgaXQgZG9lcyBub3QgZXhpc3QnLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiB0cnVlXHJcbiAgICAgICAgfSxcclxuICAgICAgICBiYWNrdXA6IHtcclxuICAgICAgICAgICAgdHlwZTogJ2Jvb2xlYW4nLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ1doZXRoZXIgdG8gY3JlYXRlIGEgYmFja3VwIGJlZm9yZSBtb2RpZnlpbmcgZXhpc3RpbmcgZmlsZXMnLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwcDogQXBwKSB7fVxyXG5cclxuICAgIGFzeW5jIGV4ZWN1dGUocGFyYW1zOiBhbnksIGNvbnRleHQ6IGFueSk6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xyXG4gICAgICAgIC8vIEhhbmRsZSBib3RoIGZpbGVQYXRoIGFuZCBmaWxlbmFtZSBwYXJhbWV0ZXJzIGZvciBjb21wYXRpYmlsaXR5XHJcbiAgICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXJhbXMuZmlsZVBhdGggfHwgcGFyYW1zLmZpbGVuYW1lO1xyXG4gICAgICAgIGNvbnN0IHsgY29udGVudCwgY3JlYXRlSWZOb3RFeGlzdHMgPSB0cnVlLCBiYWNrdXAgPSB0cnVlIH0gPSBwYXJhbXM7XHJcblxyXG4gICAgICAgIGlmICghZmlsZVBhdGgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdmaWxlUGF0aCBvciBmaWxlbmFtZSBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoY29udGVudCA9PT0gdW5kZWZpbmVkIHx8IGNvbnRlbnQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6ICdjb250ZW50IHBhcmFtZXRlciBpcyByZXF1aXJlZCdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGZpbGUgPSB0aGlzLmFwcC52YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgoZmlsZVBhdGgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKCFmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAvLyBGaWxlIGRvZXNuJ3QgZXhpc3RcclxuICAgICAgICAgICAgICAgIGlmICghY3JlYXRlSWZOb3RFeGlzdHMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBGaWxlIG5vdCBmb3VuZCBhbmQgY3JlYXRlSWZOb3RFeGlzdHMgaXMgZmFsc2U6ICR7ZmlsZVBhdGh9YFxyXG4gICAgICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gVXNlIGV4aXN0aW5nIHV0aWxpdHkgdG8gY3JlYXRlIG5ldyBmaWxlXHJcbiAgICAgICAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBjcmVhdGVGaWxlKHRoaXMuYXBwLCBmaWxlUGF0aCwgY29udGVudCk7XHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChyZXN1bHQuc3RhcnRzV2l0aCgnRmFpbGVkIHRvIGNyZWF0ZScpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGVycm9yOiByZXN1bHRcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ2NyZWF0ZWQnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2l6ZTogY29udGVudC5sZW5ndGhcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAoIShmaWxlIGluc3RhbmNlb2YgVEZpbGUpKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGVycm9yOiBgUGF0aCBpcyBub3QgYSBmaWxlOiAke2ZpbGVQYXRofWBcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEZpbGUgZXhpc3RzLCBoYW5kbGUgYmFja3VwIGlmIHJlcXVlc3RlZFxyXG4gICAgICAgICAgICBpZiAoYmFja3VwKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiYWNrdXBQYXRoID0gYCR7ZmlsZVBhdGh9LmJhY2t1cC4ke0RhdGUubm93KCl9YDtcclxuICAgICAgICAgICAgICAgIGNvbnN0IG9yaWdpbmFsQ29udGVudCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LnJlYWQoZmlsZSk7XHJcbiAgICAgICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgICAgIGF3YWl0IGNyZWF0ZUZpbGUodGhpcy5hcHAsIGJhY2t1cFBhdGgsIG9yaWdpbmFsQ29udGVudCk7XHJcbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIElmIGJhY2t1cCBmYWlscywgd2FybiBidXQgY29udGludWVcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oYEZhaWxlZCB0byBjcmVhdGUgYmFja3VwIGZvciAke2ZpbGVQYXRofTpgLCBlcnJvcik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIFVzZSBleGlzdGluZyB1dGlsaXR5IHRvIG1vZGlmeSBmaWxlXHJcbiAgICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IHdyaXRlRmlsZSh0aGlzLmFwcCwgZmlsZVBhdGgsIGNvbnRlbnQpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKHJlc3VsdC5zdGFydHNXaXRoKCdGYWlsZWQgdG8gd3JpdGUnKSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBlcnJvcjogcmVzdWx0XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdtb2RpZmllZCcsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgc2l6ZTogY29udGVudC5sZW5ndGgsXHJcbiAgICAgICAgICAgICAgICAgICAgYmFja3VwQ3JlYXRlZDogYmFja3VwXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBlcnJvcjogYEZhaWxlZCB0byB3cml0ZSBmaWxlOiAke2Vycm9yLm1lc3NhZ2V9YFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVG9vbCwgVG9vbFJlc3VsdCB9IGZyb20gJy4uL1Rvb2xSZWdpc3RyeSc7XHJcbmltcG9ydCB7IFxyXG4gICAgRmlsZUNoYW5nZVN1Z2dlc3Rpb24sIFxyXG4gICAgaW5zZXJ0RmlsZUNoYW5nZVN1Z2dlc3Rpb24sIFxyXG4gICAgc2hvd0ZpbGVDaGFuZ2VTdWdnZXN0aW9uc01vZGFsLFxyXG4gICAgZm9ybWF0U3VnZ2VzdGlvbkZvckRpc3BsYXkgXHJcbn0gZnJvbSAnLi4vZmlsZWRpZmZoYW5kbGVyJztcclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgRmlsZURpZmZQYXJhbXMge1xyXG4gICAgZmlsZVBhdGg6IHN0cmluZztcclxuICAgIG9yaWdpbmFsQ29udGVudD86IHN0cmluZztcclxuICAgIHN1Z2dlc3RlZENvbnRlbnQ6IHN0cmluZztcclxuICAgIGFjdGlvbj86ICdjb21wYXJlJyB8ICdhcHBseScgfCAnc3VnZ2VzdCc7XHJcbiAgICBpbnNlcnRQb3NpdGlvbj86IG51bWJlcjtcclxufVxyXG5cclxuZXhwb3J0IGNsYXNzIEZpbGVEaWZmVG9vbCBpbXBsZW1lbnRzIFRvb2wge1xyXG4gICAgbmFtZSA9ICdmaWxlX2RpZmYnO1xyXG4gICAgZGVzY3JpcHRpb24gPSAnQ29tcGFyZSBhbmQgc3VnZ2VzdCBjaGFuZ2VzIHRvIGZpbGVzJztcclxuICAgIHBhcmFtZXRlcnMgPSB7XHJcbiAgICAgICAgZmlsZVBhdGg6IHtcclxuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnUGF0aCB0byB0aGUgZmlsZSB0byBjb21wYXJlL21vZGlmeSAocmVsYXRpdmUgdG8gdmF1bHQgcm9vdCknLFxyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgb3JpZ2luYWxDb250ZW50OiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdzdHJpbmcnLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ09yaWdpbmFsIGNvbnRlbnQgZm9yIGNvbXBhcmlzb24gKGlmIG5vdCBwcm92aWRlZCwgcmVhZHMgZnJvbSBmaWxlKScsXHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3VnZ2VzdGVkQ29udGVudDoge1xyXG4gICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdTdWdnZXN0ZWQgbmV3IGNvbnRlbnQgZm9yIHRoZSBmaWxlJyxcclxuICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWVcclxuICAgICAgICB9LFxyXG4gICAgICAgIGFjdGlvbjoge1xyXG4gICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcclxuICAgICAgICAgICAgZW51bTogWydjb21wYXJlJywgJ2FwcGx5JywgJ3N1Z2dlc3QnXSxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdBY3Rpb24gdG8gcGVyZm9ybTogY29tcGFyZSBmaWxlcywgYXBwbHkgY2hhbmdlcywgb3Igc2hvdyBzdWdnZXN0aW9uIFVJJyxcclxuICAgICAgICAgICAgZGVmYXVsdDogJ3N1Z2dlc3QnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBpbnNlcnRQb3NpdGlvbjoge1xyXG4gICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdMaW5lIG51bWJlciB0byBpbnNlcnQgc3VnZ2VzdGlvbiBhdCAoZm9yIHN1Z2dlc3QgYWN0aW9uKScsXHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZVxyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgY29uc3RydWN0b3IocHJpdmF0ZSBhcHA6IEFwcCkge31cclxuXHJcbiAgICBhc3luYyBleGVjdXRlKHBhcmFtczogRmlsZURpZmZQYXJhbXMsIGNvbnRleHQ6IGFueSk6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xyXG4gICAgICAgIGNvbnN0IHsgZmlsZVBhdGgsIG9yaWdpbmFsQ29udGVudCwgc3VnZ2VzdGVkQ29udGVudCwgYWN0aW9uID0gJ3N1Z2dlc3QnLCBpbnNlcnRQb3NpdGlvbiB9ID0gcGFyYW1zO1xyXG5cclxuICAgICAgICBpZiAoIWZpbGVQYXRoKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiAnZmlsZVBhdGggcGFyYW1ldGVyIGlzIHJlcXVpcmVkJ1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKCFzdWdnZXN0ZWRDb250ZW50KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiAnc3VnZ2VzdGVkQ29udGVudCBwYXJhbWV0ZXIgaXMgcmVxdWlyZWQnXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlID0gdGhpcy5hcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGlmICghZmlsZSB8fCAhKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICAgICAgc3VjY2VzczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZXJyb3I6IGBGaWxlIG5vdCBmb3VuZDogJHtmaWxlUGF0aH1gXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50Q29udGVudCA9IG9yaWdpbmFsQ29udGVudCB8fCBhd2FpdCB0aGlzLmFwcC52YXVsdC5yZWFkKGZpbGUpO1xyXG5cclxuICAgICAgICAgICAgc3dpdGNoIChhY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgJ2NvbXBhcmUnOlxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB0aGlzLmNvbXBhcmVGaWxlcyhjdXJyZW50Q29udGVudCwgc3VnZ2VzdGVkQ29udGVudCwgZmlsZVBhdGgpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlICdhcHBseSc6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYXBwbHlDaGFuZ2VzKGZpbGUsIHN1Z2dlc3RlZENvbnRlbnQpO1xyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjYXNlICdzdWdnZXN0JzpcclxuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc2hvd1N1Z2dlc3Rpb24oZmlsZSwgY3VycmVudENvbnRlbnQsIHN1Z2dlc3RlZENvbnRlbnQsIGluc2VydFBvc2l0aW9uKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGBGYWlsZWQgdG8gcHJvY2VzcyBmaWxlIGRpZmY6ICR7ZXJyb3IubWVzc2FnZX1gXHJcbiAgICAgICAgICAgIH07XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgY29tcGFyZUZpbGVzKG9yaWdpbmFsQ29udGVudDogc3RyaW5nLCBzdWdnZXN0ZWRDb250ZW50OiBzdHJpbmcsIGZpbGVQYXRoOiBzdHJpbmcpOiBUb29sUmVzdWx0IHtcclxuICAgICAgICBjb25zdCBkaWZmID0gdGhpcy5nZW5lcmF0ZURpZmYob3JpZ2luYWxDb250ZW50LCBzdWdnZXN0ZWRDb250ZW50KTtcclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICBkYXRhOiB7XHJcbiAgICAgICAgICAgICAgICBhY3Rpb246ICdjb21wYXJlJyxcclxuICAgICAgICAgICAgICAgIGZpbGVQYXRoLFxyXG4gICAgICAgICAgICAgICAgZGlmZixcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZERpZmY6IGZvcm1hdFN1Z2dlc3Rpb25Gb3JEaXNwbGF5KGRpZmYpLFxyXG4gICAgICAgICAgICAgICAgaGFzQ2hhbmdlczogZGlmZi5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIHByaXZhdGUgYXN5bmMgYXBwbHlDaGFuZ2VzKGZpbGU6IFRGaWxlLCBzdWdnZXN0ZWRDb250ZW50OiBzdHJpbmcpOiBQcm9taXNlPFRvb2xSZXN1bHQ+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICBhd2FpdCB0aGlzLmFwcC52YXVsdC5tb2RpZnkoZmlsZSwgc3VnZ2VzdGVkQ29udGVudCk7XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdhcHBseScsXHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZVBhdGg6IGZpbGUucGF0aCxcclxuICAgICAgICAgICAgICAgICAgICBzaXplOiBzdWdnZXN0ZWRDb250ZW50Lmxlbmd0aFxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yOiBhbnkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgIHN1Y2Nlc3M6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZXJyb3I6IGBGYWlsZWQgdG8gYXBwbHkgY2hhbmdlczogJHtlcnJvci5tZXNzYWdlfWBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBhc3luYyBzaG93U3VnZ2VzdGlvbihcclxuICAgICAgICBmaWxlOiBURmlsZSwgXHJcbiAgICAgICAgb3JpZ2luYWxDb250ZW50OiBzdHJpbmcsIFxyXG4gICAgICAgIHN1Z2dlc3RlZENvbnRlbnQ6IHN0cmluZywgXHJcbiAgICAgICAgaW5zZXJ0UG9zaXRpb24/OiBudW1iZXJcclxuICAgICk6IFByb21pc2U8VG9vbFJlc3VsdD4ge1xyXG4gICAgICAgIGNvbnN0IGRpZmYgPSB0aGlzLmdlbmVyYXRlRGlmZihvcmlnaW5hbENvbnRlbnQsIHN1Z2dlc3RlZENvbnRlbnQpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChkaWZmLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgc3VjY2VzczogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIGRhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICBhY3Rpb246ICdzdWdnZXN0JyxcclxuICAgICAgICAgICAgICAgICAgICBmaWxlUGF0aDogZmlsZS5wYXRoLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6ICdObyBjaGFuZ2VzIGRldGVjdGVkJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHN1Z2dlc3Rpb24gd2l0aCBjYWxsYmFja3NcclxuICAgICAgICAgICAgY29uc3Qgc3VnZ2VzdGlvbjogRmlsZUNoYW5nZVN1Z2dlc3Rpb24gPSB7XHJcbiAgICAgICAgICAgICAgICBmaWxlLFxyXG4gICAgICAgICAgICAgICAgc3VnZ2VzdGlvblRleHQ6IGRpZmYsXHJcbiAgICAgICAgICAgICAgICBvbkFjY2VwdDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLnZhdWx0Lm1vZGlmeShmaWxlLCBzdWdnZXN0ZWRDb250ZW50KTtcclxuICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICBvblJlamVjdDogKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIERvIG5vdGhpbmcgb24gcmVqZWN0XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvLyBPcHRpb24gMTogU2hvdyBtb2RhbCBVSVxyXG4gICAgICAgICAgICBzaG93RmlsZUNoYW5nZVN1Z2dlc3Rpb25zTW9kYWwodGhpcy5hcHAsIFtzdWdnZXN0aW9uXSk7XHJcblxyXG4gICAgICAgICAgICAvLyBPcHRpb24gMjogSW5zZXJ0IHN1Z2dlc3Rpb24gYmxvY2sgaW50byBmaWxlIChpZiBpbnNlcnRQb3NpdGlvbiBwcm92aWRlZClcclxuICAgICAgICAgICAgaWYgKGluc2VydFBvc2l0aW9uICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgIGF3YWl0IGluc2VydEZpbGVDaGFuZ2VTdWdnZXN0aW9uKHRoaXMuYXBwLnZhdWx0LCBmaWxlLCBkaWZmLCBpbnNlcnRQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZGF0YToge1xyXG4gICAgICAgICAgICAgICAgICAgIGFjdGlvbjogJ3N1Z2dlc3QnLFxyXG4gICAgICAgICAgICAgICAgICAgIGZpbGVQYXRoOiBmaWxlLnBhdGgsXHJcbiAgICAgICAgICAgICAgICAgICAgZGlmZixcclxuICAgICAgICAgICAgICAgICAgICBzdWdnZXN0aW9uSW5zZXJ0ZWQ6IGluc2VydFBvc2l0aW9uICE9PSB1bmRlZmluZWRcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBgRmFpbGVkIHRvIHNob3cgc3VnZ2VzdGlvbjogJHtlcnJvci5tZXNzYWdlfWBcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZW5lcmF0ZURpZmYob3JpZ2luYWw6IHN0cmluZywgc3VnZ2VzdGVkOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIGNvbnN0IG9yaWdpbmFsTGluZXMgPSBvcmlnaW5hbC5zcGxpdCgnXFxuJyk7XHJcbiAgICAgICAgY29uc3Qgc3VnZ2VzdGVkTGluZXMgPSBzdWdnZXN0ZWQuc3BsaXQoJ1xcbicpO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGNvbnN0IGRpZmY6IHN0cmluZ1tdID0gW107XHJcbiAgICAgICAgY29uc3QgbWF4TGluZXMgPSBNYXRoLm1heChvcmlnaW5hbExpbmVzLmxlbmd0aCwgc3VnZ2VzdGVkTGluZXMubGVuZ3RoKTtcclxuICAgICAgICBcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1heExpbmVzOyBpKyspIHtcclxuICAgICAgICAgICAgY29uc3Qgb3JpZ2luYWxMaW5lID0gb3JpZ2luYWxMaW5lc1tpXSB8fCAnJztcclxuICAgICAgICAgICAgY29uc3Qgc3VnZ2VzdGVkTGluZSA9IHN1Z2dlc3RlZExpbmVzW2ldIHx8ICcnO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgaWYgKG9yaWdpbmFsTGluZSAhPT0gc3VnZ2VzdGVkTGluZSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKG9yaWdpbmFsTGluZSAmJiAhc3VnZ2VzdGVkTGluZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpZmYucHVzaChgLSR7b3JpZ2luYWxMaW5lfWApO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghb3JpZ2luYWxMaW5lICYmIHN1Z2dlc3RlZExpbmUpIHtcclxuICAgICAgICAgICAgICAgICAgICBkaWZmLnB1c2goYCske3N1Z2dlc3RlZExpbmV9YCk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKG9yaWdpbmFsTGluZSAhPT0gc3VnZ2VzdGVkTGluZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpZmYucHVzaChgLSR7b3JpZ2luYWxMaW5lfWApO1xyXG4gICAgICAgICAgICAgICAgICAgIGRpZmYucHVzaChgKyR7c3VnZ2VzdGVkTGluZX1gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBcclxuICAgICAgICByZXR1cm4gZGlmZi5qb2luKCdcXG4nKTtcclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBNb2RhbCwgTm90aWNlLCBURmlsZSwgVmF1bHQsIEVkaXRvciB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBJbnRlcmZhY2UgZm9yIGEgZmlsZSBjaGFuZ2Ugc3VnZ2VzdGlvbiwgaW5jbHVkaW5nIGZpbGUgZGV0YWlscyBhbmQgY2FsbGJhY2tzLlxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBGaWxlQ2hhbmdlU3VnZ2VzdGlvbiB7XHJcbiAgZmlsZTogVEZpbGU7XHJcbiAgc3VnZ2VzdGlvblRleHQ6IHN0cmluZztcclxuICBvbkFjY2VwdD86ICgpID0+IHZvaWQ7XHJcbiAgb25SZWplY3Q/OiAoKSA9PiB2b2lkO1xyXG59XHJcblxyXG4vKipcclxuICogR2VuZXJhdGVzIGEgZm9ybWF0dGVkIHN1Z2dlc3Rpb24gYmxvY2sgc3RyaW5nIGZvciBpbnNlcnRpb24gaW50byBhIGZpbGUuXHJcbiAqIEBwYXJhbSBzdWdnZXN0aW9uVGV4dCBUaGUgc3VnZ2VzdGVkIGNoYW5nZSAoZGlmZiBvciB0ZXh0KS5cclxuICogQHJldHVybnMgVGhlIHN1Z2dlc3Rpb24gYmxvY2sgc3RyaW5nLlxyXG4gKi9cclxuZnVuY3Rpb24gY3JlYXRlU3VnZ2VzdGlvbkJsb2NrKHN1Z2dlc3Rpb25UZXh0OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIHJldHVybiBgXFxgXFxgXFxgc3VnZ2VzdGlvblxcbiR7c3VnZ2VzdGlvblRleHR9XFxuXFxgXFxgXFxgYDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEluc2VydHMgYSBmaWxlIGNoYW5nZSBzdWdnZXN0aW9uIGludG8gYSB0YXJnZXQgZmlsZSBhcyBhIGNvZGUgYmxvY2suXHJcbiAqIEBwYXJhbSB2YXVsdCBUaGUgT2JzaWRpYW4gVmF1bHQgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBmaWxlIFRoZSB0YXJnZXQgVEZpbGUgdG8gaW5zZXJ0IHRoZSBzdWdnZXN0aW9uIGludG8uXHJcbiAqIEBwYXJhbSBzdWdnZXN0aW9uVGV4dCBUaGUgc3VnZ2VzdGVkIGNoYW5nZSAoZGlmZiBvciB0ZXh0KS5cclxuICogQHBhcmFtIHBvc2l0aW9uIE9wdGlvbmFsOiBsaW5lIG51bWJlciB0byBpbnNlcnQgYXQgKGRlZmF1bHQ6IGVuZCBvZiBmaWxlKS5cclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbnNlcnRGaWxlQ2hhbmdlU3VnZ2VzdGlvbihcclxuICB2YXVsdDogVmF1bHQsXHJcbiAgZmlsZTogVEZpbGUsXHJcbiAgc3VnZ2VzdGlvblRleHQ6IHN0cmluZyxcclxuICBwb3NpdGlvbj86IG51bWJlclxyXG4pOiBQcm9taXNlPHZvaWQ+IHtcclxuICBjb25zdCBjb250ZW50ID0gYXdhaXQgdmF1bHQucmVhZChmaWxlKTtcclxuICBjb25zdCBsaW5lcyA9IGNvbnRlbnQuc3BsaXQoJ1xcbicpO1xyXG4gIGNvbnN0IHN1Z2dlc3Rpb25CbG9jayA9IGNyZWF0ZVN1Z2dlc3Rpb25CbG9jayhzdWdnZXN0aW9uVGV4dCk7XHJcblxyXG4gIGlmIChwb3NpdGlvbiAhPT0gdW5kZWZpbmVkICYmIHBvc2l0aW9uID49IDAgJiYgcG9zaXRpb24gPD0gbGluZXMubGVuZ3RoKSB7XHJcbiAgICBsaW5lcy5zcGxpY2UocG9zaXRpb24sIDAsIHN1Z2dlc3Rpb25CbG9jayk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGxpbmVzLnB1c2goc3VnZ2VzdGlvbkJsb2NrKTtcclxuICB9XHJcbiAgYXdhaXQgdmF1bHQubW9kaWZ5KGZpbGUsIGxpbmVzLmpvaW4oJ1xcbicpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIE1vZGFsIGRpYWxvZyB0byBkaXNwbGF5IG11bHRpcGxlIGZpbGUgY2hhbmdlIHN1Z2dlc3Rpb25zLlxyXG4gKi9cclxuY2xhc3MgRmlsZUNoYW5nZVN1Z2dlc3Rpb25zTW9kYWwgZXh0ZW5kcyBNb2RhbCB7XHJcbiAgc3VnZ2VzdGlvbnM6IEZpbGVDaGFuZ2VTdWdnZXN0aW9uW107XHJcblxyXG4gIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBzdWdnZXN0aW9uczogRmlsZUNoYW5nZVN1Z2dlc3Rpb25bXSkge1xyXG4gICAgc3VwZXIoYXBwKTtcclxuICAgIHRoaXMuc3VnZ2VzdGlvbnMgPSBzdWdnZXN0aW9ucztcclxuICB9XHJcblxyXG4gIG9uT3BlbigpIHtcclxuICAgIGNvbnN0IHsgY29udGVudEVsIH0gPSB0aGlzO1xyXG4gICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICBjb250ZW50RWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiAnRmlsZSBDaGFuZ2UgU3VnZ2VzdGlvbnMnIH0pO1xyXG5cclxuICAgIHRoaXMuc3VnZ2VzdGlvbnMuZm9yRWFjaCgocykgPT4ge1xyXG4gICAgICBjb25zdCBjb250YWluZXIgPSBjb250ZW50RWwuY3JlYXRlRGl2KCdzdWdnZXN0aW9uLWNvbnRhaW5lcicpO1xyXG4gICAgICBjb250YWluZXIuY3JlYXRlRWwoJ2g0JywgeyB0ZXh0OiBzLmZpbGUucGF0aCB9KTtcclxuICAgICAgY29udGFpbmVyLmNyZWF0ZUVsKCdwcmUnLCB7IHRleHQ6IHMuc3VnZ2VzdGlvblRleHQgfSk7XHJcblxyXG4gICAgICBjb25zdCBidG5Sb3cgPSBjb250YWluZXIuY3JlYXRlRGl2KCdzdWdnZXN0aW9uLWJ0bi1yb3cnKTtcclxuICAgICAgY29uc3QgYWNjZXB0QnRuID0gYnRuUm93LmNyZWF0ZUVsKCdidXR0b24nLCB7IHRleHQ6ICdBY2NlcHQnIH0pO1xyXG4gICAgICBjb25zdCByZWplY3RCdG4gPSBidG5Sb3cuY3JlYXRlRWwoJ2J1dHRvbicsIHsgdGV4dDogJ1JlamVjdCcgfSk7XHJcblxyXG4gICAgICBhY2NlcHRCdG4ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICBzLm9uQWNjZXB0Py4oKTtcclxuICAgICAgICBuZXcgTm90aWNlKCdTdWdnZXN0aW9uIGFjY2VwdGVkJyk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9O1xyXG4gICAgICByZWplY3RCdG4ub25jbGljayA9ICgpID0+IHtcclxuICAgICAgICBzLm9uUmVqZWN0Py4oKTtcclxuICAgICAgICBuZXcgTm90aWNlKCdTdWdnZXN0aW9uIHJlamVjdGVkJyk7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9O1xyXG4gICAgfSk7XHJcbiAgfVxyXG5cclxuICBvbkNsb3NlKCkge1xyXG4gICAgdGhpcy5jb250ZW50RWwuZW1wdHkoKTtcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBEaXNwbGF5cyBmaWxlIGNoYW5nZSBzdWdnZXN0aW9ucyBpbiBhIG1vZGFsIGRpYWxvZy5cclxuICogXHJcbiAqIFRoaXMgZnVuY3Rpb24gY3JlYXRlcyBhbmQgb3BlbnMgYSBtb2RhbCBkaWFsb2cgdGhhdCBsaXN0cyBhbGwgcHJvdmlkZWQgZmlsZSBjaGFuZ2Ugc3VnZ2VzdGlvbnMuXHJcbiAqIEVhY2ggc3VnZ2VzdGlvbiBpbmNsdWRlcyB0aGUgZmlsZSBwYXRoLCB0aGUgc3VnZ2VzdGVkIGNoYW5nZSB0ZXh0LCBhbmQgYnV0dG9ucyBmb3IgYWNjZXB0aW5nIG9yIHJlamVjdGluZyB0aGUgc3VnZ2VzdGlvbi5cclxuICogV2hlbiBhIHVzZXIgY2xpY2tzIFwiQWNjZXB0XCIgb3IgXCJSZWplY3RcIiwgdGhlIGNvcnJlc3BvbmRpbmcgY2FsbGJhY2sgZnVuY3Rpb25zIChgb25BY2NlcHRgIG9yIGBvblJlamVjdGApIGFyZSBpbnZva2VkIGlmIHByb3ZpZGVkLlxyXG4gKiBcclxuICogQmVoYXZpb3I6XHJcbiAqIC0gVGhlIG1vZGFsIGRpc3BsYXlzIHN1Z2dlc3Rpb25zIGluIGEgc2Nyb2xsYWJsZSBsaXN0IGlmIHRoZXJlIGFyZSBtYW55IHN1Z2dlc3Rpb25zLlxyXG4gKiAtIENsaWNraW5nIFwiQWNjZXB0XCIgdHJpZ2dlcnMgdGhlIGBvbkFjY2VwdGAgY2FsbGJhY2ssIHNob3dzIGEgbm90aWNlLCBhbmQgY2xvc2VzIHRoZSBtb2RhbC5cclxuICogLSBDbGlja2luZyBcIlJlamVjdFwiIHRyaWdnZXJzIHRoZSBgb25SZWplY3RgIGNhbGxiYWNrLCBzaG93cyBhIG5vdGljZSwgYW5kIGNsb3NlcyB0aGUgbW9kYWwuXHJcbiAqIC0gSWYgbm8gY2FsbGJhY2tzIGFyZSBwcm92aWRlZCwgdGhlIGJ1dHRvbnMgc2ltcGx5IGNsb3NlIHRoZSBtb2RhbCB3aXRob3V0IGZ1cnRoZXIgYWN0aW9uLlxyXG4gKiBcclxuICogRWRnZSBDYXNlczpcclxuICogLSBJZiB0aGUgYHN1Z2dlc3Rpb25zYCBhcnJheSBpcyBlbXB0eSwgdGhlIG1vZGFsIHdpbGwgZGlzcGxheSBhIG1lc3NhZ2UgaW5kaWNhdGluZyBubyBzdWdnZXN0aW9ucyBhcmUgYXZhaWxhYmxlLlxyXG4gKiAtIElmIGEgc3VnZ2VzdGlvbiBsYWNrcyBhIGZpbGUgcGF0aCBvciBzdWdnZXN0aW9uIHRleHQsIGl0IHdpbGwgc3RpbGwgYmUgZGlzcGxheWVkIGJ1dCBtYXkgYXBwZWFyIGluY29tcGxldGUuXHJcbiAqIFxyXG4gKiBAcGFyYW0gYXBwIFRoZSBPYnNpZGlhbiBBcHAgaW5zdGFuY2UuXHJcbiAqIEBwYXJhbSBzdWdnZXN0aW9ucyBBcnJheSBvZiBGaWxlQ2hhbmdlU3VnZ2VzdGlvbiBvYmplY3RzLCBlYWNoIGNvbnRhaW5pbmcgZmlsZSBkZXRhaWxzIGFuZCBvcHRpb25hbCBjYWxsYmFja3MuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gc2hvd0ZpbGVDaGFuZ2VTdWdnZXN0aW9uc01vZGFsKFxyXG4gIGFwcDogQXBwLFxyXG4gIHN1Z2dlc3Rpb25zOiBGaWxlQ2hhbmdlU3VnZ2VzdGlvbltdXHJcbikge1xyXG4gIG5ldyBGaWxlQ2hhbmdlU3VnZ2VzdGlvbnNNb2RhbChhcHAsIHN1Z2dlc3Rpb25zKS5vcGVuKCk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBVdGlsaXR5IHRvIGZvcm1hdCBhIGRpZmYgb3Igc3VnZ2VzdGlvbiBmb3IgZGlzcGxheSBpbiB0aGUgVUkuXHJcbiAqIEhpZ2hsaWdodHMgYWRkZWQgbGluZXMgaW4gZ3JlZW4gYW5kIHJlbW92ZWQgbGluZXMgaW4gcmVkLlxyXG4gKiBAcGFyYW0gc3VnZ2VzdGlvblRleHQgVGhlIHN1Z2dlc3Rpb24gb3IgZGlmZiBzdHJpbmcuXHJcbiAqIEByZXR1cm5zIEZvcm1hdHRlZCBIVE1MIHN0cmluZy5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBmb3JtYXRTdWdnZXN0aW9uRm9yRGlzcGxheShzdWdnZXN0aW9uVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICBjb25zdCBodG1sID0gc3VnZ2VzdGlvblRleHRcclxuICAgIC5zcGxpdCgnXFxuJylcclxuICAgIC5tYXAobGluZSA9PiB7XHJcbiAgICAgIGlmIChsaW5lLnN0YXJ0c1dpdGgoJysnKSkgcmV0dXJuIGA8c3BhbiBjbGFzcz1cInN1Z2dlc3Rpb24tYWRkXCI+JHtsaW5lfTwvc3Bhbj5gO1xyXG4gICAgICBpZiAobGluZS5zdGFydHNXaXRoKCctJykpIHJldHVybiBgPHNwYW4gY2xhc3M9XCJzdWdnZXN0aW9uLXJlbW92ZVwiPiR7bGluZX08L3NwYW4+YDtcclxuICAgICAgcmV0dXJuIGxpbmU7XHJcbiAgICB9KVxyXG4gICAgLmpvaW4oJzxicj4nKTtcclxuICByZXR1cm4gYDxwcmU+JHtodG1sfTwvcHJlPmA7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBJbnNlcnRzIGEgc3VnZ2VzdGlvbiBibG9jayBpbmxpbmUgYXQgYSBzcGVjaWZpYyBsaW5lIGluIHRoZSBlZGl0b3IuXHJcbiAqIEBwYXJhbSBlZGl0b3IgVGhlIE9ic2lkaWFuIEVkaXRvciBpbnN0YW5jZS5cclxuICogQHBhcmFtIHN1Z2dlc3Rpb25UZXh0IFRoZSBzdWdnZXN0aW9uIG9yIGRpZmYgc3RyaW5nLlxyXG4gKiBAcGFyYW0gbGluZSBUaGUgbGluZSBudW1iZXIgdG8gaW5zZXJ0IHRoZSBzdWdnZXN0aW9uIGF0LlxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHNob3dJbmxpbmVGaWxlQ2hhbmdlU3VnZ2VzdGlvbihcclxuICBlZGl0b3I6IEVkaXRvcixcclxuICBzdWdnZXN0aW9uVGV4dDogc3RyaW5nLFxyXG4gIGxpbmU6IG51bWJlclxyXG4pIHtcclxuICBjb25zdCBzdWdnZXN0aW9uQmxvY2sgPSBjcmVhdGVTdWdnZXN0aW9uQmxvY2soc3VnZ2VzdGlvblRleHQpO1xyXG4gIGVkaXRvci5yZXBsYWNlUmFuZ2Uoc3VnZ2VzdGlvbkJsb2NrLCB7IGxpbmUsIGNoOiAwIH0pO1xyXG59XHJcblxyXG4vKipcclxuICogSGlnaGxpZ2h0cyBhIGxpbmUgaW4gdGhlIGVkaXRvciB0byBpbmRpY2F0ZSBhIHN1Z2dlc3RlZCBjaGFuZ2UuXHJcbiAqIEBwYXJhbSBlZGl0b3IgVGhlIE9ic2lkaWFuIEVkaXRvciBpbnN0YW5jZS5cclxuICogQHBhcmFtIGxpbmUgVGhlIGxpbmUgbnVtYmVyIHRvIGhpZ2hsaWdodC5cclxuICogQHBhcmFtIGNsYXNzTmFtZSBPcHRpb25hbDogQ1NTIGNsYXNzIGZvciBjdXN0b20gaGlnaGxpZ2h0IHN0eWxpbmcuXHJcbiAqIEBwYXJhbSBkdXJhdGlvbiBPcHRpb25hbDogSG93IGxvbmcgdG8ga2VlcCB0aGUgaGlnaGxpZ2h0IChtcykuXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaGlnaGxpZ2h0RmlsZUNoYW5nZVN1Z2dlc3Rpb24oXHJcbiAgZWRpdG9yOiBFZGl0b3IsXHJcbiAgbGluZTogbnVtYmVyLFxyXG4gIGNsYXNzTmFtZSA9ICdhaS1zdWdnZXN0aW9uLWhpZ2hsaWdodCcsXHJcbiAgZHVyYXRpb24gPSAyMDAwXHJcbikge1xyXG4gIC8vIEB0cy1pZ25vcmU6IENvZGVNaXJyb3IncyBhZGRMaW5lQ2xhc3MgaXMgYXZhaWxhYmxlIGluIE9ic2lkaWFuJ3MgRWRpdG9yIGJ1dCBpcyBub3QgcGFydCBvZiB0aGUgVHlwZVNjcmlwdCBkZWZpbml0aW9ucy5cclxuICBjb25zdCBoYW5kbGUgPSBlZGl0b3IuYWRkTGluZUNsYXNzKGxpbmUsICdiYWNrZ3JvdW5kJywgY2xhc3NOYW1lKTtcclxuICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgIC8vIEB0cy1pZ25vcmU6IENvZGVNaXJyb3IncyByZW1vdmVMaW5lQ2xhc3MgaXMgYXZhaWxhYmxlIGluIE9ic2lkaWFuJ3MgRWRpdG9yLlxyXG4gICAgLy8gQHRzLWlnbm9yZTogQ29kZU1pcnJvcidzIHJlbW92ZUxpbmVDbGFzcyBpcyBhdmFpbGFibGUgaW4gT2JzaWRpYW4ncyBFZGl0b3IgYnV0IG5vdCBpbiBpdHMgdHlwZSBkZWZpbml0aW9ucy5cclxuICAgIGVkaXRvci5yZW1vdmVMaW5lQ2xhc3MobGluZSwgJ2JhY2tncm91bmQnLCBjbGFzc05hbWUpO1xyXG4gIH0sIGR1cmF0aW9uKTtcclxufVxyXG5cclxuLy8gQ29uc3RhbnRzIGZvciBidXR0b24gc3ltYm9sc1xyXG5jb25zdCBCVVRUT05fU1lNQk9MUyA9IHtcclxuICBhY2NlcHQ6ICdcdTI3MTMnLFxyXG4gIHJlamVjdDogJ1x1MjcxNycsXHJcbn07XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhbiBIVE1MIHdpZGdldCBmb3IgYWNjZXB0aW5nIG9yIHJlamVjdGluZyBhbiBpbmxpbmUgc3VnZ2VzdGlvbi5cclxuICogQHBhcmFtIGlkeCBUaGUgaW5kZXggb2YgdGhlIGNoYW5nZSBpbiB0aGUgY2hhbmdlcyBhcnJheS5cclxuICogQHBhcmFtIG9uQWNjZXB0IENhbGxiYWNrIGZ1bmN0aW9uIGZvciBhY2NlcHRpbmcgdGhlIHN1Z2dlc3Rpb24uXHJcbiAqIEBwYXJhbSBvblJlamVjdCBDYWxsYmFjayBmdW5jdGlvbiBmb3IgcmVqZWN0aW5nIHRoZSBzdWdnZXN0aW9uLlxyXG4gKiBAcmV0dXJucyBUaGUgY3JlYXRlZCBIVE1MRWxlbWVudCB3aWRnZXQuXHJcbiAqL1xyXG5mdW5jdGlvbiBjcmVhdGVTdWdnZXN0aW9uV2lkZ2V0KFxyXG4gIGlkeDogbnVtYmVyLFxyXG4gIG9uQWNjZXB0OiAoaTogbnVtYmVyKSA9PiB2b2lkLFxyXG4gIG9uUmVqZWN0OiAoaTogbnVtYmVyKSA9PiB2b2lkXHJcbik6IEhUTUxFbGVtZW50IHtcclxuICBjb25zdCB3aWRnZXQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XHJcbiAgd2lkZ2V0LmNsYXNzTmFtZSA9ICdhaS1zdWdnZXN0aW9uLXdpZGdldCc7XHJcblxyXG4gIGNvbnN0IGFjY2VwdEJ0biA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xyXG4gIGFjY2VwdEJ0bi50ZXh0Q29udGVudCA9IEJVVFRPTl9TWU1CT0xTLmFjY2VwdDtcclxuICBhY2NlcHRCdG4udGl0bGUgPSAnQWNjZXB0IHN1Z2dlc3Rpb24nO1xyXG4gIGFjY2VwdEJ0bi5vbmNsaWNrID0gKGUpID0+IHtcclxuICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgIG9uQWNjZXB0KGlkeCk7XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgcmVqZWN0QnRuID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7XHJcbiAgcmVqZWN0QnRuLnRleHRDb250ZW50ID0gQlVUVE9OX1NZTUJPTFMucmVqZWN0O1xyXG4gIHJlamVjdEJ0bi50aXRsZSA9ICdSZWplY3Qgc3VnZ2VzdGlvbic7XHJcbiAgcmVqZWN0QnRuLm9uY2xpY2sgPSAoZSkgPT4ge1xyXG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgb25SZWplY3QoaWR4KTtcclxuICB9O1xyXG5cclxuICB3aWRnZXQuYXBwZW5kQ2hpbGQoYWNjZXB0QnRuKTtcclxuICB3aWRnZXQuYXBwZW5kQ2hpbGQocmVqZWN0QnRuKTtcclxuICByZXR1cm4gd2lkZ2V0O1xyXG59XHJcblxyXG4vKipcclxuICogUmVuZGVycyBpbmxpbmUgc3VnZ2VzdGlvbnMgd2l0aCBoaWdobGlnaHRzIGFuZCBzdHJpa2V0aHJvdWdocywgYW5kIGFkZHMgYWNjZXB0L3JlamVjdCB3aWRnZXRzLlxyXG4gKiBUaGlzIG1pbWljcyB0aGUgdmlzdWFscyBhbmQgVVggb2Ygb2JzaWRpYW4tcHJvb2ZyZWFkZXIuXHJcbiAqIEBwYXJhbSBlZGl0b3IgVGhlIE9ic2lkaWFuIEVkaXRvciBpbnN0YW5jZS5cclxuICogQHBhcmFtIGNoYW5nZXMgQXJyYXkgb2YgY2hhbmdlIG9iamVjdHMsIGVhY2ggd2l0aCBgZnJvbWAsIGB0b2AsIGB0ZXh0YCwgYW5kIGB0eXBlYCAoJ2FkZCcgfCAncmVtb3ZlJykuXHJcbiAqIEBwYXJhbSBvbkFjY2VwdCBDYWxsYmFjayBmb3IgYWNjZXB0aW5nIGEgc3BlY2lmaWMgY2hhbmdlLlxyXG4gKiBAcGFyYW0gb25SZWplY3QgQ2FsbGJhY2sgZm9yIHJlamVjdGluZyBhIHNwZWNpZmljIGNoYW5nZS5cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJJbmxpbmVTdWdnZXN0aW9ucyhcclxuICBlZGl0b3I6IEVkaXRvcixcclxuICBjaGFuZ2VzOiBBcnJheTx7XHJcbiAgICBmcm9tOiB7IGxpbmU6IG51bWJlcjsgY2g6IG51bWJlciB9O1xyXG4gICAgdG86IHsgbGluZTogbnVtYmVyOyBjaDogbnVtYmVyIH07XHJcbiAgICB0ZXh0OiBzdHJpbmc7XHJcbiAgICB0eXBlOiAnYWRkJyB8ICdyZW1vdmUnO1xyXG4gIH0+LFxyXG4gIG9uQWNjZXB0OiAoY2hhbmdlSWR4OiBudW1iZXIpID0+IHZvaWQsXHJcbiAgb25SZWplY3Q6IChjaGFuZ2VJZHg6IG51bWJlcikgPT4gdm9pZFxyXG4pIHtcclxuICBjb25zdCBiYXRjaFNpemUgPSA1MDsgLy8gUHJvY2VzcyBjaGFuZ2VzIGluIGJhdGNoZXMgb2YgNTBcclxuICBmb3IgKGxldCBpID0gMDsgaSA8IGNoYW5nZXMubGVuZ3RoOyBpICs9IGJhdGNoU2l6ZSkge1xyXG4gICAgY29uc3QgYmF0Y2ggPSBjaGFuZ2VzLnNsaWNlKGksIGkgKyBiYXRjaFNpemUpO1xyXG4gICAgYmF0Y2guZm9yRWFjaCgoY2hhbmdlLCBpZHgpID0+IHtcclxuICAgICAgY29uc3QgY2xhc3NOYW1lID0gY2hhbmdlLnR5cGUgPT09ICdhZGQnID8gJ2FpLXN1Z2dlc3Rpb24tYWRkJyA6ICdhaS1zdWdnZXN0aW9uLXJlbW92ZSc7XHJcbiAgICAgIC8vIEB0cy1pZ25vcmU6IENvZGVNaXJyb3IncyBtYXJrVGV4dCBpcyBhdmFpbGFibGUgaW4gT2JzaWRpYW4ncyBFZGl0b3IgYnV0IGlzIG5vdCBwYXJ0IG9mIHRoZSBUeXBlU2NyaXB0IGRlZmluaXRpb25zIGZvciB0aGUgRWRpdG9yIGludGVyZmFjZS5cclxuICAgICAgZWRpdG9yLm1hcmtUZXh0KGNoYW5nZS5mcm9tLCBjaGFuZ2UudG8sIHtcclxuICAgICAgICBjbGFzc05hbWUsXHJcbiAgICAgICAgY2xlYXJPbkVudGVyOiBmYWxzZSxcclxuICAgICAgICB0aXRsZTogY2hhbmdlLnR5cGUgPT09ICdhZGQnID8gJ1N1Z2dlc3RlZCBhZGRpdGlvbicgOiAnU3VnZ2VzdGVkIHJlbW92YWwnLFxyXG4gICAgICB9KTtcclxuICAgICAgLy8gQHRzLWlnbm9yZTogQ29kZU1pcnJvcidzIGFkZFdpZGdldCBpcyBhdmFpbGFibGUgaW4gT2JzaWRpYW4ncyBFZGl0b3IgYnV0IGlzIG5vdCBpbmNsdWRlZCBpbiB0aGUgVHlwZVNjcmlwdCB0eXBlIGRlZmluaXRpb25zLlxyXG4gICAgICBlZGl0b3IuYWRkV2lkZ2V0KGNoYW5nZS50bywgY3JlYXRlU3VnZ2VzdGlvbldpZGdldChpZHggKyBpLCBvbkFjY2VwdCwgb25SZWplY3QpLCBmYWxzZSk7XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwgImltcG9ydCB7IEFwcCB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHsgVG9vbCwgVG9vbFJlc3VsdCB9IGZyb20gJy4uL1Rvb2xSZWdpc3RyeSc7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIFRob3VnaHRQYXJhbXMge1xyXG4gICAgdGhvdWdodDogc3RyaW5nO1xyXG4gICAgc3RlcD86IG51bWJlcjtcclxuICAgIHRvdGFsU3RlcHM/OiBudW1iZXI7XHJcbiAgICBjYXRlZ29yeT86ICdhbmFseXNpcycgfCAncGxhbm5pbmcnIHwgJ3Byb2JsZW0tc29sdmluZycgfCAncmVmbGVjdGlvbicgfCAnY29uY2x1c2lvbic7XHJcbiAgICBjb25maWRlbmNlPzogbnVtYmVyOyAvLyAxLTEwIHNjYWxlXHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBUaG91Z2h0VG9vbCBpbXBsZW1lbnRzIFRvb2wge1xyXG4gICAgbmFtZSA9ICd0aG91Z2h0JztcclxuICAgIGRlc2NyaXB0aW9uID0gJ1JlY29yZCBhbmQgZGlzcGxheSBBSSByZWFzb25pbmcgc3RlcHMgYW5kIHRob3VnaHQgcHJvY2Vzc2VzJztcclxuICAgIHBhcmFtZXRlcnMgPSB7XHJcbiAgICAgICAgdGhvdWdodDoge1xyXG4gICAgICAgICAgICB0eXBlOiAnc3RyaW5nJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdUaGUgdGhvdWdodCBvciByZWFzb25pbmcgc3RlcCB0byByZWNvcmQnLFxyXG4gICAgICAgICAgICByZXF1aXJlZDogdHJ1ZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc3RlcDoge1xyXG4gICAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcclxuICAgICAgICAgICAgZGVzY3JpcHRpb246ICdDdXJyZW50IHN0ZXAgbnVtYmVyIGluIHRoZSB0aG91Z2h0IHByb2Nlc3MnLFxyXG4gICAgICAgICAgICByZXF1aXJlZDogZmFsc2VcclxuICAgICAgICB9LFxyXG4gICAgICAgIHRvdGFsU3RlcHM6IHtcclxuICAgICAgICAgICAgdHlwZTogJ251bWJlcicsXHJcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVG90YWwgZXhwZWN0ZWQgc3RlcHMgaW4gdGhlIHRob3VnaHQgcHJvY2VzcycsXHJcbiAgICAgICAgICAgIHJlcXVpcmVkOiBmYWxzZVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgY2F0ZWdvcnk6IHtcclxuICAgICAgICAgICAgdHlwZTogJ3N0cmluZycsXHJcbiAgICAgICAgICAgIGVudW06IFsnYW5hbHlzaXMnLCAncGxhbm5pbmcnLCAncHJvYmxlbS1zb2x2aW5nJywgJ3JlZmxlY3Rpb24nLCAnY29uY2x1c2lvbiddLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NhdGVnb3J5IG9mIHRob3VnaHQgZm9yIGJldHRlciBvcmdhbml6YXRpb24nLFxyXG4gICAgICAgICAgICBkZWZhdWx0OiAnYW5hbHlzaXMnXHJcbiAgICAgICAgfSxcclxuICAgICAgICBjb25maWRlbmNlOiB7XHJcbiAgICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxyXG4gICAgICAgICAgICBkZXNjcmlwdGlvbjogJ0NvbmZpZGVuY2UgbGV2ZWwgaW4gdGhpcyB0aG91Z2h0ICgxLTEwIHNjYWxlKScsXHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IDcsXHJcbiAgICAgICAgICAgIG1pbmltdW06IDEsXHJcbiAgICAgICAgICAgIG1heGltdW06IDEwXHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3Rvcihwcml2YXRlIGFwcDogQXBwKSB7fVxyXG5cclxuICAgIGFzeW5jIGV4ZWN1dGUocGFyYW1zOiBUaG91Z2h0UGFyYW1zLCBjb250ZXh0OiBhbnkpOiBQcm9taXNlPFRvb2xSZXN1bHQ+IHtcclxuICAgICAgICBjb25zdCB7IFxyXG4gICAgICAgICAgICB0aG91Z2h0LCBcclxuICAgICAgICAgICAgc3RlcCwgXHJcbiAgICAgICAgICAgIHRvdGFsU3RlcHMsIFxyXG4gICAgICAgICAgICBjYXRlZ29yeSA9ICdhbmFseXNpcycsIFxyXG4gICAgICAgICAgICBjb25maWRlbmNlID0gNyBcclxuICAgICAgICB9ID0gcGFyYW1zO1xyXG5cclxuICAgICAgICBpZiAoIXRob3VnaHQgfHwgdGhvdWdodC50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiAnVGhvdWdodCBjb250ZW50IGNhbm5vdCBiZSBlbXB0eSdcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIC8vIEZvcm1hdCB0aGUgdGhvdWdodCBmb3IgZGlzcGxheVxyXG4gICAgICAgICAgICBjb25zdCB0aW1lc3RhbXAgPSBuZXcgRGF0ZSgpLnRvTG9jYWxlVGltZVN0cmluZygpO1xyXG4gICAgICAgICAgICBjb25zdCBzdGVwSW5mbyA9IHN0ZXAgJiYgdG90YWxTdGVwcyA/IGBTdGVwICR7c3RlcH0vJHt0b3RhbFN0ZXBzfWAgOiBzdGVwID8gYFN0ZXAgJHtzdGVwfWAgOiAnJztcclxuICAgICAgICAgICAgY29uc3QgY29uZmlkZW5jZUJhciA9ICdcdTI1Q0YnLnJlcGVhdChNYXRoLmZsb29yKGNvbmZpZGVuY2UpKSArICdcdTI1Q0InLnJlcGVhdCgxMCAtIE1hdGguZmxvb3IoY29uZmlkZW5jZSkpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgLy8gQ3JlYXRlIHN0cnVjdHVyZWQgdGhvdWdodCBkYXRhXHJcbiAgICAgICAgICAgIGNvbnN0IHRob3VnaHREYXRhID0ge1xyXG4gICAgICAgICAgICAgICAgdGltZXN0YW1wLFxyXG4gICAgICAgICAgICAgICAgdGhvdWdodDogdGhvdWdodC50cmltKCksXHJcbiAgICAgICAgICAgICAgICBzdGVwLFxyXG4gICAgICAgICAgICAgICAgdG90YWxTdGVwcyxcclxuICAgICAgICAgICAgICAgIGNhdGVnb3J5LFxyXG4gICAgICAgICAgICAgICAgY29uZmlkZW5jZSxcclxuICAgICAgICAgICAgICAgIGZvcm1hdHRlZFRob3VnaHQ6IHRoaXMuZm9ybWF0VGhvdWdodCh0aG91Z2h0LnRyaW0oKSwgc3RlcEluZm8sIGNhdGVnb3J5LCBjb25maWRlbmNlLCB0aW1lc3RhbXApXHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICBjb25zb2xlLmxvZygnVGhvdWdodFRvb2w6IFJlY29yZGluZyB0aG91Z2h0OicsIHRob3VnaHREYXRhKTtcclxuXHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgZGF0YTogdGhvdWdodERhdGFcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICB9IGNhdGNoIChlcnJvcjogYW55KSB7XHJcbiAgICAgICAgICAgIHJldHVybiB7XHJcbiAgICAgICAgICAgICAgICBzdWNjZXNzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGVycm9yOiBgRmFpbGVkIHRvIHJlY29yZCB0aG91Z2h0OiAke2Vycm9yLm1lc3NhZ2V9YFxyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBwcml2YXRlIGZvcm1hdFRob3VnaHQodGhvdWdodDogc3RyaW5nLCBzdGVwSW5mbzogc3RyaW5nLCBjYXRlZ29yeTogc3RyaW5nLCBjb25maWRlbmNlOiBudW1iZXIsIHRpbWVzdGFtcDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgICAgICBjb25zdCBjYXRlZ29yeUVtb2ppID0gdGhpcy5nZXRDYXRlZ29yeUVtb2ppKGNhdGVnb3J5KTtcclxuICAgICAgICBjb25zdCBjb25maWRlbmNlRGlzcGxheSA9IGAke2NvbmZpZGVuY2V9LzEwYDtcclxuICAgICAgICBcclxuICAgICAgICBsZXQgZm9ybWF0dGVkID0gYCR7Y2F0ZWdvcnlFbW9qaX0gKioke2NhdGVnb3J5LnRvVXBwZXJDYXNlKCl9KipgO1xyXG4gICAgICAgIFxyXG4gICAgICAgIGlmIChzdGVwSW5mbykge1xyXG4gICAgICAgICAgICBmb3JtYXR0ZWQgKz0gYCB8ICR7c3RlcEluZm99YDtcclxuICAgICAgICB9XHJcbiAgICAgICAgXHJcbiAgICAgICAgZm9ybWF0dGVkICs9IGAgfCBDb25maWRlbmNlOiAke2NvbmZpZGVuY2VEaXNwbGF5fSB8ICR7dGltZXN0YW1wfVxcbmA7XHJcbiAgICAgICAgZm9ybWF0dGVkICs9IGA+ICR7dGhvdWdodH1gO1xyXG4gICAgICAgIFxyXG4gICAgICAgIHJldHVybiBmb3JtYXR0ZWQ7XHJcbiAgICB9XHJcblxyXG4gICAgcHJpdmF0ZSBnZXRDYXRlZ29yeUVtb2ppKGNhdGVnb3J5OiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgICAgIHN3aXRjaCAoY2F0ZWdvcnkpIHtcclxuICAgICAgICAgICAgY2FzZSAnYW5hbHlzaXMnOiByZXR1cm4gJ1x1RDgzRFx1REQwRCc7XHJcbiAgICAgICAgICAgIGNhc2UgJ3BsYW5uaW5nJzogcmV0dXJuICdcdUQ4M0RcdURDQ0InO1xyXG4gICAgICAgICAgICBjYXNlICdwcm9ibGVtLXNvbHZpbmcnOiByZXR1cm4gJ1x1RDgzRVx1RERFOSc7XHJcbiAgICAgICAgICAgIGNhc2UgJ3JlZmxlY3Rpb24nOiByZXR1cm4gJ1x1RDgzRVx1REQxNCc7XHJcbiAgICAgICAgICAgIGNhc2UgJ2NvbmNsdXNpb24nOiByZXR1cm4gJ1x1MjcwNSc7XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6IHJldHVybiAnXHVEODNEXHVEQ0FEJztcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBIZWxwZXIgbWV0aG9kIHRvIHZhbGlkYXRlIGNvbmZpZGVuY2UgcmFuZ2VcclxuICAgICAqL1xyXG4gICAgcHJpdmF0ZSB2YWxpZGF0ZUNvbmZpZGVuY2UoY29uZmlkZW5jZTogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgICAgICByZXR1cm4gTWF0aC5tYXgoMSwgTWF0aC5taW4oMTAsIE1hdGguZmxvb3IoY29uZmlkZW5jZSkpKTtcclxuICAgIH1cclxufVxyXG4iLCAiaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJy4uL3R5cGVzJztcclxuXHJcbi8qKlxyXG4gKiBQYXJzZXMgYSBnaXZlbiB0ZXh0IHNlbGVjdGlvbiBpbnRvIGFuIGFycmF5IG9mIG1lc3NhZ2Ugb2JqZWN0c1xyXG4gKiBcclxuICogVGhlIGZ1bmN0aW9uIGludGVycHJldHMgbGluZXMgb2YgdGV4dCBzZXBhcmF0ZWQgYnkgY2hhdEJvdW5kYXJ5U3RyaW5nIChkZWZhdWx0cyB0byAnLS0tLScpIGFzIGJvdW5kYXJpZXNcclxuICogYmV0d2VlbiB1c2VyIGFuZCBhc3Npc3RhbnQgbWVzc2FnZXMuXHJcbiAqIFxyXG4gKiBAcGFyYW0gc2VsZWN0aW9uIC0gVGhlIHRleHQgc2VsZWN0aW9uIHRvIHBhcnNlXHJcbiAqIEBwYXJhbSBjaGF0U2VwYXJhdG9yIC0gVGhlIHN0cmluZyB0aGF0IHNlcGFyYXRlcyB1c2VyIGFuZCBhc3Npc3RhbnQgbWVzc2FnZXNcclxuICogQHBhcmFtIGNoYXRCb3VuZGFyeVN0cmluZyAtIFRoZSBzdHJpbmcgdGhhdCBpbmRpY2F0ZXMgdGhlIHN0YXJ0IGFuZCBlbmQgb2YgdGhlIGNoYXRcclxuICogQHJldHVybnMgQXJyYXkgb2YgbWVzc2FnZSBvYmplY3RzIHdpdGggcm9sZXMgYW5kIGNvbnRlbnRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBwYXJzZVNlbGVjdGlvbihcclxuICAgIHNlbGVjdGlvbjogc3RyaW5nLFxyXG4gICAgY2hhdFNlcGFyYXRvcjogc3RyaW5nLFxyXG4gICAgY2hhdEJvdW5kYXJ5U3RyaW5nPzogc3RyaW5nXHJcbik6IE1lc3NhZ2VbXSB7XHJcbiAgICAvLyBJZiBubyBjaGF0Qm91bmRhcnlTdHJpbmcgaXMgcHJvdmlkZWQsIHN0YXJ0IHBhcnNpbmcgcmlnaHQgYXdheVxyXG4gICAgbGV0IGluc2lkZUNoYXQgPSAhY2hhdEJvdW5kYXJ5U3RyaW5nO1xyXG5cclxuICAgIGNvbnN0IGxpbmVzID0gc2VsZWN0aW9uLnNwbGl0KCdcXG4nKTtcclxuICAgIGxldCBtZXNzYWdlczogTWVzc2FnZVtdID0gW107XHJcbiAgICBsZXQgY3VycmVudFJvbGU6ICd1c2VyJyB8ICdhc3Npc3RhbnQnID0gJ3VzZXInO1xyXG4gICAgbGV0IGN1cnJlbnRDb250ZW50ID0gJyc7XHJcblxyXG4gICAgZm9yIChjb25zdCBsaW5lIG9mIGxpbmVzKSB7XHJcbiAgICAgICAgaWYgKGNoYXRCb3VuZGFyeVN0cmluZyAmJiBsaW5lLnRyaW0oKSA9PT0gY2hhdEJvdW5kYXJ5U3RyaW5nKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHN0YXJ0IGFuZCBlbmQgYm91bmRhcmllcyBhcmUgdGhlIHNhbWUsIHRvZ2dsZSBvbmx5IG9uY2VcclxuICAgICAgICAgICAgaWYgKCFpbnNpZGVDaGF0ICYmIGN1cnJlbnRDb250ZW50LnRyaW0oKSkge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGU6IGN1cnJlbnRSb2xlLCBjb250ZW50OiBjdXJyZW50Q29udGVudC50cmltKCkgfSk7XHJcbiAgICAgICAgICAgICAgICBjdXJyZW50Q29udGVudCA9ICcnO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGluc2lkZUNoYXQgPSAhaW5zaWRlQ2hhdDtcclxuICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIWluc2lkZUNoYXQpIGNvbnRpbnVlOyAvLyBJZ25vcmUgbGluZXMgb3V0c2lkZSBvZiBhIGNoYXRcclxuXHJcbiAgICAgICAgaWYgKGxpbmUudHJpbSgpID09PSBjaGF0U2VwYXJhdG9yKSB7XHJcbiAgICAgICAgICAgIC8vIElmIHdlIGhpdCBhIHNlcGFyYXRvciwgc2F2ZSB0aGUgY3VycmVudCBtZXNzYWdlIGFuZCBzd2l0Y2ggcm9sZXNcclxuICAgICAgICAgICAgaWYgKGN1cnJlbnRDb250ZW50LnRyaW0oKSkge1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZXMucHVzaCh7IHJvbGU6IGN1cnJlbnRSb2xlLCBjb250ZW50OiBjdXJyZW50Q29udGVudC50cmltKCkgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgY3VycmVudFJvbGUgPSBjdXJyZW50Um9sZSA9PT0gJ3VzZXInID8gJ2Fzc2lzdGFudCcgOiAndXNlcic7XHJcbiAgICAgICAgICAgIGN1cnJlbnRDb250ZW50ID0gJyc7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgY3VycmVudENvbnRlbnQgKz0gbGluZSArICdcXG4nO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvLyBTYXZlIGFueSByZW1haW5pbmcgY29udGVudFxyXG4gICAgaWYgKGN1cnJlbnRDb250ZW50LnRyaW0oKSkge1xyXG4gICAgICAgIG1lc3NhZ2VzLnB1c2goeyByb2xlOiBjdXJyZW50Um9sZSwgY29udGVudDogY3VycmVudENvbnRlbnQudHJpbSgpIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBtZXNzYWdlcztcclxufVxyXG4iLCAiaW1wb3J0IHsgQXBwLCBXb3Jrc3BhY2VMZWFmLCBJdGVtVmlldywgU2V0dGluZywgTm90aWNlLCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IE15UGx1Z2luIGZyb20gJy4uL21haW4nOyAvLyBJbXBvcnQgTXlQbHVnaW5cclxuaW1wb3J0IHsgY3JlYXRlUHJvdmlkZXIsIGdldEFsbEF2YWlsYWJsZU1vZGVscywgZ2V0UHJvdmlkZXJGcm9tVW5pZmllZE1vZGVsIH0gZnJvbSAnLi4vLi4vcHJvdmlkZXJzJztcclxuaW1wb3J0IHsgQ29sbGFwc2libGVTZWN0aW9uUmVuZGVyZXIgfSBmcm9tICcuL2NoYXQvQ29sbGFwc2libGVTZWN0aW9uJztcclxuXHJcbmNvbnN0IFZJRVdfVFlQRV9NT0RFTF9TRVRUSU5HUyA9ICdtb2RlbC1zZXR0aW5ncy12aWV3JztcclxuXHJcbi8qKlxyXG4gKiBBSSBNb2RlbCBTZXR0aW5ncyBWaWV3XHJcbiAqXHJcbiAqIFRoaXMgdmlldyBwcm92aWRlcyBhIHVzZXIgaW50ZXJmYWNlIGZvciBjb25maWd1cmluZyBBSSBtb2RlbCBzZXR0aW5ncy5cclxuICogSXQgYWxsb3dzIHVzZXJzIHRvOlxyXG4gKiAtIFNlbGVjdCB0aGVpciBwcmVmZXJyZWQgQUkgcHJvdmlkZXIgKE9wZW5BSSwgQW50aHJvcGljLCBHZW1pbmksIE9sbGFtYSlcclxuICogLSBDb25maWd1cmUgcHJvdmlkZXItc3BlY2lmaWMgc2V0dGluZ3MgbGlrZSBBUEkga2V5cyBhbmQgbW9kZWxzXHJcbiAqIC0gQWRqdXN0IGNvbW1vbiBzZXR0aW5ncyBsaWtlIHRlbXBlcmF0dXJlIGFuZCB0b2tlbiBsaW1pdHNcclxuICogLSBUZXN0IEFQSSBjb25uZWN0aW9ucyBhbmQgcmVmcmVzaCBhdmFpbGFibGUgbW9kZWxzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgTW9kZWxTZXR0aW5nc1ZpZXcgZXh0ZW5kcyBJdGVtVmlldyB7XHJcbiAgICBwbHVnaW46IE15UGx1Z2luO1xyXG4gICAgcHJpdmF0ZSBfb25TZXR0aW5nc0NoYW5nZSA9ICgpID0+IHtcclxuICAgICAgICB0aGlzLm9uT3BlbigpO1xyXG4gICAgfTtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcihsZWFmOiBXb3Jrc3BhY2VMZWFmLCBwbHVnaW46IE15UGx1Z2luKSB7XHJcbiAgICAgICAgc3VwZXIobGVhZik7XHJcbiAgICAgICAgdGhpcy5wbHVnaW4gPSBwbHVnaW47XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Vmlld1R5cGUoKTogc3RyaW5nIHtcclxuICAgICAgICByZXR1cm4gVklFV19UWVBFX01PREVMX1NFVFRJTkdTO1xyXG4gICAgfVxyXG5cclxuICAgIGdldERpc3BsYXlUZXh0KCk6IHN0cmluZyB7XHJcbiAgICAgICAgcmV0dXJuICdBSSBNb2RlbCBTZXR0aW5ncyc7XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0SWNvbigpOiBzdHJpbmcge1xyXG4gICAgICAgIHJldHVybiAnZmlsZS1zbGlkZXJzJztcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBvbk9wZW4oKSB7XHJcbiAgICAgICAgY29uc3QgeyBjb250ZW50RWwgfSA9IHRoaXM7XHJcbiAgICAgICAgY29udGVudEVsLmVtcHR5KCk7XHJcbiAgICAgICAgLy8gUmVnaXN0ZXIgc2V0dGluZ3MgY2hhbmdlIGxpc3RlbmVyIChhdm9pZCBkdXBsaWNhdGUgbGlzdGVuZXJzKVxyXG4gICAgICAgIHRoaXMucGx1Z2luLm9mZlNldHRpbmdzQ2hhbmdlKHRoaXMuX29uU2V0dGluZ3NDaGFuZ2UpO1xyXG4gICAgICAgIHRoaXMucGx1Z2luLm9uU2V0dGluZ3NDaGFuZ2UodGhpcy5fb25TZXR0aW5nc0NoYW5nZSk7XHJcbiAgICAgICAgY29uc3Qgc2V0dGluZ3NTZWN0aW9ucyA9IG5ldyAoYXdhaXQgaW1wb3J0KCcuL2NoYXQvU2V0dGluZ3NTZWN0aW9ucycpKS5TZXR0aW5nc1NlY3Rpb25zKHRoaXMucGx1Z2luKTtcclxuICAgICAgICBhd2FpdCBzZXR0aW5nc1NlY3Rpb25zLnJlbmRlckFsbFNldHRpbmdzKGNvbnRlbnRFbCwgeyBvblJlZnJlc2g6ICgpID0+IHRoaXMub25PcGVuKCkgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgb25DbG9zZSgpIHtcclxuICAgICAgICB0aGlzLnBsdWdpbi5vZmZTZXR0aW5nc0NoYW5nZSh0aGlzLl9vblNldHRpbmdzQ2hhbmdlKTtcclxuICAgICAgICAvLyBDbGVhbiB1cCBhbnkgcmVzb3VyY2VzIGlmIG5lZWRlZFxyXG4gICAgfVxyXG5cclxufVxyXG4iLCAiaW1wb3J0IHsgTm90aWNlLCBURmlsZSwgQXBwIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBNZXNzYWdlLCBNeVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIEV4dHJhY3QgY29udGVudCB1bmRlciBhIHNwZWNpZmljIGhlYWRlciBpbiBhIG5vdGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBleHRyYWN0Q29udGVudFVuZGVySGVhZGVyKGNvbnRlbnQ6IHN0cmluZywgaGVhZGVyVGV4dDogc3RyaW5nKTogc3RyaW5nIHtcclxuICAgIGNvbnN0IGxpbmVzID0gY29udGVudC5zcGxpdCgnXFxuJyk7XHJcbiAgICBsZXQgZm91bmRIZWFkZXIgPSBmYWxzZTtcclxuICAgIGxldCBleHRyYWN0ZWRDb250ZW50ID0gW107XHJcbiAgICBsZXQgaGVhZGVyTGV2ZWwgPSAwO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICBjb25zdCBsaW5lID0gbGluZXNbaV07XHJcbiAgICAgICAgY29uc3QgaGVhZGVyTWF0Y2ggPSBsaW5lLm1hdGNoKC9eKCMrKVxccysoLio/KSQvKTtcclxuICAgICAgICBpZiAoaGVhZGVyTWF0Y2gpIHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudEhlYWRlckxldmVsID0gaGVhZGVyTWF0Y2hbMV0ubGVuZ3RoO1xyXG4gICAgICAgICAgICBjb25zdCBjdXJyZW50SGVhZGVyVGV4dCA9IGhlYWRlck1hdGNoWzJdLnRyaW0oKTtcclxuICAgICAgICAgICAgaWYgKGZvdW5kSGVhZGVyKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEhlYWRlckxldmVsIDw9IGhlYWRlckxldmVsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoY3VycmVudEhlYWRlclRleHQudG9Mb3dlckNhc2UoKSA9PT0gaGVhZGVyVGV4dC50b0xvd2VyQ2FzZSgpKSB7XHJcbiAgICAgICAgICAgICAgICBmb3VuZEhlYWRlciA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICBoZWFkZXJMZXZlbCA9IGN1cnJlbnRIZWFkZXJMZXZlbDtcclxuICAgICAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQucHVzaChsaW5lKTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChmb3VuZEhlYWRlcikge1xyXG4gICAgICAgICAgICBleHRyYWN0ZWRDb250ZW50LnB1c2gobGluZSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGV4dHJhY3RlZENvbnRlbnQuam9pbignXFxuJyk7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBQcm9jZXNzIGEgc2luZ2xlIG1lc3NhZ2UgY29udGVudCB0byBpbmNsdWRlIE9ic2lkaWFuIG5vdGUgY29udGVudHMsIHJlY3Vyc2l2ZWx5IGlmIGVuYWJsZWRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzT2JzaWRpYW5MaW5rcyhcclxuICAgIGNvbnRlbnQ6IHN0cmluZyxcclxuICAgIGFwcDogQXBwLFxyXG4gICAgc2V0dGluZ3M6IE15UGx1Z2luU2V0dGluZ3MsXHJcbiAgICB2aXNpdGVkTm90ZXM6IFNldDxzdHJpbmc+ID0gbmV3IFNldCgpLFxyXG4gICAgY3VycmVudERlcHRoOiBudW1iZXIgPSAwXHJcbik6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICBpZiAoIXNldHRpbmdzLmVuYWJsZU9ic2lkaWFuTGlua3MpIHJldHVybiBjb250ZW50O1xyXG4gICAgY29uc3QgbGlua1JlZ2V4ID0gL1xcW1xcWyguKj8pXFxdXFxdL2c7XHJcbiAgICBsZXQgbWF0Y2g7XHJcbiAgICBsZXQgcHJvY2Vzc2VkQ29udGVudCA9IGNvbnRlbnQ7XHJcbiAgICB3aGlsZSAoKG1hdGNoID0gbGlua1JlZ2V4LmV4ZWMoY29udGVudCkpICE9PSBudWxsKSB7XHJcbiAgICAgICAgaWYgKG1hdGNoICYmIG1hdGNoWzBdICYmIG1hdGNoWzFdKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IHBhcnRzID0gbWF0Y2hbMV0uc3BsaXQoJ3wnKTtcclxuICAgICAgICAgICAgY29uc3QgZmlsZVBhdGggPSBwYXJ0c1swXS50cmltKCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGRpc3BsYXlUZXh0ID0gcGFydHMubGVuZ3RoID4gMSA/IHBhcnRzWzFdLnRyaW0oKSA6IGZpbGVQYXRoO1xyXG4gICAgICAgICAgICB0cnkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGZpbGVQYXRoKSB8fCBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGAke2ZpbGVQYXRofS5tZGApO1xyXG4gICAgICAgICAgICAgICAgaWYgKCFmaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgYWxsRmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKTtcclxuICAgICAgICAgICAgICAgICAgICBmaWxlID0gYWxsRmlsZXMuZmluZChmID0+IGYubmFtZSA9PT0gZmlsZVBhdGggfHwgZi5uYW1lID09PSBgJHtmaWxlUGF0aH0ubWRgIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGYuYmFzZW5hbWUudG9Mb3dlckNhc2UoKSA9PT0gZmlsZVBhdGgudG9Mb3dlckNhc2UoKSB8fFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmLnBhdGggPT09IGZpbGVQYXRoIHx8IGYucGF0aCA9PT0gYCR7ZmlsZVBhdGh9Lm1kYCkgfHwgbnVsbDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlck1hdGNoID0gZmlsZVBhdGgubWF0Y2goLyguKj8pIyguKikvKTtcclxuICAgICAgICAgICAgICAgIGxldCBleHRyYWN0ZWRDb250ZW50ID0gXCJcIjtcclxuICAgICAgICAgICAgICAgIGlmIChmaWxlICYmIGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIFByZXZlbnQgaW5maW5pdGUgcmVjdXJzaW9uXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHZpc2l0ZWROb3Rlcy5oYXMoZmlsZS5wYXRoKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBleHRyYWN0ZWRDb250ZW50ID0gJ1tSZWN1cnNpdmUgbGluayBvbWl0dGVkOiBhbHJlYWR5IGluY2x1ZGVkXSc7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaXRlZE5vdGVzLmFkZChmaWxlLnBhdGgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBub3RlQ29udGVudCA9IGF3YWl0IGFwcC52YXVsdC5jYWNoZWRSZWFkKGZpbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyTWF0Y2gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGV4dHJhY3RlZENvbnRlbnQgPSBleHRyYWN0Q29udGVudFVuZGVySGVhZGVyKG5vdGVDb250ZW50LCBoZWFkZXJNYXRjaFsyXS50cmltKCkpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudCA9IG5vdGVDb250ZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIFJlY3Vyc2l2ZWx5IGV4cGFuZCBsaW5rcyBpZiBlbmFibGVkIGFuZCBkZXB0aCBub3QgZXhjZWVkZWRcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHNldHRpbmdzLmV4cGFuZExpbmtlZE5vdGVzUmVjdXJzaXZlbHkgJiYgY3VycmVudERlcHRoIDwgKHNldHRpbmdzLm1heExpbmtFeHBhbnNpb25EZXB0aCA/PyAyKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZXh0cmFjdGVkQ29udGVudCA9IGF3YWl0IHByb2Nlc3NPYnNpZGlhbkxpbmtzKGV4dHJhY3RlZENvbnRlbnQsIGFwcCwgc2V0dGluZ3MsIHZpc2l0ZWROb3RlcywgY3VycmVudERlcHRoICsgMSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvY2Vzc2VkQ29udGVudCA9IHByb2Nlc3NlZENvbnRlbnQucmVwbGFjZShcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF0Y2hbMF0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGAke21hdGNoWzBdfVxcblxcbi0tLVxcbk5vdGUgTmFtZTogJHtmaWxlUGF0aH1cXG5Db250ZW50OlxcbiR7ZXh0cmFjdGVkQ29udGVudH1cXG4tLS1cXG5gXHJcbiAgICAgICAgICAgICAgICAgICAgKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbmV3IE5vdGljZShgRmlsZSBub3QgZm91bmQ6ICR7ZmlsZVBhdGh9LiBFbnN1cmUgdGhlIGZpbGUgbmFtZSBhbmQgcGF0aCBhcmUgY29ycmVjdC5gKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIG5ldyBOb3RpY2UoYEVycm9yIHByb2Nlc3NpbmcgbGluayBmb3IgJHtmaWxlUGF0aH06ICR7ZXJyb3IubWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHJldHVybiBwcm9jZXNzZWRDb250ZW50O1xyXG59XHJcblxyXG4vKipcclxuICogUHJvY2VzcyBjb250ZXh0IG5vdGVzIHNwZWNpZmllZCBpbiB0aGUgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzQ29udGV4dE5vdGVzKGNvbnRleHROb3Rlc1RleHQ6IHN0cmluZywgYXBwOiBBcHApOiBQcm9taXNlPHN0cmluZz4ge1xyXG4gICAgY29uc3QgbGlua1JlZ2V4ID0gL1xcW1xcWyguKj8pXFxdXFxdL2c7XHJcbiAgICBsZXQgbWF0Y2g7XHJcbiAgICBsZXQgY29udGV4dENvbnRlbnQgPSBcIlwiO1xyXG4gICAgd2hpbGUgKChtYXRjaCA9IGxpbmtSZWdleC5leGVjKGNvbnRleHROb3Rlc1RleHQpKSAhPT0gbnVsbCkge1xyXG4gICAgICAgIGlmIChtYXRjaCAmJiBtYXRjaFsxXSkge1xyXG4gICAgICAgICAgICBjb25zdCBmaWxlTmFtZSA9IG1hdGNoWzFdLnRyaW0oKTtcclxuICAgICAgICAgICAgdHJ5IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGhlYWRlck1hdGNoID0gZmlsZU5hbWUubWF0Y2goLyguKj8pIyguKikvKTtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJhc2VGaWxlTmFtZSA9IGhlYWRlck1hdGNoID8gaGVhZGVyTWF0Y2hbMV0udHJpbSgpIDogZmlsZU5hbWU7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJOYW1lID0gaGVhZGVyTWF0Y2ggPyBoZWFkZXJNYXRjaFsyXS50cmltKCkgOiBudWxsO1xyXG4gICAgICAgICAgICAgICAgbGV0IGZpbGUgPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGJhc2VGaWxlTmFtZSkgfHxcclxuICAgICAgICAgICAgICAgICAgICBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKGAke2Jhc2VGaWxlTmFtZX0ubWRgKTtcclxuICAgICAgICAgICAgICAgIGlmICghZmlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGFsbEZpbGVzID0gYXBwLnZhdWx0LmdldEZpbGVzKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmlsZSA9IGFsbEZpbGVzLmZpbmQoZiA9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmLmJhc2VuYW1lLnRvTG93ZXJDYXNlKCkgPT09IGJhc2VGaWxlTmFtZS50b0xvd2VyQ2FzZSgpIHx8XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGYubmFtZS50b0xvd2VyQ2FzZSgpID09PSBgJHtiYXNlRmlsZU5hbWUudG9Mb3dlckNhc2UoKX0ubWRgXHJcbiAgICAgICAgICAgICAgICAgICAgKSB8fCBudWxsO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGZpbGUgJiYgZmlsZSBpbnN0YW5jZW9mIFRGaWxlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgbm90ZUNvbnRlbnQgPSBhd2FpdCBhcHAudmF1bHQuY2FjaGVkUmVhZChmaWxlKTtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Q29udGVudCArPSBgLS0tXFxuRnJvbSBub3RlOiAke2ZpbGUuYmFzZW5hbWV9XFxuXFxuYDtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaGVhZGVyTmFtZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJDb250ZW50ID0gZXh0cmFjdENvbnRlbnRVbmRlckhlYWRlcihub3RlQ29udGVudCwgaGVhZGVyTmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRleHRDb250ZW50ICs9IGhlYWRlckNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGV4dENvbnRlbnQgKz0gbm90ZUNvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRleHRDb250ZW50ICs9ICdcXG5cXG4nO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjb250ZXh0Q29udGVudCArPSBgTm90ZSBub3QgZm91bmQ6ICR7ZmlsZU5hbWV9XFxuXFxuYDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHRDb250ZW50ICs9IGBFcnJvciBwcm9jZXNzaW5nIG5vdGUgJHtmaWxlTmFtZX06ICR7ZXJyb3IubWVzc2FnZX1cXG5cXG5gO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNvbnRleHRDb250ZW50O1xyXG59XHJcblxyXG4vKipcclxuICogUHJvY2VzcyBhbiBhcnJheSBvZiBtZXNzYWdlcyB0byBpbmNsdWRlIE9ic2lkaWFuIG5vdGUgY29udGVudHNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBwcm9jZXNzTWVzc2FnZXMobWVzc2FnZXM6IE1lc3NhZ2VbXSwgYXBwOiBBcHAsIHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzKTogUHJvbWlzZTxNZXNzYWdlW10+IHtcclxuICAgIGNvbnN0IHByb2Nlc3NlZE1lc3NhZ2VzOiBNZXNzYWdlW10gPSBbXTtcclxuICAgIGlmIChzZXR0aW5ncy5lbmFibGVDb250ZXh0Tm90ZXMgJiYgc2V0dGluZ3MuY29udGV4dE5vdGVzKSB7XHJcbiAgICAgICAgY29uc3QgY29udGV4dENvbnRlbnQgPSBhd2FpdCBwcm9jZXNzQ29udGV4dE5vdGVzKHNldHRpbmdzLmNvbnRleHROb3RlcywgYXBwKTtcclxuICAgICAgICBpZiAoY29udGV4dENvbnRlbnQpIHtcclxuICAgICAgICAgICAgaWYgKG1lc3NhZ2VzLmxlbmd0aCA+IDAgJiYgbWVzc2FnZXNbMF0ucm9sZSA9PT0gJ3N5c3RlbScpIHtcclxuICAgICAgICAgICAgICAgIHByb2Nlc3NlZE1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICAgICAgICAgIHJvbGU6ICdzeXN0ZW0nLFxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6IGAke21lc3NhZ2VzWzBdLmNvbnRlbnR9XFxuXFxuSGVyZSBpcyBhZGRpdGlvbmFsIGNvbnRleHQ6XFxuJHtjb250ZXh0Q29udGVudH1gXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIG1lc3NhZ2VzID0gbWVzc2FnZXMuc2xpY2UoMSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBwcm9jZXNzZWRNZXNzYWdlcy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICByb2xlOiAnc3lzdGVtJyxcclxuICAgICAgICAgICAgICAgICAgICBjb250ZW50OiBgSGVyZSBpcyBjb250ZXh0IGZvciBvdXIgY29udmVyc2F0aW9uOlxcbiR7Y29udGV4dENvbnRlbnR9YFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGNvbnN0IG1lc3NhZ2Ugb2YgbWVzc2FnZXMpIHtcclxuICAgICAgICBjb25zdCBwcm9jZXNzZWRDb250ZW50ID0gYXdhaXQgcHJvY2Vzc09ic2lkaWFuTGlua3MobWVzc2FnZS5jb250ZW50LCBhcHAsIHNldHRpbmdzLCBuZXcgU2V0KCkpO1xyXG4gICAgICAgIHByb2Nlc3NlZE1lc3NhZ2VzLnB1c2goe1xyXG4gICAgICAgICAgICByb2xlOiBtZXNzYWdlLnJvbGUsXHJcbiAgICAgICAgICAgIGNvbnRlbnQ6IHByb2Nlc3NlZENvbnRlbnRcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuICAgIHJldHVybiBwcm9jZXNzZWRNZXNzYWdlcztcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldENvbnRleHROb3Rlc0NvbnRlbnQoY29udGV4dE5vdGVzVGV4dDogc3RyaW5nLCBhcHA6IEFwcCk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgICByZXR1cm4gcHJvY2Vzc0NvbnRleHROb3Rlcyhjb250ZXh0Tm90ZXNUZXh0LCBhcHApO1xyXG59XHJcbiIsICJpbXBvcnQgeyBNeVBsdWdpblNldHRpbmdzIH0gZnJvbSAnLi4vdHlwZXMnO1xyXG5cclxuLyoqXHJcbiAqIEdlbmVyYXRlIHRoZSBzeXN0ZW0gbWVzc2FnZSB3aXRoIG9wdGlvbmFsIGRhdGUgYW5kIHRpbWUgaW5mb3JtYXRpb25cclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRTeXN0ZW1NZXNzYWdlKHNldHRpbmdzOiBNeVBsdWdpblNldHRpbmdzKTogc3RyaW5nIHtcclxuICAgIGxldCBzeXN0ZW1NZXNzYWdlID0gc2V0dGluZ3Muc3lzdGVtTWVzc2FnZTtcclxuXHJcbiAgICBpZiAoc2V0dGluZ3MuaW5jbHVkZURhdGVXaXRoU3lzdGVtTWVzc2FnZSkge1xyXG4gICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gbmV3IERhdGUoKS50b0lTT1N0cmluZygpLnNwbGl0KCdUJylbMF07XHJcbiAgICAgICAgc3lzdGVtTWVzc2FnZSA9IGAke3N5c3RlbU1lc3NhZ2V9XFxuXFxuVGhlIGN1cnJlbnQgZGF0ZSBpcyAke2N1cnJlbnREYXRlfS5gO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzZXR0aW5ncy5pbmNsdWRlVGltZVdpdGhTeXN0ZW1NZXNzYWdlKSB7XHJcbiAgICAgICAgY29uc3Qgbm93ID0gbmV3IERhdGUoKTtcclxuICAgICAgICBjb25zdCB0aW1lWm9uZU9mZnNldCA9IG5vdy5nZXRUaW1lem9uZU9mZnNldCgpO1xyXG4gICAgICAgIGNvbnN0IG9mZnNldEhvdXJzID0gTWF0aC5hYnModGltZVpvbmVPZmZzZXQpIC8gNjA7XHJcbiAgICAgICAgY29uc3Qgb2Zmc2V0TWludXRlcyA9IE1hdGguYWJzKHRpbWVab25lT2Zmc2V0KSAlIDYwO1xyXG4gICAgICAgIGNvbnN0IHNpZ24gPSB0aW1lWm9uZU9mZnNldCA+IDAgPyAnLScgOiAnKyc7XHJcblxyXG4gICAgICAgIGNvbnN0IGN1cnJlbnRUaW1lID0gbm93LnRvTG9jYWxlVGltZVN0cmluZygpO1xyXG4gICAgICAgIGNvbnN0IHRpbWVab25lU3RyaW5nID0gYFVUQyR7c2lnbn0ke29mZnNldEhvdXJzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX06JHtvZmZzZXRNaW51dGVzLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKX1gO1xyXG4gICAgICAgIHN5c3RlbU1lc3NhZ2UgPSBgJHtzeXN0ZW1NZXNzYWdlfVxcblxcblRoZSBjdXJyZW50IHRpbWUgaXMgJHtjdXJyZW50VGltZX0gJHt0aW1lWm9uZVN0cmluZ30uYDtcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gc3lzdGVtTWVzc2FnZTtcclxufVxyXG4iXSwKICAibWFwcGluZ3MiOiAiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxJQUFhLHNCQUlBLHdCQUlBLCtCQUVBLHFCQTZCQTtBQXZDYjtBQUFBO0FBQU8sSUFBTSx1QkFBdUI7QUFJN0IsSUFBTSx5QkFBeUI7QUFJL0IsSUFBTSxnQ0FBZ0M7QUFFdEMsSUFBTSxzQkFBc0I7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBNkI1QixJQUFNLDhCQUNUO0FBQUE7QUFBQTs7O0FDeENKO0FBQUE7QUFBQTtBQUFBO0FBQUEsSUFvUGE7QUFw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QUFBO0FBQUE7QUFBQTtBQUFBO0FBQUEsRUFPQSxNQUFjLGdCQUFnQixVQUF5QztBQUNuRSxXQUFPLGdCQUFnQixVQUFVLEtBQUssS0FBSyxLQUFLLFFBQVE7QUFBQSxFQUM1RDtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSxFQU9BLE1BQWEsdUJBQXVCLGtCQUEyQztBQUMzRSxXQUFPLHVCQUF1QixrQkFBa0IsS0FBSyxHQUFHO0FBQUEsRUFDNUQ7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBLEVBTUEsV0FBVztBQUNQLGNBQVMsb0JBQW9CLE9BQU8sd0JBQXdCO0FBQzVELGNBQVMsb0JBQW9CLE9BQU8sY0FBYztBQUFBLEVBQ3REO0FBQ0o7QUEvYkksY0FyQmlCLFdBcUJGLHVCQUFzQixvQkFBSSxJQUFZO0FBckJ6RCxJQUFxQixXQUFyQjsiLAogICJuYW1lcyI6IFsidHlwZSIsICJzdGF0dXMiLCAiZmV0Y2giLCAiUmVxdWVzdCIsICJSZXNwb25zZSIsICJIZWFkZXJzIiwgIkZvcm1EYXRhIiwgIkJsb2IiLCAiRmlsZSIsICJSZWFkYWJsZVN0cmVhbSIsICJfYSIsICJzdHIiLCAiUmVhZGFibGVTdHJlYW0iLCAiX2EiLCAiX2EiLCAiRmlsZSIsICJ0eXBlIiwgImpzb24iLCAiX2EiLCAiZmV0Y2giLCAib3B0cyIsICJQYWdlIiwgInJldHJ5TWVzc2FnZSIsICJfYSIsICJfX2NsYXNzUHJpdmF0ZUZpZWxkU2V0IiwgIl9fY2xhc3NQcml2YXRlRmllbGRHZXQiLCAiX2EiLCAiX0JldGFNZXNzYWdlU3RyZWFtX2dldEZpbmFsTWVzc2FnZSIsICJfQmV0YU1lc3NhZ2VTdHJlYW1fZ2V0RmluYWxUZXh0IiwgIl9CZXRhTWVzc2FnZVN0cmVhbV9iZWdpblJlcXVlc3QiLCAiX0JldGFNZXNzYWdlU3RyZWFtX2FkZFN0cmVhbUV2ZW50IiwgIl9CZXRhTWVzc2FnZVN0cmVhbV9lbmRSZXF1ZXN0IiwgIl9CZXRhTWVzc2FnZVN0cmVhbV9hY2N1bXVsYXRlTWVzc2FnZSIsICJjaHVuayIsICJfYSIsICJfYSIsICJCYXRjaGVzIiwgImluaXRfYmF0Y2hlcyIsICJjaGVja05ldmVyIiwgIkpTT05fQlVGX1BST1BFUlRZIiwgIl9fY2xhc3NQcml2YXRlRmllbGRTZXQiLCAiX19jbGFzc1ByaXZhdGVGaWVsZEdldCIsICJfYSIsICJfTWVzc2FnZVN0cmVhbV9nZXRGaW5hbE1lc3NhZ2UiLCAiX01lc3NhZ2VTdHJlYW1fZ2V0RmluYWxUZXh0IiwgIl9NZXNzYWdlU3RyZWFtX2JlZ2luUmVxdWVzdCIsICJfTWVzc2FnZVN0cmVhbV9hZGRTdHJlYW1FdmVudCIsICJfTWVzc2FnZVN0cmVhbV9lbmRSZXF1ZXN0IiwgIl9NZXNzYWdlU3RyZWFtX2FjY3VtdWxhdGVNZXNzYWdlIiwgImNodW5rIiwgIk1lc3NhZ2VzIiwgIkRFUFJFQ0FURURfTU9ERUxTIiwgImluaXRfbWVzc2FnZXMiLCAiQmF0Y2hlcyIsICJfYSIsICJNb2RlbHMiLCAiaW5pdF9tb2RlbHMiLCAiX2EiLCAiTWVzc2FnZXMiLCAiTW9kZWxzIiwgIl9hIiwgIl9hIiwgIl9hIiwgIl9hIiwgIl9hIiwgImltcG9ydF9vYnNpZGlhbiIsICJleGNlcHRpb24iLCAibWFwIiwgInNjaGVtYSIsICJ0eXBlIiwgInN0ciIsICJzdHJpbmciLCAiZXh0ZW5kIiwgIl9hIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgIlNldHRpbmdzTW9kYWwiLCAiaW1wb3J0X29ic2lkaWFuIiwgImRlYnVnIiwgInByb2Nlc3NNZXNzYWdlcyIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJfYSIsICJERUZBVUxUX1NFVFRJTkdTIiwgIkRFRkFVTFRfVElUTEVfUFJPTVBUIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAidGltZXN0YW1wIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIl9hIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAidHlwZSIsICJfYSIsICJpbXBvcnRfb2JzaWRpYW4iLCAicmVzdWx0IiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiX2EiLCAidGltZXN0YW1wIiwgIl9hIiwgImNvbnRlbnQiLCAic2V0dXBJbnB1dEhhbmRsZXIiLCAiQUdFTlRfU1lTVEVNX1BST01QVCIsICJpbXBvcnRfb2JzaWRpYW4iLCAiVklFV19UWVBFX01PREVMX1NFVFRJTkdTIiwgImltcG9ydF9vYnNpZGlhbiIsICJfYSIsICJfYSIsICJnZW5lcmF0ZU5vdGVUaXRsZSIsICJnZW5lcmF0ZVlhbWxBdHRyaWJ1dGUiXQp9Cg==
